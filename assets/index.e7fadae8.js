(function(){const fe=document.createElement("link").relList;if(fe&&fe.supports&&fe.supports("modulepreload"))return;for(const V of document.querySelectorAll('link[rel="modulepreload"]'))B(V);new MutationObserver(V=>{for(const m of V)if(m.type==="childList")for(const c of m.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&B(c)}).observe(document,{childList:!0,subtree:!0});function t(V){const m={};return V.integrity&&(m.integrity=V.integrity),V.referrerpolicy&&(m.referrerPolicy=V.referrerpolicy),V.crossorigin==="use-credentials"?m.credentials="include":V.crossorigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function B(V){if(V.ep)return;V.ep=!0;const m=t(V);fetch(V.href,m)}})();function $0(ve,fe){const t=Object.create(null),B=ve.split(",");for(let V=0;V<B.length;V++)t[B[V]]=!0;return fe?V=>!!t[V.toLowerCase()]:V=>!!t[V]}function q0(ve){if(yi(ve)){const fe={};for(let t=0;t<ve.length;t++){const B=ve[t],V=Rs(B)?iw(B):q0(B);if(V)for(const m in V)fe[m]=V[m]}return fe}else{if(Rs(ve))return ve;if(Vo(ve))return ve}}const rw=/;(?![^(]*\))/g,nw=/:([^]+)/,aw=/\/\*.*?\*\//gs;function iw(ve){const fe={};return ve.replace(aw,"").split(rw).forEach(t=>{if(t){const B=t.split(nw);B.length>1&&(fe[B[0].trim()]=B[1].trim())}}),fe}function Jl(ve){let fe="";if(Rs(ve))fe=ve;else if(yi(ve))for(let t=0;t<ve.length;t++){const B=Jl(ve[t]);B&&(fe+=B+" ")}else if(Vo(ve))for(const t in ve)ve[t]&&(fe+=t+" ");return fe.trim()}const ow="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",sw=$0(ow);function s1(ve){return!!ve||ve===""}function lw(ve,fe){if(ve.length!==fe.length)return!1;let t=!0;for(let B=0;t&&B<ve.length;B++)t=cd(ve[B],fe[B]);return t}function cd(ve,fe){if(ve===fe)return!0;let t=Xy(ve),B=Xy(fe);if(t||B)return t&&B?ve.getTime()===fe.getTime():!1;if(t=Vv(ve),B=Vv(fe),t||B)return ve===fe;if(t=yi(ve),B=yi(fe),t||B)return t&&B?lw(ve,fe):!1;if(t=Vo(ve),B=Vo(fe),t||B){if(!t||!B)return!1;const V=Object.keys(ve).length,m=Object.keys(fe).length;if(V!==m)return!1;for(const c in ve){const A=ve.hasOwnProperty(c),T=fe.hasOwnProperty(c);if(A&&!T||!A&&T||!cd(ve[c],fe[c]))return!1}}return String(ve)===String(fe)}function uw(ve,fe){return ve.findIndex(t=>cd(t,fe))}const uc=ve=>Rs(ve)?ve:ve==null?"":yi(ve)||Vo(ve)&&(ve.toString===c1||!Bi(ve.toString))?JSON.stringify(ve,l1,2):String(ve),l1=(ve,fe)=>fe&&fe.__v_isRef?l1(ve,fe.value):Wh(fe)?{[`Map(${fe.size})`]:[...fe.entries()].reduce((t,[B,V])=>(t[`${B} =>`]=V,t),{})}:hd(fe)?{[`Set(${fe.size})`]:[...fe.values()]}:Vo(fe)&&!yi(fe)&&!f1(fe)?String(fe):fe,Uo={},Yh=[],hc=()=>{},cw=()=>!1,fw=/^on[^a-z]/,fd=ve=>fw.test(ve),eg=ve=>ve.startsWith("onUpdate:"),bl=Object.assign,tg=(ve,fe)=>{const t=ve.indexOf(fe);t>-1&&ve.splice(t,1)},hw=Object.prototype.hasOwnProperty,no=(ve,fe)=>hw.call(ve,fe),yi=Array.isArray,Wh=ve=>Jv(ve)==="[object Map]",hd=ve=>Jv(ve)==="[object Set]",Xy=ve=>Jv(ve)==="[object Date]",Bi=ve=>typeof ve=="function",Rs=ve=>typeof ve=="string",Vv=ve=>typeof ve=="symbol",Vo=ve=>ve!==null&&typeof ve=="object",u1=ve=>Vo(ve)&&Bi(ve.then)&&Bi(ve.catch),c1=Object.prototype.toString,Jv=ve=>c1.call(ve),vw=ve=>Jv(ve).slice(8,-1),f1=ve=>Jv(ve)==="[object Object]",rg=ve=>Rs(ve)&&ve!=="NaN"&&ve[0]!=="-"&&""+parseInt(ve,10)===ve,Wp=$0(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),vd=ve=>{const fe=Object.create(null);return t=>fe[t]||(fe[t]=ve(t))},pw=/-(\w)/g,Bc=vd(ve=>ve.replace(pw,(fe,t)=>t?t.toUpperCase():"")),dw=/\B([A-Z])/g,nv=vd(ve=>ve.replace(dw,"-$1").toLowerCase()),pd=vd(ve=>ve.charAt(0).toUpperCase()+ve.slice(1)),c0=vd(ve=>ve?`on${pd(ve)}`:""),Hv=(ve,fe)=>!Object.is(ve,fe),Xp=(ve,fe)=>{for(let t=0;t<ve.length;t++)ve[t](fe)},qp=(ve,fe,t)=>{Object.defineProperty(ve,fe,{configurable:!0,enumerable:!1,value:t})},Gv=ve=>{const fe=parseFloat(ve);return isNaN(fe)?ve:fe};let Zy;const gw=()=>Zy||(Zy=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let gu;class h1{constructor(fe=!1){this.detached=fe,this.active=!0,this.effects=[],this.cleanups=[],this.parent=gu,!fe&&gu&&(this.index=(gu.scopes||(gu.scopes=[])).push(this)-1)}run(fe){if(this.active){const t=gu;try{return gu=this,fe()}finally{gu=t}}}on(){gu=this}off(){gu=this.parent}stop(fe){if(this.active){let t,B;for(t=0,B=this.effects.length;t<B;t++)this.effects[t].stop();for(t=0,B=this.cleanups.length;t<B;t++)this.cleanups[t]();if(this.scopes)for(t=0,B=this.scopes.length;t<B;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!fe){const V=this.parent.scopes.pop();V&&V!==this&&(this.parent.scopes[this.index]=V,V.index=this.index)}this.parent=void 0,this.active=!1}}}function v1(ve){return new h1(ve)}function yw(ve,fe=gu){fe&&fe.active&&fe.effects.push(ve)}function mw(){return gu}function xw(ve){gu&&gu.cleanups.push(ve)}const ng=ve=>{const fe=new Set(ve);return fe.w=0,fe.n=0,fe},p1=ve=>(ve.w&Ef)>0,d1=ve=>(ve.n&Ef)>0,bw=({deps:ve})=>{if(ve.length)for(let fe=0;fe<ve.length;fe++)ve[fe].w|=Ef},_w=ve=>{const{deps:fe}=ve;if(fe.length){let t=0;for(let B=0;B<fe.length;B++){const V=fe[B];p1(V)&&!d1(V)?V.delete(ve):fe[t++]=V,V.w&=~Ef,V.n&=~Ef}fe.length=t}},L0=new WeakMap;let Iv=0,Ef=1;const P0=30;let cc;const nh=Symbol(""),D0=Symbol("");class ag{constructor(fe,t=null,B){this.fn=fe,this.scheduler=t,this.active=!0,this.deps=[],this.parent=void 0,yw(this,B)}run(){if(!this.active)return this.fn();let fe=cc,t=Af;for(;fe;){if(fe===this)return;fe=fe.parent}try{return this.parent=cc,cc=this,Af=!0,Ef=1<<++Iv,Iv<=P0?bw(this):jy(this),this.fn()}finally{Iv<=P0&&_w(this),Ef=1<<--Iv,cc=this.parent,Af=t,this.parent=void 0,this.deferStop&&this.stop()}}stop(){cc===this?this.deferStop=!0:this.active&&(jy(this),this.onStop&&this.onStop(),this.active=!1)}}function jy(ve){const{deps:fe}=ve;if(fe.length){for(let t=0;t<fe.length;t++)fe[t].delete(ve);fe.length=0}}let Af=!0;const g1=[];function av(){g1.push(Af),Af=!1}function iv(){const ve=g1.pop();Af=ve===void 0?!0:ve}function xu(ve,fe,t){if(Af&&cc){let B=L0.get(ve);B||L0.set(ve,B=new Map);let V=B.get(t);V||B.set(t,V=ng()),y1(V)}}function y1(ve,fe){let t=!1;Iv<=P0?d1(ve)||(ve.n|=Ef,t=!p1(ve)):t=!ve.has(cc),t&&(ve.add(cc),cc.deps.push(ve))}function tf(ve,fe,t,B,V,m){const c=L0.get(ve);if(!c)return;let A=[];if(fe==="clear")A=[...c.values()];else if(t==="length"&&yi(ve)){const T=Gv(B);c.forEach((e,a)=>{(a==="length"||a>=T)&&A.push(e)})}else switch(t!==void 0&&A.push(c.get(t)),fe){case"add":yi(ve)?rg(t)&&A.push(c.get("length")):(A.push(c.get(nh)),Wh(ve)&&A.push(c.get(D0)));break;case"delete":yi(ve)||(A.push(c.get(nh)),Wh(ve)&&A.push(c.get(D0)));break;case"set":Wh(ve)&&A.push(c.get(nh));break}if(A.length===1)A[0]&&R0(A[0]);else{const T=[];for(const e of A)e&&T.push(...e);R0(ng(T))}}function R0(ve,fe){const t=yi(ve)?ve:[...ve];for(const B of t)B.computed&&Ky(B);for(const B of t)B.computed||Ky(B)}function Ky(ve,fe){(ve!==cc||ve.allowRecurse)&&(ve.scheduler?ve.scheduler():ve.run())}const ww=$0("__proto__,__v_isRef,__isVue"),m1=new Set(Object.getOwnPropertyNames(Symbol).filter(ve=>ve!=="arguments"&&ve!=="caller").map(ve=>Symbol[ve]).filter(Vv)),Tw=ig(),Aw=ig(!1,!0),Mw=ig(!0),Jy=Sw();function Sw(){const ve={};return["includes","indexOf","lastIndexOf"].forEach(fe=>{ve[fe]=function(...t){const B=lo(this);for(let m=0,c=this.length;m<c;m++)xu(B,"get",m+"");const V=B[fe](...t);return V===-1||V===!1?B[fe](...t.map(lo)):V}}),["push","pop","shift","unshift","splice"].forEach(fe=>{ve[fe]=function(...t){av();const B=lo(this)[fe].apply(this,t);return iv(),B}}),ve}function ig(ve=!1,fe=!1){return function(B,V,m){if(V==="__v_isReactive")return!ve;if(V==="__v_isReadonly")return ve;if(V==="__v_isShallow")return fe;if(V==="__v_raw"&&m===(ve?fe?Hw:T1:fe?w1:_1).get(B))return B;const c=yi(B);if(!ve&&c&&no(Jy,V))return Reflect.get(Jy,V,m);const A=Reflect.get(B,V,m);return(Vv(V)?m1.has(V):ww(V))||(ve||xu(B,"get",V),fe)?A:hs(A)?c&&rg(V)?A:A.value:Vo(A)?ve?A1(A):gd(A):A}}const Ew=x1(),Cw=x1(!0);function x1(ve=!1){return function(t,B,V,m){let c=t[B];if(Zh(c)&&hs(c)&&!hs(V))return!1;if(!ve&&(!ed(V)&&!Zh(V)&&(c=lo(c),V=lo(V)),!yi(t)&&hs(c)&&!hs(V)))return c.value=V,!0;const A=yi(t)&&rg(B)?Number(B)<t.length:no(t,B),T=Reflect.set(t,B,V,m);return t===lo(m)&&(A?Hv(V,c)&&tf(t,"set",B,V):tf(t,"add",B,V)),T}}function kw(ve,fe){const t=no(ve,fe);ve[fe];const B=Reflect.deleteProperty(ve,fe);return B&&t&&tf(ve,"delete",fe,void 0),B}function Lw(ve,fe){const t=Reflect.has(ve,fe);return(!Vv(fe)||!m1.has(fe))&&xu(ve,"has",fe),t}function Pw(ve){return xu(ve,"iterate",yi(ve)?"length":nh),Reflect.ownKeys(ve)}const b1={get:Tw,set:Ew,deleteProperty:kw,has:Lw,ownKeys:Pw},Dw={get:Mw,set(ve,fe){return!0},deleteProperty(ve,fe){return!0}},Rw=bl({},b1,{get:Aw,set:Cw}),og=ve=>ve,dd=ve=>Reflect.getPrototypeOf(ve);function Pp(ve,fe,t=!1,B=!1){ve=ve.__v_raw;const V=lo(ve),m=lo(fe);t||(fe!==m&&xu(V,"get",fe),xu(V,"get",m));const{has:c}=dd(V),A=B?og:t?ug:Yv;if(c.call(V,fe))return A(ve.get(fe));if(c.call(V,m))return A(ve.get(m));ve!==V&&ve.get(fe)}function Dp(ve,fe=!1){const t=this.__v_raw,B=lo(t),V=lo(ve);return fe||(ve!==V&&xu(B,"has",ve),xu(B,"has",V)),ve===V?t.has(ve):t.has(ve)||t.has(V)}function Rp(ve,fe=!1){return ve=ve.__v_raw,!fe&&xu(lo(ve),"iterate",nh),Reflect.get(ve,"size",ve)}function Qy(ve){ve=lo(ve);const fe=lo(this);return dd(fe).has.call(fe,ve)||(fe.add(ve),tf(fe,"add",ve,ve)),this}function $y(ve,fe){fe=lo(fe);const t=lo(this),{has:B,get:V}=dd(t);let m=B.call(t,ve);m||(ve=lo(ve),m=B.call(t,ve));const c=V.call(t,ve);return t.set(ve,fe),m?Hv(fe,c)&&tf(t,"set",ve,fe):tf(t,"add",ve,fe),this}function qy(ve){const fe=lo(this),{has:t,get:B}=dd(fe);let V=t.call(fe,ve);V||(ve=lo(ve),V=t.call(fe,ve)),B&&B.call(fe,ve);const m=fe.delete(ve);return V&&tf(fe,"delete",ve,void 0),m}function em(){const ve=lo(this),fe=ve.size!==0,t=ve.clear();return fe&&tf(ve,"clear",void 0,void 0),t}function Ip(ve,fe){return function(B,V){const m=this,c=m.__v_raw,A=lo(c),T=fe?og:ve?ug:Yv;return!ve&&xu(A,"iterate",nh),c.forEach((e,a)=>B.call(V,T(e),T(a),m))}}function Fp(ve,fe,t){return function(...B){const V=this.__v_raw,m=lo(V),c=Wh(m),A=ve==="entries"||ve===Symbol.iterator&&c,T=ve==="keys"&&c,e=V[ve](...B),a=t?og:fe?ug:Yv;return!fe&&xu(m,"iterate",T?D0:nh),{next(){const{value:i,done:n}=e.next();return n?{value:i,done:n}:{value:A?[a(i[0]),a(i[1])]:a(i),done:n}},[Symbol.iterator](){return this}}}}function bf(ve){return function(...fe){return ve==="delete"?!1:this}}function Iw(){const ve={get(m){return Pp(this,m)},get size(){return Rp(this)},has:Dp,add:Qy,set:$y,delete:qy,clear:em,forEach:Ip(!1,!1)},fe={get(m){return Pp(this,m,!1,!0)},get size(){return Rp(this)},has:Dp,add:Qy,set:$y,delete:qy,clear:em,forEach:Ip(!1,!0)},t={get(m){return Pp(this,m,!0)},get size(){return Rp(this,!0)},has(m){return Dp.call(this,m,!0)},add:bf("add"),set:bf("set"),delete:bf("delete"),clear:bf("clear"),forEach:Ip(!0,!1)},B={get(m){return Pp(this,m,!0,!0)},get size(){return Rp(this,!0)},has(m){return Dp.call(this,m,!0)},add:bf("add"),set:bf("set"),delete:bf("delete"),clear:bf("clear"),forEach:Ip(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(m=>{ve[m]=Fp(m,!1,!1),t[m]=Fp(m,!0,!1),fe[m]=Fp(m,!1,!0),B[m]=Fp(m,!0,!0)}),[ve,t,fe,B]}const[Fw,zw,Nw,Ow]=Iw();function sg(ve,fe){const t=fe?ve?Ow:Nw:ve?zw:Fw;return(B,V,m)=>V==="__v_isReactive"?!ve:V==="__v_isReadonly"?ve:V==="__v_raw"?B:Reflect.get(no(t,V)&&V in B?t:B,V,m)}const Bw={get:sg(!1,!1)},Uw={get:sg(!1,!0)},Vw={get:sg(!0,!1)},_1=new WeakMap,w1=new WeakMap,T1=new WeakMap,Hw=new WeakMap;function Gw(ve){switch(ve){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Yw(ve){return ve.__v_skip||!Object.isExtensible(ve)?0:Gw(vw(ve))}function gd(ve){return Zh(ve)?ve:lg(ve,!1,b1,Bw,_1)}function Ww(ve){return lg(ve,!1,Rw,Uw,w1)}function A1(ve){return lg(ve,!0,Dw,Vw,T1)}function lg(ve,fe,t,B,V){if(!Vo(ve)||ve.__v_raw&&!(fe&&ve.__v_isReactive))return ve;const m=V.get(ve);if(m)return m;const c=Yw(ve);if(c===0)return ve;const A=new Proxy(ve,c===2?B:t);return V.set(ve,A),A}function Mf(ve){return Zh(ve)?Mf(ve.__v_raw):!!(ve&&ve.__v_isReactive)}function Zh(ve){return!!(ve&&ve.__v_isReadonly)}function ed(ve){return!!(ve&&ve.__v_isShallow)}function M1(ve){return Mf(ve)||Zh(ve)}function lo(ve){const fe=ve&&ve.__v_raw;return fe?lo(fe):ve}function jh(ve){return qp(ve,"__v_skip",!0),ve}const Yv=ve=>Vo(ve)?gd(ve):ve,ug=ve=>Vo(ve)?A1(ve):ve;function S1(ve){Af&&cc&&(ve=lo(ve),y1(ve.dep||(ve.dep=ng())))}function E1(ve,fe){ve=lo(ve),ve.dep&&R0(ve.dep)}function hs(ve){return!!(ve&&ve.__v_isRef===!0)}function du(ve){return Xw(ve,!1)}function Xw(ve,fe){return hs(ve)?ve:new Zw(ve,fe)}class Zw{constructor(fe,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?fe:lo(fe),this._value=t?fe:Yv(fe)}get value(){return S1(this),this._value}set value(fe){const t=this.__v_isShallow||ed(fe)||Zh(fe);fe=t?fe:lo(fe),Hv(fe,this._rawValue)&&(this._rawValue=fe,this._value=t?fe:Yv(fe),E1(this))}}function mi(ve){return hs(ve)?ve.value:ve}const jw={get:(ve,fe,t)=>mi(Reflect.get(ve,fe,t)),set:(ve,fe,t,B)=>{const V=ve[fe];return hs(V)&&!hs(t)?(V.value=t,!0):Reflect.set(ve,fe,t,B)}};function C1(ve){return Mf(ve)?ve:new Proxy(ve,jw)}function Kw(ve){const fe=yi(ve)?new Array(ve.length):{};for(const t in ve)fe[t]=Qw(ve,t);return fe}class Jw{constructor(fe,t,B){this._object=fe,this._key=t,this._defaultValue=B,this.__v_isRef=!0}get value(){const fe=this._object[this._key];return fe===void 0?this._defaultValue:fe}set value(fe){this._object[this._key]=fe}}function Qw(ve,fe,t){const B=ve[fe];return hs(B)?B:new Jw(ve,fe,t)}var k1;class $w{constructor(fe,t,B,V){this._setter=t,this.dep=void 0,this.__v_isRef=!0,this[k1]=!1,this._dirty=!0,this.effect=new ag(fe,()=>{this._dirty||(this._dirty=!0,E1(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!V,this.__v_isReadonly=B}get value(){const fe=lo(this);return S1(fe),(fe._dirty||!fe._cacheable)&&(fe._dirty=!1,fe._value=fe.effect.run()),fe._value}set value(fe){this._setter(fe)}}k1="__v_isReadonly";function qw(ve,fe,t=!1){let B,V;const m=Bi(ve);return m?(B=ve,V=hc):(B=ve.get,V=ve.set),new $w(B,V,m||!V,t)}function Sf(ve,fe,t,B){let V;try{V=B?ve(...B):ve()}catch(m){yd(m,fe,t)}return V}function Nu(ve,fe,t,B){if(Bi(ve)){const m=Sf(ve,fe,t,B);return m&&u1(m)&&m.catch(c=>{yd(c,fe,t)}),m}const V=[];for(let m=0;m<ve.length;m++)V.push(Nu(ve[m],fe,t,B));return V}function yd(ve,fe,t,B=!0){const V=fe?fe.vnode:null;if(fe){let m=fe.parent;const c=fe.proxy,A=t;for(;m;){const e=m.ec;if(e){for(let a=0;a<e.length;a++)if(e[a](ve,c,A)===!1)return}m=m.parent}const T=fe.appContext.config.errorHandler;if(T){Sf(T,null,10,[ve,c,A]);return}}e3(ve,t,V,B)}function e3(ve,fe,t,B=!0){console.error(ve)}let Wv=!1,I0=!1;const xl=[];let zc=0;const Xh=[];let Kc=null,Jf=0;const L1=Promise.resolve();let cg=null;function P1(ve){const fe=cg||L1;return ve?fe.then(this?ve.bind(this):ve):fe}function t3(ve){let fe=zc+1,t=xl.length;for(;fe<t;){const B=fe+t>>>1;Xv(xl[B])<ve?fe=B+1:t=B}return fe}function fg(ve){(!xl.length||!xl.includes(ve,Wv&&ve.allowRecurse?zc+1:zc))&&(ve.id==null?xl.push(ve):xl.splice(t3(ve.id),0,ve),D1())}function D1(){!Wv&&!I0&&(I0=!0,cg=L1.then(I1))}function r3(ve){const fe=xl.indexOf(ve);fe>zc&&xl.splice(fe,1)}function n3(ve){yi(ve)?Xh.push(...ve):(!Kc||!Kc.includes(ve,ve.allowRecurse?Jf+1:Jf))&&Xh.push(ve),D1()}function tm(ve,fe=Wv?zc+1:0){for(;fe<xl.length;fe++){const t=xl[fe];t&&t.pre&&(xl.splice(fe,1),fe--,t())}}function R1(ve){if(Xh.length){const fe=[...new Set(Xh)];if(Xh.length=0,Kc){Kc.push(...fe);return}for(Kc=fe,Kc.sort((t,B)=>Xv(t)-Xv(B)),Jf=0;Jf<Kc.length;Jf++)Kc[Jf]();Kc=null,Jf=0}}const Xv=ve=>ve.id==null?1/0:ve.id,a3=(ve,fe)=>{const t=Xv(ve)-Xv(fe);if(t===0){if(ve.pre&&!fe.pre)return-1;if(fe.pre&&!ve.pre)return 1}return t};function I1(ve){I0=!1,Wv=!0,xl.sort(a3);const fe=hc;try{for(zc=0;zc<xl.length;zc++){const t=xl[zc];t&&t.active!==!1&&Sf(t,null,14)}}finally{zc=0,xl.length=0,R1(),Wv=!1,cg=null,(xl.length||Xh.length)&&I1()}}function i3(ve,fe,...t){if(ve.isUnmounted)return;const B=ve.vnode.props||Uo;let V=t;const m=fe.startsWith("update:"),c=m&&fe.slice(7);if(c&&c in B){const a=`${c==="modelValue"?"model":c}Modifiers`,{number:i,trim:n}=B[a]||Uo;n&&(V=t.map(r=>Rs(r)?r.trim():r)),i&&(V=t.map(Gv))}let A,T=B[A=c0(fe)]||B[A=c0(Bc(fe))];!T&&m&&(T=B[A=c0(nv(fe))]),T&&Nu(T,ve,6,V);const e=B[A+"Once"];if(e){if(!ve.emitted)ve.emitted={};else if(ve.emitted[A])return;ve.emitted[A]=!0,Nu(e,ve,6,V)}}function F1(ve,fe,t=!1){const B=fe.emitsCache,V=B.get(ve);if(V!==void 0)return V;const m=ve.emits;let c={},A=!1;if(!Bi(ve)){const T=e=>{const a=F1(e,fe,!0);a&&(A=!0,bl(c,a))};!t&&fe.mixins.length&&fe.mixins.forEach(T),ve.extends&&T(ve.extends),ve.mixins&&ve.mixins.forEach(T)}return!m&&!A?(Vo(ve)&&B.set(ve,null),null):(yi(m)?m.forEach(T=>c[T]=null):bl(c,m),Vo(ve)&&B.set(ve,c),c)}function md(ve,fe){return!ve||!fd(fe)?!1:(fe=fe.slice(2).replace(/Once$/,""),no(ve,fe[0].toLowerCase()+fe.slice(1))||no(ve,nv(fe))||no(ve,fe))}let yu=null,z1=null;function td(ve){const fe=yu;return yu=ve,z1=ve&&ve.type.__scopeId||null,fe}function o3(ve,fe=yu,t){if(!fe||ve._n)return ve;const B=(...V)=>{B._d&&fm(-1);const m=td(fe);let c;try{c=ve(...V)}finally{td(m),B._d&&fm(1)}return c};return B._n=!0,B._c=!0,B._d=!0,B}function f0(ve){const{type:fe,vnode:t,proxy:B,withProxy:V,props:m,propsOptions:[c],slots:A,attrs:T,emit:e,render:a,renderCache:i,data:n,setupState:r,ctx:v,inheritAttrs:s}=ve;let o,b;const g=td(ve);try{if(t.shapeFlag&4){const f=V||B;o=Fc(a.call(f,f,i,m,r,n,v)),b=T}else{const f=fe;o=Fc(f.length>1?f(m,{attrs:T,slots:A,emit:e}):f(m,null)),b=fe.props?T:s3(T)}}catch(f){Nv.length=0,yd(f,ve,1),o=mu(Qc)}let d=o;if(b&&s!==!1){const f=Object.keys(b),{shapeFlag:y}=d;f.length&&y&7&&(c&&f.some(eg)&&(b=l3(b,c)),d=Cf(d,b))}return t.dirs&&(d=Cf(d),d.dirs=d.dirs?d.dirs.concat(t.dirs):t.dirs),t.transition&&(d.transition=t.transition),o=d,td(g),o}const s3=ve=>{let fe;for(const t in ve)(t==="class"||t==="style"||fd(t))&&((fe||(fe={}))[t]=ve[t]);return fe},l3=(ve,fe)=>{const t={};for(const B in ve)(!eg(B)||!(B.slice(9)in fe))&&(t[B]=ve[B]);return t};function u3(ve,fe,t){const{props:B,children:V,component:m}=ve,{props:c,children:A,patchFlag:T}=fe,e=m.emitsOptions;if(fe.dirs||fe.transition)return!0;if(t&&T>=0){if(T&1024)return!0;if(T&16)return B?rm(B,c,e):!!c;if(T&8){const a=fe.dynamicProps;for(let i=0;i<a.length;i++){const n=a[i];if(c[n]!==B[n]&&!md(e,n))return!0}}}else return(V||A)&&(!A||!A.$stable)?!0:B===c?!1:B?c?rm(B,c,e):!0:!!c;return!1}function rm(ve,fe,t){const B=Object.keys(fe);if(B.length!==Object.keys(ve).length)return!0;for(let V=0;V<B.length;V++){const m=B[V];if(fe[m]!==ve[m]&&!md(t,m))return!0}return!1}function c3({vnode:ve,parent:fe},t){for(;fe&&fe.subTree===ve;)(ve=fe.vnode).el=t,fe=fe.parent}const f3=ve=>ve.__isSuspense;function h3(ve,fe){fe&&fe.pendingBranch?yi(ve)?fe.effects.push(...ve):fe.effects.push(ve):n3(ve)}function v3(ve,fe){if(Ws){let t=Ws.provides;const B=Ws.parent&&Ws.parent.provides;B===t&&(t=Ws.provides=Object.create(B)),t[ve]=fe}}function Fv(ve,fe,t=!1){const B=Ws||yu;if(B){const V=B.parent==null?B.vnode.appContext&&B.vnode.appContext.provides:B.parent.provides;if(V&&ve in V)return V[ve];if(arguments.length>1)return t&&Bi(fe)?fe.call(B.proxy):fe}}const zp={};function Zp(ve,fe,t){return N1(ve,fe,t)}function N1(ve,fe,{immediate:t,deep:B,flush:V,onTrack:m,onTrigger:c}=Uo){const A=Ws;let T,e=!1,a=!1;if(hs(ve)?(T=()=>ve.value,e=ed(ve)):Mf(ve)?(T=()=>ve,B=!0):yi(ve)?(a=!0,e=ve.some(d=>Mf(d)||ed(d)),T=()=>ve.map(d=>{if(hs(d))return d.value;if(Mf(d))return eh(d);if(Bi(d))return Sf(d,A,2)})):Bi(ve)?fe?T=()=>Sf(ve,A,2):T=()=>{if(!(A&&A.isUnmounted))return i&&i(),Nu(ve,A,3,[n])}:T=hc,fe&&B){const d=T;T=()=>eh(d())}let i,n=d=>{i=b.onStop=()=>{Sf(d,A,4)}},r;if(jv)if(n=hc,fe?t&&Nu(fe,A,3,[T(),a?[]:void 0,n]):T(),V==="sync"){const d=fT();r=d.__watcherHandles||(d.__watcherHandles=[])}else return hc;let v=a?new Array(ve.length).fill(zp):zp;const s=()=>{if(!!b.active)if(fe){const d=b.run();(B||e||(a?d.some((f,y)=>Hv(f,v[y])):Hv(d,v)))&&(i&&i(),Nu(fe,A,3,[d,v===zp?void 0:a&&v[0]===zp?[]:v,n]),v=d)}else b.run()};s.allowRecurse=!!fe;let o;V==="sync"?o=s:V==="post"?o=()=>Ql(s,A&&A.suspense):(s.pre=!0,A&&(s.id=A.uid),o=()=>fg(s));const b=new ag(T,o);fe?t?s():v=b.run():V==="post"?Ql(b.run.bind(b),A&&A.suspense):b.run();const g=()=>{b.stop(),A&&A.scope&&tg(A.scope.effects,b)};return r&&r.push(g),g}function p3(ve,fe,t){const B=this.proxy,V=Rs(ve)?ve.includes(".")?O1(B,ve):()=>B[ve]:ve.bind(B,B);let m;Bi(fe)?m=fe:(m=fe.handler,t=fe);const c=Ws;Kh(this);const A=N1(V,m.bind(B),t);return c?Kh(c):ah(),A}function O1(ve,fe){const t=fe.split(".");return()=>{let B=ve;for(let V=0;V<t.length&&B;V++)B=B[t[V]];return B}}function eh(ve,fe){if(!Vo(ve)||ve.__v_skip||(fe=fe||new Set,fe.has(ve)))return ve;if(fe.add(ve),hs(ve))eh(ve.value,fe);else if(yi(ve))for(let t=0;t<ve.length;t++)eh(ve[t],fe);else if(hd(ve)||Wh(ve))ve.forEach(t=>{eh(t,fe)});else if(f1(ve))for(const t in ve)eh(ve[t],fe);return ve}function d3(){const ve={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return hg(()=>{ve.isMounted=!0}),H1(()=>{ve.isUnmounting=!0}),ve}const zu=[Function,Array],g3={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:zu,onEnter:zu,onAfterEnter:zu,onEnterCancelled:zu,onBeforeLeave:zu,onLeave:zu,onAfterLeave:zu,onLeaveCancelled:zu,onBeforeAppear:zu,onAppear:zu,onAfterAppear:zu,onAppearCancelled:zu},setup(ve,{slots:fe}){const t=ex(),B=d3();let V;return()=>{const m=fe.default&&U1(fe.default(),!0);if(!m||!m.length)return;let c=m[0];if(m.length>1){for(const s of m)if(s.type!==Qc){c=s;break}}const A=lo(ve),{mode:T}=A;if(B.isLeaving)return h0(c);const e=nm(c);if(!e)return h0(c);const a=F0(e,A,B,t);z0(e,a);const i=t.subTree,n=i&&nm(i);let r=!1;const{getTransitionKey:v}=e.type;if(v){const s=v();V===void 0?V=s:s!==V&&(V=s,r=!0)}if(n&&n.type!==Qc&&(!Qf(e,n)||r)){const s=F0(n,A,B,t);if(z0(n,s),T==="out-in")return B.isLeaving=!0,s.afterLeave=()=>{B.isLeaving=!1,t.update.active!==!1&&t.update()},h0(c);T==="in-out"&&e.type!==Qc&&(s.delayLeave=(o,b,g)=>{const d=B1(B,n);d[String(n.key)]=n,o._leaveCb=()=>{b(),o._leaveCb=void 0,delete a.delayedLeave},a.delayedLeave=g})}return c}}},y3=g3;function B1(ve,fe){const{leavingVNodes:t}=ve;let B=t.get(fe.type);return B||(B=Object.create(null),t.set(fe.type,B)),B}function F0(ve,fe,t,B){const{appear:V,mode:m,persisted:c=!1,onBeforeEnter:A,onEnter:T,onAfterEnter:e,onEnterCancelled:a,onBeforeLeave:i,onLeave:n,onAfterLeave:r,onLeaveCancelled:v,onBeforeAppear:s,onAppear:o,onAfterAppear:b,onAppearCancelled:g}=fe,d=String(ve.key),f=B1(t,ve),y=(u,M)=>{u&&Nu(u,B,9,M)},l=(u,M)=>{const _=M[1];y(u,M),yi(u)?u.every(p=>p.length<=1)&&_():u.length<=1&&_()},x={mode:m,persisted:c,beforeEnter(u){let M=A;if(!t.isMounted)if(V)M=s||A;else return;u._leaveCb&&u._leaveCb(!0);const _=f[d];_&&Qf(ve,_)&&_.el._leaveCb&&_.el._leaveCb(),y(M,[u])},enter(u){let M=T,_=e,p=a;if(!t.isMounted)if(V)M=o||T,_=b||e,p=g||a;else return;let w=!1;const h=u._enterCb=L=>{w||(w=!0,L?y(p,[u]):y(_,[u]),x.delayedLeave&&x.delayedLeave(),u._enterCb=void 0)};M?l(M,[u,h]):h()},leave(u,M){const _=String(ve.key);if(u._enterCb&&u._enterCb(!0),t.isUnmounting)return M();y(i,[u]);let p=!1;const w=u._leaveCb=h=>{p||(p=!0,M(),h?y(v,[u]):y(r,[u]),u._leaveCb=void 0,f[_]===ve&&delete f[_])};f[_]=ve,n?l(n,[u,w]):w()},clone(u){return F0(u,fe,t,B)}};return x}function h0(ve){if(xd(ve))return ve=Cf(ve),ve.children=null,ve}function nm(ve){return xd(ve)?ve.children?ve.children[0]:void 0:ve}function z0(ve,fe){ve.shapeFlag&6&&ve.component?z0(ve.component.subTree,fe):ve.shapeFlag&128?(ve.ssContent.transition=fe.clone(ve.ssContent),ve.ssFallback.transition=fe.clone(ve.ssFallback)):ve.transition=fe}function U1(ve,fe=!1,t){let B=[],V=0;for(let m=0;m<ve.length;m++){let c=ve[m];const A=t==null?c.key:String(t)+String(c.key!=null?c.key:m);c.type===$l?(c.patchFlag&128&&V++,B=B.concat(U1(c.children,fe,A))):(fe||c.type!==Qc)&&B.push(A!=null?Cf(c,{key:A}):c)}if(V>1)for(let m=0;m<B.length;m++)B[m].patchFlag=-2;return B}const jp=ve=>!!ve.type.__asyncLoader,xd=ve=>ve.type.__isKeepAlive;function m3(ve,fe){V1(ve,"a",fe)}function x3(ve,fe){V1(ve,"da",fe)}function V1(ve,fe,t=Ws){const B=ve.__wdc||(ve.__wdc=()=>{let V=t;for(;V;){if(V.isDeactivated)return;V=V.parent}return ve()});if(bd(fe,B,t),t){let V=t.parent;for(;V&&V.parent;)xd(V.parent.vnode)&&b3(B,fe,t,V),V=V.parent}}function b3(ve,fe,t,B){const V=bd(fe,ve,B,!0);vg(()=>{tg(B[fe],V)},t)}function bd(ve,fe,t=Ws,B=!1){if(t){const V=t[ve]||(t[ve]=[]),m=fe.__weh||(fe.__weh=(...c)=>{if(t.isUnmounted)return;av(),Kh(t);const A=Nu(fe,t,ve,c);return ah(),iv(),A});return B?V.unshift(m):V.push(m),m}}const nf=ve=>(fe,t=Ws)=>(!jv||ve==="sp")&&bd(ve,(...B)=>fe(...B),t),_3=nf("bm"),hg=nf("m"),w3=nf("bu"),T3=nf("u"),H1=nf("bum"),vg=nf("um"),A3=nf("sp"),M3=nf("rtg"),S3=nf("rtc");function E3(ve,fe=Ws){bd("ec",ve,fe)}function rl(ve,fe){const t=yu;if(t===null)return ve;const B=Td(t)||t.proxy,V=ve.dirs||(ve.dirs=[]);for(let m=0;m<fe.length;m++){let[c,A,T,e=Uo]=fe[m];c&&(Bi(c)&&(c={mounted:c,updated:c}),c.deep&&eh(A),V.push({dir:c,instance:B,value:A,oldValue:void 0,arg:T,modifiers:e}))}return ve}function Zf(ve,fe,t,B){const V=ve.dirs,m=fe&&fe.dirs;for(let c=0;c<V.length;c++){const A=V[c];m&&(A.oldValue=m[c].value);let T=A.dir[B];T&&(av(),Nu(T,t,8,[ve.el,A,ve,fe]),iv())}}const G1="components";function C3(ve,fe){return L3(G1,ve,!0,fe)||ve}const k3=Symbol();function L3(ve,fe,t=!0,B=!1){const V=yu||Ws;if(V){const m=V.type;if(ve===G1){const A=lT(m,!1);if(A&&(A===fe||A===Bc(fe)||A===pd(Bc(fe))))return m}const c=am(V[ve]||m[ve],fe)||am(V.appContext[ve],fe);return!c&&B?m:c}}function am(ve,fe){return ve&&(ve[fe]||ve[Bc(fe)]||ve[pd(Bc(fe))])}function Y1(ve,fe,t,B){let V;const m=t&&t[B];if(yi(ve)||Rs(ve)){V=new Array(ve.length);for(let c=0,A=ve.length;c<A;c++)V[c]=fe(ve[c],c,void 0,m&&m[c])}else if(typeof ve=="number"){V=new Array(ve);for(let c=0;c<ve;c++)V[c]=fe(c+1,c,void 0,m&&m[c])}else if(Vo(ve))if(ve[Symbol.iterator])V=Array.from(ve,(c,A)=>fe(c,A,void 0,m&&m[A]));else{const c=Object.keys(ve);V=new Array(c.length);for(let A=0,T=c.length;A<T;A++){const e=c[A];V[A]=fe(ve[e],e,A,m&&m[A])}}else V=[];return t&&(t[B]=V),V}const N0=ve=>ve?tx(ve)?Td(ve)||ve.proxy:N0(ve.parent):null,zv=bl(Object.create(null),{$:ve=>ve,$el:ve=>ve.vnode.el,$data:ve=>ve.data,$props:ve=>ve.props,$attrs:ve=>ve.attrs,$slots:ve=>ve.slots,$refs:ve=>ve.refs,$parent:ve=>N0(ve.parent),$root:ve=>N0(ve.root),$emit:ve=>ve.emit,$options:ve=>pg(ve),$forceUpdate:ve=>ve.f||(ve.f=()=>fg(ve.update)),$nextTick:ve=>ve.n||(ve.n=P1.bind(ve.proxy)),$watch:ve=>p3.bind(ve)}),v0=(ve,fe)=>ve!==Uo&&!ve.__isScriptSetup&&no(ve,fe),P3={get({_:ve},fe){const{ctx:t,setupState:B,data:V,props:m,accessCache:c,type:A,appContext:T}=ve;let e;if(fe[0]!=="$"){const r=c[fe];if(r!==void 0)switch(r){case 1:return B[fe];case 2:return V[fe];case 4:return t[fe];case 3:return m[fe]}else{if(v0(B,fe))return c[fe]=1,B[fe];if(V!==Uo&&no(V,fe))return c[fe]=2,V[fe];if((e=ve.propsOptions[0])&&no(e,fe))return c[fe]=3,m[fe];if(t!==Uo&&no(t,fe))return c[fe]=4,t[fe];O0&&(c[fe]=0)}}const a=zv[fe];let i,n;if(a)return fe==="$attrs"&&xu(ve,"get",fe),a(ve);if((i=A.__cssModules)&&(i=i[fe]))return i;if(t!==Uo&&no(t,fe))return c[fe]=4,t[fe];if(n=T.config.globalProperties,no(n,fe))return n[fe]},set({_:ve},fe,t){const{data:B,setupState:V,ctx:m}=ve;return v0(V,fe)?(V[fe]=t,!0):B!==Uo&&no(B,fe)?(B[fe]=t,!0):no(ve.props,fe)||fe[0]==="$"&&fe.slice(1)in ve?!1:(m[fe]=t,!0)},has({_:{data:ve,setupState:fe,accessCache:t,ctx:B,appContext:V,propsOptions:m}},c){let A;return!!t[c]||ve!==Uo&&no(ve,c)||v0(fe,c)||(A=m[0])&&no(A,c)||no(B,c)||no(zv,c)||no(V.config.globalProperties,c)},defineProperty(ve,fe,t){return t.get!=null?ve._.accessCache[fe]=0:no(t,"value")&&this.set(ve,fe,t.value,null),Reflect.defineProperty(ve,fe,t)}};let O0=!0;function D3(ve){const fe=pg(ve),t=ve.proxy,B=ve.ctx;O0=!1,fe.beforeCreate&&im(fe.beforeCreate,ve,"bc");const{data:V,computed:m,methods:c,watch:A,provide:T,inject:e,created:a,beforeMount:i,mounted:n,beforeUpdate:r,updated:v,activated:s,deactivated:o,beforeDestroy:b,beforeUnmount:g,destroyed:d,unmounted:f,render:y,renderTracked:l,renderTriggered:x,errorCaptured:u,serverPrefetch:M,expose:_,inheritAttrs:p,components:w,directives:h,filters:L}=fe;if(e&&R3(e,B,null,ve.appContext.config.unwrapInjectedRef),c)for(const P in c){const F=c[P];Bi(F)&&(B[P]=F.bind(t))}if(V){const P=V.call(t,t);Vo(P)&&(ve.data=gd(P))}if(O0=!0,m)for(const P in m){const F=m[P],I=Bi(F)?F.bind(t,t):Bi(F.get)?F.get.bind(t,t):hc,D=!Bi(F)&&Bi(F.set)?F.set.bind(t):hc,R=nd({get:I,set:D});Object.defineProperty(B,P,{enumerable:!0,configurable:!0,get:()=>R.value,set:N=>R.value=N})}if(A)for(const P in A)W1(A[P],B,t,P);if(T){const P=Bi(T)?T.call(t):T;Reflect.ownKeys(P).forEach(F=>{v3(F,P[F])})}a&&im(a,ve,"c");function E(P,F){yi(F)?F.forEach(I=>P(I.bind(t))):F&&P(F.bind(t))}if(E(_3,i),E(hg,n),E(w3,r),E(T3,v),E(m3,s),E(x3,o),E(E3,u),E(S3,l),E(M3,x),E(H1,g),E(vg,f),E(A3,M),yi(_))if(_.length){const P=ve.exposed||(ve.exposed={});_.forEach(F=>{Object.defineProperty(P,F,{get:()=>t[F],set:I=>t[F]=I})})}else ve.exposed||(ve.exposed={});y&&ve.render===hc&&(ve.render=y),p!=null&&(ve.inheritAttrs=p),w&&(ve.components=w),h&&(ve.directives=h)}function R3(ve,fe,t=hc,B=!1){yi(ve)&&(ve=B0(ve));for(const V in ve){const m=ve[V];let c;Vo(m)?"default"in m?c=Fv(m.from||V,m.default,!0):c=Fv(m.from||V):c=Fv(m),hs(c)&&B?Object.defineProperty(fe,V,{enumerable:!0,configurable:!0,get:()=>c.value,set:A=>c.value=A}):fe[V]=c}}function im(ve,fe,t){Nu(yi(ve)?ve.map(B=>B.bind(fe.proxy)):ve.bind(fe.proxy),fe,t)}function W1(ve,fe,t,B){const V=B.includes(".")?O1(t,B):()=>t[B];if(Rs(ve)){const m=fe[ve];Bi(m)&&Zp(V,m)}else if(Bi(ve))Zp(V,ve.bind(t));else if(Vo(ve))if(yi(ve))ve.forEach(m=>W1(m,fe,t,B));else{const m=Bi(ve.handler)?ve.handler.bind(t):fe[ve.handler];Bi(m)&&Zp(V,m,ve)}}function pg(ve){const fe=ve.type,{mixins:t,extends:B}=fe,{mixins:V,optionsCache:m,config:{optionMergeStrategies:c}}=ve.appContext,A=m.get(fe);let T;return A?T=A:!V.length&&!t&&!B?T=fe:(T={},V.length&&V.forEach(e=>rd(T,e,c,!0)),rd(T,fe,c)),Vo(fe)&&m.set(fe,T),T}function rd(ve,fe,t,B=!1){const{mixins:V,extends:m}=fe;m&&rd(ve,m,t,!0),V&&V.forEach(c=>rd(ve,c,t,!0));for(const c in fe)if(!(B&&c==="expose")){const A=I3[c]||t&&t[c];ve[c]=A?A(ve[c],fe[c]):fe[c]}return ve}const I3={data:om,props:Kf,emits:Kf,methods:Kf,computed:Kf,beforeCreate:Dl,created:Dl,beforeMount:Dl,mounted:Dl,beforeUpdate:Dl,updated:Dl,beforeDestroy:Dl,beforeUnmount:Dl,destroyed:Dl,unmounted:Dl,activated:Dl,deactivated:Dl,errorCaptured:Dl,serverPrefetch:Dl,components:Kf,directives:Kf,watch:z3,provide:om,inject:F3};function om(ve,fe){return fe?ve?function(){return bl(Bi(ve)?ve.call(this,this):ve,Bi(fe)?fe.call(this,this):fe)}:fe:ve}function F3(ve,fe){return Kf(B0(ve),B0(fe))}function B0(ve){if(yi(ve)){const fe={};for(let t=0;t<ve.length;t++)fe[ve[t]]=ve[t];return fe}return ve}function Dl(ve,fe){return ve?[...new Set([].concat(ve,fe))]:fe}function Kf(ve,fe){return ve?bl(bl(Object.create(null),ve),fe):fe}function z3(ve,fe){if(!ve)return fe;if(!fe)return ve;const t=bl(Object.create(null),ve);for(const B in fe)t[B]=Dl(ve[B],fe[B]);return t}function N3(ve,fe,t,B=!1){const V={},m={};qp(m,wd,1),ve.propsDefaults=Object.create(null),X1(ve,fe,V,m);for(const c in ve.propsOptions[0])c in V||(V[c]=void 0);t?ve.props=B?V:Ww(V):ve.type.props?ve.props=V:ve.props=m,ve.attrs=m}function O3(ve,fe,t,B){const{props:V,attrs:m,vnode:{patchFlag:c}}=ve,A=lo(V),[T]=ve.propsOptions;let e=!1;if((B||c>0)&&!(c&16)){if(c&8){const a=ve.vnode.dynamicProps;for(let i=0;i<a.length;i++){let n=a[i];if(md(ve.emitsOptions,n))continue;const r=fe[n];if(T)if(no(m,n))r!==m[n]&&(m[n]=r,e=!0);else{const v=Bc(n);V[v]=U0(T,A,v,r,ve,!1)}else r!==m[n]&&(m[n]=r,e=!0)}}}else{X1(ve,fe,V,m)&&(e=!0);let a;for(const i in A)(!fe||!no(fe,i)&&((a=nv(i))===i||!no(fe,a)))&&(T?t&&(t[i]!==void 0||t[a]!==void 0)&&(V[i]=U0(T,A,i,void 0,ve,!0)):delete V[i]);if(m!==A)for(const i in m)(!fe||!no(fe,i)&&!0)&&(delete m[i],e=!0)}e&&tf(ve,"set","$attrs")}function X1(ve,fe,t,B){const[V,m]=ve.propsOptions;let c=!1,A;if(fe)for(let T in fe){if(Wp(T))continue;const e=fe[T];let a;V&&no(V,a=Bc(T))?!m||!m.includes(a)?t[a]=e:(A||(A={}))[a]=e:md(ve.emitsOptions,T)||(!(T in B)||e!==B[T])&&(B[T]=e,c=!0)}if(m){const T=lo(t),e=A||Uo;for(let a=0;a<m.length;a++){const i=m[a];t[i]=U0(V,T,i,e[i],ve,!no(e,i))}}return c}function U0(ve,fe,t,B,V,m){const c=ve[t];if(c!=null){const A=no(c,"default");if(A&&B===void 0){const T=c.default;if(c.type!==Function&&Bi(T)){const{propsDefaults:e}=V;t in e?B=e[t]:(Kh(V),B=e[t]=T.call(null,fe),ah())}else B=T}c[0]&&(m&&!A?B=!1:c[1]&&(B===""||B===nv(t))&&(B=!0))}return B}function Z1(ve,fe,t=!1){const B=fe.propsCache,V=B.get(ve);if(V)return V;const m=ve.props,c={},A=[];let T=!1;if(!Bi(ve)){const a=i=>{T=!0;const[n,r]=Z1(i,fe,!0);bl(c,n),r&&A.push(...r)};!t&&fe.mixins.length&&fe.mixins.forEach(a),ve.extends&&a(ve.extends),ve.mixins&&ve.mixins.forEach(a)}if(!m&&!T)return Vo(ve)&&B.set(ve,Yh),Yh;if(yi(m))for(let a=0;a<m.length;a++){const i=Bc(m[a]);sm(i)&&(c[i]=Uo)}else if(m)for(const a in m){const i=Bc(a);if(sm(i)){const n=m[a],r=c[i]=yi(n)||Bi(n)?{type:n}:Object.assign({},n);if(r){const v=cm(Boolean,r.type),s=cm(String,r.type);r[0]=v>-1,r[1]=s<0||v<s,(v>-1||no(r,"default"))&&A.push(i)}}}const e=[c,A];return Vo(ve)&&B.set(ve,e),e}function sm(ve){return ve[0]!=="$"}function lm(ve){const fe=ve&&ve.toString().match(/^\s*function (\w+)/);return fe?fe[1]:ve===null?"null":""}function um(ve,fe){return lm(ve)===lm(fe)}function cm(ve,fe){return yi(fe)?fe.findIndex(t=>um(t,ve)):Bi(fe)&&um(fe,ve)?0:-1}const j1=ve=>ve[0]==="_"||ve==="$stable",dg=ve=>yi(ve)?ve.map(Fc):[Fc(ve)],B3=(ve,fe,t)=>{if(fe._n)return fe;const B=o3((...V)=>dg(fe(...V)),t);return B._c=!1,B},K1=(ve,fe,t)=>{const B=ve._ctx;for(const V in ve){if(j1(V))continue;const m=ve[V];if(Bi(m))fe[V]=B3(V,m,B);else if(m!=null){const c=dg(m);fe[V]=()=>c}}},J1=(ve,fe)=>{const t=dg(fe);ve.slots.default=()=>t},U3=(ve,fe)=>{if(ve.vnode.shapeFlag&32){const t=fe._;t?(ve.slots=lo(fe),qp(fe,"_",t)):K1(fe,ve.slots={})}else ve.slots={},fe&&J1(ve,fe);qp(ve.slots,wd,1)},V3=(ve,fe,t)=>{const{vnode:B,slots:V}=ve;let m=!0,c=Uo;if(B.shapeFlag&32){const A=fe._;A?t&&A===1?m=!1:(bl(V,fe),!t&&A===1&&delete V._):(m=!fe.$stable,K1(fe,V)),c=fe}else fe&&(J1(ve,fe),c={default:1});if(m)for(const A in V)!j1(A)&&!(A in c)&&delete V[A]};function Q1(){return{app:null,config:{isNativeTag:cw,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let H3=0;function G3(ve,fe){return function(B,V=null){Bi(B)||(B=Object.assign({},B)),V!=null&&!Vo(V)&&(V=null);const m=Q1(),c=new Set;let A=!1;const T=m.app={_uid:H3++,_component:B,_props:V,_container:null,_context:m,_instance:null,version:hT,get config(){return m.config},set config(e){},use(e,...a){return c.has(e)||(e&&Bi(e.install)?(c.add(e),e.install(T,...a)):Bi(e)&&(c.add(e),e(T,...a))),T},mixin(e){return m.mixins.includes(e)||m.mixins.push(e),T},component(e,a){return a?(m.components[e]=a,T):m.components[e]},directive(e,a){return a?(m.directives[e]=a,T):m.directives[e]},mount(e,a,i){if(!A){const n=mu(B,V);return n.appContext=m,a&&fe?fe(n,e):ve(n,e,i),A=!0,T._container=e,e.__vue_app__=T,Td(n.component)||n.component.proxy}},unmount(){A&&(ve(null,T._container),delete T._container.__vue_app__)},provide(e,a){return m.provides[e]=a,T}};return T}}function V0(ve,fe,t,B,V=!1){if(yi(ve)){ve.forEach((n,r)=>V0(n,fe&&(yi(fe)?fe[r]:fe),t,B,V));return}if(jp(B)&&!V)return;const m=B.shapeFlag&4?Td(B.component)||B.component.proxy:B.el,c=V?null:m,{i:A,r:T}=ve,e=fe&&fe.r,a=A.refs===Uo?A.refs={}:A.refs,i=A.setupState;if(e!=null&&e!==T&&(Rs(e)?(a[e]=null,no(i,e)&&(i[e]=null)):hs(e)&&(e.value=null)),Bi(T))Sf(T,A,12,[c,a]);else{const n=Rs(T),r=hs(T);if(n||r){const v=()=>{if(ve.f){const s=n?no(i,T)?i[T]:a[T]:T.value;V?yi(s)&&tg(s,m):yi(s)?s.includes(m)||s.push(m):n?(a[T]=[m],no(i,T)&&(i[T]=a[T])):(T.value=[m],ve.k&&(a[ve.k]=T.value))}else n?(a[T]=c,no(i,T)&&(i[T]=c)):r&&(T.value=c,ve.k&&(a[ve.k]=c))};c?(v.id=-1,Ql(v,t)):v()}}}const Ql=h3;function Y3(ve){return W3(ve)}function W3(ve,fe){const t=gw();t.__VUE__=!0;const{insert:B,remove:V,patchProp:m,createElement:c,createText:A,createComment:T,setText:e,setElementText:a,parentNode:i,nextSibling:n,setScopeId:r=hc,insertStaticContent:v}=ve,s=(K,U,H,q=null,re=null,j=null,$=!1,ie=null,oe=!!U.dynamicChildren)=>{if(K===U)return;K&&!Qf(K,U)&&(q=Z(K),N(K,re,j,!0),K=null),U.patchFlag===-2&&(oe=!1,U.dynamicChildren=null);const{type:ae,ref:se,shapeFlag:_e}=U;switch(ae){case _d:o(K,U,H,q);break;case Qc:b(K,U,H,q);break;case p0:K==null&&g(U,H,q,$);break;case $l:w(K,U,H,q,re,j,$,ie,oe);break;default:_e&1?y(K,U,H,q,re,j,$,ie,oe):_e&6?h(K,U,H,q,re,j,$,ie,oe):(_e&64||_e&128)&&ae.process(K,U,H,q,re,j,$,ie,oe,ne)}se!=null&&re&&V0(se,K&&K.ref,j,U||K,!U)},o=(K,U,H,q)=>{if(K==null)B(U.el=A(U.children),H,q);else{const re=U.el=K.el;U.children!==K.children&&e(re,U.children)}},b=(K,U,H,q)=>{K==null?B(U.el=T(U.children||""),H,q):U.el=K.el},g=(K,U,H,q)=>{[K.el,K.anchor]=v(K.children,U,H,q,K.el,K.anchor)},d=({el:K,anchor:U},H,q)=>{let re;for(;K&&K!==U;)re=n(K),B(K,H,q),K=re;B(U,H,q)},f=({el:K,anchor:U})=>{let H;for(;K&&K!==U;)H=n(K),V(K),K=H;V(U)},y=(K,U,H,q,re,j,$,ie,oe)=>{$=$||U.type==="svg",K==null?l(U,H,q,re,j,$,ie,oe):M(K,U,re,j,$,ie,oe)},l=(K,U,H,q,re,j,$,ie)=>{let oe,ae;const{type:se,props:_e,shapeFlag:ue,transition:ye,dirs:xe}=K;if(oe=K.el=c(K.type,j,_e&&_e.is,_e),ue&8?a(oe,K.children):ue&16&&u(K.children,oe,null,q,re,j&&se!=="foreignObject",$,ie),xe&&Zf(K,null,q,"created"),_e){for(const be in _e)be!=="value"&&!Wp(be)&&m(oe,be,null,_e[be],j,K.children,q,re,ee);"value"in _e&&m(oe,"value",null,_e.value),(ae=_e.onVnodeBeforeMount)&&Ic(ae,q,K)}x(oe,K,K.scopeId,$,q),xe&&Zf(K,null,q,"beforeMount");const me=(!re||re&&!re.pendingBranch)&&ye&&!ye.persisted;me&&ye.beforeEnter(oe),B(oe,U,H),((ae=_e&&_e.onVnodeMounted)||me||xe)&&Ql(()=>{ae&&Ic(ae,q,K),me&&ye.enter(oe),xe&&Zf(K,null,q,"mounted")},re)},x=(K,U,H,q,re)=>{if(H&&r(K,H),q)for(let j=0;j<q.length;j++)r(K,q[j]);if(re){let j=re.subTree;if(U===j){const $=re.vnode;x(K,$,$.scopeId,$.slotScopeIds,re.parent)}}},u=(K,U,H,q,re,j,$,ie,oe=0)=>{for(let ae=oe;ae<K.length;ae++){const se=K[ae]=ie?wf(K[ae]):Fc(K[ae]);s(null,se,U,H,q,re,j,$,ie)}},M=(K,U,H,q,re,j,$)=>{const ie=U.el=K.el;let{patchFlag:oe,dynamicChildren:ae,dirs:se}=U;oe|=K.patchFlag&16;const _e=K.props||Uo,ue=U.props||Uo;let ye;H&&jf(H,!1),(ye=ue.onVnodeBeforeUpdate)&&Ic(ye,H,U,K),se&&Zf(U,K,H,"beforeUpdate"),H&&jf(H,!0);const xe=re&&U.type!=="foreignObject";if(ae?_(K.dynamicChildren,ae,ie,H,q,xe,j):$||F(K,U,ie,null,H,q,xe,j,!1),oe>0){if(oe&16)p(ie,U,_e,ue,H,q,re);else if(oe&2&&_e.class!==ue.class&&m(ie,"class",null,ue.class,re),oe&4&&m(ie,"style",_e.style,ue.style,re),oe&8){const me=U.dynamicProps;for(let be=0;be<me.length;be++){const ke=me[be],De=_e[ke],Ve=ue[ke];(Ve!==De||ke==="value")&&m(ie,ke,De,Ve,re,K.children,H,q,ee)}}oe&1&&K.children!==U.children&&a(ie,U.children)}else!$&&ae==null&&p(ie,U,_e,ue,H,q,re);((ye=ue.onVnodeUpdated)||se)&&Ql(()=>{ye&&Ic(ye,H,U,K),se&&Zf(U,K,H,"updated")},q)},_=(K,U,H,q,re,j,$)=>{for(let ie=0;ie<U.length;ie++){const oe=K[ie],ae=U[ie],se=oe.el&&(oe.type===$l||!Qf(oe,ae)||oe.shapeFlag&70)?i(oe.el):H;s(oe,ae,se,null,q,re,j,$,!0)}},p=(K,U,H,q,re,j,$)=>{if(H!==q){if(H!==Uo)for(const ie in H)!Wp(ie)&&!(ie in q)&&m(K,ie,H[ie],null,$,U.children,re,j,ee);for(const ie in q){if(Wp(ie))continue;const oe=q[ie],ae=H[ie];oe!==ae&&ie!=="value"&&m(K,ie,ae,oe,$,U.children,re,j,ee)}"value"in q&&m(K,"value",H.value,q.value)}},w=(K,U,H,q,re,j,$,ie,oe)=>{const ae=U.el=K?K.el:A(""),se=U.anchor=K?K.anchor:A("");let{patchFlag:_e,dynamicChildren:ue,slotScopeIds:ye}=U;ye&&(ie=ie?ie.concat(ye):ye),K==null?(B(ae,H,q),B(se,H,q),u(U.children,H,se,re,j,$,ie,oe)):_e>0&&_e&64&&ue&&K.dynamicChildren?(_(K.dynamicChildren,ue,H,re,j,$,ie),(U.key!=null||re&&U===re.subTree)&&$1(K,U,!0)):F(K,U,H,se,re,j,$,ie,oe)},h=(K,U,H,q,re,j,$,ie,oe)=>{U.slotScopeIds=ie,K==null?U.shapeFlag&512?re.ctx.activate(U,H,q,$,oe):L(U,H,q,re,j,$,oe):S(K,U,oe)},L=(K,U,H,q,re,j,$)=>{const ie=K.component=nT(K,q,re);if(xd(K)&&(ie.ctx.renderer=ne),aT(ie),ie.asyncDep){if(re&&re.registerDep(ie,E),!K.el){const oe=ie.subTree=mu(Qc);b(null,oe,U,H)}return}E(ie,K,U,H,re,j,$)},S=(K,U,H)=>{const q=U.component=K.component;if(u3(K,U,H))if(q.asyncDep&&!q.asyncResolved){P(q,U,H);return}else q.next=U,r3(q.update),q.update();else U.el=K.el,q.vnode=U},E=(K,U,H,q,re,j,$)=>{const ie=()=>{if(K.isMounted){let{next:se,bu:_e,u:ue,parent:ye,vnode:xe}=K,me=se,be;jf(K,!1),se?(se.el=xe.el,P(K,se,$)):se=xe,_e&&Xp(_e),(be=se.props&&se.props.onVnodeBeforeUpdate)&&Ic(be,ye,se,xe),jf(K,!0);const ke=f0(K),De=K.subTree;K.subTree=ke,s(De,ke,i(De.el),Z(De),K,re,j),se.el=ke.el,me===null&&c3(K,ke.el),ue&&Ql(ue,re),(be=se.props&&se.props.onVnodeUpdated)&&Ql(()=>Ic(be,ye,se,xe),re)}else{let se;const{el:_e,props:ue}=U,{bm:ye,m:xe,parent:me}=K,be=jp(U);if(jf(K,!1),ye&&Xp(ye),!be&&(se=ue&&ue.onVnodeBeforeMount)&&Ic(se,me,U),jf(K,!0),_e&&Q){const ke=()=>{K.subTree=f0(K),Q(_e,K.subTree,K,re,null)};be?U.type.__asyncLoader().then(()=>!K.isUnmounted&&ke()):ke()}else{const ke=K.subTree=f0(K);s(null,ke,H,q,K,re,j),U.el=ke.el}if(xe&&Ql(xe,re),!be&&(se=ue&&ue.onVnodeMounted)){const ke=U;Ql(()=>Ic(se,me,ke),re)}(U.shapeFlag&256||me&&jp(me.vnode)&&me.vnode.shapeFlag&256)&&K.a&&Ql(K.a,re),K.isMounted=!0,U=H=q=null}},oe=K.effect=new ag(ie,()=>fg(ae),K.scope),ae=K.update=()=>oe.run();ae.id=K.uid,jf(K,!0),ae()},P=(K,U,H)=>{U.component=K;const q=K.vnode.props;K.vnode=U,K.next=null,O3(K,U.props,q,H),V3(K,U.children,H),av(),tm(),iv()},F=(K,U,H,q,re,j,$,ie,oe=!1)=>{const ae=K&&K.children,se=K?K.shapeFlag:0,_e=U.children,{patchFlag:ue,shapeFlag:ye}=U;if(ue>0){if(ue&128){D(ae,_e,H,q,re,j,$,ie,oe);return}else if(ue&256){I(ae,_e,H,q,re,j,$,ie,oe);return}}ye&8?(se&16&&ee(ae,re,j),_e!==ae&&a(H,_e)):se&16?ye&16?D(ae,_e,H,q,re,j,$,ie,oe):ee(ae,re,j,!0):(se&8&&a(H,""),ye&16&&u(_e,H,q,re,j,$,ie,oe))},I=(K,U,H,q,re,j,$,ie,oe)=>{K=K||Yh,U=U||Yh;const ae=K.length,se=U.length,_e=Math.min(ae,se);let ue;for(ue=0;ue<_e;ue++){const ye=U[ue]=oe?wf(U[ue]):Fc(U[ue]);s(K[ue],ye,H,null,re,j,$,ie,oe)}ae>se?ee(K,re,j,!0,!1,_e):u(U,H,q,re,j,$,ie,oe,_e)},D=(K,U,H,q,re,j,$,ie,oe)=>{let ae=0;const se=U.length;let _e=K.length-1,ue=se-1;for(;ae<=_e&&ae<=ue;){const ye=K[ae],xe=U[ae]=oe?wf(U[ae]):Fc(U[ae]);if(Qf(ye,xe))s(ye,xe,H,null,re,j,$,ie,oe);else break;ae++}for(;ae<=_e&&ae<=ue;){const ye=K[_e],xe=U[ue]=oe?wf(U[ue]):Fc(U[ue]);if(Qf(ye,xe))s(ye,xe,H,null,re,j,$,ie,oe);else break;_e--,ue--}if(ae>_e){if(ae<=ue){const ye=ue+1,xe=ye<se?U[ye].el:q;for(;ae<=ue;)s(null,U[ae]=oe?wf(U[ae]):Fc(U[ae]),H,xe,re,j,$,ie,oe),ae++}}else if(ae>ue)for(;ae<=_e;)N(K[ae],re,j,!0),ae++;else{const ye=ae,xe=ae,me=new Map;for(ae=xe;ae<=ue;ae++){const Ye=U[ae]=oe?wf(U[ae]):Fc(U[ae]);Ye.key!=null&&me.set(Ye.key,ae)}let be,ke=0;const De=ue-xe+1;let Ve=!1,Ae=0;const Le=new Array(De);for(ae=0;ae<De;ae++)Le[ae]=0;for(ae=ye;ae<=_e;ae++){const Ye=K[ae];if(ke>=De){N(Ye,re,j,!0);continue}let ze;if(Ye.key!=null)ze=me.get(Ye.key);else for(be=xe;be<=ue;be++)if(Le[be-xe]===0&&Qf(Ye,U[be])){ze=be;break}ze===void 0?N(Ye,re,j,!0):(Le[ze-xe]=ae+1,ze>=Ae?Ae=ze:Ve=!0,s(Ye,U[ze],H,null,re,j,$,ie,oe),ke++)}const je=Ve?X3(Le):Yh;for(be=je.length-1,ae=De-1;ae>=0;ae--){const Ye=xe+ae,ze=U[Ye],Ie=Ye+1<se?U[Ye+1].el:q;Le[ae]===0?s(null,ze,H,Ie,re,j,$,ie,oe):Ve&&(be<0||ae!==je[be]?R(ze,H,Ie,2):be--)}}},R=(K,U,H,q,re=null)=>{const{el:j,type:$,transition:ie,children:oe,shapeFlag:ae}=K;if(ae&6){R(K.component.subTree,U,H,q);return}if(ae&128){K.suspense.move(U,H,q);return}if(ae&64){$.move(K,U,H,ne);return}if($===$l){B(j,U,H);for(let _e=0;_e<oe.length;_e++)R(oe[_e],U,H,q);B(K.anchor,U,H);return}if($===p0){d(K,U,H);return}if(q!==2&&ae&1&&ie)if(q===0)ie.beforeEnter(j),B(j,U,H),Ql(()=>ie.enter(j),re);else{const{leave:_e,delayLeave:ue,afterLeave:ye}=ie,xe=()=>B(j,U,H),me=()=>{_e(j,()=>{xe(),ye&&ye()})};ue?ue(j,xe,me):me()}else B(j,U,H)},N=(K,U,H,q=!1,re=!1)=>{const{type:j,props:$,ref:ie,children:oe,dynamicChildren:ae,shapeFlag:se,patchFlag:_e,dirs:ue}=K;if(ie!=null&&V0(ie,null,H,K,!0),se&256){U.ctx.deactivate(K);return}const ye=se&1&&ue,xe=!jp(K);let me;if(xe&&(me=$&&$.onVnodeBeforeUnmount)&&Ic(me,U,K),se&6)Y(K.component,H,q);else{if(se&128){K.suspense.unmount(H,q);return}ye&&Zf(K,null,U,"beforeUnmount"),se&64?K.type.remove(K,U,H,re,ne,q):ae&&(j!==$l||_e>0&&_e&64)?ee(ae,U,H,!1,!0):(j===$l&&_e&384||!re&&se&16)&&ee(oe,U,H),q&&z(K)}(xe&&(me=$&&$.onVnodeUnmounted)||ye)&&Ql(()=>{me&&Ic(me,U,K),ye&&Zf(K,null,U,"unmounted")},H)},z=K=>{const{type:U,el:H,anchor:q,transition:re}=K;if(U===$l){G(H,q);return}if(U===p0){f(K);return}const j=()=>{V(H),re&&!re.persisted&&re.afterLeave&&re.afterLeave()};if(K.shapeFlag&1&&re&&!re.persisted){const{leave:$,delayLeave:ie}=re,oe=()=>$(H,j);ie?ie(K.el,j,oe):oe()}else j()},G=(K,U)=>{let H;for(;K!==U;)H=n(K),V(K),K=H;V(U)},Y=(K,U,H)=>{const{bum:q,scope:re,update:j,subTree:$,um:ie}=K;q&&Xp(q),re.stop(),j&&(j.active=!1,N($,K,U,H)),ie&&Ql(ie,U),Ql(()=>{K.isUnmounted=!0},U),U&&U.pendingBranch&&!U.isUnmounted&&K.asyncDep&&!K.asyncResolved&&K.suspenseId===U.pendingId&&(U.deps--,U.deps===0&&U.resolve())},ee=(K,U,H,q=!1,re=!1,j=0)=>{for(let $=j;$<K.length;$++)N(K[$],U,H,q,re)},Z=K=>K.shapeFlag&6?Z(K.component.subTree):K.shapeFlag&128?K.suspense.next():n(K.anchor||K.el),X=(K,U,H)=>{K==null?U._vnode&&N(U._vnode,null,null,!0):s(U._vnode||null,K,U,null,null,null,H),tm(),R1(),U._vnode=K},ne={p:s,um:N,m:R,r:z,mt:L,mc:u,pc:F,pbc:_,n:Z,o:ve};let ce,Q;return fe&&([ce,Q]=fe(ne)),{render:X,hydrate:ce,createApp:G3(X,ce)}}function jf({effect:ve,update:fe},t){ve.allowRecurse=fe.allowRecurse=t}function $1(ve,fe,t=!1){const B=ve.children,V=fe.children;if(yi(B)&&yi(V))for(let m=0;m<B.length;m++){const c=B[m];let A=V[m];A.shapeFlag&1&&!A.dynamicChildren&&((A.patchFlag<=0||A.patchFlag===32)&&(A=V[m]=wf(V[m]),A.el=c.el),t||$1(c,A)),A.type===_d&&(A.el=c.el)}}function X3(ve){const fe=ve.slice(),t=[0];let B,V,m,c,A;const T=ve.length;for(B=0;B<T;B++){const e=ve[B];if(e!==0){if(V=t[t.length-1],ve[V]<e){fe[B]=V,t.push(B);continue}for(m=0,c=t.length-1;m<c;)A=m+c>>1,ve[t[A]]<e?m=A+1:c=A;e<ve[t[m]]&&(m>0&&(fe[B]=t[m-1]),t[m]=B)}}for(m=t.length,c=t[m-1];m-- >0;)t[m]=c,c=fe[c];return t}const Z3=ve=>ve.__isTeleport,$l=Symbol(void 0),_d=Symbol(void 0),Qc=Symbol(void 0),p0=Symbol(void 0),Nv=[];let fc=null;function ql(ve=!1){Nv.push(fc=ve?null:[])}function j3(){Nv.pop(),fc=Nv[Nv.length-1]||null}let Zv=1;function fm(ve){Zv+=ve}function K3(ve){return ve.dynamicChildren=Zv>0?fc||Yh:null,j3(),Zv>0&&fc&&fc.push(ve),ve}function eu(ve,fe,t,B,V,m){return K3(Vn(ve,fe,t,B,V,m,!0))}function J3(ve){return ve?ve.__v_isVNode===!0:!1}function Qf(ve,fe){return ve.type===fe.type&&ve.key===fe.key}const wd="__vInternal",q1=({key:ve})=>ve!=null?ve:null,Kp=({ref:ve,ref_key:fe,ref_for:t})=>ve!=null?Rs(ve)||hs(ve)||Bi(ve)?{i:yu,r:ve,k:fe,f:!!t}:ve:null;function Vn(ve,fe=null,t=null,B=0,V=null,m=ve===$l?0:1,c=!1,A=!1){const T={__v_isVNode:!0,__v_skip:!0,type:ve,props:fe,key:fe&&q1(fe),ref:fe&&Kp(fe),scopeId:z1,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:m,patchFlag:B,dynamicProps:V,dynamicChildren:null,appContext:null,ctx:yu};return A?(gg(T,t),m&128&&ve.normalize(T)):t&&(T.shapeFlag|=Rs(t)?8:16),Zv>0&&!c&&fc&&(T.patchFlag>0||m&6)&&T.patchFlag!==32&&fc.push(T),T}const mu=Q3;function Q3(ve,fe=null,t=null,B=0,V=null,m=!1){if((!ve||ve===k3)&&(ve=Qc),J3(ve)){const A=Cf(ve,fe,!0);return t&&gg(A,t),Zv>0&&!m&&fc&&(A.shapeFlag&6?fc[fc.indexOf(ve)]=A:fc.push(A)),A.patchFlag|=-2,A}if(uT(ve)&&(ve=ve.__vccOpts),fe){fe=$3(fe);let{class:A,style:T}=fe;A&&!Rs(A)&&(fe.class=Jl(A)),Vo(T)&&(M1(T)&&!yi(T)&&(T=bl({},T)),fe.style=q0(T))}const c=Rs(ve)?1:f3(ve)?128:Z3(ve)?64:Vo(ve)?4:Bi(ve)?2:0;return Vn(ve,fe,t,B,V,c,m,!0)}function $3(ve){return ve?M1(ve)||wd in ve?bl({},ve):ve:null}function Cf(ve,fe,t=!1){const{props:B,ref:V,patchFlag:m,children:c}=ve,A=fe?eT(B||{},fe):B;return{__v_isVNode:!0,__v_skip:!0,type:ve.type,props:A,key:A&&q1(A),ref:fe&&fe.ref?t&&V?yi(V)?V.concat(Kp(fe)):[V,Kp(fe)]:Kp(fe):V,scopeId:ve.scopeId,slotScopeIds:ve.slotScopeIds,children:c,target:ve.target,targetAnchor:ve.targetAnchor,staticCount:ve.staticCount,shapeFlag:ve.shapeFlag,patchFlag:fe&&ve.type!==$l?m===-1?16:m|16:m,dynamicProps:ve.dynamicProps,dynamicChildren:ve.dynamicChildren,appContext:ve.appContext,dirs:ve.dirs,transition:ve.transition,component:ve.component,suspense:ve.suspense,ssContent:ve.ssContent&&Cf(ve.ssContent),ssFallback:ve.ssFallback&&Cf(ve.ssFallback),el:ve.el,anchor:ve.anchor,ctx:ve.ctx}}function q3(ve=" ",fe=0){return mu(_d,null,ve,fe)}function Fc(ve){return ve==null||typeof ve=="boolean"?mu(Qc):yi(ve)?mu($l,null,ve.slice()):typeof ve=="object"?wf(ve):mu(_d,null,String(ve))}function wf(ve){return ve.el===null&&ve.patchFlag!==-1||ve.memo?ve:Cf(ve)}function gg(ve,fe){let t=0;const{shapeFlag:B}=ve;if(fe==null)fe=null;else if(yi(fe))t=16;else if(typeof fe=="object")if(B&65){const V=fe.default;V&&(V._c&&(V._d=!1),gg(ve,V()),V._c&&(V._d=!0));return}else{t=32;const V=fe._;!V&&!(wd in fe)?fe._ctx=yu:V===3&&yu&&(yu.slots._===1?fe._=1:(fe._=2,ve.patchFlag|=1024))}else Bi(fe)?(fe={default:fe,_ctx:yu},t=32):(fe=String(fe),B&64?(t=16,fe=[q3(fe)]):t=8);ve.children=fe,ve.shapeFlag|=t}function eT(...ve){const fe={};for(let t=0;t<ve.length;t++){const B=ve[t];for(const V in B)if(V==="class")fe.class!==B.class&&(fe.class=Jl([fe.class,B.class]));else if(V==="style")fe.style=q0([fe.style,B.style]);else if(fd(V)){const m=fe[V],c=B[V];c&&m!==c&&!(yi(m)&&m.includes(c))&&(fe[V]=m?[].concat(m,c):c)}else V!==""&&(fe[V]=B[V])}return fe}function Ic(ve,fe,t,B=null){Nu(ve,fe,7,[t,B])}const tT=Q1();let rT=0;function nT(ve,fe,t){const B=ve.type,V=(fe?fe.appContext:ve.appContext)||tT,m={uid:rT++,vnode:ve,type:B,parent:fe,appContext:V,root:null,next:null,subTree:null,effect:null,update:null,scope:new h1(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:fe?fe.provides:Object.create(V.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Z1(B,V),emitsOptions:F1(B,V),emit:null,emitted:null,propsDefaults:Uo,inheritAttrs:B.inheritAttrs,ctx:Uo,data:Uo,props:Uo,attrs:Uo,slots:Uo,refs:Uo,setupState:Uo,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return m.ctx={_:m},m.root=fe?fe.root:m,m.emit=i3.bind(null,m),ve.ce&&ve.ce(m),m}let Ws=null;const ex=()=>Ws||yu,Kh=ve=>{Ws=ve,ve.scope.on()},ah=()=>{Ws&&Ws.scope.off(),Ws=null};function tx(ve){return ve.vnode.shapeFlag&4}let jv=!1;function aT(ve,fe=!1){jv=fe;const{props:t,children:B}=ve.vnode,V=tx(ve);N3(ve,t,V,fe),U3(ve,B);const m=V?iT(ve,fe):void 0;return jv=!1,m}function iT(ve,fe){const t=ve.type;ve.accessCache=Object.create(null),ve.proxy=jh(new Proxy(ve.ctx,P3));const{setup:B}=t;if(B){const V=ve.setupContext=B.length>1?sT(ve):null;Kh(ve),av();const m=Sf(B,ve,0,[ve.props,V]);if(iv(),ah(),u1(m)){if(m.then(ah,ah),fe)return m.then(c=>{hm(ve,c,fe)}).catch(c=>{yd(c,ve,0)});ve.asyncDep=m}else hm(ve,m,fe)}else rx(ve,fe)}function hm(ve,fe,t){Bi(fe)?ve.type.__ssrInlineRender?ve.ssrRender=fe:ve.render=fe:Vo(fe)&&(ve.setupState=C1(fe)),rx(ve,t)}let vm;function rx(ve,fe,t){const B=ve.type;if(!ve.render){if(!fe&&vm&&!B.render){const V=B.template||pg(ve).template;if(V){const{isCustomElement:m,compilerOptions:c}=ve.appContext.config,{delimiters:A,compilerOptions:T}=B,e=bl(bl({isCustomElement:m,delimiters:A},c),T);B.render=vm(V,e)}}ve.render=B.render||hc}Kh(ve),av(),D3(ve),iv(),ah()}function oT(ve){return new Proxy(ve.attrs,{get(fe,t){return xu(ve,"get","$attrs"),fe[t]}})}function sT(ve){const fe=B=>{ve.exposed=B||{}};let t;return{get attrs(){return t||(t=oT(ve))},slots:ve.slots,emit:ve.emit,expose:fe}}function Td(ve){if(ve.exposed)return ve.exposeProxy||(ve.exposeProxy=new Proxy(C1(jh(ve.exposed)),{get(fe,t){if(t in fe)return fe[t];if(t in zv)return zv[t](ve)},has(fe,t){return t in fe||t in zv}}))}function lT(ve,fe=!0){return Bi(ve)?ve.displayName||ve.name:ve.name||fe&&ve.__name}function uT(ve){return Bi(ve)&&"__vccOpts"in ve}const nd=(ve,fe)=>qw(ve,fe,jv),cT=Symbol(""),fT=()=>Fv(cT),hT="3.2.45",vT="http://www.w3.org/2000/svg",$f=typeof document<"u"?document:null,pm=$f&&$f.createElement("template"),pT={insert:(ve,fe,t)=>{fe.insertBefore(ve,t||null)},remove:ve=>{const fe=ve.parentNode;fe&&fe.removeChild(ve)},createElement:(ve,fe,t,B)=>{const V=fe?$f.createElementNS(vT,ve):$f.createElement(ve,t?{is:t}:void 0);return ve==="select"&&B&&B.multiple!=null&&V.setAttribute("multiple",B.multiple),V},createText:ve=>$f.createTextNode(ve),createComment:ve=>$f.createComment(ve),setText:(ve,fe)=>{ve.nodeValue=fe},setElementText:(ve,fe)=>{ve.textContent=fe},parentNode:ve=>ve.parentNode,nextSibling:ve=>ve.nextSibling,querySelector:ve=>$f.querySelector(ve),setScopeId(ve,fe){ve.setAttribute(fe,"")},insertStaticContent(ve,fe,t,B,V,m){const c=t?t.previousSibling:fe.lastChild;if(V&&(V===m||V.nextSibling))for(;fe.insertBefore(V.cloneNode(!0),t),!(V===m||!(V=V.nextSibling)););else{pm.innerHTML=B?`<svg>${ve}</svg>`:ve;const A=pm.content;if(B){const T=A.firstChild;for(;T.firstChild;)A.appendChild(T.firstChild);A.removeChild(T)}fe.insertBefore(A,t)}return[c?c.nextSibling:fe.firstChild,t?t.previousSibling:fe.lastChild]}};function dT(ve,fe,t){const B=ve._vtc;B&&(fe=(fe?[fe,...B]:[...B]).join(" ")),fe==null?ve.removeAttribute("class"):t?ve.setAttribute("class",fe):ve.className=fe}function gT(ve,fe,t){const B=ve.style,V=Rs(t);if(t&&!V){for(const m in t)H0(B,m,t[m]);if(fe&&!Rs(fe))for(const m in fe)t[m]==null&&H0(B,m,"")}else{const m=B.display;V?fe!==t&&(B.cssText=t):fe&&ve.removeAttribute("style"),"_vod"in ve&&(B.display=m)}}const dm=/\s*!important$/;function H0(ve,fe,t){if(yi(t))t.forEach(B=>H0(ve,fe,B));else if(t==null&&(t=""),fe.startsWith("--"))ve.setProperty(fe,t);else{const B=yT(ve,fe);dm.test(t)?ve.setProperty(nv(B),t.replace(dm,""),"important"):ve[B]=t}}const gm=["Webkit","Moz","ms"],d0={};function yT(ve,fe){const t=d0[fe];if(t)return t;let B=Bc(fe);if(B!=="filter"&&B in ve)return d0[fe]=B;B=pd(B);for(let V=0;V<gm.length;V++){const m=gm[V]+B;if(m in ve)return d0[fe]=m}return fe}const ym="http://www.w3.org/1999/xlink";function mT(ve,fe,t,B,V){if(B&&fe.startsWith("xlink:"))t==null?ve.removeAttributeNS(ym,fe.slice(6,fe.length)):ve.setAttributeNS(ym,fe,t);else{const m=sw(fe);t==null||m&&!s1(t)?ve.removeAttribute(fe):ve.setAttribute(fe,m?"":t)}}function xT(ve,fe,t,B,V,m,c){if(fe==="innerHTML"||fe==="textContent"){B&&c(B,V,m),ve[fe]=t==null?"":t;return}if(fe==="value"&&ve.tagName!=="PROGRESS"&&!ve.tagName.includes("-")){ve._value=t;const T=t==null?"":t;(ve.value!==T||ve.tagName==="OPTION")&&(ve.value=T),t==null&&ve.removeAttribute(fe);return}let A=!1;if(t===""||t==null){const T=typeof ve[fe];T==="boolean"?t=s1(t):t==null&&T==="string"?(t="",A=!0):T==="number"&&(t=0,A=!0)}try{ve[fe]=t}catch{}A&&ve.removeAttribute(fe)}function qf(ve,fe,t,B){ve.addEventListener(fe,t,B)}function bT(ve,fe,t,B){ve.removeEventListener(fe,t,B)}function _T(ve,fe,t,B,V=null){const m=ve._vei||(ve._vei={}),c=m[fe];if(B&&c)c.value=B;else{const[A,T]=wT(fe);if(B){const e=m[fe]=MT(B,V);qf(ve,A,e,T)}else c&&(bT(ve,A,c,T),m[fe]=void 0)}}const mm=/(?:Once|Passive|Capture)$/;function wT(ve){let fe;if(mm.test(ve)){fe={};let B;for(;B=ve.match(mm);)ve=ve.slice(0,ve.length-B[0].length),fe[B[0].toLowerCase()]=!0}return[ve[2]===":"?ve.slice(3):nv(ve.slice(2)),fe]}let g0=0;const TT=Promise.resolve(),AT=()=>g0||(TT.then(()=>g0=0),g0=Date.now());function MT(ve,fe){const t=B=>{if(!B._vts)B._vts=Date.now();else if(B._vts<=t.attached)return;Nu(ST(B,t.value),fe,5,[B])};return t.value=ve,t.attached=AT(),t}function ST(ve,fe){if(yi(fe)){const t=ve.stopImmediatePropagation;return ve.stopImmediatePropagation=()=>{t.call(ve),ve._stopped=!0},fe.map(B=>V=>!V._stopped&&B&&B(V))}else return fe}const xm=/^on[a-z]/,ET=(ve,fe,t,B,V=!1,m,c,A,T)=>{fe==="class"?dT(ve,B,V):fe==="style"?gT(ve,t,B):fd(fe)?eg(fe)||_T(ve,fe,t,B,c):(fe[0]==="."?(fe=fe.slice(1),!0):fe[0]==="^"?(fe=fe.slice(1),!1):CT(ve,fe,B,V))?xT(ve,fe,B,m,c,A,T):(fe==="true-value"?ve._trueValue=B:fe==="false-value"&&(ve._falseValue=B),mT(ve,fe,B,V))};function CT(ve,fe,t,B){return B?!!(fe==="innerHTML"||fe==="textContent"||fe in ve&&xm.test(fe)&&Bi(t)):fe==="spellcheck"||fe==="draggable"||fe==="translate"||fe==="form"||fe==="list"&&ve.tagName==="INPUT"||fe==="type"&&ve.tagName==="TEXTAREA"||xm.test(fe)&&Rs(t)?!1:fe in ve}const kT={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};y3.props;const ad=ve=>{const fe=ve.props["onUpdate:modelValue"]||!1;return yi(fe)?t=>Xp(fe,t):fe};function LT(ve){ve.target.composing=!0}function bm(ve){const fe=ve.target;fe.composing&&(fe.composing=!1,fe.dispatchEvent(new Event("input")))}const ml={created(ve,{modifiers:{lazy:fe,trim:t,number:B}},V){ve._assign=ad(V);const m=B||V.props&&V.props.type==="number";qf(ve,fe?"change":"input",c=>{if(c.target.composing)return;let A=ve.value;t&&(A=A.trim()),m&&(A=Gv(A)),ve._assign(A)}),t&&qf(ve,"change",()=>{ve.value=ve.value.trim()}),fe||(qf(ve,"compositionstart",LT),qf(ve,"compositionend",bm),qf(ve,"change",bm))},mounted(ve,{value:fe}){ve.value=fe==null?"":fe},beforeUpdate(ve,{value:fe,modifiers:{lazy:t,trim:B,number:V}},m){if(ve._assign=ad(m),ve.composing||document.activeElement===ve&&ve.type!=="range"&&(t||B&&ve.value.trim()===fe||(V||ve.type==="number")&&Gv(ve.value)===fe))return;const c=fe==null?"":fe;ve.value!==c&&(ve.value=c)}},PT={deep:!0,created(ve,{value:fe,modifiers:{number:t}},B){const V=hd(fe);qf(ve,"change",()=>{const m=Array.prototype.filter.call(ve.options,c=>c.selected).map(c=>t?Gv(id(c)):id(c));ve._assign(ve.multiple?V?new Set(m):m:m[0])}),ve._assign=ad(B)},mounted(ve,{value:fe}){_m(ve,fe)},beforeUpdate(ve,fe,t){ve._assign=ad(t)},updated(ve,{value:fe}){_m(ve,fe)}};function _m(ve,fe){const t=ve.multiple;if(!(t&&!yi(fe)&&!hd(fe))){for(let B=0,V=ve.options.length;B<V;B++){const m=ve.options[B],c=id(m);if(t)yi(fe)?m.selected=uw(fe,c)>-1:m.selected=fe.has(c);else if(cd(id(m),fe)){ve.selectedIndex!==B&&(ve.selectedIndex=B);return}}!t&&ve.selectedIndex!==-1&&(ve.selectedIndex=-1)}}function id(ve){return"_value"in ve?ve._value:ve.value}const DT=bl({patchProp:ET},pT);let wm;function RT(){return wm||(wm=Y3(DT))}const IT=(...ve)=>{const fe=RT().createApp(...ve),{mount:t}=fe;return fe.mount=B=>{const V=FT(B);if(!V)return;const m=fe._component;!Bi(m)&&!m.render&&!m.template&&(m.template=V.innerHTML),V.innerHTML="";const c=t(V,!1,V instanceof SVGElement);return V instanceof Element&&(V.removeAttribute("v-cloak"),V.setAttribute("data-v-app","")),c},fe};function FT(ve){return Rs(ve)?document.querySelector(ve):ve}var zT=!1;/*!
  * pinia v2.0.27
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */let nx;const Ad=ve=>nx=ve,ax=Symbol();function G0(ve){return ve&&typeof ve=="object"&&Object.prototype.toString.call(ve)==="[object Object]"&&typeof ve.toJSON!="function"}var Ov;(function(ve){ve.direct="direct",ve.patchObject="patch object",ve.patchFunction="patch function"})(Ov||(Ov={}));function NT(){const ve=v1(!0),fe=ve.run(()=>du({}));let t=[],B=[];const V=jh({install(m){Ad(V),V._a=m,m.provide(ax,V),m.config.globalProperties.$pinia=V,B.forEach(c=>t.push(c)),B=[]},use(m){return!this._a&&!zT?B.push(m):t.push(m),this},_p:t,_a:null,_e:ve,_s:new Map,state:fe});return V}const ix=()=>{};function Tm(ve,fe,t,B=ix){ve.push(fe);const V=()=>{const m=ve.indexOf(fe);m>-1&&(ve.splice(m,1),B())};return!t&&mw()&&xw(V),V}function Nh(ve,...fe){ve.slice().forEach(t=>{t(...fe)})}function Y0(ve,fe){ve instanceof Map&&fe instanceof Map&&fe.forEach((t,B)=>ve.set(B,t)),ve instanceof Set&&fe instanceof Set&&fe.forEach(ve.add,ve);for(const t in fe){if(!fe.hasOwnProperty(t))continue;const B=fe[t],V=ve[t];G0(V)&&G0(B)&&ve.hasOwnProperty(t)&&!hs(B)&&!Mf(B)?ve[t]=Y0(V,B):ve[t]=B}return ve}const OT=Symbol();function BT(ve){return!G0(ve)||!ve.hasOwnProperty(OT)}const{assign:Tf}=Object;function UT(ve){return!!(hs(ve)&&ve.effect)}function VT(ve,fe,t,B){const{state:V,actions:m,getters:c}=fe,A=t.state.value[ve];let T;function e(){A||(t.state.value[ve]=V?V():{});const a=Kw(t.state.value[ve]);return Tf(a,m,Object.keys(c||{}).reduce((i,n)=>(i[n]=jh(nd(()=>{Ad(t);const r=t._s.get(ve);return c[n].call(r,r)})),i),{}))}return T=ox(ve,e,fe,t,B,!0),T.$reset=function(){const i=V?V():{};this.$patch(n=>{Tf(n,i)})},T}function ox(ve,fe,t={},B,V,m){let c;const A=Tf({actions:{}},t),T={deep:!0};let e,a,i=jh([]),n=jh([]),r;const v=B.state.value[ve];!m&&!v&&(B.state.value[ve]={}),du({});let s;function o(x){let u;e=a=!1,typeof x=="function"?(x(B.state.value[ve]),u={type:Ov.patchFunction,storeId:ve,events:r}):(Y0(B.state.value[ve],x),u={type:Ov.patchObject,payload:x,storeId:ve,events:r});const M=s=Symbol();P1().then(()=>{s===M&&(e=!0)}),a=!0,Nh(i,u,B.state.value[ve])}const b=ix;function g(){c.stop(),i=[],n=[],B._s.delete(ve)}function d(x,u){return function(){Ad(B);const M=Array.from(arguments),_=[],p=[];function w(S){_.push(S)}function h(S){p.push(S)}Nh(n,{args:M,name:x,store:y,after:w,onError:h});let L;try{L=u.apply(this&&this.$id===ve?this:y,M)}catch(S){throw Nh(p,S),S}return L instanceof Promise?L.then(S=>(Nh(_,S),S)).catch(S=>(Nh(p,S),Promise.reject(S))):(Nh(_,L),L)}}const f={_p:B,$id:ve,$onAction:Tm.bind(null,n),$patch:o,$reset:b,$subscribe(x,u={}){const M=Tm(i,x,u.detached,()=>_()),_=c.run(()=>Zp(()=>B.state.value[ve],p=>{(u.flush==="sync"?a:e)&&x({storeId:ve,type:Ov.direct,events:r},p)},Tf({},T,u)));return M},$dispose:g},y=gd(f);B._s.set(ve,y);const l=B._e.run(()=>(c=v1(),c.run(()=>fe())));for(const x in l){const u=l[x];if(hs(u)&&!UT(u)||Mf(u))m||(v&&BT(u)&&(hs(u)?u.value=v[x]:Y0(u,v[x])),B.state.value[ve][x]=u);else if(typeof u=="function"){const M=d(x,u);l[x]=M,A.actions[x]=u}}return Tf(y,l),Tf(lo(y),l),Object.defineProperty(y,"$state",{get:()=>B.state.value[ve],set:x=>{o(u=>{Tf(u,x)})}}),B._p.forEach(x=>{Tf(y,c.run(()=>x({store:y,app:B._a,pinia:B,options:A})))}),v&&m&&t.hydrate&&t.hydrate(y.$state,v),e=!0,a=!0,y}function HT(ve,fe,t){let B,V;const m=typeof fe=="function";typeof ve=="string"?(B=ve,V=m?t:fe):(V=ve,B=ve.id);function c(A,T){const e=ex();return A=A||e&&Fv(ax),A&&Ad(A),A=nx,A._s.has(B)||(m?ox(B,fe,V,A):VT(B,V,A)),A._s.get(B)}return c.$id=B,c}function GT(ve,fe,t,B,V,m,c,A,T,e,a,i,n,r,v,s){const o=_=>_.map((p=>w=>p+=w)(0)),b=[[],[],[],[],[]];for(var g=1;g<=t;g++)b[0].push(g),b[1].push(B*(1+A/100)**g),b[2].push(V*(1+T/100)**g),b[3].push(m*(1+e/100)**g),b[4].push(c*(1+a/100)**g);const d=[[],[],[],[],[]];for(var g=1;g<=t;g++)d[0].push(g),d[1].push(b[1][g-1]/(1+ve/100)**g),d[2].push(b[2][g-1]/(1+ve/100)**g),d[3].push(b[3][g-1]/(1+ve/100)**g),d[4].push(b[4][g-1]/(1+ve/100)**g);const f=[[],[],[],[]];for(var y=1;y<=t;y++)y%v==0?(f[0].push(y),f[1].push(i*(1+A/100)**y),f[2].push(n*(1+T/100)**y),f[3].push(r*(1+e/100)**y)):(f[0].push(0),f[1].push(0),f[2].push(0),f[3].push(0));const l=[[],[],[],[]];for(var y=1;y<=t;y++)y%v==0?(l[0].push(y),l[1].push(i*(1+A/100)**y/(1+ve/100)**y),l[2].push(n*(1+T/100)**y/(1+ve/100)**y),l[3].push(r*(1+e/100)**y/(1+ve/100)**y)):(l[0].push(0),l[1].push(0),l[2].push(0),l[3].push(0));const x=[[],[],[],[]];x[0]=d[0],x[1]=o(d[1]),x[2]=o(d[2]),x[3]=o(d[3]),x[4]=o(d[4]);const u=[[],[],[]];u[0]=l[0],u[1]=o(l[1]),u[2]=o(l[2]),u[3]=o(l[3]);const M=[[],[],[],[],[],[]];for(var y=0;y<t;y++)M[0][y]=x[0][y],M[1][y]=-1*(x[1][y]+u[1][y]),M[2][y]=-1*(x[2][y]+u[2][y]),M[3][y]=-1*(x[3][y]+u[3][y]),M[4][y]=x[4][y],M[5][y]=M[1][y]+M[2][y]+M[3][y]+M[4][y]-s;for(var y=0;y<t;y++)-1*x[0][y],-1*(x[1][y]+u[1][y]),-1*(x[2][y]+u[2][y]),M[3][y]=-1*(x[3][y]+u[3][y]),x[4][y],M[1][y]+M[2][y]+M[3][y]+M[4][y]-s;return{AV:b,MAV:f,PAV:d,MAPV:l,CAPV:x,CMAPV:u,CPVT:M}}const Qv=HT("maindata",()=>{const ve=du(1),fe=du("EUR"),t=du(5),B=du(2),V=du(2),m=du(2),c=du(2),A=du({});for(var T=1;T<=3;T++)A.value[T]={init_cost:25e4+(T-1)*5e4,exp_life:20,an_en:9e3-(T-1)*2e3,an_mt:12e3-(T-1)*3e3,an_lb:8e3-(T-1)*2e3,an_in:5e4+(T-1)*2e4,mulAn_en:1e4,mulAn_mt:9e3,mulAn_lb:12e3,mulAn_cy:5};du([]);const e=du({}),a=du({});var i=["yellow","darkblue","firebrick","purple","darkgray","darkgreen"];e.value={displayModeBar:!0},a.value={margin:{l:20,r:20,t:30,b:20}};function n(r){for(var v=[{}],s=1;s<=ve.value;s++){for(var o=GT(t.value,s,A.value[s].exp_life,A.value[s].an_en,A.value[s].an_mt,A.value[s].an_lb,A.value[s].an_in,B.value,V.value,m.value,c.value,A.value[s].mulAn_en,A.value[s].mulAn_mt,A.value[s].mulAn_lb,A.value[s].mulAn_cy,A.value[s].init_cost),b=0;b<5;b++)v.push({x:[],y:[],type:"scatter"});console.log("d : ",v.length),v[1+(s-1)*5+0].x=o.CPVT[0],v[1+(s-1)*5+0].y=o.CPVT[1],v[1+(s-1)*5+0].line={color:i[s],width:2,dash:"dot"},v[1+(s-1)*5+0].name=s.toString()+" Energy",v[1+(s-1)*5+1].x=o.CPVT[0],v[1+(s-1)*5+1].y=o.CPVT[2],v[1+(s-1)*5+1].line={color:i[s],width:2,dash:"dashdot"},v[1+(s-1)*5+1].name=s.toString()+" Material",v[1+(s-1)*5+2].x=o.CPVT[0],v[1+(s-1)*5+2].y=o.CPVT[3],v[1+(s-1)*5+2].line={color:i[s],width:2,dash:"dash"},v[1+(s-1)*5+2].name=s.toString()+" Labour",v[1+(s-1)*5+3].x=o.CPVT[0],v[1+(s-1)*5+3].y=o.CPVT[4],v[1+(s-1)*5+3].line={color:i[s],width:2,dash:"solid"},v[1+(s-1)*5+3].name=s.toString()+" Income",v[1+(s-1)*5+4].x=o.CPVT[0],v[1+(s-1)*5+4].y=o.CPVT[5],v[1+(s-1)*5+4].line={color:i[s],width:4,dash:"solid"},v[1+(s-1)*5+4].name=s.toString()+" Net Income"}r=="pie"&&(v=[{values:v[0].y,labels:v[0].x,type:r,sort:!1}]);const g=e.value,d=a.value;return{data:JSON.parse(JSON.stringify(v)),config:JSON.parse(JSON.stringify(g)),layout:JSON.parse(JSON.stringify(d))}}return{n_projects:ve,currency:fe,i_rate:t,es_en:B,es_mt:V,es_lb:m,es_in:c,project_details:A,getData:n}}),YT=[{countryCode:"NL",countryName:"Netherlands",currencyCode:"EUR",population:"16645000",capital:"Amsterdam",continentName:"Europe"},{countryCode:"AD",countryName:"Andorra",currencyCode:"EUR",population:"84000",capital:"Andorra la Vella",continentName:"Europe"},{countryCode:"AE",countryName:"United Arab Emirates",currencyCode:"AED",population:"4975593",capital:"Abu Dhabi",continentName:"Asia"},{countryCode:"AF",countryName:"Afghanistan",currencyCode:"AFN",population:"29121286",capital:"Kabul",continentName:"Asia"},{countryCode:"AG",countryName:"Antigua and Barbuda",currencyCode:"XCD",population:"86754",capital:"St. John's",continentName:"North America"},{countryCode:"AI",countryName:"Anguilla",currencyCode:"XCD",population:"13254",capital:"The Valley",continentName:"North America"},{countryCode:"AL",countryName:"Albania",currencyCode:"ALL",population:"2986952",capital:"Tirana",continentName:"Europe"},{countryCode:"AM",countryName:"Armenia",currencyCode:"AMD",population:"2968000",capital:"Yerevan",continentName:"Asia"},{countryCode:"AO",countryName:"Angola",currencyCode:"AOA",population:"13068161",capital:"Luanda",continentName:"Africa"},{countryCode:"AR",countryName:"Argentina",currencyCode:"ARS",population:"41343201",capital:"Buenos Aires",continentName:"South America"},{countryCode:"AS",countryName:"American Samoa",currencyCode:"USD",population:"57881",capital:"Pago Pago",continentName:"Oceania"},{countryCode:"AT",countryName:"Austria",currencyCode:"EUR",population:"8205000",capital:"Vienna",continentName:"Europe"},{countryCode:"AU",countryName:"Australia",currencyCode:"AUD",population:"21515754",capital:"Canberra",continentName:"Oceania"},{countryCode:"AW",countryName:"Aruba",currencyCode:"AWG",population:"71566",capital:"Oranjestad",continentName:"North America"},{countryCode:"AX",countryName:"\xC5land",currencyCode:"EUR",population:"26711",capital:"Mariehamn",continentName:"Europe"},{countryCode:"AZ",countryName:"Azerbaijan",currencyCode:"AZN",population:"8303512",capital:"Baku",continentName:"Asia"},{countryCode:"BA",countryName:"Bosnia and Herzegovina",currencyCode:"BAM",population:"4590000",capital:"Sarajevo",continentName:"Europe"},{countryCode:"BB",countryName:"Barbados",currencyCode:"BBD",population:"285653",capital:"Bridgetown",continentName:"North America"},{countryCode:"BD",countryName:"Bangladesh",currencyCode:"BDT",population:"156118464",capital:"Dhaka",continentName:"Asia"},{countryCode:"BE",countryName:"Belgium",currencyCode:"EUR",population:"10403000",capital:"Brussels",continentName:"Europe"},{countryCode:"BF",countryName:"Burkina Faso",currencyCode:"XOF",population:"16241811",capital:"Ouagadougou",continentName:"Africa"},{countryCode:"BG",countryName:"Bulgaria",currencyCode:"BGN",population:"7148785",capital:"Sofia",continentName:"Europe"},{countryCode:"BH",countryName:"Bahrain",currencyCode:"BHD",population:"738004",capital:"Manama",continentName:"Asia"},{countryCode:"BI",countryName:"Burundi",currencyCode:"BIF",population:"9863117",capital:"Bujumbura",continentName:"Africa"},{countryCode:"BJ",countryName:"Benin",currencyCode:"XOF",population:"9056010",capital:"Porto-Novo",continentName:"Africa"},{countryCode:"BL",countryName:"Saint Barth\xE9lemy",currencyCode:"EUR",population:"8450",capital:"Gustavia",continentName:"North America"},{countryCode:"BM",countryName:"Bermuda",currencyCode:"BMD",population:"65365",capital:"Hamilton",continentName:"North America"},{countryCode:"BN",countryName:"Brunei",currencyCode:"BND",population:"395027",capital:"Bandar Seri Begawan",continentName:"Asia"},{countryCode:"BO",countryName:"Bolivia",currencyCode:"BOB",population:"9947418",capital:"Sucre",continentName:"South America"},{countryCode:"BQ",countryName:"Bonaire",currencyCode:"USD",population:"18012",capital:"Kralendijk",continentName:"North America"},{countryCode:"BR",countryName:"Brazil",currencyCode:"BRL",population:"201103330",capital:"Bras\xEDlia",continentName:"South America"},{countryCode:"BS",countryName:"Bahamas",currencyCode:"BSD",population:"301790",capital:"Nassau",continentName:"North America"},{countryCode:"BT",countryName:"Bhutan",currencyCode:"BTN",population:"699847",capital:"Thimphu",continentName:"Asia"},{countryCode:"BV",countryName:"Bouvet Island",currencyCode:"NOK",population:"0",capital:"",continentName:"Antarctica"},{countryCode:"BW",countryName:"Botswana",currencyCode:"BWP",population:"2029307",capital:"Gaborone",continentName:"Africa"},{countryCode:"BY",countryName:"Belarus",currencyCode:"BYR",population:"9685000",capital:"Minsk",continentName:"Europe"},{countryCode:"BZ",countryName:"Belize",currencyCode:"BZD",population:"314522",capital:"Belmopan",continentName:"North America"},{countryCode:"CA",countryName:"Canada",currencyCode:"CAD",population:"33679000",capital:"Ottawa",continentName:"North America"},{countryCode:"CC",countryName:"Cocos [Keeling] Islands",currencyCode:"AUD",population:"628",capital:"West Island",continentName:"Asia"},{countryCode:"CD",countryName:"Democratic Republic of the Congo",currencyCode:"CDF",population:"70916439",capital:"Kinshasa",continentName:"Africa"},{countryCode:"CF",countryName:"Central African Republic",currencyCode:"XAF",population:"4844927",capital:"Bangui",continentName:"Africa"},{countryCode:"CG",countryName:"Republic of the Congo",currencyCode:"XAF",population:"3039126",capital:"Brazzaville",continentName:"Africa"},{countryCode:"CH",countryName:"Switzerland",currencyCode:"CHF",population:"7581000",capital:"Bern",continentName:"Europe"},{countryCode:"CI",countryName:"Ivory Coast",currencyCode:"XOF",population:"21058798",capital:"Yamoussoukro",continentName:"Africa"},{countryCode:"CK",countryName:"Cook Islands",currencyCode:"NZD",population:"21388",capital:"Avarua",continentName:"Oceania"},{countryCode:"CL",countryName:"Chile",currencyCode:"CLP",population:"16746491",capital:"Santiago",continentName:"South America"},{countryCode:"CM",countryName:"Cameroon",currencyCode:"XAF",population:"19294149",capital:"Yaound\xE9",continentName:"Africa"},{countryCode:"CN",countryName:"China",currencyCode:"CNY",population:"1330044000",capital:"Beijing",continentName:"Asia"},{countryCode:"CO",countryName:"Colombia",currencyCode:"COP",population:"47790000",capital:"Bogot\xE1",continentName:"South America"},{countryCode:"CR",countryName:"Costa Rica",currencyCode:"CRC",population:"4516220",capital:"San Jos\xE9",continentName:"North America"},{countryCode:"CU",countryName:"Cuba",currencyCode:"CUP",population:"11423000",capital:"Havana",continentName:"North America"},{countryCode:"CV",countryName:"Cape Verde",currencyCode:"CVE",population:"508659",capital:"Praia",continentName:"Africa"},{countryCode:"CW",countryName:"Curacao",currencyCode:"ANG",population:"141766",capital:"Willemstad",continentName:"North America"},{countryCode:"CX",countryName:"Christmas Island",currencyCode:"AUD",population:"1500",capital:"Flying Fish Cove",continentName:"Asia"},{countryCode:"CY",countryName:"Cyprus",currencyCode:"EUR",population:"1102677",capital:"Nicosia",continentName:"Europe"},{countryCode:"CZ",countryName:"Czechia",currencyCode:"CZK",population:"10476000",capital:"Prague",continentName:"Europe"},{countryCode:"DE",countryName:"Germany",currencyCode:"EUR",population:"81802257",capital:"Berlin",continentName:"Europe"},{countryCode:"DJ",countryName:"Djibouti",currencyCode:"DJF",population:"740528",capital:"Djibouti",continentName:"Africa"},{countryCode:"DK",countryName:"Denmark",currencyCode:"DKK",population:"5484000",capital:"Copenhagen",continentName:"Europe"},{countryCode:"DM",countryName:"Dominica",currencyCode:"XCD",population:"72813",capital:"Roseau",continentName:"North America"},{countryCode:"DO",countryName:"Dominican Republic",currencyCode:"DOP",population:"9823821",capital:"Santo Domingo",continentName:"North America"},{countryCode:"DZ",countryName:"Algeria",currencyCode:"DZD",population:"34586184",capital:"Algiers",continentName:"Africa"},{countryCode:"EC",countryName:"Ecuador",currencyCode:"USD",population:"14790608",capital:"Quito",continentName:"South America"},{countryCode:"EE",countryName:"Estonia",currencyCode:"EUR",population:"1291170",capital:"Tallinn",continentName:"Europe"},{countryCode:"EG",countryName:"Egypt",currencyCode:"EGP",population:"80471869",capital:"Cairo",continentName:"Africa"},{countryCode:"EH",countryName:"Western Sahara",currencyCode:"MAD",population:"273008",capital:"La\xE2youne / El Aai\xFAn",continentName:"Africa"},{countryCode:"ER",countryName:"Eritrea",currencyCode:"ERN",population:"5792984",capital:"Asmara",continentName:"Africa"},{countryCode:"ES",countryName:"Spain",currencyCode:"EUR",population:"46505963",capital:"Madrid",continentName:"Europe"},{countryCode:"ET",countryName:"Ethiopia",currencyCode:"ETB",population:"88013491",capital:"Addis Ababa",continentName:"Africa"},{countryCode:"FI",countryName:"Finland",currencyCode:"EUR",population:"5244000",capital:"Helsinki",continentName:"Europe"},{countryCode:"FJ",countryName:"Fiji",currencyCode:"FJD",population:"875983",capital:"Suva",continentName:"Oceania"},{countryCode:"FK",countryName:"Falkland Islands",currencyCode:"FKP",population:"2638",capital:"Stanley",continentName:"South America"},{countryCode:"FM",countryName:"Micronesia",currencyCode:"USD",population:"107708",capital:"Palikir",continentName:"Oceania"},{countryCode:"FO",countryName:"Faroe Islands",currencyCode:"DKK",population:"48228",capital:"T\xF3rshavn",continentName:"Europe"},{countryCode:"FR",countryName:"France",currencyCode:"EUR",population:"64768389",capital:"Paris",continentName:"Europe"},{countryCode:"GA",countryName:"Gabon",currencyCode:"XAF",population:"1545255",capital:"Libreville",continentName:"Africa"},{countryCode:"GB",countryName:"United Kingdom",currencyCode:"GBP",population:"62348447",capital:"London",continentName:"Europe"},{countryCode:"GD",countryName:"Grenada",currencyCode:"XCD",population:"107818",capital:"St. George's",continentName:"North America"},{countryCode:"GE",countryName:"Georgia",currencyCode:"GEL",population:"4630000",capital:"Tbilisi",continentName:"Asia"},{countryCode:"GF",countryName:"French Guiana",currencyCode:"EUR",population:"195506",capital:"Cayenne",continentName:"South America"},{countryCode:"GG",countryName:"Guernsey",currencyCode:"GBP",population:"65228",capital:"St Peter Port",continentName:"Europe"},{countryCode:"GH",countryName:"Ghana",currencyCode:"GHS",population:"24339838",capital:"Accra",continentName:"Africa"},{countryCode:"GI",countryName:"Gibraltar",currencyCode:"GIP",population:"27884",capital:"Gibraltar",continentName:"Europe"},{countryCode:"GL",countryName:"Greenland",currencyCode:"DKK",population:"56375",capital:"Nuuk",continentName:"North America"},{countryCode:"GM",countryName:"Gambia",currencyCode:"GMD",population:"1593256",capital:"Bathurst",continentName:"Africa"},{countryCode:"GN",countryName:"Guinea",currencyCode:"GNF",population:"10324025",capital:"Conakry",continentName:"Africa"},{countryCode:"GP",countryName:"Guadeloupe",currencyCode:"EUR",population:"443000",capital:"Basse-Terre",continentName:"North America"},{countryCode:"GQ",countryName:"Equatorial Guinea",currencyCode:"XAF",population:"1014999",capital:"Malabo",continentName:"Africa"},{countryCode:"GR",countryName:"Greece",currencyCode:"EUR",population:"11000000",capital:"Athens",continentName:"Europe"},{countryCode:"GS",countryName:"South Georgia and the South Sandwich Islands",currencyCode:"GBP",population:"30",capital:"Grytviken",continentName:"Antarctica"},{countryCode:"GT",countryName:"Guatemala",currencyCode:"GTQ",population:"13550440",capital:"Guatemala City",continentName:"North America"},{countryCode:"GU",countryName:"Guam",currencyCode:"USD",population:"159358",capital:"Hag\xE5t\xF1a",continentName:"Oceania"},{countryCode:"GW",countryName:"Guinea-Bissau",currencyCode:"XOF",population:"1565126",capital:"Bissau",continentName:"Africa"},{countryCode:"GY",countryName:"Guyana",currencyCode:"GYD",population:"748486",capital:"Georgetown",continentName:"South America"},{countryCode:"HK",countryName:"Hong Kong",currencyCode:"HKD",population:"6898686",capital:"Hong Kong",continentName:"Asia"},{countryCode:"HM",countryName:"Heard Island and McDonald Islands",currencyCode:"AUD",population:"0",capital:"",continentName:"Antarctica"},{countryCode:"HN",countryName:"Honduras",currencyCode:"HNL",population:"7989415",capital:"Tegucigalpa",continentName:"North America"},{countryCode:"HR",countryName:"Croatia",currencyCode:"HRK",population:"4284889",capital:"Zagreb",continentName:"Europe"},{countryCode:"HT",countryName:"Haiti",currencyCode:"HTG",population:"9648924",capital:"Port-au-Prince",continentName:"North America"},{countryCode:"HU",countryName:"Hungary",currencyCode:"HUF",population:"9982000",capital:"Budapest",continentName:"Europe"},{countryCode:"ID",countryName:"Indonesia",currencyCode:"IDR",population:"242968342",capital:"Jakarta",continentName:"Asia"},{countryCode:"IE",countryName:"Ireland",currencyCode:"EUR",population:"4622917",capital:"Dublin",continentName:"Europe"},{countryCode:"IL",countryName:"Israel",currencyCode:"ILS",population:"7353985",capital:"",continentName:"Asia"},{countryCode:"IM",countryName:"Isle of Man",currencyCode:"GBP",population:"75049",capital:"Douglas",continentName:"Europe"},{countryCode:"IN",countryName:"India",currencyCode:"INR",population:"1173108018",capital:"New Delhi",continentName:"Asia"},{countryCode:"IO",countryName:"British Indian Ocean Territory",currencyCode:"USD",population:"4000",capital:"",continentName:"Asia"},{countryCode:"IQ",countryName:"Iraq",currencyCode:"IQD",population:"29671605",capital:"Baghdad",continentName:"Asia"},{countryCode:"IR",countryName:"Iran",currencyCode:"IRR",population:"76923300",capital:"Tehran",continentName:"Asia"},{countryCode:"IS",countryName:"Iceland",currencyCode:"ISK",population:"308910",capital:"Reykjavik",continentName:"Europe"},{countryCode:"IT",countryName:"Italy",currencyCode:"EUR",population:"60340328",capital:"Rome",continentName:"Europe"},{countryCode:"JE",countryName:"Jersey",currencyCode:"GBP",population:"90812",capital:"Saint Helier",continentName:"Europe"},{countryCode:"JM",countryName:"Jamaica",currencyCode:"JMD",population:"2847232",capital:"Kingston",continentName:"North America"},{countryCode:"JO",countryName:"Jordan",currencyCode:"JOD",population:"6407085",capital:"Amman",continentName:"Asia"},{countryCode:"JP",countryName:"Japan",currencyCode:"JPY",population:"127288000",capital:"Tokyo",continentName:"Asia"},{countryCode:"KE",countryName:"Kenya",currencyCode:"KES",population:"40046566",capital:"Nairobi",continentName:"Africa"},{countryCode:"KG",countryName:"Kyrgyzstan",currencyCode:"KGS",population:"5776500",capital:"Bishkek",continentName:"Asia"},{countryCode:"KH",countryName:"Cambodia",currencyCode:"KHR",population:"14453680",capital:"Phnom Penh",continentName:"Asia"},{countryCode:"KI",countryName:"Kiribati",currencyCode:"AUD",population:"92533",capital:"Tarawa",continentName:"Oceania"},{countryCode:"KM",countryName:"Comoros",currencyCode:"KMF",population:"773407",capital:"Moroni",continentName:"Africa"},{countryCode:"KN",countryName:"Saint Kitts and Nevis",currencyCode:"XCD",population:"51134",capital:"Basseterre",continentName:"North America"},{countryCode:"KP",countryName:"North Korea",currencyCode:"KPW",population:"22912177",capital:"Pyongyang",continentName:"Asia"},{countryCode:"KR",countryName:"South Korea",currencyCode:"KRW",population:"48422644",capital:"Seoul",continentName:"Asia"},{countryCode:"KW",countryName:"Kuwait",currencyCode:"KWD",population:"2789132",capital:"Kuwait City",continentName:"Asia"},{countryCode:"KY",countryName:"Cayman Islands",currencyCode:"KYD",population:"44270",capital:"George Town",continentName:"North America"},{countryCode:"KZ",countryName:"Kazakhstan",currencyCode:"KZT",population:"15340000",capital:"Astana",continentName:"Asia"},{countryCode:"LA",countryName:"Laos",currencyCode:"LAK",population:"6368162",capital:"Vientiane",continentName:"Asia"},{countryCode:"LB",countryName:"Lebanon",currencyCode:"LBP",population:"4125247",capital:"Beirut",continentName:"Asia"},{countryCode:"LC",countryName:"Saint Lucia",currencyCode:"XCD",population:"160922",capital:"Castries",continentName:"North America"},{countryCode:"LI",countryName:"Liechtenstein",currencyCode:"CHF",population:"35000",capital:"Vaduz",continentName:"Europe"},{countryCode:"LK",countryName:"Sri Lanka",currencyCode:"LKR",population:"21513990",capital:"Colombo",continentName:"Asia"},{countryCode:"LR",countryName:"Liberia",currencyCode:"LRD",population:"3685076",capital:"Monrovia",continentName:"Africa"},{countryCode:"LS",countryName:"Lesotho",currencyCode:"LSL",population:"1919552",capital:"Maseru",continentName:"Africa"},{countryCode:"LT",countryName:"Lithuania",currencyCode:"EUR",population:"2944459",capital:"Vilnius",continentName:"Europe"},{countryCode:"LU",countryName:"Luxembourg",currencyCode:"EUR",population:"497538",capital:"Luxembourg",continentName:"Europe"},{countryCode:"LV",countryName:"Latvia",currencyCode:"EUR",population:"2217969",capital:"Riga",continentName:"Europe"},{countryCode:"LY",countryName:"Libya",currencyCode:"LYD",population:"6461454",capital:"Tripoli",continentName:"Africa"},{countryCode:"MA",countryName:"Morocco",currencyCode:"MAD",population:"33848242",capital:"Rabat",continentName:"Africa"},{countryCode:"MC",countryName:"Monaco",currencyCode:"EUR",population:"32965",capital:"Monaco",continentName:"Europe"},{countryCode:"MD",countryName:"Moldova",currencyCode:"MDL",population:"4324000",capital:"Chi\u015Fin\u0103u",continentName:"Europe"},{countryCode:"ME",countryName:"Montenegro",currencyCode:"EUR",population:"666730",capital:"Podgorica",continentName:"Europe"},{countryCode:"MF",countryName:"Saint Martin",currencyCode:"EUR",population:"35925",capital:"Marigot",continentName:"North America"},{countryCode:"MG",countryName:"Madagascar",currencyCode:"MGA",population:"21281844",capital:"Antananarivo",continentName:"Africa"},{countryCode:"MH",countryName:"Marshall Islands",currencyCode:"USD",population:"65859",capital:"Majuro",continentName:"Oceania"},{countryCode:"MK",countryName:"Macedonia",currencyCode:"MKD",population:"2062294",capital:"Skopje",continentName:"Europe"},{countryCode:"ML",countryName:"Mali",currencyCode:"XOF",population:"13796354",capital:"Bamako",continentName:"Africa"},{countryCode:"MM",countryName:"Myanmar [Burma]",currencyCode:"MMK",population:"53414374",capital:"Naypyitaw",continentName:"Asia"},{countryCode:"MN",countryName:"Mongolia",currencyCode:"MNT",population:"3086918",capital:"Ulan Bator",continentName:"Asia"},{countryCode:"MO",countryName:"Macao",currencyCode:"MOP",population:"449198",capital:"Macao",continentName:"Asia"},{countryCode:"MP",countryName:"Northern Mariana Islands",currencyCode:"USD",population:"53883",capital:"Saipan",continentName:"Oceania"},{countryCode:"MQ",countryName:"Martinique",currencyCode:"EUR",population:"432900",capital:"Fort-de-France",continentName:"North America"},{countryCode:"MR",countryName:"Mauritania",currencyCode:"MRO",population:"3205060",capital:"Nouakchott",continentName:"Africa"},{countryCode:"MS",countryName:"Montserrat",currencyCode:"XCD",population:"9341",capital:"Plymouth",continentName:"North America"},{countryCode:"MT",countryName:"Malta",currencyCode:"EUR",population:"403000",capital:"Valletta",continentName:"Europe"},{countryCode:"MU",countryName:"Mauritius",currencyCode:"MUR",population:"1294104",capital:"Port Louis",continentName:"Africa"},{countryCode:"MV",countryName:"Maldives",currencyCode:"MVR",population:"395650",capital:"Mal\xE9",continentName:"Asia"},{countryCode:"MW",countryName:"Malawi",currencyCode:"MWK",population:"15447500",capital:"Lilongwe",continentName:"Africa"},{countryCode:"MX",countryName:"Mexico",currencyCode:"MXN",population:"112468855",capital:"Mexico City",continentName:"North America"},{countryCode:"MY",countryName:"Malaysia",currencyCode:"MYR",population:"28274729",capital:"Kuala Lumpur",continentName:"Asia"},{countryCode:"MZ",countryName:"Mozambique",currencyCode:"MZN",population:"22061451",capital:"Maputo",continentName:"Africa"},{countryCode:"NA",countryName:"Namibia",currencyCode:"NAD",population:"2128471",capital:"Windhoek",continentName:"Africa"},{countryCode:"NC",countryName:"New Caledonia",currencyCode:"XPF",population:"216494",capital:"Noumea",continentName:"Oceania"},{countryCode:"NE",countryName:"Niger",currencyCode:"XOF",population:"15878271",capital:"Niamey",continentName:"Africa"},{countryCode:"NF",countryName:"Norfolk Island",currencyCode:"AUD",population:"1828",capital:"Kingston",continentName:"Oceania"},{countryCode:"NG",countryName:"Nigeria",currencyCode:"NGN",population:"154000000",capital:"Abuja",continentName:"Africa"},{countryCode:"NI",countryName:"Nicaragua",currencyCode:"NIO",population:"5995928",capital:"Managua",continentName:"North America"},{countryCode:"NO",countryName:"Norway",currencyCode:"NOK",population:"5009150",capital:"Oslo",continentName:"Europe"},{countryCode:"NP",countryName:"Nepal",currencyCode:"NPR",population:"28951852",capital:"Kathmandu",continentName:"Asia"},{countryCode:"NR",countryName:"Nauru",currencyCode:"AUD",population:"10065",capital:"Yaren",continentName:"Oceania"},{countryCode:"NU",countryName:"Niue",currencyCode:"NZD",population:"2166",capital:"Alofi",continentName:"Oceania"},{countryCode:"NZ",countryName:"New Zealand",currencyCode:"NZD",population:"4252277",capital:"Wellington",continentName:"Oceania"},{countryCode:"OM",countryName:"Oman",currencyCode:"OMR",population:"2967717",capital:"Muscat",continentName:"Asia"},{countryCode:"PA",countryName:"Panama",currencyCode:"PAB",population:"3410676",capital:"Panama City",continentName:"North America"},{countryCode:"PE",countryName:"Peru",currencyCode:"PEN",population:"29907003",capital:"Lima",continentName:"South America"},{countryCode:"PF",countryName:"French Polynesia",currencyCode:"XPF",population:"270485",capital:"Papeete",continentName:"Oceania"},{countryCode:"PG",countryName:"Papua New Guinea",currencyCode:"PGK",population:"6064515",capital:"Port Moresby",continentName:"Oceania"},{countryCode:"PH",countryName:"Philippines",currencyCode:"PHP",population:"99900177",capital:"Manila",continentName:"Asia"},{countryCode:"PK",countryName:"Pakistan",currencyCode:"PKR",population:"184404791",capital:"Islamabad",continentName:"Asia"},{countryCode:"PL",countryName:"Poland",currencyCode:"PLN",population:"38500000",capital:"Warsaw",continentName:"Europe"},{countryCode:"PM",countryName:"Saint Pierre and Miquelon",currencyCode:"EUR",population:"7012",capital:"Saint-Pierre",continentName:"North America"},{countryCode:"PN",countryName:"Pitcairn Islands",currencyCode:"NZD",population:"46",capital:"Adamstown",continentName:"Oceania"},{countryCode:"PR",countryName:"Puerto Rico",currencyCode:"USD",population:"3916632",capital:"San Juan",continentName:"North America"},{countryCode:"PS",countryName:"Palestine",currencyCode:"ILS",population:"3800000",capital:"",continentName:"Asia"},{countryCode:"PT",countryName:"Portugal",currencyCode:"EUR",population:"10676000",capital:"Lisbon",continentName:"Europe"},{countryCode:"PW",countryName:"Palau",currencyCode:"USD",population:"19907",capital:"Melekeok",continentName:"Oceania"},{countryCode:"PY",countryName:"Paraguay",currencyCode:"PYG",population:"6375830",capital:"Asunci\xF3n",continentName:"South America"},{countryCode:"QA",countryName:"Qatar",currencyCode:"QAR",population:"840926",capital:"Doha",continentName:"Asia"},{countryCode:"RE",countryName:"R\xE9union",currencyCode:"EUR",population:"776948",capital:"Saint-Denis",continentName:"Africa"},{countryCode:"RO",countryName:"Romania",currencyCode:"RON",population:"21959278",capital:"Bucharest",continentName:"Europe"},{countryCode:"RS",countryName:"Serbia",currencyCode:"RSD",population:"7344847",capital:"Belgrade",continentName:"Europe"},{countryCode:"RU",countryName:"Russia",currencyCode:"RUB",population:"140702000",capital:"Moscow",continentName:"Europe"},{countryCode:"RW",countryName:"Rwanda",currencyCode:"RWF",population:"11055976",capital:"Kigali",continentName:"Africa"},{countryCode:"SA",countryName:"Saudi Arabia",currencyCode:"SAR",population:"25731776",capital:"Riyadh",continentName:"Asia"},{countryCode:"SB",countryName:"Solomon Islands",currencyCode:"SBD",population:"559198",capital:"Honiara",continentName:"Oceania"},{countryCode:"SC",countryName:"Seychelles",currencyCode:"SCR",population:"88340",capital:"Victoria",continentName:"Africa"},{countryCode:"SD",countryName:"Sudan",currencyCode:"SDG",population:"35000000",capital:"Khartoum",continentName:"Africa"},{countryCode:"SE",countryName:"Sweden",currencyCode:"SEK",population:"9828655",capital:"Stockholm",continentName:"Europe"},{countryCode:"SG",countryName:"Singapore",currencyCode:"SGD",population:"4701069",capital:"Singapore",continentName:"Asia"},{countryCode:"SH",countryName:"Saint Helena",currencyCode:"SHP",population:"7460",capital:"Jamestown",continentName:"Africa"},{countryCode:"SI",countryName:"Slovenia",currencyCode:"EUR",population:"2007000",capital:"Ljubljana",continentName:"Europe"},{countryCode:"SJ",countryName:"Svalbard and Jan Mayen",currencyCode:"NOK",population:"2550",capital:"Longyearbyen",continentName:"Europe"},{countryCode:"SK",countryName:"Slovakia",currencyCode:"EUR",population:"5455000",capital:"Bratislava",continentName:"Europe"},{countryCode:"SL",countryName:"Sierra Leone",currencyCode:"SLL",population:"5245695",capital:"Freetown",continentName:"Africa"},{countryCode:"SM",countryName:"San Marino",currencyCode:"EUR",population:"31477",capital:"San Marino",continentName:"Europe"},{countryCode:"SN",countryName:"Senegal",currencyCode:"XOF",population:"12323252",capital:"Dakar",continentName:"Africa"},{countryCode:"SO",countryName:"Somalia",currencyCode:"SOS",population:"10112453",capital:"Mogadishu",continentName:"Africa"},{countryCode:"SR",countryName:"Suriname",currencyCode:"SRD",population:"492829",capital:"Paramaribo",continentName:"South America"},{countryCode:"SS",countryName:"South Sudan",currencyCode:"SSP",population:"8260490",capital:"Juba",continentName:"Africa"},{countryCode:"ST",countryName:"S\xE3o Tom\xE9 and Pr\xEDncipe",currencyCode:"STD",population:"175808",capital:"S\xE3o Tom\xE9",continentName:"Africa"},{countryCode:"SV",countryName:"El Salvador",currencyCode:"USD",population:"6052064",capital:"San Salvador",continentName:"North America"},{countryCode:"SX",countryName:"Sint Maarten",currencyCode:"ANG",population:"37429",capital:"Philipsburg",continentName:"North America"},{countryCode:"SY",countryName:"Syria",currencyCode:"SYP",population:"22198110",capital:"Damascus",continentName:"Asia"},{countryCode:"SZ",countryName:"Swaziland",currencyCode:"SZL",population:"1354051",capital:"Mbabane",continentName:"Africa"},{countryCode:"TC",countryName:"Turks and Caicos Islands",currencyCode:"USD",population:"20556",capital:"Cockburn Town",continentName:"North America"},{countryCode:"TD",countryName:"Chad",currencyCode:"XAF",population:"10543464",capital:"N'Djamena",continentName:"Africa"},{countryCode:"TF",countryName:"French Southern Territories",currencyCode:"EUR",population:"140",capital:"Port-aux-Fran\xE7ais",continentName:"Antarctica"},{countryCode:"TG",countryName:"Togo",currencyCode:"XOF",population:"6587239",capital:"Lom\xE9",continentName:"Africa"},{countryCode:"TH",countryName:"Thailand",currencyCode:"THB",population:"67089500",capital:"Bangkok",continentName:"Asia"},{countryCode:"TJ",countryName:"Tajikistan",currencyCode:"TJS",population:"7487489",capital:"Dushanbe",continentName:"Asia"},{countryCode:"TK",countryName:"Tokelau",currencyCode:"NZD",population:"1466",capital:"",continentName:"Oceania"},{countryCode:"TL",countryName:"East Timor",currencyCode:"USD",population:"1154625",capital:"Dili",continentName:"Oceania"},{countryCode:"TM",countryName:"Turkmenistan",currencyCode:"TMT",population:"4940916",capital:"Ashgabat",continentName:"Asia"},{countryCode:"TN",countryName:"Tunisia",currencyCode:"TND",population:"10589025",capital:"Tunis",continentName:"Africa"},{countryCode:"TO",countryName:"Tonga",currencyCode:"TOP",population:"122580",capital:"Nuku'alofa",continentName:"Oceania"},{countryCode:"TR",countryName:"Turkey",currencyCode:"TRY",population:"77804122",capital:"Ankara",continentName:"Asia"},{countryCode:"TT",countryName:"Trinidad and Tobago",currencyCode:"TTD",population:"1228691",capital:"Port of Spain",continentName:"North America"},{countryCode:"TV",countryName:"Tuvalu",currencyCode:"AUD",population:"10472",capital:"Funafuti",continentName:"Oceania"},{countryCode:"TW",countryName:"Taiwan",currencyCode:"TWD",population:"22894384",capital:"Taipei",continentName:"Asia"},{countryCode:"TZ",countryName:"Tanzania",currencyCode:"TZS",population:"41892895",capital:"Dodoma",continentName:"Africa"},{countryCode:"UA",countryName:"Ukraine",currencyCode:"UAH",population:"45415596",capital:"Kiev",continentName:"Europe"},{countryCode:"UG",countryName:"Uganda",currencyCode:"UGX",population:"33398682",capital:"Kampala",continentName:"Africa"},{countryCode:"UM",countryName:"U.S. Minor Outlying Islands",currencyCode:"USD",population:"0",capital:"",continentName:"Oceania"},{countryCode:"US",countryName:"United States",currencyCode:"USD",population:"310232863",capital:"Washington",continentName:"North America"},{countryCode:"UY",countryName:"Uruguay",currencyCode:"UYU",population:"3477000",capital:"Montevideo",continentName:"South America"},{countryCode:"UZ",countryName:"Uzbekistan",currencyCode:"UZS",population:"27865738",capital:"Tashkent",continentName:"Asia"},{countryCode:"VA",countryName:"Vatican City",currencyCode:"EUR",population:"921",capital:"Vatican City",continentName:"Europe"},{countryCode:"VC",countryName:"Saint Vincent and the Grenadines",currencyCode:"XCD",population:"104217",capital:"Kingstown",continentName:"North America"},{countryCode:"VE",countryName:"Venezuela",currencyCode:"VEF",population:"27223228",capital:"Caracas",continentName:"South America"},{countryCode:"VG",countryName:"British Virgin Islands",currencyCode:"USD",population:"21730",capital:"Road Town",continentName:"North America"},{countryCode:"VI",countryName:"U.S. Virgin Islands",currencyCode:"USD",population:"108708",capital:"Charlotte Amalie",continentName:"North America"},{countryCode:"VN",countryName:"Vietnam",currencyCode:"VND",population:"89571130",capital:"Hanoi",continentName:"Asia"},{countryCode:"VU",countryName:"Vanuatu",currencyCode:"VUV",population:"221552",capital:"Port Vila",continentName:"Oceania"},{countryCode:"WF",countryName:"Wallis and Futuna",currencyCode:"XPF",population:"16025",capital:"Mata-Utu",continentName:"Oceania"},{countryCode:"WS",countryName:"Samoa",currencyCode:"WST",population:"192001",capital:"Apia",continentName:"Oceania"},{countryCode:"XK",countryName:"Kosovo",currencyCode:"EUR",population:"1800000",capital:"Pristina",continentName:"Europe"},{countryCode:"YE",countryName:"Yemen",currencyCode:"YER",population:"23495361",capital:"Sanaa",continentName:"Asia"},{countryCode:"YT",countryName:"Mayotte",currencyCode:"EUR",population:"159042",capital:"Mamoudzou",continentName:"Africa"},{countryCode:"ZA",countryName:"South Africa",currencyCode:"ZAR",population:"49000000",capital:"Pretoria",continentName:"Africa"},{countryCode:"ZM",countryName:"Zambia",currencyCode:"ZMW",population:"13460305",capital:"Lusaka",continentName:"Africa"},{countryCode:"ZW",countryName:"Zimbabwe",currencyCode:"ZWL",population:"13061000",capital:"Harare",continentName:"Africa"}],WT=["value","selected"],XT={__name:"CurrencyCountry",setup(ve){const fe=Qv(),t=YT;return(B,V)=>(ql(),eu("div",null,[rl(Vn("select",{name:"currencyCountry",id:"btn-froup","onUpdate:modelValue":V[0]||(V[0]=m=>mi(fe).currency=m)},[(ql(!0),eu($l,null,Y1(mi(t),m=>(ql(),eu("option",{key:m.countryCode,value:m.currencyCode,selected:B.EUR},uc(m.currencyCode)+" ("+uc(m.countryName)+"> ",9,WT))),128))],512),[[PT,mi(fe).currency]])]))}},ZT={class:"container-fluid text-center"},jT=Vn("h1",null," Common Data ",-1),KT={class:"row"},JT={class:"col-sm-12"},QT={class:"row mb-1"},$T=Vn("label",{for:"No of Projects",class:"col-sm-1 col-form-label"},"No of Projects (1 - 3)",-1),qT={class:"col-sm-1"},e5=Vn("label",{for:"Currency",class:"col-sm-1 col-form-label"},"Currency",-1),t5={class:"col-sm-3"},r5=Vn("label",{for:"Interest rate",class:"col-sm-1 col-form-label"},"Interest rate",-1),n5={class:"col-sm-2"},a5={class:"input-group"},i5=Vn("span",{class:"input-group-text"},"%",-1),o5=Vn("div",null,[Vn("h4",null,"Escalation Cost")],-1),s5={class:"row"},l5={class:"col-sm-12"},u5={class:"row mb-1"},c5=Vn("label",{for:"Energy",class:"col-sm-1 col-form-label"},"Energy",-1),f5={class:"col-sm-2"},h5={class:"input-group"},v5=Vn("span",{class:"input-group-text"},"%",-1),p5=Vn("label",{for:"Material",class:"col-sm-1 col-form-label"},"Material",-1),d5={class:"col-sm-2"},g5={class:"input-group"},y5=Vn("span",{class:"input-group-text"},"%",-1),m5=Vn("label",{for:"Labour",class:"col-sm-1 col-form-label"},"Labour",-1),x5={class:"col-sm-2"},b5={class:"input-group"},_5=Vn("span",{class:"input-group-text"},"%",-1),w5=Vn("label",{for:"Income",class:"col-sm-1 col-form-label"},"Income",-1),T5={class:"col-sm-2"},A5={class:"input-group"},M5=Vn("span",{class:"input-group-text"},"%",-1),S5=Vn("hr",null,null,-1),E5={__name:"CommonData",setup(ve){const fe=Qv();return(t,B)=>(ql(),eu("div",ZT,[jT,Vn("div",KT,[Vn("div",JT,[Vn("div",QT,[$T,Vn("div",qT,[rl(Vn("input",{type:"number",min:"1",max:"3",class:"form-control","onUpdate:modelValue":B[0]||(B[0]=V=>mi(fe).n_projects=V)},null,512),[[ml,mi(fe).n_projects]])]),e5,Vn("div",t5,[mu(XT)]),r5,Vn("div",n5,[Vn("div",a5,[rl(Vn("input",{type:"text",class:"form-control",id:"autoSizingInputGroup",placeholder:"5",name:"i_rate","onUpdate:modelValue":B[1]||(B[1]=V=>mi(fe).i_rate=V)},null,512),[[ml,mi(fe).i_rate]]),i5])])])])]),o5,Vn("div",s5,[Vn("div",l5,[Vn("div",u5,[c5,Vn("div",f5,[Vn("div",h5,[rl(Vn("input",{type:"number",class:"form-control",id:"Energy",placeholder:"2",name:"es_en","onUpdate:modelValue":B[2]||(B[2]=V=>mi(fe).es_en=V)},null,512),[[ml,mi(fe).es_en]]),v5])]),p5,Vn("div",d5,[Vn("div",g5,[rl(Vn("input",{type:"number",class:"form-control",id:"Meterial",placeholder:"2",name:"es_mt","onUpdate:modelValue":B[3]||(B[3]=V=>mi(fe).es_mt=V)},null,512),[[ml,mi(fe).es_mt]]),y5])]),m5,Vn("div",x5,[Vn("div",b5,[rl(Vn("input",{type:"number",class:"form-control",id:"Labour",placeholder:"2",name:"es_lb","onUpdate:modelValue":B[4]||(B[4]=V=>mi(fe).es_lb=V)},null,512),[[ml,mi(fe).es_lb]]),_5])]),w5,Vn("div",T5,[Vn("div",A5,[rl(Vn("input",{type:"number",class:"form-control",id:"Income",placeholder:"2",name:"es_in","onUpdate:modelValue":B[5]||(B[5]=V=>mi(fe).es_in=V)},null,512),[[ml,mi(fe).es_in]]),M5])])]),S5])])]))}};const C5={class:"d-inline-flex p-2 bd-highlight row"},k5={class:"table"},L5={scope:"row"},P5={class:"col"},D5={class:"input-group mb-1"},R5={class:"input-group-text",id:"basic-addon1"},I5={class:"col"},F5={class:"input-group mb-1"},z5=Vn("span",{class:"input-group-text",id:"basic-addon1"},"yrs",-1),N5={class:"table-light fw-bold"},O5={key:0,colspan:"12"},B5={key:1,colspan:"2"},U5={class:"col"},V5={class:"input-group mb-1"},H5={class:"input-group-text",id:"basic-addon1"},G5={class:"col"},Y5={class:"input-group mb-1"},W5={class:"input-group-text",id:"basic-addon1"},X5={class:"col"},Z5={class:"input-group mb-1"},j5={class:"input-group-text",id:"basic-addon1"},K5={class:"col"},J5={class:"input-group mb-1"},Q5={class:"input-group-text",id:"basic-addon1"},$5={class:"table-light fw-bold"},q5={key:0,colspan:"2"},eA={key:1,colspan:"2"},tA={class:"col"},rA={class:"input-group mb-1"},nA={class:"input-group-text",id:"basic-addon1"},aA={class:"col"},iA={class:"input-group mb-1"},oA={class:"input-group-text",id:"basic-addon1"},sA={class:"col"},lA={class:"input-group mb-1"},uA={class:"input-group-text",id:"basic-addon1"},cA={class:"col"},fA={class:"input-group mb-1"},hA=Vn("span",{class:"input-group-text",id:"basic-addon1"},"yr",-1),vA=Vn("hr",null,null,-1),pA={__name:"ProjectDetails",props:["projectNumber"],setup(ve){const fe=ve,t=Qv();return fe.projectNumber>1,(B,V)=>(ql(),eu($l,null,[Vn("div",null,[Vn("div",C5,[Vn("table",k5,[Vn("thead",null,[Vn("tr",null,[Vn("th",{class:Jl({testHead:ve.projectNumber>1}),scope:"col"},"#",2),Vn("th",L5,"P "+uc(ve.projectNumber),1)])]),Vn("tbody",null,[Vn("tr",null,[Vn("th",{class:Jl({testHead:ve.projectNumber>1}),scope:"col"},"Init. Cost",2),Vn("td",null,[Vn("div",P5,[Vn("div",D5,[rl(Vn("input",{"onUpdate:modelValue":V[0]||(V[0]=m=>mi(t).project_details[ve.projectNumber].init_cost=m),type:"number",class:"form-control"},null,512),[[ml,mi(t).project_details[ve.projectNumber].init_cost]]),Vn("span",R5,uc(mi(t).currency),1)])])])]),Vn("tr",null,[Vn("th",{class:Jl({testHead:ve.projectNumber>1}),scope:"row"},"Exp. life",2),Vn("td",null,[Vn("div",I5,[Vn("div",F5,[rl(Vn("input",{type:"number","onUpdate:modelValue":V[1]||(V[1]=m=>mi(t).project_details[ve.projectNumber].exp_life=m),class:"form-control"},null,512),[[ml,mi(t).project_details[ve.projectNumber].exp_life]]),z5])])])]),Vn("tr",N5,[ve.projectNumber===1?(ql(),eu("td",O5," Annual Costs")):(ql(),eu("td",B5,"AC"))]),Vn("tr",null,[Vn("th",{class:Jl({testHead:ve.projectNumber>1}),scope:"col"},"Energy",2),Vn("td",null,[Vn("div",U5,[Vn("div",V5,[rl(Vn("input",{type:"number","onUpdate:modelValue":V[2]||(V[2]=m=>mi(t).project_details[ve.projectNumber].an_en=m),class:"form-control"},null,512),[[ml,mi(t).project_details[ve.projectNumber].an_en]]),Vn("span",H5,uc(mi(t).currency),1)])])])]),Vn("tr",null,[Vn("th",{class:Jl({testHead:ve.projectNumber>1}),scope:"row"},"Material",2),Vn("td",null,[Vn("div",G5,[Vn("div",Y5,[rl(Vn("input",{type:"number","onUpdate:modelValue":V[3]||(V[3]=m=>mi(t).project_details[ve.projectNumber].an_mt=m),class:"form-control"},null,512),[[ml,mi(t).project_details[ve.projectNumber].an_mt]]),Vn("span",W5,uc(mi(t).currency),1)])])])]),Vn("tr",null,[Vn("th",{class:Jl({testHead:ve.projectNumber>1}),scope:"row"},"Labour",2),Vn("td",null,[Vn("div",X5,[Vn("div",Z5,[rl(Vn("input",{type:"number","onUpdate:modelValue":V[4]||(V[4]=m=>mi(t).project_details[ve.projectNumber].an_lb=m),class:"form-control"},null,512),[[ml,mi(t).project_details[ve.projectNumber].an_lb]]),Vn("span",j5,uc(mi(t).currency),1)])])])]),Vn("tr",null,[Vn("th",{class:Jl({testHead:ve.projectNumber>1}),scope:"row"},"Income",2),Vn("td",null,[Vn("div",K5,[Vn("div",J5,[rl(Vn("input",{type:"number","onUpdate:modelValue":V[5]||(V[5]=m=>mi(t).project_details[ve.projectNumber].an_in=m),class:"form-control"},null,512),[[ml,mi(t).project_details[ve.projectNumber].an_in]]),Vn("span",Q5,uc(mi(t).currency),1)])])])]),Vn("tr",$5,[ve.projectNumber===1?(ql(),eu("td",q5," Multi Annual Costs")):(ql(),eu("td",eA,"MAC"))]),Vn("tr",null,[Vn("th",{class:Jl({testHead:ve.projectNumber>1}),scope:"row"},"Energy",2),Vn("td",null,[Vn("div",tA,[Vn("div",rA,[rl(Vn("input",{type:"number","onUpdate:modelValue":V[6]||(V[6]=m=>mi(t).project_details[ve.projectNumber].mulAn_en=m),class:"form-control"},null,512),[[ml,mi(t).project_details[ve.projectNumber].mulAn_en]]),Vn("span",nA,uc(mi(t).currency),1)])])])]),Vn("tr",null,[Vn("th",{class:Jl({testHead:ve.projectNumber>1}),scope:"row"},"Material",2),Vn("td",null,[Vn("div",aA,[Vn("div",iA,[rl(Vn("input",{type:"number","onUpdate:modelValue":V[7]||(V[7]=m=>mi(t).project_details[ve.projectNumber].mulAn_mt=m),class:"form-control"},null,512),[[ml,mi(t).project_details[ve.projectNumber].mulAn_mt]]),Vn("span",oA,uc(mi(t).currency),1)])])])]),Vn("tr",null,[Vn("th",{class:Jl({testHead:ve.projectNumber>1}),scope:"row"},"Labour",2),Vn("td",null,[Vn("div",sA,[Vn("div",lA,[rl(Vn("input",{type:"number","onUpdate:modelValue":V[8]||(V[8]=m=>mi(t).project_details[ve.projectNumber].mulAn_lb=m),class:"form-control"},null,512),[[ml,mi(t).project_details[ve.projectNumber].mulAn_lb]]),Vn("span",uA,uc(mi(t).currency),1)])])])]),Vn("tr",null,[Vn("th",{class:Jl({testHead:ve.projectNumber>1}),scope:"row"},"Cycle",2),Vn("td",null,[Vn("div",cA,[Vn("div",fA,[rl(Vn("input",{type:"number","onUpdate:modelValue":V[9]||(V[9]=m=>mi(t).project_details[ve.projectNumber].mulAn_cy=m),class:"form-control"},null,512),[[ml,mi(t).project_details[ve.projectNumber].mulAn_cy]]),hA])])])])])])])]),vA],64))}};var Ro=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function dA(ve){return ve&&ve.__esModule&&Object.prototype.hasOwnProperty.call(ve,"default")?ve.default:ve}function Np(ve){throw new Error('Could not dynamically require "'+ve+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var sx={exports:{}};(function(ve,fe){(function(t){ve.exports=t()})(function(){return function(){function t(B,V,m){function c(e,a){if(!V[e]){if(!B[e]){var i=typeof Np=="function"&&Np;if(!a&&i)return i(e,!0);if(A)return A(e,!0);var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}var r=V[e]={exports:{}};B[e][0].call(r.exports,function(v){var s=B[e][1][v];return c(s||v)},r,r.exports,t,B,V,m)}return V[e].exports}for(var A=typeof Np=="function"&&Np,T=0;T<m.length;T++)c(m[T]);return c}return t}()({1:[function(t,B,V){var m=t("../src/lib"),c={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var A in c){var T=A.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");m.addStyleRule(T,c[A])}},{"../src/lib":515}],2:[function(t,B,V){B.exports=t("../src/transforms/aggregate")},{"../src/transforms/aggregate":1127}],3:[function(t,B,V){B.exports=t("../src/traces/bar")},{"../src/traces/bar":665}],4:[function(t,B,V){B.exports=t("../src/traces/barpolar")},{"../src/traces/barpolar":678}],5:[function(t,B,V){B.exports=t("../src/traces/box")},{"../src/traces/box":688}],6:[function(t,B,V){B.exports=t("../src/components/calendars")},{"../src/components/calendars":365}],7:[function(t,B,V){B.exports=t("../src/traces/candlestick")},{"../src/traces/candlestick":697}],8:[function(t,B,V){B.exports=t("../src/traces/carpet")},{"../src/traces/carpet":716}],9:[function(t,B,V){B.exports=t("../src/traces/choropleth")},{"../src/traces/choropleth":730}],10:[function(t,B,V){B.exports=t("../src/traces/choroplethmapbox")},{"../src/traces/choroplethmapbox":737}],11:[function(t,B,V){B.exports=t("../src/traces/cone")},{"../src/traces/cone":743}],12:[function(t,B,V){B.exports=t("../src/traces/contour")},{"../src/traces/contour":758}],13:[function(t,B,V){B.exports=t("../src/traces/contourcarpet")},{"../src/traces/contourcarpet":769}],14:[function(t,B,V){B.exports=t("../src/core")},{"../src/core":493}],15:[function(t,B,V){B.exports=t("../src/traces/densitymapbox")},{"../src/traces/densitymapbox":777}],16:[function(t,B,V){B.exports=t("../src/transforms/filter")},{"../src/transforms/filter":1128}],17:[function(t,B,V){B.exports=t("../src/traces/funnel")},{"../src/traces/funnel":787}],18:[function(t,B,V){B.exports=t("../src/traces/funnelarea")},{"../src/traces/funnelarea":796}],19:[function(t,B,V){B.exports=t("../src/transforms/groupby")},{"../src/transforms/groupby":1129}],20:[function(t,B,V){B.exports=t("../src/traces/heatmap")},{"../src/traces/heatmap":809}],21:[function(t,B,V){B.exports=t("../src/traces/heatmapgl")},{"../src/traces/heatmapgl":820}],22:[function(t,B,V){B.exports=t("../src/traces/histogram")},{"../src/traces/histogram":832}],23:[function(t,B,V){B.exports=t("../src/traces/histogram2d")},{"../src/traces/histogram2d":838}],24:[function(t,B,V){B.exports=t("../src/traces/histogram2dcontour")},{"../src/traces/histogram2dcontour":842}],25:[function(t,B,V){B.exports=t("../src/traces/icicle")},{"../src/traces/icicle":848}],26:[function(t,B,V){B.exports=t("../src/traces/image")},{"../src/traces/image":861}],27:[function(t,B,V){var m=t("./core");m.register([t("./bar"),t("./box"),t("./heatmap"),t("./histogram"),t("./histogram2d"),t("./histogram2dcontour"),t("./contour"),t("./scatterternary"),t("./violin"),t("./funnel"),t("./waterfall"),t("./image"),t("./pie"),t("./sunburst"),t("./treemap"),t("./icicle"),t("./funnelarea"),t("./scatter3d"),t("./surface"),t("./isosurface"),t("./volume"),t("./mesh3d"),t("./cone"),t("./streamtube"),t("./scattergeo"),t("./choropleth"),t("./scattergl"),t("./splom"),t("./pointcloud"),t("./heatmapgl"),t("./parcoords"),t("./parcats"),t("./scattermapbox"),t("./choroplethmapbox"),t("./densitymapbox"),t("./sankey"),t("./indicator"),t("./table"),t("./carpet"),t("./scattercarpet"),t("./contourcarpet"),t("./ohlc"),t("./candlestick"),t("./scatterpolar"),t("./scatterpolargl"),t("./barpolar"),t("./scattersmith"),t("./aggregate"),t("./filter"),t("./groupby"),t("./sort"),t("./calendars")]),B.exports=m},{"./aggregate":2,"./bar":3,"./barpolar":4,"./box":5,"./calendars":6,"./candlestick":7,"./carpet":8,"./choropleth":9,"./choroplethmapbox":10,"./cone":11,"./contour":12,"./contourcarpet":13,"./core":14,"./densitymapbox":15,"./filter":16,"./funnel":17,"./funnelarea":18,"./groupby":19,"./heatmap":20,"./heatmapgl":21,"./histogram":22,"./histogram2d":23,"./histogram2dcontour":24,"./icicle":25,"./image":26,"./indicator":28,"./isosurface":29,"./mesh3d":30,"./ohlc":31,"./parcats":32,"./parcoords":33,"./pie":34,"./pointcloud":35,"./sankey":36,"./scatter3d":37,"./scattercarpet":38,"./scattergeo":39,"./scattergl":40,"./scattermapbox":41,"./scatterpolar":42,"./scatterpolargl":43,"./scattersmith":44,"./scatterternary":45,"./sort":46,"./splom":47,"./streamtube":48,"./sunburst":49,"./surface":50,"./table":51,"./treemap":52,"./violin":53,"./volume":54,"./waterfall":55}],28:[function(t,B,V){B.exports=t("../src/traces/indicator")},{"../src/traces/indicator":869}],29:[function(t,B,V){B.exports=t("../src/traces/isosurface")},{"../src/traces/isosurface":875}],30:[function(t,B,V){B.exports=t("../src/traces/mesh3d")},{"../src/traces/mesh3d":880}],31:[function(t,B,V){B.exports=t("../src/traces/ohlc")},{"../src/traces/ohlc":885}],32:[function(t,B,V){B.exports=t("../src/traces/parcats")},{"../src/traces/parcats":894}],33:[function(t,B,V){B.exports=t("../src/traces/parcoords")},{"../src/traces/parcoords":905}],34:[function(t,B,V){B.exports=t("../src/traces/pie")},{"../src/traces/pie":916}],35:[function(t,B,V){B.exports=t("../src/traces/pointcloud")},{"../src/traces/pointcloud":925}],36:[function(t,B,V){B.exports=t("../src/traces/sankey")},{"../src/traces/sankey":931}],37:[function(t,B,V){B.exports=t("../src/traces/scatter3d")},{"../src/traces/scatter3d":969}],38:[function(t,B,V){B.exports=t("../src/traces/scattercarpet")},{"../src/traces/scattercarpet":976}],39:[function(t,B,V){B.exports=t("../src/traces/scattergeo")},{"../src/traces/scattergeo":984}],40:[function(t,B,V){B.exports=t("../src/traces/scattergl")},{"../src/traces/scattergl":998}],41:[function(t,B,V){B.exports=t("../src/traces/scattermapbox")},{"../src/traces/scattermapbox":1008}],42:[function(t,B,V){B.exports=t("../src/traces/scatterpolar")},{"../src/traces/scatterpolar":1016}],43:[function(t,B,V){B.exports=t("../src/traces/scatterpolargl")},{"../src/traces/scatterpolargl":1024}],44:[function(t,B,V){B.exports=t("../src/traces/scattersmith")},{"../src/traces/scattersmith":1031}],45:[function(t,B,V){B.exports=t("../src/traces/scatterternary")},{"../src/traces/scatterternary":1039}],46:[function(t,B,V){B.exports=t("../src/transforms/sort")},{"../src/transforms/sort":1131}],47:[function(t,B,V){B.exports=t("../src/traces/splom")},{"../src/traces/splom":1049}],48:[function(t,B,V){B.exports=t("../src/traces/streamtube")},{"../src/traces/streamtube":1057}],49:[function(t,B,V){B.exports=t("../src/traces/sunburst")},{"../src/traces/sunburst":1065}],50:[function(t,B,V){B.exports=t("../src/traces/surface")},{"../src/traces/surface":1074}],51:[function(t,B,V){B.exports=t("../src/traces/table")},{"../src/traces/table":1082}],52:[function(t,B,V){B.exports=t("../src/traces/treemap")},{"../src/traces/treemap":1093}],53:[function(t,B,V){B.exports=t("../src/traces/violin")},{"../src/traces/violin":1106}],54:[function(t,B,V){B.exports=t("../src/traces/volume")},{"../src/traces/volume":1114}],55:[function(t,B,V){B.exports=t("../src/traces/waterfall")},{"../src/traces/waterfall":1122}],56:[function(t,B,V){(function(m,c){typeof V=="object"&&typeof B<"u"?c(V,t("d3-array"),t("d3-collection"),t("d3-shape"),t("elementary-circuits-directed-graph")):c(m.d3=m.d3||{},m.d3,m.d3,m.d3,null)})(this,function(m,c,A,T,e){e=e&&e.hasOwnProperty("default")?e.default:e;function a(ue){return ue.target.depth}function i(ue){return ue.depth}function n(ue,ye){return ye-1-ue.height}function r(ue,ye){return ue.sourceLinks.length?ue.depth:ye-1}function v(ue){return ue.targetLinks.length?ue.depth:ue.sourceLinks.length?c.min(ue.sourceLinks,a)-1:0}function s(ue){return function(){return ue}}var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ue){return typeof ue}:function(ue){return ue&&typeof Symbol=="function"&&ue.constructor===Symbol&&ue!==Symbol.prototype?"symbol":typeof ue};function b(ue,ye){return d(ue.source,ye.source)||ue.index-ye.index}function g(ue,ye){return d(ue.target,ye.target)||ue.index-ye.index}function d(ue,ye){return ue.partOfCycle===ye.partOfCycle?ue.y0-ye.y0:ue.circularLinkType==="top"||ye.circularLinkType==="bottom"?-1:1}function f(ue){return ue.value}function y(ue){return(ue.y0+ue.y1)/2}function l(ue){return y(ue.source)}function x(ue){return y(ue.target)}function u(ue){return ue.index}function M(ue){return ue.nodes}function _(ue){return ue.links}function p(ue,ye){var xe=ue.get(ye);if(!xe)throw new Error("missing: "+ye);return xe}function w(ue,ye){return ye(ue)}var h=25,L=10,S=.3;function E(){var ue=0,ye=0,xe=1,me=1,be=24,ke,De=u,Ve=r,Ae=M,Le=_,je=32,Ye=2,ze,Ie=null;function We(){var Ct={nodes:Ae.apply(null,arguments),links:Le.apply(null,arguments)};pt(Ct),P(Ct,De,Ie),Ft(Ct),Et(Ct),F(Ct,De),Xt(Ct,je,De),Nt(Ct);for(var Xe=4,at=0;at<Xe;at++)$(Ct,me,De),ie(Ct,me,De),q(Ct,ye,me,De),$(Ct,me,De),ie(Ct,me,De);return _e(Ct,ye,me),G(Ct,Ye,me,De),Ct}We.nodeId=function(Ct){return arguments.length?(De=typeof Ct=="function"?Ct:s(Ct),We):De},We.nodeAlign=function(Ct){return arguments.length?(Ve=typeof Ct=="function"?Ct:s(Ct),We):Ve},We.nodeWidth=function(Ct){return arguments.length?(be=+Ct,We):be},We.nodePadding=function(Ct){return arguments.length?(ke=+Ct,We):ke},We.nodes=function(Ct){return arguments.length?(Ae=typeof Ct=="function"?Ct:s(Ct),We):Ae},We.links=function(Ct){return arguments.length?(Le=typeof Ct=="function"?Ct:s(Ct),We):Le},We.size=function(Ct){return arguments.length?(ue=ye=0,xe=+Ct[0],me=+Ct[1],We):[xe-ue,me-ye]},We.extent=function(Ct){return arguments.length?(ue=+Ct[0][0],xe=+Ct[1][0],ye=+Ct[0][1],me=+Ct[1][1],We):[[ue,ye],[xe,me]]},We.iterations=function(Ct){return arguments.length?(je=+Ct,We):je},We.circularLinkGap=function(Ct){return arguments.length?(Ye=+Ct,We):Ye},We.nodePaddingRatio=function(Ct){return arguments.length?(ze=+Ct,We):ze},We.sortNodes=function(Ct){return arguments.length?(Ie=Ct,We):Ie},We.update=function(Ct){return F(Ct,De),Nt(Ct),Ct.links.forEach(function(Xe){Xe.circular&&(Xe.circularLinkType=Xe.y0+Xe.y1<me?"top":"bottom",Xe.source.circularLinkType=Xe.circularLinkType,Xe.target.circularLinkType=Xe.circularLinkType)}),$(Ct,me,De,!1),ie(Ct,me,De),G(Ct,Ye,me,De),Ct};function pt(Ct){Ct.nodes.forEach(function(at,Ge){at.index=Ge,at.sourceLinks=[],at.targetLinks=[]});var Xe=A.map(Ct.nodes,De);return Ct.links.forEach(function(at,Ge){at.index=Ge;var Se=at.source,He=at.target;(typeof Se>"u"?"undefined":o(Se))!=="object"&&(Se=at.source=p(Xe,Se)),(typeof He>"u"?"undefined":o(He))!=="object"&&(He=at.target=p(Xe,He)),Se.sourceLinks.push(at),He.targetLinks.push(at)}),Ct}function Ft(Ct){Ct.nodes.forEach(function(Xe){Xe.partOfCycle=!1,Xe.value=Math.max(c.sum(Xe.sourceLinks,f),c.sum(Xe.targetLinks,f)),Xe.sourceLinks.forEach(function(at){at.circular&&(Xe.partOfCycle=!0,Xe.circularLinkType=at.circularLinkType)}),Xe.targetLinks.forEach(function(at){at.circular&&(Xe.partOfCycle=!0,Xe.circularLinkType=at.circularLinkType)})})}function Qt(Ct){var Xe=0,at=0,Ge=0,Se=0,He=c.max(Ct.nodes,function(Ke){return Ke.column});return Ct.links.forEach(function(Ke){Ke.circular&&(Ke.circularLinkType=="top"?Xe=Xe+Ke.width:at=at+Ke.width,Ke.target.column==0&&(Se=Se+Ke.width),Ke.source.column==He&&(Ge=Ge+Ke.width))}),Xe=Xe>0?Xe+h+L:Xe,at=at>0?at+h+L:at,Ge=Ge>0?Ge+h+L:Ge,Se=Se>0?Se+h+L:Se,{top:Xe,bottom:at,left:Se,right:Ge}}function zt(Ct,Xe){var at=c.max(Ct.nodes,function(mt){return mt.column}),Ge=xe-ue,Se=me-ye,He=Ge+Xe.right+Xe.left,Ke=Se+Xe.top+Xe.bottom,qe=Ge/He,Tt=Se/Ke;return ue=ue*qe+Xe.left,xe=Xe.right==0?xe:xe*qe,ye=ye*Tt+Xe.top,me=me*Tt,Ct.nodes.forEach(function(mt){mt.x0=ue+mt.column*((xe-ue-be)/at),mt.x1=mt.x0+be}),Tt}function Et(Ct){var Xe,at,Ge;for(Xe=Ct.nodes,at=[],Ge=0;Xe.length;++Ge,Xe=at,at=[])Xe.forEach(function(Se){Se.depth=Ge,Se.sourceLinks.forEach(function(He){at.indexOf(He.target)<0&&!He.circular&&at.push(He.target)})});for(Xe=Ct.nodes,at=[],Ge=0;Xe.length;++Ge,Xe=at,at=[])Xe.forEach(function(Se){Se.height=Ge,Se.targetLinks.forEach(function(He){at.indexOf(He.source)<0&&!He.circular&&at.push(He.source)})});Ct.nodes.forEach(function(Se){Se.column=Math.floor(Ve.call(null,Se,Ge))})}function Xt(Ct,Xe,at){var Ge=A.nest().key(function(mt){return mt.column}).sortKeys(c.ascending).entries(Ct.nodes).map(function(mt){return mt.values});Ke(at),Tt();for(var Se=1,He=Xe;He>0;--He)qe(Se*=.99,at),Tt();function Ke(mt){if(ze){var At=1/0;Ge.forEach(function(jt){var Yt=me*ze/(jt.length+1);At=Yt<At?Yt:At}),ke=At}var Ht=c.min(Ge,function(jt){return(me-ye-(jt.length-1)*ke)/c.sum(jt,f)});Ht=Ht*S,Ct.links.forEach(function(jt){jt.width=jt.value*Ht});var It=Qt(Ct),Vt=zt(Ct,It);Ht=Ht*Vt,Ct.links.forEach(function(jt){jt.width=jt.value*Ht}),Ge.forEach(function(jt){var Yt=jt.length;jt.forEach(function(or,Gr){or.depth==Ge.length-1&&Yt==1||or.depth==0&&Yt==1?(or.y0=me/2-or.value*Ht,or.y1=or.y0+or.value*Ht):or.partOfCycle?R(or,mt)==0?(or.y0=me/2+Gr,or.y1=or.y0+or.value*Ht):or.circularLinkType=="top"?(or.y0=ye+Gr,or.y1=or.y0+or.value*Ht):(or.y0=me-or.value*Ht-Gr,or.y1=or.y0+or.value*Ht):It.top==0||It.bottom==0?(or.y0=(me-ye)/Yt*Gr,or.y1=or.y0+or.value*Ht):(or.y0=(me-ye)/2-Yt/2+Gr,or.y1=or.y0+or.value*Ht)})})}function qe(mt,At){var Ht=Ge.length;Ge.forEach(function(It){var Vt=It.length,jt=It[0].depth;It.forEach(function(Yt){var or;if((Yt.sourceLinks.length||Yt.targetLinks.length)&&!(Yt.partOfCycle&&R(Yt,At)>0))if(jt==0&&Vt==1)or=Yt.y1-Yt.y0,Yt.y0=me/2-or/2,Yt.y1=me/2+or/2;else if(jt==Ht-1&&Vt==1)or=Yt.y1-Yt.y0,Yt.y0=me/2-or/2,Yt.y1=me/2+or/2;else{var Gr=0,on=c.mean(Yt.sourceLinks,x),Jr=c.mean(Yt.targetLinks,l);on&&Jr?Gr=(on+Jr)/2:Gr=on||Jr;var ot=(Gr-y(Yt))*mt;Yt.y0+=ot,Yt.y1+=ot}})})}function Tt(){Ge.forEach(function(mt){var At,Ht,It=ye,Vt=mt.length,jt;for(mt.sort(d),jt=0;jt<Vt;++jt)At=mt[jt],Ht=It-At.y0,Ht>0&&(At.y0+=Ht,At.y1+=Ht),It=At.y1+ke;if(Ht=It-ke-me,Ht>0)for(It=At.y0-=Ht,At.y1-=Ht,jt=Vt-2;jt>=0;--jt)At=mt[jt],Ht=At.y1+ke-It,Ht>0&&(At.y0-=Ht,At.y1-=Ht),It=At.y0})}}function Nt(Ct){Ct.nodes.forEach(function(Xe){Xe.sourceLinks.sort(g),Xe.targetLinks.sort(b)}),Ct.nodes.forEach(function(Xe){var at=Xe.y0,Ge=at,Se=Xe.y1,He=Se;Xe.sourceLinks.forEach(function(Ke){Ke.circular?(Ke.y0=Se-Ke.width/2,Se=Se-Ke.width):(Ke.y0=at+Ke.width/2,at+=Ke.width)}),Xe.targetLinks.forEach(function(Ke){Ke.circular?(Ke.y1=He-Ke.width/2,He=He-Ke.width):(Ke.y1=Ge+Ke.width/2,Ge+=Ke.width)})})}return We}function P(ue,ye,xe){var me=0;if(xe===null){for(var be=[],ke=0;ke<ue.links.length;ke++){var De=ue.links[ke],Ve=De.source.index,Ae=De.target.index;be[Ve]||(be[Ve]=[]),be[Ae]||(be[Ae]=[]),be[Ve].indexOf(Ae)===-1&&be[Ve].push(Ae)}var Le=e(be);Le.sort(function(Ie,We){return Ie.length-We.length});var je={};for(ke=0;ke<Le.length;ke++){var Ye=Le[ke],ze=Ye.slice(-2);je[ze[0]]||(je[ze[0]]={}),je[ze[0]][ze[1]]=!0}ue.links.forEach(function(Ie){var We=Ie.target.index,pt=Ie.source.index;We===pt||je[pt]&&je[pt][We]?(Ie.circular=!0,Ie.circularLinkID=me,me=me+1):Ie.circular=!1})}else ue.links.forEach(function(Ie){Ie.source[xe]<Ie.target[xe]?Ie.circular=!1:(Ie.circular=!0,Ie.circularLinkID=me,me=me+1)})}function F(ue,ye){var xe=0,me=0;ue.links.forEach(function(be){be.circular&&(be.source.circularLinkType||be.target.circularLinkType?be.circularLinkType=be.source.circularLinkType?be.source.circularLinkType:be.target.circularLinkType:be.circularLinkType=xe<me?"top":"bottom",be.circularLinkType=="top"?xe=xe+1:me=me+1,ue.nodes.forEach(function(ke){(w(ke,ye)==w(be.source,ye)||w(ke,ye)==w(be.target,ye))&&(ke.circularLinkType=be.circularLinkType)}))}),ue.links.forEach(function(be){be.circular&&(be.source.circularLinkType==be.target.circularLinkType&&(be.circularLinkType=be.source.circularLinkType),se(be,ye)&&(be.circularLinkType=be.source.circularLinkType))})}function I(ue){var ye=Math.abs(ue.y1-ue.y0),xe=Math.abs(ue.target.x0-ue.source.x1);return Math.atan(xe/ye)}function D(ue,ye){return ue.source.column<ye.target.column?!1:!(ue.target.column>ye.source.column)}function R(ue,ye){var xe=0;ue.sourceLinks.forEach(function(be){xe=be.circular&&!se(be,ye)?xe+1:xe});var me=0;return ue.targetLinks.forEach(function(be){me=be.circular&&!se(be,ye)?me+1:me}),xe+me}function N(ue){var ye=ue.source.sourceLinks,xe=0;ye.forEach(function(ke){xe=ke.circular?xe+1:xe});var me=ue.target.targetLinks,be=0;return me.forEach(function(ke){be=ke.circular?be+1:be}),!(xe>1||be>1)}function z(ue,ye,xe){return ue.sort(ee),ue.forEach(function(me,be){var ke=0;if(se(me,xe)&&N(me))me.circularPathData.verticalBuffer=ke+me.width/2;else{var De=0;for(De;De<be;De++)if(D(ue[be],ue[De])){var Ve=ue[De].circularPathData.verticalBuffer+ue[De].width/2+ye;ke=Ve>ke?Ve:ke}me.circularPathData.verticalBuffer=ke+me.width/2}}),ue}function G(ue,ye,xe,me){var be=5,ke=c.min(ue.links,function(Ae){return Ae.source.y0});ue.links.forEach(function(Ae){Ae.circular&&(Ae.circularPathData={})});var De=ue.links.filter(function(Ae){return Ae.circularLinkType=="top"});z(De,ye,me);var Ve=ue.links.filter(function(Ae){return Ae.circularLinkType=="bottom"});z(Ve,ye,me),ue.links.forEach(function(Ae){if(Ae.circular){if(Ae.circularPathData.arcRadius=Ae.width+L,Ae.circularPathData.leftNodeBuffer=be,Ae.circularPathData.rightNodeBuffer=be,Ae.circularPathData.sourceWidth=Ae.source.x1-Ae.source.x0,Ae.circularPathData.sourceX=Ae.source.x0+Ae.circularPathData.sourceWidth,Ae.circularPathData.targetX=Ae.target.x0,Ae.circularPathData.sourceY=Ae.y0,Ae.circularPathData.targetY=Ae.y1,se(Ae,me)&&N(Ae))Ae.circularPathData.leftSmallArcRadius=L+Ae.width/2,Ae.circularPathData.leftLargeArcRadius=L+Ae.width/2,Ae.circularPathData.rightSmallArcRadius=L+Ae.width/2,Ae.circularPathData.rightLargeArcRadius=L+Ae.width/2,Ae.circularLinkType=="bottom"?(Ae.circularPathData.verticalFullExtent=Ae.source.y1+h+Ae.circularPathData.verticalBuffer,Ae.circularPathData.verticalLeftInnerExtent=Ae.circularPathData.verticalFullExtent-Ae.circularPathData.leftLargeArcRadius,Ae.circularPathData.verticalRightInnerExtent=Ae.circularPathData.verticalFullExtent-Ae.circularPathData.rightLargeArcRadius):(Ae.circularPathData.verticalFullExtent=Ae.source.y0-h-Ae.circularPathData.verticalBuffer,Ae.circularPathData.verticalLeftInnerExtent=Ae.circularPathData.verticalFullExtent+Ae.circularPathData.leftLargeArcRadius,Ae.circularPathData.verticalRightInnerExtent=Ae.circularPathData.verticalFullExtent+Ae.circularPathData.rightLargeArcRadius);else{var Le=Ae.source.column,je=Ae.circularLinkType,Ye=ue.links.filter(function(We){return We.source.column==Le&&We.circularLinkType==je});Ae.circularLinkType=="bottom"?Ye.sort(X):Ye.sort(Z);var ze=0;Ye.forEach(function(We,pt){We.circularLinkID==Ae.circularLinkID&&(Ae.circularPathData.leftSmallArcRadius=L+Ae.width/2+ze,Ae.circularPathData.leftLargeArcRadius=L+Ae.width/2+pt*ye+ze),ze=ze+We.width}),Le=Ae.target.column,Ye=ue.links.filter(function(We){return We.target.column==Le&&We.circularLinkType==je}),Ae.circularLinkType=="bottom"?Ye.sort(ce):Ye.sort(ne),ze=0,Ye.forEach(function(We,pt){We.circularLinkID==Ae.circularLinkID&&(Ae.circularPathData.rightSmallArcRadius=L+Ae.width/2+ze,Ae.circularPathData.rightLargeArcRadius=L+Ae.width/2+pt*ye+ze),ze=ze+We.width}),Ae.circularLinkType=="bottom"?(Ae.circularPathData.verticalFullExtent=Math.max(xe,Ae.source.y1,Ae.target.y1)+h+Ae.circularPathData.verticalBuffer,Ae.circularPathData.verticalLeftInnerExtent=Ae.circularPathData.verticalFullExtent-Ae.circularPathData.leftLargeArcRadius,Ae.circularPathData.verticalRightInnerExtent=Ae.circularPathData.verticalFullExtent-Ae.circularPathData.rightLargeArcRadius):(Ae.circularPathData.verticalFullExtent=ke-h-Ae.circularPathData.verticalBuffer,Ae.circularPathData.verticalLeftInnerExtent=Ae.circularPathData.verticalFullExtent+Ae.circularPathData.leftLargeArcRadius,Ae.circularPathData.verticalRightInnerExtent=Ae.circularPathData.verticalFullExtent+Ae.circularPathData.rightLargeArcRadius)}Ae.circularPathData.leftInnerExtent=Ae.circularPathData.sourceX+Ae.circularPathData.leftNodeBuffer,Ae.circularPathData.rightInnerExtent=Ae.circularPathData.targetX-Ae.circularPathData.rightNodeBuffer,Ae.circularPathData.leftFullExtent=Ae.circularPathData.sourceX+Ae.circularPathData.leftLargeArcRadius+Ae.circularPathData.leftNodeBuffer,Ae.circularPathData.rightFullExtent=Ae.circularPathData.targetX-Ae.circularPathData.rightLargeArcRadius-Ae.circularPathData.rightNodeBuffer}if(Ae.circular)Ae.path=Y(Ae);else{var Ie=T.linkHorizontal().source(function(We){var pt=We.source.x0+(We.source.x1-We.source.x0),Ft=We.y0;return[pt,Ft]}).target(function(We){var pt=We.target.x0,Ft=We.y1;return[pt,Ft]});Ae.path=Ie(Ae)}})}function Y(ue){var ye="";return ue.circularLinkType=="top"?ye="M"+ue.circularPathData.sourceX+" "+ue.circularPathData.sourceY+" L"+ue.circularPathData.leftInnerExtent+" "+ue.circularPathData.sourceY+" A"+ue.circularPathData.leftLargeArcRadius+" "+ue.circularPathData.leftSmallArcRadius+" 0 0 0 "+ue.circularPathData.leftFullExtent+" "+(ue.circularPathData.sourceY-ue.circularPathData.leftSmallArcRadius)+" L"+ue.circularPathData.leftFullExtent+" "+ue.circularPathData.verticalLeftInnerExtent+" A"+ue.circularPathData.leftLargeArcRadius+" "+ue.circularPathData.leftLargeArcRadius+" 0 0 0 "+ue.circularPathData.leftInnerExtent+" "+ue.circularPathData.verticalFullExtent+" L"+ue.circularPathData.rightInnerExtent+" "+ue.circularPathData.verticalFullExtent+" A"+ue.circularPathData.rightLargeArcRadius+" "+ue.circularPathData.rightLargeArcRadius+" 0 0 0 "+ue.circularPathData.rightFullExtent+" "+ue.circularPathData.verticalRightInnerExtent+" L"+ue.circularPathData.rightFullExtent+" "+(ue.circularPathData.targetY-ue.circularPathData.rightSmallArcRadius)+" A"+ue.circularPathData.rightLargeArcRadius+" "+ue.circularPathData.rightSmallArcRadius+" 0 0 0 "+ue.circularPathData.rightInnerExtent+" "+ue.circularPathData.targetY+" L"+ue.circularPathData.targetX+" "+ue.circularPathData.targetY:ye="M"+ue.circularPathData.sourceX+" "+ue.circularPathData.sourceY+" L"+ue.circularPathData.leftInnerExtent+" "+ue.circularPathData.sourceY+" A"+ue.circularPathData.leftLargeArcRadius+" "+ue.circularPathData.leftSmallArcRadius+" 0 0 1 "+ue.circularPathData.leftFullExtent+" "+(ue.circularPathData.sourceY+ue.circularPathData.leftSmallArcRadius)+" L"+ue.circularPathData.leftFullExtent+" "+ue.circularPathData.verticalLeftInnerExtent+" A"+ue.circularPathData.leftLargeArcRadius+" "+ue.circularPathData.leftLargeArcRadius+" 0 0 1 "+ue.circularPathData.leftInnerExtent+" "+ue.circularPathData.verticalFullExtent+" L"+ue.circularPathData.rightInnerExtent+" "+ue.circularPathData.verticalFullExtent+" A"+ue.circularPathData.rightLargeArcRadius+" "+ue.circularPathData.rightLargeArcRadius+" 0 0 1 "+ue.circularPathData.rightFullExtent+" "+ue.circularPathData.verticalRightInnerExtent+" L"+ue.circularPathData.rightFullExtent+" "+(ue.circularPathData.targetY+ue.circularPathData.rightSmallArcRadius)+" A"+ue.circularPathData.rightLargeArcRadius+" "+ue.circularPathData.rightSmallArcRadius+" 0 0 1 "+ue.circularPathData.rightInnerExtent+" "+ue.circularPathData.targetY+" L"+ue.circularPathData.targetX+" "+ue.circularPathData.targetY,ye}function ee(ue,ye){return Q(ue)==Q(ye)?ue.circularLinkType=="bottom"?X(ue,ye):Z(ue,ye):Q(ye)-Q(ue)}function Z(ue,ye){return ue.y0-ye.y0}function X(ue,ye){return ye.y0-ue.y0}function ne(ue,ye){return ue.y1-ye.y1}function ce(ue,ye){return ye.y1-ue.y1}function Q(ue){return ue.target.column-ue.source.column}function K(ue){return ue.target.x0-ue.source.x1}function U(ue,ye){var xe=I(ue),me=K(ye)/Math.tan(xe),be=ae(ue)=="up"?ue.y1+me:ue.y1-me;return be}function H(ue,ye){var xe=I(ue),me=K(ye)/Math.tan(xe),be=ae(ue)=="up"?ue.y1-me:ue.y1+me;return be}function q(ue,ye,xe,me){ue.links.forEach(function(be){if(!be.circular&&be.target.column-be.source.column>1){var ke=be.source.column+1,De=be.target.column-1,Ve=1,Ae=De-ke+1;for(Ve=1;ke<=De;ke++,Ve++)ue.nodes.forEach(function(Le){if(Le.column==ke){var je=Ve/(Ae+1),Ye=Math.pow(1-je,3),ze=3*je*Math.pow(1-je,2),Ie=3*Math.pow(je,2)*(1-je),We=Math.pow(je,3),pt=Ye*be.y0+ze*be.y0+Ie*be.y1+We*be.y1,Ft=pt-be.width/2,Qt=pt+be.width/2,zt;Ft>Le.y0&&Ft<Le.y1?(zt=Le.y1-Ft+10,zt=Le.circularLinkType=="bottom"?zt:-zt,Le=j(Le,zt,ye,xe),ue.nodes.forEach(function(Et){w(Et,me)==w(Le,me)||Et.column!=Le.column||re(Le,Et)&&j(Et,zt,ye,xe)})):Qt>Le.y0&&Qt<Le.y1?(zt=Qt-Le.y0+10,Le=j(Le,zt,ye,xe),ue.nodes.forEach(function(Et){w(Et,me)==w(Le,me)||Et.column!=Le.column||Et.y0<Le.y1&&Et.y1>Le.y1&&j(Et,zt,ye,xe)})):Ft<Le.y0&&Qt>Le.y1&&(zt=Qt-Le.y0+10,Le=j(Le,zt,ye,xe),ue.nodes.forEach(function(Et){w(Et,me)==w(Le,me)||Et.column!=Le.column||Et.y0<Le.y1&&Et.y1>Le.y1&&j(Et,zt,ye,xe)}))}})}})}function re(ue,ye){return ue.y0>ye.y0&&ue.y0<ye.y1||ue.y1>ye.y0&&ue.y1<ye.y1?!0:ue.y0<ye.y0&&ue.y1>ye.y1}function j(ue,ye,xe,me){return ue.y0+ye>=xe&&ue.y1+ye<=me&&(ue.y0=ue.y0+ye,ue.y1=ue.y1+ye,ue.targetLinks.forEach(function(be){be.y1=be.y1+ye}),ue.sourceLinks.forEach(function(be){be.y0=be.y0+ye})),ue}function $(ue,ye,xe,me){ue.nodes.forEach(function(be){me&&be.y+(be.y1-be.y0)>ye&&(be.y=be.y-(be.y+(be.y1-be.y0)-ye));var ke=ue.links.filter(function(Ae){return w(Ae.source,xe)==w(be,xe)}),De=ke.length;De>1&&ke.sort(function(Ae,Le){if(!Ae.circular&&!Le.circular){if(Ae.target.column==Le.target.column)return Ae.y1-Le.y1;if(oe(Ae,Le)){if(Ae.target.column>Le.target.column){var je=H(Le,Ae);return Ae.y1-je}if(Le.target.column>Ae.target.column){var Ye=H(Ae,Le);return Ye-Le.y1}}else return Ae.y1-Le.y1}if(Ae.circular&&!Le.circular)return Ae.circularLinkType=="top"?-1:1;if(Le.circular&&!Ae.circular)return Le.circularLinkType=="top"?1:-1;if(Ae.circular&&Le.circular)return Ae.circularLinkType===Le.circularLinkType&&Ae.circularLinkType=="top"?Ae.target.column===Le.target.column?Ae.target.y1-Le.target.y1:Le.target.column-Ae.target.column:Ae.circularLinkType===Le.circularLinkType&&Ae.circularLinkType=="bottom"?Ae.target.column===Le.target.column?Le.target.y1-Ae.target.y1:Ae.target.column-Le.target.column:Ae.circularLinkType=="top"?-1:1});var Ve=be.y0;ke.forEach(function(Ae){Ae.y0=Ve+Ae.width/2,Ve=Ve+Ae.width}),ke.forEach(function(Ae,Le){if(Ae.circularLinkType=="bottom"){var je=Le+1,Ye=0;for(je;je<De;je++)Ye=Ye+ke[je].width;Ae.y0=be.y1-Ye-Ae.width/2}})})}function ie(ue,ye,xe){ue.nodes.forEach(function(me){var be=ue.links.filter(function(Ve){return w(Ve.target,xe)==w(me,xe)}),ke=be.length;ke>1&&be.sort(function(Ve,Ae){if(!Ve.circular&&!Ae.circular){if(Ve.source.column==Ae.source.column)return Ve.y0-Ae.y0;if(oe(Ve,Ae)){if(Ae.source.column<Ve.source.column){var Le=U(Ae,Ve);return Ve.y0-Le}if(Ve.source.column<Ae.source.column){var je=U(Ve,Ae);return je-Ae.y0}}else return Ve.y0-Ae.y0}if(Ve.circular&&!Ae.circular)return Ve.circularLinkType=="top"?-1:1;if(Ae.circular&&!Ve.circular)return Ae.circularLinkType=="top"?1:-1;if(Ve.circular&&Ae.circular)return Ve.circularLinkType===Ae.circularLinkType&&Ve.circularLinkType=="top"?Ve.source.column===Ae.source.column?Ve.source.y1-Ae.source.y1:Ve.source.column-Ae.source.column:Ve.circularLinkType===Ae.circularLinkType&&Ve.circularLinkType=="bottom"?Ve.source.column===Ae.source.column?Ve.source.y1-Ae.source.y1:Ae.source.column-Ve.source.column:Ve.circularLinkType=="top"?-1:1});var De=me.y0;be.forEach(function(Ve){Ve.y1=De+Ve.width/2,De=De+Ve.width}),be.forEach(function(Ve,Ae){if(Ve.circularLinkType=="bottom"){var Le=Ae+1,je=0;for(Le;Le<ke;Le++)je=je+be[Le].width;Ve.y1=me.y1-je-Ve.width/2}})})}function oe(ue,ye){return ae(ue)==ae(ye)}function ae(ue){return ue.y0-ue.y1>0?"up":"down"}function se(ue,ye){return w(ue.source,ye)==w(ue.target,ye)}function _e(ue,ye,xe){var me=ue.nodes,be=ue.links,ke=!1,De=!1;if(be.forEach(function(ze){ze.circularLinkType=="top"?ke=!0:ze.circularLinkType=="bottom"&&(De=!0)}),ke==!1||De==!1){var Ve=c.min(me,function(ze){return ze.y0}),Ae=c.max(me,function(ze){return ze.y1}),Le=Ae-Ve,je=xe-ye,Ye=je/Le;me.forEach(function(ze){var Ie=(ze.y1-ze.y0)*Ye;ze.y0=(ze.y0-Ve)*Ye,ze.y1=ze.y0+Ie}),be.forEach(function(ze){ze.y0=(ze.y0-Ve)*Ye,ze.y1=(ze.y1-Ve)*Ye,ze.width=ze.width*Ye})}}m.sankeyCircular=E,m.sankeyCenter=v,m.sankeyLeft=i,m.sankeyRight=n,m.sankeyJustify=r,Object.defineProperty(m,"__esModule",{value:!0})})},{"d3-array":107,"d3-collection":108,"d3-shape":119,"elementary-circuits-directed-graph":130}],57:[function(t,B,V){(function(m,c){typeof V=="object"&&typeof B<"u"?c(V,t("d3-array"),t("d3-collection"),t("d3-shape")):c(m.d3=m.d3||{},m.d3,m.d3,m.d3)})(this,function(m,c,A,T){function e(L){return L.target.depth}function a(L){return L.depth}function i(L,S){return S-1-L.height}function n(L,S){return L.sourceLinks.length?L.depth:S-1}function r(L){return L.targetLinks.length?L.depth:L.sourceLinks.length?c.min(L.sourceLinks,e)-1:0}function v(L){return function(){return L}}function s(L,S){return b(L.source,S.source)||L.index-S.index}function o(L,S){return b(L.target,S.target)||L.index-S.index}function b(L,S){return L.y0-S.y0}function g(L){return L.value}function d(L){return(L.y0+L.y1)/2}function f(L){return d(L.source)*L.value}function y(L){return d(L.target)*L.value}function l(L){return L.index}function x(L){return L.nodes}function u(L){return L.links}function M(L,S){var E=L.get(S);if(!E)throw new Error("missing: "+S);return E}var _=function(){var L=0,S=0,E=1,P=1,F=24,I=8,D=l,R=n,N=x,z=u,G=32,Y=2/3;function ee(){var K={nodes:N.apply(null,arguments),links:z.apply(null,arguments)};return Z(K),X(K),ne(K),ce(K),Q(K),K}ee.update=function(K){return Q(K),K},ee.nodeId=function(K){return arguments.length?(D=typeof K=="function"?K:v(K),ee):D},ee.nodeAlign=function(K){return arguments.length?(R=typeof K=="function"?K:v(K),ee):R},ee.nodeWidth=function(K){return arguments.length?(F=+K,ee):F},ee.nodePadding=function(K){return arguments.length?(I=+K,ee):I},ee.nodes=function(K){return arguments.length?(N=typeof K=="function"?K:v(K),ee):N},ee.links=function(K){return arguments.length?(z=typeof K=="function"?K:v(K),ee):z},ee.size=function(K){return arguments.length?(L=S=0,E=+K[0],P=+K[1],ee):[E-L,P-S]},ee.extent=function(K){return arguments.length?(L=+K[0][0],E=+K[1][0],S=+K[0][1],P=+K[1][1],ee):[[L,S],[E,P]]},ee.iterations=function(K){return arguments.length?(G=+K,ee):G};function Z(K){K.nodes.forEach(function(H,q){H.index=q,H.sourceLinks=[],H.targetLinks=[]});var U=A.map(K.nodes,D);K.links.forEach(function(H,q){H.index=q;var re=H.source,j=H.target;typeof re!="object"&&(re=H.source=M(U,re)),typeof j!="object"&&(j=H.target=M(U,j)),re.sourceLinks.push(H),j.targetLinks.push(H)})}function X(K){K.nodes.forEach(function(U){U.value=Math.max(c.sum(U.sourceLinks,g),c.sum(U.targetLinks,g))})}function ne(K){var U,H,q;for(U=K.nodes,H=[],q=0;U.length;++q,U=H,H=[])U.forEach(function(j){j.depth=q,j.sourceLinks.forEach(function($){H.indexOf($.target)<0&&H.push($.target)})});for(U=K.nodes,H=[],q=0;U.length;++q,U=H,H=[])U.forEach(function(j){j.height=q,j.targetLinks.forEach(function($){H.indexOf($.source)<0&&H.push($.source)})});var re=(E-L-F)/(q-1);K.nodes.forEach(function(j){j.x1=(j.x0=L+Math.max(0,Math.min(q-1,Math.floor(R.call(null,j,q))))*re)+F})}function ce(K){var U=A.nest().key(function(oe){return oe.x0}).sortKeys(c.ascending).entries(K.nodes).map(function(oe){return oe.values});re(),ie();for(var H=1,q=G;q>0;--q)$(H*=.99),ie(),j(H),ie();function re(){var oe=c.max(U,function(_e){return _e.length}),ae=Y*(P-S)/(oe-1);I>ae&&(I=ae);var se=c.min(U,function(_e){return(P-S-(_e.length-1)*I)/c.sum(_e,g)});U.forEach(function(_e){_e.forEach(function(ue,ye){ue.y1=(ue.y0=ye)+ue.value*se})}),K.links.forEach(function(_e){_e.width=_e.value*se})}function j(oe){U.forEach(function(ae){ae.forEach(function(se){if(se.targetLinks.length){var _e=(c.sum(se.targetLinks,f)/c.sum(se.targetLinks,g)-d(se))*oe;se.y0+=_e,se.y1+=_e}})})}function $(oe){U.slice().reverse().forEach(function(ae){ae.forEach(function(se){if(se.sourceLinks.length){var _e=(c.sum(se.sourceLinks,y)/c.sum(se.sourceLinks,g)-d(se))*oe;se.y0+=_e,se.y1+=_e}})})}function ie(){U.forEach(function(oe){var ae,se,_e=S,ue=oe.length,ye;for(oe.sort(b),ye=0;ye<ue;++ye)ae=oe[ye],se=_e-ae.y0,se>0&&(ae.y0+=se,ae.y1+=se),_e=ae.y1+I;if(se=_e-I-P,se>0)for(_e=ae.y0-=se,ae.y1-=se,ye=ue-2;ye>=0;--ye)ae=oe[ye],se=ae.y1+I-_e,se>0&&(ae.y0-=se,ae.y1-=se),_e=ae.y0})}}function Q(K){K.nodes.forEach(function(U){U.sourceLinks.sort(o),U.targetLinks.sort(s)}),K.nodes.forEach(function(U){var H=U.y0,q=H;U.sourceLinks.forEach(function(re){re.y0=H+re.width/2,H+=re.width}),U.targetLinks.forEach(function(re){re.y1=q+re.width/2,q+=re.width})})}return ee};function p(L){return[L.source.x1,L.y0]}function w(L){return[L.target.x0,L.y1]}var h=function(){return T.linkHorizontal().source(p).target(w)};m.sankey=_,m.sankeyCenter=r,m.sankeyLeft=a,m.sankeyRight=i,m.sankeyJustify=n,m.sankeyLinkHorizontal=h,Object.defineProperty(m,"__esModule",{value:!0})})},{"d3-array":107,"d3-collection":108,"d3-shape":119}],58:[function(t,B,V){(function(){var m={version:"3.8.0"},c=[].slice,A=function(le){return c.call(le)},T=self.document;function e(le){return le&&(le.ownerDocument||le.document||le).documentElement}function a(le){return le&&(le.ownerDocument&&le.ownerDocument.defaultView||le.document&&le||le.defaultView)}if(T)try{A(T.documentElement.childNodes)[0].nodeType}catch{A=function(Te){for(var Re=Te.length,Ue=new Array(Re);Re--;)Ue[Re]=Te[Re];return Ue}}if(Date.now||(Date.now=function(){return+new Date}),T)try{T.createElement("DIV").style.setProperty("opacity",0,"")}catch{var i=this.Element.prototype,n=i.setAttribute,r=i.setAttributeNS,v=this.CSSStyleDeclaration.prototype,s=v.setProperty;i.setAttribute=function(Te,Re){n.call(this,Te,Re+"")},i.setAttributeNS=function(Te,Re,Ue){r.call(this,Te,Re,Ue+"")},v.setProperty=function(Te,Re,Ue){s.call(this,Te,Re+"",Ue)}}m.ascending=o;function o(le,Te){return le<Te?-1:le>Te?1:le>=Te?0:NaN}m.descending=function(le,Te){return Te<le?-1:Te>le?1:Te>=le?0:NaN},m.min=function(le,Te){var Re=-1,Ue=le.length,Be,Qe;if(arguments.length===1){for(;++Re<Ue;)if((Qe=le[Re])!=null&&Qe>=Qe){Be=Qe;break}for(;++Re<Ue;)(Qe=le[Re])!=null&&Be>Qe&&(Be=Qe)}else{for(;++Re<Ue;)if((Qe=Te.call(le,le[Re],Re))!=null&&Qe>=Qe){Be=Qe;break}for(;++Re<Ue;)(Qe=Te.call(le,le[Re],Re))!=null&&Be>Qe&&(Be=Qe)}return Be},m.max=function(le,Te){var Re=-1,Ue=le.length,Be,Qe;if(arguments.length===1){for(;++Re<Ue;)if((Qe=le[Re])!=null&&Qe>=Qe){Be=Qe;break}for(;++Re<Ue;)(Qe=le[Re])!=null&&Qe>Be&&(Be=Qe)}else{for(;++Re<Ue;)if((Qe=Te.call(le,le[Re],Re))!=null&&Qe>=Qe){Be=Qe;break}for(;++Re<Ue;)(Qe=Te.call(le,le[Re],Re))!=null&&Qe>Be&&(Be=Qe)}return Be},m.extent=function(le,Te){var Re=-1,Ue=le.length,Be,Qe,_t;if(arguments.length===1){for(;++Re<Ue;)if((Qe=le[Re])!=null&&Qe>=Qe){Be=_t=Qe;break}for(;++Re<Ue;)(Qe=le[Re])!=null&&(Be>Qe&&(Be=Qe),_t<Qe&&(_t=Qe))}else{for(;++Re<Ue;)if((Qe=Te.call(le,le[Re],Re))!=null&&Qe>=Qe){Be=_t=Qe;break}for(;++Re<Ue;)(Qe=Te.call(le,le[Re],Re))!=null&&(Be>Qe&&(Be=Qe),_t<Qe&&(_t=Qe))}return[Be,_t]};function b(le){return le===null?NaN:+le}function g(le){return!isNaN(le)}m.sum=function(le,Te){var Re=0,Ue=le.length,Be,Qe=-1;if(arguments.length===1)for(;++Qe<Ue;)g(Be=+le[Qe])&&(Re+=Be);else for(;++Qe<Ue;)g(Be=+Te.call(le,le[Qe],Qe))&&(Re+=Be);return Re},m.mean=function(le,Te){var Re=0,Ue=le.length,Be,Qe=-1,_t=Ue;if(arguments.length===1)for(;++Qe<Ue;)g(Be=b(le[Qe]))?Re+=Be:--_t;else for(;++Qe<Ue;)g(Be=b(Te.call(le,le[Qe],Qe)))?Re+=Be:--_t;if(_t)return Re/_t},m.quantile=function(le,Te){var Re=(le.length-1)*Te+1,Ue=Math.floor(Re),Be=+le[Ue-1],Qe=Re-Ue;return Qe?Be+Qe*(le[Ue]-Be):Be},m.median=function(le,Te){var Re=[],Ue=le.length,Be,Qe=-1;if(arguments.length===1)for(;++Qe<Ue;)g(Be=b(le[Qe]))&&Re.push(Be);else for(;++Qe<Ue;)g(Be=b(Te.call(le,le[Qe],Qe)))&&Re.push(Be);if(Re.length)return m.quantile(Re.sort(o),.5)},m.variance=function(le,Te){var Re=le.length,Ue=0,Be,Qe,_t=0,dt=-1,Rt=0;if(arguments.length===1)for(;++dt<Re;)g(Be=b(le[dt]))&&(Qe=Be-Ue,Ue+=Qe/++Rt,_t+=Qe*(Be-Ue));else for(;++dt<Re;)g(Be=b(Te.call(le,le[dt],dt)))&&(Qe=Be-Ue,Ue+=Qe/++Rt,_t+=Qe*(Be-Ue));if(Rt>1)return _t/(Rt-1)},m.deviation=function(){var le=m.variance.apply(this,arguments);return le&&Math.sqrt(le)};function d(le){return{left:function(Te,Re,Ue,Be){for(arguments.length<3&&(Ue=0),arguments.length<4&&(Be=Te.length);Ue<Be;){var Qe=Ue+Be>>>1;le(Te[Qe],Re)<0?Ue=Qe+1:Be=Qe}return Ue},right:function(Te,Re,Ue,Be){for(arguments.length<3&&(Ue=0),arguments.length<4&&(Be=Te.length);Ue<Be;){var Qe=Ue+Be>>>1;le(Te[Qe],Re)>0?Be=Qe:Ue=Qe+1}return Ue}}}var f=d(o);m.bisectLeft=f.left,m.bisect=m.bisectRight=f.right,m.bisector=function(le){return d(le.length===1?function(Te,Re){return o(le(Te),Re)}:le)},m.shuffle=function(le,Te,Re){(Ue=arguments.length)<3&&(Re=le.length,Ue<2&&(Te=0));for(var Ue=Re-Te,Be,Qe;Ue;)Qe=Math.random()*Ue--|0,Be=le[Ue+Te],le[Ue+Te]=le[Qe+Te],le[Qe+Te]=Be;return le},m.permute=function(le,Te){for(var Re=Te.length,Ue=new Array(Re);Re--;)Ue[Re]=le[Te[Re]];return Ue},m.pairs=function(le){for(var Te=0,Re=le.length-1,Ue=le[0],Be=new Array(Re<0?0:Re);Te<Re;)Be[Te]=[Ue,Ue=le[++Te]];return Be},m.transpose=function(le){if(!(Qe=le.length))return[];for(var Te=-1,Re=m.min(le,y),Ue=new Array(Re);++Te<Re;)for(var Be=-1,Qe,_t=Ue[Te]=new Array(Qe);++Be<Qe;)_t[Be]=le[Be][Te];return Ue};function y(le){return le.length}m.zip=function(){return m.transpose(arguments)},m.keys=function(le){var Te=[];for(var Re in le)Te.push(Re);return Te},m.values=function(le){var Te=[];for(var Re in le)Te.push(le[Re]);return Te},m.entries=function(le){var Te=[];for(var Re in le)Te.push({key:Re,value:le[Re]});return Te},m.merge=function(le){for(var Te=le.length,Re,Ue=-1,Be=0,Qe,_t;++Ue<Te;)Be+=le[Ue].length;for(Qe=new Array(Be);--Te>=0;)for(_t=le[Te],Re=_t.length;--Re>=0;)Qe[--Be]=_t[Re];return Qe};var l=Math.abs;m.range=function(le,Te,Re){if(arguments.length<3&&(Re=1,arguments.length<2&&(Te=le,le=0)),(Te-le)/Re===1/0)throw new Error("infinite range");var Ue=[],Be=x(l(Re)),Qe=-1,_t;if(le*=Be,Te*=Be,Re*=Be,Re<0)for(;(_t=le+Re*++Qe)>Te;)Ue.push(_t/Be);else for(;(_t=le+Re*++Qe)<Te;)Ue.push(_t/Be);return Ue};function x(le){for(var Te=1;le*Te%1;)Te*=10;return Te}function u(le,Te){for(var Re in Te)Object.defineProperty(le.prototype,Re,{value:Te[Re],enumerable:!1})}m.map=function(le,Te){var Re=new M;if(le instanceof M)le.forEach(function(dt,Rt){Re.set(dt,Rt)});else if(Array.isArray(le)){var Ue=-1,Be=le.length,Qe;if(arguments.length===1)for(;++Ue<Be;)Re.set(Ue,le[Ue]);else for(;++Ue<Be;)Re.set(Te.call(le,Qe=le[Ue],Ue),Qe)}else for(var _t in le)Re.set(_t,le[_t]);return Re};function M(){this._=Object.create(null)}var _="__proto__",p="\0";u(M,{has:L,get:function(le){return this._[w(le)]},set:function(le,Te){return this._[w(le)]=Te},remove:S,keys:E,values:function(){var le=[];for(var Te in this._)le.push(this._[Te]);return le},entries:function(){var le=[];for(var Te in this._)le.push({key:h(Te),value:this._[Te]});return le},size:P,empty:F,forEach:function(le){for(var Te in this._)le.call(this,h(Te),this._[Te])}});function w(le){return(le+="")===_||le[0]===p?p+le:le}function h(le){return(le+="")[0]===p?le.slice(1):le}function L(le){return w(le)in this._}function S(le){return(le=w(le))in this._&&delete this._[le]}function E(){var le=[];for(var Te in this._)le.push(h(Te));return le}function P(){var le=0;for(var Te in this._)++le;return le}function F(){for(var le in this._)return!1;return!0}m.nest=function(){var le={},Te=[],Re=[],Ue,Be;function Qe(dt,Rt,Jt){if(Jt>=Te.length)return Be?Be.call(le,Rt):Ue?Rt.sort(Ue):Rt;for(var tr=-1,rr=Rt.length,Er=Te[Jt++],qr,cn,Dr,Vr=new M,Kr;++tr<rr;)(Kr=Vr.get(qr=Er(cn=Rt[tr])))?Kr.push(cn):Vr.set(qr,[cn]);return dt?(cn=dt(),Dr=function(sn,un){cn.set(sn,Qe(dt,un,Jt))}):(cn={},Dr=function(sn,un){cn[sn]=Qe(dt,un,Jt)}),Vr.forEach(Dr),cn}function _t(dt,Rt){if(Rt>=Te.length)return dt;var Jt=[],tr=Re[Rt++];return dt.forEach(function(rr,Er){Jt.push({key:rr,values:_t(Er,Rt)})}),tr?Jt.sort(function(rr,Er){return tr(rr.key,Er.key)}):Jt}return le.map=function(dt,Rt){return Qe(Rt,dt,0)},le.entries=function(dt){return _t(Qe(m.map,dt,0),0)},le.key=function(dt){return Te.push(dt),le},le.sortKeys=function(dt){return Re[Te.length-1]=dt,le},le.sortValues=function(dt){return Ue=dt,le},le.rollup=function(dt){return Be=dt,le},le},m.set=function(le){var Te=new I;if(le)for(var Re=0,Ue=le.length;Re<Ue;++Re)Te.add(le[Re]);return Te};function I(){this._=Object.create(null)}u(I,{has:L,add:function(le){return this._[w(le+="")]=!0,le},remove:S,values:E,size:P,empty:F,forEach:function(le){for(var Te in this._)le.call(this,h(Te))}}),m.behavior={};function D(le){return le}m.rebind=function(le,Te){for(var Re=1,Ue=arguments.length,Be;++Re<Ue;)le[Be=arguments[Re]]=R(le,Te,Te[Be]);return le};function R(le,Te,Re){return function(){var Ue=Re.apply(Te,arguments);return Ue===Te?le:Ue}}function N(le,Te){if(Te in le)return Te;Te=Te.charAt(0).toUpperCase()+Te.slice(1);for(var Re=0,Ue=z.length;Re<Ue;++Re){var Be=z[Re]+Te;if(Be in le)return Be}}var z=["webkit","ms","moz","Moz","o","O"];function G(){}m.dispatch=function(){for(var le=new Y,Te=-1,Re=arguments.length;++Te<Re;)le[arguments[Te]]=ee(le);return le};function Y(){}Y.prototype.on=function(le,Te){var Re=le.indexOf("."),Ue="";if(Re>=0&&(Ue=le.slice(Re+1),le=le.slice(0,Re)),le)return arguments.length<2?this[le].on(Ue):this[le].on(Ue,Te);if(arguments.length===2){if(Te==null)for(le in this)this.hasOwnProperty(le)&&this[le].on(Ue,null);return this}};function ee(le){var Te=[],Re=new M;function Ue(){for(var Be=Te,Qe=-1,_t=Be.length,dt;++Qe<_t;)(dt=Be[Qe].on)&&dt.apply(this,arguments);return le}return Ue.on=function(Be,Qe){var _t=Re.get(Be),dt;return arguments.length<2?_t&&_t.on:(_t&&(_t.on=null,Te=Te.slice(0,dt=Te.indexOf(_t)).concat(Te.slice(dt+1)),Re.remove(Be)),Qe&&Te.push(Re.set(Be,{on:Qe})),le)},Ue}m.event=null;function Z(){m.event.preventDefault()}function X(){for(var le=m.event,Te;Te=le.sourceEvent;)le=Te;return le}function ne(le){for(var Te=new Y,Re=0,Ue=arguments.length;++Re<Ue;)Te[arguments[Re]]=ee(Te);return Te.of=function(Be,Qe){return function(_t){try{var dt=_t.sourceEvent=m.event;_t.target=le,m.event=_t,Te[_t.type].apply(Be,Qe)}finally{m.event=dt}}},Te}m.requote=function(le){return le.replace(ce,"\\$&")};var ce=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Q={}.__proto__?function(le,Te){le.__proto__=Te}:function(le,Te){for(var Re in Te)le[Re]=Te[Re]};function K(le){return Q(le,re),le}var U=function(le,Te){return Te.querySelector(le)},H=function(le,Te){return Te.querySelectorAll(le)},q=function(le,Te){var Re=le.matches||le[N(le,"matchesSelector")];return q=function(Ue,Be){return Re.call(Ue,Be)},q(le,Te)};typeof Sizzle=="function"&&(U=function(le,Te){return Sizzle(le,Te)[0]||null},H=Sizzle,q=Sizzle.matchesSelector),m.selection=function(){return m.select(T.documentElement)};var re=m.selection.prototype=[];re.select=function(le){var Te=[],Re,Ue,Be,Qe;le=j(le);for(var _t=-1,dt=this.length;++_t<dt;){Te.push(Re=[]),Re.parentNode=(Be=this[_t]).parentNode;for(var Rt=-1,Jt=Be.length;++Rt<Jt;)(Qe=Be[Rt])?(Re.push(Ue=le.call(Qe,Qe.__data__,Rt,_t)),Ue&&"__data__"in Qe&&(Ue.__data__=Qe.__data__)):Re.push(null)}return K(Te)};function j(le){return typeof le=="function"?le:function(){return U(le,this)}}re.selectAll=function(le){var Te=[],Re,Ue;le=$(le);for(var Be=-1,Qe=this.length;++Be<Qe;)for(var _t=this[Be],dt=-1,Rt=_t.length;++dt<Rt;)(Ue=_t[dt])&&(Te.push(Re=A(le.call(Ue,Ue.__data__,dt,Be))),Re.parentNode=Ue);return K(Te)};function $(le){return typeof le=="function"?le:function(){return H(le,this)}}var ie="http://www.w3.org/1999/xhtml",oe={svg:"http://www.w3.org/2000/svg",xhtml:ie,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};m.ns={prefix:oe,qualify:function(le){var Te=le.indexOf(":"),Re=le;return Te>=0&&(Re=le.slice(0,Te))!=="xmlns"&&(le=le.slice(Te+1)),oe.hasOwnProperty(Re)?{space:oe[Re],local:le}:le}},re.attr=function(le,Te){if(arguments.length<2){if(typeof le=="string"){var Re=this.node();return le=m.ns.qualify(le),le.local?Re.getAttributeNS(le.space,le.local):Re.getAttribute(le)}for(Te in le)this.each(ae(Te,le[Te]));return this}return this.each(ae(le,Te))};function ae(le,Te){le=m.ns.qualify(le);function Re(){this.removeAttribute(le)}function Ue(){this.removeAttributeNS(le.space,le.local)}function Be(){this.setAttribute(le,Te)}function Qe(){this.setAttributeNS(le.space,le.local,Te)}function _t(){var Rt=Te.apply(this,arguments);Rt==null?this.removeAttribute(le):this.setAttribute(le,Rt)}function dt(){var Rt=Te.apply(this,arguments);Rt==null?this.removeAttributeNS(le.space,le.local):this.setAttributeNS(le.space,le.local,Rt)}return Te==null?le.local?Ue:Re:typeof Te=="function"?le.local?dt:_t:le.local?Qe:Be}function se(le){return le.trim().replace(/\s+/g," ")}re.classed=function(le,Te){if(arguments.length<2){if(typeof le=="string"){var Re=this.node(),Ue=(le=ue(le)).length,Be=-1;if(Te=Re.classList){for(;++Be<Ue;)if(!Te.contains(le[Be]))return!1}else for(Te=Re.getAttribute("class");++Be<Ue;)if(!_e(le[Be]).test(Te))return!1;return!0}for(Te in le)this.each(ye(Te,le[Te]));return this}return this.each(ye(le,Te))};function _e(le){return new RegExp("(?:^|\\s+)"+m.requote(le)+"(?:\\s+|$)","g")}function ue(le){return(le+"").trim().split(/^|\s+/)}function ye(le,Te){le=ue(le).map(xe);var Re=le.length;function Ue(){for(var Qe=-1;++Qe<Re;)le[Qe](this,Te)}function Be(){for(var Qe=-1,_t=Te.apply(this,arguments);++Qe<Re;)le[Qe](this,_t)}return typeof Te=="function"?Be:Ue}function xe(le){var Te=_e(le);return function(Re,Ue){if(Be=Re.classList)return Ue?Be.add(le):Be.remove(le);var Be=Re.getAttribute("class")||"";Ue?(Te.lastIndex=0,Te.test(Be)||Re.setAttribute("class",se(Be+" "+le))):Re.setAttribute("class",se(Be.replace(Te," ")))}}re.style=function(le,Te,Re){var Ue=arguments.length;if(Ue<3){if(typeof le!="string"){Ue<2&&(Te="");for(Re in le)this.each(me(Re,le[Re],Te));return this}if(Ue<2){var Be=this.node();return a(Be).getComputedStyle(Be,null).getPropertyValue(le)}Re=""}return this.each(me(le,Te,Re))};function me(le,Te,Re){function Ue(){this.style.removeProperty(le)}function Be(){this.style.setProperty(le,Te,Re)}function Qe(){var _t=Te.apply(this,arguments);_t==null?this.style.removeProperty(le):this.style.setProperty(le,_t,Re)}return Te==null?Ue:typeof Te=="function"?Qe:Be}re.property=function(le,Te){if(arguments.length<2){if(typeof le=="string")return this.node()[le];for(Te in le)this.each(be(Te,le[Te]));return this}return this.each(be(le,Te))};function be(le,Te){function Re(){delete this[le]}function Ue(){this[le]=Te}function Be(){var Qe=Te.apply(this,arguments);Qe==null?delete this[le]:this[le]=Qe}return Te==null?Re:typeof Te=="function"?Be:Ue}re.text=function(le){return arguments.length?this.each(typeof le=="function"?function(){var Te=le.apply(this,arguments);this.textContent=Te==null?"":Te}:le==null?function(){this.textContent=""}:function(){this.textContent=le}):this.node().textContent},re.html=function(le){return arguments.length?this.each(typeof le=="function"?function(){var Te=le.apply(this,arguments);this.innerHTML=Te==null?"":Te}:le==null?function(){this.innerHTML=""}:function(){this.innerHTML=le}):this.node().innerHTML},re.append=function(le){return le=ke(le),this.select(function(){return this.appendChild(le.apply(this,arguments))})};function ke(le){function Te(){var Ue=this.ownerDocument,Be=this.namespaceURI;return Be===ie&&Ue.documentElement.namespaceURI===ie?Ue.createElement(le):Ue.createElementNS(Be,le)}function Re(){return this.ownerDocument.createElementNS(le.space,le.local)}return typeof le=="function"?le:(le=m.ns.qualify(le)).local?Re:Te}re.insert=function(le,Te){return le=ke(le),Te=j(Te),this.select(function(){return this.insertBefore(le.apply(this,arguments),Te.apply(this,arguments)||null)})},re.remove=function(){return this.each(De)};function De(){var le=this.parentNode;le&&le.removeChild(this)}re.data=function(le,Te){var Re=-1,Ue=this.length,Be,Qe;if(!arguments.length){for(le=new Array(Ue=(Be=this[0]).length);++Re<Ue;)(Qe=Be[Re])&&(le[Re]=Qe.__data__);return le}function _t(tr,rr){var Er,qr=tr.length,cn=rr.length,Dr=Math.min(qr,cn),Vr=new Array(cn),Kr=new Array(cn),sn=new Array(qr),un,Qr;if(Te){var Gn=new M,ia=new Array(qr),Ma;for(Er=-1;++Er<qr;)(un=tr[Er])&&(Gn.has(Ma=Te.call(un,un.__data__,Er))?sn[Er]=un:Gn.set(Ma,un),ia[Er]=Ma);for(Er=-1;++Er<cn;)(un=Gn.get(Ma=Te.call(rr,Qr=rr[Er],Er)))?un!==!0&&(Vr[Er]=un,un.__data__=Qr):Kr[Er]=Ve(Qr),Gn.set(Ma,!0);for(Er=-1;++Er<qr;)Er in ia&&Gn.get(ia[Er])!==!0&&(sn[Er]=tr[Er])}else{for(Er=-1;++Er<Dr;)un=tr[Er],Qr=rr[Er],un?(un.__data__=Qr,Vr[Er]=un):Kr[Er]=Ve(Qr);for(;Er<cn;++Er)Kr[Er]=Ve(rr[Er]);for(;Er<qr;++Er)sn[Er]=tr[Er]}Kr.update=Vr,Kr.parentNode=Vr.parentNode=sn.parentNode=tr.parentNode,dt.push(Kr),Rt.push(Vr),Jt.push(sn)}var dt=Ye([]),Rt=K([]),Jt=K([]);if(typeof le=="function")for(;++Re<Ue;)_t(Be=this[Re],le.call(Be,Be.parentNode.__data__,Re));else for(;++Re<Ue;)_t(Be=this[Re],le);return Rt.enter=function(){return dt},Rt.exit=function(){return Jt},Rt};function Ve(le){return{__data__:le}}re.datum=function(le){return arguments.length?this.property("__data__",le):this.property("__data__")},re.filter=function(le){var Te=[],Re,Ue,Be;typeof le!="function"&&(le=Ae(le));for(var Qe=0,_t=this.length;Qe<_t;Qe++){Te.push(Re=[]),Re.parentNode=(Ue=this[Qe]).parentNode;for(var dt=0,Rt=Ue.length;dt<Rt;dt++)(Be=Ue[dt])&&le.call(Be,Be.__data__,dt,Qe)&&Re.push(Be)}return K(Te)};function Ae(le){return function(){return q(this,le)}}re.order=function(){for(var le=-1,Te=this.length;++le<Te;)for(var Re=this[le],Ue=Re.length-1,Be=Re[Ue],Qe;--Ue>=0;)(Qe=Re[Ue])&&(Be&&Be!==Qe.nextSibling&&Be.parentNode.insertBefore(Qe,Be),Be=Qe);return this},re.sort=function(le){le=Le.apply(this,arguments);for(var Te=-1,Re=this.length;++Te<Re;)this[Te].sort(le);return this.order()};function Le(le){return arguments.length||(le=o),function(Te,Re){return Te&&Re?le(Te.__data__,Re.__data__):!Te-!Re}}re.each=function(le){return je(this,function(Te,Re,Ue){le.call(Te,Te.__data__,Re,Ue)})};function je(le,Te){for(var Re=0,Ue=le.length;Re<Ue;Re++)for(var Be=le[Re],Qe=0,_t=Be.length,dt;Qe<_t;Qe++)(dt=Be[Qe])&&Te(dt,Qe,Re);return le}re.call=function(le){var Te=A(arguments);return le.apply(Te[0]=this,Te),this},re.empty=function(){return!this.node()},re.node=function(){for(var le=0,Te=this.length;le<Te;le++)for(var Re=this[le],Ue=0,Be=Re.length;Ue<Be;Ue++){var Qe=Re[Ue];if(Qe)return Qe}return null},re.size=function(){var le=0;return je(this,function(){++le}),le};function Ye(le){return Q(le,ze),le}var ze=[];m.selection.enter=Ye,m.selection.enter.prototype=ze,ze.append=re.append,ze.empty=re.empty,ze.node=re.node,ze.call=re.call,ze.size=re.size,ze.select=function(le){for(var Te=[],Re,Ue,Be,Qe,_t,dt=-1,Rt=this.length;++dt<Rt;){Be=(Qe=this[dt]).update,Te.push(Re=[]),Re.parentNode=Qe.parentNode;for(var Jt=-1,tr=Qe.length;++Jt<tr;)(_t=Qe[Jt])?(Re.push(Be[Jt]=Ue=le.call(Qe.parentNode,_t.__data__,Jt,dt)),Ue.__data__=_t.__data__):Re.push(null)}return K(Te)},ze.insert=function(le,Te){return arguments.length<2&&(Te=Ie(this)),re.insert.call(this,le,Te)};function Ie(le){var Te,Re;return function(Ue,Be,Qe){var _t=le[Qe].update,dt=_t.length,Rt;for(Qe!=Re&&(Re=Qe,Te=0),Be>=Te&&(Te=Be+1);!(Rt=_t[Te])&&++Te<dt;);return Rt}}m.select=function(le){var Te;return typeof le=="string"?(Te=[U(le,T)],Te.parentNode=T.documentElement):(Te=[le],Te.parentNode=e(le)),K([Te])},m.selectAll=function(le){var Te;return typeof le=="string"?(Te=A(H(le,T)),Te.parentNode=T.documentElement):(Te=A(le),Te.parentNode=null),K([Te])},re.on=function(le,Te,Re){var Ue=arguments.length;if(Ue<3){if(typeof le!="string"){Ue<2&&(Te=!1);for(Re in le)this.each(We(Re,le[Re],Te));return this}if(Ue<2)return(Ue=this.node()["__on"+le])&&Ue._;Re=!1}return this.each(We(le,Te,Re))};function We(le,Te,Re){var Ue="__on"+le,Be=le.indexOf("."),Qe=Ft;Be>0&&(le=le.slice(0,Be));var _t=pt.get(le);_t&&(le=_t,Qe=Qt);function dt(){var tr=this[Ue];tr&&(this.removeEventListener(le,tr,tr.$),delete this[Ue])}function Rt(){var tr=Qe(Te,A(arguments));dt.call(this),this.addEventListener(le,this[Ue]=tr,tr.$=Re),tr._=Te}function Jt(){var tr=new RegExp("^__on([^.]+)"+m.requote(le)+"$"),rr;for(var Er in this)if(rr=Er.match(tr)){var qr=this[Er];this.removeEventListener(rr[1],qr,qr.$),delete this[Er]}}return Be?Te?Rt:dt:Te?G:Jt}var pt=m.map({mouseenter:"mouseover",mouseleave:"mouseout"});T&&pt.forEach(function(le){"on"+le in T&&pt.remove(le)});function Ft(le,Te){return function(Re){var Ue=m.event;m.event=Re,Te[0]=this.__data__;try{le.apply(this,Te)}finally{m.event=Ue}}}function Qt(le,Te){var Re=Ft(le,Te);return function(Ue){var Be=this,Qe=Ue.relatedTarget;(!Qe||Qe!==Be&&!(Qe.compareDocumentPosition(Be)&8))&&Re.call(Be,Ue)}}var zt,Et=0;function Xt(le){var Te=".dragsuppress-"+ ++Et,Re="click"+Te,Ue=m.select(a(le)).on("touchmove"+Te,Z).on("dragstart"+Te,Z).on("selectstart"+Te,Z);if(zt==null&&(zt="onselectstart"in le?!1:N(le.style,"userSelect")),zt){var Be=e(le).style,Qe=Be[zt];Be[zt]="none"}return function(_t){if(Ue.on(Te,null),zt&&(Be[zt]=Qe),_t){var dt=function(){Ue.on(Re,null)};Ue.on(Re,function(){Z(),dt()},!0),setTimeout(dt,0)}}}m.mouse=function(le){return Ct(le,X())};var Nt=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function Ct(le,Te){Te.changedTouches&&(Te=Te.changedTouches[0]);var Re=le.ownerSVGElement||le;if(Re.createSVGPoint){var Ue=Re.createSVGPoint();if(Nt<0){var Be=a(le);if(Be.scrollX||Be.scrollY){Re=m.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var Qe=Re[0][0].getScreenCTM();Nt=!(Qe.f||Qe.e),Re.remove()}}return Nt?(Ue.x=Te.pageX,Ue.y=Te.pageY):(Ue.x=Te.clientX,Ue.y=Te.clientY),Ue=Ue.matrixTransform(le.getScreenCTM().inverse()),[Ue.x,Ue.y]}var _t=le.getBoundingClientRect();return[Te.clientX-_t.left-le.clientLeft,Te.clientY-_t.top-le.clientTop]}m.touch=function(le,Te,Re){if(arguments.length<3&&(Re=Te,Te=X().changedTouches),Te){for(var Ue=0,Be=Te.length,Qe;Ue<Be;++Ue)if((Qe=Te[Ue]).identifier===Re)return Ct(le,Qe)}},m.behavior.drag=function(){var le=ne(Be,"drag","dragstart","dragend"),Te=null,Re=Qe(G,m.mouse,a,"mousemove","mouseup"),Ue=Qe(Xe,m.touch,D,"touchmove","touchend");function Be(){this.on("mousedown.drag",Re).on("touchstart.drag",Ue)}function Qe(_t,dt,Rt,Jt,tr){return function(){var rr=this,Er=m.event.target.correspondingElement||m.event.target,qr=rr.parentNode,cn=le.of(rr,arguments),Dr=0,Vr=_t(),Kr=".drag"+(Vr==null?"":"-"+Vr),sn,un=m.select(Rt(Er)).on(Jt+Kr,ia).on(tr+Kr,Ma),Qr=Xt(Er),Gn=dt(qr,Vr);Te?(sn=Te.apply(rr,arguments),sn=[sn.x-Gn[0],sn.y-Gn[1]]):sn=[0,0],cn({type:"dragstart"});function ia(){var la=dt(qr,Vr),Pa,fa;!la||(Pa=la[0]-Gn[0],fa=la[1]-Gn[1],Dr|=Pa|fa,Gn=la,cn({type:"drag",x:la[0]+sn[0],y:la[1]+sn[1],dx:Pa,dy:fa}))}function Ma(){!dt(qr,Vr)||(un.on(Jt+Kr,null).on(tr+Kr,null),Qr(Dr),cn({type:"dragend"}))}}}return Be.origin=function(_t){return arguments.length?(Te=_t,Be):Te},m.rebind(Be,le,"on")};function Xe(){return m.event.changedTouches[0].identifier}m.touches=function(le,Te){return arguments.length<2&&(Te=X().touches),Te?A(Te).map(function(Re){var Ue=Ct(le,Re);return Ue.identifier=Re.identifier,Ue}):[]};var at=1e-6,Ge=at*at,Se=Math.PI,He=2*Se,Ke=He-at,qe=Se/2,Tt=Se/180,mt=180/Se;function At(le,Te,Re){return(Te[0]-le[0])*(Re[1]-le[1])-(Te[1]-le[1])*(Re[0]-le[0])}function Ht(le){return le>1?qe:le<-1?-qe:Math.asin(le)}function It(le){return((le=Math.exp(le))-1/le)/2}function Vt(le){return((le=Math.exp(le))+1/le)/2}function jt(le){return((le=Math.exp(2*le))-1)/(le+1)}var Yt=Math.SQRT2,or=2,Gr=4;m.interpolateZoom=function(le,Te){var Re=le[0],Ue=le[1],Be=le[2],Qe=Te[0],_t=Te[1],dt=Te[2],Rt=Qe-Re,Jt=_t-Ue,tr=Rt*Rt+Jt*Jt,rr,Er;if(tr<Ge)Er=Math.log(dt/Be)/Yt,rr=function(sn){return[Re+sn*Rt,Ue+sn*Jt,Be*Math.exp(Yt*sn*Er)]};else{var qr=Math.sqrt(tr),cn=(dt*dt-Be*Be+Gr*tr)/(2*Be*or*qr),Dr=(dt*dt-Be*Be-Gr*tr)/(2*dt*or*qr),Vr=Math.log(Math.sqrt(cn*cn+1)-cn),Kr=Math.log(Math.sqrt(Dr*Dr+1)-Dr);Er=(Kr-Vr)/Yt,rr=function(sn){var un=sn*Er,Qr=Vt(Vr),Gn=Be/(or*qr)*(Qr*jt(Yt*un+Vr)-It(Vr));return[Re+Gn*Rt,Ue+Gn*Jt,Be*Qr/Vt(Yt*un+Vr)]}}return rr.duration=Er*1e3,rr},m.behavior.zoom=function(){var le={x:0,y:0,k:1},Te,Re,Ue,Be=[960,500],Qe=on,_t=250,dt=0,Rt="mousedown.zoom",Jt="mousemove.zoom",tr="mouseup.zoom",rr,Er="touchstart.zoom",qr,cn=ne(un,"zoomstart","zoom","zoomend"),Dr,Vr,Kr,sn;ot||(ot="onwheel"in T?(Jr=function(){return-m.event.deltaY*(m.event.deltaMode?120:1)},"wheel"):"onmousewheel"in T?(Jr=function(){return m.event.wheelDelta},"mousewheel"):(Jr=function(){return-m.event.detail},"MozMousePixelScroll"));function un(va){va.on(Rt,ri).on(ot+".zoom",_o).on("dblclick.zoom",Hi).on(Er,Ti)}un.event=function(va){va.each(function(){var li=cn.of(this,arguments),Ja=le;ja?m.select(this).transition().each("start.zoom",function(){le=this.__chart__||{x:0,y:0,k:1},fa(li)}).tween("zoom:zoom",function(){var Di=Be[0],fi=Be[1],go=Re?Re[0]:Di/2,oo=Re?Re[1]:fi/2,So=m.interpolateZoom([(go-le.x)/le.k,(oo-le.y)/le.k,Di/le.k],[(go-Ja.x)/Ja.k,(oo-Ja.y)/Ja.k,Di/Ja.k]);return function(ts){var jo=So(ts),rs=Di/jo[2];this.__chart__=le={x:go-jo[0]*rs,y:oo-jo[1]*rs,k:rs},Ga(li)}}).each("interrupt.zoom",function(){Fa(li)}).each("end.zoom",function(){Fa(li)}):(this.__chart__=le,fa(li),Ga(li),Fa(li))})},un.translate=function(va){return arguments.length?(le={x:+va[0],y:+va[1],k:le.k},Pa(),un):[le.x,le.y]},un.scale=function(va){return arguments.length?(le={x:le.x,y:le.y,k:null},ia(+va),Pa(),un):le.k},un.scaleExtent=function(va){return arguments.length?(Qe=va==null?on:[+va[0],+va[1]],un):Qe},un.center=function(va){return arguments.length?(Ue=va&&[+va[0],+va[1]],un):Ue},un.size=function(va){return arguments.length?(Be=va&&[+va[0],+va[1]],un):Be},un.duration=function(va){return arguments.length?(_t=+va,un):_t},un.x=function(va){return arguments.length?(Vr=va,Dr=va.copy(),le={x:0,y:0,k:1},un):Vr},un.y=function(va){return arguments.length?(sn=va,Kr=va.copy(),le={x:0,y:0,k:1},un):sn};function Qr(va){return[(va[0]-le.x)/le.k,(va[1]-le.y)/le.k]}function Gn(va){return[va[0]*le.k+le.x,va[1]*le.k+le.y]}function ia(va){le.k=Math.max(Qe[0],Math.min(Qe[1],va))}function Ma(va,li){li=Gn(li),le.x+=va[0]-li[0],le.y+=va[1]-li[1]}function la(va,li,Ja,Di){va.__chart__={x:le.x,y:le.y,k:le.k},ia(Math.pow(2,Di)),Ma(Re=li,Ja),va=m.select(va),_t>0&&(va=va.transition().duration(_t)),va.call(un.event)}function Pa(){Vr&&Vr.domain(Dr.range().map(function(va){return(va-le.x)/le.k}).map(Dr.invert)),sn&&sn.domain(Kr.range().map(function(va){return(va-le.y)/le.k}).map(Kr.invert))}function fa(va){dt++||va({type:"zoomstart"})}function Ga(va){Pa(),va({type:"zoom",scale:le.k,translate:[le.x,le.y]})}function Fa(va){--dt||(va({type:"zoomend"}),Re=null)}function ri(){var va=this,li=cn.of(va,arguments),Ja=0,Di=m.select(a(va)).on(Jt,oo).on(tr,So),fi=Qr(m.mouse(va)),go=Xt(va);In.call(va),fa(li);function oo(){Ja=1,Ma(m.mouse(va),fi),Ga(li)}function So(){Di.on(Jt,null).on(tr,null),go(Ja),Fa(li)}}function Ti(){var va=this,li=cn.of(va,arguments),Ja={},Di=0,fi,go=".zoom-"+m.event.changedTouches[0].identifier,oo="touchmove"+go,So="touchend"+go,ts=[],jo=m.select(va),rs=Xt(va);Xi(),fa(li),jo.on(Rt,null).on(Er,Xi);function Qi(){var ko=m.touches(va);return fi=le.k,ko.forEach(function(co){co.identifier in Ja&&(Ja[co.identifier]=Qr(co))}),ko}function Xi(){var ko=m.event.target;m.select(ko).on(oo,Oa).on(So,Qa),ts.push(ko);for(var co=m.event.changedTouches,Go=0,eo=co.length;Go<eo;++Go)Ja[co[Go].identifier]=null;var ns=Qi(),Ps=Date.now();if(ns.length===1){if(Ps-qr<500){var fu=ns[0];la(va,fu,Ja[fu.identifier],Math.floor(Math.log(le.k)/Math.LN2)+1),Z()}qr=Ps}else if(ns.length>1){var fu=ns[0],to=ns[1],sf=fu[0]-to[0],Wl=fu[1]-to[1];Di=sf*sf+Wl*Wl}}function Oa(){var ko=m.touches(va),co,Go,eo,ns;In.call(va);for(var Ps=0,fu=ko.length;Ps<fu;++Ps,ns=null)if(eo=ko[Ps],ns=Ja[eo.identifier]){if(Go)break;co=eo,Go=ns}if(ns){var to=(to=eo[0]-co[0])*to+(to=eo[1]-co[1])*to,sf=Di&&Math.sqrt(to/Di);co=[(co[0]+eo[0])/2,(co[1]+eo[1])/2],Go=[(Go[0]+ns[0])/2,(Go[1]+ns[1])/2],ia(sf*fi)}qr=null,Ma(co,Go),Ga(li)}function Qa(){if(m.event.touches.length){for(var ko=m.event.changedTouches,co=0,Go=ko.length;co<Go;++co)delete Ja[ko[co].identifier];for(var eo in Ja)return void Qi()}m.selectAll(ts).on(go,null),jo.on(Rt,ri).on(Er,Ti),rs(),Fa(li)}}function _o(){var va=cn.of(this,arguments);rr?clearTimeout(rr):(In.call(this),Te=Qr(Re=Ue||m.mouse(this)),fa(va)),rr=setTimeout(function(){rr=null,Fa(va)},50),Z(),ia(Math.pow(2,Jr()*.002)*le.k),Ma(Re,Te),Ga(va)}function Hi(){var va=m.mouse(this),li=Math.log(le.k)/Math.LN2;la(this,va,Qr(va),m.event.shiftKey?Math.ceil(li)-1:Math.floor(li)+1)}return m.rebind(un,cn,"on")};var on=[0,1/0],Jr,ot;m.color=er;function er(){}er.prototype.toString=function(){return this.rgb()+""},m.hsl=Kt;function Kt(le,Te,Re){return this instanceof Kt?(this.h=+le,this.s=+Te,void(this.l=+Re)):arguments.length<2?le instanceof Kt?new Kt(le.h,le.s,le.l):Zr(""+le,ir,Kt):new Kt(le,Te,Re)}var fr=Kt.prototype=new er;fr.brighter=function(le){return le=Math.pow(.7,arguments.length?le:1),new Kt(this.h,this.s,this.l/le)},fr.darker=function(le){return le=Math.pow(.7,arguments.length?le:1),new Kt(this.h,this.s,le*this.l)},fr.rgb=function(){return Ar(this.h,this.s,this.l)};function Ar(le,Te,Re){var Ue,Be;le=isNaN(le)?0:(le%=360)<0?le+360:le,Te=isNaN(Te)||Te<0?0:Te>1?1:Te,Re=Re<0?0:Re>1?1:Re,Be=Re<=.5?Re*(1+Te):Re+Te-Re*Te,Ue=2*Re-Be;function Qe(dt){return dt>360?dt-=360:dt<0&&(dt+=360),dt<60?Ue+(Be-Ue)*dt/60:dt<180?Be:dt<240?Ue+(Be-Ue)*(240-dt)/60:Ue}function _t(dt){return Math.round(Qe(dt)*255)}return new Wt(_t(le+120),_t(le),_t(le-120))}m.hcl=et;function et(le,Te,Re){return this instanceof et?(this.h=+le,this.c=+Te,void(this.l=+Re)):arguments.length<2?le instanceof et?new et(le.h,le.c,le.l):le instanceof ct?vt(le.l,le.a,le.b):vt((le=xr((le=m.rgb(le)).r,le.g,le.b)).l,le.a,le.b):new et(le,Te,Re)}var $e=et.prototype=new er;$e.brighter=function(le){return new et(this.h,this.c,Math.min(100,this.l+Mt*(arguments.length?le:1)))},$e.darker=function(le){return new et(this.h,this.c,Math.max(0,this.l-Mt*(arguments.length?le:1)))},$e.rgb=function(){return st(this.h,this.c,this.l).rgb()};function st(le,Te,Re){return isNaN(le)&&(le=0),isNaN(Te)&&(Te=0),new ct(Re,Math.cos(le*=Tt)*Te,Math.sin(le)*Te)}m.lab=ct;function ct(le,Te,Re){return this instanceof ct?(this.l=+le,this.a=+Te,void(this.b=+Re)):arguments.length<2?le instanceof ct?new ct(le.l,le.a,le.b):le instanceof et?st(le.h,le.c,le.l):xr((le=Wt(le)).r,le.g,le.b):new ct(le,Te,Re)}var Mt=18,Ut=.95047,Pe=1,Ee=1.08883,it=ct.prototype=new er;it.brighter=function(le){return new ct(Math.min(100,this.l+Mt*(arguments.length?le:1)),this.a,this.b)},it.darker=function(le){return new ct(Math.max(0,this.l-Mt*(arguments.length?le:1)),this.a,this.b)},it.rgb=function(){return ut(this.l,this.a,this.b)};function ut(le,Te,Re){var Ue=(le+16)/116,Be=Ue+Te/500,Qe=Ue-Re/200;return Be=St(Be)*Ut,Ue=St(Ue)*Pe,Qe=St(Qe)*Ee,new Wt(Pt(3.2404542*Be-1.5371385*Ue-.4985314*Qe),Pt(-.969266*Be+1.8760108*Ue+.041556*Qe),Pt(.0556434*Be-.2040259*Ue+1.0572252*Qe))}function vt(le,Te,Re){return le>0?new et(Math.atan2(Re,Te)*mt,Math.sqrt(Te*Te+Re*Re),le):new et(NaN,NaN,le)}function St(le){return le>.206893034?le*le*le:(le-4/29)/7.787037}function yt(le){return le>.008856?Math.pow(le,1/3):7.787037*le+4/29}function Pt(le){return Math.round(255*(le<=.00304?12.92*le:1.055*Math.pow(le,1/2.4)-.055))}m.rgb=Wt;function Wt(le,Te,Re){return this instanceof Wt?(this.r=~~le,this.g=~~Te,void(this.b=~~Re)):arguments.length<2?le instanceof Wt?new Wt(le.r,le.g,le.b):Zr(""+le,Wt,Ar):new Wt(le,Te,Re)}function ar(le){return new Wt(le>>16,le>>8&255,le&255)}function kr(le){return ar(le)+""}var wr=Wt.prototype=new er;wr.brighter=function(le){le=Math.pow(.7,arguments.length?le:1);var Te=this.r,Re=this.g,Ue=this.b,Be=30;return!Te&&!Re&&!Ue?new Wt(Be,Be,Be):(Te&&Te<Be&&(Te=Be),Re&&Re<Be&&(Re=Be),Ue&&Ue<Be&&(Ue=Be),new Wt(Math.min(255,Te/le),Math.min(255,Re/le),Math.min(255,Ue/le)))},wr.darker=function(le){return le=Math.pow(.7,arguments.length?le:1),new Wt(le*this.r,le*this.g,le*this.b)},wr.hsl=function(){return ir(this.r,this.g,this.b)},wr.toString=function(){return"#"+Sr(this.r)+Sr(this.g)+Sr(this.b)};function Sr(le){return le<16?"0"+Math.max(0,le).toString(16):Math.min(255,le).toString(16)}function Zr(le,Te,Re){var Ue=0,Be=0,Qe=0,_t,dt,Rt;if(_t=/([a-z]+)\((.*)\)/.exec(le=le.toLowerCase()),_t)switch(dt=_t[2].split(","),_t[1]){case"hsl":return Re(parseFloat(dt[0]),parseFloat(dt[1])/100,parseFloat(dt[2])/100);case"rgb":return Te(Br(dt[0]),Br(dt[1]),Br(dt[2]))}return(Rt=Cr.get(le))?Te(Rt.r,Rt.g,Rt.b):(le!=null&&le.charAt(0)==="#"&&!isNaN(Rt=parseInt(le.slice(1),16))&&(le.length===4?(Ue=(Rt&3840)>>4,Ue=Ue>>4|Ue,Be=Rt&240,Be=Be>>4|Be,Qe=Rt&15,Qe=Qe<<4|Qe):le.length===7&&(Ue=(Rt&16711680)>>16,Be=(Rt&65280)>>8,Qe=Rt&255)),Te(Ue,Be,Qe))}function ir(le,Te,Re){var Ue=Math.min(le/=255,Te/=255,Re/=255),Be=Math.max(le,Te,Re),Qe=Be-Ue,_t,dt,Rt=(Be+Ue)/2;return Qe?(dt=Rt<.5?Qe/(Be+Ue):Qe/(2-Be-Ue),le==Be?_t=(Te-Re)/Qe+(Te<Re?6:0):Te==Be?_t=(Re-le)/Qe+2:_t=(le-Te)/Qe+4,_t*=60):(_t=NaN,dt=Rt>0&&Rt<1?0:_t),new Kt(_t,dt,Rt)}function xr(le,Te,Re){le=Rr(le),Te=Rr(Te),Re=Rr(Re);var Ue=yt((.4124564*le+.3575761*Te+.1804375*Re)/Ut),Be=yt((.2126729*le+.7151522*Te+.072175*Re)/Pe),Qe=yt((.0193339*le+.119192*Te+.9503041*Re)/Ee);return ct(116*Be-16,500*(Ue-Be),200*(Be-Qe))}function Rr(le){return(le/=255)<=.04045?le/12.92:Math.pow((le+.055)/1.055,2.4)}function Br(le){var Te=parseFloat(le);return le.charAt(le.length-1)==="%"?Math.round(Te*2.55):Te}var Cr=m.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Cr.forEach(function(le,Te){Cr.set(le,ar(Te))});function nt(le){return typeof le=="function"?le:function(){return le}}m.functor=nt,m.xhr=Dt(D);function Dt(le){return function(Te,Re,Ue){return arguments.length===2&&typeof Re=="function"&&(Ue=Re,Re=null),Zt(Te,Re,le,Ue)}}function Zt(le,Te,Re,Ue){var Be={},Qe=m.dispatch("beforesend","progress","load","error"),_t={},dt=new XMLHttpRequest,Rt=null;self.XDomainRequest&&!("withCredentials"in dt)&&/^(http(s)?:)?\/\//.test(le)&&(dt=new XDomainRequest),"onload"in dt?dt.onload=dt.onerror=Jt:dt.onreadystatechange=function(){dt.readyState>3&&Jt()};function Jt(){var tr=dt.status,rr;if(!tr&&zr(dt)||tr>=200&&tr<300||tr===304){try{rr=Re.call(Be,dt)}catch(Er){Qe.error.call(Be,Er);return}Qe.load.call(Be,rr)}else Qe.error.call(Be,dt)}return dt.onprogress=function(tr){var rr=m.event;m.event=tr;try{Qe.progress.call(Be,dt)}finally{m.event=rr}},Be.header=function(tr,rr){return tr=(tr+"").toLowerCase(),arguments.length<2?_t[tr]:(rr==null?delete _t[tr]:_t[tr]=rr+"",Be)},Be.mimeType=function(tr){return arguments.length?(Te=tr==null?null:tr+"",Be):Te},Be.responseType=function(tr){return arguments.length?(Rt=tr,Be):Rt},Be.response=function(tr){return Re=tr,Be},["get","post"].forEach(function(tr){Be[tr]=function(){return Be.send.apply(Be,[tr].concat(A(arguments)))}}),Be.send=function(tr,rr,Er){if(arguments.length===2&&typeof rr=="function"&&(Er=rr,rr=null),dt.open(tr,le,!0),Te!=null&&!("accept"in _t)&&(_t.accept=Te+",*/*"),dt.setRequestHeader)for(var qr in _t)dt.setRequestHeader(qr,_t[qr]);return Te!=null&&dt.overrideMimeType&&dt.overrideMimeType(Te),Rt!=null&&(dt.responseType=Rt),Er!=null&&Be.on("error",Er).on("load",function(cn){Er(null,cn)}),Qe.beforesend.call(Be,dt),dt.send(rr==null?null:rr),Be},Be.abort=function(){return dt.abort(),Be},m.rebind(Be,Qe,"on"),Ue==null?Be:Be.get(sr(Ue))}function sr(le){return le.length===1?function(Te,Re){le(Te==null?Re:null)}:le}function zr(le){var Te=le.responseType;return Te&&Te!=="text"?le.response:le.responseText}m.dsv=function(le,Te){var Re=new RegExp('["'+le+`
]`),Ue=le.charCodeAt(0);function Be(Jt,tr,rr){arguments.length<3&&(rr=tr,tr=null);var Er=Zt(Jt,Te,tr==null?Qe:_t(tr),rr);return Er.row=function(qr){return arguments.length?Er.response((tr=qr)==null?Qe:_t(qr)):tr},Er}function Qe(Jt){return Be.parse(Jt.responseText)}function _t(Jt){return function(tr){return Be.parse(tr.responseText,Jt)}}Be.parse=function(Jt,tr){var rr;return Be.parseRows(Jt,function(Er,qr){if(rr)return rr(Er,qr-1);var cn=function(Dr){for(var Vr={},Kr=Er.length,sn=0;sn<Kr;++sn)Vr[Er[sn]]=Dr[sn];return Vr};rr=tr?function(Dr,Vr){return tr(cn(Dr),Vr)}:cn})},Be.parseRows=function(Jt,tr){var rr={},Er={},qr=[],cn=Jt.length,Dr=0,Vr=0,Kr,sn;function un(){if(Dr>=cn)return Er;if(sn)return sn=!1,rr;var Gn=Dr;if(Jt.charCodeAt(Gn)===34){for(var ia=Gn;ia++<cn;)if(Jt.charCodeAt(ia)===34){if(Jt.charCodeAt(ia+1)!==34)break;++ia}Dr=ia+2;var Ma=Jt.charCodeAt(ia+1);return Ma===13?(sn=!0,Jt.charCodeAt(ia+2)===10&&++Dr):Ma===10&&(sn=!0),Jt.slice(Gn+1,ia).replace(/""/g,'"')}for(;Dr<cn;){var Ma=Jt.charCodeAt(Dr++),la=1;if(Ma===10)sn=!0;else if(Ma===13)sn=!0,Jt.charCodeAt(Dr)===10&&(++Dr,++la);else if(Ma!==Ue)continue;return Jt.slice(Gn,Dr-la)}return Jt.slice(Gn)}for(;(Kr=un())!==Er;){for(var Qr=[];Kr!==rr&&Kr!==Er;)Qr.push(Kr),Kr=un();tr&&(Qr=tr(Qr,Vr++))==null||qr.push(Qr)}return qr},Be.format=function(Jt){if(Array.isArray(Jt[0]))return Be.formatRows(Jt);var tr=new I,rr=[];return Jt.forEach(function(Er){for(var qr in Er)tr.has(qr)||rr.push(tr.add(qr))}),[rr.map(Rt).join(le)].concat(Jt.map(function(Er){return rr.map(function(qr){return Rt(Er[qr])}).join(le)})).join(`
`)},Be.formatRows=function(Jt){return Jt.map(dt).join(`
`)};function dt(Jt){return Jt.map(Rt).join(le)}function Rt(Jt){return Re.test(Jt)?'"'+Jt.replace(/\"/g,'""')+'"':Jt}return Be},m.csv=m.dsv(",","text/csv"),m.tsv=m.dsv("	","text/tab-separated-values");var Ur,Lr,Tr,Wr,An=this[N(this,"requestAnimationFrame")]||function(le){setTimeout(le,17)};m.timer=function(){vn.apply(this,arguments)};function vn(le,Te,Re){var Ue=arguments.length;Ue<2&&(Te=0),Ue<3&&(Re=Date.now());var Be=Re+Te,Qe={c:le,t:Be,n:null};return Lr?Lr.n=Qe:Ur=Qe,Lr=Qe,Tr||(Wr=clearTimeout(Wr),Tr=1,An(Un)),Qe}function Un(){var le=Ln(),Te=Zn()-le;Te>24?(isFinite(Te)&&(clearTimeout(Wr),Wr=setTimeout(Un,Te)),Tr=0):(Tr=1,An(Un))}m.timer.flush=function(){Ln(),Zn()};function Ln(){for(var le=Date.now(),Te=Ur;Te;)le>=Te.t&&Te.c(le-Te.t)&&(Te.c=null),Te=Te.n;return le}function Zn(){for(var le,Te=Ur,Re=1/0;Te;)Te.c?(Te.t<Re&&(Re=Te.t),Te=(le=Te).n):Te=le?le.n=Te.n:Ur=Te.n;return Lr=le,Re}m.round=function(le,Te){return Te?Math.round(le*(Te=Math.pow(10,Te)))/Te:Math.round(le)},m.geom={};function Wn(le){return le[0]}function ya(le){return le[1]}m.geom.hull=function(le){var Te=Wn,Re=ya;if(arguments.length)return Ue(le);function Ue(Be){if(Be.length<3)return[];var Qe=nt(Te),_t=nt(Re),dt,Rt=Be.length,Jt=[],tr=[];for(dt=0;dt<Rt;dt++)Jt.push([+Qe.call(this,Be[dt],dt),+_t.call(this,Be[dt],dt),dt]);for(Jt.sort(di),dt=0;dt<Rt;dt++)tr.push([Jt[dt][0],-Jt[dt][1]]);var rr=ka(Jt),Er=ka(tr),qr=Er[0]===rr[0],cn=Er[Er.length-1]===rr[rr.length-1],Dr=[];for(dt=rr.length-1;dt>=0;--dt)Dr.push(Be[Jt[rr[dt]][2]]);for(dt=+qr;dt<Er.length-cn;++dt)Dr.push(Be[Jt[Er[dt]][2]]);return Dr}return Ue.x=function(Be){return arguments.length?(Te=Be,Ue):Te},Ue.y=function(Be){return arguments.length?(Re=Be,Ue):Re},Ue};function ka(le){for(var Te=le.length,Re=[0,1],Ue=2,Be=2;Be<Te;Be++){for(;Ue>1&&At(le[Re[Ue-2]],le[Re[Ue-1]],le[Be])<=0;)--Ue;Re[Ue++]=Be}return Re.slice(0,Ue)}function di(le,Te){return le[0]-Te[0]||le[1]-Te[1]}m.geom.polygon=function(le){return Q(le,Xa),le};var Xa=m.geom.polygon.prototype=[];Xa.area=function(){for(var le=-1,Te=this.length,Re,Ue=this[Te-1],Be=0;++le<Te;)Re=Ue,Ue=this[le],Be+=Re[1]*Ue[0]-Re[0]*Ue[1];return Be*.5},Xa.centroid=function(le){var Te=-1,Re=this.length,Ue=0,Be=0,Qe,_t=this[Re-1],dt;for(arguments.length||(le=-1/(6*this.area()));++Te<Re;)Qe=_t,_t=this[Te],dt=Qe[0]*_t[1]-_t[0]*Qe[1],Ue+=(Qe[0]+_t[0])*dt,Be+=(Qe[1]+_t[1])*dt;return[Ue*le,Be*le]},Xa.clip=function(le){for(var Te,Re=Mr(le),Ue=-1,Be=this.length-Mr(this),Qe,_t,dt=this[Be-1],Rt,Jt,tr;++Ue<Be;){for(Te=le.slice(),le.length=0,Rt=this[Ue],Jt=Te[(_t=Te.length-Re)-1],Qe=-1;++Qe<_t;)tr=Te[Qe],$a(tr,dt,Rt)?($a(Jt,dt,Rt)||le.push(Ka(Jt,tr,dt,Rt)),le.push(tr)):$a(Jt,dt,Rt)&&le.push(Ka(Jt,tr,dt,Rt)),Jt=tr;Re&&le.push(le[0]),dt=Rt}return le};function $a(le,Te,Re){return(Re[0]-Te[0])*(le[1]-Te[1])<(Re[1]-Te[1])*(le[0]-Te[0])}function Ka(le,Te,Re,Ue){var Be=le[0],Qe=Re[0],_t=Te[0]-Be,dt=Ue[0]-Qe,Rt=le[1],Jt=Re[1],tr=Te[1]-Rt,rr=Ue[1]-Jt,Er=(dt*(Rt-Jt)-rr*(Be-Qe))/(rr*_t-dt*tr);return[Be+Er*_t,Rt+Er*tr]}function Mr(le){var Te=le[0],Re=le[le.length-1];return!(Te[0]-Re[0]||Te[1]-Re[1])}var gn,hn,Sn,Jn=[],ha,na,Fn=[];function Kn(){ca(this),this.edge=this.site=this.circle=null}function Ya(le){var Te=Jn.pop()||new Kn;return Te.site=le,Te}function hi(le){br(le),Sn.remove(le),Jn.push(le),ca(le)}function Gt(le){var Te=le.circle,Re=Te.x,Ue=Te.cy,Be={x:Re,y:Ue},Qe=le.P,_t=le.N,dt=[le];hi(le);for(var Rt=Qe;Rt.circle&&l(Re-Rt.circle.x)<at&&l(Ue-Rt.circle.cy)<at;)Qe=Rt.P,dt.unshift(Rt),hi(Rt),Rt=Qe;dt.unshift(Rt),br(Rt);for(var Jt=_t;Jt.circle&&l(Re-Jt.circle.x)<at&&l(Ue-Jt.circle.cy)<at;)_t=Jt.N,dt.push(Jt),hi(Jt),Jt=_t;dt.push(Jt),br(Jt);var tr=dt.length,rr;for(rr=1;rr<tr;++rr)Jt=dt[rr],Rt=dt[rr-1],sa(Jt.edge,Rt.site,Jt.site,Be);Rt=dt[0],Jt=dt[tr-1],Jt.edge=Tn(Rt.site,Jt.site,null,Be),mr(Rt),mr(Jt)}function pr(le){for(var Te=le.x,Re=le.y,Ue,Be,Qe,_t,dt=Sn._;dt;)if(Qe=an(dt,Re)-Te,Qe>at)dt=dt.L;else if(_t=Te-dn(dt,Re),_t>at){if(!dt.R){Ue=dt;break}dt=dt.R}else{Qe>-at?(Ue=dt.P,Be=dt):_t>-at?(Ue=dt,Be=dt.N):Ue=Be=dt;break}var Rt=Ya(le);if(Sn.insert(Ue,Rt),!(!Ue&&!Be)){if(Ue===Be){br(Ue),Be=Ya(Ue.site),Sn.insert(Rt,Be),Rt.edge=Be.edge=Tn(Ue.site,Rt.site),mr(Ue),mr(Be);return}if(!Be){Rt.edge=Tn(Ue.site,Rt.site);return}br(Ue),br(Be);var Jt=Ue.site,tr=Jt.x,rr=Jt.y,Er=le.x-tr,qr=le.y-rr,cn=Be.site,Dr=cn.x-tr,Vr=cn.y-rr,Kr=2*(Er*Vr-qr*Dr),sn=Er*Er+qr*qr,un=Dr*Dr+Vr*Vr,Qr={x:(Vr*sn-qr*un)/Kr+tr,y:(Er*un-Dr*sn)/Kr+rr};sa(Be.edge,Jt,cn,Qr),Rt.edge=Tn(Jt,le,null,Qr),Be.edge=Tn(le,cn,null,Qr),mr(Ue),mr(Be)}}function an(le,Te){var Re=le.site,Ue=Re.x,Be=Re.y,Qe=Be-Te;if(!Qe)return Ue;var _t=le.P;if(!_t)return-1/0;Re=_t.site;var dt=Re.x,Rt=Re.y,Jt=Rt-Te;if(!Jt)return dt;var tr=dt-Ue,rr=1/Qe-1/Jt,Er=tr/Jt;return rr?(-Er+Math.sqrt(Er*Er-2*rr*(tr*tr/(-2*Jt)-Rt+Jt/2+Be-Qe/2)))/rr+Ue:(Ue+dt)/2}function dn(le,Te){var Re=le.N;if(Re)return an(Re,Te);var Ue=le.site;return Ue.y===Te?Ue.x:1/0}function rn(le){this.site=le,this.edges=[]}rn.prototype.prepare=function(){for(var le=this.edges,Te=le.length,Re;Te--;)Re=le[Te].edge,(!Re.b||!Re.a)&&le.splice(Te,1);return le.sort(_n),le.length};function Mn(le){for(var Te=le[0][0],Re=le[1][0],Ue=le[0][1],Be=le[1][1],Qe,_t,dt,Rt,Jt=hn,tr=Jt.length,rr,Er,qr,cn,Dr,Vr;tr--;)if(rr=Jt[tr],!(!rr||!rr.prepare()))for(qr=rr.edges,cn=qr.length,Er=0;Er<cn;)Vr=qr[Er].end(),dt=Vr.x,Rt=Vr.y,Dr=qr[++Er%cn].start(),Qe=Dr.x,_t=Dr.y,(l(dt-Qe)>at||l(Rt-_t)>at)&&(qr.splice(Er,0,new ma(Qn(rr.site,Vr,l(dt-Te)<at&&Be-Rt>at?{x:Te,y:l(Qe-Te)<at?_t:Be}:l(Rt-Be)<at&&Re-dt>at?{x:l(_t-Be)<at?Qe:Re,y:Be}:l(dt-Re)<at&&Rt-Ue>at?{x:Re,y:l(Qe-Re)<at?_t:Ue}:l(Rt-Ue)<at&&dt-Te>at?{x:l(_t-Ue)<at?Qe:Te,y:Ue}:null),rr.site,null)),++cn)}function _n(le,Te){return Te.angle-le.angle}function fn(){ca(this),this.x=this.y=this.arc=this.site=this.cy=null}function mr(le){var Te=le.P,Re=le.N;if(!(!Te||!Re)){var Ue=Te.site,Be=le.site,Qe=Re.site;if(Ue!==Qe){var _t=Be.x,dt=Be.y,Rt=Ue.x-_t,Jt=Ue.y-dt,tr=Qe.x-_t,Vr=Qe.y-dt,rr=2*(Rt*Vr-Jt*tr);if(!(rr>=-Ge)){var Er=Rt*Rt+Jt*Jt,qr=tr*tr+Vr*Vr,cn=(Vr*Er-Jt*qr)/rr,Dr=(Rt*qr-tr*Er)/rr,Vr=Dr+dt,Kr=Fn.pop()||new fn;Kr.arc=le,Kr.site=Be,Kr.x=cn+_t,Kr.y=Vr+Math.sqrt(cn*cn+Dr*Dr),Kr.cy=Vr,le.circle=Kr;for(var sn=null,un=na._;un;)if(Kr.y<un.y||Kr.y===un.y&&Kr.x<=un.x)if(un.L)un=un.L;else{sn=un.P;break}else if(un.R)un=un.R;else{sn=un;break}na.insert(sn,Kr),sn||(ha=Kr)}}}}function br(le){var Te=le.circle;Te&&(Te.P||(ha=Te.N),na.remove(Te),Fn.push(Te),ca(Te),le.circle=null)}function Nr(le,Te,Re,Ue){return function(Be){var Qe=Be.a,_t=Be.b,dt=Qe.x,Rt=Qe.y,Jt=_t.x,tr=_t.y,rr=0,Er=1,qr=Jt-dt,cn=tr-Rt,Dr;if(Dr=le-dt,!(!qr&&Dr>0)){if(Dr/=qr,qr<0){if(Dr<rr)return;Dr<Er&&(Er=Dr)}else if(qr>0){if(Dr>Er)return;Dr>rr&&(rr=Dr)}if(Dr=Re-dt,!(!qr&&Dr<0)){if(Dr/=qr,qr<0){if(Dr>Er)return;Dr>rr&&(rr=Dr)}else if(qr>0){if(Dr<rr)return;Dr<Er&&(Er=Dr)}if(Dr=Te-Rt,!(!cn&&Dr>0)){if(Dr/=cn,cn<0){if(Dr<rr)return;Dr<Er&&(Er=Dr)}else if(cn>0){if(Dr>Er)return;Dr>rr&&(rr=Dr)}if(Dr=Ue-Rt,!(!cn&&Dr<0)){if(Dr/=cn,cn<0){if(Dr>Er)return;Dr>rr&&(rr=Dr)}else if(cn>0){if(Dr<rr)return;Dr<Er&&(Er=Dr)}return rr>0&&(Be.a={x:dt+rr*qr,y:Rt+rr*cn}),Er<1&&(Be.b={x:dt+Er*qr,y:Rt+Er*cn}),Be}}}}}}function mn(le){for(var Te=gn,Re=Nr(le[0][0],le[0][1],le[1][0],le[1][1]),Ue=Te.length,Be;Ue--;)Be=Te[Ue],(!Bn(Be,le)||!Re(Be)||l(Be.a.x-Be.b.x)<at&&l(Be.a.y-Be.b.y)<at)&&(Be.a=Be.b=null,Te.splice(Ue,1))}function Bn(le,Te){var Re=le.b;if(Re)return!0;var Ue=le.a,Be=Te[0][0],Qe=Te[1][0],_t=Te[0][1],dt=Te[1][1],Rt=le.l,Jt=le.r,tr=Rt.x,rr=Rt.y,Er=Jt.x,qr=Jt.y,cn=(tr+Er)/2,Dr=(rr+qr)/2,Vr,Kr;if(qr===rr){if(cn<Be||cn>=Qe)return;if(tr>Er){if(!Ue)Ue={x:cn,y:_t};else if(Ue.y>=dt)return;Re={x:cn,y:dt}}else{if(!Ue)Ue={x:cn,y:dt};else if(Ue.y<_t)return;Re={x:cn,y:_t}}}else if(Vr=(tr-Er)/(qr-rr),Kr=Dr-Vr*cn,Vr<-1||Vr>1)if(tr>Er){if(!Ue)Ue={x:(_t-Kr)/Vr,y:_t};else if(Ue.y>=dt)return;Re={x:(dt-Kr)/Vr,y:dt}}else{if(!Ue)Ue={x:(dt-Kr)/Vr,y:dt};else if(Ue.y<_t)return;Re={x:(_t-Kr)/Vr,y:_t}}else if(rr<qr){if(!Ue)Ue={x:Be,y:Vr*Be+Kr};else if(Ue.x>=Qe)return;Re={x:Qe,y:Vr*Qe+Kr}}else{if(!Ue)Ue={x:Qe,y:Vr*Qe+Kr};else if(Ue.x<Be)return;Re={x:Be,y:Vr*Be+Kr}}return le.a=Ue,le.b=Re,!0}function aa(le,Te){this.l=le,this.r=Te,this.a=this.b=null}function Tn(le,Te,Re,Ue){var Be=new aa(le,Te);return gn.push(Be),Re&&sa(Be,le,Te,Re),Ue&&sa(Be,Te,le,Ue),hn[le.i].edges.push(new ma(Be,le,Te)),hn[Te.i].edges.push(new ma(Be,Te,le)),Be}function Qn(le,Te,Re){var Ue=new aa(le,null);return Ue.a=Te,Ue.b=Re,gn.push(Ue),Ue}function sa(le,Te,Re,Ue){!le.a&&!le.b?(le.a=Ue,le.l=Te,le.r=Re):le.l===Re?le.b=Ue:le.a=Ue}function ma(le,Te,Re){var Ue=le.a,Be=le.b;this.edge=le,this.site=Te,this.angle=Re?Math.atan2(Re.y-Te.y,Re.x-Te.x):le.l===Te?Math.atan2(Be.x-Ue.x,Ue.y-Be.y):Math.atan2(Ue.x-Be.x,Be.y-Ue.y)}ma.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};function wa(){this._=null}function ca(le){le.U=le.C=le.L=le.R=le.P=le.N=null}wa.prototype={insert:function(le,Te){var Re,Ue,Be;if(le){if(Te.P=le,Te.N=le.N,le.N&&(le.N.P=Te),le.N=Te,le.R){for(le=le.R;le.L;)le=le.L;le.L=Te}else le.R=Te;Re=le}else this._?(le=Wo(this._),Te.P=null,Te.N=le,le.P=le.L=Te,Re=le):(Te.P=Te.N=null,this._=Te,Re=null);for(Te.L=Te.R=null,Te.U=Re,Te.C=!0,le=Te;Re&&Re.C;)Ue=Re.U,Re===Ue.L?(Be=Ue.R,Be&&Be.C?(Re.C=Be.C=!1,Ue.C=!0,le=Ue):(le===Re.R&&(Ca(this,Re),le=Re,Re=le.U),Re.C=!1,Ue.C=!0,To(this,Ue))):(Be=Ue.L,Be&&Be.C?(Re.C=Be.C=!1,Ue.C=!0,le=Ue):(le===Re.L&&(To(this,Re),le=Re,Re=le.U),Re.C=!1,Ue.C=!0,Ca(this,Ue))),Re=le.U;this._.C=!1},remove:function(le){le.N&&(le.N.P=le.P),le.P&&(le.P.N=le.N),le.N=le.P=null;var Te=le.U,Re,Ue=le.L,Be=le.R,Qe,_t;if(Ue?Be?Qe=Wo(Be):Qe=Ue:Qe=Be,Te?Te.L===le?Te.L=Qe:Te.R=Qe:this._=Qe,Ue&&Be?(_t=Qe.C,Qe.C=le.C,Qe.L=Ue,Ue.U=Qe,Qe!==Be?(Te=Qe.U,Qe.U=le.U,le=Qe.R,Te.L=le,Qe.R=Be,Be.U=Qe):(Qe.U=Te,Te=Qe,le=Qe.R)):(_t=le.C,le=Qe),le&&(le.U=Te),!_t){if(le&&le.C){le.C=!1;return}do{if(le===this._)break;if(le===Te.L){if(Re=Te.R,Re.C&&(Re.C=!1,Te.C=!0,Ca(this,Te),Re=Te.R),Re.L&&Re.L.C||Re.R&&Re.R.C){(!Re.R||!Re.R.C)&&(Re.L.C=!1,Re.C=!0,To(this,Re),Re=Te.R),Re.C=Te.C,Te.C=Re.R.C=!1,Ca(this,Te),le=this._;break}}else if(Re=Te.L,Re.C&&(Re.C=!1,Te.C=!0,To(this,Te),Re=Te.L),Re.L&&Re.L.C||Re.R&&Re.R.C){(!Re.L||!Re.L.C)&&(Re.R.C=!1,Re.C=!0,Ca(this,Re),Re=Te.L),Re.C=Te.C,Te.C=Re.L.C=!1,To(this,Te),le=this._;break}Re.C=!0,le=Te,Te=Te.U}while(!le.C);le&&(le.C=!1)}}};function Ca(le,Te){var Re=Te,Ue=Te.R,Be=Re.U;Be?Be.L===Re?Be.L=Ue:Be.R=Ue:le._=Ue,Ue.U=Be,Re.U=Ue,Re.R=Ue.L,Re.R&&(Re.R.U=Re),Ue.L=Re}function To(le,Te){var Re=Te,Ue=Te.L,Be=Re.U;Be?Be.L===Re?Be.L=Ue:Be.R=Ue:le._=Ue,Ue.U=Be,Re.U=Ue,Re.L=Ue.R,Re.L&&(Re.L.U=Re),Ue.R=Re}function Wo(le){for(;le.L;)le=le.L;return le}function is(le,Te){var Re=le.sort(_l).pop(),Ue,Be,Qe;for(gn=[],hn=new Array(le.length),Sn=new wa,na=new wa;;)if(Qe=ha,Re&&(!Qe||Re.y<Qe.y||Re.y===Qe.y&&Re.x<Qe.x))(Re.x!==Ue||Re.y!==Be)&&(hn[Re.i]=new rn(Re),pr(Re),Ue=Re.x,Be=Re.y),Re=le.pop();else if(Qe)Gt(Qe.arc);else break;Te&&(mn(Te),Mn(Te));var _t={cells:hn,edges:gn};return Sn=na=gn=hn=null,_t}function _l(le,Te){return Te.y-le.y||Te.x-le.x}m.geom.voronoi=function(le){var Te=Wn,Re=ya,Ue=Te,Be=Re,Qe=Fl;if(le)return _t(le);function _t(Rt){var Jt=new Array(Rt.length),tr=Qe[0][0],rr=Qe[0][1],Er=Qe[1][0],qr=Qe[1][1];return is(dt(Rt),Qe).cells.forEach(function(cn,Dr){var Vr=cn.edges,Kr=cn.site,sn=Jt[Dr]=Vr.length?Vr.map(function(un){var Qr=un.start();return[Qr.x,Qr.y]}):Kr.x>=tr&&Kr.x<=Er&&Kr.y>=rr&&Kr.y<=qr?[[tr,qr],[Er,qr],[Er,rr],[tr,rr]]:[];sn.point=Rt[Dr]}),Jt}function dt(Rt){return Rt.map(function(Jt,tr){return{x:Math.round(Ue(Jt,tr)/at)*at,y:Math.round(Be(Jt,tr)/at)*at,i:tr}})}return _t.links=function(Rt){return is(dt(Rt)).edges.filter(function(Jt){return Jt.l&&Jt.r}).map(function(Jt){return{source:Rt[Jt.l.i],target:Rt[Jt.r.i]}})},_t.triangles=function(Rt){var Jt=[];return is(dt(Rt)).cells.forEach(function(tr,rr){for(var Er=tr.site,qr=tr.edges.sort(_n),cn=-1,Dr=qr.length,Vr,Kr=qr[Dr-1].edge,sn=Kr.l===Er?Kr.r:Kr.l;++cn<Dr;)Vr=sn,Kr=qr[cn].edge,sn=Kr.l===Er?Kr.r:Kr.l,rr<Vr.i&&rr<sn.i&&wu(Er,Vr,sn)<0&&Jt.push([Rt[rr],Rt[Vr.i],Rt[sn.i]])}),Jt},_t.x=function(Rt){return arguments.length?(Ue=nt(Te=Rt),_t):Te},_t.y=function(Rt){return arguments.length?(Be=nt(Re=Rt),_t):Re},_t.clipExtent=function(Rt){return arguments.length?(Qe=Rt==null?Fl:Rt,_t):Qe===Fl?null:Qe},_t.size=function(Rt){return arguments.length?_t.clipExtent(Rt&&[[0,0],Rt]):Qe===Fl?null:Qe&&Qe[1]},_t};var Fl=[[-1e6,-1e6],[1e6,1e6]];function wu(le,Te,Re){return(le.x-Re.x)*(Te.y-le.y)-(le.x-Te.x)*(Re.y-le.y)}m.geom.delaunay=function(le){return m.geom.voronoi().triangles(le)},m.geom.quadtree=function(le,Te,Re,Ue,Be){var Qe=Wn,_t=ya,dt;if(dt=arguments.length)return Qe=xi,_t=nl,dt===3&&(Be=Re,Ue=Te,Re=Te=0),Rt(le);function Rt(Jt){var tr,rr=nt(Qe),Er=nt(_t),qr,cn,Dr,Vr,Kr,sn,un,Qr;if(Te!=null)Kr=Te,sn=Re,un=Ue,Qr=Be;else if(un=Qr=-(Kr=sn=1/0),qr=[],cn=[],Vr=Jt.length,dt)for(Dr=0;Dr<Vr;++Dr)tr=Jt[Dr],tr.x<Kr&&(Kr=tr.x),tr.y<sn&&(sn=tr.y),tr.x>un&&(un=tr.x),tr.y>Qr&&(Qr=tr.y),qr.push(tr.x),cn.push(tr.y);else for(Dr=0;Dr<Vr;++Dr){var Gn=+rr(tr=Jt[Dr],Dr),ia=+Er(tr,Dr);Gn<Kr&&(Kr=Gn),ia<sn&&(sn=ia),Gn>un&&(un=Gn),ia>Qr&&(Qr=ia),qr.push(Gn),cn.push(ia)}var Ma=un-Kr,la=Qr-sn;Ma>la?Qr=sn+Ma:un=Kr+la;function Pa(Fa,ri,Ti,_o,Hi,va,li,Ja){if(!(isNaN(Ti)||isNaN(_o)))if(Fa.leaf){var Di=Fa.x,fi=Fa.y;if(Di!=null)if(l(Di-Ti)+l(fi-_o)<.01)fa(Fa,ri,Ti,_o,Hi,va,li,Ja);else{var go=Fa.point;Fa.x=Fa.y=Fa.point=null,fa(Fa,go,Di,fi,Hi,va,li,Ja),fa(Fa,ri,Ti,_o,Hi,va,li,Ja)}else Fa.x=Ti,Fa.y=_o,Fa.point=ri}else fa(Fa,ri,Ti,_o,Hi,va,li,Ja)}function fa(Fa,ri,Ti,_o,Hi,va,li,Ja){var Di=(Hi+li)*.5,fi=(va+Ja)*.5,go=Ti>=Di,oo=_o>=fi,So=oo<<1|go;Fa.leaf=!1,Fa=Fa.nodes[So]||(Fa.nodes[So]=Xs()),go?Hi=Di:li=Di,oo?va=fi:Ja=fi,Pa(Fa,ri,Ti,_o,Hi,va,li,Ja)}var Ga=Xs();if(Ga.add=function(Fa){Pa(Ga,Fa,+rr(Fa,++Dr),+Er(Fa,Dr),Kr,sn,un,Qr)},Ga.visit=function(Fa){ji(Fa,Ga,Kr,sn,un,Qr)},Ga.find=function(Fa){return Io(Ga,Fa[0],Fa[1],Kr,sn,un,Qr)},Dr=-1,Te==null){for(;++Dr<Vr;)Pa(Ga,Jt[Dr],qr[Dr],cn[Dr],Kr,sn,un,Qr);--Dr}else Jt.forEach(Ga.add);return qr=cn=Jt=tr=null,Ga}return Rt.x=function(Jt){return arguments.length?(Qe=Jt,Rt):Qe},Rt.y=function(Jt){return arguments.length?(_t=Jt,Rt):_t},Rt.extent=function(Jt){return arguments.length?(Jt==null?Te=Re=Ue=Be=null:(Te=+Jt[0][0],Re=+Jt[0][1],Ue=+Jt[1][0],Be=+Jt[1][1]),Rt):Te==null?null:[[Te,Re],[Ue,Be]]},Rt.size=function(Jt){return arguments.length?(Jt==null?Te=Re=Ue=Be=null:(Te=Re=0,Ue=+Jt[0],Be=+Jt[1]),Rt):Te==null?null:[Ue-Te,Be-Re]},Rt};function xi(le){return le.x}function nl(le){return le.y}function Xs(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function ji(le,Te,Re,Ue,Be,Qe){if(!le(Te,Re,Ue,Be,Qe)){var _t=(Re+Be)*.5,dt=(Ue+Qe)*.5,Rt=Te.nodes;Rt[0]&&ji(le,Rt[0],Re,Ue,_t,dt),Rt[1]&&ji(le,Rt[1],_t,Ue,Be,dt),Rt[2]&&ji(le,Rt[2],Re,dt,_t,Qe),Rt[3]&&ji(le,Rt[3],_t,dt,Be,Qe)}}function Io(le,Te,Re,Ue,Be,Qe,_t){var dt=1/0,Rt;return function Jt(tr,rr,Er,qr,cn){if(!(rr>Qe||Er>_t||qr<Ue||cn<Be)){if(Dr=tr.point){var Dr,Vr=Te-tr.x,Kr=Re-tr.y,sn=Vr*Vr+Kr*Kr;if(sn<dt){var un=Math.sqrt(dt=sn);Ue=Te-un,Be=Re-un,Qe=Te+un,_t=Re+un,Rt=Dr}}for(var Qr=tr.nodes,Gn=(rr+qr)*.5,ia=(Er+cn)*.5,Ma=Te>=Gn,la=Re>=ia,Pa=la<<1|Ma,fa=Pa+4;Pa<fa;++Pa)if(tr=Qr[Pa&3])switch(Pa&3){case 0:Jt(tr,rr,Er,Gn,ia);break;case 1:Jt(tr,Gn,Er,qr,ia);break;case 2:Jt(tr,rr,ia,Gn,cn);break;case 3:Jt(tr,Gn,ia,qr,cn);break}}}(le,Ue,Be,Qe,_t),Rt}m.interpolateRgb=zl;function zl(le,Te){le=m.rgb(le),Te=m.rgb(Te);var Re=le.r,Ue=le.g,Be=le.b,Qe=Te.r-Re,_t=Te.g-Ue,dt=Te.b-Be;return function(Rt){return"#"+Sr(Math.round(Re+Qe*Rt))+Sr(Math.round(Ue+_t*Rt))+Sr(Math.round(Be+dt*Rt))}}m.interpolateObject=Ms;function Ms(le,Te){var Re={},Ue={},Be;for(Be in le)Be in Te?Re[Be]=vo(le[Be],Te[Be]):Ue[Be]=le[Be];for(Be in Te)Be in le||(Ue[Be]=Te[Be]);return function(Qe){for(Be in Re)Ue[Be]=Re[Be](Qe);return Ue}}m.interpolateNumber=Ui;function Ui(le,Te){return le=+le,Te=+Te,function(Re){return le*(1-Re)+Te*Re}}m.interpolateString=wl;function wl(le,Te){var Re=ao.lastIndex=Yi.lastIndex=0,Ue,Be,Qe,_t=-1,dt=[],Rt=[];for(le=le+"",Te=Te+"";(Ue=ao.exec(le))&&(Be=Yi.exec(Te));)(Qe=Be.index)>Re&&(Qe=Te.slice(Re,Qe),dt[_t]?dt[_t]+=Qe:dt[++_t]=Qe),(Ue=Ue[0])===(Be=Be[0])?dt[_t]?dt[_t]+=Be:dt[++_t]=Be:(dt[++_t]=null,Rt.push({i:_t,x:Ui(Ue,Be)})),Re=Yi.lastIndex;return Re<Te.length&&(Qe=Te.slice(Re),dt[_t]?dt[_t]+=Qe:dt[++_t]=Qe),dt.length<2?Rt[0]?(Te=Rt[0].x,function(Jt){return Te(Jt)+""}):function(){return Te}:(Te=Rt.length,function(Jt){for(var tr=0,rr;tr<Te;++tr)dt[(rr=Rt[tr]).i]=rr.x(Jt);return dt.join("")})}var ao=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Yi=new RegExp(ao.source,"g");m.interpolate=vo;function vo(le,Te){for(var Re=m.interpolators.length,Ue;--Re>=0&&!(Ue=m.interpolators[Re](le,Te)););return Ue}m.interpolators=[function(le,Te){var Re=typeof Te;return(Re==="string"?Cr.has(Te.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(Te)?zl:wl:Te instanceof er?zl:Array.isArray(Te)?io:Re==="object"&&isNaN(Te)?Ms:Ui)(le,Te)}],m.interpolateArray=io;function io(le,Te){var Re=[],Ue=[],Be=le.length,Qe=Te.length,_t=Math.min(le.length,Te.length),dt;for(dt=0;dt<_t;++dt)Re.push(vo(le[dt],Te[dt]));for(;dt<Be;++dt)Ue[dt]=le[dt];for(;dt<Qe;++dt)Ue[dt]=Te[dt];return function(Rt){for(dt=0;dt<_t;++dt)Ue[dt]=Re[dt](Rt);return Ue}}var vs=function(){return D},al=m.map({linear:vs,poly:Is,quad:function(){return Fo},cubic:function(){return dc},sin:function(){return tu},exp:function(){return gc},circle:function(){return yc},elastic:il,back:ru,bounce:function(){return Fs}}),Hu=m.map({in:D,out:Gu,"in-out":Zs,"out-in":function(le){return Zs(Gu(le))}});m.ease=function(le){var Te=le.indexOf("-"),Re=Te>=0?le.slice(0,Te):le,Ue=Te>=0?le.slice(Te+1):"in";return Re=al.get(Re)||vs,Ue=Hu.get(Ue)||D,os(Ue(Re.apply(null,c.call(arguments,1))))};function os(le){return function(Te){return Te<=0?0:Te>=1?1:le(Te)}}function Gu(le){return function(Te){return 1-le(1-Te)}}function Zs(le){return function(Te){return .5*(Te<.5?le(2*Te):2-le(2-2*Te))}}function Fo(le){return le*le}function dc(le){return le*le*le}function js(le){if(le<=0)return 0;if(le>=1)return 1;var Te=le*le,Re=Te*le;return 4*(le<.5?Re:3*(le-Te)+Re-.75)}function Is(le){return function(Te){return Math.pow(Te,le)}}function tu(le){return 1-Math.cos(le*qe)}function gc(le){return Math.pow(2,10*(le-1))}function yc(le){return 1-Math.sqrt(1-le*le)}function il(le,Te){var Re;return arguments.length<2&&(Te=.45),arguments.length?Re=Te/He*Math.asin(1/le):(le=1,Re=Te/4),function(Ue){return 1+le*Math.pow(2,-10*Ue)*Math.sin((Ue-Re)*He/Te)}}function ru(le){return le||(le=1.70158),function(Te){return Te*Te*((le+1)*Te-le)}}function Fs(le){return le<1/2.75?7.5625*le*le:le<2/2.75?7.5625*(le-=1.5/2.75)*le+.75:le<2.5/2.75?7.5625*(le-=2.25/2.75)*le+.9375:7.5625*(le-=2.625/2.75)*le+.984375}m.interpolateHcl=Tu;function Tu(le,Te){le=m.hcl(le),Te=m.hcl(Te);var Re=le.h,Ue=le.c,Be=le.l,Qe=Te.h-Re,_t=Te.c-Ue,dt=Te.l-Be;return isNaN(_t)&&(_t=0,Ue=isNaN(Ue)?Te.c:Ue),isNaN(Qe)?(Qe=0,Re=isNaN(Re)?Te.h:Re):Qe>180?Qe-=360:Qe<-180&&(Qe+=360),function(Rt){return st(Re+Qe*Rt,Ue+_t*Rt,Be+dt*Rt)+""}}m.interpolateHsl=Tl;function Tl(le,Te){le=m.hsl(le),Te=m.hsl(Te);var Re=le.h,Ue=le.s,Be=le.l,Qe=Te.h-Re,_t=Te.s-Ue,dt=Te.l-Be;return isNaN(_t)&&(_t=0,Ue=isNaN(Ue)?Te.s:Ue),isNaN(Qe)?(Qe=0,Re=isNaN(Re)?Te.h:Re):Qe>180?Qe-=360:Qe<-180&&(Qe+=360),function(Rt){return Ar(Re+Qe*Rt,Ue+_t*Rt,Be+dt*Rt)+""}}m.interpolateLab=Au;function Au(le,Te){le=m.lab(le),Te=m.lab(Te);var Re=le.l,Ue=le.a,Be=le.b,Qe=Te.l-Re,_t=Te.a-Ue,dt=Te.b-Be;return function(Rt){return ut(Re+Qe*Rt,Ue+_t*Rt,Be+dt*Rt)+""}}m.interpolateRound=Yu;function Yu(le,Te){return Te-=le,function(Re){return Math.round(le+Te*Re)}}m.transform=function(le){var Te=T.createElementNS(m.ns.prefix.svg,"g");return(m.transform=function(Re){if(Re!=null){Te.setAttribute("transform",Re);var Ue=Te.transform.baseVal.consolidate()}return new nu(Ue?Ue.matrix:au)})(le)};function nu(le){var Te=[le.a,le.b],Re=[le.c,le.d],Ue=ol(Te),Be=mc(Te,Re),Qe=ol(Mu(Re,Te,-Be))||0;Te[0]*Re[1]<Re[0]*Te[1]&&(Te[0]*=-1,Te[1]*=-1,Ue*=-1,Be*=-1),this.rotate=(Ue?Math.atan2(Te[1],Te[0]):Math.atan2(-Re[0],Re[1]))*mt,this.translate=[le.e,le.f],this.scale=[Ue,Qe],this.skew=Qe?Math.atan2(Be,Qe)*mt:0}nu.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};function mc(le,Te){return le[0]*Te[0]+le[1]*Te[1]}function ol(le){var Te=Math.sqrt(mc(le,le));return Te&&(le[0]/=Te,le[1]/=Te),Te}function Mu(le,Te,Re){return le[0]+=Re*Te[0],le[1]+=Re*Te[1],le}var au={a:1,b:0,c:0,d:1,e:0,f:0};m.interpolateTransform=iu;function Ss(le){return le.length?le.pop()+",":""}function Nl(le,Te,Re,Ue){if(le[0]!==Te[0]||le[1]!==Te[1]){var Be=Re.push("translate(",null,",",null,")");Ue.push({i:Be-4,x:Ui(le[0],Te[0])},{i:Be-2,x:Ui(le[1],Te[1])})}else(Te[0]||Te[1])&&Re.push("translate("+Te+")")}function Su(le,Te,Re,Ue){le!==Te?(le-Te>180?Te+=360:Te-le>180&&(le+=360),Ue.push({i:Re.push(Ss(Re)+"rotate(",null,")")-2,x:Ui(le,Te)})):Te&&Re.push(Ss(Re)+"rotate("+Te+")")}function Wu(le,Te,Re,Ue){le!==Te?Ue.push({i:Re.push(Ss(Re)+"skewX(",null,")")-2,x:Ui(le,Te)}):Te&&Re.push(Ss(Re)+"skewX("+Te+")")}function Xu(le,Te,Re,Ue){if(le[0]!==Te[0]||le[1]!==Te[1]){var Be=Re.push(Ss(Re)+"scale(",null,",",null,")");Ue.push({i:Be-4,x:Ui(le[0],Te[0])},{i:Be-2,x:Ui(le[1],Te[1])})}else(Te[0]!==1||Te[1]!==1)&&Re.push(Ss(Re)+"scale("+Te+")")}function iu(le,Te){var Re=[],Ue=[];return le=m.transform(le),Te=m.transform(Te),Nl(le.translate,Te.translate,Re,Ue),Su(le.rotate,Te.rotate,Re,Ue),Wu(le.skew,Te.skew,Re,Ue),Xu(le.scale,Te.scale,Re,Ue),le=Te=null,function(Be){for(var Qe=-1,_t=Ue.length,dt;++Qe<_t;)Re[(dt=Ue[Qe]).i]=dt.x(Be);return Re.join("")}}function xc(le,Te){return Te=(Te-=le=+le)||1/Te,function(Re){return(Re-le)/Te}}function Zu(le,Te){return Te=(Te-=le=+le)||1/Te,function(Re){return Math.max(0,Math.min(1,(Re-le)/Te))}}m.layout={},m.layout.bundle=function(){return function(le){for(var Te=[],Re=-1,Ue=le.length;++Re<Ue;)Te.push(ss(le[Re]));return Te}};function ss(le){for(var Te=le.source,Re=le.target,Ue=Ml(Te,Re),Be=[Te];Te!==Ue;)Te=Te.parent,Be.push(Te);for(var Qe=Be.length;Re!==Ue;)Be.splice(Qe,0,Re),Re=Re.parent;return Be}function Al(le){for(var Te=[],Re=le.parent;Re!=null;)Te.push(le),le=Re,Re=Re.parent;return Te.push(le),Te}function Ml(le,Te){if(le===Te)return le;for(var Re=Al(le),Ue=Al(Te),Be=Re.pop(),Qe=Ue.pop(),_t=null;Be===Qe;)_t=Be,Be=Re.pop(),Qe=Ue.pop();return _t}m.layout.chord=function(){var le={},Te,Re,Ue,Be,Qe=0,_t,dt,Rt;function Jt(){var rr={},Er=[],qr=m.range(Be),cn=[],Dr,Vr,Kr,sn,un;for(Te=[],Re=[],Dr=0,sn=-1;++sn<Be;){for(Vr=0,un=-1;++un<Be;)Vr+=Ue[sn][un];Er.push(Vr),cn.push(m.range(Be)),Dr+=Vr}for(_t&&qr.sort(function(Ga,Fa){return _t(Er[Ga],Er[Fa])}),dt&&cn.forEach(function(Ga,Fa){Ga.sort(function(ri,Ti){return dt(Ue[Fa][ri],Ue[Fa][Ti])})}),Dr=(He-Qe*Be)/Dr,Vr=0,sn=-1;++sn<Be;){for(Kr=Vr,un=-1;++un<Be;){var Qr=qr[sn],Gn=cn[Qr][un],ia=Ue[Qr][Gn],Ma=Vr,la=Vr+=ia*Dr;rr[Qr+"-"+Gn]={index:Qr,subindex:Gn,startAngle:Ma,endAngle:la,value:ia}}Re[Qr]={index:Qr,startAngle:Kr,endAngle:Vr,value:Er[Qr]},Vr+=Qe}for(sn=-1;++sn<Be;)for(un=sn-1;++un<Be;){var Pa=rr[sn+"-"+un],fa=rr[un+"-"+sn];(Pa.value||fa.value)&&Te.push(Pa.value<fa.value?{source:fa,target:Pa}:{source:Pa,target:fa})}Rt&&tr()}function tr(){Te.sort(function(rr,Er){return Rt((rr.source.value+rr.target.value)/2,(Er.source.value+Er.target.value)/2)})}return le.matrix=function(rr){return arguments.length?(Be=(Ue=rr)&&Ue.length,Te=Re=null,le):Ue},le.padding=function(rr){return arguments.length?(Qe=rr,Te=Re=null,le):Qe},le.sortGroups=function(rr){return arguments.length?(_t=rr,Te=Re=null,le):_t},le.sortSubgroups=function(rr){return arguments.length?(dt=rr,Te=null,le):dt},le.sortChords=function(rr){return arguments.length?(Rt=rr,Te&&tr(),le):Rt},le.chords=function(){return Te||Jt(),Te},le.groups=function(){return Re||Jt(),Re},le},m.layout.force=function(){var le={},Te=m.dispatch("start","tick","end"),Re,Ue=[1,1],Be,Qe,_t=.9,dt=Ns,Rt=yo,Jt=-30,tr=Ol,rr=.1,Er=.64,qr=[],cn=[],Dr,Vr,Kr;function sn(Qr){return function(Gn,ia,Ma,la){if(Gn.point!==Qr){var Pa=Gn.cx-Qr.x,fa=Gn.cy-Qr.y,Ga=la-ia,Fa=Pa*Pa+fa*fa;if(Ga*Ga/Er<Fa){if(Fa<tr){var ri=Gn.charge/Fa;Qr.px-=Pa*ri,Qr.py-=fa*ri}return!0}if(Gn.point&&Fa&&Fa<tr){var ri=Gn.pointCharge/Fa;Qr.px-=Pa*ri,Qr.py-=fa*ri}}return!Gn.charge}}le.tick=function(){if((Qe*=.99)<.005)return Re=null,Te.end({type:"end",alpha:Qe=0}),!0;var Qr=qr.length,Gn=cn.length,ia,Ma,la,Pa,fa,Ga,Fa,ri,Ti;for(Ma=0;Ma<Gn;++Ma)la=cn[Ma],Pa=la.source,fa=la.target,ri=fa.x-Pa.x,Ti=fa.y-Pa.y,(Ga=ri*ri+Ti*Ti)&&(Ga=Qe*Vr[Ma]*((Ga=Math.sqrt(Ga))-Dr[Ma])/Ga,ri*=Ga,Ti*=Ga,fa.x-=ri*(Fa=Pa.weight+fa.weight?Pa.weight/(Pa.weight+fa.weight):.5),fa.y-=Ti*Fa,Pa.x+=ri*(Fa=1-Fa),Pa.y+=Ti*Fa);if((Fa=Qe*rr)&&(ri=Ue[0]/2,Ti=Ue[1]/2,Ma=-1,Fa))for(;++Ma<Qr;)la=qr[Ma],la.x+=(ri-la.x)*Fa,la.y+=(Ti-la.y)*Fa;if(Jt)for(zs(ia=m.geom.quadtree(qr),Qe,Kr),Ma=-1;++Ma<Qr;)(la=qr[Ma]).fixed||ia.visit(sn(la));for(Ma=-1;++Ma<Qr;)la=qr[Ma],la.fixed?(la.x=la.px,la.y=la.py):(la.x-=(la.px-(la.px=la.x))*_t,la.y-=(la.py-(la.py=la.y))*_t);Te.tick({type:"tick",alpha:Qe})},le.nodes=function(Qr){return arguments.length?(qr=Qr,le):qr},le.links=function(Qr){return arguments.length?(cn=Qr,le):cn},le.size=function(Qr){return arguments.length?(Ue=Qr,le):Ue},le.linkDistance=function(Qr){return arguments.length?(dt=typeof Qr=="function"?Qr:+Qr,le):dt},le.distance=le.linkDistance,le.linkStrength=function(Qr){return arguments.length?(Rt=typeof Qr=="function"?Qr:+Qr,le):Rt},le.friction=function(Qr){return arguments.length?(_t=+Qr,le):_t},le.charge=function(Qr){return arguments.length?(Jt=typeof Qr=="function"?Qr:+Qr,le):Jt},le.chargeDistance=function(Qr){return arguments.length?(tr=Qr*Qr,le):Math.sqrt(tr)},le.gravity=function(Qr){return arguments.length?(rr=+Qr,le):rr},le.theta=function(Qr){return arguments.length?(Er=Qr*Qr,le):Math.sqrt(Er)},le.alpha=function(Qr){return arguments.length?(Qr=+Qr,Qe?Qr>0?Qe=Qr:(Re.c=null,Re.t=NaN,Re=null,Te.end({type:"end",alpha:Qe=0})):Qr>0&&(Te.start({type:"start",alpha:Qe=Qr}),Re=vn(le.tick)),le):Qe},le.start=function(){var Qr,Gn=qr.length,ia=cn.length,Ma=Ue[0],la=Ue[1],Pa,fa;for(Qr=0;Qr<Gn;++Qr)(fa=qr[Qr]).index=Qr,fa.weight=0;for(Qr=0;Qr<ia;++Qr)fa=cn[Qr],typeof fa.source=="number"&&(fa.source=qr[fa.source]),typeof fa.target=="number"&&(fa.target=qr[fa.target]),++fa.source.weight,++fa.target.weight;for(Qr=0;Qr<Gn;++Qr)fa=qr[Qr],isNaN(fa.x)&&(fa.x=Ga("x",Ma)),isNaN(fa.y)&&(fa.y=Ga("y",la)),isNaN(fa.px)&&(fa.px=fa.x),isNaN(fa.py)&&(fa.py=fa.y);if(Dr=[],typeof dt=="function")for(Qr=0;Qr<ia;++Qr)Dr[Qr]=+dt.call(this,cn[Qr],Qr);else for(Qr=0;Qr<ia;++Qr)Dr[Qr]=dt;if(Vr=[],typeof Rt=="function")for(Qr=0;Qr<ia;++Qr)Vr[Qr]=+Rt.call(this,cn[Qr],Qr);else for(Qr=0;Qr<ia;++Qr)Vr[Qr]=Rt;if(Kr=[],typeof Jt=="function")for(Qr=0;Qr<Gn;++Qr)Kr[Qr]=+Jt.call(this,qr[Qr],Qr);else for(Qr=0;Qr<Gn;++Qr)Kr[Qr]=Jt;function Ga(Fa,ri){if(!Pa){for(Pa=new Array(Gn),Hi=0;Hi<Gn;++Hi)Pa[Hi]=[];for(Hi=0;Hi<ia;++Hi){var Ti=cn[Hi];Pa[Ti.source.index].push(Ti.target),Pa[Ti.target.index].push(Ti.source)}}for(var _o=Pa[Qr],Hi=-1,va=_o.length,li;++Hi<va;)if(!isNaN(li=_o[Hi][Fa]))return li;return Math.random()*ri}return le.resume()},le.resume=function(){return le.alpha(.1)},le.stop=function(){return le.alpha(0)},le.drag=function(){if(Be||(Be=m.behavior.drag().origin(D).on("dragstart.force",Eu).on("drag.force",un).on("dragend.force",Es)),!arguments.length)return Be;this.on("mouseover.force",zo).on("mouseout.force",ou).call(Be)};function un(Qr){Qr.px=m.event.x,Qr.py=m.event.y,le.resume()}return m.rebind(le,Te,"on")};function Eu(le){le.fixed|=2}function Es(le){le.fixed&=-7}function zo(le){le.fixed|=4,le.px=le.x,le.py=le.y}function ou(le){le.fixed&=-5}function zs(le,Te,Re){var Ue=0,Be=0;if(le.charge=0,!le.leaf)for(var Qe=le.nodes,_t=Qe.length,dt=-1,Rt;++dt<_t;)Rt=Qe[dt],Rt!=null&&(zs(Rt,Te,Re),le.charge+=Rt.charge,Ue+=Rt.charge*Rt.cx,Be+=Rt.charge*Rt.cy);if(le.point){le.leaf||(le.point.x+=Math.random()-.5,le.point.y+=Math.random()-.5);var Jt=Te*Re[le.point.index];le.charge+=le.pointCharge=Jt,Ue+=Jt*le.point.x,Be+=Jt*le.point.y}le.cx=Ue/le.charge,le.cy=Be/le.charge}var Ns=20,yo=1,Ol=1/0;m.layout.hierarchy=function(){var le=su,Te=Ul,Re=Sl;function Ue(Be){var Qe=[Be],_t=[],dt;for(Be.depth=0;(dt=Qe.pop())!=null;)if(_t.push(dt),(Jt=Te.call(Ue,dt,dt.depth))&&(Rt=Jt.length)){for(var Rt,Jt,tr;--Rt>=0;)Qe.push(tr=Jt[Rt]),tr.parent=dt,tr.depth=dt.depth+1;Re&&(dt.value=0),dt.children=Jt}else Re&&(dt.value=+Re.call(Ue,dt,dt.depth)||0),delete dt.children;return Cs(Be,function(rr){var Er,qr;le&&(Er=rr.children)&&Er.sort(le),Re&&(qr=rr.parent)&&(qr.value+=rr.value)}),_t}return Ue.sort=function(Be){return arguments.length?(le=Be,Ue):le},Ue.children=function(Be){return arguments.length?(Te=Be,Ue):Te},Ue.value=function(Be){return arguments.length?(Re=Be,Ue):Re},Ue.revalue=function(Be){return Re&&(sl(Be,function(Qe){Qe.children&&(Qe.value=0)}),Cs(Be,function(Qe){var _t;Qe.children||(Qe.value=+Re.call(Ue,Qe,Qe.depth)||0),(_t=Qe.parent)&&(_t.value+=Qe.value)})),Be},Ue};function Bl(le,Te){return m.rebind(le,Te,"sort","children","value"),le.nodes=le,le.links=Vl,le}function sl(le,Te){for(var Re=[le];(le=Re.pop())!=null;)if(Te(le),(Be=le.children)&&(Ue=Be.length))for(var Ue,Be;--Ue>=0;)Re.push(Be[Ue])}function Cs(le,Te){for(var Re=[le],Ue=[];(le=Re.pop())!=null;)if(Ue.push(le),(_t=le.children)&&(Qe=_t.length))for(var Be=-1,Qe,_t;++Be<Qe;)Re.push(_t[Be]);for(;(le=Ue.pop())!=null;)Te(le)}function Ul(le){return le.children}function Sl(le){return le.value}function su(le,Te){return Te.value-le.value}function Vl(le){return m.merge(le.map(function(Te){return(Te.children||[]).map(function(Re){return{source:Te,target:Re}})}))}m.layout.partition=function(){var le=m.layout.hierarchy(),Te=[1,1];function Re(Qe,_t,dt,Rt){var Jt=Qe.children;if(Qe.x=_t,Qe.y=Qe.depth*Rt,Qe.dx=dt,Qe.dy=Rt,Jt&&(rr=Jt.length)){var tr=-1,rr,Er,qr;for(dt=Qe.value?dt/Qe.value:0;++tr<rr;)Re(Er=Jt[tr],_t,qr=Er.value*dt,Rt),_t+=qr}}function Ue(Qe){var _t=Qe.children,dt=0;if(_t&&(Jt=_t.length))for(var Rt=-1,Jt;++Rt<Jt;)dt=Math.max(dt,Ue(_t[Rt]));return 1+dt}function Be(Qe,_t){var dt=le.call(this,Qe,_t);return Re(dt[0],0,Te[0],Te[1]/Ue(dt[0])),dt}return Be.size=function(Qe){return arguments.length?(Te=Qe,Be):Te},Bl(Be,le)},m.layout.pie=function(){var le=Number,Te=ll,Re=0,Ue=He,Be=0;function Qe(_t){var dt=_t.length,Rt=_t.map(function(sn,un){return+le.call(Qe,sn,un)}),Jt=+(typeof Re=="function"?Re.apply(this,arguments):Re),tr=(typeof Ue=="function"?Ue.apply(this,arguments):Ue)-Jt,rr=Math.min(Math.abs(tr)/dt,+(typeof Be=="function"?Be.apply(this,arguments):Be)),Er=rr*(tr<0?-1:1),qr=m.sum(Rt),cn=qr?(tr-dt*Er)/qr:0,Dr=m.range(dt),Vr=[],Kr;return Te!=null&&Dr.sort(Te===ll?function(sn,un){return Rt[un]-Rt[sn]}:function(sn,un){return Te(_t[sn],_t[un])}),Dr.forEach(function(sn){Vr[sn]={data:_t[sn],value:Kr=Rt[sn],startAngle:Jt,endAngle:Jt+=Kr*cn+Er,padAngle:rr}}),Vr}return Qe.value=function(_t){return arguments.length?(le=_t,Qe):le},Qe.sort=function(_t){return arguments.length?(Te=_t,Qe):Te},Qe.startAngle=function(_t){return arguments.length?(Re=_t,Qe):Re},Qe.endAngle=function(_t){return arguments.length?(Ue=_t,Qe):Ue},Qe.padAngle=function(_t){return arguments.length?(Be=_t,Qe):Be},Qe};var ll={};m.layout.stack=function(){var le=D,Te=Hl,Re=ul,Ue=Vc,Be=bc,Qe=ps;function _t(dt,Rt){if(!(cn=dt.length))return dt;var Jt=dt.map(function(sn,un){return le.call(_t,sn,un)}),tr=Jt.map(function(sn){return sn.map(function(un,Qr){return[Be.call(_t,un,Qr),Qe.call(_t,un,Qr)]})}),rr=Te.call(_t,tr,Rt);Jt=m.permute(Jt,rr),tr=m.permute(tr,rr);var Er=Re.call(_t,tr,Rt),qr=Jt[0].length,cn,Dr,Vr,Kr;for(Vr=0;Vr<qr;++Vr)for(Ue.call(_t,Jt[0][Vr],Kr=Er[Vr],tr[0][Vr][1]),Dr=1;Dr<cn;++Dr)Ue.call(_t,Jt[Dr][Vr],Kr+=tr[Dr-1][Vr][1],tr[Dr][Vr][1]);return dt}return _t.values=function(dt){return arguments.length?(le=dt,_t):le},_t.order=function(dt){return arguments.length?(Te=typeof dt=="function"?dt:Cu.get(dt)||Hl,_t):Te},_t.offset=function(dt){return arguments.length?(Re=typeof dt=="function"?dt:El.get(dt)||ul,_t):Re},_t.x=function(dt){return arguments.length?(Be=dt,_t):Be},_t.y=function(dt){return arguments.length?(Qe=dt,_t):Qe},_t.out=function(dt){return arguments.length?(Ue=dt,_t):Ue},_t};function bc(le){return le.x}function ps(le){return le.y}function Vc(le,Te,Re){le.y0=Te,le.y=Re}var Cu=m.map({"inside-out":function(le){var Te=le.length,Re,Ue,Be=le.map(Gl),Qe=le.map(ju),_t=m.range(Te).sort(function(rr,Er){return Be[rr]-Be[Er]}),dt=0,Rt=0,Jt=[],tr=[];for(Re=0;Re<Te;++Re)Ue=_t[Re],dt<Rt?(dt+=Qe[Ue],Jt.push(Ue)):(Rt+=Qe[Ue],tr.push(Ue));return tr.reverse().concat(Jt)},reverse:function(le){return m.range(le.length).reverse()},default:Hl}),El=m.map({silhouette:function(le){var Te=le.length,Re=le[0].length,Ue=[],Be=0,Qe,_t,dt,Rt=[];for(_t=0;_t<Re;++_t){for(Qe=0,dt=0;Qe<Te;Qe++)dt+=le[Qe][_t][1];dt>Be&&(Be=dt),Ue.push(dt)}for(_t=0;_t<Re;++_t)Rt[_t]=(Be-Ue[_t])/2;return Rt},wiggle:function(le){var Te=le.length,Re=le[0],Ue=Re.length,Be,Qe,_t,dt,Rt,Jt,tr,rr,Er,qr=[];for(qr[0]=rr=Er=0,Qe=1;Qe<Ue;++Qe){for(Be=0,dt=0;Be<Te;++Be)dt+=le[Be][Qe][1];for(Be=0,Rt=0,tr=Re[Qe][0]-Re[Qe-1][0];Be<Te;++Be){for(_t=0,Jt=(le[Be][Qe][1]-le[Be][Qe-1][1])/(2*tr);_t<Be;++_t)Jt+=(le[_t][Qe][1]-le[_t][Qe-1][1])/tr;Rt+=Jt*le[Be][Qe][1]}qr[Qe]=rr-=dt?Rt/dt*tr:0,rr<Er&&(Er=rr)}for(Qe=0;Qe<Ue;++Qe)qr[Qe]-=Er;return qr},expand:function(le){var Te=le.length,Re=le[0].length,Ue=1/Te,Be,Qe,_t,dt=[];for(Qe=0;Qe<Re;++Qe){for(Be=0,_t=0;Be<Te;Be++)_t+=le[Be][Qe][1];if(_t)for(Be=0;Be<Te;Be++)le[Be][Qe][1]/=_t;else for(Be=0;Be<Te;Be++)le[Be][Qe][1]=Ue}for(Qe=0;Qe<Re;++Qe)dt[Qe]=0;return dt},zero:ul});function Hl(le){return m.range(le.length)}function ul(le){for(var Te=-1,Re=le[0].length,Ue=[];++Te<Re;)Ue[Te]=0;return Ue}function Gl(le){for(var Te=1,Re=0,Ue=le[0][1],Be,Qe=le.length;Te<Qe;++Te)(Be=le[Te][1])>Ue&&(Re=Te,Ue=Be);return Re}function ju(le){return le.reduce(Ku,0)}function Ku(le,Te){return le+Te[1]}m.layout.histogram=function(){var le=!0,Te=Number,Re=Cl,Ue=Hc;function Be(Qe,Er){for(var dt=[],Rt=Qe.map(Te,this),Jt=Re.call(this,Rt,Er),tr=Ue.call(this,Jt,Rt,Er),rr,Er=-1,qr=Rt.length,cn=tr.length-1,Dr=le?1:1/qr,Vr;++Er<cn;)rr=dt[Er]=[],rr.dx=tr[Er+1]-(rr.x=tr[Er]),rr.y=0;if(cn>0)for(Er=-1;++Er<qr;)Vr=Rt[Er],Vr>=Jt[0]&&Vr<=Jt[1]&&(rr=dt[m.bisect(tr,Vr,1,cn)-1],rr.y+=Dr,rr.push(Qe[Er]));return dt}return Be.value=function(Qe){return arguments.length?(Te=Qe,Be):Te},Be.range=function(Qe){return arguments.length?(Re=nt(Qe),Be):Re},Be.bins=function(Qe){return arguments.length?(Ue=typeof Qe=="number"?function(_t){return Vi(_t,Qe)}:nt(Qe),Be):Ue},Be.frequency=function(Qe){return arguments.length?(le=!!Qe,Be):le},Be};function Hc(le,Te){return Vi(le,Math.ceil(Math.log(Te.length)/Math.LN2+1))}function Vi(le,Te){for(var Re=-1,Ue=+le[0],Be=(le[1]-Ue)/Te,Qe=[];++Re<=Te;)Qe[Re]=Be*Re+Ue;return Qe}function Cl(le){return[m.min(le),m.max(le)]}m.layout.pack=function(){var le=m.layout.hierarchy().sort(cl),Te=0,Re=[1,1],Ue;function Be(Qe,_t){var dt=le.call(this,Qe,_t),Rt=dt[0],Jt=Re[0],tr=Re[1],rr=Ue==null?Math.sqrt:typeof Ue=="function"?Ue:function(){return Ue};if(Rt.x=Rt.y=0,Cs(Rt,function(qr){qr.r=+rr(qr.value)}),Cs(Rt,mo),Te){var Er=Te*(Ue?1:Math.max(2*Rt.r/Jt,2*Rt.r/tr))/2;Cs(Rt,function(qr){qr.r+=Er}),Cs(Rt,mo),Cs(Rt,function(qr){qr.r-=Er})}return Ks(Rt,Jt/2,tr/2,Ue?1:1/Math.max(2*Rt.r/Jt,2*Rt.r/tr)),dt}return Be.size=function(Qe){return arguments.length?(Re=Qe,Be):Re},Be.radius=function(Qe){return arguments.length?(Ue=Qe==null||typeof Qe=="function"?Qe:+Qe,Be):Ue},Be.padding=function(Qe){return arguments.length?(Te=+Qe,Be):Te},Bl(Be,le)};function cl(le,Te){return le.value-Te.value}function ls(le,Te){var Re=le._pack_next;le._pack_next=Te,Te._pack_prev=le,Te._pack_next=Re,Re._pack_prev=Te}function ds(le,Te){le._pack_next=Te,Te._pack_prev=le}function Yl(le,Te){var Re=Te.x-le.x,Ue=Te.y-le.y,Be=le.r+Te.r;return .999*Be*Be>Re*Re+Ue*Ue}function mo(le){if(!(Te=le.children)||!(Er=Te.length))return;var Te,Re=1/0,Ue=-1/0,Be=1/0,Qe=-1/0,_t,dt,Rt,Jt,tr,rr,Er;function qr(Qr){Re=Math.min(Qr.x-Qr.r,Re),Ue=Math.max(Qr.x+Qr.r,Ue),Be=Math.min(Qr.y-Qr.r,Be),Qe=Math.max(Qr.y+Qr.r,Qe)}if(Te.forEach(Ju),_t=Te[0],_t.x=-_t.r,_t.y=0,qr(_t),Er>1&&(dt=Te[1],dt.x=dt.r,dt.y=0,qr(dt),Er>2))for(Rt=Te[2],Js(_t,dt,Rt),qr(Rt),ls(_t,Rt),_t._pack_prev=Rt,ls(Rt,dt),dt=_t._pack_next,Jt=3;Jt<Er;Jt++){Js(_t,dt,Rt=Te[Jt]);var cn=0,Dr=1,Vr=1;for(tr=dt._pack_next;tr!==dt;tr=tr._pack_next,Dr++)if(Yl(tr,Rt)){cn=1;break}if(cn==1)for(rr=_t._pack_prev;rr!==tr._pack_prev&&!Yl(rr,Rt);rr=rr._pack_prev,Vr++);cn?(Dr<Vr||Dr==Vr&&dt.r<_t.r?ds(_t,dt=tr):ds(_t=rr,dt),Jt--):(ls(_t,Rt),dt=Rt,qr(Rt))}var Kr=(Re+Ue)/2,sn=(Be+Qe)/2,un=0;for(Jt=0;Jt<Er;Jt++)Rt=Te[Jt],Rt.x-=Kr,Rt.y-=sn,un=Math.max(un,Rt.r+Math.sqrt(Rt.x*Rt.x+Rt.y*Rt.y));le.r=un,Te.forEach(gs)}function Ju(le){le._pack_next=le._pack_prev=le}function gs(le){delete le._pack_next,delete le._pack_prev}function Ks(le,Te,Re,Ue){var Be=le.children;if(le.x=Te+=Ue*le.x,le.y=Re+=Ue*le.y,le.r*=Ue,Be)for(var Qe=-1,_t=Be.length;++Qe<_t;)Ks(Be[Qe],Te,Re,Ue)}function Js(le,Te,Re){var Ue=le.r+Re.r,Be=Te.x-le.x,Qe=Te.y-le.y;if(Ue&&(Be||Qe)){var _t=Te.r+Re.r,dt=Be*Be+Qe*Qe;_t*=_t,Ue*=Ue;var Rt=.5+(Ue-_t)/(2*dt),Jt=Math.sqrt(Math.max(0,2*_t*(Ue+dt)-(Ue-=dt)*Ue-_t*_t))/(2*dt);Re.x=le.x+Rt*Be+Jt*Qe,Re.y=le.y+Rt*Qe-Jt*Be}else Re.x=le.x+Ue,Re.y=le.y}m.layout.tree=function(){var le=m.layout.hierarchy().sort(null).value(null),Te=Os,Re=[1,1],Ue=null;function Be(tr,rr){var Er=le.call(this,tr,rr),qr=Er[0],cn=Qe(qr);if(Cs(cn,_t),cn.parent.m=-cn.z,sl(cn,dt),Ue)sl(qr,Jt);else{var Dr=qr,Vr=qr,Kr=qr;sl(qr,function(Gn){Gn.x<Dr.x&&(Dr=Gn),Gn.x>Vr.x&&(Vr=Gn),Gn.depth>Kr.depth&&(Kr=Gn)});var sn=Te(Dr,Vr)/2-Dr.x,un=Re[0]/(Vr.x+Te(Vr,Dr)/2+sn),Qr=Re[1]/(Kr.depth||1);sl(qr,function(Gn){Gn.x=(Gn.x+sn)*un,Gn.y=Gn.depth*Qr})}return Er}function Qe(tr){for(var rr={A:null,children:[tr]},Er=[rr],qr;(qr=Er.pop())!=null;)for(var cn=qr.children,Dr,Vr=0,Kr=cn.length;Vr<Kr;++Vr)Er.push((cn[Vr]=Dr={_:cn[Vr],parent:qr,children:(Dr=cn[Vr].children)&&Dr.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:Vr}).a=Dr);return rr.children[0]}function _t(tr){var rr=tr.children,Er=tr.parent.children,qr=tr.i?Er[tr.i-1]:null;if(rr.length){ms(tr);var cn=(rr[0].z+rr[rr.length-1].z)/2;qr?(tr.z=qr.z+Te(tr._,qr._),tr.m=tr.z-cn):tr.z=cn}else qr&&(tr.z=qr.z+Te(tr._,qr._));tr.parent.A=Rt(tr,qr,tr.parent.A||Er[0])}function dt(tr){tr._.x=tr.z+tr.parent.m,tr.m+=tr.parent.m}function Rt(tr,rr,Er){if(rr){for(var qr=tr,cn=tr,Dr=rr,Vr=qr.parent.children[0],Kr=qr.m,sn=cn.m,un=Dr.m,Qr=Vr.m,Gn;Dr=Ki(Dr),qr=ys(qr),Dr&&qr;)Vr=ys(Vr),cn=Ki(cn),cn.a=tr,Gn=Dr.z+un-qr.z-Kr+Te(Dr._,qr._),Gn>0&&(No(Qu(Dr,tr,Er),tr,Gn),Kr+=Gn,sn+=Gn),un+=Dr.m,Kr+=qr.m,Qr+=Vr.m,sn+=cn.m;Dr&&!Ki(cn)&&(cn.t=Dr,cn.m+=un-sn),qr&&!ys(Vr)&&(Vr.t=qr,Vr.m+=Kr-Qr,Er=tr)}return Er}function Jt(tr){tr.x*=Re[0],tr.y=tr.depth*Re[1]}return Be.separation=function(tr){return arguments.length?(Te=tr,Be):Te},Be.size=function(tr){return arguments.length?(Ue=(Re=tr)==null?Jt:null,Be):Ue?null:Re},Be.nodeSize=function(tr){return arguments.length?(Ue=(Re=tr)==null?null:Jt,Be):Ue?Re:null},Bl(Be,le)};function Os(le,Te){return le.parent==Te.parent?1:2}function ys(le){var Te=le.children;return Te.length?Te[0]:le.t}function Ki(le){var Te=le.children,Re;return(Re=Te.length)?Te[Re-1]:le.t}function No(le,Te,Re){var Ue=Re/(Te.i-le.i);Te.c-=Ue,Te.s+=Re,le.c+=Ue,Te.z+=Re,Te.m+=Re}function ms(le){for(var Te=0,Re=0,Ue=le.children,Be=Ue.length,Qe;--Be>=0;)Qe=Ue[Be],Qe.z+=Te,Qe.m+=Te,Te+=Qe.s+(Re+=Qe.c)}function Qu(le,Te,Re){return le.a.parent===Te.parent?le.a:Re}m.layout.cluster=function(){var le=m.layout.hierarchy().sort(null).value(null),Te=Os,Re=[1,1],Ue=!1;function Be(Qe,_t){var dt=le.call(this,Qe,_t),Rt=dt[0],Jt,tr=0;Cs(Rt,function(Dr){var Vr=Dr.children;Vr&&Vr.length?(Dr.x=$u(Vr),Dr.y=lu(Vr)):(Dr.x=Jt?tr+=Te(Dr,Jt):0,Dr.y=0,Jt=Dr)});var rr=xt(Rt),Er=Bt(Rt),qr=rr.x-Te(rr,Er)/2,cn=Er.x+Te(Er,rr)/2;return Cs(Rt,Ue?function(Dr){Dr.x=(Dr.x-Rt.x)*Re[0],Dr.y=(Rt.y-Dr.y)*Re[1]}:function(Dr){Dr.x=(Dr.x-qr)/(cn-qr)*Re[0],Dr.y=(1-(Rt.y?Dr.y/Rt.y:1))*Re[1]}),dt}return Be.separation=function(Qe){return arguments.length?(Te=Qe,Be):Te},Be.size=function(Qe){return arguments.length?(Ue=(Re=Qe)==null,Be):Ue?null:Re},Be.nodeSize=function(Qe){return arguments.length?(Ue=(Re=Qe)!=null,Be):Ue?Re:null},Bl(Be,le)};function lu(le){return 1+m.max(le,function(Te){return Te.y})}function $u(le){return le.reduce(function(Te,Re){return Te+Re.x},0)/le.length}function xt(le){var Te=le.children;return Te&&Te.length?xt(Te[0]):le}function Bt(le){var Te=le.children,Re;return Te&&(Re=Te.length)?Bt(Te[Re-1]):le}m.layout.treemap=function(){var le=m.layout.hierarchy(),Te=Math.round,Re=[1,1],Ue=null,Be=vr,Qe=!1,_t,dt="squarify",Rt=.5*(1+Math.sqrt(5));function Jt(Dr,Vr){for(var Kr=-1,sn=Dr.length,un,Qr;++Kr<sn;)Qr=(un=Dr[Kr]).value*(Vr<0?0:Vr),un.area=isNaN(Qr)||Qr<=0?0:Qr}function tr(Dr){var Vr=Dr.children;if(Vr&&Vr.length){var Kr=Be(Dr),sn=[],un=Vr.slice(),Qr,Gn=1/0,ia,Ma=dt==="slice"?Kr.dx:dt==="dice"?Kr.dy:dt==="slice-dice"?Dr.depth&1?Kr.dy:Kr.dx:Math.min(Kr.dx,Kr.dy),la;for(Jt(un,Kr.dx*Kr.dy/Dr.value),sn.area=0;(la=un.length)>0;)sn.push(Qr=un[la-1]),sn.area+=Qr.area,dt!=="squarify"||(ia=Er(sn,Ma))<=Gn?(un.pop(),Gn=ia):(sn.area-=sn.pop().area,qr(sn,Ma,Kr,!1),Ma=Math.min(Kr.dx,Kr.dy),sn.length=sn.area=0,Gn=1/0);sn.length&&(qr(sn,Ma,Kr,!0),sn.length=sn.area=0),Vr.forEach(tr)}}function rr(Dr){var Vr=Dr.children;if(Vr&&Vr.length){var Kr=Be(Dr),sn=Vr.slice(),un,Qr=[];for(Jt(sn,Kr.dx*Kr.dy/Dr.value),Qr.area=0;un=sn.pop();)Qr.push(un),Qr.area+=un.area,un.z!=null&&(qr(Qr,un.z?Kr.dx:Kr.dy,Kr,!sn.length),Qr.length=Qr.area=0);Vr.forEach(rr)}}function Er(Dr,Vr){for(var Kr=Dr.area,sn,un=0,Qr=1/0,Gn=-1,ia=Dr.length;++Gn<ia;)!(sn=Dr[Gn].area)||(sn<Qr&&(Qr=sn),sn>un&&(un=sn));return Kr*=Kr,Vr*=Vr,Kr?Math.max(Vr*un*Rt/Kr,Kr/(Vr*Qr*Rt)):1/0}function qr(Dr,Vr,Kr,sn){var un=-1,Qr=Dr.length,Gn=Kr.x,ia=Kr.y,Ma=Vr?Te(Dr.area/Vr):0,la;if(Vr==Kr.dx){for((sn||Ma>Kr.dy)&&(Ma=Kr.dy);++un<Qr;)la=Dr[un],la.x=Gn,la.y=ia,la.dy=Ma,Gn+=la.dx=Math.min(Kr.x+Kr.dx-Gn,Ma?Te(la.area/Ma):0);la.z=!0,la.dx+=Kr.x+Kr.dx-Gn,Kr.y+=Ma,Kr.dy-=Ma}else{for((sn||Ma>Kr.dx)&&(Ma=Kr.dx);++un<Qr;)la=Dr[un],la.x=Gn,la.y=ia,la.dx=Ma,ia+=la.dy=Math.min(Kr.y+Kr.dy-ia,Ma?Te(la.area/Ma):0);la.z=!1,la.dy+=Kr.y+Kr.dy-ia,Kr.x+=Ma,Kr.dx-=Ma}}function cn(Dr){var Vr=_t||le(Dr),Kr=Vr[0];return Kr.x=Kr.y=0,Kr.value?(Kr.dx=Re[0],Kr.dy=Re[1]):Kr.dx=Kr.dy=0,_t&&le.revalue(Kr),Jt([Kr],Kr.dx*Kr.dy/Kr.value),(_t?rr:tr)(Kr),Qe&&(_t=Vr),Vr}return cn.size=function(Dr){return arguments.length?(Re=Dr,cn):Re},cn.padding=function(Dr){if(!arguments.length)return Ue;function Vr(un){var Qr=Dr.call(cn,un,un.depth);return Qr==null?vr(un):lr(un,typeof Qr=="number"?[Qr,Qr,Qr,Qr]:Qr)}function Kr(un){return lr(un,Dr)}var sn;return Be=(Ue=Dr)==null?vr:(sn=typeof Dr)=="function"?Vr:(sn==="number"&&(Dr=[Dr,Dr,Dr,Dr]),Kr),cn},cn.round=function(Dr){return arguments.length?(Te=Dr?Math.round:Number,cn):Te!=Number},cn.sticky=function(Dr){return arguments.length?(Qe=Dr,_t=null,cn):Qe},cn.ratio=function(Dr){return arguments.length?(Rt=Dr,cn):Rt},cn.mode=function(Dr){return arguments.length?(dt=Dr+"",cn):dt},Bl(cn,le)};function vr(le){return{x:le.x,y:le.y,dx:le.dx,dy:le.dy}}function lr(le,Te){var Re=le.x+Te[3],Ue=le.y+Te[0],Be=le.dx-Te[1]-Te[3],Qe=le.dy-Te[0]-Te[2];return Be<0&&(Re+=Be/2,Be=0),Qe<0&&(Ue+=Qe/2,Qe=0),{x:Re,y:Ue,dx:Be,dy:Qe}}m.random={normal:function(le,Te){var Re=arguments.length;return Re<2&&(Te=1),Re<1&&(le=0),function(){var Ue,Be,Qe;do Ue=Math.random()*2-1,Be=Math.random()*2-1,Qe=Ue*Ue+Be*Be;while(!Qe||Qe>1);return le+Te*Ue*Math.sqrt(-2*Math.log(Qe)/Qe)}},logNormal:function(){var le=m.random.normal.apply(m,arguments);return function(){return Math.exp(le())}},bates:function(le){var Te=m.random.irwinHall(le);return function(){return Te()/le}},irwinHall:function(le){return function(){for(var Te=0,Re=0;Re<le;Re++)Te+=Math.random();return Te}}},m.scale={};function Fr(le){var Te=le[0],Re=le[le.length-1];return Te<Re?[Te,Re]:[Re,Te]}function nn(le){return le.rangeExtent?le.rangeExtent():Fr(le.range())}function yn(le,Te,Re,Ue){var Be=Re(le[0],le[1]),Qe=Ue(Te[0],Te[1]);return function(_t){return Qe(Be(_t))}}function En(le,Te){var Re=0,Ue=le.length-1,Be=le[Re],Qe=le[Ue],_t;return Qe<Be&&(_t=Re,Re=Ue,Ue=_t,_t=Be,Be=Qe,Qe=_t),le[Re]=Te.floor(Be),le[Ue]=Te.ceil(Qe),le}function Dn(le){return le?{floor:function(Te){return Math.floor(Te/le)*le},ceil:function(Te){return Math.ceil(Te/le)*le}}:Hn}var Hn={floor:D,ceil:D};function xn(le,Te,Re,Ue){var Be=[],Qe=[],_t=0,dt=Math.min(le.length,Te.length)-1;for(le[dt]<le[0]&&(le=le.slice().reverse(),Te=Te.slice().reverse());++_t<=dt;)Be.push(Re(le[_t-1],le[_t])),Qe.push(Ue(Te[_t-1],Te[_t]));return function(Rt){var Jt=m.bisect(le,Rt,1,dt)-1;return Qe[Jt](Be[Jt](Rt))}}m.scale.linear=function(){return Nn([0,1],[0,1],vo,!1)};function Nn(le,Te,Re,Ue){var Be,Qe;function _t(){var Rt=Math.min(le.length,Te.length)>2?xn:yn,Jt=Ue?Zu:xc;return Be=Rt(le,Te,Jt,Re),Qe=Rt(Te,le,Jt,vo),dt}function dt(Rt){return Be(Rt)}return dt.invert=function(Rt){return Qe(Rt)},dt.domain=function(Rt){return arguments.length?(le=Rt.map(Number),_t()):le},dt.range=function(Rt){return arguments.length?(Te=Rt,_t()):Te},dt.rangeRound=function(Rt){return dt.range(Rt).interpolate(Yu)},dt.clamp=function(Rt){return arguments.length?(Ue=Rt,_t()):Ue},dt.interpolate=function(Rt){return arguments.length?(Re=Rt,_t()):Re},dt.ticks=function(Rt){return Ba(le,Rt)},dt.tickFormat=function(Rt,Jt){return d3_scale_linearTickFormat(le,Rt,Jt)},dt.nice=function(Rt){return Yn(le,Rt),_t()},dt.copy=function(){return Nn(le,Te,Re,Ue)},_t()}function Rn(le,Te){return m.rebind(le,Te,"range","rangeRound","interpolate","clamp")}function Yn(le,Te){return En(le,Dn(ta(le,Te)[2])),En(le,Dn(ta(le,Te)[2])),le}function ta(le,Te){Te==null&&(Te=10);var Re=Fr(le),Ue=Re[1]-Re[0],Be=Math.pow(10,Math.floor(Math.log(Ue/Te)/Math.LN10)),Qe=Te/Ue*Be;return Qe<=.15?Be*=10:Qe<=.35?Be*=5:Qe<=.75&&(Be*=2),Re[0]=Math.ceil(Re[0]/Be)*Be,Re[1]=Math.floor(Re[1]/Be)*Be+Be*.5,Re[2]=Be,Re}function Ba(le,Te){return m.range.apply(m,ta(le,Te))}m.scale.log=function(){return Da(m.scale.linear().domain([0,1]),10,!0,[1,10])};function Da(le,Te,Re,Ue){function Be(dt){return(Re?Math.log(dt<0?0:dt):-Math.log(dt>0?0:-dt))/Math.log(Te)}function Qe(dt){return Re?Math.pow(Te,dt):-Math.pow(Te,-dt)}function _t(dt){return le(Be(dt))}return _t.invert=function(dt){return Qe(le.invert(dt))},_t.domain=function(dt){return arguments.length?(Re=dt[0]>=0,le.domain((Ue=dt.map(Number)).map(Be)),_t):Ue},_t.base=function(dt){return arguments.length?(Te=+dt,le.domain(Ue.map(Be)),_t):Te},_t.nice=function(){var dt=En(Ue.map(Be),Re?Math:Ua);return le.domain(dt),Ue=dt.map(Qe),_t},_t.ticks=function(){var dt=Fr(Ue),Rt=[],Jt=dt[0],tr=dt[1],rr=Math.floor(Be(Jt)),Er=Math.ceil(Be(tr)),qr=Te%1?2:Te;if(isFinite(Er-rr)){if(Re){for(;rr<Er;rr++)for(var cn=1;cn<qr;cn++)Rt.push(Qe(rr)*cn);Rt.push(Qe(rr))}else for(Rt.push(Qe(rr));rr++<Er;)for(var cn=qr-1;cn>0;cn--)Rt.push(Qe(rr)*cn);for(rr=0;Rt[rr]<Jt;rr++);for(Er=Rt.length;Rt[Er-1]>tr;Er--);Rt=Rt.slice(rr,Er)}return Rt},_t.copy=function(){return Da(le.copy(),Te,Re,Ue)},Rn(_t,le)}var Ua={floor:function(le){return-Math.ceil(-le)},ceil:function(le){return-Math.floor(-le)}};m.scale.pow=function(){return Va(m.scale.linear(),1,[0,1])};function Va(le,Te,Re){var Ue=qn(Te),Be=qn(1/Te);function Qe(_t){return le(Ue(_t))}return Qe.invert=function(_t){return Be(le.invert(_t))},Qe.domain=function(_t){return arguments.length?(le.domain((Re=_t.map(Number)).map(Ue)),Qe):Re},Qe.ticks=function(_t){return Ba(Re,_t)},Qe.tickFormat=function(_t,dt){return d3_scale_linearTickFormat(Re,_t,dt)},Qe.nice=function(_t){return Qe.domain(Yn(Re,_t))},Qe.exponent=function(_t){return arguments.length?(Ue=qn(Te=_t),Be=qn(1/Te),le.domain(Re.map(Ue)),Qe):Te},Qe.copy=function(){return Va(le.copy(),Te,Re)},Rn(Qe,le)}function qn(le){return function(Te){return Te<0?-Math.pow(-Te,le):Math.pow(Te,le)}}m.scale.sqrt=function(){return m.scale.pow().exponent(.5)},m.scale.ordinal=function(){return da([],{t:"range",a:[[]]})};function da(le,Te){var Re,Ue,Be;function Qe(dt){return Ue[((Re.get(dt)||(Te.t==="range"?Re.set(dt,le.push(dt)):NaN))-1)%Ue.length]}function _t(dt,Rt){return m.range(le.length).map(function(Jt){return dt+Rt*Jt})}return Qe.domain=function(dt){if(!arguments.length)return le;le=[],Re=new M;for(var Rt=-1,Jt=dt.length,tr;++Rt<Jt;)Re.has(tr=dt[Rt])||Re.set(tr,le.push(tr));return Qe[Te.t].apply(Qe,Te.a)},Qe.range=function(dt){return arguments.length?(Ue=dt,Be=0,Te={t:"range",a:arguments},Qe):Ue},Qe.rangePoints=function(dt,Rt){arguments.length<2&&(Rt=0);var Jt=dt[0],tr=dt[1],rr=le.length<2?(Jt=(Jt+tr)/2,0):(tr-Jt)/(le.length-1+Rt);return Ue=_t(Jt+rr*Rt/2,rr),Be=0,Te={t:"rangePoints",a:arguments},Qe},Qe.rangeRoundPoints=function(dt,Rt){arguments.length<2&&(Rt=0);var Jt=dt[0],tr=dt[1],rr=le.length<2?(Jt=tr=Math.round((Jt+tr)/2),0):(tr-Jt)/(le.length-1+Rt)|0;return Ue=_t(Jt+Math.round(rr*Rt/2+(tr-Jt-(le.length-1+Rt)*rr)/2),rr),Be=0,Te={t:"rangeRoundPoints",a:arguments},Qe},Qe.rangeBands=function(dt,Rt,Jt){arguments.length<2&&(Rt=0),arguments.length<3&&(Jt=Rt);var tr=dt[1]<dt[0],rr=dt[tr-0],Er=dt[1-tr],qr=(Er-rr)/(le.length-Rt+2*Jt);return Ue=_t(rr+qr*Jt,qr),tr&&Ue.reverse(),Be=qr*(1-Rt),Te={t:"rangeBands",a:arguments},Qe},Qe.rangeRoundBands=function(dt,Rt,Jt){arguments.length<2&&(Rt=0),arguments.length<3&&(Jt=Rt);var tr=dt[1]<dt[0],rr=dt[tr-0],Er=dt[1-tr],qr=Math.floor((Er-rr)/(le.length-Rt+2*Jt));return Ue=_t(rr+Math.round((Er-rr-(le.length-Rt)*qr)/2),qr),tr&&Ue.reverse(),Be=Math.round(qr*(1-Rt)),Te={t:"rangeRoundBands",a:arguments},Qe},Qe.rangeBand=function(){return Be},Qe.rangeExtent=function(){return Fr(Te.a[0])},Qe.copy=function(){return da(le,Te)},Qe.domain(le)}m.scale.category10=function(){return m.scale.ordinal().range(Za)},m.scale.category20=function(){return m.scale.ordinal().range(ti)},m.scale.category20b=function(){return m.scale.ordinal().range(_i)},m.scale.category20c=function(){return m.scale.ordinal().range(wi)};var Za=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(kr),ti=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(kr),_i=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(kr),wi=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(kr);m.scale.quantile=function(){return Ai([],[])};function Ai(le,Te){var Re;function Ue(){var Qe=0,_t=Te.length;for(Re=[];++Qe<_t;)Re[Qe-1]=m.quantile(le,Qe/_t);return Be}function Be(Qe){if(!isNaN(Qe=+Qe))return Te[m.bisect(Re,Qe)]}return Be.domain=function(Qe){return arguments.length?(le=Qe.map(b).filter(g).sort(o),Ue()):le},Be.range=function(Qe){return arguments.length?(Te=Qe,Ue()):Te},Be.quantiles=function(){return Re},Be.invertExtent=function(Qe){return Qe=Te.indexOf(Qe),Qe<0?[NaN,NaN]:[Qe>0?Re[Qe-1]:le[0],Qe<Re.length?Re[Qe]:le[le.length-1]]},Be.copy=function(){return Ai(le,Te)},Ue()}m.scale.quantize=function(){return Li(0,1,[0,1])};function Li(le,Te,Re){var Ue,Be;function Qe(dt){return Re[Math.max(0,Math.min(Be,Math.floor(Ue*(dt-le))))]}function _t(){return Ue=Re.length/(Te-le),Be=Re.length-1,Qe}return Qe.domain=function(dt){return arguments.length?(le=+dt[0],Te=+dt[dt.length-1],_t()):[le,Te]},Qe.range=function(dt){return arguments.length?(Re=dt,_t()):Re},Qe.invertExtent=function(dt){return dt=Re.indexOf(dt),dt=dt<0?NaN:dt/Ue+le,[dt,dt+1/Ue]},Qe.copy=function(){return Li(le,Te,Re)},_t()}m.scale.threshold=function(){return ci([.5],[0,1])};function ci(le,Te){function Re(Ue){if(Ue<=Ue)return Te[m.bisect(le,Ue)]}return Re.domain=function(Ue){return arguments.length?(le=Ue,Re):le},Re.range=function(Ue){return arguments.length?(Te=Ue,Re):Te},Re.invertExtent=function(Ue){return Ue=Te.indexOf(Ue),[le[Ue-1],le[Ue]]},Re.copy=function(){return ci(le,Te)},Re}m.scale.identity=function(){return Eo([0,1])};function Eo(le){function Te(Re){return+Re}return Te.invert=Te,Te.domain=Te.range=function(Re){return arguments.length?(le=Re.map(Te),Te):le},Te.ticks=function(Re){return Ba(le,Re)},Te.tickFormat=function(Re,Ue){return d3_scale_linearTickFormat(le,Re,Ue)},Te.copy=function(){return Eo(le)},Te}m.svg={};function uo(){return 0}m.svg.arc=function(){var le=ga,Te=Mi,Re=uo,Ue=ei,Be=xo,Qe=Ao,_t=xs;function dt(){var Jt=Math.max(0,+le.apply(this,arguments)),tr=Math.max(0,+Te.apply(this,arguments)),rr=Be.apply(this,arguments)-qe,Er=Qe.apply(this,arguments)-qe,qr=Math.abs(Er-rr),cn=rr>Er?0:1;if(tr<Jt&&(Dr=tr,tr=Jt,Jt=Dr),qr>=Ke)return Rt(tr,cn)+(Jt?Rt(Jt,1-cn):"")+"Z";var Dr,Vr,Kr,sn,un=0,Qr=0,Gn,ia,Ma,la,Pa,fa,Ga,Fa,ri=[];if((sn=(+_t.apply(this,arguments)||0)/2)&&(Kr=Ue===ei?Math.sqrt(Jt*Jt+tr*tr):+Ue.apply(this,arguments),cn||(Qr*=-1),tr&&(Qr=Ht(Kr/tr*Math.sin(sn))),Jt&&(un=Ht(Kr/Jt*Math.sin(sn)))),tr){Gn=tr*Math.cos(rr+Qr),ia=tr*Math.sin(rr+Qr),Ma=tr*Math.cos(Er-Qr),la=tr*Math.sin(Er-Qr);var Ti=Math.abs(Er-rr-2*Qr)<=Se?0:1;if(Qr&&Bs(Gn,ia,Ma,la)===cn^Ti){var _o=(rr+Er)/2;Gn=tr*Math.cos(_o),ia=tr*Math.sin(_o),Ma=la=null}}else Gn=ia=0;if(Jt){Pa=Jt*Math.cos(Er-un),fa=Jt*Math.sin(Er-un),Ga=Jt*Math.cos(rr+un),Fa=Jt*Math.sin(rr+un);var Hi=Math.abs(rr-Er+2*un)<=Se?0:1;if(un&&Bs(Pa,fa,Ga,Fa)===1-cn^Hi){var va=(rr+Er)/2;Pa=Jt*Math.cos(va),fa=Jt*Math.sin(va),Ga=Fa=null}}else Pa=fa=0;if(qr>at&&(Dr=Math.min(Math.abs(tr-Jt)/2,+Re.apply(this,arguments)))>.001){Vr=Jt<tr^cn?0:1;var li=Dr,Ja=Dr;if(qr<Se){var Di=Ga==null?[Pa,fa]:Ma==null?[Gn,ia]:Ka([Gn,ia],[Ga,Fa],[Ma,la],[Pa,fa]),fi=Gn-Di[0],go=ia-Di[1],oo=Ma-Di[0],So=la-Di[1],ts=1/Math.sin(Math.acos((fi*oo+go*So)/(Math.sqrt(fi*fi+go*go)*Math.sqrt(oo*oo+So*So)))/2),jo=Math.sqrt(Di[0]*Di[0]+Di[1]*Di[1]);Ja=Math.min(Dr,(Jt-jo)/(ts-1)),li=Math.min(Dr,(tr-jo)/(ts+1))}if(Ma!=null){var rs=Xo(Ga==null?[Pa,fa]:[Ga,Fa],[Gn,ia],tr,li,cn),Qi=Xo([Ma,la],[Pa,fa],tr,li,cn);Dr===li?ri.push("M",rs[0],"A",li,",",li," 0 0,",Vr," ",rs[1],"A",tr,",",tr," 0 ",1-cn^Bs(rs[1][0],rs[1][1],Qi[1][0],Qi[1][1]),",",cn," ",Qi[1],"A",li,",",li," 0 0,",Vr," ",Qi[0]):ri.push("M",rs[0],"A",li,",",li," 0 1,",Vr," ",Qi[0])}else ri.push("M",Gn,",",ia);if(Ga!=null){var Xi=Xo([Gn,ia],[Ga,Fa],Jt,-Ja,cn),Oa=Xo([Pa,fa],Ma==null?[Gn,ia]:[Ma,la],Jt,-Ja,cn);Dr===Ja?ri.push("L",Oa[0],"A",Ja,",",Ja," 0 0,",Vr," ",Oa[1],"A",Jt,",",Jt," 0 ",cn^Bs(Oa[1][0],Oa[1][1],Xi[1][0],Xi[1][1]),",",1-cn," ",Xi[1],"A",Ja,",",Ja," 0 0,",Vr," ",Xi[0]):ri.push("L",Oa[0],"A",Ja,",",Ja," 0 0,",Vr," ",Xi[0])}else ri.push("L",Pa,",",fa)}else ri.push("M",Gn,",",ia),Ma!=null&&ri.push("A",tr,",",tr," 0 ",Ti,",",cn," ",Ma,",",la),ri.push("L",Pa,",",fa),Ga!=null&&ri.push("A",Jt,",",Jt," 0 ",Hi,",",1-cn," ",Ga,",",Fa);return ri.push("Z"),ri.join("")}function Rt(Jt,tr){return"M0,"+Jt+"A"+Jt+","+Jt+" 0 1,"+tr+" 0,"+-Jt+"A"+Jt+","+Jt+" 0 1,"+tr+" 0,"+Jt}return dt.innerRadius=function(Jt){return arguments.length?(le=nt(Jt),dt):le},dt.outerRadius=function(Jt){return arguments.length?(Te=nt(Jt),dt):Te},dt.cornerRadius=function(Jt){return arguments.length?(Re=nt(Jt),dt):Re},dt.padRadius=function(Jt){return arguments.length?(Ue=Jt==ei?ei:nt(Jt),dt):Ue},dt.startAngle=function(Jt){return arguments.length?(Be=nt(Jt),dt):Be},dt.endAngle=function(Jt){return arguments.length?(Qe=nt(Jt),dt):Qe},dt.padAngle=function(Jt){return arguments.length?(_t=nt(Jt),dt):_t},dt.centroid=function(){var Jt=(+le.apply(this,arguments)+ +Te.apply(this,arguments))/2,tr=(+Be.apply(this,arguments)+ +Qe.apply(this,arguments))/2-qe;return[Math.cos(tr)*Jt,Math.sin(tr)*Jt]},dt};var ei="auto";function ga(le){return le.innerRadius}function Mi(le){return le.outerRadius}function xo(le){return le.startAngle}function Ao(le){return le.endAngle}function xs(le){return le&&le.padAngle}function Bs(le,Te,Re,Ue){return(le-Re)*Te-(Te-Ue)*le>0?0:1}function Xo(le,Te,Re,Ue,Be){var Qe=le[0]-Te[0],_t=le[1]-Te[1],dt=(Be?Ue:-Ue)/Math.sqrt(Qe*Qe+_t*_t),Rt=dt*_t,Jt=-dt*Qe,tr=le[0]+Rt,rr=le[1]+Jt,Er=Te[0]+Rt,qr=Te[1]+Jt,cn=(tr+Er)/2,Dr=(rr+qr)/2,Vr=Er-tr,Kr=qr-rr,sn=Vr*Vr+Kr*Kr,un=Re-Ue,Qr=tr*qr-Er*rr,Gn=(Kr<0?-1:1)*Math.sqrt(Math.max(0,un*un*sn-Qr*Qr)),ia=(Qr*Kr-Vr*Gn)/sn,Ma=(-Qr*Vr-Kr*Gn)/sn,la=(Qr*Kr+Vr*Gn)/sn,Pa=(-Qr*Vr+Kr*Gn)/sn,fa=ia-cn,Ga=Ma-Dr,Fa=la-cn,ri=Pa-Dr;return fa*fa+Ga*Ga>Fa*Fa+ri*ri&&(ia=la,Ma=Pa),[[ia-Rt,Ma-Jt],[ia*Re/un,Ma*Re/un]]}function fl(){return!0}function ks(le){var Te=Wn,Re=ya,Ue=fl,Be=Co,Qe=Be.key,_t=.7;function dt(Rt){var Jt=[],tr=[],rr=-1,Er=Rt.length,qr,cn=nt(Te),Dr=nt(Re);function Vr(){Jt.push("M",Be(le(tr),_t))}for(;++rr<Er;)Ue.call(this,qr=Rt[rr],rr)?tr.push([+cn.call(this,qr,rr),+Dr.call(this,qr,rr)]):tr.length&&(Vr(),tr=[]);return tr.length&&Vr(),Jt.length?Jt.join(""):null}return dt.x=function(Rt){return arguments.length?(Te=Rt,dt):Te},dt.y=function(Rt){return arguments.length?(Re=Rt,dt):Re},dt.defined=function(Rt){return arguments.length?(Ue=Rt,dt):Ue},dt.interpolate=function(Rt){return arguments.length?(typeof Rt=="function"?Qe=Be=Rt:Qe=(Be=bs.get(Rt)||Co).key,dt):Qe},dt.tension=function(Rt){return arguments.length?(_t=Rt,dt):_t},dt}m.svg.line=function(){return ks(D)};var bs=m.map({linear:Co,"linear-closed":uu,step:ku,"step-before":_s,"step-after":qu,basis:Us,"basis-open":Gc,"basis-closed":Tc,bundle:Ac,cardinal:_c,"cardinal-open":cu,"cardinal-closed":Ff,monotone:Ze});bs.forEach(function(le,Te){Te.key=le,Te.closed=/-closed$/.test(le)});function Co(le){return le.length>1?le.join("L"):le+"Z"}function uu(le){return le.join("L")+"Z"}function ku(le){for(var Te=0,Re=le.length,Ue=le[0],Be=[Ue[0],",",Ue[1]];++Te<Re;)Be.push("H",(Ue[0]+(Ue=le[Te])[0])/2,"V",Ue[1]);return Re>1&&Be.push("H",Ue[0]),Be.join("")}function _s(le){for(var Te=0,Re=le.length,Ue=le[0],Be=[Ue[0],",",Ue[1]];++Te<Re;)Be.push("V",(Ue=le[Te])[1],"H",Ue[0]);return Be.join("")}function qu(le){for(var Te=0,Re=le.length,Ue=le[0],Be=[Ue[0],",",Ue[1]];++Te<Re;)Be.push("H",(Ue=le[Te])[0],"V",Ue[1]);return Be.join("")}function cu(le,Te){return le.length<4?Co(le):le[1]+ec(le.slice(1,-1),wc(le,Te))}function Ff(le,Te){return le.length<3?uu(le):le[0]+ec((le.push(le[0]),le),wc([le[le.length-2]].concat(le,[le[1]]),Te))}function _c(le,Te){return le.length<3?Co(le):le[0]+ec(le,wc(le,Te))}function ec(le,Te){if(Te.length<1||le.length!=Te.length&&le.length!=Te.length+2)return Co(le);var Re=le.length!=Te.length,Ue="",Be=le[0],Qe=le[1],_t=Te[0],dt=_t,Rt=1;if(Re&&(Ue+="Q"+(Qe[0]-_t[0]*2/3)+","+(Qe[1]-_t[1]*2/3)+","+Qe[0]+","+Qe[1],Be=le[1],Rt=2),Te.length>1){dt=Te[1],Qe=le[Rt],Rt++,Ue+="C"+(Be[0]+_t[0])+","+(Be[1]+_t[1])+","+(Qe[0]-dt[0])+","+(Qe[1]-dt[1])+","+Qe[0]+","+Qe[1];for(var Jt=2;Jt<Te.length;Jt++,Rt++)Qe=le[Rt],dt=Te[Jt],Ue+="S"+(Qe[0]-dt[0])+","+(Qe[1]-dt[1])+","+Qe[0]+","+Qe[1]}if(Re){var tr=le[Rt];Ue+="Q"+(Qe[0]+dt[0]*2/3)+","+(Qe[1]+dt[1]*2/3)+","+tr[0]+","+tr[1]}return Ue}function wc(le,Te){for(var Re=[],Ue=(1-Te)/2,Be,Qe=le[0],_t=le[1],dt=1,Rt=le.length;++dt<Rt;)Be=Qe,Qe=_t,_t=le[dt],Re.push([Ue*(_t[0]-Be[0]),Ue*(_t[1]-Be[1])]);return Re}function Us(le){if(le.length<3)return Co(le);var Te=1,Re=le.length,Ue=le[0],Be=Ue[0],Qe=Ue[1],_t=[Be,Be,Be,(Ue=le[1])[0]],dt=[Qe,Qe,Qe,Ue[1]],Rt=[Be,",",Qe,"L",Zo(Ls,_t),",",Zo(Ls,dt)];for(le.push(le[Re-1]);++Te<=Re;)Ue=le[Te],_t.shift(),_t.push(Ue[0]),dt.shift(),dt.push(Ue[1]),tc(Rt,_t,dt);return le.pop(),Rt.push("L",Ue),Rt.join("")}function Gc(le){if(le.length<4)return Co(le);for(var Te=[],Re=-1,Ue=le.length,Be,Qe=[0],_t=[0];++Re<3;)Be=le[Re],Qe.push(Be[0]),_t.push(Be[1]);for(Te.push(Zo(Ls,Qe)+","+Zo(Ls,_t)),--Re;++Re<Ue;)Be=le[Re],Qe.shift(),Qe.push(Be[0]),_t.shift(),_t.push(Be[1]),tc(Te,Qe,_t);return Te.join("")}function Tc(le){for(var Te,Re=-1,Ue=le.length,Be=Ue+4,Qe,_t=[],dt=[];++Re<4;)Qe=le[Re%Ue],_t.push(Qe[0]),dt.push(Qe[1]);for(Te=[Zo(Ls,_t),",",Zo(Ls,dt)],--Re;++Re<Be;)Qe=le[Re%Ue],_t.shift(),_t.push(Qe[0]),dt.shift(),dt.push(Qe[1]),tc(Te,_t,dt);return Te.join("")}function Ac(le,Te){var Re=le.length-1;if(Re)for(var Ue=le[0][0],Be=le[0][1],Qe=le[Re][0]-Ue,_t=le[Re][1]-Be,dt=-1,Rt,Jt;++dt<=Re;)Rt=le[dt],Jt=dt/Re,Rt[0]=Te*Rt[0]+(1-Te)*(Ue+Jt*Qe),Rt[1]=Te*Rt[1]+(1-Te)*(Be+Jt*_t);return Us(le)}function Zo(le,Te){return le[0]*Te[0]+le[1]*Te[1]+le[2]*Te[2]+le[3]*Te[3]}var Mc=[0,2/3,1/3,0],of=[0,1/3,2/3,0],Ls=[0,1/6,2/3,1/6];function tc(le,Te,Re){le.push("C",Zo(Mc,Te),",",Zo(Mc,Re),",",Zo(of,Te),",",Zo(of,Re),",",Zo(Ls,Te),",",Zo(Ls,Re))}function rc(le,Te){return(Te[1]-le[1])/(Te[0]-le[0])}function Sc(le){for(var Te=0,Re=le.length-1,Ue=[],Be=le[0],Qe=le[1],_t=Ue[0]=rc(Be,Qe);++Te<Re;)Ue[Te]=(_t+(_t=rc(Be=Qe,Qe=le[Te+1])))/2;return Ue[Te]=_t,Ue}function Ne(le){for(var Te=[],Re,Ue,Be,Qe,_t=Sc(le),dt=-1,Rt=le.length-1;++dt<Rt;)Re=rc(le[dt],le[dt+1]),l(Re)<at?_t[dt]=_t[dt+1]=0:(Ue=_t[dt]/Re,Be=_t[dt+1]/Re,Qe=Ue*Ue+Be*Be,Qe>9&&(Qe=Re*3/Math.sqrt(Qe),_t[dt]=Qe*Ue,_t[dt+1]=Qe*Be));for(dt=-1;++dt<=Rt;)Qe=(le[Math.min(Rt,dt+1)][0]-le[Math.max(0,dt-1)][0])/(6*(1+_t[dt]*_t[dt])),Te.push([Qe||0,_t[dt]*Qe||0]);return Te}function Ze(le){return le.length<3?Co(le):le[0]+ec(le,Ne(le))}m.svg.line.radial=function(){var le=ks(rt);return le.radius=le.x,delete le.x,le.angle=le.y,delete le.y,le};function rt(le){for(var Te,Re=-1,Ue=le.length,Be,Qe;++Re<Ue;)Te=le[Re],Be=Te[0],Qe=Te[1]-qe,Te[0]=Be*Math.cos(Qe),Te[1]=Be*Math.sin(Qe);return le}function lt(le){var Te=Wn,Re=Wn,Ue=0,Be=ya,Qe=fl,_t=Co,dt=_t.key,Rt=_t,Jt="L",tr=.7;function rr(Er){var qr=[],cn=[],Dr=[],Vr=-1,Kr=Er.length,sn,un=nt(Te),Qr=nt(Ue),Gn=Te===Re?function(){return Ma}:nt(Re),ia=Ue===Be?function(){return la}:nt(Be),Ma,la;function Pa(){qr.push("M",_t(le(Dr),tr),Jt,Rt(le(cn.reverse()),tr),"Z")}for(;++Vr<Kr;)Qe.call(this,sn=Er[Vr],Vr)?(cn.push([Ma=+un.call(this,sn,Vr),la=+Qr.call(this,sn,Vr)]),Dr.push([+Gn.call(this,sn,Vr),+ia.call(this,sn,Vr)])):cn.length&&(Pa(),cn=[],Dr=[]);return cn.length&&Pa(),qr.length?qr.join(""):null}return rr.x=function(Er){return arguments.length?(Te=Re=Er,rr):Re},rr.x0=function(Er){return arguments.length?(Te=Er,rr):Te},rr.x1=function(Er){return arguments.length?(Re=Er,rr):Re},rr.y=function(Er){return arguments.length?(Ue=Be=Er,rr):Be},rr.y0=function(Er){return arguments.length?(Ue=Er,rr):Ue},rr.y1=function(Er){return arguments.length?(Be=Er,rr):Be},rr.defined=function(Er){return arguments.length?(Qe=Er,rr):Qe},rr.interpolate=function(Er){return arguments.length?(typeof Er=="function"?dt=_t=Er:dt=(_t=bs.get(Er)||Co).key,Rt=_t.reverse||_t,Jt=_t.closed?"M":"L",rr):dt},rr.tension=function(Er){return arguments.length?(tr=Er,rr):tr},rr}_s.reverse=qu,qu.reverse=_s,m.svg.area=function(){return lt(D)},m.svg.area.radial=function(){var le=lt(rt);return le.radius=le.x,delete le.x,le.innerRadius=le.x0,delete le.x0,le.outerRadius=le.x1,delete le.x1,le.angle=le.y,delete le.y,le.startAngle=le.y0,delete le.y0,le.endAngle=le.y1,delete le.y1,le};function wt(le){return le.source}function bt(le){return le.target}m.svg.chord=function(){var le=wt,Te=bt,Re=kt,Ue=xo,Be=Ao;function Qe(tr,rr){var Er=_t(this,le,tr,rr),qr=_t(this,Te,tr,rr);return"M"+Er.p0+Rt(Er.r,Er.p1,Er.a1-Er.a0)+(dt(Er,qr)?Jt(Er.r,Er.p1,Er.r,Er.p0):Jt(Er.r,Er.p1,qr.r,qr.p0)+Rt(qr.r,qr.p1,qr.a1-qr.a0)+Jt(qr.r,qr.p1,Er.r,Er.p0))+"Z"}function _t(tr,rr,Er,qr){var cn=rr.call(tr,Er,qr),Dr=Re.call(tr,cn,qr),Vr=Ue.call(tr,cn,qr)-qe,Kr=Be.call(tr,cn,qr)-qe;return{r:Dr,a0:Vr,a1:Kr,p0:[Dr*Math.cos(Vr),Dr*Math.sin(Vr)],p1:[Dr*Math.cos(Kr),Dr*Math.sin(Kr)]}}function dt(tr,rr){return tr.a0==rr.a0&&tr.a1==rr.a1}function Rt(tr,rr,Er){return"A"+tr+","+tr+" 0 "+ +(Er>Se)+",1 "+rr}function Jt(tr,rr,Er,qr){return"Q 0,0 "+qr}return Qe.radius=function(tr){return arguments.length?(Re=nt(tr),Qe):Re},Qe.source=function(tr){return arguments.length?(le=nt(tr),Qe):le},Qe.target=function(tr){return arguments.length?(Te=nt(tr),Qe):Te},Qe.startAngle=function(tr){return arguments.length?(Ue=nt(tr),Qe):Ue},Qe.endAngle=function(tr){return arguments.length?(Be=nt(tr),Qe):Be},Qe};function kt(le){return le.radius}m.svg.diagonal=function(){var le=wt,Te=bt,Re=hr;function Ue(Be,Qe){var _t=le.call(this,Be,Qe),dt=Te.call(this,Be,Qe),Rt=(_t.y+dt.y)/2,Jt=[_t,{x:_t.x,y:Rt},{x:dt.x,y:Rt},dt];return Jt=Jt.map(Re),"M"+Jt[0]+"C"+Jt[1]+" "+Jt[2]+" "+Jt[3]}return Ue.source=function(Be){return arguments.length?(le=nt(Be),Ue):le},Ue.target=function(Be){return arguments.length?(Te=nt(Be),Ue):Te},Ue.projection=function(Be){return arguments.length?(Re=Be,Ue):Re},Ue};function hr(le){return[le.x,le.y]}m.svg.diagonal.radial=function(){var le=m.svg.diagonal(),Te=hr,Re=le.projection;return le.projection=function(Ue){return arguments.length?Re(gr(Te=Ue)):Te},le};function gr(le){return function(){var Te=le.apply(this,arguments),Re=Te[0],Ue=Te[1]-qe;return[Re*Math.cos(Ue),Re*Math.sin(Ue)]}}m.svg.symbol=function(){var le=_r,Te=ur;function Re(Ue,Be){return(jr.get(le.call(this,Ue,Be))||Ir)(Te.call(this,Ue,Be))}return Re.type=function(Ue){return arguments.length?(le=nt(Ue),Re):le},Re.size=function(Ue){return arguments.length?(Te=nt(Ue),Re):Te},Re};function ur(){return 64}function _r(){return"circle"}function Ir(le){var Te=Math.sqrt(le/Se);return"M0,"+Te+"A"+Te+","+Te+" 0 1,1 0,"+-Te+"A"+Te+","+Te+" 0 1,1 0,"+Te+"Z"}var jr=m.map({circle:Ir,cross:function(le){var Te=Math.sqrt(le/5)/2;return"M"+-3*Te+","+-Te+"H"+-Te+"V"+-3*Te+"H"+Te+"V"+-Te+"H"+3*Te+"V"+Te+"H"+Te+"V"+3*Te+"H"+-Te+"V"+Te+"H"+-3*Te+"Z"},diamond:function(le){var Te=Math.sqrt(le/(2*wn)),Re=Te*wn;return"M0,"+-Te+"L"+Re+",0 0,"+Te+" "+-Re+",0Z"},square:function(le){var Te=Math.sqrt(le)/2;return"M"+-Te+","+-Te+"L"+Te+","+-Te+" "+Te+","+Te+" "+-Te+","+Te+"Z"},"triangle-down":function(le){var Te=Math.sqrt(le/tn),Re=Te*tn/2;return"M0,"+Re+"L"+Te+","+-Re+" "+-Te+","+-Re+"Z"},"triangle-up":function(le){var Te=Math.sqrt(le/tn),Re=Te*tn/2;return"M0,"+-Re+"L"+Te+","+Re+" "+-Te+","+Re+"Z"}});m.svg.symbolTypes=jr.keys();var tn=Math.sqrt(3),wn=Math.tan(30*Tt);re.transition=function(le){for(var Te=ja||++qa,Re=oi(le),Ue=[],Be,Qe,_t=ai||{time:Date.now(),ease:js,delay:0,duration:250},dt=-1,Rt=this.length;++dt<Rt;){Ue.push(Be=[]);for(var Jt=this[dt],tr=-1,rr=Jt.length;++tr<rr;)(Qe=Jt[tr])&&Ji(Qe,tr,Re,Te,_t),Be.push(Qe)}return ba(Ue,Re,Te)},re.interrupt=function(le){return this.each(le==null?In:jn(oi(le)))};var In=jn(oi());function jn(le){return function(){var Te,Re,Ue;(Te=this[le])&&(Ue=Te[Re=Te.active])&&(Ue.timer.c=null,Ue.timer.t=NaN,--Te.count?delete Te[Re]:delete this[le],Te.active+=.5,Ue.event&&Ue.event.interrupt.call(this,this.__data__,Ue.index))}}function ba(le,Te,Re){return Q(le,Ta),le.namespace=Te,le.id=Re,le}var Ta=[],qa=0,ja,ai;Ta.call=re.call,Ta.empty=re.empty,Ta.node=re.node,Ta.size=re.size,m.transition=function(le,Te){return le&&le.transition?ja?le.transition(Te):le:m.selection().transition(le)},m.transition.prototype=Ta,Ta.select=function(le){var Te=this.id,Re=this.namespace,Ue=[],Be,Qe,_t;le=j(le);for(var dt=-1,Rt=this.length;++dt<Rt;){Ue.push(Be=[]);for(var Jt=this[dt],tr=-1,rr=Jt.length;++tr<rr;)(_t=Jt[tr])&&(Qe=le.call(_t,_t.__data__,tr,dt))?("__data__"in _t&&(Qe.__data__=_t.__data__),Ji(Qe,tr,Re,Te,_t[Re][Te]),Be.push(Qe)):Be.push(null)}return ba(Ue,Re,Te)},Ta.selectAll=function(le){var Te=this.id,Re=this.namespace,Ue=[],Be,Qe,_t,dt,Rt;le=$(le);for(var Jt=-1,tr=this.length;++Jt<tr;)for(var rr=this[Jt],Er=-1,qr=rr.length;++Er<qr;)if(_t=rr[Er]){Rt=_t[Re][Te],Qe=le.call(_t,_t.__data__,Er,Jt),Ue.push(Be=[]);for(var cn=-1,Dr=Qe.length;++cn<Dr;)(dt=Qe[cn])&&Ji(dt,cn,Re,Te,Rt),Be.push(dt)}return ba(Ue,Re,Te)},Ta.filter=function(le){var Te=[],Re,Ue,Be;typeof le!="function"&&(le=Ae(le));for(var Qe=0,_t=this.length;Qe<_t;Qe++){Te.push(Re=[]);for(var Ue=this[Qe],dt=0,Rt=Ue.length;dt<Rt;dt++)(Be=Ue[dt])&&le.call(Be,Be.__data__,dt,Qe)&&Re.push(Be)}return ba(Te,this.namespace,this.id)},Ta.tween=function(le,Te){var Re=this.id,Ue=this.namespace;return arguments.length<2?this.node()[Ue][Re].tween.get(le):je(this,Te==null?function(Be){Be[Ue][Re].tween.remove(le)}:function(Be){Be[Ue][Re].tween.set(le,Te)})};function gi(le,Te,Re,Ue){var Be=le.id,Qe=le.namespace;return je(le,typeof Re=="function"?function(_t,dt,Rt){_t[Qe][Be].tween.set(Te,Ue(Re.call(_t,_t.__data__,dt,Rt)))}:(Re=Ue(Re),function(_t){_t[Qe][Be].tween.set(Te,Re)}))}Ta.attr=function(le,Te){if(arguments.length<2){for(Te in le)this.attr(Te,le[Te]);return this}var Re=le=="transform"?iu:vo,Ue=m.ns.qualify(le);function Be(){this.removeAttribute(Ue)}function Qe(){this.removeAttributeNS(Ue.space,Ue.local)}function _t(Rt){return Rt==null?Be:(Rt+="",function(){var Jt=this.getAttribute(Ue),tr;return Jt!==Rt&&(tr=Re(Jt,Rt),function(rr){this.setAttribute(Ue,tr(rr))})})}function dt(Rt){return Rt==null?Qe:(Rt+="",function(){var Jt=this.getAttributeNS(Ue.space,Ue.local),tr;return Jt!==Rt&&(tr=Re(Jt,Rt),function(rr){this.setAttributeNS(Ue.space,Ue.local,tr(rr))})})}return gi(this,"attr."+le,Te,Ue.local?dt:_t)},Ta.attrTween=function(le,Te){var Re=m.ns.qualify(le);function Ue(Qe,_t){var dt=Te.call(this,Qe,_t,this.getAttribute(Re));return dt&&function(Rt){this.setAttribute(Re,dt(Rt))}}function Be(Qe,_t){var dt=Te.call(this,Qe,_t,this.getAttributeNS(Re.space,Re.local));return dt&&function(Rt){this.setAttributeNS(Re.space,Re.local,dt(Rt))}}return this.tween("attr."+le,Re.local?Be:Ue)},Ta.style=function(le,Te,Re){var Ue=arguments.length;if(Ue<3){if(typeof le!="string"){Ue<2&&(Te="");for(Re in le)this.style(Re,le[Re],Te);return this}Re=""}function Be(){this.style.removeProperty(le)}function Qe(_t){return _t==null?Be:(_t+="",function(){var dt=a(this).getComputedStyle(this,null).getPropertyValue(le),Rt;return dt!==_t&&(Rt=vo(dt,_t),function(Jt){this.style.setProperty(le,Rt(Jt),Re)})})}return gi(this,"style."+le,Te,Qe)},Ta.styleTween=function(le,Te,Re){arguments.length<3&&(Re="");function Ue(Be,Qe){var _t=Te.call(this,Be,Qe,a(this).getComputedStyle(this,null).getPropertyValue(le));return _t&&function(dt){this.style.setProperty(le,_t(dt),Re)}}return this.tween("style."+le,Ue)},Ta.text=function(le){return gi(this,"text",le,po)};function po(le){return le==null&&(le=""),function(){this.textContent=le}}Ta.remove=function(){var le=this.namespace;return this.each("end.transition",function(){var Te;this[le].count<2&&(Te=this.parentNode)&&Te.removeChild(this)})},Ta.ease=function(le){var Te=this.id,Re=this.namespace;return arguments.length<1?this.node()[Re][Te].ease:(typeof le!="function"&&(le=m.ease.apply(m,arguments)),je(this,function(Ue){Ue[Re][Te].ease=le}))},Ta.delay=function(le){var Te=this.id,Re=this.namespace;return arguments.length<1?this.node()[Re][Te].delay:je(this,typeof le=="function"?function(Ue,Be,Qe){Ue[Re][Te].delay=+le.call(Ue,Ue.__data__,Be,Qe)}:(le=+le,function(Ue){Ue[Re][Te].delay=le}))},Ta.duration=function(le){var Te=this.id,Re=this.namespace;return arguments.length<1?this.node()[Re][Te].duration:je(this,typeof le=="function"?function(Ue,Be,Qe){Ue[Re][Te].duration=Math.max(1,le.call(Ue,Ue.__data__,Be,Qe))}:(le=Math.max(1,le),function(Ue){Ue[Re][Te].duration=le}))},Ta.each=function(le,Te){var Re=this.id,Ue=this.namespace;if(arguments.length<2){var Be=ai,Qe=ja;try{ja=Re,je(this,function(_t,dt,Rt){ai=_t[Ue][Re],le.call(_t,_t.__data__,dt,Rt)})}finally{ai=Be,ja=Qe}}else je(this,function(_t){var dt=_t[Ue][Re];(dt.event||(dt.event=m.dispatch("start","end","interrupt"))).on(le,Te)});return this},Ta.transition=function(){for(var le=this.id,Te=++qa,Re=this.namespace,Ue=[],Be,Qe,_t,dt,Rt=0,Jt=this.length;Rt<Jt;Rt++){Ue.push(Be=[]);for(var Qe=this[Rt],tr=0,rr=Qe.length;tr<rr;tr++)(_t=Qe[tr])&&(dt=_t[Re][le],Ji(_t,tr,Re,Te,{time:dt.time,ease:dt.ease,delay:dt.delay+dt.duration,duration:dt.duration})),Be.push(_t)}return ba(Ue,Re,Te)};function oi(le){return le==null?"__transition__":"__transition_"+le+"__"}function Ji(le,Te,Re,Ue,Be){var Qe=le[Re]||(le[Re]={active:0,count:0}),_t=Qe[Ue],dt,Rt,Jt,tr,rr;function Er(Dr){var Vr=_t.delay;if(Rt.t=Vr+dt,Vr<=Dr)return qr(Dr-Vr);Rt.c=qr}function qr(Dr){var Vr=Qe.active,Kr=Qe[Vr];Kr&&(Kr.timer.c=null,Kr.timer.t=NaN,--Qe.count,delete Qe[Vr],Kr.event&&Kr.event.interrupt.call(le,le.__data__,Kr.index));for(var sn in Qe)if(+sn<Ue){var un=Qe[sn];un.timer.c=null,un.timer.t=NaN,--Qe.count,delete Qe[sn]}Rt.c=cn,vn(function(){return Rt.c&&cn(Dr||1)&&(Rt.c=null,Rt.t=NaN),1},0,dt),Qe.active=Ue,_t.event&&_t.event.start.call(le,le.__data__,Te),rr=[],_t.tween.forEach(function(Qr,Gn){(Gn=Gn.call(le,le.__data__,Te))&&rr.push(Gn)}),tr=_t.ease,Jt=_t.duration}function cn(Dr){for(var Vr=Dr/Jt,Kr=tr(Vr),sn=rr.length;sn>0;)rr[--sn].call(le,Kr);if(Vr>=1)return _t.event&&_t.event.end.call(le,le.__data__,Te),--Qe.count?delete Qe[Ue]:delete le[Re],1}_t||(dt=Be.time,Rt=vn(Er,0,dt),_t=Qe[Ue]={tween:new M,time:dt,timer:Rt,delay:Be.delay,duration:Be.duration,ease:Be.ease,index:Te},Be=null,++Qe.count)}m.svg.axis=function(){var le=m.scale.linear(),Te=bo,Re=6,Ue=6,Be=3,Qe=[10],_t=null,dt;function Rt(Jt){Jt.each(function(){var tr=m.select(this),rr=this.__chart__||le,Er=this.__chart__=le.copy(),qr=_t==null?Er.ticks?Er.ticks.apply(Er,Qe):Er.domain():_t,cn=dt==null?Er.tickFormat?Er.tickFormat.apply(Er,Qe):D:dt,Dr=tr.selectAll(".tick").data(qr,Er),Vr=Dr.enter().insert("g",".domain").attr("class","tick").style("opacity",at),Kr=m.transition(Dr.exit()).style("opacity",at).remove(),sn=m.transition(Dr.order()).style("opacity",1),un=Math.max(Re,0)+Be,Qr,Gn=nn(Er),ia=tr.selectAll(".domain").data([0]),Ma=(ia.enter().append("path").attr("class","domain"),m.transition(ia));Vr.append("line"),Vr.append("text");var la=Vr.select("line"),Pa=sn.select("line"),fa=Dr.select("text").text(cn),Ga=Vr.select("text"),Fa=sn.select("text"),ri=Te==="top"||Te==="left"?-1:1,Ti,_o,Hi,va;if(Te==="bottom"||Te==="top"?(Qr=Si,Ti="x",Hi="y",_o="x2",va="y2",fa.attr("dy",ri<0?"0em":".71em").style("text-anchor","middle"),Ma.attr("d","M"+Gn[0]+","+ri*Ue+"V0H"+Gn[1]+"V"+ri*Ue)):(Qr=Pi,Ti="y",Hi="x",_o="y2",va="x2",fa.attr("dy",".32em").style("text-anchor",ri<0?"end":"start"),Ma.attr("d","M"+ri*Ue+","+Gn[0]+"H0V"+Gn[1]+"H"+ri*Ue)),la.attr(va,ri*Re),Ga.attr(Hi,ri*un),Pa.attr(_o,0).attr(va,ri*Re),Fa.attr(Ti,0).attr(Hi,ri*un),Er.rangeBand){var li=Er,Ja=li.rangeBand()/2;rr=Er=function(Di){return li(Di)+Ja}}else rr.rangeBand?rr=Er:Kr.call(Qr,Er,rr);Vr.call(Qr,rr,Er),sn.call(Qr,Er,Er)})}return Rt.scale=function(Jt){return arguments.length?(le=Jt,Rt):le},Rt.orient=function(Jt){return arguments.length?(Te=Jt in Lo?Jt+"":bo,Rt):Te},Rt.ticks=function(){return arguments.length?(Qe=A(arguments),Rt):Qe},Rt.tickValues=function(Jt){return arguments.length?(_t=Jt,Rt):_t},Rt.tickFormat=function(Jt){return arguments.length?(dt=Jt,Rt):dt},Rt.tickSize=function(Jt){var tr=arguments.length;return tr?(Re=+Jt,Ue=+arguments[tr-1],Rt):Re},Rt.innerTickSize=function(Jt){return arguments.length?(Re=+Jt,Rt):Re},Rt.outerTickSize=function(Jt){return arguments.length?(Ue=+Jt,Rt):Ue},Rt.tickPadding=function(Jt){return arguments.length?(Be=+Jt,Rt):Be},Rt.tickSubdivide=function(){return arguments.length&&Rt},Rt};var bo="bottom",Lo={top:1,right:1,bottom:1,left:1};function Si(le,Te,Re){le.attr("transform",function(Ue){var Be=Te(Ue);return"translate("+(isFinite(Be)?Be:Re(Ue))+",0)"})}function Pi(le,Te,Re){le.attr("transform",function(Ue){var Be=Te(Ue);return"translate(0,"+(isFinite(Be)?Be:Re(Ue))+")"})}m.svg.brush=function(){var le=ne(tr,"brushstart","brush","brushend"),Te=null,Re=null,Ue=[0,0],Be=[0,0],Qe,_t,dt=!0,Rt=!0,Jt=Mo[0];function tr(Dr){Dr.each(function(){var Vr=m.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",cn).on("touchstart.brush",cn),Kr=Vr.selectAll(".background").data([0]);Kr.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),Vr.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var sn=Vr.selectAll(".resize").data(Jt,D);sn.exit().remove(),sn.enter().append("g").attr("class",function(ia){return"resize "+ia}).style("cursor",function(ia){return ws[ia]}).append("rect").attr("x",function(ia){return/[ew]$/.test(ia)?-3:null}).attr("y",function(ia){return/^[ns]/.test(ia)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),sn.style("display",tr.empty()?"none":null);var un=m.transition(Vr),Qr=m.transition(Kr),Gn;Te&&(Gn=nn(Te),Qr.attr("x",Gn[0]).attr("width",Gn[1]-Gn[0]),Er(un)),Re&&(Gn=nn(Re),Qr.attr("y",Gn[0]).attr("height",Gn[1]-Gn[0]),qr(un)),rr(un)})}tr.event=function(Dr){Dr.each(function(){var Vr=le.of(this,arguments),Kr={x:Ue,y:Be,i:Qe,j:_t},sn=this.__chart__||Kr;this.__chart__=Kr,ja?m.select(this).transition().each("start.brush",function(){Qe=sn.i,_t=sn.j,Ue=sn.x,Be=sn.y,Vr({type:"brushstart"})}).tween("brush:brush",function(){var un=io(Ue,Kr.x),Qr=io(Be,Kr.y);return Qe=_t=null,function(Gn){Ue=Kr.x=un(Gn),Be=Kr.y=Qr(Gn),Vr({type:"brush",mode:"resize"})}}).each("end.brush",function(){Qe=Kr.i,_t=Kr.j,Vr({type:"brush",mode:"resize"}),Vr({type:"brushend"})}):(Vr({type:"brushstart"}),Vr({type:"brush",mode:"resize"}),Vr({type:"brushend"}))})};function rr(Dr){Dr.selectAll(".resize").attr("transform",function(Vr){return"translate("+Ue[+/e$/.test(Vr)]+","+Be[+/^s/.test(Vr)]+")"})}function Er(Dr){Dr.select(".extent").attr("x",Ue[0]),Dr.selectAll(".extent,.n>rect,.s>rect").attr("width",Ue[1]-Ue[0])}function qr(Dr){Dr.select(".extent").attr("y",Be[0]),Dr.selectAll(".extent,.e>rect,.w>rect").attr("height",Be[1]-Be[0])}function cn(){var Dr=this,Vr=m.select(m.event.target),Kr=le.of(Dr,arguments),sn=m.select(Dr),un=Vr.datum(),Qr=!/^(n|s)$/.test(un)&&Te,Gn=!/^(e|w)$/.test(un)&&Re,ia=Vr.classed("extent"),Ma=Xt(Dr),la,Pa=m.mouse(Dr),fa,Ga=m.select(a(Dr)).on("keydown.brush",Ti).on("keyup.brush",_o);if(m.event.changedTouches?Ga.on("touchmove.brush",Hi).on("touchend.brush",li):Ga.on("mousemove.brush",Hi).on("mouseup.brush",li),sn.interrupt().selectAll("*").interrupt(),ia)Pa[0]=Ue[0]-Pa[0],Pa[1]=Be[0]-Pa[1];else if(un){var Fa=+/w$/.test(un),ri=+/^n/.test(un);fa=[Ue[1-Fa]-Pa[0],Be[1-ri]-Pa[1]],Pa[0]=Ue[Fa],Pa[1]=Be[ri]}else m.event.altKey&&(la=Pa.slice());sn.style("pointer-events","none").selectAll(".resize").style("display",null),m.select("body").style("cursor",Vr.style("cursor")),Kr({type:"brushstart"}),Hi();function Ti(){m.event.keyCode==32&&(ia||(la=null,Pa[0]-=Ue[1],Pa[1]-=Be[1],ia=2),Z())}function _o(){m.event.keyCode==32&&ia==2&&(Pa[0]+=Ue[1],Pa[1]+=Be[1],ia=0,Z())}function Hi(){var Ja=m.mouse(Dr),Di=!1;fa&&(Ja[0]+=fa[0],Ja[1]+=fa[1]),ia||(m.event.altKey?(la||(la=[(Ue[0]+Ue[1])/2,(Be[0]+Be[1])/2]),Pa[0]=Ue[+(Ja[0]<la[0])],Pa[1]=Be[+(Ja[1]<la[1])]):la=null),Qr&&va(Ja,Te,0)&&(Er(sn),Di=!0),Gn&&va(Ja,Re,1)&&(qr(sn),Di=!0),Di&&(rr(sn),Kr({type:"brush",mode:ia?"move":"resize"}))}function va(Ja,Di,fi){var go=nn(Di),oo=go[0],So=go[1],ts=Pa[fi],jo=fi?Be:Ue,rs=jo[1]-jo[0],Qi,Xi;if(ia&&(oo-=ts,So-=rs+ts),Qi=(fi?Rt:dt)?Math.max(oo,Math.min(So,Ja[fi])):Ja[fi],ia?Xi=(Qi+=ts)+rs:(la&&(ts=Math.max(oo,Math.min(So,2*la[fi]-Qi))),ts<Qi?(Xi=Qi,Qi=ts):Xi=ts),jo[0]!=Qi||jo[1]!=Xi)return fi?_t=null:Qe=null,jo[0]=Qi,jo[1]=Xi,!0}function li(){Hi(),sn.style("pointer-events","all").selectAll(".resize").style("display",tr.empty()?"none":null),m.select("body").style("cursor",null),Ga.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),Ma(),Kr({type:"brushend"})}}return tr.x=function(Dr){return arguments.length?(Te=Dr,Jt=Mo[!Te<<1|!Re],tr):Te},tr.y=function(Dr){return arguments.length?(Re=Dr,Jt=Mo[!Te<<1|!Re],tr):Re},tr.clamp=function(Dr){return arguments.length?(Te&&Re?(dt=!!Dr[0],Rt=!!Dr[1]):Te?dt=!!Dr:Re&&(Rt=!!Dr),tr):Te&&Re?[dt,Rt]:Te?dt:Re?Rt:null},tr.extent=function(Dr){var Vr,Kr,sn,un,Qr;return arguments.length?(Te&&(Vr=Dr[0],Kr=Dr[1],Re&&(Vr=Vr[0],Kr=Kr[0]),Qe=[Vr,Kr],Te.invert&&(Vr=Te(Vr),Kr=Te(Kr)),Kr<Vr&&(Qr=Vr,Vr=Kr,Kr=Qr),(Vr!=Ue[0]||Kr!=Ue[1])&&(Ue=[Vr,Kr])),Re&&(sn=Dr[0],un=Dr[1],Te&&(sn=sn[1],un=un[1]),_t=[sn,un],Re.invert&&(sn=Re(sn),un=Re(un)),un<sn&&(Qr=sn,sn=un,un=Qr),(sn!=Be[0]||un!=Be[1])&&(Be=[sn,un])),tr):(Te&&(Qe?(Vr=Qe[0],Kr=Qe[1]):(Vr=Ue[0],Kr=Ue[1],Te.invert&&(Vr=Te.invert(Vr),Kr=Te.invert(Kr)),Kr<Vr&&(Qr=Vr,Vr=Kr,Kr=Qr))),Re&&(_t?(sn=_t[0],un=_t[1]):(sn=Be[0],un=Be[1],Re.invert&&(sn=Re.invert(sn),un=Re.invert(un)),un<sn&&(Qr=sn,sn=un,un=Qr))),Te&&Re?[[Vr,sn],[Kr,un]]:Te?[Vr,Kr]:Re&&[sn,un])},tr.clear=function(){return tr.empty()||(Ue=[0,0],Be=[0,0],Qe=_t=null),tr},tr.empty=function(){return!!Te&&Ue[0]==Ue[1]||!!Re&&Be[0]==Be[1]},m.rebind(tr,le,"on")};var ws={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Mo=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];m.text=Dt(function(le){return le.responseText}),m.json=function(le,Te){return Zt(le,"application/json",Ho,Te)};function Ho(le){return JSON.parse(le.responseText)}m.html=function(le,Te){return Zt(le,"text/html",es,Te)};function es(le){var Te=T.createRange();return Te.selectNode(T.body),Te.createContextualFragment(le.responseText)}m.xml=Dt(function(le){return le.responseXML}),typeof B=="object"&&B.exports?B.exports=m:this.d3=m}).apply(self)},{}],59:[function(t,B,V){B.exports=t("./quad")},{"./quad":60}],60:[function(t,B,V){var m=t("binary-search-bounds"),c=t("clamp"),A=t("parse-rect"),T=t("array-bounds"),e=t("pick-by-alias"),a=t("defined"),i=t("flatten-vertex-data"),n=t("is-obj"),r=t("dtype"),v=t("math-log2"),s=1073741824;B.exports=function(g,d){d||(d={}),g=i(g,"float64"),d=e(d,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var f=a(d.maxDepth,255),y=a(d.bounds,T(g,2));y[0]===y[2]&&y[2]++,y[1]===y[3]&&y[3]++;var l=o(g,y),x=g.length>>>1,u;d.dtype||(d.dtype="array"),typeof d.dtype=="string"?u=new(r(d.dtype))(x):d.dtype&&(u=d.dtype,Array.isArray(u)&&(u.length=x));for(var M=0;M<x;++M)u[M]=M;var _=[],p=[],w=[],h=[];D(0,0,1,u,0,1);for(var L=0,S=0;S<_.length;S++){var E=_[S];if(u.set)u.set(E,L);else for(var P=0,F=E.length;P<F;P++)u[P+L]=E[P];var I=L+_[S].length;h[S]=[L,I],L=I}return u.range=R,u;function D(G,Y,ee,Z,X,ne){if(!Z.length)return null;var ce=_[X]||(_[X]=[]),Q=w[X]||(w[X]=[]),K=p[X]||(p[X]=[]),U=ce.length;if(X++,X>f||ne>s){for(var H=0;H<Z.length;H++)ce.push(Z[H]),Q.push(ne),K.push(null,null,null,null);return U}if(ce.push(Z[0]),Q.push(ne),Z.length<=1)return K.push(null,null,null,null),U;for(var q=ee*.5,re=G+q,j=Y+q,$=[],ie=[],oe=[],ae=[],se=1,_e=Z.length;se<_e;se++){var ue=Z[se],ye=l[ue*2],xe=l[ue*2+1];ye<re?xe<j?$.push(ue):ie.push(ue):xe<j?oe.push(ue):ae.push(ue)}return ne<<=2,K.push(D(G,Y,q,$,X,ne),D(G,j,q,ie,X,ne+1),D(re,Y,q,oe,X,ne+2),D(re,j,q,ae,X,ne+3)),U}function R(){for(var G=[],Y=arguments.length;Y--;)G[Y]=arguments[Y];var ee;if(n(G[G.length-1])){var Z=G.pop();!G.length&&(Z.x!=null||Z.l!=null||Z.left!=null)&&(G=[Z],ee={}),ee=e(Z,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else ee={};G.length||(G=y);var X=A.apply(void 0,G),ne=[Math.min(X.x,X.x+X.width),Math.min(X.y,X.y+X.height),Math.max(X.x,X.x+X.width),Math.max(X.y,X.y+X.height)],ce=ne[0],Q=ne[1],K=ne[2],U=ne[3],H=o([ce,Q,K,U],y),q=H[0],re=H[1],j=H[2],$=H[3],ie=a(ee.level,_.length);if(ee.d!=null){var oe;typeof ee.d=="number"?oe=[ee.d,ee.d]:ee.d.length&&(oe=ee.d),ie=Math.min(Math.max(Math.ceil(-v(Math.abs(oe[0])/(y[2]-y[0]))),Math.ceil(-v(Math.abs(oe[1])/(y[3]-y[1])))),ie)}if(ie=Math.min(ie,_.length),ee.lod)return N(q,re,j,$,ie);var ae=[];se(0,0,1,0,0,1);function se(ue,ye,xe,me,be,ke){if(!(be===null||ke===null)){var De=ue+xe,Ve=ye+xe;if(!(q>De||re>Ve||j<ue||$<ye)&&!(me>=ie)&&be!==ke){var Ae=_[me];ke===void 0&&(ke=Ae.length);for(var Le=be;Le<ke;Le++){var je=Ae[Le],Ye=g[je*2],ze=g[je*2+1];Ye>=ce&&Ye<=K&&ze>=Q&&ze<=U&&ae.push(je)}var Ie=p[me],We=Ie[be*4+0],pt=Ie[be*4+1],Ft=Ie[be*4+2],Qt=Ie[be*4+3],zt=_e(Ie,be+1),Et=xe*.5,Xt=me+1;se(ue,ye,Et,Xt,We,pt||Ft||Qt||zt),se(ue,ye+Et,Et,Xt,pt,Ft||Qt||zt),se(ue+Et,ye,Et,Xt,Ft,Qt||zt),se(ue+Et,ye+Et,Et,Xt,Qt,zt)}}}function _e(ue,ye){for(var xe=null,me=0;xe===null;)if(xe=ue[ye*4+me],me++,me>ue.length)return null;return xe}return ae}function N(G,Y,ee,Z,X){for(var ne=[],ce=0;ce<X;ce++){var Q=w[ce],K=h[ce][0],U=z(G,Y,ce),H=z(ee,Z,ce),q=m.ge(Q,U),re=m.gt(Q,H,q,Q.length-1);ne[ce]=[q+K,re+K]}return ne}function z(G,Y,ee){for(var Z=1,X=.5,ne=.5,ce=.5,Q=0;Q<ee;Q++)Z<<=2,Z+=G<X?Y<ne?0:1:Y<ne?2:3,ce*=.5,X+=G<X?-ce:ce,ne+=Y<ne?-ce:ce;return Z}};function o(b,g){for(var d=g[0],f=g[1],y=g[2],l=g[3],x=1/(y-d),u=1/(l-f),M=new Array(b.length),_=0,p=b.length/2;_<p;_++)M[2*_]=c((b[2*_]-d)*x,0,1),M[2*_+1]=c((b[2*_+1]-f)*u,0,1);return M}},{"array-bounds":71,"binary-search-bounds":80,clamp:86,defined:124,dtype:127,"flatten-vertex-data":191,"is-obj":235,"math-log2":240,"parse-rect":249,"pick-by-alias":253}],61:[function(t,B,V){Object.defineProperty(V,"__esModule",{value:!0});var m=t("@turf/meta"),c=6378137;function A(n){return m.geomReduce(n,function(r,v){return r+T(v)},0)}V.default=A;function T(n){var r=0,v;switch(n.type){case"Polygon":return e(n.coordinates);case"MultiPolygon":for(v=0;v<n.coordinates.length;v++)r+=e(n.coordinates[v]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function e(n){var r=0;if(n&&n.length>0){r+=Math.abs(a(n[0]));for(var v=1;v<n.length;v++)r-=Math.abs(a(n[v]))}return r}function a(n){var r,v,s,o,b,g,d,f=0,y=n.length;if(y>2){for(d=0;d<y;d++)d===y-2?(o=y-2,b=y-1,g=0):d===y-1?(o=y-1,b=0,g=1):(o=d,b=d+1,g=d+2),r=n[o],v=n[b],s=n[g],f+=(i(s[0])-i(r[0]))*Math.sin(i(v[1]));f=f*c*c/2}return f}function i(n){return n*Math.PI/180}},{"@turf/meta":63}],62:[function(t,B,V){Object.defineProperty(V,"__esModule",{value:!0}),V.earthRadius=63710088e-1,V.factors={centimeters:V.earthRadius*100,centimetres:V.earthRadius*100,degrees:V.earthRadius/111325,feet:V.earthRadius*3.28084,inches:V.earthRadius*39.37,kilometers:V.earthRadius/1e3,kilometres:V.earthRadius/1e3,meters:V.earthRadius,metres:V.earthRadius,miles:V.earthRadius/1609.344,millimeters:V.earthRadius*1e3,millimetres:V.earthRadius*1e3,nauticalmiles:V.earthRadius/1852,radians:1,yards:V.earthRadius*1.0936},V.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/V.earthRadius,yards:1.0936133},V.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function m(S,E,P){P===void 0&&(P={});var F={type:"Feature"};return(P.id===0||P.id)&&(F.id=P.id),P.bbox&&(F.bbox=P.bbox),F.properties=E||{},F.geometry=S,F}V.feature=m;function c(S,E,P){switch(S){case"Point":return A(E).geometry;case"LineString":return i(E).geometry;case"Polygon":return e(E).geometry;case"MultiPoint":return s(E).geometry;case"MultiLineString":return v(E).geometry;case"MultiPolygon":return o(E).geometry;default:throw new Error(S+" is invalid")}}V.geometry=c;function A(S,E,P){if(P===void 0&&(P={}),!S)throw new Error("coordinates is required");if(!Array.isArray(S))throw new Error("coordinates must be an Array");if(S.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!p(S[0])||!p(S[1]))throw new Error("coordinates must contain numbers");var F={type:"Point",coordinates:S};return m(F,E,P)}V.point=A;function T(S,E,P){return P===void 0&&(P={}),r(S.map(function(F){return A(F,E)}),P)}V.points=T;function e(S,E,P){P===void 0&&(P={});for(var F=0,I=S;F<I.length;F++){var D=I[F];if(D.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var R=0;R<D[D.length-1].length;R++)if(D[D.length-1][R]!==D[0][R])throw new Error("First and last Position are not equivalent.")}var N={type:"Polygon",coordinates:S};return m(N,E,P)}V.polygon=e;function a(S,E,P){return P===void 0&&(P={}),r(S.map(function(F){return e(F,E)}),P)}V.polygons=a;function i(S,E,P){if(P===void 0&&(P={}),S.length<2)throw new Error("coordinates must be an array of two or more positions");var F={type:"LineString",coordinates:S};return m(F,E,P)}V.lineString=i;function n(S,E,P){return P===void 0&&(P={}),r(S.map(function(F){return i(F,E)}),P)}V.lineStrings=n;function r(S,E){E===void 0&&(E={});var P={type:"FeatureCollection"};return E.id&&(P.id=E.id),E.bbox&&(P.bbox=E.bbox),P.features=S,P}V.featureCollection=r;function v(S,E,P){P===void 0&&(P={});var F={type:"MultiLineString",coordinates:S};return m(F,E,P)}V.multiLineString=v;function s(S,E,P){P===void 0&&(P={});var F={type:"MultiPoint",coordinates:S};return m(F,E,P)}V.multiPoint=s;function o(S,E,P){P===void 0&&(P={});var F={type:"MultiPolygon",coordinates:S};return m(F,E,P)}V.multiPolygon=o;function b(S,E,P){P===void 0&&(P={});var F={type:"GeometryCollection",geometries:S};return m(F,E,P)}V.geometryCollection=b;function g(S,E){if(E===void 0&&(E=0),E&&!(E>=0))throw new Error("precision must be a positive number");var P=Math.pow(10,E||0);return Math.round(S*P)/P}V.round=g;function d(S,E){E===void 0&&(E="kilometers");var P=V.factors[E];if(!P)throw new Error(E+" units is invalid");return S*P}V.radiansToLength=d;function f(S,E){E===void 0&&(E="kilometers");var P=V.factors[E];if(!P)throw new Error(E+" units is invalid");return S/P}V.lengthToRadians=f;function y(S,E){return x(f(S,E))}V.lengthToDegrees=y;function l(S){var E=S%360;return E<0&&(E+=360),E}V.bearingToAzimuth=l;function x(S){var E=S%(2*Math.PI);return E*180/Math.PI}V.radiansToDegrees=x;function u(S){var E=S%360;return E*Math.PI/180}V.degreesToRadians=u;function M(S,E,P){if(E===void 0&&(E="kilometers"),P===void 0&&(P="kilometers"),!(S>=0))throw new Error("length must be a positive number");return d(f(S,E),P)}V.convertLength=M;function _(S,E,P){if(E===void 0&&(E="meters"),P===void 0&&(P="kilometers"),!(S>=0))throw new Error("area must be a positive number");var F=V.areaFactors[E];if(!F)throw new Error("invalid original units");var I=V.areaFactors[P];if(!I)throw new Error("invalid final units");return S/F*I}V.convertArea=_;function p(S){return!isNaN(S)&&S!==null&&!Array.isArray(S)}V.isNumber=p;function w(S){return!!S&&S.constructor===Object}V.isObject=w;function h(S){if(!S)throw new Error("bbox is required");if(!Array.isArray(S))throw new Error("bbox must be an Array");if(S.length!==4&&S.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");S.forEach(function(E){if(!p(E))throw new Error("bbox must only contain numbers")})}V.validateBBox=h;function L(S){if(!S)throw new Error("id is required");if(["string","number"].indexOf(typeof S)===-1)throw new Error("id must be a number or a string")}V.validateId=L},{}],63:[function(t,B,V){Object.defineProperty(V,"__esModule",{value:!0});var m=t("@turf/helpers");function c(x,u,M){if(x!==null)for(var _,p,w,h,L,S,E,P=0,F=0,I,D=x.type,R=D==="FeatureCollection",N=D==="Feature",z=R?x.features.length:1,G=0;G<z;G++){E=R?x.features[G].geometry:N?x.geometry:x,I=E?E.type==="GeometryCollection":!1,L=I?E.geometries.length:1;for(var Y=0;Y<L;Y++){var ee=0,Z=0;if(h=I?E.geometries[Y]:E,h!==null){S=h.coordinates;var X=h.type;switch(P=M&&(X==="Polygon"||X==="MultiPolygon")?1:0,X){case null:break;case"Point":if(u(S,F,G,ee,Z)===!1)return!1;F++,ee++;break;case"LineString":case"MultiPoint":for(_=0;_<S.length;_++){if(u(S[_],F,G,ee,Z)===!1)return!1;F++,X==="MultiPoint"&&ee++}X==="LineString"&&ee++;break;case"Polygon":case"MultiLineString":for(_=0;_<S.length;_++){for(p=0;p<S[_].length-P;p++){if(u(S[_][p],F,G,ee,Z)===!1)return!1;F++}X==="MultiLineString"&&ee++,X==="Polygon"&&Z++}X==="Polygon"&&ee++;break;case"MultiPolygon":for(_=0;_<S.length;_++){for(Z=0,p=0;p<S[_].length;p++){for(w=0;w<S[_][p].length-P;w++){if(u(S[_][p][w],F,G,ee,Z)===!1)return!1;F++}Z++}ee++}break;case"GeometryCollection":for(_=0;_<h.geometries.length;_++)if(c(h.geometries[_],u,M)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function A(x,u,M,_){var p=M;return c(x,function(w,h,L,S,E){h===0&&M===void 0?p=w:p=u(p,w,h,L,S,E)},_),p}function T(x,u){var M;switch(x.type){case"FeatureCollection":for(M=0;M<x.features.length&&u(x.features[M].properties,M)!==!1;M++);break;case"Feature":u(x.properties,0);break}}function e(x,u,M){var _=M;return T(x,function(p,w){w===0&&M===void 0?_=p:_=u(_,p,w)}),_}function a(x,u){if(x.type==="Feature")u(x,0);else if(x.type==="FeatureCollection")for(var M=0;M<x.features.length&&u(x.features[M],M)!==!1;M++);}function i(x,u,M){var _=M;return a(x,function(p,w){w===0&&M===void 0?_=p:_=u(_,p,w)}),_}function n(x){var u=[];return c(x,function(M){u.push(M)}),u}function r(x,u){var M,_,p,w,h,L,S,E,P,F,I=0,D=x.type==="FeatureCollection",R=x.type==="Feature",N=D?x.features.length:1;for(M=0;M<N;M++){for(L=D?x.features[M].geometry:R?x.geometry:x,E=D?x.features[M].properties:R?x.properties:{},P=D?x.features[M].bbox:R?x.bbox:void 0,F=D?x.features[M].id:R?x.id:void 0,S=L?L.type==="GeometryCollection":!1,h=S?L.geometries.length:1,p=0;p<h;p++){if(w=S?L.geometries[p]:L,w===null){if(u(null,I,E,P,F)===!1)return!1;continue}switch(w.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(u(w,I,E,P,F)===!1)return!1;break}case"GeometryCollection":{for(_=0;_<w.geometries.length;_++)if(u(w.geometries[_],I,E,P,F)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}I++}}function v(x,u,M){var _=M;return r(x,function(p,w,h,L,S){w===0&&M===void 0?_=p:_=u(_,p,w,h,L,S)}),_}function s(x,u){r(x,function(M,_,p,w,h){var L=M===null?null:M.type;switch(L){case null:case"Point":case"LineString":case"Polygon":return u(m.feature(M,p,{bbox:w,id:h}),_,0)===!1?!1:void 0}var S;switch(L){case"MultiPoint":S="Point";break;case"MultiLineString":S="LineString";break;case"MultiPolygon":S="Polygon";break}for(var E=0;E<M.coordinates.length;E++){var P=M.coordinates[E],F={type:S,coordinates:P};if(u(m.feature(F,p),_,E)===!1)return!1}})}function o(x,u,M){var _=M;return s(x,function(p,w,h){w===0&&h===0&&M===void 0?_=p:_=u(_,p,w,h)}),_}function b(x,u){s(x,function(M,_,p){var w=0;if(!!M.geometry){var h=M.geometry.type;if(!(h==="Point"||h==="MultiPoint")){var L,S=0,E=0,P=0;if(c(M,function(F,I,D,R,N){if(L===void 0||_>S||R>E||N>P){L=F,S=_,E=R,P=N,w=0;return}var z=m.lineString([L,F],M.properties);if(u(z,_,p,N,w)===!1)return!1;w++,L=F})===!1)return!1}}})}function g(x,u,M){var _=M,p=!1;return b(x,function(w,h,L,S,E){p===!1&&M===void 0?_=w:_=u(_,w,h,L,S,E),p=!0}),_}function d(x,u){if(!x)throw new Error("geojson is required");s(x,function(M,_,p){if(M.geometry!==null){var w=M.geometry.type,h=M.geometry.coordinates;switch(w){case"LineString":if(u(M,_,p,0,0)===!1)return!1;break;case"Polygon":for(var L=0;L<h.length;L++)if(u(m.lineString(h[L],M.properties),_,p,L)===!1)return!1;break}}})}function f(x,u,M){var _=M;return d(x,function(p,w,h,L){w===0&&M===void 0?_=p:_=u(_,p,w,h,L)}),_}function y(x,u){if(u=u||{},!m.isObject(u))throw new Error("options is invalid");var M=u.featureIndex||0,_=u.multiFeatureIndex||0,p=u.geometryIndex||0,w=u.segmentIndex||0,h=u.properties,L;switch(x.type){case"FeatureCollection":M<0&&(M=x.features.length+M),h=h||x.features[M].properties,L=x.features[M].geometry;break;case"Feature":h=h||x.properties,L=x.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":L=x;break;default:throw new Error("geojson is invalid")}if(L===null)return null;var S=L.coordinates;switch(L.type){case"Point":case"MultiPoint":return null;case"LineString":return w<0&&(w=S.length+w-1),m.lineString([S[w],S[w+1]],h,u);case"Polygon":return p<0&&(p=S.length+p),w<0&&(w=S[p].length+w-1),m.lineString([S[p][w],S[p][w+1]],h,u);case"MultiLineString":return _<0&&(_=S.length+_),w<0&&(w=S[_].length+w-1),m.lineString([S[_][w],S[_][w+1]],h,u);case"MultiPolygon":return _<0&&(_=S.length+_),p<0&&(p=S[_].length+p),w<0&&(w=S[_][p].length-w-1),m.lineString([S[_][p][w],S[_][p][w+1]],h,u)}throw new Error("geojson is invalid")}function l(x,u){if(u=u||{},!m.isObject(u))throw new Error("options is invalid");var M=u.featureIndex||0,_=u.multiFeatureIndex||0,p=u.geometryIndex||0,w=u.coordIndex||0,h=u.properties,L;switch(x.type){case"FeatureCollection":M<0&&(M=x.features.length+M),h=h||x.features[M].properties,L=x.features[M].geometry;break;case"Feature":h=h||x.properties,L=x.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":L=x;break;default:throw new Error("geojson is invalid")}if(L===null)return null;var S=L.coordinates;switch(L.type){case"Point":return m.point(S,h,u);case"MultiPoint":return _<0&&(_=S.length+_),m.point(S[_],h,u);case"LineString":return w<0&&(w=S.length+w),m.point(S[w],h,u);case"Polygon":return p<0&&(p=S.length+p),w<0&&(w=S[p].length+w),m.point(S[p][w],h,u);case"MultiLineString":return _<0&&(_=S.length+_),w<0&&(w=S[_].length+w),m.point(S[_][w],h,u);case"MultiPolygon":return _<0&&(_=S.length+_),p<0&&(p=S[_].length+p),w<0&&(w=S[_][p].length-w),m.point(S[_][p][w],h,u)}throw new Error("geojson is invalid")}V.coordEach=c,V.coordReduce=A,V.propEach=T,V.propReduce=e,V.featureEach=a,V.featureReduce=i,V.coordAll=n,V.geomEach=r,V.geomReduce=v,V.flattenEach=s,V.flattenReduce=o,V.segmentEach=b,V.segmentReduce=g,V.lineEach=d,V.lineReduce=f,V.findSegment=y,V.findPoint=l},{"@turf/helpers":62}],64:[function(t,B,V){Object.defineProperty(V,"__esModule",{value:!0});var m=t("@turf/meta");function c(A){var T=[1/0,1/0,-1/0,-1/0];return m.coordEach(A,function(e){T[0]>e[0]&&(T[0]=e[0]),T[1]>e[1]&&(T[1]=e[1]),T[2]<e[0]&&(T[2]=e[0]),T[3]<e[1]&&(T[3]=e[1])}),T}c.default=c,V.default=c},{"@turf/meta":66}],65:[function(t,B,V){arguments[4][62][0].apply(V,arguments)},{dup:62}],66:[function(t,B,V){arguments[4][63][0].apply(V,arguments)},{"@turf/helpers":65,dup:63}],67:[function(t,B,V){Object.defineProperty(V,"__esModule",{value:!0});var m=t("@turf/meta"),c=t("@turf/helpers");function A(T,e){e===void 0&&(e={});var a=0,i=0,n=0;return m.coordEach(T,function(r){a+=r[0],i+=r[1],n++}),c.point([a/n,i/n],e.properties)}V.default=A},{"@turf/helpers":68,"@turf/meta":69}],68:[function(t,B,V){Object.defineProperty(V,"__esModule",{value:!0}),V.earthRadius=63710088e-1,V.factors={centimeters:V.earthRadius*100,centimetres:V.earthRadius*100,degrees:V.earthRadius/111325,feet:V.earthRadius*3.28084,inches:V.earthRadius*39.37,kilometers:V.earthRadius/1e3,kilometres:V.earthRadius/1e3,meters:V.earthRadius,metres:V.earthRadius,miles:V.earthRadius/1609.344,millimeters:V.earthRadius*1e3,millimetres:V.earthRadius*1e3,nauticalmiles:V.earthRadius/1852,radians:1,yards:V.earthRadius/1.0936},V.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/V.earthRadius,yards:1/1.0936},V.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function m(N,z,G){G===void 0&&(G={});var Y={type:"Feature"};return(G.id===0||G.id)&&(Y.id=G.id),G.bbox&&(Y.bbox=G.bbox),Y.properties=z||{},Y.geometry=N,Y}V.feature=m;function c(N,z,G){switch(N){case"Point":return A(z).geometry;case"LineString":return i(z).geometry;case"Polygon":return e(z).geometry;case"MultiPoint":return s(z).geometry;case"MultiLineString":return v(z).geometry;case"MultiPolygon":return o(z).geometry;default:throw new Error(N+" is invalid")}}V.geometry=c;function A(N,z,G){G===void 0&&(G={});var Y={type:"Point",coordinates:N};return m(Y,z,G)}V.point=A;function T(N,z,G){return G===void 0&&(G={}),r(N.map(function(Y){return A(Y,z)}),G)}V.points=T;function e(N,z,G){G===void 0&&(G={});for(var Y=0,ee=N;Y<ee.length;Y++){var Z=ee[Y];if(Z.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var X=0;X<Z[Z.length-1].length;X++)if(Z[Z.length-1][X]!==Z[0][X])throw new Error("First and last Position are not equivalent.")}var ne={type:"Polygon",coordinates:N};return m(ne,z,G)}V.polygon=e;function a(N,z,G){return G===void 0&&(G={}),r(N.map(function(Y){return e(Y,z)}),G)}V.polygons=a;function i(N,z,G){if(G===void 0&&(G={}),N.length<2)throw new Error("coordinates must be an array of two or more positions");var Y={type:"LineString",coordinates:N};return m(Y,z,G)}V.lineString=i;function n(N,z,G){return G===void 0&&(G={}),r(N.map(function(Y){return i(Y,z)}),G)}V.lineStrings=n;function r(N,z){z===void 0&&(z={});var G={type:"FeatureCollection"};return z.id&&(G.id=z.id),z.bbox&&(G.bbox=z.bbox),G.features=N,G}V.featureCollection=r;function v(N,z,G){G===void 0&&(G={});var Y={type:"MultiLineString",coordinates:N};return m(Y,z,G)}V.multiLineString=v;function s(N,z,G){G===void 0&&(G={});var Y={type:"MultiPoint",coordinates:N};return m(Y,z,G)}V.multiPoint=s;function o(N,z,G){G===void 0&&(G={});var Y={type:"MultiPolygon",coordinates:N};return m(Y,z,G)}V.multiPolygon=o;function b(N,z,G){G===void 0&&(G={});var Y={type:"GeometryCollection",geometries:N};return m(Y,z,G)}V.geometryCollection=b;function g(N,z){if(z===void 0&&(z=0),z&&!(z>=0))throw new Error("precision must be a positive number");var G=Math.pow(10,z||0);return Math.round(N*G)/G}V.round=g;function d(N,z){z===void 0&&(z="kilometers");var G=V.factors[z];if(!G)throw new Error(z+" units is invalid");return N*G}V.radiansToLength=d;function f(N,z){z===void 0&&(z="kilometers");var G=V.factors[z];if(!G)throw new Error(z+" units is invalid");return N/G}V.lengthToRadians=f;function y(N,z){return x(f(N,z))}V.lengthToDegrees=y;function l(N){var z=N%360;return z<0&&(z+=360),z}V.bearingToAzimuth=l;function x(N){var z=N%(2*Math.PI);return z*180/Math.PI}V.radiansToDegrees=x;function u(N){var z=N%360;return z*Math.PI/180}V.degreesToRadians=u;function M(N,z,G){if(z===void 0&&(z="kilometers"),G===void 0&&(G="kilometers"),!(N>=0))throw new Error("length must be a positive number");return d(f(N,z),G)}V.convertLength=M;function _(N,z,G){if(z===void 0&&(z="meters"),G===void 0&&(G="kilometers"),!(N>=0))throw new Error("area must be a positive number");var Y=V.areaFactors[z];if(!Y)throw new Error("invalid original units");var ee=V.areaFactors[G];if(!ee)throw new Error("invalid final units");return N/Y*ee}V.convertArea=_;function p(N){return!isNaN(N)&&N!==null&&!Array.isArray(N)&&!/^\s*$/.test(N)}V.isNumber=p;function w(N){return!!N&&N.constructor===Object}V.isObject=w;function h(N){if(!N)throw new Error("bbox is required");if(!Array.isArray(N))throw new Error("bbox must be an Array");if(N.length!==4&&N.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");N.forEach(function(z){if(!p(z))throw new Error("bbox must only contain numbers")})}V.validateBBox=h;function L(N){if(!N)throw new Error("id is required");if(["string","number"].indexOf(typeof N)===-1)throw new Error("id must be a number or a string")}V.validateId=L;function S(){throw new Error("method has been renamed to `radiansToDegrees`")}V.radians2degrees=S;function E(){throw new Error("method has been renamed to `degreesToRadians`")}V.degrees2radians=E;function P(){throw new Error("method has been renamed to `lengthToDegrees`")}V.distanceToDegrees=P;function F(){throw new Error("method has been renamed to `lengthToRadians`")}V.distanceToRadians=F;function I(){throw new Error("method has been renamed to `radiansToLength`")}V.radiansToDistance=I;function D(){throw new Error("method has been renamed to `bearingToAzimuth`")}V.bearingToAngle=D;function R(){throw new Error("method has been renamed to `convertLength`")}V.convertDistance=R},{}],69:[function(t,B,V){Object.defineProperty(V,"__esModule",{value:!0});var m=t("@turf/helpers");function c(x,u,M){if(x!==null)for(var _,p,w,h,L,S,E,P=0,F=0,I,D=x.type,R=D==="FeatureCollection",N=D==="Feature",z=R?x.features.length:1,G=0;G<z;G++){E=R?x.features[G].geometry:N?x.geometry:x,I=E?E.type==="GeometryCollection":!1,L=I?E.geometries.length:1;for(var Y=0;Y<L;Y++){var ee=0,Z=0;if(h=I?E.geometries[Y]:E,h!==null){S=h.coordinates;var X=h.type;switch(P=M&&(X==="Polygon"||X==="MultiPolygon")?1:0,X){case null:break;case"Point":if(u(S,F,G,ee,Z)===!1)return!1;F++,ee++;break;case"LineString":case"MultiPoint":for(_=0;_<S.length;_++){if(u(S[_],F,G,ee,Z)===!1)return!1;F++,X==="MultiPoint"&&ee++}X==="LineString"&&ee++;break;case"Polygon":case"MultiLineString":for(_=0;_<S.length;_++){for(p=0;p<S[_].length-P;p++){if(u(S[_][p],F,G,ee,Z)===!1)return!1;F++}X==="MultiLineString"&&ee++,X==="Polygon"&&Z++}X==="Polygon"&&ee++;break;case"MultiPolygon":for(_=0;_<S.length;_++){for(Z=0,p=0;p<S[_].length;p++){for(w=0;w<S[_][p].length-P;w++){if(u(S[_][p][w],F,G,ee,Z)===!1)return!1;F++}Z++}ee++}break;case"GeometryCollection":for(_=0;_<h.geometries.length;_++)if(c(h.geometries[_],u,M)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function A(x,u,M,_){var p=M;return c(x,function(w,h,L,S,E){h===0&&M===void 0?p=w:p=u(p,w,h,L,S,E)},_),p}function T(x,u){var M;switch(x.type){case"FeatureCollection":for(M=0;M<x.features.length&&u(x.features[M].properties,M)!==!1;M++);break;case"Feature":u(x.properties,0);break}}function e(x,u,M){var _=M;return T(x,function(p,w){w===0&&M===void 0?_=p:_=u(_,p,w)}),_}function a(x,u){if(x.type==="Feature")u(x,0);else if(x.type==="FeatureCollection")for(var M=0;M<x.features.length&&u(x.features[M],M)!==!1;M++);}function i(x,u,M){var _=M;return a(x,function(p,w){w===0&&M===void 0?_=p:_=u(_,p,w)}),_}function n(x){var u=[];return c(x,function(M){u.push(M)}),u}function r(x,u){var M,_,p,w,h,L,S,E,P,F,I=0,D=x.type==="FeatureCollection",R=x.type==="Feature",N=D?x.features.length:1;for(M=0;M<N;M++){for(L=D?x.features[M].geometry:R?x.geometry:x,E=D?x.features[M].properties:R?x.properties:{},P=D?x.features[M].bbox:R?x.bbox:void 0,F=D?x.features[M].id:R?x.id:void 0,S=L?L.type==="GeometryCollection":!1,h=S?L.geometries.length:1,p=0;p<h;p++){if(w=S?L.geometries[p]:L,w===null){if(u(null,I,E,P,F)===!1)return!1;continue}switch(w.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(u(w,I,E,P,F)===!1)return!1;break}case"GeometryCollection":{for(_=0;_<w.geometries.length;_++)if(u(w.geometries[_],I,E,P,F)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}I++}}function v(x,u,M){var _=M;return r(x,function(p,w,h,L,S){w===0&&M===void 0?_=p:_=u(_,p,w,h,L,S)}),_}function s(x,u){r(x,function(M,_,p,w,h){var L=M===null?null:M.type;switch(L){case null:case"Point":case"LineString":case"Polygon":return u(m.feature(M,p,{bbox:w,id:h}),_,0)===!1?!1:void 0}var S;switch(L){case"MultiPoint":S="Point";break;case"MultiLineString":S="LineString";break;case"MultiPolygon":S="Polygon";break}for(var E=0;E<M.coordinates.length;E++){var P=M.coordinates[E],F={type:S,coordinates:P};if(u(m.feature(F,p),_,E)===!1)return!1}})}function o(x,u,M){var _=M;return s(x,function(p,w,h){w===0&&h===0&&M===void 0?_=p:_=u(_,p,w,h)}),_}function b(x,u){s(x,function(M,_,p){var w=0;if(!!M.geometry){var h=M.geometry.type;if(!(h==="Point"||h==="MultiPoint")){var L,S=0,E=0,P=0;if(c(M,function(F,I,D,R,N){if(L===void 0||_>S||R>E||N>P){L=F,S=_,E=R,P=N,w=0;return}var z=m.lineString([L,F],M.properties);if(u(z,_,p,N,w)===!1)return!1;w++,L=F})===!1)return!1}}})}function g(x,u,M){var _=M,p=!1;return b(x,function(w,h,L,S,E){p===!1&&M===void 0?_=w:_=u(_,w,h,L,S,E),p=!0}),_}function d(x,u){if(!x)throw new Error("geojson is required");s(x,function(M,_,p){if(M.geometry!==null){var w=M.geometry.type,h=M.geometry.coordinates;switch(w){case"LineString":if(u(M,_,p,0,0)===!1)return!1;break;case"Polygon":for(var L=0;L<h.length;L++)if(u(m.lineString(h[L],M.properties),_,p,L)===!1)return!1;break}}})}function f(x,u,M){var _=M;return d(x,function(p,w,h,L){w===0&&M===void 0?_=p:_=u(_,p,w,h,L)}),_}function y(x,u){if(u=u||{},!m.isObject(u))throw new Error("options is invalid");var M=u.featureIndex||0,_=u.multiFeatureIndex||0,p=u.geometryIndex||0,w=u.segmentIndex||0,h=u.properties,L;switch(x.type){case"FeatureCollection":M<0&&(M=x.features.length+M),h=h||x.features[M].properties,L=x.features[M].geometry;break;case"Feature":h=h||x.properties,L=x.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":L=x;break;default:throw new Error("geojson is invalid")}if(L===null)return null;var S=L.coordinates;switch(L.type){case"Point":case"MultiPoint":return null;case"LineString":return w<0&&(w=S.length+w-1),m.lineString([S[w],S[w+1]],h,u);case"Polygon":return p<0&&(p=S.length+p),w<0&&(w=S[p].length+w-1),m.lineString([S[p][w],S[p][w+1]],h,u);case"MultiLineString":return _<0&&(_=S.length+_),w<0&&(w=S[_].length+w-1),m.lineString([S[_][w],S[_][w+1]],h,u);case"MultiPolygon":return _<0&&(_=S.length+_),p<0&&(p=S[_].length+p),w<0&&(w=S[_][p].length-w-1),m.lineString([S[_][p][w],S[_][p][w+1]],h,u)}throw new Error("geojson is invalid")}function l(x,u){if(u=u||{},!m.isObject(u))throw new Error("options is invalid");var M=u.featureIndex||0,_=u.multiFeatureIndex||0,p=u.geometryIndex||0,w=u.coordIndex||0,h=u.properties,L;switch(x.type){case"FeatureCollection":M<0&&(M=x.features.length+M),h=h||x.features[M].properties,L=x.features[M].geometry;break;case"Feature":h=h||x.properties,L=x.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":L=x;break;default:throw new Error("geojson is invalid")}if(L===null)return null;var S=L.coordinates;switch(L.type){case"Point":return m.point(S,h,u);case"MultiPoint":return _<0&&(_=S.length+_),m.point(S[_],h,u);case"LineString":return w<0&&(w=S.length+w),m.point(S[w],h,u);case"Polygon":return p<0&&(p=S.length+p),w<0&&(w=S[p].length+w),m.point(S[p][w],h,u);case"MultiLineString":return _<0&&(_=S.length+_),w<0&&(w=S[_].length+w),m.point(S[_][w],h,u);case"MultiPolygon":return _<0&&(_=S.length+_),p<0&&(p=S[_].length+p),w<0&&(w=S[_][p].length-w),m.point(S[_][p][w],h,u)}throw new Error("geojson is invalid")}V.coordEach=c,V.coordReduce=A,V.propEach=T,V.propReduce=e,V.featureEach=a,V.featureReduce=i,V.coordAll=n,V.geomEach=r,V.geomReduce=v,V.flattenEach=s,V.flattenReduce=o,V.segmentEach=b,V.segmentReduce=g,V.lineEach=d,V.lineReduce=f,V.findSegment=y,V.findPoint=l},{"@turf/helpers":68}],70:[function(t,B,V){B.exports=m;function m(c){var A=0,T=0,e=0,a=0;return c.map(function(i){i=i.slice();var n=i[0],r=n.toUpperCase();if(n!=r)switch(i[0]=r,n){case"a":i[6]+=e,i[7]+=a;break;case"v":i[1]+=a;break;case"h":i[1]+=e;break;default:for(var v=1;v<i.length;)i[v++]+=e,i[v++]+=a}switch(r){case"Z":e=A,a=T;break;case"H":e=i[1];break;case"V":a=i[1];break;case"M":e=A=i[1],a=T=i[2];break;default:e=i[i.length-2],a=i[i.length-1]}return i})}},{}],71:[function(t,B,V){B.exports=m;function m(c,A){if(!c||c.length==null)throw Error("Argument should be an array");A==null?A=1:A=Math.floor(A);for(var T=Array(A*2),e=0;e<A;e++){for(var a=-1/0,i=1/0,n=e,r=c.length;n<r;n+=A)c[n]>a&&(a=c[n]),c[n]<i&&(i=c[n]);T[e]=i,T[A+e]=a}return T}},{}],72:[function(t,B,V){B.exports=function(m,c,A){if(typeof Array.prototype.findIndex=="function")return m.findIndex(c,A);if(typeof c!="function")throw new TypeError("predicate must be a function");var T=Object(m),e=T.length;if(e===0)return-1;for(var a=0;a<e;a++)if(c.call(A,T[a],a,T))return a;return-1}},{}],73:[function(t,B,V){var m=t("array-bounds");B.exports=c;function c(A,T,e){if(!A||A.length==null)throw Error("Argument should be an array");T==null&&(T=1),e==null&&(e=m(A,T));for(var a=0;a<T;a++){var i=e[T+a],n=e[a],r=a,v=A.length;if(i===1/0&&n===-1/0)for(r=a;r<v;r+=T)A[r]=A[r]===i?1:A[r]===n?0:.5;else if(i===1/0)for(r=a;r<v;r+=T)A[r]=A[r]===i?1:0;else if(n===-1/0)for(r=a;r<v;r+=T)A[r]=A[r]===n?0:1;else{var s=i-n;for(r=a;r<v;r+=T)isNaN(A[r])||(A[r]=s===0?.5:(A[r]-n)/s)}}return A}},{"array-bounds":71}],74:[function(t,B,V){B.exports=function(c,A){var T=typeof c=="number",e=typeof A=="number";T&&!e?(A=c,c=0):!T&&!e&&(c=0,A=0),c=c|0,A=A|0;var a=A-c;if(a<0)throw new Error("array length must be positive");for(var i=new Array(a),n=0,r=c;n<a;n++,r++)i[n]=r;return i}},{}],75:[function(t,B,V){(function(m){(function(){var c=t("object-assign");/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function A(E,P){if(E===P)return 0;for(var F=E.length,I=P.length,D=0,R=Math.min(F,I);D<R;++D)if(E[D]!==P[D]){F=E[D],I=P[D];break}return F<I?-1:I<F?1:0}function T(E){return m.Buffer&&typeof m.Buffer.isBuffer=="function"?m.Buffer.isBuffer(E):!!(E!=null&&E._isBuffer)}var e=t("util/"),a=Object.prototype.hasOwnProperty,i=Array.prototype.slice,n=function(){return function(){}.name==="foo"}();function r(E){return Object.prototype.toString.call(E)}function v(E){return T(E)||typeof m.ArrayBuffer!="function"?!1:typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(E):E?!!(E instanceof DataView||E.buffer&&E.buffer instanceof ArrayBuffer):!1}var s=B.exports=l,o=/\s*function\s+([^\(\s]*)\s*/;function b(E){if(!!e.isFunction(E)){if(n)return E.name;var P=E.toString(),F=P.match(o);return F&&F[1]}}s.AssertionError=function(P){this.name="AssertionError",this.actual=P.actual,this.expected=P.expected,this.operator=P.operator,P.message?(this.message=P.message,this.generatedMessage=!1):(this.message=f(this),this.generatedMessage=!0);var F=P.stackStartFunction||y;if(Error.captureStackTrace)Error.captureStackTrace(this,F);else{var I=new Error;if(I.stack){var D=I.stack,R=b(F),N=D.indexOf(`
`+R);if(N>=0){var z=D.indexOf(`
`,N+1);D=D.substring(z+1)}this.stack=D}}},e.inherits(s.AssertionError,Error);function g(E,P){return typeof E=="string"?E.length<P?E:E.slice(0,P):E}function d(E){if(n||!e.isFunction(E))return e.inspect(E);var P=b(E),F=P?": "+P:"";return"[Function"+F+"]"}function f(E){return g(d(E.actual),128)+" "+E.operator+" "+g(d(E.expected),128)}function y(E,P,F,I,D){throw new s.AssertionError({message:F,actual:E,expected:P,operator:I,stackStartFunction:D})}s.fail=y;function l(E,P){E||y(E,!0,P,"==",s.ok)}s.ok=l,s.equal=function(P,F,I){P!=F&&y(P,F,I,"==",s.equal)},s.notEqual=function(P,F,I){P==F&&y(P,F,I,"!=",s.notEqual)},s.deepEqual=function(P,F,I){x(P,F,!1)||y(P,F,I,"deepEqual",s.deepEqual)},s.deepStrictEqual=function(P,F,I){x(P,F,!0)||y(P,F,I,"deepStrictEqual",s.deepStrictEqual)};function x(E,P,F,I){if(E===P)return!0;if(T(E)&&T(P))return A(E,P)===0;if(e.isDate(E)&&e.isDate(P))return E.getTime()===P.getTime();if(e.isRegExp(E)&&e.isRegExp(P))return E.source===P.source&&E.global===P.global&&E.multiline===P.multiline&&E.lastIndex===P.lastIndex&&E.ignoreCase===P.ignoreCase;if((E===null||typeof E!="object")&&(P===null||typeof P!="object"))return F?E===P:E==P;if(v(E)&&v(P)&&r(E)===r(P)&&!(E instanceof Float32Array||E instanceof Float64Array))return A(new Uint8Array(E.buffer),new Uint8Array(P.buffer))===0;if(T(E)!==T(P))return!1;I=I||{actual:[],expected:[]};var D=I.actual.indexOf(E);return D!==-1&&D===I.expected.indexOf(P)?!0:(I.actual.push(E),I.expected.push(P),M(E,P,F,I))}function u(E){return Object.prototype.toString.call(E)=="[object Arguments]"}function M(E,P,F,I){if(E==null||P===null||P===void 0)return!1;if(e.isPrimitive(E)||e.isPrimitive(P))return E===P;if(F&&Object.getPrototypeOf(E)!==Object.getPrototypeOf(P))return!1;var D=u(E),R=u(P);if(D&&!R||!D&&R)return!1;if(D)return E=i.call(E),P=i.call(P),x(E,P,F);var N=S(E),z=S(P),G,Y;if(N.length!==z.length)return!1;for(N.sort(),z.sort(),Y=N.length-1;Y>=0;Y--)if(N[Y]!==z[Y])return!1;for(Y=N.length-1;Y>=0;Y--)if(G=N[Y],!x(E[G],P[G],F,I))return!1;return!0}s.notDeepEqual=function(P,F,I){x(P,F,!1)&&y(P,F,I,"notDeepEqual",s.notDeepEqual)},s.notDeepStrictEqual=_;function _(E,P,F){x(E,P,!0)&&y(E,P,F,"notDeepStrictEqual",_)}s.strictEqual=function(P,F,I){P!==F&&y(P,F,I,"===",s.strictEqual)},s.notStrictEqual=function(P,F,I){P===F&&y(P,F,I,"!==",s.notStrictEqual)};function p(E,P){if(!E||!P)return!1;if(Object.prototype.toString.call(P)=="[object RegExp]")return P.test(E);try{if(E instanceof P)return!0}catch{}return Error.isPrototypeOf(P)?!1:P.call({},E)===!0}function w(E){var P;try{E()}catch(F){P=F}return P}function h(E,P,F,I){var D;if(typeof P!="function")throw new TypeError('"block" argument must be a function');typeof F=="string"&&(I=F,F=null),D=w(P),I=(F&&F.name?" ("+F.name+").":".")+(I?" "+I:"."),E&&!D&&y(D,F,"Missing expected exception"+I);var R=typeof I=="string",N=!E&&e.isError(D),z=!E&&D&&!F;if((N&&R&&p(D,F)||z)&&y(D,F,"Got unwanted exception"+I),E&&D&&F&&!p(D,F)||!E&&D)throw D}s.throws=function(E,P,F){h(!0,E,P,F)},s.doesNotThrow=function(E,P,F){h(!1,E,P,F)},s.ifError=function(E){if(E)throw E};function L(E,P){E||y(E,!0,P,"==",L)}s.strict=c(L,s,{equal:s.strictEqual,deepEqual:s.deepStrictEqual,notEqual:s.notStrictEqual,notDeepEqual:s.notDeepStrictEqual}),s.strict.strict=s.strict;var S=Object.keys||function(E){var P=[];for(var F in E)a.call(E,F)&&P.push(F);return P}}).call(this)}).call(this,typeof Ro<"u"?Ro:typeof self<"u"?self:typeof window<"u"?window:{})},{"object-assign":247,"util/":78}],76:[function(t,B,V){typeof Object.create=="function"?B.exports=function(c,A){c.super_=A,c.prototype=Object.create(A.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}})}:B.exports=function(c,A){c.super_=A;var T=function(){};T.prototype=A.prototype,c.prototype=new T,c.prototype.constructor=c}},{}],77:[function(t,B,V){B.exports=function(c){return c&&typeof c=="object"&&typeof c.copy=="function"&&typeof c.fill=="function"&&typeof c.readUInt8=="function"}},{}],78:[function(t,B,V){(function(m,c){(function(){var A=/%[sdj%]/g;V.format=function(z){if(!M(z)){for(var G=[],Y=0;Y<arguments.length;Y++)G.push(a(arguments[Y]));return G.join(" ")}for(var Y=1,ee=arguments,Z=ee.length,X=String(z).replace(A,function(ce){if(ce==="%%")return"%";if(Y>=Z)return ce;switch(ce){case"%s":return String(ee[Y++]);case"%d":return Number(ee[Y++]);case"%j":try{return JSON.stringify(ee[Y++])}catch{return"[Circular]"}default:return ce}}),ne=ee[Y];Y<Z;ne=ee[++Y])l(ne)||!h(ne)?X+=" "+ne:X+=" "+a(ne);return X},V.deprecate=function(z,G){if(p(c.process))return function(){return V.deprecate(z,G).apply(this,arguments)};if(m.noDeprecation===!0)return z;var Y=!1;function ee(){if(!Y){if(m.throwDeprecation)throw new Error(G);m.traceDeprecation?console.trace(G):console.error(G),Y=!0}return z.apply(this,arguments)}return ee};var T={},e;V.debuglog=function(z){if(p(e)&&(e=m.env.NODE_DEBUG||""),z=z.toUpperCase(),!T[z])if(new RegExp("\\b"+z+"\\b","i").test(e)){var G=m.pid;T[z]=function(){var Y=V.format.apply(V,arguments);console.error("%s %d: %s",z,G,Y)}}else T[z]=function(){};return T[z]};function a(z,G){var Y={seen:[],stylize:n};return arguments.length>=3&&(Y.depth=arguments[2]),arguments.length>=4&&(Y.colors=arguments[3]),y(G)?Y.showHidden=G:G&&V._extend(Y,G),p(Y.showHidden)&&(Y.showHidden=!1),p(Y.depth)&&(Y.depth=2),p(Y.colors)&&(Y.colors=!1),p(Y.customInspect)&&(Y.customInspect=!0),Y.colors&&(Y.stylize=i),v(Y,z,Y.depth)}V.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function i(z,G){var Y=a.styles[G];return Y?"\x1B["+a.colors[Y][0]+"m"+z+"\x1B["+a.colors[Y][1]+"m":z}function n(z,G){return z}function r(z){var G={};return z.forEach(function(Y,ee){G[Y]=!0}),G}function v(z,G,Y){if(z.customInspect&&G&&E(G.inspect)&&G.inspect!==V.inspect&&!(G.constructor&&G.constructor.prototype===G)){var ee=G.inspect(Y,z);return M(ee)||(ee=v(z,ee,Y)),ee}var Z=s(z,G);if(Z)return Z;var X=Object.keys(G),ne=r(X);if(z.showHidden&&(X=Object.getOwnPropertyNames(G)),S(G)&&(X.indexOf("message")>=0||X.indexOf("description")>=0))return o(G);if(X.length===0){if(E(G)){var ce=G.name?": "+G.name:"";return z.stylize("[Function"+ce+"]","special")}if(w(G))return z.stylize(RegExp.prototype.toString.call(G),"regexp");if(L(G))return z.stylize(Date.prototype.toString.call(G),"date");if(S(G))return o(G)}var Q="",K=!1,U=["{","}"];if(f(G)&&(K=!0,U=["[","]"]),E(G)){var H=G.name?": "+G.name:"";Q=" [Function"+H+"]"}if(w(G)&&(Q=" "+RegExp.prototype.toString.call(G)),L(G)&&(Q=" "+Date.prototype.toUTCString.call(G)),S(G)&&(Q=" "+o(G)),X.length===0&&(!K||G.length==0))return U[0]+Q+U[1];if(Y<0)return w(G)?z.stylize(RegExp.prototype.toString.call(G),"regexp"):z.stylize("[Object]","special");z.seen.push(G);var q;return K?q=b(z,G,Y,ne,X):q=X.map(function(re){return g(z,G,Y,ne,re,K)}),z.seen.pop(),d(q,Q,U)}function s(z,G){if(p(G))return z.stylize("undefined","undefined");if(M(G)){var Y="'"+JSON.stringify(G).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return z.stylize(Y,"string")}if(u(G))return z.stylize(""+G,"number");if(y(G))return z.stylize(""+G,"boolean");if(l(G))return z.stylize("null","null")}function o(z){return"["+Error.prototype.toString.call(z)+"]"}function b(z,G,Y,ee,Z){for(var X=[],ne=0,ce=G.length;ne<ce;++ne)N(G,String(ne))?X.push(g(z,G,Y,ee,String(ne),!0)):X.push("");return Z.forEach(function(Q){Q.match(/^\d+$/)||X.push(g(z,G,Y,ee,Q,!0))}),X}function g(z,G,Y,ee,Z,X){var ne,ce,Q;if(Q=Object.getOwnPropertyDescriptor(G,Z)||{value:G[Z]},Q.get?Q.set?ce=z.stylize("[Getter/Setter]","special"):ce=z.stylize("[Getter]","special"):Q.set&&(ce=z.stylize("[Setter]","special")),N(ee,Z)||(ne="["+Z+"]"),ce||(z.seen.indexOf(Q.value)<0?(l(Y)?ce=v(z,Q.value,null):ce=v(z,Q.value,Y-1),ce.indexOf(`
`)>-1&&(X?ce=ce.split(`
`).map(function(K){return"  "+K}).join(`
`).substr(2):ce=`
`+ce.split(`
`).map(function(K){return"   "+K}).join(`
`))):ce=z.stylize("[Circular]","special")),p(ne)){if(X&&Z.match(/^\d+$/))return ce;ne=JSON.stringify(""+Z),ne.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(ne=ne.substr(1,ne.length-2),ne=z.stylize(ne,"name")):(ne=ne.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),ne=z.stylize(ne,"string"))}return ne+": "+ce}function d(z,G,Y){var ee=z.reduce(function(Z,X){return X.indexOf(`
`)>=0,Z+X.replace(/\u001b\[\d\d?m/g,"").length+1},0);return ee>60?Y[0]+(G===""?"":G+`
 `)+" "+z.join(`,
  `)+" "+Y[1]:Y[0]+G+" "+z.join(", ")+" "+Y[1]}function f(z){return Array.isArray(z)}V.isArray=f;function y(z){return typeof z=="boolean"}V.isBoolean=y;function l(z){return z===null}V.isNull=l;function x(z){return z==null}V.isNullOrUndefined=x;function u(z){return typeof z=="number"}V.isNumber=u;function M(z){return typeof z=="string"}V.isString=M;function _(z){return typeof z=="symbol"}V.isSymbol=_;function p(z){return z===void 0}V.isUndefined=p;function w(z){return h(z)&&F(z)==="[object RegExp]"}V.isRegExp=w;function h(z){return typeof z=="object"&&z!==null}V.isObject=h;function L(z){return h(z)&&F(z)==="[object Date]"}V.isDate=L;function S(z){return h(z)&&(F(z)==="[object Error]"||z instanceof Error)}V.isError=S;function E(z){return typeof z=="function"}V.isFunction=E;function P(z){return z===null||typeof z=="boolean"||typeof z=="number"||typeof z=="string"||typeof z=="symbol"||typeof z>"u"}V.isPrimitive=P,V.isBuffer=t("./support/isBuffer");function F(z){return Object.prototype.toString.call(z)}function I(z){return z<10?"0"+z.toString(10):z.toString(10)}var D=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function R(){var z=new Date,G=[I(z.getHours()),I(z.getMinutes()),I(z.getSeconds())].join(":");return[z.getDate(),D[z.getMonth()],G].join(" ")}V.log=function(){console.log("%s - %s",R(),V.format.apply(V,arguments))},V.inherits=t("inherits"),V._extend=function(z,G){if(!G||!h(G))return z;for(var Y=Object.keys(G),ee=Y.length;ee--;)z[Y[ee]]=G[Y[ee]];return z};function N(z,G){return Object.prototype.hasOwnProperty.call(z,G)}}).call(this)}).call(this,t("_process"),typeof Ro<"u"?Ro:typeof self<"u"?self:typeof window<"u"?window:{})},{"./support/isBuffer":77,_process:278,inherits:76}],79:[function(t,B,V){V.byteLength=n,V.toByteArray=v,V.fromByteArray=b;for(var m=[],c=[],A=typeof Uint8Array<"u"?Uint8Array:Array,T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,a=T.length;e<a;++e)m[e]=T[e],c[T.charCodeAt(e)]=e;c["-".charCodeAt(0)]=62,c["_".charCodeAt(0)]=63;function i(g){var d=g.length;if(d%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var f=g.indexOf("=");f===-1&&(f=d);var y=f===d?0:4-f%4;return[f,y]}function n(g){var d=i(g),f=d[0],y=d[1];return(f+y)*3/4-y}function r(g,d,f){return(d+f)*3/4-f}function v(g){var d,f=i(g),y=f[0],l=f[1],x=new A(r(g,y,l)),u=0,M=l>0?y-4:y,_;for(_=0;_<M;_+=4)d=c[g.charCodeAt(_)]<<18|c[g.charCodeAt(_+1)]<<12|c[g.charCodeAt(_+2)]<<6|c[g.charCodeAt(_+3)],x[u++]=d>>16&255,x[u++]=d>>8&255,x[u++]=d&255;return l===2&&(d=c[g.charCodeAt(_)]<<2|c[g.charCodeAt(_+1)]>>4,x[u++]=d&255),l===1&&(d=c[g.charCodeAt(_)]<<10|c[g.charCodeAt(_+1)]<<4|c[g.charCodeAt(_+2)]>>2,x[u++]=d>>8&255,x[u++]=d&255),x}function s(g){return m[g>>18&63]+m[g>>12&63]+m[g>>6&63]+m[g&63]}function o(g,d,f){for(var y,l=[],x=d;x<f;x+=3)y=(g[x]<<16&16711680)+(g[x+1]<<8&65280)+(g[x+2]&255),l.push(s(y));return l.join("")}function b(g){for(var d,f=g.length,y=f%3,l=[],x=16383,u=0,M=f-y;u<M;u+=x)l.push(o(g,u,u+x>M?M:u+x));return y===1?(d=g[f-1],l.push(m[d>>2]+m[d<<4&63]+"==")):y===2&&(d=(g[f-2]<<8)+g[f-1],l.push(m[d>>10]+m[d>>4&63]+m[d<<2&63]+"=")),l.join("")}},{}],80:[function(t,B,V){function m(i,n,r,v,s){for(var o=s+1;v<=s;){var b=v+s>>>1,g=i[b],d=r!==void 0?r(g,n):g-n;d>=0?(o=b,s=b-1):v=b+1}return o}function c(i,n,r,v,s){for(var o=s+1;v<=s;){var b=v+s>>>1,g=i[b],d=r!==void 0?r(g,n):g-n;d>0?(o=b,s=b-1):v=b+1}return o}function A(i,n,r,v,s){for(var o=v-1;v<=s;){var b=v+s>>>1,g=i[b],d=r!==void 0?r(g,n):g-n;d<0?(o=b,v=b+1):s=b-1}return o}function T(i,n,r,v,s){for(var o=v-1;v<=s;){var b=v+s>>>1,g=i[b],d=r!==void 0?r(g,n):g-n;d<=0?(o=b,v=b+1):s=b-1}return o}function e(i,n,r,v,s){for(;v<=s;){var o=v+s>>>1,b=i[o],g=r!==void 0?r(b,n):b-n;if(g===0)return o;g<=0?v=o+1:s=o-1}return-1}function a(i,n,r,v,s,o){return typeof r=="function"?o(i,n,r,v===void 0?0:v|0,s===void 0?i.length-1:s|0):o(i,n,void 0,r===void 0?0:r|0,v===void 0?i.length-1:v|0)}B.exports={ge:function(i,n,r,v,s){return a(i,n,r,v,s,m)},gt:function(i,n,r,v,s){return a(i,n,r,v,s,c)},lt:function(i,n,r,v,s){return a(i,n,r,v,s,A)},le:function(i,n,r,v,s){return a(i,n,r,v,s,T)},eq:function(i,n,r,v,s){return a(i,n,r,v,s,e)}}},{}],81:[function(t,B,V){var m=32;V.INT_BITS=m,V.INT_MAX=2147483647,V.INT_MIN=-1<<m-1,V.sign=function(T){return(T>0)-(T<0)},V.abs=function(T){var e=T>>m-1;return(T^e)-e},V.min=function(T,e){return e^(T^e)&-(T<e)},V.max=function(T,e){return T^(T^e)&-(T<e)},V.isPow2=function(T){return!(T&T-1)&&!!T},V.log2=function(T){var e,a;return e=(T>65535)<<4,T>>>=e,a=(T>255)<<3,T>>>=a,e|=a,a=(T>15)<<2,T>>>=a,e|=a,a=(T>3)<<1,T>>>=a,e|=a,e|T>>1},V.log10=function(T){return T>=1e9?9:T>=1e8?8:T>=1e7?7:T>=1e6?6:T>=1e5?5:T>=1e4?4:T>=1e3?3:T>=100?2:T>=10?1:0},V.popCount=function(T){return T=T-(T>>>1&1431655765),T=(T&858993459)+(T>>>2&858993459),(T+(T>>>4)&252645135)*16843009>>>24};function c(T){var e=32;return T&=-T,T&&e--,T&65535&&(e-=16),T&16711935&&(e-=8),T&252645135&&(e-=4),T&858993459&&(e-=2),T&1431655765&&(e-=1),e}V.countTrailingZeros=c,V.nextPow2=function(T){return T+=T===0,--T,T|=T>>>1,T|=T>>>2,T|=T>>>4,T|=T>>>8,T|=T>>>16,T+1},V.prevPow2=function(T){return T|=T>>>1,T|=T>>>2,T|=T>>>4,T|=T>>>8,T|=T>>>16,T-(T>>>1)},V.parity=function(T){return T^=T>>>16,T^=T>>>8,T^=T>>>4,T&=15,27030>>>T&1};var A=new Array(256);(function(T){for(var e=0;e<256;++e){var a=e,i=e,n=7;for(a>>>=1;a;a>>>=1)i<<=1,i|=a&1,--n;T[e]=i<<n&255}})(A),V.reverse=function(T){return A[T&255]<<24|A[T>>>8&255]<<16|A[T>>>16&255]<<8|A[T>>>24&255]},V.interleave2=function(T,e){return T&=65535,T=(T|T<<8)&16711935,T=(T|T<<4)&252645135,T=(T|T<<2)&858993459,T=(T|T<<1)&1431655765,e&=65535,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,T|e<<1},V.deinterleave2=function(T,e){return T=T>>>e&1431655765,T=(T|T>>>1)&858993459,T=(T|T>>>2)&252645135,T=(T|T>>>4)&16711935,T=(T|T>>>16)&65535,T<<16>>16},V.interleave3=function(T,e,a){return T&=1023,T=(T|T<<16)&4278190335,T=(T|T<<8)&251719695,T=(T|T<<4)&3272356035,T=(T|T<<2)&1227133513,e&=1023,e=(e|e<<16)&4278190335,e=(e|e<<8)&251719695,e=(e|e<<4)&3272356035,e=(e|e<<2)&1227133513,T|=e<<1,a&=1023,a=(a|a<<16)&4278190335,a=(a|a<<8)&251719695,a=(a|a<<4)&3272356035,a=(a|a<<2)&1227133513,T|a<<2},V.deinterleave3=function(T,e){return T=T>>>e&1227133513,T=(T|T>>>2)&3272356035,T=(T|T>>>4)&251719695,T=(T|T>>>8)&4278190335,T=(T|T>>>16)&1023,T<<22>>22},V.nextCombination=function(T){var e=T|T-1;return e+1|(~e&-~e)-1>>>c(T)+1}},{}],82:[function(t,B,V){var m=t("clamp");B.exports=A;var c=1e20;function A(a,i){i||(i={});var n=i.cutoff==null?.25:i.cutoff,r=i.radius==null?8:i.radius,v=i.channel||0,s,o,b,g,d,f,y,l,x,u,M;if(ArrayBuffer.isView(a)||Array.isArray(a)){if(!i.width||!i.height)throw Error("For raw data width and height should be provided by options");s=i.width,o=i.height,g=a,i.stride?f=i.stride:f=Math.floor(a.length/s/o)}else window.HTMLCanvasElement&&a instanceof window.HTMLCanvasElement?(l=a,y=l.getContext("2d"),s=l.width,o=l.height,x=y.getImageData(0,0,s,o),g=x.data,f=4):window.CanvasRenderingContext2D&&a instanceof window.CanvasRenderingContext2D?(l=a.canvas,y=a,s=l.width,o=l.height,x=y.getImageData(0,0,s,o),g=x.data,f=4):window.ImageData&&a instanceof window.ImageData&&(x=a,s=a.width,o=a.height,g=x.data,f=4);if(b=Math.max(s,o),window.Uint8ClampedArray&&g instanceof window.Uint8ClampedArray||window.Uint8Array&&g instanceof window.Uint8Array)for(d=g,g=Array(s*o),u=0,M=d.length;u<M;u++)g[u]=d[u*f+v]/255;else if(f!==1)throw Error("Raw data can have only 1 value per pixel");var _=Array(s*o),p=Array(s*o),w=Array(b),h=Array(b),L=Array(b+1),S=Array(b);for(u=0,M=s*o;u<M;u++){var E=g[u];_[u]=E===1?0:E===0?c:Math.pow(Math.max(0,.5-E),2),p[u]=E===1?c:E===0?0:Math.pow(Math.max(0,E-.5),2)}T(_,s,o,w,h,S,L),T(p,s,o,w,h,S,L);var P=window.Float32Array?new Float32Array(s*o):new Array(s*o);for(u=0,M=s*o;u<M;u++)P[u]=m(1-((_[u]-p[u])/r+n),0,1);return P}function T(a,i,n,r,v,s,o){for(var b=0;b<i;b++){for(var g=0;g<n;g++)r[g]=a[g*i+b];for(e(r,v,s,o,n),g=0;g<n;g++)a[g*i+b]=v[g]}for(g=0;g<n;g++){for(b=0;b<i;b++)r[b]=a[g*i+b];for(e(r,v,s,o,i),b=0;b<i;b++)a[g*i+b]=Math.sqrt(v[b])}}function e(a,i,n,r,v){n[0]=0,r[0]=-c,r[1]=+c;for(var s=1,o=0;s<v;s++){for(var b=(a[s]+s*s-(a[n[o]]+n[o]*n[o]))/(2*s-2*n[o]);b<=r[o];)o--,b=(a[s]+s*s-(a[n[o]]+n[o]*n[o]))/(2*s-2*n[o]);o++,n[o]=s,r[o]=b,r[o+1]=+c}for(s=0,o=0;s<v;s++){for(;r[o+1]<s;)o++;i[s]=(s-n[o])*(s-n[o])+a[n[o]]}}},{clamp:86}],83:[function(t,B,V){},{}],84:[function(t,B,V){var m=typeof Reflect=="object"?Reflect:null,c=m&&typeof m.apply=="function"?m.apply:function(u,M,_){return Function.prototype.apply.call(u,M,_)},A;m&&typeof m.ownKeys=="function"?A=m.ownKeys:Object.getOwnPropertySymbols?A=function(u){return Object.getOwnPropertyNames(u).concat(Object.getOwnPropertySymbols(u))}:A=function(u){return Object.getOwnPropertyNames(u)};function T(x){console&&console.warn&&console.warn(x)}var e=Number.isNaN||function(u){return u!==u};function a(){a.init.call(this)}B.exports=a,B.exports.once=l,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var i=10;function n(x){if(typeof x!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof x)}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return i},set:function(x){if(typeof x!="number"||x<0||e(x))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+x+".");i=x}}),a.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(u){if(typeof u!="number"||u<0||e(u))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+u+".");return this._maxListeners=u,this};function r(x){return x._maxListeners===void 0?a.defaultMaxListeners:x._maxListeners}a.prototype.getMaxListeners=function(){return r(this)},a.prototype.emit=function(u){for(var M=[],_=1;_<arguments.length;_++)M.push(arguments[_]);var p=u==="error",w=this._events;if(w!==void 0)p=p&&w.error===void 0;else if(!p)return!1;if(p){var h;if(M.length>0&&(h=M[0]),h instanceof Error)throw h;var L=new Error("Unhandled error."+(h?" ("+h.message+")":""));throw L.context=h,L}var S=w[u];if(S===void 0)return!1;if(typeof S=="function")c(S,this,M);else for(var E=S.length,P=d(S,E),_=0;_<E;++_)c(P[_],this,M);return!0};function v(x,u,M,_){var p,w,h;if(n(M),w=x._events,w===void 0?(w=x._events=Object.create(null),x._eventsCount=0):(w.newListener!==void 0&&(x.emit("newListener",u,M.listener?M.listener:M),w=x._events),h=w[u]),h===void 0)h=w[u]=M,++x._eventsCount;else if(typeof h=="function"?h=w[u]=_?[M,h]:[h,M]:_?h.unshift(M):h.push(M),p=r(x),p>0&&h.length>p&&!h.warned){h.warned=!0;var L=new Error("Possible EventEmitter memory leak detected. "+h.length+" "+String(u)+" listeners added. Use emitter.setMaxListeners() to increase limit");L.name="MaxListenersExceededWarning",L.emitter=x,L.type=u,L.count=h.length,T(L)}return x}a.prototype.addListener=function(u,M){return v(this,u,M,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(u,M){return v(this,u,M,!0)};function s(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function o(x,u,M){var _={fired:!1,wrapFn:void 0,target:x,type:u,listener:M},p=s.bind(_);return p.listener=M,_.wrapFn=p,p}a.prototype.once=function(u,M){return n(M),this.on(u,o(this,u,M)),this},a.prototype.prependOnceListener=function(u,M){return n(M),this.prependListener(u,o(this,u,M)),this},a.prototype.removeListener=function(u,M){var _,p,w,h,L;if(n(M),p=this._events,p===void 0)return this;if(_=p[u],_===void 0)return this;if(_===M||_.listener===M)--this._eventsCount===0?this._events=Object.create(null):(delete p[u],p.removeListener&&this.emit("removeListener",u,_.listener||M));else if(typeof _!="function"){for(w=-1,h=_.length-1;h>=0;h--)if(_[h]===M||_[h].listener===M){L=_[h].listener,w=h;break}if(w<0)return this;w===0?_.shift():f(_,w),_.length===1&&(p[u]=_[0]),p.removeListener!==void 0&&this.emit("removeListener",u,L||M)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(u){var M,_,p;if(_=this._events,_===void 0)return this;if(_.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):_[u]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete _[u]),this;if(arguments.length===0){var w=Object.keys(_),h;for(p=0;p<w.length;++p)h=w[p],h!=="removeListener"&&this.removeAllListeners(h);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(M=_[u],typeof M=="function")this.removeListener(u,M);else if(M!==void 0)for(p=M.length-1;p>=0;p--)this.removeListener(u,M[p]);return this};function b(x,u,M){var _=x._events;if(_===void 0)return[];var p=_[u];return p===void 0?[]:typeof p=="function"?M?[p.listener||p]:[p]:M?y(p):d(p,p.length)}a.prototype.listeners=function(u){return b(this,u,!0)},a.prototype.rawListeners=function(u){return b(this,u,!1)},a.listenerCount=function(x,u){return typeof x.listenerCount=="function"?x.listenerCount(u):g.call(x,u)},a.prototype.listenerCount=g;function g(x){var u=this._events;if(u!==void 0){var M=u[x];if(typeof M=="function")return 1;if(M!==void 0)return M.length}return 0}a.prototype.eventNames=function(){return this._eventsCount>0?A(this._events):[]};function d(x,u){for(var M=new Array(u),_=0;_<u;++_)M[_]=x[_];return M}function f(x,u){for(;u+1<x.length;u++)x[u]=x[u+1];x.pop()}function y(x){for(var u=new Array(x.length),M=0;M<u.length;++M)u[M]=x[M].listener||x[M];return u}function l(x,u){return new Promise(function(M,_){function p(){w!==void 0&&x.removeListener("error",w),M([].slice.call(arguments))}var w;u!=="error"&&(w=function(L){x.removeListener(u,p),_(L)},x.once("error",w)),x.once(u,p)})}},{}],85:[function(t,B,V){(function(m){(function(){var c=t("base64-js"),A=t("ieee754");V.Buffer=i,V.SlowBuffer=y,V.INSPECT_MAX_BYTES=50;var T=2147483647;V.kMaxLength=T,i.TYPED_ARRAY_SUPPORT=e(),!i.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function e(){try{var oe=new Uint8Array(1);return oe.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},oe.foo()===42}catch{return!1}}Object.defineProperty(i.prototype,"parent",{enumerable:!0,get:function(){if(!!i.isBuffer(this))return this.buffer}}),Object.defineProperty(i.prototype,"offset",{enumerable:!0,get:function(){if(!!i.isBuffer(this))return this.byteOffset}});function a(oe){if(oe>T)throw new RangeError('The value "'+oe+'" is invalid for option "size"');var ae=new Uint8Array(oe);return ae.__proto__=i.prototype,ae}function i(oe,ae,se){if(typeof oe=="number"){if(typeof ae=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return s(oe)}return n(oe,ae,se)}typeof Symbol<"u"&&Symbol.species!=null&&i[Symbol.species]===i&&Object.defineProperty(i,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),i.poolSize=8192;function n(oe,ae,se){if(typeof oe=="string")return o(oe,ae);if(ArrayBuffer.isView(oe))return b(oe);if(oe==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof oe);if($(oe,ArrayBuffer)||oe&&$(oe.buffer,ArrayBuffer))return g(oe,ae,se);if(typeof oe=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var _e=oe.valueOf&&oe.valueOf();if(_e!=null&&_e!==oe)return i.from(_e,ae,se);var ue=d(oe);if(ue)return ue;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof oe[Symbol.toPrimitive]=="function")return i.from(oe[Symbol.toPrimitive]("string"),ae,se);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof oe)}i.from=function(oe,ae,se){return n(oe,ae,se)},i.prototype.__proto__=Uint8Array.prototype,i.__proto__=Uint8Array;function r(oe){if(typeof oe!="number")throw new TypeError('"size" argument must be of type number');if(oe<0)throw new RangeError('The value "'+oe+'" is invalid for option "size"')}function v(oe,ae,se){return r(oe),oe<=0?a(oe):ae!==void 0?typeof se=="string"?a(oe).fill(ae,se):a(oe).fill(ae):a(oe)}i.alloc=function(oe,ae,se){return v(oe,ae,se)};function s(oe){return r(oe),a(oe<0?0:f(oe)|0)}i.allocUnsafe=function(oe){return s(oe)},i.allocUnsafeSlow=function(oe){return s(oe)};function o(oe,ae){if((typeof ae!="string"||ae==="")&&(ae="utf8"),!i.isEncoding(ae))throw new TypeError("Unknown encoding: "+ae);var se=l(oe,ae)|0,_e=a(se),ue=_e.write(oe,ae);return ue!==se&&(_e=_e.slice(0,ue)),_e}function b(oe){for(var ae=oe.length<0?0:f(oe.length)|0,se=a(ae),_e=0;_e<ae;_e+=1)se[_e]=oe[_e]&255;return se}function g(oe,ae,se){if(ae<0||oe.byteLength<ae)throw new RangeError('"offset" is outside of buffer bounds');if(oe.byteLength<ae+(se||0))throw new RangeError('"length" is outside of buffer bounds');var _e;return ae===void 0&&se===void 0?_e=new Uint8Array(oe):se===void 0?_e=new Uint8Array(oe,ae):_e=new Uint8Array(oe,ae,se),_e.__proto__=i.prototype,_e}function d(oe){if(i.isBuffer(oe)){var ae=f(oe.length)|0,se=a(ae);return se.length===0||oe.copy(se,0,0,ae),se}if(oe.length!==void 0)return typeof oe.length!="number"||ie(oe.length)?a(0):b(oe);if(oe.type==="Buffer"&&Array.isArray(oe.data))return b(oe.data)}function f(oe){if(oe>=T)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+T.toString(16)+" bytes");return oe|0}function y(oe){return+oe!=oe&&(oe=0),i.alloc(+oe)}i.isBuffer=function(ae){return ae!=null&&ae._isBuffer===!0&&ae!==i.prototype},i.compare=function(ae,se){if($(ae,Uint8Array)&&(ae=i.from(ae,ae.offset,ae.byteLength)),$(se,Uint8Array)&&(se=i.from(se,se.offset,se.byteLength)),!i.isBuffer(ae)||!i.isBuffer(se))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(ae===se)return 0;for(var _e=ae.length,ue=se.length,ye=0,xe=Math.min(_e,ue);ye<xe;++ye)if(ae[ye]!==se[ye]){_e=ae[ye],ue=se[ye];break}return _e<ue?-1:ue<_e?1:0},i.isEncoding=function(ae){switch(String(ae).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(ae,se){if(!Array.isArray(ae))throw new TypeError('"list" argument must be an Array of Buffers');if(ae.length===0)return i.alloc(0);var _e;if(se===void 0)for(se=0,_e=0;_e<ae.length;++_e)se+=ae[_e].length;var ue=i.allocUnsafe(se),ye=0;for(_e=0;_e<ae.length;++_e){var xe=ae[_e];if($(xe,Uint8Array)&&(xe=i.from(xe)),!i.isBuffer(xe))throw new TypeError('"list" argument must be an Array of Buffers');xe.copy(ue,ye),ye+=xe.length}return ue};function l(oe,ae){if(i.isBuffer(oe))return oe.length;if(ArrayBuffer.isView(oe)||$(oe,ArrayBuffer))return oe.byteLength;if(typeof oe!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof oe);var se=oe.length,_e=arguments.length>2&&arguments[2]===!0;if(!_e&&se===0)return 0;for(var ue=!1;;)switch(ae){case"ascii":case"latin1":case"binary":return se;case"utf8":case"utf-8":return U(oe).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return se*2;case"hex":return se>>>1;case"base64":return re(oe).length;default:if(ue)return _e?-1:U(oe).length;ae=(""+ae).toLowerCase(),ue=!0}}i.byteLength=l;function x(oe,ae,se){var _e=!1;if((ae===void 0||ae<0)&&(ae=0),ae>this.length||((se===void 0||se>this.length)&&(se=this.length),se<=0)||(se>>>=0,ae>>>=0,se<=ae))return"";for(oe||(oe="utf8");;)switch(oe){case"hex":return z(this,ae,se);case"utf8":case"utf-8":return F(this,ae,se);case"ascii":return R(this,ae,se);case"latin1":case"binary":return N(this,ae,se);case"base64":return P(this,ae,se);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return G(this,ae,se);default:if(_e)throw new TypeError("Unknown encoding: "+oe);oe=(oe+"").toLowerCase(),_e=!0}}i.prototype._isBuffer=!0;function u(oe,ae,se){var _e=oe[ae];oe[ae]=oe[se],oe[se]=_e}i.prototype.swap16=function(){var ae=this.length;if(ae%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var se=0;se<ae;se+=2)u(this,se,se+1);return this},i.prototype.swap32=function(){var ae=this.length;if(ae%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var se=0;se<ae;se+=4)u(this,se,se+3),u(this,se+1,se+2);return this},i.prototype.swap64=function(){var ae=this.length;if(ae%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var se=0;se<ae;se+=8)u(this,se,se+7),u(this,se+1,se+6),u(this,se+2,se+5),u(this,se+3,se+4);return this},i.prototype.toString=function(){var ae=this.length;return ae===0?"":arguments.length===0?F(this,0,ae):x.apply(this,arguments)},i.prototype.toLocaleString=i.prototype.toString,i.prototype.equals=function(ae){if(!i.isBuffer(ae))throw new TypeError("Argument must be a Buffer");return this===ae?!0:i.compare(this,ae)===0},i.prototype.inspect=function(){var ae="",se=V.INSPECT_MAX_BYTES;return ae=this.toString("hex",0,se).replace(/(.{2})/g,"$1 ").trim(),this.length>se&&(ae+=" ... "),"<Buffer "+ae+">"},i.prototype.compare=function(ae,se,_e,ue,ye){if($(ae,Uint8Array)&&(ae=i.from(ae,ae.offset,ae.byteLength)),!i.isBuffer(ae))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof ae);if(se===void 0&&(se=0),_e===void 0&&(_e=ae?ae.length:0),ue===void 0&&(ue=0),ye===void 0&&(ye=this.length),se<0||_e>ae.length||ue<0||ye>this.length)throw new RangeError("out of range index");if(ue>=ye&&se>=_e)return 0;if(ue>=ye)return-1;if(se>=_e)return 1;if(se>>>=0,_e>>>=0,ue>>>=0,ye>>>=0,this===ae)return 0;for(var xe=ye-ue,me=_e-se,be=Math.min(xe,me),ke=this.slice(ue,ye),De=ae.slice(se,_e),Ve=0;Ve<be;++Ve)if(ke[Ve]!==De[Ve]){xe=ke[Ve],me=De[Ve];break}return xe<me?-1:me<xe?1:0};function M(oe,ae,se,_e,ue){if(oe.length===0)return-1;if(typeof se=="string"?(_e=se,se=0):se>2147483647?se=2147483647:se<-2147483648&&(se=-2147483648),se=+se,ie(se)&&(se=ue?0:oe.length-1),se<0&&(se=oe.length+se),se>=oe.length){if(ue)return-1;se=oe.length-1}else if(se<0)if(ue)se=0;else return-1;if(typeof ae=="string"&&(ae=i.from(ae,_e)),i.isBuffer(ae))return ae.length===0?-1:_(oe,ae,se,_e,ue);if(typeof ae=="number")return ae=ae&255,typeof Uint8Array.prototype.indexOf=="function"?ue?Uint8Array.prototype.indexOf.call(oe,ae,se):Uint8Array.prototype.lastIndexOf.call(oe,ae,se):_(oe,[ae],se,_e,ue);throw new TypeError("val must be string, number or Buffer")}function _(oe,ae,se,_e,ue){var ye=1,xe=oe.length,me=ae.length;if(_e!==void 0&&(_e=String(_e).toLowerCase(),_e==="ucs2"||_e==="ucs-2"||_e==="utf16le"||_e==="utf-16le")){if(oe.length<2||ae.length<2)return-1;ye=2,xe/=2,me/=2,se/=2}function be(Le,je){return ye===1?Le[je]:Le.readUInt16BE(je*ye)}var ke;if(ue){var De=-1;for(ke=se;ke<xe;ke++)if(be(oe,ke)===be(ae,De===-1?0:ke-De)){if(De===-1&&(De=ke),ke-De+1===me)return De*ye}else De!==-1&&(ke-=ke-De),De=-1}else for(se+me>xe&&(se=xe-me),ke=se;ke>=0;ke--){for(var Ve=!0,Ae=0;Ae<me;Ae++)if(be(oe,ke+Ae)!==be(ae,Ae)){Ve=!1;break}if(Ve)return ke}return-1}i.prototype.includes=function(ae,se,_e){return this.indexOf(ae,se,_e)!==-1},i.prototype.indexOf=function(ae,se,_e){return M(this,ae,se,_e,!0)},i.prototype.lastIndexOf=function(ae,se,_e){return M(this,ae,se,_e,!1)};function p(oe,ae,se,_e){se=Number(se)||0;var ue=oe.length-se;_e?(_e=Number(_e),_e>ue&&(_e=ue)):_e=ue;var ye=ae.length;_e>ye/2&&(_e=ye/2);for(var xe=0;xe<_e;++xe){var me=parseInt(ae.substr(xe*2,2),16);if(ie(me))return xe;oe[se+xe]=me}return xe}function w(oe,ae,se,_e){return j(U(ae,oe.length-se),oe,se,_e)}function h(oe,ae,se,_e){return j(H(ae),oe,se,_e)}function L(oe,ae,se,_e){return h(oe,ae,se,_e)}function S(oe,ae,se,_e){return j(re(ae),oe,se,_e)}function E(oe,ae,se,_e){return j(q(ae,oe.length-se),oe,se,_e)}i.prototype.write=function(ae,se,_e,ue){if(se===void 0)ue="utf8",_e=this.length,se=0;else if(_e===void 0&&typeof se=="string")ue=se,_e=this.length,se=0;else if(isFinite(se))se=se>>>0,isFinite(_e)?(_e=_e>>>0,ue===void 0&&(ue="utf8")):(ue=_e,_e=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var ye=this.length-se;if((_e===void 0||_e>ye)&&(_e=ye),ae.length>0&&(_e<0||se<0)||se>this.length)throw new RangeError("Attempt to write outside buffer bounds");ue||(ue="utf8");for(var xe=!1;;)switch(ue){case"hex":return p(this,ae,se,_e);case"utf8":case"utf-8":return w(this,ae,se,_e);case"ascii":return h(this,ae,se,_e);case"latin1":case"binary":return L(this,ae,se,_e);case"base64":return S(this,ae,se,_e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,ae,se,_e);default:if(xe)throw new TypeError("Unknown encoding: "+ue);ue=(""+ue).toLowerCase(),xe=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function P(oe,ae,se){return ae===0&&se===oe.length?c.fromByteArray(oe):c.fromByteArray(oe.slice(ae,se))}function F(oe,ae,se){se=Math.min(oe.length,se);for(var _e=[],ue=ae;ue<se;){var ye=oe[ue],xe=null,me=ye>239?4:ye>223?3:ye>191?2:1;if(ue+me<=se){var be,ke,De,Ve;switch(me){case 1:ye<128&&(xe=ye);break;case 2:be=oe[ue+1],(be&192)===128&&(Ve=(ye&31)<<6|be&63,Ve>127&&(xe=Ve));break;case 3:be=oe[ue+1],ke=oe[ue+2],(be&192)===128&&(ke&192)===128&&(Ve=(ye&15)<<12|(be&63)<<6|ke&63,Ve>2047&&(Ve<55296||Ve>57343)&&(xe=Ve));break;case 4:be=oe[ue+1],ke=oe[ue+2],De=oe[ue+3],(be&192)===128&&(ke&192)===128&&(De&192)===128&&(Ve=(ye&15)<<18|(be&63)<<12|(ke&63)<<6|De&63,Ve>65535&&Ve<1114112&&(xe=Ve))}}xe===null?(xe=65533,me=1):xe>65535&&(xe-=65536,_e.push(xe>>>10&1023|55296),xe=56320|xe&1023),_e.push(xe),ue+=me}return D(_e)}var I=4096;function D(oe){var ae=oe.length;if(ae<=I)return String.fromCharCode.apply(String,oe);for(var se="",_e=0;_e<ae;)se+=String.fromCharCode.apply(String,oe.slice(_e,_e+=I));return se}function R(oe,ae,se){var _e="";se=Math.min(oe.length,se);for(var ue=ae;ue<se;++ue)_e+=String.fromCharCode(oe[ue]&127);return _e}function N(oe,ae,se){var _e="";se=Math.min(oe.length,se);for(var ue=ae;ue<se;++ue)_e+=String.fromCharCode(oe[ue]);return _e}function z(oe,ae,se){var _e=oe.length;(!ae||ae<0)&&(ae=0),(!se||se<0||se>_e)&&(se=_e);for(var ue="",ye=ae;ye<se;++ye)ue+=K(oe[ye]);return ue}function G(oe,ae,se){for(var _e=oe.slice(ae,se),ue="",ye=0;ye<_e.length;ye+=2)ue+=String.fromCharCode(_e[ye]+_e[ye+1]*256);return ue}i.prototype.slice=function(ae,se){var _e=this.length;ae=~~ae,se=se===void 0?_e:~~se,ae<0?(ae+=_e,ae<0&&(ae=0)):ae>_e&&(ae=_e),se<0?(se+=_e,se<0&&(se=0)):se>_e&&(se=_e),se<ae&&(se=ae);var ue=this.subarray(ae,se);return ue.__proto__=i.prototype,ue};function Y(oe,ae,se){if(oe%1!==0||oe<0)throw new RangeError("offset is not uint");if(oe+ae>se)throw new RangeError("Trying to access beyond buffer length")}i.prototype.readUIntLE=function(ae,se,_e){ae=ae>>>0,se=se>>>0,_e||Y(ae,se,this.length);for(var ue=this[ae],ye=1,xe=0;++xe<se&&(ye*=256);)ue+=this[ae+xe]*ye;return ue},i.prototype.readUIntBE=function(ae,se,_e){ae=ae>>>0,se=se>>>0,_e||Y(ae,se,this.length);for(var ue=this[ae+--se],ye=1;se>0&&(ye*=256);)ue+=this[ae+--se]*ye;return ue},i.prototype.readUInt8=function(ae,se){return ae=ae>>>0,se||Y(ae,1,this.length),this[ae]},i.prototype.readUInt16LE=function(ae,se){return ae=ae>>>0,se||Y(ae,2,this.length),this[ae]|this[ae+1]<<8},i.prototype.readUInt16BE=function(ae,se){return ae=ae>>>0,se||Y(ae,2,this.length),this[ae]<<8|this[ae+1]},i.prototype.readUInt32LE=function(ae,se){return ae=ae>>>0,se||Y(ae,4,this.length),(this[ae]|this[ae+1]<<8|this[ae+2]<<16)+this[ae+3]*16777216},i.prototype.readUInt32BE=function(ae,se){return ae=ae>>>0,se||Y(ae,4,this.length),this[ae]*16777216+(this[ae+1]<<16|this[ae+2]<<8|this[ae+3])},i.prototype.readIntLE=function(ae,se,_e){ae=ae>>>0,se=se>>>0,_e||Y(ae,se,this.length);for(var ue=this[ae],ye=1,xe=0;++xe<se&&(ye*=256);)ue+=this[ae+xe]*ye;return ye*=128,ue>=ye&&(ue-=Math.pow(2,8*se)),ue},i.prototype.readIntBE=function(ae,se,_e){ae=ae>>>0,se=se>>>0,_e||Y(ae,se,this.length);for(var ue=se,ye=1,xe=this[ae+--ue];ue>0&&(ye*=256);)xe+=this[ae+--ue]*ye;return ye*=128,xe>=ye&&(xe-=Math.pow(2,8*se)),xe},i.prototype.readInt8=function(ae,se){return ae=ae>>>0,se||Y(ae,1,this.length),this[ae]&128?(255-this[ae]+1)*-1:this[ae]},i.prototype.readInt16LE=function(ae,se){ae=ae>>>0,se||Y(ae,2,this.length);var _e=this[ae]|this[ae+1]<<8;return _e&32768?_e|4294901760:_e},i.prototype.readInt16BE=function(ae,se){ae=ae>>>0,se||Y(ae,2,this.length);var _e=this[ae+1]|this[ae]<<8;return _e&32768?_e|4294901760:_e},i.prototype.readInt32LE=function(ae,se){return ae=ae>>>0,se||Y(ae,4,this.length),this[ae]|this[ae+1]<<8|this[ae+2]<<16|this[ae+3]<<24},i.prototype.readInt32BE=function(ae,se){return ae=ae>>>0,se||Y(ae,4,this.length),this[ae]<<24|this[ae+1]<<16|this[ae+2]<<8|this[ae+3]},i.prototype.readFloatLE=function(ae,se){return ae=ae>>>0,se||Y(ae,4,this.length),A.read(this,ae,!0,23,4)},i.prototype.readFloatBE=function(ae,se){return ae=ae>>>0,se||Y(ae,4,this.length),A.read(this,ae,!1,23,4)},i.prototype.readDoubleLE=function(ae,se){return ae=ae>>>0,se||Y(ae,8,this.length),A.read(this,ae,!0,52,8)},i.prototype.readDoubleBE=function(ae,se){return ae=ae>>>0,se||Y(ae,8,this.length),A.read(this,ae,!1,52,8)};function ee(oe,ae,se,_e,ue,ye){if(!i.isBuffer(oe))throw new TypeError('"buffer" argument must be a Buffer instance');if(ae>ue||ae<ye)throw new RangeError('"value" argument is out of bounds');if(se+_e>oe.length)throw new RangeError("Index out of range")}i.prototype.writeUIntLE=function(ae,se,_e,ue){if(ae=+ae,se=se>>>0,_e=_e>>>0,!ue){var ye=Math.pow(2,8*_e)-1;ee(this,ae,se,_e,ye,0)}var xe=1,me=0;for(this[se]=ae&255;++me<_e&&(xe*=256);)this[se+me]=ae/xe&255;return se+_e},i.prototype.writeUIntBE=function(ae,se,_e,ue){if(ae=+ae,se=se>>>0,_e=_e>>>0,!ue){var ye=Math.pow(2,8*_e)-1;ee(this,ae,se,_e,ye,0)}var xe=_e-1,me=1;for(this[se+xe]=ae&255;--xe>=0&&(me*=256);)this[se+xe]=ae/me&255;return se+_e},i.prototype.writeUInt8=function(ae,se,_e){return ae=+ae,se=se>>>0,_e||ee(this,ae,se,1,255,0),this[se]=ae&255,se+1},i.prototype.writeUInt16LE=function(ae,se,_e){return ae=+ae,se=se>>>0,_e||ee(this,ae,se,2,65535,0),this[se]=ae&255,this[se+1]=ae>>>8,se+2},i.prototype.writeUInt16BE=function(ae,se,_e){return ae=+ae,se=se>>>0,_e||ee(this,ae,se,2,65535,0),this[se]=ae>>>8,this[se+1]=ae&255,se+2},i.prototype.writeUInt32LE=function(ae,se,_e){return ae=+ae,se=se>>>0,_e||ee(this,ae,se,4,4294967295,0),this[se+3]=ae>>>24,this[se+2]=ae>>>16,this[se+1]=ae>>>8,this[se]=ae&255,se+4},i.prototype.writeUInt32BE=function(ae,se,_e){return ae=+ae,se=se>>>0,_e||ee(this,ae,se,4,4294967295,0),this[se]=ae>>>24,this[se+1]=ae>>>16,this[se+2]=ae>>>8,this[se+3]=ae&255,se+4},i.prototype.writeIntLE=function(ae,se,_e,ue){if(ae=+ae,se=se>>>0,!ue){var ye=Math.pow(2,8*_e-1);ee(this,ae,se,_e,ye-1,-ye)}var xe=0,me=1,be=0;for(this[se]=ae&255;++xe<_e&&(me*=256);)ae<0&&be===0&&this[se+xe-1]!==0&&(be=1),this[se+xe]=(ae/me>>0)-be&255;return se+_e},i.prototype.writeIntBE=function(ae,se,_e,ue){if(ae=+ae,se=se>>>0,!ue){var ye=Math.pow(2,8*_e-1);ee(this,ae,se,_e,ye-1,-ye)}var xe=_e-1,me=1,be=0;for(this[se+xe]=ae&255;--xe>=0&&(me*=256);)ae<0&&be===0&&this[se+xe+1]!==0&&(be=1),this[se+xe]=(ae/me>>0)-be&255;return se+_e},i.prototype.writeInt8=function(ae,se,_e){return ae=+ae,se=se>>>0,_e||ee(this,ae,se,1,127,-128),ae<0&&(ae=255+ae+1),this[se]=ae&255,se+1},i.prototype.writeInt16LE=function(ae,se,_e){return ae=+ae,se=se>>>0,_e||ee(this,ae,se,2,32767,-32768),this[se]=ae&255,this[se+1]=ae>>>8,se+2},i.prototype.writeInt16BE=function(ae,se,_e){return ae=+ae,se=se>>>0,_e||ee(this,ae,se,2,32767,-32768),this[se]=ae>>>8,this[se+1]=ae&255,se+2},i.prototype.writeInt32LE=function(ae,se,_e){return ae=+ae,se=se>>>0,_e||ee(this,ae,se,4,2147483647,-2147483648),this[se]=ae&255,this[se+1]=ae>>>8,this[se+2]=ae>>>16,this[se+3]=ae>>>24,se+4},i.prototype.writeInt32BE=function(ae,se,_e){return ae=+ae,se=se>>>0,_e||ee(this,ae,se,4,2147483647,-2147483648),ae<0&&(ae=4294967295+ae+1),this[se]=ae>>>24,this[se+1]=ae>>>16,this[se+2]=ae>>>8,this[se+3]=ae&255,se+4};function Z(oe,ae,se,_e,ue,ye){if(se+_e>oe.length)throw new RangeError("Index out of range");if(se<0)throw new RangeError("Index out of range")}function X(oe,ae,se,_e,ue){return ae=+ae,se=se>>>0,ue||Z(oe,ae,se,4),A.write(oe,ae,se,_e,23,4),se+4}i.prototype.writeFloatLE=function(ae,se,_e){return X(this,ae,se,!0,_e)},i.prototype.writeFloatBE=function(ae,se,_e){return X(this,ae,se,!1,_e)};function ne(oe,ae,se,_e,ue){return ae=+ae,se=se>>>0,ue||Z(oe,ae,se,8),A.write(oe,ae,se,_e,52,8),se+8}i.prototype.writeDoubleLE=function(ae,se,_e){return ne(this,ae,se,!0,_e)},i.prototype.writeDoubleBE=function(ae,se,_e){return ne(this,ae,se,!1,_e)},i.prototype.copy=function(ae,se,_e,ue){if(!i.isBuffer(ae))throw new TypeError("argument should be a Buffer");if(_e||(_e=0),!ue&&ue!==0&&(ue=this.length),se>=ae.length&&(se=ae.length),se||(se=0),ue>0&&ue<_e&&(ue=_e),ue===_e||ae.length===0||this.length===0)return 0;if(se<0)throw new RangeError("targetStart out of bounds");if(_e<0||_e>=this.length)throw new RangeError("Index out of range");if(ue<0)throw new RangeError("sourceEnd out of bounds");ue>this.length&&(ue=this.length),ae.length-se<ue-_e&&(ue=ae.length-se+_e);var ye=ue-_e;if(this===ae&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(se,_e,ue);else if(this===ae&&_e<se&&se<ue)for(var xe=ye-1;xe>=0;--xe)ae[xe+se]=this[xe+_e];else Uint8Array.prototype.set.call(ae,this.subarray(_e,ue),se);return ye},i.prototype.fill=function(ae,se,_e,ue){if(typeof ae=="string"){if(typeof se=="string"?(ue=se,se=0,_e=this.length):typeof _e=="string"&&(ue=_e,_e=this.length),ue!==void 0&&typeof ue!="string")throw new TypeError("encoding must be a string");if(typeof ue=="string"&&!i.isEncoding(ue))throw new TypeError("Unknown encoding: "+ue);if(ae.length===1){var ye=ae.charCodeAt(0);(ue==="utf8"&&ye<128||ue==="latin1")&&(ae=ye)}}else typeof ae=="number"&&(ae=ae&255);if(se<0||this.length<se||this.length<_e)throw new RangeError("Out of range index");if(_e<=se)return this;se=se>>>0,_e=_e===void 0?this.length:_e>>>0,ae||(ae=0);var xe;if(typeof ae=="number")for(xe=se;xe<_e;++xe)this[xe]=ae;else{var me=i.isBuffer(ae)?ae:i.from(ae,ue),be=me.length;if(be===0)throw new TypeError('The value "'+ae+'" is invalid for argument "value"');for(xe=0;xe<_e-se;++xe)this[xe+se]=me[xe%be]}return this};var ce=/[^+/0-9A-Za-z-_]/g;function Q(oe){if(oe=oe.split("=")[0],oe=oe.trim().replace(ce,""),oe.length<2)return"";for(;oe.length%4!==0;)oe=oe+"=";return oe}function K(oe){return oe<16?"0"+oe.toString(16):oe.toString(16)}function U(oe,ae){ae=ae||1/0;for(var se,_e=oe.length,ue=null,ye=[],xe=0;xe<_e;++xe){if(se=oe.charCodeAt(xe),se>55295&&se<57344){if(!ue){if(se>56319){(ae-=3)>-1&&ye.push(239,191,189);continue}else if(xe+1===_e){(ae-=3)>-1&&ye.push(239,191,189);continue}ue=se;continue}if(se<56320){(ae-=3)>-1&&ye.push(239,191,189),ue=se;continue}se=(ue-55296<<10|se-56320)+65536}else ue&&(ae-=3)>-1&&ye.push(239,191,189);if(ue=null,se<128){if((ae-=1)<0)break;ye.push(se)}else if(se<2048){if((ae-=2)<0)break;ye.push(se>>6|192,se&63|128)}else if(se<65536){if((ae-=3)<0)break;ye.push(se>>12|224,se>>6&63|128,se&63|128)}else if(se<1114112){if((ae-=4)<0)break;ye.push(se>>18|240,se>>12&63|128,se>>6&63|128,se&63|128)}else throw new Error("Invalid code point")}return ye}function H(oe){for(var ae=[],se=0;se<oe.length;++se)ae.push(oe.charCodeAt(se)&255);return ae}function q(oe,ae){for(var se,_e,ue,ye=[],xe=0;xe<oe.length&&!((ae-=2)<0);++xe)se=oe.charCodeAt(xe),_e=se>>8,ue=se%256,ye.push(ue),ye.push(_e);return ye}function re(oe){return c.toByteArray(Q(oe))}function j(oe,ae,se,_e){for(var ue=0;ue<_e&&!(ue+se>=ae.length||ue>=oe.length);++ue)ae[ue+se]=oe[ue];return ue}function $(oe,ae){return oe instanceof ae||oe!=null&&oe.constructor!=null&&oe.constructor.name!=null&&oe.constructor.name===ae.name}function ie(oe){return oe!==oe}}).call(this)}).call(this,t("buffer").Buffer)},{"base64-js":79,buffer:85,ieee754:230}],86:[function(t,B,V){B.exports=m;function m(c,A,T){return A<T?c<A?A:c>T?T:c:c<T?T:c>A?A:c}},{}],87:[function(t,B,V){var m=t("clamp");B.exports=c,B.exports.to=c,B.exports.from=A;function c(T,e){e==null&&(e=!0);var a=T[0],i=T[1],n=T[2],r=T[3];r==null&&(r=e?1:255),e&&(a*=255,i*=255,n*=255,r*=255),a=m(a,0,255)&255,i=m(i,0,255)&255,n=m(n,0,255)&255,r=m(r,0,255)&255;var v=a*16777216+(i<<16)+(n<<8)+r;return v}function A(T,e){T=+T;var a=T>>>24,i=(T&16711680)>>>16,n=(T&65280)>>>8,r=T&255;return e===!1?[a,i,n,r]:[a/255,i/255,n/255,r/255]}},{clamp:86}],88:[function(t,B,V){B.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],89:[function(t,B,V){var m=t("color-rgba"),c=t("clamp"),A=t("dtype");B.exports=function(a,i){(i==="float"||!i)&&(i="array"),i==="uint"&&(i="uint8"),i==="uint_clamped"&&(i="uint8_clamped");var n=A(i),r=new n(4),v=i!=="uint8"&&i!=="uint8_clamped";return(!a.length||typeof a=="string")&&(a=m(a),a[0]/=255,a[1]/=255,a[2]/=255),T(a)?(r[0]=a[0],r[1]=a[1],r[2]=a[2],r[3]=a[3]!=null?a[3]:255,v&&(r[0]/=255,r[1]/=255,r[2]/=255,r[3]/=255),r):(v?(r[0]=a[0],r[1]=a[1],r[2]=a[2],r[3]=a[3]!=null?a[3]:1):(r[0]=c(Math.floor(a[0]*255),0,255),r[1]=c(Math.floor(a[1]*255),0,255),r[2]=c(Math.floor(a[2]*255),0,255),r[3]=a[3]==null?255:c(Math.floor(a[3]*255),0,255)),r)};function T(e){return!!(e instanceof Uint8Array||e instanceof Uint8ClampedArray||Array.isArray(e)&&(e[0]>1||e[0]===0)&&(e[1]>1||e[1]===0)&&(e[2]>1||e[2]===0)&&(!e[3]||e[3]>1))}},{clamp:86,"color-rgba":91,dtype:127}],90:[function(t,B,V){(function(m){(function(){var c=t("color-name"),A=t("is-plain-obj"),T=t("defined");B.exports=a;var e={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function a(i){var n,r=[],v=1,s;if(typeof i=="string")if(c[i])r=c[i].slice(),s="rgb";else if(i==="transparent")v=0,s="rgb",r=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(i)){var o=i.slice(1),b=o.length,g=b<=4;v=1,g?(r=[parseInt(o[0]+o[0],16),parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16)],b===4&&(v=parseInt(o[3]+o[3],16)/255)):(r=[parseInt(o[0]+o[1],16),parseInt(o[2]+o[3],16),parseInt(o[4]+o[5],16)],b===8&&(v=parseInt(o[6]+o[7],16)/255)),r[0]||(r[0]=0),r[1]||(r[1]=0),r[2]||(r[2]=0),s="rgb"}else if(n=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(i)){var d=n[1],f=d==="rgb",o=d.replace(/a$/,"");s=o;var b=o==="cmyk"?4:o==="gray"?1:3;r=n[2].trim().split(/\s*,\s*/).map(function(u,M){if(/%$/.test(u))return M===b?parseFloat(u)/100:o==="rgb"?parseFloat(u)*255/100:parseFloat(u);if(o[M]==="h"){if(/deg$/.test(u))return parseFloat(u);if(e[u]!==void 0)return e[u]}return parseFloat(u)}),d===o&&r.push(1),v=f||r[b]===void 0?1:r[b],r=r.slice(0,b)}else i.length>10&&/[0-9](?:\s|\/)/.test(i)&&(r=i.match(/([0-9]+)/g).map(function(l){return parseFloat(l)}),s=i.match(/([a-z])/ig).join("").toLowerCase());else if(!isNaN(i))s="rgb",r=[i>>>16,(i&65280)>>>8,i&255];else if(A(i)){var y=T(i.r,i.red,i.R,null);y!==null?(s="rgb",r=[y,T(i.g,i.green,i.G),T(i.b,i.blue,i.B)]):(s="hsl",r=[T(i.h,i.hue,i.H),T(i.s,i.saturation,i.S),T(i.l,i.lightness,i.L,i.b,i.brightness)]),v=T(i.a,i.alpha,i.opacity,1),i.opacity!=null&&(v/=100)}else(Array.isArray(i)||m.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(i))&&(r=[i[0],i[1],i[2]],s="rgb",v=i.length===4?i[3]:1);return{space:s,values:r,alpha:v}}}).call(this)}).call(this,typeof Ro<"u"?Ro:typeof self<"u"?self:typeof window<"u"?window:{})},{"color-name":88,defined:124,"is-plain-obj":236}],91:[function(t,B,V){var m=t("color-parse"),c=t("color-space/hsl"),A=t("clamp");B.exports=function(e){var a,i=m(e);return i.space?(a=Array(3),a[0]=A(i.values[0],0,255),a[1]=A(i.values[1],0,255),a[2]=A(i.values[2],0,255),i.space[0]==="h"&&(a=c.rgb(a)),a.push(A(i.alpha,0,1)),a):[]}},{clamp:86,"color-parse":90,"color-space/hsl":92}],92:[function(t,B,V){var m=t("./rgb");B.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(c){var A=c[0]/360,T=c[1]/100,e=c[2]/100,a,i,n,r,v;if(T===0)return v=e*255,[v,v,v];e<.5?i=e*(1+T):i=e+T-e*T,a=2*e-i,r=[0,0,0];for(var s=0;s<3;s++)n=A+1/3*-(s-1),n<0?n++:n>1&&n--,6*n<1?v=a+(i-a)*6*n:2*n<1?v=i:3*n<2?v=a+(i-a)*(2/3-n)*6:v=a,r[s]=v*255;return r}},m.hsl=function(c){var A=c[0]/255,T=c[1]/255,e=c[2]/255,a=Math.min(A,T,e),i=Math.max(A,T,e),n=i-a,r,v,s;return i===a?r=0:A===i?r=(T-e)/n:T===i?r=2+(e-A)/n:e===i&&(r=4+(A-T)/n),r=Math.min(r*60,360),r<0&&(r+=360),s=(a+i)/2,i===a?v=0:s<=.5?v=n/(i+a):v=n/(2-i-a),[r,v*100,s*100]}},{"./rgb":93}],93:[function(t,B,V){B.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},{}],94:[function(t,B,V){B.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|\xE7)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|\xE9)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|\xE9)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|\xE3)o.?tom(e|\xE9)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},{}],95:[function(t,B,V){B.exports=["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]},{}],96:[function(t,B,V){B.exports=["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]},{}],97:[function(t,B,V){B.exports=["normal","italic","oblique"]},{}],98:[function(t,B,V){B.exports=["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]},{}],99:[function(t,B,V){B.exports={parse:t("./parse"),stringify:t("./stringify")}},{"./parse":101,"./stringify":102}],100:[function(t,B,V){var m=t("css-font-size-keywords");B.exports={isSize:function(A){return/^[\d\.]/.test(A)||A.indexOf("/")!==-1||m.indexOf(A)!==-1}}},{"css-font-size-keywords":95}],101:[function(t,B,V){var m=t("unquote"),c=t("css-global-keywords"),A=t("css-system-font-keywords"),T=t("css-font-weight-keywords"),e=t("css-font-style-keywords"),a=t("css-font-stretch-keywords"),i=t("string-split-by"),n=t("./lib/util").isSize;B.exports=v;var r=v.cache={};function v(o){if(typeof o!="string")throw new Error("Font argument must be a string.");if(r[o])return r[o];if(o==="")throw new Error("Cannot parse an empty string.");if(A.indexOf(o)!==-1)return r[o]={system:o};for(var b={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},g=i(o,/\s+/),d;d=g.shift();){if(c.indexOf(d)!==-1)return["style","variant","weight","stretch"].forEach(function(y){b[y]=d}),r[o]=b;if(e.indexOf(d)!==-1){b.style=d;continue}if(d==="normal"||d==="small-caps"){b.variant=d;continue}if(a.indexOf(d)!==-1){b.stretch=d;continue}if(T.indexOf(d)!==-1){b.weight=d;continue}if(n(d)){var f=i(d,"/");if(b.size=f[0],f[1]!=null?b.lineHeight=s(f[1]):g[0]==="/"&&(g.shift(),b.lineHeight=s(g.shift())),!g.length)throw new Error("Missing required font-family.");return b.family=i(g.join(" "),/\s*,\s*/).map(m),r[o]=b}throw new Error("Unknown or unsupported font token: "+d)}throw new Error("Missing required font-size.")}function s(o){var b=parseFloat(o);return b.toString()===o?b:o}},{"./lib/util":100,"css-font-stretch-keywords":96,"css-font-style-keywords":97,"css-font-weight-keywords":98,"css-global-keywords":103,"css-system-font-keywords":104,"string-split-by":306,unquote:329}],102:[function(t,B,V){var m=t("pick-by-alias"),c=t("./lib/util").isSize,A=o(t("css-global-keywords")),T=o(t("css-system-font-keywords")),e=o(t("css-font-weight-keywords")),a=o(t("css-font-style-keywords")),i=o(t("css-font-stretch-keywords")),n={normal:1,"small-caps":1},r={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},v={style:"normal",variant:"normal",weight:"normal",stretch:"normal",size:"1rem",lineHeight:"normal",family:"serif"};B.exports=function(g){if(g=m(g,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"}),g.system)return g.system&&s(g.system,T),g.system;if(s(g.style,a),s(g.variant,n),s(g.weight,e),s(g.stretch,i),g.size==null&&(g.size=v.size),typeof g.size=="number"&&(g.size+="px"),!c)throw Error("Bad size value `"+g.size+"`");g.family||(g.family=v.family),Array.isArray(g.family)&&(g.family.length||(g.family=[v.family]),g.family=g.family.map(function(f){return r[f]?f:'"'+f+'"'}).join(", "));var d=[];return d.push(g.style),g.variant!==g.style&&d.push(g.variant),g.weight!==g.variant&&g.weight!==g.style&&d.push(g.weight),g.stretch!==g.weight&&g.stretch!==g.variant&&g.stretch!==g.style&&d.push(g.stretch),d.push(g.size+(g.lineHeight==null||g.lineHeight==="normal"||g.lineHeight+""=="1"?"":"/"+g.lineHeight)),d.push(g.family),d.filter(Boolean).join(" ")};function s(b,g){if(b&&!g[b]&&!A[b])throw Error("Unknown keyword `"+b+"`");return b}function o(b){for(var g={},d=0;d<b.length;d++)g[b[d]]=1;return g}},{"./lib/util":100,"css-font-stretch-keywords":96,"css-font-style-keywords":97,"css-font-weight-keywords":98,"css-global-keywords":103,"css-system-font-keywords":104,"pick-by-alias":253}],103:[function(t,B,V){B.exports=["inherit","initial","unset"]},{}],104:[function(t,B,V){B.exports=["caption","icon","menu","message-box","small-caption","status-bar"]},{}],105:[function(t,B,V){var m=t("type/value/is"),c=t("type/value/ensure"),A=t("type/plain-function/ensure"),T=t("es5-ext/object/copy"),e=t("es5-ext/object/normalize-options"),a=t("es5-ext/object/map"),i=Function.prototype.bind,n=Object.defineProperty,r=Object.prototype.hasOwnProperty,v;v=function(s,o,b){var g=c(o)&&A(o.value),d;return d=T(o),delete d.writable,delete d.value,d.get=function(){return!b.overwriteDefinition&&r.call(this,s)?g:(o.value=i.call(g,b.resolveContext?b.resolveContext(this):this),n(this,s,o),this[s])},d},B.exports=function(s){var o=e(arguments[1]);return m(o.resolveContext)&&A(o.resolveContext),a(s,function(b,g){return v(g,b,o)})}},{"es5-ext/object/copy":147,"es5-ext/object/map":155,"es5-ext/object/normalize-options":156,"type/plain-function/ensure":322,"type/value/ensure":326,"type/value/is":327}],106:[function(t,B,V){var m=t("type/value/is"),c=t("type/plain-function/is"),A=t("es5-ext/object/assign"),T=t("es5-ext/object/normalize-options"),e=t("es5-ext/string/#/contains"),a=B.exports=function(i,n){var r,v,s,o,b;return arguments.length<2||typeof i!="string"?(o=n,n=i,i=null):o=arguments[2],m(i)?(r=e.call(i,"c"),v=e.call(i,"e"),s=e.call(i,"w")):(r=s=!0,v=!1),b={value:n,configurable:r,enumerable:v,writable:s},o?A(T(o),b):b};a.gs=function(i,n,r){var v,s,o,b;return typeof i!="string"?(o=r,r=n,n=i,i=null):o=arguments[3],m(n)?c(n)?m(r)?c(r)||(o=r,r=void 0):r=void 0:(o=n,n=r=void 0):n=void 0,m(i)?(v=e.call(i,"c"),s=e.call(i,"e")):(v=!0,s=!1),b={get:n,set:r,configurable:v,enumerable:s},o?A(T(o),b):b}},{"es5-ext/object/assign":144,"es5-ext/object/normalize-options":156,"es5-ext/string/#/contains":163,"type/plain-function/is":323,"type/value/is":327}],107:[function(t,B,V){(function(m,c){c(typeof V=="object"&&typeof B<"u"?V:m.d3=m.d3||{})})(this,function(m){function c(U,H){return U<H?-1:U>H?1:U>=H?0:NaN}function A(U){return U.length===1&&(U=T(U)),{left:function(H,q,re,j){for(re==null&&(re=0),j==null&&(j=H.length);re<j;){var $=re+j>>>1;U(H[$],q)<0?re=$+1:j=$}return re},right:function(H,q,re,j){for(re==null&&(re=0),j==null&&(j=H.length);re<j;){var $=re+j>>>1;U(H[$],q)>0?j=$:re=$+1}return re}}}function T(U){return function(H,q){return c(U(H),q)}}var e=A(c),a=e.right,i=e.left;function n(U,H){H==null&&(H=r);for(var q=0,re=U.length-1,j=U[0],$=new Array(re<0?0:re);q<re;)$[q]=H(j,j=U[++q]);return $}function r(U,H){return[U,H]}function v(U,H,q){var re=U.length,j=H.length,$=new Array(re*j),ie,oe,ae,se;for(q==null&&(q=r),ie=ae=0;ie<re;++ie)for(se=U[ie],oe=0;oe<j;++oe,++ae)$[ae]=q(se,H[oe]);return $}function s(U,H){return H<U?-1:H>U?1:H>=U?0:NaN}function o(U){return U===null?NaN:+U}function b(U,H){var q=U.length,re=0,j=-1,$=0,ie,oe,ae=0;if(H==null)for(;++j<q;)isNaN(ie=o(U[j]))||(oe=ie-$,$+=oe/++re,ae+=oe*(ie-$));else for(;++j<q;)isNaN(ie=o(H(U[j],j,U)))||(oe=ie-$,$+=oe/++re,ae+=oe*(ie-$));if(re>1)return ae/(re-1)}function g(U,H){var q=b(U,H);return q&&Math.sqrt(q)}function d(U,H){var q=U.length,re=-1,j,$,ie;if(H==null){for(;++re<q;)if((j=U[re])!=null&&j>=j)for($=ie=j;++re<q;)(j=U[re])!=null&&($>j&&($=j),ie<j&&(ie=j))}else for(;++re<q;)if((j=H(U[re],re,U))!=null&&j>=j)for($=ie=j;++re<q;)(j=H(U[re],re,U))!=null&&($>j&&($=j),ie<j&&(ie=j));return[$,ie]}var f=Array.prototype,y=f.slice,l=f.map;function x(U){return function(){return U}}function u(U){return U}function M(U,H,q){U=+U,H=+H,q=(j=arguments.length)<2?(H=U,U=0,1):j<3?1:+q;for(var re=-1,j=Math.max(0,Math.ceil((H-U)/q))|0,$=new Array(j);++re<j;)$[re]=U+re*q;return $}var _=Math.sqrt(50),p=Math.sqrt(10),w=Math.sqrt(2);function h(U,H,q){var re,j=-1,$,ie,oe;if(H=+H,U=+U,q=+q,U===H&&q>0)return[U];if((re=H<U)&&($=U,U=H,H=$),(oe=L(U,H,q))===0||!isFinite(oe))return[];if(oe>0)for(U=Math.ceil(U/oe),H=Math.floor(H/oe),ie=new Array($=Math.ceil(H-U+1));++j<$;)ie[j]=(U+j)*oe;else for(U=Math.floor(U*oe),H=Math.ceil(H*oe),ie=new Array($=Math.ceil(U-H+1));++j<$;)ie[j]=(U-j)/oe;return re&&ie.reverse(),ie}function L(U,H,q){var re=(H-U)/Math.max(0,q),j=Math.floor(Math.log(re)/Math.LN10),$=re/Math.pow(10,j);return j>=0?($>=_?10:$>=p?5:$>=w?2:1)*Math.pow(10,j):-Math.pow(10,-j)/($>=_?10:$>=p?5:$>=w?2:1)}function S(U,H,q){var re=Math.abs(H-U)/Math.max(0,q),j=Math.pow(10,Math.floor(Math.log(re)/Math.LN10)),$=re/j;return $>=_?j*=10:$>=p?j*=5:$>=w&&(j*=2),H<U?-j:j}function E(U){return Math.ceil(Math.log(U.length)/Math.LN2)+1}function P(){var U=u,H=d,q=E;function re(j){var $,ie=j.length,oe,ae=new Array(ie);for($=0;$<ie;++$)ae[$]=U(j[$],$,j);var se=H(ae),_e=se[0],ue=se[1],ye=q(ae,_e,ue);Array.isArray(ye)||(ye=S(_e,ue,ye),ye=M(Math.ceil(_e/ye)*ye,ue,ye));for(var xe=ye.length;ye[0]<=_e;)ye.shift(),--xe;for(;ye[xe-1]>ue;)ye.pop(),--xe;var me=new Array(xe+1),be;for($=0;$<=xe;++$)be=me[$]=[],be.x0=$>0?ye[$-1]:_e,be.x1=$<xe?ye[$]:ue;for($=0;$<ie;++$)oe=ae[$],_e<=oe&&oe<=ue&&me[a(ye,oe,0,xe)].push(j[$]);return me}return re.value=function(j){return arguments.length?(U=typeof j=="function"?j:x(j),re):U},re.domain=function(j){return arguments.length?(H=typeof j=="function"?j:x([j[0],j[1]]),re):H},re.thresholds=function(j){return arguments.length?(q=typeof j=="function"?j:Array.isArray(j)?x(y.call(j)):x(j),re):q},re}function F(U,H,q){if(q==null&&(q=o),!!(re=U.length)){if((H=+H)<=0||re<2)return+q(U[0],0,U);if(H>=1)return+q(U[re-1],re-1,U);var re,j=(re-1)*H,$=Math.floor(j),ie=+q(U[$],$,U),oe=+q(U[$+1],$+1,U);return ie+(oe-ie)*(j-$)}}function I(U,H,q){return U=l.call(U,o).sort(c),Math.ceil((q-H)/(2*(F(U,.75)-F(U,.25))*Math.pow(U.length,-1/3)))}function D(U,H,q){return Math.ceil((q-H)/(3.5*g(U)*Math.pow(U.length,-1/3)))}function R(U,H){var q=U.length,re=-1,j,$;if(H==null){for(;++re<q;)if((j=U[re])!=null&&j>=j)for($=j;++re<q;)(j=U[re])!=null&&j>$&&($=j)}else for(;++re<q;)if((j=H(U[re],re,U))!=null&&j>=j)for($=j;++re<q;)(j=H(U[re],re,U))!=null&&j>$&&($=j);return $}function N(U,H){var q=U.length,re=q,j=-1,$,ie=0;if(H==null)for(;++j<q;)isNaN($=o(U[j]))?--re:ie+=$;else for(;++j<q;)isNaN($=o(H(U[j],j,U)))?--re:ie+=$;if(re)return ie/re}function z(U,H){var q=U.length,re=-1,j,$=[];if(H==null)for(;++re<q;)isNaN(j=o(U[re]))||$.push(j);else for(;++re<q;)isNaN(j=o(H(U[re],re,U)))||$.push(j);return F($.sort(c),.5)}function G(U){for(var H=U.length,q,re=-1,j=0,$,ie;++re<H;)j+=U[re].length;for($=new Array(j);--H>=0;)for(ie=U[H],q=ie.length;--q>=0;)$[--j]=ie[q];return $}function Y(U,H){var q=U.length,re=-1,j,$;if(H==null){for(;++re<q;)if((j=U[re])!=null&&j>=j)for($=j;++re<q;)(j=U[re])!=null&&$>j&&($=j)}else for(;++re<q;)if((j=H(U[re],re,U))!=null&&j>=j)for($=j;++re<q;)(j=H(U[re],re,U))!=null&&$>j&&($=j);return $}function ee(U,H){for(var q=H.length,re=new Array(q);q--;)re[q]=U[H[q]];return re}function Z(U,H){if(!!(q=U.length)){var q,re=0,j=0,$,ie=U[j];for(H==null&&(H=c);++re<q;)(H($=U[re],ie)<0||H(ie,ie)!==0)&&(ie=$,j=re);if(H(ie,ie)===0)return j}}function X(U,H,q){for(var re=(q==null?U.length:q)-(H=H==null?0:+H),j,$;re;)$=Math.random()*re--|0,j=U[re+H],U[re+H]=U[$+H],U[$+H]=j;return U}function ne(U,H){var q=U.length,re=-1,j,$=0;if(H==null)for(;++re<q;)(j=+U[re])&&($+=j);else for(;++re<q;)(j=+H(U[re],re,U))&&($+=j);return $}function ce(U){if(!($=U.length))return[];for(var H=-1,q=Y(U,Q),re=new Array(q);++H<q;)for(var j=-1,$,ie=re[H]=new Array($);++j<$;)ie[j]=U[j][H];return re}function Q(U){return U.length}function K(){return ce(arguments)}m.bisect=a,m.bisectRight=a,m.bisectLeft=i,m.ascending=c,m.bisector=A,m.cross=v,m.descending=s,m.deviation=g,m.extent=d,m.histogram=P,m.thresholdFreedmanDiaconis=I,m.thresholdScott=D,m.thresholdSturges=E,m.max=R,m.mean=N,m.median=z,m.merge=G,m.min=Y,m.pairs=n,m.permute=ee,m.quantile=F,m.range=M,m.scan=Z,m.shuffle=X,m.sum=ne,m.ticks=h,m.tickIncrement=L,m.tickStep=S,m.transpose=ce,m.variance=b,m.zip=K,Object.defineProperty(m,"__esModule",{value:!0})})},{}],108:[function(t,B,V){(function(m,c){c(typeof V=="object"&&typeof B<"u"?V:m.d3=m.d3||{})})(this,function(m){var c="$";function A(){}A.prototype=T.prototype={constructor:A,has:function(f){return c+f in this},get:function(f){return this[c+f]},set:function(f,y){return this[c+f]=y,this},remove:function(f){var y=c+f;return y in this&&delete this[y]},clear:function(){for(var f in this)f[0]===c&&delete this[f]},keys:function(){var f=[];for(var y in this)y[0]===c&&f.push(y.slice(1));return f},values:function(){var f=[];for(var y in this)y[0]===c&&f.push(this[y]);return f},entries:function(){var f=[];for(var y in this)y[0]===c&&f.push({key:y.slice(1),value:this[y]});return f},size:function(){var f=0;for(var y in this)y[0]===c&&++f;return f},empty:function(){for(var f in this)if(f[0]===c)return!1;return!0},each:function(f){for(var y in this)y[0]===c&&f(this[y],y.slice(1),this)}};function T(f,y){var l=new A;if(f instanceof A)f.each(function(p,w){l.set(w,p)});else if(Array.isArray(f)){var x=-1,u=f.length,M;if(y==null)for(;++x<u;)l.set(x,f[x]);else for(;++x<u;)l.set(y(M=f[x],x,f),M)}else if(f)for(var _ in f)l.set(_,f[_]);return l}function e(){var f=[],y=[],l,x,u;function M(p,w,h,L){if(w>=f.length)return l!=null&&p.sort(l),x!=null?x(p):p;for(var S=-1,E=p.length,P=f[w++],F,I,D=T(),R,N=h();++S<E;)(R=D.get(F=P(I=p[S])+""))?R.push(I):D.set(F,[I]);return D.each(function(z,G){L(N,G,M(z,w,h,L))}),N}function _(p,w){if(++w>f.length)return p;var h,L=y[w-1];return x!=null&&w>=f.length?h=p.entries():(h=[],p.each(function(S,E){h.push({key:E,values:_(S,w)})})),L!=null?h.sort(function(S,E){return L(S.key,E.key)}):h}return u={object:function(p){return M(p,0,a,i)},map:function(p){return M(p,0,n,r)},entries:function(p){return _(M(p,0,n,r),0)},key:function(p){return f.push(p),u},sortKeys:function(p){return y[f.length-1]=p,u},sortValues:function(p){return l=p,u},rollup:function(p){return x=p,u}}}function a(){return{}}function i(f,y,l){f[y]=l}function n(){return T()}function r(f,y,l){f.set(y,l)}function v(){}var s=T.prototype;v.prototype=o.prototype={constructor:v,has:s.has,add:function(f){return f+="",this[c+f]=f,this},remove:s.remove,clear:s.clear,values:s.keys,size:s.size,empty:s.empty,each:s.each};function o(f,y){var l=new v;if(f instanceof v)f.each(function(M){l.add(M)});else if(f){var x=-1,u=f.length;if(y==null)for(;++x<u;)l.add(f[x]);else for(;++x<u;)l.add(y(f[x],x,f))}return l}function b(f){var y=[];for(var l in f)y.push(l);return y}function g(f){var y=[];for(var l in f)y.push(f[l]);return y}function d(f){var y=[];for(var l in f)y.push({key:l,value:f[l]});return y}m.nest=e,m.set=o,m.map=T,m.keys=b,m.values=g,m.entries=d,Object.defineProperty(m,"__esModule",{value:!0})})},{}],109:[function(t,B,V){(function(m,c){typeof V=="object"&&typeof B<"u"?c(V):(m=m||self,c(m.d3=m.d3||{}))})(this,function(m){function c(Ie,We,pt){Ie.prototype=We.prototype=pt,pt.constructor=Ie}function A(Ie,We){var pt=Object.create(Ie.prototype);for(var Ft in We)pt[Ft]=We[Ft];return pt}function T(){}var e=.7,a=1/e,i="\\s*([+-]?\\d+)\\s*",n="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",r="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",v=/^#([0-9a-f]{3,8})$/,s=new RegExp("^rgb\\("+[i,i,i]+"\\)$"),o=new RegExp("^rgb\\("+[r,r,r]+"\\)$"),b=new RegExp("^rgba\\("+[i,i,i,n]+"\\)$"),g=new RegExp("^rgba\\("+[r,r,r,n]+"\\)$"),d=new RegExp("^hsl\\("+[n,r,r]+"\\)$"),f=new RegExp("^hsla\\("+[n,r,r,n]+"\\)$"),y={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};c(T,M,{copy:function(Ie){return Object.assign(new this.constructor,this,Ie)},displayable:function(){return this.rgb().displayable()},hex:l,formatHex:l,formatHsl:x,formatRgb:u,toString:u});function l(){return this.rgb().formatHex()}function x(){return I(this).formatHsl()}function u(){return this.rgb().formatRgb()}function M(Ie){var We,pt;return Ie=(Ie+"").trim().toLowerCase(),(We=v.exec(Ie))?(pt=We[1].length,We=parseInt(We[1],16),pt===6?_(We):pt===3?new L(We>>8&15|We>>4&240,We>>4&15|We&240,(We&15)<<4|We&15,1):pt===8?p(We>>24&255,We>>16&255,We>>8&255,(We&255)/255):pt===4?p(We>>12&15|We>>8&240,We>>8&15|We>>4&240,We>>4&15|We&240,((We&15)<<4|We&15)/255):null):(We=s.exec(Ie))?new L(We[1],We[2],We[3],1):(We=o.exec(Ie))?new L(We[1]*255/100,We[2]*255/100,We[3]*255/100,1):(We=b.exec(Ie))?p(We[1],We[2],We[3],We[4]):(We=g.exec(Ie))?p(We[1]*255/100,We[2]*255/100,We[3]*255/100,We[4]):(We=d.exec(Ie))?F(We[1],We[2]/100,We[3]/100,1):(We=f.exec(Ie))?F(We[1],We[2]/100,We[3]/100,We[4]):y.hasOwnProperty(Ie)?_(y[Ie]):Ie==="transparent"?new L(NaN,NaN,NaN,0):null}function _(Ie){return new L(Ie>>16&255,Ie>>8&255,Ie&255,1)}function p(Ie,We,pt,Ft){return Ft<=0&&(Ie=We=pt=NaN),new L(Ie,We,pt,Ft)}function w(Ie){return Ie instanceof T||(Ie=M(Ie)),Ie?(Ie=Ie.rgb(),new L(Ie.r,Ie.g,Ie.b,Ie.opacity)):new L}function h(Ie,We,pt,Ft){return arguments.length===1?w(Ie):new L(Ie,We,pt,Ft==null?1:Ft)}function L(Ie,We,pt,Ft){this.r=+Ie,this.g=+We,this.b=+pt,this.opacity=+Ft}c(L,h,A(T,{brighter:function(Ie){return Ie=Ie==null?a:Math.pow(a,Ie),new L(this.r*Ie,this.g*Ie,this.b*Ie,this.opacity)},darker:function(Ie){return Ie=Ie==null?e:Math.pow(e,Ie),new L(this.r*Ie,this.g*Ie,this.b*Ie,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:S,formatHex:S,formatRgb:E,toString:E}));function S(){return"#"+P(this.r)+P(this.g)+P(this.b)}function E(){var Ie=this.opacity;return Ie=isNaN(Ie)?1:Math.max(0,Math.min(1,Ie)),(Ie===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(Ie===1?")":", "+Ie+")")}function P(Ie){return Ie=Math.max(0,Math.min(255,Math.round(Ie)||0)),(Ie<16?"0":"")+Ie.toString(16)}function F(Ie,We,pt,Ft){return Ft<=0?Ie=We=pt=NaN:pt<=0||pt>=1?Ie=We=NaN:We<=0&&(Ie=NaN),new R(Ie,We,pt,Ft)}function I(Ie){if(Ie instanceof R)return new R(Ie.h,Ie.s,Ie.l,Ie.opacity);if(Ie instanceof T||(Ie=M(Ie)),!Ie)return new R;if(Ie instanceof R)return Ie;Ie=Ie.rgb();var We=Ie.r/255,pt=Ie.g/255,Ft=Ie.b/255,Qt=Math.min(We,pt,Ft),zt=Math.max(We,pt,Ft),Et=NaN,Xt=zt-Qt,Nt=(zt+Qt)/2;return Xt?(We===zt?Et=(pt-Ft)/Xt+(pt<Ft)*6:pt===zt?Et=(Ft-We)/Xt+2:Et=(We-pt)/Xt+4,Xt/=Nt<.5?zt+Qt:2-zt-Qt,Et*=60):Xt=Nt>0&&Nt<1?0:Et,new R(Et,Xt,Nt,Ie.opacity)}function D(Ie,We,pt,Ft){return arguments.length===1?I(Ie):new R(Ie,We,pt,Ft==null?1:Ft)}function R(Ie,We,pt,Ft){this.h=+Ie,this.s=+We,this.l=+pt,this.opacity=+Ft}c(R,D,A(T,{brighter:function(Ie){return Ie=Ie==null?a:Math.pow(a,Ie),new R(this.h,this.s,this.l*Ie,this.opacity)},darker:function(Ie){return Ie=Ie==null?e:Math.pow(e,Ie),new R(this.h,this.s,this.l*Ie,this.opacity)},rgb:function(){var Ie=this.h%360+(this.h<0)*360,We=isNaN(Ie)||isNaN(this.s)?0:this.s,pt=this.l,Ft=pt+(pt<.5?pt:1-pt)*We,Qt=2*pt-Ft;return new L(N(Ie>=240?Ie-240:Ie+120,Qt,Ft),N(Ie,Qt,Ft),N(Ie<120?Ie+240:Ie-120,Qt,Ft),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var Ie=this.opacity;return Ie=isNaN(Ie)?1:Math.max(0,Math.min(1,Ie)),(Ie===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(Ie===1?")":", "+Ie+")")}}));function N(Ie,We,pt){return(Ie<60?We+(pt-We)*Ie/60:Ie<180?pt:Ie<240?We+(pt-We)*(240-Ie)/60:We)*255}var z=Math.PI/180,G=180/Math.PI,Y=18,ee=.96422,Z=1,X=.82521,ne=4/29,ce=6/29,Q=3*ce*ce,K=ce*ce*ce;function U(Ie){if(Ie instanceof re)return new re(Ie.l,Ie.a,Ie.b,Ie.opacity);if(Ie instanceof ue)return ye(Ie);Ie instanceof L||(Ie=w(Ie));var We=oe(Ie.r),pt=oe(Ie.g),Ft=oe(Ie.b),Qt=j((.2225045*We+.7168786*pt+.0606169*Ft)/Z),zt,Et;return We===pt&&pt===Ft?zt=Et=Qt:(zt=j((.4360747*We+.3850649*pt+.1430804*Ft)/ee),Et=j((.0139322*We+.0971045*pt+.7141733*Ft)/X)),new re(116*Qt-16,500*(zt-Qt),200*(Qt-Et),Ie.opacity)}function H(Ie,We){return new re(Ie,0,0,We==null?1:We)}function q(Ie,We,pt,Ft){return arguments.length===1?U(Ie):new re(Ie,We,pt,Ft==null?1:Ft)}function re(Ie,We,pt,Ft){this.l=+Ie,this.a=+We,this.b=+pt,this.opacity=+Ft}c(re,q,A(T,{brighter:function(Ie){return new re(this.l+Y*(Ie==null?1:Ie),this.a,this.b,this.opacity)},darker:function(Ie){return new re(this.l-Y*(Ie==null?1:Ie),this.a,this.b,this.opacity)},rgb:function(){var Ie=(this.l+16)/116,We=isNaN(this.a)?Ie:Ie+this.a/500,pt=isNaN(this.b)?Ie:Ie-this.b/200;return We=ee*$(We),Ie=Z*$(Ie),pt=X*$(pt),new L(ie(3.1338561*We-1.6168667*Ie-.4906146*pt),ie(-.9787684*We+1.9161415*Ie+.033454*pt),ie(.0719453*We-.2289914*Ie+1.4052427*pt),this.opacity)}}));function j(Ie){return Ie>K?Math.pow(Ie,1/3):Ie/Q+ne}function $(Ie){return Ie>ce?Ie*Ie*Ie:Q*(Ie-ne)}function ie(Ie){return 255*(Ie<=.0031308?12.92*Ie:1.055*Math.pow(Ie,1/2.4)-.055)}function oe(Ie){return(Ie/=255)<=.04045?Ie/12.92:Math.pow((Ie+.055)/1.055,2.4)}function ae(Ie){if(Ie instanceof ue)return new ue(Ie.h,Ie.c,Ie.l,Ie.opacity);if(Ie instanceof re||(Ie=U(Ie)),Ie.a===0&&Ie.b===0)return new ue(NaN,0<Ie.l&&Ie.l<100?0:NaN,Ie.l,Ie.opacity);var We=Math.atan2(Ie.b,Ie.a)*G;return new ue(We<0?We+360:We,Math.sqrt(Ie.a*Ie.a+Ie.b*Ie.b),Ie.l,Ie.opacity)}function se(Ie,We,pt,Ft){return arguments.length===1?ae(Ie):new ue(pt,We,Ie,Ft==null?1:Ft)}function _e(Ie,We,pt,Ft){return arguments.length===1?ae(Ie):new ue(Ie,We,pt,Ft==null?1:Ft)}function ue(Ie,We,pt,Ft){this.h=+Ie,this.c=+We,this.l=+pt,this.opacity=+Ft}function ye(Ie){if(isNaN(Ie.h))return new re(Ie.l,0,0,Ie.opacity);var We=Ie.h*z;return new re(Ie.l,Math.cos(We)*Ie.c,Math.sin(We)*Ie.c,Ie.opacity)}c(ue,_e,A(T,{brighter:function(Ie){return new ue(this.h,this.c,this.l+Y*(Ie==null?1:Ie),this.opacity)},darker:function(Ie){return new ue(this.h,this.c,this.l-Y*(Ie==null?1:Ie),this.opacity)},rgb:function(){return ye(this).rgb()}}));var xe=-.14861,me=1.78277,be=-.29227,ke=-.90649,De=1.97294,Ve=De*ke,Ae=De*me,Le=me*be-ke*xe;function je(Ie){if(Ie instanceof ze)return new ze(Ie.h,Ie.s,Ie.l,Ie.opacity);Ie instanceof L||(Ie=w(Ie));var We=Ie.r/255,pt=Ie.g/255,Ft=Ie.b/255,Qt=(Le*Ft+Ve*We-Ae*pt)/(Le+Ve-Ae),zt=Ft-Qt,Et=(De*(pt-Qt)-be*zt)/ke,Xt=Math.sqrt(Et*Et+zt*zt)/(De*Qt*(1-Qt)),Nt=Xt?Math.atan2(Et,zt)*G-120:NaN;return new ze(Nt<0?Nt+360:Nt,Xt,Qt,Ie.opacity)}function Ye(Ie,We,pt,Ft){return arguments.length===1?je(Ie):new ze(Ie,We,pt,Ft==null?1:Ft)}function ze(Ie,We,pt,Ft){this.h=+Ie,this.s=+We,this.l=+pt,this.opacity=+Ft}c(ze,Ye,A(T,{brighter:function(Ie){return Ie=Ie==null?a:Math.pow(a,Ie),new ze(this.h,this.s,this.l*Ie,this.opacity)},darker:function(Ie){return Ie=Ie==null?e:Math.pow(e,Ie),new ze(this.h,this.s,this.l*Ie,this.opacity)},rgb:function(){var Ie=isNaN(this.h)?0:(this.h+120)*z,We=+this.l,pt=isNaN(this.s)?0:this.s*We*(1-We),Ft=Math.cos(Ie),Qt=Math.sin(Ie);return new L(255*(We+pt*(xe*Ft+me*Qt)),255*(We+pt*(be*Ft+ke*Qt)),255*(We+pt*(De*Ft)),this.opacity)}})),m.color=M,m.cubehelix=Ye,m.gray=H,m.hcl=_e,m.hsl=D,m.lab=q,m.lch=se,m.rgb=h,Object.defineProperty(m,"__esModule",{value:!0})})},{}],110:[function(t,B,V){(function(m,c){typeof V=="object"&&typeof B<"u"?c(V):(m=m||self,c(m.d3=m.d3||{}))})(this,function(m){var c={value:function(){}};function A(){for(var n=0,r=arguments.length,v={},s;n<r;++n){if(!(s=arguments[n]+"")||s in v||/[\s.]/.test(s))throw new Error("illegal type: "+s);v[s]=[]}return new T(v)}function T(n){this._=n}function e(n,r){return n.trim().split(/^|\s+/).map(function(v){var s="",o=v.indexOf(".");if(o>=0&&(s=v.slice(o+1),v=v.slice(0,o)),v&&!r.hasOwnProperty(v))throw new Error("unknown type: "+v);return{type:v,name:s}})}T.prototype=A.prototype={constructor:T,on:function(n,r){var v=this._,s=e(n+"",v),o,b=-1,g=s.length;if(arguments.length<2){for(;++b<g;)if((o=(n=s[b]).type)&&(o=a(v[o],n.name)))return o;return}if(r!=null&&typeof r!="function")throw new Error("invalid callback: "+r);for(;++b<g;)if(o=(n=s[b]).type)v[o]=i(v[o],n.name,r);else if(r==null)for(o in v)v[o]=i(v[o],n.name,null);return this},copy:function(){var n={},r=this._;for(var v in r)n[v]=r[v].slice();return new T(n)},call:function(n,r){if((o=arguments.length-2)>0)for(var v=new Array(o),s=0,o,b;s<o;++s)v[s]=arguments[s+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(b=this._[n],s=0,o=b.length;s<o;++s)b[s].value.apply(r,v)},apply:function(n,r,v){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var s=this._[n],o=0,b=s.length;o<b;++o)s[o].value.apply(r,v)}};function a(n,r){for(var v=0,s=n.length,o;v<s;++v)if((o=n[v]).name===r)return o.value}function i(n,r,v){for(var s=0,o=n.length;s<o;++s)if(n[s].name===r){n[s]=c,n=n.slice(0,s).concat(n.slice(s+1));break}return v!=null&&n.push({name:r,value:v}),n}m.dispatch=A,Object.defineProperty(m,"__esModule",{value:!0})})},{}],111:[function(t,B,V){(function(m,c){typeof V=="object"&&typeof B<"u"?c(V,t("d3-quadtree"),t("d3-collection"),t("d3-dispatch"),t("d3-timer")):c(m.d3=m.d3||{},m.d3,m.d3,m.d3,m.d3)})(this,function(m,c,A,T,e){function a(w,h){var L;w==null&&(w=0),h==null&&(h=0);function S(){var E,P=L.length,F,I=0,D=0;for(E=0;E<P;++E)F=L[E],I+=F.x,D+=F.y;for(I=I/P-w,D=D/P-h,E=0;E<P;++E)F=L[E],F.x-=I,F.y-=D}return S.initialize=function(E){L=E},S.x=function(E){return arguments.length?(w=+E,S):w},S.y=function(E){return arguments.length?(h=+E,S):h},S}function i(w){return function(){return w}}function n(){return(Math.random()-.5)*1e-6}function r(w){return w.x+w.vx}function v(w){return w.y+w.vy}function s(w){var h,L,S=1,E=1;typeof w!="function"&&(w=i(w==null?1:+w));function P(){for(var D,R=h.length,N,z,G,Y,ee,Z,X=0;X<E;++X)for(N=c.quadtree(h,r,v).visitAfter(F),D=0;D<R;++D)z=h[D],ee=L[z.index],Z=ee*ee,G=z.x+z.vx,Y=z.y+z.vy,N.visit(ne);function ne(ce,Q,K,U,H){var q=ce.data,re=ce.r,j=ee+re;if(q){if(q.index>z.index){var $=G-q.x-q.vx,ie=Y-q.y-q.vy,oe=$*$+ie*ie;oe<j*j&&($===0&&($=n(),oe+=$*$),ie===0&&(ie=n(),oe+=ie*ie),oe=(j-(oe=Math.sqrt(oe)))/oe*S,z.vx+=($*=oe)*(j=(re*=re)/(Z+re)),z.vy+=(ie*=oe)*j,q.vx-=$*(j=1-j),q.vy-=ie*j)}return}return Q>G+j||U<G-j||K>Y+j||H<Y-j}}function F(D){if(D.data)return D.r=L[D.data.index];for(var R=D.r=0;R<4;++R)D[R]&&D[R].r>D.r&&(D.r=D[R].r)}function I(){if(!!h){var D,R=h.length,N;for(L=new Array(R),D=0;D<R;++D)N=h[D],L[N.index]=+w(N,D,h)}}return P.initialize=function(D){h=D,I()},P.iterations=function(D){return arguments.length?(E=+D,P):E},P.strength=function(D){return arguments.length?(S=+D,P):S},P.radius=function(D){return arguments.length?(w=typeof D=="function"?D:i(+D),I(),P):w},P}function o(w){return w.index}function b(w,h){var L=w.get(h);if(!L)throw new Error("missing: "+h);return L}function g(w){var h=o,L=N,S,E=i(30),P,F,I,D,R=1;w==null&&(w=[]);function N(Z){return 1/Math.min(I[Z.source.index],I[Z.target.index])}function z(Z){for(var X=0,ne=w.length;X<R;++X)for(var ce=0,Q,K,U,H,q,re,j;ce<ne;++ce)Q=w[ce],K=Q.source,U=Q.target,H=U.x+U.vx-K.x-K.vx||n(),q=U.y+U.vy-K.y-K.vy||n(),re=Math.sqrt(H*H+q*q),re=(re-P[ce])/re*Z*S[ce],H*=re,q*=re,U.vx-=H*(j=D[ce]),U.vy-=q*j,K.vx+=H*(j=1-j),K.vy+=q*j}function G(){if(!!F){var Z,X=F.length,ne=w.length,ce=A.map(F,h),Q;for(Z=0,I=new Array(X);Z<ne;++Z)Q=w[Z],Q.index=Z,typeof Q.source!="object"&&(Q.source=b(ce,Q.source)),typeof Q.target!="object"&&(Q.target=b(ce,Q.target)),I[Q.source.index]=(I[Q.source.index]||0)+1,I[Q.target.index]=(I[Q.target.index]||0)+1;for(Z=0,D=new Array(ne);Z<ne;++Z)Q=w[Z],D[Z]=I[Q.source.index]/(I[Q.source.index]+I[Q.target.index]);S=new Array(ne),Y(),P=new Array(ne),ee()}}function Y(){if(!!F)for(var Z=0,X=w.length;Z<X;++Z)S[Z]=+L(w[Z],Z,w)}function ee(){if(!!F)for(var Z=0,X=w.length;Z<X;++Z)P[Z]=+E(w[Z],Z,w)}return z.initialize=function(Z){F=Z,G()},z.links=function(Z){return arguments.length?(w=Z,G(),z):w},z.id=function(Z){return arguments.length?(h=Z,z):h},z.iterations=function(Z){return arguments.length?(R=+Z,z):R},z.strength=function(Z){return arguments.length?(L=typeof Z=="function"?Z:i(+Z),Y(),z):L},z.distance=function(Z){return arguments.length?(E=typeof Z=="function"?Z:i(+Z),ee(),z):E},z}function d(w){return w.x}function f(w){return w.y}var y=10,l=Math.PI*(3-Math.sqrt(5));function x(w){var h,L=1,S=.001,E=1-Math.pow(S,1/300),P=0,F=.6,I=A.map(),D=e.timer(N),R=T.dispatch("tick","end");w==null&&(w=[]);function N(){z(),R.call("tick",h),L<S&&(D.stop(),R.call("end",h))}function z(ee){var Z,X=w.length,ne;ee===void 0&&(ee=1);for(var ce=0;ce<ee;++ce)for(L+=(P-L)*E,I.each(function(Q){Q(L)}),Z=0;Z<X;++Z)ne=w[Z],ne.fx==null?ne.x+=ne.vx*=F:(ne.x=ne.fx,ne.vx=0),ne.fy==null?ne.y+=ne.vy*=F:(ne.y=ne.fy,ne.vy=0);return h}function G(){for(var ee=0,Z=w.length,X;ee<Z;++ee){if(X=w[ee],X.index=ee,X.fx!=null&&(X.x=X.fx),X.fy!=null&&(X.y=X.fy),isNaN(X.x)||isNaN(X.y)){var ne=y*Math.sqrt(ee),ce=ee*l;X.x=ne*Math.cos(ce),X.y=ne*Math.sin(ce)}(isNaN(X.vx)||isNaN(X.vy))&&(X.vx=X.vy=0)}}function Y(ee){return ee.initialize&&ee.initialize(w),ee}return G(),h={tick:z,restart:function(){return D.restart(N),h},stop:function(){return D.stop(),h},nodes:function(ee){return arguments.length?(w=ee,G(),I.each(Y),h):w},alpha:function(ee){return arguments.length?(L=+ee,h):L},alphaMin:function(ee){return arguments.length?(S=+ee,h):S},alphaDecay:function(ee){return arguments.length?(E=+ee,h):+E},alphaTarget:function(ee){return arguments.length?(P=+ee,h):P},velocityDecay:function(ee){return arguments.length?(F=1-ee,h):1-F},force:function(ee,Z){return arguments.length>1?(Z==null?I.remove(ee):I.set(ee,Y(Z)),h):I.get(ee)},find:function(ee,Z,X){var ne=0,ce=w.length,Q,K,U,H,q;for(X==null?X=1/0:X*=X,ne=0;ne<ce;++ne)H=w[ne],Q=ee-H.x,K=Z-H.y,U=Q*Q+K*K,U<X&&(q=H,X=U);return q},on:function(ee,Z){return arguments.length>1?(R.on(ee,Z),h):R.on(ee)}}}function u(){var w,h,L,S=i(-30),E,P=1,F=1/0,I=.81;function D(G){var Y,ee=w.length,Z=c.quadtree(w,d,f).visitAfter(N);for(L=G,Y=0;Y<ee;++Y)h=w[Y],Z.visit(z)}function R(){if(!!w){var G,Y=w.length,ee;for(E=new Array(Y),G=0;G<Y;++G)ee=w[G],E[ee.index]=+S(ee,G,w)}}function N(G){var Y=0,ee,Z,X=0,ne,ce,Q;if(G.length){for(ne=ce=Q=0;Q<4;++Q)(ee=G[Q])&&(Z=Math.abs(ee.value))&&(Y+=ee.value,X+=Z,ne+=Z*ee.x,ce+=Z*ee.y);G.x=ne/X,G.y=ce/X}else{ee=G,ee.x=ee.data.x,ee.y=ee.data.y;do Y+=E[ee.data.index];while(ee=ee.next)}G.value=Y}function z(G,Y,ee,Z){if(!G.value)return!0;var X=G.x-h.x,ne=G.y-h.y,ce=Z-Y,Q=X*X+ne*ne;if(ce*ce/I<Q)return Q<F&&(X===0&&(X=n(),Q+=X*X),ne===0&&(ne=n(),Q+=ne*ne),Q<P&&(Q=Math.sqrt(P*Q)),h.vx+=X*G.value*L/Q,h.vy+=ne*G.value*L/Q),!0;if(G.length||Q>=F)return;(G.data!==h||G.next)&&(X===0&&(X=n(),Q+=X*X),ne===0&&(ne=n(),Q+=ne*ne),Q<P&&(Q=Math.sqrt(P*Q)));do G.data!==h&&(ce=E[G.data.index]*L/Q,h.vx+=X*ce,h.vy+=ne*ce);while(G=G.next)}return D.initialize=function(G){w=G,R()},D.strength=function(G){return arguments.length?(S=typeof G=="function"?G:i(+G),R(),D):S},D.distanceMin=function(G){return arguments.length?(P=G*G,D):Math.sqrt(P)},D.distanceMax=function(G){return arguments.length?(F=G*G,D):Math.sqrt(F)},D.theta=function(G){return arguments.length?(I=G*G,D):Math.sqrt(I)},D}function M(w,h,L){var S,E=i(.1),P,F;typeof w!="function"&&(w=i(+w)),h==null&&(h=0),L==null&&(L=0);function I(R){for(var N=0,z=S.length;N<z;++N){var G=S[N],Y=G.x-h||1e-6,ee=G.y-L||1e-6,Z=Math.sqrt(Y*Y+ee*ee),X=(F[N]-Z)*P[N]*R/Z;G.vx+=Y*X,G.vy+=ee*X}}function D(){if(!!S){var R,N=S.length;for(P=new Array(N),F=new Array(N),R=0;R<N;++R)F[R]=+w(S[R],R,S),P[R]=isNaN(F[R])?0:+E(S[R],R,S)}}return I.initialize=function(R){S=R,D()},I.strength=function(R){return arguments.length?(E=typeof R=="function"?R:i(+R),D(),I):E},I.radius=function(R){return arguments.length?(w=typeof R=="function"?R:i(+R),D(),I):w},I.x=function(R){return arguments.length?(h=+R,I):h},I.y=function(R){return arguments.length?(L=+R,I):L},I}function _(w){var h=i(.1),L,S,E;typeof w!="function"&&(w=i(w==null?0:+w));function P(I){for(var D=0,R=L.length,N;D<R;++D)N=L[D],N.vx+=(E[D]-N.x)*S[D]*I}function F(){if(!!L){var I,D=L.length;for(S=new Array(D),E=new Array(D),I=0;I<D;++I)S[I]=isNaN(E[I]=+w(L[I],I,L))?0:+h(L[I],I,L)}}return P.initialize=function(I){L=I,F()},P.strength=function(I){return arguments.length?(h=typeof I=="function"?I:i(+I),F(),P):h},P.x=function(I){return arguments.length?(w=typeof I=="function"?I:i(+I),F(),P):w},P}function p(w){var h=i(.1),L,S,E;typeof w!="function"&&(w=i(w==null?0:+w));function P(I){for(var D=0,R=L.length,N;D<R;++D)N=L[D],N.vy+=(E[D]-N.y)*S[D]*I}function F(){if(!!L){var I,D=L.length;for(S=new Array(D),E=new Array(D),I=0;I<D;++I)S[I]=isNaN(E[I]=+w(L[I],I,L))?0:+h(L[I],I,L)}}return P.initialize=function(I){L=I,F()},P.strength=function(I){return arguments.length?(h=typeof I=="function"?I:i(+I),F(),P):h},P.y=function(I){return arguments.length?(w=typeof I=="function"?I:i(+I),F(),P):w},P}m.forceCenter=a,m.forceCollide=s,m.forceLink=g,m.forceManyBody=u,m.forceRadial=M,m.forceSimulation=x,m.forceX=_,m.forceY=p,Object.defineProperty(m,"__esModule",{value:!0})})},{"d3-collection":108,"d3-dispatch":110,"d3-quadtree":118,"d3-timer":123}],112:[function(t,B,V){(function(m,c){typeof V=="object"&&typeof B<"u"?c(V):(m=typeof globalThis<"u"?globalThis:m||self,c(m.d3=m.d3||{}))})(this,function(m){function c(w){return Math.abs(w=Math.round(w))>=1e21?w.toLocaleString("en").replace(/,/g,""):w.toString(10)}function A(w,h){if((L=(w=h?w.toExponential(h-1):w.toExponential()).indexOf("e"))<0)return null;var L,S=w.slice(0,L);return[S.length>1?S[0]+S.slice(2):S,+w.slice(L+1)]}function T(w){return w=A(Math.abs(w)),w?w[1]:NaN}function e(w,h){return function(L,S){for(var E=L.length,P=[],F=0,I=w[0],D=0;E>0&&I>0&&(D+I+1>S&&(I=Math.max(1,S-D)),P.push(L.substring(E-=I,E+I)),!((D+=I+1)>S));)I=w[F=(F+1)%w.length];return P.reverse().join(h)}}function a(w){return function(h){return h.replace(/[0-9]/g,function(L){return w[+L]})}}var i=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function n(w){if(!(h=i.exec(w)))throw new Error("invalid format: "+w);var h;return new r({fill:h[1],align:h[2],sign:h[3],symbol:h[4],zero:h[5],width:h[6],comma:h[7],precision:h[8]&&h[8].slice(1),trim:h[9],type:h[10]})}n.prototype=r.prototype;function r(w){this.fill=w.fill===void 0?" ":w.fill+"",this.align=w.align===void 0?">":w.align+"",this.sign=w.sign===void 0?"-":w.sign+"",this.symbol=w.symbol===void 0?"":w.symbol+"",this.zero=!!w.zero,this.width=w.width===void 0?void 0:+w.width,this.comma=!!w.comma,this.precision=w.precision===void 0?void 0:+w.precision,this.trim=!!w.trim,this.type=w.type===void 0?"":w.type+""}r.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function v(w){e:for(var h=w.length,L=1,S=-1,E;L<h;++L)switch(w[L]){case".":S=E=L;break;case"0":S===0&&(S=L),E=L;break;default:if(!+w[L])break e;S>0&&(S=0);break}return S>0?w.slice(0,S)+w.slice(E+1):w}var s;function o(w,h){var L=A(w,h);if(!L)return w+"";var S=L[0],E=L[1],P=E-(s=Math.max(-8,Math.min(8,Math.floor(E/3)))*3)+1,F=S.length;return P===F?S:P>F?S+new Array(P-F+1).join("0"):P>0?S.slice(0,P)+"."+S.slice(P):"0."+new Array(1-P).join("0")+A(w,Math.max(0,h+P-1))[0]}function b(w,h){var L=A(w,h);if(!L)return w+"";var S=L[0],E=L[1];return E<0?"0."+new Array(-E).join("0")+S:S.length>E+1?S.slice(0,E+1)+"."+S.slice(E+1):S+new Array(E-S.length+2).join("0")}var g={"%":function(w,h){return(w*100).toFixed(h)},b:function(w){return Math.round(w).toString(2)},c:function(w){return w+""},d:c,e:function(w,h){return w.toExponential(h)},f:function(w,h){return w.toFixed(h)},g:function(w,h){return w.toPrecision(h)},o:function(w){return Math.round(w).toString(8)},p:function(w,h){return b(w*100,h)},r:b,s:o,X:function(w){return Math.round(w).toString(16).toUpperCase()},x:function(w){return Math.round(w).toString(16)}};function d(w){return w}var f=Array.prototype.map,y=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function l(w){var h=w.grouping===void 0||w.thousands===void 0?d:e(f.call(w.grouping,Number),w.thousands+""),L=w.currency===void 0?"":w.currency[0]+"",S=w.currency===void 0?"":w.currency[1]+"",E=w.decimal===void 0?".":w.decimal+"",P=w.numerals===void 0?d:a(f.call(w.numerals,String)),F=w.percent===void 0?"%":w.percent+"",I=w.minus===void 0?"-":w.minus+"",D=w.nan===void 0?"NaN":w.nan+"";function R(z){z=n(z);var G=z.fill,Y=z.align,ee=z.sign,Z=z.symbol,X=z.zero,ne=z.width,ce=z.comma,Q=z.precision,K=z.trim,U=z.type;U==="n"?(ce=!0,U="g"):g[U]||(Q===void 0&&(Q=12),K=!0,U="g"),(X||G==="0"&&Y==="=")&&(X=!0,G="0",Y="=");var H=Z==="$"?L:Z==="#"&&/[boxX]/.test(U)?"0"+U.toLowerCase():"",q=Z==="$"?S:/[%p]/.test(U)?F:"",re=g[U],j=/[defgprs%]/.test(U);Q=Q===void 0?6:/[gprs]/.test(U)?Math.max(1,Math.min(21,Q)):Math.max(0,Math.min(20,Q));function $(ie){var oe=H,ae=q,se,_e,ue;if(U==="c")ae=re(ie)+ae,ie="";else{ie=+ie;var ye=ie<0||1/ie<0;if(ie=isNaN(ie)?D:re(Math.abs(ie),Q),K&&(ie=v(ie)),ye&&+ie==0&&ee!=="+"&&(ye=!1),oe=(ye?ee==="("?ee:I:ee==="-"||ee==="("?"":ee)+oe,ae=(U==="s"?y[8+s/3]:"")+ae+(ye&&ee==="("?")":""),j){for(se=-1,_e=ie.length;++se<_e;)if(ue=ie.charCodeAt(se),48>ue||ue>57){ae=(ue===46?E+ie.slice(se+1):ie.slice(se))+ae,ie=ie.slice(0,se);break}}}ce&&!X&&(ie=h(ie,1/0));var xe=oe.length+ie.length+ae.length,me=xe<ne?new Array(ne-xe+1).join(G):"";switch(ce&&X&&(ie=h(me+ie,me.length?ne-ae.length:1/0),me=""),Y){case"<":ie=oe+ie+ae+me;break;case"=":ie=oe+me+ie+ae;break;case"^":ie=me.slice(0,xe=me.length>>1)+oe+ie+ae+me.slice(xe);break;default:ie=me+oe+ie+ae;break}return P(ie)}return $.toString=function(){return z+""},$}function N(z,G){var Y=R((z=n(z),z.type="f",z)),ee=Math.max(-8,Math.min(8,Math.floor(T(G)/3)))*3,Z=Math.pow(10,-ee),X=y[8+ee/3];return function(ne){return Y(Z*ne)+X}}return{format:R,formatPrefix:N}}var x;u({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function u(w){return x=l(w),m.format=x.format,m.formatPrefix=x.formatPrefix,x}function M(w){return Math.max(0,-T(Math.abs(w)))}function _(w,h){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(T(h)/3)))*3-T(Math.abs(w)))}function p(w,h){return w=Math.abs(w),h=Math.abs(h)-w,Math.max(0,T(h)-T(w))+1}m.FormatSpecifier=r,m.formatDefaultLocale=u,m.formatLocale=l,m.formatSpecifier=n,m.precisionFixed=M,m.precisionPrefix=_,m.precisionRound=p,Object.defineProperty(m,"__esModule",{value:!0})})},{}],113:[function(t,B,V){(function(m,c){typeof V=="object"&&typeof B<"u"?c(V,t("d3-geo"),t("d3-array")):c(m.d3=m.d3||{},m.d3,m.d3)})(this,function(m,c,A){var T=Math.abs,e=Math.atan,a=Math.atan2,i=Math.cos,n=Math.exp,r=Math.floor,v=Math.log,s=Math.max,o=Math.min,b=Math.pow,g=Math.round,d=Math.sign||function(Ne){return Ne>0?1:Ne<0?-1:0},f=Math.sin,y=Math.tan,l=1e-6,x=1e-12,u=Math.PI,M=u/2,_=u/4,p=Math.SQRT1_2,w=D(2),h=D(u),L=u*2,S=180/u,E=u/180;function P(Ne){return Ne?Ne/Math.sin(Ne):1}function F(Ne){return Ne>1?M:Ne<-1?-M:Math.asin(Ne)}function I(Ne){return Ne>1?0:Ne<-1?u:Math.acos(Ne)}function D(Ne){return Ne>0?Math.sqrt(Ne):0}function R(Ne){return Ne=n(2*Ne),(Ne-1)/(Ne+1)}function N(Ne){return(n(Ne)-n(-Ne))/2}function z(Ne){return(n(Ne)+n(-Ne))/2}function G(Ne){return v(Ne+D(Ne*Ne+1))}function Y(Ne){return v(Ne+D(Ne*Ne-1))}function ee(Ne){var Ze=y(Ne/2),rt=2*v(i(Ne/2))/(Ze*Ze);function lt(wt,bt){var kt=i(wt),hr=i(bt),gr=f(bt),ur=hr*kt,_r=-((1-ur?v((1+ur)/2)/(1-ur):-.5)+rt/(1+ur));return[_r*hr*f(wt),_r*gr]}return lt.invert=function(wt,bt){var kt=D(wt*wt+bt*bt),hr=-Ne/2,gr=50,ur;if(!kt)return[0,0];do{var _r=hr/2,Ir=i(_r),jr=f(_r),tn=jr/Ir,wn=-v(T(Ir));hr-=ur=(2/tn*wn-rt*tn-kt)/(-wn/(jr*jr)+1-rt/(2*Ir*Ir))*(Ir<0?.7:1)}while(T(ur)>l&&--gr>0);var In=f(hr);return[a(wt*In,kt*i(hr)),F(bt*In/kt)]},lt}function Z(){var Ne=M,Ze=c.geoProjectionMutator(ee),rt=Ze(Ne);return rt.radius=function(lt){return arguments.length?Ze(Ne=lt*E):Ne*S},rt.scale(179.976).clipAngle(147)}function X(Ne,Ze){var rt=i(Ze),lt=P(I(rt*i(Ne/=2)));return[2*rt*f(Ne)*lt,f(Ze)*lt]}X.invert=function(Ne,Ze){if(!(Ne*Ne+4*Ze*Ze>u*u+l)){var rt=Ne,lt=Ze,wt=25;do{var bt=f(rt),kt=f(rt/2),hr=i(rt/2),gr=f(lt),ur=i(lt),_r=f(2*lt),Ir=gr*gr,jr=ur*ur,tn=kt*kt,wn=1-jr*hr*hr,In=wn?I(ur*hr)*D(jn=1/wn):jn=0,jn,ba=2*In*ur*kt-Ne,Ta=In*gr-Ze,qa=jn*(jr*tn+In*ur*hr*Ir),ja=jn*(.5*bt*_r-In*2*gr*kt),ai=jn*.25*(_r*kt-In*gr*jr*bt),gi=jn*(Ir*hr+In*tn*ur),po=ja*ai-gi*qa;if(!po)break;var oi=(Ta*ja-ba*gi)/po,Ji=(ba*ai-Ta*qa)/po;rt-=oi,lt-=Ji}while((T(oi)>l||T(Ji)>l)&&--wt>0);return[rt,lt]}};function ne(){return c.geoProjection(X).scale(152.63)}function ce(Ne){var Ze=f(Ne),rt=i(Ne),lt=Ne>=0?1:-1,wt=y(lt*Ne),bt=(1+Ze-rt)/2;function kt(hr,gr){var ur=i(gr),_r=i(hr/=2);return[(1+ur)*f(hr),(lt*gr>-a(_r,wt)-.001?0:-lt*10)+bt+f(gr)*rt-(1+ur)*Ze*_r]}return kt.invert=function(hr,gr){var ur=0,_r=0,Ir=50;do{var jr=i(ur),tn=f(ur),wn=i(_r),In=f(_r),jn=1+wn,ba=jn*tn-hr,Ta=bt+In*rt-jn*Ze*jr-gr,qa=jn*jr/2,ja=-tn*In,ai=Ze*jn*tn/2,gi=rt*wn+Ze*jr*In,po=ja*ai-gi*qa,oi=(Ta*ja-ba*gi)/po/2,Ji=(ba*ai-Ta*qa)/po;T(Ji)>2&&(Ji/=2),ur-=oi,_r-=Ji}while((T(oi)>l||T(Ji)>l)&&--Ir>0);return lt*_r>-a(i(ur),wt)-.001?[ur*2,_r]:null},kt}function Q(){var Ne=20*E,Ze=Ne>=0?1:-1,rt=y(Ze*Ne),lt=c.geoProjectionMutator(ce),wt=lt(Ne),bt=wt.stream;return wt.parallel=function(kt){return arguments.length?(rt=y((Ze=(Ne=kt*E)>=0?1:-1)*Ne),lt(Ne)):Ne*S},wt.stream=function(kt){var hr=wt.rotate(),gr=bt(kt),ur=(wt.rotate([0,0]),bt(kt)),_r=wt.precision();return wt.rotate(hr),gr.sphere=function(){ur.polygonStart(),ur.lineStart();for(var Ir=Ze*-180;Ze*Ir<180;Ir+=Ze*90)ur.point(Ir,Ze*90);if(Ne)for(;Ze*(Ir-=3*Ze*_r)>=-180;)ur.point(Ir,Ze*-a(i(Ir*E/2),rt)*S);ur.lineEnd(),ur.polygonEnd()},gr},wt.scale(218.695).center([0,28.0974])}function K(Ne,Ze){var rt=y(Ze/2),lt=D(1-rt*rt),wt=1+lt*i(Ne/=2),bt=f(Ne)*lt/wt,kt=rt/wt,hr=bt*bt,gr=kt*kt;return[4/3*bt*(3+hr-3*gr),4/3*kt*(3+3*hr-gr)]}K.invert=function(Ne,Ze){if(Ne*=3/8,Ze*=3/8,!Ne&&T(Ze)>1)return null;var rt=Ne*Ne,lt=Ze*Ze,wt=1+rt+lt,bt=D((wt-D(wt*wt-4*Ze*Ze))/2),kt=F(bt)/3,hr=bt?Y(T(Ze/bt))/3:G(T(Ne))/3,gr=i(kt),ur=z(hr),_r=ur*ur-gr*gr;return[d(Ne)*2*a(N(hr)*gr,.25-_r),d(Ze)*2*a(ur*f(kt),.25+_r)]};function U(){return c.geoProjection(K).scale(66.1603)}var H=D(8),q=v(1+w);function re(Ne,Ze){var rt=T(Ze);return rt<_?[Ne,v(y(_+Ze/2))]:[Ne*i(rt)*(2*w-1/f(rt)),d(Ze)*(2*w*(rt-_)-v(y(rt/2)))]}re.invert=function(Ne,Ze){if((bt=T(Ze))<q)return[Ne,2*e(n(Ze))-M];var rt=_,lt=25,wt,bt;do{var kt=i(rt/2),hr=y(rt/2);rt-=wt=(H*(rt-_)-v(hr)-bt)/(H-kt*kt/(2*hr))}while(T(wt)>x&&--lt>0);return[Ne/(i(rt)*(H-1/f(rt))),d(Ze)*rt]};function j(){return c.geoProjection(re).scale(112.314)}function $(Ne){var Ze=2*u/Ne;function rt(lt,wt){var bt=c.geoAzimuthalEquidistantRaw(lt,wt);if(T(lt)>M){var kt=a(bt[1],bt[0]),hr=D(bt[0]*bt[0]+bt[1]*bt[1]),gr=Ze*g((kt-M)/Ze)+M,ur=a(f(kt-=gr),2-i(kt));kt=gr+F(u/hr*f(ur))-ur,bt[0]=hr*i(kt),bt[1]=hr*f(kt)}return bt}return rt.invert=function(lt,wt){var bt=D(lt*lt+wt*wt);if(bt>M){var kt=a(wt,lt),hr=Ze*g((kt-M)/Ze)+M,gr=kt>hr?-1:1,ur=bt*i(hr-kt),_r=1/y(gr*I((ur-u)/D(u*(u-2*ur)+bt*bt)));kt=hr+2*e((_r+gr*D(_r*_r-3))/3),lt=bt*i(kt),wt=bt*f(kt)}return c.geoAzimuthalEquidistantRaw.invert(lt,wt)},rt}function ie(){var Ne=5,Ze=c.geoProjectionMutator($),rt=Ze(Ne),lt=rt.stream,wt=.01,bt=-i(wt*E),kt=f(wt*E);return rt.lobes=function(hr){return arguments.length?Ze(Ne=+hr):Ne},rt.stream=function(hr){var gr=rt.rotate(),ur=lt(hr),_r=(rt.rotate([0,0]),lt(hr));return rt.rotate(gr),ur.sphere=function(){_r.polygonStart(),_r.lineStart();for(var Ir=0,jr=360/Ne,tn=2*u/Ne,wn=90-180/Ne,In=M;Ir<Ne;++Ir,wn-=jr,In-=tn)_r.point(a(kt*i(In),bt)*S,F(kt*f(In))*S),wn<-90?(_r.point(-90,-180-wn-wt),_r.point(-90,-180-wn+wt)):(_r.point(90,wn+wt),_r.point(90,wn-wt));_r.lineEnd(),_r.polygonEnd()},ur},rt.scale(87.8076).center([0,17.1875]).clipAngle(180-.001)}function oe(Ne,Ze){if(arguments.length<2&&(Ze=Ne),Ze===1)return c.geoAzimuthalEqualAreaRaw;if(Ze===1/0)return ae;function rt(lt,wt){var bt=c.geoAzimuthalEqualAreaRaw(lt/Ze,wt);return bt[0]*=Ne,bt}return rt.invert=function(lt,wt){var bt=c.geoAzimuthalEqualAreaRaw.invert(lt/Ne,wt);return bt[0]*=Ze,bt},rt}function ae(Ne,Ze){return[Ne*i(Ze)/i(Ze/=2),2*f(Ze)]}ae.invert=function(Ne,Ze){var rt=2*F(Ze/2);return[Ne*i(rt/2)/i(rt),rt]};function se(){var Ne=2,Ze=c.geoProjectionMutator(oe),rt=Ze(Ne);return rt.coefficient=function(lt){return arguments.length?Ze(Ne=+lt):Ne},rt.scale(169.529)}function _e(Ne,Ze,rt){var lt=100,wt,bt,kt;rt=rt===void 0?0:+rt,Ze=+Ze;do bt=Ne(rt),kt=Ne(rt+l),bt===kt&&(kt=bt+l),rt-=wt=-1*l*(bt-Ze)/(bt-kt);while(lt-- >0&&T(wt)>l);return lt<0?NaN:rt}function ue(Ne,Ze,rt){return Ze===void 0&&(Ze=40),rt===void 0&&(rt=x),function(lt,wt,bt,kt){var hr,gr,ur;bt=bt===void 0?0:+bt,kt=kt===void 0?0:+kt;for(var _r=0;_r<Ze;_r++){var Ir=Ne(bt,kt),jr=Ir[0]-lt,tn=Ir[1]-wt;if(T(jr)<rt&&T(tn)<rt)break;var wn=jr*jr+tn*tn;if(wn>hr){bt-=gr/=2,kt-=ur/=2;continue}hr=wn;var In=(bt>0?-1:1)*rt,jn=(kt>0?-1:1)*rt,ba=Ne(bt+In,kt),Ta=Ne(bt,kt+jn),qa=(ba[0]-Ir[0])/In,ja=(ba[1]-Ir[1])/In,ai=(Ta[0]-Ir[0])/jn,gi=(Ta[1]-Ir[1])/jn,po=gi*qa-ja*ai,oi=(T(po)<.5?.5:1)/po;if(gr=(tn*ai-jr*gi)*oi,ur=(jr*ja-tn*qa)*oi,bt+=gr,kt+=ur,T(gr)<rt&&T(ur)<rt)break}return[bt,kt]}}function ye(){var Ne=oe(1.68,2),Ze=1.4,rt=12;function lt(wt,bt){if(wt+bt<-Ze){var kt=(wt-bt+1.6)*(wt+bt+Ze)/8;wt+=kt,bt-=.8*kt*f(bt+u/2)}var hr=Ne(wt,bt),gr=(1-i(wt*bt))/rt;return hr[1]<0&&(hr[0]*=1+gr),hr[1]>0&&(hr[1]*=1+gr/1.5*hr[0]*hr[0]),hr}return lt.invert=ue(lt),lt}function xe(){return c.geoProjection(ye()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])}function me(Ne,Ze){var rt=Ne*f(Ze),lt=30,wt;do Ze-=wt=(Ze+f(Ze)-rt)/(1+i(Ze));while(T(wt)>l&&--lt>0);return Ze/2}function be(Ne,Ze,rt){function lt(wt,bt){return[Ne*wt*i(bt=me(rt,bt)),Ze*f(bt)]}return lt.invert=function(wt,bt){return bt=F(bt/Ze),[wt/(Ne*i(bt)),F((2*bt+f(2*bt))/rt)]},lt}var ke=be(w/M,w,u);function De(){return c.geoProjection(ke).scale(169.529)}var Ve=2.00276,Ae=1.11072;function Le(Ne,Ze){var rt=me(u,Ze);return[Ve*Ne/(1/i(Ze)+Ae/i(rt)),(Ze+w*f(rt))/Ve]}Le.invert=function(Ne,Ze){var rt=Ve*Ze,lt=Ze<0?-_:_,wt=25,bt,kt;do kt=rt-w*f(lt),lt-=bt=(f(2*lt)+2*lt-u*f(kt))/(2*i(2*lt)+2+u*i(kt)*w*i(lt));while(T(bt)>l&&--wt>0);return kt=rt-w*f(lt),[Ne*(1/i(kt)+Ae/i(lt))/Ve,kt]};function je(){return c.geoProjection(Le).scale(160.857)}function Ye(Ne){var Ze=0,rt=c.geoProjectionMutator(Ne),lt=rt(Ze);return lt.parallel=function(wt){return arguments.length?rt(Ze=wt*E):Ze*S},lt}function ze(Ne,Ze){return[Ne*i(Ze),Ze]}ze.invert=function(Ne,Ze){return[Ne/i(Ze),Ze]};function Ie(){return c.geoProjection(ze).scale(152.63)}function We(Ne){if(!Ne)return ze;var Ze=1/y(Ne);function rt(lt,wt){var bt=Ze+Ne-wt,kt=bt&&lt*i(wt)/bt;return[bt*f(kt),Ze-bt*i(kt)]}return rt.invert=function(lt,wt){var bt=D(lt*lt+(wt=Ze-wt)*wt),kt=Ze+Ne-bt;return[bt/i(kt)*a(lt,wt),kt]},rt}function pt(){return Ye(We).scale(123.082).center([0,26.1441]).parallel(45)}function Ft(Ne){function Ze(rt,lt){var wt=M-lt,bt=wt&&rt*Ne*f(wt)/wt;return[wt*f(bt)/Ne,M-wt*i(bt)]}return Ze.invert=function(rt,lt){var wt=rt*Ne,bt=M-lt,kt=D(wt*wt+bt*bt),hr=a(wt,bt);return[(kt?kt/f(kt):1)*hr/Ne,M-kt]},Ze}function Qt(){var Ne=.5,Ze=c.geoProjectionMutator(Ft),rt=Ze(Ne);return rt.fraction=function(lt){return arguments.length?Ze(Ne=+lt):Ne},rt.scale(158.837)}var zt=be(1,4/u,u);function Et(){return c.geoProjection(zt).scale(152.63)}function Xt(Ne,Ze,rt,lt,wt,bt){var kt=i(bt),hr;if(T(Ne)>1||T(bt)>1)hr=I(rt*wt+Ze*lt*kt);else{var gr=f(Ne/2),ur=f(bt/2);hr=2*F(D(gr*gr+Ze*lt*ur*ur))}return T(hr)>l?[hr,a(lt*f(bt),Ze*wt-rt*lt*kt)]:[0,0]}function Nt(Ne,Ze,rt){return I((Ne*Ne+Ze*Ze-rt*rt)/(2*Ne*Ze))}function Ct(Ne){return Ne-2*u*r((Ne+u)/(2*u))}function Xe(Ne,Ze,rt){for(var lt=[[Ne[0],Ne[1],f(Ne[1]),i(Ne[1])],[Ze[0],Ze[1],f(Ze[1]),i(Ze[1])],[rt[0],rt[1],f(rt[1]),i(rt[1])]],wt=lt[2],bt,kt=0;kt<3;++kt,wt=bt)bt=lt[kt],wt.v=Xt(bt[1]-wt[1],wt[3],wt[2],bt[3],bt[2],bt[0]-wt[0]),wt.point=[0,0];var hr=Nt(lt[0].v[0],lt[2].v[0],lt[1].v[0]),gr=Nt(lt[0].v[0],lt[1].v[0],lt[2].v[0]),ur=u-hr;lt[2].point[1]=0,lt[0].point[0]=-(lt[1].point[0]=lt[0].v[0]/2);var _r=[lt[2].point[0]=lt[0].point[0]+lt[2].v[0]*i(hr),2*(lt[0].point[1]=lt[1].point[1]=lt[2].v[0]*f(hr))];function Ir(jr,tn){var wn=f(tn),In=i(tn),jn=new Array(3),ba;for(ba=0;ba<3;++ba){var Ta=lt[ba];if(jn[ba]=Xt(tn-Ta[1],Ta[3],Ta[2],In,wn,jr-Ta[0]),!jn[ba][0])return Ta.point;jn[ba][1]=Ct(jn[ba][1]-Ta.v[1])}var qa=_r.slice();for(ba=0;ba<3;++ba){var ja=ba==2?0:ba+1,ai=Nt(lt[ba].v[0],jn[ba][0],jn[ja][0]);jn[ba][1]<0&&(ai=-ai),ba?ba==1?(ai=gr-ai,qa[0]-=jn[ba][0]*i(ai),qa[1]-=jn[ba][0]*f(ai)):(ai=ur-ai,qa[0]+=jn[ba][0]*i(ai),qa[1]+=jn[ba][0]*f(ai)):(qa[0]+=jn[ba][0]*i(ai),qa[1]-=jn[ba][0]*f(ai))}return qa[0]/=3,qa[1]/=3,qa}return Ir}function at(Ne){return Ne[0]*=E,Ne[1]*=E,Ne}function Ge(){return Se([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])}function Se(Ne,Ze,rt){var lt=c.geoCentroid({type:"MultiPoint",coordinates:[Ne,Ze,rt]}),wt=[-lt[0],-lt[1]],bt=c.geoRotation(wt),kt=Xe(at(bt(Ne)),at(bt(Ze)),at(bt(rt)));kt.invert=ue(kt);var hr=c.geoProjection(kt).rotate(wt),gr=hr.center;return delete hr.rotate,hr.center=function(ur){return arguments.length?gr(bt(ur)):bt.invert(gr())},hr.clipAngle(90)}function He(Ne,Ze){var rt=D(1-f(Ze));return[2/h*Ne*rt,h*(1-rt)]}He.invert=function(Ne,Ze){var rt=(rt=Ze/h-1)*rt;return[rt>0?Ne*D(u/rt)/2:0,F(1-rt)]};function Ke(){return c.geoProjection(He).scale(95.6464).center([0,30])}function qe(Ne){var Ze=y(Ne);function rt(lt,wt){return[lt,(lt?lt/f(lt):1)*(f(wt)*i(lt)-Ze*i(wt))]}return rt.invert=Ze?function(lt,wt){lt&&(wt*=f(lt)/lt);var bt=i(lt);return[lt,2*a(D(bt*bt+Ze*Ze-wt*wt)-bt,Ze-wt)]}:function(lt,wt){return[lt,F(lt?wt*y(lt)/lt:wt)]},rt}function Tt(){return Ye(qe).scale(249.828).clipAngle(90)}var mt=D(3);function At(Ne,Ze){return[mt*Ne*(2*i(2*Ze/3)-1)/h,mt*h*f(Ze/3)]}At.invert=function(Ne,Ze){var rt=3*F(Ze/(mt*h));return[h*Ne/(mt*(2*i(2*rt/3)-1)),rt]};function Ht(){return c.geoProjection(At).scale(156.19)}function It(Ne){var Ze=i(Ne);function rt(lt,wt){return[lt*Ze,f(wt)/Ze]}return rt.invert=function(lt,wt){return[lt/Ze,F(wt*Ze)]},rt}function Vt(){return Ye(It).parallel(38.58).scale(195.044)}function jt(Ne){var Ze=i(Ne);function rt(lt,wt){return[lt*Ze,(1+Ze)*y(wt/2)]}return rt.invert=function(lt,wt){return[lt/Ze,e(wt/(1+Ze))*2]},rt}function Yt(){return Ye(jt).scale(124.75)}function or(Ne,Ze){var rt=D(8/(3*u));return[rt*Ne*(1-T(Ze)/u),rt*Ze]}or.invert=function(Ne,Ze){var rt=D(8/(3*u)),lt=Ze/rt;return[Ne/(rt*(1-T(lt)/u)),lt]};function Gr(){return c.geoProjection(or).scale(165.664)}function on(Ne,Ze){var rt=D(4-3*f(T(Ze)));return[2/D(6*u)*Ne*rt,d(Ze)*D(2*u/3)*(2-rt)]}on.invert=function(Ne,Ze){var rt=2-T(Ze)/D(2*u/3);return[Ne*D(6*u)/(2*rt),d(Ze)*F((4-rt*rt)/3)]};function Jr(){return c.geoProjection(on).scale(165.664)}function ot(Ne,Ze){var rt=D(u*(4+u));return[2/rt*Ne*(1+D(1-4*Ze*Ze/(u*u))),4/rt*Ze]}ot.invert=function(Ne,Ze){var rt=D(u*(4+u))/2;return[Ne*rt/(1+D(1-Ze*Ze*(4+u)/(4*u))),Ze*rt/2]};function er(){return c.geoProjection(ot).scale(180.739)}function Kt(Ne,Ze){var rt=(2+M)*f(Ze);Ze/=2;for(var lt=0,wt=1/0;lt<10&&T(wt)>l;lt++){var bt=i(Ze);Ze-=wt=(Ze+f(Ze)*(bt+2)-rt)/(2*bt*(1+bt))}return[2/D(u*(4+u))*Ne*(1+i(Ze)),2*D(u/(4+u))*f(Ze)]}Kt.invert=function(Ne,Ze){var rt=Ze*D((4+u)/u)/2,lt=F(rt),wt=i(lt);return[Ne/(2/D(u*(4+u))*(1+wt)),F((lt+rt*(wt+2))/(2+M))]};function fr(){return c.geoProjection(Kt).scale(180.739)}function Ar(Ne,Ze){return[Ne*(1+i(Ze))/D(2+u),2*Ze/D(2+u)]}Ar.invert=function(Ne,Ze){var rt=D(2+u),lt=Ze*rt/2;return[rt*Ne/(1+i(lt)),lt]};function et(){return c.geoProjection(Ar).scale(173.044)}function $e(Ne,Ze){for(var rt=(1+M)*f(Ze),lt=0,wt=1/0;lt<10&&T(wt)>l;lt++)Ze-=wt=(Ze+f(Ze)-rt)/(1+i(Ze));return rt=D(2+u),[Ne*(1+i(Ze))/rt,2*Ze/rt]}$e.invert=function(Ne,Ze){var rt=1+M,lt=D(rt/2);return[Ne*2*lt/(1+i(Ze*=lt)),F((Ze+f(Ze))/rt)]};function st(){return c.geoProjection($e).scale(173.044)}var ct=3+2*w;function Mt(Ne,Ze){var rt=f(Ne/=2),lt=i(Ne),wt=D(i(Ze)),bt=i(Ze/=2),kt=f(Ze)/(bt+w*lt*wt),hr=D(2/(1+kt*kt)),gr=D((w*bt+(lt+rt)*wt)/(w*bt+(lt-rt)*wt));return[ct*(hr*(gr-1/gr)-2*v(gr)),ct*(hr*kt*(gr+1/gr)-2*e(kt))]}Mt.invert=function(Ne,Ze){if(!(bt=K.invert(Ne/1.2,Ze*1.065)))return null;var rt=bt[0],lt=bt[1],wt=20,bt;Ne/=ct,Ze/=ct;do{var kt=rt/2,hr=lt/2,gr=f(kt),ur=i(kt),_r=f(hr),Ir=i(hr),jr=i(lt),tn=D(jr),wn=_r/(Ir+w*ur*tn),In=wn*wn,jn=D(2/(1+In)),ba=w*Ir+(ur+gr)*tn,Ta=w*Ir+(ur-gr)*tn,qa=ba/Ta,ja=D(qa),ai=ja-1/ja,gi=ja+1/ja,po=jn*ai-2*v(ja)-Ne,oi=jn*wn*gi-2*e(wn)-Ze,Ji=_r&&p*tn*gr*In/_r,bo=(w*ur*Ir+tn)/(2*(Ir+w*ur*tn)*(Ir+w*ur*tn)*tn),Lo=-.5*wn*jn*jn*jn,Si=Lo*Ji,Pi=Lo*bo,ws=(ws=2*Ir+w*tn*(ur-gr))*ws*ja,Mo=(w*ur*Ir*tn+jr)/ws,Ho=-(w*gr*_r)/(tn*ws),es=ai*Si-2*Mo/ja+jn*(Mo+Mo/qa),le=ai*Pi-2*Ho/ja+jn*(Ho+Ho/qa),Te=wn*gi*Si-2*Ji/(1+In)+jn*gi*Ji+jn*wn*(Mo-Mo/qa),Re=wn*gi*Pi-2*bo/(1+In)+jn*gi*bo+jn*wn*(Ho-Ho/qa),Ue=le*Te-Re*es;if(!Ue)break;var Be=(oi*le-po*Re)/Ue,Qe=(po*Te-oi*es)/Ue;rt-=Be,lt=s(-M,o(M,lt-Qe))}while((T(Be)>l||T(Qe)>l)&&--wt>0);return T(T(lt)-M)<l?[0,lt]:wt&&[rt,lt]};function Ut(){return c.geoProjection(Mt).scale(62.5271)}var Pe=i(35*E);function Ee(Ne,Ze){var rt=y(Ze/2);return[Ne*Pe*D(1-rt*rt),(1+Pe)*rt]}Ee.invert=function(Ne,Ze){var rt=Ze/(1+Pe);return[Ne&&Ne/(Pe*D(1-rt*rt)),2*e(rt)]};function it(){return c.geoProjection(Ee).scale(137.152)}function ut(Ne,Ze){var rt=Ze/2,lt=i(rt);return[2*Ne/h*i(Ze)*lt*lt,h*y(rt)]}ut.invert=function(Ne,Ze){var rt=e(Ze/h),lt=i(rt),wt=2*rt;return[Ne*h/2/(i(wt)*lt*lt),wt]};function vt(){return c.geoProjection(ut).scale(135.264)}function St(Ne){var Ze=1-Ne,rt=bt(u,0)[0]-bt(-u,0)[0],lt=bt(0,M)[1]-bt(0,-M)[1],wt=D(2*lt/rt);function bt(gr,ur){var _r=i(ur),Ir=f(ur);return[_r/(Ze+Ne*_r)*gr,Ze*ur+Ne*Ir]}function kt(gr,ur){var _r=bt(gr,ur);return[_r[0]*wt,_r[1]/wt]}function hr(gr){return kt(0,gr)[1]}return kt.invert=function(gr,ur){var _r=_e(hr,ur),Ir=gr/wt*(Ne+Ze/i(_r));return[Ir,_r]},kt}function yt(){var Ne=.5,Ze=c.geoProjectionMutator(St),rt=Ze(Ne);return rt.alpha=function(lt){return arguments.length?Ze(Ne=+lt):Ne},rt.scale(168.725)}function Pt(Ne){return[Ne[0]/2,F(y(Ne[1]/2*E))*S]}function Wt(Ne){return[Ne[0]*2,2*e(f(Ne[1]*E))*S]}function ar(Ne){Ne==null&&(Ne=c.geoOrthographic);var Ze=Ne(),rt=c.geoEquirectangular().scale(S).precision(0).clipAngle(null).translate([0,0]);function lt(bt){return Ze(Pt(bt))}Ze.invert&&(lt.invert=function(bt){return Wt(Ze.invert(bt))}),lt.stream=function(bt){var kt=Ze.stream(bt),hr=rt.stream({point:function(gr,ur){kt.point(gr/2,F(y(-ur/2*E))*S)},lineStart:function(){kt.lineStart()},lineEnd:function(){kt.lineEnd()},polygonStart:function(){kt.polygonStart()},polygonEnd:function(){kt.polygonEnd()}});return hr.sphere=kt.sphere,hr};function wt(bt){lt[bt]=function(){return arguments.length?(Ze[bt].apply(Ze,arguments),lt):Ze[bt]()}}return lt.rotate=function(bt){return arguments.length?(rt.rotate(bt),lt):rt.rotate()},lt.center=function(bt){return arguments.length?(Ze.center(Pt(bt)),lt):Wt(Ze.center())},wt("angle"),wt("clipAngle"),wt("clipExtent"),wt("fitExtent"),wt("fitHeight"),wt("fitSize"),wt("fitWidth"),wt("scale"),wt("translate"),wt("precision"),lt.scale(249.5)}function kr(Ne,Ze){var rt=2*u/Ze,lt=Ne*Ne;function wt(bt,kt){var hr=c.geoAzimuthalEquidistantRaw(bt,kt),gr=hr[0],ur=hr[1],_r=gr*gr+ur*ur;if(_r>lt){var Ir=D(_r),jr=a(ur,gr),tn=rt*g(jr/rt),wn=jr-tn,In=Ne*i(wn),jn=(Ne*f(wn)-wn*f(In))/(M-In),ba=wr(wn,jn),Ta=(u-Ne)/Sr(ba,In,u);gr=Ir;var qa=50,ja;do gr-=ja=(Ne+Sr(ba,In,gr)*Ta-Ir)/(ba(gr)*Ta);while(T(ja)>l&&--qa>0);ur=wn*f(gr),gr<M&&(ur-=jn*(gr-M));var ai=f(tn),gi=i(tn);hr[0]=gr*gi-ur*ai,hr[1]=gr*ai+ur*gi}return hr}return wt.invert=function(bt,kt){var hr=bt*bt+kt*kt;if(hr>lt){var gr=D(hr),ur=a(kt,bt),_r=rt*g(ur/rt),Ir=ur-_r;bt=gr*i(Ir),kt=gr*f(Ir);for(var jr=bt-M,tn=f(bt),wn=kt/tn,In=bt<M?1/0:0,jn=10;;){var ba=Ne*f(wn),Ta=Ne*i(wn),qa=f(Ta),ja=M-Ta,ai=(ba-wn*qa)/ja,gi=wr(wn,ai);if(T(In)<x||!--jn)break;wn-=In=(wn*tn-ai*jr-kt)/(tn-jr*2*(ja*(Ta+wn*ba*i(Ta)-qa)-ba*(ba-wn*qa))/(ja*ja))}gr=Ne+Sr(gi,Ta,bt)*(u-Ne)/Sr(gi,Ta,u),ur=_r+wn,bt=gr*i(ur),kt=gr*f(ur)}return c.geoAzimuthalEquidistantRaw.invert(bt,kt)},wt}function wr(Ne,Ze){return function(rt){var lt=Ne*i(rt);return rt<M&&(lt-=Ze),D(1+lt*lt)}}function Sr(Ne,Ze,rt){for(var lt=50,wt=(rt-Ze)/lt,bt=Ne(Ze)+Ne(rt),kt=1,hr=Ze;kt<lt;++kt)bt+=2*Ne(hr+=wt);return bt*.5*wt}function Zr(){var Ne=6,Ze=30*E,rt=i(Ze),lt=f(Ze),wt=c.geoProjectionMutator(kr),bt=wt(Ze,Ne),kt=bt.stream,hr=.01,gr=-i(hr*E),ur=f(hr*E);return bt.radius=function(_r){return arguments.length?(rt=i(Ze=_r*E),lt=f(Ze),wt(Ze,Ne)):Ze*S},bt.lobes=function(_r){return arguments.length?wt(Ze,Ne=+_r):Ne},bt.stream=function(_r){var Ir=bt.rotate(),jr=kt(_r),tn=(bt.rotate([0,0]),kt(_r));return bt.rotate(Ir),jr.sphere=function(){tn.polygonStart(),tn.lineStart();for(var wn=0,In=2*u/Ne,jn=0;wn<Ne;++wn,jn-=In)tn.point(a(ur*i(jn),gr)*S,F(ur*f(jn))*S),tn.point(a(lt*i(jn-In/2),rt)*S,F(lt*f(jn-In/2))*S);tn.lineEnd(),tn.polygonEnd()},jr},bt.rotate([90,-40]).scale(91.7095).clipAngle(180-.001)}function ir(Ne,Ze,rt,lt,wt,bt,kt,hr){arguments.length<8&&(hr=0);function gr(ur,_r){if(!_r)return[Ne*ur/u,0];var Ir=_r*_r,jr=Ne+Ir*(Ze+Ir*(rt+Ir*lt)),tn=_r*(wt-1+Ir*(bt-hr+Ir*kt)),wn=(jr*jr+tn*tn)/(2*tn),In=ur*F(jr/wn)/u;return[wn*f(In),_r*(1+Ir*hr)+wn*(1-i(In))]}return gr.invert=function(ur,_r){var Ir=u*ur/Ne,jr=_r,tn,wn,In=50;do{var jn=jr*jr,ba=Ne+jn*(Ze+jn*(rt+jn*lt)),Ta=jr*(wt-1+jn*(bt-hr+jn*kt)),qa=ba*ba+Ta*Ta,ja=2*Ta,ai=qa/ja,gi=ai*ai,po=F(ba/ai)/u,oi=Ir*po,Ji=ba*ba,bo=(2*Ze+jn*(4*rt+jn*6*lt))*jr,Lo=wt+jn*(3*bt+jn*5*kt),Si=2*(ba*bo+Ta*(Lo-1)),Pi=2*(Lo-1),ws=(Si*ja-qa*Pi)/(ja*ja),Mo=i(oi),Ho=f(oi),es=ai*Mo,le=ai*Ho,Te=Ir/u*(1/D(1-Ji/gi))*(bo*ai-ba*ws)/gi,Re=le-ur,Ue=jr*(1+jn*hr)+ai-es-_r,Be=ws*Ho+es*Te,Qe=es*po,_t=1+ws-(ws*Mo-le*Te),dt=le*po,Rt=Be*dt-_t*Qe;if(!Rt)break;Ir-=tn=(Ue*Be-Re*_t)/Rt,jr-=wn=(Re*dt-Ue*Qe)/Rt}while((T(tn)>l||T(wn)>l)&&--In>0);return[Ir,jr]},gr}var xr=ir(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);function Rr(){return c.geoProjection(xr).scale(149.995)}var Br=ir(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);function Cr(){return c.geoProjection(Br).scale(153.93)}var nt=ir(5/6*u,-.62636,-.0344,0,1.3493,-.05524,0,.045);function Dt(){return c.geoProjection(nt).scale(130.945)}function Zt(Ne,Ze){var rt=Ne*Ne,lt=Ze*Ze;return[Ne*(1-.162388*lt)*(.87-952426e-9*rt*rt),Ze*(1+lt/12)]}Zt.invert=function(Ne,Ze){var rt=Ne,lt=Ze,wt=50,bt;do{var kt=lt*lt;lt-=bt=(lt*(1+kt/12)-Ze)/(1+kt/4)}while(T(bt)>l&&--wt>0);wt=50,Ne/=1-.162388*kt;do{var hr=(hr=rt*rt)*hr;rt-=bt=(rt*(.87-952426e-9*hr)-Ne)/(.87-.00476213*hr)}while(T(bt)>l&&--wt>0);return[rt,lt]};function sr(){return c.geoProjection(Zt).scale(131.747)}var zr=ir(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function Ur(){return c.geoProjection(zr).scale(131.087)}function Lr(Ne){var Ze=Ne(M,0)[0]-Ne(-M,0)[0];function rt(lt,wt){var bt=lt>0?-.5:.5,kt=Ne(lt+bt*u,wt);return kt[0]-=bt*Ze,kt}return Ne.invert&&(rt.invert=function(lt,wt){var bt=lt>0?-.5:.5,kt=Ne.invert(lt+bt*Ze,wt),hr=kt[0]-bt*u;return hr<-u?hr+=2*u:hr>u&&(hr-=2*u),kt[0]=hr,kt}),rt}function Tr(Ne,Ze){var rt=d(Ne),lt=d(Ze),wt=i(Ze),bt=i(Ne)*wt,kt=f(Ne)*wt,hr=f(lt*Ze);Ne=T(a(kt,hr)),Ze=F(bt),T(Ne-M)>l&&(Ne%=M);var gr=Wr(Ne>u/4?M-Ne:Ne,Ze);return Ne>u/4&&(hr=gr[0],gr[0]=-gr[1],gr[1]=-hr),gr[0]*=rt,gr[1]*=-lt,gr}Tr.invert=function(Ne,Ze){T(Ne)>1&&(Ne=d(Ne)*2-Ne),T(Ze)>1&&(Ze=d(Ze)*2-Ze);var rt=d(Ne),lt=d(Ze),wt=-rt*Ne,bt=-lt*Ze,kt=bt/wt<1,hr=An(kt?bt:wt,kt?wt:bt),gr=hr[0],ur=hr[1],_r=i(ur);return kt&&(gr=-M-gr),[rt*(a(f(gr)*_r,-f(ur))+u),lt*F(i(gr)*_r)]};function Wr(Ne,Ze){if(Ze===M)return[0,0];var rt=f(Ze),lt=rt*rt,wt=lt*lt,bt=1+wt,kt=1+3*wt,hr=1-wt,gr=F(1/D(bt)),ur=hr+lt*bt*gr,_r=(1-rt)/ur,Ir=D(_r),jr=_r*bt,tn=D(jr),wn=Ir*hr,In,jn;if(Ne===0)return[0,-(wn+lt*tn)];var ba=i(Ze),Ta=1/ba,qa=2*rt*ba,ja=(-3*lt+gr*kt)*qa,ai=(-ur*ba-(1-rt)*ja)/(ur*ur),gi=.5*ai/Ir,po=hr*gi-2*lt*Ir*qa,oi=lt*bt*ai+_r*kt*qa,Ji=-Ta*qa,bo=-Ta*oi,Lo=-2*Ta*po,Si=4*Ne/u,Pi;if(Ne>.222*u||Ze<u/4&&Ne>.175*u){if(In=(wn+lt*D(jr*(1+wt)-wn*wn))/(1+wt),Ne>u/4)return[In,In];var ws=In,Mo=.5*In;In=.5*(Mo+ws),jn=50;do{var Ho=D(jr-In*In),es=In*(Lo+Ji*Ho)+bo*F(In/tn)-Si;if(!es)break;es<0?Mo=In:ws=In,In=.5*(Mo+ws)}while(T(ws-Mo)>l&&--jn>0)}else{In=l,jn=25;do{var le=In*In,Te=D(jr-le),Re=Lo+Ji*Te,Ue=In*Re+bo*F(In/tn)-Si,Be=Re+(bo-Ji*le)/Te;In-=Pi=Te?Ue/Be:0}while(T(Pi)>l&&--jn>0)}return[In,-wn-lt*D(jr-In*In)]}function An(Ne,Ze){for(var rt=0,lt=1,wt=.5,bt=50;;){var kt=wt*wt,hr=D(wt),gr=F(1/D(1+kt)),ur=1-kt+wt*(1+kt)*gr,_r=(1-hr)/ur,Ir=D(_r),jr=_r*(1+kt),tn=Ir*(1-kt),wn=jr-Ne*Ne,In=D(wn),jn=Ze+tn+wt*In;if(T(lt-rt)<x||--bt===0||jn===0)break;jn>0?rt=wt:lt=wt,wt=.5*(rt+lt)}if(!bt)return null;var ba=F(hr),Ta=i(ba),qa=1/Ta,ja=2*hr*Ta,ai=(-3*wt+gr*(1+3*kt))*ja,gi=(-ur*Ta-(1-hr)*ai)/(ur*ur),po=.5*gi/Ir,oi=(1-kt)*po-2*wt*Ir*ja,Ji=-2*qa*oi,bo=-qa*ja,Lo=-qa*(wt*(1+kt)*gi+_r*(1+3*kt)*ja);return[u/4*(Ne*(Ji+bo*In)+Lo*F(Ne/D(jr))),ba]}function vn(){return c.geoProjection(Lr(Tr)).scale(239.75)}function Un(Ne,Ze,rt){var lt,wt,bt;return Ne?(lt=Ln(Ne,rt),Ze?(wt=Ln(Ze,1-rt),bt=wt[1]*wt[1]+rt*lt[0]*lt[0]*wt[0]*wt[0],[[lt[0]*wt[2]/bt,lt[1]*lt[2]*wt[0]*wt[1]/bt],[lt[1]*wt[1]/bt,-lt[0]*lt[2]*wt[0]*wt[2]/bt],[lt[2]*wt[1]*wt[2]/bt,-rt*lt[0]*lt[1]*wt[0]/bt]]):[[lt[0],0],[lt[1],0],[lt[2],0]]):(wt=Ln(Ze,1-rt),[[0,wt[0]/wt[1]],[1/wt[1],0],[wt[2]/wt[1],0]])}function Ln(Ne,Ze){var rt,lt,wt,bt,kt;if(Ze<l)return bt=f(Ne),lt=i(Ne),rt=Ze*(Ne-bt*lt)/4,[bt-rt*lt,lt+rt*bt,1-Ze*bt*bt/2,Ne-rt];if(Ze>=1-l)return rt=(1-Ze)/4,lt=z(Ne),bt=R(Ne),wt=1/lt,kt=lt*N(Ne),[bt+rt*(kt-Ne)/(lt*lt),wt-rt*bt*wt*(kt-Ne),wt+rt*bt*wt*(kt+Ne),2*e(n(Ne))-M+rt*(kt-Ne)/lt];var hr=[1,0,0,0,0,0,0,0,0],gr=[D(Ze),0,0,0,0,0,0,0,0],ur=0;for(lt=D(1-Ze),kt=1;T(gr[ur]/hr[ur])>l&&ur<8;)rt=hr[ur++],gr[ur]=(rt-lt)/2,hr[ur]=(rt+lt)/2,lt=D(rt*lt),kt*=2;wt=kt*hr[ur]*Ne;do bt=gr[ur]*f(lt=wt)/hr[ur],wt=(F(bt)+wt)/2;while(--ur);return[f(wt),bt=i(wt),bt/i(wt-lt),wt]}function Zn(Ne,Ze,rt){var lt=T(Ne),wt=T(Ze),bt=N(wt);if(lt){var kt=1/f(lt),hr=1/(y(lt)*y(lt)),gr=-(hr+rt*(bt*bt*kt*kt)-1+rt),ur=(rt-1)*hr,_r=(-gr+D(gr*gr-4*ur))/2;return[Wn(e(1/D(_r)),rt)*d(Ne),Wn(e(D((_r/hr-1)/rt)),1-rt)*d(Ze)]}return[0,Wn(e(bt),1-rt)*d(Ze)]}function Wn(Ne,Ze){if(!Ze)return Ne;if(Ze===1)return v(y(Ne/2+_));for(var rt=1,lt=D(1-Ze),wt=D(Ze),bt=0;T(wt)>l;bt++){if(Ne%u){var kt=e(lt*y(Ne)/rt);kt<0&&(kt+=u),Ne+=kt+~~(Ne/u)*u}else Ne+=Ne;wt=(rt+lt)/2,lt=D(rt*lt),wt=((rt=wt)-lt)/2}return Ne/(b(2,bt)*rt)}function ya(Ne,Ze){var rt=(w-1)/(w+1),lt=D(1-rt*rt),wt=Wn(M,lt*lt),bt=-1,kt=v(y(u/4+T(Ze)/2)),hr=n(bt*kt)/D(rt),gr=ka(hr*i(bt*Ne),hr*f(bt*Ne)),ur=Zn(gr[0],gr[1],lt*lt);return[-ur[1],(Ze>=0?1:-1)*(.5*wt-ur[0])]}function ka(Ne,Ze){var rt=Ne*Ne,lt=Ze+1,wt=1-rt-Ze*Ze;return[.5*((Ne>=0?M:-M)-a(wt,2*Ne)),-.25*v(wt*wt+4*rt)+.5*v(lt*lt+rt)]}function di(Ne,Ze){var rt=Ze[0]*Ze[0]+Ze[1]*Ze[1];return[(Ne[0]*Ze[0]+Ne[1]*Ze[1])/rt,(Ne[1]*Ze[0]-Ne[0]*Ze[1])/rt]}ya.invert=function(Ne,Ze){var rt=(w-1)/(w+1),lt=D(1-rt*rt),wt=Wn(M,lt*lt),bt=-1,kt=Un(.5*wt-Ze,-Ne,lt*lt),hr=di(kt[0],kt[1]),gr=a(hr[1],hr[0])/bt;return[gr,2*e(n(.5/bt*v(rt*hr[0]*hr[0]+rt*hr[1]*hr[1])))-M]};function Xa(){return c.geoProjection(Lr(ya)).scale(151.496)}function $a(Ne){var Ze=f(Ne),rt=i(Ne),lt=Ka(Ne);lt.invert=Ka(-Ne);function wt(bt,kt){var hr=lt(bt,kt);bt=hr[0],kt=hr[1];var gr=f(kt),ur=i(kt),_r=i(bt),Ir=I(Ze*gr+rt*ur*_r),jr=f(Ir),tn=T(jr)>l?Ir/jr:1;return[tn*rt*f(bt),(T(bt)>M?tn:-tn)*(Ze*ur-rt*gr*_r)]}return wt.invert=function(bt,kt){var hr=D(bt*bt+kt*kt),gr=-f(hr),ur=i(hr),_r=hr*ur,Ir=-kt*gr,jr=hr*Ze,tn=D(_r*_r+Ir*Ir-jr*jr),wn=a(_r*jr+Ir*tn,Ir*jr-_r*tn),In=(hr>M?-1:1)*a(bt*gr,hr*i(wn)*ur+kt*f(wn)*gr);return lt.invert(In,wn)},wt}function Ka(Ne){var Ze=f(Ne),rt=i(Ne);return function(lt,wt){var bt=i(wt),kt=i(lt)*bt,hr=f(lt)*bt,gr=f(wt);return[a(hr,kt*rt-gr*Ze),F(gr*rt+kt*Ze)]}}function Mr(){var Ne=0,Ze=c.geoProjectionMutator($a),rt=Ze(Ne),lt=rt.rotate,wt=rt.stream,bt=c.geoCircle();return rt.parallel=function(kt){if(!arguments.length)return Ne*S;var hr=rt.rotate();return Ze(Ne=kt*E).rotate(hr)},rt.rotate=function(kt){return arguments.length?(lt.call(rt,[kt[0],kt[1]-Ne*S]),bt.center([-kt[0],-kt[1]]),rt):(kt=lt.call(rt),kt[1]+=Ne*S,kt)},rt.stream=function(kt){return kt=wt(kt),kt.sphere=function(){kt.polygonStart();var hr=.01,gr=bt.radius(90-hr)().coordinates[0],ur=gr.length-1,_r=-1,Ir;for(kt.lineStart();++_r<ur;)kt.point((Ir=gr[_r])[0],Ir[1]);for(kt.lineEnd(),gr=bt.radius(90+hr)().coordinates[0],ur=gr.length-1,kt.lineStart();--_r>=0;)kt.point((Ir=gr[_r])[0],Ir[1]);kt.lineEnd(),kt.polygonEnd()},kt},rt.scale(79.4187).parallel(45).clipAngle(180-.001)}var gn=3,hn=F(1-1/gn)*S,Sn=It(0);function Jn(Ne){var Ze=hn*E,rt=He(u,Ze)[0]-He(-u,Ze)[0],lt=Sn(0,Ze)[1],wt=He(0,Ze)[1],bt=h-wt,kt=L/Ne,hr=4/L,gr=lt+bt*bt*4/L;function ur(_r,Ir){var jr,tn=T(Ir);if(tn>Ze){var wn=o(Ne-1,s(0,r((_r+u)/kt)));_r+=u*(Ne-1)/Ne-wn*kt,jr=He(_r,tn),jr[0]=jr[0]*L/rt-L*(Ne-1)/(2*Ne)+wn*L/Ne,jr[1]=lt+(jr[1]-wt)*4*bt/L,Ir<0&&(jr[1]=-jr[1])}else jr=Sn(_r,Ir);return jr[0]*=hr,jr[1]/=gr,jr}return ur.invert=function(_r,Ir){_r/=hr,Ir*=gr;var jr=T(Ir);if(jr>lt){var tn=o(Ne-1,s(0,r((_r+u)/kt)));_r=(_r+u*(Ne-1)/Ne-tn*kt)*rt/L;var wn=He.invert(_r,.25*(jr-lt)*L/bt+wt);return wn[0]-=u*(Ne-1)/Ne-tn*kt,Ir<0&&(wn[1]=-wn[1]),wn}return Sn.invert(_r,Ir)},ur}function ha(Ne,Ze){return[Ne,Ze&1?90-l:hn]}function na(Ne,Ze){return[Ne,Ze&1?-90+l:-hn]}function Fn(Ne){return[Ne[0]*(1-l),Ne[1]]}function Kn(Ne){var Ze=[].concat(A.range(-180,180+Ne/2,Ne).map(ha),A.range(180,-180-Ne/2,-Ne).map(na));return{type:"Polygon",coordinates:[Ne===180?Ze.map(Fn):Ze]}}function Ya(){var Ne=4,Ze=c.geoProjectionMutator(Jn),rt=Ze(Ne),lt=rt.stream;return rt.lobes=function(wt){return arguments.length?Ze(Ne=+wt):Ne},rt.stream=function(wt){var bt=rt.rotate(),kt=lt(wt),hr=(rt.rotate([0,0]),lt(wt));return rt.rotate(bt),kt.sphere=function(){c.geoStream(Kn(180/Ne),hr)},kt},rt.scale(239.75)}function hi(Ne){var Ze=1+Ne,rt=f(1/Ze),lt=F(rt),wt=2*D(u/(bt=u+4*lt*Ze)),bt,kt=.5*wt*(Ze+D(Ne*(2+Ne))),hr=Ne*Ne,gr=Ze*Ze;function ur(_r,Ir){var jr=1-f(Ir),tn,wn;if(jr&&jr<2){var In=M-Ir,jn=25,ba;do{var Ta=f(In),qa=i(In),ja=lt+a(Ta,Ze-qa),ai=1+gr-2*Ze*qa;In-=ba=(In-hr*lt-Ze*Ta+ai*ja-.5*jr*bt)/(2*Ze*Ta*ja)}while(T(ba)>x&&--jn>0);tn=wt*D(ai),wn=_r*ja/u}else tn=wt*(Ne+jr),wn=_r*lt/u;return[tn*f(wn),kt-tn*i(wn)]}return ur.invert=function(_r,Ir){var jr=_r*_r+(Ir-=kt)*Ir,tn=(1+gr-jr/(wt*wt))/(2*Ze),wn=I(tn),In=f(wn),jn=lt+a(In,Ze-tn);return[F(_r/D(jr))*u/jn,F(1-2*(wn-hr*lt-Ze*In+(1+gr-2*Ze*tn)*jn)/bt)]},ur}function Gt(){var Ne=1,Ze=c.geoProjectionMutator(hi),rt=Ze(Ne);return rt.ratio=function(lt){return arguments.length?Ze(Ne=+lt):Ne},rt.scale(167.774).center([0,18.67])}var pr=.7109889596207567,an=.0528035274542;function dn(Ne,Ze){return Ze>-pr?(Ne=ke(Ne,Ze),Ne[1]+=an,Ne):ze(Ne,Ze)}dn.invert=function(Ne,Ze){return Ze>-pr?ke.invert(Ne,Ze-an):ze.invert(Ne,Ze)};function rn(){return c.geoProjection(dn).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}function Mn(Ne,Ze){return T(Ze)>pr?(Ne=ke(Ne,Ze),Ne[1]-=Ze>0?an:-an,Ne):ze(Ne,Ze)}Mn.invert=function(Ne,Ze){return T(Ze)>pr?ke.invert(Ne,Ze+(Ze>0?an:-an)):ze.invert(Ne,Ze)};function _n(){return c.geoProjection(Mn).scale(152.63)}function fn(Ne,Ze,rt,lt){var wt=D(4*u/(2*rt+(1+Ne-Ze/2)*f(2*rt)+(Ne+Ze)/2*f(4*rt)+Ze/2*f(6*rt))),bt=D(lt*f(rt)*D((1+Ne*i(2*rt)+Ze*i(4*rt))/(1+Ne+Ze))),kt=rt*gr(1);function hr(Ir){return D(1+Ne*i(2*Ir)+Ze*i(4*Ir))}function gr(Ir){var jr=Ir*rt;return(2*jr+(1+Ne-Ze/2)*f(2*jr)+(Ne+Ze)/2*f(4*jr)+Ze/2*f(6*jr))/rt}function ur(Ir){return hr(Ir)*f(Ir)}var _r=function(Ir,jr){var tn=rt*_e(gr,kt*f(jr)/rt,jr/u);isNaN(tn)&&(tn=rt*d(jr));var wn=wt*hr(tn);return[wn*bt*Ir/u*i(tn),wn/bt*f(tn)]};return _r.invert=function(Ir,jr){var tn=_e(ur,jr*bt/wt);return[Ir*u/(i(tn)*wt*bt*hr(tn)),F(rt*gr(tn/rt)/kt)]},rt===0&&(wt=D(lt/u),_r=function(Ir,jr){return[Ir*wt,f(jr)/wt]},_r.invert=function(Ir,jr){return[Ir/wt,F(jr*wt)]}),_r}function mr(){var Ne=1,Ze=0,rt=45*E,lt=2,wt=c.geoProjectionMutator(fn),bt=wt(Ne,Ze,rt,lt);return bt.a=function(kt){return arguments.length?wt(Ne=+kt,Ze,rt,lt):Ne},bt.b=function(kt){return arguments.length?wt(Ne,Ze=+kt,rt,lt):Ze},bt.psiMax=function(kt){return arguments.length?wt(Ne,Ze,rt=+kt*E,lt):rt*S},bt.ratio=function(kt){return arguments.length?wt(Ne,Ze,rt,lt=+kt):lt},bt.scale(180.739)}function br(Ne,Ze,rt,lt,wt,bt,kt,hr,gr,ur,_r){if(_r.nanEncountered)return NaN;var Ir,jr,tn,wn,In,jn,ba,Ta,qa,ja;if(Ir=rt-Ze,jr=Ne(Ze+Ir*.25),tn=Ne(rt-Ir*.25),isNaN(jr)){_r.nanEncountered=!0;return}if(isNaN(tn)){_r.nanEncountered=!0;return}return wn=Ir*(lt+4*jr+wt)/12,In=Ir*(wt+4*tn+bt)/12,jn=wn+In,ja=(jn-kt)/15,ur>gr?(_r.maxDepthCount++,jn+ja):Math.abs(ja)<hr?jn+ja:(ba=Ze+Ir*.5,Ta=br(Ne,Ze,ba,lt,jr,wt,wn,hr*.5,gr,ur+1,_r),isNaN(Ta)?(_r.nanEncountered=!0,NaN):(qa=br(Ne,ba,rt,wt,tn,bt,In,hr*.5,gr,ur+1,_r),isNaN(qa)?(_r.nanEncountered=!0,NaN):Ta+qa))}function Nr(Ne,Ze,rt,lt,wt){var bt={maxDepthCount:0,nanEncountered:!1};lt===void 0&&(lt=1e-8),wt===void 0&&(wt=20);var kt=Ne(Ze),hr=Ne(.5*(Ze+rt)),gr=Ne(rt),ur=(kt+4*hr+gr)*(rt-Ze)/6,_r=br(Ne,Ze,rt,kt,hr,gr,ur,lt,wt,1,bt);return _r}function mn(Ne,Ze,rt){function lt(tn){return Ne+(1-Ne)*b(1-b(tn,Ze),1/Ze)}function wt(tn){return Nr(lt,0,tn,1e-4)}for(var bt=1/wt(1),kt=1e3,hr=(1+1e-8)*bt,gr=[],ur=0;ur<=kt;ur++)gr.push(wt(ur/kt)*hr);function _r(tn){var wn=0,In=kt,jn=kt>>1;do gr[jn]>tn?In=jn:wn=jn,jn=wn+In>>1;while(jn>wn);var ba=gr[jn+1]-gr[jn];return ba&&(ba=(tn-gr[jn+1])/ba),(jn+1+ba)/kt}var Ir=2*_r(1)/u*bt/rt,jr=function(tn,wn){var In=_r(T(f(wn))),jn=lt(In)*tn;return In/=Ir,[jn,wn>=0?In:-In]};return jr.invert=function(tn,wn){var In;return wn*=Ir,T(wn)<1&&(In=d(wn)*F(wt(T(wn))*bt)),[tn/lt(T(wn)),In]},jr}function Bn(){var Ne=0,Ze=2.5,rt=1.183136,lt=c.geoProjectionMutator(mn),wt=lt(Ne,Ze,rt);return wt.alpha=function(bt){return arguments.length?lt(Ne=+bt,Ze,rt):Ne},wt.k=function(bt){return arguments.length?lt(Ne,Ze=+bt,rt):Ze},wt.gamma=function(bt){return arguments.length?lt(Ne,Ze,rt=+bt):rt},wt.scale(152.63)}function aa(Ne,Ze){return T(Ne[0]-Ze[0])<l&&T(Ne[1]-Ze[1])<l}function Tn(Ne,Ze){for(var rt=-1,lt=Ne.length,wt=Ne[0],bt,kt,hr,gr=[];++rt<lt;){bt=Ne[rt],kt=(bt[0]-wt[0])/Ze,hr=(bt[1]-wt[1])/Ze;for(var ur=0;ur<Ze;++ur)gr.push([wt[0]+ur*kt,wt[1]+ur*hr]);wt=bt}return gr.push(bt),gr}function Qn(Ne){var Ze=[],rt,lt,wt,bt,kt,hr,gr,ur=Ne[0].length;for(gr=0;gr<ur;++gr)rt=Ne[0][gr],lt=rt[0][0],wt=rt[0][1],bt=rt[1][1],kt=rt[2][0],hr=rt[2][1],Ze.push(Tn([[lt+l,wt+l],[lt+l,bt-l],[kt-l,bt-l],[kt-l,hr+l]],30));for(gr=Ne[1].length-1;gr>=0;--gr)rt=Ne[1][gr],lt=rt[0][0],wt=rt[0][1],bt=rt[1][1],kt=rt[2][0],hr=rt[2][1],Ze.push(Tn([[kt-l,hr-l],[kt-l,bt+l],[lt+l,bt+l],[lt+l,wt-l]],30));return{type:"Polygon",coordinates:[A.merge(Ze)]}}function sa(Ne,Ze,rt){var lt,wt;function bt(gr,ur){for(var _r=ur<0?-1:1,Ir=Ze[+(ur<0)],jr=0,tn=Ir.length-1;jr<tn&&gr>Ir[jr][2][0];++jr);var wn=Ne(gr-Ir[jr][1][0],ur);return wn[0]+=Ne(Ir[jr][1][0],_r*ur>_r*Ir[jr][0][1]?Ir[jr][0][1]:ur)[0],wn}rt?bt.invert=rt(bt):Ne.invert&&(bt.invert=function(gr,ur){for(var _r=wt[+(ur<0)],Ir=Ze[+(ur<0)],jr=0,tn=_r.length;jr<tn;++jr){var wn=_r[jr];if(wn[0][0]<=gr&&gr<wn[1][0]&&wn[0][1]<=ur&&ur<wn[1][1]){var In=Ne.invert(gr-Ne(Ir[jr][1][0],0)[0],ur);return In[0]+=Ir[jr][1][0],aa(bt(In[0],In[1]),[gr,ur])?In:null}}});var kt=c.geoProjection(bt),hr=kt.stream;return kt.stream=function(gr){var ur=kt.rotate(),_r=hr(gr),Ir=(kt.rotate([0,0]),hr(gr));return kt.rotate(ur),_r.sphere=function(){c.geoStream(lt,Ir)},_r},kt.lobes=function(gr){return arguments.length?(lt=Qn(gr),Ze=gr.map(function(ur){return ur.map(function(_r){return[[_r[0][0]*E,_r[0][1]*E],[_r[1][0]*E,_r[1][1]*E],[_r[2][0]*E,_r[2][1]*E]]})}),wt=Ze.map(function(ur){return ur.map(function(_r){var Ir=Ne(_r[0][0],_r[0][1])[0],jr=Ne(_r[2][0],_r[2][1])[0],tn=Ne(_r[1][0],_r[0][1])[1],wn=Ne(_r[1][0],_r[1][1])[1],In;return tn>wn&&(In=tn,tn=wn,wn=In),[[Ir,tn],[jr,wn]]})}),kt):Ze.map(function(ur){return ur.map(function(_r){return[[_r[0][0]*S,_r[0][1]*S],[_r[1][0]*S,_r[1][1]*S],[_r[2][0]*S,_r[2][1]*S]]})})},Ze!=null&&kt.lobes(Ze),kt}var ma=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function wa(){return sa(Le,ma).scale(160.857)}var ca=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Ca(){return sa(Mn,ca).scale(152.63)}var To=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Wo(){return sa(ke,To).scale(169.529)}var is=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function _l(){return sa(ke,is).scale(169.529).rotate([20,0])}var Fl=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]];function wu(){return sa(dn,Fl,ue).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}var xi=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function nl(){return sa(ze,xi).scale(152.63).rotate([-20,0])}function Xs(Ne,Ze){return[3/L*Ne*D(u*u/3-Ze*Ze),Ze]}Xs.invert=function(Ne,Ze){return[L/3*Ne/D(u*u/3-Ze*Ze),Ze]};function ji(){return c.geoProjection(Xs).scale(158.837)}function Io(Ne){function Ze(rt,lt){if(T(T(lt)-M)<l)return[0,lt<0?-2:2];var wt=f(lt),bt=b((1+wt)/(1-wt),Ne/2),kt=.5*(bt+1/bt)+i(rt*=Ne);return[2*f(rt)/kt,(bt-1/bt)/kt]}return Ze.invert=function(rt,lt){var wt=T(lt);if(T(wt-2)<l)return rt?null:[0,d(lt)*M];if(wt>2)return null;rt/=2,lt/=2;var bt=rt*rt,kt=lt*lt,hr=2*lt/(1+bt+kt);return hr=b((1+hr)/(1-hr),1/Ne),[a(2*rt,1-bt-kt)/Ne,F((hr-1)/(hr+1))]},Ze}function zl(){var Ne=.5,Ze=c.geoProjectionMutator(Io),rt=Ze(Ne);return rt.spacing=function(lt){return arguments.length?Ze(Ne=+lt):Ne},rt.scale(124.75)}var Ms=u/w;function Ui(Ne,Ze){return[Ne*(1+D(i(Ze)))/2,Ze/(i(Ze/2)*i(Ne/6))]}Ui.invert=function(Ne,Ze){var rt=T(Ne),lt=T(Ze),wt=l,bt=M;lt<Ms?bt*=lt/Ms:wt+=6*I(Ms/lt);for(var kt=0;kt<25;kt++){var hr=f(bt),gr=D(i(bt)),ur=f(bt/2),_r=i(bt/2),Ir=f(wt/6),jr=i(wt/6),tn=.5*wt*(1+gr)-rt,wn=bt/(_r*jr)-lt,In=gr?-.25*wt*hr/gr:0,jn=.5*(1+gr),ba=(1+.5*bt*ur/_r)/(_r*jr),Ta=bt/_r*(Ir/6)/(jr*jr),qa=In*Ta-ba*jn,ja=(tn*Ta-wn*jn)/qa,ai=(wn*In-tn*ba)/qa;if(bt-=ja,wt-=ai,T(ja)<l&&T(ai)<l)break}return[Ne<0?-wt:wt,Ze<0?-bt:bt]};function wl(){return c.geoProjection(Ui).scale(97.2672)}function ao(Ne,Ze){var rt=Ne*Ne,lt=Ze*Ze;return[Ne*(.975534+lt*(-.119161+rt*-.0143059+lt*-.0547009)),Ze*(1.00384+rt*(.0802894+lt*-.02855+rt*199025e-9)+lt*(.0998909+lt*-.0491032))]}ao.invert=function(Ne,Ze){var rt=d(Ne)*u,lt=Ze/2,wt=50;do{var bt=rt*rt,kt=lt*lt,hr=rt*lt,gr=rt*(.975534+kt*(-.119161+bt*-.0143059+kt*-.0547009))-Ne,ur=lt*(1.00384+bt*(.0802894+kt*-.02855+bt*199025e-9)+kt*(.0998909+kt*-.0491032))-Ze,_r=.975534-kt*(.119161+3*bt*.0143059+kt*.0547009),Ir=-hr*(2*.119161+4*.0547009*kt+2*.0143059*bt),jr=hr*(2*.0802894+4*199025e-9*bt+2*-.02855*kt),tn=1.00384+bt*(.0802894+199025e-9*bt)+kt*(3*(.0998909-.02855*bt)-5*.0491032*kt),wn=Ir*jr-tn*_r,In=(ur*Ir-gr*tn)/wn,jn=(gr*jr-ur*_r)/wn;rt-=In,lt-=jn}while((T(In)>l||T(jn)>l)&&--wt>0);return wt&&[rt,lt]};function Yi(){return c.geoProjection(ao).scale(139.98)}function vo(Ne,Ze){return[f(Ne)/i(Ze),y(Ze)*i(Ne)]}vo.invert=function(Ne,Ze){var rt=Ne*Ne,lt=Ze*Ze,wt=lt+1,bt=rt+wt,kt=Ne?p*D((bt-D(bt*bt-4*rt))/rt):1/D(wt);return[F(Ne*kt),d(Ze)*I(kt)]};function io(){return c.geoProjection(vo).scale(144.049).clipAngle(90-.001)}function vs(Ne){var Ze=i(Ne),rt=y(_+Ne/2);function lt(wt,bt){var kt=bt-Ne,hr=T(kt)<l?wt*Ze:T(hr=_+bt/2)<l||T(T(hr)-M)<l?0:wt*kt/v(y(hr)/rt);return[hr,kt]}return lt.invert=function(wt,bt){var kt,hr=bt+Ne;return[T(bt)<l?wt/Ze:T(kt=_+hr/2)<l||T(T(kt)-M)<l?0:wt*v(y(kt)/rt)/bt,hr]},lt}function al(){return Ye(vs).parallel(40).scale(158.837)}function Hu(Ne,Ze){return[Ne,1.25*v(y(_+.4*Ze))]}Hu.invert=function(Ne,Ze){return[Ne,2.5*e(n(.8*Ze))-.625*u]};function os(){return c.geoProjection(Hu).scale(108.318)}function Gu(Ne){var Ze=Ne.length-1;function rt(lt,wt){for(var bt=i(wt),kt=2/(1+bt*i(lt)),hr=kt*bt*f(lt),gr=kt*f(wt),ur=Ze,_r=Ne[ur],Ir=_r[0],jr=_r[1],tn;--ur>=0;)_r=Ne[ur],Ir=_r[0]+hr*(tn=Ir)-gr*jr,jr=_r[1]+hr*jr+gr*tn;return Ir=hr*(tn=Ir)-gr*jr,jr=hr*jr+gr*tn,[Ir,jr]}return rt.invert=function(lt,wt){var bt=20,kt=lt,hr=wt;do{for(var gr=Ze,ur=Ne[gr],_r=ur[0],Ir=ur[1],jr=0,tn=0,wn;--gr>=0;)ur=Ne[gr],jr=_r+kt*(wn=jr)-hr*tn,tn=Ir+kt*tn+hr*wn,_r=ur[0]+kt*(wn=_r)-hr*Ir,Ir=ur[1]+kt*Ir+hr*wn;jr=_r+kt*(wn=jr)-hr*tn,tn=Ir+kt*tn+hr*wn,_r=kt*(wn=_r)-hr*Ir-lt,Ir=kt*Ir+hr*wn-wt;var In=jr*jr+tn*tn,jn,ba;kt-=jn=(_r*jr+Ir*tn)/In,hr-=ba=(Ir*jr-_r*tn)/In}while(T(jn)+T(ba)>l*l&&--bt>0);if(bt){var Ta=D(kt*kt+hr*hr),qa=2*e(Ta*.5),ja=f(qa);return[a(kt*ja,Ta*i(qa)),Ta?F(hr*ja/Ta):0]}},rt}var Zs=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],Fo=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],dc=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],js=[[.9245,0],[0,0],[.01943,0]],Is=[[.721316,0],[0,0],[-.00881625,-.00617325]];function tu(){return Fs(Zs,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)}function gc(){return Fs(Fo,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])}function yc(){return Fs(dc,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])}function il(){return Fs(js,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)}function ru(){return Fs(Is,[165,10]).scale(250).clipAngle(130).center([-165,-10])}function Fs(Ne,Ze){var rt=c.geoProjection(Gu(Ne)).rotate(Ze).clipAngle(90),lt=c.geoRotation(Ze),wt=rt.center;return delete rt.rotate,rt.center=function(bt){return arguments.length?wt(lt(bt)):lt.invert(wt())},rt}var Tu=D(6),Tl=D(7);function Au(Ne,Ze){var rt=F(7*f(Ze)/(3*Tu));return[Tu*Ne*(2*i(2*rt/3)-1)/Tl,9*f(rt/3)/Tl]}Au.invert=function(Ne,Ze){var rt=3*F(Ze*Tl/9);return[Ne*Tl/(Tu*(2*i(2*rt/3)-1)),F(f(rt)*3*Tu/7)]};function Yu(){return c.geoProjection(Au).scale(164.859)}function nu(Ne,Ze){for(var rt=(1+p)*f(Ze),lt=Ze,wt=0,bt;wt<25&&(lt-=bt=(f(lt/2)+f(lt)-rt)/(.5*i(lt/2)+i(lt)),!(T(bt)<l));wt++);return[Ne*(1+2*i(lt)/i(lt/2))/(3*w),2*D(3)*f(lt/2)/D(2+w)]}nu.invert=function(Ne,Ze){var rt=Ze*D(2+w)/(2*D(3)),lt=2*F(rt);return[3*w*Ne/(1+2*i(lt)/i(lt/2)),F((rt+f(lt))/(1+p))]};function mc(){return c.geoProjection(nu).scale(188.209)}function ol(Ne,Ze){for(var rt=D(6/(4+u)),lt=(1+u/4)*f(Ze),wt=Ze/2,bt=0,kt;bt<25&&(wt-=kt=(wt/2+f(wt)-lt)/(.5+i(wt)),!(T(kt)<l));bt++);return[rt*(.5+i(wt))*Ne/1.5,rt*wt]}ol.invert=function(Ne,Ze){var rt=D(6/(4+u)),lt=Ze/rt;return T(T(lt)-M)<l&&(lt=lt<0?-M:M),[1.5*Ne/(rt*(.5+i(lt))),F((lt/2+f(lt))/(1+u/4))]};function Mu(){return c.geoProjection(ol).scale(166.518)}function au(Ne,Ze){var rt=Ze*Ze,lt=rt*rt,wt=rt*lt;return[Ne*(.84719-.13063*rt+wt*wt*(-.04515+.05494*rt-.02326*lt+.00331*wt)),Ze*(1.01183+lt*lt*(-.02625+.01926*rt-.00396*lt))]}au.invert=function(Ne,Ze){var rt=Ze,lt=25,wt,bt,kt,hr;do bt=rt*rt,kt=bt*bt,rt-=wt=(rt*(1.01183+kt*kt*(-.02625+.01926*bt-.00396*kt))-Ze)/(1.01183+kt*kt*(9*-.02625+11*.01926*bt+13*-.00396*kt));while(T(wt)>x&&--lt>0);return bt=rt*rt,kt=bt*bt,hr=bt*kt,[Ne/(.84719-.13063*bt+hr*hr*(-.04515+.05494*bt-.02326*kt+.00331*hr)),rt]};function Ss(){return c.geoProjection(au).scale(175.295)}function Nl(Ne,Ze){return[Ne*(1+i(Ze))/2,2*(Ze-y(Ze/2))]}Nl.invert=function(Ne,Ze){for(var rt=Ze/2,lt=0,wt=1/0;lt<10&&T(wt)>l;++lt){var bt=i(Ze/2);Ze-=wt=(Ze-y(Ze/2)-rt)/(1-.5/(bt*bt))}return[2*Ne/(1+i(Ze)),Ze]};function Su(){return c.geoProjection(Nl).scale(152.63)}var Wu=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Xu(){return sa(oe(1/0),Wu).rotate([20,0]).scale(152.63)}function iu(Ne,Ze){var rt=f(Ze),lt=i(Ze),wt=d(Ne);if(Ne===0||T(Ze)===M)return[0,Ze];if(Ze===0)return[Ne,0];if(T(Ne)===M)return[Ne*lt,M*rt];var bt=u/(2*Ne)-2*Ne/u,kt=2*Ze/u,hr=(1-kt*kt)/(rt-kt),gr=bt*bt,ur=hr*hr,_r=1+gr/ur,Ir=1+ur/gr,jr=(bt*rt/hr-bt/2)/_r,tn=(ur*rt/gr+hr/2)/Ir,wn=jr*jr+lt*lt/_r,In=tn*tn-(ur*rt*rt/gr+hr*rt-1)/Ir;return[M*(jr+D(wn)*wt),M*(tn+D(In<0?0:In)*d(-Ze*bt)*wt)]}iu.invert=function(Ne,Ze){Ne/=M,Ze/=M;var rt=Ne*Ne,lt=Ze*Ze,wt=rt+lt,bt=u*u;return[Ne?(wt-1+D((1-wt)*(1-wt)+4*rt))/(2*Ne)*M:0,_e(function(kt){return wt*(u*f(kt)-2*kt)*u+4*kt*kt*(Ze-f(kt))+2*u*kt-bt*Ze},0)]};function xc(){return c.geoProjection(iu).scale(127.267)}var Zu=1.0148,ss=.23185,Al=-.14499,Ml=.02406,Eu=Zu,Es=5*ss,zo=7*Al,ou=9*Ml,zs=1.790857183;function Ns(Ne,Ze){var rt=Ze*Ze;return[Ne,Ze*(Zu+rt*rt*(ss+rt*(Al+Ml*rt)))]}Ns.invert=function(Ne,Ze){Ze>zs?Ze=zs:Ze<-zs&&(Ze=-zs);var rt=Ze,lt;do{var wt=rt*rt;rt-=lt=(rt*(Zu+wt*wt*(ss+wt*(Al+Ml*wt)))-Ze)/(Eu+wt*wt*(Es+wt*(zo+ou*wt)))}while(T(lt)>l);return[Ne,rt]};function yo(){return c.geoProjection(Ns).scale(139.319)}function Ol(Ne,Ze){if(T(Ze)<l)return[Ne,0];var rt=y(Ze),lt=Ne*f(Ze);return[f(lt)/rt,Ze+(1-i(lt))/rt]}Ol.invert=function(Ne,Ze){if(T(Ze)<l)return[Ne,0];var rt=Ne*Ne+Ze*Ze,lt=Ze*.5,wt=10,bt;do{var kt=y(lt),hr=1/i(lt),gr=rt-2*Ze*lt+lt*lt;lt-=bt=(kt*gr+2*(lt-Ze))/(2+gr*hr*hr+2*(lt-Ze)*kt)}while(T(bt)>l&&--wt>0);return kt=y(lt),[(T(Ze)<T(lt+1/kt)?F(Ne*kt):d(Ze)*d(Ne)*(I(T(Ne*kt))+M))/f(lt),lt]};function Bl(){return c.geoProjection(Ol).scale(103.74)}function sl(Ne,Ze){var rt=Sl(Ne[1],Ne[0]),lt=Sl(Ze[1],Ze[0]),wt=Vl(rt,lt),bt=su(rt)/su(lt);return Ul([1,0,Ne[0][0],0,1,Ne[0][1]],Ul([bt,0,0,0,bt,0],Ul([i(wt),f(wt),0,-f(wt),i(wt),0],[1,0,-Ze[0][0],0,1,-Ze[0][1]])))}function Cs(Ne){var Ze=1/(Ne[0]*Ne[4]-Ne[1]*Ne[3]);return[Ze*Ne[4],-Ze*Ne[1],Ze*(Ne[1]*Ne[5]-Ne[2]*Ne[4]),-Ze*Ne[3],Ze*Ne[0],Ze*(Ne[2]*Ne[3]-Ne[0]*Ne[5])]}function Ul(Ne,Ze){return[Ne[0]*Ze[0]+Ne[1]*Ze[3],Ne[0]*Ze[1]+Ne[1]*Ze[4],Ne[0]*Ze[2]+Ne[1]*Ze[5]+Ne[2],Ne[3]*Ze[0]+Ne[4]*Ze[3],Ne[3]*Ze[1]+Ne[4]*Ze[4],Ne[3]*Ze[2]+Ne[4]*Ze[5]+Ne[5]]}function Sl(Ne,Ze){return[Ne[0]-Ze[0],Ne[1]-Ze[1]]}function su(Ne){return D(Ne[0]*Ne[0]+Ne[1]*Ne[1])}function Vl(Ne,Ze){return a(Ne[0]*Ze[1]-Ne[1]*Ze[0],Ne[0]*Ze[0]+Ne[1]*Ze[1])}function ll(Ne,Ze,rt){lt(Ne,{transform:null});function lt(ur,_r){if(ur.edges=Cu(ur.face),_r.face){var Ir=ur.shared=Vc(ur.face,_r.face),jr=sl(Ir.map(_r.project),Ir.map(ur.project));ur.transform=_r.transform?Ul(_r.transform,jr):jr;for(var tn=_r.edges,wn=0,In=tn.length;wn<In;++wn)ps(Ir[0],tn[wn][1])&&ps(Ir[1],tn[wn][0])&&(tn[wn]=ur),ps(Ir[0],tn[wn][0])&&ps(Ir[1],tn[wn][1])&&(tn[wn]=ur);for(tn=ur.edges,wn=0,In=tn.length;wn<In;++wn)ps(Ir[0],tn[wn][0])&&ps(Ir[1],tn[wn][1])&&(tn[wn]=_r),ps(Ir[0],tn[wn][1])&&ps(Ir[1],tn[wn][0])&&(tn[wn]=_r)}else ur.transform=_r.transform;return ur.children&&ur.children.forEach(function(jn){lt(jn,ur)}),ur}function wt(ur,_r){var Ir=Ze(ur,_r),jr=Ir.project([ur*S,_r*S]),tn;return(tn=Ir.transform)?[tn[0]*jr[0]+tn[1]*jr[1]+tn[2],-(tn[3]*jr[0]+tn[4]*jr[1]+tn[5])]:(jr[1]=-jr[1],jr)}El(Ne)&&(wt.invert=function(ur,_r){var Ir=bt(Ne,[ur,-_r]);return Ir&&(Ir[0]*=E,Ir[1]*=E,Ir)});function bt(ur,_r){var Ir=ur.project.invert,jr=ur.transform,tn=_r;if(jr&&(jr=Cs(jr),tn=[jr[0]*tn[0]+jr[1]*tn[1]+jr[2],jr[3]*tn[0]+jr[4]*tn[1]+jr[5]]),Ir&&ur===kt(wn=Ir(tn)))return wn;for(var wn,In=ur.children,jn=0,ba=In&&In.length;jn<ba;++jn)if(wn=bt(In[jn],_r))return wn}function kt(ur){return Ze(ur[0]*E,ur[1]*E)}var hr=c.geoProjection(wt),gr=hr.stream;return hr.stream=function(ur){var _r=hr.rotate(),Ir=gr(ur),jr=(hr.rotate([0,0]),gr(ur));return hr.rotate(_r),Ir.sphere=function(){jr.polygonStart(),jr.lineStart(),bc(jr,Ne),jr.lineEnd(),jr.polygonEnd()},Ir},hr.angle(rt==null?-30:rt*S)}function bc(Ne,Ze,rt){var lt,wt=Ze.edges,bt=wt.length,kt,hr={type:"MultiPoint",coordinates:Ze.face},gr=Ze.face.filter(function(In){return T(In[1])!==90}),ur=c.geoBounds({type:"MultiPoint",coordinates:gr}),_r=!1,Ir=-1,jr=ur[1][0]-ur[0][0],tn=jr===180||jr===360?[(ur[0][0]+ur[1][0])/2,(ur[0][1]+ur[1][1])/2]:c.geoCentroid(hr);if(rt)for(;++Ir<bt&&wt[Ir]!==rt;);++Ir;for(var wn=0;wn<bt;++wn)kt=wt[(wn+Ir)%bt],Array.isArray(kt)?(_r||(Ne.point((lt=c.geoInterpolate(kt[0],tn)(l))[0],lt[1]),_r=!0),Ne.point((lt=c.geoInterpolate(kt[1],tn)(l))[0],lt[1])):(_r=!1,kt!==rt&&bc(Ne,kt,Ze))}function ps(Ne,Ze){return Ne&&Ze&&Ne[0]===Ze[0]&&Ne[1]===Ze[1]}function Vc(Ne,Ze){for(var rt,lt,wt=Ne.length,bt=null,kt=0;kt<wt;++kt){rt=Ne[kt];for(var hr=Ze.length;--hr>=0;)if(lt=Ze[hr],rt[0]===lt[0]&&rt[1]===lt[1]){if(bt)return[bt,rt];bt=rt}}}function Cu(Ne){for(var Ze=Ne.length,rt=[],lt=Ne[Ze-1],wt=0;wt<Ze;++wt)rt.push([lt,lt=Ne[wt]]);return rt}function El(Ne){return Ne.project.invert||Ne.children&&Ne.children.some(El)}var Hl=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],ul=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(Ne){return Ne.map(function(Ze){return Hl[Ze]})});function Gl(Ne){Ne=Ne||function(rt){var lt=c.geoCentroid({type:"MultiPoint",coordinates:rt});return c.geoGnomonic().scale(1).translate([0,0]).rotate([-lt[0],-lt[1]])};var Ze=ul.map(function(rt){return{face:rt,project:Ne(rt)}});return[-1,0,0,1,0,1,4,5].forEach(function(rt,lt){var wt=Ze[rt];wt&&(wt.children||(wt.children=[])).push(Ze[lt])}),ll(Ze[0],function(rt,lt){return Ze[rt<-u/2?lt<0?6:4:rt<0?lt<0?2:0:rt<u/2?lt<0?3:1:lt<0?7:5]}).angle(-30).scale(101.858).center([0,45])}var ju=2/D(3);function Ku(Ne,Ze){var rt=He(Ne,Ze);return[rt[0]*ju,rt[1]]}Ku.invert=function(Ne,Ze){return He.invert(Ne/ju,Ze)};function Hc(Ne){Ne=Ne||function(rt){var lt=c.geoCentroid({type:"MultiPoint",coordinates:rt});return c.geoProjection(Ku).translate([0,0]).scale(1).rotate(lt[1]>0?[-lt[0],0]:[180-lt[0],180])};var Ze=ul.map(function(rt){return{face:rt,project:Ne(rt)}});return[-1,0,0,1,0,1,4,5].forEach(function(rt,lt){var wt=Ze[rt];wt&&(wt.children||(wt.children=[])).push(Ze[lt])}),ll(Ze[0],function(rt,lt){return Ze[rt<-u/2?lt<0?6:4:rt<0?lt<0?2:0:rt<u/2?lt<0?3:1:lt<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])}function Vi(Ne){Ne=Ne||function(kt){var hr=kt.length===6?c.geoCentroid({type:"MultiPoint",coordinates:kt}):kt[0];return c.geoGnomonic().scale(1).translate([0,0]).rotate([-hr[0],-hr[1]])};var Ze=ul.map(function(kt){for(var hr=kt.map(ds),gr=hr.length,ur=hr[gr-1],_r,Ir=[],jr=0;jr<gr;++jr)_r=hr[jr],Ir.push(ls([ur[0]*.9486832980505138+_r[0]*.31622776601683794,ur[1]*.9486832980505138+_r[1]*.31622776601683794,ur[2]*.9486832980505138+_r[2]*.31622776601683794]),ls([_r[0]*.9486832980505138+ur[0]*.31622776601683794,_r[1]*.9486832980505138+ur[1]*.31622776601683794,_r[2]*.9486832980505138+ur[2]*.31622776601683794])),ur=_r;return Ir}),rt=[],lt=[-1,0,0,1,0,1,4,5];Ze.forEach(function(kt,hr){for(var gr=ul[hr],ur=gr.length,_r=rt[hr]=[],Ir=0;Ir<ur;++Ir)Ze.push([gr[Ir],kt[(Ir*2+2)%(2*ur)],kt[(Ir*2+1)%(2*ur)]]),lt.push(hr),_r.push(cl(ds(kt[(Ir*2+2)%(2*ur)]),ds(kt[(Ir*2+1)%(2*ur)])))});var wt=Ze.map(function(kt){return{project:Ne(kt),face:kt}});lt.forEach(function(kt,hr){var gr=wt[kt];gr&&(gr.children||(gr.children=[])).push(wt[hr])});function bt(kt,hr){var gr=i(hr),ur=[gr*i(kt),gr*f(kt),f(hr)],_r=kt<-u/2?hr<0?6:4:kt<0?hr<0?2:0:kt<u/2?hr<0?3:1:hr<0?7:5,Ir=rt[_r];return wt[Cl(Ir[0],ur)<0?8+3*_r:Cl(Ir[1],ur)<0?8+3*_r+1:Cl(Ir[2],ur)<0?8+3*_r+2:_r]}return ll(wt[0],bt).angle(-30).scale(110.625).center([0,45])}function Cl(Ne,Ze){for(var rt=0,lt=Ne.length,wt=0;rt<lt;++rt)wt+=Ne[rt]*Ze[rt];return wt}function cl(Ne,Ze){return[Ne[1]*Ze[2]-Ne[2]*Ze[1],Ne[2]*Ze[0]-Ne[0]*Ze[2],Ne[0]*Ze[1]-Ne[1]*Ze[0]]}function ls(Ne){return[a(Ne[1],Ne[0])*S,F(s(-1,o(1,Ne[2])))*S]}function ds(Ne){var Ze=Ne[0]*E,rt=Ne[1]*E,lt=i(rt);return[lt*i(Ze),lt*f(Ze),f(rt)]}function Yl(){}function mo(Ne){if((rt=Ne.length)<4)return!1;for(var Ze=0,rt,lt=Ne[rt-1][1]*Ne[0][0]-Ne[rt-1][0]*Ne[0][1];++Ze<rt;)lt+=Ne[Ze-1][1]*Ne[Ze][0]-Ne[Ze-1][0]*Ne[Ze][1];return lt<=0}function Ju(Ne,Ze){for(var rt=Ze[0],lt=Ze[1],wt=!1,bt=0,kt=Ne.length,hr=kt-1;bt<kt;hr=bt++){var gr=Ne[bt],ur=gr[0],_r=gr[1],Ir=Ne[hr],jr=Ir[0],tn=Ir[1];_r>lt^tn>lt&&rt<(jr-ur)*(lt-_r)/(tn-_r)+ur&&(wt=!wt)}return wt}function gs(Ne,Ze){var rt=Ze.stream,lt;if(!rt)throw new Error("invalid projection");switch(Ne&&Ne.type){case"Feature":lt=Js;break;case"FeatureCollection":lt=Ks;break;default:lt=ys;break}return lt(Ne,rt)}function Ks(Ne,Ze){return{type:"FeatureCollection",features:Ne.features.map(function(rt){return Js(rt,Ze)})}}function Js(Ne,Ze){return{type:"Feature",id:Ne.id,properties:Ne.properties,geometry:ys(Ne.geometry,Ze)}}function Os(Ne,Ze){return{type:"GeometryCollection",geometries:Ne.geometries.map(function(rt){return ys(rt,Ze)})}}function ys(Ne,Ze){if(!Ne)return null;if(Ne.type==="GeometryCollection")return Os(Ne,Ze);var rt;switch(Ne.type){case"Point":rt=ms;break;case"MultiPoint":rt=ms;break;case"LineString":rt=Qu;break;case"MultiLineString":rt=Qu;break;case"Polygon":rt=lu;break;case"MultiPolygon":rt=lu;break;case"Sphere":rt=lu;break;default:return null}return c.geoStream(Ne,Ze(rt)),rt.result()}var Ki=[],No=[],ms={point:function(Ne,Ze){Ki.push([Ne,Ze])},result:function(){var Ne=Ki.length?Ki.length<2?{type:"Point",coordinates:Ki[0]}:{type:"MultiPoint",coordinates:Ki}:null;return Ki=[],Ne}},Qu={lineStart:Yl,point:function(Ne,Ze){Ki.push([Ne,Ze])},lineEnd:function(){Ki.length&&(No.push(Ki),Ki=[])},result:function(){var Ne=No.length?No.length<2?{type:"LineString",coordinates:No[0]}:{type:"MultiLineString",coordinates:No}:null;return No=[],Ne}},lu={polygonStart:Yl,lineStart:Yl,point:function(Ne,Ze){Ki.push([Ne,Ze])},lineEnd:function(){var Ne=Ki.length;if(Ne){do Ki.push(Ki[0].slice());while(++Ne<4);No.push(Ki),Ki=[]}},polygonEnd:Yl,result:function(){if(!No.length)return null;var Ne=[],Ze=[];return No.forEach(function(rt){mo(rt)?Ne.push([rt]):Ze.push(rt)}),Ze.forEach(function(rt){var lt=rt[0];Ne.some(function(wt){if(Ju(wt[0],lt))return wt.push(rt),!0})||Ne.push([rt])}),No=[],Ne.length?Ne.length>1?{type:"MultiPolygon",coordinates:Ne}:{type:"Polygon",coordinates:Ne[0]}:null}};function $u(Ne){var Ze=Ne(M,0)[0]-Ne(-M,0)[0];function rt(lt,wt){var bt=T(lt)<M,kt=Ne(bt?lt:lt>0?lt-u:lt+u,wt),hr=(kt[0]-kt[1])*p,gr=(kt[0]+kt[1])*p;if(bt)return[hr,gr];var ur=Ze*p,_r=hr>0^gr>0?-1:1;return[_r*hr-d(gr)*ur,_r*gr-d(hr)*ur]}return Ne.invert&&(rt.invert=function(lt,wt){var bt=(lt+wt)*p,kt=(wt-lt)*p,hr=T(bt)<.5*Ze&&T(kt)<.5*Ze;if(!hr){var gr=Ze*p,ur=bt>0^kt>0?-1:1,_r=-ur*lt+(kt>0?1:-1)*gr,Ir=-ur*wt+(bt>0?1:-1)*gr;bt=(-_r-Ir)*p,kt=(_r-Ir)*p}var jr=Ne.invert(bt,kt);return hr||(jr[0]+=bt>0?u:-u),jr}),c.geoProjection(rt).rotate([-90,-90,45]).clipAngle(180-.001)}function xt(){return $u(Tr).scale(176.423)}function Bt(){return $u(ya).scale(111.48)}function vr(Ne,Ze){if(!(0<=(Ze=+Ze)&&Ze<=20))throw new Error("invalid digits");function rt(ur){var _r=ur.length,Ir=2,jr=new Array(_r);for(jr[0]=+ur[0].toFixed(Ze),jr[1]=+ur[1].toFixed(Ze);Ir<_r;)jr[Ir]=ur[Ir],++Ir;return jr}function lt(ur){return ur.map(rt)}function wt(ur){for(var _r=rt(ur[0]),Ir=[_r],jr=1;jr<ur.length;jr++){var tn=rt(ur[jr]);(tn.length>2||tn[0]!=_r[0]||tn[1]!=_r[1])&&(Ir.push(tn),_r=tn)}return Ir.length===1&&ur.length>1&&Ir.push(rt(ur[ur.length-1])),Ir}function bt(ur){return ur.map(wt)}function kt(ur){if(ur==null)return ur;var _r;switch(ur.type){case"GeometryCollection":_r={type:"GeometryCollection",geometries:ur.geometries.map(kt)};break;case"Point":_r={type:"Point",coordinates:rt(ur.coordinates)};break;case"MultiPoint":_r={type:ur.type,coordinates:lt(ur.coordinates)};break;case"LineString":_r={type:ur.type,coordinates:wt(ur.coordinates)};break;case"MultiLineString":case"Polygon":_r={type:ur.type,coordinates:bt(ur.coordinates)};break;case"MultiPolygon":_r={type:"MultiPolygon",coordinates:ur.coordinates.map(bt)};break;default:return ur}return ur.bbox!=null&&(_r.bbox=ur.bbox),_r}function hr(ur){var _r={type:"Feature",properties:ur.properties,geometry:kt(ur.geometry)};return ur.id!=null&&(_r.id=ur.id),ur.bbox!=null&&(_r.bbox=ur.bbox),_r}if(Ne!=null)switch(Ne.type){case"Feature":return hr(Ne);case"FeatureCollection":{var gr={type:"FeatureCollection",features:Ne.features.map(hr)};return Ne.bbox!=null&&(gr.bbox=Ne.bbox),gr}default:return kt(Ne)}return Ne}function lr(Ne){var Ze=f(Ne);function rt(lt,wt){var bt=Ze?y(lt*Ze/2)/Ze:lt/2;if(!wt)return[2*bt,-Ne];var kt=2*e(bt*f(wt)),hr=1/y(wt);return[f(kt)*hr,wt+(1-i(kt))*hr-Ne]}return rt.invert=function(lt,wt){if(T(wt+=Ne)<l)return[Ze?2*e(Ze*lt/2)/Ze:lt,0];var bt=lt*lt+wt*wt,kt=0,hr=10,gr;do{var ur=y(kt),_r=1/i(kt),Ir=bt-2*wt*kt+kt*kt;kt-=gr=(ur*Ir+2*(kt-wt))/(2+Ir*_r*_r+2*(kt-wt)*ur)}while(T(gr)>l&&--hr>0);var jr=lt*(ur=y(kt)),tn=y(T(wt)<T(kt+1/ur)?F(jr)*.5:I(jr)*.5+u/4)/f(kt);return[Ze?2*e(Ze*tn)/Ze:2*tn,kt]},rt}function Fr(){return Ye(lr).scale(131.215)}var nn=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];nn.forEach(function(Ne){Ne[1]*=1.0144});function yn(Ne,Ze){var rt=o(18,T(Ze)*36/u),lt=r(rt),wt=rt-lt,bt=(Ir=nn[lt])[0],kt=Ir[1],hr=(Ir=nn[++lt])[0],gr=Ir[1],ur=(Ir=nn[o(19,++lt)])[0],_r=Ir[1],Ir;return[Ne*(hr+wt*(ur-bt)/2+wt*wt*(ur-2*hr+bt)/2),(Ze>0?M:-M)*(gr+wt*(_r-kt)/2+wt*wt*(_r-2*gr+kt)/2)]}yn.invert=function(Ne,Ze){var rt=Ze/M,lt=rt*90,wt=o(18,T(lt/5)),bt=s(0,r(wt));do{var kt=nn[bt][1],hr=nn[bt+1][1],gr=nn[o(19,bt+2)][1],ur=gr-kt,_r=gr-2*hr+kt,Ir=2*(T(rt)-hr)/ur,jr=_r/ur,tn=Ir*(1-jr*Ir*(1-2*jr*Ir));if(tn>=0||bt===1){lt=(Ze>=0?5:-5)*(tn+wt);var wn=50,In;do wt=o(18,T(lt)/5),bt=r(wt),tn=wt-bt,kt=nn[bt][1],hr=nn[bt+1][1],gr=nn[o(19,bt+2)][1],lt-=(In=(Ze>=0?M:-M)*(hr+tn*(gr-kt)/2+tn*tn*(gr-2*hr+kt)/2)-Ze)*S;while(T(In)>x&&--wn>0);break}}while(--bt>=0);var jn=nn[bt][0],ba=nn[bt+1][0],Ta=nn[o(19,bt+2)][0];return[Ne/(ba+tn*(Ta-jn)/2+tn*tn*(Ta-2*ba+jn)/2),lt*E]};function En(){return c.geoProjection(yn).scale(152.63)}function Dn(Ne){function Ze(rt,lt){var wt=i(lt),bt=(Ne-1)/(Ne-wt*i(rt));return[bt*wt*f(rt),bt*f(lt)]}return Ze.invert=function(rt,lt){var wt=rt*rt+lt*lt,bt=D(wt),kt=(Ne-D(1-wt*(Ne+1)/(Ne-1)))/((Ne-1)/bt+bt/(Ne-1));return[a(rt*kt,bt*D(1-kt*kt)),bt?F(lt*kt/bt):0]},Ze}function Hn(Ne,Ze){var rt=Dn(Ne);if(!Ze)return rt;var lt=i(Ze),wt=f(Ze);function bt(kt,hr){var gr=rt(kt,hr),ur=gr[1],_r=ur*wt/(Ne-1)+lt;return[gr[0]*lt/_r,ur/_r]}return bt.invert=function(kt,hr){var gr=(Ne-1)/(Ne-1-hr*wt);return rt.invert(gr*kt,gr*hr*lt)},bt}function xn(){var Ne=2,Ze=0,rt=c.geoProjectionMutator(Hn),lt=rt(Ne,Ze);return lt.distance=function(wt){return arguments.length?rt(Ne=+wt,Ze):Ne},lt.tilt=function(wt){return arguments.length?rt(Ne,Ze=wt*E):Ze*S},lt.scale(432.147).clipAngle(I(1/Ne)*S-1e-6)}var Nn=1e-4,Rn=1e4,Yn=-180,ta=Yn+Nn,Ba=180,Da=Ba-Nn,Ua=-90,Va=Ua+Nn,qn=90,da=qn-Nn;function Za(Ne){return Ne.length>0}function ti(Ne){return Math.floor(Ne*Rn)/Rn}function _i(Ne){return Ne===Ua||Ne===qn?[0,Ne]:[Yn,ti(Ne)]}function wi(Ne){var Ze=Ne[0],rt=Ne[1],lt=!1;return Ze<=ta?(Ze=Yn,lt=!0):Ze>=Da&&(Ze=Ba,lt=!0),rt<=Va?(rt=Ua,lt=!0):rt>=da&&(rt=qn,lt=!0),lt?[Ze,rt]:Ne}function Ai(Ne){return Ne.map(wi)}function Li(Ne,Ze,rt){for(var lt=0,wt=Ne.length;lt<wt;++lt){var bt=Ne[lt].slice();rt.push({index:-1,polygon:Ze,ring:bt});for(var kt=0,hr=bt.length;kt<hr;++kt){var gr=bt[kt],ur=gr[0],_r=gr[1];if(ur<=ta||ur>=Da||_r<=Va||_r>=da){bt[kt]=wi(gr);for(var Ir=kt+1;Ir<hr;++Ir){var jr=bt[Ir],tn=jr[0],wn=jr[1];if(tn>ta&&tn<Da&&wn>Va&&wn<da)break}if(Ir===kt+1)continue;if(kt){var In={index:-1,polygon:Ze,ring:bt.slice(0,kt+1)};In.ring[In.ring.length-1]=_i(_r),rt[rt.length-1]=In}else rt.pop();if(Ir>=hr)break;rt.push({index:-1,polygon:Ze,ring:bt=bt.slice(Ir-1)}),bt[0]=_i(bt[0][1]),kt=-1,hr=bt.length}}}}function ci(Ne){var Ze,rt=Ne.length,lt={},wt={},bt,kt,hr,gr,ur;for(Ze=0;Ze<rt;++Ze){if(bt=Ne[Ze],kt=bt.ring[0],gr=bt.ring[bt.ring.length-1],kt[0]===gr[0]&&kt[1]===gr[1]){bt.polygon.push(bt.ring),Ne[Ze]=null;continue}bt.index=Ze,lt[kt]=wt[gr]=bt}for(Ze=0;Ze<rt;++Ze)if(bt=Ne[Ze],bt){if(kt=bt.ring[0],gr=bt.ring[bt.ring.length-1],hr=wt[kt],ur=lt[gr],delete lt[kt],delete wt[gr],kt[0]===gr[0]&&kt[1]===gr[1]){bt.polygon.push(bt.ring);continue}hr?(delete wt[kt],delete lt[hr.ring[0]],hr.ring.pop(),Ne[hr.index]=null,bt={index:-1,polygon:hr.polygon,ring:hr.ring.concat(bt.ring)},hr===ur?bt.polygon.push(bt.ring):(bt.index=rt++,Ne.push(lt[bt.ring[0]]=wt[bt.ring[bt.ring.length-1]]=bt))):ur?(delete lt[gr],delete wt[ur.ring[ur.ring.length-1]],bt.ring.pop(),bt={index:rt++,polygon:ur.polygon,ring:bt.ring.concat(ur.ring)},Ne[ur.index]=null,Ne.push(lt[bt.ring[0]]=wt[bt.ring[bt.ring.length-1]]=bt)):(bt.ring.push(bt.ring[0]),bt.polygon.push(bt.ring))}}function Eo(Ne){var Ze={type:"Feature",geometry:uo(Ne.geometry)};return Ne.id!=null&&(Ze.id=Ne.id),Ne.bbox!=null&&(Ze.bbox=Ne.bbox),Ne.properties!=null&&(Ze.properties=Ne.properties),Ze}function uo(Ne){if(Ne==null)return Ne;var Ze,rt,lt,wt;switch(Ne.type){case"GeometryCollection":Ze={type:"GeometryCollection",geometries:Ne.geometries.map(uo)};break;case"Point":Ze={type:"Point",coordinates:wi(Ne.coordinates)};break;case"MultiPoint":case"LineString":Ze={type:Ne.type,coordinates:Ai(Ne.coordinates)};break;case"MultiLineString":Ze={type:"MultiLineString",coordinates:Ne.coordinates.map(Ai)};break;case"Polygon":{var bt=[];Li(Ne.coordinates,bt,rt=[]),ci(rt),Ze={type:"Polygon",coordinates:bt};break}case"MultiPolygon":{rt=[],lt=-1,wt=Ne.coordinates.length;for(var kt=new Array(wt);++lt<wt;)Li(Ne.coordinates[lt],kt[lt]=[],rt);ci(rt),Ze={type:"MultiPolygon",coordinates:kt.filter(Za)};break}default:return Ne}return Ne.bbox!=null&&(Ze.bbox=Ne.bbox),Ze}function ei(Ne){if(Ne==null)return Ne;switch(Ne.type){case"Feature":return Eo(Ne);case"FeatureCollection":{var Ze={type:"FeatureCollection",features:Ne.features.map(Eo)};return Ne.bbox!=null&&(Ze.bbox=Ne.bbox),Ze}default:return uo(Ne)}}function ga(Ne,Ze){var rt=y(Ze/2),lt=f(_*rt);return[Ne*(.74482-.34588*lt*lt),1.70711*rt]}ga.invert=function(Ne,Ze){var rt=Ze/1.70711,lt=f(_*rt);return[Ne/(.74482-.34588*lt*lt),2*e(rt)]};function Mi(){return c.geoProjection(ga).scale(146.153)}function xo(Ne,Ze,rt){var lt=c.geoInterpolate(Ze,rt),wt=lt(.5),bt=c.geoRotation([-wt[0],-wt[1]])(Ze),kt=lt.distance/2,hr=-F(f(bt[1]*E)/f(kt)),gr=[-wt[0],-wt[1],-(bt[0]>0?u-hr:hr)*S],ur=c.geoProjection(Ne(kt)).rotate(gr),_r=c.geoRotation(gr),Ir=ur.center;return delete ur.rotate,ur.center=function(jr){return arguments.length?Ir(_r(jr)):_r.invert(Ir())},ur.clipAngle(90)}function Ao(Ne){var Ze=i(Ne);function rt(lt,wt){var bt=c.geoGnomonicRaw(lt,wt);return bt[0]*=Ze,bt}return rt.invert=function(lt,wt){return c.geoGnomonicRaw.invert(lt/Ze,wt)},rt}function xs(){return Bs([-158,21.5],[-77,39]).clipAngle(60).scale(400)}function Bs(Ne,Ze){return xo(Ao,Ne,Ze)}function Xo(Ne){if(!(Ne*=2))return c.geoAzimuthalEquidistantRaw;var Ze=-Ne/2,rt=-Ze,lt=Ne*Ne,wt=y(rt),bt=.5/f(rt);function kt(hr,gr){var ur=I(i(gr)*i(hr-Ze)),_r=I(i(gr)*i(hr-rt)),Ir=gr<0?-1:1;return ur*=ur,_r*=_r,[(ur-_r)/(2*Ne),Ir*D(4*lt*_r-(lt-ur+_r)*(lt-ur+_r))/(2*Ne)]}return kt.invert=function(hr,gr){var ur=gr*gr,_r=i(D(ur+(jr=hr+Ze)*jr)),Ir=i(D(ur+(jr=hr+rt)*jr)),jr,tn;return[a(tn=_r-Ir,jr=(_r+Ir)*wt),(gr<0?-1:1)*I(D(jr*jr+tn*tn)*bt)]},kt}function fl(){return ks([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)}function ks(Ne,Ze){return xo(Xo,Ne,Ze)}function bs(Ne,Ze){if(T(Ze)<l)return[Ne,0];var rt=T(Ze/M),lt=F(rt);if(T(Ne)<l||T(T(Ze)-M)<l)return[0,d(Ze)*u*y(lt/2)];var wt=i(lt),bt=T(u/Ne-Ne/u)/2,kt=bt*bt,hr=wt/(rt+wt-1),gr=hr*(2/rt-1),ur=gr*gr,_r=ur+kt,Ir=hr-ur,jr=kt+hr;return[d(Ne)*u*(bt*Ir+D(kt*Ir*Ir-_r*(hr*hr-ur)))/_r,d(Ze)*u*(gr*jr-bt*D((kt+1)*_r-jr*jr))/_r]}bs.invert=function(Ne,Ze){if(T(Ze)<l)return[Ne,0];if(T(Ne)<l)return[0,M*f(2*e(Ze/u))];var rt=(Ne/=u)*Ne,lt=(Ze/=u)*Ze,wt=rt+lt,bt=wt*wt,kt=-T(Ze)*(1+wt),hr=kt-2*lt+rt,gr=-2*kt+1+2*lt+bt,ur=lt/gr+(2*hr*hr*hr/(gr*gr*gr)-9*kt*hr/(gr*gr))/27,_r=(kt-hr*hr/(3*gr))/gr,Ir=2*D(-_r/3),jr=I(3*ur/(_r*Ir))/3;return[u*(wt-1+D(1+2*(rt-lt)+bt))/(2*Ne),d(Ze)*u*(-Ir*i(jr+u/3)-hr/(3*gr))]};function Co(){return c.geoProjection(bs).scale(79.4183)}function uu(Ne,Ze){if(T(Ze)<l)return[Ne,0];var rt=T(Ze/M),lt=F(rt);if(T(Ne)<l||T(T(Ze)-M)<l)return[0,d(Ze)*u*y(lt/2)];var wt=i(lt),bt=T(u/Ne-Ne/u)/2,kt=bt*bt,hr=wt*(D(1+kt)-bt*wt)/(1+kt*rt*rt);return[d(Ne)*u*hr,d(Ze)*u*D(1-hr*(2*bt+hr))]}uu.invert=function(Ne,Ze){if(!Ne)return[0,M*f(2*e(Ze/u))];var rt=T(Ne/u),lt=(1-rt*rt-(Ze/=u)*Ze)/(2*rt),wt=lt*lt,bt=D(wt+1);return[d(Ne)*u*(bt-lt),d(Ze)*M*f(2*a(D((1-2*lt*rt)*(lt+bt)-rt),D(bt+lt+rt)))]};function ku(){return c.geoProjection(uu).scale(79.4183)}function _s(Ne,Ze){if(T(Ze)<l)return[Ne,0];var rt=Ze/M,lt=F(rt);if(T(Ne)<l||T(T(Ze)-M)<l)return[0,u*y(lt/2)];var wt=(u/Ne-Ne/u)/2,bt=rt/(1+i(lt));return[u*(d(Ne)*D(wt*wt+1-bt*bt)-wt),u*bt]}_s.invert=function(Ne,Ze){if(!Ze)return[Ne,0];var rt=Ze/u,lt=(u*u*(1-rt*rt)-Ne*Ne)/(2*u*Ne);return[Ne?u*(d(Ne)*D(lt*lt+1)-lt):0,M*f(2*e(rt))]};function qu(){return c.geoProjection(_s).scale(79.4183)}function cu(Ne,Ze){if(!Ze)return[Ne,0];var rt=T(Ze);if(!Ne||rt===M)return[0,Ze];var lt=rt/M,wt=lt*lt,bt=(8*lt-wt*(wt+2)-5)/(2*wt*(lt-1)),kt=bt*bt,hr=lt*bt,gr=wt+kt+2*hr,ur=lt+3*bt,_r=Ne/M,Ir=_r+1/_r,jr=d(T(Ne)-M)*D(Ir*Ir-4),tn=jr*jr,wn=gr*(wt+kt*tn-1)+(1-wt)*(wt*(ur*ur+4*kt)+12*hr*kt+4*kt*kt),In=(jr*(gr+kt-1)+2*D(wn))/(4*gr+tn);return[d(Ne)*M*In,d(Ze)*M*D(1+jr*T(In)-In*In)]}cu.invert=function(Ne,Ze){var rt;if(!Ne||!Ze)return[Ne,Ze];Ze/=u;var lt=d(Ne)*Ne/M,wt=(lt*lt-1+4*Ze*Ze)/T(lt),bt=wt*wt,kt=2*Ze,hr=50;do{var gr=kt*kt,ur=(8*kt-gr*(gr+2)-5)/(2*gr*(kt-1)),_r=(3*kt-gr*kt-10)/(2*gr*kt),Ir=ur*ur,jr=kt*ur,tn=kt+ur,wn=tn*tn,In=kt+3*ur,jn=wn*(gr+Ir*bt-1)+(1-gr)*(gr*(In*In+4*Ir)+Ir*(12*jr+4*Ir)),ba=-2*tn*(4*jr*Ir+(1-4*gr+3*gr*gr)*(1+_r)+Ir*(-6+14*gr-bt+(-8+8*gr-2*bt)*_r)+jr*(-8+12*gr+(-10+10*gr-bt)*_r)),Ta=D(jn),qa=wt*(wn+Ir-1)+2*Ta-lt*(4*wn+bt),ja=wt*(2*ur*_r+2*tn*(1+_r))+ba/Ta-8*tn*(wt*(-1+Ir+wn)+2*Ta)*(1+_r)/(bt+4*wn);kt-=rt=qa/ja}while(rt>l&&--hr>0);return[d(Ne)*(D(wt*wt+4)+wt)*u/4,M*kt]};function Ff(){return c.geoProjection(cu).scale(127.16)}function _c(Ne,Ze,rt,lt,wt){function bt(kt,hr){var gr=rt*f(lt*hr),ur=D(1-gr*gr),_r=D(2/(1+ur*i(kt*=wt)));return[Ne*ur*_r*f(kt),Ze*gr*_r]}return bt.invert=function(kt,hr){var gr=kt/Ne,ur=hr/Ze,_r=D(gr*gr+ur*ur),Ir=2*F(_r/2);return[a(kt*y(Ir),Ne*_r)/wt,_r&&F(hr*f(Ir)/(Ze*rt*_r))/lt]},bt}function ec(Ne,Ze,rt,lt){var wt=u/3;Ne=s(Ne,l),Ze=s(Ze,l),Ne=o(Ne,M),Ze=o(Ze,u-l),rt=s(rt,0),rt=o(rt,100-l),lt=s(lt,l);var bt=rt/100+1,kt=lt/100,hr=I(bt*i(wt))/wt,gr=f(Ne)/f(hr*M),ur=Ze/u,_r=D(kt*f(Ne/2)/f(Ze/2)),Ir=_r/D(ur*gr*hr),jr=1/(_r*D(ur*gr*hr));return _c(Ir,jr,gr,hr,ur)}function wc(){var Ne=65*E,Ze=60*E,rt=20,lt=200,wt=c.geoProjectionMutator(ec),bt=wt(Ne,Ze,rt,lt);return bt.poleline=function(kt){return arguments.length?wt(Ne=+kt*E,Ze,rt,lt):Ne*S},bt.parallels=function(kt){return arguments.length?wt(Ne,Ze=+kt*E,rt,lt):Ze*S},bt.inflation=function(kt){return arguments.length?wt(Ne,Ze,rt=+kt,lt):rt},bt.ratio=function(kt){return arguments.length?wt(Ne,Ze,rt,lt=+kt):lt},bt.scale(163.775)}function Us(){return wc().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)}var Gc=4*u+3*D(3),Tc=2*D(2*u*D(3)/Gc),Ac=be(Tc*D(3)/u,Tc,Gc/6);function Zo(){return c.geoProjection(Ac).scale(176.84)}function Mc(Ne,Ze){return[Ne*D(1-3*Ze*Ze/(u*u)),Ze]}Mc.invert=function(Ne,Ze){return[Ne/D(1-3*Ze*Ze/(u*u)),Ze]};function of(){return c.geoProjection(Mc).scale(152.63)}function Ls(Ne,Ze){var rt=i(Ze),lt=i(Ne)*rt,wt=1-lt,bt=i(Ne=a(f(Ne)*rt,-f(Ze))),kt=f(Ne);return rt=D(1-lt*lt),[kt*rt-bt*wt,-bt*rt-kt*wt]}Ls.invert=function(Ne,Ze){var rt=(Ne*Ne+Ze*Ze)/-2,lt=D(-rt*(2+rt)),wt=Ze*rt+Ne*lt,bt=Ne*rt-Ze*lt,kt=D(bt*bt+wt*wt);return[a(lt*wt,kt*(1+rt)),kt?-F(lt*bt/kt):0]};function tc(){return c.geoProjection(Ls).rotate([0,-90,45]).scale(124.75).clipAngle(180-.001)}function rc(Ne,Ze){var rt=X(Ne,Ze);return[(rt[0]+Ne/M)/2,(rt[1]+Ze)/2]}rc.invert=function(Ne,Ze){var rt=Ne,lt=Ze,wt=25;do{var bt=i(lt),kt=f(lt),hr=f(2*lt),gr=kt*kt,ur=bt*bt,_r=f(rt),Ir=i(rt/2),jr=f(rt/2),tn=jr*jr,wn=1-ur*Ir*Ir,In=wn?I(bt*Ir)*D(jn=1/wn):jn=0,jn,ba=.5*(2*In*bt*jr+rt/M)-Ne,Ta=.5*(In*kt+lt)-Ze,qa=.5*jn*(ur*tn+In*bt*Ir*gr)+.5/M,ja=jn*(_r*hr/4-In*kt*jr),ai=.125*jn*(hr*jr-In*kt*ur*_r),gi=.5*jn*(gr*Ir+In*tn*bt)+.5,po=ja*ai-gi*qa,oi=(Ta*ja-ba*gi)/po,Ji=(ba*ai-Ta*qa)/po;rt-=oi,lt-=Ji}while((T(oi)>l||T(Ji)>l)&&--wt>0);return[rt,lt]};function Sc(){return c.geoProjection(rc).scale(158.837)}m.geoNaturalEarth=c.geoNaturalEarth1,m.geoNaturalEarthRaw=c.geoNaturalEarth1Raw,m.geoAiry=Z,m.geoAiryRaw=ee,m.geoAitoff=ne,m.geoAitoffRaw=X,m.geoArmadillo=Q,m.geoArmadilloRaw=ce,m.geoAugust=U,m.geoAugustRaw=K,m.geoBaker=j,m.geoBakerRaw=re,m.geoBerghaus=ie,m.geoBerghausRaw=$,m.geoBertin1953=xe,m.geoBertin1953Raw=ye,m.geoBoggs=je,m.geoBoggsRaw=Le,m.geoBonne=pt,m.geoBonneRaw=We,m.geoBottomley=Qt,m.geoBottomleyRaw=Ft,m.geoBromley=Et,m.geoBromleyRaw=zt,m.geoChamberlin=Se,m.geoChamberlinRaw=Xe,m.geoChamberlinAfrica=Ge,m.geoCollignon=Ke,m.geoCollignonRaw=He,m.geoCraig=Tt,m.geoCraigRaw=qe,m.geoCraster=Ht,m.geoCrasterRaw=At,m.geoCylindricalEqualArea=Vt,m.geoCylindricalEqualAreaRaw=It,m.geoCylindricalStereographic=Yt,m.geoCylindricalStereographicRaw=jt,m.geoEckert1=Gr,m.geoEckert1Raw=or,m.geoEckert2=Jr,m.geoEckert2Raw=on,m.geoEckert3=er,m.geoEckert3Raw=ot,m.geoEckert4=fr,m.geoEckert4Raw=Kt,m.geoEckert5=et,m.geoEckert5Raw=Ar,m.geoEckert6=st,m.geoEckert6Raw=$e,m.geoEisenlohr=Ut,m.geoEisenlohrRaw=Mt,m.geoFahey=it,m.geoFaheyRaw=Ee,m.geoFoucaut=vt,m.geoFoucautRaw=ut,m.geoFoucautSinusoidal=yt,m.geoFoucautSinusoidalRaw=St,m.geoGilbert=ar,m.geoGingery=Zr,m.geoGingeryRaw=kr,m.geoGinzburg4=Rr,m.geoGinzburg4Raw=xr,m.geoGinzburg5=Cr,m.geoGinzburg5Raw=Br,m.geoGinzburg6=Dt,m.geoGinzburg6Raw=nt,m.geoGinzburg8=sr,m.geoGinzburg8Raw=Zt,m.geoGinzburg9=Ur,m.geoGinzburg9Raw=zr,m.geoGringorten=vn,m.geoGringortenRaw=Tr,m.geoGuyou=Xa,m.geoGuyouRaw=ya,m.geoHammer=se,m.geoHammerRaw=oe,m.geoHammerRetroazimuthal=Mr,m.geoHammerRetroazimuthalRaw=$a,m.geoHealpix=Ya,m.geoHealpixRaw=Jn,m.geoHill=Gt,m.geoHillRaw=hi,m.geoHomolosine=_n,m.geoHomolosineRaw=Mn,m.geoHufnagel=mr,m.geoHufnagelRaw=fn,m.geoHyperelliptical=Bn,m.geoHyperellipticalRaw=mn,m.geoInterrupt=sa,m.geoInterruptedBoggs=wa,m.geoInterruptedHomolosine=Ca,m.geoInterruptedMollweide=Wo,m.geoInterruptedMollweideHemispheres=_l,m.geoInterruptedSinuMollweide=wu,m.geoInterruptedSinusoidal=nl,m.geoKavrayskiy7=ji,m.geoKavrayskiy7Raw=Xs,m.geoLagrange=zl,m.geoLagrangeRaw=Io,m.geoLarrivee=wl,m.geoLarriveeRaw=Ui,m.geoLaskowski=Yi,m.geoLaskowskiRaw=ao,m.geoLittrow=io,m.geoLittrowRaw=vo,m.geoLoximuthal=al,m.geoLoximuthalRaw=vs,m.geoMiller=os,m.geoMillerRaw=Hu,m.geoModifiedStereographic=Fs,m.geoModifiedStereographicRaw=Gu,m.geoModifiedStereographicAlaska=tu,m.geoModifiedStereographicGs48=gc,m.geoModifiedStereographicGs50=yc,m.geoModifiedStereographicMiller=il,m.geoModifiedStereographicLee=ru,m.geoMollweide=De,m.geoMollweideRaw=ke,m.geoMtFlatPolarParabolic=Yu,m.geoMtFlatPolarParabolicRaw=Au,m.geoMtFlatPolarQuartic=mc,m.geoMtFlatPolarQuarticRaw=nu,m.geoMtFlatPolarSinusoidal=Mu,m.geoMtFlatPolarSinusoidalRaw=ol,m.geoNaturalEarth2=Ss,m.geoNaturalEarth2Raw=au,m.geoNellHammer=Su,m.geoNellHammerRaw=Nl,m.geoInterruptedQuarticAuthalic=Xu,m.geoNicolosi=xc,m.geoNicolosiRaw=iu,m.geoPatterson=yo,m.geoPattersonRaw=Ns,m.geoPolyconic=Bl,m.geoPolyconicRaw=Ol,m.geoPolyhedral=ll,m.geoPolyhedralButterfly=Gl,m.geoPolyhedralCollignon=Hc,m.geoPolyhedralWaterman=Vi,m.geoProject=gs,m.geoGringortenQuincuncial=xt,m.geoPeirceQuincuncial=Bt,m.geoPierceQuincuncial=Bt,m.geoQuantize=vr,m.geoQuincuncial=$u,m.geoRectangularPolyconic=Fr,m.geoRectangularPolyconicRaw=lr,m.geoRobinson=En,m.geoRobinsonRaw=yn,m.geoSatellite=xn,m.geoSatelliteRaw=Hn,m.geoSinuMollweide=rn,m.geoSinuMollweideRaw=dn,m.geoSinusoidal=Ie,m.geoSinusoidalRaw=ze,m.geoStitch=ei,m.geoTimes=Mi,m.geoTimesRaw=ga,m.geoTwoPointAzimuthal=Bs,m.geoTwoPointAzimuthalRaw=Ao,m.geoTwoPointAzimuthalUsa=xs,m.geoTwoPointEquidistant=ks,m.geoTwoPointEquidistantRaw=Xo,m.geoTwoPointEquidistantUsa=fl,m.geoVanDerGrinten=Co,m.geoVanDerGrintenRaw=bs,m.geoVanDerGrinten2=ku,m.geoVanDerGrinten2Raw=uu,m.geoVanDerGrinten3=qu,m.geoVanDerGrinten3Raw=_s,m.geoVanDerGrinten4=Ff,m.geoVanDerGrinten4Raw=cu,m.geoWagner=wc,m.geoWagner7=Us,m.geoWagnerRaw=ec,m.geoWagner4=Zo,m.geoWagner4Raw=Ac,m.geoWagner6=of,m.geoWagner6Raw=Mc,m.geoWiechel=tc,m.geoWiechelRaw=Ls,m.geoWinkel3=Sc,m.geoWinkel3Raw=rc,Object.defineProperty(m,"__esModule",{value:!0})})},{"d3-array":107,"d3-geo":114}],114:[function(t,B,V){(function(m,c){typeof V=="object"&&typeof B<"u"?c(V,t("d3-array")):(m=m||self,c(m.d3=m.d3||{},m.d3))})(this,function(m,c){function A(){return new T}function T(){this.reset()}T.prototype={constructor:T,reset:function(){this.s=this.t=0},add:function(xt){a(e,xt,this.t),a(this,e.s,this.s),this.s?this.t+=e.t:this.s=e.t},valueOf:function(){return this.s}};var e=new T;function a(xt,Bt,vr){var lr=xt.s=Bt+vr,Fr=lr-Bt,nn=lr-Fr;xt.t=Bt-nn+(vr-Fr)}var i=1e-6,n=1e-12,r=Math.PI,v=r/2,s=r/4,o=r*2,b=180/r,g=r/180,d=Math.abs,f=Math.atan,y=Math.atan2,l=Math.cos,x=Math.ceil,u=Math.exp,M=Math.log,_=Math.pow,p=Math.sin,w=Math.sign||function(xt){return xt>0?1:xt<0?-1:0},h=Math.sqrt,L=Math.tan;function S(xt){return xt>1?0:xt<-1?r:Math.acos(xt)}function E(xt){return xt>1?v:xt<-1?-v:Math.asin(xt)}function P(xt){return(xt=p(xt/2))*xt}function F(){}function I(xt,Bt){xt&&R.hasOwnProperty(xt.type)&&R[xt.type](xt,Bt)}var D={Feature:function(xt,Bt){I(xt.geometry,Bt)},FeatureCollection:function(xt,Bt){for(var vr=xt.features,lr=-1,Fr=vr.length;++lr<Fr;)I(vr[lr].geometry,Bt)}},R={Sphere:function(xt,Bt){Bt.sphere()},Point:function(xt,Bt){xt=xt.coordinates,Bt.point(xt[0],xt[1],xt[2])},MultiPoint:function(xt,Bt){for(var vr=xt.coordinates,lr=-1,Fr=vr.length;++lr<Fr;)xt=vr[lr],Bt.point(xt[0],xt[1],xt[2])},LineString:function(xt,Bt){N(xt.coordinates,Bt,0)},MultiLineString:function(xt,Bt){for(var vr=xt.coordinates,lr=-1,Fr=vr.length;++lr<Fr;)N(vr[lr],Bt,0)},Polygon:function(xt,Bt){z(xt.coordinates,Bt)},MultiPolygon:function(xt,Bt){for(var vr=xt.coordinates,lr=-1,Fr=vr.length;++lr<Fr;)z(vr[lr],Bt)},GeometryCollection:function(xt,Bt){for(var vr=xt.geometries,lr=-1,Fr=vr.length;++lr<Fr;)I(vr[lr],Bt)}};function N(xt,Bt,vr){var lr=-1,Fr=xt.length-vr,nn;for(Bt.lineStart();++lr<Fr;)nn=xt[lr],Bt.point(nn[0],nn[1],nn[2]);Bt.lineEnd()}function z(xt,Bt){var vr=-1,lr=xt.length;for(Bt.polygonStart();++vr<lr;)N(xt[vr],Bt,1);Bt.polygonEnd()}function G(xt,Bt){xt&&D.hasOwnProperty(xt.type)?D[xt.type](xt,Bt):I(xt,Bt)}var Y=A(),ee=A(),Z,X,ne,ce,Q,K={point:F,lineStart:F,lineEnd:F,polygonStart:function(){Y.reset(),K.lineStart=U,K.lineEnd=H},polygonEnd:function(){var xt=+Y;ee.add(xt<0?o+xt:xt),this.lineStart=this.lineEnd=this.point=F},sphere:function(){ee.add(o)}};function U(){K.point=q}function H(){re(Z,X)}function q(xt,Bt){K.point=re,Z=xt,X=Bt,xt*=g,Bt*=g,ne=xt,ce=l(Bt=Bt/2+s),Q=p(Bt)}function re(xt,Bt){xt*=g,Bt*=g,Bt=Bt/2+s;var vr=xt-ne,lr=vr>=0?1:-1,Fr=lr*vr,nn=l(Bt),yn=p(Bt),En=Q*yn,Dn=ce*nn+En*l(Fr),Hn=En*lr*p(Fr);Y.add(y(Hn,Dn)),ne=xt,ce=nn,Q=yn}function j(xt){return ee.reset(),G(xt,K),ee*2}function $(xt){return[y(xt[1],xt[0]),E(xt[2])]}function ie(xt){var Bt=xt[0],vr=xt[1],lr=l(vr);return[lr*l(Bt),lr*p(Bt),p(vr)]}function oe(xt,Bt){return xt[0]*Bt[0]+xt[1]*Bt[1]+xt[2]*Bt[2]}function ae(xt,Bt){return[xt[1]*Bt[2]-xt[2]*Bt[1],xt[2]*Bt[0]-xt[0]*Bt[2],xt[0]*Bt[1]-xt[1]*Bt[0]]}function se(xt,Bt){xt[0]+=Bt[0],xt[1]+=Bt[1],xt[2]+=Bt[2]}function _e(xt,Bt){return[xt[0]*Bt,xt[1]*Bt,xt[2]*Bt]}function ue(xt){var Bt=h(xt[0]*xt[0]+xt[1]*xt[1]+xt[2]*xt[2]);xt[0]/=Bt,xt[1]/=Bt,xt[2]/=Bt}var ye,xe,me,be,ke,De,Ve,Ae,Le=A(),je,Ye,ze={point:Ie,lineStart:pt,lineEnd:Ft,polygonStart:function(){ze.point=Qt,ze.lineStart=zt,ze.lineEnd=Et,Le.reset(),K.polygonStart()},polygonEnd:function(){K.polygonEnd(),ze.point=Ie,ze.lineStart=pt,ze.lineEnd=Ft,Y<0?(ye=-(me=180),xe=-(be=90)):Le>i?be=90:Le<-i&&(xe=-90),Ye[0]=ye,Ye[1]=me},sphere:function(){ye=-(me=180),xe=-(be=90)}};function Ie(xt,Bt){je.push(Ye=[ye=xt,me=xt]),Bt<xe&&(xe=Bt),Bt>be&&(be=Bt)}function We(xt,Bt){var vr=ie([xt*g,Bt*g]);if(Ae){var lr=ae(Ae,vr),Fr=[lr[1],-lr[0],0],nn=ae(Fr,lr);ue(nn),nn=$(nn);var yn=xt-ke,En=yn>0?1:-1,Dn=nn[0]*b*En,Hn,xn=d(yn)>180;xn^(En*ke<Dn&&Dn<En*xt)?(Hn=nn[1]*b,Hn>be&&(be=Hn)):(Dn=(Dn+360)%360-180,xn^(En*ke<Dn&&Dn<En*xt)?(Hn=-nn[1]*b,Hn<xe&&(xe=Hn)):(Bt<xe&&(xe=Bt),Bt>be&&(be=Bt))),xn?xt<ke?Xt(ye,xt)>Xt(ye,me)&&(me=xt):Xt(xt,me)>Xt(ye,me)&&(ye=xt):me>=ye?(xt<ye&&(ye=xt),xt>me&&(me=xt)):xt>ke?Xt(ye,xt)>Xt(ye,me)&&(me=xt):Xt(xt,me)>Xt(ye,me)&&(ye=xt)}else je.push(Ye=[ye=xt,me=xt]);Bt<xe&&(xe=Bt),Bt>be&&(be=Bt),Ae=vr,ke=xt}function pt(){ze.point=We}function Ft(){Ye[0]=ye,Ye[1]=me,ze.point=Ie,Ae=null}function Qt(xt,Bt){if(Ae){var vr=xt-ke;Le.add(d(vr)>180?vr+(vr>0?360:-360):vr)}else De=xt,Ve=Bt;K.point(xt,Bt),We(xt,Bt)}function zt(){K.lineStart()}function Et(){Qt(De,Ve),K.lineEnd(),d(Le)>i&&(ye=-(me=180)),Ye[0]=ye,Ye[1]=me,Ae=null}function Xt(xt,Bt){return(Bt-=xt)<0?Bt+360:Bt}function Nt(xt,Bt){return xt[0]-Bt[0]}function Ct(xt,Bt){return xt[0]<=xt[1]?xt[0]<=Bt&&Bt<=xt[1]:Bt<xt[0]||xt[1]<Bt}function Xe(xt){var Bt,vr,lr,Fr,nn,yn,En;if(be=me=-(ye=xe=1/0),je=[],G(xt,ze),vr=je.length){for(je.sort(Nt),Bt=1,lr=je[0],nn=[lr];Bt<vr;++Bt)Fr=je[Bt],Ct(lr,Fr[0])||Ct(lr,Fr[1])?(Xt(lr[0],Fr[1])>Xt(lr[0],lr[1])&&(lr[1]=Fr[1]),Xt(Fr[0],lr[1])>Xt(lr[0],lr[1])&&(lr[0]=Fr[0])):nn.push(lr=Fr);for(yn=-1/0,vr=nn.length-1,Bt=0,lr=nn[vr];Bt<=vr;lr=Fr,++Bt)Fr=nn[Bt],(En=Xt(lr[1],Fr[0]))>yn&&(yn=En,ye=Fr[0],me=lr[1])}return je=Ye=null,ye===1/0||xe===1/0?[[NaN,NaN],[NaN,NaN]]:[[ye,xe],[me,be]]}var at,Ge,Se,He,Ke,qe,Tt,mt,At,Ht,It,Vt,jt,Yt,or,Gr,on={sphere:F,point:Jr,lineStart:er,lineEnd:Ar,polygonStart:function(){on.lineStart=et,on.lineEnd=$e},polygonEnd:function(){on.lineStart=er,on.lineEnd=Ar}};function Jr(xt,Bt){xt*=g,Bt*=g;var vr=l(Bt);ot(vr*l(xt),vr*p(xt),p(Bt))}function ot(xt,Bt,vr){++at,Se+=(xt-Se)/at,He+=(Bt-He)/at,Ke+=(vr-Ke)/at}function er(){on.point=Kt}function Kt(xt,Bt){xt*=g,Bt*=g;var vr=l(Bt);Yt=vr*l(xt),or=vr*p(xt),Gr=p(Bt),on.point=fr,ot(Yt,or,Gr)}function fr(xt,Bt){xt*=g,Bt*=g;var vr=l(Bt),lr=vr*l(xt),Fr=vr*p(xt),nn=p(Bt),yn=y(h((yn=or*nn-Gr*Fr)*yn+(yn=Gr*lr-Yt*nn)*yn+(yn=Yt*Fr-or*lr)*yn),Yt*lr+or*Fr+Gr*nn);Ge+=yn,qe+=yn*(Yt+(Yt=lr)),Tt+=yn*(or+(or=Fr)),mt+=yn*(Gr+(Gr=nn)),ot(Yt,or,Gr)}function Ar(){on.point=Jr}function et(){on.point=st}function $e(){ct(Vt,jt),on.point=Jr}function st(xt,Bt){Vt=xt,jt=Bt,xt*=g,Bt*=g,on.point=ct;var vr=l(Bt);Yt=vr*l(xt),or=vr*p(xt),Gr=p(Bt),ot(Yt,or,Gr)}function ct(xt,Bt){xt*=g,Bt*=g;var vr=l(Bt),lr=vr*l(xt),Fr=vr*p(xt),nn=p(Bt),yn=or*nn-Gr*Fr,En=Gr*lr-Yt*nn,Dn=Yt*Fr-or*lr,Hn=h(yn*yn+En*En+Dn*Dn),xn=E(Hn),Nn=Hn&&-xn/Hn;At+=Nn*yn,Ht+=Nn*En,It+=Nn*Dn,Ge+=xn,qe+=xn*(Yt+(Yt=lr)),Tt+=xn*(or+(or=Fr)),mt+=xn*(Gr+(Gr=nn)),ot(Yt,or,Gr)}function Mt(xt){at=Ge=Se=He=Ke=qe=Tt=mt=At=Ht=It=0,G(xt,on);var Bt=At,vr=Ht,lr=It,Fr=Bt*Bt+vr*vr+lr*lr;return Fr<n&&(Bt=qe,vr=Tt,lr=mt,Ge<i&&(Bt=Se,vr=He,lr=Ke),Fr=Bt*Bt+vr*vr+lr*lr,Fr<n)?[NaN,NaN]:[y(vr,Bt)*b,E(lr/h(Fr))*b]}function Ut(xt){return function(){return xt}}function Pe(xt,Bt){function vr(lr,Fr){return lr=xt(lr,Fr),Bt(lr[0],lr[1])}return xt.invert&&Bt.invert&&(vr.invert=function(lr,Fr){return lr=Bt.invert(lr,Fr),lr&&xt.invert(lr[0],lr[1])}),vr}function Ee(xt,Bt){return[d(xt)>r?xt+Math.round(-xt/o)*o:xt,Bt]}Ee.invert=Ee;function it(xt,Bt,vr){return(xt%=o)?Bt||vr?Pe(vt(xt),St(Bt,vr)):vt(xt):Bt||vr?St(Bt,vr):Ee}function ut(xt){return function(Bt,vr){return Bt+=xt,[Bt>r?Bt-o:Bt<-r?Bt+o:Bt,vr]}}function vt(xt){var Bt=ut(xt);return Bt.invert=ut(-xt),Bt}function St(xt,Bt){var vr=l(xt),lr=p(xt),Fr=l(Bt),nn=p(Bt);function yn(En,Dn){var Hn=l(Dn),xn=l(En)*Hn,Nn=p(En)*Hn,Rn=p(Dn),Yn=Rn*vr+xn*lr;return[y(Nn*Fr-Yn*nn,xn*vr-Rn*lr),E(Yn*Fr+Nn*nn)]}return yn.invert=function(En,Dn){var Hn=l(Dn),xn=l(En)*Hn,Nn=p(En)*Hn,Rn=p(Dn),Yn=Rn*Fr-Nn*nn;return[y(Nn*Fr+Rn*nn,xn*vr+Yn*lr),E(Yn*vr-xn*lr)]},yn}function yt(xt){xt=it(xt[0]*g,xt[1]*g,xt.length>2?xt[2]*g:0);function Bt(vr){return vr=xt(vr[0]*g,vr[1]*g),vr[0]*=b,vr[1]*=b,vr}return Bt.invert=function(vr){return vr=xt.invert(vr[0]*g,vr[1]*g),vr[0]*=b,vr[1]*=b,vr},Bt}function Pt(xt,Bt,vr,lr,Fr,nn){if(!!vr){var yn=l(Bt),En=p(Bt),Dn=lr*vr;Fr==null?(Fr=Bt+lr*o,nn=Bt-Dn/2):(Fr=Wt(yn,Fr),nn=Wt(yn,nn),(lr>0?Fr<nn:Fr>nn)&&(Fr+=lr*o));for(var Hn,xn=Fr;lr>0?xn>nn:xn<nn;xn-=Dn)Hn=$([yn,-En*l(xn),-En*p(xn)]),xt.point(Hn[0],Hn[1])}}function Wt(xt,Bt){Bt=ie(Bt),Bt[0]-=xt,ue(Bt);var vr=S(-Bt[1]);return((-Bt[2]<0?-vr:vr)+o-i)%o}function ar(){var xt=Ut([0,0]),Bt=Ut(90),vr=Ut(6),lr,Fr,nn={point:yn};function yn(Dn,Hn){lr.push(Dn=Fr(Dn,Hn)),Dn[0]*=b,Dn[1]*=b}function En(){var Dn=xt.apply(this,arguments),Hn=Bt.apply(this,arguments)*g,xn=vr.apply(this,arguments)*g;return lr=[],Fr=it(-Dn[0]*g,-Dn[1]*g,0).invert,Pt(nn,Hn,xn,1),Dn={type:"Polygon",coordinates:[lr]},lr=Fr=null,Dn}return En.center=function(Dn){return arguments.length?(xt=typeof Dn=="function"?Dn:Ut([+Dn[0],+Dn[1]]),En):xt},En.radius=function(Dn){return arguments.length?(Bt=typeof Dn=="function"?Dn:Ut(+Dn),En):Bt},En.precision=function(Dn){return arguments.length?(vr=typeof Dn=="function"?Dn:Ut(+Dn),En):vr},En}function kr(){var xt=[],Bt;return{point:function(vr,lr,Fr){Bt.push([vr,lr,Fr])},lineStart:function(){xt.push(Bt=[])},lineEnd:F,rejoin:function(){xt.length>1&&xt.push(xt.pop().concat(xt.shift()))},result:function(){var vr=xt;return xt=[],Bt=null,vr}}}function wr(xt,Bt){return d(xt[0]-Bt[0])<i&&d(xt[1]-Bt[1])<i}function Sr(xt,Bt,vr,lr){this.x=xt,this.z=Bt,this.o=vr,this.e=lr,this.v=!1,this.n=this.p=null}function Zr(xt,Bt,vr,lr,Fr){var nn=[],yn=[],En,Dn;if(xt.forEach(function(ta){if(!((Ba=ta.length-1)<=0)){var Ba,Da=ta[0],Ua=ta[Ba],Va;if(wr(Da,Ua)){if(!Da[2]&&!Ua[2]){for(Fr.lineStart(),En=0;En<Ba;++En)Fr.point((Da=ta[En])[0],Da[1]);Fr.lineEnd();return}Ua[0]+=2*i}nn.push(Va=new Sr(Da,ta,null,!0)),yn.push(Va.o=new Sr(Da,null,Va,!1)),nn.push(Va=new Sr(Ua,ta,null,!1)),yn.push(Va.o=new Sr(Ua,null,Va,!0))}}),!!nn.length){for(yn.sort(Bt),ir(nn),ir(yn),En=0,Dn=yn.length;En<Dn;++En)yn[En].e=vr=!vr;for(var Hn=nn[0],xn,Nn;;){for(var Rn=Hn,Yn=!0;Rn.v;)if((Rn=Rn.n)===Hn)return;xn=Rn.z,Fr.lineStart();do{if(Rn.v=Rn.o.v=!0,Rn.e){if(Yn)for(En=0,Dn=xn.length;En<Dn;++En)Fr.point((Nn=xn[En])[0],Nn[1]);else lr(Rn.x,Rn.n.x,1,Fr);Rn=Rn.n}else{if(Yn)for(xn=Rn.p.z,En=xn.length-1;En>=0;--En)Fr.point((Nn=xn[En])[0],Nn[1]);else lr(Rn.x,Rn.p.x,-1,Fr);Rn=Rn.p}Rn=Rn.o,xn=Rn.z,Yn=!Yn}while(!Rn.v);Fr.lineEnd()}}}function ir(xt){if(!!(Bt=xt.length)){for(var Bt,vr=0,lr=xt[0],Fr;++vr<Bt;)lr.n=Fr=xt[vr],Fr.p=lr,lr=Fr;lr.n=Fr=xt[0],Fr.p=lr}}var xr=A();function Rr(xt){return d(xt[0])<=r?xt[0]:w(xt[0])*((d(xt[0])+r)%o-r)}function Br(xt,Bt){var vr=Rr(Bt),lr=Bt[1],Fr=p(lr),nn=[p(vr),-l(vr),0],yn=0,En=0;xr.reset(),Fr===1?lr=v+i:Fr===-1&&(lr=-v-i);for(var Dn=0,Hn=xt.length;Dn<Hn;++Dn)if(!!(Nn=(xn=xt[Dn]).length))for(var xn,Nn,Rn=xn[Nn-1],Yn=Rr(Rn),ta=Rn[1]/2+s,Ba=p(ta),Da=l(ta),Ua=0;Ua<Nn;++Ua,Yn=qn,Ba=Za,Da=ti,Rn=Va){var Va=xn[Ua],qn=Rr(Va),da=Va[1]/2+s,Za=p(da),ti=l(da),_i=qn-Yn,wi=_i>=0?1:-1,Ai=wi*_i,Li=Ai>r,ci=Ba*Za;if(xr.add(y(ci*wi*p(Ai),Da*ti+ci*l(Ai))),yn+=Li?_i+wi*o:_i,Li^Yn>=vr^qn>=vr){var Eo=ae(ie(Rn),ie(Va));ue(Eo);var uo=ae(nn,Eo);ue(uo);var ei=(Li^_i>=0?-1:1)*E(uo[2]);(lr>ei||lr===ei&&(Eo[0]||Eo[1]))&&(En+=Li^_i>=0?1:-1)}}return(yn<-i||yn<i&&xr<-i)^En&1}function Cr(xt,Bt,vr,lr){return function(Fr){var nn=Bt(Fr),yn=kr(),En=Bt(yn),Dn=!1,Hn,xn,Nn,Rn={point:Yn,lineStart:Ba,lineEnd:Da,polygonStart:function(){Rn.point=Ua,Rn.lineStart=Va,Rn.lineEnd=qn,xn=[],Hn=[]},polygonEnd:function(){Rn.point=Yn,Rn.lineStart=Ba,Rn.lineEnd=Da,xn=c.merge(xn);var da=Br(Hn,lr);xn.length?(Dn||(Fr.polygonStart(),Dn=!0),Zr(xn,Dt,da,vr,Fr)):da&&(Dn||(Fr.polygonStart(),Dn=!0),Fr.lineStart(),vr(null,null,1,Fr),Fr.lineEnd()),Dn&&(Fr.polygonEnd(),Dn=!1),xn=Hn=null},sphere:function(){Fr.polygonStart(),Fr.lineStart(),vr(null,null,1,Fr),Fr.lineEnd(),Fr.polygonEnd()}};function Yn(da,Za){xt(da,Za)&&Fr.point(da,Za)}function ta(da,Za){nn.point(da,Za)}function Ba(){Rn.point=ta,nn.lineStart()}function Da(){Rn.point=Yn,nn.lineEnd()}function Ua(da,Za){Nn.push([da,Za]),En.point(da,Za)}function Va(){En.lineStart(),Nn=[]}function qn(){Ua(Nn[0][0],Nn[0][1]),En.lineEnd();var da=En.clean(),Za=yn.result(),ti,_i=Za.length,wi,Ai,Li;if(Nn.pop(),Hn.push(Nn),Nn=null,!!_i){if(da&1){if(Ai=Za[0],(wi=Ai.length-1)>0){for(Dn||(Fr.polygonStart(),Dn=!0),Fr.lineStart(),ti=0;ti<wi;++ti)Fr.point((Li=Ai[ti])[0],Li[1]);Fr.lineEnd()}return}_i>1&&da&2&&Za.push(Za.pop().concat(Za.shift())),xn.push(Za.filter(nt))}}return Rn}}function nt(xt){return xt.length>1}function Dt(xt,Bt){return((xt=xt.x)[0]<0?xt[1]-v-i:v-xt[1])-((Bt=Bt.x)[0]<0?Bt[1]-v-i:v-Bt[1])}var Zt=Cr(function(){return!0},sr,Ur,[-r,-v]);function sr(xt){var Bt=NaN,vr=NaN,lr=NaN,Fr;return{lineStart:function(){xt.lineStart(),Fr=1},point:function(nn,yn){var En=nn>0?r:-r,Dn=d(nn-Bt);d(Dn-r)<i?(xt.point(Bt,vr=(vr+yn)/2>0?v:-v),xt.point(lr,vr),xt.lineEnd(),xt.lineStart(),xt.point(En,vr),xt.point(nn,vr),Fr=0):lr!==En&&Dn>=r&&(d(Bt-lr)<i&&(Bt-=lr*i),d(nn-En)<i&&(nn-=En*i),vr=zr(Bt,vr,nn,yn),xt.point(lr,vr),xt.lineEnd(),xt.lineStart(),xt.point(En,vr),Fr=0),xt.point(Bt=nn,vr=yn),lr=En},lineEnd:function(){xt.lineEnd(),Bt=vr=NaN},clean:function(){return 2-Fr}}}function zr(xt,Bt,vr,lr){var Fr,nn,yn=p(xt-vr);return d(yn)>i?f((p(Bt)*(nn=l(lr))*p(vr)-p(lr)*(Fr=l(Bt))*p(xt))/(Fr*nn*yn)):(Bt+lr)/2}function Ur(xt,Bt,vr,lr){var Fr;if(xt==null)Fr=vr*v,lr.point(-r,Fr),lr.point(0,Fr),lr.point(r,Fr),lr.point(r,0),lr.point(r,-Fr),lr.point(0,-Fr),lr.point(-r,-Fr),lr.point(-r,0),lr.point(-r,Fr);else if(d(xt[0]-Bt[0])>i){var nn=xt[0]<Bt[0]?r:-r;Fr=vr*nn/2,lr.point(-nn,Fr),lr.point(0,Fr),lr.point(nn,Fr)}else lr.point(Bt[0],Bt[1])}function Lr(xt){var Bt=l(xt),vr=6*g,lr=Bt>0,Fr=d(Bt)>i;function nn(xn,Nn,Rn,Yn){Pt(Yn,xt,vr,Rn,xn,Nn)}function yn(xn,Nn){return l(xn)*l(Nn)>Bt}function En(xn){var Nn,Rn,Yn,ta,Ba;return{lineStart:function(){ta=Yn=!1,Ba=1},point:function(Da,Ua){var Va=[Da,Ua],qn,da=yn(Da,Ua),Za=lr?da?0:Hn(Da,Ua):da?Hn(Da+(Da<0?r:-r),Ua):0;if(!Nn&&(ta=Yn=da)&&xn.lineStart(),da!==Yn&&(qn=Dn(Nn,Va),(!qn||wr(Nn,qn)||wr(Va,qn))&&(Va[2]=1)),da!==Yn)Ba=0,da?(xn.lineStart(),qn=Dn(Va,Nn),xn.point(qn[0],qn[1])):(qn=Dn(Nn,Va),xn.point(qn[0],qn[1],2),xn.lineEnd()),Nn=qn;else if(Fr&&Nn&&lr^da){var ti;!(Za&Rn)&&(ti=Dn(Va,Nn,!0))&&(Ba=0,lr?(xn.lineStart(),xn.point(ti[0][0],ti[0][1]),xn.point(ti[1][0],ti[1][1]),xn.lineEnd()):(xn.point(ti[1][0],ti[1][1]),xn.lineEnd(),xn.lineStart(),xn.point(ti[0][0],ti[0][1],3)))}da&&(!Nn||!wr(Nn,Va))&&xn.point(Va[0],Va[1]),Nn=Va,Yn=da,Rn=Za},lineEnd:function(){Yn&&xn.lineEnd(),Nn=null},clean:function(){return Ba|(ta&&Yn)<<1}}}function Dn(xn,Nn,Rn){var Yn=ie(xn),ta=ie(Nn),Ba=[1,0,0],Da=ae(Yn,ta),Ua=oe(Da,Da),Va=Da[0],qn=Ua-Va*Va;if(!qn)return!Rn&&xn;var da=Bt*Ua/qn,Za=-Bt*Va/qn,ti=ae(Ba,Da),_i=_e(Ba,da),wi=_e(Da,Za);se(_i,wi);var Ai=ti,Li=oe(_i,Ai),ci=oe(Ai,Ai),Eo=Li*Li-ci*(oe(_i,_i)-1);if(!(Eo<0)){var uo=h(Eo),ei=_e(Ai,(-Li-uo)/ci);if(se(ei,_i),ei=$(ei),!Rn)return ei;var ga=xn[0],Mi=Nn[0],xo=xn[1],Ao=Nn[1],xs;Mi<ga&&(xs=ga,ga=Mi,Mi=xs);var Bs=Mi-ga,Xo=d(Bs-r)<i,fl=Xo||Bs<i;if(!Xo&&Ao<xo&&(xs=xo,xo=Ao,Ao=xs),fl?Xo?xo+Ao>0^ei[1]<(d(ei[0]-ga)<i?xo:Ao):xo<=ei[1]&&ei[1]<=Ao:Bs>r^(ga<=ei[0]&&ei[0]<=Mi)){var ks=_e(Ai,(-Li+uo)/ci);return se(ks,_i),[ei,$(ks)]}}}function Hn(xn,Nn){var Rn=lr?xt:r-xt,Yn=0;return xn<-Rn?Yn|=1:xn>Rn&&(Yn|=2),Nn<-Rn?Yn|=4:Nn>Rn&&(Yn|=8),Yn}return Cr(yn,En,nn,lr?[0,-xt]:[-r,xt-r])}function Tr(xt,Bt,vr,lr,Fr,nn){var yn=xt[0],En=xt[1],Dn=Bt[0],Hn=Bt[1],xn=0,Nn=1,Rn=Dn-yn,Yn=Hn-En,ta;if(ta=vr-yn,!(!Rn&&ta>0)){if(ta/=Rn,Rn<0){if(ta<xn)return;ta<Nn&&(Nn=ta)}else if(Rn>0){if(ta>Nn)return;ta>xn&&(xn=ta)}if(ta=Fr-yn,!(!Rn&&ta<0)){if(ta/=Rn,Rn<0){if(ta>Nn)return;ta>xn&&(xn=ta)}else if(Rn>0){if(ta<xn)return;ta<Nn&&(Nn=ta)}if(ta=lr-En,!(!Yn&&ta>0)){if(ta/=Yn,Yn<0){if(ta<xn)return;ta<Nn&&(Nn=ta)}else if(Yn>0){if(ta>Nn)return;ta>xn&&(xn=ta)}if(ta=nn-En,!(!Yn&&ta<0)){if(ta/=Yn,Yn<0){if(ta>Nn)return;ta>xn&&(xn=ta)}else if(Yn>0){if(ta<xn)return;ta<Nn&&(Nn=ta)}return xn>0&&(xt[0]=yn+xn*Rn,xt[1]=En+xn*Yn),Nn<1&&(Bt[0]=yn+Nn*Rn,Bt[1]=En+Nn*Yn),!0}}}}}var Wr=1e9,An=-Wr;function vn(xt,Bt,vr,lr){function Fr(Hn,xn){return xt<=Hn&&Hn<=vr&&Bt<=xn&&xn<=lr}function nn(Hn,xn,Nn,Rn){var Yn=0,ta=0;if(Hn==null||(Yn=yn(Hn,Nn))!==(ta=yn(xn,Nn))||Dn(Hn,xn)<0^Nn>0)do Rn.point(Yn===0||Yn===3?xt:vr,Yn>1?lr:Bt);while((Yn=(Yn+Nn+4)%4)!==ta);else Rn.point(xn[0],xn[1])}function yn(Hn,xn){return d(Hn[0]-xt)<i?xn>0?0:3:d(Hn[0]-vr)<i?xn>0?2:1:d(Hn[1]-Bt)<i?xn>0?1:0:xn>0?3:2}function En(Hn,xn){return Dn(Hn.x,xn.x)}function Dn(Hn,xn){var Nn=yn(Hn,1),Rn=yn(xn,1);return Nn!==Rn?Nn-Rn:Nn===0?xn[1]-Hn[1]:Nn===1?Hn[0]-xn[0]:Nn===2?Hn[1]-xn[1]:xn[0]-Hn[0]}return function(Hn){var xn=Hn,Nn=kr(),Rn,Yn,ta,Ba,Da,Ua,Va,qn,da,Za,ti,_i={point:wi,lineStart:Eo,lineEnd:uo,polygonStart:Li,polygonEnd:ci};function wi(ga,Mi){Fr(ga,Mi)&&xn.point(ga,Mi)}function Ai(){for(var ga=0,Mi=0,xo=Yn.length;Mi<xo;++Mi)for(var Ao=Yn[Mi],xs=1,Bs=Ao.length,Xo=Ao[0],fl,ks,bs=Xo[0],Co=Xo[1];xs<Bs;++xs)fl=bs,ks=Co,Xo=Ao[xs],bs=Xo[0],Co=Xo[1],ks<=lr?Co>lr&&(bs-fl)*(lr-ks)>(Co-ks)*(xt-fl)&&++ga:Co<=lr&&(bs-fl)*(lr-ks)<(Co-ks)*(xt-fl)&&--ga;return ga}function Li(){xn=Nn,Rn=[],Yn=[],ti=!0}function ci(){var ga=Ai(),Mi=ti&&ga,xo=(Rn=c.merge(Rn)).length;(Mi||xo)&&(Hn.polygonStart(),Mi&&(Hn.lineStart(),nn(null,null,1,Hn),Hn.lineEnd()),xo&&Zr(Rn,En,ga,nn,Hn),Hn.polygonEnd()),xn=Hn,Rn=Yn=ta=null}function Eo(){_i.point=ei,Yn&&Yn.push(ta=[]),Za=!0,da=!1,Va=qn=NaN}function uo(){Rn&&(ei(Ba,Da),Ua&&da&&Nn.rejoin(),Rn.push(Nn.result())),_i.point=wi,da&&xn.lineEnd()}function ei(ga,Mi){var xo=Fr(ga,Mi);if(Yn&&ta.push([ga,Mi]),Za)Ba=ga,Da=Mi,Ua=xo,Za=!1,xo&&(xn.lineStart(),xn.point(ga,Mi));else if(xo&&da)xn.point(ga,Mi);else{var Ao=[Va=Math.max(An,Math.min(Wr,Va)),qn=Math.max(An,Math.min(Wr,qn))],xs=[ga=Math.max(An,Math.min(Wr,ga)),Mi=Math.max(An,Math.min(Wr,Mi))];Tr(Ao,xs,xt,Bt,vr,lr)?(da||(xn.lineStart(),xn.point(Ao[0],Ao[1])),xn.point(xs[0],xs[1]),xo||xn.lineEnd(),ti=!1):xo&&(xn.lineStart(),xn.point(ga,Mi),ti=!1)}Va=ga,qn=Mi,da=xo}return _i}}function Un(){var xt=0,Bt=0,vr=960,lr=500,Fr,nn,yn;return yn={stream:function(En){return Fr&&nn===En?Fr:Fr=vn(xt,Bt,vr,lr)(nn=En)},extent:function(En){return arguments.length?(xt=+En[0][0],Bt=+En[0][1],vr=+En[1][0],lr=+En[1][1],Fr=nn=null,yn):[[xt,Bt],[vr,lr]]}}}var Ln=A(),Zn,Wn,ya,ka={sphere:F,point:F,lineStart:di,lineEnd:F,polygonStart:F,polygonEnd:F};function di(){ka.point=$a,ka.lineEnd=Xa}function Xa(){ka.point=ka.lineEnd=F}function $a(xt,Bt){xt*=g,Bt*=g,Zn=xt,Wn=p(Bt),ya=l(Bt),ka.point=Ka}function Ka(xt,Bt){xt*=g,Bt*=g;var vr=p(Bt),lr=l(Bt),Fr=d(xt-Zn),nn=l(Fr),yn=p(Fr),En=lr*yn,Dn=ya*vr-Wn*lr*nn,Hn=Wn*vr+ya*lr*nn;Ln.add(y(h(En*En+Dn*Dn),Hn)),Zn=xt,Wn=vr,ya=lr}function Mr(xt){return Ln.reset(),G(xt,ka),+Ln}var gn=[null,null],hn={type:"LineString",coordinates:gn};function Sn(xt,Bt){return gn[0]=xt,gn[1]=Bt,Mr(hn)}var Jn={Feature:function(xt,Bt){return na(xt.geometry,Bt)},FeatureCollection:function(xt,Bt){for(var vr=xt.features,lr=-1,Fr=vr.length;++lr<Fr;)if(na(vr[lr].geometry,Bt))return!0;return!1}},ha={Sphere:function(){return!0},Point:function(xt,Bt){return Fn(xt.coordinates,Bt)},MultiPoint:function(xt,Bt){for(var vr=xt.coordinates,lr=-1,Fr=vr.length;++lr<Fr;)if(Fn(vr[lr],Bt))return!0;return!1},LineString:function(xt,Bt){return Kn(xt.coordinates,Bt)},MultiLineString:function(xt,Bt){for(var vr=xt.coordinates,lr=-1,Fr=vr.length;++lr<Fr;)if(Kn(vr[lr],Bt))return!0;return!1},Polygon:function(xt,Bt){return Ya(xt.coordinates,Bt)},MultiPolygon:function(xt,Bt){for(var vr=xt.coordinates,lr=-1,Fr=vr.length;++lr<Fr;)if(Ya(vr[lr],Bt))return!0;return!1},GeometryCollection:function(xt,Bt){for(var vr=xt.geometries,lr=-1,Fr=vr.length;++lr<Fr;)if(na(vr[lr],Bt))return!0;return!1}};function na(xt,Bt){return xt&&ha.hasOwnProperty(xt.type)?ha[xt.type](xt,Bt):!1}function Fn(xt,Bt){return Sn(xt,Bt)===0}function Kn(xt,Bt){for(var vr,lr,Fr,nn=0,yn=xt.length;nn<yn;nn++){if(lr=Sn(xt[nn],Bt),lr===0||nn>0&&(Fr=Sn(xt[nn],xt[nn-1]),Fr>0&&vr<=Fr&&lr<=Fr&&(vr+lr-Fr)*(1-Math.pow((vr-lr)/Fr,2))<n*Fr))return!0;vr=lr}return!1}function Ya(xt,Bt){return!!Br(xt.map(hi),Gt(Bt))}function hi(xt){return xt=xt.map(Gt),xt.pop(),xt}function Gt(xt){return[xt[0]*g,xt[1]*g]}function pr(xt,Bt){return(xt&&Jn.hasOwnProperty(xt.type)?Jn[xt.type]:na)(xt,Bt)}function an(xt,Bt,vr){var lr=c.range(xt,Bt-i,vr).concat(Bt);return function(Fr){return lr.map(function(nn){return[Fr,nn]})}}function dn(xt,Bt,vr){var lr=c.range(xt,Bt-i,vr).concat(Bt);return function(Fr){return lr.map(function(nn){return[nn,Fr]})}}function rn(){var xt,Bt,vr,lr,Fr,nn,yn,En,Dn=10,Hn=Dn,xn=90,Nn=360,Rn,Yn,ta,Ba,Da=2.5;function Ua(){return{type:"MultiLineString",coordinates:Va()}}function Va(){return c.range(x(lr/xn)*xn,vr,xn).map(ta).concat(c.range(x(En/Nn)*Nn,yn,Nn).map(Ba)).concat(c.range(x(Bt/Dn)*Dn,xt,Dn).filter(function(qn){return d(qn%xn)>i}).map(Rn)).concat(c.range(x(nn/Hn)*Hn,Fr,Hn).filter(function(qn){return d(qn%Nn)>i}).map(Yn))}return Ua.lines=function(){return Va().map(function(qn){return{type:"LineString",coordinates:qn}})},Ua.outline=function(){return{type:"Polygon",coordinates:[ta(lr).concat(Ba(yn).slice(1),ta(vr).reverse().slice(1),Ba(En).reverse().slice(1))]}},Ua.extent=function(qn){return arguments.length?Ua.extentMajor(qn).extentMinor(qn):Ua.extentMinor()},Ua.extentMajor=function(qn){return arguments.length?(lr=+qn[0][0],vr=+qn[1][0],En=+qn[0][1],yn=+qn[1][1],lr>vr&&(qn=lr,lr=vr,vr=qn),En>yn&&(qn=En,En=yn,yn=qn),Ua.precision(Da)):[[lr,En],[vr,yn]]},Ua.extentMinor=function(qn){return arguments.length?(Bt=+qn[0][0],xt=+qn[1][0],nn=+qn[0][1],Fr=+qn[1][1],Bt>xt&&(qn=Bt,Bt=xt,xt=qn),nn>Fr&&(qn=nn,nn=Fr,Fr=qn),Ua.precision(Da)):[[Bt,nn],[xt,Fr]]},Ua.step=function(qn){return arguments.length?Ua.stepMajor(qn).stepMinor(qn):Ua.stepMinor()},Ua.stepMajor=function(qn){return arguments.length?(xn=+qn[0],Nn=+qn[1],Ua):[xn,Nn]},Ua.stepMinor=function(qn){return arguments.length?(Dn=+qn[0],Hn=+qn[1],Ua):[Dn,Hn]},Ua.precision=function(qn){return arguments.length?(Da=+qn,Rn=an(nn,Fr,90),Yn=dn(Bt,xt,Da),ta=an(En,yn,90),Ba=dn(lr,vr,Da),Ua):Da},Ua.extentMajor([[-180,-90+i],[180,90-i]]).extentMinor([[-180,-80-i],[180,80+i]])}function Mn(){return rn()()}function _n(xt,Bt){var vr=xt[0]*g,lr=xt[1]*g,Fr=Bt[0]*g,nn=Bt[1]*g,yn=l(lr),En=p(lr),Dn=l(nn),Hn=p(nn),xn=yn*l(vr),Nn=yn*p(vr),Rn=Dn*l(Fr),Yn=Dn*p(Fr),ta=2*E(h(P(nn-lr)+yn*Dn*P(Fr-vr))),Ba=p(ta),Da=ta?function(Ua){var Va=p(Ua*=ta)/Ba,qn=p(ta-Ua)/Ba,da=qn*xn+Va*Rn,Za=qn*Nn+Va*Yn,ti=qn*En+Va*Hn;return[y(Za,da)*b,y(ti,h(da*da+Za*Za))*b]}:function(){return[vr*b,lr*b]};return Da.distance=ta,Da}function fn(xt){return xt}var mr=A(),br=A(),Nr,mn,Bn,aa,Tn={point:F,lineStart:F,lineEnd:F,polygonStart:function(){Tn.lineStart=Qn,Tn.lineEnd=wa},polygonEnd:function(){Tn.lineStart=Tn.lineEnd=Tn.point=F,mr.add(d(br)),br.reset()},result:function(){var xt=mr/2;return mr.reset(),xt}};function Qn(){Tn.point=sa}function sa(xt,Bt){Tn.point=ma,Nr=Bn=xt,mn=aa=Bt}function ma(xt,Bt){br.add(aa*xt-Bn*Bt),Bn=xt,aa=Bt}function wa(){ma(Nr,mn)}var ca=1/0,Ca=ca,To=-ca,Wo=To,is={point:_l,lineStart:F,lineEnd:F,polygonStart:F,polygonEnd:F,result:function(){var xt=[[ca,Ca],[To,Wo]];return To=Wo=-(Ca=ca=1/0),xt}};function _l(xt,Bt){xt<ca&&(ca=xt),xt>To&&(To=xt),Bt<Ca&&(Ca=Bt),Bt>Wo&&(Wo=Bt)}var Fl=0,wu=0,xi=0,nl=0,Xs=0,ji=0,Io=0,zl=0,Ms=0,Ui,wl,ao,Yi,vo={point:io,lineStart:vs,lineEnd:os,polygonStart:function(){vo.lineStart=Gu,vo.lineEnd=Zs},polygonEnd:function(){vo.point=io,vo.lineStart=vs,vo.lineEnd=os},result:function(){var xt=Ms?[Io/Ms,zl/Ms]:ji?[nl/ji,Xs/ji]:xi?[Fl/xi,wu/xi]:[NaN,NaN];return Fl=wu=xi=nl=Xs=ji=Io=zl=Ms=0,xt}};function io(xt,Bt){Fl+=xt,wu+=Bt,++xi}function vs(){vo.point=al}function al(xt,Bt){vo.point=Hu,io(ao=xt,Yi=Bt)}function Hu(xt,Bt){var vr=xt-ao,lr=Bt-Yi,Fr=h(vr*vr+lr*lr);nl+=Fr*(ao+xt)/2,Xs+=Fr*(Yi+Bt)/2,ji+=Fr,io(ao=xt,Yi=Bt)}function os(){vo.point=io}function Gu(){vo.point=Fo}function Zs(){dc(Ui,wl)}function Fo(xt,Bt){vo.point=dc,io(Ui=ao=xt,wl=Yi=Bt)}function dc(xt,Bt){var vr=xt-ao,lr=Bt-Yi,Fr=h(vr*vr+lr*lr);nl+=Fr*(ao+xt)/2,Xs+=Fr*(Yi+Bt)/2,ji+=Fr,Fr=Yi*xt-ao*Bt,Io+=Fr*(ao+xt),zl+=Fr*(Yi+Bt),Ms+=Fr*3,io(ao=xt,Yi=Bt)}function js(xt){this._context=xt}js.prototype={_radius:4.5,pointRadius:function(xt){return this._radius=xt,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(xt,Bt){switch(this._point){case 0:{this._context.moveTo(xt,Bt),this._point=1;break}case 1:{this._context.lineTo(xt,Bt);break}default:{this._context.moveTo(xt+this._radius,Bt),this._context.arc(xt,Bt,this._radius,0,o);break}}},result:F};var Is=A(),tu,gc,yc,il,ru,Fs={point:F,lineStart:function(){Fs.point=Tu},lineEnd:function(){tu&&Tl(gc,yc),Fs.point=F},polygonStart:function(){tu=!0},polygonEnd:function(){tu=null},result:function(){var xt=+Is;return Is.reset(),xt}};function Tu(xt,Bt){Fs.point=Tl,gc=il=xt,yc=ru=Bt}function Tl(xt,Bt){il-=xt,ru-=Bt,Is.add(h(il*il+ru*ru)),il=xt,ru=Bt}function Au(){this._string=[]}Au.prototype={_radius:4.5,_circle:Yu(4.5),pointRadius:function(xt){return(xt=+xt)!==this._radius&&(this._radius=xt,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(xt,Bt){switch(this._point){case 0:{this._string.push("M",xt,",",Bt),this._point=1;break}case 1:{this._string.push("L",xt,",",Bt);break}default:{this._circle==null&&(this._circle=Yu(this._radius)),this._string.push("M",xt,",",Bt,this._circle);break}}},result:function(){if(this._string.length){var xt=this._string.join("");return this._string=[],xt}else return null}};function Yu(xt){return"m0,"+xt+"a"+xt+","+xt+" 0 1,1 0,"+-2*xt+"a"+xt+","+xt+" 0 1,1 0,"+2*xt+"z"}function nu(xt,Bt){var vr=4.5,lr,Fr;function nn(yn){return yn&&(typeof vr=="function"&&Fr.pointRadius(+vr.apply(this,arguments)),G(yn,lr(Fr))),Fr.result()}return nn.area=function(yn){return G(yn,lr(Tn)),Tn.result()},nn.measure=function(yn){return G(yn,lr(Fs)),Fs.result()},nn.bounds=function(yn){return G(yn,lr(is)),is.result()},nn.centroid=function(yn){return G(yn,lr(vo)),vo.result()},nn.projection=function(yn){return arguments.length?(lr=yn==null?(xt=null,fn):(xt=yn).stream,nn):xt},nn.context=function(yn){return arguments.length?(Fr=yn==null?(Bt=null,new Au):new js(Bt=yn),typeof vr!="function"&&Fr.pointRadius(vr),nn):Bt},nn.pointRadius=function(yn){return arguments.length?(vr=typeof yn=="function"?yn:(Fr.pointRadius(+yn),+yn),nn):vr},nn.projection(xt).context(Bt)}function mc(xt){return{stream:ol(xt)}}function ol(xt){return function(Bt){var vr=new Mu;for(var lr in xt)vr[lr]=xt[lr];return vr.stream=Bt,vr}}function Mu(){}Mu.prototype={constructor:Mu,point:function(xt,Bt){this.stream.point(xt,Bt)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function au(xt,Bt,vr){var lr=xt.clipExtent&&xt.clipExtent();return xt.scale(150).translate([0,0]),lr!=null&&xt.clipExtent(null),G(vr,xt.stream(is)),Bt(is.result()),lr!=null&&xt.clipExtent(lr),xt}function Ss(xt,Bt,vr){return au(xt,function(lr){var Fr=Bt[1][0]-Bt[0][0],nn=Bt[1][1]-Bt[0][1],yn=Math.min(Fr/(lr[1][0]-lr[0][0]),nn/(lr[1][1]-lr[0][1])),En=+Bt[0][0]+(Fr-yn*(lr[1][0]+lr[0][0]))/2,Dn=+Bt[0][1]+(nn-yn*(lr[1][1]+lr[0][1]))/2;xt.scale(150*yn).translate([En,Dn])},vr)}function Nl(xt,Bt,vr){return Ss(xt,[[0,0],Bt],vr)}function Su(xt,Bt,vr){return au(xt,function(lr){var Fr=+Bt,nn=Fr/(lr[1][0]-lr[0][0]),yn=(Fr-nn*(lr[1][0]+lr[0][0]))/2,En=-nn*lr[0][1];xt.scale(150*nn).translate([yn,En])},vr)}function Wu(xt,Bt,vr){return au(xt,function(lr){var Fr=+Bt,nn=Fr/(lr[1][1]-lr[0][1]),yn=-nn*lr[0][0],En=(Fr-nn*(lr[1][1]+lr[0][1]))/2;xt.scale(150*nn).translate([yn,En])},vr)}var Xu=16,iu=l(30*g);function xc(xt,Bt){return+Bt?ss(xt,Bt):Zu(xt)}function Zu(xt){return ol({point:function(Bt,vr){Bt=xt(Bt,vr),this.stream.point(Bt[0],Bt[1])}})}function ss(xt,Bt){function vr(lr,Fr,nn,yn,En,Dn,Hn,xn,Nn,Rn,Yn,ta,Ba,Da){var Ua=Hn-lr,Va=xn-Fr,qn=Ua*Ua+Va*Va;if(qn>4*Bt&&Ba--){var da=yn+Rn,Za=En+Yn,ti=Dn+ta,_i=h(da*da+Za*Za+ti*ti),wi=E(ti/=_i),Ai=d(d(ti)-1)<i||d(nn-Nn)<i?(nn+Nn)/2:y(Za,da),Li=xt(Ai,wi),ci=Li[0],Eo=Li[1],uo=ci-lr,ei=Eo-Fr,ga=Va*uo-Ua*ei;(ga*ga/qn>Bt||d((Ua*uo+Va*ei)/qn-.5)>.3||yn*Rn+En*Yn+Dn*ta<iu)&&(vr(lr,Fr,nn,yn,En,Dn,ci,Eo,Ai,da/=_i,Za/=_i,ti,Ba,Da),Da.point(ci,Eo),vr(ci,Eo,Ai,da,Za,ti,Hn,xn,Nn,Rn,Yn,ta,Ba,Da))}}return function(lr){var Fr,nn,yn,En,Dn,Hn,xn,Nn,Rn,Yn,ta,Ba,Da={point:Ua,lineStart:Va,lineEnd:da,polygonStart:function(){lr.polygonStart(),Da.lineStart=Za},polygonEnd:function(){lr.polygonEnd(),Da.lineStart=Va}};function Ua(wi,Ai){wi=xt(wi,Ai),lr.point(wi[0],wi[1])}function Va(){Nn=NaN,Da.point=qn,lr.lineStart()}function qn(wi,Ai){var Li=ie([wi,Ai]),ci=xt(wi,Ai);vr(Nn,Rn,xn,Yn,ta,Ba,Nn=ci[0],Rn=ci[1],xn=wi,Yn=Li[0],ta=Li[1],Ba=Li[2],Xu,lr),lr.point(Nn,Rn)}function da(){Da.point=Ua,lr.lineEnd()}function Za(){Va(),Da.point=ti,Da.lineEnd=_i}function ti(wi,Ai){qn(Fr=wi,Ai),nn=Nn,yn=Rn,En=Yn,Dn=ta,Hn=Ba,Da.point=qn}function _i(){vr(Nn,Rn,xn,Yn,ta,Ba,nn,yn,Fr,En,Dn,Hn,Xu,lr),Da.lineEnd=da,da()}return Da}}var Al=ol({point:function(xt,Bt){this.stream.point(xt*g,Bt*g)}});function Ml(xt){return ol({point:function(Bt,vr){var lr=xt(Bt,vr);return this.stream.point(lr[0],lr[1])}})}function Eu(xt,Bt,vr,lr,Fr){function nn(yn,En){return yn*=lr,En*=Fr,[Bt+xt*yn,vr-xt*En]}return nn.invert=function(yn,En){return[(yn-Bt)/xt*lr,(vr-En)/xt*Fr]},nn}function Es(xt,Bt,vr,lr,Fr,nn){var yn=l(nn),En=p(nn),Dn=yn*xt,Hn=En*xt,xn=yn/xt,Nn=En/xt,Rn=(En*vr-yn*Bt)/xt,Yn=(En*Bt+yn*vr)/xt;function ta(Ba,Da){return Ba*=lr,Da*=Fr,[Dn*Ba-Hn*Da+Bt,vr-Hn*Ba-Dn*Da]}return ta.invert=function(Ba,Da){return[lr*(xn*Ba-Nn*Da+Rn),Fr*(Yn-Nn*Ba-xn*Da)]},ta}function zo(xt){return ou(function(){return xt})()}function ou(xt){var Bt,vr=150,lr=480,Fr=250,nn=0,yn=0,En=0,Dn=0,Hn=0,xn,Nn=0,Rn=1,Yn=1,ta=null,Ba=Zt,Da=null,Ua,Va,qn,da=fn,Za=.5,ti,_i,wi,Ai,Li;function ci(ga){return wi(ga[0]*g,ga[1]*g)}function Eo(ga){return ga=wi.invert(ga[0],ga[1]),ga&&[ga[0]*b,ga[1]*b]}ci.stream=function(ga){return Ai&&Li===ga?Ai:Ai=Al(Ml(xn)(Ba(ti(da(Li=ga)))))},ci.preclip=function(ga){return arguments.length?(Ba=ga,ta=void 0,ei()):Ba},ci.postclip=function(ga){return arguments.length?(da=ga,Da=Ua=Va=qn=null,ei()):da},ci.clipAngle=function(ga){return arguments.length?(Ba=+ga?Lr(ta=ga*g):(ta=null,Zt),ei()):ta*b},ci.clipExtent=function(ga){return arguments.length?(da=ga==null?(Da=Ua=Va=qn=null,fn):vn(Da=+ga[0][0],Ua=+ga[0][1],Va=+ga[1][0],qn=+ga[1][1]),ei()):Da==null?null:[[Da,Ua],[Va,qn]]},ci.scale=function(ga){return arguments.length?(vr=+ga,uo()):vr},ci.translate=function(ga){return arguments.length?(lr=+ga[0],Fr=+ga[1],uo()):[lr,Fr]},ci.center=function(ga){return arguments.length?(nn=ga[0]%360*g,yn=ga[1]%360*g,uo()):[nn*b,yn*b]},ci.rotate=function(ga){return arguments.length?(En=ga[0]%360*g,Dn=ga[1]%360*g,Hn=ga.length>2?ga[2]%360*g:0,uo()):[En*b,Dn*b,Hn*b]},ci.angle=function(ga){return arguments.length?(Nn=ga%360*g,uo()):Nn*b},ci.reflectX=function(ga){return arguments.length?(Rn=ga?-1:1,uo()):Rn<0},ci.reflectY=function(ga){return arguments.length?(Yn=ga?-1:1,uo()):Yn<0},ci.precision=function(ga){return arguments.length?(ti=xc(_i,Za=ga*ga),ei()):h(Za)},ci.fitExtent=function(ga,Mi){return Ss(ci,ga,Mi)},ci.fitSize=function(ga,Mi){return Nl(ci,ga,Mi)},ci.fitWidth=function(ga,Mi){return Su(ci,ga,Mi)},ci.fitHeight=function(ga,Mi){return Wu(ci,ga,Mi)};function uo(){var ga=Es(vr,0,0,Rn,Yn,Nn).apply(null,Bt(nn,yn)),Mi=(Nn?Es:Eu)(vr,lr-ga[0],Fr-ga[1],Rn,Yn,Nn);return xn=it(En,Dn,Hn),_i=Pe(Bt,Mi),wi=Pe(xn,_i),ti=xc(_i,Za),ei()}function ei(){return Ai=Li=null,ci}return function(){return Bt=xt.apply(this,arguments),ci.invert=Bt.invert&&Eo,uo()}}function zs(xt){var Bt=0,vr=r/3,lr=ou(xt),Fr=lr(Bt,vr);return Fr.parallels=function(nn){return arguments.length?lr(Bt=nn[0]*g,vr=nn[1]*g):[Bt*b,vr*b]},Fr}function Ns(xt){var Bt=l(xt);function vr(lr,Fr){return[lr*Bt,p(Fr)/Bt]}return vr.invert=function(lr,Fr){return[lr/Bt,E(Fr*Bt)]},vr}function yo(xt,Bt){var vr=p(xt),lr=(vr+p(Bt))/2;if(d(lr)<i)return Ns(xt);var Fr=1+vr*(2*lr-vr),nn=h(Fr)/lr;function yn(En,Dn){var Hn=h(Fr-2*lr*p(Dn))/lr;return[Hn*p(En*=lr),nn-Hn*l(En)]}return yn.invert=function(En,Dn){var Hn=nn-Dn,xn=y(En,d(Hn))*w(Hn);return Hn*lr<0&&(xn-=r*w(En)*w(Hn)),[xn/lr,E((Fr-(En*En+Hn*Hn)*lr*lr)/(2*lr))]},yn}function Ol(){return zs(yo).scale(155.424).center([0,33.6442])}function Bl(){return Ol().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function sl(xt){var Bt=xt.length;return{point:function(vr,lr){for(var Fr=-1;++Fr<Bt;)xt[Fr].point(vr,lr)},sphere:function(){for(var vr=-1;++vr<Bt;)xt[vr].sphere()},lineStart:function(){for(var vr=-1;++vr<Bt;)xt[vr].lineStart()},lineEnd:function(){for(var vr=-1;++vr<Bt;)xt[vr].lineEnd()},polygonStart:function(){for(var vr=-1;++vr<Bt;)xt[vr].polygonStart()},polygonEnd:function(){for(var vr=-1;++vr<Bt;)xt[vr].polygonEnd()}}}function Cs(){var xt,Bt,vr=Bl(),lr,Fr=Ol().rotate([154,0]).center([-2,58.5]).parallels([55,65]),nn,yn=Ol().rotate([157,0]).center([-3,19.9]).parallels([8,18]),En,Dn,Hn={point:function(Rn,Yn){Dn=[Rn,Yn]}};function xn(Rn){var Yn=Rn[0],ta=Rn[1];return Dn=null,lr.point(Yn,ta),Dn||(nn.point(Yn,ta),Dn)||(En.point(Yn,ta),Dn)}xn.invert=function(Rn){var Yn=vr.scale(),ta=vr.translate(),Ba=(Rn[0]-ta[0])/Yn,Da=(Rn[1]-ta[1])/Yn;return(Da>=.12&&Da<.234&&Ba>=-.425&&Ba<-.214?Fr:Da>=.166&&Da<.234&&Ba>=-.214&&Ba<-.115?yn:vr).invert(Rn)},xn.stream=function(Rn){return xt&&Bt===Rn?xt:xt=sl([vr.stream(Bt=Rn),Fr.stream(Rn),yn.stream(Rn)])},xn.precision=function(Rn){return arguments.length?(vr.precision(Rn),Fr.precision(Rn),yn.precision(Rn),Nn()):vr.precision()},xn.scale=function(Rn){return arguments.length?(vr.scale(Rn),Fr.scale(Rn*.35),yn.scale(Rn),xn.translate(vr.translate())):vr.scale()},xn.translate=function(Rn){if(!arguments.length)return vr.translate();var Yn=vr.scale(),ta=+Rn[0],Ba=+Rn[1];return lr=vr.translate(Rn).clipExtent([[ta-.455*Yn,Ba-.238*Yn],[ta+.455*Yn,Ba+.238*Yn]]).stream(Hn),nn=Fr.translate([ta-.307*Yn,Ba+.201*Yn]).clipExtent([[ta-.425*Yn+i,Ba+.12*Yn+i],[ta-.214*Yn-i,Ba+.234*Yn-i]]).stream(Hn),En=yn.translate([ta-.205*Yn,Ba+.212*Yn]).clipExtent([[ta-.214*Yn+i,Ba+.166*Yn+i],[ta-.115*Yn-i,Ba+.234*Yn-i]]).stream(Hn),Nn()},xn.fitExtent=function(Rn,Yn){return Ss(xn,Rn,Yn)},xn.fitSize=function(Rn,Yn){return Nl(xn,Rn,Yn)},xn.fitWidth=function(Rn,Yn){return Su(xn,Rn,Yn)},xn.fitHeight=function(Rn,Yn){return Wu(xn,Rn,Yn)};function Nn(){return xt=Bt=null,xn}return xn.scale(1070)}function Ul(xt){return function(Bt,vr){var lr=l(Bt),Fr=l(vr),nn=xt(lr*Fr);return[nn*Fr*p(Bt),nn*p(vr)]}}function Sl(xt){return function(Bt,vr){var lr=h(Bt*Bt+vr*vr),Fr=xt(lr),nn=p(Fr),yn=l(Fr);return[y(Bt*nn,lr*yn),E(lr&&vr*nn/lr)]}}var su=Ul(function(xt){return h(2/(1+xt))});su.invert=Sl(function(xt){return 2*E(xt/2)});function Vl(){return zo(su).scale(124.75).clipAngle(180-.001)}var ll=Ul(function(xt){return(xt=S(xt))&&xt/p(xt)});ll.invert=Sl(function(xt){return xt});function bc(){return zo(ll).scale(79.4188).clipAngle(180-.001)}function ps(xt,Bt){return[xt,M(L((v+Bt)/2))]}ps.invert=function(xt,Bt){return[xt,2*f(u(Bt))-v]};function Vc(){return Cu(ps).scale(961/o)}function Cu(xt){var Bt=zo(xt),vr=Bt.center,lr=Bt.scale,Fr=Bt.translate,nn=Bt.clipExtent,yn=null,En,Dn,Hn;Bt.scale=function(Nn){return arguments.length?(lr(Nn),xn()):lr()},Bt.translate=function(Nn){return arguments.length?(Fr(Nn),xn()):Fr()},Bt.center=function(Nn){return arguments.length?(vr(Nn),xn()):vr()},Bt.clipExtent=function(Nn){return arguments.length?(Nn==null?yn=En=Dn=Hn=null:(yn=+Nn[0][0],En=+Nn[0][1],Dn=+Nn[1][0],Hn=+Nn[1][1]),xn()):yn==null?null:[[yn,En],[Dn,Hn]]};function xn(){var Nn=r*lr(),Rn=Bt(yt(Bt.rotate()).invert([0,0]));return nn(yn==null?[[Rn[0]-Nn,Rn[1]-Nn],[Rn[0]+Nn,Rn[1]+Nn]]:xt===ps?[[Math.max(Rn[0]-Nn,yn),En],[Math.min(Rn[0]+Nn,Dn),Hn]]:[[yn,Math.max(Rn[1]-Nn,En)],[Dn,Math.min(Rn[1]+Nn,Hn)]])}return xn()}function El(xt){return L((v+xt)/2)}function Hl(xt,Bt){var vr=l(xt),lr=xt===Bt?p(xt):M(vr/l(Bt))/M(El(Bt)/El(xt)),Fr=vr*_(El(xt),lr)/lr;if(!lr)return ps;function nn(yn,En){Fr>0?En<-v+i&&(En=-v+i):En>v-i&&(En=v-i);var Dn=Fr/_(El(En),lr);return[Dn*p(lr*yn),Fr-Dn*l(lr*yn)]}return nn.invert=function(yn,En){var Dn=Fr-En,Hn=w(lr)*h(yn*yn+Dn*Dn),xn=y(yn,d(Dn))*w(Dn);return Dn*lr<0&&(xn-=r*w(yn)*w(Dn)),[xn/lr,2*f(_(Fr/Hn,1/lr))-v]},nn}function ul(){return zs(Hl).scale(109.5).parallels([30,30])}function Gl(xt,Bt){return[xt,Bt]}Gl.invert=Gl;function ju(){return zo(Gl).scale(152.63)}function Ku(xt,Bt){var vr=l(xt),lr=xt===Bt?p(xt):(vr-l(Bt))/(Bt-xt),Fr=vr/lr+xt;if(d(lr)<i)return Gl;function nn(yn,En){var Dn=Fr-En,Hn=lr*yn;return[Dn*p(Hn),Fr-Dn*l(Hn)]}return nn.invert=function(yn,En){var Dn=Fr-En,Hn=y(yn,d(Dn))*w(Dn);return Dn*lr<0&&(Hn-=r*w(yn)*w(Dn)),[Hn/lr,Fr-w(lr)*h(yn*yn+Dn*Dn)]},nn}function Hc(){return zs(Ku).scale(131.154).center([0,13.9389])}var Vi=1.340264,Cl=-.081106,cl=893e-6,ls=.003796,ds=h(3)/2,Yl=12;function mo(xt,Bt){var vr=E(ds*p(Bt)),lr=vr*vr,Fr=lr*lr*lr;return[xt*l(vr)/(ds*(Vi+3*Cl*lr+Fr*(7*cl+9*ls*lr))),vr*(Vi+Cl*lr+Fr*(cl+ls*lr))]}mo.invert=function(xt,Bt){for(var vr=Bt,lr=vr*vr,Fr=lr*lr*lr,nn=0,yn,En,Dn;nn<Yl&&(En=vr*(Vi+Cl*lr+Fr*(cl+ls*lr))-Bt,Dn=Vi+3*Cl*lr+Fr*(7*cl+9*ls*lr),vr-=yn=En/Dn,lr=vr*vr,Fr=lr*lr*lr,!(d(yn)<n));++nn);return[ds*xt*(Vi+3*Cl*lr+Fr*(7*cl+9*ls*lr))/l(vr),E(p(vr)/ds)]};function Ju(){return zo(mo).scale(177.158)}function gs(xt,Bt){var vr=l(Bt),lr=l(xt)*vr;return[vr*p(xt)/lr,p(Bt)/lr]}gs.invert=Sl(f);function Ks(){return zo(gs).scale(144.049).clipAngle(60)}function Js(){var xt=1,Bt=0,vr=0,lr=1,Fr=1,nn=0,yn,En,Dn=null,Hn,xn,Nn,Rn=1,Yn=1,ta=ol({point:function(da,Za){var ti=qn([da,Za]);this.stream.point(ti[0],ti[1])}}),Ba=fn,Da,Ua;function Va(){return Rn=xt*lr,Yn=xt*Fr,Da=Ua=null,qn}function qn(da){var Za=da[0]*Rn,ti=da[1]*Yn;if(nn){var _i=ti*yn-Za*En;Za=Za*yn+ti*En,ti=_i}return[Za+Bt,ti+vr]}return qn.invert=function(da){var Za=da[0]-Bt,ti=da[1]-vr;if(nn){var _i=ti*yn+Za*En;Za=Za*yn-ti*En,ti=_i}return[Za/Rn,ti/Yn]},qn.stream=function(da){return Da&&Ua===da?Da:Da=ta(Ba(Ua=da))},qn.postclip=function(da){return arguments.length?(Ba=da,Dn=Hn=xn=Nn=null,Va()):Ba},qn.clipExtent=function(da){return arguments.length?(Ba=da==null?(Dn=Hn=xn=Nn=null,fn):vn(Dn=+da[0][0],Hn=+da[0][1],xn=+da[1][0],Nn=+da[1][1]),Va()):Dn==null?null:[[Dn,Hn],[xn,Nn]]},qn.scale=function(da){return arguments.length?(xt=+da,Va()):xt},qn.translate=function(da){return arguments.length?(Bt=+da[0],vr=+da[1],Va()):[Bt,vr]},qn.angle=function(da){return arguments.length?(nn=da%360*g,En=p(nn),yn=l(nn),Va()):nn*b},qn.reflectX=function(da){return arguments.length?(lr=da?-1:1,Va()):lr<0},qn.reflectY=function(da){return arguments.length?(Fr=da?-1:1,Va()):Fr<0},qn.fitExtent=function(da,Za){return Ss(qn,da,Za)},qn.fitSize=function(da,Za){return Nl(qn,da,Za)},qn.fitWidth=function(da,Za){return Su(qn,da,Za)},qn.fitHeight=function(da,Za){return Wu(qn,da,Za)},qn}function Os(xt,Bt){var vr=Bt*Bt,lr=vr*vr;return[xt*(.8707-.131979*vr+lr*(-.013791+lr*(.003971*vr-.001529*lr))),Bt*(1.007226+vr*(.015085+lr*(-.044475+.028874*vr-.005916*lr)))]}Os.invert=function(xt,Bt){var vr=Bt,lr=25,Fr;do{var nn=vr*vr,yn=nn*nn;vr-=Fr=(vr*(1.007226+nn*(.015085+yn*(-.044475+.028874*nn-.005916*yn)))-Bt)/(1.007226+nn*(.015085*3+yn*(-.044475*7+.028874*9*nn-.005916*11*yn)))}while(d(Fr)>i&&--lr>0);return[xt/(.8707+(nn=vr*vr)*(-.131979+nn*(-.013791+nn*nn*nn*(.003971-.001529*nn)))),vr]};function ys(){return zo(Os).scale(175.295)}function Ki(xt,Bt){return[l(Bt)*p(xt),p(Bt)]}Ki.invert=Sl(E);function No(){return zo(Ki).scale(249.5).clipAngle(90+i)}function ms(xt,Bt){var vr=l(Bt),lr=1+l(xt)*vr;return[vr*p(xt)/lr,p(Bt)/lr]}ms.invert=Sl(function(xt){return 2*f(xt)});function Qu(){return zo(ms).scale(250).clipAngle(142)}function lu(xt,Bt){return[M(L((v+Bt)/2)),-xt]}lu.invert=function(xt,Bt){return[-Bt,2*f(u(xt))-v]};function $u(){var xt=Cu(lu),Bt=xt.center,vr=xt.rotate;return xt.center=function(lr){return arguments.length?Bt([-lr[1],lr[0]]):(lr=Bt(),[lr[1],-lr[0]])},xt.rotate=function(lr){return arguments.length?vr([lr[0],lr[1],lr.length>2?lr[2]+90:90]):(lr=vr(),[lr[0],lr[1],lr[2]-90])},vr([0,0,90]).scale(159.155)}m.geoAlbers=Bl,m.geoAlbersUsa=Cs,m.geoArea=j,m.geoAzimuthalEqualArea=Vl,m.geoAzimuthalEqualAreaRaw=su,m.geoAzimuthalEquidistant=bc,m.geoAzimuthalEquidistantRaw=ll,m.geoBounds=Xe,m.geoCentroid=Mt,m.geoCircle=ar,m.geoClipAntimeridian=Zt,m.geoClipCircle=Lr,m.geoClipExtent=Un,m.geoClipRectangle=vn,m.geoConicConformal=ul,m.geoConicConformalRaw=Hl,m.geoConicEqualArea=Ol,m.geoConicEqualAreaRaw=yo,m.geoConicEquidistant=Hc,m.geoConicEquidistantRaw=Ku,m.geoContains=pr,m.geoDistance=Sn,m.geoEqualEarth=Ju,m.geoEqualEarthRaw=mo,m.geoEquirectangular=ju,m.geoEquirectangularRaw=Gl,m.geoGnomonic=Ks,m.geoGnomonicRaw=gs,m.geoGraticule=rn,m.geoGraticule10=Mn,m.geoIdentity=Js,m.geoInterpolate=_n,m.geoLength=Mr,m.geoMercator=Vc,m.geoMercatorRaw=ps,m.geoNaturalEarth1=ys,m.geoNaturalEarth1Raw=Os,m.geoOrthographic=No,m.geoOrthographicRaw=Ki,m.geoPath=nu,m.geoProjection=zo,m.geoProjectionMutator=ou,m.geoRotation=yt,m.geoStereographic=Qu,m.geoStereographicRaw=ms,m.geoStream=G,m.geoTransform=mc,m.geoTransverseMercator=$u,m.geoTransverseMercatorRaw=lu,Object.defineProperty(m,"__esModule",{value:!0})})},{"d3-array":107}],115:[function(t,B,V){(function(m,c){typeof V=="object"&&typeof B<"u"?c(V):(m=m||self,c(m.d3=m.d3||{}))})(this,function(m){function c(Ge,Se){return Ge.parent===Se.parent?1:2}function A(Ge){return Ge.reduce(T,0)/Ge.length}function T(Ge,Se){return Ge+Se.x}function e(Ge){return 1+Ge.reduce(a,0)}function a(Ge,Se){return Math.max(Ge,Se.y)}function i(Ge){for(var Se;Se=Ge.children;)Ge=Se[0];return Ge}function n(Ge){for(var Se;Se=Ge.children;)Ge=Se[Se.length-1];return Ge}function r(){var Ge=c,Se=1,He=1,Ke=!1;function qe(Tt){var mt,At=0;Tt.eachAfter(function(Yt){var or=Yt.children;or?(Yt.x=A(or),Yt.y=e(or)):(Yt.x=mt?At+=Ge(Yt,mt):0,Yt.y=0,mt=Yt)});var Ht=i(Tt),It=n(Tt),Vt=Ht.x-Ge(Ht,It)/2,jt=It.x+Ge(It,Ht)/2;return Tt.eachAfter(Ke?function(Yt){Yt.x=(Yt.x-Tt.x)*Se,Yt.y=(Tt.y-Yt.y)*He}:function(Yt){Yt.x=(Yt.x-Vt)/(jt-Vt)*Se,Yt.y=(1-(Tt.y?Yt.y/Tt.y:1))*He})}return qe.separation=function(Tt){return arguments.length?(Ge=Tt,qe):Ge},qe.size=function(Tt){return arguments.length?(Ke=!1,Se=+Tt[0],He=+Tt[1],qe):Ke?null:[Se,He]},qe.nodeSize=function(Tt){return arguments.length?(Ke=!0,Se=+Tt[0],He=+Tt[1],qe):Ke?[Se,He]:null},qe}function v(Ge){var Se=0,He=Ge.children,Ke=He&&He.length;if(!Ke)Se=1;else for(;--Ke>=0;)Se+=He[Ke].value;Ge.value=Se}function s(){return this.eachAfter(v)}function o(Ge){var Se=this,He,Ke=[Se],qe,Tt,mt;do for(He=Ke.reverse(),Ke=[];Se=He.pop();)if(Ge(Se),qe=Se.children,qe)for(Tt=0,mt=qe.length;Tt<mt;++Tt)Ke.push(qe[Tt]);while(Ke.length);return this}function b(Ge){for(var Se=this,He=[Se],Ke,qe;Se=He.pop();)if(Ge(Se),Ke=Se.children,Ke)for(qe=Ke.length-1;qe>=0;--qe)He.push(Ke[qe]);return this}function g(Ge){for(var Se=this,He=[Se],Ke=[],qe,Tt,mt;Se=He.pop();)if(Ke.push(Se),qe=Se.children,qe)for(Tt=0,mt=qe.length;Tt<mt;++Tt)He.push(qe[Tt]);for(;Se=Ke.pop();)Ge(Se);return this}function d(Ge){return this.eachAfter(function(Se){for(var He=+Ge(Se.data)||0,Ke=Se.children,qe=Ke&&Ke.length;--qe>=0;)He+=Ke[qe].value;Se.value=He})}function f(Ge){return this.eachBefore(function(Se){Se.children&&Se.children.sort(Ge)})}function y(Ge){for(var Se=this,He=l(Se,Ge),Ke=[Se];Se!==He;)Se=Se.parent,Ke.push(Se);for(var qe=Ke.length;Ge!==He;)Ke.splice(qe,0,Ge),Ge=Ge.parent;return Ke}function l(Ge,Se){if(Ge===Se)return Ge;var He=Ge.ancestors(),Ke=Se.ancestors(),qe=null;for(Ge=He.pop(),Se=Ke.pop();Ge===Se;)qe=Ge,Ge=He.pop(),Se=Ke.pop();return qe}function x(){for(var Ge=this,Se=[Ge];Ge=Ge.parent;)Se.push(Ge);return Se}function u(){var Ge=[];return this.each(function(Se){Ge.push(Se)}),Ge}function M(){var Ge=[];return this.eachBefore(function(Se){Se.children||Ge.push(Se)}),Ge}function _(){var Ge=this,Se=[];return Ge.each(function(He){He!==Ge&&Se.push({source:He.parent,target:He})}),Se}function p(Ge,Se){var He=new E(Ge),Ke=+Ge.value&&(He.value=Ge.value),qe,Tt=[He],mt,At,Ht,It;for(Se==null&&(Se=h);qe=Tt.pop();)if(Ke&&(qe.value=+qe.data.value),(At=Se(qe.data))&&(It=At.length))for(qe.children=new Array(It),Ht=It-1;Ht>=0;--Ht)Tt.push(mt=qe.children[Ht]=new E(At[Ht])),mt.parent=qe,mt.depth=qe.depth+1;return He.eachBefore(S)}function w(){return p(this).eachBefore(L)}function h(Ge){return Ge.children}function L(Ge){Ge.data=Ge.data.data}function S(Ge){var Se=0;do Ge.height=Se;while((Ge=Ge.parent)&&Ge.height<++Se)}function E(Ge){this.data=Ge,this.depth=this.height=0,this.parent=null}E.prototype=p.prototype={constructor:E,count:s,each:o,eachAfter:g,eachBefore:b,sum:d,sort:f,path:y,ancestors:x,descendants:u,leaves:M,links:_,copy:w};var P=Array.prototype.slice;function F(Ge){for(var Se=Ge.length,He,Ke;Se;)Ke=Math.random()*Se--|0,He=Ge[Se],Ge[Se]=Ge[Ke],Ge[Ke]=He;return Ge}function I(Ge){for(var Se=0,He=(Ge=F(P.call(Ge))).length,Ke=[],qe,Tt;Se<He;)qe=Ge[Se],Tt&&N(Tt,qe)?++Se:(Tt=G(Ke=D(Ke,qe)),Se=0);return Tt}function D(Ge,Se){var He,Ke;if(z(Se,Ge))return[Se];for(He=0;He<Ge.length;++He)if(R(Se,Ge[He])&&z(ee(Ge[He],Se),Ge))return[Ge[He],Se];for(He=0;He<Ge.length-1;++He)for(Ke=He+1;Ke<Ge.length;++Ke)if(R(ee(Ge[He],Ge[Ke]),Se)&&R(ee(Ge[He],Se),Ge[Ke])&&R(ee(Ge[Ke],Se),Ge[He])&&z(Z(Ge[He],Ge[Ke],Se),Ge))return[Ge[He],Ge[Ke],Se];throw new Error}function R(Ge,Se){var He=Ge.r-Se.r,Ke=Se.x-Ge.x,qe=Se.y-Ge.y;return He<0||He*He<Ke*Ke+qe*qe}function N(Ge,Se){var He=Ge.r-Se.r+1e-6,Ke=Se.x-Ge.x,qe=Se.y-Ge.y;return He>0&&He*He>Ke*Ke+qe*qe}function z(Ge,Se){for(var He=0;He<Se.length;++He)if(!N(Ge,Se[He]))return!1;return!0}function G(Ge){switch(Ge.length){case 1:return Y(Ge[0]);case 2:return ee(Ge[0],Ge[1]);case 3:return Z(Ge[0],Ge[1],Ge[2])}}function Y(Ge){return{x:Ge.x,y:Ge.y,r:Ge.r}}function ee(Ge,Se){var He=Ge.x,Ke=Ge.y,qe=Ge.r,Tt=Se.x,mt=Se.y,At=Se.r,Ht=Tt-He,It=mt-Ke,Vt=At-qe,jt=Math.sqrt(Ht*Ht+It*It);return{x:(He+Tt+Ht/jt*Vt)/2,y:(Ke+mt+It/jt*Vt)/2,r:(jt+qe+At)/2}}function Z(Ge,Se,He){var Ke=Ge.x,qe=Ge.y,Tt=Ge.r,mt=Se.x,At=Se.y,Ht=Se.r,It=He.x,Vt=He.y,jt=He.r,Yt=Ke-mt,or=Ke-It,Gr=qe-At,on=qe-Vt,Jr=Ht-Tt,ot=jt-Tt,er=Ke*Ke+qe*qe-Tt*Tt,Kt=er-mt*mt-At*At+Ht*Ht,fr=er-It*It-Vt*Vt+jt*jt,Ar=or*Gr-Yt*on,et=(Gr*fr-on*Kt)/(Ar*2)-Ke,$e=(on*Jr-Gr*ot)/Ar,st=(or*Kt-Yt*fr)/(Ar*2)-qe,ct=(Yt*ot-or*Jr)/Ar,Mt=$e*$e+ct*ct-1,Ut=2*(Tt+et*$e+st*ct),Pe=et*et+st*st-Tt*Tt,Ee=-(Mt?(Ut+Math.sqrt(Ut*Ut-4*Mt*Pe))/(2*Mt):Pe/Ut);return{x:Ke+et+$e*Ee,y:qe+st+ct*Ee,r:Ee}}function X(Ge,Se,He){var Ke=Ge.x-Se.x,qe,Tt,mt=Ge.y-Se.y,At,Ht,It=Ke*Ke+mt*mt;It?(Tt=Se.r+He.r,Tt*=Tt,Ht=Ge.r+He.r,Ht*=Ht,Tt>Ht?(qe=(It+Ht-Tt)/(2*It),At=Math.sqrt(Math.max(0,Ht/It-qe*qe)),He.x=Ge.x-qe*Ke-At*mt,He.y=Ge.y-qe*mt+At*Ke):(qe=(It+Tt-Ht)/(2*It),At=Math.sqrt(Math.max(0,Tt/It-qe*qe)),He.x=Se.x+qe*Ke-At*mt,He.y=Se.y+qe*mt+At*Ke)):(He.x=Se.x+He.r,He.y=Se.y)}function ne(Ge,Se){var He=Ge.r+Se.r-1e-6,Ke=Se.x-Ge.x,qe=Se.y-Ge.y;return He>0&&He*He>Ke*Ke+qe*qe}function ce(Ge){var Se=Ge._,He=Ge.next._,Ke=Se.r+He.r,qe=(Se.x*He.r+He.x*Se.r)/Ke,Tt=(Se.y*He.r+He.y*Se.r)/Ke;return qe*qe+Tt*Tt}function Q(Ge){this._=Ge,this.next=null,this.previous=null}function K(Ge){if(!(qe=Ge.length))return 0;var Se,He,Ke,qe,Tt,mt,At,Ht,It,Vt,jt;if(Se=Ge[0],Se.x=0,Se.y=0,!(qe>1))return Se.r;if(He=Ge[1],Se.x=-He.r,He.x=Se.r,He.y=0,!(qe>2))return Se.r+He.r;X(He,Se,Ke=Ge[2]),Se=new Q(Se),He=new Q(He),Ke=new Q(Ke),Se.next=Ke.previous=He,He.next=Se.previous=Ke,Ke.next=He.previous=Se;e:for(At=3;At<qe;++At){X(Se._,He._,Ke=Ge[At]),Ke=new Q(Ke),Ht=He.next,It=Se.previous,Vt=He._.r,jt=Se._.r;do if(Vt<=jt){if(ne(Ht._,Ke._)){He=Ht,Se.next=He,He.previous=Se,--At;continue e}Vt+=Ht._.r,Ht=Ht.next}else{if(ne(It._,Ke._)){Se=It,Se.next=He,He.previous=Se,--At;continue e}jt+=It._.r,It=It.previous}while(Ht!==It.next);for(Ke.previous=Se,Ke.next=He,Se.next=He.previous=He=Ke,Tt=ce(Se);(Ke=Ke.next)!==He;)(mt=ce(Ke))<Tt&&(Se=Ke,Tt=mt);He=Se.next}for(Se=[He._],Ke=He;(Ke=Ke.next)!==He;)Se.push(Ke._);for(Ke=I(Se),At=0;At<qe;++At)Se=Ge[At],Se.x-=Ke.x,Se.y-=Ke.y;return Ke.r}function U(Ge){return K(Ge),Ge}function H(Ge){return Ge==null?null:q(Ge)}function q(Ge){if(typeof Ge!="function")throw new Error;return Ge}function re(){return 0}function j(Ge){return function(){return Ge}}function $(Ge){return Math.sqrt(Ge.value)}function ie(){var Ge=null,Se=1,He=1,Ke=re;function qe(Tt){return Tt.x=Se/2,Tt.y=He/2,Ge?Tt.eachBefore(oe(Ge)).eachAfter(ae(Ke,.5)).eachBefore(se(1)):Tt.eachBefore(oe($)).eachAfter(ae(re,1)).eachAfter(ae(Ke,Tt.r/Math.min(Se,He))).eachBefore(se(Math.min(Se,He)/(2*Tt.r))),Tt}return qe.radius=function(Tt){return arguments.length?(Ge=H(Tt),qe):Ge},qe.size=function(Tt){return arguments.length?(Se=+Tt[0],He=+Tt[1],qe):[Se,He]},qe.padding=function(Tt){return arguments.length?(Ke=typeof Tt=="function"?Tt:j(+Tt),qe):Ke},qe}function oe(Ge){return function(Se){Se.children||(Se.r=Math.max(0,+Ge(Se)||0))}}function ae(Ge,Se){return function(He){if(Ke=He.children){var Ke,qe,Tt=Ke.length,mt=Ge(He)*Se||0,At;if(mt)for(qe=0;qe<Tt;++qe)Ke[qe].r+=mt;if(At=K(Ke),mt)for(qe=0;qe<Tt;++qe)Ke[qe].r-=mt;He.r=At+mt}}}function se(Ge){return function(Se){var He=Se.parent;Se.r*=Ge,He&&(Se.x=He.x+Ge*Se.x,Se.y=He.y+Ge*Se.y)}}function _e(Ge){Ge.x0=Math.round(Ge.x0),Ge.y0=Math.round(Ge.y0),Ge.x1=Math.round(Ge.x1),Ge.y1=Math.round(Ge.y1)}function ue(Ge,Se,He,Ke,qe){for(var Tt=Ge.children,mt,At=-1,Ht=Tt.length,It=Ge.value&&(Ke-Se)/Ge.value;++At<Ht;)mt=Tt[At],mt.y0=He,mt.y1=qe,mt.x0=Se,mt.x1=Se+=mt.value*It}function ye(){var Ge=1,Se=1,He=0,Ke=!1;function qe(mt){var At=mt.height+1;return mt.x0=mt.y0=He,mt.x1=Ge,mt.y1=Se/At,mt.eachBefore(Tt(Se,At)),Ke&&mt.eachBefore(_e),mt}function Tt(mt,At){return function(Ht){Ht.children&&ue(Ht,Ht.x0,mt*(Ht.depth+1)/At,Ht.x1,mt*(Ht.depth+2)/At);var It=Ht.x0,Vt=Ht.y0,jt=Ht.x1-He,Yt=Ht.y1-He;jt<It&&(It=jt=(It+jt)/2),Yt<Vt&&(Vt=Yt=(Vt+Yt)/2),Ht.x0=It,Ht.y0=Vt,Ht.x1=jt,Ht.y1=Yt}}return qe.round=function(mt){return arguments.length?(Ke=!!mt,qe):Ke},qe.size=function(mt){return arguments.length?(Ge=+mt[0],Se=+mt[1],qe):[Ge,Se]},qe.padding=function(mt){return arguments.length?(He=+mt,qe):He},qe}var xe="$",me={depth:-1},be={};function ke(Ge){return Ge.id}function De(Ge){return Ge.parentId}function Ve(){var Ge=ke,Se=De;function He(Ke){var qe,Tt,mt=Ke.length,At,Ht,It,Vt=new Array(mt),jt,Yt,or={};for(Tt=0;Tt<mt;++Tt)qe=Ke[Tt],It=Vt[Tt]=new E(qe),(jt=Ge(qe,Tt,Ke))!=null&&(jt+="")&&(Yt=xe+(It.id=jt),or[Yt]=Yt in or?be:It);for(Tt=0;Tt<mt;++Tt)if(It=Vt[Tt],jt=Se(Ke[Tt],Tt,Ke),jt==null||!(jt+="")){if(At)throw new Error("multiple roots");At=It}else{if(Ht=or[xe+jt],!Ht)throw new Error("missing: "+jt);if(Ht===be)throw new Error("ambiguous: "+jt);Ht.children?Ht.children.push(It):Ht.children=[It],It.parent=Ht}if(!At)throw new Error("no root");if(At.parent=me,At.eachBefore(function(Gr){Gr.depth=Gr.parent.depth+1,--mt}).eachBefore(S),At.parent=null,mt>0)throw new Error("cycle");return At}return He.id=function(Ke){return arguments.length?(Ge=q(Ke),He):Ge},He.parentId=function(Ke){return arguments.length?(Se=q(Ke),He):Se},He}function Ae(Ge,Se){return Ge.parent===Se.parent?1:2}function Le(Ge){var Se=Ge.children;return Se?Se[0]:Ge.t}function je(Ge){var Se=Ge.children;return Se?Se[Se.length-1]:Ge.t}function Ye(Ge,Se,He){var Ke=He/(Se.i-Ge.i);Se.c-=Ke,Se.s+=He,Ge.c+=Ke,Se.z+=He,Se.m+=He}function ze(Ge){for(var Se=0,He=0,Ke=Ge.children,qe=Ke.length,Tt;--qe>=0;)Tt=Ke[qe],Tt.z+=Se,Tt.m+=Se,Se+=Tt.s+(He+=Tt.c)}function Ie(Ge,Se,He){return Ge.a.parent===Se.parent?Ge.a:He}function We(Ge,Se){this._=Ge,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=Se}We.prototype=Object.create(E.prototype);function pt(Ge){for(var Se=new We(Ge,0),He,Ke=[Se],qe,Tt,mt,At;He=Ke.pop();)if(Tt=He._.children)for(He.children=new Array(At=Tt.length),mt=At-1;mt>=0;--mt)Ke.push(qe=He.children[mt]=new We(Tt[mt],mt)),qe.parent=He;return(Se.parent=new We(null,0)).children=[Se],Se}function Ft(){var Ge=Ae,Se=1,He=1,Ke=null;function qe(It){var Vt=pt(It);if(Vt.eachAfter(Tt),Vt.parent.m=-Vt.z,Vt.eachBefore(mt),Ke)It.eachBefore(Ht);else{var jt=It,Yt=It,or=It;It.eachBefore(function(er){er.x<jt.x&&(jt=er),er.x>Yt.x&&(Yt=er),er.depth>or.depth&&(or=er)});var Gr=jt===Yt?1:Ge(jt,Yt)/2,on=Gr-jt.x,Jr=Se/(Yt.x+Gr+on),ot=He/(or.depth||1);It.eachBefore(function(er){er.x=(er.x+on)*Jr,er.y=er.depth*ot})}return It}function Tt(It){var Vt=It.children,jt=It.parent.children,Yt=It.i?jt[It.i-1]:null;if(Vt){ze(It);var or=(Vt[0].z+Vt[Vt.length-1].z)/2;Yt?(It.z=Yt.z+Ge(It._,Yt._),It.m=It.z-or):It.z=or}else Yt&&(It.z=Yt.z+Ge(It._,Yt._));It.parent.A=At(It,Yt,It.parent.A||jt[0])}function mt(It){It._.x=It.z+It.parent.m,It.m+=It.parent.m}function At(It,Vt,jt){if(Vt){for(var Yt=It,or=It,Gr=Vt,on=Yt.parent.children[0],Jr=Yt.m,ot=or.m,er=Gr.m,Kt=on.m,fr;Gr=je(Gr),Yt=Le(Yt),Gr&&Yt;)on=Le(on),or=je(or),or.a=It,fr=Gr.z+er-Yt.z-Jr+Ge(Gr._,Yt._),fr>0&&(Ye(Ie(Gr,It,jt),It,fr),Jr+=fr,ot+=fr),er+=Gr.m,Jr+=Yt.m,Kt+=on.m,ot+=or.m;Gr&&!je(or)&&(or.t=Gr,or.m+=er-ot),Yt&&!Le(on)&&(on.t=Yt,on.m+=Jr-Kt,jt=It)}return jt}function Ht(It){It.x*=Se,It.y=It.depth*He}return qe.separation=function(It){return arguments.length?(Ge=It,qe):Ge},qe.size=function(It){return arguments.length?(Ke=!1,Se=+It[0],He=+It[1],qe):Ke?null:[Se,He]},qe.nodeSize=function(It){return arguments.length?(Ke=!0,Se=+It[0],He=+It[1],qe):Ke?[Se,He]:null},qe}function Qt(Ge,Se,He,Ke,qe){for(var Tt=Ge.children,mt,At=-1,Ht=Tt.length,It=Ge.value&&(qe-He)/Ge.value;++At<Ht;)mt=Tt[At],mt.x0=Se,mt.x1=Ke,mt.y0=He,mt.y1=He+=mt.value*It}var zt=(1+Math.sqrt(5))/2;function Et(Ge,Se,He,Ke,qe,Tt){for(var mt=[],At=Se.children,Ht,It,Vt=0,jt=0,Yt=At.length,or,Gr,on=Se.value,Jr,ot,er,Kt,fr,Ar,et;Vt<Yt;){or=qe-He,Gr=Tt-Ke;do Jr=At[jt++].value;while(!Jr&&jt<Yt);for(ot=er=Jr,Ar=Math.max(Gr/or,or/Gr)/(on*Ge),et=Jr*Jr*Ar,fr=Math.max(er/et,et/ot);jt<Yt;++jt){if(Jr+=It=At[jt].value,It<ot&&(ot=It),It>er&&(er=It),et=Jr*Jr*Ar,Kt=Math.max(er/et,et/ot),Kt>fr){Jr-=It;break}fr=Kt}mt.push(Ht={value:Jr,dice:or<Gr,children:At.slice(Vt,jt)}),Ht.dice?ue(Ht,He,Ke,qe,on?Ke+=Gr*Jr/on:Tt):Qt(Ht,He,Ke,on?He+=or*Jr/on:qe,Tt),on-=Jr,Vt=jt}return mt}var Xt=function Ge(Se){function He(Ke,qe,Tt,mt,At){Et(Se,Ke,qe,Tt,mt,At)}return He.ratio=function(Ke){return Ge((Ke=+Ke)>1?Ke:1)},He}(zt);function Nt(){var Ge=Xt,Se=!1,He=1,Ke=1,qe=[0],Tt=re,mt=re,At=re,Ht=re,It=re;function Vt(Yt){return Yt.x0=Yt.y0=0,Yt.x1=He,Yt.y1=Ke,Yt.eachBefore(jt),qe=[0],Se&&Yt.eachBefore(_e),Yt}function jt(Yt){var or=qe[Yt.depth],Gr=Yt.x0+or,on=Yt.y0+or,Jr=Yt.x1-or,ot=Yt.y1-or;Jr<Gr&&(Gr=Jr=(Gr+Jr)/2),ot<on&&(on=ot=(on+ot)/2),Yt.x0=Gr,Yt.y0=on,Yt.x1=Jr,Yt.y1=ot,Yt.children&&(or=qe[Yt.depth+1]=Tt(Yt)/2,Gr+=It(Yt)-or,on+=mt(Yt)-or,Jr-=At(Yt)-or,ot-=Ht(Yt)-or,Jr<Gr&&(Gr=Jr=(Gr+Jr)/2),ot<on&&(on=ot=(on+ot)/2),Ge(Yt,Gr,on,Jr,ot))}return Vt.round=function(Yt){return arguments.length?(Se=!!Yt,Vt):Se},Vt.size=function(Yt){return arguments.length?(He=+Yt[0],Ke=+Yt[1],Vt):[He,Ke]},Vt.tile=function(Yt){return arguments.length?(Ge=q(Yt),Vt):Ge},Vt.padding=function(Yt){return arguments.length?Vt.paddingInner(Yt).paddingOuter(Yt):Vt.paddingInner()},Vt.paddingInner=function(Yt){return arguments.length?(Tt=typeof Yt=="function"?Yt:j(+Yt),Vt):Tt},Vt.paddingOuter=function(Yt){return arguments.length?Vt.paddingTop(Yt).paddingRight(Yt).paddingBottom(Yt).paddingLeft(Yt):Vt.paddingTop()},Vt.paddingTop=function(Yt){return arguments.length?(mt=typeof Yt=="function"?Yt:j(+Yt),Vt):mt},Vt.paddingRight=function(Yt){return arguments.length?(At=typeof Yt=="function"?Yt:j(+Yt),Vt):At},Vt.paddingBottom=function(Yt){return arguments.length?(Ht=typeof Yt=="function"?Yt:j(+Yt),Vt):Ht},Vt.paddingLeft=function(Yt){return arguments.length?(It=typeof Yt=="function"?Yt:j(+Yt),Vt):It},Vt}function Ct(Ge,Se,He,Ke,qe){var Tt=Ge.children,mt,At=Tt.length,Ht,It=new Array(At+1);for(It[0]=Ht=mt=0;mt<At;++mt)It[mt+1]=Ht+=Tt[mt].value;Vt(0,At,Ge.value,Se,He,Ke,qe);function Vt(jt,Yt,or,Gr,on,Jr,ot){if(jt>=Yt-1){var er=Tt[jt];er.x0=Gr,er.y0=on,er.x1=Jr,er.y1=ot;return}for(var Kt=It[jt],fr=or/2+Kt,Ar=jt+1,et=Yt-1;Ar<et;){var $e=Ar+et>>>1;It[$e]<fr?Ar=$e+1:et=$e}fr-It[Ar-1]<It[Ar]-fr&&jt+1<Ar&&--Ar;var st=It[Ar]-Kt,ct=or-st;if(Jr-Gr>ot-on){var Mt=(Gr*ct+Jr*st)/or;Vt(jt,Ar,st,Gr,on,Mt,ot),Vt(Ar,Yt,ct,Mt,on,Jr,ot)}else{var Ut=(on*ct+ot*st)/or;Vt(jt,Ar,st,Gr,on,Jr,Ut),Vt(Ar,Yt,ct,Gr,Ut,Jr,ot)}}}function Xe(Ge,Se,He,Ke,qe){(Ge.depth&1?Qt:ue)(Ge,Se,He,Ke,qe)}var at=function Ge(Se){function He(Ke,qe,Tt,mt,At){if((Ht=Ke._squarify)&&Ht.ratio===Se)for(var Ht,It,Vt,jt,Yt=-1,or,Gr=Ht.length,on=Ke.value;++Yt<Gr;){for(It=Ht[Yt],Vt=It.children,jt=It.value=0,or=Vt.length;jt<or;++jt)It.value+=Vt[jt].value;It.dice?ue(It,qe,Tt,mt,Tt+=(At-Tt)*It.value/on):Qt(It,qe,Tt,qe+=(mt-qe)*It.value/on,At),on-=It.value}else Ke._squarify=Ht=Et(Se,Ke,qe,Tt,mt,At),Ht.ratio=Se}return He.ratio=function(Ke){return Ge((Ke=+Ke)>1?Ke:1)},He}(zt);m.cluster=r,m.hierarchy=p,m.pack=ie,m.packEnclose=I,m.packSiblings=U,m.partition=ye,m.stratify=Ve,m.tree=Ft,m.treemap=Nt,m.treemapBinary=Ct,m.treemapDice=ue,m.treemapResquarify=at,m.treemapSlice=Qt,m.treemapSliceDice=Xe,m.treemapSquarify=Xt,Object.defineProperty(m,"__esModule",{value:!0})})},{}],116:[function(t,B,V){(function(m,c){typeof V=="object"&&typeof B<"u"?c(V,t("d3-color")):(m=m||self,c(m.d3=m.d3||{},m.d3))})(this,function(m,c){function A(Ae,Le,je,Ye,ze){var Ie=Ae*Ae,We=Ie*Ae;return((1-3*Ae+3*Ie-We)*Le+(4-6*Ie+3*We)*je+(1+3*Ae+3*Ie-3*We)*Ye+We*ze)/6}function T(Ae){var Le=Ae.length-1;return function(je){var Ye=je<=0?je=0:je>=1?(je=1,Le-1):Math.floor(je*Le),ze=Ae[Ye],Ie=Ae[Ye+1],We=Ye>0?Ae[Ye-1]:2*ze-Ie,pt=Ye<Le-1?Ae[Ye+2]:2*Ie-ze;return A((je-Ye/Le)*Le,We,ze,Ie,pt)}}function e(Ae){var Le=Ae.length;return function(je){var Ye=Math.floor(((je%=1)<0?++je:je)*Le),ze=Ae[(Ye+Le-1)%Le],Ie=Ae[Ye%Le],We=Ae[(Ye+1)%Le],pt=Ae[(Ye+2)%Le];return A((je-Ye/Le)*Le,ze,Ie,We,pt)}}function a(Ae){return function(){return Ae}}function i(Ae,Le){return function(je){return Ae+je*Le}}function n(Ae,Le,je){return Ae=Math.pow(Ae,je),Le=Math.pow(Le,je)-Ae,je=1/je,function(Ye){return Math.pow(Ae+Ye*Le,je)}}function r(Ae,Le){var je=Le-Ae;return je?i(Ae,je>180||je<-180?je-360*Math.round(je/360):je):a(isNaN(Ae)?Le:Ae)}function v(Ae){return(Ae=+Ae)==1?s:function(Le,je){return je-Le?n(Le,je,Ae):a(isNaN(Le)?je:Le)}}function s(Ae,Le){var je=Le-Ae;return je?i(Ae,je):a(isNaN(Ae)?Le:Ae)}var o=function Ae(Le){var je=v(Le);function Ye(ze,Ie){var We=je((ze=c.rgb(ze)).r,(Ie=c.rgb(Ie)).r),pt=je(ze.g,Ie.g),Ft=je(ze.b,Ie.b),Qt=s(ze.opacity,Ie.opacity);return function(zt){return ze.r=We(zt),ze.g=pt(zt),ze.b=Ft(zt),ze.opacity=Qt(zt),ze+""}}return Ye.gamma=Ae,Ye}(1);function b(Ae){return function(Le){var je=Le.length,Ye=new Array(je),ze=new Array(je),Ie=new Array(je),We,pt;for(We=0;We<je;++We)pt=c.rgb(Le[We]),Ye[We]=pt.r||0,ze[We]=pt.g||0,Ie[We]=pt.b||0;return Ye=Ae(Ye),ze=Ae(ze),Ie=Ae(Ie),pt.opacity=1,function(Ft){return pt.r=Ye(Ft),pt.g=ze(Ft),pt.b=Ie(Ft),pt+""}}}var g=b(T),d=b(e);function f(Ae,Le){Le||(Le=[]);var je=Ae?Math.min(Le.length,Ae.length):0,Ye=Le.slice(),ze;return function(Ie){for(ze=0;ze<je;++ze)Ye[ze]=Ae[ze]*(1-Ie)+Le[ze]*Ie;return Ye}}function y(Ae){return ArrayBuffer.isView(Ae)&&!(Ae instanceof DataView)}function l(Ae,Le){return(y(Le)?f:x)(Ae,Le)}function x(Ae,Le){var je=Le?Le.length:0,Ye=Ae?Math.min(je,Ae.length):0,ze=new Array(Ye),Ie=new Array(je),We;for(We=0;We<Ye;++We)ze[We]=E(Ae[We],Le[We]);for(;We<je;++We)Ie[We]=Le[We];return function(pt){for(We=0;We<Ye;++We)Ie[We]=ze[We](pt);return Ie}}function u(Ae,Le){var je=new Date;return Ae=+Ae,Le=+Le,function(Ye){return je.setTime(Ae*(1-Ye)+Le*Ye),je}}function M(Ae,Le){return Ae=+Ae,Le=+Le,function(je){return Ae*(1-je)+Le*je}}function _(Ae,Le){var je={},Ye={},ze;(Ae===null||typeof Ae!="object")&&(Ae={}),(Le===null||typeof Le!="object")&&(Le={});for(ze in Le)ze in Ae?je[ze]=E(Ae[ze],Le[ze]):Ye[ze]=Le[ze];return function(Ie){for(ze in je)Ye[ze]=je[ze](Ie);return Ye}}var p=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,w=new RegExp(p.source,"g");function h(Ae){return function(){return Ae}}function L(Ae){return function(Le){return Ae(Le)+""}}function S(Ae,Le){var je=p.lastIndex=w.lastIndex=0,Ye,ze,Ie,We=-1,pt=[],Ft=[];for(Ae=Ae+"",Le=Le+"";(Ye=p.exec(Ae))&&(ze=w.exec(Le));)(Ie=ze.index)>je&&(Ie=Le.slice(je,Ie),pt[We]?pt[We]+=Ie:pt[++We]=Ie),(Ye=Ye[0])===(ze=ze[0])?pt[We]?pt[We]+=ze:pt[++We]=ze:(pt[++We]=null,Ft.push({i:We,x:M(Ye,ze)})),je=w.lastIndex;return je<Le.length&&(Ie=Le.slice(je),pt[We]?pt[We]+=Ie:pt[++We]=Ie),pt.length<2?Ft[0]?L(Ft[0].x):h(Le):(Le=Ft.length,function(Qt){for(var zt=0,Et;zt<Le;++zt)pt[(Et=Ft[zt]).i]=Et.x(Qt);return pt.join("")})}function E(Ae,Le){var je=typeof Le,Ye;return Le==null||je==="boolean"?a(Le):(je==="number"?M:je==="string"?(Ye=c.color(Le))?(Le=Ye,o):S:Le instanceof c.color?o:Le instanceof Date?u:y(Le)?f:Array.isArray(Le)?x:typeof Le.valueOf!="function"&&typeof Le.toString!="function"||isNaN(Le)?_:M)(Ae,Le)}function P(Ae){var Le=Ae.length;return function(je){return Ae[Math.max(0,Math.min(Le-1,Math.floor(je*Le)))]}}function F(Ae,Le){var je=r(+Ae,+Le);return function(Ye){var ze=je(Ye);return ze-360*Math.floor(ze/360)}}function I(Ae,Le){return Ae=+Ae,Le=+Le,function(je){return Math.round(Ae*(1-je)+Le*je)}}var D=180/Math.PI,R={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function N(Ae,Le,je,Ye,ze,Ie){var We,pt,Ft;return(We=Math.sqrt(Ae*Ae+Le*Le))&&(Ae/=We,Le/=We),(Ft=Ae*je+Le*Ye)&&(je-=Ae*Ft,Ye-=Le*Ft),(pt=Math.sqrt(je*je+Ye*Ye))&&(je/=pt,Ye/=pt,Ft/=pt),Ae*Ye<Le*je&&(Ae=-Ae,Le=-Le,Ft=-Ft,We=-We),{translateX:ze,translateY:Ie,rotate:Math.atan2(Le,Ae)*D,skewX:Math.atan(Ft)*D,scaleX:We,scaleY:pt}}var z,G,Y,ee;function Z(Ae){return Ae==="none"?R:(z||(z=document.createElement("DIV"),G=document.documentElement,Y=document.defaultView),z.style.transform=Ae,Ae=Y.getComputedStyle(G.appendChild(z),null).getPropertyValue("transform"),G.removeChild(z),Ae=Ae.slice(7,-1).split(","),N(+Ae[0],+Ae[1],+Ae[2],+Ae[3],+Ae[4],+Ae[5]))}function X(Ae){return Ae==null||(ee||(ee=document.createElementNS("http://www.w3.org/2000/svg","g")),ee.setAttribute("transform",Ae),!(Ae=ee.transform.baseVal.consolidate()))?R:(Ae=Ae.matrix,N(Ae.a,Ae.b,Ae.c,Ae.d,Ae.e,Ae.f))}function ne(Ae,Le,je,Ye){function ze(Qt){return Qt.length?Qt.pop()+" ":""}function Ie(Qt,zt,Et,Xt,Nt,Ct){if(Qt!==Et||zt!==Xt){var Xe=Nt.push("translate(",null,Le,null,je);Ct.push({i:Xe-4,x:M(Qt,Et)},{i:Xe-2,x:M(zt,Xt)})}else(Et||Xt)&&Nt.push("translate("+Et+Le+Xt+je)}function We(Qt,zt,Et,Xt){Qt!==zt?(Qt-zt>180?zt+=360:zt-Qt>180&&(Qt+=360),Xt.push({i:Et.push(ze(Et)+"rotate(",null,Ye)-2,x:M(Qt,zt)})):zt&&Et.push(ze(Et)+"rotate("+zt+Ye)}function pt(Qt,zt,Et,Xt){Qt!==zt?Xt.push({i:Et.push(ze(Et)+"skewX(",null,Ye)-2,x:M(Qt,zt)}):zt&&Et.push(ze(Et)+"skewX("+zt+Ye)}function Ft(Qt,zt,Et,Xt,Nt,Ct){if(Qt!==Et||zt!==Xt){var Xe=Nt.push(ze(Nt)+"scale(",null,",",null,")");Ct.push({i:Xe-4,x:M(Qt,Et)},{i:Xe-2,x:M(zt,Xt)})}else(Et!==1||Xt!==1)&&Nt.push(ze(Nt)+"scale("+Et+","+Xt+")")}return function(Qt,zt){var Et=[],Xt=[];return Qt=Ae(Qt),zt=Ae(zt),Ie(Qt.translateX,Qt.translateY,zt.translateX,zt.translateY,Et,Xt),We(Qt.rotate,zt.rotate,Et,Xt),pt(Qt.skewX,zt.skewX,Et,Xt),Ft(Qt.scaleX,Qt.scaleY,zt.scaleX,zt.scaleY,Et,Xt),Qt=zt=null,function(Nt){for(var Ct=-1,Xe=Xt.length,at;++Ct<Xe;)Et[(at=Xt[Ct]).i]=at.x(Nt);return Et.join("")}}}var ce=ne(Z,"px, ","px)","deg)"),Q=ne(X,", ",")",")"),K=Math.SQRT2,U=2,H=4,q=1e-12;function re(Ae){return((Ae=Math.exp(Ae))+1/Ae)/2}function j(Ae){return((Ae=Math.exp(Ae))-1/Ae)/2}function $(Ae){return((Ae=Math.exp(2*Ae))-1)/(Ae+1)}function ie(Ae,Le){var je=Ae[0],Ye=Ae[1],ze=Ae[2],Ie=Le[0],We=Le[1],pt=Le[2],Ft=Ie-je,Qt=We-Ye,zt=Ft*Ft+Qt*Qt,Et,Xt;if(zt<q)Xt=Math.log(pt/ze)/K,Et=function(Se){return[je+Se*Ft,Ye+Se*Qt,ze*Math.exp(K*Se*Xt)]};else{var Nt=Math.sqrt(zt),Ct=(pt*pt-ze*ze+H*zt)/(2*ze*U*Nt),Xe=(pt*pt-ze*ze-H*zt)/(2*pt*U*Nt),at=Math.log(Math.sqrt(Ct*Ct+1)-Ct),Ge=Math.log(Math.sqrt(Xe*Xe+1)-Xe);Xt=(Ge-at)/K,Et=function(Se){var He=Se*Xt,Ke=re(at),qe=ze/(U*Nt)*(Ke*$(K*He+at)-j(at));return[je+qe*Ft,Ye+qe*Qt,ze*Ke/re(K*He+at)]}}return Et.duration=Xt*1e3,Et}function oe(Ae){return function(Le,je){var Ye=Ae((Le=c.hsl(Le)).h,(je=c.hsl(je)).h),ze=s(Le.s,je.s),Ie=s(Le.l,je.l),We=s(Le.opacity,je.opacity);return function(pt){return Le.h=Ye(pt),Le.s=ze(pt),Le.l=Ie(pt),Le.opacity=We(pt),Le+""}}}var ae=oe(r),se=oe(s);function _e(Ae,Le){var je=s((Ae=c.lab(Ae)).l,(Le=c.lab(Le)).l),Ye=s(Ae.a,Le.a),ze=s(Ae.b,Le.b),Ie=s(Ae.opacity,Le.opacity);return function(We){return Ae.l=je(We),Ae.a=Ye(We),Ae.b=ze(We),Ae.opacity=Ie(We),Ae+""}}function ue(Ae){return function(Le,je){var Ye=Ae((Le=c.hcl(Le)).h,(je=c.hcl(je)).h),ze=s(Le.c,je.c),Ie=s(Le.l,je.l),We=s(Le.opacity,je.opacity);return function(pt){return Le.h=Ye(pt),Le.c=ze(pt),Le.l=Ie(pt),Le.opacity=We(pt),Le+""}}}var ye=ue(r),xe=ue(s);function me(Ae){return function Le(je){je=+je;function Ye(ze,Ie){var We=Ae((ze=c.cubehelix(ze)).h,(Ie=c.cubehelix(Ie)).h),pt=s(ze.s,Ie.s),Ft=s(ze.l,Ie.l),Qt=s(ze.opacity,Ie.opacity);return function(zt){return ze.h=We(zt),ze.s=pt(zt),ze.l=Ft(Math.pow(zt,je)),ze.opacity=Qt(zt),ze+""}}return Ye.gamma=Le,Ye}(1)}var be=me(r),ke=me(s);function De(Ae,Le){for(var je=0,Ye=Le.length-1,ze=Le[0],Ie=new Array(Ye<0?0:Ye);je<Ye;)Ie[je]=Ae(ze,ze=Le[++je]);return function(We){var pt=Math.max(0,Math.min(Ye-1,Math.floor(We*=Ye)));return Ie[pt](We-pt)}}function Ve(Ae,Le){for(var je=new Array(Le),Ye=0;Ye<Le;++Ye)je[Ye]=Ae(Ye/(Le-1));return je}m.interpolate=E,m.interpolateArray=l,m.interpolateBasis=T,m.interpolateBasisClosed=e,m.interpolateCubehelix=be,m.interpolateCubehelixLong=ke,m.interpolateDate=u,m.interpolateDiscrete=P,m.interpolateHcl=ye,m.interpolateHclLong=xe,m.interpolateHsl=ae,m.interpolateHslLong=se,m.interpolateHue=F,m.interpolateLab=_e,m.interpolateNumber=M,m.interpolateNumberArray=f,m.interpolateObject=_,m.interpolateRgb=o,m.interpolateRgbBasis=g,m.interpolateRgbBasisClosed=d,m.interpolateRound=I,m.interpolateString=S,m.interpolateTransformCss=ce,m.interpolateTransformSvg=Q,m.interpolateZoom=ie,m.piecewise=De,m.quantize=Ve,Object.defineProperty(m,"__esModule",{value:!0})})},{"d3-color":109}],117:[function(t,B,V){(function(m,c){typeof V=="object"&&typeof B<"u"?c(V):(m=m||self,c(m.d3=m.d3||{}))})(this,function(m){var c=Math.PI,A=2*c,T=1e-6,e=A-T;function a(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function i(){return new a}a.prototype=i.prototype={constructor:a,moveTo:function(n,r){this._+="M"+(this._x0=this._x1=+n)+","+(this._y0=this._y1=+r)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(n,r){this._+="L"+(this._x1=+n)+","+(this._y1=+r)},quadraticCurveTo:function(n,r,v,s){this._+="Q"+ +n+","+ +r+","+(this._x1=+v)+","+(this._y1=+s)},bezierCurveTo:function(n,r,v,s,o,b){this._+="C"+ +n+","+ +r+","+ +v+","+ +s+","+(this._x1=+o)+","+(this._y1=+b)},arcTo:function(n,r,v,s,o){n=+n,r=+r,v=+v,s=+s,o=+o;var b=this._x1,g=this._y1,d=v-n,f=s-r,y=b-n,l=g-r,x=y*y+l*l;if(o<0)throw new Error("negative radius: "+o);if(this._x1===null)this._+="M"+(this._x1=n)+","+(this._y1=r);else if(x>T)if(!(Math.abs(l*d-f*y)>T)||!o)this._+="L"+(this._x1=n)+","+(this._y1=r);else{var u=v-b,M=s-g,_=d*d+f*f,p=u*u+M*M,w=Math.sqrt(_),h=Math.sqrt(x),L=o*Math.tan((c-Math.acos((_+x-p)/(2*w*h)))/2),S=L/h,E=L/w;Math.abs(S-1)>T&&(this._+="L"+(n+S*y)+","+(r+S*l)),this._+="A"+o+","+o+",0,0,"+ +(l*u>y*M)+","+(this._x1=n+E*d)+","+(this._y1=r+E*f)}},arc:function(n,r,v,s,o,b){n=+n,r=+r,v=+v,b=!!b;var g=v*Math.cos(s),d=v*Math.sin(s),f=n+g,y=r+d,l=1^b,x=b?s-o:o-s;if(v<0)throw new Error("negative radius: "+v);this._x1===null?this._+="M"+f+","+y:(Math.abs(this._x1-f)>T||Math.abs(this._y1-y)>T)&&(this._+="L"+f+","+y),v&&(x<0&&(x=x%A+A),x>e?this._+="A"+v+","+v+",0,1,"+l+","+(n-g)+","+(r-d)+"A"+v+","+v+",0,1,"+l+","+(this._x1=f)+","+(this._y1=y):x>T&&(this._+="A"+v+","+v+",0,"+ +(x>=c)+","+l+","+(this._x1=n+v*Math.cos(o))+","+(this._y1=r+v*Math.sin(o))))},rect:function(n,r,v,s){this._+="M"+(this._x0=this._x1=+n)+","+(this._y0=this._y1=+r)+"h"+ +v+"v"+ +s+"h"+-v+"Z"},toString:function(){return this._}},m.path=i,Object.defineProperty(m,"__esModule",{value:!0})})},{}],118:[function(t,B,V){(function(m,c){typeof V=="object"&&typeof B<"u"?c(V):(m=m||self,c(m.d3=m.d3||{}))})(this,function(m){function c(w){var h=+this._x.call(null,w),L=+this._y.call(null,w);return A(this.cover(h,L),h,L,w)}function A(w,h,L,S){if(isNaN(h)||isNaN(L))return w;var E,P=w._root,F={data:S},I=w._x0,D=w._y0,R=w._x1,N=w._y1,z,G,Y,ee,Z,X,ne,ce;if(!P)return w._root=F,w;for(;P.length;)if((Z=h>=(z=(I+R)/2))?I=z:R=z,(X=L>=(G=(D+N)/2))?D=G:N=G,E=P,!(P=P[ne=X<<1|Z]))return E[ne]=F,w;if(Y=+w._x.call(null,P.data),ee=+w._y.call(null,P.data),h===Y&&L===ee)return F.next=P,E?E[ne]=F:w._root=F,w;do E=E?E[ne]=new Array(4):w._root=new Array(4),(Z=h>=(z=(I+R)/2))?I=z:R=z,(X=L>=(G=(D+N)/2))?D=G:N=G;while((ne=X<<1|Z)===(ce=(ee>=G)<<1|Y>=z));return E[ce]=P,E[ne]=F,w}function T(w){var h,L,S=w.length,E,P,F=new Array(S),I=new Array(S),D=1/0,R=1/0,N=-1/0,z=-1/0;for(L=0;L<S;++L)isNaN(E=+this._x.call(null,h=w[L]))||isNaN(P=+this._y.call(null,h))||(F[L]=E,I[L]=P,E<D&&(D=E),E>N&&(N=E),P<R&&(R=P),P>z&&(z=P));if(D>N||R>z)return this;for(this.cover(D,R).cover(N,z),L=0;L<S;++L)A(this,F[L],I[L],w[L]);return this}function e(w,h){if(isNaN(w=+w)||isNaN(h=+h))return this;var L=this._x0,S=this._y0,E=this._x1,P=this._y1;if(isNaN(L))E=(L=Math.floor(w))+1,P=(S=Math.floor(h))+1;else{for(var F=E-L,I=this._root,D,R;L>w||w>=E||S>h||h>=P;)switch(R=(h<S)<<1|w<L,D=new Array(4),D[R]=I,I=D,F*=2,R){case 0:E=L+F,P=S+F;break;case 1:L=E-F,P=S+F;break;case 2:E=L+F,S=P-F;break;case 3:L=E-F,S=P-F;break}this._root&&this._root.length&&(this._root=I)}return this._x0=L,this._y0=S,this._x1=E,this._y1=P,this}function a(){var w=[];return this.visit(function(h){if(!h.length)do w.push(h.data);while(h=h.next)}),w}function i(w){return arguments.length?this.cover(+w[0][0],+w[0][1]).cover(+w[1][0],+w[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function n(w,h,L,S,E){this.node=w,this.x0=h,this.y0=L,this.x1=S,this.y1=E}function r(w,h,L){var S,E=this._x0,P=this._y0,F,I,D,R,N=this._x1,z=this._y1,G=[],Y=this._root,ee,Z;for(Y&&G.push(new n(Y,E,P,N,z)),L==null?L=1/0:(E=w-L,P=h-L,N=w+L,z=h+L,L*=L);ee=G.pop();)if(!(!(Y=ee.node)||(F=ee.x0)>N||(I=ee.y0)>z||(D=ee.x1)<E||(R=ee.y1)<P))if(Y.length){var X=(F+D)/2,ne=(I+R)/2;G.push(new n(Y[3],X,ne,D,R),new n(Y[2],F,ne,X,R),new n(Y[1],X,I,D,ne),new n(Y[0],F,I,X,ne)),(Z=(h>=ne)<<1|w>=X)&&(ee=G[G.length-1],G[G.length-1]=G[G.length-1-Z],G[G.length-1-Z]=ee)}else{var ce=w-+this._x.call(null,Y.data),Q=h-+this._y.call(null,Y.data),K=ce*ce+Q*Q;if(K<L){var U=Math.sqrt(L=K);E=w-U,P=h-U,N=w+U,z=h+U,S=Y.data}}return S}function v(w){if(isNaN(N=+this._x.call(null,w))||isNaN(z=+this._y.call(null,w)))return this;var h,L=this._root,S,E,P,F=this._x0,I=this._y0,D=this._x1,R=this._y1,N,z,G,Y,ee,Z,X,ne;if(!L)return this;if(L.length)for(;;){if((ee=N>=(G=(F+D)/2))?F=G:D=G,(Z=z>=(Y=(I+R)/2))?I=Y:R=Y,h=L,!(L=L[X=Z<<1|ee]))return this;if(!L.length)break;(h[X+1&3]||h[X+2&3]||h[X+3&3])&&(S=h,ne=X)}for(;L.data!==w;)if(E=L,!(L=L.next))return this;return(P=L.next)&&delete L.next,E?(P?E.next=P:delete E.next,this):h?(P?h[X]=P:delete h[X],(L=h[0]||h[1]||h[2]||h[3])&&L===(h[3]||h[2]||h[1]||h[0])&&!L.length&&(S?S[ne]=L:this._root=L),this):(this._root=P,this)}function s(w){for(var h=0,L=w.length;h<L;++h)this.remove(w[h]);return this}function o(){return this._root}function b(){var w=0;return this.visit(function(h){if(!h.length)do++w;while(h=h.next)}),w}function g(w){var h=[],L,S=this._root,E,P,F,I,D;for(S&&h.push(new n(S,this._x0,this._y0,this._x1,this._y1));L=h.pop();)if(!w(S=L.node,P=L.x0,F=L.y0,I=L.x1,D=L.y1)&&S.length){var R=(P+I)/2,N=(F+D)/2;(E=S[3])&&h.push(new n(E,R,N,I,D)),(E=S[2])&&h.push(new n(E,P,N,R,D)),(E=S[1])&&h.push(new n(E,R,F,I,N)),(E=S[0])&&h.push(new n(E,P,F,R,N))}return this}function d(w){var h=[],L=[],S;for(this._root&&h.push(new n(this._root,this._x0,this._y0,this._x1,this._y1));S=h.pop();){var E=S.node;if(E.length){var P,F=S.x0,I=S.y0,D=S.x1,R=S.y1,N=(F+D)/2,z=(I+R)/2;(P=E[0])&&h.push(new n(P,F,I,N,z)),(P=E[1])&&h.push(new n(P,N,I,D,z)),(P=E[2])&&h.push(new n(P,F,z,N,R)),(P=E[3])&&h.push(new n(P,N,z,D,R))}L.push(S)}for(;S=L.pop();)w(S.node,S.x0,S.y0,S.x1,S.y1);return this}function f(w){return w[0]}function y(w){return arguments.length?(this._x=w,this):this._x}function l(w){return w[1]}function x(w){return arguments.length?(this._y=w,this):this._y}function u(w,h,L){var S=new M(h==null?f:h,L==null?l:L,NaN,NaN,NaN,NaN);return w==null?S:S.addAll(w)}function M(w,h,L,S,E,P){this._x=w,this._y=h,this._x0=L,this._y0=S,this._x1=E,this._y1=P,this._root=void 0}function _(w){for(var h={data:w.data},L=h;w=w.next;)L=L.next={data:w.data};return h}var p=u.prototype=M.prototype;p.copy=function(){var w=new M(this._x,this._y,this._x0,this._y0,this._x1,this._y1),h=this._root,L,S;if(!h)return w;if(!h.length)return w._root=_(h),w;for(L=[{source:h,target:w._root=new Array(4)}];h=L.pop();)for(var E=0;E<4;++E)(S=h.source[E])&&(S.length?L.push({source:S,target:h.target[E]=new Array(4)}):h.target[E]=_(S));return w},p.add=c,p.addAll=T,p.cover=e,p.data=a,p.extent=i,p.find=r,p.remove=v,p.removeAll=s,p.root=o,p.size=b,p.visit=g,p.visitAfter=d,p.x=y,p.y=x,m.quadtree=u,Object.defineProperty(m,"__esModule",{value:!0})})},{}],119:[function(t,B,V){(function(m,c){typeof V=="object"&&typeof B<"u"?c(V,t("d3-path")):(m=m||self,c(m.d3=m.d3||{},m.d3))})(this,function(m,c){function A(nt){return function(){return nt}}var T=Math.abs,e=Math.atan2,a=Math.cos,i=Math.max,n=Math.min,r=Math.sin,v=Math.sqrt,s=1e-12,o=Math.PI,b=o/2,g=2*o;function d(nt){return nt>1?0:nt<-1?o:Math.acos(nt)}function f(nt){return nt>=1?b:nt<=-1?-b:Math.asin(nt)}function y(nt){return nt.innerRadius}function l(nt){return nt.outerRadius}function x(nt){return nt.startAngle}function u(nt){return nt.endAngle}function M(nt){return nt&&nt.padAngle}function _(nt,Dt,Zt,sr,zr,Ur,Lr,Tr){var Wr=Zt-nt,An=sr-Dt,vn=Lr-zr,Un=Tr-Ur,Ln=Un*Wr-vn*An;if(!(Ln*Ln<s))return Ln=(vn*(Dt-Ur)-Un*(nt-zr))/Ln,[nt+Ln*Wr,Dt+Ln*An]}function p(nt,Dt,Zt,sr,zr,Ur,Lr){var Tr=nt-Zt,Wr=Dt-sr,An=(Lr?Ur:-Ur)/v(Tr*Tr+Wr*Wr),vn=An*Wr,Un=-An*Tr,Ln=nt+vn,Zn=Dt+Un,Wn=Zt+vn,ya=sr+Un,ka=(Ln+Wn)/2,di=(Zn+ya)/2,Xa=Wn-Ln,$a=ya-Zn,Ka=Xa*Xa+$a*$a,Mr=zr-Ur,gn=Ln*ya-Wn*Zn,hn=($a<0?-1:1)*v(i(0,Mr*Mr*Ka-gn*gn)),Sn=(gn*$a-Xa*hn)/Ka,Jn=(-gn*Xa-$a*hn)/Ka,ha=(gn*$a+Xa*hn)/Ka,na=(-gn*Xa+$a*hn)/Ka,Fn=Sn-ka,Kn=Jn-di,Ya=ha-ka,hi=na-di;return Fn*Fn+Kn*Kn>Ya*Ya+hi*hi&&(Sn=ha,Jn=na),{cx:Sn,cy:Jn,x01:-vn,y01:-Un,x11:Sn*(zr/Mr-1),y11:Jn*(zr/Mr-1)}}function w(){var nt=y,Dt=l,Zt=A(0),sr=null,zr=x,Ur=u,Lr=M,Tr=null;function Wr(){var An,vn,Un=+nt.apply(this,arguments),Ln=+Dt.apply(this,arguments),Zn=zr.apply(this,arguments)-b,Wn=Ur.apply(this,arguments)-b,ya=T(Wn-Zn),ka=Wn>Zn;if(Tr||(Tr=An=c.path()),Ln<Un&&(vn=Ln,Ln=Un,Un=vn),!(Ln>s))Tr.moveTo(0,0);else if(ya>g-s)Tr.moveTo(Ln*a(Zn),Ln*r(Zn)),Tr.arc(0,0,Ln,Zn,Wn,!ka),Un>s&&(Tr.moveTo(Un*a(Wn),Un*r(Wn)),Tr.arc(0,0,Un,Wn,Zn,ka));else{var di=Zn,Xa=Wn,$a=Zn,Ka=Wn,Mr=ya,gn=ya,hn=Lr.apply(this,arguments)/2,Sn=hn>s&&(sr?+sr.apply(this,arguments):v(Un*Un+Ln*Ln)),Jn=n(T(Ln-Un)/2,+Zt.apply(this,arguments)),ha=Jn,na=Jn,Fn,Kn;if(Sn>s){var Ya=f(Sn/Un*r(hn)),hi=f(Sn/Ln*r(hn));(Mr-=Ya*2)>s?(Ya*=ka?1:-1,$a+=Ya,Ka-=Ya):(Mr=0,$a=Ka=(Zn+Wn)/2),(gn-=hi*2)>s?(hi*=ka?1:-1,di+=hi,Xa-=hi):(gn=0,di=Xa=(Zn+Wn)/2)}var Gt=Ln*a(di),pr=Ln*r(di),an=Un*a(Ka),dn=Un*r(Ka);if(Jn>s){var rn=Ln*a(Xa),Mn=Ln*r(Xa),_n=Un*a($a),fn=Un*r($a),mr;if(ya<o&&(mr=_(Gt,pr,_n,fn,rn,Mn,an,dn))){var br=Gt-mr[0],Nr=pr-mr[1],mn=rn-mr[0],Bn=Mn-mr[1],aa=1/r(d((br*mn+Nr*Bn)/(v(br*br+Nr*Nr)*v(mn*mn+Bn*Bn)))/2),Tn=v(mr[0]*mr[0]+mr[1]*mr[1]);ha=n(Jn,(Un-Tn)/(aa-1)),na=n(Jn,(Ln-Tn)/(aa+1))}}gn>s?na>s?(Fn=p(_n,fn,Gt,pr,Ln,na,ka),Kn=p(rn,Mn,an,dn,Ln,na,ka),Tr.moveTo(Fn.cx+Fn.x01,Fn.cy+Fn.y01),na<Jn?Tr.arc(Fn.cx,Fn.cy,na,e(Fn.y01,Fn.x01),e(Kn.y01,Kn.x01),!ka):(Tr.arc(Fn.cx,Fn.cy,na,e(Fn.y01,Fn.x01),e(Fn.y11,Fn.x11),!ka),Tr.arc(0,0,Ln,e(Fn.cy+Fn.y11,Fn.cx+Fn.x11),e(Kn.cy+Kn.y11,Kn.cx+Kn.x11),!ka),Tr.arc(Kn.cx,Kn.cy,na,e(Kn.y11,Kn.x11),e(Kn.y01,Kn.x01),!ka))):(Tr.moveTo(Gt,pr),Tr.arc(0,0,Ln,di,Xa,!ka)):Tr.moveTo(Gt,pr),!(Un>s)||!(Mr>s)?Tr.lineTo(an,dn):ha>s?(Fn=p(an,dn,rn,Mn,Un,-ha,ka),Kn=p(Gt,pr,_n,fn,Un,-ha,ka),Tr.lineTo(Fn.cx+Fn.x01,Fn.cy+Fn.y01),ha<Jn?Tr.arc(Fn.cx,Fn.cy,ha,e(Fn.y01,Fn.x01),e(Kn.y01,Kn.x01),!ka):(Tr.arc(Fn.cx,Fn.cy,ha,e(Fn.y01,Fn.x01),e(Fn.y11,Fn.x11),!ka),Tr.arc(0,0,Un,e(Fn.cy+Fn.y11,Fn.cx+Fn.x11),e(Kn.cy+Kn.y11,Kn.cx+Kn.x11),ka),Tr.arc(Kn.cx,Kn.cy,ha,e(Kn.y11,Kn.x11),e(Kn.y01,Kn.x01),!ka))):Tr.arc(0,0,Un,Ka,$a,ka)}if(Tr.closePath(),An)return Tr=null,An+""||null}return Wr.centroid=function(){var An=(+nt.apply(this,arguments)+ +Dt.apply(this,arguments))/2,vn=(+zr.apply(this,arguments)+ +Ur.apply(this,arguments))/2-o/2;return[a(vn)*An,r(vn)*An]},Wr.innerRadius=function(An){return arguments.length?(nt=typeof An=="function"?An:A(+An),Wr):nt},Wr.outerRadius=function(An){return arguments.length?(Dt=typeof An=="function"?An:A(+An),Wr):Dt},Wr.cornerRadius=function(An){return arguments.length?(Zt=typeof An=="function"?An:A(+An),Wr):Zt},Wr.padRadius=function(An){return arguments.length?(sr=An==null?null:typeof An=="function"?An:A(+An),Wr):sr},Wr.startAngle=function(An){return arguments.length?(zr=typeof An=="function"?An:A(+An),Wr):zr},Wr.endAngle=function(An){return arguments.length?(Ur=typeof An=="function"?An:A(+An),Wr):Ur},Wr.padAngle=function(An){return arguments.length?(Lr=typeof An=="function"?An:A(+An),Wr):Lr},Wr.context=function(An){return arguments.length?(Tr=An==null?null:An,Wr):Tr},Wr}function h(nt){this._context=nt}h.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(nt,Dt){switch(nt=+nt,Dt=+Dt,this._point){case 0:this._point=1,this._line?this._context.lineTo(nt,Dt):this._context.moveTo(nt,Dt);break;case 1:this._point=2;default:this._context.lineTo(nt,Dt);break}}};function L(nt){return new h(nt)}function S(nt){return nt[0]}function E(nt){return nt[1]}function P(){var nt=S,Dt=E,Zt=A(!0),sr=null,zr=L,Ur=null;function Lr(Tr){var Wr,An=Tr.length,vn,Un=!1,Ln;for(sr==null&&(Ur=zr(Ln=c.path())),Wr=0;Wr<=An;++Wr)!(Wr<An&&Zt(vn=Tr[Wr],Wr,Tr))===Un&&((Un=!Un)?Ur.lineStart():Ur.lineEnd()),Un&&Ur.point(+nt(vn,Wr,Tr),+Dt(vn,Wr,Tr));if(Ln)return Ur=null,Ln+""||null}return Lr.x=function(Tr){return arguments.length?(nt=typeof Tr=="function"?Tr:A(+Tr),Lr):nt},Lr.y=function(Tr){return arguments.length?(Dt=typeof Tr=="function"?Tr:A(+Tr),Lr):Dt},Lr.defined=function(Tr){return arguments.length?(Zt=typeof Tr=="function"?Tr:A(!!Tr),Lr):Zt},Lr.curve=function(Tr){return arguments.length?(zr=Tr,sr!=null&&(Ur=zr(sr)),Lr):zr},Lr.context=function(Tr){return arguments.length?(Tr==null?sr=Ur=null:Ur=zr(sr=Tr),Lr):sr},Lr}function F(){var nt=S,Dt=null,Zt=A(0),sr=E,zr=A(!0),Ur=null,Lr=L,Tr=null;function Wr(vn){var Un,Ln,Zn,Wn=vn.length,ya,ka=!1,di,Xa=new Array(Wn),$a=new Array(Wn);for(Ur==null&&(Tr=Lr(di=c.path())),Un=0;Un<=Wn;++Un){if(!(Un<Wn&&zr(ya=vn[Un],Un,vn))===ka)if(ka=!ka)Ln=Un,Tr.areaStart(),Tr.lineStart();else{for(Tr.lineEnd(),Tr.lineStart(),Zn=Un-1;Zn>=Ln;--Zn)Tr.point(Xa[Zn],$a[Zn]);Tr.lineEnd(),Tr.areaEnd()}ka&&(Xa[Un]=+nt(ya,Un,vn),$a[Un]=+Zt(ya,Un,vn),Tr.point(Dt?+Dt(ya,Un,vn):Xa[Un],sr?+sr(ya,Un,vn):$a[Un]))}if(di)return Tr=null,di+""||null}function An(){return P().defined(zr).curve(Lr).context(Ur)}return Wr.x=function(vn){return arguments.length?(nt=typeof vn=="function"?vn:A(+vn),Dt=null,Wr):nt},Wr.x0=function(vn){return arguments.length?(nt=typeof vn=="function"?vn:A(+vn),Wr):nt},Wr.x1=function(vn){return arguments.length?(Dt=vn==null?null:typeof vn=="function"?vn:A(+vn),Wr):Dt},Wr.y=function(vn){return arguments.length?(Zt=typeof vn=="function"?vn:A(+vn),sr=null,Wr):Zt},Wr.y0=function(vn){return arguments.length?(Zt=typeof vn=="function"?vn:A(+vn),Wr):Zt},Wr.y1=function(vn){return arguments.length?(sr=vn==null?null:typeof vn=="function"?vn:A(+vn),Wr):sr},Wr.lineX0=Wr.lineY0=function(){return An().x(nt).y(Zt)},Wr.lineY1=function(){return An().x(nt).y(sr)},Wr.lineX1=function(){return An().x(Dt).y(Zt)},Wr.defined=function(vn){return arguments.length?(zr=typeof vn=="function"?vn:A(!!vn),Wr):zr},Wr.curve=function(vn){return arguments.length?(Lr=vn,Ur!=null&&(Tr=Lr(Ur)),Wr):Lr},Wr.context=function(vn){return arguments.length?(vn==null?Ur=Tr=null:Tr=Lr(Ur=vn),Wr):Ur},Wr}function I(nt,Dt){return Dt<nt?-1:Dt>nt?1:Dt>=nt?0:NaN}function D(nt){return nt}function R(){var nt=D,Dt=I,Zt=null,sr=A(0),zr=A(g),Ur=A(0);function Lr(Tr){var Wr,An=Tr.length,vn,Un,Ln=0,Zn=new Array(An),Wn=new Array(An),ya=+sr.apply(this,arguments),ka=Math.min(g,Math.max(-g,zr.apply(this,arguments)-ya)),di,Xa=Math.min(Math.abs(ka)/An,Ur.apply(this,arguments)),$a=Xa*(ka<0?-1:1),Ka;for(Wr=0;Wr<An;++Wr)(Ka=Wn[Zn[Wr]=Wr]=+nt(Tr[Wr],Wr,Tr))>0&&(Ln+=Ka);for(Dt!=null?Zn.sort(function(Mr,gn){return Dt(Wn[Mr],Wn[gn])}):Zt!=null&&Zn.sort(function(Mr,gn){return Zt(Tr[Mr],Tr[gn])}),Wr=0,Un=Ln?(ka-An*$a)/Ln:0;Wr<An;++Wr,ya=di)vn=Zn[Wr],Ka=Wn[vn],di=ya+(Ka>0?Ka*Un:0)+$a,Wn[vn]={data:Tr[vn],index:Wr,value:Ka,startAngle:ya,endAngle:di,padAngle:Xa};return Wn}return Lr.value=function(Tr){return arguments.length?(nt=typeof Tr=="function"?Tr:A(+Tr),Lr):nt},Lr.sortValues=function(Tr){return arguments.length?(Dt=Tr,Zt=null,Lr):Dt},Lr.sort=function(Tr){return arguments.length?(Zt=Tr,Dt=null,Lr):Zt},Lr.startAngle=function(Tr){return arguments.length?(sr=typeof Tr=="function"?Tr:A(+Tr),Lr):sr},Lr.endAngle=function(Tr){return arguments.length?(zr=typeof Tr=="function"?Tr:A(+Tr),Lr):zr},Lr.padAngle=function(Tr){return arguments.length?(Ur=typeof Tr=="function"?Tr:A(+Tr),Lr):Ur},Lr}var N=G(L);function z(nt){this._curve=nt}z.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(nt,Dt){this._curve.point(Dt*Math.sin(nt),Dt*-Math.cos(nt))}};function G(nt){function Dt(Zt){return new z(nt(Zt))}return Dt._curve=nt,Dt}function Y(nt){var Dt=nt.curve;return nt.angle=nt.x,delete nt.x,nt.radius=nt.y,delete nt.y,nt.curve=function(Zt){return arguments.length?Dt(G(Zt)):Dt()._curve},nt}function ee(){return Y(P().curve(N))}function Z(){var nt=F().curve(N),Dt=nt.curve,Zt=nt.lineX0,sr=nt.lineX1,zr=nt.lineY0,Ur=nt.lineY1;return nt.angle=nt.x,delete nt.x,nt.startAngle=nt.x0,delete nt.x0,nt.endAngle=nt.x1,delete nt.x1,nt.radius=nt.y,delete nt.y,nt.innerRadius=nt.y0,delete nt.y0,nt.outerRadius=nt.y1,delete nt.y1,nt.lineStartAngle=function(){return Y(Zt())},delete nt.lineX0,nt.lineEndAngle=function(){return Y(sr())},delete nt.lineX1,nt.lineInnerRadius=function(){return Y(zr())},delete nt.lineY0,nt.lineOuterRadius=function(){return Y(Ur())},delete nt.lineY1,nt.curve=function(Lr){return arguments.length?Dt(G(Lr)):Dt()._curve},nt}function X(nt,Dt){return[(Dt=+Dt)*Math.cos(nt-=Math.PI/2),Dt*Math.sin(nt)]}var ne=Array.prototype.slice;function ce(nt){return nt.source}function Q(nt){return nt.target}function K(nt){var Dt=ce,Zt=Q,sr=S,zr=E,Ur=null;function Lr(){var Tr,Wr=ne.call(arguments),An=Dt.apply(this,Wr),vn=Zt.apply(this,Wr);if(Ur||(Ur=Tr=c.path()),nt(Ur,+sr.apply(this,(Wr[0]=An,Wr)),+zr.apply(this,Wr),+sr.apply(this,(Wr[0]=vn,Wr)),+zr.apply(this,Wr)),Tr)return Ur=null,Tr+""||null}return Lr.source=function(Tr){return arguments.length?(Dt=Tr,Lr):Dt},Lr.target=function(Tr){return arguments.length?(Zt=Tr,Lr):Zt},Lr.x=function(Tr){return arguments.length?(sr=typeof Tr=="function"?Tr:A(+Tr),Lr):sr},Lr.y=function(Tr){return arguments.length?(zr=typeof Tr=="function"?Tr:A(+Tr),Lr):zr},Lr.context=function(Tr){return arguments.length?(Ur=Tr==null?null:Tr,Lr):Ur},Lr}function U(nt,Dt,Zt,sr,zr){nt.moveTo(Dt,Zt),nt.bezierCurveTo(Dt=(Dt+sr)/2,Zt,Dt,zr,sr,zr)}function H(nt,Dt,Zt,sr,zr){nt.moveTo(Dt,Zt),nt.bezierCurveTo(Dt,Zt=(Zt+zr)/2,sr,Zt,sr,zr)}function q(nt,Dt,Zt,sr,zr){var Ur=X(Dt,Zt),Lr=X(Dt,Zt=(Zt+zr)/2),Tr=X(sr,Zt),Wr=X(sr,zr);nt.moveTo(Ur[0],Ur[1]),nt.bezierCurveTo(Lr[0],Lr[1],Tr[0],Tr[1],Wr[0],Wr[1])}function re(){return K(U)}function j(){return K(H)}function $(){var nt=K(q);return nt.angle=nt.x,delete nt.x,nt.radius=nt.y,delete nt.y,nt}var ie={draw:function(nt,Dt){var Zt=Math.sqrt(Dt/o);nt.moveTo(Zt,0),nt.arc(0,0,Zt,0,g)}},oe={draw:function(nt,Dt){var Zt=Math.sqrt(Dt/5)/2;nt.moveTo(-3*Zt,-Zt),nt.lineTo(-Zt,-Zt),nt.lineTo(-Zt,-3*Zt),nt.lineTo(Zt,-3*Zt),nt.lineTo(Zt,-Zt),nt.lineTo(3*Zt,-Zt),nt.lineTo(3*Zt,Zt),nt.lineTo(Zt,Zt),nt.lineTo(Zt,3*Zt),nt.lineTo(-Zt,3*Zt),nt.lineTo(-Zt,Zt),nt.lineTo(-3*Zt,Zt),nt.closePath()}},ae=Math.sqrt(1/3),se=ae*2,_e={draw:function(nt,Dt){var Zt=Math.sqrt(Dt/se),sr=Zt*ae;nt.moveTo(0,-Zt),nt.lineTo(sr,0),nt.lineTo(0,Zt),nt.lineTo(-sr,0),nt.closePath()}},ue=.8908130915292852,ye=Math.sin(o/10)/Math.sin(7*o/10),xe=Math.sin(g/10)*ye,me=-Math.cos(g/10)*ye,be={draw:function(nt,Dt){var Zt=Math.sqrt(Dt*ue),sr=xe*Zt,zr=me*Zt;nt.moveTo(0,-Zt),nt.lineTo(sr,zr);for(var Ur=1;Ur<5;++Ur){var Lr=g*Ur/5,Tr=Math.cos(Lr),Wr=Math.sin(Lr);nt.lineTo(Wr*Zt,-Tr*Zt),nt.lineTo(Tr*sr-Wr*zr,Wr*sr+Tr*zr)}nt.closePath()}},ke={draw:function(nt,Dt){var Zt=Math.sqrt(Dt),sr=-Zt/2;nt.rect(sr,sr,Zt,Zt)}},De=Math.sqrt(3),Ve={draw:function(nt,Dt){var Zt=-Math.sqrt(Dt/(De*3));nt.moveTo(0,Zt*2),nt.lineTo(-De*Zt,-Zt),nt.lineTo(De*Zt,-Zt),nt.closePath()}},Ae=-.5,Le=Math.sqrt(3)/2,je=1/Math.sqrt(12),Ye=(je/2+1)*3,ze={draw:function(nt,Dt){var Zt=Math.sqrt(Dt/Ye),sr=Zt/2,zr=Zt*je,Ur=sr,Lr=Zt*je+Zt,Tr=-Ur,Wr=Lr;nt.moveTo(sr,zr),nt.lineTo(Ur,Lr),nt.lineTo(Tr,Wr),nt.lineTo(Ae*sr-Le*zr,Le*sr+Ae*zr),nt.lineTo(Ae*Ur-Le*Lr,Le*Ur+Ae*Lr),nt.lineTo(Ae*Tr-Le*Wr,Le*Tr+Ae*Wr),nt.lineTo(Ae*sr+Le*zr,Ae*zr-Le*sr),nt.lineTo(Ae*Ur+Le*Lr,Ae*Lr-Le*Ur),nt.lineTo(Ae*Tr+Le*Wr,Ae*Wr-Le*Tr),nt.closePath()}},Ie=[ie,oe,_e,ke,be,Ve,ze];function We(){var nt=A(ie),Dt=A(64),Zt=null;function sr(){var zr;if(Zt||(Zt=zr=c.path()),nt.apply(this,arguments).draw(Zt,+Dt.apply(this,arguments)),zr)return Zt=null,zr+""||null}return sr.type=function(zr){return arguments.length?(nt=typeof zr=="function"?zr:A(zr),sr):nt},sr.size=function(zr){return arguments.length?(Dt=typeof zr=="function"?zr:A(+zr),sr):Dt},sr.context=function(zr){return arguments.length?(Zt=zr==null?null:zr,sr):Zt},sr}function pt(){}function Ft(nt,Dt,Zt){nt._context.bezierCurveTo((2*nt._x0+nt._x1)/3,(2*nt._y0+nt._y1)/3,(nt._x0+2*nt._x1)/3,(nt._y0+2*nt._y1)/3,(nt._x0+4*nt._x1+Dt)/6,(nt._y0+4*nt._y1+Zt)/6)}function Qt(nt){this._context=nt}Qt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Ft(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(nt,Dt){switch(nt=+nt,Dt=+Dt,this._point){case 0:this._point=1,this._line?this._context.lineTo(nt,Dt):this._context.moveTo(nt,Dt);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Ft(this,nt,Dt);break}this._x0=this._x1,this._x1=nt,this._y0=this._y1,this._y1=Dt}};function zt(nt){return new Qt(nt)}function Et(nt){this._context=nt}Et.prototype={areaStart:pt,areaEnd:pt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(nt,Dt){switch(nt=+nt,Dt=+Dt,this._point){case 0:this._point=1,this._x2=nt,this._y2=Dt;break;case 1:this._point=2,this._x3=nt,this._y3=Dt;break;case 2:this._point=3,this._x4=nt,this._y4=Dt,this._context.moveTo((this._x0+4*this._x1+nt)/6,(this._y0+4*this._y1+Dt)/6);break;default:Ft(this,nt,Dt);break}this._x0=this._x1,this._x1=nt,this._y0=this._y1,this._y1=Dt}};function Xt(nt){return new Et(nt)}function Nt(nt){this._context=nt}Nt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(nt,Dt){switch(nt=+nt,Dt=+Dt,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var Zt=(this._x0+4*this._x1+nt)/6,sr=(this._y0+4*this._y1+Dt)/6;this._line?this._context.lineTo(Zt,sr):this._context.moveTo(Zt,sr);break;case 3:this._point=4;default:Ft(this,nt,Dt);break}this._x0=this._x1,this._x1=nt,this._y0=this._y1,this._y1=Dt}};function Ct(nt){return new Nt(nt)}function Xe(nt,Dt){this._basis=new Qt(nt),this._beta=Dt}Xe.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var nt=this._x,Dt=this._y,Zt=nt.length-1;if(Zt>0)for(var sr=nt[0],zr=Dt[0],Ur=nt[Zt]-sr,Lr=Dt[Zt]-zr,Tr=-1,Wr;++Tr<=Zt;)Wr=Tr/Zt,this._basis.point(this._beta*nt[Tr]+(1-this._beta)*(sr+Wr*Ur),this._beta*Dt[Tr]+(1-this._beta)*(zr+Wr*Lr));this._x=this._y=null,this._basis.lineEnd()},point:function(nt,Dt){this._x.push(+nt),this._y.push(+Dt)}};var at=function nt(Dt){function Zt(sr){return Dt===1?new Qt(sr):new Xe(sr,Dt)}return Zt.beta=function(sr){return nt(+sr)},Zt}(.85);function Ge(nt,Dt,Zt){nt._context.bezierCurveTo(nt._x1+nt._k*(nt._x2-nt._x0),nt._y1+nt._k*(nt._y2-nt._y0),nt._x2+nt._k*(nt._x1-Dt),nt._y2+nt._k*(nt._y1-Zt),nt._x2,nt._y2)}function Se(nt,Dt){this._context=nt,this._k=(1-Dt)/6}Se.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Ge(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(nt,Dt){switch(nt=+nt,Dt=+Dt,this._point){case 0:this._point=1,this._line?this._context.lineTo(nt,Dt):this._context.moveTo(nt,Dt);break;case 1:this._point=2,this._x1=nt,this._y1=Dt;break;case 2:this._point=3;default:Ge(this,nt,Dt);break}this._x0=this._x1,this._x1=this._x2,this._x2=nt,this._y0=this._y1,this._y1=this._y2,this._y2=Dt}};var He=function nt(Dt){function Zt(sr){return new Se(sr,Dt)}return Zt.tension=function(sr){return nt(+sr)},Zt}(0);function Ke(nt,Dt){this._context=nt,this._k=(1-Dt)/6}Ke.prototype={areaStart:pt,areaEnd:pt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(nt,Dt){switch(nt=+nt,Dt=+Dt,this._point){case 0:this._point=1,this._x3=nt,this._y3=Dt;break;case 1:this._point=2,this._context.moveTo(this._x4=nt,this._y4=Dt);break;case 2:this._point=3,this._x5=nt,this._y5=Dt;break;default:Ge(this,nt,Dt);break}this._x0=this._x1,this._x1=this._x2,this._x2=nt,this._y0=this._y1,this._y1=this._y2,this._y2=Dt}};var qe=function nt(Dt){function Zt(sr){return new Ke(sr,Dt)}return Zt.tension=function(sr){return nt(+sr)},Zt}(0);function Tt(nt,Dt){this._context=nt,this._k=(1-Dt)/6}Tt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(nt,Dt){switch(nt=+nt,Dt=+Dt,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ge(this,nt,Dt);break}this._x0=this._x1,this._x1=this._x2,this._x2=nt,this._y0=this._y1,this._y1=this._y2,this._y2=Dt}};var mt=function nt(Dt){function Zt(sr){return new Tt(sr,Dt)}return Zt.tension=function(sr){return nt(+sr)},Zt}(0);function At(nt,Dt,Zt){var sr=nt._x1,zr=nt._y1,Ur=nt._x2,Lr=nt._y2;if(nt._l01_a>s){var Tr=2*nt._l01_2a+3*nt._l01_a*nt._l12_a+nt._l12_2a,Wr=3*nt._l01_a*(nt._l01_a+nt._l12_a);sr=(sr*Tr-nt._x0*nt._l12_2a+nt._x2*nt._l01_2a)/Wr,zr=(zr*Tr-nt._y0*nt._l12_2a+nt._y2*nt._l01_2a)/Wr}if(nt._l23_a>s){var An=2*nt._l23_2a+3*nt._l23_a*nt._l12_a+nt._l12_2a,vn=3*nt._l23_a*(nt._l23_a+nt._l12_a);Ur=(Ur*An+nt._x1*nt._l23_2a-Dt*nt._l12_2a)/vn,Lr=(Lr*An+nt._y1*nt._l23_2a-Zt*nt._l12_2a)/vn}nt._context.bezierCurveTo(sr,zr,Ur,Lr,nt._x2,nt._y2)}function Ht(nt,Dt){this._context=nt,this._alpha=Dt}Ht.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(nt,Dt){if(nt=+nt,Dt=+Dt,this._point){var Zt=this._x2-nt,sr=this._y2-Dt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(Zt*Zt+sr*sr,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(nt,Dt):this._context.moveTo(nt,Dt);break;case 1:this._point=2;break;case 2:this._point=3;default:At(this,nt,Dt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=nt,this._y0=this._y1,this._y1=this._y2,this._y2=Dt}};var It=function nt(Dt){function Zt(sr){return Dt?new Ht(sr,Dt):new Se(sr,0)}return Zt.alpha=function(sr){return nt(+sr)},Zt}(.5);function Vt(nt,Dt){this._context=nt,this._alpha=Dt}Vt.prototype={areaStart:pt,areaEnd:pt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(nt,Dt){if(nt=+nt,Dt=+Dt,this._point){var Zt=this._x2-nt,sr=this._y2-Dt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(Zt*Zt+sr*sr,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=nt,this._y3=Dt;break;case 1:this._point=2,this._context.moveTo(this._x4=nt,this._y4=Dt);break;case 2:this._point=3,this._x5=nt,this._y5=Dt;break;default:At(this,nt,Dt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=nt,this._y0=this._y1,this._y1=this._y2,this._y2=Dt}};var jt=function nt(Dt){function Zt(sr){return Dt?new Vt(sr,Dt):new Ke(sr,0)}return Zt.alpha=function(sr){return nt(+sr)},Zt}(.5);function Yt(nt,Dt){this._context=nt,this._alpha=Dt}Yt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(nt,Dt){if(nt=+nt,Dt=+Dt,this._point){var Zt=this._x2-nt,sr=this._y2-Dt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(Zt*Zt+sr*sr,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:At(this,nt,Dt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=nt,this._y0=this._y1,this._y1=this._y2,this._y2=Dt}};var or=function nt(Dt){function Zt(sr){return Dt?new Yt(sr,Dt):new Tt(sr,0)}return Zt.alpha=function(sr){return nt(+sr)},Zt}(.5);function Gr(nt){this._context=nt}Gr.prototype={areaStart:pt,areaEnd:pt,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(nt,Dt){nt=+nt,Dt=+Dt,this._point?this._context.lineTo(nt,Dt):(this._point=1,this._context.moveTo(nt,Dt))}};function on(nt){return new Gr(nt)}function Jr(nt){return nt<0?-1:1}function ot(nt,Dt,Zt){var sr=nt._x1-nt._x0,zr=Dt-nt._x1,Ur=(nt._y1-nt._y0)/(sr||zr<0&&-0),Lr=(Zt-nt._y1)/(zr||sr<0&&-0),Tr=(Ur*zr+Lr*sr)/(sr+zr);return(Jr(Ur)+Jr(Lr))*Math.min(Math.abs(Ur),Math.abs(Lr),.5*Math.abs(Tr))||0}function er(nt,Dt){var Zt=nt._x1-nt._x0;return Zt?(3*(nt._y1-nt._y0)/Zt-Dt)/2:Dt}function Kt(nt,Dt,Zt){var sr=nt._x0,zr=nt._y0,Ur=nt._x1,Lr=nt._y1,Tr=(Ur-sr)/3;nt._context.bezierCurveTo(sr+Tr,zr+Tr*Dt,Ur-Tr,Lr-Tr*Zt,Ur,Lr)}function fr(nt){this._context=nt}fr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Kt(this,this._t0,er(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(nt,Dt){var Zt=NaN;if(nt=+nt,Dt=+Dt,!(nt===this._x1&&Dt===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(nt,Dt):this._context.moveTo(nt,Dt);break;case 1:this._point=2;break;case 2:this._point=3,Kt(this,er(this,Zt=ot(this,nt,Dt)),Zt);break;default:Kt(this,this._t0,Zt=ot(this,nt,Dt));break}this._x0=this._x1,this._x1=nt,this._y0=this._y1,this._y1=Dt,this._t0=Zt}}};function Ar(nt){this._context=new et(nt)}(Ar.prototype=Object.create(fr.prototype)).point=function(nt,Dt){fr.prototype.point.call(this,Dt,nt)};function et(nt){this._context=nt}et.prototype={moveTo:function(nt,Dt){this._context.moveTo(Dt,nt)},closePath:function(){this._context.closePath()},lineTo:function(nt,Dt){this._context.lineTo(Dt,nt)},bezierCurveTo:function(nt,Dt,Zt,sr,zr,Ur){this._context.bezierCurveTo(Dt,nt,sr,Zt,Ur,zr)}};function $e(nt){return new fr(nt)}function st(nt){return new Ar(nt)}function ct(nt){this._context=nt}ct.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var nt=this._x,Dt=this._y,Zt=nt.length;if(Zt)if(this._line?this._context.lineTo(nt[0],Dt[0]):this._context.moveTo(nt[0],Dt[0]),Zt===2)this._context.lineTo(nt[1],Dt[1]);else for(var sr=Mt(nt),zr=Mt(Dt),Ur=0,Lr=1;Lr<Zt;++Ur,++Lr)this._context.bezierCurveTo(sr[0][Ur],zr[0][Ur],sr[1][Ur],zr[1][Ur],nt[Lr],Dt[Lr]);(this._line||this._line!==0&&Zt===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(nt,Dt){this._x.push(+nt),this._y.push(+Dt)}};function Mt(nt){var Dt,Zt=nt.length-1,sr,zr=new Array(Zt),Ur=new Array(Zt),Lr=new Array(Zt);for(zr[0]=0,Ur[0]=2,Lr[0]=nt[0]+2*nt[1],Dt=1;Dt<Zt-1;++Dt)zr[Dt]=1,Ur[Dt]=4,Lr[Dt]=4*nt[Dt]+2*nt[Dt+1];for(zr[Zt-1]=2,Ur[Zt-1]=7,Lr[Zt-1]=8*nt[Zt-1]+nt[Zt],Dt=1;Dt<Zt;++Dt)sr=zr[Dt]/Ur[Dt-1],Ur[Dt]-=sr,Lr[Dt]-=sr*Lr[Dt-1];for(zr[Zt-1]=Lr[Zt-1]/Ur[Zt-1],Dt=Zt-2;Dt>=0;--Dt)zr[Dt]=(Lr[Dt]-zr[Dt+1])/Ur[Dt];for(Ur[Zt-1]=(nt[Zt]+zr[Zt-1])/2,Dt=0;Dt<Zt-1;++Dt)Ur[Dt]=2*nt[Dt+1]-zr[Dt+1];return[zr,Ur]}function Ut(nt){return new ct(nt)}function Pe(nt,Dt){this._context=nt,this._t=Dt}Pe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(nt,Dt){switch(nt=+nt,Dt=+Dt,this._point){case 0:this._point=1,this._line?this._context.lineTo(nt,Dt):this._context.moveTo(nt,Dt);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,Dt),this._context.lineTo(nt,Dt);else{var Zt=this._x*(1-this._t)+nt*this._t;this._context.lineTo(Zt,this._y),this._context.lineTo(Zt,Dt)}break}}this._x=nt,this._y=Dt}};function Ee(nt){return new Pe(nt,.5)}function it(nt){return new Pe(nt,0)}function ut(nt){return new Pe(nt,1)}function vt(nt,Dt){if((Lr=nt.length)>1)for(var Zt=1,sr,zr,Ur=nt[Dt[0]],Lr,Tr=Ur.length;Zt<Lr;++Zt)for(zr=Ur,Ur=nt[Dt[Zt]],sr=0;sr<Tr;++sr)Ur[sr][1]+=Ur[sr][0]=isNaN(zr[sr][1])?zr[sr][0]:zr[sr][1]}function St(nt){for(var Dt=nt.length,Zt=new Array(Dt);--Dt>=0;)Zt[Dt]=Dt;return Zt}function yt(nt,Dt){return nt[Dt]}function Pt(){var nt=A([]),Dt=St,Zt=vt,sr=yt;function zr(Ur){var Lr=nt.apply(this,arguments),Tr,Wr=Ur.length,An=Lr.length,vn=new Array(An),Un;for(Tr=0;Tr<An;++Tr){for(var Ln=Lr[Tr],Zn=vn[Tr]=new Array(Wr),Wn=0,ya;Wn<Wr;++Wn)Zn[Wn]=ya=[0,+sr(Ur[Wn],Ln,Wn,Ur)],ya.data=Ur[Wn];Zn.key=Ln}for(Tr=0,Un=Dt(vn);Tr<An;++Tr)vn[Un[Tr]].index=Tr;return Zt(vn,Un),vn}return zr.keys=function(Ur){return arguments.length?(nt=typeof Ur=="function"?Ur:A(ne.call(Ur)),zr):nt},zr.value=function(Ur){return arguments.length?(sr=typeof Ur=="function"?Ur:A(+Ur),zr):sr},zr.order=function(Ur){return arguments.length?(Dt=Ur==null?St:typeof Ur=="function"?Ur:A(ne.call(Ur)),zr):Dt},zr.offset=function(Ur){return arguments.length?(Zt=Ur==null?vt:Ur,zr):Zt},zr}function Wt(nt,Dt){if((sr=nt.length)>0){for(var Zt,sr,zr=0,Ur=nt[0].length,Lr;zr<Ur;++zr){for(Lr=Zt=0;Zt<sr;++Zt)Lr+=nt[Zt][zr][1]||0;if(Lr)for(Zt=0;Zt<sr;++Zt)nt[Zt][zr][1]/=Lr}vt(nt,Dt)}}function ar(nt,Dt){if((Wr=nt.length)>0)for(var Zt,sr=0,zr,Ur,Lr,Tr,Wr,An=nt[Dt[0]].length;sr<An;++sr)for(Lr=Tr=0,Zt=0;Zt<Wr;++Zt)(Ur=(zr=nt[Dt[Zt]][sr])[1]-zr[0])>0?(zr[0]=Lr,zr[1]=Lr+=Ur):Ur<0?(zr[1]=Tr,zr[0]=Tr+=Ur):(zr[0]=0,zr[1]=Ur)}function kr(nt,Dt){if((zr=nt.length)>0){for(var Zt=0,sr=nt[Dt[0]],zr,Ur=sr.length;Zt<Ur;++Zt){for(var Lr=0,Tr=0;Lr<zr;++Lr)Tr+=nt[Lr][Zt][1]||0;sr[Zt][1]+=sr[Zt][0]=-Tr/2}vt(nt,Dt)}}function wr(nt,Dt){if(!(!((Lr=nt.length)>0)||!((Ur=(zr=nt[Dt[0]]).length)>0))){for(var Zt=0,sr=1,zr,Ur,Lr;sr<Ur;++sr){for(var Tr=0,Wr=0,An=0;Tr<Lr;++Tr){for(var vn=nt[Dt[Tr]],Un=vn[sr][1]||0,Ln=vn[sr-1][1]||0,Zn=(Un-Ln)/2,Wn=0;Wn<Tr;++Wn){var ya=nt[Dt[Wn]],ka=ya[sr][1]||0,di=ya[sr-1][1]||0;Zn+=ka-di}Wr+=Un,An+=Zn*Un}zr[sr-1][1]+=zr[sr-1][0]=Zt,Wr&&(Zt-=An/Wr)}zr[sr-1][1]+=zr[sr-1][0]=Zt,vt(nt,Dt)}}function Sr(nt){var Dt=nt.map(Zr);return St(nt).sort(function(Zt,sr){return Dt[Zt]-Dt[sr]})}function Zr(nt){for(var Dt=-1,Zt=0,sr=nt.length,zr,Ur=-1/0;++Dt<sr;)(zr=+nt[Dt][1])>Ur&&(Ur=zr,Zt=Dt);return Zt}function ir(nt){var Dt=nt.map(xr);return St(nt).sort(function(Zt,sr){return Dt[Zt]-Dt[sr]})}function xr(nt){for(var Dt=0,Zt=-1,sr=nt.length,zr;++Zt<sr;)(zr=+nt[Zt][1])&&(Dt+=zr);return Dt}function Rr(nt){return ir(nt).reverse()}function Br(nt){var Dt=nt.length,Zt,sr,zr=nt.map(xr),Ur=Sr(nt),Lr=0,Tr=0,Wr=[],An=[];for(Zt=0;Zt<Dt;++Zt)sr=Ur[Zt],Lr<Tr?(Lr+=zr[sr],Wr.push(sr)):(Tr+=zr[sr],An.push(sr));return An.reverse().concat(Wr)}function Cr(nt){return St(nt).reverse()}m.arc=w,m.area=F,m.areaRadial=Z,m.curveBasis=zt,m.curveBasisClosed=Xt,m.curveBasisOpen=Ct,m.curveBundle=at,m.curveCardinal=He,m.curveCardinalClosed=qe,m.curveCardinalOpen=mt,m.curveCatmullRom=It,m.curveCatmullRomClosed=jt,m.curveCatmullRomOpen=or,m.curveLinear=L,m.curveLinearClosed=on,m.curveMonotoneX=$e,m.curveMonotoneY=st,m.curveNatural=Ut,m.curveStep=Ee,m.curveStepAfter=ut,m.curveStepBefore=it,m.line=P,m.lineRadial=ee,m.linkHorizontal=re,m.linkRadial=$,m.linkVertical=j,m.pie=R,m.pointRadial=X,m.radialArea=Z,m.radialLine=ee,m.stack=Pt,m.stackOffsetDiverging=ar,m.stackOffsetExpand=Wt,m.stackOffsetNone=vt,m.stackOffsetSilhouette=kr,m.stackOffsetWiggle=wr,m.stackOrderAppearance=Sr,m.stackOrderAscending=ir,m.stackOrderDescending=Rr,m.stackOrderInsideOut=Br,m.stackOrderNone=St,m.stackOrderReverse=Cr,m.symbol=We,m.symbolCircle=ie,m.symbolCross=oe,m.symbolDiamond=_e,m.symbolSquare=ke,m.symbolStar=be,m.symbolTriangle=Ve,m.symbolWye=ze,m.symbols=Ie,Object.defineProperty(m,"__esModule",{value:!0})})},{"d3-path":117}],120:[function(t,B,V){(function(m,c){typeof V=="object"&&typeof B<"u"?c(V,t("d3-time")):(m=m||self,c(m.d3=m.d3||{},m.d3))})(this,function(m,c){function A(Xe){if(0<=Xe.y&&Xe.y<100){var at=new Date(-1,Xe.m,Xe.d,Xe.H,Xe.M,Xe.S,Xe.L);return at.setFullYear(Xe.y),at}return new Date(Xe.y,Xe.m,Xe.d,Xe.H,Xe.M,Xe.S,Xe.L)}function T(Xe){if(0<=Xe.y&&Xe.y<100){var at=new Date(Date.UTC(-1,Xe.m,Xe.d,Xe.H,Xe.M,Xe.S,Xe.L));return at.setUTCFullYear(Xe.y),at}return new Date(Date.UTC(Xe.y,Xe.m,Xe.d,Xe.H,Xe.M,Xe.S,Xe.L))}function e(Xe,at,Ge){return{y:Xe,m:at,d:Ge,H:0,M:0,S:0,L:0}}function a(Xe){var at=Xe.dateTime,Ge=Xe.date,Se=Xe.time,He=Xe.periods,Ke=Xe.days,qe=Xe.shortDays,Tt=Xe.months,mt=Xe.shortMonths,At=b(He),Ht=g(He),It=b(Ke),Vt=g(Ke),jt=b(qe),Yt=g(qe),or=b(Tt),Gr=g(Tt),on=b(mt),Jr=g(mt),ot={a:ut,A:vt,b:St,B:yt,c:null,d:z,e:z,f:X,H:G,I:Y,j:ee,L:Z,m:ne,M:ce,p:Pt,q:Wt,Q:We,s:pt,S:Q,u:K,U,V:H,w:q,W:re,x:null,X:null,y:j,Y:$,Z:ie,"%":Ie},er={a:ar,A:kr,b:wr,B:Sr,c:null,d:oe,e:oe,f:ye,H:ae,I:se,j:_e,L:ue,m:xe,M:me,p:Zr,q:ir,Q:We,s:pt,S:be,u:ke,U:De,V:Ve,w:Ae,W:Le,x:null,X:null,y:je,Y:Ye,Z:ze,"%":Ie},Kt={a:st,A:ct,b:Mt,B:Ut,c:Pe,d:h,e:h,f:I,H:S,I:S,j:L,L:F,m:w,M:E,p:$e,q:p,Q:R,s:N,S:P,u:f,U:y,V:l,w:d,W:x,x:Ee,X:it,y:M,Y:u,Z:_,"%":D};ot.x=fr(Ge,ot),ot.X=fr(Se,ot),ot.c=fr(at,ot),er.x=fr(Ge,er),er.X=fr(Se,er),er.c=fr(at,er);function fr(xr,Rr){return function(Br){var Cr=[],nt=-1,Dt=0,Zt=xr.length,sr,zr,Ur;for(Br instanceof Date||(Br=new Date(+Br));++nt<Zt;)xr.charCodeAt(nt)===37&&(Cr.push(xr.slice(Dt,nt)),(zr=i[sr=xr.charAt(++nt)])!=null?sr=xr.charAt(++nt):zr=sr==="e"?" ":"0",(Ur=Rr[sr])&&(sr=Ur(Br,zr)),Cr.push(sr),Dt=nt+1);return Cr.push(xr.slice(Dt,nt)),Cr.join("")}}function Ar(xr,Rr){return function(Br){var Cr=e(1900,void 0,1),nt=et(Cr,xr,Br+="",0),Dt,Zt;if(nt!=Br.length)return null;if("Q"in Cr)return new Date(Cr.Q);if("s"in Cr)return new Date(Cr.s*1e3+("L"in Cr?Cr.L:0));if(Rr&&!("Z"in Cr)&&(Cr.Z=0),"p"in Cr&&(Cr.H=Cr.H%12+Cr.p*12),Cr.m===void 0&&(Cr.m="q"in Cr?Cr.q:0),"V"in Cr){if(Cr.V<1||Cr.V>53)return null;"w"in Cr||(Cr.w=1),"Z"in Cr?(Dt=T(e(Cr.y,0,1)),Zt=Dt.getUTCDay(),Dt=Zt>4||Zt===0?c.utcMonday.ceil(Dt):c.utcMonday(Dt),Dt=c.utcDay.offset(Dt,(Cr.V-1)*7),Cr.y=Dt.getUTCFullYear(),Cr.m=Dt.getUTCMonth(),Cr.d=Dt.getUTCDate()+(Cr.w+6)%7):(Dt=A(e(Cr.y,0,1)),Zt=Dt.getDay(),Dt=Zt>4||Zt===0?c.timeMonday.ceil(Dt):c.timeMonday(Dt),Dt=c.timeDay.offset(Dt,(Cr.V-1)*7),Cr.y=Dt.getFullYear(),Cr.m=Dt.getMonth(),Cr.d=Dt.getDate()+(Cr.w+6)%7)}else("W"in Cr||"U"in Cr)&&("w"in Cr||(Cr.w="u"in Cr?Cr.u%7:"W"in Cr?1:0),Zt="Z"in Cr?T(e(Cr.y,0,1)).getUTCDay():A(e(Cr.y,0,1)).getDay(),Cr.m=0,Cr.d="W"in Cr?(Cr.w+6)%7+Cr.W*7-(Zt+5)%7:Cr.w+Cr.U*7-(Zt+6)%7);return"Z"in Cr?(Cr.H+=Cr.Z/100|0,Cr.M+=Cr.Z%100,T(Cr)):A(Cr)}}function et(xr,Rr,Br,Cr){for(var nt=0,Dt=Rr.length,Zt=Br.length,sr,zr;nt<Dt;){if(Cr>=Zt)return-1;if(sr=Rr.charCodeAt(nt++),sr===37){if(sr=Rr.charAt(nt++),zr=Kt[sr in i?Rr.charAt(nt++):sr],!zr||(Cr=zr(xr,Br,Cr))<0)return-1}else if(sr!=Br.charCodeAt(Cr++))return-1}return Cr}function $e(xr,Rr,Br){var Cr=At.exec(Rr.slice(Br));return Cr?(xr.p=Ht[Cr[0].toLowerCase()],Br+Cr[0].length):-1}function st(xr,Rr,Br){var Cr=jt.exec(Rr.slice(Br));return Cr?(xr.w=Yt[Cr[0].toLowerCase()],Br+Cr[0].length):-1}function ct(xr,Rr,Br){var Cr=It.exec(Rr.slice(Br));return Cr?(xr.w=Vt[Cr[0].toLowerCase()],Br+Cr[0].length):-1}function Mt(xr,Rr,Br){var Cr=on.exec(Rr.slice(Br));return Cr?(xr.m=Jr[Cr[0].toLowerCase()],Br+Cr[0].length):-1}function Ut(xr,Rr,Br){var Cr=or.exec(Rr.slice(Br));return Cr?(xr.m=Gr[Cr[0].toLowerCase()],Br+Cr[0].length):-1}function Pe(xr,Rr,Br){return et(xr,at,Rr,Br)}function Ee(xr,Rr,Br){return et(xr,Ge,Rr,Br)}function it(xr,Rr,Br){return et(xr,Se,Rr,Br)}function ut(xr){return qe[xr.getDay()]}function vt(xr){return Ke[xr.getDay()]}function St(xr){return mt[xr.getMonth()]}function yt(xr){return Tt[xr.getMonth()]}function Pt(xr){return He[+(xr.getHours()>=12)]}function Wt(xr){return 1+~~(xr.getMonth()/3)}function ar(xr){return qe[xr.getUTCDay()]}function kr(xr){return Ke[xr.getUTCDay()]}function wr(xr){return mt[xr.getUTCMonth()]}function Sr(xr){return Tt[xr.getUTCMonth()]}function Zr(xr){return He[+(xr.getUTCHours()>=12)]}function ir(xr){return 1+~~(xr.getUTCMonth()/3)}return{format:function(xr){var Rr=fr(xr+="",ot);return Rr.toString=function(){return xr},Rr},parse:function(xr){var Rr=Ar(xr+="",!1);return Rr.toString=function(){return xr},Rr},utcFormat:function(xr){var Rr=fr(xr+="",er);return Rr.toString=function(){return xr},Rr},utcParse:function(xr){var Rr=Ar(xr+="",!0);return Rr.toString=function(){return xr},Rr}}}var i={"-":"",_:" ",0:"0"},n=/^\s*\d+/,r=/^%/,v=/[\\^$*+?|[\]().{}]/g;function s(Xe,at,Ge){var Se=Xe<0?"-":"",He=(Se?-Xe:Xe)+"",Ke=He.length;return Se+(Ke<Ge?new Array(Ge-Ke+1).join(at)+He:He)}function o(Xe){return Xe.replace(v,"\\$&")}function b(Xe){return new RegExp("^(?:"+Xe.map(o).join("|")+")","i")}function g(Xe){for(var at={},Ge=-1,Se=Xe.length;++Ge<Se;)at[Xe[Ge].toLowerCase()]=Ge;return at}function d(Xe,at,Ge){var Se=n.exec(at.slice(Ge,Ge+1));return Se?(Xe.w=+Se[0],Ge+Se[0].length):-1}function f(Xe,at,Ge){var Se=n.exec(at.slice(Ge,Ge+1));return Se?(Xe.u=+Se[0],Ge+Se[0].length):-1}function y(Xe,at,Ge){var Se=n.exec(at.slice(Ge,Ge+2));return Se?(Xe.U=+Se[0],Ge+Se[0].length):-1}function l(Xe,at,Ge){var Se=n.exec(at.slice(Ge,Ge+2));return Se?(Xe.V=+Se[0],Ge+Se[0].length):-1}function x(Xe,at,Ge){var Se=n.exec(at.slice(Ge,Ge+2));return Se?(Xe.W=+Se[0],Ge+Se[0].length):-1}function u(Xe,at,Ge){var Se=n.exec(at.slice(Ge,Ge+4));return Se?(Xe.y=+Se[0],Ge+Se[0].length):-1}function M(Xe,at,Ge){var Se=n.exec(at.slice(Ge,Ge+2));return Se?(Xe.y=+Se[0]+(+Se[0]>68?1900:2e3),Ge+Se[0].length):-1}function _(Xe,at,Ge){var Se=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(at.slice(Ge,Ge+6));return Se?(Xe.Z=Se[1]?0:-(Se[2]+(Se[3]||"00")),Ge+Se[0].length):-1}function p(Xe,at,Ge){var Se=n.exec(at.slice(Ge,Ge+1));return Se?(Xe.q=Se[0]*3-3,Ge+Se[0].length):-1}function w(Xe,at,Ge){var Se=n.exec(at.slice(Ge,Ge+2));return Se?(Xe.m=Se[0]-1,Ge+Se[0].length):-1}function h(Xe,at,Ge){var Se=n.exec(at.slice(Ge,Ge+2));return Se?(Xe.d=+Se[0],Ge+Se[0].length):-1}function L(Xe,at,Ge){var Se=n.exec(at.slice(Ge,Ge+3));return Se?(Xe.m=0,Xe.d=+Se[0],Ge+Se[0].length):-1}function S(Xe,at,Ge){var Se=n.exec(at.slice(Ge,Ge+2));return Se?(Xe.H=+Se[0],Ge+Se[0].length):-1}function E(Xe,at,Ge){var Se=n.exec(at.slice(Ge,Ge+2));return Se?(Xe.M=+Se[0],Ge+Se[0].length):-1}function P(Xe,at,Ge){var Se=n.exec(at.slice(Ge,Ge+2));return Se?(Xe.S=+Se[0],Ge+Se[0].length):-1}function F(Xe,at,Ge){var Se=n.exec(at.slice(Ge,Ge+3));return Se?(Xe.L=+Se[0],Ge+Se[0].length):-1}function I(Xe,at,Ge){var Se=n.exec(at.slice(Ge,Ge+6));return Se?(Xe.L=Math.floor(Se[0]/1e3),Ge+Se[0].length):-1}function D(Xe,at,Ge){var Se=r.exec(at.slice(Ge,Ge+1));return Se?Ge+Se[0].length:-1}function R(Xe,at,Ge){var Se=n.exec(at.slice(Ge));return Se?(Xe.Q=+Se[0],Ge+Se[0].length):-1}function N(Xe,at,Ge){var Se=n.exec(at.slice(Ge));return Se?(Xe.s=+Se[0],Ge+Se[0].length):-1}function z(Xe,at){return s(Xe.getDate(),at,2)}function G(Xe,at){return s(Xe.getHours(),at,2)}function Y(Xe,at){return s(Xe.getHours()%12||12,at,2)}function ee(Xe,at){return s(1+c.timeDay.count(c.timeYear(Xe),Xe),at,3)}function Z(Xe,at){return s(Xe.getMilliseconds(),at,3)}function X(Xe,at){return Z(Xe,at)+"000"}function ne(Xe,at){return s(Xe.getMonth()+1,at,2)}function ce(Xe,at){return s(Xe.getMinutes(),at,2)}function Q(Xe,at){return s(Xe.getSeconds(),at,2)}function K(Xe){var at=Xe.getDay();return at===0?7:at}function U(Xe,at){return s(c.timeSunday.count(c.timeYear(Xe)-1,Xe),at,2)}function H(Xe,at){var Ge=Xe.getDay();return Xe=Ge>=4||Ge===0?c.timeThursday(Xe):c.timeThursday.ceil(Xe),s(c.timeThursday.count(c.timeYear(Xe),Xe)+(c.timeYear(Xe).getDay()===4),at,2)}function q(Xe){return Xe.getDay()}function re(Xe,at){return s(c.timeMonday.count(c.timeYear(Xe)-1,Xe),at,2)}function j(Xe,at){return s(Xe.getFullYear()%100,at,2)}function $(Xe,at){return s(Xe.getFullYear()%1e4,at,4)}function ie(Xe){var at=Xe.getTimezoneOffset();return(at>0?"-":(at*=-1,"+"))+s(at/60|0,"0",2)+s(at%60,"0",2)}function oe(Xe,at){return s(Xe.getUTCDate(),at,2)}function ae(Xe,at){return s(Xe.getUTCHours(),at,2)}function se(Xe,at){return s(Xe.getUTCHours()%12||12,at,2)}function _e(Xe,at){return s(1+c.utcDay.count(c.utcYear(Xe),Xe),at,3)}function ue(Xe,at){return s(Xe.getUTCMilliseconds(),at,3)}function ye(Xe,at){return ue(Xe,at)+"000"}function xe(Xe,at){return s(Xe.getUTCMonth()+1,at,2)}function me(Xe,at){return s(Xe.getUTCMinutes(),at,2)}function be(Xe,at){return s(Xe.getUTCSeconds(),at,2)}function ke(Xe){var at=Xe.getUTCDay();return at===0?7:at}function De(Xe,at){return s(c.utcSunday.count(c.utcYear(Xe)-1,Xe),at,2)}function Ve(Xe,at){var Ge=Xe.getUTCDay();return Xe=Ge>=4||Ge===0?c.utcThursday(Xe):c.utcThursday.ceil(Xe),s(c.utcThursday.count(c.utcYear(Xe),Xe)+(c.utcYear(Xe).getUTCDay()===4),at,2)}function Ae(Xe){return Xe.getUTCDay()}function Le(Xe,at){return s(c.utcMonday.count(c.utcYear(Xe)-1,Xe),at,2)}function je(Xe,at){return s(Xe.getUTCFullYear()%100,at,2)}function Ye(Xe,at){return s(Xe.getUTCFullYear()%1e4,at,4)}function ze(){return"+0000"}function Ie(){return"%"}function We(Xe){return+Xe}function pt(Xe){return Math.floor(+Xe/1e3)}var Ft;Qt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Qt(Xe){return Ft=a(Xe),m.timeFormat=Ft.format,m.timeParse=Ft.parse,m.utcFormat=Ft.utcFormat,m.utcParse=Ft.utcParse,Ft}var zt="%Y-%m-%dT%H:%M:%S.%LZ";function Et(Xe){return Xe.toISOString()}var Xt=Date.prototype.toISOString?Et:m.utcFormat(zt);function Nt(Xe){var at=new Date(Xe);return isNaN(at)?null:at}var Ct=+new Date("2000-01-01T00:00:00.000Z")?Nt:m.utcParse(zt);m.isoFormat=Xt,m.isoParse=Ct,m.timeFormatDefaultLocale=Qt,m.timeFormatLocale=a,Object.defineProperty(m,"__esModule",{value:!0})})},{"d3-time":121}],121:[function(t,B,V){(function(m,c){typeof V=="object"&&typeof B<"u"?c(V):(m=m||self,c(m.d3=m.d3||{}))})(this,function(m){var c=new Date,A=new Date;function T(Ae,Le,je,Ye){function ze(Ie){return Ae(Ie=arguments.length===0?new Date:new Date(+Ie)),Ie}return ze.floor=function(Ie){return Ae(Ie=new Date(+Ie)),Ie},ze.ceil=function(Ie){return Ae(Ie=new Date(Ie-1)),Le(Ie,1),Ae(Ie),Ie},ze.round=function(Ie){var We=ze(Ie),pt=ze.ceil(Ie);return Ie-We<pt-Ie?We:pt},ze.offset=function(Ie,We){return Le(Ie=new Date(+Ie),We==null?1:Math.floor(We)),Ie},ze.range=function(Ie,We,pt){var Ft=[],Qt;if(Ie=ze.ceil(Ie),pt=pt==null?1:Math.floor(pt),!(Ie<We)||!(pt>0))return Ft;do Ft.push(Qt=new Date(+Ie)),Le(Ie,pt),Ae(Ie);while(Qt<Ie&&Ie<We);return Ft},ze.filter=function(Ie){return T(function(We){if(We>=We)for(;Ae(We),!Ie(We);)We.setTime(We-1)},function(We,pt){if(We>=We)if(pt<0)for(;++pt<=0;)for(;Le(We,-1),!Ie(We););else for(;--pt>=0;)for(;Le(We,1),!Ie(We););})},je&&(ze.count=function(Ie,We){return c.setTime(+Ie),A.setTime(+We),Ae(c),Ae(A),Math.floor(je(c,A))},ze.every=function(Ie){return Ie=Math.floor(Ie),!isFinite(Ie)||!(Ie>0)?null:Ie>1?ze.filter(Ye?function(We){return Ye(We)%Ie===0}:function(We){return ze.count(0,We)%Ie===0}):ze}),ze}var e=T(function(){},function(Ae,Le){Ae.setTime(+Ae+Le)},function(Ae,Le){return Le-Ae});e.every=function(Ae){return Ae=Math.floor(Ae),!isFinite(Ae)||!(Ae>0)?null:Ae>1?T(function(Le){Le.setTime(Math.floor(Le/Ae)*Ae)},function(Le,je){Le.setTime(+Le+je*Ae)},function(Le,je){return(je-Le)/Ae}):e};var a=e.range,i=1e3,n=6e4,r=36e5,v=864e5,s=6048e5,o=T(function(Ae){Ae.setTime(Ae-Ae.getMilliseconds())},function(Ae,Le){Ae.setTime(+Ae+Le*i)},function(Ae,Le){return(Le-Ae)/i},function(Ae){return Ae.getUTCSeconds()}),b=o.range,g=T(function(Ae){Ae.setTime(Ae-Ae.getMilliseconds()-Ae.getSeconds()*i)},function(Ae,Le){Ae.setTime(+Ae+Le*n)},function(Ae,Le){return(Le-Ae)/n},function(Ae){return Ae.getMinutes()}),d=g.range,f=T(function(Ae){Ae.setTime(Ae-Ae.getMilliseconds()-Ae.getSeconds()*i-Ae.getMinutes()*n)},function(Ae,Le){Ae.setTime(+Ae+Le*r)},function(Ae,Le){return(Le-Ae)/r},function(Ae){return Ae.getHours()}),y=f.range,l=T(function(Ae){Ae.setHours(0,0,0,0)},function(Ae,Le){Ae.setDate(Ae.getDate()+Le)},function(Ae,Le){return(Le-Ae-(Le.getTimezoneOffset()-Ae.getTimezoneOffset())*n)/v},function(Ae){return Ae.getDate()-1}),x=l.range;function u(Ae){return T(function(Le){Le.setDate(Le.getDate()-(Le.getDay()+7-Ae)%7),Le.setHours(0,0,0,0)},function(Le,je){Le.setDate(Le.getDate()+je*7)},function(Le,je){return(je-Le-(je.getTimezoneOffset()-Le.getTimezoneOffset())*n)/s})}var M=u(0),_=u(1),p=u(2),w=u(3),h=u(4),L=u(5),S=u(6),E=M.range,P=_.range,F=p.range,I=w.range,D=h.range,R=L.range,N=S.range,z=T(function(Ae){Ae.setDate(1),Ae.setHours(0,0,0,0)},function(Ae,Le){Ae.setMonth(Ae.getMonth()+Le)},function(Ae,Le){return Le.getMonth()-Ae.getMonth()+(Le.getFullYear()-Ae.getFullYear())*12},function(Ae){return Ae.getMonth()}),G=z.range,Y=T(function(Ae){Ae.setMonth(0,1),Ae.setHours(0,0,0,0)},function(Ae,Le){Ae.setFullYear(Ae.getFullYear()+Le)},function(Ae,Le){return Le.getFullYear()-Ae.getFullYear()},function(Ae){return Ae.getFullYear()});Y.every=function(Ae){return!isFinite(Ae=Math.floor(Ae))||!(Ae>0)?null:T(function(Le){Le.setFullYear(Math.floor(Le.getFullYear()/Ae)*Ae),Le.setMonth(0,1),Le.setHours(0,0,0,0)},function(Le,je){Le.setFullYear(Le.getFullYear()+je*Ae)})};var ee=Y.range,Z=T(function(Ae){Ae.setUTCSeconds(0,0)},function(Ae,Le){Ae.setTime(+Ae+Le*n)},function(Ae,Le){return(Le-Ae)/n},function(Ae){return Ae.getUTCMinutes()}),X=Z.range,ne=T(function(Ae){Ae.setUTCMinutes(0,0,0)},function(Ae,Le){Ae.setTime(+Ae+Le*r)},function(Ae,Le){return(Le-Ae)/r},function(Ae){return Ae.getUTCHours()}),ce=ne.range,Q=T(function(Ae){Ae.setUTCHours(0,0,0,0)},function(Ae,Le){Ae.setUTCDate(Ae.getUTCDate()+Le)},function(Ae,Le){return(Le-Ae)/v},function(Ae){return Ae.getUTCDate()-1}),K=Q.range;function U(Ae){return T(function(Le){Le.setUTCDate(Le.getUTCDate()-(Le.getUTCDay()+7-Ae)%7),Le.setUTCHours(0,0,0,0)},function(Le,je){Le.setUTCDate(Le.getUTCDate()+je*7)},function(Le,je){return(je-Le)/s})}var H=U(0),q=U(1),re=U(2),j=U(3),$=U(4),ie=U(5),oe=U(6),ae=H.range,se=q.range,_e=re.range,ue=j.range,ye=$.range,xe=ie.range,me=oe.range,be=T(function(Ae){Ae.setUTCDate(1),Ae.setUTCHours(0,0,0,0)},function(Ae,Le){Ae.setUTCMonth(Ae.getUTCMonth()+Le)},function(Ae,Le){return Le.getUTCMonth()-Ae.getUTCMonth()+(Le.getUTCFullYear()-Ae.getUTCFullYear())*12},function(Ae){return Ae.getUTCMonth()}),ke=be.range,De=T(function(Ae){Ae.setUTCMonth(0,1),Ae.setUTCHours(0,0,0,0)},function(Ae,Le){Ae.setUTCFullYear(Ae.getUTCFullYear()+Le)},function(Ae,Le){return Le.getUTCFullYear()-Ae.getUTCFullYear()},function(Ae){return Ae.getUTCFullYear()});De.every=function(Ae){return!isFinite(Ae=Math.floor(Ae))||!(Ae>0)?null:T(function(Le){Le.setUTCFullYear(Math.floor(Le.getUTCFullYear()/Ae)*Ae),Le.setUTCMonth(0,1),Le.setUTCHours(0,0,0,0)},function(Le,je){Le.setUTCFullYear(Le.getUTCFullYear()+je*Ae)})};var Ve=De.range;m.timeDay=l,m.timeDays=x,m.timeFriday=L,m.timeFridays=R,m.timeHour=f,m.timeHours=y,m.timeInterval=T,m.timeMillisecond=e,m.timeMilliseconds=a,m.timeMinute=g,m.timeMinutes=d,m.timeMonday=_,m.timeMondays=P,m.timeMonth=z,m.timeMonths=G,m.timeSaturday=S,m.timeSaturdays=N,m.timeSecond=o,m.timeSeconds=b,m.timeSunday=M,m.timeSundays=E,m.timeThursday=h,m.timeThursdays=D,m.timeTuesday=p,m.timeTuesdays=F,m.timeWednesday=w,m.timeWednesdays=I,m.timeWeek=M,m.timeWeeks=E,m.timeYear=Y,m.timeYears=ee,m.utcDay=Q,m.utcDays=K,m.utcFriday=ie,m.utcFridays=xe,m.utcHour=ne,m.utcHours=ce,m.utcMillisecond=e,m.utcMilliseconds=a,m.utcMinute=Z,m.utcMinutes=X,m.utcMonday=q,m.utcMondays=se,m.utcMonth=be,m.utcMonths=ke,m.utcSaturday=oe,m.utcSaturdays=me,m.utcSecond=o,m.utcSeconds=b,m.utcSunday=H,m.utcSundays=ae,m.utcThursday=$,m.utcThursdays=ye,m.utcTuesday=re,m.utcTuesdays=_e,m.utcWednesday=j,m.utcWednesdays=ue,m.utcWeek=H,m.utcWeeks=ae,m.utcYear=De,m.utcYears=Ve,Object.defineProperty(m,"__esModule",{value:!0})})},{}],122:[function(t,B,V){arguments[4][121][0].apply(V,arguments)},{dup:121}],123:[function(t,B,V){(function(m,c){typeof V=="object"&&typeof B<"u"?c(V):(m=m||self,c(m.d3=m.d3||{}))})(this,function(m){var c=0,A=0,T=0,e=1e3,a,i,n=0,r=0,v=0,s=typeof performance=="object"&&performance.now?performance:Date,o=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(w){setTimeout(w,17)};function b(){return r||(o(g),r=s.now()+v)}function g(){r=0}function d(){this._call=this._time=this._next=null}d.prototype=f.prototype={constructor:d,restart:function(w,h,L){if(typeof w!="function")throw new TypeError("callback is not a function");L=(L==null?b():+L)+(h==null?0:+h),!this._next&&i!==this&&(i?i._next=this:a=this,i=this),this._call=w,this._time=L,M()},stop:function(){this._call&&(this._call=null,this._time=1/0,M())}};function f(w,h,L){var S=new d;return S.restart(w,h,L),S}function y(){b(),++c;for(var w=a,h;w;)(h=r-w._time)>=0&&w._call.call(null,h),w=w._next;--c}function l(){r=(n=s.now())+v,c=A=0;try{y()}finally{c=0,u(),r=0}}function x(){var w=s.now(),h=w-n;h>e&&(v-=h,n=w)}function u(){for(var w,h=a,L,S=1/0;h;)h._call?(S>h._time&&(S=h._time),w=h,h=h._next):(L=h._next,h._next=null,h=w?w._next=L:a=L);i=w,M(S)}function M(w){if(!c){A&&(A=clearTimeout(A));var h=w-r;h>24?(w<1/0&&(A=setTimeout(l,w-s.now()-v)),T&&(T=clearInterval(T))):(T||(n=s.now(),T=setInterval(x,e)),c=1,o(l))}}function _(w,h,L){var S=new d;return h=h==null?0:+h,S.restart(function(E){S.stop(),w(E+h)},h,L),S}function p(w,h,L){var S=new d,E=h;return h==null?(S.restart(w,h,L),S):(h=+h,L=L==null?b():+L,S.restart(function P(F){F+=E,S.restart(P,E+=h,L),w(F)},h,L),S)}m.interval=p,m.now=b,m.timeout=_,m.timer=f,m.timerFlush=y,Object.defineProperty(m,"__esModule",{value:!0})})},{}],124:[function(t,B,V){B.exports=function(){for(var m=0;m<arguments.length;m++)if(arguments[m]!==void 0)return arguments[m]}},{}],125:[function(t,B,V){B.exports=T;var m=T.canvas=document.createElement("canvas"),c=m.getContext("2d"),A=e([32,126]);T.createPairs=e,T.ascii=A;function T(a,i){Array.isArray(a)&&(a=a.join(", "));var n={},r,v=16,s=.05;i&&(i.length===2&&typeof i[0]=="number"?r=e(i):Array.isArray(i)?r=i:(i.o?r=e(i.o):i.pairs&&(r=i.pairs),i.fontSize&&(v=i.fontSize),i.threshold!=null&&(s=i.threshold))),r||(r=A),c.font=v+"px "+a;for(var o=0;o<r.length;o++){var b=r[o],g=c.measureText(b[0]).width+c.measureText(b[1]).width,d=c.measureText(b).width;if(Math.abs(g-d)>v*s){var f=(d-g)/v;n[b]=f*1e3}}return n}function e(a){for(var i=[],n=a[0];n<=a[1];n++)for(var r=String.fromCharCode(n),v=a[0];v<a[1];v++){var s=String.fromCharCode(v),o=r+s;i.push(o)}return i}},{}],126:[function(t,B,V){var m=t("abs-svg-path"),c=t("normalize-svg-path"),A={M:"moveTo",C:"bezierCurveTo"};B.exports=function(T,e){T.beginPath(),c(m(e)).forEach(function(a){var i=a[0],n=a.slice(1);T[A[i]].apply(T,n)}),T.closePath()}},{"abs-svg-path":70,"normalize-svg-path":246}],127:[function(t,B,V){B.exports=function(m){switch(m){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},{}],128:[function(t,B,V){function m(T,e,a){var i=T[a]|0;if(i<=0)return[];var n=new Array(i),r;if(a===T.length-1)for(r=0;r<i;++r)n[r]=e;else for(r=0;r<i;++r)n[r]=m(T,e,a+1);return n}function c(T,e){var a,i;for(a=new Array(T),i=0;i<T;++i)a[i]=e;return a}function A(T,e){switch(typeof e>"u"&&(e=0),typeof T){case"number":if(T>0)return c(T|0,e);break;case"object":if(typeof T.length=="number")return m(T,e,0);break}return[]}B.exports=A},{}],129:[function(t,B,V){B.exports=m,B.exports.default=m;function m(R,N,z){z=z||2;var G=N&&N.length,Y=G?N[0]*z:R.length,ee=c(R,0,Y,z,!0),Z=[];if(!ee||ee.next===ee.prev)return Z;var X,ne,ce,Q,K,U,H;if(G&&(ee=r(R,N,ee,z)),R.length>80*z){X=ce=R[0],ne=Q=R[1];for(var q=z;q<Y;q+=z)K=R[q],U=R[q+1],K<X&&(X=K),U<ne&&(ne=U),K>ce&&(ce=K),U>Q&&(Q=U);H=Math.max(ce-X,Q-ne),H=H!==0?1/H:0}return T(ee,Z,z,X,ne,H),Z}function c(R,N,z,G,Y){var ee,Z;if(Y===D(R,N,z,G)>0)for(ee=N;ee<z;ee+=G)Z=P(ee,R[ee],R[ee+1],Z);else for(ee=z-G;ee>=N;ee-=G)Z=P(ee,R[ee],R[ee+1],Z);return Z&&M(Z,Z.next)&&(F(Z),Z=Z.next),Z}function A(R,N){if(!R)return R;N||(N=R);var z=R,G;do if(G=!1,!z.steiner&&(M(z,z.next)||u(z.prev,z,z.next)===0)){if(F(z),z=N=z.prev,z===z.next)break;G=!0}else z=z.next;while(G||z!==N);return N}function T(R,N,z,G,Y,ee,Z){if(!!R){!Z&&ee&&g(R,G,Y,ee);for(var X=R,ne,ce;R.prev!==R.next;){if(ne=R.prev,ce=R.next,ee?a(R,G,Y,ee):e(R)){N.push(ne.i/z),N.push(R.i/z),N.push(ce.i/z),F(R),R=ce.next,X=ce.next;continue}if(R=ce,R===X){Z?Z===1?(R=i(A(R),N,z),T(R,N,z,G,Y,ee,2)):Z===2&&n(R,N,z,G,Y,ee):T(A(R),N,z,G,Y,ee,1);break}}}}function e(R){var N=R.prev,z=R,G=R.next;if(u(N,z,G)>=0)return!1;for(var Y=R.next.next;Y!==R.prev;){if(l(N.x,N.y,z.x,z.y,G.x,G.y,Y.x,Y.y)&&u(Y.prev,Y,Y.next)>=0)return!1;Y=Y.next}return!0}function a(R,N,z,G){var Y=R.prev,ee=R,Z=R.next;if(u(Y,ee,Z)>=0)return!1;for(var X=Y.x<ee.x?Y.x<Z.x?Y.x:Z.x:ee.x<Z.x?ee.x:Z.x,ne=Y.y<ee.y?Y.y<Z.y?Y.y:Z.y:ee.y<Z.y?ee.y:Z.y,ce=Y.x>ee.x?Y.x>Z.x?Y.x:Z.x:ee.x>Z.x?ee.x:Z.x,Q=Y.y>ee.y?Y.y>Z.y?Y.y:Z.y:ee.y>Z.y?ee.y:Z.y,K=f(X,ne,N,z,G),U=f(ce,Q,N,z,G),H=R.prevZ,q=R.nextZ;H&&H.z>=K&&q&&q.z<=U;){if(H!==R.prev&&H!==R.next&&l(Y.x,Y.y,ee.x,ee.y,Z.x,Z.y,H.x,H.y)&&u(H.prev,H,H.next)>=0||(H=H.prevZ,q!==R.prev&&q!==R.next&&l(Y.x,Y.y,ee.x,ee.y,Z.x,Z.y,q.x,q.y)&&u(q.prev,q,q.next)>=0))return!1;q=q.nextZ}for(;H&&H.z>=K;){if(H!==R.prev&&H!==R.next&&l(Y.x,Y.y,ee.x,ee.y,Z.x,Z.y,H.x,H.y)&&u(H.prev,H,H.next)>=0)return!1;H=H.prevZ}for(;q&&q.z<=U;){if(q!==R.prev&&q!==R.next&&l(Y.x,Y.y,ee.x,ee.y,Z.x,Z.y,q.x,q.y)&&u(q.prev,q,q.next)>=0)return!1;q=q.nextZ}return!0}function i(R,N,z){var G=R;do{var Y=G.prev,ee=G.next.next;!M(Y,ee)&&_(Y,G,G.next,ee)&&L(Y,ee)&&L(ee,Y)&&(N.push(Y.i/z),N.push(G.i/z),N.push(ee.i/z),F(G),F(G.next),G=R=ee),G=G.next}while(G!==R);return A(G)}function n(R,N,z,G,Y,ee){var Z=R;do{for(var X=Z.next.next;X!==Z.prev;){if(Z.i!==X.i&&x(Z,X)){var ne=E(Z,X);Z=A(Z,Z.next),ne=A(ne,ne.next),T(Z,N,z,G,Y,ee),T(ne,N,z,G,Y,ee);return}X=X.next}Z=Z.next}while(Z!==R)}function r(R,N,z,G){var Y=[],ee,Z,X,ne,ce;for(ee=0,Z=N.length;ee<Z;ee++)X=N[ee]*G,ne=ee<Z-1?N[ee+1]*G:R.length,ce=c(R,X,ne,G,!1),ce===ce.next&&(ce.steiner=!0),Y.push(y(ce));for(Y.sort(v),ee=0;ee<Y.length;ee++)s(Y[ee],z),z=A(z,z.next);return z}function v(R,N){return R.x-N.x}function s(R,N){if(N=o(R,N),N){var z=E(N,R);A(N,N.next),A(z,z.next)}}function o(R,N){var z=N,G=R.x,Y=R.y,ee=-1/0,Z;do{if(Y<=z.y&&Y>=z.next.y&&z.next.y!==z.y){var X=z.x+(Y-z.y)*(z.next.x-z.x)/(z.next.y-z.y);if(X<=G&&X>ee){if(ee=X,X===G){if(Y===z.y)return z;if(Y===z.next.y)return z.next}Z=z.x<z.next.x?z:z.next}}z=z.next}while(z!==N);if(!Z)return null;if(G===ee)return Z;var ne=Z,ce=Z.x,Q=Z.y,K=1/0,U;z=Z;do G>=z.x&&z.x>=ce&&G!==z.x&&l(Y<Q?G:ee,Y,ce,Q,Y<Q?ee:G,Y,z.x,z.y)&&(U=Math.abs(Y-z.y)/(G-z.x),L(z,R)&&(U<K||U===K&&(z.x>Z.x||z.x===Z.x&&b(Z,z)))&&(Z=z,K=U)),z=z.next;while(z!==ne);return Z}function b(R,N){return u(R.prev,R,N.prev)<0&&u(N.next,R,R.next)<0}function g(R,N,z,G){var Y=R;do Y.z===null&&(Y.z=f(Y.x,Y.y,N,z,G)),Y.prevZ=Y.prev,Y.nextZ=Y.next,Y=Y.next;while(Y!==R);Y.prevZ.nextZ=null,Y.prevZ=null,d(Y)}function d(R){var N,z,G,Y,ee,Z,X,ne,ce=1;do{for(z=R,R=null,ee=null,Z=0;z;){for(Z++,G=z,X=0,N=0;N<ce&&(X++,G=G.nextZ,!!G);N++);for(ne=ce;X>0||ne>0&&G;)X!==0&&(ne===0||!G||z.z<=G.z)?(Y=z,z=z.nextZ,X--):(Y=G,G=G.nextZ,ne--),ee?ee.nextZ=Y:R=Y,Y.prevZ=ee,ee=Y;z=G}ee.nextZ=null,ce*=2}while(Z>1);return R}function f(R,N,z,G,Y){return R=32767*(R-z)*Y,N=32767*(N-G)*Y,R=(R|R<<8)&16711935,R=(R|R<<4)&252645135,R=(R|R<<2)&858993459,R=(R|R<<1)&1431655765,N=(N|N<<8)&16711935,N=(N|N<<4)&252645135,N=(N|N<<2)&858993459,N=(N|N<<1)&1431655765,R|N<<1}function y(R){var N=R,z=R;do(N.x<z.x||N.x===z.x&&N.y<z.y)&&(z=N),N=N.next;while(N!==R);return z}function l(R,N,z,G,Y,ee,Z,X){return(Y-Z)*(N-X)-(R-Z)*(ee-X)>=0&&(R-Z)*(G-X)-(z-Z)*(N-X)>=0&&(z-Z)*(ee-X)-(Y-Z)*(G-X)>=0}function x(R,N){return R.next.i!==N.i&&R.prev.i!==N.i&&!h(R,N)&&(L(R,N)&&L(N,R)&&S(R,N)&&(u(R.prev,R,N.prev)||u(R,N.prev,N))||M(R,N)&&u(R.prev,R,R.next)>0&&u(N.prev,N,N.next)>0)}function u(R,N,z){return(N.y-R.y)*(z.x-N.x)-(N.x-R.x)*(z.y-N.y)}function M(R,N){return R.x===N.x&&R.y===N.y}function _(R,N,z,G){var Y=w(u(R,N,z)),ee=w(u(R,N,G)),Z=w(u(z,G,R)),X=w(u(z,G,N));return!!(Y!==ee&&Z!==X||Y===0&&p(R,z,N)||ee===0&&p(R,G,N)||Z===0&&p(z,R,G)||X===0&&p(z,N,G))}function p(R,N,z){return N.x<=Math.max(R.x,z.x)&&N.x>=Math.min(R.x,z.x)&&N.y<=Math.max(R.y,z.y)&&N.y>=Math.min(R.y,z.y)}function w(R){return R>0?1:R<0?-1:0}function h(R,N){var z=R;do{if(z.i!==R.i&&z.next.i!==R.i&&z.i!==N.i&&z.next.i!==N.i&&_(z,z.next,R,N))return!0;z=z.next}while(z!==R);return!1}function L(R,N){return u(R.prev,R,R.next)<0?u(R,N,R.next)>=0&&u(R,R.prev,N)>=0:u(R,N,R.prev)<0||u(R,R.next,N)<0}function S(R,N){var z=R,G=!1,Y=(R.x+N.x)/2,ee=(R.y+N.y)/2;do z.y>ee!=z.next.y>ee&&z.next.y!==z.y&&Y<(z.next.x-z.x)*(ee-z.y)/(z.next.y-z.y)+z.x&&(G=!G),z=z.next;while(z!==R);return G}function E(R,N){var z=new I(R.i,R.x,R.y),G=new I(N.i,N.x,N.y),Y=R.next,ee=N.prev;return R.next=N,N.prev=R,z.next=Y,Y.prev=z,G.next=z,z.prev=G,ee.next=G,G.prev=ee,G}function P(R,N,z,G){var Y=new I(R,N,z);return G?(Y.next=G.next,Y.prev=G,G.next.prev=Y,G.next=Y):(Y.prev=Y,Y.next=Y),Y}function F(R){R.next.prev=R.prev,R.prev.next=R.next,R.prevZ&&(R.prevZ.nextZ=R.nextZ),R.nextZ&&(R.nextZ.prevZ=R.prevZ)}function I(R,N,z){this.i=R,this.x=N,this.y=z,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}m.deviation=function(R,N,z,G){var Y=N&&N.length,ee=Y?N[0]*z:R.length,Z=Math.abs(D(R,0,ee,z));if(Y)for(var X=0,ne=N.length;X<ne;X++){var ce=N[X]*z,Q=X<ne-1?N[X+1]*z:R.length;Z-=Math.abs(D(R,ce,Q,z))}var K=0;for(X=0;X<G.length;X+=3){var U=G[X]*z,H=G[X+1]*z,q=G[X+2]*z;K+=Math.abs((R[U]-R[q])*(R[H+1]-R[U+1])-(R[U]-R[H])*(R[q+1]-R[U+1]))}return Z===0&&K===0?0:Math.abs((K-Z)/Z)};function D(R,N,z,G){for(var Y=0,ee=N,Z=z-G;ee<z;ee+=G)Y+=(R[Z]-R[ee])*(R[ee+1]+R[Z+1]),Z=ee;return Y}m.flatten=function(R){for(var N=R[0][0].length,z={vertices:[],holes:[],dimensions:N},G=0,Y=0;Y<R.length;Y++){for(var ee=0;ee<R[Y].length;ee++)for(var Z=0;Z<N;Z++)z.vertices.push(R[Y][ee][Z]);Y>0&&(G+=R[Y-1].length,z.holes.push(G))}return z}},{}],130:[function(t,B,V){var m=t("strongly-connected-components");B.exports=function(A,T){var e=[],a=[],i=[],n={},r=[],v;function s(M){i[M]=!1,n.hasOwnProperty(M)&&Object.keys(n[M]).forEach(function(_){delete n[M][_],i[_]&&s(_)})}function o(M){var _=!1;a.push(M),i[M]=!0;var p,w;for(p=0;p<r[M].length;p++)w=r[M][p],w===v?(b(v,a),_=!0):i[w]||(_=o(w));if(_)s(M);else for(p=0;p<r[M].length;p++){w=r[M][p];var h=n[w];h||(h={},n[w]=h),h[w]=!0}return a.pop(),_}function b(M,_){var p=[].concat(_).concat(M);T?T(o):e.push(p)}function g(M){for(var _=0;_<A.length;_++)_<M&&(A[_]=[]),A[_]=A[_].filter(function(p){return p>=M})}function d(M){g(M);for(var _=A,p=m(_),w=p.components.filter(function(I){return I.length>1}),h=1/0,L,S=0;S<w.length;S++)for(var E=0;E<w[S].length;E++)w[S][E]<h&&(h=w[S][E],L=S);var P=w[L];if(!P)return!1;var F=A.map(function(I,D){return P.indexOf(D)===-1?[]:I.filter(function(R){return P.indexOf(R)!==-1})});return{leastVertex:h,adjList:F}}v=0;for(var f=A.length;v<f;){var y=d(v);if(v=y.leastVertex,r=y.adjList,r){for(var l=0;l<r.length;l++)for(var x=0;x<r[l].length;x++){var u=r[l][x];i[+u]=!1,n[u]={}}o(v),v=v+1}else v=f}if(!T)return e}},{"strongly-connected-components":307}],131:[function(t,B,V){var m=t("../../object/valid-value");B.exports=function(){return m(this).length=0,this}},{"../../object/valid-value":162}],132:[function(t,B,V){B.exports=t("./is-implemented")()?Array.from:t("./shim")},{"./is-implemented":133,"./shim":134}],133:[function(t,B,V){B.exports=function(){var m=Array.from,c,A;return typeof m!="function"?!1:(c=["raz","dwa"],A=m(c),Boolean(A&&A!==c&&A[1]==="dwa"))}},{}],134:[function(t,B,V){var m=t("es6-symbol").iterator,c=t("../../function/is-arguments"),A=t("../../function/is-function"),T=t("../../number/to-pos-integer"),e=t("../../object/valid-callable"),a=t("../../object/valid-value"),i=t("../../object/is-value"),n=t("../../string/is-string"),r=Array.isArray,v=Function.prototype.call,s={configurable:!0,enumerable:!0,writable:!0,value:null},o=Object.defineProperty;B.exports=function(b){var g=arguments[1],d=arguments[2],f,y,l,x,u,M,_,p,w,h;if(b=Object(a(b)),i(g)&&e(g),!this||this===Array||!A(this)){if(!g){if(c(b))return u=b.length,u!==1?Array.apply(null,b):(x=new Array(1),x[0]=b[0],x);if(r(b)){for(x=new Array(u=b.length),y=0;y<u;++y)x[y]=b[y];return x}}x=[]}else f=this;if(!r(b)){if((w=b[m])!==void 0){for(_=e(w).call(b),f&&(x=new f),p=_.next(),y=0;!p.done;)h=g?v.call(g,d,p.value,y):p.value,f?(s.value=h,o(x,y,s)):x[y]=h,p=_.next(),++y;u=y}else if(n(b)){for(u=b.length,f&&(x=new f),y=0,l=0;y<u;++y)h=b[y],y+1<u&&(M=h.charCodeAt(0),M>=55296&&M<=56319&&(h+=b[++y])),h=g?v.call(g,d,h,l):h,f?(s.value=h,o(x,l,s)):x[l]=h,++l;u=l}}if(u===void 0)for(u=T(b.length),f&&(x=new f(u)),y=0;y<u;++y)h=g?v.call(g,d,b[y],y):b[y],f?(s.value=h,o(x,y,s)):x[y]=h;return f&&(s.value=null,x.length=u),x}},{"../../function/is-arguments":135,"../../function/is-function":136,"../../number/to-pos-integer":142,"../../object/is-value":151,"../../object/valid-callable":160,"../../object/valid-value":162,"../../string/is-string":166,"es6-symbol":175}],135:[function(t,B,V){var m=Object.prototype.toString,c=m.call(function(){return arguments}());B.exports=function(A){return m.call(A)===c}},{}],136:[function(t,B,V){var m=Object.prototype.toString,c=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);B.exports=function(A){return typeof A=="function"&&c(m.call(A))}},{}],137:[function(t,B,V){B.exports=function(){}},{}],138:[function(t,B,V){B.exports=t("./is-implemented")()?Math.sign:t("./shim")},{"./is-implemented":139,"./shim":140}],139:[function(t,B,V){B.exports=function(){var m=Math.sign;return typeof m!="function"?!1:m(10)===1&&m(-20)===-1}},{}],140:[function(t,B,V){B.exports=function(m){return m=Number(m),isNaN(m)||m===0?m:m>0?1:-1}},{}],141:[function(t,B,V){var m=t("../math/sign"),c=Math.abs,A=Math.floor;B.exports=function(T){return isNaN(T)?0:(T=Number(T),T===0||!isFinite(T)?T:m(T)*A(c(T)))}},{"../math/sign":138}],142:[function(t,B,V){var m=t("./to-integer"),c=Math.max;B.exports=function(A){return c(0,m(A))}},{"./to-integer":141}],143:[function(t,B,V){var m=t("./valid-callable"),c=t("./valid-value"),A=Function.prototype.bind,T=Function.prototype.call,e=Object.keys,a=Object.prototype.propertyIsEnumerable;B.exports=function(i,n){return function(r,v){var s,o=arguments[2],b=arguments[3];return r=Object(c(r)),m(v),s=e(r),b&&s.sort(typeof b=="function"?A.call(b,r):void 0),typeof i!="function"&&(i=s[i]),T.call(i,s,function(g,d){return a.call(r,g)?T.call(v,o,r[g],g,r,d):n})}}},{"./valid-callable":160,"./valid-value":162}],144:[function(t,B,V){B.exports=t("./is-implemented")()?Object.assign:t("./shim")},{"./is-implemented":145,"./shim":146}],145:[function(t,B,V){B.exports=function(){var m=Object.assign,c;return typeof m!="function"?!1:(c={foo:"raz"},m(c,{bar:"dwa"},{trzy:"trzy"}),c.foo+c.bar+c.trzy==="razdwatrzy")}},{}],146:[function(t,B,V){var m=t("../keys"),c=t("../valid-value"),A=Math.max;B.exports=function(T,e){var a,i,n=A(arguments.length,2),r;for(T=Object(c(T)),r=function(v){try{T[v]=e[v]}catch(s){a||(a=s)}},i=1;i<n;++i)e=arguments[i],m(e).forEach(r);if(a!==void 0)throw a;return T}},{"../keys":152,"../valid-value":162}],147:[function(t,B,V){var m=t("../array/from"),c=t("./assign"),A=t("./valid-value");B.exports=function(T){var e=Object(A(T)),a=arguments[1],i=Object(arguments[2]);if(e!==T&&!a)return e;var n={};return a?m(a,function(r){(i.ensure||r in T)&&(n[r]=T[r])}):c(n,T),n}},{"../array/from":132,"./assign":144,"./valid-value":162}],148:[function(t,B,V){var m=Object.create,c;t("./set-prototype-of/is-implemented")()||(c=t("./set-prototype-of/shim")),B.exports=function(){var A,T,e;return!c||c.level!==1?m:(A={},T={},e={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(a){if(a==="__proto__"){T[a]={configurable:!0,enumerable:!1,writable:!0,value:void 0};return}T[a]=e}),Object.defineProperties(A,T),Object.defineProperty(c,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:A}),function(a,i){return m(a===null?A:a,i)})}()},{"./set-prototype-of/is-implemented":158,"./set-prototype-of/shim":159}],149:[function(t,B,V){B.exports=t("./_iterate")("forEach")},{"./_iterate":143}],150:[function(t,B,V){var m=t("./is-value"),c={function:!0,object:!0};B.exports=function(A){return m(A)&&c[typeof A]||!1}},{"./is-value":151}],151:[function(t,B,V){var m=t("../function/noop")();B.exports=function(c){return c!==m&&c!==null}},{"../function/noop":137}],152:[function(t,B,V){B.exports=t("./is-implemented")()?Object.keys:t("./shim")},{"./is-implemented":153,"./shim":154}],153:[function(t,B,V){B.exports=function(){try{return Object.keys("primitive"),!0}catch{return!1}}},{}],154:[function(t,B,V){var m=t("../is-value"),c=Object.keys;B.exports=function(A){return c(m(A)?Object(A):A)}},{"../is-value":151}],155:[function(t,B,V){var m=t("./valid-callable"),c=t("./for-each"),A=Function.prototype.call;B.exports=function(T,e){var a={},i=arguments[2];return m(e),c(T,function(n,r,v,s){a[r]=A.call(e,i,n,r,v,s)}),a}},{"./for-each":149,"./valid-callable":160}],156:[function(t,B,V){var m=t("./is-value"),c=Array.prototype.forEach,A=Object.create,T=function(e,a){var i;for(i in e)a[i]=e[i]};B.exports=function(e){var a=A(null);return c.call(arguments,function(i){!m(i)||T(Object(i),a)}),a}},{"./is-value":151}],157:[function(t,B,V){B.exports=t("./is-implemented")()?Object.setPrototypeOf:t("./shim")},{"./is-implemented":158,"./shim":159}],158:[function(t,B,V){var m=Object.create,c=Object.getPrototypeOf,A={};B.exports=function(){var T=Object.setPrototypeOf,e=arguments[0]||m;return typeof T!="function"?!1:c(T(e(null),A))===A}},{}],159:[function(t,B,V){var m=t("../is-object"),c=t("../valid-value"),A=Object.prototype.isPrototypeOf,T=Object.defineProperty,e={configurable:!0,enumerable:!1,writable:!0,value:void 0},a;a=function(i,n){if(c(i),n===null||m(n))return i;throw new TypeError("Prototype must be null or an object")},B.exports=function(i){var n,r;return i?(i.level===2?i.set?(r=i.set,n=function(v,s){return r.call(a(v,s),s),v}):n=function(v,s){return a(v,s).__proto__=s,v}:n=function v(s,o){var b;return a(s,o),b=A.call(v.nullPolyfill,s),b&&delete v.nullPolyfill.__proto__,o===null&&(o=v.nullPolyfill),s.__proto__=o,b&&T(v.nullPolyfill,"__proto__",e),s},Object.defineProperty(n,"level",{configurable:!1,enumerable:!1,writable:!1,value:i.level})):null}(function(){var i=Object.create(null),n={},r,v=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(v){try{r=v.set,r.call(i,n)}catch{}if(Object.getPrototypeOf(i)===n)return{set:r,level:2}}return i.__proto__=n,Object.getPrototypeOf(i)===n?{level:2}:(i={},i.__proto__=n,Object.getPrototypeOf(i)===n?{level:1}:!1)}()),t("../create")},{"../create":148,"../is-object":150,"../valid-value":162}],160:[function(t,B,V){B.exports=function(m){if(typeof m!="function")throw new TypeError(m+" is not a function");return m}},{}],161:[function(t,B,V){var m=t("./is-object");B.exports=function(c){if(!m(c))throw new TypeError(c+" is not an Object");return c}},{"./is-object":150}],162:[function(t,B,V){var m=t("./is-value");B.exports=function(c){if(!m(c))throw new TypeError("Cannot use null or undefined");return c}},{"./is-value":151}],163:[function(t,B,V){B.exports=t("./is-implemented")()?String.prototype.contains:t("./shim")},{"./is-implemented":164,"./shim":165}],164:[function(t,B,V){var m="razdwatrzy";B.exports=function(){return typeof m.contains!="function"?!1:m.contains("dwa")===!0&&m.contains("foo")===!1}},{}],165:[function(t,B,V){var m=String.prototype.indexOf;B.exports=function(c){return m.call(this,c,arguments[1])>-1}},{}],166:[function(t,B,V){var m=Object.prototype.toString,c=m.call("");B.exports=function(A){return typeof A=="string"||A&&typeof A=="object"&&(A instanceof String||m.call(A)===c)||!1}},{}],167:[function(t,B,V){var m=Object.create(null),c=Math.random;B.exports=function(){var A;do A=c().toString(36).slice(2);while(m[A]);return A}},{}],168:[function(t,B,V){var m=t("es5-ext/object/set-prototype-of"),c=t("es5-ext/string/#/contains"),A=t("d"),T=t("es6-symbol"),e=t("./"),a=Object.defineProperty,i;i=B.exports=function(n,r){if(!(this instanceof i))throw new TypeError("Constructor requires 'new'");e.call(this,n),r?c.call(r,"key+value")?r="key+value":c.call(r,"key")?r="key":r="value":r="value",a(this,"__kind__",A("",r))},m&&m(i,e),delete i.prototype.constructor,i.prototype=Object.create(e.prototype,{_resolve:A(function(n){return this.__kind__==="value"?this.__list__[n]:this.__kind__==="key+value"?[n,this.__list__[n]]:n})}),a(i.prototype,T.toStringTag,A("c","Array Iterator"))},{"./":171,d:106,"es5-ext/object/set-prototype-of":157,"es5-ext/string/#/contains":163,"es6-symbol":175}],169:[function(t,B,V){var m=t("es5-ext/function/is-arguments"),c=t("es5-ext/object/valid-callable"),A=t("es5-ext/string/is-string"),T=t("./get"),e=Array.isArray,a=Function.prototype.call,i=Array.prototype.some;B.exports=function(n,r){var v,s=arguments[2],o,b,g,d,f,y,l;if(e(n)||m(n)?v="array":A(n)?v="string":n=T(n),c(r),b=function(){g=!0},v==="array"){i.call(n,function(x){return a.call(r,s,x,b),g});return}if(v==="string"){for(f=n.length,d=0;d<f&&(y=n[d],d+1<f&&(l=y.charCodeAt(0),l>=55296&&l<=56319&&(y+=n[++d])),a.call(r,s,y,b),!g);++d);return}for(o=n.next();!o.done;){if(a.call(r,s,o.value,b),g)return;o=n.next()}}},{"./get":170,"es5-ext/function/is-arguments":135,"es5-ext/object/valid-callable":160,"es5-ext/string/is-string":166}],170:[function(t,B,V){var m=t("es5-ext/function/is-arguments"),c=t("es5-ext/string/is-string"),A=t("./array"),T=t("./string"),e=t("./valid-iterable"),a=t("es6-symbol").iterator;B.exports=function(i){return typeof e(i)[a]=="function"?i[a]():m(i)?new A(i):c(i)?new T(i):new A(i)}},{"./array":168,"./string":173,"./valid-iterable":174,"es5-ext/function/is-arguments":135,"es5-ext/string/is-string":166,"es6-symbol":175}],171:[function(t,B,V){var m=t("es5-ext/array/#/clear"),c=t("es5-ext/object/assign"),A=t("es5-ext/object/valid-callable"),T=t("es5-ext/object/valid-value"),e=t("d"),a=t("d/auto-bind"),i=t("es6-symbol"),n=Object.defineProperty,r=Object.defineProperties,v;B.exports=v=function(s,o){if(!(this instanceof v))throw new TypeError("Constructor requires 'new'");r(this,{__list__:e("w",T(s)),__context__:e("w",o),__nextIndex__:e("w",0)}),o&&(A(o.on),o.on("_add",this._onAdd),o.on("_delete",this._onDelete),o.on("_clear",this._onClear))},delete v.prototype.constructor,r(v.prototype,c({_next:e(function(){var s;if(!!this.__list__){if(this.__redo__&&(s=this.__redo__.shift(),s!==void 0))return s;if(this.__nextIndex__<this.__list__.length)return this.__nextIndex__++;this._unBind()}}),next:e(function(){return this._createResult(this._next())}),_createResult:e(function(s){return s===void 0?{done:!0,value:void 0}:{done:!1,value:this._resolve(s)}}),_resolve:e(function(s){return this.__list__[s]}),_unBind:e(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:e(function(){return"[object "+(this[i.toStringTag]||"Object")+"]"})},a({_onAdd:e(function(s){if(!(s>=this.__nextIndex__)){if(++this.__nextIndex__,!this.__redo__){n(this,"__redo__",e("c",[s]));return}this.__redo__.forEach(function(o,b){o>=s&&(this.__redo__[b]=++o)},this),this.__redo__.push(s)}}),_onDelete:e(function(s){var o;s>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(o=this.__redo__.indexOf(s),o!==-1&&this.__redo__.splice(o,1),this.__redo__.forEach(function(b,g){b>s&&(this.__redo__[g]=--b)},this)))}),_onClear:e(function(){this.__redo__&&m.call(this.__redo__),this.__nextIndex__=0})}))),n(v.prototype,i.iterator,e(function(){return this}))},{d:106,"d/auto-bind":105,"es5-ext/array/#/clear":131,"es5-ext/object/assign":144,"es5-ext/object/valid-callable":160,"es5-ext/object/valid-value":162,"es6-symbol":175}],172:[function(t,B,V){var m=t("es5-ext/function/is-arguments"),c=t("es5-ext/object/is-value"),A=t("es5-ext/string/is-string"),T=t("es6-symbol").iterator,e=Array.isArray;B.exports=function(a){return c(a)?e(a)||A(a)||m(a)?!0:typeof a[T]=="function":!1}},{"es5-ext/function/is-arguments":135,"es5-ext/object/is-value":151,"es5-ext/string/is-string":166,"es6-symbol":175}],173:[function(t,B,V){var m=t("es5-ext/object/set-prototype-of"),c=t("d"),A=t("es6-symbol"),T=t("./"),e=Object.defineProperty,a;a=B.exports=function(i){if(!(this instanceof a))throw new TypeError("Constructor requires 'new'");i=String(i),T.call(this,i),e(this,"__length__",c("",i.length))},m&&m(a,T),delete a.prototype.constructor,a.prototype=Object.create(T.prototype,{_next:c(function(){if(!!this.__list__){if(this.__nextIndex__<this.__length__)return this.__nextIndex__++;this._unBind()}}),_resolve:c(function(i){var n=this.__list__[i],r;return this.__nextIndex__===this.__length__?n:(r=n.charCodeAt(0),r>=55296&&r<=56319?n+this.__list__[this.__nextIndex__++]:n)})}),e(a.prototype,A.toStringTag,c("c","String Iterator"))},{"./":171,d:106,"es5-ext/object/set-prototype-of":157,"es6-symbol":175}],174:[function(t,B,V){var m=t("./is-iterable");B.exports=function(c){if(!m(c))throw new TypeError(c+" is not iterable");return c}},{"./is-iterable":172}],175:[function(t,B,V){B.exports=t("./is-implemented")()?t("ext/global-this").Symbol:t("./polyfill")},{"./is-implemented":176,"./polyfill":181,"ext/global-this":188}],176:[function(t,B,V){var m=t("ext/global-this"),c={object:!0,symbol:!0};B.exports=function(){var A=m.Symbol,T;if(typeof A!="function")return!1;T=A("test symbol");try{String(T)}catch{return!1}return!(!c[typeof A.iterator]||!c[typeof A.toPrimitive]||!c[typeof A.toStringTag])}},{"ext/global-this":188}],177:[function(t,B,V){B.exports=function(m){return m?typeof m=="symbol"?!0:!m.constructor||m.constructor.name!=="Symbol"?!1:m[m.constructor.toStringTag]==="Symbol":!1}},{}],178:[function(t,B,V){var m=t("d"),c=Object.create,A=Object.defineProperty,T=Object.prototype,e=c(null);B.exports=function(a){for(var i=0,n,r;e[a+(i||"")];)++i;return a+=i||"",e[a]=!0,n="@@"+a,A(T,n,m.gs(null,function(v){r||(r=!0,A(this,n,m(v)),r=!1)})),n}},{d:106}],179:[function(t,B,V){var m=t("d"),c=t("ext/global-this").Symbol;B.exports=function(A){return Object.defineProperties(A,{hasInstance:m("",c&&c.hasInstance||A("hasInstance")),isConcatSpreadable:m("",c&&c.isConcatSpreadable||A("isConcatSpreadable")),iterator:m("",c&&c.iterator||A("iterator")),match:m("",c&&c.match||A("match")),replace:m("",c&&c.replace||A("replace")),search:m("",c&&c.search||A("search")),species:m("",c&&c.species||A("species")),split:m("",c&&c.split||A("split")),toPrimitive:m("",c&&c.toPrimitive||A("toPrimitive")),toStringTag:m("",c&&c.toStringTag||A("toStringTag")),unscopables:m("",c&&c.unscopables||A("unscopables"))})}},{d:106,"ext/global-this":188}],180:[function(t,B,V){var m=t("d"),c=t("../../../validate-symbol"),A=Object.create(null);B.exports=function(T){return Object.defineProperties(T,{for:m(function(e){return A[e]?A[e]:A[e]=T(String(e))}),keyFor:m(function(e){var a;c(e);for(a in A)if(A[a]===e)return a})})}},{"../../../validate-symbol":182,d:106}],181:[function(t,B,V){var m=t("d"),c=t("./validate-symbol"),A=t("ext/global-this").Symbol,T=t("./lib/private/generate-name"),e=t("./lib/private/setup/standard-symbols"),a=t("./lib/private/setup/symbol-registry"),i=Object.create,n=Object.defineProperties,r=Object.defineProperty,v,s,o;if(typeof A=="function")try{String(A()),o=!0}catch{}else A=null;s=function(g){if(this instanceof s)throw new TypeError("Symbol is not a constructor");return v(g)},B.exports=v=function b(g){var d;if(this instanceof b)throw new TypeError("Symbol is not a constructor");return o?A(g):(d=i(s.prototype),g=g===void 0?"":String(g),n(d,{__description__:m("",g),__name__:m("",T(g))}))},e(v),a(v),n(s.prototype,{constructor:m(v),toString:m("",function(){return this.__name__})}),n(v.prototype,{toString:m(function(){return"Symbol ("+c(this).__description__+")"}),valueOf:m(function(){return c(this)})}),r(v.prototype,v.toPrimitive,m("",function(){var b=c(this);return typeof b=="symbol"?b:b.toString()})),r(v.prototype,v.toStringTag,m("c","Symbol")),r(s.prototype,v.toStringTag,m("c",v.prototype[v.toStringTag])),r(s.prototype,v.toPrimitive,m("c",v.prototype[v.toPrimitive]))},{"./lib/private/generate-name":178,"./lib/private/setup/standard-symbols":179,"./lib/private/setup/symbol-registry":180,"./validate-symbol":182,d:106,"ext/global-this":188}],182:[function(t,B,V){var m=t("./is-symbol");B.exports=function(c){if(!m(c))throw new TypeError(c+" is not a symbol");return c}},{"./is-symbol":177}],183:[function(t,B,V){B.exports=t("./is-implemented")()?WeakMap:t("./polyfill")},{"./is-implemented":184,"./polyfill":186}],184:[function(t,B,V){B.exports=function(){var m,c;if(typeof WeakMap!="function")return!1;try{m=new WeakMap([[c={},"one"],[{},"two"],[{},"three"]])}catch{return!1}return!(String(m)!=="[object WeakMap]"||typeof m.set!="function"||m.set({},1)!==m||typeof m.delete!="function"||typeof m.has!="function"||m.get(c)!=="one")}},{}],185:[function(t,B,V){B.exports=function(){return typeof WeakMap!="function"?!1:Object.prototype.toString.call(new WeakMap)==="[object WeakMap]"}()},{}],186:[function(t,B,V){var m=t("es5-ext/object/is-value"),c=t("es5-ext/object/set-prototype-of"),A=t("es5-ext/object/valid-object"),T=t("es5-ext/object/valid-value"),e=t("es5-ext/string/random-uniq"),a=t("d"),i=t("es6-iterator/get"),n=t("es6-iterator/for-of"),r=t("es6-symbol").toStringTag,v=t("./is-native-implemented"),s=Array.isArray,o=Object.defineProperty,b=Object.prototype.hasOwnProperty,g=Object.getPrototypeOf,d;B.exports=d=function(){var f=arguments[0],y;if(!(this instanceof d))throw new TypeError("Constructor requires 'new'");return y=v&&c&&WeakMap!==d?c(new WeakMap,g(this)):this,m(f)&&(s(f)||(f=i(f))),o(y,"__weakMapData__",a("c","$weakMap$"+e())),f&&n(f,function(l){T(l),y.set(l[0],l[1])}),y},v&&(c&&c(d,WeakMap),d.prototype=Object.create(WeakMap.prototype,{constructor:a(d)})),Object.defineProperties(d.prototype,{delete:a(function(f){return b.call(A(f),this.__weakMapData__)?(delete f[this.__weakMapData__],!0):!1}),get:a(function(f){if(!!b.call(A(f),this.__weakMapData__))return f[this.__weakMapData__]}),has:a(function(f){return b.call(A(f),this.__weakMapData__)}),set:a(function(f,y){return o(A(f),this.__weakMapData__,a("c",y)),this}),toString:a(function(){return"[object WeakMap]"})}),o(d.prototype,r,a("c","WeakMap"))},{"./is-native-implemented":185,d:106,"es5-ext/object/is-value":151,"es5-ext/object/set-prototype-of":157,"es5-ext/object/valid-object":161,"es5-ext/object/valid-value":162,"es5-ext/string/random-uniq":167,"es6-iterator/for-of":169,"es6-iterator/get":170,"es6-symbol":175}],187:[function(t,B,V){var m=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};B.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return m()}try{return __global__||m()}finally{delete Object.prototype.__global__}}()},{}],188:[function(t,B,V){B.exports=t("./is-implemented")()?globalThis:t("./implementation")},{"./implementation":187,"./is-implemented":189}],189:[function(t,B,V){B.exports=function(){return typeof globalThis!="object"||!globalThis?!1:globalThis.Array===Array}},{}],190:[function(t,B,V){var m=t("is-string-blank");B.exports=function(c){var A=typeof c;if(A==="string"){var T=c;if(c=+c,c===0&&m(T))return!1}else if(A!=="number")return!1;return c-c<1}},{"is-string-blank":237}],191:[function(t,B,V){var m=t("dtype");B.exports=c;function c(A,T,e){if(!A)throw new TypeError("must specify data as first parameter");if(e=+(e||0)|0,Array.isArray(A)&&A[0]&&typeof A[0][0]=="number"){var a=A[0].length,i=A.length*a,n,r,v,s;(!T||typeof T=="string")&&(T=new(m(T||"float32"))(i+e));var o=T.length-e;if(i!==o)throw new Error("source length "+i+" ("+a+"x"+A.length+") does not match destination length "+o);for(n=0,v=e;n<A.length;n++)for(r=0;r<a;r++)T[v++]=A[n][r]===null?NaN:A[n][r]}else if(!T||typeof T=="string"){var b=m(T||"float32");if(Array.isArray(A)||T==="array")for(T=new b(A.length+e),n=0,v=e,s=T.length;v<s;v++,n++)T[v]=A[n]===null?NaN:A[n];else e===0?T=new b(A):(T=new b(A.length+e),T.set(A,e))}else T.set(A,e);return T}},{dtype:127}],192:[function(t,B,V){var m=t("css-font/stringify"),c=[32,126];B.exports=A;function A(T){T=T||{};var e=T.shape?T.shape:T.canvas?[T.canvas.width,T.canvas.height]:[512,512],a=T.canvas||document.createElement("canvas"),i=T.font,n=typeof T.step=="number"?[T.step,T.step]:T.step||[32,32],r=T.chars||c;if(i&&typeof i!="string"&&(i=m(i)),!Array.isArray(r))r=String(r).split("");else if(r.length===2&&typeof r[0]=="number"&&typeof r[1]=="number"){for(var v=[],s=r[0],o=0;s<=r[1];s++)v[o++]=String.fromCharCode(s);r=v}e=e.slice(),a.width=e[0],a.height=e[1];var b=a.getContext("2d");b.fillStyle="#000",b.fillRect(0,0,a.width,a.height),b.font=i,b.textAlign="center",b.textBaseline="middle",b.fillStyle="#fff";for(var g=n[0]/2,d=n[1]/2,s=0;s<r.length;s++)b.fillText(r[s],g,d),(g+=n[0])>e[0]-n[0]/2&&(g=n[0]/2,d+=n[1]);return a}},{"css-font/stringify":102}],193:[function(t,B,V){B.exports=m,m.canvas=document.createElement("canvas"),m.cache={};function m(s,a){a||(a={}),(typeof s=="string"||Array.isArray(s))&&(a.family=s);var i=Array.isArray(a.family)?a.family.join(", "):a.family;if(!i)throw Error("`family` must be defined");var n=a.size||a.fontSize||a.em||48,r=a.weight||a.fontWeight||"",v=a.style||a.fontStyle||"",s=[v,r,n].join(" ")+"px "+i,o=a.origin||"top";if(m.cache[i]&&n<=m.cache[i].em)return c(m.cache[i],o);var b=a.canvas||m.canvas,g=b.getContext("2d"),d={upper:a.upper!==void 0?a.upper:"H",lower:a.lower!==void 0?a.lower:"x",descent:a.descent!==void 0?a.descent:"p",ascent:a.ascent!==void 0?a.ascent:"h",tittle:a.tittle!==void 0?a.tittle:"i",overshoot:a.overshoot!==void 0?a.overshoot:"O"},f=Math.ceil(n*1.5);b.height=f,b.width=f*.5,g.font=s;var y="H",l={top:0};g.clearRect(0,0,f,f),g.textBaseline="top",g.fillStyle="black",g.fillText(y,0,0);var x=A(g.getImageData(0,0,f,f));g.clearRect(0,0,f,f),g.textBaseline="bottom",g.fillText(y,0,f);var u=A(g.getImageData(0,0,f,f));l.lineHeight=l.bottom=f-u+x,g.clearRect(0,0,f,f),g.textBaseline="alphabetic",g.fillText(y,0,f);var M=A(g.getImageData(0,0,f,f)),_=f-M-1+x;l.baseline=l.alphabetic=_,g.clearRect(0,0,f,f),g.textBaseline="middle",g.fillText(y,0,f*.5);var p=A(g.getImageData(0,0,f,f));l.median=l.middle=f-p-1+x-f*.5,g.clearRect(0,0,f,f),g.textBaseline="hanging",g.fillText(y,0,f*.5);var w=A(g.getImageData(0,0,f,f));l.hanging=f-w-1+x-f*.5,g.clearRect(0,0,f,f),g.textBaseline="ideographic",g.fillText(y,0,f);var h=A(g.getImageData(0,0,f,f));if(l.ideographic=f-h-1+x,d.upper&&(g.clearRect(0,0,f,f),g.textBaseline="top",g.fillText(d.upper,0,0),l.upper=A(g.getImageData(0,0,f,f)),l.capHeight=l.baseline-l.upper),d.lower&&(g.clearRect(0,0,f,f),g.textBaseline="top",g.fillText(d.lower,0,0),l.lower=A(g.getImageData(0,0,f,f)),l.xHeight=l.baseline-l.lower),d.tittle&&(g.clearRect(0,0,f,f),g.textBaseline="top",g.fillText(d.tittle,0,0),l.tittle=A(g.getImageData(0,0,f,f))),d.ascent&&(g.clearRect(0,0,f,f),g.textBaseline="top",g.fillText(d.ascent,0,0),l.ascent=A(g.getImageData(0,0,f,f))),d.descent&&(g.clearRect(0,0,f,f),g.textBaseline="top",g.fillText(d.descent,0,0),l.descent=T(g.getImageData(0,0,f,f))),d.overshoot){g.clearRect(0,0,f,f),g.textBaseline="top",g.fillText(d.overshoot,0,0);var L=T(g.getImageData(0,0,f,f));l.overshoot=L-_}for(var S in l)l[S]/=n;return l.em=n,m.cache[i]=l,c(l,o)}function c(e,a){var i={};typeof a=="string"&&(a=e[a]);for(var n in e)n!=="em"&&(i[n]=e[n]-a);return i}function A(e){for(var a=e.height,i=e.data,n=3;n<i.length;n+=4)if(i[n]!==0)return Math.floor((n-3)*.25/a)}function T(e){for(var a=e.height,i=e.data,n=i.length-1;n>0;n-=4)if(i[n]!==0)return Math.floor((n-3)*.25/a)}},{}],194:[function(t,B,V){B.exports=m;function m(c,A){if(typeof c!="string")throw new TypeError("must specify type string");if(A=A||{},typeof document>"u"&&!A.canvas)return null;var T=A.canvas||document.createElement("canvas");typeof A.width=="number"&&(T.width=A.width),typeof A.height=="number"&&(T.height=A.height);var e=A,a;try{var i=[c];c.indexOf("webgl")===0&&i.push("experimental-"+c);for(var n=0;n<i.length;n++)if(a=T.getContext(i[n],e),a)return a}catch{a=null}return a||null}},{}],195:[function(t,B,V){B.exports=m;function m(c,A){var T=A[0],e=A[1],a=A[2],i=A[3],n=A[4],r=A[5],v=A[6],s=A[7],o=A[8],b=A[9],g=A[10],d=A[11],f=A[12],y=A[13],l=A[14],x=A[15];return c[0]=r*(g*x-d*l)-b*(v*x-s*l)+y*(v*d-s*g),c[1]=-(e*(g*x-d*l)-b*(a*x-i*l)+y*(a*d-i*g)),c[2]=e*(v*x-s*l)-r*(a*x-i*l)+y*(a*s-i*v),c[3]=-(e*(v*d-s*g)-r*(a*d-i*g)+b*(a*s-i*v)),c[4]=-(n*(g*x-d*l)-o*(v*x-s*l)+f*(v*d-s*g)),c[5]=T*(g*x-d*l)-o*(a*x-i*l)+f*(a*d-i*g),c[6]=-(T*(v*x-s*l)-n*(a*x-i*l)+f*(a*s-i*v)),c[7]=T*(v*d-s*g)-n*(a*d-i*g)+o*(a*s-i*v),c[8]=n*(b*x-d*y)-o*(r*x-s*y)+f*(r*d-s*b),c[9]=-(T*(b*x-d*y)-o*(e*x-i*y)+f*(e*d-i*b)),c[10]=T*(r*x-s*y)-n*(e*x-i*y)+f*(e*s-i*r),c[11]=-(T*(r*d-s*b)-n*(e*d-i*b)+o*(e*s-i*r)),c[12]=-(n*(b*l-g*y)-o*(r*l-v*y)+f*(r*g-v*b)),c[13]=T*(b*l-g*y)-o*(e*l-a*y)+f*(e*g-a*b),c[14]=-(T*(r*l-v*y)-n*(e*l-a*y)+f*(e*v-a*r)),c[15]=T*(r*g-v*b)-n*(e*g-a*b)+o*(e*v-a*r),c}},{}],196:[function(t,B,V){B.exports=m;function m(c){var A=new Float32Array(16);return A[0]=c[0],A[1]=c[1],A[2]=c[2],A[3]=c[3],A[4]=c[4],A[5]=c[5],A[6]=c[6],A[7]=c[7],A[8]=c[8],A[9]=c[9],A[10]=c[10],A[11]=c[11],A[12]=c[12],A[13]=c[13],A[14]=c[14],A[15]=c[15],A}},{}],197:[function(t,B,V){B.exports=m;function m(c,A){return c[0]=A[0],c[1]=A[1],c[2]=A[2],c[3]=A[3],c[4]=A[4],c[5]=A[5],c[6]=A[6],c[7]=A[7],c[8]=A[8],c[9]=A[9],c[10]=A[10],c[11]=A[11],c[12]=A[12],c[13]=A[13],c[14]=A[14],c[15]=A[15],c}},{}],198:[function(t,B,V){B.exports=m;function m(){var c=new Float32Array(16);return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}},{}],199:[function(t,B,V){B.exports=m;function m(c){var A=c[0],T=c[1],e=c[2],a=c[3],i=c[4],n=c[5],r=c[6],v=c[7],s=c[8],o=c[9],b=c[10],g=c[11],d=c[12],f=c[13],y=c[14],l=c[15],x=A*n-T*i,u=A*r-e*i,M=A*v-a*i,_=T*r-e*n,p=T*v-a*n,w=e*v-a*r,h=s*f-o*d,L=s*y-b*d,S=s*l-g*d,E=o*y-b*f,P=o*l-g*f,F=b*l-g*y;return x*F-u*P+M*E+_*S-p*L+w*h}},{}],200:[function(t,B,V){B.exports=m;function m(c,A){var T=A[0],e=A[1],a=A[2],i=A[3],n=T+T,r=e+e,v=a+a,s=T*n,o=e*n,b=e*r,g=a*n,d=a*r,f=a*v,y=i*n,l=i*r,x=i*v;return c[0]=1-b-f,c[1]=o+x,c[2]=g-l,c[3]=0,c[4]=o-x,c[5]=1-s-f,c[6]=d+y,c[7]=0,c[8]=g+l,c[9]=d-y,c[10]=1-s-b,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}},{}],201:[function(t,B,V){B.exports=m;function m(c,A,T){var e,a,i,n=T[0],r=T[1],v=T[2],s=Math.sqrt(n*n+r*r+v*v);return Math.abs(s)<1e-6?null:(s=1/s,n*=s,r*=s,v*=s,e=Math.sin(A),a=Math.cos(A),i=1-a,c[0]=n*n*i+a,c[1]=r*n*i+v*e,c[2]=v*n*i-r*e,c[3]=0,c[4]=n*r*i-v*e,c[5]=r*r*i+a,c[6]=v*r*i+n*e,c[7]=0,c[8]=n*v*i+r*e,c[9]=r*v*i-n*e,c[10]=v*v*i+a,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c)}},{}],202:[function(t,B,V){B.exports=m;function m(c,A,T){var e=A[0],a=A[1],i=A[2],n=A[3],r=e+e,v=a+a,s=i+i,o=e*r,b=e*v,g=e*s,d=a*v,f=a*s,y=i*s,l=n*r,x=n*v,u=n*s;return c[0]=1-(d+y),c[1]=b+u,c[2]=g-x,c[3]=0,c[4]=b-u,c[5]=1-(o+y),c[6]=f+l,c[7]=0,c[8]=g+x,c[9]=f-l,c[10]=1-(o+d),c[11]=0,c[12]=T[0],c[13]=T[1],c[14]=T[2],c[15]=1,c}},{}],203:[function(t,B,V){B.exports=m;function m(c,A){return c[0]=A[0],c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=A[1],c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=A[2],c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}},{}],204:[function(t,B,V){B.exports=m;function m(c,A){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=A[0],c[13]=A[1],c[14]=A[2],c[15]=1,c}},{}],205:[function(t,B,V){B.exports=m;function m(c,A){var T=Math.sin(A),e=Math.cos(A);return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=e,c[6]=T,c[7]=0,c[8]=0,c[9]=-T,c[10]=e,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}},{}],206:[function(t,B,V){B.exports=m;function m(c,A){var T=Math.sin(A),e=Math.cos(A);return c[0]=e,c[1]=0,c[2]=-T,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=T,c[9]=0,c[10]=e,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}},{}],207:[function(t,B,V){B.exports=m;function m(c,A){var T=Math.sin(A),e=Math.cos(A);return c[0]=e,c[1]=T,c[2]=0,c[3]=0,c[4]=-T,c[5]=e,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}},{}],208:[function(t,B,V){B.exports=m;function m(c,A,T,e,a,i,n){var r=1/(T-A),v=1/(a-e),s=1/(i-n);return c[0]=i*2*r,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=i*2*v,c[6]=0,c[7]=0,c[8]=(T+A)*r,c[9]=(a+e)*v,c[10]=(n+i)*s,c[11]=-1,c[12]=0,c[13]=0,c[14]=n*i*2*s,c[15]=0,c}},{}],209:[function(t,B,V){B.exports=m;function m(c){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}},{}],210:[function(t,B,V){B.exports={create:t("./create"),clone:t("./clone"),copy:t("./copy"),identity:t("./identity"),transpose:t("./transpose"),invert:t("./invert"),adjoint:t("./adjoint"),determinant:t("./determinant"),multiply:t("./multiply"),translate:t("./translate"),scale:t("./scale"),rotate:t("./rotate"),rotateX:t("./rotateX"),rotateY:t("./rotateY"),rotateZ:t("./rotateZ"),fromRotation:t("./fromRotation"),fromRotationTranslation:t("./fromRotationTranslation"),fromScaling:t("./fromScaling"),fromTranslation:t("./fromTranslation"),fromXRotation:t("./fromXRotation"),fromYRotation:t("./fromYRotation"),fromZRotation:t("./fromZRotation"),fromQuat:t("./fromQuat"),frustum:t("./frustum"),perspective:t("./perspective"),perspectiveFromFieldOfView:t("./perspectiveFromFieldOfView"),ortho:t("./ortho"),lookAt:t("./lookAt"),str:t("./str")}},{"./adjoint":195,"./clone":196,"./copy":197,"./create":198,"./determinant":199,"./fromQuat":200,"./fromRotation":201,"./fromRotationTranslation":202,"./fromScaling":203,"./fromTranslation":204,"./fromXRotation":205,"./fromYRotation":206,"./fromZRotation":207,"./frustum":208,"./identity":209,"./invert":211,"./lookAt":212,"./multiply":213,"./ortho":214,"./perspective":215,"./perspectiveFromFieldOfView":216,"./rotate":217,"./rotateX":218,"./rotateY":219,"./rotateZ":220,"./scale":221,"./str":222,"./translate":223,"./transpose":224}],211:[function(t,B,V){B.exports=m;function m(c,A){var T=A[0],e=A[1],a=A[2],i=A[3],n=A[4],r=A[5],v=A[6],s=A[7],o=A[8],b=A[9],g=A[10],d=A[11],f=A[12],y=A[13],l=A[14],x=A[15],u=T*r-e*n,M=T*v-a*n,_=T*s-i*n,p=e*v-a*r,w=e*s-i*r,h=a*s-i*v,L=o*y-b*f,S=o*l-g*f,E=o*x-d*f,P=b*l-g*y,F=b*x-d*y,I=g*x-d*l,D=u*I-M*F+_*P+p*E-w*S+h*L;return D?(D=1/D,c[0]=(r*I-v*F+s*P)*D,c[1]=(a*F-e*I-i*P)*D,c[2]=(y*h-l*w+x*p)*D,c[3]=(g*w-b*h-d*p)*D,c[4]=(v*E-n*I-s*S)*D,c[5]=(T*I-a*E+i*S)*D,c[6]=(l*_-f*h-x*M)*D,c[7]=(o*h-g*_+d*M)*D,c[8]=(n*F-r*E+s*L)*D,c[9]=(e*E-T*F-i*L)*D,c[10]=(f*w-y*_+x*u)*D,c[11]=(b*_-o*w-d*u)*D,c[12]=(r*S-n*P-v*L)*D,c[13]=(T*P-e*S+a*L)*D,c[14]=(y*M-f*p-l*u)*D,c[15]=(o*p-b*M+g*u)*D,c):null}},{}],212:[function(t,B,V){var m=t("./identity");B.exports=c;function c(A,T,e,a){var i,n,r,v,s,o,b,g,d,f,y=T[0],l=T[1],x=T[2],u=a[0],M=a[1],_=a[2],p=e[0],w=e[1],h=e[2];return Math.abs(y-p)<1e-6&&Math.abs(l-w)<1e-6&&Math.abs(x-h)<1e-6?m(A):(b=y-p,g=l-w,d=x-h,f=1/Math.sqrt(b*b+g*g+d*d),b*=f,g*=f,d*=f,i=M*d-_*g,n=_*b-u*d,r=u*g-M*b,f=Math.sqrt(i*i+n*n+r*r),f?(f=1/f,i*=f,n*=f,r*=f):(i=0,n=0,r=0),v=g*r-d*n,s=d*i-b*r,o=b*n-g*i,f=Math.sqrt(v*v+s*s+o*o),f?(f=1/f,v*=f,s*=f,o*=f):(v=0,s=0,o=0),A[0]=i,A[1]=v,A[2]=b,A[3]=0,A[4]=n,A[5]=s,A[6]=g,A[7]=0,A[8]=r,A[9]=o,A[10]=d,A[11]=0,A[12]=-(i*y+n*l+r*x),A[13]=-(v*y+s*l+o*x),A[14]=-(b*y+g*l+d*x),A[15]=1,A)}},{"./identity":209}],213:[function(t,B,V){B.exports=m;function m(c,A,T){var e=A[0],a=A[1],i=A[2],n=A[3],r=A[4],v=A[5],s=A[6],o=A[7],b=A[8],g=A[9],d=A[10],f=A[11],y=A[12],l=A[13],x=A[14],u=A[15],M=T[0],_=T[1],p=T[2],w=T[3];return c[0]=M*e+_*r+p*b+w*y,c[1]=M*a+_*v+p*g+w*l,c[2]=M*i+_*s+p*d+w*x,c[3]=M*n+_*o+p*f+w*u,M=T[4],_=T[5],p=T[6],w=T[7],c[4]=M*e+_*r+p*b+w*y,c[5]=M*a+_*v+p*g+w*l,c[6]=M*i+_*s+p*d+w*x,c[7]=M*n+_*o+p*f+w*u,M=T[8],_=T[9],p=T[10],w=T[11],c[8]=M*e+_*r+p*b+w*y,c[9]=M*a+_*v+p*g+w*l,c[10]=M*i+_*s+p*d+w*x,c[11]=M*n+_*o+p*f+w*u,M=T[12],_=T[13],p=T[14],w=T[15],c[12]=M*e+_*r+p*b+w*y,c[13]=M*a+_*v+p*g+w*l,c[14]=M*i+_*s+p*d+w*x,c[15]=M*n+_*o+p*f+w*u,c}},{}],214:[function(t,B,V){B.exports=m;function m(c,A,T,e,a,i,n){var r=1/(A-T),v=1/(e-a),s=1/(i-n);return c[0]=-2*r,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=-2*v,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=2*s,c[11]=0,c[12]=(A+T)*r,c[13]=(a+e)*v,c[14]=(n+i)*s,c[15]=1,c}},{}],215:[function(t,B,V){B.exports=m;function m(c,A,T,e,a){var i=1/Math.tan(A/2),n=1/(e-a);return c[0]=i/T,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=i,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=(a+e)*n,c[11]=-1,c[12]=0,c[13]=0,c[14]=2*a*e*n,c[15]=0,c}},{}],216:[function(t,B,V){B.exports=m;function m(c,A,T,e){var a=Math.tan(A.upDegrees*Math.PI/180),i=Math.tan(A.downDegrees*Math.PI/180),n=Math.tan(A.leftDegrees*Math.PI/180),r=Math.tan(A.rightDegrees*Math.PI/180),v=2/(n+r),s=2/(a+i);return c[0]=v,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=s,c[6]=0,c[7]=0,c[8]=-((n-r)*v*.5),c[9]=(a-i)*s*.5,c[10]=e/(T-e),c[11]=-1,c[12]=0,c[13]=0,c[14]=e*T/(T-e),c[15]=0,c}},{}],217:[function(t,B,V){B.exports=m;function m(c,A,T,e){var a=e[0],i=e[1],n=e[2],r=Math.sqrt(a*a+i*i+n*n),v,s,o,b,g,d,f,y,l,x,u,M,_,p,w,h,L,S,E,P,F,I,D,R;return Math.abs(r)<1e-6?null:(r=1/r,a*=r,i*=r,n*=r,v=Math.sin(T),s=Math.cos(T),o=1-s,b=A[0],g=A[1],d=A[2],f=A[3],y=A[4],l=A[5],x=A[6],u=A[7],M=A[8],_=A[9],p=A[10],w=A[11],h=a*a*o+s,L=i*a*o+n*v,S=n*a*o-i*v,E=a*i*o-n*v,P=i*i*o+s,F=n*i*o+a*v,I=a*n*o+i*v,D=i*n*o-a*v,R=n*n*o+s,c[0]=b*h+y*L+M*S,c[1]=g*h+l*L+_*S,c[2]=d*h+x*L+p*S,c[3]=f*h+u*L+w*S,c[4]=b*E+y*P+M*F,c[5]=g*E+l*P+_*F,c[6]=d*E+x*P+p*F,c[7]=f*E+u*P+w*F,c[8]=b*I+y*D+M*R,c[9]=g*I+l*D+_*R,c[10]=d*I+x*D+p*R,c[11]=f*I+u*D+w*R,A!==c&&(c[12]=A[12],c[13]=A[13],c[14]=A[14],c[15]=A[15]),c)}},{}],218:[function(t,B,V){B.exports=m;function m(c,A,T){var e=Math.sin(T),a=Math.cos(T),i=A[4],n=A[5],r=A[6],v=A[7],s=A[8],o=A[9],b=A[10],g=A[11];return A!==c&&(c[0]=A[0],c[1]=A[1],c[2]=A[2],c[3]=A[3],c[12]=A[12],c[13]=A[13],c[14]=A[14],c[15]=A[15]),c[4]=i*a+s*e,c[5]=n*a+o*e,c[6]=r*a+b*e,c[7]=v*a+g*e,c[8]=s*a-i*e,c[9]=o*a-n*e,c[10]=b*a-r*e,c[11]=g*a-v*e,c}},{}],219:[function(t,B,V){B.exports=m;function m(c,A,T){var e=Math.sin(T),a=Math.cos(T),i=A[0],n=A[1],r=A[2],v=A[3],s=A[8],o=A[9],b=A[10],g=A[11];return A!==c&&(c[4]=A[4],c[5]=A[5],c[6]=A[6],c[7]=A[7],c[12]=A[12],c[13]=A[13],c[14]=A[14],c[15]=A[15]),c[0]=i*a-s*e,c[1]=n*a-o*e,c[2]=r*a-b*e,c[3]=v*a-g*e,c[8]=i*e+s*a,c[9]=n*e+o*a,c[10]=r*e+b*a,c[11]=v*e+g*a,c}},{}],220:[function(t,B,V){B.exports=m;function m(c,A,T){var e=Math.sin(T),a=Math.cos(T),i=A[0],n=A[1],r=A[2],v=A[3],s=A[4],o=A[5],b=A[6],g=A[7];return A!==c&&(c[8]=A[8],c[9]=A[9],c[10]=A[10],c[11]=A[11],c[12]=A[12],c[13]=A[13],c[14]=A[14],c[15]=A[15]),c[0]=i*a+s*e,c[1]=n*a+o*e,c[2]=r*a+b*e,c[3]=v*a+g*e,c[4]=s*a-i*e,c[5]=o*a-n*e,c[6]=b*a-r*e,c[7]=g*a-v*e,c}},{}],221:[function(t,B,V){B.exports=m;function m(c,A,T){var e=T[0],a=T[1],i=T[2];return c[0]=A[0]*e,c[1]=A[1]*e,c[2]=A[2]*e,c[3]=A[3]*e,c[4]=A[4]*a,c[5]=A[5]*a,c[6]=A[6]*a,c[7]=A[7]*a,c[8]=A[8]*i,c[9]=A[9]*i,c[10]=A[10]*i,c[11]=A[11]*i,c[12]=A[12],c[13]=A[13],c[14]=A[14],c[15]=A[15],c}},{}],222:[function(t,B,V){B.exports=m;function m(c){return"mat4("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+", "+c[4]+", "+c[5]+", "+c[6]+", "+c[7]+", "+c[8]+", "+c[9]+", "+c[10]+", "+c[11]+", "+c[12]+", "+c[13]+", "+c[14]+", "+c[15]+")"}},{}],223:[function(t,B,V){B.exports=m;function m(c,A,T){var e=T[0],a=T[1],i=T[2],n,r,v,s,o,b,g,d,f,y,l,x;return A===c?(c[12]=A[0]*e+A[4]*a+A[8]*i+A[12],c[13]=A[1]*e+A[5]*a+A[9]*i+A[13],c[14]=A[2]*e+A[6]*a+A[10]*i+A[14],c[15]=A[3]*e+A[7]*a+A[11]*i+A[15]):(n=A[0],r=A[1],v=A[2],s=A[3],o=A[4],b=A[5],g=A[6],d=A[7],f=A[8],y=A[9],l=A[10],x=A[11],c[0]=n,c[1]=r,c[2]=v,c[3]=s,c[4]=o,c[5]=b,c[6]=g,c[7]=d,c[8]=f,c[9]=y,c[10]=l,c[11]=x,c[12]=n*e+o*a+f*i+A[12],c[13]=r*e+b*a+y*i+A[13],c[14]=v*e+g*a+l*i+A[14],c[15]=s*e+d*a+x*i+A[15]),c}},{}],224:[function(t,B,V){B.exports=m;function m(c,A){if(c===A){var T=A[1],e=A[2],a=A[3],i=A[6],n=A[7],r=A[11];c[1]=A[4],c[2]=A[8],c[3]=A[12],c[4]=T,c[6]=A[9],c[7]=A[13],c[8]=e,c[9]=i,c[11]=A[14],c[12]=a,c[13]=n,c[14]=r}else c[0]=A[0],c[1]=A[4],c[2]=A[8],c[3]=A[12],c[4]=A[1],c[5]=A[5],c[6]=A[9],c[7]=A[13],c[8]=A[2],c[9]=A[6],c[10]=A[10],c[11]=A[14],c[12]=A[3],c[13]=A[7],c[14]=A[11],c[15]=A[15];return c}},{}],225:[function(t,B,V){var m=t("css-font"),c=t("pick-by-alias"),A=t("regl"),T=t("gl-util/context"),e=t("es6-weak-map"),a=t("color-normalize"),i=t("font-atlas"),n=t("typedarray-pool"),r=t("parse-rect"),v=t("is-plain-obj"),s=t("parse-unit"),o=t("to-px"),b=t("detect-kerning"),g=t("object-assign"),d=t("font-measure"),f=t("flatten-vertex-data"),y=t("bit-twiddle"),l=y.nextPow2,x=new e,u=!1;if(document.body){var M=document.body.appendChild(document.createElement("div"));M.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(M).fontStretch&&(u=!0),document.body.removeChild(M)}var _=function(h){p(h)?(h={regl:h},this.gl=h.regl._gl):this.gl=T(h),this.shader=x.get(this.gl),this.shader?this.regl=this.shader.regl:this.regl=h.regl||A({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),x.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(v(h)?h:{})};_.prototype.createShader=function(){var h=this.regl,L=h({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:h.prop("count"),offset:h.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:h.this("sizeBuffer")},width:{offset:0,stride:8,buffer:h.this("sizeBuffer")},char:h.this("charBuffer"),position:h.this("position")},uniforms:{atlasSize:function(E,P){return[P.atlas.width,P.atlas.height]},atlasDim:function(E,P){return[P.atlas.cols,P.atlas.rows]},atlas:function(E,P){return P.atlas.texture},charStep:function(E,P){return P.atlas.step},em:function(E,P){return P.atlas.em},color:h.prop("color"),opacity:h.prop("opacity"),viewport:h.this("viewportArray"),scale:h.this("scale"),align:h.prop("align"),baseline:h.prop("baseline"),translate:h.this("translate"),positionOffset:h.prop("positionOffset")},primitive:"points",viewport:h.this("viewport"),vert:`
			precision highp float;
			attribute float width, charOffset, char;
			attribute vec2 position;
			uniform float fontSize, charStep, em, align, baseline;
			uniform vec4 viewport;
			uniform vec4 color;
			uniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;
			varying vec2 charCoord, charId;
			varying float charWidth;
			varying vec4 fontColor;
			void main () {
				vec2 offset = floor(em * (vec2(align + charOffset, baseline)
					+ vec2(positionOffset.x, -positionOffset.y)))
					/ (viewport.zw * scale.xy);

				vec2 position = (position + translate) * scale;
				position += offset * scale;

				charCoord = position * viewport.zw + viewport.xy;

				gl_Position = vec4(position * 2. - 1., 0, 1);

				gl_PointSize = charStep;

				charId.x = mod(char, atlasDim.x);
				charId.y = floor(char / atlasDim.x);

				charWidth = width * em;

				fontColor = color / 255.;
			}`,frag:`
			precision highp float;
			uniform float fontSize, charStep, opacity;
			uniform vec2 atlasSize;
			uniform vec4 viewport;
			uniform sampler2D atlas;
			varying vec4 fontColor;
			varying vec2 charCoord, charId;
			varying float charWidth;

			float lightness(vec4 color) {
				return color.r * 0.299 + color.g * 0.587 + color.b * 0.114;
			}

			void main () {
				vec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;
				float halfCharStep = floor(charStep * .5 + .5);

				// invert y and shift by 1px (FF expecially needs that)
				uv.y = charStep - uv.y;

				// ignore points outside of character bounding box
				float halfCharWidth = ceil(charWidth * .5);
				if (floor(uv.x) > halfCharStep + halfCharWidth ||
					floor(uv.x) < halfCharStep - halfCharWidth) return;

				uv += charId * charStep;
				uv = uv / atlasSize;

				vec4 color = fontColor;
				vec4 mask = texture2D(atlas, uv);

				float maskY = lightness(mask);
				// float colorY = lightness(color);
				color.a *= maskY;
				color.a *= opacity;

				// color.a += .1;

				// antialiasing, see yiq color space y-channel formula
				// color.rgb += (1. - color.rgb) * (1. - mask.rgb);

				gl_FragColor = color;
			}`}),S={};return{regl:h,draw:L,atlas:S}},_.prototype.update=function(h){var L=this;if(typeof h=="string")h={text:h};else if(!h)return;h=c(h,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0),h.opacity!=null&&(Array.isArray(h.opacity)?this.opacity=h.opacity.map(function(Ae){return parseFloat(Ae)}):this.opacity=parseFloat(h.opacity)),h.viewport!=null&&(this.viewport=r(h.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),this.viewport==null&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),h.kerning!=null&&(this.kerning=h.kerning),h.offset!=null&&(typeof h.offset=="number"&&(h.offset=[h.offset,0]),this.positionOffset=f(h.offset)),h.direction&&(this.direction=h.direction),h.range&&(this.range=h.range,this.scale=[1/(h.range[2]-h.range[0]),1/(h.range[3]-h.range[1])],this.translate=[-h.range[0],-h.range[1]]),h.scale&&(this.scale=h.scale),h.translate&&(this.translate=h.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),!this.font.length&&!h.font&&(h.font=_.baseFontSize+"px sans-serif");var S=!1,E=!1;if(h.font&&(Array.isArray(h.font)?h.font:[h.font]).forEach(function(Ae,Le){if(typeof Ae=="string")try{Ae=m.parse(Ae)}catch{Ae=m.parse(_.baseFontSize+"px "+Ae)}else Ae=m.parse(m.stringify(Ae));var je=m.stringify({size:_.baseFontSize,family:Ae.family,stretch:u?Ae.stretch:void 0,variant:Ae.variant,weight:Ae.weight,style:Ae.style}),Ye=s(Ae.size),ze=Math.round(Ye[0]*o(Ye[1]));if(ze!==L.fontSize[Le]&&(E=!0,L.fontSize[Le]=ze),(!L.font[Le]||je!=L.font[Le].baseString)&&(S=!0,L.font[Le]=_.fonts[je],!L.font[Le])){var Ie=Ae.family.join(", "),We=[Ae.style];Ae.style!=Ae.variant&&We.push(Ae.variant),Ae.variant!=Ae.weight&&We.push(Ae.weight),u&&Ae.weight!=Ae.stretch&&We.push(Ae.stretch),L.font[Le]={baseString:je,family:Ie,weight:Ae.weight,stretch:Ae.stretch,style:Ae.style,variant:Ae.variant,width:{},kerning:{},metrics:d(Ie,{origin:"top",fontSize:_.baseFontSize,fontStyle:We.join(" ")})},_.fonts[je]=L.font[Le]}}),(S||E)&&this.font.forEach(function(Ae,Le){var je=m.stringify({size:L.fontSize[Le],family:Ae.family,stretch:u?Ae.stretch:void 0,variant:Ae.variant,weight:Ae.weight,style:Ae.style});if(L.fontAtlas[Le]=L.shader.atlas[je],!L.fontAtlas[Le]){var Ye=Ae.metrics;L.shader.atlas[je]=L.fontAtlas[Le]={fontString:je,step:Math.ceil(L.fontSize[Le]*Ye.bottom*.5)*2,em:L.fontSize[Le],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:L.regl.texture()}}h.text==null&&(h.text=L.text)}),typeof h.text=="string"&&h.position&&h.position.length>2){for(var P=Array(h.position.length*.5),F=0;F<P.length;F++)P[F]=h.text;h.text=P}var I;if(h.text!=null||S){if(this.textOffsets=[0],Array.isArray(h.text)){this.count=h.text[0].length,this.counts=[this.count];for(var D=1;D<h.text.length;D++)this.textOffsets[D]=this.textOffsets[D-1]+h.text[D-1].length,this.count+=h.text[D].length,this.counts.push(h.text[D].length);this.text=h.text.join("")}else this.text=h.text,this.count=this.text.length,this.counts=[this.count];I=[],this.font.forEach(function(Ae,Le){_.atlasContext.font=Ae.baseString;for(var je=L.fontAtlas[Le],Ye=0;Ye<L.text.length;Ye++){var ze=L.text.charAt(Ye);if(je.ids[ze]==null&&(je.ids[ze]=je.chars.length,je.chars.push(ze),I.push(ze)),Ae.width[ze]==null&&(Ae.width[ze]=_.atlasContext.measureText(ze).width/_.baseFontSize,L.kerning)){var Ie=[];for(var We in Ae.width)Ie.push(We+ze,ze+We);g(Ae.kerning,b(Ae.family,{pairs:Ie}))}}})}if(h.position)if(h.position.length>2){for(var R=!h.position[0].length,N=n.mallocFloat(this.count*2),z=0,G=0;z<this.counts.length;z++){var Y=this.counts[z];if(R)for(var ee=0;ee<Y;ee++)N[G++]=h.position[z*2],N[G++]=h.position[z*2+1];else for(var Z=0;Z<Y;Z++)N[G++]=h.position[z][0],N[G++]=h.position[z][1]}this.position.call?this.position({type:"float",data:N}):this.position=this.regl.buffer({type:"float",data:N}),n.freeFloat(N)}else this.position.destroy&&this.position.destroy(),this.position={constant:h.position};if(h.text||S){var X=n.mallocUint8(this.count),ne=n.mallocFloat(this.count*2);this.textWidth=[];for(var ce=0,Q=0;ce<this.counts.length;ce++){for(var K=this.counts[ce],U=this.font[ce]||this.font[0],H=this.fontAtlas[ce]||this.fontAtlas[0],q=0;q<K;q++){var re=this.text.charAt(Q),j=this.text.charAt(Q-1);if(X[Q]=H.ids[re],ne[Q*2]=U.width[re],q){var $=ne[Q*2-2],ie=ne[Q*2],oe=ne[Q*2-1],ae=oe+$*.5+ie*.5;if(this.kerning){var se=U.kerning[j+re];se&&(ae+=se*.001)}ne[Q*2+1]=ae}else ne[Q*2+1]=ne[Q*2]*.5;Q++}this.textWidth.push(ne.length?ne[Q*2-2]*.5+ne[Q*2-1]:0)}h.align||(h.align=this.align),this.charBuffer({data:X,type:"uint8",usage:"stream"}),this.sizeBuffer({data:ne,type:"float",usage:"stream"}),n.freeUint8(X),n.freeFloat(ne),I.length&&this.font.forEach(function(Ae,Le){var je=L.fontAtlas[Le],Ye=je.step,ze=Math.floor(_.maxAtlasSize/Ye),Ie=Math.min(ze,je.chars.length),We=Math.ceil(je.chars.length/Ie),pt=l(Ie*Ye),Ft=l(We*Ye);je.width=pt,je.height=Ft,je.rows=We,je.cols=Ie,je.em&&je.texture({data:i({canvas:_.atlasCanvas,font:je.fontString,chars:je.chars,shape:[pt,Ft],step:[Ye,Ye]})})})}if(h.align&&(this.align=h.align,this.alignOffset=this.textWidth.map(function(Ae,Le){var je=Array.isArray(L.align)?L.align.length>1?L.align[Le]:L.align[0]:L.align;if(typeof je=="number")return je;switch(je){case"right":case"end":return-Ae;case"center":case"centre":case"middle":return-Ae*.5}return 0})),this.baseline==null&&h.baseline==null&&(h.baseline=0),h.baseline!=null&&(this.baseline=h.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(Ae,Le){var je=(L.font[Le]||L.font[0]).metrics,Ye=0;return Ye+=je.bottom*.5,typeof Ae=="number"?Ye+=Ae-je.baseline:Ye+=-je[Ae],Ye*=-1,Ye})),h.color!=null)if(h.color||(h.color="transparent"),typeof h.color=="string"||!isNaN(h.color))this.color=a(h.color,"uint8");else{var _e;if(typeof h.color[0]=="number"&&h.color.length>this.counts.length){var ue=h.color.length;_e=n.mallocUint8(ue);for(var ye=(h.color.subarray||h.color.slice).bind(h.color),xe=0;xe<ue;xe+=4)_e.set(a(ye(xe,xe+4),"uint8"),xe)}else{var me=h.color.length;_e=n.mallocUint8(me*4);for(var be=0;be<me;be++)_e.set(a(h.color[be]||0,"uint8"),be*4)}this.color=_e}if(h.position||h.text||h.color||h.baseline||h.align||h.font||h.offset||h.opacity){var ke=this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2;if(ke){var De=Math.max(this.position.length*.5||0,this.color.length*.25||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,this.positionOffset.length*.5||0);this.batch=Array(De);for(var Ve=0;Ve<this.batch.length;Ve++)this.batch[Ve]={count:this.counts.length>1?this.counts[Ve]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[Ve]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(Ve*4,Ve*4+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[Ve]:this.opacity,baseline:this.baselineOffset[Ve]!=null?this.baselineOffset[Ve]:this.baselineOffset[0],align:this.align?this.alignOffset[Ve]!=null?this.alignOffset[Ve]:this.alignOffset[0]:0,atlas:this.fontAtlas[Ve]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(Ve*2,Ve*2+2):this.positionOffset}}else this.count?this.batch=[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:this.batch=[]}},_.prototype.destroy=function(){},_.prototype.kerning=!0,_.prototype.position={constant:new Float32Array(2)},_.prototype.translate=null,_.prototype.scale=null,_.prototype.font=null,_.prototype.text="",_.prototype.positionOffset=[0,0],_.prototype.opacity=1,_.prototype.color=new Uint8Array([0,0,0,255]),_.prototype.alignOffset=[0,0],_.maxAtlasSize=1024,_.atlasCanvas=document.createElement("canvas"),_.atlasContext=_.atlasCanvas.getContext("2d",{alpha:!1}),_.baseFontSize=64,_.fonts={};function p(w){return typeof w=="function"&&w._gl&&w.prop&&w.texture&&w.buffer}B.exports=_},{"bit-twiddle":81,"color-normalize":89,"css-font":99,"detect-kerning":125,"es6-weak-map":183,"flatten-vertex-data":191,"font-atlas":192,"font-measure":193,"gl-util/context":226,"is-plain-obj":236,"object-assign":247,"parse-rect":249,"parse-unit":251,"pick-by-alias":253,regl:284,"to-px":315,"typedarray-pool":328}],226:[function(t,B,V){(function(m){(function(){var c=t("pick-by-alias");B.exports=function(r){if(r?typeof r=="string"&&(r={container:r}):r={},T(r)?r={container:r}:e(r)?r={container:r}:a(r)?r={gl:r}:r=c(r,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0),r.pixelRatio||(r.pixelRatio=m.pixelRatio||1),r.gl)return r.gl;if(r.canvas&&(r.container=r.canvas.parentNode),r.container){if(typeof r.container=="string"){var v=document.querySelector(r.container);if(!v)throw Error("Element "+r.container+" is not found");r.container=v}T(r.container)?(r.canvas=r.container,r.container=r.canvas.parentNode):r.canvas||(r.canvas=i(),r.container.appendChild(r.canvas),A(r))}else if(!r.canvas)if(typeof document<"u")r.container=document.body||document.documentElement,r.canvas=i(),r.container.appendChild(r.canvas),A(r);else throw Error("Not DOM environment. Use headless-gl.");return r.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(s){try{r.gl=r.canvas.getContext(s,r.attrs)}catch{}return r.gl}),r.gl};function A(n){if(n.container)if(n.container==document.body)document.body.style.width||(n.canvas.width=n.width||n.pixelRatio*m.innerWidth),document.body.style.height||(n.canvas.height=n.height||n.pixelRatio*m.innerHeight);else{var r=n.container.getBoundingClientRect();n.canvas.width=n.width||r.right-r.left,n.canvas.height=n.height||r.bottom-r.top}}function T(n){return typeof n.getContext=="function"&&"width"in n&&"height"in n}function e(n){return typeof n.nodeName=="string"&&typeof n.appendChild=="function"&&typeof n.getBoundingClientRect=="function"}function a(n){return typeof n.drawArrays=="function"||typeof n.drawElements=="function"}function i(){var n=document.createElement("canvas");return n.style.position="absolute",n.style.top=0,n.style.left=0,n}}).call(this)}).call(this,typeof Ro<"u"?Ro:typeof self<"u"?self:typeof window<"u"?window:{})},{"pick-by-alias":253}],227:[function(t,B,V){B.exports=function(m){typeof m=="string"&&(m=[m]);for(var c=[].slice.call(arguments,1),A=[],T=0;T<m.length-1;T++)A.push(m[T],c[T]||"");return A.push(m[T]),A.join("")}},{}],228:[function(t,B,V){(function(m){(function(){var c=t("is-browser"),A;typeof m.matchMedia=="function"?A=!m.matchMedia("(hover: none)").matches:A=c,B.exports=A}).call(this)}).call(this,typeof Ro<"u"?Ro:typeof self<"u"?self:typeof window<"u"?window:{})},{"is-browser":232}],229:[function(t,B,V){var m=t("is-browser");function c(){var A=!1;try{var T=Object.defineProperty({},"passive",{get:function(){A=!0}});window.addEventListener("test",null,T),window.removeEventListener("test",null,T)}catch{A=!1}return A}B.exports=m&&c()},{"is-browser":232}],230:[function(t,B,V){V.read=function(m,c,A,T,e){var a,i,n=e*8-T-1,r=(1<<n)-1,v=r>>1,s=-7,o=A?e-1:0,b=A?-1:1,g=m[c+o];for(o+=b,a=g&(1<<-s)-1,g>>=-s,s+=n;s>0;a=a*256+m[c+o],o+=b,s-=8);for(i=a&(1<<-s)-1,a>>=-s,s+=T;s>0;i=i*256+m[c+o],o+=b,s-=8);if(a===0)a=1-v;else{if(a===r)return i?NaN:(g?-1:1)*(1/0);i=i+Math.pow(2,T),a=a-v}return(g?-1:1)*i*Math.pow(2,a-T)},V.write=function(m,c,A,T,e,a){var i,n,r,v=a*8-e-1,s=(1<<v)-1,o=s>>1,b=e===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=T?0:a-1,d=T?1:-1,f=c<0||c===0&&1/c<0?1:0;for(c=Math.abs(c),isNaN(c)||c===1/0?(n=isNaN(c)?1:0,i=s):(i=Math.floor(Math.log(c)/Math.LN2),c*(r=Math.pow(2,-i))<1&&(i--,r*=2),i+o>=1?c+=b/r:c+=b*Math.pow(2,1-o),c*r>=2&&(i++,r/=2),i+o>=s?(n=0,i=s):i+o>=1?(n=(c*r-1)*Math.pow(2,e),i=i+o):(n=c*Math.pow(2,o-1)*Math.pow(2,e),i=0));e>=8;m[A+g]=n&255,g+=d,n/=256,e-=8);for(i=i<<e|n,v+=e;v>0;m[A+g]=i&255,g+=d,i/=256,v-=8);m[A+g-d]|=f*128}},{}],231:[function(t,B,V){typeof Object.create=="function"?B.exports=function(c,A){A&&(c.super_=A,c.prototype=Object.create(A.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}))}:B.exports=function(c,A){if(A){c.super_=A;var T=function(){};T.prototype=A.prototype,c.prototype=new T,c.prototype.constructor=c}}},{}],232:[function(t,B,V){B.exports=!0},{}],233:[function(t,B,V){B.exports=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},{}],234:[function(t,B,V){B.exports=A,B.exports.isMobile=A,B.exports.default=A;var m=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,c=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function A(T){T||(T={});var e=T.ua;if(!e&&typeof navigator<"u"&&(e=navigator.userAgent),e&&e.headers&&typeof e.headers["user-agent"]=="string"&&(e=e.headers["user-agent"]),typeof e!="string")return!1;var a=T.tablet?c.test(e):m.test(e);return!a&&T.tablet&&T.featureDetect&&navigator&&navigator.maxTouchPoints>1&&e.indexOf("Macintosh")!==-1&&e.indexOf("Safari")!==-1&&(a=!0),a}},{}],235:[function(t,B,V){B.exports=function(m){var c=typeof m;return m!==null&&(c==="object"||c==="function")}},{}],236:[function(t,B,V){var m=Object.prototype.toString;B.exports=function(c){var A;return m.call(c)==="[object Object]"&&(A=Object.getPrototypeOf(c),A===null||A===Object.getPrototypeOf({}))}},{}],237:[function(t,B,V){B.exports=function(m){for(var c=m.length,A,T=0;T<c;T++)if(A=m.charCodeAt(T),(A<9||A>13)&&A!==32&&A!==133&&A!==160&&A!==5760&&A!==6158&&(A<8192||A>8205)&&A!==8232&&A!==8233&&A!==8239&&A!==8287&&A!==8288&&A!==12288&&A!==65279)return!1;return!0}},{}],238:[function(t,B,V){B.exports=function(c){return typeof c!="string"?!1:(c=c.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(c)&&/[\dz]$/i.test(c)&&c.length>4))}},{}],239:[function(t,B,V){(function(m,c){typeof V=="object"&&typeof B<"u"?B.exports=c():(m=m||self,m.mapboxgl=c())})(this,function(){var m,c,A;function T(e,a){if(!m)m=a;else if(!c)c=a;else{var i="var sharedChunk = {}; ("+m+")(sharedChunk); ("+c+")(sharedChunk);",n={};m(n),A=a(n),A.workerUrl=window.URL.createObjectURL(new Blob([i],{type:"text/javascript"}))}}return T(["exports"],function(e){function a(C,k){return k={exports:{}},C(k,k.exports),k.exports}var i="1.10.1",n=r;function r(C,k,O,te){this.cx=3*C,this.bx=3*(O-C)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*k,this.by=3*(te-k)-this.cy,this.ay=1-this.cy-this.by,this.p1x=C,this.p1y=te,this.p2x=O,this.p2y=te}r.prototype.sampleCurveX=function(C){return((this.ax*C+this.bx)*C+this.cx)*C},r.prototype.sampleCurveY=function(C){return((this.ay*C+this.by)*C+this.cy)*C},r.prototype.sampleCurveDerivativeX=function(C){return(3*this.ax*C+2*this.bx)*C+this.cx},r.prototype.solveCurveX=function(C,k){typeof k>"u"&&(k=1e-6);var O,te,pe,we,Me;for(pe=C,Me=0;Me<8;Me++){if(we=this.sampleCurveX(pe)-C,Math.abs(we)<k)return pe;var Oe=this.sampleCurveDerivativeX(pe);if(Math.abs(Oe)<1e-6)break;pe=pe-we/Oe}if(O=0,te=1,pe=C,pe<O)return O;if(pe>te)return te;for(;O<te;){if(we=this.sampleCurveX(pe),Math.abs(we-C)<k)return pe;C>we?O=pe:te=pe,pe=(te-O)*.5+O}return pe},r.prototype.solve=function(C,k){return this.sampleCurveY(this.solveCurveX(C,k))};var v=s;function s(C,k){this.x=C,this.y=k}s.prototype={clone:function(){return new s(this.x,this.y)},add:function(C){return this.clone()._add(C)},sub:function(C){return this.clone()._sub(C)},multByPoint:function(C){return this.clone()._multByPoint(C)},divByPoint:function(C){return this.clone()._divByPoint(C)},mult:function(C){return this.clone()._mult(C)},div:function(C){return this.clone()._div(C)},rotate:function(C){return this.clone()._rotate(C)},rotateAround:function(C,k){return this.clone()._rotateAround(C,k)},matMult:function(C){return this.clone()._matMult(C)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(C){return this.x===C.x&&this.y===C.y},dist:function(C){return Math.sqrt(this.distSqr(C))},distSqr:function(C){var k=C.x-this.x,O=C.y-this.y;return k*k+O*O},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(C){return Math.atan2(this.y-C.y,this.x-C.x)},angleWith:function(C){return this.angleWithSep(C.x,C.y)},angleWithSep:function(C,k){return Math.atan2(this.x*k-this.y*C,this.x*C+this.y*k)},_matMult:function(C){var k=C[0]*this.x+C[1]*this.y,O=C[2]*this.x+C[3]*this.y;return this.x=k,this.y=O,this},_add:function(C){return this.x+=C.x,this.y+=C.y,this},_sub:function(C){return this.x-=C.x,this.y-=C.y,this},_mult:function(C){return this.x*=C,this.y*=C,this},_div:function(C){return this.x/=C,this.y/=C,this},_multByPoint:function(C){return this.x*=C.x,this.y*=C.y,this},_divByPoint:function(C){return this.x/=C.x,this.y/=C.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var C=this.y;return this.y=this.x,this.x=-C,this},_rotate:function(C){var k=Math.cos(C),O=Math.sin(C),te=k*this.x-O*this.y,pe=O*this.x+k*this.y;return this.x=te,this.y=pe,this},_rotateAround:function(C,k){var O=Math.cos(C),te=Math.sin(C),pe=k.x+O*(this.x-k.x)-te*(this.y-k.y),we=k.y+te*(this.x-k.x)+O*(this.y-k.y);return this.x=pe,this.y=we,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},s.convert=function(C){return C instanceof s?C:Array.isArray(C)?new s(C[0],C[1]):C};function o(C,k){if(Array.isArray(C)){if(!Array.isArray(k)||C.length!==k.length)return!1;for(var O=0;O<C.length;O++)if(!o(C[O],k[O]))return!1;return!0}if(typeof C=="object"&&C!==null&&k!==null){if(typeof k!="object")return!1;var te=Object.keys(C);if(te.length!==Object.keys(k).length)return!1;for(var pe in C)if(!o(C[pe],k[pe]))return!1;return!0}return C===k}function b(C){if(C<=0)return 0;if(C>=1)return 1;var k=C*C,O=k*C;return 4*(C<.5?O:3*(C-k)+O-.75)}function g(C,k,O,te){var pe=new n(C,k,O,te);return function(we){return pe.solve(we)}}var d=g(.25,.1,.25,1);function f(C,k,O){return Math.min(O,Math.max(k,C))}function y(C,k,O){var te=O-k,pe=((C-k)%te+te)%te+k;return pe===k?O:pe}function l(C,k,O){if(!C.length)return O(null,[]);var te=C.length,pe=new Array(C.length),we=null;C.forEach(function(Me,Oe){k(Me,function(tt,ht){tt&&(we=tt),pe[Oe]=ht,--te===0&&O(we,pe)})})}function x(C){var k=[];for(var O in C)k.push(C[O]);return k}function u(C,k){var O=[];for(var te in C)te in k||O.push(te);return O}function M(C){for(var k=[],O=arguments.length-1;O-- >0;)k[O]=arguments[O+1];for(var te=0,pe=k;te<pe.length;te+=1){var we=pe[te];for(var Me in we)C[Me]=we[Me]}return C}function _(C,k){for(var O={},te=0;te<k.length;te++){var pe=k[te];pe in C&&(O[pe]=C[pe])}return O}var p=1;function w(){return p++}function h(){function C(k){return k?(k^Math.random()*16>>k/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,C)}return C()}function L(C){return C?/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(C):!1}function S(C,k){C.forEach(function(O){!k[O]||(k[O]=k[O].bind(k))})}function E(C,k){return C.indexOf(k,C.length-k.length)!==-1}function P(C,k,O){var te={};for(var pe in C)te[pe]=k.call(O||this,C[pe],pe,C);return te}function F(C,k,O){var te={};for(var pe in C)k.call(O||this,C[pe],pe,C)&&(te[pe]=C[pe]);return te}function I(C){return Array.isArray(C)?C.map(I):typeof C=="object"&&C?P(C,I):C}function D(C,k){for(var O=0;O<C.length;O++)if(k.indexOf(C[O])>=0)return!0;return!1}var R={};function N(C){R[C]||(typeof console<"u"&&console.warn(C),R[C]=!0)}function z(C,k,O){return(O.y-C.y)*(k.x-C.x)>(k.y-C.y)*(O.x-C.x)}function G(C){for(var k=0,O=0,te=C.length,pe=te-1,we=void 0,Me=void 0;O<te;pe=O++)we=C[O],Me=C[pe],k+=(Me.x-we.x)*(we.y+Me.y);return k}function Y(C){var k=C[0],O=C[1],te=C[2];return O+=90,O*=Math.PI/180,te*=Math.PI/180,{x:k*Math.cos(O)*Math.sin(te),y:k*Math.sin(O)*Math.sin(te),z:k*Math.cos(te)}}function ee(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Z(C){var k=/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,O={};if(C.replace(k,function(pe,we,Me,Oe){var tt=Me||Oe;return O[we]=tt?tt.toLowerCase():!0,""}),O["max-age"]){var te=parseInt(O["max-age"],10);isNaN(te)?delete O["max-age"]:O["max-age"]=te}return O}var X=null;function ne(C){if(X==null){var k=C.navigator?C.navigator.userAgent:null;X=!!C.safari||!!(k&&(/\b(iPad|iPhone|iPod)\b/.test(k)||!!k.match("Safari")&&!k.match("Chrome")))}return X}function ce(C){try{var k=self[C];return k.setItem("_mapbox_test_",1),k.removeItem("_mapbox_test_"),!0}catch{return!1}}function Q(C){return self.btoa(encodeURIComponent(C).replace(/%([0-9A-F]{2})/g,function(k,O){return String.fromCharCode(Number("0x"+O))}))}function K(C){return decodeURIComponent(self.atob(C).split("").map(function(k){return"%"+("00"+k.charCodeAt(0).toString(16)).slice(-2)}).join(""))}var U=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),H=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,q=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,re,j,$={now:U,frame:function(k){var O=H(k);return{cancel:function(){return q(O)}}},getImageData:function(k,O){O===void 0&&(O=0);var te=self.document.createElement("canvas"),pe=te.getContext("2d");if(!pe)throw new Error("failed to create canvas 2d context");return te.width=k.width,te.height=k.height,pe.drawImage(k,0,0,k.width,k.height),pe.getImageData(-O,-O,k.width+2*O,k.height+2*O)},resolveURL:function(k){return re||(re=self.document.createElement("a")),re.href=k,re.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return self.matchMedia?(j==null&&(j=self.matchMedia("(prefers-reduced-motion: reduce)")),j.matches):!1}},ie={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},oe={supported:!1,testSupport:ye},ae,se=!1,_e,ue=!1;self.document&&(_e=self.document.createElement("img"),_e.onload=function(){ae&&xe(ae),ae=null,ue=!0},_e.onerror=function(){se=!0,ae=null},_e.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");function ye(C){se||!_e||(ue?xe(C):ae=C)}function xe(C){var k=C.createTexture();C.bindTexture(C.TEXTURE_2D,k);try{if(C.texImage2D(C.TEXTURE_2D,0,C.RGBA,C.RGBA,C.UNSIGNED_BYTE,_e),C.isContextLost())return;oe.supported=!0}catch{}C.deleteTexture(k),se=!0}var me="01";function be(){for(var C="1",k="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",O="",te=0;te<10;te++)O+=k[Math.floor(Math.random()*62)];var pe=12*60*60*1e3,we=[C,me,O].join(""),Me=Date.now()+pe;return{token:we,tokenExpiresAt:Me}}var ke=function(k,O){this._transformRequestFn=k,this._customAccessToken=O,this._createSkuToken()};ke.prototype._createSkuToken=function(){var k=be();this._skuToken=k.token,this._skuTokenExpiresAt=k.tokenExpiresAt},ke.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},ke.prototype.transformRequest=function(k,O){return this._transformRequestFn?this._transformRequestFn(k,O)||{url:k}:{url:k}},ke.prototype.normalizeStyleURL=function(k,O){if(!De(k))return k;var te=ze(k);return te.path="/styles/v1"+te.path,this._makeAPIURL(te,this._customAccessToken||O)},ke.prototype.normalizeGlyphsURL=function(k,O){if(!De(k))return k;var te=ze(k);return te.path="/fonts/v1"+te.path,this._makeAPIURL(te,this._customAccessToken||O)},ke.prototype.normalizeSourceURL=function(k,O){if(!De(k))return k;var te=ze(k);return te.path="/v4/"+te.authority+".json",te.params.push("secure"),this._makeAPIURL(te,this._customAccessToken||O)},ke.prototype.normalizeSpriteURL=function(k,O,te,pe){var we=ze(k);return De(k)?(we.path="/styles/v1"+we.path+"/sprite"+O+te,this._makeAPIURL(we,this._customAccessToken||pe)):(we.path+=""+O+te,Ie(we))},ke.prototype.normalizeTileURL=function(k,O){if(this._isSkuTokenExpired()&&this._createSkuToken(),k&&!De(k))return k;var te=ze(k),pe=/(\.(png|jpg)\d*)(?=$)/,we=/^.+\/v4\//,Me=$.devicePixelRatio>=2||O===512?"@2x":"",Oe=oe.supported?".webp":"$1";te.path=te.path.replace(pe,""+Me+Oe),te.path=te.path.replace(we,"/"),te.path="/v4"+te.path;var tt=this._customAccessToken||je(te.params)||ie.ACCESS_TOKEN;return ie.REQUIRE_ACCESS_TOKEN&&tt&&this._skuToken&&te.params.push("sku="+this._skuToken),this._makeAPIURL(te,tt)},ke.prototype.canonicalizeTileURL=function(k,O){var te="/v4/",pe=/\.[\w]+$/,we=ze(k);if(!we.path.match(/(^\/v4\/)/)||!we.path.match(pe))return k;var Me="mapbox://tiles/";Me+=we.path.replace(te,"");var Oe=we.params;return O&&(Oe=Oe.filter(function(tt){return!tt.match(/^access_token=/)})),Oe.length&&(Me+="?"+Oe.join("&")),Me},ke.prototype.canonicalizeTileset=function(k,O){for(var te=O?De(O):!1,pe=[],we=0,Me=k.tiles||[];we<Me.length;we+=1){var Oe=Me[we];Ae(Oe)?pe.push(this.canonicalizeTileURL(Oe,te)):pe.push(Oe)}return pe},ke.prototype._makeAPIURL=function(k,O){var te="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",pe=ze(ie.API_URL);if(k.protocol=pe.protocol,k.authority=pe.authority,pe.path!=="/"&&(k.path=""+pe.path+k.path),!ie.REQUIRE_ACCESS_TOKEN)return Ie(k);if(O=O||ie.ACCESS_TOKEN,!O)throw new Error("An API access token is required to use Mapbox GL. "+te);if(O[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+te);return k.params=k.params.filter(function(we){return we.indexOf("access_token")===-1}),k.params.push("access_token="+O),Ie(k)};function De(C){return C.indexOf("mapbox:")===0}var Ve=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function Ae(C){return Ve.test(C)}function Le(C){return C.indexOf("sku=")>0&&Ae(C)}function je(C){for(var k=0,O=C;k<O.length;k+=1){var te=O[k],pe=te.match(/^access_token=(.*)$/);if(pe)return pe[1]}return null}var Ye=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function ze(C){var k=C.match(Ye);if(!k)throw new Error("Unable to parse URL object");return{protocol:k[1],authority:k[2],path:k[3]||"/",params:k[4]?k[4].split("&"):[]}}function Ie(C){var k=C.params.length?"?"+C.params.join("&"):"";return C.protocol+"://"+C.authority+C.path+k}var We="mapbox.eventData";function pt(C){if(!C)return null;var k=C.split(".");if(!k||k.length!==3)return null;try{var O=JSON.parse(K(k[1]));return O}catch{return null}}var Ft=function(k){this.type=k,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Ft.prototype.getStorageKey=function(k){var O=pt(ie.ACCESS_TOKEN),te="";return O&&O.u?te=Q(O.u):te=ie.ACCESS_TOKEN||"",k?We+"."+k+":"+te:We+":"+te},Ft.prototype.fetchEventData=function(){var k=ce("localStorage"),O=this.getStorageKey(),te=this.getStorageKey("uuid");if(k)try{var pe=self.localStorage.getItem(O);pe&&(this.eventData=JSON.parse(pe));var we=self.localStorage.getItem(te);we&&(this.anonId=we)}catch{N("Unable to read from LocalStorage")}},Ft.prototype.saveEventData=function(){var k=ce("localStorage"),O=this.getStorageKey(),te=this.getStorageKey("uuid");if(k)try{self.localStorage.setItem(te,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(O,JSON.stringify(this.eventData))}catch{N("Unable to write to LocalStorage")}},Ft.prototype.processRequests=function(k){},Ft.prototype.postEvent=function(k,O,te,pe){var we=this;if(!!ie.EVENTS_URL){var Me=ze(ie.EVENTS_URL);Me.params.push("access_token="+(pe||ie.ACCESS_TOKEN||""));var Oe={event:this.type,created:new Date(k).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:i,skuId:me,userId:this.anonId},tt=O?M(Oe,O):Oe,ht={url:Ie(Me),headers:{"Content-Type":"text/plain"},body:JSON.stringify([tt])};this.pendingRequest=Mt(ht,function(gt){we.pendingRequest=null,te(gt),we.saveEventData(),we.processRequests(pe)})}},Ft.prototype.queueRequest=function(k,O){this.queue.push(k),this.processRequests(O)};var Qt=function(C){function k(){C.call(this,"map.load"),this.success={},this.skuToken=""}return C&&(k.__proto__=C),k.prototype=Object.create(C&&C.prototype),k.prototype.constructor=k,k.prototype.postMapLoadEvent=function(te,pe,we,Me){this.skuToken=we,(ie.EVENTS_URL&&Me||ie.ACCESS_TOKEN&&Array.isArray(te)&&te.some(function(Oe){return De(Oe)||Ae(Oe)}))&&this.queueRequest({id:pe,timestamp:Date.now()},Me)},k.prototype.processRequests=function(te){var pe=this;if(!(this.pendingRequest||this.queue.length===0)){var we=this.queue.shift(),Me=we.id,Oe=we.timestamp;Me&&this.success[Me]||(this.anonId||this.fetchEventData(),L(this.anonId)||(this.anonId=h()),this.postEvent(Oe,{skuToken:this.skuToken},function(tt){tt||Me&&(pe.success[Me]=!0)},te))}},k}(Ft),zt=function(C){function k(O){C.call(this,"appUserTurnstile"),this._customAccessToken=O}return C&&(k.__proto__=C),k.prototype=Object.create(C&&C.prototype),k.prototype.constructor=k,k.prototype.postTurnstileEvent=function(te,pe){ie.EVENTS_URL&&ie.ACCESS_TOKEN&&Array.isArray(te)&&te.some(function(we){return De(we)||Ae(we)})&&this.queueRequest(Date.now(),pe)},k.prototype.processRequests=function(te){var pe=this;if(!(this.pendingRequest||this.queue.length===0)){(!this.anonId||!this.eventData.lastSuccess||!this.eventData.tokenU)&&this.fetchEventData();var we=pt(ie.ACCESS_TOKEN),Me=we?we.u:ie.ACCESS_TOKEN,Oe=Me!==this.eventData.tokenU;L(this.anonId)||(this.anonId=h(),Oe=!0);var tt=this.queue.shift();if(this.eventData.lastSuccess){var ht=new Date(this.eventData.lastSuccess),gt=new Date(tt),Ot=(tt-this.eventData.lastSuccess)/(24*60*60*1e3);Oe=Oe||Ot>=1||Ot<-1||ht.getDate()!==gt.getDate()}else Oe=!0;if(!Oe)return this.processRequests();this.postEvent(tt,{"enabled.telemetry":!1},function(nr){nr||(pe.eventData.lastSuccess=tt,pe.eventData.tokenU=Me)},te)}},k}(Ft),Et=new zt,Xt=Et.postTurnstileEvent.bind(Et),Nt=new Qt,Ct=Nt.postMapLoadEvent.bind(Nt),Xe="mapbox-tiles",at=500,Ge=50,Se=1e3*60*7,He;function Ke(){self.caches&&!He&&(He=self.caches.open(Xe))}var qe;function Tt(C,k){if(qe===void 0)try{new Response(new ReadableStream),qe=!0}catch{qe=!1}qe?k(C.body):C.blob().then(k)}function mt(C,k,O){if(Ke(),!!He){var te={status:k.status,statusText:k.statusText,headers:new self.Headers};k.headers.forEach(function(Me,Oe){return te.headers.set(Oe,Me)});var pe=Z(k.headers.get("Cache-Control")||"");if(!pe["no-store"]){pe["max-age"]&&te.headers.set("Expires",new Date(O+pe["max-age"]*1e3).toUTCString());var we=new Date(te.headers.get("Expires")).getTime()-O;we<Se||Tt(k,function(Me){var Oe=new self.Response(Me,te);Ke(),He&&He.then(function(tt){return tt.put(At(C.url),Oe)}).catch(function(tt){return N(tt.message)})})}}}function At(C){var k=C.indexOf("?");return k<0?C:C.slice(0,k)}function Ht(C,k){if(Ke(),!He)return k(null);var O=At(C.url);He.then(function(te){te.match(O).then(function(pe){var we=It(pe);te.delete(O),we&&te.put(O,pe.clone()),k(null,pe,we)}).catch(k)}).catch(k)}function It(C){if(!C)return!1;var k=new Date(C.headers.get("Expires")||0),O=Z(C.headers.get("Cache-Control")||"");return k>Date.now()&&!O["no-cache"]}var Vt=1/0;function jt(C){Vt++,Vt>Ge&&(C.getActor().send("enforceCacheSizeLimit",at),Vt=0)}function Yt(C){Ke(),He&&He.then(function(k){k.keys().then(function(O){for(var te=0;te<O.length-C;te++)k.delete(O[te])})})}function or(C){var k=self.caches.delete(Xe);C&&k.catch(C).then(function(){return C()})}function Gr(C,k){at=C,Ge=k}var on;function Jr(){return on==null&&(on=self.OffscreenCanvas&&new self.OffscreenCanvas(1,1).getContext("2d")&&typeof self.createImageBitmap=="function"),on}var ot={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(ot);var er=function(C){function k(O,te,pe){te===401&&Ae(pe)&&(O+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),C.call(this,O),this.status=te,this.url=pe,this.name=this.constructor.name,this.message=O}return C&&(k.__proto__=C),k.prototype=Object.create(C&&C.prototype),k.prototype.constructor=k,k.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},k}(Error),Kt=ee()?function(){return self.worker&&self.worker.referrer}:function(){return(self.location.protocol==="blob:"?self.parent:self).location.href},fr=function(C){return/^file:/.test(C)||/^file:/.test(Kt())&&!/^\w+:/.test(C)};function Ar(C,k){var O=new self.AbortController,te=new self.Request(C.url,{method:C.method||"GET",body:C.body,credentials:C.credentials,headers:C.headers,referrer:Kt(),signal:O.signal}),pe=!1,we=!1,Me=Le(te.url);C.type==="json"&&te.headers.set("Accept","application/json");var Oe=function(ht,gt,Ot){if(!we){if(ht&&ht.message!=="SecurityError"&&N(ht),gt&&Ot)return tt(gt);var nr=Date.now();self.fetch(te).then(function(qt){if(qt.ok){var yr=Me?qt.clone():null;return tt(qt,yr,nr)}else return k(new er(qt.statusText,qt.status,C.url))}).catch(function(qt){qt.code!==20&&k(new Error(qt.message))})}},tt=function(ht,gt,Ot){(C.type==="arrayBuffer"?ht.arrayBuffer():C.type==="json"?ht.json():ht.text()).then(function(nr){we||(gt&&Ot&&mt(te,gt,Ot),pe=!0,k(null,nr,ht.headers.get("Cache-Control"),ht.headers.get("Expires")))}).catch(function(nr){we||k(new Error(nr.message))})};return Me?Ht(te,Oe):Oe(null,null),{cancel:function(){we=!0,pe||O.abort()}}}function et(C,k){var O=new self.XMLHttpRequest;O.open(C.method||"GET",C.url,!0),C.type==="arrayBuffer"&&(O.responseType="arraybuffer");for(var te in C.headers)O.setRequestHeader(te,C.headers[te]);return C.type==="json"&&(O.responseType="text",O.setRequestHeader("Accept","application/json")),O.withCredentials=C.credentials==="include",O.onerror=function(){k(new Error(O.statusText))},O.onload=function(){if((O.status>=200&&O.status<300||O.status===0)&&O.response!==null){var pe=O.response;if(C.type==="json")try{pe=JSON.parse(O.response)}catch(we){return k(we)}k(null,pe,O.getResponseHeader("Cache-Control"),O.getResponseHeader("Expires"))}else k(new er(O.statusText,O.status,C.url))},O.send(C.body),{cancel:function(){return O.abort()}}}var $e=function(C,k){if(!fr(C.url)){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return Ar(C,k);if(ee()&&self.worker&&self.worker.actor){var O=!0;return self.worker.actor.send("getResource",C,k,void 0,O)}}return et(C,k)},st=function(C,k){return $e(M(C,{type:"json"}),k)},ct=function(C,k){return $e(M(C,{type:"arrayBuffer"}),k)},Mt=function(C,k){return $e(M(C,{method:"POST"}),k)};function Ut(C){var k=self.document.createElement("a");return k.href=C,k.protocol===self.document.location.protocol&&k.host===self.document.location.host}var Pe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Ee(C,k,O,te){var pe=new self.Image,we=self.URL;pe.onload=function(){k(null,pe),we.revokeObjectURL(pe.src)},pe.onerror=function(){return k(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Me=new self.Blob([new Uint8Array(C)],{type:"image/png"});pe.cacheControl=O,pe.expires=te,pe.src=C.byteLength?we.createObjectURL(Me):Pe}function it(C,k){var O=new self.Blob([new Uint8Array(C)],{type:"image/png"});self.createImageBitmap(O).then(function(te){k(null,te)}).catch(function(te){k(new Error("Could not load image because of "+te.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}var ut,vt,St=function(){ut=[],vt=0};St();var yt=function(C,k){if(oe.supported&&(C.headers||(C.headers={}),C.headers.accept="image/webp,*/*"),vt>=ie.MAX_PARALLEL_IMAGE_REQUESTS){var O={requestParameters:C,callback:k,cancelled:!1,cancel:function(){this.cancelled=!0}};return ut.push(O),O}vt++;var te=!1,pe=function(){if(!te)for(te=!0,vt--;ut.length&&vt<ie.MAX_PARALLEL_IMAGE_REQUESTS;){var Me=ut.shift(),Oe=Me.requestParameters,tt=Me.callback,ht=Me.cancelled;ht||(Me.cancel=yt(Oe,tt).cancel)}},we=ct(C,function(Me,Oe,tt,ht){pe(),Me?k(Me):Oe&&(Jr()?it(Oe,k):Ee(Oe,k,tt,ht))});return{cancel:function(){we.cancel(),pe()}}},Pt=function(C,k){var O=self.document.createElement("video");O.muted=!0,O.onloadstart=function(){k(null,O)};for(var te=0;te<C.length;te++){var pe=self.document.createElement("source");Ut(C[te])||(O.crossOrigin="Anonymous"),pe.src=C[te],O.appendChild(pe)}return{cancel:function(){}}};function Wt(C,k,O){var te=O[C]&&O[C].indexOf(k)!==-1;te||(O[C]=O[C]||[],O[C].push(k))}function ar(C,k,O){if(O&&O[C]){var te=O[C].indexOf(k);te!==-1&&O[C].splice(te,1)}}var kr=function(k,O){O===void 0&&(O={}),M(this,O),this.type=k},wr=function(C){function k(O,te){te===void 0&&(te={}),C.call(this,"error",M({error:O},te))}return C&&(k.__proto__=C),k.prototype=Object.create(C&&C.prototype),k.prototype.constructor=k,k}(kr),Sr=function(){};Sr.prototype.on=function(k,O){return this._listeners=this._listeners||{},Wt(k,O,this._listeners),this},Sr.prototype.off=function(k,O){return ar(k,O,this._listeners),ar(k,O,this._oneTimeListeners),this},Sr.prototype.once=function(k,O){return this._oneTimeListeners=this._oneTimeListeners||{},Wt(k,O,this._oneTimeListeners),this},Sr.prototype.fire=function(k,O){typeof k=="string"&&(k=new kr(k,O||{}));var te=k.type;if(this.listens(te)){k.target=this;for(var pe=this._listeners&&this._listeners[te]?this._listeners[te].slice():[],we=0,Me=pe;we<Me.length;we+=1){var Oe=Me[we];Oe.call(this,k)}for(var tt=this._oneTimeListeners&&this._oneTimeListeners[te]?this._oneTimeListeners[te].slice():[],ht=0,gt=tt;ht<gt.length;ht+=1){var Ot=gt[ht];ar(te,Ot,this._oneTimeListeners),Ot.call(this,k)}var nr=this._eventedParent;nr&&(M(k,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),nr.fire(k))}else k instanceof wr&&console.error(k.error);return this},Sr.prototype.listens=function(k){return this._listeners&&this._listeners[k]&&this._listeners[k].length>0||this._oneTimeListeners&&this._oneTimeListeners[k]&&this._oneTimeListeners[k].length>0||this._eventedParent&&this._eventedParent.listens(k)},Sr.prototype.setEventedParent=function(k,O){return this._eventedParent=k,this._eventedParentData=O,this};var Zr=8,ir={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},xr={"*":{type:"source"}},Rr=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],Br={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},Cr={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},nt={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},Dt={type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},Zt={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},sr={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},zr={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},Ur=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],Lr={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Tr={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Wr={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},An={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},vn={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Un={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Ln={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Zn={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Wn={type:"array",value:"*"},ya={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},ka={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},di={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},Xa={type:"array",value:"*",minimum:1},$a={type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},Ka={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},Mr=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],gn={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},hn={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},Sn={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},Jn={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},ha={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},na={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Fn={"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Kn={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Ya={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},hi={"*":{type:"string"}},Gt={$version:Zr,$root:ir,sources:xr,source:Rr,source_vector:Br,source_raster:Cr,source_raster_dem:nt,source_geojson:Dt,source_video:Zt,source_image:sr,layer:zr,layout:Ur,layout_background:Lr,layout_fill:Tr,layout_circle:Wr,layout_heatmap:An,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:vn,layout_symbol:Un,layout_raster:Ln,layout_hillshade:Zn,filter:Wn,filter_operator:ya,geometry_type:ka,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:di,expression:Xa,expression_name:$a,light:Ka,paint:Mr,paint_fill:gn,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:hn,paint_circle:Sn,paint_heatmap:Jn,paint_symbol:ha,paint_raster:na,paint_hillshade:Fn,paint_background:Kn,transition:Ya,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:hi},pr=function(k,O,te,pe){this.message=(k?k+": ":"")+te,pe&&(this.identifier=pe),O!=null&&O.__line__&&(this.line=O.__line__)};function an(C){var k=C.key,O=C.value;return O?[new pr(k,O,"constants have been deprecated as of v8")]:[]}function dn(C){for(var k=[],O=arguments.length-1;O-- >0;)k[O]=arguments[O+1];for(var te=0,pe=k;te<pe.length;te+=1){var we=pe[te];for(var Me in we)C[Me]=we[Me]}return C}function rn(C){return C instanceof Number||C instanceof String||C instanceof Boolean?C.valueOf():C}function Mn(C){if(Array.isArray(C))return C.map(Mn);if(C instanceof Object&&!(C instanceof Number||C instanceof String||C instanceof Boolean)){var k={};for(var O in C)k[O]=Mn(C[O]);return k}return rn(C)}var _n=function(C){function k(O,te){C.call(this,te),this.message=te,this.key=O}return C&&(k.__proto__=C),k.prototype=Object.create(C&&C.prototype),k.prototype.constructor=k,k}(Error),fn=function(k,O){O===void 0&&(O=[]),this.parent=k,this.bindings={};for(var te=0,pe=O;te<pe.length;te+=1){var we=pe[te],Me=we[0],Oe=we[1];this.bindings[Me]=Oe}};fn.prototype.concat=function(k){return new fn(this,k)},fn.prototype.get=function(k){if(this.bindings[k])return this.bindings[k];if(this.parent)return this.parent.get(k);throw new Error(k+" not found in scope.")},fn.prototype.has=function(k){return this.bindings[k]?!0:this.parent?this.parent.has(k):!1};var mr={kind:"null"},br={kind:"number"},Nr={kind:"string"},mn={kind:"boolean"},Bn={kind:"color"},aa={kind:"object"},Tn={kind:"value"},Qn={kind:"error"},sa={kind:"collator"},ma={kind:"formatted"},wa={kind:"resolvedImage"};function ca(C,k){return{kind:"array",itemType:C,N:k}}function Ca(C){if(C.kind==="array"){var k=Ca(C.itemType);return typeof C.N=="number"?"array<"+k+", "+C.N+">":C.itemType.kind==="value"?"array":"array<"+k+">"}else return C.kind}var To=[mr,br,Nr,mn,Bn,ma,aa,ca(Tn),wa];function Wo(C,k){if(k.kind==="error")return null;if(C.kind==="array"){if(k.kind==="array"&&(k.N===0&&k.itemType.kind==="value"||!Wo(C.itemType,k.itemType))&&(typeof C.N!="number"||C.N===k.N))return null}else{if(C.kind===k.kind)return null;if(C.kind==="value")for(var O=0,te=To;O<te.length;O+=1){var pe=te[O];if(!Wo(pe,k))return null}}return"Expected "+Ca(C)+" but found "+Ca(k)+" instead."}function is(C,k){return k.some(function(O){return O.kind===C.kind})}function _l(C,k){return k.some(function(O){return O==="null"?C===null:O==="array"?Array.isArray(C):O==="object"?C&&!Array.isArray(C)&&typeof C=="object":O===typeof C})}var Fl=a(function(C,k){var O={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function te(ht){return ht=Math.round(ht),ht<0?0:ht>255?255:ht}function pe(ht){return ht<0?0:ht>1?1:ht}function we(ht){return ht[ht.length-1]==="%"?te(parseFloat(ht)/100*255):te(parseInt(ht))}function Me(ht){return ht[ht.length-1]==="%"?pe(parseFloat(ht)/100):pe(parseFloat(ht))}function Oe(ht,gt,Ot){return Ot<0?Ot+=1:Ot>1&&(Ot-=1),Ot*6<1?ht+(gt-ht)*Ot*6:Ot*2<1?gt:Ot*3<2?ht+(gt-ht)*(2/3-Ot)*6:ht}function tt(ht){var gt=ht.replace(/ /g,"").toLowerCase();if(gt in O)return O[gt].slice();if(gt[0]==="#"){if(gt.length===4){var Ot=parseInt(gt.substr(1),16);return Ot>=0&&Ot<=4095?[(Ot&3840)>>4|(Ot&3840)>>8,Ot&240|(Ot&240)>>4,Ot&15|(Ot&15)<<4,1]:null}else if(gt.length===7){var Ot=parseInt(gt.substr(1),16);return Ot>=0&&Ot<=16777215?[(Ot&16711680)>>16,(Ot&65280)>>8,Ot&255,1]:null}return null}var nr=gt.indexOf("("),qt=gt.indexOf(")");if(nr!==-1&&qt+1===gt.length){var yr=gt.substr(0,nr),Or=gt.substr(nr+1,qt-(nr+1)).split(","),ln=1;switch(yr){case"rgba":if(Or.length!==4)return null;ln=Me(Or.pop());case"rgb":return Or.length!==3?null:[we(Or[0]),we(Or[1]),we(Or[2]),ln];case"hsla":if(Or.length!==4)return null;ln=Me(Or.pop());case"hsl":if(Or.length!==3)return null;var en=(parseFloat(Or[0])%360+360)%360/360,kn=Me(Or[1]),bn=Me(Or[2]),Cn=bn<=.5?bn*(kn+1):bn+kn-bn*kn,zn=bn*2-Cn;return[te(Oe(zn,Cn,en+1/3)*255),te(Oe(zn,Cn,en)*255),te(Oe(zn,Cn,en-1/3)*255),ln];default:return null}}return null}try{k.parseCSSColor=tt}catch{}}),wu=Fl.parseCSSColor,xi=function(k,O,te,pe){pe===void 0&&(pe=1),this.r=k,this.g=O,this.b=te,this.a=pe};xi.parse=function(k){if(!!k){if(k instanceof xi)return k;if(typeof k=="string"){var O=wu(k);if(!!O)return new xi(O[0]/255*O[3],O[1]/255*O[3],O[2]/255*O[3],O[3])}}},xi.prototype.toString=function(){var k=this.toArray(),O=k[0],te=k[1],pe=k[2],we=k[3];return"rgba("+Math.round(O)+","+Math.round(te)+","+Math.round(pe)+","+we+")"},xi.prototype.toArray=function(){var k=this,O=k.r,te=k.g,pe=k.b,we=k.a;return we===0?[0,0,0,0]:[O*255/we,te*255/we,pe*255/we,we]},xi.black=new xi(0,0,0,1),xi.white=new xi(1,1,1,1),xi.transparent=new xi(0,0,0,0),xi.red=new xi(1,0,0,1);var nl=function(k,O,te){k?this.sensitivity=O?"variant":"case":this.sensitivity=O?"accent":"base",this.locale=te,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};nl.prototype.compare=function(k,O){return this.collator.compare(k,O)},nl.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Xs=function(k,O,te,pe,we){this.text=k,this.image=O,this.scale=te,this.fontStack=pe,this.textColor=we},ji=function(k){this.sections=k};ji.fromString=function(k){return new ji([new Xs(k,null,null,null,null)])},ji.prototype.isEmpty=function(){return this.sections.length===0?!0:!this.sections.some(function(k){return k.text.length!==0||k.image&&k.image.name.length!==0})},ji.factory=function(k){return k instanceof ji?k:ji.fromString(k)},ji.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(k){return k.text}).join("")},ji.prototype.serialize=function(){for(var k=["format"],O=0,te=this.sections;O<te.length;O+=1){var pe=te[O];if(pe.image){k.push(["image",pe.image.name]);continue}k.push(pe.text);var we={};pe.fontStack&&(we["text-font"]=["literal",pe.fontStack.split(",")]),pe.scale&&(we["font-scale"]=pe.scale),pe.textColor&&(we["text-color"]=["rgba"].concat(pe.textColor.toArray())),k.push(we)}return k};var Io=function(k){this.name=k.name,this.available=k.available};Io.prototype.toString=function(){return this.name},Io.fromString=function(k){return k?new Io({name:k,available:!1}):null},Io.prototype.serialize=function(){return["image",this.name]};function zl(C,k,O,te){if(!(typeof C=="number"&&C>=0&&C<=255&&typeof k=="number"&&k>=0&&k<=255&&typeof O=="number"&&O>=0&&O<=255)){var pe=typeof te=="number"?[C,k,O,te]:[C,k,O];return"Invalid rgba value ["+pe.join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}return typeof te>"u"||typeof te=="number"&&te>=0&&te<=1?null:"Invalid rgba value ["+[C,k,O,te].join(", ")+"]: 'a' must be between 0 and 1."}function Ms(C){if(C===null)return!0;if(typeof C=="string")return!0;if(typeof C=="boolean")return!0;if(typeof C=="number")return!0;if(C instanceof xi)return!0;if(C instanceof nl)return!0;if(C instanceof ji)return!0;if(C instanceof Io)return!0;if(Array.isArray(C)){for(var k=0,O=C;k<O.length;k+=1){var te=O[k];if(!Ms(te))return!1}return!0}else if(typeof C=="object"){for(var pe in C)if(!Ms(C[pe]))return!1;return!0}else return!1}function Ui(C){if(C===null)return mr;if(typeof C=="string")return Nr;if(typeof C=="boolean")return mn;if(typeof C=="number")return br;if(C instanceof xi)return Bn;if(C instanceof nl)return sa;if(C instanceof ji)return ma;if(C instanceof Io)return wa;if(Array.isArray(C)){for(var k=C.length,O,te=0,pe=C;te<pe.length;te+=1){var we=pe[te],Me=Ui(we);if(!O)O=Me;else{if(O===Me)continue;O=Tn;break}}return ca(O||Tn,k)}else return aa}function wl(C){var k=typeof C;return C===null?"":k==="string"||k==="number"||k==="boolean"?String(C):C instanceof xi||C instanceof ji||C instanceof Io?C.toString():JSON.stringify(C)}var ao=function(k,O){this.type=k,this.value=O};ao.parse=function(k,O){if(k.length!==2)return O.error("'literal' expression requires exactly one argument, but found "+(k.length-1)+" instead.");if(!Ms(k[1]))return O.error("invalid value");var te=k[1],pe=Ui(te),we=O.expectedType;return pe.kind==="array"&&pe.N===0&&we&&we.kind==="array"&&(typeof we.N!="number"||we.N===0)&&(pe=we),new ao(pe,te)},ao.prototype.evaluate=function(){return this.value},ao.prototype.eachChild=function(){},ao.prototype.outputDefined=function(){return!0},ao.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof xi?["rgba"].concat(this.value.toArray()):this.value instanceof ji?this.value.serialize():this.value};var Yi=function(k){this.name="ExpressionEvaluationError",this.message=k};Yi.prototype.toJSON=function(){return this.message};var vo={string:Nr,number:br,boolean:mn,object:aa},io=function(k,O){this.type=k,this.args=O};io.parse=function(k,O){if(k.length<2)return O.error("Expected at least one argument.");var te=1,pe,we=k[0];if(we==="array"){var Me;if(k.length>2){var Oe=k[1];if(typeof Oe!="string"||!(Oe in vo)||Oe==="object")return O.error('The item type argument of "array" must be one of string, number, boolean',1);Me=vo[Oe],te++}else Me=Tn;var tt;if(k.length>3){if(k[2]!==null&&(typeof k[2]!="number"||k[2]<0||k[2]!==Math.floor(k[2])))return O.error('The length argument to "array" must be a positive integer literal',2);tt=k[2],te++}pe=ca(Me,tt)}else pe=vo[we];for(var ht=[];te<k.length;te++){var gt=O.parse(k[te],te,Tn);if(!gt)return null;ht.push(gt)}return new io(pe,ht)},io.prototype.evaluate=function(k){for(var O=0;O<this.args.length;O++){var te=this.args[O].evaluate(k),pe=Wo(this.type,Ui(te));if(pe){if(O===this.args.length-1)throw new Yi("Expected value to be of type "+Ca(this.type)+", but found "+Ca(Ui(te))+" instead.")}else return te}return null},io.prototype.eachChild=function(k){this.args.forEach(k)},io.prototype.outputDefined=function(){return this.args.every(function(k){return k.outputDefined()})},io.prototype.serialize=function(){var k=this.type,O=[k.kind];if(k.kind==="array"){var te=k.itemType;if(te.kind==="string"||te.kind==="number"||te.kind==="boolean"){O.push(te.kind);var pe=k.N;(typeof pe=="number"||this.args.length>1)&&O.push(pe)}}return O.concat(this.args.map(function(we){return we.serialize()}))};var vs=function(k){this.type=ma,this.sections=k};vs.parse=function(k,O){if(k.length<2)return O.error("Expected at least one argument.");var te=k[1];if(!Array.isArray(te)&&typeof te=="object")return O.error("First argument must be an image or text section.");for(var pe=[],we=!1,Me=1;Me<=k.length-1;++Me){var Oe=k[Me];if(we&&typeof Oe=="object"&&!Array.isArray(Oe)){we=!1;var tt=null;if(Oe["font-scale"]&&(tt=O.parse(Oe["font-scale"],1,br),!tt))return null;var ht=null;if(Oe["text-font"]&&(ht=O.parse(Oe["text-font"],1,ca(Nr)),!ht))return null;var gt=null;if(Oe["text-color"]&&(gt=O.parse(Oe["text-color"],1,Bn),!gt))return null;var Ot=pe[pe.length-1];Ot.scale=tt,Ot.font=ht,Ot.textColor=gt}else{var nr=O.parse(k[Me],1,Tn);if(!nr)return null;var qt=nr.type.kind;if(qt!=="string"&&qt!=="value"&&qt!=="null"&&qt!=="resolvedImage")return O.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");we=!0,pe.push({content:nr,scale:null,font:null,textColor:null})}}return new vs(pe)},vs.prototype.evaluate=function(k){var O=function(te){var pe=te.content.evaluate(k);return Ui(pe)===wa?new Xs("",pe,null,null,null):new Xs(wl(pe),null,te.scale?te.scale.evaluate(k):null,te.font?te.font.evaluate(k).join(","):null,te.textColor?te.textColor.evaluate(k):null)};return new ji(this.sections.map(O))},vs.prototype.eachChild=function(k){for(var O=0,te=this.sections;O<te.length;O+=1){var pe=te[O];k(pe.content),pe.scale&&k(pe.scale),pe.font&&k(pe.font),pe.textColor&&k(pe.textColor)}},vs.prototype.outputDefined=function(){return!1},vs.prototype.serialize=function(){for(var k=["format"],O=0,te=this.sections;O<te.length;O+=1){var pe=te[O];k.push(pe.content.serialize());var we={};pe.scale&&(we["font-scale"]=pe.scale.serialize()),pe.font&&(we["text-font"]=pe.font.serialize()),pe.textColor&&(we["text-color"]=pe.textColor.serialize()),k.push(we)}return k};var al=function(k){this.type=wa,this.input=k};al.parse=function(k,O){if(k.length!==2)return O.error("Expected two arguments.");var te=O.parse(k[1],1,Nr);return te?new al(te):O.error("No image name provided.")},al.prototype.evaluate=function(k){var O=this.input.evaluate(k),te=Io.fromString(O);return te&&k.availableImages&&(te.available=k.availableImages.indexOf(O)>-1),te},al.prototype.eachChild=function(k){k(this.input)},al.prototype.outputDefined=function(){return!1},al.prototype.serialize=function(){return["image",this.input.serialize()]};var Hu={"to-boolean":mn,"to-color":Bn,"to-number":br,"to-string":Nr},os=function(k,O){this.type=k,this.args=O};os.parse=function(k,O){if(k.length<2)return O.error("Expected at least one argument.");var te=k[0];if((te==="to-boolean"||te==="to-string")&&k.length!==2)return O.error("Expected one argument.");for(var pe=Hu[te],we=[],Me=1;Me<k.length;Me++){var Oe=O.parse(k[Me],Me,Tn);if(!Oe)return null;we.push(Oe)}return new os(pe,we)},os.prototype.evaluate=function(k){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(k));if(this.type.kind==="color"){for(var O,te,pe=0,we=this.args;pe<we.length;pe+=1){var Me=we[pe];if(O=Me.evaluate(k),te=null,O instanceof xi)return O;if(typeof O=="string"){var Oe=k.parseColor(O);if(Oe)return Oe}else if(Array.isArray(O)&&(O.length<3||O.length>4?te="Invalid rbga value "+JSON.stringify(O)+": expected an array containing either three or four numeric values.":te=zl(O[0],O[1],O[2],O[3]),!te))return new xi(O[0]/255,O[1]/255,O[2]/255,O[3])}throw new Yi(te||"Could not parse color from value '"+(typeof O=="string"?O:String(JSON.stringify(O)))+"'")}else if(this.type.kind==="number"){for(var tt=null,ht=0,gt=this.args;ht<gt.length;ht+=1){var Ot=gt[ht];if(tt=Ot.evaluate(k),tt===null)return 0;var nr=Number(tt);if(!isNaN(nr))return nr}throw new Yi("Could not convert "+JSON.stringify(tt)+" to number.")}else return this.type.kind==="formatted"?ji.fromString(wl(this.args[0].evaluate(k))):this.type.kind==="resolvedImage"?Io.fromString(wl(this.args[0].evaluate(k))):wl(this.args[0].evaluate(k))},os.prototype.eachChild=function(k){this.args.forEach(k)},os.prototype.outputDefined=function(){return this.args.every(function(k){return k.outputDefined()})},os.prototype.serialize=function(){if(this.type.kind==="formatted")return new vs([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new al(this.args[0]).serialize();var k=["to-"+this.type.kind];return this.eachChild(function(O){k.push(O.serialize())}),k};var Gu=["Unknown","Point","LineString","Polygon"],Zs=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Zs.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Zs.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?Gu[this.feature.type]:this.feature.type:null},Zs.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Zs.prototype.canonicalID=function(){return this.canonical},Zs.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Zs.prototype.parseColor=function(k){var O=this._parseColorCache[k];return O||(O=this._parseColorCache[k]=xi.parse(k)),O};var Fo=function(k,O,te,pe){this.name=k,this.type=O,this._evaluate=te,this.args=pe};Fo.prototype.evaluate=function(k){return this._evaluate(k,this.args)},Fo.prototype.eachChild=function(k){this.args.forEach(k)},Fo.prototype.outputDefined=function(){return!1},Fo.prototype.serialize=function(){return[this.name].concat(this.args.map(function(k){return k.serialize()}))},Fo.parse=function(k,O){var te,pe=k[0],we=Fo.definitions[pe];if(!we)return O.error('Unknown expression "'+pe+'". If you wanted a literal array, use ["literal", [...]].',0);for(var Me=Array.isArray(we)?we[0]:we.type,Oe=Array.isArray(we)?[[we[1],we[2]]]:we.overloads,tt=Oe.filter(function(Ia){var za=Ia[0];return!Array.isArray(za)||za.length===k.length-1}),ht=null,gt=0,Ot=tt;gt<Ot.length;gt+=1){var nr=Ot[gt],qt=nr[0],yr=nr[1];ht=new zo(O.registry,O.path,null,O.scope);for(var Or=[],ln=!1,en=1;en<k.length;en++){var kn=k[en],bn=Array.isArray(qt)?qt[en-1]:qt.type,Cn=ht.parse(kn,1+Or.length,bn);if(!Cn){ln=!0;break}Or.push(Cn)}if(!ln){if(Array.isArray(qt)&&qt.length!==Or.length){ht.error("Expected "+qt.length+" arguments, but found "+Or.length+" instead.");continue}for(var zn=0;zn<Or.length;zn++){var Xn=Array.isArray(qt)?qt[zn]:qt.type,ua=Or[zn];ht.concat(zn+1).checkSubtype(Xn,ua.type)}if(ht.errors.length===0)return new Fo(pe,Me,yr,Or)}}if(tt.length===1)(te=O.errors).push.apply(te,ht.errors);else{for(var oa=tt.length?tt:Oe,Na=oa.map(function(Ia){var za=Ia[0];return dc(za)}).join(" | "),Sa=[],La=1;La<k.length;La++){var ii=O.parse(k[La],1+Sa.length);if(!ii)return null;Sa.push(Ca(ii.type))}O.error("Expected arguments of type "+Na+", but found ("+Sa.join(", ")+") instead.")}return null},Fo.register=function(k,O){Fo.definitions=O;for(var te in O)k[te]=Fo};function dc(C){return Array.isArray(C)?"("+C.map(Ca).join(", ")+")":"("+Ca(C.type)+"...)"}var js=function(k,O,te){this.type=sa,this.locale=te,this.caseSensitive=k,this.diacriticSensitive=O};js.parse=function(k,O){if(k.length!==2)return O.error("Expected one argument.");var te=k[1];if(typeof te!="object"||Array.isArray(te))return O.error("Collator options argument must be an object.");var pe=O.parse(te["case-sensitive"]===void 0?!1:te["case-sensitive"],1,mn);if(!pe)return null;var we=O.parse(te["diacritic-sensitive"]===void 0?!1:te["diacritic-sensitive"],1,mn);if(!we)return null;var Me=null;return te.locale&&(Me=O.parse(te.locale,1,Nr),!Me)?null:new js(pe,we,Me)},js.prototype.evaluate=function(k){return new nl(this.caseSensitive.evaluate(k),this.diacriticSensitive.evaluate(k),this.locale?this.locale.evaluate(k):null)},js.prototype.eachChild=function(k){k(this.caseSensitive),k(this.diacriticSensitive),this.locale&&k(this.locale)},js.prototype.outputDefined=function(){return!1},js.prototype.serialize=function(){var k={};return k["case-sensitive"]=this.caseSensitive.serialize(),k["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(k.locale=this.locale.serialize()),["collator",k]};var Is=8192;function tu(C,k){C[0]=Math.min(C[0],k[0]),C[1]=Math.min(C[1],k[1]),C[2]=Math.max(C[2],k[0]),C[3]=Math.max(C[3],k[1])}function gc(C){return(180+C)/360}function yc(C){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+C*Math.PI/360)))/360}function il(C,k){return!(C[0]<=k[0]||C[2]>=k[2]||C[1]<=k[1]||C[3]>=k[3])}function ru(C,k){var O=gc(C[0]),te=yc(C[1]),pe=Math.pow(2,k.z);return[Math.round(O*pe*Is),Math.round(te*pe*Is)]}function Fs(C,k,O){var te=C[0]-k[0],pe=C[1]-k[1],we=C[0]-O[0],Me=C[1]-O[1];return te*Me-we*pe===0&&te*we<=0&&pe*Me<=0}function Tu(C,k,O){return k[1]>C[1]!=O[1]>C[1]&&C[0]<(O[0]-k[0])*(C[1]-k[1])/(O[1]-k[1])+k[0]}function Tl(C,k){for(var O=!1,te=0,pe=k.length;te<pe;te++)for(var we=k[te],Me=0,Oe=we.length;Me<Oe-1;Me++){if(Fs(C,we[Me],we[Me+1]))return!1;Tu(C,we[Me],we[Me+1])&&(O=!O)}return O}function Au(C,k){for(var O=0;O<k.length;O++)if(Tl(C,k[O]))return!0;return!1}function Yu(C,k){return C[0]*k[1]-C[1]*k[0]}function nu(C,k,O,te){var pe=C[0]-O[0],we=C[1]-O[1],Me=k[0]-O[0],Oe=k[1]-O[1],tt=te[0]-O[0],ht=te[1]-O[1],gt=pe*ht-tt*we,Ot=Me*ht-tt*Oe;return gt>0&&Ot<0||gt<0&&Ot>0}function mc(C,k,O,te){var pe=[k[0]-C[0],k[1]-C[1]],we=[te[0]-O[0],te[1]-O[1]];return Yu(we,pe)===0?!1:!!(nu(C,k,O,te)&&nu(O,te,C,k))}function ol(C,k,O){for(var te=0,pe=O;te<pe.length;te+=1)for(var we=pe[te],Me=0;Me<we.length-1;++Me)if(mc(C,k,we[Me],we[Me+1]))return!0;return!1}function Mu(C,k){for(var O=0;O<C.length;++O)if(!Tl(C[O],k))return!1;for(var te=0;te<C.length-1;++te)if(ol(C[te],C[te+1],k))return!1;return!0}function au(C,k){for(var O=0;O<k.length;O++)if(Mu(C,k[O]))return!0;return!1}function Ss(C,k,O){for(var te=[],pe=0;pe<C.length;pe++){for(var we=[],Me=0;Me<C[pe].length;Me++){var Oe=ru(C[pe][Me],O);tu(k,Oe),we.push(Oe)}te.push(we)}return te}function Nl(C,k,O){for(var te=[],pe=0;pe<C.length;pe++){var we=Ss(C[pe],k,O);te.push(we)}return te}function Su(C,k,O,te){if(C[0]<O[0]||C[0]>O[2]){var pe=te*.5,we=C[0]-O[0]>pe?-te:O[0]-C[0]>pe?te:0;we===0&&(we=C[0]-O[2]>pe?-te:O[2]-C[0]>pe?te:0),C[0]+=we}tu(k,C)}function Wu(C){C[0]=C[1]=1/0,C[2]=C[3]=-1/0}function Xu(C,k,O,te){for(var pe=Math.pow(2,te.z)*Is,we=[te.x*Is,te.y*Is],Me=[],Oe=0,tt=C;Oe<tt.length;Oe+=1)for(var ht=tt[Oe],gt=0,Ot=ht;gt<Ot.length;gt+=1){var nr=Ot[gt],qt=[nr.x+we[0],nr.y+we[1]];Su(qt,k,O,pe),Me.push(qt)}return Me}function iu(C,k,O,te){for(var pe=Math.pow(2,te.z)*Is,we=[te.x*Is,te.y*Is],Me=[],Oe=0,tt=C;Oe<tt.length;Oe+=1){for(var ht=tt[Oe],gt=[],Ot=0,nr=ht;Ot<nr.length;Ot+=1){var qt=nr[Ot],yr=[qt.x+we[0],qt.y+we[1]];tu(k,yr),gt.push(yr)}Me.push(gt)}if(k[2]-k[0]<=pe/2){Wu(k);for(var Or=0,ln=Me;Or<ln.length;Or+=1)for(var en=ln[Or],kn=0,bn=en;kn<bn.length;kn+=1){var Cn=bn[kn];Su(Cn,k,O,pe)}}return Me}function xc(C,k){var O=[1/0,1/0,-1/0,-1/0],te=[1/0,1/0,-1/0,-1/0],pe=C.canonicalID();if(k.type==="Polygon"){var we=Ss(k.coordinates,te,pe),Me=Xu(C.geometry(),O,te,pe);if(!il(O,te))return!1;for(var Oe=0,tt=Me;Oe<tt.length;Oe+=1){var ht=tt[Oe];if(!Tl(ht,we))return!1}}if(k.type==="MultiPolygon"){var gt=Nl(k.coordinates,te,pe),Ot=Xu(C.geometry(),O,te,pe);if(!il(O,te))return!1;for(var nr=0,qt=Ot;nr<qt.length;nr+=1){var yr=qt[nr];if(!Au(yr,gt))return!1}}return!0}function Zu(C,k){var O=[1/0,1/0,-1/0,-1/0],te=[1/0,1/0,-1/0,-1/0],pe=C.canonicalID();if(k.type==="Polygon"){var we=Ss(k.coordinates,te,pe),Me=iu(C.geometry(),O,te,pe);if(!il(O,te))return!1;for(var Oe=0,tt=Me;Oe<tt.length;Oe+=1){var ht=tt[Oe];if(!Mu(ht,we))return!1}}if(k.type==="MultiPolygon"){var gt=Nl(k.coordinates,te,pe),Ot=iu(C.geometry(),O,te,pe);if(!il(O,te))return!1;for(var nr=0,qt=Ot;nr<qt.length;nr+=1){var yr=qt[nr];if(!au(yr,gt))return!1}}return!0}var ss=function(k,O){this.type=mn,this.geojson=k,this.geometries=O};ss.parse=function(k,O){if(k.length!==2)return O.error("'within' expression requires exactly one argument, but found "+(k.length-1)+" instead.");if(Ms(k[1])){var te=k[1];if(te.type==="FeatureCollection")for(var pe=0;pe<te.features.length;++pe){var we=te.features[pe].geometry.type;if(we==="Polygon"||we==="MultiPolygon")return new ss(te,te.features[pe].geometry)}else if(te.type==="Feature"){var Me=te.geometry.type;if(Me==="Polygon"||Me==="MultiPolygon")return new ss(te,te.geometry)}else if(te.type==="Polygon"||te.type==="MultiPolygon")return new ss(te,te)}return O.error("'within' expression requires valid geojson object that contains polygon geometry type.")},ss.prototype.evaluate=function(k){if(k.geometry()!=null&&k.canonicalID()!=null){if(k.geometryType()==="Point")return xc(k,this.geometries);if(k.geometryType()==="LineString")return Zu(k,this.geometries)}return!1},ss.prototype.eachChild=function(){},ss.prototype.outputDefined=function(){return!0},ss.prototype.serialize=function(){return["within",this.geojson]};function Al(C){if(C instanceof Fo){if(C.name==="get"&&C.args.length===1)return!1;if(C.name==="feature-state")return!1;if(C.name==="has"&&C.args.length===1)return!1;if(C.name==="properties"||C.name==="geometry-type"||C.name==="id")return!1;if(/^filter-/.test(C.name))return!1}if(C instanceof ss)return!1;var k=!0;return C.eachChild(function(O){k&&!Al(O)&&(k=!1)}),k}function Ml(C){if(C instanceof Fo&&C.name==="feature-state")return!1;var k=!0;return C.eachChild(function(O){k&&!Ml(O)&&(k=!1)}),k}function Eu(C,k){if(C instanceof Fo&&k.indexOf(C.name)>=0)return!1;var O=!0;return C.eachChild(function(te){O&&!Eu(te,k)&&(O=!1)}),O}var Es=function(k,O){this.type=O.type,this.name=k,this.boundExpression=O};Es.parse=function(k,O){if(k.length!==2||typeof k[1]!="string")return O.error("'var' expression requires exactly one string literal argument.");var te=k[1];return O.scope.has(te)?new Es(te,O.scope.get(te)):O.error('Unknown variable "'+te+'". Make sure "'+te+'" has been bound in an enclosing "let" expression before using it.',1)},Es.prototype.evaluate=function(k){return this.boundExpression.evaluate(k)},Es.prototype.eachChild=function(){},Es.prototype.outputDefined=function(){return!1},Es.prototype.serialize=function(){return["var",this.name]};var zo=function(k,O,te,pe,we){O===void 0&&(O=[]),pe===void 0&&(pe=new fn),we===void 0&&(we=[]),this.registry=k,this.path=O,this.key=O.map(function(Me){return"["+Me+"]"}).join(""),this.scope=pe,this.errors=we,this.expectedType=te};zo.prototype.parse=function(k,O,te,pe,we){return we===void 0&&(we={}),O?this.concat(O,te,pe)._parse(k,we):this._parse(k,we)},zo.prototype._parse=function(k,O){(k===null||typeof k=="string"||typeof k=="boolean"||typeof k=="number")&&(k=["literal",k]);function te(gt,Ot,nr){return nr==="assert"?new io(Ot,[gt]):nr==="coerce"?new os(Ot,[gt]):gt}if(Array.isArray(k)){if(k.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var pe=k[0];if(typeof pe!="string")return this.error("Expression name must be a string, but found "+typeof pe+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var we=this.registry[pe];if(we){var Me=we.parse(k,this);if(!Me)return null;if(this.expectedType){var Oe=this.expectedType,tt=Me.type;if((Oe.kind==="string"||Oe.kind==="number"||Oe.kind==="boolean"||Oe.kind==="object"||Oe.kind==="array")&&tt.kind==="value")Me=te(Me,Oe,O.typeAnnotation||"assert");else if((Oe.kind==="color"||Oe.kind==="formatted"||Oe.kind==="resolvedImage")&&(tt.kind==="value"||tt.kind==="string"))Me=te(Me,Oe,O.typeAnnotation||"coerce");else if(this.checkSubtype(Oe,tt))return null}if(!(Me instanceof ao)&&Me.type.kind!=="resolvedImage"&&ou(Me)){var ht=new Zs;try{Me=new ao(Me.type,Me.evaluate(ht))}catch(gt){return this.error(gt.message),null}}return Me}return this.error('Unknown expression "'+pe+'". If you wanted a literal array, use ["literal", [...]].',0)}else return typeof k>"u"?this.error("'undefined' value invalid. Use null instead."):typeof k=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof k+" instead.")},zo.prototype.concat=function(k,O,te){var pe=typeof k=="number"?this.path.concat(k):this.path,we=te?this.scope.concat(te):this.scope;return new zo(this.registry,pe,O||null,we,this.errors)},zo.prototype.error=function(k){for(var O=[],te=arguments.length-1;te-- >0;)O[te]=arguments[te+1];var pe=""+this.key+O.map(function(we){return"["+we+"]"}).join("");this.errors.push(new _n(pe,k))},zo.prototype.checkSubtype=function(k,O){var te=Wo(k,O);return te&&this.error(te),te};function ou(C){if(C instanceof Es)return ou(C.boundExpression);if(C instanceof Fo&&C.name==="error")return!1;if(C instanceof js)return!1;if(C instanceof ss)return!1;var k=C instanceof os||C instanceof io,O=!0;return C.eachChild(function(te){k?O=O&&ou(te):O=O&&te instanceof ao}),O?Al(C)&&Eu(C,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"]):!1}function zs(C,k){for(var O=C.length-1,te=0,pe=O,we=0,Me,Oe;te<=pe;)if(we=Math.floor((te+pe)/2),Me=C[we],Oe=C[we+1],Me<=k){if(we===O||k<Oe)return we;te=we+1}else if(Me>k)pe=we-1;else throw new Yi("Input is not a number.");return 0}var Ns=function(k,O,te){this.type=k,this.input=O,this.labels=[],this.outputs=[];for(var pe=0,we=te;pe<we.length;pe+=1){var Me=we[pe],Oe=Me[0],tt=Me[1];this.labels.push(Oe),this.outputs.push(tt)}};Ns.parse=function(k,O){if(k.length-1<4)return O.error("Expected at least 4 arguments, but found only "+(k.length-1)+".");if((k.length-1)%2!==0)return O.error("Expected an even number of arguments.");var te=O.parse(k[1],1,br);if(!te)return null;var pe=[],we=null;O.expectedType&&O.expectedType.kind!=="value"&&(we=O.expectedType);for(var Me=1;Me<k.length;Me+=2){var Oe=Me===1?-1/0:k[Me],tt=k[Me+1],ht=Me,gt=Me+1;if(typeof Oe!="number")return O.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ht);if(pe.length&&pe[pe.length-1][0]>=Oe)return O.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',ht);var Ot=O.parse(tt,gt,we);if(!Ot)return null;we=we||Ot.type,pe.push([Oe,Ot])}return new Ns(we,te,pe)},Ns.prototype.evaluate=function(k){var O=this.labels,te=this.outputs;if(O.length===1)return te[0].evaluate(k);var pe=this.input.evaluate(k);if(pe<=O[0])return te[0].evaluate(k);var we=O.length;if(pe>=O[we-1])return te[we-1].evaluate(k);var Me=zs(O,pe);return te[Me].evaluate(k)},Ns.prototype.eachChild=function(k){k(this.input);for(var O=0,te=this.outputs;O<te.length;O+=1){var pe=te[O];k(pe)}},Ns.prototype.outputDefined=function(){return this.outputs.every(function(k){return k.outputDefined()})},Ns.prototype.serialize=function(){for(var k=["step",this.input.serialize()],O=0;O<this.labels.length;O++)O>0&&k.push(this.labels[O]),k.push(this.outputs[O].serialize());return k};function yo(C,k,O){return C*(1-O)+k*O}function Ol(C,k,O){return new xi(yo(C.r,k.r,O),yo(C.g,k.g,O),yo(C.b,k.b,O),yo(C.a,k.a,O))}function Bl(C,k,O){return C.map(function(te,pe){return yo(te,k[pe],O)})}var sl=Object.freeze({__proto__:null,number:yo,color:Ol,array:Bl}),Cs=.95047,Ul=1,Sl=1.08883,su=4/29,Vl=6/29,ll=3*Vl*Vl,bc=Vl*Vl*Vl,ps=Math.PI/180,Vc=180/Math.PI;function Cu(C){return C>bc?Math.pow(C,1/3):C/ll+su}function El(C){return C>Vl?C*C*C:ll*(C-su)}function Hl(C){return 255*(C<=.0031308?12.92*C:1.055*Math.pow(C,1/2.4)-.055)}function ul(C){return C/=255,C<=.04045?C/12.92:Math.pow((C+.055)/1.055,2.4)}function Gl(C){var k=ul(C.r),O=ul(C.g),te=ul(C.b),pe=Cu((.4124564*k+.3575761*O+.1804375*te)/Cs),we=Cu((.2126729*k+.7151522*O+.072175*te)/Ul),Me=Cu((.0193339*k+.119192*O+.9503041*te)/Sl);return{l:116*we-16,a:500*(pe-we),b:200*(we-Me),alpha:C.a}}function ju(C){var k=(C.l+16)/116,O=isNaN(C.a)?k:k+C.a/500,te=isNaN(C.b)?k:k-C.b/200;return k=Ul*El(k),O=Cs*El(O),te=Sl*El(te),new xi(Hl(3.2404542*O-1.5371385*k-.4985314*te),Hl(-.969266*O+1.8760108*k+.041556*te),Hl(.0556434*O-.2040259*k+1.0572252*te),C.alpha)}function Ku(C,k,O){return{l:yo(C.l,k.l,O),a:yo(C.a,k.a,O),b:yo(C.b,k.b,O),alpha:yo(C.alpha,k.alpha,O)}}function Hc(C){var k=Gl(C),O=k.l,te=k.a,pe=k.b,we=Math.atan2(pe,te)*Vc;return{h:we<0?we+360:we,c:Math.sqrt(te*te+pe*pe),l:O,alpha:C.a}}function Vi(C){var k=C.h*ps,O=C.c,te=C.l;return ju({l:te,a:Math.cos(k)*O,b:Math.sin(k)*O,alpha:C.alpha})}function Cl(C,k,O){var te=k-C;return C+O*(te>180||te<-180?te-360*Math.round(te/360):te)}function cl(C,k,O){return{h:Cl(C.h,k.h,O),c:yo(C.c,k.c,O),l:yo(C.l,k.l,O),alpha:yo(C.alpha,k.alpha,O)}}var ls={forward:Gl,reverse:ju,interpolate:Ku},ds={forward:Hc,reverse:Vi,interpolate:cl},Yl=Object.freeze({__proto__:null,lab:ls,hcl:ds}),mo=function(k,O,te,pe,we){this.type=k,this.operator=O,this.interpolation=te,this.input=pe,this.labels=[],this.outputs=[];for(var Me=0,Oe=we;Me<Oe.length;Me+=1){var tt=Oe[Me],ht=tt[0],gt=tt[1];this.labels.push(ht),this.outputs.push(gt)}};mo.interpolationFactor=function(k,O,te,pe){var we=0;if(k.name==="exponential")we=Ju(O,k.base,te,pe);else if(k.name==="linear")we=Ju(O,1,te,pe);else if(k.name==="cubic-bezier"){var Me=k.controlPoints,Oe=new n(Me[0],Me[1],Me[2],Me[3]);we=Oe.solve(Ju(O,1,te,pe))}return we},mo.parse=function(k,O){var te=k[0],pe=k[1],we=k[2],Me=k.slice(3);if(!Array.isArray(pe)||pe.length===0)return O.error("Expected an interpolation type expression.",1);if(pe[0]==="linear")pe={name:"linear"};else if(pe[0]==="exponential"){var Oe=pe[1];if(typeof Oe!="number")return O.error("Exponential interpolation requires a numeric base.",1,1);pe={name:"exponential",base:Oe}}else if(pe[0]==="cubic-bezier"){var tt=pe.slice(1);if(tt.length!==4||tt.some(function(en){return typeof en!="number"||en<0||en>1}))return O.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);pe={name:"cubic-bezier",controlPoints:tt}}else return O.error("Unknown interpolation type "+String(pe[0]),1,0);if(k.length-1<4)return O.error("Expected at least 4 arguments, but found only "+(k.length-1)+".");if((k.length-1)%2!==0)return O.error("Expected an even number of arguments.");if(we=O.parse(we,2,br),!we)return null;var ht=[],gt=null;te==="interpolate-hcl"||te==="interpolate-lab"?gt=Bn:O.expectedType&&O.expectedType.kind!=="value"&&(gt=O.expectedType);for(var Ot=0;Ot<Me.length;Ot+=2){var nr=Me[Ot],qt=Me[Ot+1],yr=Ot+3,Or=Ot+4;if(typeof nr!="number")return O.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',yr);if(ht.length&&ht[ht.length-1][0]>=nr)return O.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',yr);var ln=O.parse(qt,Or,gt);if(!ln)return null;gt=gt||ln.type,ht.push([nr,ln])}return gt.kind!=="number"&&gt.kind!=="color"&&!(gt.kind==="array"&&gt.itemType.kind==="number"&&typeof gt.N=="number")?O.error("Type "+Ca(gt)+" is not interpolatable."):new mo(gt,te,pe,we,ht)},mo.prototype.evaluate=function(k){var O=this.labels,te=this.outputs;if(O.length===1)return te[0].evaluate(k);var pe=this.input.evaluate(k);if(pe<=O[0])return te[0].evaluate(k);var we=O.length;if(pe>=O[we-1])return te[we-1].evaluate(k);var Me=zs(O,pe),Oe=O[Me],tt=O[Me+1],ht=mo.interpolationFactor(this.interpolation,pe,Oe,tt),gt=te[Me].evaluate(k),Ot=te[Me+1].evaluate(k);return this.operator==="interpolate"?sl[this.type.kind.toLowerCase()](gt,Ot,ht):this.operator==="interpolate-hcl"?ds.reverse(ds.interpolate(ds.forward(gt),ds.forward(Ot),ht)):ls.reverse(ls.interpolate(ls.forward(gt),ls.forward(Ot),ht))},mo.prototype.eachChild=function(k){k(this.input);for(var O=0,te=this.outputs;O<te.length;O+=1){var pe=te[O];k(pe)}},mo.prototype.outputDefined=function(){return this.outputs.every(function(k){return k.outputDefined()})},mo.prototype.serialize=function(){var k;this.interpolation.name==="linear"?k=["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?k=["linear"]:k=["exponential",this.interpolation.base]:k=["cubic-bezier"].concat(this.interpolation.controlPoints);for(var O=[this.operator,k,this.input.serialize()],te=0;te<this.labels.length;te++)O.push(this.labels[te],this.outputs[te].serialize());return O};function Ju(C,k,O,te){var pe=te-O,we=C-O;return pe===0?0:k===1?we/pe:(Math.pow(k,we)-1)/(Math.pow(k,pe)-1)}var gs=function(k,O){this.type=k,this.args=O};gs.parse=function(k,O){if(k.length<2)return O.error("Expectected at least one argument.");var te=null,pe=O.expectedType;pe&&pe.kind!=="value"&&(te=pe);for(var we=[],Me=0,Oe=k.slice(1);Me<Oe.length;Me+=1){var tt=Oe[Me],ht=O.parse(tt,1+we.length,te,void 0,{typeAnnotation:"omit"});if(!ht)return null;te=te||ht.type,we.push(ht)}var gt=pe&&we.some(function(Ot){return Wo(pe,Ot.type)});return gt?new gs(Tn,we):new gs(te,we)},gs.prototype.evaluate=function(k){for(var O=null,te=0,pe,we=0,Me=this.args;we<Me.length;we+=1){var Oe=Me[we];if(te++,O=Oe.evaluate(k),O&&O instanceof Io&&!O.available&&(pe||(pe=O.name),O=null,te===this.args.length&&(O=pe)),O!==null)break}return O},gs.prototype.eachChild=function(k){this.args.forEach(k)},gs.prototype.outputDefined=function(){return this.args.every(function(k){return k.outputDefined()})},gs.prototype.serialize=function(){var k=["coalesce"];return this.eachChild(function(O){k.push(O.serialize())}),k};var Ks=function(k,O){this.type=O.type,this.bindings=[].concat(k),this.result=O};Ks.prototype.evaluate=function(k){return this.result.evaluate(k)},Ks.prototype.eachChild=function(k){for(var O=0,te=this.bindings;O<te.length;O+=1){var pe=te[O];k(pe[1])}k(this.result)},Ks.parse=function(k,O){if(k.length<4)return O.error("Expected at least 3 arguments, but found "+(k.length-1)+" instead.");for(var te=[],pe=1;pe<k.length-1;pe+=2){var we=k[pe];if(typeof we!="string")return O.error("Expected string, but found "+typeof we+" instead.",pe);if(/[^a-zA-Z0-9_]/.test(we))return O.error("Variable names must contain only alphanumeric characters or '_'.",pe);var Me=O.parse(k[pe+1],pe+1);if(!Me)return null;te.push([we,Me])}var Oe=O.parse(k[k.length-1],k.length-1,O.expectedType,te);return Oe?new Ks(te,Oe):null},Ks.prototype.outputDefined=function(){return this.result.outputDefined()},Ks.prototype.serialize=function(){for(var k=["let"],O=0,te=this.bindings;O<te.length;O+=1){var pe=te[O],we=pe[0],Me=pe[1];k.push(we,Me.serialize())}return k.push(this.result.serialize()),k};var Js=function(k,O,te){this.type=k,this.index=O,this.input=te};Js.parse=function(k,O){if(k.length!==3)return O.error("Expected 2 arguments, but found "+(k.length-1)+" instead.");var te=O.parse(k[1],1,br),pe=O.parse(k[2],2,ca(O.expectedType||Tn));if(!te||!pe)return null;var we=pe.type;return new Js(we.itemType,te,pe)},Js.prototype.evaluate=function(k){var O=this.index.evaluate(k),te=this.input.evaluate(k);if(O<0)throw new Yi("Array index out of bounds: "+O+" < 0.");if(O>=te.length)throw new Yi("Array index out of bounds: "+O+" > "+(te.length-1)+".");if(O!==Math.floor(O))throw new Yi("Array index must be an integer, but found "+O+" instead.");return te[O]},Js.prototype.eachChild=function(k){k(this.index),k(this.input)},Js.prototype.outputDefined=function(){return!1},Js.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Os=function(k,O){this.type=mn,this.needle=k,this.haystack=O};Os.parse=function(k,O){if(k.length!==3)return O.error("Expected 2 arguments, but found "+(k.length-1)+" instead.");var te=O.parse(k[1],1,Tn),pe=O.parse(k[2],2,Tn);return!te||!pe?null:is(te.type,[mn,Nr,br,mr,Tn])?new Os(te,pe):O.error("Expected first argument to be of type boolean, string, number or null, but found "+Ca(te.type)+" instead")},Os.prototype.evaluate=function(k){var O=this.needle.evaluate(k),te=this.haystack.evaluate(k);if(!te)return!1;if(!_l(O,["boolean","string","number","null"]))throw new Yi("Expected first argument to be of type boolean, string, number or null, but found "+Ca(Ui(O))+" instead.");if(!_l(te,["string","array"]))throw new Yi("Expected second argument to be of type array or string, but found "+Ca(Ui(te))+" instead.");return te.indexOf(O)>=0},Os.prototype.eachChild=function(k){k(this.needle),k(this.haystack)},Os.prototype.outputDefined=function(){return!0},Os.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var ys=function(k,O,te){this.type=br,this.needle=k,this.haystack=O,this.fromIndex=te};ys.parse=function(k,O){if(k.length<=2||k.length>=5)return O.error("Expected 3 or 4 arguments, but found "+(k.length-1)+" instead.");var te=O.parse(k[1],1,Tn),pe=O.parse(k[2],2,Tn);if(!te||!pe)return null;if(!is(te.type,[mn,Nr,br,mr,Tn]))return O.error("Expected first argument to be of type boolean, string, number or null, but found "+Ca(te.type)+" instead");if(k.length===4){var we=O.parse(k[3],3,br);return we?new ys(te,pe,we):null}else return new ys(te,pe)},ys.prototype.evaluate=function(k){var O=this.needle.evaluate(k),te=this.haystack.evaluate(k);if(!_l(O,["boolean","string","number","null"]))throw new Yi("Expected first argument to be of type boolean, string, number or null, but found "+Ca(Ui(O))+" instead.");if(!_l(te,["string","array"]))throw new Yi("Expected second argument to be of type array or string, but found "+Ca(Ui(te))+" instead.");if(this.fromIndex){var pe=this.fromIndex.evaluate(k);return te.indexOf(O,pe)}return te.indexOf(O)},ys.prototype.eachChild=function(k){k(this.needle),k(this.haystack),this.fromIndex&&k(this.fromIndex)},ys.prototype.outputDefined=function(){return!1},ys.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var k=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),k]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Ki=function(k,O,te,pe,we,Me){this.inputType=k,this.type=O,this.input=te,this.cases=pe,this.outputs=we,this.otherwise=Me};Ki.parse=function(k,O){if(k.length<5)return O.error("Expected at least 4 arguments, but found only "+(k.length-1)+".");if(k.length%2!==1)return O.error("Expected an even number of arguments.");var te,pe;O.expectedType&&O.expectedType.kind!=="value"&&(pe=O.expectedType);for(var we={},Me=[],Oe=2;Oe<k.length-1;Oe+=2){var tt=k[Oe],ht=k[Oe+1];Array.isArray(tt)||(tt=[tt]);var gt=O.concat(Oe);if(tt.length===0)return gt.error("Expected at least one branch label.");for(var Ot=0,nr=tt;Ot<nr.length;Ot+=1){var qt=nr[Ot];if(typeof qt!="number"&&typeof qt!="string")return gt.error("Branch labels must be numbers or strings.");if(typeof qt=="number"&&Math.abs(qt)>Number.MAX_SAFE_INTEGER)return gt.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof qt=="number"&&Math.floor(qt)!==qt)return gt.error("Numeric branch labels must be integer values.");if(!te)te=Ui(qt);else if(gt.checkSubtype(te,Ui(qt)))return null;if(typeof we[String(qt)]<"u")return gt.error("Branch labels must be unique.");we[String(qt)]=Me.length}var yr=O.parse(ht,Oe,pe);if(!yr)return null;pe=pe||yr.type,Me.push(yr)}var Or=O.parse(k[1],1,Tn);if(!Or)return null;var ln=O.parse(k[k.length-1],k.length-1,pe);return!ln||Or.type.kind!=="value"&&O.concat(1).checkSubtype(te,Or.type)?null:new Ki(te,pe,Or,we,Me,ln)},Ki.prototype.evaluate=function(k){var O=this.input.evaluate(k),te=Ui(O)===this.inputType&&this.outputs[this.cases[O]]||this.otherwise;return te.evaluate(k)},Ki.prototype.eachChild=function(k){k(this.input),this.outputs.forEach(k),k(this.otherwise)},Ki.prototype.outputDefined=function(){return this.outputs.every(function(k){return k.outputDefined()})&&this.otherwise.outputDefined()},Ki.prototype.serialize=function(){for(var k=this,O=["match",this.input.serialize()],te=Object.keys(this.cases).sort(),pe=[],we={},Me=0,Oe=te;Me<Oe.length;Me+=1){var tt=Oe[Me],ht=we[this.cases[tt]];ht===void 0?(we[this.cases[tt]]=pe.length,pe.push([this.cases[tt],[tt]])):pe[ht][1].push(tt)}for(var gt=function(Or){return k.inputType.kind==="number"?Number(Or):Or},Ot=0,nr=pe;Ot<nr.length;Ot+=1){var qt=nr[Ot],ht=qt[0],yr=qt[1];yr.length===1?O.push(gt(yr[0])):O.push(yr.map(gt)),O.push(this.outputs[outputIndex$1].serialize())}return O.push(this.otherwise.serialize()),O};var No=function(k,O,te){this.type=k,this.branches=O,this.otherwise=te};No.parse=function(k,O){if(k.length<4)return O.error("Expected at least 3 arguments, but found only "+(k.length-1)+".");if(k.length%2!==0)return O.error("Expected an odd number of arguments.");var te;O.expectedType&&O.expectedType.kind!=="value"&&(te=O.expectedType);for(var pe=[],we=1;we<k.length-1;we+=2){var Me=O.parse(k[we],we,mn);if(!Me)return null;var Oe=O.parse(k[we+1],we+1,te);if(!Oe)return null;pe.push([Me,Oe]),te=te||Oe.type}var tt=O.parse(k[k.length-1],k.length-1,te);return tt?new No(te,pe,tt):null},No.prototype.evaluate=function(k){for(var O=0,te=this.branches;O<te.length;O+=1){var pe=te[O],we=pe[0],Me=pe[1];if(we.evaluate(k))return Me.evaluate(k)}return this.otherwise.evaluate(k)},No.prototype.eachChild=function(k){for(var O=0,te=this.branches;O<te.length;O+=1){var pe=te[O],we=pe[0],Me=pe[1];k(we),k(Me)}k(this.otherwise)},No.prototype.outputDefined=function(){return this.branches.every(function(k){k[0];var O=k[1];return O.outputDefined()})&&this.otherwise.outputDefined()},No.prototype.serialize=function(){var k=["case"];return this.eachChild(function(O){k.push(O.serialize())}),k};var ms=function(k,O,te,pe){this.type=k,this.input=O,this.beginIndex=te,this.endIndex=pe};ms.parse=function(k,O){if(k.length<=2||k.length>=5)return O.error("Expected 3 or 4 arguments, but found "+(k.length-1)+" instead.");var te=O.parse(k[1],1,Tn),pe=O.parse(k[2],2,br);if(!te||!pe)return null;if(!is(te.type,[ca(Tn),Nr,Tn]))return O.error("Expected first argument to be of type array or string, but found "+Ca(te.type)+" instead");if(k.length===4){var we=O.parse(k[3],3,br);return we?new ms(te.type,te,pe,we):null}else return new ms(te.type,te,pe)},ms.prototype.evaluate=function(k){var O=this.input.evaluate(k),te=this.beginIndex.evaluate(k);if(!_l(O,["string","array"]))throw new Yi("Expected first argument to be of type array or string, but found "+Ca(Ui(O))+" instead.");if(this.endIndex){var pe=this.endIndex.evaluate(k);return O.slice(te,pe)}return O.slice(te)},ms.prototype.eachChild=function(k){k(this.input),k(this.beginIndex),this.endIndex&&k(this.endIndex)},ms.prototype.outputDefined=function(){return!1},ms.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var k=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),k]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};function Qu(C,k){return C==="=="||C==="!="?k.kind==="boolean"||k.kind==="string"||k.kind==="number"||k.kind==="null"||k.kind==="value":k.kind==="string"||k.kind==="number"||k.kind==="value"}function lu(C,k,O){return k===O}function $u(C,k,O){return k!==O}function xt(C,k,O){return k<O}function Bt(C,k,O){return k>O}function vr(C,k,O){return k<=O}function lr(C,k,O){return k>=O}function Fr(C,k,O,te){return te.compare(k,O)===0}function nn(C,k,O,te){return!Fr(C,k,O,te)}function yn(C,k,O,te){return te.compare(k,O)<0}function En(C,k,O,te){return te.compare(k,O)>0}function Dn(C,k,O,te){return te.compare(k,O)<=0}function Hn(C,k,O,te){return te.compare(k,O)>=0}function xn(C,k,O){var te=C!=="=="&&C!=="!=";return function(){function pe(we,Me,Oe){this.type=mn,this.lhs=we,this.rhs=Me,this.collator=Oe,this.hasUntypedArgument=we.type.kind==="value"||Me.type.kind==="value"}return pe.parse=function(Me,Oe){if(Me.length!==3&&Me.length!==4)return Oe.error("Expected two or three arguments.");var tt=Me[0],ht=Oe.parse(Me[1],1,Tn);if(!ht)return null;if(!Qu(tt,ht.type))return Oe.concat(1).error('"'+tt+`" comparisons are not supported for type '`+Ca(ht.type)+"'.");var gt=Oe.parse(Me[2],2,Tn);if(!gt)return null;if(!Qu(tt,gt.type))return Oe.concat(2).error('"'+tt+`" comparisons are not supported for type '`+Ca(gt.type)+"'.");if(ht.type.kind!==gt.type.kind&&ht.type.kind!=="value"&&gt.type.kind!=="value")return Oe.error("Cannot compare types '"+Ca(ht.type)+"' and '"+Ca(gt.type)+"'.");te&&(ht.type.kind==="value"&&gt.type.kind!=="value"?ht=new io(gt.type,[ht]):ht.type.kind!=="value"&&gt.type.kind==="value"&&(gt=new io(ht.type,[gt])));var Ot=null;if(Me.length===4){if(ht.type.kind!=="string"&&gt.type.kind!=="string"&&ht.type.kind!=="value"&&gt.type.kind!=="value")return Oe.error("Cannot use collator to compare non-string types.");if(Ot=Oe.parse(Me[3],3,sa),!Ot)return null}return new pe(ht,gt,Ot)},pe.prototype.evaluate=function(Me){var Oe=this.lhs.evaluate(Me),tt=this.rhs.evaluate(Me);if(te&&this.hasUntypedArgument){var ht=Ui(Oe),gt=Ui(tt);if(ht.kind!==gt.kind||!(ht.kind==="string"||ht.kind==="number"))throw new Yi('Expected arguments for "'+C+'" to be (string, string) or (number, number), but found ('+ht.kind+", "+gt.kind+") instead.")}if(this.collator&&!te&&this.hasUntypedArgument){var Ot=Ui(Oe),nr=Ui(tt);if(Ot.kind!=="string"||nr.kind!=="string")return k(Me,Oe,tt)}return this.collator?O(Me,Oe,tt,this.collator.evaluate(Me)):k(Me,Oe,tt)},pe.prototype.eachChild=function(Me){Me(this.lhs),Me(this.rhs),this.collator&&Me(this.collator)},pe.prototype.outputDefined=function(){return!0},pe.prototype.serialize=function(){var Me=[C];return this.eachChild(function(Oe){Me.push(Oe.serialize())}),Me},pe}()}var Nn=xn("==",lu,Fr),Rn=xn("!=",$u,nn),Yn=xn("<",xt,yn),ta=xn(">",Bt,En),Ba=xn("<=",vr,Dn),Da=xn(">=",lr,Hn),Ua=function(k,O,te,pe,we){this.type=Nr,this.number=k,this.locale=O,this.currency=te,this.minFractionDigits=pe,this.maxFractionDigits=we};Ua.parse=function(k,O){if(k.length!==3)return O.error("Expected two arguments.");var te=O.parse(k[1],1,br);if(!te)return null;var pe=k[2];if(typeof pe!="object"||Array.isArray(pe))return O.error("NumberFormat options argument must be an object.");var we=null;if(pe.locale&&(we=O.parse(pe.locale,1,Nr),!we))return null;var Me=null;if(pe.currency&&(Me=O.parse(pe.currency,1,Nr),!Me))return null;var Oe=null;if(pe["min-fraction-digits"]&&(Oe=O.parse(pe["min-fraction-digits"],1,br),!Oe))return null;var tt=null;return pe["max-fraction-digits"]&&(tt=O.parse(pe["max-fraction-digits"],1,br),!tt)?null:new Ua(te,we,Me,Oe,tt)},Ua.prototype.evaluate=function(k){return new Intl.NumberFormat(this.locale?this.locale.evaluate(k):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(k):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(k):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(k):void 0}).format(this.number.evaluate(k))},Ua.prototype.eachChild=function(k){k(this.number),this.locale&&k(this.locale),this.currency&&k(this.currency),this.minFractionDigits&&k(this.minFractionDigits),this.maxFractionDigits&&k(this.maxFractionDigits)},Ua.prototype.outputDefined=function(){return!1},Ua.prototype.serialize=function(){var k={};return this.locale&&(k.locale=this.locale.serialize()),this.currency&&(k.currency=this.currency.serialize()),this.minFractionDigits&&(k["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(k["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),k]};var Va=function(k){this.type=br,this.input=k};Va.parse=function(k,O){if(k.length!==2)return O.error("Expected 1 argument, but found "+(k.length-1)+" instead.");var te=O.parse(k[1],1);return te?te.type.kind!=="array"&&te.type.kind!=="string"&&te.type.kind!=="value"?O.error("Expected argument of type string or array, but found "+Ca(te.type)+" instead."):new Va(te):null},Va.prototype.evaluate=function(k){var O=this.input.evaluate(k);if(typeof O=="string")return O.length;if(Array.isArray(O))return O.length;throw new Yi("Expected value to be of type string or array, but found "+Ca(Ui(O))+" instead.")},Va.prototype.eachChild=function(k){k(this.input)},Va.prototype.outputDefined=function(){return!1},Va.prototype.serialize=function(){var k=["length"];return this.eachChild(function(O){k.push(O.serialize())}),k};var qn={"==":Nn,"!=":Rn,">":ta,"<":Yn,">=":Da,"<=":Ba,array:io,at:Js,boolean:io,case:No,coalesce:gs,collator:js,format:vs,image:al,in:Os,"index-of":ys,interpolate:mo,"interpolate-hcl":mo,"interpolate-lab":mo,length:Va,let:Ks,literal:ao,match:Ki,number:io,"number-format":Ua,object:io,slice:ms,step:Ns,string:io,"to-boolean":os,"to-color":os,"to-number":os,"to-string":os,var:Es,within:ss};function da(C,k){var O=k[0],te=k[1],pe=k[2],we=k[3];O=O.evaluate(C),te=te.evaluate(C),pe=pe.evaluate(C);var Me=we?we.evaluate(C):1,Oe=zl(O,te,pe,Me);if(Oe)throw new Yi(Oe);return new xi(O/255*Me,te/255*Me,pe/255*Me,Me)}function Za(C,k){return C in k}function ti(C,k){var O=k[C];return typeof O>"u"?null:O}function _i(C,k,O,te){for(;O<=te;){var pe=O+te>>1;if(k[pe]===C)return!0;k[pe]>C?te=pe-1:O=pe+1}return!1}function wi(C){return{type:C}}Fo.register(qn,{error:[Qn,[Nr],function(C,k){var O=k[0];throw new Yi(O.evaluate(C))}],typeof:[Nr,[Tn],function(C,k){var O=k[0];return Ca(Ui(O.evaluate(C)))}],"to-rgba":[ca(br,4),[Bn],function(C,k){var O=k[0];return O.evaluate(C).toArray()}],rgb:[Bn,[br,br,br],da],rgba:[Bn,[br,br,br,br],da],has:{type:mn,overloads:[[[Nr],function(C,k){var O=k[0];return Za(O.evaluate(C),C.properties())}],[[Nr,aa],function(C,k){var O=k[0],te=k[1];return Za(O.evaluate(C),te.evaluate(C))}]]},get:{type:Tn,overloads:[[[Nr],function(C,k){var O=k[0];return ti(O.evaluate(C),C.properties())}],[[Nr,aa],function(C,k){var O=k[0],te=k[1];return ti(O.evaluate(C),te.evaluate(C))}]]},"feature-state":[Tn,[Nr],function(C,k){var O=k[0];return ti(O.evaluate(C),C.featureState||{})}],properties:[aa,[],function(C){return C.properties()}],"geometry-type":[Nr,[],function(C){return C.geometryType()}],id:[Tn,[],function(C){return C.id()}],zoom:[br,[],function(C){return C.globals.zoom}],"heatmap-density":[br,[],function(C){return C.globals.heatmapDensity||0}],"line-progress":[br,[],function(C){return C.globals.lineProgress||0}],accumulated:[Tn,[],function(C){return C.globals.accumulated===void 0?null:C.globals.accumulated}],"+":[br,wi(br),function(C,k){for(var O=0,te=0,pe=k;te<pe.length;te+=1){var we=pe[te];O+=we.evaluate(C)}return O}],"*":[br,wi(br),function(C,k){for(var O=1,te=0,pe=k;te<pe.length;te+=1){var we=pe[te];O*=we.evaluate(C)}return O}],"-":{type:br,overloads:[[[br,br],function(C,k){var O=k[0],te=k[1];return O.evaluate(C)-te.evaluate(C)}],[[br],function(C,k){var O=k[0];return-O.evaluate(C)}]]},"/":[br,[br,br],function(C,k){var O=k[0],te=k[1];return O.evaluate(C)/te.evaluate(C)}],"%":[br,[br,br],function(C,k){var O=k[0],te=k[1];return O.evaluate(C)%te.evaluate(C)}],ln2:[br,[],function(){return Math.LN2}],pi:[br,[],function(){return Math.PI}],e:[br,[],function(){return Math.E}],"^":[br,[br,br],function(C,k){var O=k[0],te=k[1];return Math.pow(O.evaluate(C),te.evaluate(C))}],sqrt:[br,[br],function(C,k){var O=k[0];return Math.sqrt(O.evaluate(C))}],log10:[br,[br],function(C,k){var O=k[0];return Math.log(O.evaluate(C))/Math.LN10}],ln:[br,[br],function(C,k){var O=k[0];return Math.log(O.evaluate(C))}],log2:[br,[br],function(C,k){var O=k[0];return Math.log(O.evaluate(C))/Math.LN2}],sin:[br,[br],function(C,k){var O=k[0];return Math.sin(O.evaluate(C))}],cos:[br,[br],function(C,k){var O=k[0];return Math.cos(O.evaluate(C))}],tan:[br,[br],function(C,k){var O=k[0];return Math.tan(O.evaluate(C))}],asin:[br,[br],function(C,k){var O=k[0];return Math.asin(O.evaluate(C))}],acos:[br,[br],function(C,k){var O=k[0];return Math.acos(O.evaluate(C))}],atan:[br,[br],function(C,k){var O=k[0];return Math.atan(O.evaluate(C))}],min:[br,wi(br),function(C,k){return Math.min.apply(Math,k.map(function(O){return O.evaluate(C)}))}],max:[br,wi(br),function(C,k){return Math.max.apply(Math,k.map(function(O){return O.evaluate(C)}))}],abs:[br,[br],function(C,k){var O=k[0];return Math.abs(O.evaluate(C))}],round:[br,[br],function(C,k){var O=k[0],te=O.evaluate(C);return te<0?-Math.round(-te):Math.round(te)}],floor:[br,[br],function(C,k){var O=k[0];return Math.floor(O.evaluate(C))}],ceil:[br,[br],function(C,k){var O=k[0];return Math.ceil(O.evaluate(C))}],"filter-==":[mn,[Nr,Tn],function(C,k){var O=k[0],te=k[1];return C.properties()[O.value]===te.value}],"filter-id-==":[mn,[Tn],function(C,k){var O=k[0];return C.id()===O.value}],"filter-type-==":[mn,[Nr],function(C,k){var O=k[0];return C.geometryType()===O.value}],"filter-<":[mn,[Nr,Tn],function(C,k){var O=k[0],te=k[1],pe=C.properties()[O.value],we=te.value;return typeof pe==typeof we&&pe<we}],"filter-id-<":[mn,[Tn],function(C,k){var O=k[0],te=C.id(),pe=O.value;return typeof te==typeof pe&&te<pe}],"filter->":[mn,[Nr,Tn],function(C,k){var O=k[0],te=k[1],pe=C.properties()[O.value],we=te.value;return typeof pe==typeof we&&pe>we}],"filter-id->":[mn,[Tn],function(C,k){var O=k[0],te=C.id(),pe=O.value;return typeof te==typeof pe&&te>pe}],"filter-<=":[mn,[Nr,Tn],function(C,k){var O=k[0],te=k[1],pe=C.properties()[O.value],we=te.value;return typeof pe==typeof we&&pe<=we}],"filter-id-<=":[mn,[Tn],function(C,k){var O=k[0],te=C.id(),pe=O.value;return typeof te==typeof pe&&te<=pe}],"filter->=":[mn,[Nr,Tn],function(C,k){var O=k[0],te=k[1],pe=C.properties()[O.value],we=te.value;return typeof pe==typeof we&&pe>=we}],"filter-id->=":[mn,[Tn],function(C,k){var O=k[0],te=C.id(),pe=O.value;return typeof te==typeof pe&&te>=pe}],"filter-has":[mn,[Tn],function(C,k){var O=k[0];return O.value in C.properties()}],"filter-has-id":[mn,[],function(C){return C.id()!==null&&C.id()!==void 0}],"filter-type-in":[mn,[ca(Nr)],function(C,k){var O=k[0];return O.value.indexOf(C.geometryType())>=0}],"filter-id-in":[mn,[ca(Tn)],function(C,k){var O=k[0];return O.value.indexOf(C.id())>=0}],"filter-in-small":[mn,[Nr,ca(Tn)],function(C,k){var O=k[0],te=k[1];return te.value.indexOf(C.properties()[O.value])>=0}],"filter-in-large":[mn,[Nr,ca(Tn)],function(C,k){var O=k[0],te=k[1];return _i(C.properties()[O.value],te.value,0,te.value.length-1)}],all:{type:mn,overloads:[[[mn,mn],function(C,k){var O=k[0],te=k[1];return O.evaluate(C)&&te.evaluate(C)}],[wi(mn),function(C,k){for(var O=0,te=k;O<te.length;O+=1){var pe=te[O];if(!pe.evaluate(C))return!1}return!0}]]},any:{type:mn,overloads:[[[mn,mn],function(C,k){var O=k[0],te=k[1];return O.evaluate(C)||te.evaluate(C)}],[wi(mn),function(C,k){for(var O=0,te=k;O<te.length;O+=1){var pe=te[O];if(pe.evaluate(C))return!0}return!1}]]},"!":[mn,[mn],function(C,k){var O=k[0];return!O.evaluate(C)}],"is-supported-script":[mn,[Nr],function(C,k){var O=k[0],te=C.globals&&C.globals.isSupportedScript;return te?te(O.evaluate(C)):!0}],upcase:[Nr,[Nr],function(C,k){var O=k[0];return O.evaluate(C).toUpperCase()}],downcase:[Nr,[Nr],function(C,k){var O=k[0];return O.evaluate(C).toLowerCase()}],concat:[Nr,wi(Tn),function(C,k){return k.map(function(O){return wl(O.evaluate(C))}).join("")}],"resolved-locale":[Nr,[sa],function(C,k){var O=k[0];return O.evaluate(C).resolvedLocale()}]});function Ai(C){return{result:"success",value:C}}function Li(C){return{result:"error",value:C}}function ci(C){return C["property-type"]==="data-driven"||C["property-type"]==="cross-faded-data-driven"}function Eo(C){return!!C.expression&&C.expression.parameters.indexOf("zoom")>-1}function uo(C){return!!C.expression&&C.expression.interpolated}function ei(C){return C instanceof Number?"number":C instanceof String?"string":C instanceof Boolean?"boolean":Array.isArray(C)?"array":C===null?"null":typeof C}function ga(C){return typeof C=="object"&&C!==null&&!Array.isArray(C)}function Mi(C){return C}function xo(C,k){var O=k.type==="color",te=C.stops&&typeof C.stops[0][0]=="object",pe=te||C.property!==void 0,we=te||!pe,Me=C.type||(uo(k)?"exponential":"interval");if(O&&(C=dn({},C),C.stops&&(C.stops=C.stops.map(function(oa){return[oa[0],xi.parse(oa[1])]})),C.default?C.default=xi.parse(C.default):C.default=xi.parse(k.default)),C.colorSpace&&C.colorSpace!=="rgb"&&!Yl[C.colorSpace])throw new Error("Unknown color space: "+C.colorSpace);var Oe,tt,ht;if(Me==="exponential")Oe=Xo;else if(Me==="interval")Oe=Bs;else if(Me==="categorical"){Oe=xs,tt=Object.create(null);for(var gt=0,Ot=C.stops;gt<Ot.length;gt+=1){var nr=Ot[gt];tt[nr[0]]=nr[1]}ht=typeof C.stops[0][0]}else if(Me==="identity")Oe=fl;else throw new Error('Unknown function type "'+Me+'"');if(te){for(var qt={},yr=[],Or=0;Or<C.stops.length;Or++){var ln=C.stops[Or],en=ln[0].zoom;qt[en]===void 0&&(qt[en]={zoom:en,type:C.type,property:C.property,default:C.default,stops:[]},yr.push(en)),qt[en].stops.push([ln[0].value,ln[1]])}for(var kn=[],bn=0,Cn=yr;bn<Cn.length;bn+=1){var zn=Cn[bn];kn.push([qt[zn].zoom,xo(qt[zn],k)])}var Xn={name:"linear"};return{kind:"composite",interpolationType:Xn,interpolationFactor:mo.interpolationFactor.bind(void 0,Xn),zoomStops:kn.map(function(oa){return oa[0]}),evaluate:function(Na,Sa){var La=Na.zoom;return Xo({stops:kn,base:C.base},k,La).evaluate(La,Sa)}}}else if(we){var ua=Me==="exponential"?{name:"exponential",base:C.base!==void 0?C.base:1}:null;return{kind:"camera",interpolationType:ua,interpolationFactor:mo.interpolationFactor.bind(void 0,ua),zoomStops:C.stops.map(function(oa){return oa[0]}),evaluate:function(oa){var Na=oa.zoom;return Oe(C,k,Na,tt,ht)}}}else return{kind:"source",evaluate:function(Na,Sa){var La=Sa&&Sa.properties?Sa.properties[C.property]:void 0;return La===void 0?Ao(C.default,k.default):Oe(C,k,La,tt,ht)}}}function Ao(C,k,O){if(C!==void 0)return C;if(k!==void 0)return k;if(O!==void 0)return O}function xs(C,k,O,te,pe){var we=typeof O===pe?te[O]:void 0;return Ao(we,C.default,k.default)}function Bs(C,k,O){if(ei(O)!=="number")return Ao(C.default,k.default);var te=C.stops.length;if(te===1||O<=C.stops[0][0])return C.stops[0][1];if(O>=C.stops[te-1][0])return C.stops[te-1][1];var pe=zs(C.stops.map(function(we){return we[0]}),O);return C.stops[pe][1]}function Xo(C,k,O){var te=C.base!==void 0?C.base:1;if(ei(O)!=="number")return Ao(C.default,k.default);var pe=C.stops.length;if(pe===1||O<=C.stops[0][0])return C.stops[0][1];if(O>=C.stops[pe-1][0])return C.stops[pe-1][1];var we=zs(C.stops.map(function(Ot){return Ot[0]}),O),Me=ks(O,te,C.stops[we][0],C.stops[we+1][0]),Oe=C.stops[we][1],tt=C.stops[we+1][1],ht=sl[k.type]||Mi;if(C.colorSpace&&C.colorSpace!=="rgb"){var gt=Yl[C.colorSpace];ht=function(Ot,nr){return gt.reverse(gt.interpolate(gt.forward(Ot),gt.forward(nr),Me))}}return typeof Oe.evaluate=="function"?{evaluate:function(){for(var nr=[],qt=arguments.length;qt--;)nr[qt]=arguments[qt];var yr=Oe.evaluate.apply(void 0,nr),Or=tt.evaluate.apply(void 0,nr);if(!(yr===void 0||Or===void 0))return ht(yr,Or,Me)}}:ht(Oe,tt,Me)}function fl(C,k,O){return k.type==="color"?O=xi.parse(O):k.type==="formatted"?O=ji.fromString(O.toString()):k.type==="resolvedImage"?O=Io.fromString(O.toString()):ei(O)!==k.type&&(k.type!=="enum"||!k.values[O])&&(O=void 0),Ao(O,C.default,k.default)}function ks(C,k,O,te){var pe=te-O,we=C-O;return pe===0?0:k===1?we/pe:(Math.pow(k,we)-1)/(Math.pow(k,pe)-1)}var bs=function(k,O){this.expression=k,this._warningHistory={},this._evaluator=new Zs,this._defaultValue=O?wc(O):null,this._enumValues=O&&O.type==="enum"?O.values:null};bs.prototype.evaluateWithoutErrorHandling=function(k,O,te,pe,we,Me){return this._evaluator.globals=k,this._evaluator.feature=O,this._evaluator.featureState=te,this._evaluator.canonical=pe,this._evaluator.availableImages=we||null,this._evaluator.formattedSection=Me,this.expression.evaluate(this._evaluator)},bs.prototype.evaluate=function(k,O,te,pe,we,Me){this._evaluator.globals=k,this._evaluator.feature=O||null,this._evaluator.featureState=te||null,this._evaluator.canonical=pe,this._evaluator.availableImages=we||null,this._evaluator.formattedSection=Me||null;try{var Oe=this.expression.evaluate(this._evaluator);if(Oe==null||typeof Oe=="number"&&Oe!==Oe)return this._defaultValue;if(this._enumValues&&!(Oe in this._enumValues))throw new Yi("Expected value to be one of "+Object.keys(this._enumValues).map(function(tt){return JSON.stringify(tt)}).join(", ")+", but found "+JSON.stringify(Oe)+" instead.");return Oe}catch(tt){return this._warningHistory[tt.message]||(this._warningHistory[tt.message]=!0,typeof console<"u"&&console.warn(tt.message)),this._defaultValue}};function Co(C){return Array.isArray(C)&&C.length>0&&typeof C[0]=="string"&&C[0]in qn}function uu(C,k){var O=new zo(qn,[],k?ec(k):void 0),te=O.parse(C,void 0,void 0,void 0,k&&k.type==="string"?{typeAnnotation:"coerce"}:void 0);return te?Ai(new bs(te,k)):Li(O.errors)}var ku=function(k,O){this.kind=k,this._styleExpression=O,this.isStateDependent=k!=="constant"&&!Ml(O.expression)};ku.prototype.evaluateWithoutErrorHandling=function(k,O,te,pe,we,Me){return this._styleExpression.evaluateWithoutErrorHandling(k,O,te,pe,we,Me)},ku.prototype.evaluate=function(k,O,te,pe,we,Me){return this._styleExpression.evaluate(k,O,te,pe,we,Me)};var _s=function(k,O,te,pe){this.kind=k,this.zoomStops=te,this._styleExpression=O,this.isStateDependent=k!=="camera"&&!Ml(O.expression),this.interpolationType=pe};_s.prototype.evaluateWithoutErrorHandling=function(k,O,te,pe,we,Me){return this._styleExpression.evaluateWithoutErrorHandling(k,O,te,pe,we,Me)},_s.prototype.evaluate=function(k,O,te,pe,we,Me){return this._styleExpression.evaluate(k,O,te,pe,we,Me)},_s.prototype.interpolationFactor=function(k,O,te){return this.interpolationType?mo.interpolationFactor(this.interpolationType,k,O,te):0};function qu(C,k){if(C=uu(C,k),C.result==="error")return C;var O=C.value.expression,te=Al(O);if(!te&&!ci(k))return Li([new _n("","data expressions not supported")]);var pe=Eu(O,["zoom"]);if(!pe&&!Eo(k))return Li([new _n("","zoom expressions not supported")]);var we=_c(O);if(!we&&!pe)return Li([new _n("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(we instanceof _n)return Li([we]);if(we instanceof mo&&!uo(k))return Li([new _n("",'"interpolate" expressions cannot be used with this property')]);if(!we)return Ai(te?new ku("constant",C.value):new ku("source",C.value));var Me=we instanceof mo?we.interpolation:void 0;return Ai(te?new _s("camera",C.value,we.labels,Me):new _s("composite",C.value,we.labels,Me))}var cu=function(k,O){this._parameters=k,this._specification=O,dn(this,xo(this._parameters,this._specification))};cu.deserialize=function(k){return new cu(k._parameters,k._specification)},cu.serialize=function(k){return{_parameters:k._parameters,_specification:k._specification}};function Ff(C,k){if(ga(C))return new cu(C,k);if(Co(C)){var O=qu(C,k);if(O.result==="error")throw new Error(O.value.map(function(pe){return pe.key+": "+pe.message}).join(", "));return O.value}else{var te=C;return typeof C=="string"&&k.type==="color"&&(te=xi.parse(C)),{kind:"constant",evaluate:function(){return te}}}}function _c(C){var k=null;if(C instanceof Ks)k=_c(C.result);else if(C instanceof gs)for(var O=0,te=C.args;O<te.length;O+=1){var pe=te[O];if(k=_c(pe),k)break}else(C instanceof Ns||C instanceof mo)&&C.input instanceof Fo&&C.input.name==="zoom"&&(k=C);return k instanceof _n||C.eachChild(function(we){var Me=_c(we);Me instanceof _n?k=Me:!k&&Me?k=new _n("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):k&&Me&&k!==Me&&(k=new _n("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),k}function ec(C){var k={color:Bn,string:Nr,number:br,enum:Nr,boolean:mn,formatted:ma,resolvedImage:wa};return C.type==="array"?ca(k[C.value]||Tn,C.length):k[C.type]}function wc(C){return C.type==="color"&&ga(C.default)?new xi(0,0,0,0):C.type==="color"?xi.parse(C.default)||null:C.default===void 0?null:C.default}function Us(C){var k=C.key,O=C.value,te=C.valueSpec||{},pe=C.objectElementValidators||{},we=C.style,Me=C.styleSpec,Oe=[],tt=ei(O);if(tt!=="object")return[new pr(k,O,"object expected, "+tt+" found")];for(var ht in O){var gt=ht.split(".")[0],Ot=te[gt]||te["*"],nr=void 0;if(pe[gt])nr=pe[gt];else if(te[gt])nr=gi;else if(pe["*"])nr=pe["*"];else if(te["*"])nr=gi;else{Oe.push(new pr(k,O[ht],'unknown property "'+ht+'"'));continue}Oe=Oe.concat(nr({key:(k&&k+".")+ht,value:O[ht],valueSpec:Ot,style:we,styleSpec:Me,object:O,objectKey:ht},O))}for(var qt in te)pe[qt]||te[qt].required&&te[qt].default===void 0&&O[qt]===void 0&&Oe.push(new pr(k,O,'missing required property "'+qt+'"'));return Oe}function Gc(C){var k=C.value,O=C.valueSpec,te=C.style,pe=C.styleSpec,we=C.key,Me=C.arrayElementValidator||gi;if(ei(k)!=="array")return[new pr(we,k,"array expected, "+ei(k)+" found")];if(O.length&&k.length!==O.length)return[new pr(we,k,"array length "+O.length+" expected, length "+k.length+" found")];if(O["min-length"]&&k.length<O["min-length"])return[new pr(we,k,"array length at least "+O["min-length"]+" expected, length "+k.length+" found")];var Oe={type:O.value,values:O.values};pe.$version<7&&(Oe.function=O.function),ei(O.value)==="object"&&(Oe=O.value);for(var tt=[],ht=0;ht<k.length;ht++)tt=tt.concat(Me({array:k,arrayIndex:ht,value:k[ht],valueSpec:Oe,style:te,styleSpec:pe,key:we+"["+ht+"]"}));return tt}function Tc(C){var k=C.key,O=C.value,te=C.valueSpec,pe=ei(O);return pe==="number"&&O!==O&&(pe="NaN"),pe!=="number"?[new pr(k,O,"number expected, "+pe+" found")]:"minimum"in te&&O<te.minimum?[new pr(k,O,O+" is less than the minimum value "+te.minimum)]:"maximum"in te&&O>te.maximum?[new pr(k,O,O+" is greater than the maximum value "+te.maximum)]:[]}function Ac(C){var k=C.valueSpec,O=rn(C.value.type),te,pe={},we,Me,Oe=O!=="categorical"&&C.value.property===void 0,tt=!Oe,ht=ei(C.value.stops)==="array"&&ei(C.value.stops[0])==="array"&&ei(C.value.stops[0][0])==="object",gt=Us({key:C.key,value:C.value,valueSpec:C.styleSpec.function,style:C.style,styleSpec:C.styleSpec,objectElementValidators:{stops:Ot,default:yr}});return O==="identity"&&Oe&&gt.push(new pr(C.key,C.value,'missing required property "property"')),O!=="identity"&&!C.value.stops&&gt.push(new pr(C.key,C.value,'missing required property "stops"')),O==="exponential"&&C.valueSpec.expression&&!uo(C.valueSpec)&&gt.push(new pr(C.key,C.value,"exponential functions not supported")),C.styleSpec.$version>=8&&(tt&&!ci(C.valueSpec)?gt.push(new pr(C.key,C.value,"property functions not supported")):Oe&&!Eo(C.valueSpec)&&gt.push(new pr(C.key,C.value,"zoom functions not supported"))),(O==="categorical"||ht)&&C.value.property===void 0&&gt.push(new pr(C.key,C.value,'"property" property is required')),gt;function Ot(Or){if(O==="identity")return[new pr(Or.key,Or.value,'identity function may not have a "stops" property')];var ln=[],en=Or.value;return ln=ln.concat(Gc({key:Or.key,value:en,valueSpec:Or.valueSpec,style:Or.style,styleSpec:Or.styleSpec,arrayElementValidator:nr})),ei(en)==="array"&&en.length===0&&ln.push(new pr(Or.key,en,"array must have at least one stop")),ln}function nr(Or){var ln=[],en=Or.value,kn=Or.key;if(ei(en)!=="array")return[new pr(kn,en,"array expected, "+ei(en)+" found")];if(en.length!==2)return[new pr(kn,en,"array length 2 expected, length "+en.length+" found")];if(ht){if(ei(en[0])!=="object")return[new pr(kn,en,"object expected, "+ei(en[0])+" found")];if(en[0].zoom===void 0)return[new pr(kn,en,"object stop key must have zoom")];if(en[0].value===void 0)return[new pr(kn,en,"object stop key must have value")];if(Me&&Me>rn(en[0].zoom))return[new pr(kn,en[0].zoom,"stop zoom values must appear in ascending order")];rn(en[0].zoom)!==Me&&(Me=rn(en[0].zoom),we=void 0,pe={}),ln=ln.concat(Us({key:kn+"[0]",value:en[0],valueSpec:{zoom:{}},style:Or.style,styleSpec:Or.styleSpec,objectElementValidators:{zoom:Tc,value:qt}}))}else ln=ln.concat(qt({key:kn+"[0]",value:en[0],valueSpec:{},style:Or.style,styleSpec:Or.styleSpec},en));return Co(Mn(en[1]))?ln.concat([new pr(kn+"[1]",en[1],"expressions are not allowed in function stops.")]):ln.concat(gi({key:kn+"[1]",value:en[1],valueSpec:k,style:Or.style,styleSpec:Or.styleSpec}))}function qt(Or,ln){var en=ei(Or.value),kn=rn(Or.value),bn=Or.value!==null?Or.value:ln;if(!te)te=en;else if(en!==te)return[new pr(Or.key,bn,en+" stop domain type must match previous stop domain type "+te)];if(en!=="number"&&en!=="string"&&en!=="boolean")return[new pr(Or.key,bn,"stop domain value must be a number, string, or boolean")];if(en!=="number"&&O!=="categorical"){var Cn="number expected, "+en+" found";return ci(k)&&O===void 0&&(Cn+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new pr(Or.key,bn,Cn)]}return O==="categorical"&&en==="number"&&(!isFinite(kn)||Math.floor(kn)!==kn)?[new pr(Or.key,bn,"integer expected, found "+kn)]:O!=="categorical"&&en==="number"&&we!==void 0&&kn<we?[new pr(Or.key,bn,"stop domain values must appear in ascending order")]:(we=kn,O==="categorical"&&kn in pe?[new pr(Or.key,bn,"stop domain values must be unique")]:(pe[kn]=!0,[]))}function yr(Or){return gi({key:Or.key,value:Or.value,valueSpec:k,style:Or.style,styleSpec:Or.styleSpec})}}function Zo(C){var k=(C.expressionContext==="property"?qu:uu)(Mn(C.value),C.valueSpec);if(k.result==="error")return k.value.map(function(te){return new pr(""+C.key+te.key,C.value,te.message)});var O=k.value.expression||k.value._styleExpression.expression;if(C.expressionContext==="property"&&C.propertyKey==="text-font"&&!O.outputDefined())return[new pr(C.key,C.value,'Invalid data expression for "'+C.propertyKey+'". Output values must be contained as literals within the expression.')];if(C.expressionContext==="property"&&C.propertyType==="layout"&&!Ml(O))return[new pr(C.key,C.value,'"feature-state" data expressions are not supported with layout properties.')];if(C.expressionContext==="filter"&&!Ml(O))return[new pr(C.key,C.value,'"feature-state" data expressions are not supported with filters.')];if(C.expressionContext&&C.expressionContext.indexOf("cluster")===0){if(!Eu(O,["zoom","feature-state"]))return[new pr(C.key,C.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(C.expressionContext==="cluster-initial"&&!Al(O))return[new pr(C.key,C.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Mc(C){var k=C.value,O=C.key,te=ei(k);return te!=="boolean"?[new pr(O,k,"boolean expected, "+te+" found")]:[]}function of(C){var k=C.key,O=C.value,te=ei(O);return te!=="string"?[new pr(k,O,"color expected, "+te+" found")]:wu(O)===null?[new pr(k,O,'color expected, "'+O+'" found')]:[]}function Ls(C){var k=C.key,O=C.value,te=C.valueSpec,pe=[];return Array.isArray(te.values)?te.values.indexOf(rn(O))===-1&&pe.push(new pr(k,O,"expected one of ["+te.values.join(", ")+"], "+JSON.stringify(O)+" found")):Object.keys(te.values).indexOf(rn(O))===-1&&pe.push(new pr(k,O,"expected one of ["+Object.keys(te.values).join(", ")+"], "+JSON.stringify(O)+" found")),pe}function tc(C){if(C===!0||C===!1)return!0;if(!Array.isArray(C)||C.length===0)return!1;switch(C[0]){case"has":return C.length>=2&&C[1]!=="$id"&&C[1]!=="$type";case"in":return C.length>=3&&(typeof C[1]!="string"||Array.isArray(C[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return C.length!==3||Array.isArray(C[1])||Array.isArray(C[2]);case"any":case"all":for(var k=0,O=C.slice(1);k<O.length;k+=1){var te=O[k];if(!tc(te)&&typeof te!="boolean")return!1}return!0;default:return!0}}var rc={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Sc(C){if(C==null)return{filter:function(){return!0},needGeometry:!1};tc(C)||(C=rt(C));var k=uu(C,rc);if(k.result==="error")throw new Error(k.value.map(function(te){return te.key+": "+te.message}).join(", "));var O=Ze(C);return{filter:function(te,pe,we){return k.value.evaluate(te,pe,{},we)},needGeometry:O}}function Ne(C,k){return C<k?-1:C>k?1:0}function Ze(C){if(!Array.isArray(C))return!1;if(C[0]==="within")return!0;for(var k=1;k<C.length;k++)if(Ze(C[k]))return!0;return!1}function rt(C){if(!C)return!0;var k=C[0];if(C.length<=1)return k!=="any";var O=k==="=="?lt(C[1],C[2],"=="):k==="!="?hr(lt(C[1],C[2],"==")):k==="<"||k===">"||k==="<="||k===">="?lt(C[1],C[2],k):k==="any"?wt(C.slice(1)):k==="all"?["all"].concat(C.slice(1).map(rt)):k==="none"?["all"].concat(C.slice(1).map(rt).map(hr)):k==="in"?bt(C[1],C.slice(2)):k==="!in"?hr(bt(C[1],C.slice(2))):k==="has"?kt(C[1]):k==="!has"?hr(kt(C[1])):k==="within"?C:!0;return O}function lt(C,k,O){switch(C){case"$type":return["filter-type-"+O,k];case"$id":return["filter-id-"+O,k];default:return["filter-"+O,C,k]}}function wt(C){return["any"].concat(C.map(rt))}function bt(C,k){if(k.length===0)return!1;switch(C){case"$type":return["filter-type-in",["literal",k]];case"$id":return["filter-id-in",["literal",k]];default:return k.length>200&&!k.some(function(O){return typeof O!=typeof k[0]})?["filter-in-large",C,["literal",k.sort(Ne)]]:["filter-in-small",C,["literal",k]]}}function kt(C){switch(C){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",C]}}function hr(C){return["!",C]}function gr(C){return tc(Mn(C.value))?Zo(dn({},C,{expressionContext:"filter",valueSpec:{value:"boolean"}})):ur(C)}function ur(C){var k=C.value,O=C.key;if(ei(k)!=="array")return[new pr(O,k,"array expected, "+ei(k)+" found")];var te=C.styleSpec,pe,we=[];if(k.length<1)return[new pr(O,k,"filter array must have at least 1 element")];switch(we=we.concat(Ls({key:O+"[0]",value:k[0],valueSpec:te.filter_operator,style:C.style,styleSpec:C.styleSpec})),rn(k[0])){case"<":case"<=":case">":case">=":k.length>=2&&rn(k[1])==="$type"&&we.push(new pr(O,k,'"$type" cannot be use with operator "'+k[0]+'"'));case"==":case"!=":k.length!==3&&we.push(new pr(O,k,'filter array for operator "'+k[0]+'" must have 3 elements'));case"in":case"!in":k.length>=2&&(pe=ei(k[1]),pe!=="string"&&we.push(new pr(O+"[1]",k[1],"string expected, "+pe+" found")));for(var Me=2;Me<k.length;Me++)pe=ei(k[Me]),rn(k[1])==="$type"?we=we.concat(Ls({key:O+"["+Me+"]",value:k[Me],valueSpec:te.geometry_type,style:C.style,styleSpec:C.styleSpec})):pe!=="string"&&pe!=="number"&&pe!=="boolean"&&we.push(new pr(O+"["+Me+"]",k[Me],"string, number, or boolean expected, "+pe+" found"));break;case"any":case"all":case"none":for(var Oe=1;Oe<k.length;Oe++)we=we.concat(ur({key:O+"["+Oe+"]",value:k[Oe],style:C.style,styleSpec:C.styleSpec}));break;case"has":case"!has":pe=ei(k[1]),k.length!==2?we.push(new pr(O,k,'filter array for "'+k[0]+'" operator must have 2 elements')):pe!=="string"&&we.push(new pr(O+"[1]",k[1],"string expected, "+pe+" found"));break;case"within":pe=ei(k[1]),k.length!==2?we.push(new pr(O,k,'filter array for "'+k[0]+'" operator must have 2 elements')):pe!=="object"&&we.push(new pr(O+"[1]",k[1],"object expected, "+pe+" found"));break}return we}function _r(C,k){var O=C.key,te=C.style,pe=C.styleSpec,we=C.value,Me=C.objectKey,Oe=pe[k+"_"+C.layerType];if(!Oe)return[];var tt=Me.match(/^(.*)-transition$/);if(k==="paint"&&tt&&Oe[tt[1]]&&Oe[tt[1]].transition)return gi({key:O,value:we,valueSpec:pe.transition,style:te,styleSpec:pe});var ht=C.valueSpec||Oe[Me];if(!ht)return[new pr(O,we,'unknown property "'+Me+'"')];var gt;if(ei(we)==="string"&&ci(ht)&&!ht.tokens&&(gt=/^{([^}]+)}$/.exec(we)))return[new pr(O,we,'"'+Me+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(gt[1])+" }`.")];var Ot=[];return C.layerType==="symbol"&&(Me==="text-field"&&te&&!te.glyphs&&Ot.push(new pr(O,we,'use of "text-field" requires a style "glyphs" property')),Me==="text-font"&&ga(Mn(we))&&rn(we.type)==="identity"&&Ot.push(new pr(O,we,'"text-font" does not support identity functions'))),Ot.concat(gi({key:C.key,value:we,valueSpec:ht,style:te,styleSpec:pe,expressionContext:"property",propertyType:k,propertyKey:Me}))}function Ir(C){return _r(C,"paint")}function jr(C){return _r(C,"layout")}function tn(C){var k=[],O=C.value,te=C.key,pe=C.style,we=C.styleSpec;!O.type&&!O.ref&&k.push(new pr(te,O,'either "type" or "ref" is required'));var Me=rn(O.type),Oe=rn(O.ref);if(O.id)for(var tt=rn(O.id),ht=0;ht<C.arrayIndex;ht++){var gt=pe.layers[ht];rn(gt.id)===tt&&k.push(new pr(te,O.id,'duplicate layer id "'+O.id+'", previously used at line '+gt.id.__line__))}if("ref"in O){["type","source","source-layer","filter","layout"].forEach(function(yr){yr in O&&k.push(new pr(te,O[yr],'"'+yr+'" is prohibited for ref layers'))});var Ot;pe.layers.forEach(function(yr){rn(yr.id)===Oe&&(Ot=yr)}),Ot?Ot.ref?k.push(new pr(te,O.ref,"ref cannot reference another ref layer")):Me=rn(Ot.type):k.push(new pr(te,O.ref,'ref layer "'+Oe+'" not found'))}else if(Me!=="background")if(!O.source)k.push(new pr(te,O,'missing required property "source"'));else{var nr=pe.sources&&pe.sources[O.source],qt=nr&&rn(nr.type);nr?qt==="vector"&&Me==="raster"?k.push(new pr(te,O.source,'layer "'+O.id+'" requires a raster source')):qt==="raster"&&Me!=="raster"?k.push(new pr(te,O.source,'layer "'+O.id+'" requires a vector source')):qt==="vector"&&!O["source-layer"]?k.push(new pr(te,O,'layer "'+O.id+'" must specify a "source-layer"')):qt==="raster-dem"&&Me!=="hillshade"?k.push(new pr(te,O.source,"raster-dem source can only be used with layer type 'hillshade'.")):Me==="line"&&O.paint&&O.paint["line-gradient"]&&(qt!=="geojson"||!nr.lineMetrics)&&k.push(new pr(te,O,'layer "'+O.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):k.push(new pr(te,O.source,'source "'+O.source+'" not found'))}return k=k.concat(Us({key:te,value:O,valueSpec:we.layer,style:C.style,styleSpec:C.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return gi({key:te+".type",value:O.type,valueSpec:we.layer.type,style:C.style,styleSpec:C.styleSpec,object:O,objectKey:"type"})},filter:gr,layout:function(Or){return Us({layer:O,key:Or.key,value:Or.value,style:Or.style,styleSpec:Or.styleSpec,objectElementValidators:{"*":function(en){return jr(dn({layerType:Me},en))}}})},paint:function(Or){return Us({layer:O,key:Or.key,value:Or.value,style:Or.style,styleSpec:Or.styleSpec,objectElementValidators:{"*":function(en){return Ir(dn({layerType:Me},en))}}})}}})),k}function wn(C){var k=C.value,O=C.key,te=ei(k);return te!=="string"?[new pr(O,k,"string expected, "+te+" found")]:[]}var In={promoteId:ba};function jn(C){var k=C.value,O=C.key,te=C.styleSpec,pe=C.style;if(!k.type)return[new pr(O,k,'"type" is required')];var we=rn(k.type),Me;switch(we){case"vector":case"raster":case"raster-dem":return Me=Us({key:O,value:k,valueSpec:te["source_"+we.replace("-","_")],style:C.style,styleSpec:te,objectElementValidators:In}),Me;case"geojson":if(Me=Us({key:O,value:k,valueSpec:te.source_geojson,style:pe,styleSpec:te,objectElementValidators:In}),k.cluster)for(var Oe in k.clusterProperties){var tt=k.clusterProperties[Oe],ht=tt[0],gt=tt[1],Ot=typeof ht=="string"?[ht,["accumulated"],["get",Oe]]:ht;Me.push.apply(Me,Zo({key:O+"."+Oe+".map",value:gt,expressionContext:"cluster-map"})),Me.push.apply(Me,Zo({key:O+"."+Oe+".reduce",value:Ot,expressionContext:"cluster-reduce"}))}return Me;case"video":return Us({key:O,value:k,valueSpec:te.source_video,style:pe,styleSpec:te});case"image":return Us({key:O,value:k,valueSpec:te.source_image,style:pe,styleSpec:te});case"canvas":return[new pr(O,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ls({key:O+".type",value:k.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:pe,styleSpec:te})}}function ba(C){var k=C.key,O=C.value;if(ei(O)==="string")return wn({key:k,value:O});var te=[];for(var pe in O)te.push.apply(te,wn({key:k+"."+pe,value:O[pe]}));return te}function Ta(C){var k=C.value,O=C.styleSpec,te=O.light,pe=C.style,we=[],Me=ei(k);if(k===void 0)return we;if(Me!=="object")return we=we.concat([new pr("light",k,"object expected, "+Me+" found")]),we;for(var Oe in k){var tt=Oe.match(/^(.*)-transition$/);tt&&te[tt[1]]&&te[tt[1]].transition?we=we.concat(gi({key:Oe,value:k[Oe],valueSpec:O.transition,style:pe,styleSpec:O})):te[Oe]?we=we.concat(gi({key:Oe,value:k[Oe],valueSpec:te[Oe],style:pe,styleSpec:O})):we=we.concat([new pr(Oe,k[Oe],'unknown property "'+Oe+'"')])}return we}function qa(C){return wn(C).length===0?[]:Zo(C)}function ja(C){return wn(C).length===0?[]:Zo(C)}var ai={"*":function(){return[]},array:Gc,boolean:Mc,number:Tc,color:of,constants:an,enum:Ls,filter:gr,function:Ac,layer:tn,object:Us,source:jn,light:Ta,string:wn,formatted:qa,resolvedImage:ja};function gi(C){var k=C.value,O=C.valueSpec,te=C.styleSpec;if(O.expression&&ga(rn(k)))return Ac(C);if(O.expression&&Co(Mn(k)))return Zo(C);if(O.type&&ai[O.type])return ai[O.type](C);var pe=Us(dn({},C,{valueSpec:O.type?te[O.type]:O}));return pe}function po(C){var k=C.value,O=C.key,te=wn(C);return te.length||(k.indexOf("{fontstack}")===-1&&te.push(new pr(O,k,'"glyphs" url must include a "{fontstack}" token')),k.indexOf("{range}")===-1&&te.push(new pr(O,k,'"glyphs" url must include a "{range}" token'))),te}function oi(C,k){k===void 0&&(k=Gt);var O=[];return O=O.concat(gi({key:"",value:C,valueSpec:k.$root,styleSpec:k,style:C,objectElementValidators:{glyphs:po,"*":function(){return[]}}})),C.constants&&(O=O.concat(an({key:"constants",value:C.constants,style:C,styleSpec:k}))),Ji(O)}oi.source=bo(jn),oi.light=bo(Ta),oi.layer=bo(tn),oi.filter=bo(gr),oi.paintProperty=bo(Ir),oi.layoutProperty=bo(jr);function Ji(C){return[].concat(C).sort(function(k,O){return k.line-O.line})}function bo(C){return function(){for(var k=[],O=arguments.length;O--;)k[O]=arguments[O];return Ji(C.apply(this,k))}}var Lo=oi,Si=Lo.light,Pi=Lo.paintProperty,ws=Lo.layoutProperty;function Mo(C,k){var O=!1;if(k&&k.length)for(var te=0,pe=k;te<pe.length;te+=1){var we=pe[te];C.fire(new wr(new Error(we.message))),O=!0}return O}var Ho=le,es=3;function le(C,k,O){var te=this.cells=[];if(C instanceof ArrayBuffer){this.arrayBuffer=C;var pe=new Int32Array(this.arrayBuffer);C=pe[0],k=pe[1],O=pe[2],this.d=k+2*O;for(var we=0;we<this.d*this.d;we++){var Me=pe[es+we],Oe=pe[es+we+1];te.push(Me===Oe?null:pe.subarray(Me,Oe))}var tt=pe[es+te.length],ht=pe[es+te.length+1];this.keys=pe.subarray(tt,ht),this.bboxes=pe.subarray(ht),this.insert=this._insertReadonly}else{this.d=k+2*O;for(var gt=0;gt<this.d*this.d;gt++)te.push([]);this.keys=[],this.bboxes=[]}this.n=k,this.extent=C,this.padding=O,this.scale=k/C,this.uid=0;var Ot=O/k*C;this.min=-Ot,this.max=C+Ot}le.prototype.insert=function(C,k,O,te,pe){this._forEachCell(k,O,te,pe,this._insertCell,this.uid++),this.keys.push(C),this.bboxes.push(k),this.bboxes.push(O),this.bboxes.push(te),this.bboxes.push(pe)},le.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},le.prototype._insertCell=function(C,k,O,te,pe,we){this.cells[pe].push(we)},le.prototype.query=function(C,k,O,te,pe){var we=this.min,Me=this.max;if(C<=we&&k<=we&&Me<=O&&Me<=te&&!pe)return Array.prototype.slice.call(this.keys);var Oe=[],tt={};return this._forEachCell(C,k,O,te,this._queryCell,Oe,tt,pe),Oe},le.prototype._queryCell=function(C,k,O,te,pe,we,Me,Oe){var tt=this.cells[pe];if(tt!==null)for(var ht=this.keys,gt=this.bboxes,Ot=0;Ot<tt.length;Ot++){var nr=tt[Ot];if(Me[nr]===void 0){var qt=nr*4;(Oe?Oe(gt[qt+0],gt[qt+1],gt[qt+2],gt[qt+3]):C<=gt[qt+2]&&k<=gt[qt+3]&&O>=gt[qt+0]&&te>=gt[qt+1])?(Me[nr]=!0,we.push(ht[nr])):Me[nr]=!1}}},le.prototype._forEachCell=function(C,k,O,te,pe,we,Me,Oe){for(var tt=this._convertToCellCoord(C),ht=this._convertToCellCoord(k),gt=this._convertToCellCoord(O),Ot=this._convertToCellCoord(te),nr=tt;nr<=gt;nr++)for(var qt=ht;qt<=Ot;qt++){var yr=this.d*qt+nr;if(!(Oe&&!Oe(this._convertFromCellCoord(nr),this._convertFromCellCoord(qt),this._convertFromCellCoord(nr+1),this._convertFromCellCoord(qt+1)))&&pe.call(this,C,k,O,te,yr,we,Me,Oe))return}},le.prototype._convertFromCellCoord=function(C){return(C-this.padding)/this.scale},le.prototype._convertToCellCoord=function(C){return Math.max(0,Math.min(this.d-1,Math.floor(C*this.scale)+this.padding))},le.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var C=this.cells,k=es+this.cells.length+1+1,O=0,te=0;te<this.cells.length;te++)O+=this.cells[te].length;var pe=new Int32Array(k+O+this.keys.length+this.bboxes.length);pe[0]=this.extent,pe[1]=this.n,pe[2]=this.padding;for(var we=k,Me=0;Me<C.length;Me++){var Oe=C[Me];pe[es+Me]=we,pe.set(Oe,we),we+=Oe.length}return pe[es+C.length]=we,pe.set(this.keys,we),we+=this.keys.length,pe[es+C.length+1]=we,pe.set(this.bboxes,we),we+=this.bboxes.length,pe.buffer};var Te=self.ImageData,Re=self.ImageBitmap,Ue={};function Be(C,k,O){O===void 0&&(O={}),Object.defineProperty(k,"_classRegistryKey",{value:C,writeable:!1}),Ue[C]={klass:k,omit:O.omit||[],shallow:O.shallow||[]}}Be("Object",Object),Ho.serialize=function(k,O){var te=k.toArrayBuffer();return O&&O.push(te),{buffer:te}},Ho.deserialize=function(k){return new Ho(k.buffer)},Be("Grid",Ho),Be("Color",xi),Be("Error",Error),Be("ResolvedImage",Io),Be("StylePropertyFunction",cu),Be("StyleExpression",bs,{omit:["_evaluator"]}),Be("ZoomDependentExpression",_s),Be("ZoomConstantExpression",ku),Be("CompoundExpression",Fo,{omit:["_evaluate"]});for(var Qe in qn)qn[Qe]._classRegistryKey||Be("Expression_"+Qe,qn[Qe]);function _t(C){return C&&typeof ArrayBuffer<"u"&&(C instanceof ArrayBuffer||C.constructor&&C.constructor.name==="ArrayBuffer")}function dt(C){return Re&&C instanceof Re}function Rt(C,k){if(C==null||typeof C=="boolean"||typeof C=="number"||typeof C=="string"||C instanceof Boolean||C instanceof Number||C instanceof String||C instanceof Date||C instanceof RegExp)return C;if(_t(C)||dt(C))return k&&k.push(C),C;if(ArrayBuffer.isView(C)){var O=C;return k&&k.push(O.buffer),O}if(C instanceof Te)return k&&k.push(C.data.buffer),C;if(Array.isArray(C)){for(var te=[],pe=0,we=C;pe<we.length;pe+=1){var Me=we[pe];te.push(Rt(Me,k))}return te}if(typeof C=="object"){var Oe=C.constructor,tt=Oe._classRegistryKey;if(!tt)throw new Error("can't serialize object of unregistered class");var ht=Oe.serialize?Oe.serialize(C,k):{};if(!Oe.serialize){for(var gt in C)if(!!C.hasOwnProperty(gt)&&!(Ue[tt].omit.indexOf(gt)>=0)){var Ot=C[gt];ht[gt]=Ue[tt].shallow.indexOf(gt)>=0?Ot:Rt(Ot,k)}C instanceof Error&&(ht.message=C.message)}if(ht.$name)throw new Error("$name property is reserved for worker serialization logic.");return tt!=="Object"&&(ht.$name=tt),ht}throw new Error("can't serialize object of type "+typeof C)}function Jt(C){if(C==null||typeof C=="boolean"||typeof C=="number"||typeof C=="string"||C instanceof Boolean||C instanceof Number||C instanceof String||C instanceof Date||C instanceof RegExp||_t(C)||dt(C)||ArrayBuffer.isView(C)||C instanceof Te)return C;if(Array.isArray(C))return C.map(Jt);if(typeof C=="object"){var k=C.$name||"Object",O=Ue[k],te=O.klass;if(!te)throw new Error("can't deserialize unregistered class "+k);if(te.deserialize)return te.deserialize(C);for(var pe=Object.create(te.prototype),we=0,Me=Object.keys(C);we<Me.length;we+=1){var Oe=Me[we];if(Oe!=="$name"){var tt=C[Oe];pe[Oe]=Ue[k].shallow.indexOf(Oe)>=0?tt:Jt(tt)}}return pe}throw new Error("can't deserialize object of type "+typeof C)}var tr=function(){this.first=!0};tr.prototype.update=function(k,O){var te=Math.floor(k);return this.first?(this.first=!1,this.lastIntegerZoom=te,this.lastIntegerZoomTime=0,this.lastZoom=k,this.lastFloorZoom=te,!0):(this.lastFloorZoom>te?(this.lastIntegerZoom=te+1,this.lastIntegerZoomTime=O):this.lastFloorZoom<te&&(this.lastIntegerZoom=te,this.lastIntegerZoomTime=O),k!==this.lastZoom?(this.lastZoom=k,this.lastFloorZoom=te,!0):!1)};var rr={"Latin-1 Supplement":function(C){return C>=128&&C<=255},Arabic:function(C){return C>=1536&&C<=1791},"Arabic Supplement":function(C){return C>=1872&&C<=1919},"Arabic Extended-A":function(C){return C>=2208&&C<=2303},"Hangul Jamo":function(C){return C>=4352&&C<=4607},"Unified Canadian Aboriginal Syllabics":function(C){return C>=5120&&C<=5759},Khmer:function(C){return C>=6016&&C<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(C){return C>=6320&&C<=6399},"General Punctuation":function(C){return C>=8192&&C<=8303},"Letterlike Symbols":function(C){return C>=8448&&C<=8527},"Number Forms":function(C){return C>=8528&&C<=8591},"Miscellaneous Technical":function(C){return C>=8960&&C<=9215},"Control Pictures":function(C){return C>=9216&&C<=9279},"Optical Character Recognition":function(C){return C>=9280&&C<=9311},"Enclosed Alphanumerics":function(C){return C>=9312&&C<=9471},"Geometric Shapes":function(C){return C>=9632&&C<=9727},"Miscellaneous Symbols":function(C){return C>=9728&&C<=9983},"Miscellaneous Symbols and Arrows":function(C){return C>=11008&&C<=11263},"CJK Radicals Supplement":function(C){return C>=11904&&C<=12031},"Kangxi Radicals":function(C){return C>=12032&&C<=12255},"Ideographic Description Characters":function(C){return C>=12272&&C<=12287},"CJK Symbols and Punctuation":function(C){return C>=12288&&C<=12351},Hiragana:function(C){return C>=12352&&C<=12447},Katakana:function(C){return C>=12448&&C<=12543},Bopomofo:function(C){return C>=12544&&C<=12591},"Hangul Compatibility Jamo":function(C){return C>=12592&&C<=12687},Kanbun:function(C){return C>=12688&&C<=12703},"Bopomofo Extended":function(C){return C>=12704&&C<=12735},"CJK Strokes":function(C){return C>=12736&&C<=12783},"Katakana Phonetic Extensions":function(C){return C>=12784&&C<=12799},"Enclosed CJK Letters and Months":function(C){return C>=12800&&C<=13055},"CJK Compatibility":function(C){return C>=13056&&C<=13311},"CJK Unified Ideographs Extension A":function(C){return C>=13312&&C<=19903},"Yijing Hexagram Symbols":function(C){return C>=19904&&C<=19967},"CJK Unified Ideographs":function(C){return C>=19968&&C<=40959},"Yi Syllables":function(C){return C>=40960&&C<=42127},"Yi Radicals":function(C){return C>=42128&&C<=42191},"Hangul Jamo Extended-A":function(C){return C>=43360&&C<=43391},"Hangul Syllables":function(C){return C>=44032&&C<=55215},"Hangul Jamo Extended-B":function(C){return C>=55216&&C<=55295},"Private Use Area":function(C){return C>=57344&&C<=63743},"CJK Compatibility Ideographs":function(C){return C>=63744&&C<=64255},"Arabic Presentation Forms-A":function(C){return C>=64336&&C<=65023},"Vertical Forms":function(C){return C>=65040&&C<=65055},"CJK Compatibility Forms":function(C){return C>=65072&&C<=65103},"Small Form Variants":function(C){return C>=65104&&C<=65135},"Arabic Presentation Forms-B":function(C){return C>=65136&&C<=65279},"Halfwidth and Fullwidth Forms":function(C){return C>=65280&&C<=65519}};function Er(C){for(var k=0,O=C;k<O.length;k+=1){var te=O[k];if(Vr(te.charCodeAt(0)))return!0}return!1}function qr(C){for(var k=0,O=C;k<O.length;k+=1){var te=O[k];if(!cn(te.charCodeAt(0)))return!1}return!0}function cn(C){return!(rr.Arabic(C)||rr["Arabic Supplement"](C)||rr["Arabic Extended-A"](C)||rr["Arabic Presentation Forms-A"](C)||rr["Arabic Presentation Forms-B"](C))}function Dr(C){return C<11904?!1:!!(rr["Bopomofo Extended"](C)||rr.Bopomofo(C)||rr["CJK Compatibility Forms"](C)||rr["CJK Compatibility Ideographs"](C)||rr["CJK Compatibility"](C)||rr["CJK Radicals Supplement"](C)||rr["CJK Strokes"](C)||rr["CJK Symbols and Punctuation"](C)||rr["CJK Unified Ideographs Extension A"](C)||rr["CJK Unified Ideographs"](C)||rr["Enclosed CJK Letters and Months"](C)||rr["Halfwidth and Fullwidth Forms"](C)||rr.Hiragana(C)||rr["Ideographic Description Characters"](C)||rr["Kangxi Radicals"](C)||rr["Katakana Phonetic Extensions"](C)||rr.Katakana(C)||rr["Vertical Forms"](C)||rr["Yi Radicals"](C)||rr["Yi Syllables"](C))}function Vr(C){return C===746||C===747?!0:C<4352?!1:!!(rr["Bopomofo Extended"](C)||rr.Bopomofo(C)||rr["CJK Compatibility Forms"](C)&&!(C>=65097&&C<=65103)||rr["CJK Compatibility Ideographs"](C)||rr["CJK Compatibility"](C)||rr["CJK Radicals Supplement"](C)||rr["CJK Strokes"](C)||rr["CJK Symbols and Punctuation"](C)&&!(C>=12296&&C<=12305)&&!(C>=12308&&C<=12319)&&C!==12336||rr["CJK Unified Ideographs Extension A"](C)||rr["CJK Unified Ideographs"](C)||rr["Enclosed CJK Letters and Months"](C)||rr["Hangul Compatibility Jamo"](C)||rr["Hangul Jamo Extended-A"](C)||rr["Hangul Jamo Extended-B"](C)||rr["Hangul Jamo"](C)||rr["Hangul Syllables"](C)||rr.Hiragana(C)||rr["Ideographic Description Characters"](C)||rr.Kanbun(C)||rr["Kangxi Radicals"](C)||rr["Katakana Phonetic Extensions"](C)||rr.Katakana(C)&&C!==12540||rr["Halfwidth and Fullwidth Forms"](C)&&C!==65288&&C!==65289&&C!==65293&&!(C>=65306&&C<=65310)&&C!==65339&&C!==65341&&C!==65343&&!(C>=65371&&C<=65503)&&C!==65507&&!(C>=65512&&C<=65519)||rr["Small Form Variants"](C)&&!(C>=65112&&C<=65118)&&!(C>=65123&&C<=65126)||rr["Unified Canadian Aboriginal Syllabics"](C)||rr["Unified Canadian Aboriginal Syllabics Extended"](C)||rr["Vertical Forms"](C)||rr["Yijing Hexagram Symbols"](C)||rr["Yi Syllables"](C)||rr["Yi Radicals"](C))}function Kr(C){return!!(rr["Latin-1 Supplement"](C)&&(C===167||C===169||C===174||C===177||C===188||C===189||C===190||C===215||C===247)||rr["General Punctuation"](C)&&(C===8214||C===8224||C===8225||C===8240||C===8241||C===8251||C===8252||C===8258||C===8263||C===8264||C===8265||C===8273)||rr["Letterlike Symbols"](C)||rr["Number Forms"](C)||rr["Miscellaneous Technical"](C)&&(C>=8960&&C<=8967||C>=8972&&C<=8991||C>=8996&&C<=9e3||C===9003||C>=9085&&C<=9114||C>=9150&&C<=9165||C===9167||C>=9169&&C<=9179||C>=9186&&C<=9215)||rr["Control Pictures"](C)&&C!==9251||rr["Optical Character Recognition"](C)||rr["Enclosed Alphanumerics"](C)||rr["Geometric Shapes"](C)||rr["Miscellaneous Symbols"](C)&&!(C>=9754&&C<=9759)||rr["Miscellaneous Symbols and Arrows"](C)&&(C>=11026&&C<=11055||C>=11088&&C<=11097||C>=11192&&C<=11243)||rr["CJK Symbols and Punctuation"](C)||rr.Katakana(C)||rr["Private Use Area"](C)||rr["CJK Compatibility Forms"](C)||rr["Small Form Variants"](C)||rr["Halfwidth and Fullwidth Forms"](C)||C===8734||C===8756||C===8757||C>=9984&&C<=10087||C>=10102&&C<=10131||C===65532||C===65533)}function sn(C){return!(Vr(C)||Kr(C))}function un(C){return rr.Arabic(C)||rr["Arabic Supplement"](C)||rr["Arabic Extended-A"](C)||rr["Arabic Presentation Forms-A"](C)||rr["Arabic Presentation Forms-B"](C)}function Qr(C){return C>=1424&&C<=2303||rr["Arabic Presentation Forms-A"](C)||rr["Arabic Presentation Forms-B"](C)}function Gn(C,k){return!(!k&&Qr(C)||C>=2304&&C<=3583||C>=3840&&C<=4255||rr.Khmer(C))}function ia(C){for(var k=0,O=C;k<O.length;k+=1){var te=O[k];if(Qr(te.charCodeAt(0)))return!0}return!1}function Ma(C,k){for(var O=0,te=C;O<te.length;O+=1){var pe=te[O];if(!Gn(pe.charCodeAt(0),k))return!1}return!0}var la={unavailable:"unavailable",deferred:"deferred",loading:"loading",loaded:"loaded",error:"error"},Pa=null,fa=la.unavailable,Ga=null,Fa=function(C){C&&typeof C=="string"&&C.indexOf("NetworkError")>-1&&(fa=la.error),Pa&&Pa(C)};function ri(){Ti.fire(new kr("pluginStateChange",{pluginStatus:fa,pluginURL:Ga}))}var Ti=new Sr,_o=function(){return fa},Hi=function(C){return C({pluginStatus:fa,pluginURL:Ga}),Ti.on("pluginStateChange",C),C},va=function(C,k,O){if(O===void 0&&(O=!1),fa===la.deferred||fa===la.loading||fa===la.loaded)throw new Error("setRTLTextPlugin cannot be called multiple times.");Ga=$.resolveURL(C),fa=la.deferred,Pa=k,ri(),O||li()},li=function(){if(fa!==la.deferred||!Ga)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");fa=la.loading,ri(),Ga&&ct({url:Ga},function(C){C?Fa(C):(fa=la.loaded,ri())})},Ja={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return fa===la.loaded||Ja.applyArabicShaping!=null},isLoading:function(){return fa===la.loading},setState:function(k){fa=k.pluginStatus,Ga=k.pluginURL},isParsed:function(){return Ja.applyArabicShaping!=null&&Ja.processBidirectionalText!=null&&Ja.processStyledBidirectionalText!=null},getPluginURL:function(){return Ga}},Di=function(){!Ja.isLoading()&&!Ja.isLoaded()&&_o()==="deferred"&&li()},fi=function(k,O){this.zoom=k,O?(this.now=O.now,this.fadeDuration=O.fadeDuration,this.zoomHistory=O.zoomHistory,this.transition=O.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new tr,this.transition={})};fi.prototype.isSupportedScript=function(k){return Ma(k,Ja.isLoaded())},fi.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},fi.prototype.getCrossfadeParameters=function(){var k=this.zoom,O=k-Math.floor(k),te=this.crossFadingFactor();return k>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:O+(1-O)*te}:{fromScale:.5,toScale:1,t:1-(1-te)*O}};var go=function(k,O){this.property=k,this.value=O,this.expression=Ff(O===void 0?k.specification.default:O,k.specification)};go.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},go.prototype.possiblyEvaluate=function(k,O,te){return this.property.possiblyEvaluate(this,k,O,te)};var oo=function(k){this.property=k,this.value=new go(k,void 0)};oo.prototype.transitioned=function(k,O){return new ts(this.property,this.value,O,M({},k.transition,this.transition),k.now)},oo.prototype.untransitioned=function(){return new ts(this.property,this.value,null,{},0)};var So=function(k){this._properties=k,this._values=Object.create(k.defaultTransitionablePropertyValues)};So.prototype.getValue=function(k){return I(this._values[k].value.value)},So.prototype.setValue=function(k,O){this._values.hasOwnProperty(k)||(this._values[k]=new oo(this._values[k].property)),this._values[k].value=new go(this._values[k].property,O===null?void 0:I(O))},So.prototype.getTransition=function(k){return I(this._values[k].transition)},So.prototype.setTransition=function(k,O){this._values.hasOwnProperty(k)||(this._values[k]=new oo(this._values[k].property)),this._values[k].transition=I(O)||void 0},So.prototype.serialize=function(){for(var k={},O=0,te=Object.keys(this._values);O<te.length;O+=1){var pe=te[O],we=this.getValue(pe);we!==void 0&&(k[pe]=we);var Me=this.getTransition(pe);Me!==void 0&&(k[pe+"-transition"]=Me)}return k},So.prototype.transitioned=function(k,O){for(var te=new jo(this._properties),pe=0,we=Object.keys(this._values);pe<we.length;pe+=1){var Me=we[pe];te._values[Me]=this._values[Me].transitioned(k,O._values[Me])}return te},So.prototype.untransitioned=function(){for(var k=new jo(this._properties),O=0,te=Object.keys(this._values);O<te.length;O+=1){var pe=te[O];k._values[pe]=this._values[pe].untransitioned()}return k};var ts=function(k,O,te,pe,we){this.property=k,this.value=O,this.begin=we+pe.delay||0,this.end=this.begin+pe.duration||0,k.specification.transition&&(pe.delay||pe.duration)&&(this.prior=te)};ts.prototype.possiblyEvaluate=function(k,O,te){var pe=k.now||0,we=this.value.possiblyEvaluate(k,O,te),Me=this.prior;if(Me){if(pe>this.end)return this.prior=null,we;if(this.value.isDataDriven())return this.prior=null,we;if(pe<this.begin)return Me.possiblyEvaluate(k,O,te);var Oe=(pe-this.begin)/(this.end-this.begin);return this.property.interpolate(Me.possiblyEvaluate(k,O,te),we,b(Oe))}else return we};var jo=function(k){this._properties=k,this._values=Object.create(k.defaultTransitioningPropertyValues)};jo.prototype.possiblyEvaluate=function(k,O,te){for(var pe=new Xi(this._properties),we=0,Me=Object.keys(this._values);we<Me.length;we+=1){var Oe=Me[we];pe._values[Oe]=this._values[Oe].possiblyEvaluate(k,O,te)}return pe},jo.prototype.hasTransition=function(){for(var k=0,O=Object.keys(this._values);k<O.length;k+=1){var te=O[k];if(this._values[te].prior)return!0}return!1};var rs=function(k){this._properties=k,this._values=Object.create(k.defaultPropertyValues)};rs.prototype.getValue=function(k){return I(this._values[k].value)},rs.prototype.setValue=function(k,O){this._values[k]=new go(this._values[k].property,O===null?void 0:I(O))},rs.prototype.serialize=function(){for(var k={},O=0,te=Object.keys(this._values);O<te.length;O+=1){var pe=te[O],we=this.getValue(pe);we!==void 0&&(k[pe]=we)}return k},rs.prototype.possiblyEvaluate=function(k,O,te){for(var pe=new Xi(this._properties),we=0,Me=Object.keys(this._values);we<Me.length;we+=1){var Oe=Me[we];pe._values[Oe]=this._values[Oe].possiblyEvaluate(k,O,te)}return pe};var Qi=function(k,O,te){this.property=k,this.value=O,this.parameters=te};Qi.prototype.isConstant=function(){return this.value.kind==="constant"},Qi.prototype.constantOr=function(k){return this.value.kind==="constant"?this.value.value:k},Qi.prototype.evaluate=function(k,O,te,pe){return this.property.evaluate(this.value,this.parameters,k,O,te,pe)};var Xi=function(k){this._properties=k,this._values=Object.create(k.defaultPossiblyEvaluatedValues)};Xi.prototype.get=function(k){return this._values[k]};var Oa=function(k){this.specification=k};Oa.prototype.possiblyEvaluate=function(k,O){return k.expression.evaluate(O)},Oa.prototype.interpolate=function(k,O,te){var pe=sl[this.specification.type];return pe?pe(k,O,te):k};var Qa=function(k,O){this.specification=k,this.overrides=O};Qa.prototype.possiblyEvaluate=function(k,O,te,pe){return k.expression.kind==="constant"||k.expression.kind==="camera"?new Qi(this,{kind:"constant",value:k.expression.evaluate(O,null,{},te,pe)},O):new Qi(this,k.expression,O)},Qa.prototype.interpolate=function(k,O,te){if(k.value.kind!=="constant"||O.value.kind!=="constant")return k;if(k.value.value===void 0||O.value.value===void 0)return new Qi(this,{kind:"constant",value:void 0},k.parameters);var pe=sl[this.specification.type];return pe?new Qi(this,{kind:"constant",value:pe(k.value.value,O.value.value,te)},k.parameters):k},Qa.prototype.evaluate=function(k,O,te,pe,we,Me){return k.kind==="constant"?k.value:k.evaluate(O,te,pe,we,Me)};var ko=function(C){function k(){C.apply(this,arguments)}return C&&(k.__proto__=C),k.prototype=Object.create(C&&C.prototype),k.prototype.constructor=k,k.prototype.possiblyEvaluate=function(te,pe,we,Me){if(te.value===void 0)return new Qi(this,{kind:"constant",value:void 0},pe);if(te.expression.kind==="constant"){var Oe=te.expression.evaluate(pe,null,{},we,Me),tt=te.property.specification.type==="resolvedImage",ht=tt&&typeof Oe!="string"?Oe.name:Oe,gt=this._calculate(ht,ht,ht,pe);return new Qi(this,{kind:"constant",value:gt},pe)}else if(te.expression.kind==="camera"){var Ot=this._calculate(te.expression.evaluate({zoom:pe.zoom-1}),te.expression.evaluate({zoom:pe.zoom}),te.expression.evaluate({zoom:pe.zoom+1}),pe);return new Qi(this,{kind:"constant",value:Ot},pe)}else return new Qi(this,te.expression,pe)},k.prototype.evaluate=function(te,pe,we,Me,Oe,tt){if(te.kind==="source"){var ht=te.evaluate(pe,we,Me,Oe,tt);return this._calculate(ht,ht,ht,pe)}else return te.kind==="composite"?this._calculate(te.evaluate({zoom:Math.floor(pe.zoom)-1},we,Me),te.evaluate({zoom:Math.floor(pe.zoom)},we,Me),te.evaluate({zoom:Math.floor(pe.zoom)+1},we,Me),pe):te.value},k.prototype._calculate=function(te,pe,we,Me){var Oe=Me.zoom;return Oe>Me.zoomHistory.lastIntegerZoom?{from:te,to:pe}:{from:we,to:pe}},k.prototype.interpolate=function(te){return te},k}(Qa),co=function(k){this.specification=k};co.prototype.possiblyEvaluate=function(k,O,te,pe){if(k.value!==void 0)if(k.expression.kind==="constant"){var we=k.expression.evaluate(O,null,{},te,pe);return this._calculate(we,we,we,O)}else return this._calculate(k.expression.evaluate(new fi(Math.floor(O.zoom-1),O)),k.expression.evaluate(new fi(Math.floor(O.zoom),O)),k.expression.evaluate(new fi(Math.floor(O.zoom+1),O)),O)},co.prototype._calculate=function(k,O,te,pe){var we=pe.zoom;return we>pe.zoomHistory.lastIntegerZoom?{from:k,to:O}:{from:te,to:O}},co.prototype.interpolate=function(k){return k};var Go=function(k){this.specification=k};Go.prototype.possiblyEvaluate=function(k,O,te,pe){return!!k.expression.evaluate(O,null,{},te,pe)},Go.prototype.interpolate=function(){return!1};var eo=function(k){this.properties=k,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(var O in k){var te=k[O];te.specification.overridable&&this.overridableProperties.push(O);var pe=this.defaultPropertyValues[O]=new go(te,void 0),we=this.defaultTransitionablePropertyValues[O]=new oo(te);this.defaultTransitioningPropertyValues[O]=we.untransitioned(),this.defaultPossiblyEvaluatedValues[O]=pe.possiblyEvaluate({})}};Be("DataDrivenProperty",Qa),Be("DataConstantProperty",Oa),Be("CrossFadedDataDrivenProperty",ko),Be("CrossFadedProperty",co),Be("ColorRampProperty",Go);var ns="-transition",Ps=function(C){function k(O,te){if(C.call(this),this.id=O.id,this.type=O.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},O.type!=="custom"&&(O=O,this.metadata=O.metadata,this.minzoom=O.minzoom,this.maxzoom=O.maxzoom,O.type!=="background"&&(this.source=O.source,this.sourceLayer=O["source-layer"],this.filter=O.filter),te.layout&&(this._unevaluatedLayout=new rs(te.layout)),te.paint)){this._transitionablePaint=new So(te.paint);for(var pe in O.paint)this.setPaintProperty(pe,O.paint[pe],{validate:!1});for(var we in O.layout)this.setLayoutProperty(we,O.layout[we],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Xi(te.paint)}}return C&&(k.__proto__=C),k.prototype=Object.create(C&&C.prototype),k.prototype.constructor=k,k.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},k.prototype.getLayoutProperty=function(te){return te==="visibility"?this.visibility:this._unevaluatedLayout.getValue(te)},k.prototype.setLayoutProperty=function(te,pe,we){if(we===void 0&&(we={}),pe!=null){var Me="layers."+this.id+".layout."+te;if(this._validate(ws,Me,te,pe,we))return}if(te==="visibility"){this.visibility=pe;return}this._unevaluatedLayout.setValue(te,pe)},k.prototype.getPaintProperty=function(te){return E(te,ns)?this._transitionablePaint.getTransition(te.slice(0,-ns.length)):this._transitionablePaint.getValue(te)},k.prototype.setPaintProperty=function(te,pe,we){if(we===void 0&&(we={}),pe!=null){var Me="layers."+this.id+".paint."+te;if(this._validate(Pi,Me,te,pe,we))return!1}if(E(te,ns))return this._transitionablePaint.setTransition(te.slice(0,-ns.length),pe||void 0),!1;var Oe=this._transitionablePaint._values[te],tt=Oe.property.specification["property-type"]==="cross-faded-data-driven",ht=Oe.value.isDataDriven(),gt=Oe.value;this._transitionablePaint.setValue(te,pe),this._handleSpecialPaintPropertyUpdate(te);var Ot=this._transitionablePaint._values[te].value,nr=Ot.isDataDriven();return nr||ht||tt||this._handleOverridablePaintPropertyUpdate(te,gt,Ot)},k.prototype._handleSpecialPaintPropertyUpdate=function(te){},k.prototype._handleOverridablePaintPropertyUpdate=function(te,pe,we){return!1},k.prototype.isHidden=function(te){return this.minzoom&&te<this.minzoom||this.maxzoom&&te>=this.maxzoom?!0:this.visibility==="none"},k.prototype.updateTransitions=function(te){this._transitioningPaint=this._transitionablePaint.transitioned(te,this._transitioningPaint)},k.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},k.prototype.recalculate=function(te,pe){te.getCrossfadeParameters&&(this._crossfadeParameters=te.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(te,void 0,pe)),this.paint=this._transitioningPaint.possiblyEvaluate(te,void 0,pe)},k.prototype.serialize=function(){var te={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(te.layout=te.layout||{},te.layout.visibility=this.visibility),F(te,function(pe,we){return pe!==void 0&&!(we==="layout"&&!Object.keys(pe).length)&&!(we==="paint"&&!Object.keys(pe).length)})},k.prototype._validate=function(te,pe,we,Me,Oe){return Oe===void 0&&(Oe={}),Oe&&Oe.validate===!1?!1:Mo(this,te.call(Lo,{key:pe,layerType:this.type,objectKey:we,value:Me,styleSpec:Gt,style:{glyphs:!0,sprite:!0}}))},k.prototype.is3D=function(){return!1},k.prototype.isTileClipped=function(){return!1},k.prototype.hasOffscreenPass=function(){return!1},k.prototype.resize=function(){},k.prototype.isStateDependent=function(){for(var te in this.paint._values){var pe=this.paint.get(te);if(!(!(pe instanceof Qi)||!ci(pe.property.specification))&&(pe.value.kind==="source"||pe.value.kind==="composite")&&pe.value.isStateDependent)return!0}return!1},k}(Sr),fu={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},to=function(k,O){this._structArray=k,this._pos1=O*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},sf=128,Wl=5,Wi=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};Wi.serialize=function(k,O){return k._trim(),O&&(k.isTransferred=!0,O.push(k.arrayBuffer)),{length:k.length,arrayBuffer:k.arrayBuffer}},Wi.deserialize=function(k){var O=Object.create(this.prototype);return O.arrayBuffer=k.arrayBuffer,O.length=k.length,O.capacity=k.arrayBuffer.byteLength/O.bytesPerElement,O._refreshViews(),O},Wi.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Wi.prototype.clear=function(){this.length=0},Wi.prototype.resize=function(k){this.reserve(k),this.length=k},Wi.prototype.reserve=function(k){if(k>this.capacity){this.capacity=Math.max(k,Math.floor(this.capacity*Wl),sf),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var O=this.uint8;this._refreshViews(),O&&this.uint8.set(O)}},Wi.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};function Yo(C,k){k===void 0&&(k=1);var O=0,te=0,pe=C.map(function(Me){var Oe=Rd(Me.type),tt=O=ch(O,Math.max(k,Oe)),ht=Me.components||1;return te=Math.max(te,Oe),O+=Oe*ht,{name:Me.name,type:Me.type,components:ht,offset:tt}}),we=ch(O,Math.max(te,k));return{members:pe,size:we,alignment:k}}function Rd(C){return fu[C].BYTES_PER_ELEMENT}function ch(C,k){return Math.ceil(C/k)*k}var zf=function(C){function k(){C.apply(this,arguments)}return C&&(k.__proto__=C),k.prototype=Object.create(C&&C.prototype),k.prototype.constructor=k,k.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},k.prototype.emplaceBack=function(te,pe){var we=this.length;return this.resize(we+1),this.emplace(we,te,pe)},k.prototype.emplace=function(te,pe,we){var Me=te*2;return this.int16[Me+0]=pe,this.int16[Me+1]=we,te},k}(Wi);zf.prototype.bytesPerElement=4,Be("StructArrayLayout2i4",zf);var Ec=function(C){function k(){C.apply(this,arguments)}return C&&(k.__proto__=C),k.prototype=Object.create(C&&C.prototype),k.prototype.constructor=k,k.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},k.prototype.emplaceBack=function(te,pe,we,Me){var Oe=this.length;return this.resize(Oe+1),this.emplace(Oe,te,pe,we,Me)},k.prototype.emplace=function(te,pe,we,Me,Oe){var tt=te*4;return this.int16[tt+0]=pe,this.int16[tt+1]=we,this.int16[tt+2]=Me,this.int16[tt+3]=Oe,te},k}(Wi);Ec.prototype.bytesPerElement=8,Be("StructArrayLayout4i8",Ec);var lf=function(C){function k(){C.apply(this,arguments)}return C&&(k.__proto__=C),k.prototype=Object.create(C&&C.prototype),k.prototype.constructor=k,k.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},k.prototype.emplaceBack=function(te,pe,we,Me,Oe,tt){var ht=this.length;return this.resize(ht+1),this.emplace(ht,te,pe,we,Me,Oe,tt)},k.prototype.emplace=function(te,pe,we,Me,Oe,tt,ht){var gt=te*6;return this.int16[gt+0]=pe,this.int16[gt+1]=we,this.int16[gt+2]=Me,this.int16[gt+3]=Oe,this.int16[gt+4]=tt,this.int16[gt+5]=ht,te},k}(Wi);lf.prototype.bytesPerElement=12,Be("StructArrayLayout2i4i12",lf);var fh=function(C){function k(){C.apply(this,arguments)}return C&&(k.__proto__=C),k.prototype=Object.create(C&&C.prototype),k.prototype.constructor=k,k.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},k.prototype.emplaceBack=function(te,pe,we,Me,Oe,tt){var ht=this.length;return this.resize(ht+1),this.emplace(ht,te,pe,we,Me,Oe,tt)},k.prototype.emplace=function(te,pe,we,Me,Oe,tt,ht){var gt=te*4,Ot=te*8;return this.int16[gt+0]=pe,this.int16[gt+1]=we,this.uint8[Ot+4]=Me,this.uint8[Ot+5]=Oe,this.uint8[Ot+6]=tt,this.uint8[Ot+7]=ht,te},k}(Wi);fh.prototype.bytesPerElement=8,Be("StructArrayLayout2i4ub8",fh);var Qs=function(C){function k(){C.apply(this,arguments)}return C&&(k.__proto__=C),k.prototype=Object.create(C&&C.prototype),k.prototype.constructor=k,k.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},k.prototype.emplaceBack=function(te,pe,we,Me,Oe,tt,ht,gt,Ot,nr){var qt=this.length;return this.resize(qt+1),this.emplace(qt,te,pe,we,Me,Oe,tt,ht,gt,Ot,nr)},k.prototype.emplace=function(te,pe,we,Me,Oe,tt,ht,gt,Ot,nr,qt){var yr=te*9,Or=te*18;return this.uint16[yr+0]=pe,this.uint16[yr+1]=we,this.uint16[yr+2]=Me,this.uint16[yr+3]=Oe,this.uint16[yr+4]=tt,this.uint16[yr+5]=ht,this.uint16[yr+6]=gt,this.uint16[yr+7]=Ot,this.uint8[Or+16]=nr,this.uint8[Or+17]=qt,te},k}(Wi);Qs.prototype.bytesPerElement=18,Be("StructArrayLayout8ui2ub18",Qs);var Cc=function(C){function k(){C.apply(this,arguments)}return C&&(k.__proto__=C),k.prototype=Object.create(C&&C.prototype),k.prototype.constructor=k,k.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},k.prototype.emplaceBack=function(te,pe,we,Me,Oe,tt,ht,gt,Ot,nr,qt,yr){var Or=this.length;return this.resize(Or+1),this.emplace(Or,te,pe,we,Me,Oe,tt,ht,gt,Ot,nr,qt,yr)},k.prototype.emplace=function(te,pe,we,Me,Oe,tt,ht,gt,Ot,nr,qt,yr,Or){var ln=te*12;return this.int16[ln+0]=pe,this.int16[ln+1]=we,this.int16[ln+2]=Me,this.int16[ln+3]=Oe,this.uint16[ln+4]=tt,this.uint16[ln+5]=ht,this.uint16[ln+6]=gt,this.uint16[ln+7]=Ot,this.int16[ln+8]=nr,this.int16[ln+9]=qt,this.int16[ln+10]=yr,this.int16[ln+11]=Or,te},k}(Wi);Cc.prototype.bytesPerElement=24,Be("StructArrayLayout4i4ui4i24",Cc);var cv=function(C){function k(){C.apply(this,arguments)}return C&&(k.__proto__=C),k.prototype=Object.create(C&&C.prototype),k.prototype.constructor=k,k.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},k.prototype.emplaceBack=function(te,pe,we){var Me=this.length;return this.resize(Me+1),this.emplace(Me,te,pe,we)},k.prototype.emplace=function(te,pe,we,Me){var Oe=te*3;return this.float32[Oe+0]=pe,this.float32[Oe+1]=we,this.float32[Oe+2]=Me,te},k}(Wi);cv.prototype.bytesPerElement=12,Be("StructArrayLayout3f12",cv);var fv=function(C){function k(){C.apply(this,arguments)}return C&&(k.__proto__=C),k.prototype=Object.create(C&&C.prototype),k.prototype.constructor=k,k.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},k.prototype.emplaceBack=function(te){var pe=this.length;return this.resize(pe+1),this.emplace(pe,te)},k.prototype.emplace=function(te,pe){var we=te*1;return this.uint32[we+0]=pe,te},k}(Wi);fv.prototype.bytesPerElement=4,Be("StructArrayLayout1ul4",fv);var Nf=function(C){function k(){C.apply(this,arguments)}return C&&(k.__proto__=C),k.prototype=Object.create(C&&C.prototype),k.prototype.constructor=k,k.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},k.prototype.emplaceBack=function(te,pe,we,Me,Oe,tt,ht,gt,Ot){var nr=this.length;return this.resize(nr+1),this.emplace(nr,te,pe,we,Me,Oe,tt,ht,gt,Ot)},k.prototype.emplace=function(te,pe,we,Me,Oe,tt,ht,gt,Ot,nr){var qt=te*10,yr=te*5;return this.int16[qt+0]=pe,this.int16[qt+1]=we,this.int16[qt+2]=Me,this.int16[qt+3]=Oe,this.int16[qt+4]=tt,this.int16[qt+5]=ht,this.uint32[yr+3]=gt,this.uint16[qt+8]=Ot,this.uint16[qt+9]=nr,te},k}(Wi);Nf.prototype.bytesPerElement=20,Be("StructArrayLayout6i1ul2ui20",Nf);var hh=function(C){function k(){C.apply(this,arguments)}return C&&(k.__proto__=C),k.prototype=Object.create(C&&C.prototype),k.prototype.constructor=k,k.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},k.prototype.emplaceBack=function(te,pe,we,Me,Oe,tt){var ht=this.length;return this.resize(ht+1),this.emplace(ht,te,pe,we,Me,Oe,tt)},k.prototype.emplace=function(te,pe,we,Me,Oe,tt,ht){var gt=te*6;return this.int16[gt+0]=pe,this.int16[gt+1]=we,this.int16[gt+2]=Me,this.int16[gt+3]=Oe,this.int16[gt+4]=tt,this.int16[gt+5]=ht,te},k}(Wi);hh.prototype.bytesPerElement=12,Be("StructArrayLayout2i2i2i12",hh);var nc=function(C){function k(){C.apply(this,arguments)}return C&&(k.__proto__=C),k.prototype=Object.create(C&&C.prototype),k.prototype.constructor=k,k.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},k.prototype.emplaceBack=function(te,pe,we,Me,Oe){var tt=this.length;return this.resize(tt+1),this.emplace(tt,te,pe,we,Me,Oe)},k.prototype.emplace=function(te,pe,we,Me,Oe,tt){var ht=te*4,gt=te*8;return this.float32[ht+0]=pe,this.float32[ht+1]=we,this.float32[ht+2]=Me,this.int16[gt+6]=Oe,this.int16[gt+7]=tt,te},k}(Wi);nc.prototype.bytesPerElement=16,Be("StructArrayLayout2f1f2i16",nc);var hl=function(C){function k(){C.apply(this,arguments)}return C&&(k.__proto__=C),k.prototype=Object.create(C&&C.prototype),k.prototype.constructor=k,k.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},k.prototype.emplaceBack=function(te,pe,we,Me){var Oe=this.length;return this.resize(Oe+1),this.emplace(Oe,te,pe,we,Me)},k.prototype.emplace=function(te,pe,we,Me,Oe){var tt=te*12,ht=te*3;return this.uint8[tt+0]=pe,this.uint8[tt+1]=we,this.float32[ht+1]=Me,this.float32[ht+2]=Oe,te},k}(Wi);hl.prototype.bytesPerElement=12,Be("StructArrayLayout2ub2f12",hl);var ac=function(C){function k(){C.apply(this,arguments)}return C&&(k.__proto__=C),k.prototype=Object.create(C&&C.prototype),k.prototype.constructor=k,k.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},k.prototype.emplaceBack=function(te,pe,we){var Me=this.length;return this.resize(Me+1),this.emplace(Me,te,pe,we)},k.prototype.emplace=function(te,pe,we,Me){var Oe=te*3;return this.uint16[Oe+0]=pe,this.uint16[Oe+1]=we,this.uint16[Oe+2]=Me,te},k}(Wi);ac.prototype.bytesPerElement=6,Be("StructArrayLayout3ui6",ac);var Of=function(C){function k(){C.apply(this,arguments)}return C&&(k.__proto__=C),k.prototype=Object.create(C&&C.prototype),k.prototype.constructor=k,k.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},k.prototype.emplaceBack=function(te,pe,we,Me,Oe,tt,ht,gt,Ot,nr,qt,yr,Or,ln,en,kn,bn){var Cn=this.length;return this.resize(Cn+1),this.emplace(Cn,te,pe,we,Me,Oe,tt,ht,gt,Ot,nr,qt,yr,Or,ln,en,kn,bn)},k.prototype.emplace=function(te,pe,we,Me,Oe,tt,ht,gt,Ot,nr,qt,yr,Or,ln,en,kn,bn,Cn){var zn=te*24,Xn=te*12,ua=te*48;return this.int16[zn+0]=pe,this.int16[zn+1]=we,this.uint16[zn+2]=Me,this.uint16[zn+3]=Oe,this.uint32[Xn+2]=tt,this.uint32[Xn+3]=ht,this.uint32[Xn+4]=gt,this.uint16[zn+10]=Ot,this.uint16[zn+11]=nr,this.uint16[zn+12]=qt,this.float32[Xn+7]=yr,this.float32[Xn+8]=Or,this.uint8[ua+36]=ln,this.uint8[ua+37]=en,this.uint8[ua+38]=kn,this.uint32[Xn+10]=bn,this.int16[zn+22]=Cn,te},k}(Wi);Of.prototype.bytesPerElement=48,Be("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Of);var vh=function(C){function k(){C.apply(this,arguments)}return C&&(k.__proto__=C),k.prototype=Object.create(C&&C.prototype),k.prototype.constructor=k,k.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},k.prototype.emplaceBack=function(te,pe,we,Me,Oe,tt,ht,gt,Ot,nr,qt,yr,Or,ln,en,kn,bn,Cn,zn,Xn,ua,oa,Na,Sa,La,ii,Ia,za){var pi=this.length;return this.resize(pi+1),this.emplace(pi,te,pe,we,Me,Oe,tt,ht,gt,Ot,nr,qt,yr,Or,ln,en,kn,bn,Cn,zn,Xn,ua,oa,Na,Sa,La,ii,Ia,za)},k.prototype.emplace=function(te,pe,we,Me,Oe,tt,ht,gt,Ot,nr,qt,yr,Or,ln,en,kn,bn,Cn,zn,Xn,ua,oa,Na,Sa,La,ii,Ia,za,pi){var ni=te*34,Ri=te*17;return this.int16[ni+0]=pe,this.int16[ni+1]=we,this.int16[ni+2]=Me,this.int16[ni+3]=Oe,this.int16[ni+4]=tt,this.int16[ni+5]=ht,this.int16[ni+6]=gt,this.int16[ni+7]=Ot,this.uint16[ni+8]=nr,this.uint16[ni+9]=qt,this.uint16[ni+10]=yr,this.uint16[ni+11]=Or,this.uint16[ni+12]=ln,this.uint16[ni+13]=en,this.uint16[ni+14]=kn,this.uint16[ni+15]=bn,this.uint16[ni+16]=Cn,this.uint16[ni+17]=zn,this.uint16[ni+18]=Xn,this.uint16[ni+19]=ua,this.uint16[ni+20]=oa,this.uint16[ni+21]=Na,this.uint16[ni+22]=Sa,this.uint32[Ri+12]=La,this.float32[Ri+13]=ii,this.float32[Ri+14]=Ia,this.float32[Ri+15]=za,this.float32[Ri+16]=pi,te},k}(Wi);vh.prototype.bytesPerElement=68,Be("StructArrayLayout8i15ui1ul4f68",vh);var uf=function(C){function k(){C.apply(this,arguments)}return C&&(k.__proto__=C),k.prototype=Object.create(C&&C.prototype),k.prototype.constructor=k,k.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},k.prototype.emplaceBack=function(te){var pe=this.length;return this.resize(pe+1),this.emplace(pe,te)},k.prototype.emplace=function(te,pe){var we=te*1;return this.float32[we+0]=pe,te},k}(Wi);uf.prototype.bytesPerElement=4,Be("StructArrayLayout1f4",uf);var hv=function(C){function k(){C.apply(this,arguments)}return C&&(k.__proto__=C),k.prototype=Object.create(C&&C.prototype),k.prototype.constructor=k,k.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},k.prototype.emplaceBack=function(te,pe,we){var Me=this.length;return this.resize(Me+1),this.emplace(Me,te,pe,we)},k.prototype.emplace=function(te,pe,we,Me){var Oe=te*3;return this.int16[Oe+0]=pe,this.int16[Oe+1]=we,this.int16[Oe+2]=Me,te},k}(Wi);hv.prototype.bytesPerElement=6,Be("StructArrayLayout3i6",hv);var kc=function(C){function k(){C.apply(this,arguments)}return C&&(k.__proto__=C),k.prototype=Object.create(C&&C.prototype),k.prototype.constructor=k,k.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},k.prototype.emplaceBack=function(te,pe,we){var Me=this.length;return this.resize(Me+1),this.emplace(Me,te,pe,we)},k.prototype.emplace=function(te,pe,we,Me){var Oe=te*2,tt=te*4;return this.uint32[Oe+0]=pe,this.uint16[tt+2]=we,this.uint16[tt+3]=Me,te},k}(Wi);kc.prototype.bytesPerElement=8,Be("StructArrayLayout1ul2ui8",kc);var Bf=function(C){function k(){C.apply(this,arguments)}return C&&(k.__proto__=C),k.prototype=Object.create(C&&C.prototype),k.prototype.constructor=k,k.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},k.prototype.emplaceBack=function(te,pe){var we=this.length;return this.resize(we+1),this.emplace(we,te,pe)},k.prototype.emplace=function(te,pe,we){var Me=te*2;return this.uint16[Me+0]=pe,this.uint16[Me+1]=we,te},k}(Wi);Bf.prototype.bytesPerElement=4,Be("StructArrayLayout2ui4",Bf);var cf=function(C){function k(){C.apply(this,arguments)}return C&&(k.__proto__=C),k.prototype=Object.create(C&&C.prototype),k.prototype.constructor=k,k.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},k.prototype.emplaceBack=function(te){var pe=this.length;return this.resize(pe+1),this.emplace(pe,te)},k.prototype.emplace=function(te,pe){var we=te*1;return this.uint16[we+0]=pe,te},k}(Wi);cf.prototype.bytesPerElement=2,Be("StructArrayLayout1ui2",cf);var Lc=function(C){function k(){C.apply(this,arguments)}return C&&(k.__proto__=C),k.prototype=Object.create(C&&C.prototype),k.prototype.constructor=k,k.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},k.prototype.emplaceBack=function(te,pe){var we=this.length;return this.resize(we+1),this.emplace(we,te,pe)},k.prototype.emplace=function(te,pe,we){var Me=te*2;return this.float32[Me+0]=pe,this.float32[Me+1]=we,te},k}(Wi);Lc.prototype.bytesPerElement=8,Be("StructArrayLayout2f8",Lc);var vv=function(C){function k(){C.apply(this,arguments)}return C&&(k.__proto__=C),k.prototype=Object.create(C&&C.prototype),k.prototype.constructor=k,k.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},k.prototype.emplaceBack=function(te,pe,we,Me){var Oe=this.length;return this.resize(Oe+1),this.emplace(Oe,te,pe,we,Me)},k.prototype.emplace=function(te,pe,we,Me,Oe){var tt=te*4;return this.float32[tt+0]=pe,this.float32[tt+1]=we,this.float32[tt+2]=Me,this.float32[tt+3]=Oe,te},k}(Wi);vv.prototype.bytesPerElement=16,Be("StructArrayLayout4f16",vv);var np=function(C){function k(){C.apply(this,arguments)}C&&(k.__proto__=C),k.prototype=Object.create(C&&C.prototype),k.prototype.constructor=k;var O={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return O.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},O.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},O.x1.get=function(){return this._structArray.int16[this._pos2+2]},O.y1.get=function(){return this._structArray.int16[this._pos2+3]},O.x2.get=function(){return this._structArray.int16[this._pos2+4]},O.y2.get=function(){return this._structArray.int16[this._pos2+5]},O.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},O.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},O.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},O.anchorPoint.get=function(){return new v(this.anchorPointX,this.anchorPointY)},Object.defineProperties(k.prototype,O),k}(to);np.prototype.size=20;var Pc=function(C){function k(){C.apply(this,arguments)}return C&&(k.__proto__=C),k.prototype=Object.create(C&&C.prototype),k.prototype.constructor=k,k.prototype.get=function(te){return new np(this,te)},k}(Nf);Be("CollisionBoxArray",Pc);var pv=function(C){function k(){C.apply(this,arguments)}C&&(k.__proto__=C),k.prototype=Object.create(C&&C.prototype),k.prototype.constructor=k;var O={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return O.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},O.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},O.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},O.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},O.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},O.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},O.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},O.segment.get=function(){return this._structArray.uint16[this._pos2+10]},O.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},O.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},O.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},O.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},O.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},O.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},O.placedOrientation.set=function(te){this._structArray.uint8[this._pos1+37]=te},O.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},O.hidden.set=function(te){this._structArray.uint8[this._pos1+38]=te},O.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},O.crossTileID.set=function(te){this._structArray.uint32[this._pos4+10]=te},O.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(k.prototype,O),k}(to);pv.prototype.size=48;var ff=function(C){function k(){C.apply(this,arguments)}return C&&(k.__proto__=C),k.prototype=Object.create(C&&C.prototype),k.prototype.constructor=k,k.prototype.get=function(te){return new pv(this,te)},k}(Of);Be("PlacedSymbolArray",ff);var ap=function(C){function k(){C.apply(this,arguments)}C&&(k.__proto__=C),k.prototype=Object.create(C&&C.prototype),k.prototype.constructor=k;var O={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return O.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},O.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},O.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},O.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},O.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},O.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},O.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},O.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},O.key.get=function(){return this._structArray.uint16[this._pos2+8]},O.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},O.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},O.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},O.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},O.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},O.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},O.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},O.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},O.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},O.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},O.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},O.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},O.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},O.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},O.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},O.crossTileID.set=function(te){this._structArray.uint32[this._pos4+12]=te},O.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},O.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},O.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},O.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(k.prototype,O),k}(to);ap.prototype.size=68;var ip=function(C){function k(){C.apply(this,arguments)}return C&&(k.__proto__=C),k.prototype=Object.create(C&&C.prototype),k.prototype.constructor=k,k.prototype.get=function(te){return new ap(this,te)},k}(vh);Be("SymbolInstanceArray",ip);var hu=function(C){function k(){C.apply(this,arguments)}return C&&(k.__proto__=C),k.prototype=Object.create(C&&C.prototype),k.prototype.constructor=k,k.prototype.getoffsetX=function(te){return this.float32[te*1+0]},k}(uf);Be("GlyphOffsetArray",hu);var op=function(C){function k(){C.apply(this,arguments)}return C&&(k.__proto__=C),k.prototype=Object.create(C&&C.prototype),k.prototype.constructor=k,k.prototype.getx=function(te){return this.int16[te*3+0]},k.prototype.gety=function(te){return this.int16[te*3+1]},k.prototype.gettileUnitDistanceFromAnchor=function(te){return this.int16[te*3+2]},k}(hv);Be("SymbolLineVertexArray",op);var sp=function(C){function k(){C.apply(this,arguments)}C&&(k.__proto__=C),k.prototype=Object.create(C&&C.prototype),k.prototype.constructor=k;var O={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return O.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},O.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},O.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(k.prototype,O),k}(to);sp.prototype.size=8;var dv=function(C){function k(){C.apply(this,arguments)}return C&&(k.__proto__=C),k.prototype=Object.create(C&&C.prototype),k.prototype.constructor=k,k.prototype.get=function(te){return new sp(this,te)},k}(kc);Be("FeatureIndexArray",dv);var lp=Yo([{name:"a_pos",components:2,type:"Int16"}],4),he=lp.members,W=function(k){k===void 0&&(k=[]),this.segments=k};W.prototype.prepareSegment=function(k,O,te,pe){var we=this.segments[this.segments.length-1];return k>W.MAX_VERTEX_ARRAY_LENGTH&&N("Max vertices per segment is "+W.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+k),(!we||we.vertexLength+k>W.MAX_VERTEX_ARRAY_LENGTH||we.sortKey!==pe)&&(we={vertexOffset:O.length,primitiveOffset:te.length,vertexLength:0,primitiveLength:0},pe!==void 0&&(we.sortKey=pe),this.segments.push(we)),we},W.prototype.get=function(){return this.segments},W.prototype.destroy=function(){for(var k=0,O=this.segments;k<O.length;k+=1){var te=O[k];for(var pe in te.vaos)te.vaos[pe].destroy()}},W.simpleSegment=function(k,O,te,pe){return new W([{vertexOffset:k,primitiveOffset:O,vertexLength:te,primitiveLength:pe,vaos:{},sortKey:0}])},W.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Be("SegmentVector",W);function de(C,k){return C=f(Math.floor(C),0,255),k=f(Math.floor(k),0,255),256*C+k}var J=Yo([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint8"},{name:"a_pixel_ratio_to",components:1,type:"Uint8"}]),ge=a(function(C){function k(O,te){var pe,we,Me,Oe,tt,ht,gt,Ot;for(pe=O.length&3,we=O.length-pe,Me=te,tt=3432918353,ht=461845907,Ot=0;Ot<we;)gt=O.charCodeAt(Ot)&255|(O.charCodeAt(++Ot)&255)<<8|(O.charCodeAt(++Ot)&255)<<16|(O.charCodeAt(++Ot)&255)<<24,++Ot,gt=(gt&65535)*tt+(((gt>>>16)*tt&65535)<<16)&4294967295,gt=gt<<15|gt>>>17,gt=(gt&65535)*ht+(((gt>>>16)*ht&65535)<<16)&4294967295,Me^=gt,Me=Me<<13|Me>>>19,Oe=(Me&65535)*5+(((Me>>>16)*5&65535)<<16)&4294967295,Me=(Oe&65535)+27492+(((Oe>>>16)+58964&65535)<<16);switch(gt=0,pe){case 3:gt^=(O.charCodeAt(Ot+2)&255)<<16;case 2:gt^=(O.charCodeAt(Ot+1)&255)<<8;case 1:gt^=O.charCodeAt(Ot)&255,gt=(gt&65535)*tt+(((gt>>>16)*tt&65535)<<16)&4294967295,gt=gt<<15|gt>>>17,gt=(gt&65535)*ht+(((gt>>>16)*ht&65535)<<16)&4294967295,Me^=gt}return Me^=O.length,Me^=Me>>>16,Me=(Me&65535)*2246822507+(((Me>>>16)*2246822507&65535)<<16)&4294967295,Me^=Me>>>13,Me=(Me&65535)*3266489909+(((Me>>>16)*3266489909&65535)<<16)&4294967295,Me^=Me>>>16,Me>>>0}C.exports=k}),Ce=a(function(C){function k(O,te){for(var pe=O.length,we=te^pe,Me=0,Oe;pe>=4;)Oe=O.charCodeAt(Me)&255|(O.charCodeAt(++Me)&255)<<8|(O.charCodeAt(++Me)&255)<<16|(O.charCodeAt(++Me)&255)<<24,Oe=(Oe&65535)*1540483477+(((Oe>>>16)*1540483477&65535)<<16),Oe^=Oe>>>24,Oe=(Oe&65535)*1540483477+(((Oe>>>16)*1540483477&65535)<<16),we=(we&65535)*1540483477+(((we>>>16)*1540483477&65535)<<16)^Oe,pe-=4,++Me;switch(pe){case 3:we^=(O.charCodeAt(Me+2)&255)<<16;case 2:we^=(O.charCodeAt(Me+1)&255)<<8;case 1:we^=O.charCodeAt(Me)&255,we=(we&65535)*1540483477+(((we>>>16)*1540483477&65535)<<16)}return we^=we>>>13,we=(we&65535)*1540483477+(((we>>>16)*1540483477&65535)<<16),we^=we>>>15,we>>>0}C.exports=k}),Fe=ge,Je=ge,ft=Ce;Fe.murmur3=Je,Fe.murmur2=ft;var Lt=function(){this.ids=[],this.positions=[],this.indexed=!1};Lt.prototype.add=function(k,O,te,pe){this.ids.push(cr(k)),this.positions.push(O,te,pe)},Lt.prototype.getPositions=function(k){for(var O=cr(k),te=0,pe=this.ids.length-1;te<pe;){var we=te+pe>>1;this.ids[we]>=O?pe=we:te=we+1}for(var Me=[];this.ids[te]===O;){var Oe=this.positions[3*te],tt=this.positions[3*te+1],ht=this.positions[3*te+2];Me.push({index:Oe,start:tt,end:ht}),te++}return Me},Lt.serialize=function(k,O){var te=new Float64Array(k.ids),pe=new Uint32Array(k.positions);return dr(te,pe,0,te.length-1),O&&O.push(te.buffer,pe.buffer),{ids:te,positions:pe}},Lt.deserialize=function(k){var O=new Lt;return O.ids=k.ids,O.positions=k.positions,O.indexed=!0,O};var $t=Math.pow(2,53)-1;function cr(C){var k=+C;return!isNaN(k)&&k<=$t?k:Fe(String(C))}function dr(C,k,O,te){for(;O<te;){for(var pe=C[O+te>>1],we=O-1,Me=te+1;;){do we++;while(C[we]<pe);do Me--;while(C[Me]>pe);if(we>=Me)break;Pr(C,we,Me),Pr(k,3*we,3*Me),Pr(k,3*we+1,3*Me+1),Pr(k,3*we+2,3*Me+2)}Me-O<te-Me?(dr(C,k,O,Me),O=Me+1):(dr(C,k,Me+1,te),te=Me)}}function Pr(C,k,O){var te=C[k];C[k]=C[O],C[O]=te}Be("FeaturePositionMap",Lt);var Yr=function(k,O){this.gl=k.gl,this.location=O},Xr=function(C){function k(O,te){C.call(this,O,te),this.current=0}return C&&(k.__proto__=C),k.prototype=Object.create(C&&C.prototype),k.prototype.constructor=k,k.prototype.set=function(te){this.current!==te&&(this.current=te,this.gl.uniform1i(this.location,te))},k}(Yr),Hr=function(C){function k(O,te){C.call(this,O,te),this.current=0}return C&&(k.__proto__=C),k.prototype=Object.create(C&&C.prototype),k.prototype.constructor=k,k.prototype.set=function(te){this.current!==te&&(this.current=te,this.gl.uniform1f(this.location,te))},k}(Yr),$r=function(C){function k(O,te){C.call(this,O,te),this.current=[0,0]}return C&&(k.__proto__=C),k.prototype=Object.create(C&&C.prototype),k.prototype.constructor=k,k.prototype.set=function(te){(te[0]!==this.current[0]||te[1]!==this.current[1])&&(this.current=te,this.gl.uniform2f(this.location,te[0],te[1]))},k}(Yr),pn=function(C){function k(O,te){C.call(this,O,te),this.current=[0,0,0]}return C&&(k.__proto__=C),k.prototype=Object.create(C&&C.prototype),k.prototype.constructor=k,k.prototype.set=function(te){(te[0]!==this.current[0]||te[1]!==this.current[1]||te[2]!==this.current[2])&&(this.current=te,this.gl.uniform3f(this.location,te[0],te[1],te[2]))},k}(Yr),Pn=function(C){function k(O,te){C.call(this,O,te),this.current=[0,0,0,0]}return C&&(k.__proto__=C),k.prototype=Object.create(C&&C.prototype),k.prototype.constructor=k,k.prototype.set=function(te){(te[0]!==this.current[0]||te[1]!==this.current[1]||te[2]!==this.current[2]||te[3]!==this.current[3])&&(this.current=te,this.gl.uniform4f(this.location,te[0],te[1],te[2],te[3]))},k}(Yr),On=function(C){function k(O,te){C.call(this,O,te),this.current=xi.transparent}return C&&(k.__proto__=C),k.prototype=Object.create(C&&C.prototype),k.prototype.constructor=k,k.prototype.set=function(te){(te.r!==this.current.r||te.g!==this.current.g||te.b!==this.current.b||te.a!==this.current.a)&&(this.current=te,this.gl.uniform4f(this.location,te.r,te.g,te.b,te.a))},k}(Yr),$n=new Float32Array(16),ra=function(C){function k(O,te){C.call(this,O,te),this.current=$n}return C&&(k.__proto__=C),k.prototype=Object.create(C&&C.prototype),k.prototype.constructor=k,k.prototype.set=function(te){if(te[12]!==this.current[12]||te[0]!==this.current[0]){this.current=te,this.gl.uniformMatrix4fv(this.location,!1,te);return}for(var pe=1;pe<16;pe++)if(te[pe]!==this.current[pe]){this.current=te,this.gl.uniformMatrix4fv(this.location,!1,te);break}},k}(Yr);function ea(C){return[de(255*C.r,255*C.g),de(255*C.b,255*C.a)]}var pa=function(k,O,te){this.value=k,this.uniformNames=O.map(function(pe){return"u_"+pe}),this.type=te};pa.prototype.setUniform=function(k,O,te){k.set(te.constantOr(this.value))},pa.prototype.getBinding=function(k,O,te){return this.type==="color"?new On(k,O):new Hr(k,O)};var Aa=function(k,O){this.uniformNames=O.map(function(te){return"u_"+te}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Aa.prototype.setConstantPatternPositions=function(k,O){this.pixelRatioFrom=O.pixelRatio,this.pixelRatioTo=k.pixelRatio,this.patternFrom=O.tlbr,this.patternTo=k.tlbr},Aa.prototype.setUniform=function(k,O,te,pe){var we=pe==="u_pattern_to"?this.patternTo:pe==="u_pattern_from"?this.patternFrom:pe==="u_pixel_ratio_to"?this.pixelRatioTo:pe==="u_pixel_ratio_from"?this.pixelRatioFrom:null;we&&k.set(we)},Aa.prototype.getBinding=function(k,O,te){return te.substr(0,9)==="u_pattern"?new Pn(k,O):new Hr(k,O)};var _a=function(k,O,te,pe){this.expression=k,this.type=te,this.maxValue=0,this.paintVertexAttributes=O.map(function(we){return{name:"a_"+we,type:"Float32",components:te==="color"?2:1,offset:0}}),this.paintVertexArray=new pe};_a.prototype.populatePaintArray=function(k,O,te,pe,we){var Me=this.paintVertexArray.length,Oe=this.expression.evaluate(new fi(0),O,{},pe,[],we);this.paintVertexArray.resize(k),this._setPaintValue(Me,k,Oe)},_a.prototype.updatePaintArray=function(k,O,te,pe){var we=this.expression.evaluate({zoom:0},te,pe);this._setPaintValue(k,O,we)},_a.prototype._setPaintValue=function(k,O,te){if(this.type==="color")for(var pe=ea(te),we=k;we<O;we++)this.paintVertexArray.emplace(we,pe[0],pe[1]);else{for(var Me=k;Me<O;Me++)this.paintVertexArray.emplace(Me,te);this.maxValue=Math.max(this.maxValue,Math.abs(te))}},_a.prototype.upload=function(k){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=k.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},_a.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Ea=function(k,O,te,pe,we,Me){this.expression=k,this.uniformNames=O.map(function(Oe){return"u_"+Oe+"_t"}),this.type=te,this.useIntegerZoom=pe,this.zoom=we,this.maxValue=0,this.paintVertexAttributes=O.map(function(Oe){return{name:"a_"+Oe,type:"Float32",components:te==="color"?4:2,offset:0}}),this.paintVertexArray=new Me};Ea.prototype.populatePaintArray=function(k,O,te,pe,we){var Me=this.expression.evaluate(new fi(this.zoom),O,{},pe,[],we),Oe=this.expression.evaluate(new fi(this.zoom+1),O,{},pe,[],we),tt=this.paintVertexArray.length;this.paintVertexArray.resize(k),this._setPaintValue(tt,k,Me,Oe)},Ea.prototype.updatePaintArray=function(k,O,te,pe){var we=this.expression.evaluate({zoom:this.zoom},te,pe),Me=this.expression.evaluate({zoom:this.zoom+1},te,pe);this._setPaintValue(k,O,we,Me)},Ea.prototype._setPaintValue=function(k,O,te,pe){if(this.type==="color")for(var we=ea(te),Me=ea(pe),Oe=k;Oe<O;Oe++)this.paintVertexArray.emplace(Oe,we[0],we[1],Me[0],Me[1]);else{for(var tt=k;tt<O;tt++)this.paintVertexArray.emplace(tt,te,pe);this.maxValue=Math.max(this.maxValue,Math.abs(te),Math.abs(pe))}},Ea.prototype.upload=function(k){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=k.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ea.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Ea.prototype.setUniform=function(k,O){var te=this.useIntegerZoom?Math.floor(O.zoom):O.zoom,pe=f(this.expression.interpolationFactor(te,this.zoom,this.zoom+1),0,1);k.set(pe)},Ea.prototype.getBinding=function(k,O,te){return new Hr(k,O)};var Ra=function(k,O,te,pe,we,Me){this.expression=k,this.type=O,this.useIntegerZoom=te,this.zoom=pe,this.layerId=Me,this.zoomInPaintVertexArray=new we,this.zoomOutPaintVertexArray=new we};Ra.prototype.populatePaintArray=function(k,O,te){var pe=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(k),this.zoomOutPaintVertexArray.resize(k),this._setPaintValues(pe,k,O.patterns&&O.patterns[this.layerId],te)},Ra.prototype.updatePaintArray=function(k,O,te,pe,we){this._setPaintValues(k,O,te.patterns&&te.patterns[this.layerId],we)},Ra.prototype._setPaintValues=function(k,O,te,pe){if(!(!pe||!te)){var we=te.min,Me=te.mid,Oe=te.max,tt=pe[we],ht=pe[Me],gt=pe[Oe];if(!(!tt||!ht||!gt))for(var Ot=k;Ot<O;Ot++)this.zoomInPaintVertexArray.emplace(Ot,ht.tl[0],ht.tl[1],ht.br[0],ht.br[1],tt.tl[0],tt.tl[1],tt.br[0],tt.br[1],ht.pixelRatio,tt.pixelRatio),this.zoomOutPaintVertexArray.emplace(Ot,ht.tl[0],ht.tl[1],ht.br[0],ht.br[1],gt.tl[0],gt.tl[1],gt.br[0],gt.br[1],ht.pixelRatio,gt.pixelRatio)}},Ra.prototype.upload=function(k){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=k.createVertexBuffer(this.zoomInPaintVertexArray,J.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=k.createVertexBuffer(this.zoomOutPaintVertexArray,J.members,this.expression.isStateDependent))},Ra.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Wa=function(k,O,te,pe){this.binders={},this.layoutAttributes=pe,this._buffers=[];var we=[];for(var Me in k.paint._values)if(!!te(Me)){var Oe=k.paint.get(Me);if(!(!(Oe instanceof Qi)||!ci(Oe.property.specification))){var tt=zi(Me,k.type),ht=Oe.value,gt=Oe.property.specification.type,Ot=Oe.property.useIntegerZoom,nr=Oe.property.specification["property-type"],qt=nr==="cross-faded"||nr==="cross-faded-data-driven";if(ht.kind==="constant")this.binders[Me]=qt?new Aa(ht.value,tt):new pa(ht.value,tt,gt),we.push("/u_"+Me);else if(ht.kind==="source"||qt){var yr=bi(Me,gt,"source");this.binders[Me]=qt?new Ra(ht,gt,Ot,O,yr,k.id):new _a(ht,tt,gt,yr),we.push("/a_"+Me)}else{var Or=bi(Me,gt,"composite");this.binders[Me]=new Ea(ht,tt,gt,Ot,O,Or),we.push("/z_"+Me)}}}this.cacheKey=we.sort().join("")};Wa.prototype.getMaxValue=function(k){var O=this.binders[k];return O instanceof _a||O instanceof Ea?O.maxValue:0},Wa.prototype.populatePaintArrays=function(k,O,te,pe,we){for(var Me in this.binders){var Oe=this.binders[Me];(Oe instanceof _a||Oe instanceof Ea||Oe instanceof Ra)&&Oe.populatePaintArray(k,O,te,pe,we)}},Wa.prototype.setConstantPatternPositions=function(k,O){for(var te in this.binders){var pe=this.binders[te];pe instanceof Aa&&pe.setConstantPatternPositions(k,O)}},Wa.prototype.updatePaintArrays=function(k,O,te,pe,we){var Me=!1;for(var Oe in k)for(var tt=O.getPositions(Oe),ht=0,gt=tt;ht<gt.length;ht+=1){var Ot=gt[ht],nr=te.feature(Ot.index);for(var qt in this.binders){var yr=this.binders[qt];if((yr instanceof _a||yr instanceof Ea||yr instanceof Ra)&&yr.expression.isStateDependent===!0){var Or=pe.paint.get(qt);yr.expression=Or.value,yr.updatePaintArray(Ot.start,Ot.end,nr,k[Oe],we),Me=!0}}}return Me},Wa.prototype.defines=function(){var k=[];for(var O in this.binders){var te=this.binders[O];(te instanceof pa||te instanceof Aa)&&k.push.apply(k,te.uniformNames.map(function(pe){return"#define HAS_UNIFORM_"+pe}))}return k},Wa.prototype.getPaintVertexBuffers=function(){return this._buffers},Wa.prototype.getUniforms=function(k,O){var te=[];for(var pe in this.binders){var we=this.binders[pe];if(we instanceof pa||we instanceof Aa||we instanceof Ea)for(var Me=0,Oe=we.uniformNames;Me<Oe.length;Me+=1){var tt=Oe[Me];if(O[tt]){var ht=we.getBinding(k,O[tt],tt);te.push({name:tt,property:pe,binding:ht})}}}return te},Wa.prototype.setUniforms=function(k,O,te,pe){for(var we=0,Me=O;we<Me.length;we+=1){var Oe=Me[we],tt=Oe.name,ht=Oe.property,gt=Oe.binding;this.binders[ht].setUniform(gt,pe,te.get(ht),tt)}},Wa.prototype.updatePaintBuffers=function(k){this._buffers=[];for(var O in this.binders){var te=this.binders[O];if(k&&te instanceof Ra){var pe=k.fromScale===2?te.zoomInPaintVertexBuffer:te.zoomOutPaintVertexBuffer;pe&&this._buffers.push(pe)}else(te instanceof _a||te instanceof Ea)&&te.paintVertexBuffer&&this._buffers.push(te.paintVertexBuffer)}},Wa.prototype.upload=function(k){for(var O in this.binders){var te=this.binders[O];(te instanceof _a||te instanceof Ea||te instanceof Ra)&&te.upload(k)}this.updatePaintBuffers()},Wa.prototype.destroy=function(){for(var k in this.binders){var O=this.binders[k];(O instanceof _a||O instanceof Ea||O instanceof Ra)&&O.destroy()}};var si=function(k,O,te,pe){pe===void 0&&(pe=function(){return!0}),this.programConfigurations={};for(var we=0,Me=O;we<Me.length;we+=1){var Oe=Me[we];this.programConfigurations[Oe.id]=new Wa(Oe,te,pe,k)}this.needsUpload=!1,this._featureMap=new Lt,this._bufferOffset=0};si.prototype.populatePaintArrays=function(k,O,te,pe,we,Me){for(var Oe in this.programConfigurations)this.programConfigurations[Oe].populatePaintArrays(k,O,pe,we,Me);O.id!==void 0&&this._featureMap.add(O.id,te,this._bufferOffset,k),this._bufferOffset=k,this.needsUpload=!0},si.prototype.updatePaintArrays=function(k,O,te,pe){for(var we=0,Me=te;we<Me.length;we+=1){var Oe=Me[we];this.needsUpload=this.programConfigurations[Oe.id].updatePaintArrays(k,this._featureMap,O,Oe,pe)||this.needsUpload}},si.prototype.get=function(k){return this.programConfigurations[k]},si.prototype.upload=function(k){if(!!this.needsUpload){for(var O in this.programConfigurations)this.programConfigurations[O].upload(k);this.needsUpload=!1}},si.prototype.destroy=function(){for(var k in this.programConfigurations)this.programConfigurations[k].destroy()};function zi(C,k){var O={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]};return O[C]||[C.replace(k+"-","").replace(/-/g,"_")]}function vi(C){var k={"line-pattern":{source:Qs,composite:Qs},"fill-pattern":{source:Qs,composite:Qs},"fill-extrusion-pattern":{source:Qs,composite:Qs}};return k[C]}function bi(C,k,O){var te={color:{source:Lc,composite:vv},number:{source:uf,composite:Lc}},pe=vi(C);return pe&&pe[O]||te[k][O]}Be("ConstantBinder",pa),Be("CrossFadedConstantBinder",Aa),Be("SourceExpressionBinder",_a),Be("CrossFadedCompositeBinder",Ra),Be("CompositeExpressionBinder",Ea),Be("ProgramConfiguration",Wa,{omit:["_buffers"]}),Be("ProgramConfigurationSet",si);var Ha=8192;function Ni(C){return{min:-1*Math.pow(2,C-1),max:Math.pow(2,C-1)-1}}var Gi=Ni(15);function Zi(C){for(var k=Ha/C.extent,O=C.loadGeometry(),te=0;te<O.length;te++)for(var pe=O[te],we=0;we<pe.length;we++){var Me=pe[we];Me.x=Math.round(Me.x*k),Me.y=Math.round(Me.y*k),(Me.x<Gi.min||Me.x>Gi.max||Me.y<Gi.min||Me.y>Gi.max)&&(N("Geometry exceeds allowed extent, reduce your vector tile buffer size"),Me.x=f(Me.x,Gi.min,Gi.max),Me.y=f(Me.y,Gi.min,Gi.max))}return O}function Ei(C,k,O,te,pe){C.emplaceBack(k*2+(te+1)/2,O*2+(pe+1)/2)}var ro=function(k){this.zoom=k.zoom,this.overscaling=k.overscaling,this.layers=k.layers,this.layerIds=this.layers.map(function(O){return O.id}),this.index=k.index,this.hasPattern=!1,this.layoutVertexArray=new zf,this.indexArray=new ac,this.segments=new W,this.programConfigurations=new si(he,k.layers,k.zoom),this.stateDependentLayerIds=this.layers.filter(function(O){return O.isStateDependent()}).map(function(O){return O.id})};ro.prototype.populate=function(k,O,te){var pe=this.layers[0],we=[],Me=null;pe.type==="circle"&&(Me=pe.layout.get("circle-sort-key"));for(var Oe=0,tt=k;Oe<tt.length;Oe+=1){var ht=tt[Oe],gt=ht.feature,Ot=ht.id,nr=ht.index,qt=ht.sourceLayerIndex,yr=this.layers[0]._featureFilter.needGeometry,Or={type:gt.type,id:Ot,properties:gt.properties,geometry:yr?Zi(gt):[]};if(!!this.layers[0]._featureFilter.filter(new fi(this.zoom),Or,te)){yr||(Or.geometry=Zi(gt));var ln=Me?Me.evaluate(Or,{},te):void 0,en={id:Ot,properties:gt.properties,type:gt.type,sourceLayerIndex:qt,index:nr,geometry:Or.geometry,patterns:{},sortKey:ln};we.push(en)}}Me&&we.sort(function(Sa,La){return Sa.sortKey-La.sortKey});for(var kn=0,bn=we;kn<bn.length;kn+=1){var Cn=bn[kn],zn=Cn,Xn=zn.geometry,ua=zn.index,oa=zn.sourceLayerIndex,Na=k[ua].feature;this.addFeature(Cn,Xn,ua,te),O.featureIndex.insert(Na,Xn,ua,oa,this.index)}},ro.prototype.update=function(k,O,te){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(k,O,this.stateDependentLayers,te)},ro.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},ro.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ro.prototype.upload=function(k){this.uploaded||(this.layoutVertexBuffer=k.createVertexBuffer(this.layoutVertexArray,he),this.indexBuffer=k.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(k),this.uploaded=!0},ro.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ro.prototype.addFeature=function(k,O,te,pe){for(var we=0,Me=O;we<Me.length;we+=1)for(var Oe=Me[we],tt=0,ht=Oe;tt<ht.length;tt+=1){var gt=ht[tt],Ot=gt.x,nr=gt.y;if(!(Ot<0||Ot>=Ha||nr<0||nr>=Ha)){var qt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,k.sortKey),yr=qt.vertexLength;Ei(this.layoutVertexArray,Ot,nr,-1,-1),Ei(this.layoutVertexArray,Ot,nr,1,-1),Ei(this.layoutVertexArray,Ot,nr,1,1),Ei(this.layoutVertexArray,Ot,nr,-1,1),this.indexArray.emplaceBack(yr,yr+1,yr+2),this.indexArray.emplaceBack(yr,yr+3,yr+2),qt.vertexLength+=4,qt.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,k,te,{},pe)},Be("CircleBucket",ro,{omit:["layers"]});function ui(C,k){for(var O=0;O<C.length;O++)if($s(k,C[O]))return!0;for(var te=0;te<k.length;te++)if($s(C,k[te]))return!0;return!!Zl(C,k)}function Ci(C,k,O){return!!($s(C,k)||Pu(k,C,O))}function Po(C,k){if(C.length===1)return Du(k,C[0]);for(var O=0;O<k.length;O++)for(var te=k[O],pe=0;pe<te.length;pe++)if($s(C,te[pe]))return!0;for(var we=0;we<C.length;we++)if(Du(k,C[we]))return!0;for(var Me=0;Me<k.length;Me++)if(Zl(C,k[Me]))return!0;return!1}function Ko(C,k,O){for(var te=0;te<k.length;te++){var pe=k[te];if(C.length>=3){for(var we=0;we<pe.length;we++)if($s(C,pe[we]))return!0}if(Xl(C,pe,O))return!0}return!1}function Xl(C,k,O){if(C.length>1){if(Zl(C,k))return!0;for(var te=0;te<k.length;te++)if(Pu(k[te],C,O))return!0}for(var pe=0;pe<C.length;pe++)if(Pu(C[pe],k,O))return!0;return!1}function Zl(C,k){if(C.length===0||k.length===0)return!1;for(var O=0;O<C.length-1;O++)for(var te=C[O],pe=C[O+1],we=0;we<k.length-1;we++){var Me=k[we],Oe=k[we+1];if(Lu(te,pe,Me,Oe))return!0}return!1}function Lu(C,k,O,te){return z(C,O,te)!==z(k,O,te)&&z(C,k,O)!==z(C,k,te)}function Pu(C,k,O){var te=O*O;if(k.length===1)return C.distSqr(k[0])<te;for(var pe=1;pe<k.length;pe++){var we=k[pe-1],Me=k[pe];if(ic(C,we,Me)<te)return!0}return!1}function ic(C,k,O){var te=k.distSqr(O);if(te===0)return C.distSqr(k);var pe=((C.x-k.x)*(O.x-k.x)+(C.y-k.y)*(O.y-k.y))/te;return pe<0?C.distSqr(k):pe>1?C.distSqr(O):C.distSqr(O.sub(k)._mult(pe)._add(k))}function Du(C,k){for(var O=!1,te,pe,we,Me=0;Me<C.length;Me++){te=C[Me];for(var Oe=0,tt=te.length-1;Oe<te.length;tt=Oe++)pe=te[Oe],we=te[tt],pe.y>k.y!=we.y>k.y&&k.x<(we.x-pe.x)*(k.y-pe.y)/(we.y-pe.y)+pe.x&&(O=!O)}return O}function $s(C,k){for(var O=!1,te=0,pe=C.length-1;te<C.length;pe=te++){var we=C[te],Me=C[pe];we.y>k.y!=Me.y>k.y&&k.x<(Me.x-we.x)*(k.y-we.y)/(Me.y-we.y)+we.x&&(O=!O)}return O}function Dc(C,k,O,te,pe){for(var we=0,Me=C;we<Me.length;we+=1){var Oe=Me[we];if(k<=Oe.x&&O<=Oe.y&&te>=Oe.x&&pe>=Oe.y)return!0}var tt=[new v(k,O),new v(k,pe),new v(te,pe),new v(te,O)];if(C.length>2)for(var ht=0,gt=tt;ht<gt.length;ht+=1){var Ot=gt[ht];if($s(C,Ot))return!0}for(var nr=0;nr<C.length-1;nr++){var qt=C[nr],yr=C[nr+1];if(Ds(qt,yr,tt))return!0}return!1}function Ds(C,k,O){var te=O[0],pe=O[2];if(C.x<te.x&&k.x<te.x||C.x>pe.x&&k.x>pe.x||C.y<te.y&&k.y<te.y||C.y>pe.y&&k.y>pe.y)return!1;var we=z(C,k,O[0]);return we!==z(C,k,O[1])||we!==z(C,k,O[2])||we!==z(C,k,O[3])}function kl(C,k,O){var te=k.paint.get(C).value;return te.kind==="constant"?te.value:O.programConfigurations.get(k.id).getMaxValue(C)}function Ru(C){return Math.sqrt(C[0]*C[0]+C[1]*C[1])}function vu(C,k,O,te,pe){if(!k[0]&&!k[1])return C;var we=v.convert(k)._mult(pe);O==="viewport"&&we._rotate(-te);for(var Me=[],Oe=0;Oe<C.length;Oe++){var tt=C[Oe];Me.push(tt.sub(we))}return Me}var Iu=new eo({"circle-sort-key":new Qa(Gt.layout_circle["circle-sort-key"])}),ph=new eo({"circle-radius":new Qa(Gt.paint_circle["circle-radius"]),"circle-color":new Qa(Gt.paint_circle["circle-color"]),"circle-blur":new Qa(Gt.paint_circle["circle-blur"]),"circle-opacity":new Qa(Gt.paint_circle["circle-opacity"]),"circle-translate":new Oa(Gt.paint_circle["circle-translate"]),"circle-translate-anchor":new Oa(Gt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Oa(Gt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Oa(Gt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Qa(Gt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Qa(Gt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Qa(Gt.paint_circle["circle-stroke-opacity"])}),Yc={paint:ph,layout:Iu},Ts=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var C=arguments,k=0,O=arguments.length;O--;)k+=C[O]*C[O];return Math.sqrt(k)});function Uf(){var C=new Ts(4);return Ts!=Float32Array&&(C[1]=0,C[2]=0),C[0]=1,C[3]=1,C}function Vs(C,k,O){var te=k[0],pe=k[1],we=k[2],Me=k[3],Oe=Math.sin(O),tt=Math.cos(O);return C[0]=te*tt+we*Oe,C[1]=pe*tt+Me*Oe,C[2]=te*-Oe+we*tt,C[3]=pe*-Oe+Me*tt,C}function Vf(){var C=new Ts(9);return Ts!=Float32Array&&(C[1]=0,C[2]=0,C[3]=0,C[5]=0,C[6]=0,C[7]=0),C[0]=1,C[4]=1,C[8]=1,C}function dh(C,k){var O=Math.sin(k),te=Math.cos(k);return C[0]=te,C[1]=O,C[2]=0,C[3]=-O,C[4]=te,C[5]=0,C[6]=0,C[7]=0,C[8]=1,C}function gh(){var C=new Ts(16);return Ts!=Float32Array&&(C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[11]=0,C[12]=0,C[13]=0,C[14]=0),C[0]=1,C[5]=1,C[10]=1,C[15]=1,C}function up(C){var k=new Ts(16);return k[0]=C[0],k[1]=C[1],k[2]=C[2],k[3]=C[3],k[4]=C[4],k[5]=C[5],k[6]=C[6],k[7]=C[7],k[8]=C[8],k[9]=C[9],k[10]=C[10],k[11]=C[11],k[12]=C[12],k[13]=C[13],k[14]=C[14],k[15]=C[15],k}function yh(C){return C[0]=1,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=1,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[10]=1,C[11]=0,C[12]=0,C[13]=0,C[14]=0,C[15]=1,C}function hf(C,k){var O=k[0],te=k[1],pe=k[2],we=k[3],Me=k[4],Oe=k[5],tt=k[6],ht=k[7],gt=k[8],Ot=k[9],nr=k[10],qt=k[11],yr=k[12],Or=k[13],ln=k[14],en=k[15],kn=O*Oe-te*Me,bn=O*tt-pe*Me,Cn=O*ht-we*Me,zn=te*tt-pe*Oe,Xn=te*ht-we*Oe,ua=pe*ht-we*tt,oa=gt*Or-Ot*yr,Na=gt*ln-nr*yr,Sa=gt*en-qt*yr,La=Ot*ln-nr*Or,ii=Ot*en-qt*Or,Ia=nr*en-qt*ln,za=kn*Ia-bn*ii+Cn*La+zn*Sa-Xn*Na+ua*oa;return za?(za=1/za,C[0]=(Oe*Ia-tt*ii+ht*La)*za,C[1]=(pe*ii-te*Ia-we*La)*za,C[2]=(Or*ua-ln*Xn+en*zn)*za,C[3]=(nr*Xn-Ot*ua-qt*zn)*za,C[4]=(tt*Sa-Me*Ia-ht*Na)*za,C[5]=(O*Ia-pe*Sa+we*Na)*za,C[6]=(ln*Cn-yr*ua-en*bn)*za,C[7]=(gt*ua-nr*Cn+qt*bn)*za,C[8]=(Me*ii-Oe*Sa+ht*oa)*za,C[9]=(te*Sa-O*ii-we*oa)*za,C[10]=(yr*Xn-Or*Cn+en*kn)*za,C[11]=(Ot*Cn-gt*Xn-qt*kn)*za,C[12]=(Oe*Na-Me*La-tt*oa)*za,C[13]=(O*La-te*Na+pe*oa)*za,C[14]=(Or*bn-yr*zn-ln*kn)*za,C[15]=(gt*zn-Ot*bn+nr*kn)*za,C):null}function vf(C,k,O){var te=k[0],pe=k[1],we=k[2],Me=k[3],Oe=k[4],tt=k[5],ht=k[6],gt=k[7],Ot=k[8],nr=k[9],qt=k[10],yr=k[11],Or=k[12],ln=k[13],en=k[14],kn=k[15],bn=O[0],Cn=O[1],zn=O[2],Xn=O[3];return C[0]=bn*te+Cn*Oe+zn*Ot+Xn*Or,C[1]=bn*pe+Cn*tt+zn*nr+Xn*ln,C[2]=bn*we+Cn*ht+zn*qt+Xn*en,C[3]=bn*Me+Cn*gt+zn*yr+Xn*kn,bn=O[4],Cn=O[5],zn=O[6],Xn=O[7],C[4]=bn*te+Cn*Oe+zn*Ot+Xn*Or,C[5]=bn*pe+Cn*tt+zn*nr+Xn*ln,C[6]=bn*we+Cn*ht+zn*qt+Xn*en,C[7]=bn*Me+Cn*gt+zn*yr+Xn*kn,bn=O[8],Cn=O[9],zn=O[10],Xn=O[11],C[8]=bn*te+Cn*Oe+zn*Ot+Xn*Or,C[9]=bn*pe+Cn*tt+zn*nr+Xn*ln,C[10]=bn*we+Cn*ht+zn*qt+Xn*en,C[11]=bn*Me+Cn*gt+zn*yr+Xn*kn,bn=O[12],Cn=O[13],zn=O[14],Xn=O[15],C[12]=bn*te+Cn*Oe+zn*Ot+Xn*Or,C[13]=bn*pe+Cn*tt+zn*nr+Xn*ln,C[14]=bn*we+Cn*ht+zn*qt+Xn*en,C[15]=bn*Me+Cn*gt+zn*yr+Xn*kn,C}function Oo(C,k,O){var te=O[0],pe=O[1],we=O[2],Me,Oe,tt,ht,gt,Ot,nr,qt,yr,Or,ln,en;return k===C?(C[12]=k[0]*te+k[4]*pe+k[8]*we+k[12],C[13]=k[1]*te+k[5]*pe+k[9]*we+k[13],C[14]=k[2]*te+k[6]*pe+k[10]*we+k[14],C[15]=k[3]*te+k[7]*pe+k[11]*we+k[15]):(Me=k[0],Oe=k[1],tt=k[2],ht=k[3],gt=k[4],Ot=k[5],nr=k[6],qt=k[7],yr=k[8],Or=k[9],ln=k[10],en=k[11],C[0]=Me,C[1]=Oe,C[2]=tt,C[3]=ht,C[4]=gt,C[5]=Ot,C[6]=nr,C[7]=qt,C[8]=yr,C[9]=Or,C[10]=ln,C[11]=en,C[12]=Me*te+gt*pe+yr*we+k[12],C[13]=Oe*te+Ot*pe+Or*we+k[13],C[14]=tt*te+nr*pe+ln*we+k[14],C[15]=ht*te+qt*pe+en*we+k[15]),C}function vl(C,k,O){var te=O[0],pe=O[1],we=O[2];return C[0]=k[0]*te,C[1]=k[1]*te,C[2]=k[2]*te,C[3]=k[3]*te,C[4]=k[4]*pe,C[5]=k[5]*pe,C[6]=k[6]*pe,C[7]=k[7]*pe,C[8]=k[8]*we,C[9]=k[9]*we,C[10]=k[10]*we,C[11]=k[11]*we,C[12]=k[12],C[13]=k[13],C[14]=k[14],C[15]=k[15],C}function pl(C,k,O){var te=Math.sin(O),pe=Math.cos(O),we=k[4],Me=k[5],Oe=k[6],tt=k[7],ht=k[8],gt=k[9],Ot=k[10],nr=k[11];return k!==C&&(C[0]=k[0],C[1]=k[1],C[2]=k[2],C[3]=k[3],C[12]=k[12],C[13]=k[13],C[14]=k[14],C[15]=k[15]),C[4]=we*pe+ht*te,C[5]=Me*pe+gt*te,C[6]=Oe*pe+Ot*te,C[7]=tt*pe+nr*te,C[8]=ht*pe-we*te,C[9]=gt*pe-Me*te,C[10]=Ot*pe-Oe*te,C[11]=nr*pe-tt*te,C}function mh(C,k,O){var te=Math.sin(O),pe=Math.cos(O),we=k[0],Me=k[1],Oe=k[2],tt=k[3],ht=k[4],gt=k[5],Ot=k[6],nr=k[7];return k!==C&&(C[8]=k[8],C[9]=k[9],C[10]=k[10],C[11]=k[11],C[12]=k[12],C[13]=k[13],C[14]=k[14],C[15]=k[15]),C[0]=we*pe+ht*te,C[1]=Me*pe+gt*te,C[2]=Oe*pe+Ot*te,C[3]=tt*pe+nr*te,C[4]=ht*pe-we*te,C[5]=gt*pe-Me*te,C[6]=Ot*pe-Oe*te,C[7]=nr*pe-tt*te,C}function gv(C,k,O,te,pe){var we=1/Math.tan(k/2),Me;return C[0]=we/O,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=we,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[11]=-1,C[12]=0,C[13]=0,C[15]=0,pe!=null&&pe!==1/0?(Me=1/(te-pe),C[10]=(pe+te)*Me,C[14]=2*pe*te*Me):(C[10]=-1,C[14]=-2*te),C}function Id(C,k,O,te,pe,we,Me){var Oe=1/(k-O),tt=1/(te-pe),ht=1/(we-Me);return C[0]=-2*Oe,C[1]=0,C[2]=0,C[3]=0,C[4]=0,C[5]=-2*tt,C[6]=0,C[7]=0,C[8]=0,C[9]=0,C[10]=2*ht,C[11]=0,C[12]=(k+O)*Oe,C[13]=(pe+te)*tt,C[14]=(Me+we)*ht,C[15]=1,C}var Fd=vf;function Hf(){var C=new Ts(3);return Ts!=Float32Array&&(C[0]=0,C[1]=0,C[2]=0),C}function zd(C){var k=new Ts(3);return k[0]=C[0],k[1]=C[1],k[2]=C[2],k}function xh(C,k,O){return C[0]=k[0]+O[0],C[1]=k[1]+O[1],C[2]=k[2]+O[2],C}function Nd(C,k,O){return C[0]=k[0]-O[0],C[1]=k[1]-O[1],C[2]=k[2]-O[2],C}function Od(C,k,O){return C[0]=k[0]*O,C[1]=k[1]*O,C[2]=k[2]*O,C}function yv(C,k){var O=k[0],te=k[1],pe=k[2],we=O*O+te*te+pe*pe;return we>0&&(we=1/Math.sqrt(we)),C[0]=k[0]*we,C[1]=k[1]*we,C[2]=k[2]*we,C}function cb(C,k){return C[0]*k[0]+C[1]*k[1]+C[2]*k[2]}function fb(C,k,O){var te=k[0],pe=k[1],we=k[2],Me=O[0],Oe=O[1],tt=O[2];return C[0]=pe*tt-we*Oe,C[1]=we*Me-te*tt,C[2]=te*Oe-pe*Me,C}function hb(C,k,O){var te=k[0],pe=k[1],we=k[2];return C[0]=te*O[0]+pe*O[3]+we*O[6],C[1]=te*O[1]+pe*O[4]+we*O[7],C[2]=te*O[2]+pe*O[5]+we*O[8],C}var vb=Nd;(function(){var C=Hf();return function(k,O,te,pe,we,Me){var Oe,tt;for(O||(O=3),te||(te=0),pe?tt=Math.min(pe*O+te,k.length):tt=k.length,Oe=te;Oe<tt;Oe+=O)C[0]=k[Oe],C[1]=k[Oe+1],C[2]=k[Oe+2],we(C,C,Me),k[Oe]=C[0],k[Oe+1]=C[1],k[Oe+2]=C[2];return k}})();function pb(){var C=new Ts(4);return Ts!=Float32Array&&(C[0]=0,C[1]=0,C[2]=0,C[3]=0),C}function db(C,k,O){return C[0]=k[0]*O,C[1]=k[1]*O,C[2]=k[2]*O,C[3]=k[3]*O,C}function gb(C,k){return C[0]*k[0]+C[1]*k[1]+C[2]*k[2]+C[3]*k[3]}function cp(C,k,O){var te=k[0],pe=k[1],we=k[2],Me=k[3];return C[0]=O[0]*te+O[4]*pe+O[8]*we+O[12]*Me,C[1]=O[1]*te+O[5]*pe+O[9]*we+O[13]*Me,C[2]=O[2]*te+O[6]*pe+O[10]*we+O[14]*Me,C[3]=O[3]*te+O[7]*pe+O[11]*we+O[15]*Me,C}(function(){var C=pb();return function(k,O,te,pe,we,Me){var Oe,tt;for(O||(O=4),te||(te=0),pe?tt=Math.min(pe*O+te,k.length):tt=k.length,Oe=te;Oe<tt;Oe+=O)C[0]=k[Oe],C[1]=k[Oe+1],C[2]=k[Oe+2],C[3]=k[Oe+3],we(C,C,Me),k[Oe]=C[0],k[Oe+1]=C[1],k[Oe+2]=C[2],k[Oe+3]=C[3];return k}})();function yb(){var C=new Ts(2);return Ts!=Float32Array&&(C[0]=0,C[1]=0),C}function mb(C){var k=C[0],O=C[1];return k*k+O*O}var xb=mb;(function(){var C=yb();return function(k,O,te,pe,we,Me){var Oe,tt;for(O||(O=2),te||(te=0),pe?tt=Math.min(pe*O+te,k.length):tt=k.length,Oe=te;Oe<tt;Oe+=O)C[0]=k[Oe],C[1]=k[Oe+1],we(C,C,Me),k[Oe]=C[0],k[Oe+1]=C[1];return k}})();var bb=function(C){function k(O){C.call(this,O,Yc)}return C&&(k.__proto__=C),k.prototype=Object.create(C&&C.prototype),k.prototype.constructor=k,k.prototype.createBucket=function(te){return new ro(te)},k.prototype.queryRadius=function(te){var pe=te;return kl("circle-radius",this,pe)+kl("circle-stroke-width",this,pe)+Ru(this.paint.get("circle-translate"))},k.prototype.queryIntersectsFeature=function(te,pe,we,Me,Oe,tt,ht,gt){for(var Ot=vu(te,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),tt.angle,ht),nr=this.paint.get("circle-radius").evaluate(pe,we),qt=this.paint.get("circle-stroke-width").evaluate(pe,we),yr=nr+qt,Or=this.paint.get("circle-pitch-alignment")==="map",ln=Or?Ot:_b(Ot,gt),en=Or?yr*ht:yr,kn=0,bn=Me;kn<bn.length;kn+=1)for(var Cn=bn[kn],zn=0,Xn=Cn;zn<Xn.length;zn+=1){var ua=Xn[zn],oa=Or?ua:Fg(ua,gt),Na=en,Sa=cp([],[ua.x,ua.y,0,1],gt);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Na*=Sa[3]/tt.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Na*=tt.cameraToCenterDistance/Sa[3]),Ci(ln,oa,Na))return!0}return!1},k}(Ps);function Fg(C,k){var O=cp([],[C.x,C.y,0,1],k);return new v(O[0]/O[3],O[1]/O[3])}function _b(C,k){return C.map(function(O){return Fg(O,k)})}var zg=function(C){function k(){C.apply(this,arguments)}return C&&(k.__proto__=C),k.prototype=Object.create(C&&C.prototype),k.prototype.constructor=k,k}(ro);Be("HeatmapBucket",zg,{omit:["layers"]});function Bd(C,k,O,te){var pe=k.width,we=k.height;if(!te)te=new Uint8Array(pe*we*O);else if(te instanceof Uint8ClampedArray)te=new Uint8Array(te.buffer);else if(te.length!==pe*we*O)throw new RangeError("mismatched image size");return C.width=pe,C.height=we,C.data=te,C}function Ng(C,k,O){var te=k.width,pe=k.height;if(!(te===C.width&&pe===C.height)){var we=Bd({},{width:te,height:pe},O);Ud(C,we,{x:0,y:0},{x:0,y:0},{width:Math.min(C.width,te),height:Math.min(C.height,pe)},O),C.width=te,C.height=pe,C.data=we.data}}function Ud(C,k,O,te,pe,we){if(pe.width===0||pe.height===0)return k;if(pe.width>C.width||pe.height>C.height||O.x>C.width-pe.width||O.y>C.height-pe.height)throw new RangeError("out of range source coordinates for image copy");if(pe.width>k.width||pe.height>k.height||te.x>k.width-pe.width||te.y>k.height-pe.height)throw new RangeError("out of range destination coordinates for image copy");for(var Me=C.data,Oe=k.data,tt=0;tt<pe.height;tt++)for(var ht=((O.y+tt)*C.width+O.x)*we,gt=((te.y+tt)*k.width+te.x)*we,Ot=0;Ot<pe.width*we;Ot++)Oe[gt+Ot]=Me[ht+Ot];return k}var Gf=function(k,O){Bd(this,k,1,O)};Gf.prototype.resize=function(k){Ng(this,k,1)},Gf.prototype.clone=function(){return new Gf({width:this.width,height:this.height},new Uint8Array(this.data))},Gf.copy=function(k,O,te,pe,we){Ud(k,O,te,pe,we,1)};var dl=function(k,O){Bd(this,k,4,O)};dl.prototype.resize=function(k){Ng(this,k,4)},dl.prototype.replace=function(k,O){O?this.data.set(k):k instanceof Uint8ClampedArray?this.data=new Uint8Array(k.buffer):this.data=k},dl.prototype.clone=function(){return new dl({width:this.width,height:this.height},new Uint8Array(this.data))},dl.copy=function(k,O,te,pe,we){Ud(k,O,te,pe,we,4)},Be("AlphaImage",Gf),Be("RGBAImage",dl);var wb=new eo({"heatmap-radius":new Qa(Gt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Qa(Gt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Oa(Gt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Go(Gt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Oa(Gt.paint_heatmap["heatmap-opacity"])}),Tb={paint:wb};function Og(C,k){for(var O=new Uint8Array(1024),te={},pe=0,we=0;pe<256;pe++,we+=4){te[k]=pe/255;var Me=C.evaluate(te);O[we+0]=Math.floor(Me.r*255/Me.a),O[we+1]=Math.floor(Me.g*255/Me.a),O[we+2]=Math.floor(Me.b*255/Me.a),O[we+3]=Math.floor(Me.a*255)}return new dl({width:256,height:1},O)}var Ab=function(C){function k(O){C.call(this,O,Tb),this._updateColorRamp()}return C&&(k.__proto__=C),k.prototype=Object.create(C&&C.prototype),k.prototype.constructor=k,k.prototype.createBucket=function(te){return new zg(te)},k.prototype._handleSpecialPaintPropertyUpdate=function(te){te==="heatmap-color"&&this._updateColorRamp()},k.prototype._updateColorRamp=function(){var te=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=Og(te,"heatmapDensity"),this.colorRampTexture=null},k.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},k.prototype.queryRadius=function(){return 0},k.prototype.queryIntersectsFeature=function(){return!1},k.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},k}(Ps),Mb=new eo({"hillshade-illumination-direction":new Oa(Gt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Oa(Gt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Oa(Gt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Oa(Gt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Oa(Gt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Oa(Gt.paint_hillshade["hillshade-accent-color"])}),Sb={paint:Mb},Eb=function(C){function k(O){C.call(this,O,Sb)}return C&&(k.__proto__=C),k.prototype=Object.create(C&&C.prototype),k.prototype.constructor=k,k.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},k}(Ps),Cb=Yo([{name:"a_pos",components:2,type:"Int16"}],4),Bg=Cb.members,Vd=fp,kb=fp;function fp(C,k,O){O=O||2;var te=k&&k.length,pe=te?k[0]*O:C.length,we=Ug(C,0,pe,O,!0),Me=[];if(!we||we.next===we.prev)return Me;var Oe,tt,ht,gt,Ot,nr,qt;if(te&&(we=Ib(C,k,we,O)),C.length>80*O){Oe=ht=C[0],tt=gt=C[1];for(var yr=O;yr<pe;yr+=O)Ot=C[yr],nr=C[yr+1],Ot<Oe&&(Oe=Ot),nr<tt&&(tt=nr),Ot>ht&&(ht=Ot),nr>gt&&(gt=nr);qt=Math.max(ht-Oe,gt-tt),qt=qt!==0?1/qt:0}return mv(we,Me,O,Oe,tt,qt),Me}function Ug(C,k,O,te,pe){var we,Me;if(pe===Yd(C,k,O,te)>0)for(we=k;we<O;we+=te)Me=Gg(we,C[we],C[we+1],Me);else for(we=O-te;we>=k;we-=te)Me=Gg(we,C[we],C[we+1],Me);return Me&&hp(Me,Me.next)&&(bv(Me),Me=Me.next),Me}function pf(C,k){if(!C)return C;k||(k=C);var O=C,te;do if(te=!1,!O.steiner&&(hp(O,O.next)||Jo(O.prev,O,O.next)===0)){if(bv(O),O=k=O.prev,O===O.next)break;te=!0}else O=O.next;while(te||O!==k);return k}function mv(C,k,O,te,pe,we,Me){if(!!C){!Me&&we&&Bb(C,te,pe,we);for(var Oe=C,tt,ht;C.prev!==C.next;){if(tt=C.prev,ht=C.next,we?Pb(C,te,pe,we):Lb(C)){k.push(tt.i/O),k.push(C.i/O),k.push(ht.i/O),bv(C),C=ht.next,Oe=ht.next;continue}if(C=ht,C===Oe){Me?Me===1?(C=Db(pf(C),k,O),mv(C,k,O,te,pe,we,2)):Me===2&&Rb(C,k,O,te,pe,we):mv(pf(C),k,O,te,pe,we,1);break}}}}function Lb(C){var k=C.prev,O=C,te=C.next;if(Jo(k,O,te)>=0)return!1;for(var pe=C.next.next;pe!==C.prev;){if(bh(k.x,k.y,O.x,O.y,te.x,te.y,pe.x,pe.y)&&Jo(pe.prev,pe,pe.next)>=0)return!1;pe=pe.next}return!0}function Pb(C,k,O,te){var pe=C.prev,we=C,Me=C.next;if(Jo(pe,we,Me)>=0)return!1;for(var Oe=pe.x<we.x?pe.x<Me.x?pe.x:Me.x:we.x<Me.x?we.x:Me.x,tt=pe.y<we.y?pe.y<Me.y?pe.y:Me.y:we.y<Me.y?we.y:Me.y,ht=pe.x>we.x?pe.x>Me.x?pe.x:Me.x:we.x>Me.x?we.x:Me.x,gt=pe.y>we.y?pe.y>Me.y?pe.y:Me.y:we.y>Me.y?we.y:Me.y,Ot=Hd(Oe,tt,k,O,te),nr=Hd(ht,gt,k,O,te),qt=C.prevZ,yr=C.nextZ;qt&&qt.z>=Ot&&yr&&yr.z<=nr;){if(qt!==C.prev&&qt!==C.next&&bh(pe.x,pe.y,we.x,we.y,Me.x,Me.y,qt.x,qt.y)&&Jo(qt.prev,qt,qt.next)>=0||(qt=qt.prevZ,yr!==C.prev&&yr!==C.next&&bh(pe.x,pe.y,we.x,we.y,Me.x,Me.y,yr.x,yr.y)&&Jo(yr.prev,yr,yr.next)>=0))return!1;yr=yr.nextZ}for(;qt&&qt.z>=Ot;){if(qt!==C.prev&&qt!==C.next&&bh(pe.x,pe.y,we.x,we.y,Me.x,Me.y,qt.x,qt.y)&&Jo(qt.prev,qt,qt.next)>=0)return!1;qt=qt.prevZ}for(;yr&&yr.z<=nr;){if(yr!==C.prev&&yr!==C.next&&bh(pe.x,pe.y,we.x,we.y,Me.x,Me.y,yr.x,yr.y)&&Jo(yr.prev,yr,yr.next)>=0)return!1;yr=yr.nextZ}return!0}function Db(C,k,O){var te=C;do{var pe=te.prev,we=te.next.next;!hp(pe,we)&&Vg(pe,te,te.next,we)&&xv(pe,we)&&xv(we,pe)&&(k.push(pe.i/O),k.push(te.i/O),k.push(we.i/O),bv(te),bv(te.next),te=C=we),te=te.next}while(te!==C);return pf(te)}function Rb(C,k,O,te,pe,we){var Me=C;do{for(var Oe=Me.next.next;Oe!==Me.prev;){if(Me.i!==Oe.i&&Hb(Me,Oe)){var tt=Hg(Me,Oe);Me=pf(Me,Me.next),tt=pf(tt,tt.next),mv(Me,k,O,te,pe,we),mv(tt,k,O,te,pe,we);return}Oe=Oe.next}Me=Me.next}while(Me!==C)}function Ib(C,k,O,te){var pe=[],we,Me,Oe,tt,ht;for(we=0,Me=k.length;we<Me;we++)Oe=k[we]*te,tt=we<Me-1?k[we+1]*te:C.length,ht=Ug(C,Oe,tt,te,!1),ht===ht.next&&(ht.steiner=!0),pe.push(Vb(ht));for(pe.sort(Fb),we=0;we<pe.length;we++)zb(pe[we],O),O=pf(O,O.next);return O}function Fb(C,k){return C.x-k.x}function zb(C,k){if(k=Nb(C,k),k){var O=Hg(k,C);pf(k,k.next),pf(O,O.next)}}function Nb(C,k){var O=k,te=C.x,pe=C.y,we=-1/0,Me;do{if(pe<=O.y&&pe>=O.next.y&&O.next.y!==O.y){var Oe=O.x+(pe-O.y)*(O.next.x-O.x)/(O.next.y-O.y);if(Oe<=te&&Oe>we){if(we=Oe,Oe===te){if(pe===O.y)return O;if(pe===O.next.y)return O.next}Me=O.x<O.next.x?O:O.next}}O=O.next}while(O!==k);if(!Me)return null;if(te===we)return Me;var tt=Me,ht=Me.x,gt=Me.y,Ot=1/0,nr;O=Me;do te>=O.x&&O.x>=ht&&te!==O.x&&bh(pe<gt?te:we,pe,ht,gt,pe<gt?we:te,pe,O.x,O.y)&&(nr=Math.abs(pe-O.y)/(te-O.x),xv(O,C)&&(nr<Ot||nr===Ot&&(O.x>Me.x||O.x===Me.x&&Ob(Me,O)))&&(Me=O,Ot=nr)),O=O.next;while(O!==tt);return Me}function Ob(C,k){return Jo(C.prev,C,k.prev)<0&&Jo(k.next,C,C.next)<0}function Bb(C,k,O,te){var pe=C;do pe.z===null&&(pe.z=Hd(pe.x,pe.y,k,O,te)),pe.prevZ=pe.prev,pe.nextZ=pe.next,pe=pe.next;while(pe!==C);pe.prevZ.nextZ=null,pe.prevZ=null,Ub(pe)}function Ub(C){var k,O,te,pe,we,Me,Oe,tt,ht=1;do{for(O=C,C=null,we=null,Me=0;O;){for(Me++,te=O,Oe=0,k=0;k<ht&&(Oe++,te=te.nextZ,!!te);k++);for(tt=ht;Oe>0||tt>0&&te;)Oe!==0&&(tt===0||!te||O.z<=te.z)?(pe=O,O=O.nextZ,Oe--):(pe=te,te=te.nextZ,tt--),we?we.nextZ=pe:C=pe,pe.prevZ=we,we=pe;O=te}we.nextZ=null,ht*=2}while(Me>1);return C}function Hd(C,k,O,te,pe){return C=32767*(C-O)*pe,k=32767*(k-te)*pe,C=(C|C<<8)&16711935,C=(C|C<<4)&252645135,C=(C|C<<2)&858993459,C=(C|C<<1)&1431655765,k=(k|k<<8)&16711935,k=(k|k<<4)&252645135,k=(k|k<<2)&858993459,k=(k|k<<1)&1431655765,C|k<<1}function Vb(C){var k=C,O=C;do(k.x<O.x||k.x===O.x&&k.y<O.y)&&(O=k),k=k.next;while(k!==C);return O}function bh(C,k,O,te,pe,we,Me,Oe){return(pe-Me)*(k-Oe)-(C-Me)*(we-Oe)>=0&&(C-Me)*(te-Oe)-(O-Me)*(k-Oe)>=0&&(O-Me)*(we-Oe)-(pe-Me)*(te-Oe)>=0}function Hb(C,k){return C.next.i!==k.i&&C.prev.i!==k.i&&!Gb(C,k)&&(xv(C,k)&&xv(k,C)&&Yb(C,k)&&(Jo(C.prev,C,k.prev)||Jo(C,k.prev,k))||hp(C,k)&&Jo(C.prev,C,C.next)>0&&Jo(k.prev,k,k.next)>0)}function Jo(C,k,O){return(k.y-C.y)*(O.x-k.x)-(k.x-C.x)*(O.y-k.y)}function hp(C,k){return C.x===k.x&&C.y===k.y}function Vg(C,k,O,te){var pe=pp(Jo(C,k,O)),we=pp(Jo(C,k,te)),Me=pp(Jo(O,te,C)),Oe=pp(Jo(O,te,k));return!!(pe!==we&&Me!==Oe||pe===0&&vp(C,O,k)||we===0&&vp(C,te,k)||Me===0&&vp(O,C,te)||Oe===0&&vp(O,k,te))}function vp(C,k,O){return k.x<=Math.max(C.x,O.x)&&k.x>=Math.min(C.x,O.x)&&k.y<=Math.max(C.y,O.y)&&k.y>=Math.min(C.y,O.y)}function pp(C){return C>0?1:C<0?-1:0}function Gb(C,k){var O=C;do{if(O.i!==C.i&&O.next.i!==C.i&&O.i!==k.i&&O.next.i!==k.i&&Vg(O,O.next,C,k))return!0;O=O.next}while(O!==C);return!1}function xv(C,k){return Jo(C.prev,C,C.next)<0?Jo(C,k,C.next)>=0&&Jo(C,C.prev,k)>=0:Jo(C,k,C.prev)<0||Jo(C,C.next,k)<0}function Yb(C,k){var O=C,te=!1,pe=(C.x+k.x)/2,we=(C.y+k.y)/2;do O.y>we!=O.next.y>we&&O.next.y!==O.y&&pe<(O.next.x-O.x)*(we-O.y)/(O.next.y-O.y)+O.x&&(te=!te),O=O.next;while(O!==C);return te}function Hg(C,k){var O=new Gd(C.i,C.x,C.y),te=new Gd(k.i,k.x,k.y),pe=C.next,we=k.prev;return C.next=k,k.prev=C,O.next=pe,pe.prev=O,te.next=O,O.prev=te,we.next=te,te.prev=we,te}function Gg(C,k,O,te){var pe=new Gd(C,k,O);return te?(pe.next=te.next,pe.prev=te,te.next.prev=pe,te.next=pe):(pe.prev=pe,pe.next=pe),pe}function bv(C){C.next.prev=C.prev,C.prev.next=C.next,C.prevZ&&(C.prevZ.nextZ=C.nextZ),C.nextZ&&(C.nextZ.prevZ=C.prevZ)}function Gd(C,k,O){this.i=C,this.x=k,this.y=O,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}fp.deviation=function(C,k,O,te){var pe=k&&k.length,we=pe?k[0]*O:C.length,Me=Math.abs(Yd(C,0,we,O));if(pe)for(var Oe=0,tt=k.length;Oe<tt;Oe++){var ht=k[Oe]*O,gt=Oe<tt-1?k[Oe+1]*O:C.length;Me-=Math.abs(Yd(C,ht,gt,O))}var Ot=0;for(Oe=0;Oe<te.length;Oe+=3){var nr=te[Oe]*O,qt=te[Oe+1]*O,yr=te[Oe+2]*O;Ot+=Math.abs((C[nr]-C[yr])*(C[qt+1]-C[nr+1])-(C[nr]-C[qt])*(C[yr+1]-C[nr+1]))}return Me===0&&Ot===0?0:Math.abs((Ot-Me)/Me)};function Yd(C,k,O,te){for(var pe=0,we=k,Me=O-te;we<O;we+=te)pe+=(C[Me]-C[we])*(C[we+1]+C[Me+1]),Me=we;return pe}fp.flatten=function(C){for(var k=C[0][0].length,O={vertices:[],holes:[],dimensions:k},te=0,pe=0;pe<C.length;pe++){for(var we=0;we<C[pe].length;we++)for(var Me=0;Me<k;Me++)O.vertices.push(C[pe][we][Me]);pe>0&&(te+=C[pe-1].length,O.holes.push(te))}return O},Vd.default=kb;function Wb(C,k,O,te,pe){Yg(C,k,O||0,te||C.length-1,pe||Xb)}function Yg(C,k,O,te,pe){for(;te>O;){if(te-O>600){var we=te-O+1,Me=k-O+1,Oe=Math.log(we),tt=.5*Math.exp(2*Oe/3),ht=.5*Math.sqrt(Oe*tt*(we-tt)/we)*(Me-we/2<0?-1:1),gt=Math.max(O,Math.floor(k-Me*tt/we+ht)),Ot=Math.min(te,Math.floor(k+(we-Me)*tt/we+ht));Yg(C,k,gt,Ot,pe)}var nr=C[k],qt=O,yr=te;for(_v(C,O,k),pe(C[te],nr)>0&&_v(C,O,te);qt<yr;){for(_v(C,qt,yr),qt++,yr--;pe(C[qt],nr)<0;)qt++;for(;pe(C[yr],nr)>0;)yr--}pe(C[O],nr)===0?_v(C,O,yr):(yr++,_v(C,yr,te)),yr<=k&&(O=yr+1),k<=yr&&(te=yr-1)}}function _v(C,k,O){var te=C[k];C[k]=C[O],C[O]=te}function Xb(C,k){return C<k?-1:C>k?1:0}function Wd(C,k){var O=C.length;if(O<=1)return[C];for(var te=[],pe,we,Me=0;Me<O;Me++){var Oe=G(C[Me]);Oe!==0&&(C[Me].area=Math.abs(Oe),we===void 0&&(we=Oe<0),we===Oe<0?(pe&&te.push(pe),pe=[C[Me]]):pe.push(C[Me]))}if(pe&&te.push(pe),k>1)for(var tt=0;tt<te.length;tt++)te[tt].length<=k||(Wb(te[tt],k,1,te[tt].length-1,Zb),te[tt]=te[tt].slice(0,k));return te}function Zb(C,k){return k.area-C.area}function Xd(C,k,O){for(var te=O.patternDependencies,pe=!1,we=0,Me=k;we<Me.length;we+=1){var Oe=Me[we],tt=Oe.paint.get(C+"-pattern");tt.isConstant()||(pe=!0);var ht=tt.constantOr(null);ht&&(pe=!0,te[ht.to]=!0,te[ht.from]=!0)}return pe}function Zd(C,k,O,te,pe){for(var we=pe.patternDependencies,Me=0,Oe=k;Me<Oe.length;Me+=1){var tt=Oe[Me],ht=tt.paint.get(C+"-pattern"),gt=ht.value;if(gt.kind!=="constant"){var Ot=gt.evaluate({zoom:te-1},O,{},pe.availableImages),nr=gt.evaluate({zoom:te},O,{},pe.availableImages),qt=gt.evaluate({zoom:te+1},O,{},pe.availableImages);Ot=Ot&&Ot.name?Ot.name:Ot,nr=nr&&nr.name?nr.name:nr,qt=qt&&qt.name?qt.name:qt,we[Ot]=!0,we[nr]=!0,we[qt]=!0,O.patterns[tt.id]={min:Ot,mid:nr,max:qt}}}return O}var jb=500,oc=function(k){this.zoom=k.zoom,this.overscaling=k.overscaling,this.layers=k.layers,this.layerIds=this.layers.map(function(O){return O.id}),this.index=k.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new zf,this.indexArray=new ac,this.indexArray2=new Bf,this.programConfigurations=new si(Bg,k.layers,k.zoom),this.segments=new W,this.segments2=new W,this.stateDependentLayerIds=this.layers.filter(function(O){return O.isStateDependent()}).map(function(O){return O.id})};oc.prototype.populate=function(k,O,te){this.hasPattern=Xd("fill",this.layers,O);for(var pe=this.layers[0].layout.get("fill-sort-key"),we=[],Me=0,Oe=k;Me<Oe.length;Me+=1){var tt=Oe[Me],ht=tt.feature,gt=tt.id,Ot=tt.index,nr=tt.sourceLayerIndex,qt=this.layers[0]._featureFilter.needGeometry,yr={type:ht.type,id:gt,properties:ht.properties,geometry:qt?Zi(ht):[]};if(!!this.layers[0]._featureFilter.filter(new fi(this.zoom),yr,te)){qt||(yr.geometry=Zi(ht));var Or=pe?pe.evaluate(yr,{},te,O.availableImages):void 0,ln={id:gt,properties:ht.properties,type:ht.type,sourceLayerIndex:nr,index:Ot,geometry:yr.geometry,patterns:{},sortKey:Or};we.push(ln)}}pe&&we.sort(function(Sa,La){return Sa.sortKey-La.sortKey});for(var en=0,kn=we;en<kn.length;en+=1){var bn=kn[en],Cn=bn,zn=Cn.geometry,Xn=Cn.index,ua=Cn.sourceLayerIndex;if(this.hasPattern){var oa=Zd("fill",this.layers,bn,this.zoom,O);this.patternFeatures.push(oa)}else this.addFeature(bn,zn,Xn,te,{});var Na=k[Xn].feature;O.featureIndex.insert(Na,zn,Xn,ua,this.index)}},oc.prototype.update=function(k,O,te){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(k,O,this.stateDependentLayers,te)},oc.prototype.addFeatures=function(k,O,te){for(var pe=0,we=this.patternFeatures;pe<we.length;pe+=1){var Me=we[pe];this.addFeature(Me,Me.geometry,Me.index,O,te)}},oc.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},oc.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},oc.prototype.upload=function(k){this.uploaded||(this.layoutVertexBuffer=k.createVertexBuffer(this.layoutVertexArray,Bg),this.indexBuffer=k.createIndexBuffer(this.indexArray),this.indexBuffer2=k.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(k),this.uploaded=!0},oc.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},oc.prototype.addFeature=function(k,O,te,pe,we){for(var Me=0,Oe=Wd(O,jb);Me<Oe.length;Me+=1){for(var tt=Oe[Me],ht=0,gt=0,Ot=tt;gt<Ot.length;gt+=1){var nr=Ot[gt];ht+=nr.length}for(var qt=this.segments.prepareSegment(ht,this.layoutVertexArray,this.indexArray),yr=qt.vertexLength,Or=[],ln=[],en=0,kn=tt;en<kn.length;en+=1){var bn=kn[en];if(bn.length!==0){bn!==tt[0]&&ln.push(Or.length/2);var Cn=this.segments2.prepareSegment(bn.length,this.layoutVertexArray,this.indexArray2),zn=Cn.vertexLength;this.layoutVertexArray.emplaceBack(bn[0].x,bn[0].y),this.indexArray2.emplaceBack(zn+bn.length-1,zn),Or.push(bn[0].x),Or.push(bn[0].y);for(var Xn=1;Xn<bn.length;Xn++)this.layoutVertexArray.emplaceBack(bn[Xn].x,bn[Xn].y),this.indexArray2.emplaceBack(zn+Xn-1,zn+Xn),Or.push(bn[Xn].x),Or.push(bn[Xn].y);Cn.vertexLength+=bn.length,Cn.primitiveLength+=bn.length}}for(var ua=Vd(Or,ln),oa=0;oa<ua.length;oa+=3)this.indexArray.emplaceBack(yr+ua[oa],yr+ua[oa+1],yr+ua[oa+2]);qt.vertexLength+=ht,qt.primitiveLength+=ua.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,k,te,we,pe)},Be("FillBucket",oc,{omit:["layers","patternFeatures"]});var Kb=new eo({"fill-sort-key":new Qa(Gt.layout_fill["fill-sort-key"])}),Jb=new eo({"fill-antialias":new Oa(Gt.paint_fill["fill-antialias"]),"fill-opacity":new Qa(Gt.paint_fill["fill-opacity"]),"fill-color":new Qa(Gt.paint_fill["fill-color"]),"fill-outline-color":new Qa(Gt.paint_fill["fill-outline-color"]),"fill-translate":new Oa(Gt.paint_fill["fill-translate"]),"fill-translate-anchor":new Oa(Gt.paint_fill["fill-translate-anchor"]),"fill-pattern":new ko(Gt.paint_fill["fill-pattern"])}),Qb={paint:Jb,layout:Kb},$b=function(C){function k(O){C.call(this,O,Qb)}return C&&(k.__proto__=C),k.prototype=Object.create(C&&C.prototype),k.prototype.constructor=k,k.prototype.recalculate=function(te,pe){C.prototype.recalculate.call(this,te,pe);var we=this.paint._values["fill-outline-color"];we.value.kind==="constant"&&we.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},k.prototype.createBucket=function(te){return new oc(te)},k.prototype.queryRadius=function(){return Ru(this.paint.get("fill-translate"))},k.prototype.queryIntersectsFeature=function(te,pe,we,Me,Oe,tt,ht){var gt=vu(te,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),tt.angle,ht);return Po(gt,Me)},k.prototype.isTileClipped=function(){return!0},k}(Ps),qb=Yo([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Wg=qb.members,Xg=_h;function _h(C,k,O,te,pe){this.properties={},this.extent=O,this.type=0,this._pbf=C,this._geometry=-1,this._keys=te,this._values=pe,C.readFields(e2,this,k)}function e2(C,k,O){C==1?k.id=O.readVarint():C==2?t2(O,k):C==3?k.type=O.readVarint():C==4&&(k._geometry=O.pos)}function t2(C,k){for(var O=C.readVarint()+C.pos;C.pos<O;){var te=k._keys[C.readVarint()],pe=k._values[C.readVarint()];k.properties[te]=pe}}_h.types=["Unknown","Point","LineString","Polygon"],_h.prototype.loadGeometry=function(){var C=this._pbf;C.pos=this._geometry;for(var k=C.readVarint()+C.pos,O=1,te=0,pe=0,we=0,Me=[],Oe;C.pos<k;){if(te<=0){var tt=C.readVarint();O=tt&7,te=tt>>3}if(te--,O===1||O===2)pe+=C.readSVarint(),we+=C.readSVarint(),O===1&&(Oe&&Me.push(Oe),Oe=[]),Oe.push(new v(pe,we));else if(O===7)Oe&&Oe.push(Oe[0].clone());else throw new Error("unknown command "+O)}return Oe&&Me.push(Oe),Me},_h.prototype.bbox=function(){var C=this._pbf;C.pos=this._geometry;for(var k=C.readVarint()+C.pos,O=1,te=0,pe=0,we=0,Me=1/0,Oe=-1/0,tt=1/0,ht=-1/0;C.pos<k;){if(te<=0){var gt=C.readVarint();O=gt&7,te=gt>>3}if(te--,O===1||O===2)pe+=C.readSVarint(),we+=C.readSVarint(),pe<Me&&(Me=pe),pe>Oe&&(Oe=pe),we<tt&&(tt=we),we>ht&&(ht=we);else if(O!==7)throw new Error("unknown command "+O)}return[Me,tt,Oe,ht]},_h.prototype.toGeoJSON=function(C,k,O){var te=this.extent*Math.pow(2,O),pe=this.extent*C,we=this.extent*k,Me=this.loadGeometry(),Oe=_h.types[this.type],tt,ht;function gt(qt){for(var yr=0;yr<qt.length;yr++){var Or=qt[yr],ln=180-(Or.y+we)*360/te;qt[yr]=[(Or.x+pe)*360/te-180,360/Math.PI*Math.atan(Math.exp(ln*Math.PI/180))-90]}}switch(this.type){case 1:var Ot=[];for(tt=0;tt<Me.length;tt++)Ot[tt]=Me[tt][0];Me=Ot,gt(Me);break;case 2:for(tt=0;tt<Me.length;tt++)gt(Me[tt]);break;case 3:for(Me=r2(Me),tt=0;tt<Me.length;tt++)for(ht=0;ht<Me[tt].length;ht++)gt(Me[tt][ht]);break}Me.length===1?Me=Me[0]:Oe="Multi"+Oe;var nr={type:"Feature",geometry:{type:Oe,coordinates:Me},properties:this.properties};return"id"in this&&(nr.id=this.id),nr};function r2(C){var k=C.length;if(k<=1)return[C];for(var O=[],te,pe,we=0;we<k;we++){var Me=n2(C[we]);Me!==0&&(pe===void 0&&(pe=Me<0),pe===Me<0?(te&&O.push(te),te=[C[we]]):te.push(C[we]))}return te&&O.push(te),O}function n2(C){for(var k=0,O=0,te=C.length,pe=te-1,we,Me;O<te;pe=O++)we=C[O],Me=C[pe],k+=(Me.x-we.x)*(we.y+Me.y);return k}var Zg=jg;function jg(C,k){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=C,this._keys=[],this._values=[],this._features=[],C.readFields(a2,this,k),this.length=this._features.length}function a2(C,k,O){C===15?k.version=O.readVarint():C===1?k.name=O.readString():C===5?k.extent=O.readVarint():C===2?k._features.push(O.pos):C===3?k._keys.push(O.readString()):C===4&&k._values.push(i2(O))}function i2(C){for(var k=null,O=C.readVarint()+C.pos;C.pos<O;){var te=C.readVarint()>>3;k=te===1?C.readString():te===2?C.readFloat():te===3?C.readDouble():te===4?C.readVarint64():te===5?C.readVarint():te===6?C.readSVarint():te===7?C.readBoolean():null}return k}jg.prototype.feature=function(C){if(C<0||C>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[C];var k=this._pbf.readVarint()+this._pbf.pos;return new Xg(this._pbf,k,this.extent,this._keys,this._values)};var o2=s2;function s2(C,k){this.layers=C.readFields(l2,{},k)}function l2(C,k,O){if(C===3){var te=new Zg(O,O.readVarint()+O.pos);te.length&&(k[te.name]=te)}}var u2=o2,c2=Xg,f2=Zg,wh={VectorTile:u2,VectorTileFeature:c2,VectorTileLayer:f2},h2=wh.VectorTileFeature.types,v2=500,jd=Math.pow(2,13);function wv(C,k,O,te,pe,we,Me,Oe){C.emplaceBack(k,O,Math.floor(te*jd)*2+Me,pe*jd*2,we*jd*2,Math.round(Oe))}var sc=function(k){this.zoom=k.zoom,this.overscaling=k.overscaling,this.layers=k.layers,this.layerIds=this.layers.map(function(O){return O.id}),this.index=k.index,this.hasPattern=!1,this.layoutVertexArray=new lf,this.indexArray=new ac,this.programConfigurations=new si(Wg,k.layers,k.zoom),this.segments=new W,this.stateDependentLayerIds=this.layers.filter(function(O){return O.isStateDependent()}).map(function(O){return O.id})};sc.prototype.populate=function(k,O,te){this.features=[],this.hasPattern=Xd("fill-extrusion",this.layers,O);for(var pe=0,we=k;pe<we.length;pe+=1){var Me=we[pe],Oe=Me.feature,tt=Me.id,ht=Me.index,gt=Me.sourceLayerIndex,Ot=this.layers[0]._featureFilter.needGeometry,nr={type:Oe.type,id:tt,properties:Oe.properties,geometry:Ot?Zi(Oe):[]};if(!!this.layers[0]._featureFilter.filter(new fi(this.zoom),nr,te)){var qt={id:tt,sourceLayerIndex:gt,index:ht,geometry:Ot?nr.geometry:Zi(Oe),properties:Oe.properties,type:Oe.type,patterns:{}};typeof Oe.id<"u"&&(qt.id=Oe.id),this.hasPattern?this.features.push(Zd("fill-extrusion",this.layers,qt,this.zoom,O)):this.addFeature(qt,qt.geometry,ht,te,{}),O.featureIndex.insert(Oe,qt.geometry,ht,gt,this.index,!0)}}},sc.prototype.addFeatures=function(k,O,te){for(var pe=0,we=this.features;pe<we.length;pe+=1){var Me=we[pe],Oe=Me.geometry;this.addFeature(Me,Oe,Me.index,O,te)}},sc.prototype.update=function(k,O,te){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(k,O,this.stateDependentLayers,te)},sc.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},sc.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},sc.prototype.upload=function(k){this.uploaded||(this.layoutVertexBuffer=k.createVertexBuffer(this.layoutVertexArray,Wg),this.indexBuffer=k.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(k),this.uploaded=!0},sc.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},sc.prototype.addFeature=function(k,O,te,pe,we){for(var Me=0,Oe=Wd(O,v2);Me<Oe.length;Me+=1){for(var tt=Oe[Me],ht=0,gt=0,Ot=tt;gt<Ot.length;gt+=1){var nr=Ot[gt];ht+=nr.length}for(var qt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),yr=0,Or=tt;yr<Or.length;yr+=1){var ln=Or[yr];if(ln.length!==0&&!d2(ln))for(var en=0,kn=0;kn<ln.length;kn++){var bn=ln[kn];if(kn>=1){var Cn=ln[kn-1];if(!p2(bn,Cn)){qt.vertexLength+4>W.MAX_VERTEX_ARRAY_LENGTH&&(qt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var zn=bn.sub(Cn)._perp()._unit(),Xn=Cn.dist(bn);en+Xn>32768&&(en=0),wv(this.layoutVertexArray,bn.x,bn.y,zn.x,zn.y,0,0,en),wv(this.layoutVertexArray,bn.x,bn.y,zn.x,zn.y,0,1,en),en+=Xn,wv(this.layoutVertexArray,Cn.x,Cn.y,zn.x,zn.y,0,0,en),wv(this.layoutVertexArray,Cn.x,Cn.y,zn.x,zn.y,0,1,en);var ua=qt.vertexLength;this.indexArray.emplaceBack(ua,ua+2,ua+1),this.indexArray.emplaceBack(ua+1,ua+2,ua+3),qt.vertexLength+=4,qt.primitiveLength+=2}}}}if(qt.vertexLength+ht>W.MAX_VERTEX_ARRAY_LENGTH&&(qt=this.segments.prepareSegment(ht,this.layoutVertexArray,this.indexArray)),h2[k.type]==="Polygon"){for(var oa=[],Na=[],Sa=qt.vertexLength,La=0,ii=tt;La<ii.length;La+=1){var Ia=ii[La];if(Ia.length!==0){Ia!==tt[0]&&Na.push(oa.length/2);for(var za=0;za<Ia.length;za++){var pi=Ia[za];wv(this.layoutVertexArray,pi.x,pi.y,0,0,1,1,0),oa.push(pi.x),oa.push(pi.y)}}}for(var ni=Vd(oa,Na),Ri=0;Ri<ni.length;Ri+=3)this.indexArray.emplaceBack(Sa+ni[Ri],Sa+ni[Ri+2],Sa+ni[Ri+1]);qt.primitiveLength+=ni.length/3,qt.vertexLength+=ht}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,k,te,we,pe)},Be("FillExtrusionBucket",sc,{omit:["layers","features"]});function p2(C,k){return C.x===k.x&&(C.x<0||C.x>Ha)||C.y===k.y&&(C.y<0||C.y>Ha)}function d2(C){return C.every(function(k){return k.x<0})||C.every(function(k){return k.x>Ha})||C.every(function(k){return k.y<0})||C.every(function(k){return k.y>Ha})}var g2=new eo({"fill-extrusion-opacity":new Oa(Gt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Qa(Gt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Oa(Gt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Oa(Gt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ko(Gt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Qa(Gt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Qa(Gt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Oa(Gt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])}),y2={paint:g2},m2=function(C){function k(O){C.call(this,O,y2)}return C&&(k.__proto__=C),k.prototype=Object.create(C&&C.prototype),k.prototype.constructor=k,k.prototype.createBucket=function(te){return new sc(te)},k.prototype.queryRadius=function(){return Ru(this.paint.get("fill-extrusion-translate"))},k.prototype.is3D=function(){return!0},k.prototype.queryIntersectsFeature=function(te,pe,we,Me,Oe,tt,ht,gt){var Ot=vu(te,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),tt.angle,ht),nr=this.paint.get("fill-extrusion-height").evaluate(pe,we),qt=this.paint.get("fill-extrusion-base").evaluate(pe,we),yr=_2(Ot,gt,tt,0),Or=b2(Me,qt,nr,gt),ln=Or[0],en=Or[1];return x2(ln,en,yr)},k}(Ps);function Tv(C,k){return C.x*k.x+C.y*k.y}function Kg(C,k){if(C.length===1){for(var O=0,te=k[O++],pe;!pe||te.equals(pe);)if(pe=k[O++],!pe)return 1/0;for(;O<k.length;O++){var we=k[O],Me=C[0],Oe=pe.sub(te),tt=we.sub(te),ht=Me.sub(te),gt=Tv(Oe,Oe),Ot=Tv(Oe,tt),nr=Tv(tt,tt),qt=Tv(ht,Oe),yr=Tv(ht,tt),Or=gt*nr-Ot*Ot,ln=(nr*qt-Ot*yr)/Or,en=(gt*yr-Ot*qt)/Or,kn=1-ln-en,bn=te.z*kn+pe.z*ln+we.z*en;if(isFinite(bn))return bn}return 1/0}else{for(var Cn=1/0,zn=0,Xn=k;zn<Xn.length;zn+=1){var ua=Xn[zn];Cn=Math.min(Cn,ua.z)}return Cn}}function x2(C,k,O){var te=1/0;Po(O,k)&&(te=Kg(O,k[0]));for(var pe=0;pe<k.length;pe++)for(var we=k[pe],Me=C[pe],Oe=0;Oe<we.length-1;Oe++){var tt=we[Oe],ht=we[Oe+1],gt=Me[Oe],Ot=Me[Oe+1],nr=[tt,ht,Ot,gt,tt];ui(O,nr)&&(te=Math.min(te,Kg(O,nr)))}return te===1/0?!1:te}function b2(C,k,O,te){for(var pe=[],we=[],Me=te[8]*k,Oe=te[9]*k,tt=te[10]*k,ht=te[11]*k,gt=te[8]*O,Ot=te[9]*O,nr=te[10]*O,qt=te[11]*O,yr=0,Or=C;yr<Or.length;yr+=1){for(var ln=Or[yr],en=[],kn=[],bn=0,Cn=ln;bn<Cn.length;bn+=1){var zn=Cn[bn],Xn=zn.x,ua=zn.y,oa=te[0]*Xn+te[4]*ua+te[12],Na=te[1]*Xn+te[5]*ua+te[13],Sa=te[2]*Xn+te[6]*ua+te[14],La=te[3]*Xn+te[7]*ua+te[15],ii=oa+Me,Ia=Na+Oe,za=Sa+tt,pi=La+ht,ni=oa+gt,Ri=Na+Ot,qi=Sa+nr,Ii=La+qt,Fi=new v(ii/pi,Ia/pi);Fi.z=za/pi,en.push(Fi);var ki=new v(ni/Ii,Ri/Ii);ki.z=qi/Ii,kn.push(ki)}pe.push(en),we.push(kn)}return[pe,we]}function _2(C,k,O,te){for(var pe=[],we=0,Me=C;we<Me.length;we+=1){var Oe=Me[we],tt=[Oe.x,Oe.y,te,1];cp(tt,tt,k),pe.push(new v(tt[0]/tt[3],tt[1]/tt[3]))}return pe}var w2=Yo([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),Jg=w2.members,T2=wh.VectorTileFeature.types,Qg=63,A2=Math.cos(75/2*(Math.PI/180)),M2=15,S2=20,E2=15,$g=1/2,qg=Math.pow(2,E2-1)/$g,yl=function(k){this.zoom=k.zoom,this.overscaling=k.overscaling,this.layers=k.layers,this.layerIds=this.layers.map(function(O){return O.id}),this.index=k.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new fh,this.indexArray=new ac,this.programConfigurations=new si(Jg,k.layers,k.zoom),this.segments=new W,this.stateDependentLayerIds=this.layers.filter(function(O){return O.isStateDependent()}).map(function(O){return O.id})};yl.prototype.populate=function(k,O,te){this.hasPattern=Xd("line",this.layers,O);for(var pe=this.layers[0].layout.get("line-sort-key"),we=[],Me=0,Oe=k;Me<Oe.length;Me+=1){var tt=Oe[Me],ht=tt.feature,gt=tt.id,Ot=tt.index,nr=tt.sourceLayerIndex,qt=this.layers[0]._featureFilter.needGeometry,yr={type:ht.type,id:gt,properties:ht.properties,geometry:qt?Zi(ht):[]};if(!!this.layers[0]._featureFilter.filter(new fi(this.zoom),yr,te)){qt||(yr.geometry=Zi(ht));var Or=pe?pe.evaluate(yr,{},te):void 0,ln={id:gt,properties:ht.properties,type:ht.type,sourceLayerIndex:nr,index:Ot,geometry:yr.geometry,patterns:{},sortKey:Or};we.push(ln)}}pe&&we.sort(function(Sa,La){return Sa.sortKey-La.sortKey});for(var en=0,kn=we;en<kn.length;en+=1){var bn=kn[en],Cn=bn,zn=Cn.geometry,Xn=Cn.index,ua=Cn.sourceLayerIndex;if(this.hasPattern){var oa=Zd("line",this.layers,bn,this.zoom,O);this.patternFeatures.push(oa)}else this.addFeature(bn,zn,Xn,te,{});var Na=k[Xn].feature;O.featureIndex.insert(Na,zn,Xn,ua,this.index)}},yl.prototype.update=function(k,O,te){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(k,O,this.stateDependentLayers,te)},yl.prototype.addFeatures=function(k,O,te){for(var pe=0,we=this.patternFeatures;pe<we.length;pe+=1){var Me=we[pe];this.addFeature(Me,Me.geometry,Me.index,O,te)}},yl.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},yl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},yl.prototype.upload=function(k){this.uploaded||(this.layoutVertexBuffer=k.createVertexBuffer(this.layoutVertexArray,Jg),this.indexBuffer=k.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(k),this.uploaded=!0},yl.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},yl.prototype.addFeature=function(k,O,te,pe,we){for(var Me=this.layers[0].layout,Oe=Me.get("line-join").evaluate(k,{}),tt=Me.get("line-cap"),ht=Me.get("line-miter-limit"),gt=Me.get("line-round-limit"),Ot=0,nr=O;Ot<nr.length;Ot+=1){var qt=nr[Ot];this.addLine(qt,k,Oe,tt,ht,gt)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,k,te,we,pe)},yl.prototype.addLine=function(k,O,te,pe,we,Me){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,!!O.properties&&O.properties.hasOwnProperty("mapbox_clip_start")&&O.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+O.properties.mapbox_clip_start,this.clipEnd=+O.properties.mapbox_clip_end;for(var Oe=0;Oe<k.length-1;Oe++)this.totalDistance+=k[Oe].dist(k[Oe+1]);this.updateScaledDistance()}for(var tt=T2[O.type]==="Polygon",ht=k.length;ht>=2&&k[ht-1].equals(k[ht-2]);)ht--;for(var gt=0;gt<ht-1&&k[gt].equals(k[gt+1]);)gt++;if(!(ht<(tt?3:2))){te==="bevel"&&(we=1.05);var Ot=this.overscaling<=16?M2*Ha/(512*this.overscaling):0,nr=this.segments.prepareSegment(ht*10,this.layoutVertexArray,this.indexArray),qt,yr=void 0,Or=void 0,ln=void 0,en=void 0;this.e1=this.e2=-1,tt&&(qt=k[ht-2],en=k[gt].sub(qt)._unit()._perp());for(var kn=gt;kn<ht;kn++)if(Or=kn===ht-1?tt?k[gt+1]:void 0:k[kn+1],!(Or&&k[kn].equals(Or))){en&&(ln=en),qt&&(yr=qt),qt=k[kn],en=Or?Or.sub(qt)._unit()._perp():ln,ln=ln||en;var bn=ln.add(en);(bn.x!==0||bn.y!==0)&&bn._unit();var Cn=ln.x*en.x+ln.y*en.y,zn=bn.x*en.x+bn.y*en.y,Xn=zn!==0?1/zn:1/0,ua=2*Math.sqrt(2-2*zn),oa=zn<A2&&yr&&Or,Na=ln.x*en.y-ln.y*en.x>0;if(oa&&kn>gt){var Sa=qt.dist(yr);if(Sa>2*Ot){var La=qt.sub(qt.sub(yr)._mult(Ot/Sa)._round());this.updateDistance(yr,La),this.addCurrentVertex(La,ln,0,0,nr),yr=La}}var ii=yr&&Or,Ia=ii?te:tt?"butt":pe;if(ii&&Ia==="round"&&(Xn<Me?Ia="miter":Xn<=2&&(Ia="fakeround")),Ia==="miter"&&Xn>we&&(Ia="bevel"),Ia==="bevel"&&(Xn>2&&(Ia="flipbevel"),Xn<we&&(Ia="miter")),yr&&this.updateDistance(yr,qt),Ia==="miter")bn._mult(Xn),this.addCurrentVertex(qt,bn,0,0,nr);else if(Ia==="flipbevel"){if(Xn>100)bn=en.mult(-1);else{var za=Xn*ln.add(en).mag()/ln.sub(en).mag();bn._perp()._mult(za*(Na?-1:1))}this.addCurrentVertex(qt,bn,0,0,nr),this.addCurrentVertex(qt,bn.mult(-1),0,0,nr)}else if(Ia==="bevel"||Ia==="fakeround"){var pi=-Math.sqrt(Xn*Xn-1),ni=Na?pi:0,Ri=Na?0:pi;if(yr&&this.addCurrentVertex(qt,ln,ni,Ri,nr),Ia==="fakeround")for(var qi=Math.round(ua*180/Math.PI/S2),Ii=1;Ii<qi;Ii++){var Fi=Ii/qi;if(Fi!==.5){var ki=Fi-.5,so=1.0904+Cn*(-3.2452+Cn*(3.55645-Cn*1.43519)),ho=.848013+Cn*(-1.06021+Cn*.215638);Fi=Fi+Fi*ki*(Fi-1)*(so*ki*ki+ho)}var Do=en.sub(ln)._mult(Fi)._add(ln)._unit()._mult(Na?-1:1);this.addHalfVertex(qt,Do.x,Do.y,!1,Na,0,nr)}Or&&this.addCurrentVertex(qt,en,-ni,-Ri,nr)}else if(Ia==="butt")this.addCurrentVertex(qt,bn,0,0,nr);else if(Ia==="square"){var Bo=yr?1:-1;this.addCurrentVertex(qt,bn,Bo,Bo,nr)}else Ia==="round"&&(yr&&(this.addCurrentVertex(qt,ln,0,0,nr),this.addCurrentVertex(qt,ln,1,1,nr,!0)),Or&&(this.addCurrentVertex(qt,en,-1,-1,nr,!0),this.addCurrentVertex(qt,en,0,0,nr)));if(oa&&kn<ht-1){var cs=qt.dist(Or);if(cs>2*Ot){var qo=qt.add(Or.sub(qt)._mult(Ot/cs)._round());this.updateDistance(qt,qo),this.addCurrentVertex(qo,en,0,0,nr),qt=qo}}}}},yl.prototype.addCurrentVertex=function(k,O,te,pe,we,Me){Me===void 0&&(Me=!1);var Oe=O.x+O.y*te,tt=O.y-O.x*te,ht=-O.x+O.y*pe,gt=-O.y-O.x*pe;this.addHalfVertex(k,Oe,tt,Me,!1,te,we),this.addHalfVertex(k,ht,gt,Me,!0,-pe,we),this.distance>qg/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(k,O,te,pe,we,Me))},yl.prototype.addHalfVertex=function(k,O,te,pe,we,Me,Oe){var tt=k.x,ht=k.y,gt=this.scaledDistance*$g;this.layoutVertexArray.emplaceBack((tt<<1)+(pe?1:0),(ht<<1)+(we?1:0),Math.round(Qg*O)+128,Math.round(Qg*te)+128,(Me===0?0:Me<0?-1:1)+1|(gt&63)<<2,gt>>6);var Ot=Oe.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Ot),Oe.primitiveLength++),we?this.e2=Ot:this.e1=Ot},yl.prototype.updateScaledDistance=function(){this.scaledDistance=this.totalDistance>0?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(qg-1):this.distance},yl.prototype.updateDistance=function(k,O){this.distance+=k.dist(O),this.updateScaledDistance()},Be("LineBucket",yl,{omit:["layers","patternFeatures"]});var C2=new eo({"line-cap":new Oa(Gt.layout_line["line-cap"]),"line-join":new Qa(Gt.layout_line["line-join"]),"line-miter-limit":new Oa(Gt.layout_line["line-miter-limit"]),"line-round-limit":new Oa(Gt.layout_line["line-round-limit"]),"line-sort-key":new Qa(Gt.layout_line["line-sort-key"])}),k2=new eo({"line-opacity":new Qa(Gt.paint_line["line-opacity"]),"line-color":new Qa(Gt.paint_line["line-color"]),"line-translate":new Oa(Gt.paint_line["line-translate"]),"line-translate-anchor":new Oa(Gt.paint_line["line-translate-anchor"]),"line-width":new Qa(Gt.paint_line["line-width"]),"line-gap-width":new Qa(Gt.paint_line["line-gap-width"]),"line-offset":new Qa(Gt.paint_line["line-offset"]),"line-blur":new Qa(Gt.paint_line["line-blur"]),"line-dasharray":new co(Gt.paint_line["line-dasharray"]),"line-pattern":new ko(Gt.paint_line["line-pattern"]),"line-gradient":new Go(Gt.paint_line["line-gradient"])}),ey={paint:k2,layout:C2},L2=function(C){function k(){C.apply(this,arguments)}return C&&(k.__proto__=C),k.prototype=Object.create(C&&C.prototype),k.prototype.constructor=k,k.prototype.possiblyEvaluate=function(te,pe){return pe=new fi(Math.floor(pe.zoom),{now:pe.now,fadeDuration:pe.fadeDuration,zoomHistory:pe.zoomHistory,transition:pe.transition}),C.prototype.possiblyEvaluate.call(this,te,pe)},k.prototype.evaluate=function(te,pe,we,Me){return pe=M({},pe,{zoom:Math.floor(pe.zoom)}),C.prototype.evaluate.call(this,te,pe,we,Me)},k}(Qa),ty=new L2(ey.paint.properties["line-width"].specification);ty.useIntegerZoom=!0;var P2=function(C){function k(O){C.call(this,O,ey)}return C&&(k.__proto__=C),k.prototype=Object.create(C&&C.prototype),k.prototype.constructor=k,k.prototype._handleSpecialPaintPropertyUpdate=function(te){te==="line-gradient"&&this._updateGradient()},k.prototype._updateGradient=function(){var te=this._transitionablePaint._values["line-gradient"].value.expression;this.gradient=Og(te,"lineProgress"),this.gradientTexture=null},k.prototype.recalculate=function(te,pe){C.prototype.recalculate.call(this,te,pe),this.paint._values["line-floorwidth"]=ty.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,te)},k.prototype.createBucket=function(te){return new yl(te)},k.prototype.queryRadius=function(te){var pe=te,we=ry(kl("line-width",this,pe),kl("line-gap-width",this,pe)),Me=kl("line-offset",this,pe);return we/2+Math.abs(Me)+Ru(this.paint.get("line-translate"))},k.prototype.queryIntersectsFeature=function(te,pe,we,Me,Oe,tt,ht){var gt=vu(te,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),tt.angle,ht),Ot=ht/2*ry(this.paint.get("line-width").evaluate(pe,we),this.paint.get("line-gap-width").evaluate(pe,we)),nr=this.paint.get("line-offset").evaluate(pe,we);return nr&&(Me=D2(Me,nr*ht)),Ko(gt,Me,Ot)},k.prototype.isTileClipped=function(){return!0},k}(Ps);function ry(C,k){return k>0?k+2*C:C}function D2(C,k){for(var O=[],te=new v(0,0),pe=0;pe<C.length;pe++){for(var we=C[pe],Me=[],Oe=0;Oe<we.length;Oe++){var tt=we[Oe-1],ht=we[Oe],gt=we[Oe+1],Ot=Oe===0?te:ht.sub(tt)._unit()._perp(),nr=Oe===we.length-1?te:gt.sub(ht)._unit()._perp(),qt=Ot._add(nr)._unit(),yr=qt.x*nr.x+qt.y*nr.y;qt._mult(1/yr),Me.push(qt._mult(k)._add(ht))}O.push(Me)}return O}var Kd=Yo([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),R2=Yo([{name:"a_projected_pos",components:3,type:"Float32"}],4);Yo([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);var I2=Yo([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);Yo([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);var ny=Yo([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),F2=Yo([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Yo([{name:"triangle",components:3,type:"Uint16"}]),Yo([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Yo([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Yo([{type:"Float32",name:"offsetX"}]),Yo([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);function z2(C,k,O){var te=k.layout.get("text-transform").evaluate(O,{});return te==="uppercase"?C=C.toLocaleUpperCase():te==="lowercase"&&(C=C.toLocaleLowerCase()),Ja.applyArabicShaping&&(C=Ja.applyArabicShaping(C)),C}function N2(C,k,O){return C.sections.forEach(function(te){te.text=z2(te.text,k,O)}),C}function O2(C){var k={},O={},te=[],pe=0;function we(en){te.push(C[en]),pe++}function Me(en,kn,bn){var Cn=O[en];return delete O[en],O[kn]=Cn,te[Cn].geometry[0].pop(),te[Cn].geometry[0]=te[Cn].geometry[0].concat(bn[0]),Cn}function Oe(en,kn,bn){var Cn=k[kn];return delete k[kn],k[en]=Cn,te[Cn].geometry[0].shift(),te[Cn].geometry[0]=bn[0].concat(te[Cn].geometry[0]),Cn}function tt(en,kn,bn){var Cn=bn?kn[0][kn[0].length-1]:kn[0][0];return en+":"+Cn.x+":"+Cn.y}for(var ht=0;ht<C.length;ht++){var gt=C[ht],Ot=gt.geometry,nr=gt.text?gt.text.toString():null;if(!nr){we(ht);continue}var qt=tt(nr,Ot),yr=tt(nr,Ot,!0);if(qt in O&&yr in k&&O[qt]!==k[yr]){var Or=Oe(qt,yr,Ot),ln=Me(qt,yr,te[Or].geometry);delete k[qt],delete O[yr],O[tt(nr,te[ln].geometry,!0)]=ln,te[Or].geometry=null}else qt in O?Me(qt,yr,Ot):yr in k?Oe(qt,yr,Ot):(we(ht),k[qt]=pe-1,O[yr]=pe-1)}return te.filter(function(en){return en.geometry})}var Av={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};function B2(C){for(var k="",O=0;O<C.length;O++){var te=C.charCodeAt(O+1)||null,pe=C.charCodeAt(O-1)||null,we=(!te||!sn(te)||Av[C[O+1]])&&(!pe||!sn(pe)||Av[C[O-1]]);we&&Av[C[O]]?k+=Av[C[O]]:k+=C[O]}return k}var As=24,U2=function(C,k,O,te,pe){var we,Me,Oe=pe*8-te-1,tt=(1<<Oe)-1,ht=tt>>1,gt=-7,Ot=O?pe-1:0,nr=O?-1:1,qt=C[k+Ot];for(Ot+=nr,we=qt&(1<<-gt)-1,qt>>=-gt,gt+=Oe;gt>0;we=we*256+C[k+Ot],Ot+=nr,gt-=8);for(Me=we&(1<<-gt)-1,we>>=-gt,gt+=te;gt>0;Me=Me*256+C[k+Ot],Ot+=nr,gt-=8);if(we===0)we=1-ht;else{if(we===tt)return Me?NaN:(qt?-1:1)*(1/0);Me=Me+Math.pow(2,te),we=we-ht}return(qt?-1:1)*Me*Math.pow(2,we-te)},V2=function(C,k,O,te,pe,we){var Me,Oe,tt,ht=we*8-pe-1,gt=(1<<ht)-1,Ot=gt>>1,nr=pe===23?Math.pow(2,-24)-Math.pow(2,-77):0,qt=te?0:we-1,yr=te?1:-1,Or=k<0||k===0&&1/k<0?1:0;for(k=Math.abs(k),isNaN(k)||k===1/0?(Oe=isNaN(k)?1:0,Me=gt):(Me=Math.floor(Math.log(k)/Math.LN2),k*(tt=Math.pow(2,-Me))<1&&(Me--,tt*=2),Me+Ot>=1?k+=nr/tt:k+=nr*Math.pow(2,1-Ot),k*tt>=2&&(Me++,tt/=2),Me+Ot>=gt?(Oe=0,Me=gt):Me+Ot>=1?(Oe=(k*tt-1)*Math.pow(2,pe),Me=Me+Ot):(Oe=k*Math.pow(2,Ot-1)*Math.pow(2,pe),Me=0));pe>=8;C[O+qt]=Oe&255,qt+=yr,Oe/=256,pe-=8);for(Me=Me<<pe|Oe,ht+=pe;ht>0;C[O+qt]=Me&255,qt+=yr,Me/=256,ht-=8);C[O+qt-yr]|=Or*128},dp={read:U2,write:V2},gp=fo;function fo(C){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(C)?C:new Uint8Array(C||0),this.pos=0,this.type=0,this.length=this.buf.length}fo.Varint=0,fo.Fixed64=1,fo.Bytes=2,fo.Fixed32=5;var Jd=(1<<16)*(1<<16),ay=1/Jd,H2=12,iy=typeof TextDecoder>"u"?null:new TextDecoder("utf8");fo.prototype={destroy:function(){this.buf=null},readFields:function(C,k,O){for(O=O||this.length;this.pos<O;){var te=this.readVarint(),pe=te>>3,we=this.pos;this.type=te&7,C(pe,k,this),this.pos===we&&this.skip(te)}return k},readMessage:function(C,k){return this.readFields(C,k,this.readVarint()+this.pos)},readFixed32:function(){var C=yp(this.buf,this.pos);return this.pos+=4,C},readSFixed32:function(){var C=sy(this.buf,this.pos);return this.pos+=4,C},readFixed64:function(){var C=yp(this.buf,this.pos)+yp(this.buf,this.pos+4)*Jd;return this.pos+=8,C},readSFixed64:function(){var C=yp(this.buf,this.pos)+sy(this.buf,this.pos+4)*Jd;return this.pos+=8,C},readFloat:function(){var C=dp.read(this.buf,this.pos,!0,23,4);return this.pos+=4,C},readDouble:function(){var C=dp.read(this.buf,this.pos,!0,52,8);return this.pos+=8,C},readVarint:function(C){var k=this.buf,O,te;return te=k[this.pos++],O=te&127,te<128||(te=k[this.pos++],O|=(te&127)<<7,te<128)||(te=k[this.pos++],O|=(te&127)<<14,te<128)||(te=k[this.pos++],O|=(te&127)<<21,te<128)?O:(te=k[this.pos],O|=(te&15)<<28,G2(O,C,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var C=this.readVarint();return C%2===1?(C+1)/-2:C/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var C=this.readVarint()+this.pos,k=this.pos;return this.pos=C,C-k>=H2&&iy?n_(this.buf,k,C):r_(this.buf,k,C)},readBytes:function(){var C=this.readVarint()+this.pos,k=this.buf.subarray(this.pos,C);return this.pos=C,k},readPackedVarint:function(C,k){if(this.type!==fo.Bytes)return C.push(this.readVarint(k));var O=Wc(this);for(C=C||[];this.pos<O;)C.push(this.readVarint(k));return C},readPackedSVarint:function(C){if(this.type!==fo.Bytes)return C.push(this.readSVarint());var k=Wc(this);for(C=C||[];this.pos<k;)C.push(this.readSVarint());return C},readPackedBoolean:function(C){if(this.type!==fo.Bytes)return C.push(this.readBoolean());var k=Wc(this);for(C=C||[];this.pos<k;)C.push(this.readBoolean());return C},readPackedFloat:function(C){if(this.type!==fo.Bytes)return C.push(this.readFloat());var k=Wc(this);for(C=C||[];this.pos<k;)C.push(this.readFloat());return C},readPackedDouble:function(C){if(this.type!==fo.Bytes)return C.push(this.readDouble());var k=Wc(this);for(C=C||[];this.pos<k;)C.push(this.readDouble());return C},readPackedFixed32:function(C){if(this.type!==fo.Bytes)return C.push(this.readFixed32());var k=Wc(this);for(C=C||[];this.pos<k;)C.push(this.readFixed32());return C},readPackedSFixed32:function(C){if(this.type!==fo.Bytes)return C.push(this.readSFixed32());var k=Wc(this);for(C=C||[];this.pos<k;)C.push(this.readSFixed32());return C},readPackedFixed64:function(C){if(this.type!==fo.Bytes)return C.push(this.readFixed64());var k=Wc(this);for(C=C||[];this.pos<k;)C.push(this.readFixed64());return C},readPackedSFixed64:function(C){if(this.type!==fo.Bytes)return C.push(this.readSFixed64());var k=Wc(this);for(C=C||[];this.pos<k;)C.push(this.readSFixed64());return C},skip:function(C){var k=C&7;if(k===fo.Varint)for(;this.buf[this.pos++]>127;);else if(k===fo.Bytes)this.pos=this.readVarint()+this.pos;else if(k===fo.Fixed32)this.pos+=4;else if(k===fo.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+k)},writeTag:function(C,k){this.writeVarint(C<<3|k)},realloc:function(C){for(var k=this.length||16;k<this.pos+C;)k*=2;if(k!==this.length){var O=new Uint8Array(k);O.set(this.buf),this.buf=O,this.length=k}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(C){this.realloc(4),Ah(this.buf,C,this.pos),this.pos+=4},writeSFixed32:function(C){this.realloc(4),Ah(this.buf,C,this.pos),this.pos+=4},writeFixed64:function(C){this.realloc(8),Ah(this.buf,C&-1,this.pos),Ah(this.buf,Math.floor(C*ay),this.pos+4),this.pos+=8},writeSFixed64:function(C){this.realloc(8),Ah(this.buf,C&-1,this.pos),Ah(this.buf,Math.floor(C*ay),this.pos+4),this.pos+=8},writeVarint:function(C){if(C=+C||0,C>268435455||C<0){Y2(C,this);return}this.realloc(4),this.buf[this.pos++]=C&127|(C>127?128:0),!(C<=127)&&(this.buf[this.pos++]=(C>>>=7)&127|(C>127?128:0),!(C<=127)&&(this.buf[this.pos++]=(C>>>=7)&127|(C>127?128:0),!(C<=127)&&(this.buf[this.pos++]=C>>>7&127)))},writeSVarint:function(C){this.writeVarint(C<0?-C*2-1:C*2)},writeBoolean:function(C){this.writeVarint(Boolean(C))},writeString:function(C){C=String(C),this.realloc(C.length*4),this.pos++;var k=this.pos;this.pos=a_(this.buf,C,this.pos);var O=this.pos-k;O>=128&&oy(k,O,this),this.pos=k-1,this.writeVarint(O),this.pos+=O},writeFloat:function(C){this.realloc(4),dp.write(this.buf,C,this.pos,!0,23,4),this.pos+=4},writeDouble:function(C){this.realloc(8),dp.write(this.buf,C,this.pos,!0,52,8),this.pos+=8},writeBytes:function(C){var k=C.length;this.writeVarint(k),this.realloc(k);for(var O=0;O<k;O++)this.buf[this.pos++]=C[O]},writeRawMessage:function(C,k){this.pos++;var O=this.pos;C(k,this);var te=this.pos-O;te>=128&&oy(O,te,this),this.pos=O-1,this.writeVarint(te),this.pos+=te},writeMessage:function(C,k,O){this.writeTag(C,fo.Bytes),this.writeRawMessage(k,O)},writePackedVarint:function(C,k){k.length&&this.writeMessage(C,Z2,k)},writePackedSVarint:function(C,k){k.length&&this.writeMessage(C,j2,k)},writePackedBoolean:function(C,k){k.length&&this.writeMessage(C,Q2,k)},writePackedFloat:function(C,k){k.length&&this.writeMessage(C,K2,k)},writePackedDouble:function(C,k){k.length&&this.writeMessage(C,J2,k)},writePackedFixed32:function(C,k){k.length&&this.writeMessage(C,$2,k)},writePackedSFixed32:function(C,k){k.length&&this.writeMessage(C,q2,k)},writePackedFixed64:function(C,k){k.length&&this.writeMessage(C,e_,k)},writePackedSFixed64:function(C,k){k.length&&this.writeMessage(C,t_,k)},writeBytesField:function(C,k){this.writeTag(C,fo.Bytes),this.writeBytes(k)},writeFixed32Field:function(C,k){this.writeTag(C,fo.Fixed32),this.writeFixed32(k)},writeSFixed32Field:function(C,k){this.writeTag(C,fo.Fixed32),this.writeSFixed32(k)},writeFixed64Field:function(C,k){this.writeTag(C,fo.Fixed64),this.writeFixed64(k)},writeSFixed64Field:function(C,k){this.writeTag(C,fo.Fixed64),this.writeSFixed64(k)},writeVarintField:function(C,k){this.writeTag(C,fo.Varint),this.writeVarint(k)},writeSVarintField:function(C,k){this.writeTag(C,fo.Varint),this.writeSVarint(k)},writeStringField:function(C,k){this.writeTag(C,fo.Bytes),this.writeString(k)},writeFloatField:function(C,k){this.writeTag(C,fo.Fixed32),this.writeFloat(k)},writeDoubleField:function(C,k){this.writeTag(C,fo.Fixed64),this.writeDouble(k)},writeBooleanField:function(C,k){this.writeVarintField(C,Boolean(k))}};function G2(C,k,O){var te=O.buf,pe,we;if(we=te[O.pos++],pe=(we&112)>>4,we<128||(we=te[O.pos++],pe|=(we&127)<<3,we<128)||(we=te[O.pos++],pe|=(we&127)<<10,we<128)||(we=te[O.pos++],pe|=(we&127)<<17,we<128)||(we=te[O.pos++],pe|=(we&127)<<24,we<128)||(we=te[O.pos++],pe|=(we&1)<<31,we<128))return Th(C,pe,k);throw new Error("Expected varint not more than 10 bytes")}function Wc(C){return C.type===fo.Bytes?C.readVarint()+C.pos:C.pos+1}function Th(C,k,O){return O?k*4294967296+(C>>>0):(k>>>0)*4294967296+(C>>>0)}function Y2(C,k){var O,te;if(C>=0?(O=C%4294967296|0,te=C/4294967296|0):(O=~(-C%4294967296),te=~(-C/4294967296),O^4294967295?O=O+1|0:(O=0,te=te+1|0)),C>=18446744073709552e3||C<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");k.realloc(10),W2(O,te,k),X2(te,k)}function W2(C,k,O){O.buf[O.pos++]=C&127|128,C>>>=7,O.buf[O.pos++]=C&127|128,C>>>=7,O.buf[O.pos++]=C&127|128,C>>>=7,O.buf[O.pos++]=C&127|128,C>>>=7,O.buf[O.pos]=C&127}function X2(C,k){var O=(C&7)<<4;k.buf[k.pos++]|=O|((C>>>=3)?128:0),C&&(k.buf[k.pos++]=C&127|((C>>>=7)?128:0),C&&(k.buf[k.pos++]=C&127|((C>>>=7)?128:0),C&&(k.buf[k.pos++]=C&127|((C>>>=7)?128:0),C&&(k.buf[k.pos++]=C&127|((C>>>=7)?128:0),C&&(k.buf[k.pos++]=C&127)))))}function oy(C,k,O){var te=k<=16383?1:k<=2097151?2:k<=268435455?3:Math.floor(Math.log(k)/(Math.LN2*7));O.realloc(te);for(var pe=O.pos-1;pe>=C;pe--)O.buf[pe+te]=O.buf[pe]}function Z2(C,k){for(var O=0;O<C.length;O++)k.writeVarint(C[O])}function j2(C,k){for(var O=0;O<C.length;O++)k.writeSVarint(C[O])}function K2(C,k){for(var O=0;O<C.length;O++)k.writeFloat(C[O])}function J2(C,k){for(var O=0;O<C.length;O++)k.writeDouble(C[O])}function Q2(C,k){for(var O=0;O<C.length;O++)k.writeBoolean(C[O])}function $2(C,k){for(var O=0;O<C.length;O++)k.writeFixed32(C[O])}function q2(C,k){for(var O=0;O<C.length;O++)k.writeSFixed32(C[O])}function e_(C,k){for(var O=0;O<C.length;O++)k.writeFixed64(C[O])}function t_(C,k){for(var O=0;O<C.length;O++)k.writeSFixed64(C[O])}function yp(C,k){return(C[k]|C[k+1]<<8|C[k+2]<<16)+C[k+3]*16777216}function Ah(C,k,O){C[O]=k,C[O+1]=k>>>8,C[O+2]=k>>>16,C[O+3]=k>>>24}function sy(C,k){return(C[k]|C[k+1]<<8|C[k+2]<<16)+(C[k+3]<<24)}function r_(C,k,O){for(var te="",pe=k;pe<O;){var we=C[pe],Me=null,Oe=we>239?4:we>223?3:we>191?2:1;if(pe+Oe>O)break;var tt,ht,gt;Oe===1?we<128&&(Me=we):Oe===2?(tt=C[pe+1],(tt&192)===128&&(Me=(we&31)<<6|tt&63,Me<=127&&(Me=null))):Oe===3?(tt=C[pe+1],ht=C[pe+2],(tt&192)===128&&(ht&192)===128&&(Me=(we&15)<<12|(tt&63)<<6|ht&63,(Me<=2047||Me>=55296&&Me<=57343)&&(Me=null))):Oe===4&&(tt=C[pe+1],ht=C[pe+2],gt=C[pe+3],(tt&192)===128&&(ht&192)===128&&(gt&192)===128&&(Me=(we&15)<<18|(tt&63)<<12|(ht&63)<<6|gt&63,(Me<=65535||Me>=1114112)&&(Me=null))),Me===null?(Me=65533,Oe=1):Me>65535&&(Me-=65536,te+=String.fromCharCode(Me>>>10&1023|55296),Me=56320|Me&1023),te+=String.fromCharCode(Me),pe+=Oe}return te}function n_(C,k,O){return iy.decode(C.subarray(k,O))}function a_(C,k,O){for(var te=0,pe,we;te<k.length;te++){if(pe=k.charCodeAt(te),pe>55295&&pe<57344)if(we)if(pe<56320){C[O++]=239,C[O++]=191,C[O++]=189,we=pe;continue}else pe=we-55296<<10|pe-56320|65536,we=null;else{pe>56319||te+1===k.length?(C[O++]=239,C[O++]=191,C[O++]=189):we=pe;continue}else we&&(C[O++]=239,C[O++]=191,C[O++]=189,we=null);pe<128?C[O++]=pe:(pe<2048?C[O++]=pe>>6|192:(pe<65536?C[O++]=pe>>12|224:(C[O++]=pe>>18|240,C[O++]=pe>>12&63|128),C[O++]=pe>>6&63|128),C[O++]=pe&63|128)}return O}var Qd=3;function i_(C,k,O){C===1&&O.readMessage(o_,k)}function o_(C,k,O){if(C===3){var te=O.readMessage(s_,{}),pe=te.id,we=te.bitmap,Me=te.width,Oe=te.height,tt=te.left,ht=te.top,gt=te.advance;k.push({id:pe,bitmap:new Gf({width:Me+2*Qd,height:Oe+2*Qd},we),metrics:{width:Me,height:Oe,left:tt,top:ht,advance:gt}})}}function s_(C,k,O){C===1?k.id=O.readVarint():C===2?k.bitmap=O.readBytes():C===3?k.width=O.readVarint():C===4?k.height=O.readVarint():C===5?k.left=O.readSVarint():C===6?k.top=O.readSVarint():C===7&&(k.advance=O.readVarint())}function l_(C){return new gp(C).readFields(i_,[])}var ly=Qd;function uy(C){for(var k=0,O=0,te=0,pe=C;te<pe.length;te+=1){var we=pe[te];k+=we.w*we.h,O=Math.max(O,we.w)}C.sort(function(ln,en){return en.h-ln.h});for(var Me=Math.max(Math.ceil(Math.sqrt(k/.95)),O),Oe=[{x:0,y:0,w:Me,h:1/0}],tt=0,ht=0,gt=0,Ot=C;gt<Ot.length;gt+=1)for(var nr=Ot[gt],qt=Oe.length-1;qt>=0;qt--){var yr=Oe[qt];if(!(nr.w>yr.w||nr.h>yr.h)){if(nr.x=yr.x,nr.y=yr.y,ht=Math.max(ht,nr.y+nr.h),tt=Math.max(tt,nr.x+nr.w),nr.w===yr.w&&nr.h===yr.h){var Or=Oe.pop();qt<Oe.length&&(Oe[qt]=Or)}else nr.h===yr.h?(yr.x+=nr.w,yr.w-=nr.w):nr.w===yr.w?(yr.y+=nr.h,yr.h-=nr.h):(Oe.push({x:yr.x+nr.w,y:yr.y,w:yr.w-nr.w,h:nr.h}),yr.y+=nr.h,yr.h-=nr.h);break}}return{w:tt,h:ht,fill:k/(tt*ht)||0}}var Ll=1,mp=function(k,O){var te=O.pixelRatio,pe=O.version,we=O.stretchX,Me=O.stretchY,Oe=O.content;this.paddedRect=k,this.pixelRatio=te,this.stretchX=we,this.stretchY=Me,this.content=Oe,this.version=pe},Mv={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Mv.tl.get=function(){return[this.paddedRect.x+Ll,this.paddedRect.y+Ll]},Mv.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-Ll,this.paddedRect.y+this.paddedRect.h-Ll]},Mv.tlbr.get=function(){return this.tl.concat(this.br)},Mv.displaySize.get=function(){return[(this.paddedRect.w-Ll*2)/this.pixelRatio,(this.paddedRect.h-Ll*2)/this.pixelRatio]},Object.defineProperties(mp.prototype,Mv);var Sv=function(k,O){var te={},pe={};this.haveRenderCallbacks=[];var we=[];this.addImages(k,te,we),this.addImages(O,pe,we);var Me=uy(we),Oe=Me.w,tt=Me.h,ht=new dl({width:Oe||1,height:tt||1});for(var gt in k){var Ot=k[gt],nr=te[gt].paddedRect;dl.copy(Ot.data,ht,{x:0,y:0},{x:nr.x+Ll,y:nr.y+Ll},Ot.data)}for(var qt in O){var yr=O[qt],Or=pe[qt].paddedRect,ln=Or.x+Ll,en=Or.y+Ll,kn=yr.data.width,bn=yr.data.height;dl.copy(yr.data,ht,{x:0,y:0},{x:ln,y:en},yr.data),dl.copy(yr.data,ht,{x:0,y:bn-1},{x:ln,y:en-1},{width:kn,height:1}),dl.copy(yr.data,ht,{x:0,y:0},{x:ln,y:en+bn},{width:kn,height:1}),dl.copy(yr.data,ht,{x:kn-1,y:0},{x:ln-1,y:en},{width:1,height:bn}),dl.copy(yr.data,ht,{x:0,y:0},{x:ln+kn,y:en},{width:1,height:bn})}this.image=ht,this.iconPositions=te,this.patternPositions=pe};Sv.prototype.addImages=function(k,O,te){for(var pe in k){var we=k[pe],Me={x:0,y:0,w:we.data.width+2*Ll,h:we.data.height+2*Ll};te.push(Me),O[pe]=new mp(Me,we),we.hasRenderCallback&&this.haveRenderCallbacks.push(pe)}},Sv.prototype.patchUpdatedImages=function(k,O){k.dispatchRenderCallbacks(this.haveRenderCallbacks);for(var te in k.updatedImages)this.patchUpdatedImage(this.iconPositions[te],k.getImage(te),O),this.patchUpdatedImage(this.patternPositions[te],k.getImage(te),O)},Sv.prototype.patchUpdatedImage=function(k,O,te){if(!(!k||!O)&&k.version!==O.version){k.version=O.version;var pe=k.tl,we=pe[0],Me=pe[1];te.update(O.data,void 0,{x:we,y:Me})}},Be("ImagePosition",mp),Be("ImageAtlas",Sv);var jl={horizontal:1,vertical:2,horizontalOnly:3},Ev=-17;function u_(C){for(var k=0,O=C;k<O.length;k+=1){var te=O[k];if(te.positionedGlyphs.length!==0)return!1}return!0}var cy=57344,fy=63743,Mh=function(){this.scale=1,this.fontStack="",this.imageName=null};Mh.forText=function(k,O){var te=new Mh;return te.scale=k||1,te.fontStack=O,te},Mh.forImage=function(k){var O=new Mh;return O.imageName=k,O};var Hs=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};Hs.fromFeature=function(k,O){for(var te=new Hs,pe=0;pe<k.sections.length;pe++){var we=k.sections[pe];we.image?te.addImageSection(we):te.addTextSection(we,O)}return te},Hs.prototype.length=function(){return this.text.length},Hs.prototype.getSection=function(k){return this.sections[this.sectionIndex[k]]},Hs.prototype.getSectionIndex=function(k){return this.sectionIndex[k]},Hs.prototype.getCharCode=function(k){return this.text.charCodeAt(k)},Hs.prototype.verticalizePunctuation=function(){this.text=B2(this.text)},Hs.prototype.trim=function(){for(var k=0,O=0;O<this.text.length&&Rc[this.text.charCodeAt(O)];O++)k++;for(var te=this.text.length,pe=this.text.length-1;pe>=0&&pe>=k&&Rc[this.text.charCodeAt(pe)];pe--)te--;this.text=this.text.substring(k,te),this.sectionIndex=this.sectionIndex.slice(k,te)},Hs.prototype.substring=function(k,O){var te=new Hs;return te.text=this.text.substring(k,O),te.sectionIndex=this.sectionIndex.slice(k,O),te.sections=this.sections,te},Hs.prototype.toString=function(){return this.text},Hs.prototype.getMaxScale=function(){var k=this;return this.sectionIndex.reduce(function(O,te){return Math.max(O,k.sections[te].scale)},0)},Hs.prototype.addTextSection=function(k,O){this.text+=k.text,this.sections.push(Mh.forText(k.scale,k.fontStack||O));for(var te=this.sections.length-1,pe=0;pe<k.text.length;++pe)this.sectionIndex.push(te)},Hs.prototype.addImageSection=function(k){var O=k.image?k.image.name:"";if(O.length===0){N("Can't add FormattedSection with an empty image.");return}var te=this.getNextImageSectionCharCode();if(!te){N("Reached maximum number of images "+(fy-cy+2));return}this.text+=String.fromCharCode(te),this.sections.push(Mh.forImage(O)),this.sectionIndex.push(this.sections.length-1)},Hs.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=fy?null:++this.imageSectionID:(this.imageSectionID=cy,this.imageSectionID)};function c_(C,k){for(var O=[],te=C.text,pe=0,we=0,Me=k;we<Me.length;we+=1){var Oe=Me[we];O.push(C.substring(pe,Oe)),pe=Oe}return pe<te.length&&O.push(C.substring(pe,te.length)),O}function xp(C,k,O,te,pe,we,Me,Oe,tt,ht,gt,Ot,nr,qt,yr,Or){var ln=Hs.fromFeature(C,pe);Ot===jl.vertical&&ln.verticalizePunctuation();var en,kn=Ja.processBidirectionalText,bn=Ja.processStyledBidirectionalText;if(kn&&ln.sections.length===1){en=[];for(var Cn=kn(ln.toString(),$d(ln,ht,we,k,te,qt,yr)),zn=0,Xn=Cn;zn<Xn.length;zn+=1){var ua=Xn[zn],oa=new Hs;oa.text=ua,oa.sections=ln.sections;for(var Na=0;Na<ua.length;Na++)oa.sectionIndex.push(0);en.push(oa)}}else if(bn){en=[];for(var Sa=bn(ln.text,ln.sectionIndex,$d(ln,ht,we,k,te,qt,yr)),La=0,ii=Sa;La<ii.length;La+=1){var Ia=ii[La],za=new Hs;za.text=Ia[0],za.sectionIndex=Ia[1],za.sections=ln.sections,en.push(za)}}else en=c_(ln,$d(ln,ht,we,k,te,qt,yr));var pi=[],ni={positionedLines:pi,text:ln.toString(),top:gt[1],bottom:gt[1],left:gt[0],right:gt[0],writingMode:Ot,iconsInText:!1,verticalizable:!1};return v_(ni,k,O,te,en,Me,Oe,tt,Ot,ht,nr,Or),u_(pi)?!1:ni}var Rc={};Rc[9]=!0,Rc[10]=!0,Rc[11]=!0,Rc[12]=!0,Rc[13]=!0,Rc[32]=!0;var Pl={};Pl[10]=!0,Pl[32]=!0,Pl[38]=!0,Pl[40]=!0,Pl[41]=!0,Pl[43]=!0,Pl[45]=!0,Pl[47]=!0,Pl[173]=!0,Pl[183]=!0,Pl[8203]=!0,Pl[8208]=!0,Pl[8211]=!0,Pl[8231]=!0;function hy(C,k,O,te,pe,we){if(k.imageName){var tt=te[k.imageName];return tt?tt.displaySize[0]*k.scale*As/we+pe:0}else{var Me=O[k.fontStack],Oe=Me&&Me[C];return Oe?Oe.metrics.advance*k.scale+pe:0}}function f_(C,k,O,te,pe,we){for(var Me=0,Oe=0;Oe<C.length();Oe++){var tt=C.getSection(Oe);Me+=hy(C.getCharCode(Oe),tt,te,pe,k,we)}var ht=Math.max(1,Math.ceil(Me/O));return Me/ht}function vy(C,k,O,te){var pe=Math.pow(C-k,2);return te?C<k?pe/2:pe*2:pe+Math.abs(O)*O}function h_(C,k,O){var te=0;return C===10&&(te-=1e4),O&&(te+=150),(C===40||C===65288)&&(te+=50),(k===41||k===65289)&&(te+=50),te}function py(C,k,O,te,pe,we){for(var Me=null,Oe=vy(k,O,pe,we),tt=0,ht=te;tt<ht.length;tt+=1){var gt=ht[tt],Ot=k-gt.x,nr=vy(Ot,O,pe,we)+gt.badness;nr<=Oe&&(Me=gt,Oe=nr)}return{index:C,x:k,priorBreak:Me,badness:Oe}}function dy(C){return C?dy(C.priorBreak).concat(C.index):[]}function $d(C,k,O,te,pe,we,Me){if(we!=="point")return[];if(!C)return[];for(var Oe=[],tt=f_(C,k,O,te,pe,Me),ht=C.text.indexOf("\u200B")>=0,gt=0,Ot=0;Ot<C.length();Ot++){var nr=C.getSection(Ot),qt=C.getCharCode(Ot);if(Rc[qt]||(gt+=hy(qt,nr,te,pe,k,Me)),Ot<C.length()-1){var yr=Dr(qt);(Pl[qt]||yr||nr.imageName)&&Oe.push(py(Ot+1,gt,tt,Oe,h_(qt,C.getCharCode(Ot+1),yr&&ht),!1))}}return dy(py(C.length(),gt,tt,Oe,0,!0))}function qd(C){var k=.5,O=.5;switch(C){case"right":case"top-right":case"bottom-right":k=1;break;case"left":case"top-left":case"bottom-left":k=0;break}switch(C){case"bottom":case"bottom-right":case"bottom-left":O=1;break;case"top":case"top-right":case"top-left":O=0;break}return{horizontalAlign:k,verticalAlign:O}}function v_(C,k,O,te,pe,we,Me,Oe,tt,ht,gt,Ot){for(var nr=0,qt=Ev,yr=0,Or=0,ln=Oe==="right"?1:Oe==="left"?0:.5,en=0,kn=0,bn=pe;kn<bn.length;kn+=1){var Cn=bn[kn];Cn.trim();var zn=Cn.getMaxScale(),Xn=(zn-1)*As,ua={positionedGlyphs:[],lineOffset:0};C.positionedLines[en]=ua;var oa=ua.positionedGlyphs,Na=0;if(!Cn.length()){qt+=we,++en;continue}for(var Sa=0;Sa<Cn.length();Sa++){var La=Cn.getSection(Sa),ii=Cn.getSectionIndex(Sa),Ia=Cn.getCharCode(Sa),za=0,pi=null,ni=null,Ri=null,qi=As,Ii=!(tt===jl.horizontal||!gt&&!Vr(Ia)||gt&&(Rc[Ia]||un(Ia)));if(La.imageName){var Do=te[La.imageName];if(!Do)continue;Ri=La.imageName,C.iconsInText=C.iconsInText||!0,ni=Do.paddedRect;var Bo=Do.displaySize;La.scale=La.scale*As/Ot,pi={width:Bo[0],height:Bo[1],left:Ll,top:-ly,advance:Ii?Bo[1]:Bo[0]};var cs=As-Bo[1]*La.scale;za=Xn+cs,qi=pi.advance;var qo=Ii?Bo[0]*La.scale-As*zn:Bo[1]*La.scale-As*zn;qo>0&&qo>Na&&(Na=qo)}else{var Fi=O[La.fontStack],ki=Fi&&Fi[Ia];if(ki&&ki.rect)ni=ki.rect,pi=ki.metrics;else{var so=k[La.fontStack],ho=so&&so[Ia];if(!ho)continue;pi=ho.metrics}za=(zn-La.scale)*As}Ii?(C.verticalizable=!0,oa.push({glyph:Ia,imageName:Ri,x:nr,y:qt+za,vertical:Ii,scale:La.scale,fontStack:La.fontStack,sectionIndex:ii,metrics:pi,rect:ni}),nr+=qi*La.scale+ht):(oa.push({glyph:Ia,imageName:Ri,x:nr,y:qt+za,vertical:Ii,scale:La.scale,fontStack:La.fontStack,sectionIndex:ii,metrics:pi,rect:ni}),nr+=pi.advance*La.scale+ht)}if(oa.length!==0){var Gs=nr-ht;yr=Math.max(Gs,yr),p_(oa,0,oa.length-1,ln,Na)}nr=0;var Ys=we*zn+Na;ua.lineOffset=Math.max(Na,Xn),qt+=Ys,Or=Math.max(Ys,Or),++en}var fs=qt-Ev,qs=qd(Me),el=qs.horizontalAlign,as=qs.verticalAlign;d_(C.positionedLines,ln,el,as,yr,Or,we,fs,pe.length),C.top+=-as*fs,C.bottom=C.top+fs,C.left+=-el*yr,C.right=C.left+yr}function p_(C,k,O,te,pe){if(!(!te&&!pe))for(var we=C[O],Me=we.metrics.advance*we.scale,Oe=(C[O].x+Me)*te,tt=k;tt<=O;tt++)C[tt].x-=Oe,C[tt].y+=pe}function d_(C,k,O,te,pe,we,Me,Oe,tt){var ht=(k-O)*pe,gt=0;we!==Me?gt=-Oe*te-Ev:gt=(-te*tt+.5)*Me;for(var Ot=0,nr=C;Ot<nr.length;Ot+=1)for(var qt=nr[Ot],yr=0,Or=qt.positionedGlyphs;yr<Or.length;yr+=1){var ln=Or[yr];ln.x+=ht,ln.y+=gt}}function g_(C,k,O){var te=qd(O),pe=te.horizontalAlign,we=te.verticalAlign,Me=k[0],Oe=k[1],tt=Me-C.displaySize[0]*pe,ht=tt+C.displaySize[0],gt=Oe-C.displaySize[1]*we,Ot=gt+C.displaySize[1];return{image:C,top:gt,bottom:Ot,left:tt,right:ht}}function gy(C,k,O,te,pe,we){var Me=C.image,Oe;if(Me.content){var tt=Me.content,ht=Me.pixelRatio||1;Oe=[tt[0]/ht,tt[1]/ht,Me.displaySize[0]-tt[2]/ht,Me.displaySize[1]-tt[3]/ht]}var gt=k.left*we,Ot=k.right*we,nr,qt,yr,Or;O==="width"||O==="both"?(Or=pe[0]+gt-te[3],qt=pe[0]+Ot+te[1]):(Or=pe[0]+(gt+Ot-Me.displaySize[0])/2,qt=Or+Me.displaySize[0]);var ln=k.top*we,en=k.bottom*we;return O==="height"||O==="both"?(nr=pe[1]+ln-te[0],yr=pe[1]+en+te[2]):(nr=pe[1]+(ln+en-Me.displaySize[1])/2,yr=nr+Me.displaySize[1]),{image:Me,top:nr,right:qt,bottom:yr,left:Or,collisionPadding:Oe}}var Sh=function(C){function k(O,te,pe,we){C.call(this,O,te),this.angle=pe,we!==void 0&&(this.segment=we)}return C&&(k.__proto__=C),k.prototype=Object.create(C&&C.prototype),k.prototype.constructor=k,k.prototype.clone=function(){return new k(this.x,this.y,this.angle,this.segment)},k}(v);Be("Anchor",Sh);var lc=128;function e0(C,k){var O=k.expression;if(O.kind==="constant"){var te=O.evaluate(new fi(C+1));return{kind:"constant",layoutSize:te}}else{if(O.kind==="source")return{kind:"source"};for(var pe=O.zoomStops,we=O.interpolationType,Me=0;Me<pe.length&&pe[Me]<=C;)Me++;Me=Math.max(0,Me-1);for(var Oe=Me;Oe<pe.length&&pe[Oe]<C+1;)Oe++;Oe=Math.min(pe.length-1,Oe);var tt=pe[Me],ht=pe[Oe];if(O.kind==="composite")return{kind:"composite",minZoom:tt,maxZoom:ht,interpolationType:we};var gt=O.evaluate(new fi(tt)),Ot=O.evaluate(new fi(ht));return{kind:"camera",minZoom:tt,maxZoom:ht,minSize:gt,maxSize:Ot,interpolationType:we}}}function yy(C,k,O){var te=k.uSize,pe=k.uSizeT,we=O.lowerSize,Me=O.upperSize;return C.kind==="source"?we/lc:C.kind==="composite"?yo(we/lc,Me/lc,pe):te}function my(C,k){var O=0,te=0;if(C.kind==="constant")te=C.layoutSize;else if(C.kind!=="source"){var pe=C.interpolationType,we=C.minZoom,Me=C.maxZoom,Oe=pe?f(mo.interpolationFactor(pe,k,we,Me),0,1):0;C.kind==="camera"?te=yo(C.minSize,C.maxSize,Oe):O=Oe}return{uSizeT:O,uSize:te}}var y_=Object.freeze({__proto__:null,getSizeData:e0,evaluateSizeForFeature:yy,evaluateSizeForZoom:my,SIZE_PACK_FACTOR:lc});function xy(C,k,O,te,pe){if(k.segment===void 0)return!0;for(var we=k,Me=k.segment+1,Oe=0;Oe>-O/2;){if(Me--,Me<0)return!1;Oe-=C[Me].dist(we),we=C[Me]}Oe+=C[Me].dist(C[Me+1]),Me++;for(var tt=[],ht=0;Oe<O/2;){var gt=C[Me-1],Ot=C[Me],nr=C[Me+1];if(!nr)return!1;var qt=gt.angleTo(Ot)-Ot.angleTo(nr);for(qt=Math.abs((qt+3*Math.PI)%(Math.PI*2)-Math.PI),tt.push({distance:Oe,angleDelta:qt}),ht+=qt;Oe-tt[0].distance>te;)ht-=tt.shift().angleDelta;if(ht>pe)return!1;Me++,Oe+=Ot.dist(nr)}return!0}function by(C){for(var k=0,O=0;O<C.length-1;O++)k+=C[O].dist(C[O+1]);return k}function _y(C,k,O){return C?3/5*k*O:0}function wy(C,k){return Math.max(C?C.right-C.left:0,k?k.right-k.left:0)}function m_(C,k,O,te,pe,we){for(var Me=_y(O,pe,we),Oe=wy(O,te)*we,tt=0,ht=by(C)/2,gt=0;gt<C.length-1;gt++){var Ot=C[gt],nr=C[gt+1],qt=Ot.dist(nr);if(tt+qt>ht){var yr=(ht-tt)/qt,Or=yo(Ot.x,nr.x,yr),ln=yo(Ot.y,nr.y,yr),en=new Sh(Or,ln,nr.angleTo(Ot),gt);return en._round(),!Me||xy(C,en,Oe,Me,k)?en:void 0}tt+=qt}}function x_(C,k,O,te,pe,we,Me,Oe,tt){var ht=_y(te,we,Me),gt=wy(te,pe),Ot=gt*Me,nr=C[0].x===0||C[0].x===tt||C[0].y===0||C[0].y===tt;k-Ot<k/4&&(k=Ot+k/4);var qt=we*2,yr=nr?k/2*Oe%k:(gt/2+qt)*Me*Oe%k;return Ty(C,yr,k,ht,O,Ot,nr,!1,tt)}function Ty(C,k,O,te,pe,we,Me,Oe,tt){for(var ht=we/2,gt=by(C),Ot=0,nr=k-O,qt=[],yr=0;yr<C.length-1;yr++){for(var Or=C[yr],ln=C[yr+1],en=Or.dist(ln),kn=ln.angleTo(Or);nr+O<Ot+en;){nr+=O;var bn=(nr-Ot)/en,Cn=yo(Or.x,ln.x,bn),zn=yo(Or.y,ln.y,bn);if(Cn>=0&&Cn<tt&&zn>=0&&zn<tt&&nr-ht>=0&&nr+ht<=gt){var Xn=new Sh(Cn,zn,kn,yr);Xn._round(),(!te||xy(C,Xn,we,te,pe))&&qt.push(Xn)}}Ot+=en}return!Oe&&!qt.length&&!Me&&(qt=Ty(C,Ot/2,O,te,pe,we,Me,!0,tt)),qt}function Ay(C,k,O,te,pe){for(var we=[],Me=0;Me<C.length;Me++)for(var Oe=C[Me],tt=void 0,ht=0;ht<Oe.length-1;ht++){var gt=Oe[ht],Ot=Oe[ht+1];gt.x<k&&Ot.x<k||(gt.x<k?gt=new v(k,gt.y+(Ot.y-gt.y)*((k-gt.x)/(Ot.x-gt.x)))._round():Ot.x<k&&(Ot=new v(k,gt.y+(Ot.y-gt.y)*((k-gt.x)/(Ot.x-gt.x)))._round()),!(gt.y<O&&Ot.y<O)&&(gt.y<O?gt=new v(gt.x+(Ot.x-gt.x)*((O-gt.y)/(Ot.y-gt.y)),O)._round():Ot.y<O&&(Ot=new v(gt.x+(Ot.x-gt.x)*((O-gt.y)/(Ot.y-gt.y)),O)._round()),!(gt.x>=te&&Ot.x>=te)&&(gt.x>=te?gt=new v(te,gt.y+(Ot.y-gt.y)*((te-gt.x)/(Ot.x-gt.x)))._round():Ot.x>=te&&(Ot=new v(te,gt.y+(Ot.y-gt.y)*((te-gt.x)/(Ot.x-gt.x)))._round()),!(gt.y>=pe&&Ot.y>=pe)&&(gt.y>=pe?gt=new v(gt.x+(Ot.x-gt.x)*((pe-gt.y)/(Ot.y-gt.y)),pe)._round():Ot.y>=pe&&(Ot=new v(gt.x+(Ot.x-gt.x)*((pe-gt.y)/(Ot.y-gt.y)),pe)._round()),(!tt||!gt.equals(tt[tt.length-1]))&&(tt=[gt],we.push(tt)),tt.push(Ot)))))}return we}var Eh=Ll;function My(C,k,O,te){var pe=[],we=C.image,Me=we.pixelRatio,Oe=we.paddedRect.w-2*Eh,tt=we.paddedRect.h-2*Eh,ht=C.right-C.left,gt=C.bottom-C.top,Ot=we.stretchX||[[0,Oe]],nr=we.stretchY||[[0,tt]],qt=function(Fi,ki){return Fi+ki[1]-ki[0]},yr=Ot.reduce(qt,0),Or=nr.reduce(qt,0),ln=Oe-yr,en=tt-Or,kn=0,bn=yr,Cn=0,zn=Or,Xn=0,ua=ln,oa=0,Na=en;if(we.content&&te){var Sa=we.content;kn=bp(Ot,0,Sa[0]),Cn=bp(nr,0,Sa[1]),bn=bp(Ot,Sa[0],Sa[2]),zn=bp(nr,Sa[1],Sa[3]),Xn=Sa[0]-kn,oa=Sa[1]-Cn,ua=Sa[2]-Sa[0]-bn,Na=Sa[3]-Sa[1]-zn}var La=function(Fi,ki,so,ho){var Do=_p(Fi.stretch-kn,bn,ht,C.left),Bo=wp(Fi.fixed-Xn,ua,Fi.stretch,yr),cs=_p(ki.stretch-Cn,zn,gt,C.top),qo=wp(ki.fixed-oa,Na,ki.stretch,Or),Gs=_p(so.stretch-kn,bn,ht,C.left),Ys=wp(so.fixed-Xn,ua,so.stretch,yr),fs=_p(ho.stretch-Cn,zn,gt,C.top),qs=wp(ho.fixed-oa,Na,ho.stretch,Or),el=new v(Do,cs),as=new v(Gs,cs),tl=new v(Gs,fs),Kl=new v(Do,fs),jc=new v(Bo/Me,qo/Me),yf=new v(Ys/Me,qs/Me),mf=k*Math.PI/180;if(mf){var xf=Math.sin(mf),Fh=Math.cos(mf),Fu=[Fh,-xf,xf,Fh];el._matMult(Fu),as._matMult(Fu),Kl._matMult(Fu),tl._matMult(Fu)}var Cp=Fi.stretch+Fi.fixed,l0=so.stretch+so.fixed,kp=ki.stretch+ki.fixed,u0=ho.stretch+ho.fixed,pu={x:we.paddedRect.x+Eh+Cp,y:we.paddedRect.y+Eh+kp,w:l0-Cp,h:u0-kp},zh=ua/Me/ht,Lp=Na/Me/gt;return{tl:el,tr:as,bl:Kl,br:tl,tex:pu,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:jc,pixelOffsetBR:yf,minFontScaleX:zh,minFontScaleY:Lp,isSDF:O}};if(!te||!we.stretchX&&!we.stretchY)pe.push(La({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Oe+1},{fixed:0,stretch:tt+1}));else for(var ii=Sy(Ot,ln,yr),Ia=Sy(nr,en,Or),za=0;za<ii.length-1;za++)for(var pi=ii[za],ni=ii[za+1],Ri=0;Ri<Ia.length-1;Ri++){var qi=Ia[Ri],Ii=Ia[Ri+1];pe.push(La(pi,qi,ni,Ii))}return pe}function bp(C,k,O){for(var te=0,pe=0,we=C;pe<we.length;pe+=1){var Me=we[pe];te+=Math.max(k,Math.min(O,Me[1]))-Math.max(k,Math.min(O,Me[0]))}return te}function Sy(C,k,O){for(var te=[{fixed:-Eh,stretch:0}],pe=0,we=C;pe<we.length;pe+=1){var Me=we[pe],Oe=Me[0],tt=Me[1],ht=te[te.length-1];te.push({fixed:Oe-ht.stretch,stretch:ht.stretch}),te.push({fixed:Oe-ht.stretch,stretch:ht.stretch+(tt-Oe)})}return te.push({fixed:k+Eh,stretch:O}),te}function _p(C,k,O,te){return C/k*O+te}function wp(C,k,O,te){return C-k*O/te}function b_(C,k,O,te,pe,we,Me,Oe){for(var tt=te.layout.get("text-rotate").evaluate(we,{})*Math.PI/180,ht=[],gt=0,Ot=k.positionedLines;gt<Ot.length;gt+=1)for(var nr=Ot[gt],qt=0,yr=nr.positionedGlyphs;qt<yr.length;qt+=1){var Or=yr[qt];if(!!Or.rect){var ln=Or.rect||{},en=1,kn=ly+en,bn=!0,Cn=1,zn=0,Xn=(pe||Oe)&&Or.vertical,ua=Or.metrics.advance*Or.scale/2;if(Oe&&k.verticalizable){var oa=(Or.scale-1)*As,Na=(As-Or.metrics.width*Or.scale)/2;zn=nr.lineOffset/2-(Or.imageName?-Na:oa)}if(Or.imageName){var Sa=Me[Or.imageName];bn=Sa.sdf,Cn=Sa.pixelRatio,kn=Ll/Cn}var La=pe?[Or.x+ua,Or.y]:[0,0],ii=pe?[0,0]:[Or.x+ua+O[0],Or.y+O[1]-zn],Ia=[0,0];Xn&&(Ia=ii,ii=[0,0]);var za=(Or.metrics.left-kn)*Or.scale-ua+ii[0],pi=(-Or.metrics.top-kn)*Or.scale+ii[1],ni=za+ln.w*Or.scale/Cn,Ri=pi+ln.h*Or.scale/Cn,qi=new v(za,pi),Ii=new v(ni,pi),Fi=new v(za,Ri),ki=new v(ni,Ri);if(Xn){var so=new v(-ua,ua-Ev),ho=-Math.PI/2,Do=As/2-ua,Bo=Or.imageName?Do:0,cs=new v(5-Ev-Do,-Bo),qo=new(Function.prototype.bind.apply(v,[null].concat(Ia)));qi._rotateAround(ho,so)._add(cs)._add(qo),Ii._rotateAround(ho,so)._add(cs)._add(qo),Fi._rotateAround(ho,so)._add(cs)._add(qo),ki._rotateAround(ho,so)._add(cs)._add(qo)}if(tt){var Gs=Math.sin(tt),Ys=Math.cos(tt),fs=[Ys,-Gs,Gs,Ys];qi._matMult(fs),Ii._matMult(fs),Fi._matMult(fs),ki._matMult(fs)}var qs=new v(0,0),el=new v(0,0),as=0,tl=0;ht.push({tl:qi,tr:Ii,bl:Fi,br:ki,tex:ln,writingMode:k.writingMode,glyphOffset:La,sectionIndex:Or.sectionIndex,isSDF:bn,pixelOffsetTL:qs,pixelOffsetBR:el,minFontScaleX:as,minFontScaleY:tl})}}return ht}var Tp=function(k,O,te,pe,we,Me,Oe,tt,ht,gt){if(this.boxStartIndex=k.length,ht){var Ot=Me.top,nr=Me.bottom,qt=Me.collisionPadding;qt&&(Ot-=qt[1],nr+=qt[3]);var yr=nr-Ot;yr>0&&(yr=Math.max(10,yr),this.circleDiameter=yr)}else{var Or=Me.top*Oe-tt,ln=Me.bottom*Oe+tt,en=Me.left*Oe-tt,kn=Me.right*Oe+tt,bn=Me.collisionPadding;if(bn&&(en-=bn[0]*Oe,Or-=bn[1]*Oe,kn+=bn[2]*Oe,ln+=bn[3]*Oe),gt){var Cn=new v(en,Or),zn=new v(kn,Or),Xn=new v(en,ln),ua=new v(kn,ln),oa=gt*Math.PI/180;Cn._rotate(oa),zn._rotate(oa),Xn._rotate(oa),ua._rotate(oa),en=Math.min(Cn.x,zn.x,Xn.x,ua.x),kn=Math.max(Cn.x,zn.x,Xn.x,ua.x),Or=Math.min(Cn.y,zn.y,Xn.y,ua.y),ln=Math.max(Cn.y,zn.y,Xn.y,ua.y)}k.emplaceBack(O.x,O.y,en,Or,kn,ln,te,pe,we)}this.boxEndIndex=k.length},Ch=function(k,O){if(k===void 0&&(k=[]),O===void 0&&(O=__),this.data=k,this.length=this.data.length,this.compare=O,this.length>0)for(var te=(this.length>>1)-1;te>=0;te--)this._down(te)};Ch.prototype.push=function(k){this.data.push(k),this.length++,this._up(this.length-1)},Ch.prototype.pop=function(){if(this.length!==0){var k=this.data[0],O=this.data.pop();return this.length--,this.length>0&&(this.data[0]=O,this._down(0)),k}},Ch.prototype.peek=function(){return this.data[0]},Ch.prototype._up=function(k){for(var O=this,te=O.data,pe=O.compare,we=te[k];k>0;){var Me=k-1>>1,Oe=te[Me];if(pe(we,Oe)>=0)break;te[k]=Oe,k=Me}te[k]=we},Ch.prototype._down=function(k){for(var O=this,te=O.data,pe=O.compare,we=this.length>>1,Me=te[k];k<we;){var Oe=(k<<1)+1,tt=te[Oe],ht=Oe+1;if(ht<this.length&&pe(te[ht],tt)<0&&(Oe=ht,tt=te[ht]),pe(tt,Me)>=0)break;te[k]=tt,k=Oe}te[k]=Me};function __(C,k){return C<k?-1:C>k?1:0}function w_(C,k,O){k===void 0&&(k=1),O===void 0&&(O=!1);for(var te=1/0,pe=1/0,we=-1/0,Me=-1/0,Oe=C[0],tt=0;tt<Oe.length;tt++){var ht=Oe[tt];(!tt||ht.x<te)&&(te=ht.x),(!tt||ht.y<pe)&&(pe=ht.y),(!tt||ht.x>we)&&(we=ht.x),(!tt||ht.y>Me)&&(Me=ht.y)}var gt=we-te,Ot=Me-pe,nr=Math.min(gt,Ot),qt=nr/2,yr=new Ch([],T_);if(nr===0)return new v(te,pe);for(var Or=te;Or<we;Or+=nr)for(var ln=pe;ln<Me;ln+=nr)yr.push(new kh(Or+qt,ln+qt,qt,C));for(var en=M_(C),kn=yr.length;yr.length;){var bn=yr.pop();(bn.d>en.d||!en.d)&&(en=bn,O&&console.log("found best %d after %d probes",Math.round(1e4*bn.d)/1e4,kn)),!(bn.max-en.d<=k)&&(qt=bn.h/2,yr.push(new kh(bn.p.x-qt,bn.p.y-qt,qt,C)),yr.push(new kh(bn.p.x+qt,bn.p.y-qt,qt,C)),yr.push(new kh(bn.p.x-qt,bn.p.y+qt,qt,C)),yr.push(new kh(bn.p.x+qt,bn.p.y+qt,qt,C)),kn+=4)}return O&&(console.log("num probes: "+kn),console.log("best distance: "+en.d)),en.p}function T_(C,k){return k.max-C.max}function kh(C,k,O,te){this.p=new v(C,k),this.h=O,this.d=A_(this.p,te),this.max=this.d+this.h*Math.SQRT2}function A_(C,k){for(var O=!1,te=1/0,pe=0;pe<k.length;pe++)for(var we=k[pe],Me=0,Oe=we.length,tt=Oe-1;Me<Oe;tt=Me++){var ht=we[Me],gt=we[tt];ht.y>C.y!=gt.y>C.y&&C.x<(gt.x-ht.x)*(C.y-ht.y)/(gt.y-ht.y)+ht.x&&(O=!O),te=Math.min(te,ic(C,ht,gt))}return(O?1:-1)*Math.sqrt(te)}function M_(C){for(var k=0,O=0,te=0,pe=C[0],we=0,Me=pe.length,Oe=Me-1;we<Me;Oe=we++){var tt=pe[we],ht=pe[Oe],gt=tt.x*ht.y-ht.x*tt.y;O+=(tt.x+ht.x)*gt,te+=(tt.y+ht.y)*gt,k+=gt*3}return new kh(O/k,te/k,0,C)}var Lh=7,t0=Number.POSITIVE_INFINITY;function Ey(C,k){function O(pe,we){var Me=0,Oe=0;we<0&&(we=0);var tt=we/Math.sqrt(2);switch(pe){case"top-right":case"top-left":Oe=tt-Lh;break;case"bottom-right":case"bottom-left":Oe=-tt+Lh;break;case"bottom":Oe=-we+Lh;break;case"top":Oe=we-Lh;break}switch(pe){case"top-right":case"bottom-right":Me=-tt;break;case"top-left":case"bottom-left":Me=tt;break;case"left":Me=we;break;case"right":Me=-we;break}return[Me,Oe]}function te(pe,we,Me){var Oe=0,tt=0;switch(we=Math.abs(we),Me=Math.abs(Me),pe){case"top-right":case"top-left":case"top":tt=Me-Lh;break;case"bottom-right":case"bottom-left":case"bottom":tt=-Me+Lh;break}switch(pe){case"top-right":case"bottom-right":case"right":Oe=-we;break;case"top-left":case"bottom-left":case"left":Oe=we;break}return[Oe,tt]}return k[1]!==t0?te(C,k[0],k[1]):O(C,k[0])}function S_(C,k,O,te,pe,we,Me){C.createArrays();var Oe=512*C.overscaling;C.tilePixelRatio=Ha/Oe,C.compareText={},C.iconsNeedLinear=!1;var tt=C.layers[0].layout,ht=C.layers[0]._unevaluatedLayout._values,gt={};if(C.textSizeData.kind==="composite"){var Ot=C.textSizeData,nr=Ot.minZoom,qt=Ot.maxZoom;gt.compositeTextSizes=[ht["text-size"].possiblyEvaluate(new fi(nr),Me),ht["text-size"].possiblyEvaluate(new fi(qt),Me)]}if(C.iconSizeData.kind==="composite"){var yr=C.iconSizeData,Or=yr.minZoom,ln=yr.maxZoom;gt.compositeIconSizes=[ht["icon-size"].possiblyEvaluate(new fi(Or),Me),ht["icon-size"].possiblyEvaluate(new fi(ln),Me)]}gt.layoutTextSize=ht["text-size"].possiblyEvaluate(new fi(C.zoom+1),Me),gt.layoutIconSize=ht["icon-size"].possiblyEvaluate(new fi(C.zoom+1),Me),gt.textMaxSize=ht["text-size"].possiblyEvaluate(new fi(18));for(var en=tt.get("text-line-height")*As,kn=tt.get("text-rotation-alignment")==="map"&&tt.get("symbol-placement")!=="point",bn=tt.get("text-keep-upright"),Cn=tt.get("text-size"),zn=function(){var oa=ua[Xn],Na=tt.get("text-font").evaluate(oa,{},Me).join(","),Sa=Cn.evaluate(oa,{},Me),La=gt.layoutTextSize.evaluate(oa,{},Me),ii=gt.layoutIconSize.evaluate(oa,{},Me),Ia={horizontal:{},vertical:void 0},za=oa.text,pi=[0,0];if(za){var ni=za.toString(),Ri=tt.get("text-letter-spacing").evaluate(oa,{},Me)*As,qi=qr(ni)?Ri:0,Ii=tt.get("text-anchor").evaluate(oa,{},Me),Fi=tt.get("text-variable-anchor");if(!Fi){var ki=tt.get("text-radial-offset").evaluate(oa,{},Me);ki?pi=Ey(Ii,[ki*As,t0]):pi=tt.get("text-offset").evaluate(oa,{},Me).map(function(jc){return jc*As})}var so=kn?"center":tt.get("text-justify").evaluate(oa,{},Me),ho=tt.get("symbol-placement"),Do=ho==="point"?tt.get("text-max-width").evaluate(oa,{},Me)*As:0,Bo=function(){C.allowVerticalPlacement&&Er(ni)&&(Ia.vertical=xp(za,k,O,pe,Na,Do,en,Ii,"left",qi,pi,jl.vertical,!0,ho,La,Sa))};if(!kn&&Fi){for(var cs=so==="auto"?Fi.map(function(jc){return r0(jc)}):[so],qo=!1,Gs=0;Gs<cs.length;Gs++){var Ys=cs[Gs];if(!Ia.horizontal[Ys])if(qo)Ia.horizontal[Ys]=Ia.horizontal[0];else{var fs=xp(za,k,O,pe,Na,Do,en,"center",Ys,qi,pi,jl.horizontal,!1,ho,La,Sa);fs&&(Ia.horizontal[Ys]=fs,qo=fs.positionedLines.length===1)}}Bo()}else{so==="auto"&&(so=r0(Ii));var qs=xp(za,k,O,pe,Na,Do,en,Ii,so,qi,pi,jl.horizontal,!1,ho,La,Sa);qs&&(Ia.horizontal[so]=qs),Bo(),Er(ni)&&kn&&bn&&(Ia.vertical=xp(za,k,O,pe,Na,Do,en,Ii,so,qi,pi,jl.vertical,!1,ho,La,Sa))}}var el=void 0,as=!1;if(oa.icon&&oa.icon.name){var tl=te[oa.icon.name];tl&&(el=g_(pe[oa.icon.name],tt.get("icon-offset").evaluate(oa,{},Me),tt.get("icon-anchor").evaluate(oa,{},Me)),as=tl.sdf,C.sdfIcons===void 0?C.sdfIcons=tl.sdf:C.sdfIcons!==tl.sdf&&N("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(tl.pixelRatio!==C.pixelRatio||tt.get("icon-rotate").constantOr(1)!==0)&&(C.iconsNeedLinear=!0))}var Kl=ky(Ia.horizontal)||Ia.vertical;C.iconsInText=Kl?Kl.iconsInText:!1,(Kl||el)&&E_(C,oa,Ia,el,te,gt,La,ii,pi,as,Me)},Xn=0,ua=C.features;Xn<ua.length;Xn+=1)zn();we&&C.generateCollisionDebugBuffers()}function r0(C){switch(C){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function E_(C,k,O,te,pe,we,Me,Oe,tt,ht,gt){var Ot=we.textMaxSize.evaluate(k,{});Ot===void 0&&(Ot=Me);var nr=C.layers[0].layout,qt=nr.get("icon-offset").evaluate(k,{},gt),yr=ky(O.horizontal),Or=24,ln=Me/Or,en=C.tilePixelRatio*ln,kn=C.tilePixelRatio*Ot/Or,bn=C.tilePixelRatio*Oe,Cn=C.tilePixelRatio*nr.get("symbol-spacing"),zn=nr.get("text-padding")*C.tilePixelRatio,Xn=nr.get("icon-padding")*C.tilePixelRatio,ua=nr.get("text-max-angle")/180*Math.PI,oa=nr.get("text-rotation-alignment")==="map"&&nr.get("symbol-placement")!=="point",Na=nr.get("icon-rotation-alignment")==="map"&&nr.get("symbol-placement")!=="point",Sa=nr.get("symbol-placement"),La=Cn/2,ii=nr.get("icon-text-fit"),Ia;te&&ii!=="none"&&(C.allowVerticalPlacement&&O.vertical&&(Ia=gy(te,O.vertical,ii,nr.get("icon-text-fit-padding"),qt,ln)),yr&&(te=gy(te,yr,ii,nr.get("icon-text-fit-padding"),qt,ln)));var za=function(Fh,Fu){Fu.x<0||Fu.x>=Ha||Fu.y<0||Fu.y>=Ha||C_(C,Fu,Fh,O,te,pe,Ia,C.layers[0],C.collisionBoxArray,k.index,k.sourceLayerIndex,C.index,en,zn,oa,tt,bn,Xn,Na,qt,k,we,ht,gt,Me)};if(Sa==="line")for(var pi=0,ni=Ay(k.geometry,0,0,Ha,Ha);pi<ni.length;pi+=1)for(var Ri=ni[pi],qi=x_(Ri,Cn,ua,O.vertical||yr,te,Or,kn,C.overscaling,Ha),Ii=0,Fi=qi;Ii<Fi.length;Ii+=1){var ki=Fi[Ii],so=yr;(!so||!k_(C,so.text,La,ki))&&za(Ri,ki)}else if(Sa==="line-center")for(var ho=0,Do=k.geometry;ho<Do.length;ho+=1){var Bo=Do[ho];if(Bo.length>1){var cs=m_(Bo,ua,O.vertical||yr,te,Or,kn);cs&&za(Bo,cs)}}else if(k.type==="Polygon")for(var qo=0,Gs=Wd(k.geometry,0);qo<Gs.length;qo+=1){var Ys=Gs[qo],fs=w_(Ys,16);za(Ys[0],new Sh(fs.x,fs.y,0))}else if(k.type==="LineString")for(var qs=0,el=k.geometry;qs<el.length;qs+=1){var as=el[qs];za(as,new Sh(as[0].x,as[0].y,0))}else if(k.type==="Point")for(var tl=0,Kl=k.geometry;tl<Kl.length;tl+=1)for(var jc=Kl[tl],yf=0,mf=jc;yf<mf.length;yf+=1){var xf=mf[yf];za([xf],new Sh(xf.x,xf.y,0))}}var Cv=255,df=Cv*lc;function Cy(C,k,O,te,pe,we,Me,Oe,tt,ht,gt,Ot,nr,qt,yr){var Or=b_(k,O,Oe,pe,we,Me,te,C.allowVerticalPlacement),ln=C.textSizeData,en=null;ln.kind==="source"?(en=[lc*pe.layout.get("text-size").evaluate(Me,{})],en[0]>df&&N(C.layerIds[0]+': Value for "text-size" is >= '+Cv+'. Reduce your "text-size".')):ln.kind==="composite"&&(en=[lc*qt.compositeTextSizes[0].evaluate(Me,{},yr),lc*qt.compositeTextSizes[1].evaluate(Me,{},yr)],(en[0]>df||en[1]>df)&&N(C.layerIds[0]+': Value for "text-size" is >= '+Cv+'. Reduce your "text-size".')),C.addSymbols(C.text,Or,en,Oe,we,Me,ht,k,tt.lineStartIndex,tt.lineLength,nr,yr);for(var kn=0,bn=gt;kn<bn.length;kn+=1){var Cn=bn[kn];Ot[Cn]=C.text.placedSymbolArray.length-1}return Or.length*4}function ky(C){for(var k in C)return C[k];return null}function C_(C,k,O,te,pe,we,Me,Oe,tt,ht,gt,Ot,nr,qt,yr,Or,ln,en,kn,bn,Cn,zn,Xn,ua,oa){var Na,Sa=C.addToLineVertexArray(k,O),La,ii,Ia,za,pi=0,ni=0,Ri=0,qi=0,Ii=-1,Fi=-1,ki={},so=Fe(""),ho=0,Do=0;if(Oe._unevaluatedLayout.getValue("text-radial-offset")===void 0?(Na=Oe.layout.get("text-offset").evaluate(Cn,{},ua).map(function(Pv){return Pv*As}),ho=Na[0],Do=Na[1]):(ho=Oe.layout.get("text-radial-offset").evaluate(Cn,{},ua)*As,Do=t0),C.allowVerticalPlacement&&te.vertical){var Bo=Oe.layout.get("text-rotate").evaluate(Cn,{},ua),cs=Bo+90,qo=te.vertical;Ia=new Tp(tt,k,ht,gt,Ot,qo,nr,qt,yr,cs),Me&&(za=new Tp(tt,k,ht,gt,Ot,Me,ln,en,yr,cs))}if(pe){var Gs=Oe.layout.get("icon-rotate").evaluate(Cn,{}),Ys=Oe.layout.get("icon-text-fit")!=="none",fs=My(pe,Gs,Xn,Ys),qs=Me?My(Me,Gs,Xn,Ys):void 0;ii=new Tp(tt,k,ht,gt,Ot,pe,ln,en,!1,Gs),pi=fs.length*4;var el=C.iconSizeData,as=null;el.kind==="source"?(as=[lc*Oe.layout.get("icon-size").evaluate(Cn,{})],as[0]>df&&N(C.layerIds[0]+': Value for "icon-size" is >= '+Cv+'. Reduce your "icon-size".')):el.kind==="composite"&&(as=[lc*zn.compositeIconSizes[0].evaluate(Cn,{},ua),lc*zn.compositeIconSizes[1].evaluate(Cn,{},ua)],(as[0]>df||as[1]>df)&&N(C.layerIds[0]+': Value for "icon-size" is >= '+Cv+'. Reduce your "icon-size".')),C.addSymbols(C.icon,fs,as,bn,kn,Cn,!1,k,Sa.lineStartIndex,Sa.lineLength,-1,ua),Ii=C.icon.placedSymbolArray.length-1,qs&&(ni=qs.length*4,C.addSymbols(C.icon,qs,as,bn,kn,Cn,jl.vertical,k,Sa.lineStartIndex,Sa.lineLength,-1,ua),Fi=C.icon.placedSymbolArray.length-1)}for(var tl in te.horizontal){var Kl=te.horizontal[tl];if(!La){so=Fe(Kl.text);var jc=Oe.layout.get("text-rotate").evaluate(Cn,{},ua);La=new Tp(tt,k,ht,gt,Ot,Kl,nr,qt,yr,jc)}var yf=Kl.positionedLines.length===1;if(Ri+=Cy(C,k,Kl,we,Oe,yr,Cn,Or,Sa,te.vertical?jl.horizontal:jl.horizontalOnly,yf?Object.keys(te.horizontal):[tl],ki,Ii,zn,ua),yf)break}te.vertical&&(qi+=Cy(C,k,te.vertical,we,Oe,yr,Cn,Or,Sa,jl.vertical,["vertical"],ki,Fi,zn,ua));var mf=La?La.boxStartIndex:C.collisionBoxArray.length,xf=La?La.boxEndIndex:C.collisionBoxArray.length,Fh=Ia?Ia.boxStartIndex:C.collisionBoxArray.length,Fu=Ia?Ia.boxEndIndex:C.collisionBoxArray.length,Cp=ii?ii.boxStartIndex:C.collisionBoxArray.length,l0=ii?ii.boxEndIndex:C.collisionBoxArray.length,kp=za?za.boxStartIndex:C.collisionBoxArray.length,u0=za?za.boxEndIndex:C.collisionBoxArray.length,pu=-1,zh=function(Pv,Wy){return Pv&&Pv.circleDiameter?Math.max(Pv.circleDiameter,Wy):Wy};pu=zh(La,pu),pu=zh(Ia,pu),pu=zh(ii,pu),pu=zh(za,pu);var Lp=pu>-1?1:0;Lp&&(pu*=oa/As),C.glyphOffsetArray.length>=$i.MAX_GLYPHS&&N("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Cn.sortKey!==void 0&&C.addToSortKeyRanges(C.symbolInstances.length,Cn.sortKey),C.symbolInstances.emplaceBack(k.x,k.y,ki.right>=0?ki.right:-1,ki.center>=0?ki.center:-1,ki.left>=0?ki.left:-1,ki.vertical||-1,Ii,Fi,so,mf,xf,Fh,Fu,Cp,l0,kp,u0,ht,Ri,qi,pi,ni,Lp,0,nr,ho,Do,pu)}function k_(C,k,O,te){var pe=C.compareText;if(!(k in pe))pe[k]=[];else for(var we=pe[k],Me=we.length-1;Me>=0;Me--)if(te.dist(we[Me])<O)return!0;return pe[k].push(te),!1}var L_=wh.VectorTileFeature.types,P_=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Ap(C,k,O,te,pe,we,Me,Oe,tt,ht,gt,Ot,nr){var qt=Oe?Math.min(df,Math.round(Oe[0])):0,yr=Oe?Math.min(df,Math.round(Oe[1])):0;C.emplaceBack(k,O,Math.round(te*32),Math.round(pe*32),we,Me,(qt<<1)+(tt?1:0),yr,ht*16,gt*16,Ot*256,nr*256)}function n0(C,k,O){C.emplaceBack(k.x,k.y,O),C.emplaceBack(k.x,k.y,O),C.emplaceBack(k.x,k.y,O),C.emplaceBack(k.x,k.y,O)}function D_(C){for(var k=0,O=C.sections;k<O.length;k+=1){var te=O[k];if(ia(te.text))return!0}return!1}var Ph=function(k){this.layoutVertexArray=new Cc,this.indexArray=new ac,this.programConfigurations=k,this.segments=new W,this.dynamicLayoutVertexArray=new cv,this.opacityVertexArray=new fv,this.placedSymbolArray=new ff};Ph.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},Ph.prototype.upload=function(k,O,te,pe){this.isEmpty()||(te&&(this.layoutVertexBuffer=k.createVertexBuffer(this.layoutVertexArray,Kd.members),this.indexBuffer=k.createIndexBuffer(this.indexArray,O),this.dynamicLayoutVertexBuffer=k.createVertexBuffer(this.dynamicLayoutVertexArray,R2.members,!0),this.opacityVertexBuffer=k.createVertexBuffer(this.opacityVertexArray,P_,!0),this.opacityVertexBuffer.itemSize=1),(te||pe)&&this.programConfigurations.upload(k))},Ph.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Be("SymbolBuffers",Ph);var kv=function(k,O,te){this.layoutVertexArray=new k,this.layoutAttributes=O,this.indexArray=new te,this.segments=new W,this.collisionVertexArray=new hl};kv.prototype.upload=function(k){this.layoutVertexBuffer=k.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=k.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=k.createVertexBuffer(this.collisionVertexArray,I2.members,!0)},kv.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Be("CollisionBuffers",kv);var $i=function(k){this.collisionBoxArray=k.collisionBoxArray,this.zoom=k.zoom,this.overscaling=k.overscaling,this.layers=k.layers,this.layerIds=this.layers.map(function(tt){return tt.id}),this.index=k.index,this.pixelRatio=k.pixelRatio,this.sourceLayerIndex=k.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=yh([]),this.placementViewportMatrix=yh([]);var O=this.layers[0],te=O._unevaluatedLayout._values;this.textSizeData=e0(this.zoom,te["text-size"]),this.iconSizeData=e0(this.zoom,te["icon-size"]);var pe=this.layers[0].layout,we=pe.get("symbol-sort-key"),Me=pe.get("symbol-z-order");this.sortFeaturesByKey=Me!=="viewport-y"&&we.constantOr(1)!==void 0;var Oe=Me==="viewport-y"||Me==="auto"&&!this.sortFeaturesByKey;this.sortFeaturesByY=Oe&&(pe.get("text-allow-overlap")||pe.get("icon-allow-overlap")||pe.get("text-ignore-placement")||pe.get("icon-ignore-placement")),pe.get("symbol-placement")==="point"&&(this.writingModes=pe.get("text-writing-mode").map(function(tt){return jl[tt]})),this.stateDependentLayerIds=this.layers.filter(function(tt){return tt.isStateDependent()}).map(function(tt){return tt.id}),this.sourceID=k.sourceID};$i.prototype.createArrays=function(){this.text=new Ph(new si(Kd.members,this.layers,this.zoom,function(k){return/^text/.test(k)})),this.icon=new Ph(new si(Kd.members,this.layers,this.zoom,function(k){return/^icon/.test(k)})),this.glyphOffsetArray=new hu,this.lineVertexArray=new op,this.symbolInstances=new ip},$i.prototype.calculateGlyphDependencies=function(k,O,te,pe,we){for(var Me=0;Me<k.length;Me++)if(O[k.charCodeAt(Me)]=!0,(te||pe)&&we){var Oe=Av[k.charAt(Me)];Oe&&(O[Oe.charCodeAt(0)]=!0)}},$i.prototype.populate=function(k,O,te){var pe=this.layers[0],we=pe.layout,Me=we.get("text-font"),Oe=we.get("text-field"),tt=we.get("icon-image"),ht=(Oe.value.kind!=="constant"||Oe.value.value instanceof ji&&!Oe.value.value.isEmpty()||Oe.value.value.toString().length>0)&&(Me.value.kind!=="constant"||Me.value.value.length>0),gt=tt.value.kind!=="constant"||!!tt.value.value||Object.keys(tt.parameters).length>0,Ot=we.get("symbol-sort-key");if(this.features=[],!(!ht&&!gt)){for(var nr=O.iconDependencies,qt=O.glyphDependencies,yr=O.availableImages,Or=new fi(this.zoom),ln=0,en=k;ln<en.length;ln+=1){var kn=en[ln],bn=kn.feature,Cn=kn.id,zn=kn.index,Xn=kn.sourceLayerIndex,ua=pe._featureFilter.needGeometry,oa={type:bn.type,id:Cn,properties:bn.properties,geometry:ua?Zi(bn):[]};if(!!pe._featureFilter.filter(Or,oa,te)){ua||(oa.geometry=Zi(bn));var Na=void 0;if(ht){var Sa=pe.getValueAndResolveTokens("text-field",oa,te,yr),La=ji.factory(Sa);D_(La)&&(this.hasRTLText=!0),(!this.hasRTLText||_o()==="unavailable"||this.hasRTLText&&Ja.isParsed())&&(Na=N2(La,pe,oa))}var ii=void 0;if(gt){var Ia=pe.getValueAndResolveTokens("icon-image",oa,te,yr);Ia instanceof Io?ii=Ia:ii=Io.fromString(Ia)}if(!(!Na&&!ii)){var za=this.sortFeaturesByKey?Ot.evaluate(oa,{},te):void 0,pi={id:Cn,text:Na,icon:ii,index:zn,sourceLayerIndex:Xn,geometry:Zi(bn),properties:bn.properties,type:L_[bn.type],sortKey:za};if(this.features.push(pi),ii&&(nr[ii.name]=!0),Na){var ni=Me.evaluate(oa,{},te).join(","),Ri=we.get("text-rotation-alignment")==="map"&&we.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(jl.vertical)>=0;for(var qi=0,Ii=Na.sections;qi<Ii.length;qi+=1){var Fi=Ii[qi];if(Fi.image)nr[Fi.image.name]=!0;else{var ki=Er(Na.toString()),so=Fi.fontStack||ni,ho=qt[so]=qt[so]||{};this.calculateGlyphDependencies(Fi.text,ho,Ri,this.allowVerticalPlacement,ki)}}}}}}we.get("symbol-placement")==="line"&&(this.features=O2(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Do,Bo){return Do.sortKey-Bo.sortKey})}},$i.prototype.update=function(k,O,te){!this.stateDependentLayers.length||(this.text.programConfigurations.updatePaintArrays(k,O,this.layers,te),this.icon.programConfigurations.updatePaintArrays(k,O,this.layers,te))},$i.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},$i.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},$i.prototype.upload=function(k){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(k),this.iconCollisionBox.upload(k)),this.text.upload(k,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(k,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},$i.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},$i.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},$i.prototype.addToLineVertexArray=function(k,O){var te=this.lineVertexArray.length;if(k.segment!==void 0){for(var pe=k.dist(O[k.segment+1]),we=k.dist(O[k.segment]),Me={},Oe=k.segment+1;Oe<O.length;Oe++)Me[Oe]={x:O[Oe].x,y:O[Oe].y,tileUnitDistanceFromAnchor:pe},Oe<O.length-1&&(pe+=O[Oe+1].dist(O[Oe]));for(var tt=k.segment||0;tt>=0;tt--)Me[tt]={x:O[tt].x,y:O[tt].y,tileUnitDistanceFromAnchor:we},tt>0&&(we+=O[tt-1].dist(O[tt]));for(var ht=0;ht<O.length;ht++){var gt=Me[ht];this.lineVertexArray.emplaceBack(gt.x,gt.y,gt.tileUnitDistanceFromAnchor)}}return{lineStartIndex:te,lineLength:this.lineVertexArray.length-te}},$i.prototype.addSymbols=function(k,O,te,pe,we,Me,Oe,tt,ht,gt,Ot,nr){for(var qt=k.indexArray,yr=k.layoutVertexArray,Or=k.segments.prepareSegment(4*O.length,yr,qt,Me.sortKey),ln=this.glyphOffsetArray.length,en=Or.vertexLength,kn=this.allowVerticalPlacement&&Oe===jl.vertical?Math.PI/2:0,bn=Me.text&&Me.text.sections,Cn=0;Cn<O.length;Cn++){var zn=O[Cn],Xn=zn.tl,ua=zn.tr,oa=zn.bl,Na=zn.br,Sa=zn.tex,La=zn.pixelOffsetTL,ii=zn.pixelOffsetBR,Ia=zn.minFontScaleX,za=zn.minFontScaleY,pi=zn.glyphOffset,ni=zn.isSDF,Ri=zn.sectionIndex,qi=Or.vertexLength,Ii=pi[1];Ap(yr,tt.x,tt.y,Xn.x,Ii+Xn.y,Sa.x,Sa.y,te,ni,La.x,La.y,Ia,za),Ap(yr,tt.x,tt.y,ua.x,Ii+ua.y,Sa.x+Sa.w,Sa.y,te,ni,ii.x,La.y,Ia,za),Ap(yr,tt.x,tt.y,oa.x,Ii+oa.y,Sa.x,Sa.y+Sa.h,te,ni,La.x,ii.y,Ia,za),Ap(yr,tt.x,tt.y,Na.x,Ii+Na.y,Sa.x+Sa.w,Sa.y+Sa.h,te,ni,ii.x,ii.y,Ia,za),n0(k.dynamicLayoutVertexArray,tt,kn),qt.emplaceBack(qi,qi+1,qi+2),qt.emplaceBack(qi+1,qi+2,qi+3),Or.vertexLength+=4,Or.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(pi[0]),(Cn===O.length-1||Ri!==O[Cn+1].sectionIndex)&&k.programConfigurations.populatePaintArrays(yr.length,Me,Me.index,{},nr,bn&&bn[Ri])}k.placedSymbolArray.emplaceBack(tt.x,tt.y,ln,this.glyphOffsetArray.length-ln,en,ht,gt,tt.segment,te?te[0]:0,te?te[1]:0,pe[0],pe[1],Oe,0,!1,0,Ot)},$i.prototype._addCollisionDebugVertex=function(k,O,te,pe,we,Me){return O.emplaceBack(0,0),k.emplaceBack(te.x,te.y,pe,we,Math.round(Me.x),Math.round(Me.y))},$i.prototype.addCollisionDebugVertices=function(k,O,te,pe,we,Me,Oe){var tt=we.segments.prepareSegment(4,we.layoutVertexArray,we.indexArray),ht=tt.vertexLength,gt=we.layoutVertexArray,Ot=we.collisionVertexArray,nr=Oe.anchorX,qt=Oe.anchorY;this._addCollisionDebugVertex(gt,Ot,Me,nr,qt,new v(k,O)),this._addCollisionDebugVertex(gt,Ot,Me,nr,qt,new v(te,O)),this._addCollisionDebugVertex(gt,Ot,Me,nr,qt,new v(te,pe)),this._addCollisionDebugVertex(gt,Ot,Me,nr,qt,new v(k,pe)),tt.vertexLength+=4;var yr=we.indexArray;yr.emplaceBack(ht,ht+1),yr.emplaceBack(ht+1,ht+2),yr.emplaceBack(ht+2,ht+3),yr.emplaceBack(ht+3,ht),tt.primitiveLength+=4},$i.prototype.addDebugCollisionBoxes=function(k,O,te,pe){for(var we=k;we<O;we++){var Me=this.collisionBoxArray.get(we),Oe=Me.x1,tt=Me.y1,ht=Me.x2,gt=Me.y2;this.addCollisionDebugVertices(Oe,tt,ht,gt,pe?this.textCollisionBox:this.iconCollisionBox,Me.anchorPoint,te)}},$i.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new kv(hh,ny.members,Bf),this.iconCollisionBox=new kv(hh,ny.members,Bf);for(var k=0;k<this.symbolInstances.length;k++){var O=this.symbolInstances.get(k);this.addDebugCollisionBoxes(O.textBoxStartIndex,O.textBoxEndIndex,O,!0),this.addDebugCollisionBoxes(O.verticalTextBoxStartIndex,O.verticalTextBoxEndIndex,O,!0),this.addDebugCollisionBoxes(O.iconBoxStartIndex,O.iconBoxEndIndex,O,!1),this.addDebugCollisionBoxes(O.verticalIconBoxStartIndex,O.verticalIconBoxEndIndex,O,!1)}},$i.prototype._deserializeCollisionBoxesForSymbol=function(k,O,te,pe,we,Me,Oe,tt,ht){for(var gt={},Ot=O;Ot<te;Ot++){var nr=k.get(Ot);gt.textBox={x1:nr.x1,y1:nr.y1,x2:nr.x2,y2:nr.y2,anchorPointX:nr.anchorPointX,anchorPointY:nr.anchorPointY},gt.textFeatureIndex=nr.featureIndex;break}for(var qt=pe;qt<we;qt++){var yr=k.get(qt);gt.verticalTextBox={x1:yr.x1,y1:yr.y1,x2:yr.x2,y2:yr.y2,anchorPointX:yr.anchorPointX,anchorPointY:yr.anchorPointY},gt.verticalTextFeatureIndex=yr.featureIndex;break}for(var Or=Me;Or<Oe;Or++){var ln=k.get(Or);gt.iconBox={x1:ln.x1,y1:ln.y1,x2:ln.x2,y2:ln.y2,anchorPointX:ln.anchorPointX,anchorPointY:ln.anchorPointY},gt.iconFeatureIndex=ln.featureIndex;break}for(var en=tt;en<ht;en++){var kn=k.get(en);gt.verticalIconBox={x1:kn.x1,y1:kn.y1,x2:kn.x2,y2:kn.y2,anchorPointX:kn.anchorPointX,anchorPointY:kn.anchorPointY},gt.verticalIconFeatureIndex=kn.featureIndex;break}return gt},$i.prototype.deserializeCollisionBoxes=function(k){this.collisionArrays=[];for(var O=0;O<this.symbolInstances.length;O++){var te=this.symbolInstances.get(O);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(k,te.textBoxStartIndex,te.textBoxEndIndex,te.verticalTextBoxStartIndex,te.verticalTextBoxEndIndex,te.iconBoxStartIndex,te.iconBoxEndIndex,te.verticalIconBoxStartIndex,te.verticalIconBoxEndIndex))}},$i.prototype.hasTextData=function(){return this.text.segments.get().length>0},$i.prototype.hasIconData=function(){return this.icon.segments.get().length>0},$i.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},$i.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},$i.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},$i.prototype.addIndicesForPlacedSymbol=function(k,O){for(var te=k.placedSymbolArray.get(O),pe=te.vertexStartIndex+te.numGlyphs*4,we=te.vertexStartIndex;we<pe;we+=4)k.indexArray.emplaceBack(we,we+1,we+2),k.indexArray.emplaceBack(we+1,we+2,we+3)},$i.prototype.getSortedSymbolIndexes=function(k){if(this.sortedAngle===k&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var O=Math.sin(k),te=Math.cos(k),pe=[],we=[],Me=[],Oe=0;Oe<this.symbolInstances.length;++Oe){Me.push(Oe);var tt=this.symbolInstances.get(Oe);pe.push(Math.round(O*tt.anchorX+te*tt.anchorY)|0),we.push(tt.featureIndex)}return Me.sort(function(ht,gt){return pe[ht]-pe[gt]||we[gt]-we[ht]}),Me},$i.prototype.addToSortKeyRanges=function(k,O){var te=this.sortKeyRanges[this.sortKeyRanges.length-1];te&&te.sortKey===O?te.symbolInstanceEnd=k+1:this.sortKeyRanges.push({sortKey:O,symbolInstanceStart:k,symbolInstanceEnd:k+1})},$i.prototype.sortFeatures=function(k){var O=this;if(!!this.sortFeaturesByY&&this.sortedAngle!==k&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(k),this.sortedAngle=k,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var te=0,pe=this.symbolInstanceIndexes;te<pe.length;te+=1){var we=pe[te],Me=this.symbolInstances.get(we);this.featureSortOrder.push(Me.featureIndex),[Me.rightJustifiedTextSymbolIndex,Me.centerJustifiedTextSymbolIndex,Me.leftJustifiedTextSymbolIndex].forEach(function(Oe,tt,ht){Oe>=0&&ht.indexOf(Oe)===tt&&O.addIndicesForPlacedSymbol(O.text,Oe)}),Me.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,Me.verticalPlacedTextSymbolIndex),Me.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Me.placedIconSymbolIndex),Me.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Me.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Be("SymbolBucket",$i,{omit:["layers","collisionBoxArray","features","compareText"]}),$i.MAX_GLYPHS=65535,$i.addDynamicAttributes=n0;function R_(C,k){return k.replace(/{([^{}]+)}/g,function(O,te){return te in C?String(C[te]):""})}var I_=new eo({"symbol-placement":new Oa(Gt.layout_symbol["symbol-placement"]),"symbol-spacing":new Oa(Gt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Oa(Gt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Qa(Gt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Oa(Gt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Oa(Gt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Oa(Gt.layout_symbol["icon-ignore-placement"]),"icon-optional":new Oa(Gt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Oa(Gt.layout_symbol["icon-rotation-alignment"]),"icon-size":new Qa(Gt.layout_symbol["icon-size"]),"icon-text-fit":new Oa(Gt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Oa(Gt.layout_symbol["icon-text-fit-padding"]),"icon-image":new Qa(Gt.layout_symbol["icon-image"]),"icon-rotate":new Qa(Gt.layout_symbol["icon-rotate"]),"icon-padding":new Oa(Gt.layout_symbol["icon-padding"]),"icon-keep-upright":new Oa(Gt.layout_symbol["icon-keep-upright"]),"icon-offset":new Qa(Gt.layout_symbol["icon-offset"]),"icon-anchor":new Qa(Gt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Oa(Gt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Oa(Gt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Oa(Gt.layout_symbol["text-rotation-alignment"]),"text-field":new Qa(Gt.layout_symbol["text-field"]),"text-font":new Qa(Gt.layout_symbol["text-font"]),"text-size":new Qa(Gt.layout_symbol["text-size"]),"text-max-width":new Qa(Gt.layout_symbol["text-max-width"]),"text-line-height":new Oa(Gt.layout_symbol["text-line-height"]),"text-letter-spacing":new Qa(Gt.layout_symbol["text-letter-spacing"]),"text-justify":new Qa(Gt.layout_symbol["text-justify"]),"text-radial-offset":new Qa(Gt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Oa(Gt.layout_symbol["text-variable-anchor"]),"text-anchor":new Qa(Gt.layout_symbol["text-anchor"]),"text-max-angle":new Oa(Gt.layout_symbol["text-max-angle"]),"text-writing-mode":new Oa(Gt.layout_symbol["text-writing-mode"]),"text-rotate":new Qa(Gt.layout_symbol["text-rotate"]),"text-padding":new Oa(Gt.layout_symbol["text-padding"]),"text-keep-upright":new Oa(Gt.layout_symbol["text-keep-upright"]),"text-transform":new Qa(Gt.layout_symbol["text-transform"]),"text-offset":new Qa(Gt.layout_symbol["text-offset"]),"text-allow-overlap":new Oa(Gt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Oa(Gt.layout_symbol["text-ignore-placement"]),"text-optional":new Oa(Gt.layout_symbol["text-optional"])}),F_=new eo({"icon-opacity":new Qa(Gt.paint_symbol["icon-opacity"]),"icon-color":new Qa(Gt.paint_symbol["icon-color"]),"icon-halo-color":new Qa(Gt.paint_symbol["icon-halo-color"]),"icon-halo-width":new Qa(Gt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Qa(Gt.paint_symbol["icon-halo-blur"]),"icon-translate":new Oa(Gt.paint_symbol["icon-translate"]),"icon-translate-anchor":new Oa(Gt.paint_symbol["icon-translate-anchor"]),"text-opacity":new Qa(Gt.paint_symbol["text-opacity"]),"text-color":new Qa(Gt.paint_symbol["text-color"],{runtimeType:Bn,getOverride:function(C){return C.textColor},hasOverride:function(C){return!!C.textColor}}),"text-halo-color":new Qa(Gt.paint_symbol["text-halo-color"]),"text-halo-width":new Qa(Gt.paint_symbol["text-halo-width"]),"text-halo-blur":new Qa(Gt.paint_symbol["text-halo-blur"]),"text-translate":new Oa(Gt.paint_symbol["text-translate"]),"text-translate-anchor":new Oa(Gt.paint_symbol["text-translate-anchor"])}),a0={paint:F_,layout:I_},Dh=function(k){this.type=k.property.overrides?k.property.overrides.runtimeType:mr,this.defaultValue=k};Dh.prototype.evaluate=function(k){if(k.formattedSection){var O=this.defaultValue.property.overrides;if(O&&O.hasOverride(k.formattedSection))return O.getOverride(k.formattedSection)}return k.feature&&k.featureState?this.defaultValue.evaluate(k.feature,k.featureState):this.defaultValue.property.specification.default},Dh.prototype.eachChild=function(k){if(!this.defaultValue.isConstant()){var O=this.defaultValue.value;k(O._styleExpression.expression)}},Dh.prototype.outputDefined=function(){return!1},Dh.prototype.serialize=function(){return null},Be("FormatSectionOverride",Dh,{omit:["defaultValue"]});var z_=function(C){function k(O){C.call(this,O,a0)}return C&&(k.__proto__=C),k.prototype=Object.create(C&&C.prototype),k.prototype.constructor=k,k.prototype.recalculate=function(te,pe){if(C.prototype.recalculate.call(this,te,pe),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var we=this.layout.get("text-writing-mode");if(we){for(var Me=[],Oe=0,tt=we;Oe<tt.length;Oe+=1){var ht=tt[Oe];Me.indexOf(ht)<0&&Me.push(ht)}this.layout._values["text-writing-mode"]=Me}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},k.prototype.getValueAndResolveTokens=function(te,pe,we,Me){var Oe=this.layout.get(te).evaluate(pe,{},we,Me),tt=this._unevaluatedLayout._values[te];return!tt.isDataDriven()&&!Co(tt.value)&&Oe?R_(pe.properties,Oe):Oe},k.prototype.createBucket=function(te){return new $i(te)},k.prototype.queryRadius=function(){return 0},k.prototype.queryIntersectsFeature=function(){return!1},k.prototype._setPaintOverrides=function(){for(var te=0,pe=a0.paint.overridableProperties;te<pe.length;te+=1){var we=pe[te];if(!!k.hasPaintOverride(this.layout,we)){var Me=this.paint.get(we),Oe=new Dh(Me),tt=new bs(Oe,Me.property.specification),ht=null;Me.value.kind==="constant"||Me.value.kind==="source"?ht=new ku("source",tt):ht=new _s("composite",tt,Me.value.zoomStops,Me.value._interpolationType),this.paint._values[we]=new Qi(Me.property,ht,Me.parameters)}}},k.prototype._handleOverridablePaintPropertyUpdate=function(te,pe,we){return!this.layout||pe.isDataDriven()||we.isDataDriven()?!1:k.hasPaintOverride(this.layout,te)},k.hasPaintOverride=function(te,pe){var we=te.get("text-field"),Me=a0.paint.properties[pe],Oe=!1,tt=function(Ot){for(var nr=0,qt=Ot;nr<qt.length;nr+=1){var yr=qt[nr];if(Me.overrides&&Me.overrides.hasOverride(yr)){Oe=!0;return}}};if(we.value.kind==="constant"&&we.value.value instanceof ji)tt(we.value.value.sections);else if(we.value.kind==="source"){var ht=function(Ot){if(!Oe)if(Ot instanceof ao&&Ui(Ot.value)===ma){var nr=Ot.value;tt(nr.sections)}else Ot instanceof vs?tt(Ot.sections):Ot.eachChild(ht)},gt=we.value;gt._styleExpression&&ht(gt._styleExpression.expression)}return Oe},k}(Ps),N_=new eo({"background-color":new Oa(Gt.paint_background["background-color"]),"background-pattern":new co(Gt.paint_background["background-pattern"]),"background-opacity":new Oa(Gt.paint_background["background-opacity"])}),O_={paint:N_},B_=function(C){function k(O){C.call(this,O,O_)}return C&&(k.__proto__=C),k.prototype=Object.create(C&&C.prototype),k.prototype.constructor=k,k}(Ps),U_=new eo({"raster-opacity":new Oa(Gt.paint_raster["raster-opacity"]),"raster-hue-rotate":new Oa(Gt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Oa(Gt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Oa(Gt.paint_raster["raster-brightness-max"]),"raster-saturation":new Oa(Gt.paint_raster["raster-saturation"]),"raster-contrast":new Oa(Gt.paint_raster["raster-contrast"]),"raster-resampling":new Oa(Gt.paint_raster["raster-resampling"]),"raster-fade-duration":new Oa(Gt.paint_raster["raster-fade-duration"])}),V_={paint:U_},H_=function(C){function k(O){C.call(this,O,V_)}return C&&(k.__proto__=C),k.prototype=Object.create(C&&C.prototype),k.prototype.constructor=k,k}(Ps);function G_(C){var k=[],O=C.id;return O===void 0&&k.push({message:"layers."+O+': missing required property "id"'}),C.render===void 0&&k.push({message:"layers."+O+': missing required method "render"'}),C.renderingMode&&C.renderingMode!=="2d"&&C.renderingMode!=="3d"&&k.push({message:"layers."+O+': property "renderingMode" must be either "2d" or "3d"'}),k}var Y_=function(C){function k(O){C.call(this,O,{}),this.implementation=O}return C&&(k.__proto__=C),k.prototype=Object.create(C&&C.prototype),k.prototype.constructor=k,k.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},k.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},k.prototype.recalculate=function(){},k.prototype.updateTransitions=function(){},k.prototype.hasTransition=function(){},k.prototype.serialize=function(){},k.prototype.onAdd=function(te){this.implementation.onAdd&&this.implementation.onAdd(te,te.painter.context.gl)},k.prototype.onRemove=function(te){this.implementation.onRemove&&this.implementation.onRemove(te,te.painter.context.gl)},k}(Ps),W_={circle:bb,heatmap:Ab,hillshade:Eb,fill:$b,"fill-extrusion":m2,line:P2,symbol:z_,background:B_,raster:H_};function X_(C){return C.type==="custom"?new Y_(C):new W_[C.type](C)}var Ly=self.HTMLImageElement,Py=self.HTMLCanvasElement,Dy=self.HTMLVideoElement,Ry=self.ImageData,Mp=self.ImageBitmap,Yf=function(k,O,te,pe){this.context=k,this.format=te,this.texture=k.gl.createTexture(),this.update(O,pe)};Yf.prototype.update=function(k,O,te){var pe=k.width,we=k.height,Me=(!this.size||this.size[0]!==pe||this.size[1]!==we)&&!te,Oe=this,tt=Oe.context,ht=tt.gl;if(this.useMipmap=Boolean(O&&O.useMipmap),ht.bindTexture(ht.TEXTURE_2D,this.texture),tt.pixelStoreUnpackFlipY.set(!1),tt.pixelStoreUnpack.set(1),tt.pixelStoreUnpackPremultiplyAlpha.set(this.format===ht.RGBA&&(!O||O.premultiply!==!1)),Me)this.size=[pe,we],k instanceof Ly||k instanceof Py||k instanceof Dy||k instanceof Ry||Mp&&k instanceof Mp?ht.texImage2D(ht.TEXTURE_2D,0,this.format,this.format,ht.UNSIGNED_BYTE,k):ht.texImage2D(ht.TEXTURE_2D,0,this.format,pe,we,0,this.format,ht.UNSIGNED_BYTE,k.data);else{var gt=te||{x:0,y:0},Ot=gt.x,nr=gt.y;k instanceof Ly||k instanceof Py||k instanceof Dy||k instanceof Ry||Mp&&k instanceof Mp?ht.texSubImage2D(ht.TEXTURE_2D,0,Ot,nr,ht.RGBA,ht.UNSIGNED_BYTE,k):ht.texSubImage2D(ht.TEXTURE_2D,0,Ot,nr,pe,we,ht.RGBA,ht.UNSIGNED_BYTE,k.data)}this.useMipmap&&this.isSizePowerOfTwo()&&ht.generateMipmap(ht.TEXTURE_2D)},Yf.prototype.bind=function(k,O,te){var pe=this,we=pe.context,Me=we.gl;Me.bindTexture(Me.TEXTURE_2D,this.texture),te===Me.LINEAR_MIPMAP_NEAREST&&!this.isSizePowerOfTwo()&&(te=Me.LINEAR),k!==this.filter&&(Me.texParameteri(Me.TEXTURE_2D,Me.TEXTURE_MAG_FILTER,k),Me.texParameteri(Me.TEXTURE_2D,Me.TEXTURE_MIN_FILTER,te||k),this.filter=k),O!==this.wrap&&(Me.texParameteri(Me.TEXTURE_2D,Me.TEXTURE_WRAP_S,O),Me.texParameteri(Me.TEXTURE_2D,Me.TEXTURE_WRAP_T,O),this.wrap=O)},Yf.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1===0},Yf.prototype.destroy=function(){var k=this.context,O=k.gl;O.deleteTexture(this.texture),this.texture=null};var i0=function(k){var O=this;this._callback=k,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){O._triggered=!1,O._callback()})};i0.prototype.trigger=function(){var k=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){k._triggered=!1,k._callback()},0))},i0.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Rh=function(k,O,te){this.target=k,this.parent=O,this.mapId=te,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},S(["receive","process"],this),this.invoker=new i0(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=ee()?k:self};Rh.prototype.send=function(k,O,te,pe,we){var Me=this;we===void 0&&(we=!1);var Oe=Math.round(Math.random()*1e18).toString(36).substring(0,10);te&&(this.callbacks[Oe]=te);var tt=ne(this.globalScope)?void 0:[];return this.target.postMessage({id:Oe,type:k,hasCallback:!!te,targetMapId:pe,mustQueue:we,sourceMapId:this.mapId,data:Rt(O,tt)},tt),{cancel:function(){te&&delete Me.callbacks[Oe],Me.target.postMessage({id:Oe,type:"<cancel>",targetMapId:pe,sourceMapId:Me.mapId})}}},Rh.prototype.receive=function(k){var O=k.data,te=O.id;if(!!te&&!(O.targetMapId&&this.mapId!==O.targetMapId))if(O.type==="<cancel>"){delete this.tasks[te];var pe=this.cancelCallbacks[te];delete this.cancelCallbacks[te],pe&&pe()}else ee()||O.mustQueue?(this.tasks[te]=O,this.taskQueue.push(te),this.invoker.trigger()):this.processTask(te,O)},Rh.prototype.process=function(){if(!!this.taskQueue.length){var k=this.taskQueue.shift(),O=this.tasks[k];delete this.tasks[k],this.taskQueue.length&&this.invoker.trigger(),O&&this.processTask(k,O)}},Rh.prototype.processTask=function(k,O){var te=this;if(O.type==="<response>"){var pe=this.callbacks[k];delete this.callbacks[k],pe&&(O.error?pe(Jt(O.error)):pe(null,Jt(O.data)))}else{var we=!1,Me=ne(this.globalScope)?void 0:[],Oe=O.hasCallback?function(nr,qt){we=!0,delete te.cancelCallbacks[k],te.target.postMessage({id:k,type:"<response>",sourceMapId:te.mapId,error:nr?Rt(nr):null,data:Rt(qt,Me)},Me)}:function(nr){we=!0},tt=null,ht=Jt(O.data);if(this.parent[O.type])tt=this.parent[O.type](O.sourceMapId,ht,Oe);else if(this.parent.getWorkerSource){var gt=O.type.split("."),Ot=this.parent.getWorkerSource(O.sourceMapId,gt[0],ht.source);tt=Ot[gt[1]](ht,Oe)}else Oe(new Error("Could not find function "+O.type));!we&&tt&&tt.cancel&&(this.cancelCallbacks[k]=tt.cancel)}},Rh.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};function Z_(C,k,O){k=Math.pow(2,O)-k-1;var te=Iy(C*256,k*256,O),pe=Iy((C+1)*256,(k+1)*256,O);return te[0]+","+te[1]+","+pe[0]+","+pe[1]}function Iy(C,k,O){var te=2*Math.PI*6378137/256/Math.pow(2,O),pe=C*te-2*Math.PI*6378137/2,we=k*te-2*Math.PI*6378137/2;return[pe,we]}var Qo=function(k,O){k&&(O?this.setSouthWest(k).setNorthEast(O):k.length===4?this.setSouthWest([k[0],k[1]]).setNorthEast([k[2],k[3]]):this.setSouthWest(k[0]).setNorthEast(k[1]))};Qo.prototype.setNorthEast=function(k){return this._ne=k instanceof wo?new wo(k.lng,k.lat):wo.convert(k),this},Qo.prototype.setSouthWest=function(k){return this._sw=k instanceof wo?new wo(k.lng,k.lat):wo.convert(k),this},Qo.prototype.extend=function(k){var O=this._sw,te=this._ne,pe,we;if(k instanceof wo)pe=k,we=k;else if(k instanceof Qo){if(pe=k._sw,we=k._ne,!pe||!we)return this}else{if(Array.isArray(k))if(k.length===4||k.every(Array.isArray)){var Me=k;return this.extend(Qo.convert(Me))}else{var Oe=k;return this.extend(wo.convert(Oe))}return this}return!O&&!te?(this._sw=new wo(pe.lng,pe.lat),this._ne=new wo(we.lng,we.lat)):(O.lng=Math.min(pe.lng,O.lng),O.lat=Math.min(pe.lat,O.lat),te.lng=Math.max(we.lng,te.lng),te.lat=Math.max(we.lat,te.lat)),this},Qo.prototype.getCenter=function(){return new wo((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Qo.prototype.getSouthWest=function(){return this._sw},Qo.prototype.getNorthEast=function(){return this._ne},Qo.prototype.getNorthWest=function(){return new wo(this.getWest(),this.getNorth())},Qo.prototype.getSouthEast=function(){return new wo(this.getEast(),this.getSouth())},Qo.prototype.getWest=function(){return this._sw.lng},Qo.prototype.getSouth=function(){return this._sw.lat},Qo.prototype.getEast=function(){return this._ne.lng},Qo.prototype.getNorth=function(){return this._ne.lat},Qo.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Qo.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Qo.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Qo.prototype.contains=function(k){var O=wo.convert(k),te=O.lng,pe=O.lat,we=this._sw.lat<=pe&&pe<=this._ne.lat,Me=this._sw.lng<=te&&te<=this._ne.lng;return this._sw.lng>this._ne.lng&&(Me=this._sw.lng>=te&&te>=this._ne.lng),we&&Me},Qo.convert=function(k){return!k||k instanceof Qo?k:new Qo(k)};var Fy=63710088e-1,wo=function(k,O){if(isNaN(k)||isNaN(O))throw new Error("Invalid LngLat object: ("+k+", "+O+")");if(this.lng=+k,this.lat=+O,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};wo.prototype.wrap=function(){return new wo(y(this.lng,-180,180),this.lat)},wo.prototype.toArray=function(){return[this.lng,this.lat]},wo.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},wo.prototype.distanceTo=function(k){var O=Math.PI/180,te=this.lat*O,pe=k.lat*O,we=Math.sin(te)*Math.sin(pe)+Math.cos(te)*Math.cos(pe)*Math.cos((k.lng-this.lng)*O),Me=Fy*Math.acos(Math.min(we,1));return Me},wo.prototype.toBounds=function(k){k===void 0&&(k=0);var O=40075017,te=360*k/O,pe=te/Math.cos(Math.PI/180*this.lat);return new Qo(new wo(this.lng-pe,this.lat-te),new wo(this.lng+pe,this.lat+te))},wo.convert=function(k){if(k instanceof wo)return k;if(Array.isArray(k)&&(k.length===2||k.length===3))return new wo(Number(k[0]),Number(k[1]));if(!Array.isArray(k)&&typeof k=="object"&&k!==null)return new wo(Number("lng"in k?k.lng:k.lon),Number(k.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var zy=2*Math.PI*Fy;function Ny(C){return zy*Math.cos(C*Math.PI/180)}function Oy(C){return(180+C)/360}function By(C){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+C*Math.PI/360)))/360}function Uy(C,k){return C/Ny(k)}function j_(C){return C*360-180}function o0(C){var k=180-C*360;return 360/Math.PI*Math.atan(Math.exp(k*Math.PI/180))-90}function K_(C,k){return C*Ny(o0(k))}function J_(C){return 1/Math.cos(C*Math.PI/180)}var Wf=function(k,O,te){te===void 0&&(te=0),this.x=+k,this.y=+O,this.z=+te};Wf.fromLngLat=function(k,O){O===void 0&&(O=0);var te=wo.convert(k);return new Wf(Oy(te.lng),By(te.lat),Uy(O,te.lat))},Wf.prototype.toLngLat=function(){return new wo(j_(this.x),o0(this.y))},Wf.prototype.toAltitude=function(){return K_(this.z,this.y)},Wf.prototype.meterInMercatorCoordinateUnits=function(){return 1/zy*J_(o0(this.y))};var Xf=function(k,O,te){this.z=k,this.x=O,this.y=te,this.key=Lv(0,k,k,O,te)};Xf.prototype.equals=function(k){return this.z===k.z&&this.x===k.x&&this.y===k.y},Xf.prototype.url=function(k,O){var te=Z_(this.x,this.y,this.z),pe=Q_(this.z,this.x,this.y);return k[(this.x+this.y)%k.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(O==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",pe).replace("{bbox-epsg-3857}",te)},Xf.prototype.getTilePoint=function(k){var O=Math.pow(2,this.z);return new v((k.x*O-this.x)*Ha,(k.y*O-this.y)*Ha)},Xf.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Vy=function(k,O){this.wrap=k,this.canonical=O,this.key=Lv(k,O.z,O.z,O.x,O.y)},$o=function(k,O,te,pe,we){this.overscaledZ=k,this.wrap=O,this.canonical=new Xf(te,+pe,+we),this.key=Lv(O,k,te,pe,we)};$o.prototype.equals=function(k){return this.overscaledZ===k.overscaledZ&&this.wrap===k.wrap&&this.canonical.equals(k.canonical)},$o.prototype.scaledTo=function(k){var O=this.canonical.z-k;return k>this.canonical.z?new $o(k,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new $o(k,this.wrap,k,this.canonical.x>>O,this.canonical.y>>O)},$o.prototype.calculateScaledKey=function(k,O){var te=this.canonical.z-k;return k>this.canonical.z?Lv(this.wrap*+O,k,this.canonical.z,this.canonical.x,this.canonical.y):Lv(this.wrap*+O,k,k,this.canonical.x>>te,this.canonical.y>>te)},$o.prototype.isChildOf=function(k){if(k.wrap!==this.wrap)return!1;var O=this.canonical.z-k.canonical.z;return k.overscaledZ===0||k.overscaledZ<this.overscaledZ&&k.canonical.x===this.canonical.x>>O&&k.canonical.y===this.canonical.y>>O},$o.prototype.children=function(k){if(this.overscaledZ>=k)return[new $o(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var O=this.canonical.z+1,te=this.canonical.x*2,pe=this.canonical.y*2;return[new $o(O,this.wrap,O,te,pe),new $o(O,this.wrap,O,te+1,pe),new $o(O,this.wrap,O,te,pe+1),new $o(O,this.wrap,O,te+1,pe+1)]},$o.prototype.isLessThan=function(k){return this.wrap<k.wrap?!0:this.wrap>k.wrap?!1:this.overscaledZ<k.overscaledZ?!0:this.overscaledZ>k.overscaledZ?!1:this.canonical.x<k.canonical.x?!0:this.canonical.x>k.canonical.x?!1:this.canonical.y<k.canonical.y},$o.prototype.wrapped=function(){return new $o(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},$o.prototype.unwrapTo=function(k){return new $o(this.overscaledZ,k,this.canonical.z,this.canonical.x,this.canonical.y)},$o.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},$o.prototype.toUnwrapped=function(){return new Vy(this.wrap,this.canonical)},$o.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},$o.prototype.getTilePoint=function(k){return this.canonical.getTilePoint(new Wf(k.x-this.wrap,k.y))};function Lv(C,k,O,te,pe){C*=2,C<0&&(C=C*-1-1);var we=1<<O;return(we*we*C+we*pe+te).toString(36)+O.toString(36)+k.toString(36)}function Q_(C,k,O){for(var te="",pe,we=C;we>0;we--)pe=1<<we-1,te+=(k&pe?1:0)+(O&pe?2:0);return te}Be("CanonicalTileID",Xf),Be("OverscaledTileID",$o,{omit:["posMatrix"]});var Xc=function(k,O,te){if(this.uid=k,O.height!==O.width)throw new RangeError("DEM tiles must be square");if(te&&te!=="mapbox"&&te!=="terrarium")return N('"'+te+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=O.height;var pe=this.dim=O.height-2;this.data=new Uint32Array(O.data.buffer),this.encoding=te||"mapbox";for(var we=0;we<pe;we++)this.data[this._idx(-1,we)]=this.data[this._idx(0,we)],this.data[this._idx(pe,we)]=this.data[this._idx(pe-1,we)],this.data[this._idx(we,-1)]=this.data[this._idx(we,0)],this.data[this._idx(we,pe)]=this.data[this._idx(we,pe-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(pe,-1)]=this.data[this._idx(pe-1,0)],this.data[this._idx(-1,pe)]=this.data[this._idx(0,pe-1)],this.data[this._idx(pe,pe)]=this.data[this._idx(pe-1,pe-1)]};Xc.prototype.get=function(k,O){var te=new Uint8Array(this.data.buffer),pe=this._idx(k,O)*4,we=this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox;return we(te[pe],te[pe+1],te[pe+2])},Xc.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Xc.prototype._idx=function(k,O){if(k<-1||k>=this.dim+1||O<-1||O>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(O+1)*this.stride+(k+1)},Xc.prototype._unpackMapbox=function(k,O,te){return(k*256*256+O*256+te)/10-1e4},Xc.prototype._unpackTerrarium=function(k,O,te){return k*256+O+te/256-32768},Xc.prototype.getPixels=function(){return new dl({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Xc.prototype.backfillBorder=function(k,O,te){if(this.dim!==k.dim)throw new Error("dem dimension mismatch");var pe=O*this.dim,we=O*this.dim+this.dim,Me=te*this.dim,Oe=te*this.dim+this.dim;switch(O){case-1:pe=we-1;break;case 1:we=pe+1;break}switch(te){case-1:Me=Oe-1;break;case 1:Oe=Me+1;break}for(var tt=-O*this.dim,ht=-te*this.dim,gt=Me;gt<Oe;gt++)for(var Ot=pe;Ot<we;Ot++)this.data[this._idx(Ot,gt)]=k.data[this._idx(Ot+tt,gt+ht)]},Be("DEMData",Xc);function $_(C,k){var O={};if(!k)return O;for(var te=function(){var Me=we[pe],Oe=Me.layerIds.map(function(Ot){return k.getLayer(Ot)}).filter(Boolean);if(Oe.length!==0){Me.layers=Oe,Me.stateDependentLayerIds&&(Me.stateDependentLayers=Me.stateDependentLayerIds.map(function(Ot){return Oe.filter(function(nr){return nr.id===Ot})[0]}));for(var tt=0,ht=Oe;tt<ht.length;tt+=1){var gt=ht[tt];O[gt.id]=Me}}},pe=0,we=C;pe<we.length;pe+=1)te();return O}var Sp=function(k){this._stringToNumber={},this._numberToString=[];for(var O=0;O<k.length;O++){var te=k[O];this._stringToNumber[te]=O,this._numberToString[O]=te}};Sp.prototype.encode=function(k){return this._stringToNumber[k]},Sp.prototype.decode=function(k){return this._numberToString[k]};var Ep=function(k,O,te,pe,we){this.type="Feature",this._vectorTileFeature=k,k._z=O,k._x=te,k._y=pe,this.properties=k.properties,this.id=we},s0={geometry:{configurable:!0}};s0.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},s0.geometry.set=function(C){this._geometry=C},Ep.prototype.toJSON=function(){var k={geometry:this.geometry};for(var O in this)O==="_geometry"||O==="_vectorTileFeature"||(k[O]=this[O]);return k},Object.defineProperties(Ep.prototype,s0);var Ih=function(){this.state={},this.stateChanges={},this.deletedStates={}};Ih.prototype.updateState=function(k,O,te){var pe=String(O);if(this.stateChanges[k]=this.stateChanges[k]||{},this.stateChanges[k][pe]=this.stateChanges[k][pe]||{},M(this.stateChanges[k][pe],te),this.deletedStates[k]===null){this.deletedStates[k]={};for(var we in this.state[k])we!==pe&&(this.deletedStates[k][we]=null)}else{var Me=this.deletedStates[k]&&this.deletedStates[k][pe]===null;if(Me){this.deletedStates[k][pe]={};for(var Oe in this.state[k][pe])te[Oe]||(this.deletedStates[k][pe][Oe]=null)}else for(var tt in te){var ht=this.deletedStates[k]&&this.deletedStates[k][pe]&&this.deletedStates[k][pe][tt]===null;ht&&delete this.deletedStates[k][pe][tt]}}},Ih.prototype.removeFeatureState=function(k,O,te){var pe=this.deletedStates[k]===null;if(!pe){var we=String(O);if(this.deletedStates[k]=this.deletedStates[k]||{},te&&O!==void 0)this.deletedStates[k][we]!==null&&(this.deletedStates[k][we]=this.deletedStates[k][we]||{},this.deletedStates[k][we][te]=null);else if(O!==void 0){var Me=this.stateChanges[k]&&this.stateChanges[k][we];if(Me){this.deletedStates[k][we]={};for(te in this.stateChanges[k][we])this.deletedStates[k][we][te]=null}else this.deletedStates[k][we]=null}else this.deletedStates[k]=null}},Ih.prototype.getState=function(k,O){var te=String(O),pe=this.state[k]||{},we=this.stateChanges[k]||{},Me=M({},pe[te],we[te]);if(this.deletedStates[k]===null)return{};if(this.deletedStates[k]){var Oe=this.deletedStates[k][O];if(Oe===null)return{};for(var tt in Oe)delete Me[tt]}return Me},Ih.prototype.initializeTileState=function(k,O){k.setFeatureState(this.state,O)},Ih.prototype.coalesceChanges=function(k,O){var te={};for(var pe in this.stateChanges){this.state[pe]=this.state[pe]||{};var we={};for(var Me in this.stateChanges[pe])this.state[pe][Me]||(this.state[pe][Me]={}),M(this.state[pe][Me],this.stateChanges[pe][Me]),we[Me]=this.state[pe][Me];te[pe]=we}for(var Oe in this.deletedStates){this.state[Oe]=this.state[Oe]||{};var tt={};if(this.deletedStates[Oe]===null)for(var ht in this.state[Oe])tt[ht]={},this.state[Oe][ht]={};else for(var gt in this.deletedStates[Oe]){var Ot=this.deletedStates[Oe][gt]===null;if(Ot)this.state[Oe][gt]={};else for(var nr=0,qt=Object.keys(this.deletedStates[Oe][gt]);nr<qt.length;nr+=1){var yr=qt[nr];delete this.state[Oe][gt][yr]}tt[gt]=this.state[Oe][gt]}te[Oe]=te[Oe]||{},M(te[Oe],tt)}if(this.stateChanges={},this.deletedStates={},Object.keys(te).length!==0)for(var Or in k){var ln=k[Or];ln.setFeatureState(te,O)}};var Zc=function(k,O){this.tileID=k,this.x=k.canonical.x,this.y=k.canonical.y,this.z=k.canonical.z,this.grid=new Ho(Ha,16,0),this.grid3D=new Ho(Ha,16,0),this.featureIndexArray=new dv,this.promoteId=O};Zc.prototype.insert=function(k,O,te,pe,we,Me){var Oe=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(te,pe,we);for(var tt=Me?this.grid3D:this.grid,ht=0;ht<O.length;ht++){for(var gt=O[ht],Ot=[1/0,1/0,-1/0,-1/0],nr=0;nr<gt.length;nr++){var qt=gt[nr];Ot[0]=Math.min(Ot[0],qt.x),Ot[1]=Math.min(Ot[1],qt.y),Ot[2]=Math.max(Ot[2],qt.x),Ot[3]=Math.max(Ot[3],qt.y)}Ot[0]<Ha&&Ot[1]<Ha&&Ot[2]>=0&&Ot[3]>=0&&tt.insert(Oe,Ot[0],Ot[1],Ot[2],Ot[3])}},Zc.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new wh.VectorTile(new gp(this.rawTileData)).layers,this.sourceLayerCoder=new Sp(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Zc.prototype.query=function(k,O,te,pe){var we=this;this.loadVTLayers();for(var Me=k.params||{},Oe=Ha/k.tileSize/k.scale,tt=Sc(Me.filter),ht=k.queryGeometry,gt=k.queryPadding*Oe,Ot=Gy(ht),nr=this.grid.query(Ot.minX-gt,Ot.minY-gt,Ot.maxX+gt,Ot.maxY+gt),qt=Gy(k.cameraQueryGeometry),yr=this.grid3D.query(qt.minX-gt,qt.minY-gt,qt.maxX+gt,qt.maxY+gt,function(Xn,ua,oa,Na){return Dc(k.cameraQueryGeometry,Xn-gt,ua-gt,oa+gt,Na+gt)}),Or=0,ln=yr;Or<ln.length;Or+=1){var en=ln[Or];nr.push(en)}nr.sort(q_);for(var kn={},bn,Cn=function(Xn){var ua=nr[Xn];if(ua!==bn){bn=ua;var oa=we.featureIndexArray.get(ua),Na=null;we.loadMatchingFeature(kn,oa.bucketIndex,oa.sourceLayerIndex,oa.featureIndex,tt,Me.layers,Me.availableImages,O,te,pe,function(Sa,La,ii){return Na||(Na=Zi(Sa)),La.queryIntersectsFeature(ht,Sa,ii,Na,we.z,k.transform,Oe,k.pixelPosMatrix)})}},zn=0;zn<nr.length;zn++)Cn(zn);return kn},Zc.prototype.loadMatchingFeature=function(k,O,te,pe,we,Me,Oe,tt,ht,gt,Ot){var nr=this.bucketLayerIDs[O];if(!(Me&&!D(Me,nr))){var qt=this.sourceLayerCoder.decode(te),yr=this.vtLayers[qt],Or=yr.feature(pe);if(!!we.filter(new fi(this.tileID.overscaledZ),Or))for(var ln=this.getId(Or,qt),en=0;en<nr.length;en++){var kn=nr[en];if(!(Me&&Me.indexOf(kn)<0)){var bn=tt[kn];if(!!bn){var Cn={};ln!==void 0&&gt&&(Cn=gt.getState(bn.sourceLayer||"_geojsonTileLayer",ln));var zn=ht[kn];zn.paint=Hy(zn.paint,bn.paint,Or,Cn,Oe),zn.layout=Hy(zn.layout,bn.layout,Or,Cn,Oe);var Xn=!Ot||Ot(Or,bn,Cn);if(!!Xn){var ua=new Ep(Or,this.z,this.x,this.y,ln);ua.layer=zn;var oa=k[kn];oa===void 0&&(oa=k[kn]=[]),oa.push({featureIndex:pe,feature:ua,intersectionZ:Xn})}}}}}},Zc.prototype.lookupSymbolFeatures=function(k,O,te,pe,we,Me,Oe,tt){var ht={};this.loadVTLayers();for(var gt=Sc(we),Ot=0,nr=k;Ot<nr.length;Ot+=1){var qt=nr[Ot];this.loadMatchingFeature(ht,te,pe,qt,gt,Me,Oe,tt,O)}return ht},Zc.prototype.hasLayer=function(k){for(var O=0,te=this.bucketLayerIDs;O<te.length;O+=1)for(var pe=te[O],we=0,Me=pe;we<Me.length;we+=1){var Oe=Me[we];if(k===Oe)return!0}return!1},Zc.prototype.getId=function(k,O){var te=k.id;if(this.promoteId){var pe=typeof this.promoteId=="string"?this.promoteId:this.promoteId[O];te=k.properties[pe],typeof te=="boolean"&&(te=Number(te))}return te},Be("FeatureIndex",Zc,{omit:["rawTileData","sourceLayerCoder"]});function Hy(C,k,O,te,pe){return P(C,function(we,Me){var Oe=k instanceof Xi?k.get(Me):null;return Oe&&Oe.evaluate?Oe.evaluate(O,te,pe):Oe})}function Gy(C){for(var k=1/0,O=1/0,te=-1/0,pe=-1/0,we=0,Me=C;we<Me.length;we+=1){var Oe=Me[we];k=Math.min(k,Oe.x),O=Math.min(O,Oe.y),te=Math.max(te,Oe.x),pe=Math.max(pe,Oe.y)}return{minX:k,minY:O,maxX:te,maxY:pe}}function q_(C,k){return k-C}var ew=3e4,us=function(k,O){this.tileID=k,this.uid=w(),this.uses=0,this.tileSize=O,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};us.prototype.registerFadeDuration=function(k){var O=k+this.timeAdded;O<$.now()||this.fadeEndTime&&O<this.fadeEndTime||(this.fadeEndTime=O)},us.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},us.prototype.loadVectorData=function(k,O,te){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",!k){this.collisionBoxArray=new Pc;return}k.featureIndex&&(this.latestFeatureIndex=k.featureIndex,k.rawTileData?(this.latestRawTileData=k.rawTileData,this.latestFeatureIndex.rawTileData=k.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=k.collisionBoxArray,this.buckets=$_(k.buckets,O.style),this.hasSymbolBuckets=!1;for(var pe in this.buckets){var we=this.buckets[pe];if(we instanceof $i)if(this.hasSymbolBuckets=!0,te)we.justReloaded=!0;else break}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var Me in this.buckets){var Oe=this.buckets[Me];if(Oe instanceof $i&&Oe.hasRTLText){this.hasRTLText=!0,Di();break}}this.queryPadding=0;for(var tt in this.buckets){var ht=this.buckets[tt];this.queryPadding=Math.max(this.queryPadding,O.style.getLayer(tt).queryRadius(ht))}k.imageAtlas&&(this.imageAtlas=k.imageAtlas),k.glyphAtlasImage&&(this.glyphAtlasImage=k.glyphAtlasImage)},us.prototype.unloadVectorData=function(){for(var k in this.buckets)this.buckets[k].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},us.prototype.getBucket=function(k){return this.buckets[k.id]},us.prototype.upload=function(k){for(var O in this.buckets){var te=this.buckets[O];te.uploadPending()&&te.upload(k)}var pe=k.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Yf(k,this.imageAtlas.image,pe.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Yf(k,this.glyphAtlasImage,pe.ALPHA),this.glyphAtlasImage=null)},us.prototype.prepare=function(k){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(k,this.imageAtlasTexture)},us.prototype.queryRenderedFeatures=function(k,O,te,pe,we,Me,Oe,tt,ht,gt){return!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData?{}:this.latestFeatureIndex.query({queryGeometry:pe,cameraQueryGeometry:we,scale:Me,tileSize:this.tileSize,pixelPosMatrix:gt,transform:tt,params:Oe,queryPadding:this.queryPadding*ht},k,O,te)},us.prototype.querySourceFeatures=function(k,O){var te=this.latestFeatureIndex;if(!(!te||!te.rawTileData)){var pe=te.loadVTLayers(),we=O?O.sourceLayer:"",Me=pe._geojsonTileLayer||pe[we];if(!!Me)for(var Oe=Sc(O&&O.filter),tt=this.tileID.canonical,ht=tt.z,gt=tt.x,Ot=tt.y,nr={z:ht,x:gt,y:Ot},qt=0;qt<Me.length;qt++){var yr=Me.feature(qt);if(Oe.filter(new fi(this.tileID.overscaledZ),yr)){var Or=te.getId(yr,we),ln=new Ep(yr,ht,gt,Ot,Or);ln.tile=nr,k.push(ln)}}}},us.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},us.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},us.prototype.setExpiryData=function(k){var O=this.expirationTime;if(k.cacheControl){var te=Z(k.cacheControl);te["max-age"]&&(this.expirationTime=Date.now()+te["max-age"]*1e3)}else k.expires&&(this.expirationTime=new Date(k.expires).getTime());if(this.expirationTime){var pe=Date.now(),we=!1;if(this.expirationTime>pe)we=!1;else if(!O)we=!0;else if(this.expirationTime<O)we=!0;else{var Me=this.expirationTime-O;Me?this.expirationTime=pe+Math.max(Me,ew):we=!0}we?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},us.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},us.prototype.setFeatureState=function(k,O){if(!(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(k).length===0)){var te=this.latestFeatureIndex.loadVTLayers();for(var pe in this.buckets)if(!!O.style.hasLayer(pe)){var we=this.buckets[pe],Me=we.layers[0].sourceLayer||"_geojsonTileLayer",Oe=te[Me],tt=k[Me];if(!(!Oe||!tt||Object.keys(tt).length===0)){we.update(tt,Oe,this.imageAtlas&&this.imageAtlas.patternPositions||{});var ht=O&&O.style&&O.style.getLayer(pe);ht&&(this.queryPadding=Math.max(this.queryPadding,ht.queryRadius(we)))}}}},us.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},us.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<$.now()},us.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},us.prototype.setHoldDuration=function(k){this.symbolFadeHoldUntil=$.now()+k},us.prototype.setDependencies=function(k,O){for(var te={},pe=0,we=O;pe<we.length;pe+=1){var Me=we[pe];te[Me]=!0}this.dependencies[k]=te},us.prototype.hasDependency=function(k,O){for(var te=0,pe=k;te<pe.length;te+=1){var we=pe[te],Me=this.dependencies[we];if(Me)for(var Oe=0,tt=O;Oe<tt.length;Oe+=1){var ht=tt[Oe];if(Me[ht])return!0}}return!1};var tw=["type","source","source-layer","minzoom","maxzoom","filter","layout"],gf=self.performance,Yy=function(k){this._marks={start:[k.url,"start"].join("#"),end:[k.url,"end"].join("#"),measure:k.url.toString()},gf.mark(this._marks.start)};Yy.prototype.finish=function(){gf.mark(this._marks.end);var k=gf.getEntriesByName(this._marks.measure);return k.length===0&&(gf.measure(this._marks.measure,this._marks.start,this._marks.end),k=gf.getEntriesByName(this._marks.measure),gf.clearMarks(this._marks.start),gf.clearMarks(this._marks.end),gf.clearMeasures(this._marks.measure)),k},e.Actor=Rh,e.AlphaImage=Gf,e.CanonicalTileID=Xf,e.CollisionBoxArray=Pc,e.Color=xi,e.DEMData=Xc,e.DataConstantProperty=Oa,e.DictionaryCoder=Sp,e.EXTENT=Ha,e.ErrorEvent=wr,e.EvaluationParameters=fi,e.Event=kr,e.Evented=Sr,e.FeatureIndex=Zc,e.FillBucket=oc,e.FillExtrusionBucket=sc,e.ImageAtlas=Sv,e.ImagePosition=mp,e.LineBucket=yl,e.LngLat=wo,e.LngLatBounds=Qo,e.MercatorCoordinate=Wf,e.ONE_EM=As,e.OverscaledTileID=$o,e.Point=v,e.Point$1=v,e.Properties=eo,e.Protobuf=gp,e.RGBAImage=dl,e.RequestManager=ke,e.RequestPerformance=Yy,e.ResourceType=ot,e.SegmentVector=W,e.SourceFeatureState=Ih,e.StructArrayLayout1ui2=cf,e.StructArrayLayout2f1f2i16=nc,e.StructArrayLayout2i4=zf,e.StructArrayLayout3ui6=ac,e.StructArrayLayout4i8=Ec,e.SymbolBucket=$i,e.Texture=Yf,e.Tile=us,e.Transitionable=So,e.Uniform1f=Hr,e.Uniform1i=Xr,e.Uniform2f=$r,e.Uniform3f=pn,e.Uniform4f=Pn,e.UniformColor=On,e.UniformMatrix4f=ra,e.UnwrappedTileID=Vy,e.ValidationError=pr,e.WritingMode=jl,e.ZoomHistory=tr,e.add=xh,e.addDynamicAttributes=n0,e.asyncAll=l,e.bezier=g,e.bindAll=S,e.browser=$,e.cacheEntryPossiblyAdded=jt,e.clamp=f,e.clearTileCache=or,e.clipLine=Ay,e.clone=up,e.clone$1=I,e.clone$2=zd,e.collisionCircleLayout=F2,e.config=ie,e.create=gh,e.create$1=Vf,e.create$2=Uf,e.createCommonjsModule=a,e.createExpression=uu,e.createLayout=Yo,e.createStyleLayer=X_,e.cross=fb,e.deepEqual=o,e.dot=cb,e.dot$1=gb,e.ease=d,e.emitValidationErrors=Mo,e.endsWith=E,e.enforceCacheSizeLimit=Yt,e.evaluateSizeForFeature=yy,e.evaluateSizeForZoom=my,e.evaluateVariableOffset=Ey,e.evented=Ti,e.extend=M,e.featureFilter=Sc,e.filterObject=F,e.fromRotation=dh,e.getAnchorAlignment=qd,e.getAnchorJustification=r0,e.getArrayBuffer=ct,e.getImage=yt,e.getJSON=st,e.getRTLTextPluginStatus=_o,e.getReferrer=Kt,e.getVideo=Pt,e.identity=yh,e.invert=hf,e.isChar=rr,e.isMapboxURL=De,e.keysDifference=u,e.makeRequest=$e,e.mapObject=P,e.mercatorXfromLng=Oy,e.mercatorYfromLat=By,e.mercatorZfromAltitude=Uy,e.mul=Fd,e.multiply=vf,e.mvt=wh,e.normalize=yv,e.number=yo,e.offscreenCanvasSupported=Jr,e.ortho=Id,e.parseGlyphPBF=l_,e.pbf=gp,e.performSymbolLayout=S_,e.perspective=gv,e.pick=_,e.plugin=Ja,e.polygonIntersectsPolygon=ui,e.postMapLoadEvent=Ct,e.postTurnstileEvent=Xt,e.potpack=uy,e.refProperties=tw,e.register=Be,e.registerForPluginStateChange=Hi,e.rotate=Vs,e.rotateX=pl,e.rotateZ=mh,e.scale=vl,e.scale$1=db,e.scale$2=Od,e.setCacheLimits=Gr,e.setRTLTextPlugin=va,e.sphericalToCartesian=Y,e.sqrLen=xb,e.styleSpec=Gt,e.sub=vb,e.symbolSize=y_,e.transformMat3=hb,e.transformMat4=cp,e.translate=Oo,e.triggerPluginCompletionEvent=Fa,e.uniqueId=w,e.validateCustomStyleLayer=G_,e.validateLight=Si,e.validateStyle=Lo,e.values=x,e.vectorTile=wh,e.version=i,e.warnOnce=N,e.webpSupported=oe,e.window=self,e.wrap=y}),T(["./shared"],function(e){function a(et){var $e=typeof et;if($e==="number"||$e==="boolean"||$e==="string"||et===void 0||et===null)return JSON.stringify(et);if(Array.isArray(et)){for(var st="[",ct=0,Mt=et;ct<Mt.length;ct+=1){var Ut=Mt[ct];st+=a(Ut)+","}return st+"]"}for(var Pe=Object.keys(et).sort(),Ee="{",it=0;it<Pe.length;it++)Ee+=JSON.stringify(Pe[it])+":"+a(et[Pe[it]])+",";return Ee+"}"}function i(et){for(var $e="",st=0,ct=e.refProperties;st<ct.length;st+=1){var Mt=ct[st];$e+="/"+a(et[Mt])}return $e}function n(et,$e){for(var st={},ct=0;ct<et.length;ct++){var Mt=$e&&$e[et[ct].id]||i(et[ct]);$e&&($e[et[ct].id]=Mt);var Ut=st[Mt];Ut||(Ut=st[Mt]=[]),Ut.push(et[ct])}var Pe=[];for(var Ee in st)Pe.push(st[Ee]);return Pe}var r=function($e){this.keyCache={},$e&&this.replace($e)};r.prototype.replace=function($e){this._layerConfigs={},this._layers={},this.update($e,[])},r.prototype.update=function($e,st){for(var ct=this,Mt=0,Ut=$e;Mt<Ut.length;Mt+=1){var Pe=Ut[Mt];this._layerConfigs[Pe.id]=Pe;var Ee=this._layers[Pe.id]=e.createStyleLayer(Pe);Ee._featureFilter=e.featureFilter(Ee.filter),this.keyCache[Pe.id]&&delete this.keyCache[Pe.id]}for(var it=0,ut=st;it<ut.length;it+=1){var vt=ut[it];delete this.keyCache[vt],delete this._layerConfigs[vt],delete this._layers[vt]}this.familiesBySource={};for(var St=n(e.values(this._layerConfigs),this.keyCache),yt=0,Pt=St;yt<Pt.length;yt+=1){var Wt=Pt[yt],ar=Wt.map(function(xr){return ct._layers[xr.id]}),kr=ar[0];if(kr.visibility!=="none"){var wr=kr.source||"",Sr=this.familiesBySource[wr];Sr||(Sr=this.familiesBySource[wr]={});var Zr=kr.sourceLayer||"_geojsonTileLayer",ir=Sr[Zr];ir||(ir=Sr[Zr]=[]),ir.push(ar)}}};var v=1,s=function($e){var st={},ct=[];for(var Mt in $e){var Ut=$e[Mt],Pe=st[Mt]={};for(var Ee in Ut){var it=Ut[+Ee];if(!(!it||it.bitmap.width===0||it.bitmap.height===0)){var ut={x:0,y:0,w:it.bitmap.width+2*v,h:it.bitmap.height+2*v};ct.push(ut),Pe[Ee]={rect:ut,metrics:it.metrics}}}}var vt=e.potpack(ct),St=vt.w,yt=vt.h,Pt=new e.AlphaImage({width:St||1,height:yt||1});for(var Wt in $e){var ar=$e[Wt];for(var kr in ar){var wr=ar[+kr];if(!(!wr||wr.bitmap.width===0||wr.bitmap.height===0)){var Sr=st[Wt][kr].rect;e.AlphaImage.copy(wr.bitmap,Pt,{x:0,y:0},{x:Sr.x+v,y:Sr.y+v},wr.bitmap)}}}this.image=Pt,this.positions=st};e.register("GlyphAtlas",s);var o=function($e){this.tileID=new e.OverscaledTileID($e.tileID.overscaledZ,$e.tileID.wrap,$e.tileID.canonical.z,$e.tileID.canonical.x,$e.tileID.canonical.y),this.uid=$e.uid,this.zoom=$e.zoom,this.pixelRatio=$e.pixelRatio,this.tileSize=$e.tileSize,this.source=$e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=$e.showCollisionBoxes,this.collectResourceTiming=!!$e.collectResourceTiming,this.returnDependencies=!!$e.returnDependencies,this.promoteId=$e.promoteId};o.prototype.parse=function($e,st,ct,Mt,Ut){var Pe=this;this.status="parsing",this.data=$e,this.collisionBoxArray=new e.CollisionBoxArray;var Ee=new e.DictionaryCoder(Object.keys($e.layers).sort()),it=new e.FeatureIndex(this.tileID,this.promoteId);it.bucketLayerIDs=[];var ut={},vt={featureIndex:it,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ct},St=st.familiesBySource[this.source];for(var yt in St){var Pt=$e.layers[yt];if(!!Pt){Pt.version===1&&e.warnOnce('Vector tile source "'+this.source+'" layer "'+yt+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Wt=Ee.encode(yt),ar=[],kr=0;kr<Pt.length;kr++){var wr=Pt.feature(kr),Sr=it.getId(wr,yt);ar.push({feature:wr,id:Sr,index:kr,sourceLayerIndex:Wt})}for(var Zr=0,ir=St[yt];Zr<ir.length;Zr+=1){var xr=ir[Zr],Rr=xr[0];if(!(Rr.minzoom&&this.zoom<Math.floor(Rr.minzoom))&&!(Rr.maxzoom&&this.zoom>=Rr.maxzoom)&&Rr.visibility!=="none"){b(xr,this.zoom,ct);var Br=ut[Rr.id]=Rr.createBucket({index:it.bucketLayerIDs.length,layers:xr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Wt,sourceID:this.source});Br.populate(ar,vt,this.tileID.canonical),it.bucketLayerIDs.push(xr.map(function(Tr){return Tr.id}))}}}}var Cr,nt,Dt,Zt,sr=e.mapObject(vt.glyphDependencies,function(Tr){return Object.keys(Tr).map(Number)});Object.keys(sr).length?Mt.send("getGlyphs",{uid:this.uid,stacks:sr},function(Tr,Wr){Cr||(Cr=Tr,nt=Wr,Lr.call(Pe))}):nt={};var zr=Object.keys(vt.iconDependencies);zr.length?Mt.send("getImages",{icons:zr,source:this.source,tileID:this.tileID,type:"icons"},function(Tr,Wr){Cr||(Cr=Tr,Dt=Wr,Lr.call(Pe))}):Dt={};var Ur=Object.keys(vt.patternDependencies);Ur.length?Mt.send("getImages",{icons:Ur,source:this.source,tileID:this.tileID,type:"patterns"},function(Tr,Wr){Cr||(Cr=Tr,Zt=Wr,Lr.call(Pe))}):Zt={},Lr.call(this);function Lr(){if(Cr)return Ut(Cr);if(nt&&Dt&&Zt){var Tr=new s(nt),Wr=new e.ImageAtlas(Dt,Zt);for(var An in ut){var vn=ut[An];vn instanceof e.SymbolBucket?(b(vn.layers,this.zoom,ct),e.performSymbolLayout(vn,nt,Tr.positions,Dt,Wr.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):vn.hasPattern&&(vn instanceof e.LineBucket||vn instanceof e.FillBucket||vn instanceof e.FillExtrusionBucket)&&(b(vn.layers,this.zoom,ct),vn.addFeatures(vt,this.tileID.canonical,Wr.patternPositions))}this.status="done",Ut(null,{buckets:e.values(ut).filter(function(Un){return!Un.isEmpty()}),featureIndex:it,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Tr.image,imageAtlas:Wr,glyphMap:this.returnDependencies?nt:null,iconMap:this.returnDependencies?Dt:null,glyphPositions:this.returnDependencies?Tr.positions:null})}}};function b(et,$e,st){for(var ct=new e.EvaluationParameters($e),Mt=0,Ut=et;Mt<Ut.length;Mt+=1){var Pe=Ut[Mt];Pe.recalculate(ct,st)}}function g(et,$e){var st=e.getArrayBuffer(et.request,function(ct,Mt,Ut,Pe){ct?$e(ct):Mt&&$e(null,{vectorTile:new e.vectorTile.VectorTile(new e.pbf(Mt)),rawData:Mt,cacheControl:Ut,expires:Pe})});return function(){st.cancel(),$e()}}var d=function($e,st,ct,Mt){this.actor=$e,this.layerIndex=st,this.availableImages=ct,this.loadVectorData=Mt||g,this.loading={},this.loaded={}};d.prototype.loadTile=function($e,st){var ct=this,Mt=$e.uid;this.loading||(this.loading={});var Ut=$e&&$e.request&&$e.request.collectResourceTiming?new e.RequestPerformance($e.request):!1,Pe=this.loading[Mt]=new o($e);Pe.abort=this.loadVectorData($e,function(Ee,it){if(delete ct.loading[Mt],Ee||!it)return Pe.status="done",ct.loaded[Mt]=Pe,st(Ee);var ut=it.rawData,vt={};it.expires&&(vt.expires=it.expires),it.cacheControl&&(vt.cacheControl=it.cacheControl);var St={};if(Ut){var yt=Ut.finish();yt&&(St.resourceTiming=JSON.parse(JSON.stringify(yt)))}Pe.vectorTile=it.vectorTile,Pe.parse(it.vectorTile,ct.layerIndex,ct.availableImages,ct.actor,function(Pt,Wt){if(Pt||!Wt)return st(Pt);st(null,e.extend({rawTileData:ut.slice(0)},Wt,vt,St))}),ct.loaded=ct.loaded||{},ct.loaded[Mt]=Pe})},d.prototype.reloadTile=function($e,st){var ct=this,Mt=this.loaded,Ut=$e.uid,Pe=this;if(Mt&&Mt[Ut]){var Ee=Mt[Ut];Ee.showCollisionBoxes=$e.showCollisionBoxes;var it=function(ut,vt){var St=Ee.reloadCallback;St&&(delete Ee.reloadCallback,Ee.parse(Ee.vectorTile,Pe.layerIndex,ct.availableImages,Pe.actor,St)),st(ut,vt)};Ee.status==="parsing"?Ee.reloadCallback=it:Ee.status==="done"&&(Ee.vectorTile?Ee.parse(Ee.vectorTile,this.layerIndex,this.availableImages,this.actor,it):it())}},d.prototype.abortTile=function($e,st){var ct=this.loading,Mt=$e.uid;ct&&ct[Mt]&&ct[Mt].abort&&(ct[Mt].abort(),delete ct[Mt]),st()},d.prototype.removeTile=function($e,st){var ct=this.loaded,Mt=$e.uid;ct&&ct[Mt]&&delete ct[Mt],st()};var f=e.window.ImageBitmap,y=function(){this.loaded={}};y.prototype.loadTile=function($e,st){var ct=$e.uid,Mt=$e.encoding,Ut=$e.rawImageData,Pe=f&&Ut instanceof f?this.getImageData(Ut):Ut,Ee=new e.DEMData(ct,Pe,Mt);this.loaded=this.loaded||{},this.loaded[ct]=Ee,st(null,Ee)},y.prototype.getImageData=function($e){(!this.offscreenCanvas||!this.offscreenCanvasContext)&&(this.offscreenCanvas=new OffscreenCanvas($e.width,$e.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=$e.width,this.offscreenCanvas.height=$e.height,this.offscreenCanvasContext.drawImage($e,0,0,$e.width,$e.height);var st=this.offscreenCanvasContext.getImageData(-1,-1,$e.width+2,$e.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new e.RGBAImage({width:st.width,height:st.height},st.data)},y.prototype.removeTile=function($e){var st=this.loaded,ct=$e.uid;st&&st[ct]&&delete st[ct]};var l=x;function x(et,$e){var st=et&&et.type,ct;if(st==="FeatureCollection")for(ct=0;ct<et.features.length;ct++)x(et.features[ct],$e);else if(st==="GeometryCollection")for(ct=0;ct<et.geometries.length;ct++)x(et.geometries[ct],$e);else if(st==="Feature")x(et.geometry,$e);else if(st==="Polygon")u(et.coordinates,$e);else if(st==="MultiPolygon")for(ct=0;ct<et.coordinates.length;ct++)u(et.coordinates[ct],$e);return et}function u(et,$e){if(et.length!==0){M(et[0],$e);for(var st=1;st<et.length;st++)M(et[st],!$e)}}function M(et,$e){for(var st=0,ct=0,Mt=et.length,Ut=Mt-1;ct<Mt;Ut=ct++)st+=(et[ct][0]-et[Ut][0])*(et[Ut][1]+et[ct][1]);st>=0!=!!$e&&et.reverse()}var _=e.vectorTile.VectorTileFeature.prototype.toGeoJSON,p=function($e){this._feature=$e,this.extent=e.EXTENT,this.type=$e.type,this.properties=$e.tags,"id"in $e&&!isNaN($e.id)&&(this.id=parseInt($e.id,10))};p.prototype.loadGeometry=function(){if(this._feature.type===1){for(var $e=[],st=0,ct=this._feature.geometry;st<ct.length;st+=1){var Mt=ct[st];$e.push([new e.Point$1(Mt[0],Mt[1])])}return $e}else{for(var Ut=[],Pe=0,Ee=this._feature.geometry;Pe<Ee.length;Pe+=1){for(var it=Ee[Pe],ut=[],vt=0,St=it;vt<St.length;vt+=1){var yt=St[vt];ut.push(new e.Point$1(yt[0],yt[1]))}Ut.push(ut)}return Ut}},p.prototype.toGeoJSON=function($e,st,ct){return _.call(this,$e,st,ct)};var w=function($e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.EXTENT,this.length=$e.length,this._features=$e};w.prototype.feature=function($e){return new p(this._features[$e])};var h=e.vectorTile.VectorTileFeature,L=S;function S(et,$e){this.options=$e||{},this.features=et,this.length=et.length}S.prototype.feature=function(et){return new E(this.features[et],this.options.extent)};function E(et,$e){this.id=typeof et.id=="number"?et.id:void 0,this.type=et.type,this.rawGeometry=et.type===1?[et.geometry]:et.geometry,this.properties=et.tags,this.extent=$e||4096}E.prototype.loadGeometry=function(){var et=this.rawGeometry;this.geometry=[];for(var $e=0;$e<et.length;$e++){for(var st=et[$e],ct=[],Mt=0;Mt<st.length;Mt++)ct.push(new e.Point$1(st[Mt][0],st[Mt][1]));this.geometry.push(ct)}return this.geometry},E.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var et=this.geometry,$e=1/0,st=-1/0,ct=1/0,Mt=-1/0,Ut=0;Ut<et.length;Ut++)for(var Pe=et[Ut],Ee=0;Ee<Pe.length;Ee++){var it=Pe[Ee];$e=Math.min($e,it.x),st=Math.max(st,it.x),ct=Math.min(ct,it.y),Mt=Math.max(Mt,it.y)}return[$e,ct,st,Mt]},E.prototype.toGeoJSON=h.prototype.toGeoJSON;var P=R,F=R,I=N,D=L;function R(et){var $e=new e.pbf;return z(et,$e),$e.finish()}function N(et,$e){$e=$e||{};var st={};for(var ct in et)st[ct]=new L(et[ct].features,$e),st[ct].name=ct,st[ct].version=$e.version,st[ct].extent=$e.extent;return R({layers:st})}function z(et,$e){for(var st in et.layers)$e.writeMessage(3,G,et.layers[st])}function G(et,$e){$e.writeVarintField(15,et.version||1),$e.writeStringField(1,et.name||""),$e.writeVarintField(5,et.extent||4096);var st,ct={keys:[],values:[],keycache:{},valuecache:{}};for(st=0;st<et.length;st++)ct.feature=et.feature(st),$e.writeMessage(2,Y,ct);var Mt=ct.keys;for(st=0;st<Mt.length;st++)$e.writeStringField(3,Mt[st]);var Ut=ct.values;for(st=0;st<Ut.length;st++)$e.writeMessage(4,ce,Ut[st])}function Y(et,$e){var st=et.feature;st.id!==void 0&&$e.writeVarintField(1,st.id),$e.writeMessage(2,ee,et),$e.writeVarintField(3,st.type),$e.writeMessage(4,ne,st)}function ee(et,$e){var st=et.feature,ct=et.keys,Mt=et.values,Ut=et.keycache,Pe=et.valuecache;for(var Ee in st.properties){var it=Ut[Ee];typeof it>"u"&&(ct.push(Ee),it=ct.length-1,Ut[Ee]=it),$e.writeVarint(it);var ut=st.properties[Ee],vt=typeof ut;vt!=="string"&&vt!=="boolean"&&vt!=="number"&&(ut=JSON.stringify(ut));var St=vt+":"+ut,yt=Pe[St];typeof yt>"u"&&(Mt.push(ut),yt=Mt.length-1,Pe[St]=yt),$e.writeVarint(yt)}}function Z(et,$e){return($e<<3)+(et&7)}function X(et){return et<<1^et>>31}function ne(et,$e){for(var st=et.loadGeometry(),ct=et.type,Mt=0,Ut=0,Pe=st.length,Ee=0;Ee<Pe;Ee++){var it=st[Ee],ut=1;ct===1&&(ut=it.length),$e.writeVarint(Z(1,ut));for(var vt=ct===3?it.length-1:it.length,St=0;St<vt;St++){St===1&&ct!==1&&$e.writeVarint(Z(2,vt-1));var yt=it[St].x-Mt,Pt=it[St].y-Ut;$e.writeVarint(X(yt)),$e.writeVarint(X(Pt)),Mt+=yt,Ut+=Pt}ct===3&&$e.writeVarint(Z(7,1))}}function ce(et,$e){var st=typeof et;st==="string"?$e.writeStringField(1,et):st==="boolean"?$e.writeBooleanField(7,et):st==="number"&&(et%1!==0?$e.writeDoubleField(3,et):et<0?$e.writeSVarintField(6,et):$e.writeVarintField(5,et))}P.fromVectorTileJs=F,P.fromGeojsonVt=I,P.GeoJSONWrapper=D;function Q(et,$e,st,ct,Mt,Ut){if(!(Mt-ct<=st)){var Pe=ct+Mt>>1;K(et,$e,Pe,ct,Mt,Ut%2),Q(et,$e,st,ct,Pe-1,Ut+1),Q(et,$e,st,Pe+1,Mt,Ut+1)}}function K(et,$e,st,ct,Mt,Ut){for(;Mt>ct;){if(Mt-ct>600){var Pe=Mt-ct+1,Ee=st-ct+1,it=Math.log(Pe),ut=.5*Math.exp(2*it/3),vt=.5*Math.sqrt(it*ut*(Pe-ut)/Pe)*(Ee-Pe/2<0?-1:1),St=Math.max(ct,Math.floor(st-Ee*ut/Pe+vt)),yt=Math.min(Mt,Math.floor(st+(Pe-Ee)*ut/Pe+vt));K(et,$e,st,St,yt,Ut)}var Pt=$e[2*st+Ut],Wt=ct,ar=Mt;for(U(et,$e,ct,st),$e[2*Mt+Ut]>Pt&&U(et,$e,ct,Mt);Wt<ar;){for(U(et,$e,Wt,ar),Wt++,ar--;$e[2*Wt+Ut]<Pt;)Wt++;for(;$e[2*ar+Ut]>Pt;)ar--}$e[2*ct+Ut]===Pt?U(et,$e,ct,ar):(ar++,U(et,$e,ar,Mt)),ar<=st&&(ct=ar+1),st<=ar&&(Mt=ar-1)}}function U(et,$e,st,ct){H(et,st,ct),H($e,2*st,2*ct),H($e,2*st+1,2*ct+1)}function H(et,$e,st){var ct=et[$e];et[$e]=et[st],et[st]=ct}function q(et,$e,st,ct,Mt,Ut,Pe){for(var Ee=[0,et.length-1,0],it=[],ut,vt;Ee.length;){var St=Ee.pop(),yt=Ee.pop(),Pt=Ee.pop();if(yt-Pt<=Pe){for(var Wt=Pt;Wt<=yt;Wt++)ut=$e[2*Wt],vt=$e[2*Wt+1],ut>=st&&ut<=Mt&&vt>=ct&&vt<=Ut&&it.push(et[Wt]);continue}var ar=Math.floor((Pt+yt)/2);ut=$e[2*ar],vt=$e[2*ar+1],ut>=st&&ut<=Mt&&vt>=ct&&vt<=Ut&&it.push(et[ar]);var kr=(St+1)%2;(St===0?st<=ut:ct<=vt)&&(Ee.push(Pt),Ee.push(ar-1),Ee.push(kr)),(St===0?Mt>=ut:Ut>=vt)&&(Ee.push(ar+1),Ee.push(yt),Ee.push(kr))}return it}function re(et,$e,st,ct,Mt,Ut){for(var Pe=[0,et.length-1,0],Ee=[],it=Mt*Mt;Pe.length;){var ut=Pe.pop(),vt=Pe.pop(),St=Pe.pop();if(vt-St<=Ut){for(var yt=St;yt<=vt;yt++)j($e[2*yt],$e[2*yt+1],st,ct)<=it&&Ee.push(et[yt]);continue}var Pt=Math.floor((St+vt)/2),Wt=$e[2*Pt],ar=$e[2*Pt+1];j(Wt,ar,st,ct)<=it&&Ee.push(et[Pt]);var kr=(ut+1)%2;(ut===0?st-Mt<=Wt:ct-Mt<=ar)&&(Pe.push(St),Pe.push(Pt-1),Pe.push(kr)),(ut===0?st+Mt>=Wt:ct+Mt>=ar)&&(Pe.push(Pt+1),Pe.push(vt),Pe.push(kr))}return Ee}function j(et,$e,st,ct){var Mt=et-st,Ut=$e-ct;return Mt*Mt+Ut*Ut}var $=function(et){return et[0]},ie=function(et){return et[1]},oe=function($e,st,ct,Mt,Ut){st===void 0&&(st=$),ct===void 0&&(ct=ie),Mt===void 0&&(Mt=64),Ut===void 0&&(Ut=Float64Array),this.nodeSize=Mt,this.points=$e;for(var Pe=$e.length<65536?Uint16Array:Uint32Array,Ee=this.ids=new Pe($e.length),it=this.coords=new Ut($e.length*2),ut=0;ut<$e.length;ut++)Ee[ut]=ut,it[2*ut]=st($e[ut]),it[2*ut+1]=ct($e[ut]);Q(Ee,it,Mt,0,Ee.length-1,0)};oe.prototype.range=function($e,st,ct,Mt){return q(this.ids,this.coords,$e,st,ct,Mt,this.nodeSize)},oe.prototype.within=function($e,st,ct){return re(this.ids,this.coords,$e,st,ct,this.nodeSize)};var ae={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(et){return et}},se=function($e){this.options=Ve(Object.create(ae),$e),this.trees=new Array(this.options.maxZoom+1)};se.prototype.load=function($e){var st=this.options,ct=st.log,Mt=st.minZoom,Ut=st.maxZoom,Pe=st.nodeSize;ct&&console.time("total time");var Ee="prepare "+$e.length+" points";ct&&console.time(Ee),this.points=$e;for(var it=[],ut=0;ut<$e.length;ut++)!$e[ut].geometry||it.push(ue($e[ut],ut));this.trees[Ut+1]=new oe(it,Ae,Le,Pe,Float32Array),ct&&console.timeEnd(Ee);for(var vt=Ut;vt>=Mt;vt--){var St=+Date.now();it=this._cluster(it,vt),this.trees[vt]=new oe(it,Ae,Le,Pe,Float32Array),ct&&console.log("z%d: %d clusters in %dms",vt,it.length,+Date.now()-St)}return ct&&console.timeEnd("total time"),this},se.prototype.getClusters=function($e,st){var ct=(($e[0]+180)%360+360)%360-180,Mt=Math.max(-90,Math.min(90,$e[1])),Ut=$e[2]===180?180:(($e[2]+180)%360+360)%360-180,Pe=Math.max(-90,Math.min(90,$e[3]));if($e[2]-$e[0]>=360)ct=-180,Ut=180;else if(ct>Ut){var Ee=this.getClusters([ct,Mt,180,Pe],st),it=this.getClusters([-180,Mt,Ut,Pe],st);return Ee.concat(it)}for(var ut=this.trees[this._limitZoom(st)],vt=ut.range(me(ct),be(Pe),me(Ut),be(Mt)),St=[],yt=0,Pt=vt;yt<Pt.length;yt+=1){var Wt=Pt[yt],ar=ut.points[Wt];St.push(ar.numPoints?ye(ar):this.points[ar.index])}return St},se.prototype.getChildren=function($e){var st=this._getOriginId($e),ct=this._getOriginZoom($e),Mt="No cluster with the specified id.",Ut=this.trees[ct];if(!Ut)throw new Error(Mt);var Pe=Ut.points[st];if(!Pe)throw new Error(Mt);for(var Ee=this.options.radius/(this.options.extent*Math.pow(2,ct-1)),it=Ut.within(Pe.x,Pe.y,Ee),ut=[],vt=0,St=it;vt<St.length;vt+=1){var yt=St[vt],Pt=Ut.points[yt];Pt.parentId===$e&&ut.push(Pt.numPoints?ye(Pt):this.points[Pt.index])}if(ut.length===0)throw new Error(Mt);return ut},se.prototype.getLeaves=function($e,st,ct){st=st||10,ct=ct||0;var Mt=[];return this._appendLeaves(Mt,$e,st,ct,0),Mt},se.prototype.getTile=function($e,st,ct){var Mt=this.trees[this._limitZoom($e)],Ut=Math.pow(2,$e),Pe=this.options,Ee=Pe.extent,it=Pe.radius,ut=it/Ee,vt=(ct-ut)/Ut,St=(ct+1+ut)/Ut,yt={features:[]};return this._addTileFeatures(Mt.range((st-ut)/Ut,vt,(st+1+ut)/Ut,St),Mt.points,st,ct,Ut,yt),st===0&&this._addTileFeatures(Mt.range(1-ut/Ut,vt,1,St),Mt.points,Ut,ct,Ut,yt),st===Ut-1&&this._addTileFeatures(Mt.range(0,vt,ut/Ut,St),Mt.points,-1,ct,Ut,yt),yt.features.length?yt:null},se.prototype.getClusterExpansionZoom=function($e){for(var st=this._getOriginZoom($e)-1;st<=this.options.maxZoom;){var ct=this.getChildren($e);if(st++,ct.length!==1)break;$e=ct[0].properties.cluster_id}return st},se.prototype._appendLeaves=function($e,st,ct,Mt,Ut){for(var Pe=this.getChildren(st),Ee=0,it=Pe;Ee<it.length;Ee+=1){var ut=it[Ee],vt=ut.properties;if(vt&&vt.cluster?Ut+vt.point_count<=Mt?Ut+=vt.point_count:Ut=this._appendLeaves($e,vt.cluster_id,ct,Mt,Ut):Ut<Mt?Ut++:$e.push(ut),$e.length===ct)break}return Ut},se.prototype._addTileFeatures=function($e,st,ct,Mt,Ut,Pe){for(var Ee=0,it=$e;Ee<it.length;Ee+=1){var ut=it[Ee],vt=st[ut],St=vt.numPoints,yt={type:1,geometry:[[Math.round(this.options.extent*(vt.x*Ut-ct)),Math.round(this.options.extent*(vt.y*Ut-Mt))]],tags:St?xe(vt):this.points[vt.index].properties},Pt=void 0;St?Pt=vt.id:this.options.generateId?Pt=vt.index:this.points[vt.index].id&&(Pt=this.points[vt.index].id),Pt!==void 0&&(yt.id=Pt),Pe.features.push(yt)}},se.prototype._limitZoom=function($e){return Math.max(this.options.minZoom,Math.min($e,this.options.maxZoom+1))},se.prototype._cluster=function($e,st){for(var ct=[],Mt=this.options,Ut=Mt.radius,Pe=Mt.extent,Ee=Mt.reduce,it=Ut/(Pe*Math.pow(2,st)),ut=0;ut<$e.length;ut++){var vt=$e[ut];if(!(vt.zoom<=st)){vt.zoom=st;for(var St=this.trees[st+1],yt=St.within(vt.x,vt.y,it),Pt=vt.numPoints||1,Wt=vt.x*Pt,ar=vt.y*Pt,kr=Ee&&Pt>1?this._map(vt,!0):null,wr=(ut<<5)+(st+1)+this.points.length,Sr=0,Zr=yt;Sr<Zr.length;Sr+=1){var ir=Zr[Sr],xr=St.points[ir];if(!(xr.zoom<=st)){xr.zoom=st;var Rr=xr.numPoints||1;Wt+=xr.x*Rr,ar+=xr.y*Rr,Pt+=Rr,xr.parentId=wr,Ee&&(kr||(kr=this._map(vt,!0)),Ee(kr,this._map(xr)))}}Pt===1?ct.push(vt):(vt.parentId=wr,ct.push(_e(Wt/Pt,ar/Pt,wr,Pt,kr)))}}return ct},se.prototype._getOriginId=function($e){return $e-this.points.length>>5},se.prototype._getOriginZoom=function($e){return($e-this.points.length)%32},se.prototype._map=function($e,st){if($e.numPoints)return st?Ve({},$e.properties):$e.properties;var ct=this.points[$e.index].properties,Mt=this.options.map(ct);return st&&Mt===ct?Ve({},Mt):Mt};function _e(et,$e,st,ct,Mt){return{x:et,y:$e,zoom:1/0,id:st,parentId:-1,numPoints:ct,properties:Mt}}function ue(et,$e){var st=et.geometry.coordinates,ct=st[0],Mt=st[1];return{x:me(ct),y:be(Mt),zoom:1/0,index:$e,parentId:-1}}function ye(et){return{type:"Feature",id:et.id,properties:xe(et),geometry:{type:"Point",coordinates:[ke(et.x),De(et.y)]}}}function xe(et){var $e=et.numPoints,st=$e>=1e4?Math.round($e/1e3)+"k":$e>=1e3?Math.round($e/100)/10+"k":$e;return Ve(Ve({},et.properties),{cluster:!0,cluster_id:et.id,point_count:$e,point_count_abbreviated:st})}function me(et){return et/360+.5}function be(et){var $e=Math.sin(et*Math.PI/180),st=.5-.25*Math.log((1+$e)/(1-$e))/Math.PI;return st<0?0:st>1?1:st}function ke(et){return(et-.5)*360}function De(et){var $e=(180-et*360)*Math.PI/180;return 360*Math.atan(Math.exp($e))/Math.PI-90}function Ve(et,$e){for(var st in $e)et[st]=$e[st];return et}function Ae(et){return et.x}function Le(et){return et.y}function je(et,$e,st,ct){for(var Mt=ct,Ut=st-$e>>1,Pe=st-$e,Ee,it=et[$e],ut=et[$e+1],vt=et[st],St=et[st+1],yt=$e+3;yt<st;yt+=3){var Pt=Ye(et[yt],et[yt+1],it,ut,vt,St);if(Pt>Mt)Ee=yt,Mt=Pt;else if(Pt===Mt){var Wt=Math.abs(yt-Ut);Wt<Pe&&(Ee=yt,Pe=Wt)}}Mt>ct&&(Ee-$e>3&&je(et,$e,Ee,ct),et[Ee+2]=Mt,st-Ee>3&&je(et,Ee,st,ct))}function Ye(et,$e,st,ct,Mt,Ut){var Pe=Mt-st,Ee=Ut-ct;if(Pe!==0||Ee!==0){var it=((et-st)*Pe+($e-ct)*Ee)/(Pe*Pe+Ee*Ee);it>1?(st=Mt,ct=Ut):it>0&&(st+=Pe*it,ct+=Ee*it)}return Pe=et-st,Ee=$e-ct,Pe*Pe+Ee*Ee}function ze(et,$e,st,ct){var Mt={id:typeof et>"u"?null:et,type:$e,geometry:st,tags:ct,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return Ie(Mt),Mt}function Ie(et){var $e=et.geometry,st=et.type;if(st==="Point"||st==="MultiPoint"||st==="LineString")We(et,$e);else if(st==="Polygon"||st==="MultiLineString")for(var ct=0;ct<$e.length;ct++)We(et,$e[ct]);else if(st==="MultiPolygon")for(ct=0;ct<$e.length;ct++)for(var Mt=0;Mt<$e[ct].length;Mt++)We(et,$e[ct][Mt])}function We(et,$e){for(var st=0;st<$e.length;st+=3)et.minX=Math.min(et.minX,$e[st]),et.minY=Math.min(et.minY,$e[st+1]),et.maxX=Math.max(et.maxX,$e[st]),et.maxY=Math.max(et.maxY,$e[st+1])}function pt(et,$e){var st=[];if(et.type==="FeatureCollection")for(var ct=0;ct<et.features.length;ct++)Ft(st,et.features[ct],$e,ct);else et.type==="Feature"?Ft(st,et,$e):Ft(st,{geometry:et},$e);return st}function Ft(et,$e,st,ct){if(!!$e.geometry){var Mt=$e.geometry.coordinates,Ut=$e.geometry.type,Pe=Math.pow(st.tolerance/((1<<st.maxZoom)*st.extent),2),Ee=[],it=$e.id;if(st.promoteId?it=$e.properties[st.promoteId]:st.generateId&&(it=ct||0),Ut==="Point")Qt(Mt,Ee);else if(Ut==="MultiPoint")for(var ut=0;ut<Mt.length;ut++)Qt(Mt[ut],Ee);else if(Ut==="LineString")zt(Mt,Ee,Pe,!1);else if(Ut==="MultiLineString")if(st.lineMetrics){for(ut=0;ut<Mt.length;ut++)Ee=[],zt(Mt[ut],Ee,Pe,!1),et.push(ze(it,"LineString",Ee,$e.properties));return}else Et(Mt,Ee,Pe,!1);else if(Ut==="Polygon")Et(Mt,Ee,Pe,!0);else if(Ut==="MultiPolygon")for(ut=0;ut<Mt.length;ut++){var vt=[];Et(Mt[ut],vt,Pe,!0),Ee.push(vt)}else if(Ut==="GeometryCollection"){for(ut=0;ut<$e.geometry.geometries.length;ut++)Ft(et,{id:it,geometry:$e.geometry.geometries[ut],properties:$e.properties},st,ct);return}else throw new Error("Input data is not a valid GeoJSON object.");et.push(ze(it,Ut,Ee,$e.properties))}}function Qt(et,$e){$e.push(Xt(et[0])),$e.push(Nt(et[1])),$e.push(0)}function zt(et,$e,st,ct){for(var Mt,Ut,Pe=0,Ee=0;Ee<et.length;Ee++){var it=Xt(et[Ee][0]),ut=Nt(et[Ee][1]);$e.push(it),$e.push(ut),$e.push(0),Ee>0&&(ct?Pe+=(Mt*ut-it*Ut)/2:Pe+=Math.sqrt(Math.pow(it-Mt,2)+Math.pow(ut-Ut,2))),Mt=it,Ut=ut}var vt=$e.length-3;$e[2]=1,je($e,0,vt,st),$e[vt+2]=1,$e.size=Math.abs(Pe),$e.start=0,$e.end=$e.size}function Et(et,$e,st,ct){for(var Mt=0;Mt<et.length;Mt++){var Ut=[];zt(et[Mt],Ut,st,ct),$e.push(Ut)}}function Xt(et){return et/360+.5}function Nt(et){var $e=Math.sin(et*Math.PI/180),st=.5-.25*Math.log((1+$e)/(1-$e))/Math.PI;return st<0?0:st>1?1:st}function Ct(et,$e,st,ct,Mt,Ut,Pe,Ee){if(st/=$e,ct/=$e,Ut>=st&&Pe<ct)return et;if(Pe<st||Ut>=ct)return null;for(var it=[],ut=0;ut<et.length;ut++){var vt=et[ut],St=vt.geometry,yt=vt.type,Pt=Mt===0?vt.minX:vt.minY,Wt=Mt===0?vt.maxX:vt.maxY;if(Pt>=st&&Wt<ct){it.push(vt);continue}else if(Wt<st||Pt>=ct)continue;var ar=[];if(yt==="Point"||yt==="MultiPoint")Xe(St,ar,st,ct,Mt);else if(yt==="LineString")at(St,ar,st,ct,Mt,!1,Ee.lineMetrics);else if(yt==="MultiLineString")Se(St,ar,st,ct,Mt,!1);else if(yt==="Polygon")Se(St,ar,st,ct,Mt,!0);else if(yt==="MultiPolygon")for(var kr=0;kr<St.length;kr++){var wr=[];Se(St[kr],wr,st,ct,Mt,!0),wr.length&&ar.push(wr)}if(ar.length){if(Ee.lineMetrics&&yt==="LineString"){for(kr=0;kr<ar.length;kr++)it.push(ze(vt.id,yt,ar[kr],vt.tags));continue}(yt==="LineString"||yt==="MultiLineString")&&(ar.length===1?(yt="LineString",ar=ar[0]):yt="MultiLineString"),(yt==="Point"||yt==="MultiPoint")&&(yt=ar.length===3?"Point":"MultiPoint"),it.push(ze(vt.id,yt,ar,vt.tags))}}return it.length?it:null}function Xe(et,$e,st,ct,Mt){for(var Ut=0;Ut<et.length;Ut+=3){var Pe=et[Ut+Mt];Pe>=st&&Pe<=ct&&($e.push(et[Ut]),$e.push(et[Ut+1]),$e.push(et[Ut+2]))}}function at(et,$e,st,ct,Mt,Ut,Pe){for(var Ee=Ge(et),it=Mt===0?Ke:qe,ut=et.start,vt,St,yt=0;yt<et.length-3;yt+=3){var Pt=et[yt],Wt=et[yt+1],ar=et[yt+2],kr=et[yt+3],wr=et[yt+4],Sr=Mt===0?Pt:Wt,Zr=Mt===0?kr:wr,ir=!1;Pe&&(vt=Math.sqrt(Math.pow(Pt-kr,2)+Math.pow(Wt-wr,2))),Sr<st?Zr>st&&(St=it(Ee,Pt,Wt,kr,wr,st),Pe&&(Ee.start=ut+vt*St)):Sr>ct?Zr<ct&&(St=it(Ee,Pt,Wt,kr,wr,ct),Pe&&(Ee.start=ut+vt*St)):He(Ee,Pt,Wt,ar),Zr<st&&Sr>=st&&(St=it(Ee,Pt,Wt,kr,wr,st),ir=!0),Zr>ct&&Sr<=ct&&(St=it(Ee,Pt,Wt,kr,wr,ct),ir=!0),!Ut&&ir&&(Pe&&(Ee.end=ut+vt*St),$e.push(Ee),Ee=Ge(et)),Pe&&(ut+=vt)}var xr=et.length-3;Pt=et[xr],Wt=et[xr+1],ar=et[xr+2],Sr=Mt===0?Pt:Wt,Sr>=st&&Sr<=ct&&He(Ee,Pt,Wt,ar),xr=Ee.length-3,Ut&&xr>=3&&(Ee[xr]!==Ee[0]||Ee[xr+1]!==Ee[1])&&He(Ee,Ee[0],Ee[1],Ee[2]),Ee.length&&$e.push(Ee)}function Ge(et){var $e=[];return $e.size=et.size,$e.start=et.start,$e.end=et.end,$e}function Se(et,$e,st,ct,Mt,Ut){for(var Pe=0;Pe<et.length;Pe++)at(et[Pe],$e,st,ct,Mt,Ut,!1)}function He(et,$e,st,ct){et.push($e),et.push(st),et.push(ct)}function Ke(et,$e,st,ct,Mt,Ut){var Pe=(Ut-$e)/(ct-$e);return et.push(Ut),et.push(st+(Mt-st)*Pe),et.push(1),Pe}function qe(et,$e,st,ct,Mt,Ut){var Pe=(Ut-st)/(Mt-st);return et.push($e+(ct-$e)*Pe),et.push(Ut),et.push(1),Pe}function Tt(et,$e){var st=$e.buffer/$e.extent,ct=et,Mt=Ct(et,1,-1-st,st,0,-1,2,$e),Ut=Ct(et,1,1-st,2+st,0,-1,2,$e);return(Mt||Ut)&&(ct=Ct(et,1,-st,1+st,0,-1,2,$e)||[],Mt&&(ct=mt(Mt,1).concat(ct)),Ut&&(ct=ct.concat(mt(Ut,-1)))),ct}function mt(et,$e){for(var st=[],ct=0;ct<et.length;ct++){var Mt=et[ct],Ut=Mt.type,Pe;if(Ut==="Point"||Ut==="MultiPoint"||Ut==="LineString")Pe=At(Mt.geometry,$e);else if(Ut==="MultiLineString"||Ut==="Polygon"){Pe=[];for(var Ee=0;Ee<Mt.geometry.length;Ee++)Pe.push(At(Mt.geometry[Ee],$e))}else if(Ut==="MultiPolygon")for(Pe=[],Ee=0;Ee<Mt.geometry.length;Ee++){for(var it=[],ut=0;ut<Mt.geometry[Ee].length;ut++)it.push(At(Mt.geometry[Ee][ut],$e));Pe.push(it)}st.push(ze(Mt.id,Ut,Pe,Mt.tags))}return st}function At(et,$e){var st=[];st.size=et.size,et.start!==void 0&&(st.start=et.start,st.end=et.end);for(var ct=0;ct<et.length;ct+=3)st.push(et[ct]+$e,et[ct+1],et[ct+2]);return st}function Ht(et,$e){if(et.transformed)return et;var st=1<<et.z,ct=et.x,Mt=et.y,Ut,Pe,Ee;for(Ut=0;Ut<et.features.length;Ut++){var it=et.features[Ut],ut=it.geometry,vt=it.type;if(it.geometry=[],vt===1)for(Pe=0;Pe<ut.length;Pe+=2)it.geometry.push(It(ut[Pe],ut[Pe+1],$e,st,ct,Mt));else for(Pe=0;Pe<ut.length;Pe++){var St=[];for(Ee=0;Ee<ut[Pe].length;Ee+=2)St.push(It(ut[Pe][Ee],ut[Pe][Ee+1],$e,st,ct,Mt));it.geometry.push(St)}}return et.transformed=!0,et}function It(et,$e,st,ct,Mt,Ut){return[Math.round(st*(et*ct-Mt)),Math.round(st*($e*ct-Ut))]}function Vt(et,$e,st,ct,Mt){for(var Ut=$e===Mt.maxZoom?0:Mt.tolerance/((1<<$e)*Mt.extent),Pe={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:st,y:ct,z:$e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Ee=0;Ee<et.length;Ee++){Pe.numFeatures++,jt(Pe,et[Ee],Ut,Mt);var it=et[Ee].minX,ut=et[Ee].minY,vt=et[Ee].maxX,St=et[Ee].maxY;it<Pe.minX&&(Pe.minX=it),ut<Pe.minY&&(Pe.minY=ut),vt>Pe.maxX&&(Pe.maxX=vt),St>Pe.maxY&&(Pe.maxY=St)}return Pe}function jt(et,$e,st,ct){var Mt=$e.geometry,Ut=$e.type,Pe=[];if(Ut==="Point"||Ut==="MultiPoint")for(var Ee=0;Ee<Mt.length;Ee+=3)Pe.push(Mt[Ee]),Pe.push(Mt[Ee+1]),et.numPoints++,et.numSimplified++;else if(Ut==="LineString")Yt(Pe,Mt,et,st,!1,!1);else if(Ut==="MultiLineString"||Ut==="Polygon")for(Ee=0;Ee<Mt.length;Ee++)Yt(Pe,Mt[Ee],et,st,Ut==="Polygon",Ee===0);else if(Ut==="MultiPolygon")for(var it=0;it<Mt.length;it++){var ut=Mt[it];for(Ee=0;Ee<ut.length;Ee++)Yt(Pe,ut[Ee],et,st,!0,Ee===0)}if(Pe.length){var vt=$e.tags||null;if(Ut==="LineString"&&ct.lineMetrics){vt={};for(var St in $e.tags)vt[St]=$e.tags[St];vt.mapbox_clip_start=Mt.start/Mt.size,vt.mapbox_clip_end=Mt.end/Mt.size}var yt={geometry:Pe,type:Ut==="Polygon"||Ut==="MultiPolygon"?3:Ut==="LineString"||Ut==="MultiLineString"?2:1,tags:vt};$e.id!==null&&(yt.id=$e.id),et.features.push(yt)}}function Yt(et,$e,st,ct,Mt,Ut){var Pe=ct*ct;if(ct>0&&$e.size<(Mt?Pe:ct)){st.numPoints+=$e.length/3;return}for(var Ee=[],it=0;it<$e.length;it+=3)(ct===0||$e[it+2]>Pe)&&(st.numSimplified++,Ee.push($e[it]),Ee.push($e[it+1])),st.numPoints++;Mt&&or(Ee,Ut),et.push(Ee)}function or(et,$e){for(var st=0,ct=0,Mt=et.length,Ut=Mt-2;ct<Mt;Ut=ct,ct+=2)st+=(et[ct]-et[Ut])*(et[ct+1]+et[Ut+1]);if(st>0===$e)for(ct=0,Mt=et.length;ct<Mt/2;ct+=2){var Pe=et[ct],Ee=et[ct+1];et[ct]=et[Mt-2-ct],et[ct+1]=et[Mt-1-ct],et[Mt-2-ct]=Pe,et[Mt-1-ct]=Ee}}function Gr(et,$e){return new on(et,$e)}function on(et,$e){$e=this.options=ot(Object.create(this.options),$e);var st=$e.debug;if(st&&console.time("preprocess data"),$e.maxZoom<0||$e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if($e.promoteId&&$e.generateId)throw new Error("promoteId and generateId cannot be used together.");var ct=pt(et,$e);this.tiles={},this.tileCoords=[],st&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",$e.indexMaxZoom,$e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ct=Tt(ct,$e),ct.length&&this.splitTile(ct,0,0,0),st&&(ct.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}on.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},on.prototype.splitTile=function(et,$e,st,ct,Mt,Ut,Pe){for(var Ee=[et,$e,st,ct],it=this.options,ut=it.debug;Ee.length;){ct=Ee.pop(),st=Ee.pop(),$e=Ee.pop(),et=Ee.pop();var vt=1<<$e,St=Jr($e,st,ct),yt=this.tiles[St];if(!yt&&(ut>1&&console.time("creation"),yt=this.tiles[St]=Vt(et,$e,st,ct,it),this.tileCoords.push({z:$e,x:st,y:ct}),ut)){ut>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",$e,st,ct,yt.numFeatures,yt.numPoints,yt.numSimplified),console.timeEnd("creation"));var Pt="z"+$e;this.stats[Pt]=(this.stats[Pt]||0)+1,this.total++}if(yt.source=et,Mt){if($e===it.maxZoom||$e===Mt)continue;var Wt=1<<Mt-$e;if(st!==Math.floor(Ut/Wt)||ct!==Math.floor(Pe/Wt))continue}else if($e===it.indexMaxZoom||yt.numPoints<=it.indexMaxPoints)continue;if(yt.source=null,et.length!==0){ut>1&&console.time("clipping");var ar=.5*it.buffer/it.extent,kr=.5-ar,wr=.5+ar,Sr=1+ar,Zr,ir,xr,Rr,Br,Cr;Zr=ir=xr=Rr=null,Br=Ct(et,vt,st-ar,st+wr,0,yt.minX,yt.maxX,it),Cr=Ct(et,vt,st+kr,st+Sr,0,yt.minX,yt.maxX,it),et=null,Br&&(Zr=Ct(Br,vt,ct-ar,ct+wr,1,yt.minY,yt.maxY,it),ir=Ct(Br,vt,ct+kr,ct+Sr,1,yt.minY,yt.maxY,it),Br=null),Cr&&(xr=Ct(Cr,vt,ct-ar,ct+wr,1,yt.minY,yt.maxY,it),Rr=Ct(Cr,vt,ct+kr,ct+Sr,1,yt.minY,yt.maxY,it),Cr=null),ut>1&&console.timeEnd("clipping"),Ee.push(Zr||[],$e+1,st*2,ct*2),Ee.push(ir||[],$e+1,st*2,ct*2+1),Ee.push(xr||[],$e+1,st*2+1,ct*2),Ee.push(Rr||[],$e+1,st*2+1,ct*2+1)}}},on.prototype.getTile=function(et,$e,st){var ct=this.options,Mt=ct.extent,Ut=ct.debug;if(et<0||et>24)return null;var Pe=1<<et;$e=($e%Pe+Pe)%Pe;var Ee=Jr(et,$e,st);if(this.tiles[Ee])return Ht(this.tiles[Ee],Mt);Ut>1&&console.log("drilling down to z%d-%d-%d",et,$e,st);for(var it=et,ut=$e,vt=st,St;!St&&it>0;)it--,ut=Math.floor(ut/2),vt=Math.floor(vt/2),St=this.tiles[Jr(it,ut,vt)];return!St||!St.source?null:(Ut>1&&console.log("found parent tile z%d-%d-%d",it,ut,vt),Ut>1&&console.time("drilling down"),this.splitTile(St.source,it,ut,vt,et,$e,st),Ut>1&&console.timeEnd("drilling down"),this.tiles[Ee]?Ht(this.tiles[Ee],Mt):null)};function Jr(et,$e,st){return((1<<et)*st+$e)*32+et}function ot(et,$e){for(var st in $e)et[st]=$e[st];return et}function er(et,$e){var st=et.tileID.canonical;if(!this._geoJSONIndex)return $e(null,null);var ct=this._geoJSONIndex.getTile(st.z,st.x,st.y);if(!ct)return $e(null,null);var Mt=new w(ct.features),Ut=P(Mt);(Ut.byteOffset!==0||Ut.byteLength!==Ut.buffer.byteLength)&&(Ut=new Uint8Array(Ut)),$e(null,{vectorTile:Mt,rawData:Ut.buffer})}var Kt=function(et){function $e(st,ct,Mt,Ut){et.call(this,st,ct,Mt,er),Ut&&(this.loadGeoJSON=Ut)}return et&&($e.__proto__=et),$e.prototype=Object.create(et&&et.prototype),$e.prototype.constructor=$e,$e.prototype.loadData=function(ct,Mt){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=Mt,this._pendingLoadDataParams=ct,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},$e.prototype._loadData=function(){var ct=this;if(!(!this._pendingCallback||!this._pendingLoadDataParams)){var Mt=this._pendingCallback,Ut=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var Pe=Ut&&Ut.request&&Ut.request.collectResourceTiming?new e.RequestPerformance(Ut.request):!1;this.loadGeoJSON(Ut,function(Ee,it){if(Ee||!it)return Mt(Ee);if(typeof it!="object")return Mt(new Error("Input data given to '"+Ut.source+"' is not a valid GeoJSON object."));l(it,!0);try{ct._geoJSONIndex=Ut.cluster?new se(fr(Ut)).load(it.features):Gr(it,Ut.geojsonVtOptions)}catch(St){return Mt(St)}ct.loaded={};var ut={};if(Pe){var vt=Pe.finish();vt&&(ut.resourceTiming={},ut.resourceTiming[Ut.source]=JSON.parse(JSON.stringify(vt)))}Mt(null,ut)})}},$e.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},$e.prototype.reloadTile=function(ct,Mt){var Ut=this.loaded,Pe=ct.uid;return Ut&&Ut[Pe]?et.prototype.reloadTile.call(this,ct,Mt):this.loadTile(ct,Mt)},$e.prototype.loadGeoJSON=function(ct,Mt){if(ct.request)e.getJSON(ct.request,Mt);else if(typeof ct.data=="string")try{return Mt(null,JSON.parse(ct.data))}catch{return Mt(new Error("Input data given to '"+ct.source+"' is not a valid GeoJSON object."))}else return Mt(new Error("Input data given to '"+ct.source+"' is not a valid GeoJSON object."))},$e.prototype.removeSource=function(ct,Mt){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Mt()},$e.prototype.getClusterExpansionZoom=function(ct,Mt){try{Mt(null,this._geoJSONIndex.getClusterExpansionZoom(ct.clusterId))}catch(Ut){Mt(Ut)}},$e.prototype.getClusterChildren=function(ct,Mt){try{Mt(null,this._geoJSONIndex.getChildren(ct.clusterId))}catch(Ut){Mt(Ut)}},$e.prototype.getClusterLeaves=function(ct,Mt){try{Mt(null,this._geoJSONIndex.getLeaves(ct.clusterId,ct.limit,ct.offset))}catch(Ut){Mt(Ut)}},$e}(d);function fr(et){var $e=et.superclusterOptions,st=et.clusterProperties;if(!st||!$e)return $e;for(var ct={},Mt={},Ut={accumulated:null,zoom:0},Pe={properties:null},Ee=Object.keys(st),it=0,ut=Ee;it<ut.length;it+=1){var vt=ut[it],St=st[vt],yt=St[0],Pt=St[1],Wt=e.createExpression(Pt),ar=e.createExpression(typeof yt=="string"?[yt,["accumulated"],["get",vt]]:yt);ct[vt]=Wt.value,Mt[vt]=ar.value}return $e.map=function(kr){Pe.properties=kr;for(var wr={},Sr=0,Zr=Ee;Sr<Zr.length;Sr+=1){var ir=Zr[Sr];wr[ir]=ct[ir].evaluate(Ut,Pe)}return wr},$e.reduce=function(kr,wr){Pe.properties=wr;for(var Sr=0,Zr=Ee;Sr<Zr.length;Sr+=1){var ir=Zr[Sr];Ut.accumulated=kr[ir],kr[ir]=Mt[ir].evaluate(Ut,Pe)}},$e}var Ar=function($e){var st=this;this.self=$e,this.actor=new e.Actor($e,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:d,geojson:Kt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(ct,Mt){if(st.workerSourceTypes[ct])throw new Error('Worker source with name "'+ct+'" already registered.');st.workerSourceTypes[ct]=Mt},this.self.registerRTLTextPlugin=function(ct){if(e.plugin.isParsed())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=ct.applyArabicShaping,e.plugin.processBidirectionalText=ct.processBidirectionalText,e.plugin.processStyledBidirectionalText=ct.processStyledBidirectionalText}};return Ar.prototype.setReferrer=function($e,st){this.referrer=st},Ar.prototype.setImages=function($e,st,ct){this.availableImages[$e]=st;for(var Mt in this.workerSources[$e]){var Ut=this.workerSources[$e][Mt];for(var Pe in Ut)Ut[Pe].availableImages=st}ct()},Ar.prototype.setLayers=function($e,st,ct){this.getLayerIndex($e).replace(st),ct()},Ar.prototype.updateLayers=function($e,st,ct){this.getLayerIndex($e).update(st.layers,st.removedIds),ct()},Ar.prototype.loadTile=function($e,st,ct){this.getWorkerSource($e,st.type,st.source).loadTile(st,ct)},Ar.prototype.loadDEMTile=function($e,st,ct){this.getDEMWorkerSource($e,st.source).loadTile(st,ct)},Ar.prototype.reloadTile=function($e,st,ct){this.getWorkerSource($e,st.type,st.source).reloadTile(st,ct)},Ar.prototype.abortTile=function($e,st,ct){this.getWorkerSource($e,st.type,st.source).abortTile(st,ct)},Ar.prototype.removeTile=function($e,st,ct){this.getWorkerSource($e,st.type,st.source).removeTile(st,ct)},Ar.prototype.removeDEMTile=function($e,st){this.getDEMWorkerSource($e,st.source).removeTile(st)},Ar.prototype.removeSource=function($e,st,ct){if(!(!this.workerSources[$e]||!this.workerSources[$e][st.type]||!this.workerSources[$e][st.type][st.source])){var Mt=this.workerSources[$e][st.type][st.source];delete this.workerSources[$e][st.type][st.source],Mt.removeSource!==void 0?Mt.removeSource(st,ct):ct()}},Ar.prototype.loadWorkerSource=function($e,st,ct){try{this.self.importScripts(st.url),ct()}catch(Mt){ct(Mt.toString())}},Ar.prototype.syncRTLPluginState=function($e,st,ct){try{e.plugin.setState(st);var Mt=e.plugin.getPluginURL();if(e.plugin.isLoaded()&&!e.plugin.isParsed()&&Mt!=null){this.self.importScripts(Mt);var Ut=e.plugin.isParsed(),Pe=Ut?void 0:new Error("RTL Text Plugin failed to import scripts from "+Mt);ct(Pe,Ut)}}catch(Ee){ct(Ee.toString())}},Ar.prototype.getAvailableImages=function($e){var st=this.availableImages[$e];return st||(st=[]),st},Ar.prototype.getLayerIndex=function($e){var st=this.layerIndexes[$e];return st||(st=this.layerIndexes[$e]=new r),st},Ar.prototype.getWorkerSource=function($e,st,ct){var Mt=this;if(this.workerSources[$e]||(this.workerSources[$e]={}),this.workerSources[$e][st]||(this.workerSources[$e][st]={}),!this.workerSources[$e][st][ct]){var Ut={send:function(Pe,Ee,it){Mt.actor.send(Pe,Ee,it,$e)}};this.workerSources[$e][st][ct]=new this.workerSourceTypes[st](Ut,this.getLayerIndex($e),this.getAvailableImages($e))}return this.workerSources[$e][st][ct]},Ar.prototype.getDEMWorkerSource=function($e,st){return this.demWorkerSources[$e]||(this.demWorkerSources[$e]={}),this.demWorkerSources[$e][st]||(this.demWorkerSources[$e][st]=new y),this.demWorkerSources[$e][st]},Ar.prototype.enforceCacheSizeLimit=function($e,st){e.enforceCacheSizeLimit(st)},typeof WorkerGlobalScope<"u"&&typeof e.window<"u"&&e.window instanceof WorkerGlobalScope&&(e.window.worker=new Ar(e.window)),Ar}),T(["./shared"],function(e){var a=e.createCommonjsModule(function(he){he.exports?he.exports=W:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=W,window.mapboxgl.notSupportedReason=de);function W(Hr){return!de(Hr)}function de(Hr){if(!J())return"not a browser";if(!ge())return"insufficent Array support";if(!Ce())return"insufficient Function support";if(!Fe())return"insufficient Object support";if(!Je())return"insufficient JSON support";if(!ft())return"insufficient worker support";if(!Lt())return"insufficient Uint8ClampedArray support";if(!$t())return"insufficient ArrayBuffer support";if(!cr())return"insufficient Canvas/getImageData support";if(!Pr(Hr&&Hr.failIfMajorPerformanceCaveat))return"insufficient WebGL support"}function J(){return typeof window<"u"&&typeof document<"u"}function ge(){return Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray}function Ce(){return Function.prototype&&Function.prototype.bind}function Fe(){return Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions}function Je(){return"JSON"in window&&"parse"in JSON&&"stringify"in JSON}function ft(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var Hr=new Blob([""],{type:"text/javascript"}),$r=URL.createObjectURL(Hr),pn,Pn;try{Pn=new Worker($r),pn=!0}catch{pn=!1}return Pn&&Pn.terminate(),URL.revokeObjectURL($r),pn}function Lt(){return"Uint8ClampedArray"in window}function $t(){return ArrayBuffer.isView}function cr(){var Hr=document.createElement("canvas");Hr.width=Hr.height=1;var $r=Hr.getContext("2d");if(!$r)return!1;var pn=$r.getImageData(0,0,1,1);return pn&&pn.width===Hr.width}var dr={};function Pr(Hr){return dr[Hr]===void 0&&(dr[Hr]=Xr(Hr)),dr[Hr]}W.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};function Yr(Hr){var $r=document.createElement("canvas"),pn=Object.create(W.webGLContextAttributes);return pn.failIfMajorPerformanceCaveat=Hr,$r.probablySupportsContext?$r.probablySupportsContext("webgl",pn)||$r.probablySupportsContext("experimental-webgl",pn):$r.supportsContext?$r.supportsContext("webgl",pn)||$r.supportsContext("experimental-webgl",pn):$r.getContext("webgl",pn)||$r.getContext("experimental-webgl",pn)}function Xr(Hr){var $r=Yr(Hr);if(!$r)return!1;var pn=$r.createShader($r.VERTEX_SHADER);return!pn||$r.isContextLost()?!1:($r.shaderSource(pn,"void main() {}"),$r.compileShader(pn),$r.getShaderParameter(pn,$r.COMPILE_STATUS)===!0)}}),i={};i.create=function(he,W,de){var J=e.window.document.createElement(he);return W!==void 0&&(J.className=W),de&&de.appendChild(J),J},i.createNS=function(he,W){var de=e.window.document.createElementNS(he,W);return de};var n=e.window.document.documentElement.style;function r(he){if(!n)return he[0];for(var W=0;W<he.length;W++)if(he[W]in n)return he[W];return he[0]}var v=r(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),s;i.disableDrag=function(){n&&v&&(s=n[v],n[v]="none")},i.enableDrag=function(){n&&v&&(n[v]=s)};var o=r(["transform","WebkitTransform"]);i.setTransform=function(he,W){he.style[o]=W};var b=!1;try{var g=Object.defineProperty({},"passive",{get:function(){b=!0}});e.window.addEventListener("test",g,g),e.window.removeEventListener("test",g,g)}catch{b=!1}i.addEventListener=function(he,W,de,J){J===void 0&&(J={}),"passive"in J&&b?he.addEventListener(W,de,J):he.addEventListener(W,de,J.capture)},i.removeEventListener=function(he,W,de,J){J===void 0&&(J={}),"passive"in J&&b?he.removeEventListener(W,de,J):he.removeEventListener(W,de,J.capture)};var d=function(he){he.preventDefault(),he.stopPropagation(),e.window.removeEventListener("click",d,!0)};i.suppressClick=function(){e.window.addEventListener("click",d,!0),e.window.setTimeout(function(){e.window.removeEventListener("click",d,!0)},0)},i.mousePos=function(he,W){var de=he.getBoundingClientRect();return new e.Point(W.clientX-de.left-he.clientLeft,W.clientY-de.top-he.clientTop)},i.touchPos=function(he,W){for(var de=he.getBoundingClientRect(),J=[],ge=0;ge<W.length;ge++)J.push(new e.Point(W[ge].clientX-de.left-he.clientLeft,W[ge].clientY-de.top-he.clientTop));return J},i.mouseButton=function(he){return typeof e.window.InstallTrigger<"u"&&he.button===2&&he.ctrlKey&&e.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:he.button},i.remove=function(he){he.parentNode&&he.parentNode.removeChild(he)};function f(he,W,de){var J,ge,Ce,Fe=e.browser.devicePixelRatio>1?"@2x":"",Je=e.getJSON(W.transformRequest(W.normalizeSpriteURL(he,Fe,".json"),e.ResourceType.SpriteJSON),function($t,cr){Je=null,Ce||(Ce=$t,J=cr,Lt())}),ft=e.getImage(W.transformRequest(W.normalizeSpriteURL(he,Fe,".png"),e.ResourceType.SpriteImage),function($t,cr){ft=null,Ce||(Ce=$t,ge=cr,Lt())});function Lt(){if(Ce)de(Ce);else if(J&&ge){var $t=e.browser.getImageData(ge),cr={};for(var dr in J){var Pr=J[dr],Yr=Pr.width,Xr=Pr.height,Hr=Pr.x,$r=Pr.y,pn=Pr.sdf,Pn=Pr.pixelRatio,On=Pr.stretchX,$n=Pr.stretchY,ra=Pr.content,ea=new e.RGBAImage({width:Yr,height:Xr});e.RGBAImage.copy($t,ea,{x:Hr,y:$r},{x:0,y:0},{width:Yr,height:Xr}),cr[dr]={data:ea,pixelRatio:Pn,sdf:pn,stretchX:On,stretchY:$n,content:ra}}de(null,cr)}}return{cancel:function(){Je&&(Je.cancel(),Je=null),ft&&(ft.cancel(),ft=null)}}}function y(he){var W=he.userImage;if(W&&W.render){var de=W.render();if(de)return he.data.replace(new Uint8Array(W.data.buffer)),!0}return!1}var l=1,x=function(he){function W(){he.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new e.RGBAImage({width:1,height:1}),this.dirty=!0}return he&&(W.__proto__=he),W.prototype=Object.create(he&&he.prototype),W.prototype.constructor=W,W.prototype.isLoaded=function(){return this.loaded},W.prototype.setLoaded=function(J){if(this.loaded!==J&&(this.loaded=J,J)){for(var ge=0,Ce=this.requestors;ge<Ce.length;ge+=1){var Fe=Ce[ge],Je=Fe.ids,ft=Fe.callback;this._notify(Je,ft)}this.requestors=[]}},W.prototype.getImage=function(J){return this.images[J]},W.prototype.addImage=function(J,ge){this._validate(J,ge)&&(this.images[J]=ge)},W.prototype._validate=function(J,ge){var Ce=!0;return this._validateStretch(ge.stretchX,ge.data&&ge.data.width)||(this.fire(new e.ErrorEvent(new Error('Image "'+J+'" has invalid "stretchX" value'))),Ce=!1),this._validateStretch(ge.stretchY,ge.data&&ge.data.height)||(this.fire(new e.ErrorEvent(new Error('Image "'+J+'" has invalid "stretchY" value'))),Ce=!1),this._validateContent(ge.content,ge)||(this.fire(new e.ErrorEvent(new Error('Image "'+J+'" has invalid "content" value'))),Ce=!1),Ce},W.prototype._validateStretch=function(J,ge){if(!J)return!0;for(var Ce=0,Fe=0,Je=J;Fe<Je.length;Fe+=1){var ft=Je[Fe];if(ft[0]<Ce||ft[1]<ft[0]||ge<ft[1])return!1;Ce=ft[1]}return!0},W.prototype._validateContent=function(J,ge){return J?!(J.length!==4||J[0]<0||ge.data.width<J[0]||J[1]<0||ge.data.height<J[1]||J[2]<0||ge.data.width<J[2]||J[3]<0||ge.data.height<J[3]||J[2]<J[0]||J[3]<J[1]):!0},W.prototype.updateImage=function(J,ge){var Ce=this.images[J];ge.version=Ce.version+1,this.images[J]=ge,this.updatedImages[J]=!0},W.prototype.removeImage=function(J){var ge=this.images[J];delete this.images[J],delete this.patterns[J],ge.userImage&&ge.userImage.onRemove&&ge.userImage.onRemove()},W.prototype.listImages=function(){return Object.keys(this.images)},W.prototype.getImages=function(J,ge){var Ce=!0;if(!this.isLoaded())for(var Fe=0,Je=J;Fe<Je.length;Fe+=1){var ft=Je[Fe];this.images[ft]||(Ce=!1)}this.isLoaded()||Ce?this._notify(J,ge):this.requestors.push({ids:J,callback:ge})},W.prototype._notify=function(J,ge){for(var Ce={},Fe=0,Je=J;Fe<Je.length;Fe+=1){var ft=Je[Fe];this.images[ft]||this.fire(new e.Event("styleimagemissing",{id:ft}));var Lt=this.images[ft];Lt?Ce[ft]={data:Lt.data.clone(),pixelRatio:Lt.pixelRatio,sdf:Lt.sdf,version:Lt.version,stretchX:Lt.stretchX,stretchY:Lt.stretchY,content:Lt.content,hasRenderCallback:Boolean(Lt.userImage&&Lt.userImage.render)}:e.warnOnce('Image "'+ft+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}ge(null,Ce)},W.prototype.getPixelSize=function(){var J=this.atlasImage,ge=J.width,Ce=J.height;return{width:ge,height:Ce}},W.prototype.getPattern=function(J){var ge=this.patterns[J],Ce=this.getImage(J);if(!Ce)return null;if(ge&&ge.position.version===Ce.version)return ge.position;if(ge)ge.position.version=Ce.version;else{var Fe=Ce.data.width+l*2,Je=Ce.data.height+l*2,ft={w:Fe,h:Je,x:0,y:0},Lt=new e.ImagePosition(ft,Ce);this.patterns[J]={bin:ft,position:Lt}}return this._updatePatternAtlas(),this.patterns[J].position},W.prototype.bind=function(J){var ge=J.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new e.Texture(J,this.atlasImage,ge.RGBA),this.atlasTexture.bind(ge.LINEAR,ge.CLAMP_TO_EDGE)},W.prototype._updatePatternAtlas=function(){var J=[];for(var ge in this.patterns)J.push(this.patterns[ge].bin);var Ce=e.potpack(J),Fe=Ce.w,Je=Ce.h,ft=this.atlasImage;ft.resize({width:Fe||1,height:Je||1});for(var Lt in this.patterns){var $t=this.patterns[Lt],cr=$t.bin,dr=cr.x+l,Pr=cr.y+l,Yr=this.images[Lt].data,Xr=Yr.width,Hr=Yr.height;e.RGBAImage.copy(Yr,ft,{x:0,y:0},{x:dr,y:Pr},{width:Xr,height:Hr}),e.RGBAImage.copy(Yr,ft,{x:0,y:Hr-1},{x:dr,y:Pr-1},{width:Xr,height:1}),e.RGBAImage.copy(Yr,ft,{x:0,y:0},{x:dr,y:Pr+Hr},{width:Xr,height:1}),e.RGBAImage.copy(Yr,ft,{x:Xr-1,y:0},{x:dr-1,y:Pr},{width:1,height:Hr}),e.RGBAImage.copy(Yr,ft,{x:0,y:0},{x:dr+Xr,y:Pr},{width:1,height:Hr})}this.dirty=!0},W.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},W.prototype.dispatchRenderCallbacks=function(J){for(var ge=0,Ce=J;ge<Ce.length;ge+=1){var Fe=Ce[ge];if(!this.callbackDispatchedThisFrame[Fe]){this.callbackDispatchedThisFrame[Fe]=!0;var Je=this.images[Fe],ft=y(Je);ft&&this.updateImage(Fe,Je)}}},W}(e.Evented);function u(he,W,de,J,ge){var Ce=W*256,Fe=Ce+255,Je=J.transformRequest(J.normalizeGlyphsURL(de).replace("{fontstack}",he).replace("{range}",Ce+"-"+Fe),e.ResourceType.Glyphs);e.getArrayBuffer(Je,function(ft,Lt){if(ft)ge(ft);else if(Lt){for(var $t={},cr=0,dr=e.parseGlyphPBF(Lt);cr<dr.length;cr+=1){var Pr=dr[cr];$t[Pr.id]=Pr}ge(null,$t)}})}var M=w,_=w,p=1e20;function w(he,W,de,J,ge,Ce){this.fontSize=he||24,this.buffer=W===void 0?3:W,this.cutoff=J||.25,this.fontFamily=ge||"sans-serif",this.fontWeight=Ce||"normal",this.radius=de||8;var Fe=this.size=this.fontSize+this.buffer*2;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=Fe,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(Fe*Fe),this.gridInner=new Float64Array(Fe*Fe),this.f=new Float64Array(Fe),this.d=new Float64Array(Fe),this.z=new Float64Array(Fe+1),this.v=new Int16Array(Fe),this.middle=Math.round(Fe/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}w.prototype.draw=function(he){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(he,this.buffer,this.middle);for(var W=this.ctx.getImageData(0,0,this.size,this.size),de=new Uint8ClampedArray(this.size*this.size),J=0;J<this.size*this.size;J++){var ge=W.data[J*4+3]/255;this.gridOuter[J]=ge===1?0:ge===0?p:Math.pow(Math.max(0,.5-ge),2),this.gridInner[J]=ge===1?p:ge===0?0:Math.pow(Math.max(0,ge-.5),2)}for(h(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),h(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),J=0;J<this.size*this.size;J++){var Ce=this.gridOuter[J]-this.gridInner[J];de[J]=Math.max(0,Math.min(255,Math.round(255-255*(Ce/this.radius+this.cutoff))))}return de};function h(he,W,de,J,ge,Ce,Fe){for(var Je=0;Je<W;Je++){for(var ft=0;ft<de;ft++)J[ft]=he[ft*W+Je];for(L(J,ge,Ce,Fe,de),ft=0;ft<de;ft++)he[ft*W+Je]=ge[ft]}for(ft=0;ft<de;ft++){for(Je=0;Je<W;Je++)J[Je]=he[ft*W+Je];for(L(J,ge,Ce,Fe,W),Je=0;Je<W;Je++)he[ft*W+Je]=Math.sqrt(ge[Je])}}function L(he,W,de,J,ge){de[0]=0,J[0]=-p,J[1]=+p;for(var Ce=1,Fe=0;Ce<ge;Ce++){for(var Je=(he[Ce]+Ce*Ce-(he[de[Fe]]+de[Fe]*de[Fe]))/(2*Ce-2*de[Fe]);Je<=J[Fe];)Fe--,Je=(he[Ce]+Ce*Ce-(he[de[Fe]]+de[Fe]*de[Fe]))/(2*Ce-2*de[Fe]);Fe++,de[Fe]=Ce,J[Fe]=Je,J[Fe+1]=+p}for(Ce=0,Fe=0;Ce<ge;Ce++){for(;J[Fe+1]<Ce;)Fe++;W[Ce]=(Ce-de[Fe])*(Ce-de[Fe])+he[de[Fe]]}}M.default=_;var S=function(W,de){this.requestManager=W,this.localIdeographFontFamily=de,this.entries={}};S.prototype.setURL=function(W){this.url=W},S.prototype.getGlyphs=function(W,de){var J=this,ge=[];for(var Ce in W)for(var Fe=0,Je=W[Ce];Fe<Je.length;Fe+=1){var ft=Je[Fe];ge.push({stack:Ce,id:ft})}e.asyncAll(ge,function(Lt,$t){var cr=Lt.stack,dr=Lt.id,Pr=J.entries[cr];Pr||(Pr=J.entries[cr]={glyphs:{},requests:{},ranges:{}});var Yr=Pr.glyphs[dr];if(Yr!==void 0){$t(null,{stack:cr,id:dr,glyph:Yr});return}if(Yr=J._tinySDF(Pr,cr,dr),Yr){Pr.glyphs[dr]=Yr,$t(null,{stack:cr,id:dr,glyph:Yr});return}var Xr=Math.floor(dr/256);if(Xr*256>65535){$t(new Error("glyphs > 65535 not supported"));return}if(Pr.ranges[Xr]){$t(null,{stack:cr,id:dr,glyph:Yr});return}var Hr=Pr.requests[Xr];Hr||(Hr=Pr.requests[Xr]=[],S.loadGlyphRange(cr,Xr,J.url,J.requestManager,function($r,pn){if(pn){for(var Pn in pn)J._doesCharSupportLocalGlyph(+Pn)||(Pr.glyphs[+Pn]=pn[+Pn]);Pr.ranges[Xr]=!0}for(var On=0,$n=Hr;On<$n.length;On+=1){var ra=$n[On];ra($r,pn)}delete Pr.requests[Xr]})),Hr.push(function($r,pn){$r?$t($r):pn&&$t(null,{stack:cr,id:dr,glyph:pn[dr]||null})})},function(Lt,$t){if(Lt)de(Lt);else if($t){for(var cr={},dr=0,Pr=$t;dr<Pr.length;dr+=1){var Yr=Pr[dr],Xr=Yr.stack,Hr=Yr.id,$r=Yr.glyph;(cr[Xr]||(cr[Xr]={}))[Hr]=$r&&{id:$r.id,bitmap:$r.bitmap.clone(),metrics:$r.metrics}}de(null,cr)}})},S.prototype._doesCharSupportLocalGlyph=function(W){return!!this.localIdeographFontFamily&&(e.isChar["CJK Unified Ideographs"](W)||e.isChar["Hangul Syllables"](W)||e.isChar.Hiragana(W)||e.isChar.Katakana(W))},S.prototype._tinySDF=function(W,de,J){var ge=this.localIdeographFontFamily;if(!!ge&&!!this._doesCharSupportLocalGlyph(J)){var Ce=W.tinySDF;if(!Ce){var Fe="400";/bold/i.test(de)?Fe="900":/medium/i.test(de)?Fe="500":/light/i.test(de)&&(Fe="200"),Ce=W.tinySDF=new S.TinySDF(24,3,8,.25,ge,Fe)}return{id:J,bitmap:new e.AlphaImage({width:30,height:30},Ce.draw(String.fromCharCode(J))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},S.loadGlyphRange=u,S.TinySDF=M;var E=function(){this.specification=e.styleSpec.light.position};E.prototype.possiblyEvaluate=function(W,de){return e.sphericalToCartesian(W.expression.evaluate(de))},E.prototype.interpolate=function(W,de,J){return{x:e.number(W.x,de.x,J),y:e.number(W.y,de.y,J),z:e.number(W.z,de.z,J)}};var P=new e.Properties({anchor:new e.DataConstantProperty(e.styleSpec.light.anchor),position:new E,color:new e.DataConstantProperty(e.styleSpec.light.color),intensity:new e.DataConstantProperty(e.styleSpec.light.intensity)}),F="-transition",I=function(he){function W(de){he.call(this),this._transitionable=new e.Transitionable(P),this.setLight(de),this._transitioning=this._transitionable.untransitioned()}return he&&(W.__proto__=he),W.prototype=Object.create(he&&he.prototype),W.prototype.constructor=W,W.prototype.getLight=function(){return this._transitionable.serialize()},W.prototype.setLight=function(J,ge){if(ge===void 0&&(ge={}),!this._validate(e.validateLight,J,ge))for(var Ce in J){var Fe=J[Ce];e.endsWith(Ce,F)?this._transitionable.setTransition(Ce.slice(0,-F.length),Fe):this._transitionable.setValue(Ce,Fe)}},W.prototype.updateTransitions=function(J){this._transitioning=this._transitionable.transitioned(J,this._transitioning)},W.prototype.hasTransition=function(){return this._transitioning.hasTransition()},W.prototype.recalculate=function(J){this.properties=this._transitioning.possiblyEvaluate(J)},W.prototype._validate=function(J,ge,Ce){return Ce&&Ce.validate===!1?!1:e.emitValidationErrors(this,J.call(e.validateStyle,e.extend({value:ge,style:{glyphs:!0,sprite:!0},styleSpec:e.styleSpec})))},W}(e.Evented),D=function(W,de){this.width=W,this.height=de,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};D.prototype.getDash=function(W,de){var J=W.join(",")+String(de);return this.dashEntry[J]||(this.dashEntry[J]=this.addDash(W,de)),this.dashEntry[J]},D.prototype.getDashRanges=function(W,de,J){var ge=W.length%2===1,Ce=[],Fe=ge?-W[W.length-1]*J:0,Je=W[0]*J,ft=!0;Ce.push({left:Fe,right:Je,isDash:ft,zeroLength:W[0]===0});for(var Lt=W[0],$t=1;$t<W.length;$t++){ft=!ft;var cr=W[$t];Fe=Lt*J,Lt+=cr,Je=Lt*J,Ce.push({left:Fe,right:Je,isDash:ft,zeroLength:cr===0})}return Ce},D.prototype.addRoundDash=function(W,de,J){for(var ge=de/2,Ce=-J;Ce<=J;Ce++)for(var Fe=this.nextRow+J+Ce,Je=this.width*Fe,ft=0,Lt=W[ft],$t=0;$t<this.width;$t++){$t/Lt.right>1&&(Lt=W[++ft]);var cr=Math.abs($t-Lt.left),dr=Math.abs($t-Lt.right),Pr=Math.min(cr,dr),Yr=void 0,Xr=Ce/J*(ge+1);if(Lt.isDash){var Hr=ge-Math.abs(Xr);Yr=Math.sqrt(Pr*Pr+Hr*Hr)}else Yr=ge-Math.sqrt(Pr*Pr+Xr*Xr);this.data[Je+$t]=Math.max(0,Math.min(255,Yr+128))}},D.prototype.addRegularDash=function(W){for(var de=W.length-1;de>=0;--de){var J=W[de],ge=W[de+1];J.zeroLength?W.splice(de,1):ge&&ge.isDash===J.isDash&&(ge.left=J.left,W.splice(de,1))}var Ce=W[0],Fe=W[W.length-1];Ce.isDash===Fe.isDash&&(Ce.left=Fe.left-this.width,Fe.right=Ce.right+this.width);for(var Je=this.width*this.nextRow,ft=0,Lt=W[ft],$t=0;$t<this.width;$t++){$t/Lt.right>1&&(Lt=W[++ft]);var cr=Math.abs($t-Lt.left),dr=Math.abs($t-Lt.right),Pr=Math.min(cr,dr),Yr=Lt.isDash?Pr:-Pr;this.data[Je+$t]=Math.max(0,Math.min(255,Yr+128))}},D.prototype.addDash=function(W,de){var J=de?7:0,ge=2*J+1;if(this.nextRow+ge>this.height)return e.warnOnce("LineAtlas out of space"),null;for(var Ce=0,Fe=0;Fe<W.length;Fe++)Ce+=W[Fe];if(Ce!==0){var Je=this.width/Ce,ft=this.getDashRanges(W,this.width,Je);de?this.addRoundDash(ft,Je,J):this.addRegularDash(ft)}var Lt={y:(this.nextRow+J+.5)/this.height,height:2*J/this.height,width:Ce};return this.nextRow+=ge,this.dirty=!0,Lt},D.prototype.bind=function(W){var de=W.gl;this.texture?(de.bindTexture(de.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,de.texSubImage2D(de.TEXTURE_2D,0,0,0,this.width,this.height,de.ALPHA,de.UNSIGNED_BYTE,this.data))):(this.texture=de.createTexture(),de.bindTexture(de.TEXTURE_2D,this.texture),de.texParameteri(de.TEXTURE_2D,de.TEXTURE_WRAP_S,de.REPEAT),de.texParameteri(de.TEXTURE_2D,de.TEXTURE_WRAP_T,de.REPEAT),de.texParameteri(de.TEXTURE_2D,de.TEXTURE_MIN_FILTER,de.LINEAR),de.texParameteri(de.TEXTURE_2D,de.TEXTURE_MAG_FILTER,de.LINEAR),de.texImage2D(de.TEXTURE_2D,0,de.ALPHA,this.width,this.height,0,de.ALPHA,de.UNSIGNED_BYTE,this.data))};var R=function he(W,de){this.workerPool=W,this.actors=[],this.currentActor=0,this.id=e.uniqueId();for(var J=this.workerPool.acquire(this.id),ge=0;ge<J.length;ge++){var Ce=J[ge],Fe=new he.Actor(Ce,de,this.id);Fe.name="Worker "+ge,this.actors.push(Fe)}};R.prototype.broadcast=function(W,de,J){J=J||function(){},e.asyncAll(this.actors,function(ge,Ce){ge.send(W,de,Ce)},J)},R.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},R.prototype.remove=function(){this.actors.forEach(function(W){W.remove()}),this.actors=[],this.workerPool.release(this.id)},R.Actor=e.Actor;function N(he,W,de){var J=function(ge,Ce){if(ge)return de(ge);if(Ce){var Fe=e.pick(e.extend(Ce,he),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);Ce.vector_layers&&(Fe.vectorLayers=Ce.vector_layers,Fe.vectorLayerIds=Fe.vectorLayers.map(function(Je){return Je.id})),Fe.tiles=W.canonicalizeTileset(Fe,he.url),de(null,Fe)}};return he.url?e.getJSON(W.transformRequest(W.normalizeSourceURL(he.url),e.ResourceType.Source),J):e.browser.frame(function(){return J(null,he)})}var z=function(W,de,J){this.bounds=e.LngLatBounds.convert(this.validateBounds(W)),this.minzoom=de||0,this.maxzoom=J||24};z.prototype.validateBounds=function(W){return!Array.isArray(W)||W.length!==4?[-180,-90,180,90]:[Math.max(-180,W[0]),Math.max(-90,W[1]),Math.min(180,W[2]),Math.min(90,W[3])]},z.prototype.contains=function(W){var de=Math.pow(2,W.z),J={minX:Math.floor(e.mercatorXfromLng(this.bounds.getWest())*de),minY:Math.floor(e.mercatorYfromLat(this.bounds.getNorth())*de),maxX:Math.ceil(e.mercatorXfromLng(this.bounds.getEast())*de),maxY:Math.ceil(e.mercatorYfromLat(this.bounds.getSouth())*de)},ge=W.x>=J.minX&&W.x<J.maxX&&W.y>=J.minY&&W.y<J.maxY;return ge};var G=function(he){function W(de,J,ge,Ce){if(he.call(this),this.id=de,this.dispatcher=ge,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,e.extend(this,e.pick(J,["url","scheme","tileSize","promoteId"])),this._options=e.extend({type:"vector"},J),this._collectResourceTiming=J.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(Ce)}return he&&(W.__proto__=he),W.prototype=Object.create(he&&he.prototype),W.prototype.constructor=W,W.prototype.load=function(){var J=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=N(this._options,this.map._requestManager,function(ge,Ce){J._tileJSONRequest=null,J._loaded=!0,ge?J.fire(new e.ErrorEvent(ge)):Ce&&(e.extend(J,Ce),Ce.bounds&&(J.tileBounds=new z(Ce.bounds,J.minzoom,J.maxzoom)),e.postTurnstileEvent(Ce.tiles,J.map._requestManager._customAccessToken),e.postMapLoadEvent(Ce.tiles,J.map._getMapId(),J.map._requestManager._skuToken,J.map._requestManager._customAccessToken),J.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),J.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))})},W.prototype.loaded=function(){return this._loaded},W.prototype.hasTile=function(J){return!this.tileBounds||this.tileBounds.contains(J.canonical)},W.prototype.onAdd=function(J){this.map=J,this.load()},W.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},W.prototype.serialize=function(){return e.extend({},this._options)},W.prototype.loadTile=function(J,ge){var Ce=this.map._requestManager.normalizeTileURL(J.tileID.canonical.url(this.tiles,this.scheme)),Fe={request:this.map._requestManager.transformRequest(Ce,e.ResourceType.Tile),uid:J.uid,tileID:J.tileID,zoom:J.tileID.overscaledZ,tileSize:this.tileSize*J.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};Fe.request.collectResourceTiming=this._collectResourceTiming,!J.actor||J.state==="expired"?(J.actor=this.dispatcher.getActor(),J.request=J.actor.send("loadTile",Fe,Je.bind(this))):J.state==="loading"?J.reloadCallback=ge:J.request=J.actor.send("reloadTile",Fe,Je.bind(this));function Je(ft,Lt){if(delete J.request,J.aborted)return ge(null);if(ft&&ft.status!==404)return ge(ft);Lt&&Lt.resourceTiming&&(J.resourceTiming=Lt.resourceTiming),this.map._refreshExpiredTiles&&Lt&&J.setExpiryData(Lt),J.loadVectorData(Lt,this.map.painter),e.cacheEntryPossiblyAdded(this.dispatcher),ge(null),J.reloadCallback&&(this.loadTile(J,J.reloadCallback),J.reloadCallback=null)}},W.prototype.abortTile=function(J){J.request&&(J.request.cancel(),delete J.request),J.actor&&J.actor.send("abortTile",{uid:J.uid,type:this.type,source:this.id},void 0)},W.prototype.unloadTile=function(J){J.unloadVectorData(),J.actor&&J.actor.send("removeTile",{uid:J.uid,type:this.type,source:this.id},void 0)},W.prototype.hasTransition=function(){return!1},W}(e.Evented),Y=function(he){function W(de,J,ge,Ce){he.call(this),this.id=de,this.dispatcher=ge,this.setEventedParent(Ce),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=e.extend({type:"raster"},J),e.extend(this,e.pick(J,["url","scheme","tileSize"]))}return he&&(W.__proto__=he),W.prototype=Object.create(he&&he.prototype),W.prototype.constructor=W,W.prototype.load=function(){var J=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=N(this._options,this.map._requestManager,function(ge,Ce){J._tileJSONRequest=null,J._loaded=!0,ge?J.fire(new e.ErrorEvent(ge)):Ce&&(e.extend(J,Ce),Ce.bounds&&(J.tileBounds=new z(Ce.bounds,J.minzoom,J.maxzoom)),e.postTurnstileEvent(Ce.tiles),e.postMapLoadEvent(Ce.tiles,J.map._getMapId(),J.map._requestManager._skuToken),J.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),J.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))})},W.prototype.loaded=function(){return this._loaded},W.prototype.onAdd=function(J){this.map=J,this.load()},W.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},W.prototype.serialize=function(){return e.extend({},this._options)},W.prototype.hasTile=function(J){return!this.tileBounds||this.tileBounds.contains(J.canonical)},W.prototype.loadTile=function(J,ge){var Ce=this,Fe=this.map._requestManager.normalizeTileURL(J.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);J.request=e.getImage(this.map._requestManager.transformRequest(Fe,e.ResourceType.Tile),function(Je,ft){if(delete J.request,J.aborted)J.state="unloaded",ge(null);else if(Je)J.state="errored",ge(Je);else if(ft){Ce.map._refreshExpiredTiles&&J.setExpiryData(ft),delete ft.cacheControl,delete ft.expires;var Lt=Ce.map.painter.context,$t=Lt.gl;J.texture=Ce.map.painter.getTileTexture(ft.width),J.texture?J.texture.update(ft,{useMipmap:!0}):(J.texture=new e.Texture(Lt,ft,$t.RGBA,{useMipmap:!0}),J.texture.bind($t.LINEAR,$t.CLAMP_TO_EDGE,$t.LINEAR_MIPMAP_NEAREST),Lt.extTextureFilterAnisotropic&&$t.texParameterf($t.TEXTURE_2D,Lt.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Lt.extTextureFilterAnisotropicMax)),J.state="loaded",e.cacheEntryPossiblyAdded(Ce.dispatcher),ge(null)}})},W.prototype.abortTile=function(J,ge){J.request&&(J.request.cancel(),delete J.request),ge()},W.prototype.unloadTile=function(J,ge){J.texture&&this.map.painter.saveTileTexture(J.texture),ge()},W.prototype.hasTransition=function(){return!1},W}(e.Evented),ee=function(he){function W(de,J,ge,Ce){he.call(this,de,J,ge,Ce),this.type="raster-dem",this.maxzoom=22,this._options=e.extend({type:"raster-dem"},J),this.encoding=J.encoding||"mapbox"}return he&&(W.__proto__=he),W.prototype=Object.create(he&&he.prototype),W.prototype.constructor=W,W.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},W.prototype.loadTile=function(J,ge){var Ce=this.map._requestManager.normalizeTileURL(J.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);J.request=e.getImage(this.map._requestManager.transformRequest(Ce,e.ResourceType.Tile),Fe.bind(this)),J.neighboringTiles=this._getNeighboringTiles(J.tileID);function Fe(ft,Lt){if(delete J.request,J.aborted)J.state="unloaded",ge(null);else if(ft)J.state="errored",ge(ft);else if(Lt){this.map._refreshExpiredTiles&&J.setExpiryData(Lt),delete Lt.cacheControl,delete Lt.expires;var $t=e.window.ImageBitmap&&Lt instanceof e.window.ImageBitmap&&e.offscreenCanvasSupported(),cr=$t?Lt:e.browser.getImageData(Lt,1),dr={uid:J.uid,coord:J.tileID,source:this.id,rawImageData:cr,encoding:this.encoding};(!J.actor||J.state==="expired")&&(J.actor=this.dispatcher.getActor(),J.actor.send("loadDEMTile",dr,Je.bind(this)))}}function Je(ft,Lt){ft&&(J.state="errored",ge(ft)),Lt&&(J.dem=Lt,J.needsHillshadePrepare=!0,J.state="loaded",ge(null))}},W.prototype._getNeighboringTiles=function(J){var ge=J.canonical,Ce=Math.pow(2,ge.z),Fe=(ge.x-1+Ce)%Ce,Je=ge.x===0?J.wrap-1:J.wrap,ft=(ge.x+1+Ce)%Ce,Lt=ge.x+1===Ce?J.wrap+1:J.wrap,$t={};return $t[new e.OverscaledTileID(J.overscaledZ,Je,ge.z,Fe,ge.y).key]={backfilled:!1},$t[new e.OverscaledTileID(J.overscaledZ,Lt,ge.z,ft,ge.y).key]={backfilled:!1},ge.y>0&&($t[new e.OverscaledTileID(J.overscaledZ,Je,ge.z,Fe,ge.y-1).key]={backfilled:!1},$t[new e.OverscaledTileID(J.overscaledZ,J.wrap,ge.z,ge.x,ge.y-1).key]={backfilled:!1},$t[new e.OverscaledTileID(J.overscaledZ,Lt,ge.z,ft,ge.y-1).key]={backfilled:!1}),ge.y+1<Ce&&($t[new e.OverscaledTileID(J.overscaledZ,Je,ge.z,Fe,ge.y+1).key]={backfilled:!1},$t[new e.OverscaledTileID(J.overscaledZ,J.wrap,ge.z,ge.x,ge.y+1).key]={backfilled:!1},$t[new e.OverscaledTileID(J.overscaledZ,Lt,ge.z,ft,ge.y+1).key]={backfilled:!1}),$t},W.prototype.unloadTile=function(J){J.demTexture&&this.map.painter.saveTileTexture(J.demTexture),J.fbo&&(J.fbo.destroy(),delete J.fbo),J.dem&&delete J.dem,delete J.neighboringTiles,J.state="unloaded",J.actor&&J.actor.send("removeDEMTile",{uid:J.uid,source:this.id})},W}(Y),Z=function(he){function W(de,J,ge,Ce){he.call(this),this.id=de,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=ge.getActor(),this.setEventedParent(Ce),this._data=J.data,this._options=e.extend({},J),this._collectResourceTiming=J.collectResourceTiming,this._resourceTiming=[],J.maxzoom!==void 0&&(this.maxzoom=J.maxzoom),J.type&&(this.type=J.type),J.attribution&&(this.attribution=J.attribution),this.promoteId=J.promoteId;var Fe=e.EXTENT/this.tileSize;this.workerOptions=e.extend({source:this.id,cluster:J.cluster||!1,geojsonVtOptions:{buffer:(J.buffer!==void 0?J.buffer:128)*Fe,tolerance:(J.tolerance!==void 0?J.tolerance:.375)*Fe,extent:e.EXTENT,maxZoom:this.maxzoom,lineMetrics:J.lineMetrics||!1,generateId:J.generateId||!1},superclusterOptions:{maxZoom:J.clusterMaxZoom!==void 0?Math.min(J.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:e.EXTENT,radius:(J.clusterRadius||50)*Fe,log:!1,generateId:J.generateId||!1},clusterProperties:J.clusterProperties},J.workerOptions)}return he&&(W.__proto__=he),W.prototype=Object.create(he&&he.prototype),W.prototype.constructor=W,W.prototype.load=function(){var J=this;this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(ge){if(ge){J.fire(new e.ErrorEvent(ge));return}var Ce={dataType:"source",sourceDataType:"metadata"};J._collectResourceTiming&&J._resourceTiming&&J._resourceTiming.length>0&&(Ce.resourceTiming=J._resourceTiming,J._resourceTiming=[]),J.fire(new e.Event("data",Ce))})},W.prototype.onAdd=function(J){this.map=J,this.load()},W.prototype.setData=function(J){var ge=this;return this._data=J,this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(Ce){if(Ce){ge.fire(new e.ErrorEvent(Ce));return}var Fe={dataType:"source",sourceDataType:"content"};ge._collectResourceTiming&&ge._resourceTiming&&ge._resourceTiming.length>0&&(Fe.resourceTiming=ge._resourceTiming,ge._resourceTiming=[]),ge.fire(new e.Event("data",Fe))}),this},W.prototype.getClusterExpansionZoom=function(J,ge){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:J,source:this.id},ge),this},W.prototype.getClusterChildren=function(J,ge){return this.actor.send("geojson.getClusterChildren",{clusterId:J,source:this.id},ge),this},W.prototype.getClusterLeaves=function(J,ge,Ce,Fe){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:J,limit:ge,offset:Ce},Fe),this},W.prototype._updateWorkerData=function(J){var ge=this;this._loaded=!1;var Ce=e.extend({},this.workerOptions),Fe=this._data;typeof Fe=="string"?(Ce.request=this.map._requestManager.transformRequest(e.browser.resolveURL(Fe),e.ResourceType.Source),Ce.request.collectResourceTiming=this._collectResourceTiming):Ce.data=JSON.stringify(Fe),this.actor.send(this.type+".loadData",Ce,function(Je,ft){ge._removed||ft&&ft.abandoned||(ge._loaded=!0,ft&&ft.resourceTiming&&ft.resourceTiming[ge.id]&&(ge._resourceTiming=ft.resourceTiming[ge.id].slice(0)),ge.actor.send(ge.type+".coalesce",{source:Ce.source},null),J(Je))})},W.prototype.loaded=function(){return this._loaded},W.prototype.loadTile=function(J,ge){var Ce=this,Fe=J.actor?"reloadTile":"loadTile";J.actor=this.actor;var Je={type:this.type,uid:J.uid,tileID:J.tileID,zoom:J.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};J.request=this.actor.send(Fe,Je,function(ft,Lt){return delete J.request,J.unloadVectorData(),J.aborted?ge(null):ft?ge(ft):(J.loadVectorData(Lt,Ce.map.painter,Fe==="reloadTile"),ge(null))})},W.prototype.abortTile=function(J){J.request&&(J.request.cancel(),delete J.request),J.aborted=!0},W.prototype.unloadTile=function(J){J.unloadVectorData(),this.actor.send("removeTile",{uid:J.uid,type:this.type,source:this.id})},W.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},W.prototype.serialize=function(){return e.extend({},this._options,{type:this.type,data:this._data})},W.prototype.hasTransition=function(){return!1},W}(e.Evented),X=e.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),ne=function(he){function W(de,J,ge,Ce){he.call(this),this.id=de,this.dispatcher=ge,this.coordinates=J.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(Ce),this.options=J}return he&&(W.__proto__=he),W.prototype=Object.create(he&&he.prototype),W.prototype.constructor=W,W.prototype.load=function(J,ge){var Ce=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this.url=this.options.url,e.getImage(this.map._requestManager.transformRequest(this.url,e.ResourceType.Image),function(Fe,Je){Ce._loaded=!0,Fe?Ce.fire(new e.ErrorEvent(Fe)):Je&&(Ce.image=Je,J&&(Ce.coordinates=J),ge&&ge(),Ce._finishLoading())})},W.prototype.loaded=function(){return this._loaded},W.prototype.updateImage=function(J){var ge=this;return!this.image||!J.url?this:(this.options.url=J.url,this.load(J.coordinates,function(){ge.texture=null}),this)},W.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})))},W.prototype.onAdd=function(J){this.map=J,this.load()},W.prototype.setCoordinates=function(J){var ge=this;this.coordinates=J;var Ce=J.map(e.MercatorCoordinate.fromLngLat);this.tileID=ce(Ce),this.minzoom=this.maxzoom=this.tileID.z;var Fe=Ce.map(function(Je){return ge.tileID.getTilePoint(Je)._round()});return this._boundsArray=new e.StructArrayLayout4i8,this._boundsArray.emplaceBack(Fe[0].x,Fe[0].y,0,0),this._boundsArray.emplaceBack(Fe[1].x,Fe[1].y,e.EXTENT,0),this._boundsArray.emplaceBack(Fe[3].x,Fe[3].y,0,e.EXTENT),this._boundsArray.emplaceBack(Fe[2].x,Fe[2].y,e.EXTENT,e.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})),this},W.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||!this.image)){var J=this.map.painter.context,ge=J.gl;this.boundsBuffer||(this.boundsBuffer=J.createVertexBuffer(this._boundsArray,X.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new e.Texture(J,this.image,ge.RGBA),this.texture.bind(ge.LINEAR,ge.CLAMP_TO_EDGE));for(var Ce in this.tiles){var Fe=this.tiles[Ce];Fe.state!=="loaded"&&(Fe.state="loaded",Fe.texture=this.texture)}}},W.prototype.loadTile=function(J,ge){this.tileID&&this.tileID.equals(J.tileID.canonical)?(this.tiles[String(J.tileID.wrap)]=J,J.buckets={},ge(null)):(J.state="errored",ge(null))},W.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},W.prototype.hasTransition=function(){return!1},W}(e.Evented);function ce(he){for(var W=1/0,de=1/0,J=-1/0,ge=-1/0,Ce=0,Fe=he;Ce<Fe.length;Ce+=1){var Je=Fe[Ce];W=Math.min(W,Je.x),de=Math.min(de,Je.y),J=Math.max(J,Je.x),ge=Math.max(ge,Je.y)}var ft=J-W,Lt=ge-de,$t=Math.max(ft,Lt),cr=Math.max(0,Math.floor(-Math.log($t)/Math.LN2)),dr=Math.pow(2,cr);return new e.CanonicalTileID(cr,Math.floor((W+J)/2*dr),Math.floor((de+ge)/2*dr))}var Q=function(he){function W(de,J,ge,Ce){he.call(this,de,J,ge,Ce),this.roundZoom=!0,this.type="video",this.options=J}return he&&(W.__proto__=he),W.prototype=Object.create(he&&he.prototype),W.prototype.constructor=W,W.prototype.load=function(){var J=this;this._loaded=!1;var ge=this.options;this.urls=[];for(var Ce=0,Fe=ge.urls;Ce<Fe.length;Ce+=1){var Je=Fe[Ce];this.urls.push(this.map._requestManager.transformRequest(Je,e.ResourceType.Source).url)}e.getVideo(this.urls,function(ft,Lt){J._loaded=!0,ft?J.fire(new e.ErrorEvent(ft)):Lt&&(J.video=Lt,J.video.loop=!0,J.video.addEventListener("playing",function(){J.map.triggerRepaint()}),J.map&&J.video.play(),J._finishLoading())})},W.prototype.pause=function(){this.video&&this.video.pause()},W.prototype.play=function(){this.video&&this.video.play()},W.prototype.seek=function(J){if(this.video){var ge=this.video.seekable;J<ge.start(0)||J>ge.end(0)?this.fire(new e.ErrorEvent(new e.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+ge.start(0)+" and "+ge.end(0)+"-second mark."))):this.video.currentTime=J}},W.prototype.getVideo=function(){return this.video},W.prototype.onAdd=function(J){this.map||(this.map=J,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},W.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var J=this.map.painter.context,ge=J.gl;this.boundsBuffer||(this.boundsBuffer=J.createVertexBuffer(this._boundsArray,X.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(ge.LINEAR,ge.CLAMP_TO_EDGE),ge.texSubImage2D(ge.TEXTURE_2D,0,0,0,ge.RGBA,ge.UNSIGNED_BYTE,this.video)):(this.texture=new e.Texture(J,this.video,ge.RGBA),this.texture.bind(ge.LINEAR,ge.CLAMP_TO_EDGE));for(var Ce in this.tiles){var Fe=this.tiles[Ce];Fe.state!=="loaded"&&(Fe.state="loaded",Fe.texture=this.texture)}}},W.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},W.prototype.hasTransition=function(){return this.video&&!this.video.paused},W}(ne),K=function(he){function W(de,J,ge,Ce){he.call(this,de,J,ge,Ce),J.coordinates?(!Array.isArray(J.coordinates)||J.coordinates.length!==4||J.coordinates.some(function(Fe){return!Array.isArray(Fe)||Fe.length!==2||Fe.some(function(Je){return typeof Je!="number"})}))&&this.fire(new e.ErrorEvent(new e.ValidationError("sources."+de,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+de,null,'missing required property "coordinates"'))),J.animate&&typeof J.animate!="boolean"&&this.fire(new e.ErrorEvent(new e.ValidationError("sources."+de,null,'optional "animate" property must be a boolean value'))),J.canvas?typeof J.canvas!="string"&&!(J.canvas instanceof e.window.HTMLCanvasElement)&&this.fire(new e.ErrorEvent(new e.ValidationError("sources."+de,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+de,null,'missing required property "canvas"'))),this.options=J,this.animate=J.animate!==void 0?J.animate:!0}return he&&(W.__proto__=he),W.prototype=Object.create(he&&he.prototype),W.prototype.constructor=W,W.prototype.load=function(){if(this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof e.window.HTMLCanvasElement?this.options.canvas:e.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()){this.fire(new e.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero.")));return}this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading()},W.prototype.getCanvas=function(){return this.canvas},W.prototype.onAdd=function(J){this.map=J,this.load(),this.canvas&&this.animate&&this.play()},W.prototype.onRemove=function(){this.pause()},W.prototype.prepare=function(){var J=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,J=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,J=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var ge=this.map.painter.context,Ce=ge.gl;this.boundsBuffer||(this.boundsBuffer=ge.createVertexBuffer(this._boundsArray,X.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(J||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new e.Texture(ge,this.canvas,Ce.RGBA,{premultiply:!0});for(var Fe in this.tiles){var Je=this.tiles[Fe];Je.state!=="loaded"&&(Je.state="loaded",Je.texture=this.texture)}}},W.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},W.prototype.hasTransition=function(){return this._playing},W.prototype._hasInvalidDimensions=function(){for(var J=0,ge=[this.canvas.width,this.canvas.height];J<ge.length;J+=1){var Ce=ge[J];if(isNaN(Ce)||Ce<=0)return!0}return!1},W}(ne),U={vector:G,raster:Y,"raster-dem":ee,geojson:Z,video:Q,image:ne,canvas:K},H=function(he,W,de,J){var ge=new U[W.type](he,W,de,J);if(ge.id!==he)throw new Error("Expected Source id to be "+he+" instead of "+ge.id);return e.bindAll(["load","abort","unload","serialize","prepare"],ge),ge},q=function(he){return U[he]},re=function(he,W){U[he]=W};function j(he,W){var de=e.identity([]);return e.translate(de,de,[1,1,0]),e.scale(de,de,[he.width*.5,he.height*.5,1]),e.multiply(de,de,he.calculatePosMatrix(W.toUnwrapped()))}function $(he,W,de){if(he)for(var J=0,ge=he;J<ge.length;J+=1){var Ce=ge[J],Fe=W[Ce];if(Fe&&Fe.source===de&&Fe.type==="fill-extrusion")return!0}else for(var Je in W){var ft=W[Je];if(ft.source===de&&ft.type==="fill-extrusion")return!0}return!1}function ie(he,W,de,J,ge,Ce){var Fe=$(ge&&ge.layers,W,he.id),Je=Ce.maxPitchScaleFactor(),ft=he.tilesIn(J,Je,Fe);ft.sort(se);for(var Lt=[],$t=0,cr=ft;$t<cr.length;$t+=1){var dr=cr[$t];Lt.push({wrappedTileID:dr.tileID.wrapped().key,queryResults:dr.tile.queryRenderedFeatures(W,de,he._state,dr.queryGeometry,dr.cameraQueryGeometry,dr.scale,ge,Ce,Je,j(he.transform,dr.tileID))})}var Pr=_e(Lt);for(var Yr in Pr)Pr[Yr].forEach(function(Xr){var Hr=Xr.feature,$r=he.getFeatureState(Hr.layer["source-layer"],Hr.id);Hr.source=Hr.layer.source,Hr.layer["source-layer"]&&(Hr.sourceLayer=Hr.layer["source-layer"]),Hr.state=$r});return Pr}function oe(he,W,de,J,ge,Ce,Fe){for(var Je={},ft=Ce.queryRenderedSymbols(J),Lt=[],$t=0,cr=Object.keys(ft).map(Number);$t<cr.length;$t+=1){var dr=cr[$t];Lt.push(Fe[dr])}Lt.sort(se);for(var Pr=function(){var pn=Xr[Yr],Pn=pn.featureIndex.lookupSymbolFeatures(ft[pn.bucketInstanceId],W,pn.bucketIndex,pn.sourceLayerIndex,ge.filter,ge.layers,ge.availableImages,he);for(var On in Pn){var $n=Je[On]=Je[On]||[],ra=Pn[On];ra.sort(function(_a,Ea){var Ra=pn.featureSortOrder;if(Ra){var Wa=Ra.indexOf(_a.featureIndex),si=Ra.indexOf(Ea.featureIndex);return si-Wa}else return Ea.featureIndex-_a.featureIndex});for(var ea=0,pa=ra;ea<pa.length;ea+=1){var Aa=pa[ea];$n.push(Aa)}}},Yr=0,Xr=Lt;Yr<Xr.length;Yr+=1)Pr();var Hr=function(pn){Je[pn].forEach(function(Pn){var On=Pn.feature,$n=he[pn],ra=de[$n.source],ea=ra.getFeatureState(On.layer["source-layer"],On.id);On.source=On.layer.source,On.layer["source-layer"]&&(On.sourceLayer=On.layer["source-layer"]),On.state=ea})};for(var $r in Je)Hr($r);return Je}function ae(he,W){for(var de=he.getRenderableIds().map(function(ft){return he.getTileByID(ft)}),J=[],ge={},Ce=0;Ce<de.length;Ce++){var Fe=de[Ce],Je=Fe.tileID.canonical.key;ge[Je]||(ge[Je]=!0,Fe.querySourceFeatures(J,W))}return J}function se(he,W){var de=he.tileID,J=W.tileID;return de.overscaledZ-J.overscaledZ||de.canonical.y-J.canonical.y||de.wrap-J.wrap||de.canonical.x-J.canonical.x}function _e(he){for(var W={},de={},J=0,ge=he;J<ge.length;J+=1){var Ce=ge[J],Fe=Ce.queryResults,Je=Ce.wrappedTileID,ft=de[Je]=de[Je]||{};for(var Lt in Fe)for(var $t=Fe[Lt],cr=ft[Lt]=ft[Lt]||{},dr=W[Lt]=W[Lt]||[],Pr=0,Yr=$t;Pr<Yr.length;Pr+=1){var Xr=Yr[Pr];cr[Xr.featureIndex]||(cr[Xr.featureIndex]=!0,dr.push(Xr))}}return W}var ue=function(W,de){this.max=W,this.onRemove=de,this.reset()};ue.prototype.reset=function(){for(var W in this.data)for(var de=0,J=this.data[W];de<J.length;de+=1){var ge=J[de];ge.timeout&&clearTimeout(ge.timeout),this.onRemove(ge.value)}return this.data={},this.order=[],this},ue.prototype.add=function(W,de,J){var ge=this,Ce=W.wrapped().key;this.data[Ce]===void 0&&(this.data[Ce]=[]);var Fe={value:de,timeout:void 0};if(J!==void 0&&(Fe.timeout=setTimeout(function(){ge.remove(W,Fe)},J)),this.data[Ce].push(Fe),this.order.push(Ce),this.order.length>this.max){var Je=this._getAndRemoveByKey(this.order[0]);Je&&this.onRemove(Je)}return this},ue.prototype.has=function(W){return W.wrapped().key in this.data},ue.prototype.getAndRemove=function(W){return this.has(W)?this._getAndRemoveByKey(W.wrapped().key):null},ue.prototype._getAndRemoveByKey=function(W){var de=this.data[W].shift();return de.timeout&&clearTimeout(de.timeout),this.data[W].length===0&&delete this.data[W],this.order.splice(this.order.indexOf(W),1),de.value},ue.prototype.getByKey=function(W){var de=this.data[W];return de?de[0].value:null},ue.prototype.get=function(W){if(!this.has(W))return null;var de=this.data[W.wrapped().key][0];return de.value},ue.prototype.remove=function(W,de){if(!this.has(W))return this;var J=W.wrapped().key,ge=de===void 0?0:this.data[J].indexOf(de),Ce=this.data[J][ge];return this.data[J].splice(ge,1),Ce.timeout&&clearTimeout(Ce.timeout),this.data[J].length===0&&delete this.data[J],this.onRemove(Ce.value),this.order.splice(this.order.indexOf(J),1),this},ue.prototype.setMaxSize=function(W){for(this.max=W;this.order.length>this.max;){var de=this._getAndRemoveByKey(this.order[0]);de&&this.onRemove(de)}return this},ue.prototype.filter=function(W){var de=[];for(var J in this.data)for(var ge=0,Ce=this.data[J];ge<Ce.length;ge+=1){var Fe=Ce[ge];W(Fe.value)||de.push(Fe)}for(var Je=0,ft=de;Je<ft.length;Je+=1){var Lt=ft[Je];this.remove(Lt.value.tileID,Lt)}};var ye=function(W,de,J){this.context=W;var ge=W.gl;this.buffer=ge.createBuffer(),this.dynamicDraw=Boolean(J),this.context.unbindVAO(),W.bindElementBuffer.set(this.buffer),ge.bufferData(ge.ELEMENT_ARRAY_BUFFER,de.arrayBuffer,this.dynamicDraw?ge.DYNAMIC_DRAW:ge.STATIC_DRAW),this.dynamicDraw||delete de.arrayBuffer};ye.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},ye.prototype.updateData=function(W){var de=this.context.gl;this.context.unbindVAO(),this.bind(),de.bufferSubData(de.ELEMENT_ARRAY_BUFFER,0,W.arrayBuffer)},ye.prototype.destroy=function(){var W=this.context.gl;this.buffer&&(W.deleteBuffer(this.buffer),delete this.buffer)};var xe={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},me=function(W,de,J,ge){this.length=de.length,this.attributes=J,this.itemSize=de.bytesPerElement,this.dynamicDraw=ge,this.context=W;var Ce=W.gl;this.buffer=Ce.createBuffer(),W.bindVertexBuffer.set(this.buffer),Ce.bufferData(Ce.ARRAY_BUFFER,de.arrayBuffer,this.dynamicDraw?Ce.DYNAMIC_DRAW:Ce.STATIC_DRAW),this.dynamicDraw||delete de.arrayBuffer};me.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},me.prototype.updateData=function(W){var de=this.context.gl;this.bind(),de.bufferSubData(de.ARRAY_BUFFER,0,W.arrayBuffer)},me.prototype.enableAttributes=function(W,de){for(var J=0;J<this.attributes.length;J++){var ge=this.attributes[J],Ce=de.attributes[ge.name];Ce!==void 0&&W.enableVertexAttribArray(Ce)}},me.prototype.setVertexAttribPointers=function(W,de,J){for(var ge=0;ge<this.attributes.length;ge++){var Ce=this.attributes[ge],Fe=de.attributes[Ce.name];Fe!==void 0&&W.vertexAttribPointer(Fe,Ce.components,W[xe[Ce.type]],!1,this.itemSize,Ce.offset+this.itemSize*(J||0))}},me.prototype.destroy=function(){var W=this.context.gl;this.buffer&&(W.deleteBuffer(this.buffer),delete this.buffer)};var be=function(W){this.gl=W.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};be.prototype.get=function(){return this.current},be.prototype.set=function(W){},be.prototype.getDefault=function(){return this.default},be.prototype.setDefault=function(){this.set(this.default)};var ke=function(he){function W(){he.apply(this,arguments)}return he&&(W.__proto__=he),W.prototype=Object.create(he&&he.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return e.Color.transparent},W.prototype.set=function(J){var ge=this.current;J.r===ge.r&&J.g===ge.g&&J.b===ge.b&&J.a===ge.a&&!this.dirty||(this.gl.clearColor(J.r,J.g,J.b,J.a),this.current=J,this.dirty=!1)},W}(be),De=function(he){function W(){he.apply(this,arguments)}return he&&(W.__proto__=he),W.prototype=Object.create(he&&he.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return 1},W.prototype.set=function(J){J===this.current&&!this.dirty||(this.gl.clearDepth(J),this.current=J,this.dirty=!1)},W}(be),Ve=function(he){function W(){he.apply(this,arguments)}return he&&(W.__proto__=he),W.prototype=Object.create(he&&he.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return 0},W.prototype.set=function(J){J===this.current&&!this.dirty||(this.gl.clearStencil(J),this.current=J,this.dirty=!1)},W}(be),Ae=function(he){function W(){he.apply(this,arguments)}return he&&(W.__proto__=he),W.prototype=Object.create(he&&he.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return[!0,!0,!0,!0]},W.prototype.set=function(J){var ge=this.current;J[0]===ge[0]&&J[1]===ge[1]&&J[2]===ge[2]&&J[3]===ge[3]&&!this.dirty||(this.gl.colorMask(J[0],J[1],J[2],J[3]),this.current=J,this.dirty=!1)},W}(be),Le=function(he){function W(){he.apply(this,arguments)}return he&&(W.__proto__=he),W.prototype=Object.create(he&&he.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return!0},W.prototype.set=function(J){J===this.current&&!this.dirty||(this.gl.depthMask(J),this.current=J,this.dirty=!1)},W}(be),je=function(he){function W(){he.apply(this,arguments)}return he&&(W.__proto__=he),W.prototype=Object.create(he&&he.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return 255},W.prototype.set=function(J){J===this.current&&!this.dirty||(this.gl.stencilMask(J),this.current=J,this.dirty=!1)},W}(be),Ye=function(he){function W(){he.apply(this,arguments)}return he&&(W.__proto__=he),W.prototype=Object.create(he&&he.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},W.prototype.set=function(J){var ge=this.current;J.func===ge.func&&J.ref===ge.ref&&J.mask===ge.mask&&!this.dirty||(this.gl.stencilFunc(J.func,J.ref,J.mask),this.current=J,this.dirty=!1)},W}(be),ze=function(he){function W(){he.apply(this,arguments)}return he&&(W.__proto__=he),W.prototype=Object.create(he&&he.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){var J=this.gl;return[J.KEEP,J.KEEP,J.KEEP]},W.prototype.set=function(J){var ge=this.current;J[0]===ge[0]&&J[1]===ge[1]&&J[2]===ge[2]&&!this.dirty||(this.gl.stencilOp(J[0],J[1],J[2]),this.current=J,this.dirty=!1)},W}(be),Ie=function(he){function W(){he.apply(this,arguments)}return he&&(W.__proto__=he),W.prototype=Object.create(he&&he.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return!1},W.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){var ge=this.gl;J?ge.enable(ge.STENCIL_TEST):ge.disable(ge.STENCIL_TEST),this.current=J,this.dirty=!1}},W}(be),We=function(he){function W(){he.apply(this,arguments)}return he&&(W.__proto__=he),W.prototype=Object.create(he&&he.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return[0,1]},W.prototype.set=function(J){var ge=this.current;J[0]===ge[0]&&J[1]===ge[1]&&!this.dirty||(this.gl.depthRange(J[0],J[1]),this.current=J,this.dirty=!1)},W}(be),pt=function(he){function W(){he.apply(this,arguments)}return he&&(W.__proto__=he),W.prototype=Object.create(he&&he.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return!1},W.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){var ge=this.gl;J?ge.enable(ge.DEPTH_TEST):ge.disable(ge.DEPTH_TEST),this.current=J,this.dirty=!1}},W}(be),Ft=function(he){function W(){he.apply(this,arguments)}return he&&(W.__proto__=he),W.prototype=Object.create(he&&he.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return this.gl.LESS},W.prototype.set=function(J){J===this.current&&!this.dirty||(this.gl.depthFunc(J),this.current=J,this.dirty=!1)},W}(be),Qt=function(he){function W(){he.apply(this,arguments)}return he&&(W.__proto__=he),W.prototype=Object.create(he&&he.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return!1},W.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){var ge=this.gl;J?ge.enable(ge.BLEND):ge.disable(ge.BLEND),this.current=J,this.dirty=!1}},W}(be),zt=function(he){function W(){he.apply(this,arguments)}return he&&(W.__proto__=he),W.prototype=Object.create(he&&he.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){var J=this.gl;return[J.ONE,J.ZERO]},W.prototype.set=function(J){var ge=this.current;J[0]===ge[0]&&J[1]===ge[1]&&!this.dirty||(this.gl.blendFunc(J[0],J[1]),this.current=J,this.dirty=!1)},W}(be),Et=function(he){function W(){he.apply(this,arguments)}return he&&(W.__proto__=he),W.prototype=Object.create(he&&he.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return e.Color.transparent},W.prototype.set=function(J){var ge=this.current;J.r===ge.r&&J.g===ge.g&&J.b===ge.b&&J.a===ge.a&&!this.dirty||(this.gl.blendColor(J.r,J.g,J.b,J.a),this.current=J,this.dirty=!1)},W}(be),Xt=function(he){function W(){he.apply(this,arguments)}return he&&(W.__proto__=he),W.prototype=Object.create(he&&he.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return this.gl.FUNC_ADD},W.prototype.set=function(J){J===this.current&&!this.dirty||(this.gl.blendEquation(J),this.current=J,this.dirty=!1)},W}(be),Nt=function(he){function W(){he.apply(this,arguments)}return he&&(W.__proto__=he),W.prototype=Object.create(he&&he.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return!1},W.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){var ge=this.gl;J?ge.enable(ge.CULL_FACE):ge.disable(ge.CULL_FACE),this.current=J,this.dirty=!1}},W}(be),Ct=function(he){function W(){he.apply(this,arguments)}return he&&(W.__proto__=he),W.prototype=Object.create(he&&he.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return this.gl.BACK},W.prototype.set=function(J){J===this.current&&!this.dirty||(this.gl.cullFace(J),this.current=J,this.dirty=!1)},W}(be),Xe=function(he){function W(){he.apply(this,arguments)}return he&&(W.__proto__=he),W.prototype=Object.create(he&&he.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return this.gl.CCW},W.prototype.set=function(J){J===this.current&&!this.dirty||(this.gl.frontFace(J),this.current=J,this.dirty=!1)},W}(be),at=function(he){function W(){he.apply(this,arguments)}return he&&(W.__proto__=he),W.prototype=Object.create(he&&he.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function(J){J===this.current&&!this.dirty||(this.gl.useProgram(J),this.current=J,this.dirty=!1)},W}(be),Ge=function(he){function W(){he.apply(this,arguments)}return he&&(W.__proto__=he),W.prototype=Object.create(he&&he.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return this.gl.TEXTURE0},W.prototype.set=function(J){J===this.current&&!this.dirty||(this.gl.activeTexture(J),this.current=J,this.dirty=!1)},W}(be),Se=function(he){function W(){he.apply(this,arguments)}return he&&(W.__proto__=he),W.prototype=Object.create(he&&he.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){var J=this.gl;return[0,0,J.drawingBufferWidth,J.drawingBufferHeight]},W.prototype.set=function(J){var ge=this.current;J[0]===ge[0]&&J[1]===ge[1]&&J[2]===ge[2]&&J[3]===ge[3]&&!this.dirty||(this.gl.viewport(J[0],J[1],J[2],J[3]),this.current=J,this.dirty=!1)},W}(be),He=function(he){function W(){he.apply(this,arguments)}return he&&(W.__proto__=he),W.prototype=Object.create(he&&he.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){var ge=this.gl;ge.bindFramebuffer(ge.FRAMEBUFFER,J),this.current=J,this.dirty=!1}},W}(be),Ke=function(he){function W(){he.apply(this,arguments)}return he&&(W.__proto__=he),W.prototype=Object.create(he&&he.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){var ge=this.gl;ge.bindRenderbuffer(ge.RENDERBUFFER,J),this.current=J,this.dirty=!1}},W}(be),qe=function(he){function W(){he.apply(this,arguments)}return he&&(W.__proto__=he),W.prototype=Object.create(he&&he.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){var ge=this.gl;ge.bindTexture(ge.TEXTURE_2D,J),this.current=J,this.dirty=!1}},W}(be),Tt=function(he){function W(){he.apply(this,arguments)}return he&&(W.__proto__=he),W.prototype=Object.create(he&&he.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){var ge=this.gl;ge.bindBuffer(ge.ARRAY_BUFFER,J),this.current=J,this.dirty=!1}},W}(be),mt=function(he){function W(){he.apply(this,arguments)}return he&&(W.__proto__=he),W.prototype=Object.create(he&&he.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function(J){var ge=this.gl;ge.bindBuffer(ge.ELEMENT_ARRAY_BUFFER,J),this.current=J,this.dirty=!1},W}(be),At=function(he){function W(de){he.call(this,de),this.vao=de.extVertexArrayObject}return he&&(W.__proto__=he),W.prototype=Object.create(he&&he.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function(J){!this.vao||J===this.current&&!this.dirty||(this.vao.bindVertexArrayOES(J),this.current=J,this.dirty=!1)},W}(be),Ht=function(he){function W(){he.apply(this,arguments)}return he&&(W.__proto__=he),W.prototype=Object.create(he&&he.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return 4},W.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){var ge=this.gl;ge.pixelStorei(ge.UNPACK_ALIGNMENT,J),this.current=J,this.dirty=!1}},W}(be),It=function(he){function W(){he.apply(this,arguments)}return he&&(W.__proto__=he),W.prototype=Object.create(he&&he.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return!1},W.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){var ge=this.gl;ge.pixelStorei(ge.UNPACK_PREMULTIPLY_ALPHA_WEBGL,J),this.current=J,this.dirty=!1}},W}(be),Vt=function(he){function W(){he.apply(this,arguments)}return he&&(W.__proto__=he),W.prototype=Object.create(he&&he.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return!1},W.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){var ge=this.gl;ge.pixelStorei(ge.UNPACK_FLIP_Y_WEBGL,J),this.current=J,this.dirty=!1}},W}(be),jt=function(he){function W(de,J){he.call(this,de),this.context=de,this.parent=J}return he&&(W.__proto__=he),W.prototype=Object.create(he&&he.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W}(be),Yt=function(he){function W(){he.apply(this,arguments)}return he&&(W.__proto__=he),W.prototype=Object.create(he&&he.prototype),W.prototype.constructor=W,W.prototype.setDirty=function(){this.dirty=!0},W.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){this.context.bindFramebuffer.set(this.parent);var ge=this.gl;ge.framebufferTexture2D(ge.FRAMEBUFFER,ge.COLOR_ATTACHMENT0,ge.TEXTURE_2D,J,0),this.current=J,this.dirty=!1}},W}(jt),or=function(he){function W(){he.apply(this,arguments)}return he&&(W.__proto__=he),W.prototype=Object.create(he&&he.prototype),W.prototype.constructor=W,W.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){this.context.bindFramebuffer.set(this.parent);var ge=this.gl;ge.framebufferRenderbuffer(ge.FRAMEBUFFER,ge.DEPTH_ATTACHMENT,ge.RENDERBUFFER,J),this.current=J,this.dirty=!1}},W}(jt),Gr=function(W,de,J,ge){this.context=W,this.width=de,this.height=J;var Ce=W.gl,Fe=this.framebuffer=Ce.createFramebuffer();this.colorAttachment=new Yt(W,Fe),ge&&(this.depthAttachment=new or(W,Fe))};Gr.prototype.destroy=function(){var W=this.context.gl,de=this.colorAttachment.get();if(de&&W.deleteTexture(de),this.depthAttachment){var J=this.depthAttachment.get();J&&W.deleteRenderbuffer(J)}W.deleteFramebuffer(this.framebuffer)};var on=519,Jr=function(W,de,J){this.func=W,this.mask=de,this.range=J};Jr.ReadOnly=!1,Jr.ReadWrite=!0,Jr.disabled=new Jr(on,Jr.ReadOnly,[0,1]);var ot=519,er=7680,Kt=function(W,de,J,ge,Ce,Fe){this.test=W,this.ref=de,this.mask=J,this.fail=ge,this.depthFail=Ce,this.pass=Fe};Kt.disabled=new Kt({func:ot,mask:0},0,0,er,er,er);var fr=0,Ar=1,et=771,$e=function(W,de,J){this.blendFunction=W,this.blendColor=de,this.mask=J};$e.Replace=[Ar,fr],$e.disabled=new $e($e.Replace,e.Color.transparent,[!1,!1,!1,!1]),$e.unblended=new $e($e.Replace,e.Color.transparent,[!0,!0,!0,!0]),$e.alphaBlended=new $e([Ar,et],e.Color.transparent,[!0,!0,!0,!0]);var st=1029,ct=2305,Mt=function(W,de,J){this.enable=W,this.mode=de,this.frontFace=J};Mt.disabled=new Mt(!1,st,ct),Mt.backCCW=new Mt(!0,st,ct);var Ut=function(W){this.gl=W,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new ke(this),this.clearDepth=new De(this),this.clearStencil=new Ve(this),this.colorMask=new Ae(this),this.depthMask=new Le(this),this.stencilMask=new je(this),this.stencilFunc=new Ye(this),this.stencilOp=new ze(this),this.stencilTest=new Ie(this),this.depthRange=new We(this),this.depthTest=new pt(this),this.depthFunc=new Ft(this),this.blend=new Qt(this),this.blendFunc=new zt(this),this.blendColor=new Et(this),this.blendEquation=new Xt(this),this.cullFace=new Nt(this),this.cullFaceSide=new Ct(this),this.frontFace=new Xe(this),this.program=new at(this),this.activeTexture=new Ge(this),this.viewport=new Se(this),this.bindFramebuffer=new He(this),this.bindRenderbuffer=new Ke(this),this.bindTexture=new qe(this),this.bindVertexBuffer=new Tt(this),this.bindElementBuffer=new mt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new At(this),this.pixelStoreUnpack=new Ht(this),this.pixelStoreUnpackPremultiplyAlpha=new It(this),this.pixelStoreUnpackFlipY=new Vt(this),this.extTextureFilterAnisotropic=W.getExtension("EXT_texture_filter_anisotropic")||W.getExtension("MOZ_EXT_texture_filter_anisotropic")||W.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=W.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=W.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(W.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=W.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=W.getExtension("EXT_disjoint_timer_query")};Ut.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Ut.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Ut.prototype.createIndexBuffer=function(W,de){return new ye(this,W,de)},Ut.prototype.createVertexBuffer=function(W,de,J){return new me(this,W,de,J)},Ut.prototype.createRenderbuffer=function(W,de,J){var ge=this.gl,Ce=ge.createRenderbuffer();return this.bindRenderbuffer.set(Ce),ge.renderbufferStorage(ge.RENDERBUFFER,W,de,J),this.bindRenderbuffer.set(null),Ce},Ut.prototype.createFramebuffer=function(W,de,J){return new Gr(this,W,de,J)},Ut.prototype.clear=function(W){var de=W.color,J=W.depth,ge=this.gl,Ce=0;de&&(Ce|=ge.COLOR_BUFFER_BIT,this.clearColor.set(de),this.colorMask.set([!0,!0,!0,!0])),typeof J<"u"&&(Ce|=ge.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(J),this.depthMask.set(!0)),ge.clear(Ce)},Ut.prototype.setCullFace=function(W){W.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(W.mode),this.frontFace.set(W.frontFace))},Ut.prototype.setDepthMode=function(W){W.func===this.gl.ALWAYS&&!W.mask?this.depthTest.set(!1):(this.depthTest.set(!0),this.depthFunc.set(W.func),this.depthMask.set(W.mask),this.depthRange.set(W.range))},Ut.prototype.setStencilMode=function(W){W.test.func===this.gl.ALWAYS&&!W.mask?this.stencilTest.set(!1):(this.stencilTest.set(!0),this.stencilMask.set(W.mask),this.stencilOp.set([W.fail,W.depthFail,W.pass]),this.stencilFunc.set({func:W.test.func,ref:W.ref,mask:W.test.mask}))},Ut.prototype.setColorMode=function(W){e.deepEqual(W.blendFunction,$e.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(W.blendFunction),this.blendColor.set(W.blendColor)),this.colorMask.set(W.mask)},Ut.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Pe=function(he){function W(de,J,ge){var Ce=this;he.call(this),this.id=de,this.dispatcher=ge,this.on("data",function(Fe){Fe.dataType==="source"&&Fe.sourceDataType==="metadata"&&(Ce._sourceLoaded=!0),Ce._sourceLoaded&&!Ce._paused&&Fe.dataType==="source"&&Fe.sourceDataType==="content"&&(Ce.reload(),Ce.transform&&Ce.update(Ce.transform))}),this.on("error",function(){Ce._sourceErrored=!0}),this._source=H(de,J,ge,this),this._tiles={},this._cache=new ue(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new e.SourceFeatureState}return he&&(W.__proto__=he),W.prototype=Object.create(he&&he.prototype),W.prototype.constructor=W,W.prototype.onAdd=function(J){this.map=J,this._maxTileCacheSize=J?J._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(J)},W.prototype.onRemove=function(J){this._source&&this._source.onRemove&&this._source.onRemove(J)},W.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var J in this._tiles){var ge=this._tiles[J];if(ge.state!=="loaded"&&ge.state!=="errored")return!1}return!0},W.prototype.getSource=function(){return this._source},W.prototype.pause=function(){this._paused=!0},W.prototype.resume=function(){if(!!this._paused){var J=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,J&&this.reload(),this.transform&&this.update(this.transform)}},W.prototype._loadTile=function(J,ge){return this._source.loadTile(J,ge)},W.prototype._unloadTile=function(J){if(this._source.unloadTile)return this._source.unloadTile(J,function(){})},W.prototype._abortTile=function(J){if(this._source.abortTile)return this._source.abortTile(J,function(){})},W.prototype.serialize=function(){return this._source.serialize()},W.prototype.prepare=function(J){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(var ge in this._tiles){var Ce=this._tiles[ge];Ce.upload(J),Ce.prepare(this.map.style.imageManager)}},W.prototype.getIds=function(){return e.values(this._tiles).map(function(J){return J.tileID}).sort(Ee).map(function(J){return J.key})},W.prototype.getRenderableIds=function(J){var ge=this,Ce=[];for(var Fe in this._tiles)this._isIdRenderable(Fe,J)&&Ce.push(this._tiles[Fe]);return J?Ce.sort(function(Je,ft){var Lt=Je.tileID,$t=ft.tileID,cr=new e.Point(Lt.canonical.x,Lt.canonical.y)._rotate(ge.transform.angle),dr=new e.Point($t.canonical.x,$t.canonical.y)._rotate(ge.transform.angle);return Lt.overscaledZ-$t.overscaledZ||dr.y-cr.y||dr.x-cr.x}).map(function(Je){return Je.tileID.key}):Ce.map(function(Je){return Je.tileID}).sort(Ee).map(function(Je){return Je.key})},W.prototype.hasRenderableParent=function(J){var ge=this.findLoadedParent(J,0);return ge?this._isIdRenderable(ge.tileID.key):!1},W.prototype._isIdRenderable=function(J,ge){return this._tiles[J]&&this._tiles[J].hasData()&&!this._coveredTiles[J]&&(ge||!this._tiles[J].holdingForFade())},W.prototype.reload=function(){if(this._paused){this._shouldReloadOnResume=!0;return}this._cache.reset();for(var J in this._tiles)this._tiles[J].state!=="errored"&&this._reloadTile(J,"reloading")},W.prototype._reloadTile=function(J,ge){var Ce=this._tiles[J];!Ce||(Ce.state!=="loading"&&(Ce.state=ge),this._loadTile(Ce,this._tileLoaded.bind(this,Ce,J,ge)))},W.prototype._tileLoaded=function(J,ge,Ce,Fe){if(Fe){J.state="errored",Fe.status!==404?this._source.fire(new e.ErrorEvent(Fe,{tile:J})):this.update(this.transform);return}J.timeAdded=e.browser.now(),Ce==="expired"&&(J.refreshedUponExpiration=!0),this._setTileReloadTimer(ge,J),this.getSource().type==="raster-dem"&&J.dem&&this._backfillDEM(J),this._state.initializeTileState(J,this.map?this.map.painter:null),this._source.fire(new e.Event("data",{dataType:"source",tile:J,coord:J.tileID}))},W.prototype._backfillDEM=function(J){for(var ge=this.getRenderableIds(),Ce=0;Ce<ge.length;Ce++){var Fe=ge[Ce];if(J.neighboringTiles&&J.neighboringTiles[Fe]){var Je=this.getTileByID(Fe);ft(J,Je),ft(Je,J)}}function ft(Lt,$t){Lt.needsHillshadePrepare=!0;var cr=$t.tileID.canonical.x-Lt.tileID.canonical.x,dr=$t.tileID.canonical.y-Lt.tileID.canonical.y,Pr=Math.pow(2,Lt.tileID.canonical.z),Yr=$t.tileID.key;cr===0&&dr===0||Math.abs(dr)>1||(Math.abs(cr)>1&&(Math.abs(cr+Pr)===1?cr+=Pr:Math.abs(cr-Pr)===1&&(cr-=Pr)),!(!$t.dem||!Lt.dem)&&(Lt.dem.backfillBorder($t.dem,cr,dr),Lt.neighboringTiles&&Lt.neighboringTiles[Yr]&&(Lt.neighboringTiles[Yr].backfilled=!0)))}},W.prototype.getTile=function(J){return this.getTileByID(J.key)},W.prototype.getTileByID=function(J){return this._tiles[J]},W.prototype._retainLoadedChildren=function(J,ge,Ce,Fe){for(var Je in this._tiles){var ft=this._tiles[Je];if(!(Fe[Je]||!ft.hasData()||ft.tileID.overscaledZ<=ge||ft.tileID.overscaledZ>Ce)){for(var Lt=ft.tileID;ft&&ft.tileID.overscaledZ>ge+1;){var $t=ft.tileID.scaledTo(ft.tileID.overscaledZ-1);ft=this._tiles[$t.key],ft&&ft.hasData()&&(Lt=$t)}for(var cr=Lt;cr.overscaledZ>ge;)if(cr=cr.scaledTo(cr.overscaledZ-1),J[cr.key]){Fe[Lt.key]=Lt;break}}}},W.prototype.findLoadedParent=function(J,ge){if(J.key in this._loadedParentTiles){var Ce=this._loadedParentTiles[J.key];return Ce&&Ce.tileID.overscaledZ>=ge?Ce:null}for(var Fe=J.overscaledZ-1;Fe>=ge;Fe--){var Je=J.scaledTo(Fe),ft=this._getLoadedTile(Je);if(ft)return ft}},W.prototype._getLoadedTile=function(J){var ge=this._tiles[J.key];if(ge&&ge.hasData())return ge;var Ce=this._cache.getByKey(J.wrapped().key);return Ce},W.prototype.updateCacheSize=function(J){var ge=Math.ceil(J.width/this._source.tileSize)+1,Ce=Math.ceil(J.height/this._source.tileSize)+1,Fe=ge*Ce,Je=5,ft=Math.floor(Fe*Je),Lt=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,ft):ft;this._cache.setMaxSize(Lt)},W.prototype.handleWrapJump=function(J){var ge=this._prevLng===void 0?J:this._prevLng,Ce=J-ge,Fe=Ce/360,Je=Math.round(Fe);if(this._prevLng=J,Je){var ft={};for(var Lt in this._tiles){var $t=this._tiles[Lt];$t.tileID=$t.tileID.unwrapTo($t.tileID.wrap+Je),ft[$t.tileID.key]=$t}this._tiles=ft;for(var cr in this._timers)clearTimeout(this._timers[cr]),delete this._timers[cr];for(var dr in this._tiles){var Pr=this._tiles[dr];this._setTileReloadTimer(dr,Pr)}}},W.prototype.update=function(J){var ge=this;if(this.transform=J,!(!this._sourceLoaded||this._paused)){this.updateCacheSize(J),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={};var Ce;this.used?this._source.tileID?Ce=J.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(_a){return new e.OverscaledTileID(_a.canonical.z,_a.wrap,_a.canonical.z,_a.canonical.x,_a.canonical.y)}):(Ce=J.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(Ce=Ce.filter(function(_a){return ge._source.hasTile(_a)}))):Ce=[];var Fe=J.coveringZoomLevel(this._source),Je=Math.max(Fe-W.maxOverzooming,this._source.minzoom),ft=Math.max(Fe+W.maxUnderzooming,this._source.minzoom),Lt=this._updateRetainedTiles(Ce,Fe);if(it(this._source.type)){for(var $t={},cr={},dr=Object.keys(Lt),Pr=0,Yr=dr;Pr<Yr.length;Pr+=1){var Xr=Yr[Pr],Hr=Lt[Xr],$r=this._tiles[Xr];if(!(!$r||$r.fadeEndTime&&$r.fadeEndTime<=e.browser.now())){var pn=this.findLoadedParent(Hr,Je);pn&&(this._addTile(pn.tileID),$t[pn.tileID.key]=pn.tileID),cr[Xr]=Hr}}this._retainLoadedChildren(cr,Fe,ft,Lt);for(var Pn in $t)Lt[Pn]||(this._coveredTiles[Pn]=!0,Lt[Pn]=$t[Pn])}for(var On in Lt)this._tiles[On].clearFadeHold();for(var $n=e.keysDifference(this._tiles,Lt),ra=0,ea=$n;ra<ea.length;ra+=1){var pa=ea[ra],Aa=this._tiles[pa];Aa.hasSymbolBuckets&&!Aa.holdingForFade()?Aa.setHoldDuration(this.map._fadeDuration):(!Aa.hasSymbolBuckets||Aa.symbolFadeFinished())&&this._removeTile(pa)}this._updateLoadedParentTileCache()}},W.prototype.releaseSymbolFadeTiles=function(){for(var J in this._tiles)this._tiles[J].holdingForFade()&&this._removeTile(J)},W.prototype._updateRetainedTiles=function(J,ge){for(var Ce={},Fe={},Je=Math.max(ge-W.maxOverzooming,this._source.minzoom),ft=Math.max(ge+W.maxUnderzooming,this._source.minzoom),Lt={},$t=0,cr=J;$t<cr.length;$t+=1){var dr=cr[$t],Pr=this._addTile(dr);Ce[dr.key]=dr,!Pr.hasData()&&ge<this._source.maxzoom&&(Lt[dr.key]=dr)}this._retainLoadedChildren(Lt,ge,ft,Ce);for(var Yr=0,Xr=J;Yr<Xr.length;Yr+=1){var Hr=Xr[Yr],$r=this._tiles[Hr.key];if(!$r.hasData()){if(ge+1>this._source.maxzoom){var pn=Hr.children(this._source.maxzoom)[0],Pn=this.getTile(pn);if(!!Pn&&Pn.hasData()){Ce[pn.key]=pn;continue}}else{var On=Hr.children(this._source.maxzoom);if(Ce[On[0].key]&&Ce[On[1].key]&&Ce[On[2].key]&&Ce[On[3].key])continue}for(var $n=$r.wasRequested(),ra=Hr.overscaledZ-1;ra>=Je;--ra){var ea=Hr.scaledTo(ra);if(Fe[ea.key]||(Fe[ea.key]=!0,$r=this.getTile(ea),!$r&&$n&&($r=this._addTile(ea)),$r&&(Ce[ea.key]=ea,$n=$r.wasRequested(),$r.hasData())))break}}}return Ce},W.prototype._updateLoadedParentTileCache=function(){this._loadedParentTiles={};for(var J in this._tiles){for(var ge=[],Ce=void 0,Fe=this._tiles[J].tileID;Fe.overscaledZ>0;){if(Fe.key in this._loadedParentTiles){Ce=this._loadedParentTiles[Fe.key];break}ge.push(Fe.key);var Je=Fe.scaledTo(Fe.overscaledZ-1);if(Ce=this._getLoadedTile(Je),Ce)break;Fe=Je}for(var ft=0,Lt=ge;ft<Lt.length;ft+=1){var $t=Lt[ft];this._loadedParentTiles[$t]=Ce}}},W.prototype._addTile=function(J){var ge=this._tiles[J.key];if(ge)return ge;ge=this._cache.getAndRemove(J),ge&&(this._setTileReloadTimer(J.key,ge),ge.tileID=J,this._state.initializeTileState(ge,this.map?this.map.painter:null),this._cacheTimers[J.key]&&(clearTimeout(this._cacheTimers[J.key]),delete this._cacheTimers[J.key],this._setTileReloadTimer(J.key,ge)));var Ce=Boolean(ge);return Ce||(ge=new e.Tile(J,this._source.tileSize*J.overscaleFactor()),this._loadTile(ge,this._tileLoaded.bind(this,ge,J.key,ge.state))),ge?(ge.uses++,this._tiles[J.key]=ge,Ce||this._source.fire(new e.Event("dataloading",{tile:ge,coord:ge.tileID,dataType:"source"})),ge):null},W.prototype._setTileReloadTimer=function(J,ge){var Ce=this;J in this._timers&&(clearTimeout(this._timers[J]),delete this._timers[J]);var Fe=ge.getExpiryTimeout();Fe&&(this._timers[J]=setTimeout(function(){Ce._reloadTile(J,"expired"),delete Ce._timers[J]},Fe))},W.prototype._removeTile=function(J){var ge=this._tiles[J];!ge||(ge.uses--,delete this._tiles[J],this._timers[J]&&(clearTimeout(this._timers[J]),delete this._timers[J]),!(ge.uses>0)&&(ge.hasData()&&ge.state!=="reloading"?this._cache.add(ge.tileID,ge,ge.getExpiryTimeout()):(ge.aborted=!0,this._abortTile(ge),this._unloadTile(ge))))},W.prototype.clearTiles=function(){this._shouldReloadOnResume=!1,this._paused=!1;for(var J in this._tiles)this._removeTile(J);this._cache.reset()},W.prototype.tilesIn=function(J,ge,Ce){var Fe=this,Je=[],ft=this.transform;if(!ft)return Je;for(var Lt=Ce?ft.getCameraQueryGeometry(J):J,$t=J.map(function(ra){return ft.pointCoordinate(ra)}),cr=Lt.map(function(ra){return ft.pointCoordinate(ra)}),dr=this.getIds(),Pr=1/0,Yr=1/0,Xr=-1/0,Hr=-1/0,$r=0,pn=cr;$r<pn.length;$r+=1){var Pn=pn[$r];Pr=Math.min(Pr,Pn.x),Yr=Math.min(Yr,Pn.y),Xr=Math.max(Xr,Pn.x),Hr=Math.max(Hr,Pn.y)}for(var On=function(ra){var ea=Fe._tiles[dr[ra]];if(!ea.holdingForFade()){var pa=ea.tileID,Aa=Math.pow(2,ft.zoom-ea.tileID.overscaledZ),_a=ge*ea.queryPadding*e.EXTENT/ea.tileSize/Aa,Ea=[pa.getTilePoint(new e.MercatorCoordinate(Pr,Yr)),pa.getTilePoint(new e.MercatorCoordinate(Xr,Hr))];if(Ea[0].x-_a<e.EXTENT&&Ea[0].y-_a<e.EXTENT&&Ea[1].x+_a>=0&&Ea[1].y+_a>=0){var Ra=$t.map(function(si){return pa.getTilePoint(si)}),Wa=cr.map(function(si){return pa.getTilePoint(si)});Je.push({tile:ea,tileID:pa,queryGeometry:Ra,cameraQueryGeometry:Wa,scale:Aa})}}},$n=0;$n<dr.length;$n++)On($n);return Je},W.prototype.getVisibleCoordinates=function(J){for(var ge=this,Ce=this.getRenderableIds(J).map(function(Lt){return ge._tiles[Lt].tileID}),Fe=0,Je=Ce;Fe<Je.length;Fe+=1){var ft=Je[Fe];ft.posMatrix=this.transform.calculatePosMatrix(ft.toUnwrapped())}return Ce},W.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(it(this._source.type))for(var J in this._tiles){var ge=this._tiles[J];if(ge.fadeEndTime!==void 0&&ge.fadeEndTime>=e.browser.now())return!0}return!1},W.prototype.setFeatureState=function(J,ge,Ce){J=J||"_geojsonTileLayer",this._state.updateState(J,ge,Ce)},W.prototype.removeFeatureState=function(J,ge,Ce){J=J||"_geojsonTileLayer",this._state.removeFeatureState(J,ge,Ce)},W.prototype.getFeatureState=function(J,ge){return J=J||"_geojsonTileLayer",this._state.getState(J,ge)},W.prototype.setDependencies=function(J,ge,Ce){var Fe=this._tiles[J];Fe&&Fe.setDependencies(ge,Ce)},W.prototype.reloadTilesForDependencies=function(J,ge){for(var Ce in this._tiles){var Fe=this._tiles[Ce];Fe.hasDependency(J,ge)&&this._reloadTile(Ce,"reloading")}this._cache.filter(function(Je){return!Je.hasDependency(J,ge)})},W}(e.Evented);Pe.maxOverzooming=10,Pe.maxUnderzooming=3;function Ee(he,W){var de=Math.abs(he.wrap*2)-+(he.wrap<0),J=Math.abs(W.wrap*2)-+(W.wrap<0);return he.overscaledZ-W.overscaledZ||J-de||W.canonical.y-he.canonical.y||W.canonical.x-he.canonical.x}function it(he){return he==="raster"||he==="image"||he==="video"}function ut(){return new e.window.Worker(lp.workerUrl)}var vt="mapboxgl_preloaded_worker_pool",St=function(){this.active={}};St.prototype.acquire=function(W){if(!this.workers)for(this.workers=[];this.workers.length<St.workerCount;)this.workers.push(new ut);return this.active[W]=!0,this.workers.slice()},St.prototype.release=function(W){delete this.active[W],this.numActive()===0&&(this.workers.forEach(function(de){de.terminate()}),this.workers=null)},St.prototype.isPreloaded=function(){return!!this.active[vt]},St.prototype.numActive=function(){return Object.keys(this.active).length};var yt=Math.floor(e.browser.hardwareConcurrency/2);St.workerCount=Math.max(Math.min(yt,6),1);var Pt;function Wt(){return Pt||(Pt=new St),Pt}function ar(){var he=Wt();he.acquire(vt)}function kr(){var he=Pt;he&&(he.isPreloaded()&&he.numActive()===1?(he.release(vt),Pt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))}function wr(he,W){var de={};for(var J in he)J!=="ref"&&(de[J]=he[J]);return e.refProperties.forEach(function(ge){ge in W&&(de[ge]=W[ge])}),de}function Sr(he){he=he.slice();for(var W=Object.create(null),de=0;de<he.length;de++)W[he[de].id]=he[de];for(var J=0;J<he.length;J++)"ref"in he[J]&&(he[J]=wr(he[J],W[he[J].ref]));return he}function Zr(){var he={},W=e.styleSpec.$version;for(var de in e.styleSpec.$root){var J=e.styleSpec.$root[de];if(J.required){var ge=null;de==="version"?ge=W:J.type==="array"?ge=[]:ge={},ge!=null&&(he[de]=ge)}}return he}var ir={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function xr(he,W,de){de.push({command:ir.addSource,args:[he,W[he]]})}function Rr(he,W,de){W.push({command:ir.removeSource,args:[he]}),de[he]=!0}function Br(he,W,de,J){Rr(he,de,J),xr(he,W,de)}function Cr(he,W,de){var J;for(J in he[de])if(!!he[de].hasOwnProperty(J)&&J!=="data"&&!e.deepEqual(he[de][J],W[de][J]))return!1;for(J in W[de])if(!!W[de].hasOwnProperty(J)&&J!=="data"&&!e.deepEqual(he[de][J],W[de][J]))return!1;return!0}function nt(he,W,de,J){he=he||{},W=W||{};var ge;for(ge in he)!he.hasOwnProperty(ge)||W.hasOwnProperty(ge)||Rr(ge,de,J);for(ge in W)!W.hasOwnProperty(ge)||(he.hasOwnProperty(ge)?e.deepEqual(he[ge],W[ge])||(he[ge].type==="geojson"&&W[ge].type==="geojson"&&Cr(he,W,ge)?de.push({command:ir.setGeoJSONSourceData,args:[ge,W[ge].data]}):Br(ge,W,de,J)):xr(ge,W,de))}function Dt(he,W,de,J,ge,Ce){he=he||{},W=W||{};var Fe;for(Fe in he)!he.hasOwnProperty(Fe)||e.deepEqual(he[Fe],W[Fe])||de.push({command:Ce,args:[J,Fe,W[Fe],ge]});for(Fe in W)!W.hasOwnProperty(Fe)||he.hasOwnProperty(Fe)||e.deepEqual(he[Fe],W[Fe])||de.push({command:Ce,args:[J,Fe,W[Fe],ge]})}function Zt(he){return he.id}function sr(he,W){return he[W.id]=W,he}function zr(he,W,de){he=he||[],W=W||[];var J=he.map(Zt),ge=W.map(Zt),Ce=he.reduce(sr,{}),Fe=W.reduce(sr,{}),Je=J.slice(),ft=Object.create(null),Lt,$t,cr,dr,Pr,Yr,Xr;for(Lt=0,$t=0;Lt<J.length;Lt++)cr=J[Lt],Fe.hasOwnProperty(cr)?$t++:(de.push({command:ir.removeLayer,args:[cr]}),Je.splice(Je.indexOf(cr,$t),1));for(Lt=0,$t=0;Lt<ge.length;Lt++)cr=ge[ge.length-1-Lt],Je[Je.length-1-Lt]!==cr&&(Ce.hasOwnProperty(cr)?(de.push({command:ir.removeLayer,args:[cr]}),Je.splice(Je.lastIndexOf(cr,Je.length-$t),1)):$t++,Yr=Je[Je.length-Lt],de.push({command:ir.addLayer,args:[Fe[cr],Yr]}),Je.splice(Je.length-Lt,0,cr),ft[cr]=!0);for(Lt=0;Lt<ge.length;Lt++)if(cr=ge[Lt],dr=Ce[cr],Pr=Fe[cr],!(ft[cr]||e.deepEqual(dr,Pr))){if(!e.deepEqual(dr.source,Pr.source)||!e.deepEqual(dr["source-layer"],Pr["source-layer"])||!e.deepEqual(dr.type,Pr.type)){de.push({command:ir.removeLayer,args:[cr]}),Yr=Je[Je.lastIndexOf(cr)+1],de.push({command:ir.addLayer,args:[Pr,Yr]});continue}Dt(dr.layout,Pr.layout,de,cr,null,ir.setLayoutProperty),Dt(dr.paint,Pr.paint,de,cr,null,ir.setPaintProperty),e.deepEqual(dr.filter,Pr.filter)||de.push({command:ir.setFilter,args:[cr,Pr.filter]}),(!e.deepEqual(dr.minzoom,Pr.minzoom)||!e.deepEqual(dr.maxzoom,Pr.maxzoom))&&de.push({command:ir.setLayerZoomRange,args:[cr,Pr.minzoom,Pr.maxzoom]});for(Xr in dr)!dr.hasOwnProperty(Xr)||Xr==="layout"||Xr==="paint"||Xr==="filter"||Xr==="metadata"||Xr==="minzoom"||Xr==="maxzoom"||(Xr.indexOf("paint.")===0?Dt(dr[Xr],Pr[Xr],de,cr,Xr.slice(6),ir.setPaintProperty):e.deepEqual(dr[Xr],Pr[Xr])||de.push({command:ir.setLayerProperty,args:[cr,Xr,Pr[Xr]]}));for(Xr in Pr)!Pr.hasOwnProperty(Xr)||dr.hasOwnProperty(Xr)||Xr==="layout"||Xr==="paint"||Xr==="filter"||Xr==="metadata"||Xr==="minzoom"||Xr==="maxzoom"||(Xr.indexOf("paint.")===0?Dt(dr[Xr],Pr[Xr],de,cr,Xr.slice(6),ir.setPaintProperty):e.deepEqual(dr[Xr],Pr[Xr])||de.push({command:ir.setLayerProperty,args:[cr,Xr,Pr[Xr]]}))}}function Ur(he,W){if(!he)return[{command:ir.setStyle,args:[W]}];var de=[];try{if(!e.deepEqual(he.version,W.version))return[{command:ir.setStyle,args:[W]}];e.deepEqual(he.center,W.center)||de.push({command:ir.setCenter,args:[W.center]}),e.deepEqual(he.zoom,W.zoom)||de.push({command:ir.setZoom,args:[W.zoom]}),e.deepEqual(he.bearing,W.bearing)||de.push({command:ir.setBearing,args:[W.bearing]}),e.deepEqual(he.pitch,W.pitch)||de.push({command:ir.setPitch,args:[W.pitch]}),e.deepEqual(he.sprite,W.sprite)||de.push({command:ir.setSprite,args:[W.sprite]}),e.deepEqual(he.glyphs,W.glyphs)||de.push({command:ir.setGlyphs,args:[W.glyphs]}),e.deepEqual(he.transition,W.transition)||de.push({command:ir.setTransition,args:[W.transition]}),e.deepEqual(he.light,W.light)||de.push({command:ir.setLight,args:[W.light]});var J={},ge=[];nt(he.sources,W.sources,ge,J);var Ce=[];he.layers&&he.layers.forEach(function(Fe){J[Fe.source]?de.push({command:ir.removeLayer,args:[Fe.id]}):Ce.push(Fe)}),de=de.concat(ge),zr(Ce,W.layers,de)}catch(Fe){console.warn("Unable to compute style diff:",Fe),de=[{command:ir.setStyle,args:[W]}]}return de}var Lr=function(W,de){this.reset(W,de)};Lr.prototype.reset=function(W,de){this.points=W||[],this._distances=[0];for(var J=1;J<this.points.length;J++)this._distances[J]=this._distances[J-1]+this.points[J].dist(this.points[J-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(de||0,this.length*.5),this.paddedLength=this.length-this.padding*2},Lr.prototype.lerp=function(W){if(this.points.length===1)return this.points[0];W=e.clamp(W,0,1);for(var de=1,J=this._distances[de],ge=W*this.paddedLength+this.padding;J<ge&&de<this._distances.length;)J=this._distances[++de];var Ce=de-1,Fe=this._distances[Ce],Je=J-Fe,ft=Je>0?(ge-Fe)/Je:0;return this.points[Ce].mult(1-ft).add(this.points[de].mult(ft))};var Tr=function(W,de,J){var ge=this.boxCells=[],Ce=this.circleCells=[];this.xCellCount=Math.ceil(W/J),this.yCellCount=Math.ceil(de/J);for(var Fe=0;Fe<this.xCellCount*this.yCellCount;Fe++)ge.push([]),Ce.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=W,this.height=de,this.xScale=this.xCellCount/W,this.yScale=this.yCellCount/de,this.boxUid=0,this.circleUid=0};Tr.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Tr.prototype.insert=function(W,de,J,ge,Ce){this._forEachCell(de,J,ge,Ce,this._insertBoxCell,this.boxUid++),this.boxKeys.push(W),this.bboxes.push(de),this.bboxes.push(J),this.bboxes.push(ge),this.bboxes.push(Ce)},Tr.prototype.insertCircle=function(W,de,J,ge){this._forEachCell(de-ge,J-ge,de+ge,J+ge,this._insertCircleCell,this.circleUid++),this.circleKeys.push(W),this.circles.push(de),this.circles.push(J),this.circles.push(ge)},Tr.prototype._insertBoxCell=function(W,de,J,ge,Ce,Fe){this.boxCells[Ce].push(Fe)},Tr.prototype._insertCircleCell=function(W,de,J,ge,Ce,Fe){this.circleCells[Ce].push(Fe)},Tr.prototype._query=function(W,de,J,ge,Ce,Fe){if(J<0||W>this.width||ge<0||de>this.height)return Ce?!1:[];var Je=[];if(W<=0&&de<=0&&this.width<=J&&this.height<=ge){if(Ce)return!0;for(var ft=0;ft<this.boxKeys.length;ft++)Je.push({key:this.boxKeys[ft],x1:this.bboxes[ft*4],y1:this.bboxes[ft*4+1],x2:this.bboxes[ft*4+2],y2:this.bboxes[ft*4+3]});for(var Lt=0;Lt<this.circleKeys.length;Lt++){var $t=this.circles[Lt*3],cr=this.circles[Lt*3+1],dr=this.circles[Lt*3+2];Je.push({key:this.circleKeys[Lt],x1:$t-dr,y1:cr-dr,x2:$t+dr,y2:cr+dr})}return Fe?Je.filter(Fe):Je}else{var Pr={hitTest:Ce,seenUids:{box:{},circle:{}}};return this._forEachCell(W,de,J,ge,this._queryCell,Je,Pr,Fe),Ce?Je.length>0:Je}},Tr.prototype._queryCircle=function(W,de,J,ge,Ce){var Fe=W-J,Je=W+J,ft=de-J,Lt=de+J;if(Je<0||Fe>this.width||Lt<0||ft>this.height)return ge?!1:[];var $t=[],cr={hitTest:ge,circle:{x:W,y:de,radius:J},seenUids:{box:{},circle:{}}};return this._forEachCell(Fe,ft,Je,Lt,this._queryCellCircle,$t,cr,Ce),ge?$t.length>0:$t},Tr.prototype.query=function(W,de,J,ge,Ce){return this._query(W,de,J,ge,!1,Ce)},Tr.prototype.hitTest=function(W,de,J,ge,Ce){return this._query(W,de,J,ge,!0,Ce)},Tr.prototype.hitTestCircle=function(W,de,J,ge){return this._queryCircle(W,de,J,!0,ge)},Tr.prototype._queryCell=function(W,de,J,ge,Ce,Fe,Je,ft){var Lt=Je.seenUids,$t=this.boxCells[Ce];if($t!==null)for(var cr=this.bboxes,dr=0,Pr=$t;dr<Pr.length;dr+=1){var Yr=Pr[dr];if(!Lt.box[Yr]){Lt.box[Yr]=!0;var Xr=Yr*4;if(W<=cr[Xr+2]&&de<=cr[Xr+3]&&J>=cr[Xr+0]&&ge>=cr[Xr+1]&&(!ft||ft(this.boxKeys[Yr]))){if(Je.hitTest)return Fe.push(!0),!0;Fe.push({key:this.boxKeys[Yr],x1:cr[Xr],y1:cr[Xr+1],x2:cr[Xr+2],y2:cr[Xr+3]})}}}var Hr=this.circleCells[Ce];if(Hr!==null)for(var $r=this.circles,pn=0,Pn=Hr;pn<Pn.length;pn+=1){var On=Pn[pn];if(!Lt.circle[On]){Lt.circle[On]=!0;var $n=On*3;if(this._circleAndRectCollide($r[$n],$r[$n+1],$r[$n+2],W,de,J,ge)&&(!ft||ft(this.circleKeys[On]))){if(Je.hitTest)return Fe.push(!0),!0;var ra=$r[$n],ea=$r[$n+1],pa=$r[$n+2];Fe.push({key:this.circleKeys[On],x1:ra-pa,y1:ea-pa,x2:ra+pa,y2:ea+pa})}}}},Tr.prototype._queryCellCircle=function(W,de,J,ge,Ce,Fe,Je,ft){var Lt=Je.circle,$t=Je.seenUids,cr=this.boxCells[Ce];if(cr!==null)for(var dr=this.bboxes,Pr=0,Yr=cr;Pr<Yr.length;Pr+=1){var Xr=Yr[Pr];if(!$t.box[Xr]){$t.box[Xr]=!0;var Hr=Xr*4;if(this._circleAndRectCollide(Lt.x,Lt.y,Lt.radius,dr[Hr+0],dr[Hr+1],dr[Hr+2],dr[Hr+3])&&(!ft||ft(this.boxKeys[Xr])))return Fe.push(!0),!0}}var $r=this.circleCells[Ce];if($r!==null)for(var pn=this.circles,Pn=0,On=$r;Pn<On.length;Pn+=1){var $n=On[Pn];if(!$t.circle[$n]){$t.circle[$n]=!0;var ra=$n*3;if(this._circlesCollide(pn[ra],pn[ra+1],pn[ra+2],Lt.x,Lt.y,Lt.radius)&&(!ft||ft(this.circleKeys[$n])))return Fe.push(!0),!0}}},Tr.prototype._forEachCell=function(W,de,J,ge,Ce,Fe,Je,ft){for(var Lt=this._convertToXCellCoord(W),$t=this._convertToYCellCoord(de),cr=this._convertToXCellCoord(J),dr=this._convertToYCellCoord(ge),Pr=Lt;Pr<=cr;Pr++)for(var Yr=$t;Yr<=dr;Yr++){var Xr=this.xCellCount*Yr+Pr;if(Ce.call(this,W,de,J,ge,Xr,Fe,Je,ft))return}},Tr.prototype._convertToXCellCoord=function(W){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(W*this.xScale)))},Tr.prototype._convertToYCellCoord=function(W){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(W*this.yScale)))},Tr.prototype._circlesCollide=function(W,de,J,ge,Ce,Fe){var Je=ge-W,ft=Ce-de,Lt=J+Fe;return Lt*Lt>Je*Je+ft*ft},Tr.prototype._circleAndRectCollide=function(W,de,J,ge,Ce,Fe,Je){var ft=(Fe-ge)/2,Lt=Math.abs(W-(ge+ft));if(Lt>ft+J)return!1;var $t=(Je-Ce)/2,cr=Math.abs(de-(Ce+$t));if(cr>$t+J)return!1;if(Lt<=ft||cr<=$t)return!0;var dr=Lt-ft,Pr=cr-$t;return dr*dr+Pr*Pr<=J*J};function Wr(he,W,de,J,ge){var Ce=e.create();return W?(e.scale(Ce,Ce,[1/ge,1/ge,1]),de||e.rotateZ(Ce,Ce,J.angle)):e.multiply(Ce,J.labelPlaneMatrix,he),Ce}function An(he,W,de,J,ge){if(W){var Ce=e.clone(he);return e.scale(Ce,Ce,[ge,ge,1]),de||e.rotateZ(Ce,Ce,-J.angle),Ce}else return J.glCoordMatrix}function vn(he,W){var de=[he.x,he.y,0,1];Mr(de,de,W);var J=de[3];return{point:new e.Point(de[0]/J,de[1]/J),signedDistanceFromCamera:J}}function Un(he,W){return .5+.5*(he/W)}function Ln(he,W){var de=he[0]/he[3],J=he[1]/he[3],ge=de>=-W[0]&&de<=W[0]&&J>=-W[1]&&J<=W[1];return ge}function Zn(he,W,de,J,ge,Ce,Fe,Je){var ft=J?he.textSizeData:he.iconSizeData,Lt=e.evaluateSizeForZoom(ft,de.transform.zoom),$t=[256/de.width*2+1,256/de.height*2+1],cr=J?he.text.dynamicLayoutVertexArray:he.icon.dynamicLayoutVertexArray;cr.clear();for(var dr=he.lineVertexArray,Pr=J?he.text.placedSymbolArray:he.icon.placedSymbolArray,Yr=de.transform.width/de.transform.height,Xr=!1,Hr=0;Hr<Pr.length;Hr++){var $r=Pr.get(Hr);if($r.hidden||$r.writingMode===e.WritingMode.vertical&&!Xr){Ka($r.numGlyphs,cr);continue}Xr=!1;var pn=[$r.anchorX,$r.anchorY,0,1];if(e.transformMat4(pn,pn,W),!Ln(pn,$t)){Ka($r.numGlyphs,cr);continue}var Pn=pn[3],On=Un(de.transform.cameraToCenterDistance,Pn),$n=e.evaluateSizeForFeature(ft,Lt,$r),ra=Fe?$n/On:$n*On,ea=new e.Point($r.anchorX,$r.anchorY),pa=vn(ea,ge).point,Aa={},_a=ka($r,ra,!1,Je,W,ge,Ce,he.glyphOffsetArray,dr,cr,pa,ea,Aa,Yr);Xr=_a.useVertical,(_a.notEnoughRoom||Xr||_a.needsFlipping&&ka($r,ra,!0,Je,W,ge,Ce,he.glyphOffsetArray,dr,cr,pa,ea,Aa,Yr).notEnoughRoom)&&Ka($r.numGlyphs,cr)}J?he.text.dynamicLayoutVertexBuffer.updateData(cr):he.icon.dynamicLayoutVertexBuffer.updateData(cr)}function Wn(he,W,de,J,ge,Ce,Fe,Je,ft,Lt,$t){var cr=Je.glyphStartIndex+Je.numGlyphs,dr=Je.lineStartIndex,Pr=Je.lineStartIndex+Je.lineLength,Yr=W.getoffsetX(Je.glyphStartIndex),Xr=W.getoffsetX(cr-1),Hr=Xa(he*Yr,de,J,ge,Ce,Fe,Je.segment,dr,Pr,ft,Lt,$t);if(!Hr)return null;var $r=Xa(he*Xr,de,J,ge,Ce,Fe,Je.segment,dr,Pr,ft,Lt,$t);return $r?{first:Hr,last:$r}:null}function ya(he,W,de,J){if(he===e.WritingMode.horizontal){var ge=Math.abs(de.y-W.y),Ce=Math.abs(de.x-W.x)*J;if(ge>Ce)return{useVertical:!0}}return(he===e.WritingMode.vertical?W.y<de.y:W.x>de.x)?{needsFlipping:!0}:null}function ka(he,W,de,J,ge,Ce,Fe,Je,ft,Lt,$t,cr,dr,Pr){var Yr=W/24,Xr=he.lineOffsetX*Yr,Hr=he.lineOffsetY*Yr,$r;if(he.numGlyphs>1){var pn=he.glyphStartIndex+he.numGlyphs,Pn=he.lineStartIndex,On=he.lineStartIndex+he.lineLength,$n=Wn(Yr,Je,Xr,Hr,de,$t,cr,he,ft,Ce,dr);if(!$n)return{notEnoughRoom:!0};var ra=vn($n.first.point,Fe).point,ea=vn($n.last.point,Fe).point;if(J&&!de){var pa=ya(he.writingMode,ra,ea,Pr);if(pa)return pa}$r=[$n.first];for(var Aa=he.glyphStartIndex+1;Aa<pn-1;Aa++)$r.push(Xa(Yr*Je.getoffsetX(Aa),Xr,Hr,de,$t,cr,he.segment,Pn,On,ft,Ce,dr));$r.push($n.last)}else{if(J&&!de){var _a=vn(cr,ge).point,Ea=he.lineStartIndex+he.segment+1,Ra=new e.Point(ft.getx(Ea),ft.gety(Ea)),Wa=vn(Ra,ge),si=Wa.signedDistanceFromCamera>0?Wa.point:di(cr,Ra,_a,1,ge),zi=ya(he.writingMode,_a,si,Pr);if(zi)return zi}var vi=Xa(Yr*Je.getoffsetX(he.glyphStartIndex),Xr,Hr,de,$t,cr,he.segment,he.lineStartIndex,he.lineStartIndex+he.lineLength,ft,Ce,dr);if(!vi)return{notEnoughRoom:!0};$r=[vi]}for(var bi=0,Ha=$r;bi<Ha.length;bi+=1){var Ni=Ha[bi];e.addDynamicAttributes(Lt,Ni.point,Ni.angle)}return{}}function di(he,W,de,J,ge){var Ce=vn(he.add(he.sub(W)._unit()),ge).point,Fe=de.sub(Ce);return de.add(Fe._mult(J/Fe.mag()))}function Xa(he,W,de,J,ge,Ce,Fe,Je,ft,Lt,$t,cr){var dr=J?he-W:he+W,Pr=dr>0?1:-1,Yr=0;J&&(Pr*=-1,Yr=Math.PI),Pr<0&&(Yr+=Math.PI);for(var Xr=Pr>0?Je+Fe:Je+Fe+1,Hr=ge,$r=ge,pn=0,Pn=0,On=Math.abs(dr),$n=[];pn+Pn<=On;){if(Xr+=Pr,Xr<Je||Xr>=ft)return null;if($r=Hr,$n.push(Hr),Hr=cr[Xr],Hr===void 0){var ra=new e.Point(Lt.getx(Xr),Lt.gety(Xr)),ea=vn(ra,$t);if(ea.signedDistanceFromCamera>0)Hr=cr[Xr]=ea.point;else{var pa=Xr-Pr,Aa=pn===0?Ce:new e.Point(Lt.getx(pa),Lt.gety(pa));Hr=di(Aa,ra,$r,On-pn+1,$t)}}pn+=Pn,Pn=$r.dist(Hr)}var _a=(On-pn)/Pn,Ea=Hr.sub($r),Ra=Ea.mult(_a)._add($r);Ra._add(Ea._unit()._perp()._mult(de*Pr));var Wa=Yr+Math.atan2(Hr.y-$r.y,Hr.x-$r.x);return $n.push(Ra),{point:Ra,angle:Wa,path:$n}}var $a=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Ka(he,W){for(var de=0;de<he;de++){var J=W.length;W.resize(J+4),W.float32.set($a,J*3)}}function Mr(he,W,de){var J=W[0],ge=W[1];return he[0]=de[0]*J+de[4]*ge+de[12],he[1]=de[1]*J+de[5]*ge+de[13],he[3]=de[3]*J+de[7]*ge+de[15],he}var gn=100,hn=function(W,de,J){de===void 0&&(de=new Tr(W.width+2*gn,W.height+2*gn,25)),J===void 0&&(J=new Tr(W.width+2*gn,W.height+2*gn,25)),this.transform=W,this.grid=de,this.ignoredGrid=J,this.pitchfactor=Math.cos(W._pitch)*W.cameraToCenterDistance,this.screenRightBoundary=W.width+gn,this.screenBottomBoundary=W.height+gn,this.gridRightBoundary=W.width+2*gn,this.gridBottomBoundary=W.height+2*gn};hn.prototype.placeCollisionBox=function(W,de,J,ge,Ce){var Fe=this.projectAndGetPerspectiveRatio(ge,W.anchorPointX,W.anchorPointY),Je=J*Fe.perspectiveRatio,ft=W.x1*Je+Fe.point.x,Lt=W.y1*Je+Fe.point.y,$t=W.x2*Je+Fe.point.x,cr=W.y2*Je+Fe.point.y;return!this.isInsideGrid(ft,Lt,$t,cr)||!de&&this.grid.hitTest(ft,Lt,$t,cr,Ce)?{box:[],offscreen:!1}:{box:[ft,Lt,$t,cr],offscreen:this.isOffscreen(ft,Lt,$t,cr)}},hn.prototype.placeCollisionCircles=function(W,de,J,ge,Ce,Fe,Je,ft,Lt,$t,cr,dr,Pr){var Yr=[],Xr=new e.Point(de.anchorX,de.anchorY),Hr=vn(Xr,Fe),$r=Un(this.transform.cameraToCenterDistance,Hr.signedDistanceFromCamera),pn=$t?Ce/$r:Ce*$r,Pn=pn/e.ONE_EM,On=vn(Xr,Je).point,$n={},ra=de.lineOffsetX*Pn,ea=de.lineOffsetY*Pn,pa=Wn(Pn,ge,ra,ea,!1,On,Xr,de,J,Je,$n),Aa=!1,_a=!1,Ea=!0;if(pa){for(var Ra=dr*.5*$r+Pr,Wa=new e.Point(-gn,-gn),si=new e.Point(this.screenRightBoundary,this.screenBottomBoundary),zi=new Lr,vi=pa.first,bi=pa.last,Ha=[],Ni=vi.path.length-1;Ni>=1;Ni--)Ha.push(vi.path[Ni]);for(var Gi=1;Gi<bi.path.length;Gi++)Ha.push(bi.path[Gi]);var Zi=Ra*2.5;if(ft){var Ei=Ha.map(function(Iu){return vn(Iu,ft)});Ei.some(function(Iu){return Iu.signedDistanceFromCamera<=0})?Ha=[]:Ha=Ei.map(function(Iu){return Iu.point})}var ro=[];if(Ha.length>0){for(var ui=Ha[0].clone(),Ci=Ha[0].clone(),Po=1;Po<Ha.length;Po++)ui.x=Math.min(ui.x,Ha[Po].x),ui.y=Math.min(ui.y,Ha[Po].y),Ci.x=Math.max(Ci.x,Ha[Po].x),Ci.y=Math.max(Ci.y,Ha[Po].y);ui.x>=Wa.x&&Ci.x<=si.x&&ui.y>=Wa.y&&Ci.y<=si.y?ro=[Ha]:Ci.x<Wa.x||ui.x>si.x||Ci.y<Wa.y||ui.y>si.y?ro=[]:ro=e.clipLine([Ha],Wa.x,Wa.y,si.x,si.y)}for(var Ko=0,Xl=ro;Ko<Xl.length;Ko+=1){var Zl=Xl[Ko];zi.reset(Zl,Ra*.25);var Lu=0;zi.length<=.5*Ra?Lu=1:Lu=Math.ceil(zi.paddedLength/Zi)+1;for(var Pu=0;Pu<Lu;Pu++){var ic=Pu/Math.max(Lu-1,1),Du=zi.lerp(ic),$s=Du.x+gn,Dc=Du.y+gn;Yr.push($s,Dc,Ra,0);var Ds=$s-Ra,kl=Dc-Ra,Ru=$s+Ra,vu=Dc+Ra;if(Ea=Ea&&this.isOffscreen(Ds,kl,Ru,vu),_a=_a||this.isInsideGrid(Ds,kl,Ru,vu),!W&&this.grid.hitTestCircle($s,Dc,Ra,cr)&&(Aa=!0,!Lt))return{circles:[],offscreen:!1,collisionDetected:Aa}}}}return{circles:!Lt&&Aa||!_a?[]:Yr,offscreen:Ea,collisionDetected:Aa}},hn.prototype.queryRenderedSymbols=function(W){if(W.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var de=[],J=1/0,ge=1/0,Ce=-1/0,Fe=-1/0,Je=0,ft=W;Je<ft.length;Je+=1){var Lt=ft[Je],$t=new e.Point(Lt.x+gn,Lt.y+gn);J=Math.min(J,$t.x),ge=Math.min(ge,$t.y),Ce=Math.max(Ce,$t.x),Fe=Math.max(Fe,$t.y),de.push($t)}for(var cr=this.grid.query(J,ge,Ce,Fe).concat(this.ignoredGrid.query(J,ge,Ce,Fe)),dr={},Pr={},Yr=0,Xr=cr;Yr<Xr.length;Yr+=1){var Hr=Xr[Yr],$r=Hr.key;if(dr[$r.bucketInstanceId]===void 0&&(dr[$r.bucketInstanceId]={}),!dr[$r.bucketInstanceId][$r.featureIndex]){var pn=[new e.Point(Hr.x1,Hr.y1),new e.Point(Hr.x2,Hr.y1),new e.Point(Hr.x2,Hr.y2),new e.Point(Hr.x1,Hr.y2)];!e.polygonIntersectsPolygon(de,pn)||(dr[$r.bucketInstanceId][$r.featureIndex]=!0,Pr[$r.bucketInstanceId]===void 0&&(Pr[$r.bucketInstanceId]=[]),Pr[$r.bucketInstanceId].push($r.featureIndex))}}return Pr},hn.prototype.insertCollisionBox=function(W,de,J,ge,Ce){var Fe=de?this.ignoredGrid:this.grid,Je={bucketInstanceId:J,featureIndex:ge,collisionGroupID:Ce};Fe.insert(Je,W[0],W[1],W[2],W[3])},hn.prototype.insertCollisionCircles=function(W,de,J,ge,Ce){for(var Fe=de?this.ignoredGrid:this.grid,Je={bucketInstanceId:J,featureIndex:ge,collisionGroupID:Ce},ft=0;ft<W.length;ft+=4)Fe.insertCircle(Je,W[ft],W[ft+1],W[ft+2])},hn.prototype.projectAndGetPerspectiveRatio=function(W,de,J){var ge=[de,J,0,1];Mr(ge,ge,W);var Ce=new e.Point((ge[0]/ge[3]+1)/2*this.transform.width+gn,(-ge[1]/ge[3]+1)/2*this.transform.height+gn);return{point:Ce,perspectiveRatio:.5+.5*(this.transform.cameraToCenterDistance/ge[3])}},hn.prototype.isOffscreen=function(W,de,J,ge){return J<gn||W>=this.screenRightBoundary||ge<gn||de>this.screenBottomBoundary},hn.prototype.isInsideGrid=function(W,de,J,ge){return J>=0&&W<this.gridRightBoundary&&ge>=0&&de<this.gridBottomBoundary},hn.prototype.getViewportMatrix=function(){var W=e.identity([]);return e.translate(W,W,[-gn,-gn,0]),W};function Sn(he,W,de){return W*(e.EXTENT/(he.tileSize*Math.pow(2,de-he.tileID.overscaledZ)))}var Jn=function(W,de,J,ge){W?this.opacity=Math.max(0,Math.min(1,W.opacity+(W.placed?de:-de))):this.opacity=ge&&J?1:0,this.placed=J};Jn.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var ha=function(W,de,J,ge,Ce){this.text=new Jn(W?W.text:null,de,J,Ce),this.icon=new Jn(W?W.icon:null,de,ge,Ce)};ha.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var na=function(W,de,J){this.text=W,this.icon=de,this.skipFade=J},Fn=function(){this.invProjMatrix=e.create(),this.viewportMatrix=e.create(),this.circles=[]},Kn=function(W,de,J,ge,Ce){this.bucketInstanceId=W,this.featureIndex=de,this.sourceLayerIndex=J,this.bucketIndex=ge,this.tileID=Ce},Ya=function(W){this.crossSourceCollisions=W,this.maxGroupID=0,this.collisionGroups={}};Ya.prototype.get=function(W){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[W]){var de=++this.maxGroupID;this.collisionGroups[W]={ID:de,predicate:function(J){return J.collisionGroupID===de}}}return this.collisionGroups[W]};function hi(he,W,de,J,ge){var Ce=e.getAnchorAlignment(he),Fe=Ce.horizontalAlign,Je=Ce.verticalAlign,ft=-(Fe-.5)*W,Lt=-(Je-.5)*de,$t=e.evaluateVariableOffset(he,J);return new e.Point(ft+$t[0]*ge,Lt+$t[1]*ge)}function Gt(he,W,de,J,ge,Ce){var Fe=he.x1,Je=he.x2,ft=he.y1,Lt=he.y2,$t=he.anchorPointX,cr=he.anchorPointY,dr=new e.Point(W,de);return J&&dr._rotate(ge?Ce:-Ce),{x1:Fe+dr.x,y1:ft+dr.y,x2:Je+dr.x,y2:Lt+dr.y,anchorPointX:$t,anchorPointY:cr}}var pr=function(W,de,J,ge){this.transform=W.clone(),this.collisionIndex=new hn(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=de,this.retainedQueryData={},this.collisionGroups=new Ya(J),this.collisionCircleArrays={},this.prevPlacement=ge,ge&&(ge.prevPlacement=void 0),this.placedOrientations={}};pr.prototype.getBucketParts=function(W,de,J,ge){var Ce=J.getBucket(de),Fe=J.latestFeatureIndex;if(!(!Ce||!Fe||de.id!==Ce.layerIds[0])){var Je=J.collisionBoxArray,ft=Ce.layers[0].layout,Lt=Math.pow(2,this.transform.zoom-J.tileID.overscaledZ),$t=J.tileSize/e.EXTENT,cr=this.transform.calculatePosMatrix(J.tileID.toUnwrapped()),dr=ft.get("text-pitch-alignment")==="map",Pr=ft.get("text-rotation-alignment")==="map",Yr=Sn(J,1,this.transform.zoom),Xr=Wr(cr,dr,Pr,this.transform,Yr),Hr=null;if(dr){var $r=An(cr,dr,Pr,this.transform,Yr);Hr=e.multiply([],this.transform.labelPlaneMatrix,$r)}this.retainedQueryData[Ce.bucketInstanceId]=new Kn(Ce.bucketInstanceId,Fe,Ce.sourceLayerIndex,Ce.index,J.tileID);var pn={bucket:Ce,layout:ft,posMatrix:cr,textLabelPlaneMatrix:Xr,labelToScreenMatrix:Hr,scale:Lt,textPixelRatio:$t,holdingForFade:J.holdingForFade(),collisionBoxArray:Je,partiallyEvaluatedTextSize:e.evaluateSizeForZoom(Ce.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(Ce.sourceID)};if(ge)for(var Pn=0,On=Ce.sortKeyRanges;Pn<On.length;Pn+=1){var $n=On[Pn],ra=$n.sortKey,ea=$n.symbolInstanceStart,pa=$n.symbolInstanceEnd;W.push({sortKey:ra,symbolInstanceStart:ea,symbolInstanceEnd:pa,parameters:pn})}else W.push({symbolInstanceStart:0,symbolInstanceEnd:Ce.symbolInstances.length,parameters:pn})}},pr.prototype.attemptAnchorPlacement=function(W,de,J,ge,Ce,Fe,Je,ft,Lt,$t,cr,dr,Pr,Yr,Xr){var Hr=[dr.textOffset0,dr.textOffset1],$r=hi(W,J,ge,Hr,Ce),pn=this.collisionIndex.placeCollisionBox(Gt(de,$r.x,$r.y,Fe,Je,this.transform.angle),cr,ft,Lt,$t.predicate);if(Xr){var Pn=this.collisionIndex.placeCollisionBox(Gt(Xr,$r.x,$r.y,Fe,Je,this.transform.angle),cr,ft,Lt,$t.predicate);if(Pn.box.length===0)return}if(pn.box.length>0){var On;return this.prevPlacement&&this.prevPlacement.variableOffsets[dr.crossTileID]&&this.prevPlacement.placements[dr.crossTileID]&&this.prevPlacement.placements[dr.crossTileID].text&&(On=this.prevPlacement.variableOffsets[dr.crossTileID].anchor),this.variableOffsets[dr.crossTileID]={textOffset:Hr,width:J,height:ge,anchor:W,textBoxScale:Ce,prevAnchor:On},this.markUsedJustification(Pr,W,dr,Yr),Pr.allowVerticalPlacement&&(this.markUsedOrientation(Pr,Yr,dr),this.placedOrientations[dr.crossTileID]=Yr),{shift:$r,placedGlyphBoxes:pn}}},pr.prototype.placeLayerBucketPart=function(W,de,J){var ge=this,Ce=W.parameters,Fe=Ce.bucket,Je=Ce.layout,ft=Ce.posMatrix,Lt=Ce.textLabelPlaneMatrix,$t=Ce.labelToScreenMatrix,cr=Ce.textPixelRatio,dr=Ce.holdingForFade,Pr=Ce.collisionBoxArray,Yr=Ce.partiallyEvaluatedTextSize,Xr=Ce.collisionGroup,Hr=Je.get("text-optional"),$r=Je.get("icon-optional"),pn=Je.get("text-allow-overlap"),Pn=Je.get("icon-allow-overlap"),On=Je.get("text-rotation-alignment")==="map",$n=Je.get("text-pitch-alignment")==="map",ra=Je.get("icon-text-fit")!=="none",ea=Je.get("symbol-z-order")==="viewport-y",pa=pn&&(Pn||!Fe.hasIconData()||$r),Aa=Pn&&(pn||!Fe.hasTextData()||Hr);!Fe.collisionArrays&&Pr&&Fe.deserializeCollisionBoxes(Pr);var _a=function(vi,bi){if(!de[vi.crossTileID]){if(dr){ge.placements[vi.crossTileID]=new na(!1,!1,!1);return}var Ha=!1,Ni=!1,Gi=!0,Zi=null,Ei={box:null,offscreen:null},ro={box:null,offscreen:null},ui=null,Ci=null,Po=null,Ko=0,Xl=0,Zl=0;bi.textFeatureIndex?Ko=bi.textFeatureIndex:vi.useRuntimeCollisionCircles&&(Ko=vi.featureIndex),bi.verticalTextFeatureIndex&&(Xl=bi.verticalTextFeatureIndex);var Lu=bi.textBox;if(Lu){var Pu=function(Oo){var vl=e.WritingMode.horizontal;if(Fe.allowVerticalPlacement&&!Oo&&ge.prevPlacement){var pl=ge.prevPlacement.placedOrientations[vi.crossTileID];pl&&(ge.placedOrientations[vi.crossTileID]=pl,vl=pl,ge.markUsedOrientation(Fe,vl,vi))}return vl},ic=function(Oo,vl){if(Fe.allowVerticalPlacement&&vi.numVerticalGlyphVertices>0&&bi.verticalTextBox)for(var pl=0,mh=Fe.writingModes;pl<mh.length;pl+=1){var gv=mh[pl];if(gv===e.WritingMode.vertical?(Ei=vl(),ro=Ei):Ei=Oo(),Ei&&Ei.box&&Ei.box.length)break}else Ei=Oo()};if(Je.get("text-variable-anchor")){var Ds=Je.get("text-variable-anchor");if(ge.prevPlacement&&ge.prevPlacement.variableOffsets[vi.crossTileID]){var kl=ge.prevPlacement.variableOffsets[vi.crossTileID];Ds.indexOf(kl.anchor)>0&&(Ds=Ds.filter(function(Oo){return Oo!==kl.anchor}),Ds.unshift(kl.anchor))}var Ru=function(Oo,vl,pl){for(var mh=Oo.x2-Oo.x1,gv=Oo.y2-Oo.y1,Id=vi.textBoxScale,Fd=ra&&!Pn?vl:null,Hf={box:[],offscreen:!1},zd=pn?Ds.length*2:Ds.length,xh=0;xh<zd;++xh){var Nd=Ds[xh%Ds.length],Od=xh>=Ds.length,yv=ge.attemptAnchorPlacement(Nd,Oo,mh,gv,Id,On,$n,cr,ft,Xr,Od,vi,Fe,pl,Fd);if(yv&&(Hf=yv.placedGlyphBoxes,Hf&&Hf.box&&Hf.box.length)){Ha=!0,Zi=yv.shift;break}}return Hf},vu=function(){return Ru(Lu,bi.iconBox,e.WritingMode.horizontal)},Iu=function(){var Oo=bi.verticalTextBox,vl=Ei&&Ei.box&&Ei.box.length;return Fe.allowVerticalPlacement&&!vl&&vi.numVerticalGlyphVertices>0&&Oo?Ru(Oo,bi.verticalIconBox,e.WritingMode.vertical):{box:null,offscreen:null}};ic(vu,Iu),Ei&&(Ha=Ei.box,Gi=Ei.offscreen);var ph=Pu(Ei&&Ei.box);if(!Ha&&ge.prevPlacement){var Yc=ge.prevPlacement.variableOffsets[vi.crossTileID];Yc&&(ge.variableOffsets[vi.crossTileID]=Yc,ge.markUsedJustification(Fe,Yc.anchor,vi,ph))}}else{var Du=function(Oo,vl){var pl=ge.collisionIndex.placeCollisionBox(Oo,pn,cr,ft,Xr.predicate);return pl&&pl.box&&pl.box.length&&(ge.markUsedOrientation(Fe,vl,vi),ge.placedOrientations[vi.crossTileID]=vl),pl},$s=function(){return Du(Lu,e.WritingMode.horizontal)},Dc=function(){var Oo=bi.verticalTextBox;return Fe.allowVerticalPlacement&&vi.numVerticalGlyphVertices>0&&Oo?Du(Oo,e.WritingMode.vertical):{box:null,offscreen:null}};ic($s,Dc),Pu(Ei&&Ei.box&&Ei.box.length)}}if(ui=Ei,Ha=ui&&ui.box&&ui.box.length>0,Gi=ui&&ui.offscreen,vi.useRuntimeCollisionCircles){var Ts=Fe.text.placedSymbolArray.get(vi.centerJustifiedTextSymbolIndex),Uf=e.evaluateSizeForFeature(Fe.textSizeData,Yr,Ts),Vs=Je.get("text-padding"),Vf=vi.collisionCircleDiameter;Ci=ge.collisionIndex.placeCollisionCircles(pn,Ts,Fe.lineVertexArray,Fe.glyphOffsetArray,Uf,ft,Lt,$t,J,$n,Xr.predicate,Vf,Vs),Ha=pn||Ci.circles.length>0&&!Ci.collisionDetected,Gi=Gi&&Ci.offscreen}if(bi.iconFeatureIndex&&(Zl=bi.iconFeatureIndex),bi.iconBox){var dh=function(Oo){var vl=ra&&Zi?Gt(Oo,Zi.x,Zi.y,On,$n,ge.transform.angle):Oo;return ge.collisionIndex.placeCollisionBox(vl,Pn,cr,ft,Xr.predicate)};ro&&ro.box&&ro.box.length&&bi.verticalIconBox?(Po=dh(bi.verticalIconBox),Ni=Po.box.length>0):(Po=dh(bi.iconBox),Ni=Po.box.length>0),Gi=Gi&&Po.offscreen}var gh=Hr||vi.numHorizontalGlyphVertices===0&&vi.numVerticalGlyphVertices===0,up=$r||vi.numIconVertices===0;if(!gh&&!up?Ni=Ha=Ni&&Ha:up?gh||(Ni=Ni&&Ha):Ha=Ni&&Ha,Ha&&ui&&ui.box&&(ro&&ro.box&&Xl?ge.collisionIndex.insertCollisionBox(ui.box,Je.get("text-ignore-placement"),Fe.bucketInstanceId,Xl,Xr.ID):ge.collisionIndex.insertCollisionBox(ui.box,Je.get("text-ignore-placement"),Fe.bucketInstanceId,Ko,Xr.ID)),Ni&&Po&&ge.collisionIndex.insertCollisionBox(Po.box,Je.get("icon-ignore-placement"),Fe.bucketInstanceId,Zl,Xr.ID),Ci&&(Ha&&ge.collisionIndex.insertCollisionCircles(Ci.circles,Je.get("text-ignore-placement"),Fe.bucketInstanceId,Ko,Xr.ID),J)){var yh=Fe.bucketInstanceId,hf=ge.collisionCircleArrays[yh];hf===void 0&&(hf=ge.collisionCircleArrays[yh]=new Fn);for(var vf=0;vf<Ci.circles.length;vf+=4)hf.circles.push(Ci.circles[vf+0]),hf.circles.push(Ci.circles[vf+1]),hf.circles.push(Ci.circles[vf+2]),hf.circles.push(Ci.collisionDetected?1:0)}ge.placements[vi.crossTileID]=new na(Ha||pa,Ni||Aa,Gi||Fe.justReloaded),de[vi.crossTileID]=!0}};if(ea)for(var Ea=Fe.getSortedSymbolIndexes(this.transform.angle),Ra=Ea.length-1;Ra>=0;--Ra){var Wa=Ea[Ra];_a(Fe.symbolInstances.get(Wa),Fe.collisionArrays[Wa])}else for(var si=W.symbolInstanceStart;si<W.symbolInstanceEnd;si++)_a(Fe.symbolInstances.get(si),Fe.collisionArrays[si]);if(J&&Fe.bucketInstanceId in this.collisionCircleArrays){var zi=this.collisionCircleArrays[Fe.bucketInstanceId];e.invert(zi.invProjMatrix,ft),zi.viewportMatrix=this.collisionIndex.getViewportMatrix()}Fe.justReloaded=!1},pr.prototype.markUsedJustification=function(W,de,J,ge){var Ce={left:J.leftJustifiedTextSymbolIndex,center:J.centerJustifiedTextSymbolIndex,right:J.rightJustifiedTextSymbolIndex},Fe;ge===e.WritingMode.vertical?Fe=J.verticalPlacedTextSymbolIndex:Fe=Ce[e.getAnchorJustification(de)];for(var Je=[J.leftJustifiedTextSymbolIndex,J.centerJustifiedTextSymbolIndex,J.rightJustifiedTextSymbolIndex,J.verticalPlacedTextSymbolIndex],ft=0,Lt=Je;ft<Lt.length;ft+=1){var $t=Lt[ft];$t>=0&&(Fe>=0&&$t!==Fe?W.text.placedSymbolArray.get($t).crossTileID=0:W.text.placedSymbolArray.get($t).crossTileID=J.crossTileID)}},pr.prototype.markUsedOrientation=function(W,de,J){for(var ge=de===e.WritingMode.horizontal||de===e.WritingMode.horizontalOnly?de:0,Ce=de===e.WritingMode.vertical?de:0,Fe=[J.leftJustifiedTextSymbolIndex,J.centerJustifiedTextSymbolIndex,J.rightJustifiedTextSymbolIndex],Je=0,ft=Fe;Je<ft.length;Je+=1){var Lt=ft[Je];W.text.placedSymbolArray.get(Lt).placedOrientation=ge}J.verticalPlacedTextSymbolIndex&&(W.text.placedSymbolArray.get(J.verticalPlacedTextSymbolIndex).placedOrientation=Ce)},pr.prototype.commit=function(W){this.commitTime=W,this.zoomAtLastRecencyCheck=this.transform.zoom;var de=this.prevPlacement,J=!1;this.prevZoomAdjustment=de?de.zoomAdjustment(this.transform.zoom):0;var ge=de?de.symbolFadeChange(W):1,Ce=de?de.opacities:{},Fe=de?de.variableOffsets:{},Je=de?de.placedOrientations:{};for(var ft in this.placements){var Lt=this.placements[ft],$t=Ce[ft];$t?(this.opacities[ft]=new ha($t,ge,Lt.text,Lt.icon),J=J||Lt.text!==$t.text.placed||Lt.icon!==$t.icon.placed):(this.opacities[ft]=new ha(null,ge,Lt.text,Lt.icon,Lt.skipFade),J=J||Lt.text||Lt.icon)}for(var cr in Ce){var dr=Ce[cr];if(!this.opacities[cr]){var Pr=new ha(dr,ge,!1,!1);Pr.isHidden()||(this.opacities[cr]=Pr,J=J||dr.text.placed||dr.icon.placed)}}for(var Yr in Fe)!this.variableOffsets[Yr]&&this.opacities[Yr]&&!this.opacities[Yr].isHidden()&&(this.variableOffsets[Yr]=Fe[Yr]);for(var Xr in Je)!this.placedOrientations[Xr]&&this.opacities[Xr]&&!this.opacities[Xr].isHidden()&&(this.placedOrientations[Xr]=Je[Xr]);J?this.lastPlacementChangeTime=W:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=de?de.lastPlacementChangeTime:W)},pr.prototype.updateLayerOpacities=function(W,de){for(var J={},ge=0,Ce=de;ge<Ce.length;ge+=1){var Fe=Ce[ge],Je=Fe.getBucket(W);Je&&Fe.latestFeatureIndex&&W.id===Je.layerIds[0]&&this.updateBucketOpacities(Je,J,Fe.collisionBoxArray)}},pr.prototype.updateBucketOpacities=function(W,de,J){var ge=this;W.hasTextData()&&W.text.opacityVertexArray.clear(),W.hasIconData()&&W.icon.opacityVertexArray.clear(),W.hasIconCollisionBoxData()&&W.iconCollisionBox.collisionVertexArray.clear(),W.hasTextCollisionBoxData()&&W.textCollisionBox.collisionVertexArray.clear();var Ce=W.layers[0].layout,Fe=new ha(null,0,!1,!1,!0),Je=Ce.get("text-allow-overlap"),ft=Ce.get("icon-allow-overlap"),Lt=Ce.get("text-variable-anchor"),$t=Ce.get("text-rotation-alignment")==="map",cr=Ce.get("text-pitch-alignment")==="map",dr=Ce.get("icon-text-fit")!=="none",Pr=new ha(null,0,Je&&(ft||!W.hasIconData()||Ce.get("icon-optional")),ft&&(Je||!W.hasTextData()||Ce.get("text-optional")),!0);!W.collisionArrays&&J&&(W.hasIconCollisionBoxData()||W.hasTextCollisionBoxData())&&W.deserializeCollisionBoxes(J);for(var Yr=function(pn,Pn,On){for(var $n=0;$n<Pn/4;$n++)pn.opacityVertexArray.emplaceBack(On)},Xr=function(pn){var Pn=W.symbolInstances.get(pn),On=Pn.numHorizontalGlyphVertices,$n=Pn.numVerticalGlyphVertices,ra=Pn.crossTileID,ea=de[ra],pa=ge.opacities[ra];ea?pa=Fe:pa||(pa=Pr,ge.opacities[ra]=pa),de[ra]=!0;var Aa=On>0||$n>0,_a=Pn.numIconVertices>0,Ea=ge.placedOrientations[Pn.crossTileID],Ra=Ea===e.WritingMode.vertical,Wa=Ea===e.WritingMode.horizontal||Ea===e.WritingMode.horizontalOnly;if(Aa){var si=Nr(pa.text),zi=Ra?mn:si;Yr(W.text,On,zi);var vi=Wa?mn:si;Yr(W.text,$n,vi);var bi=pa.text.isHidden();[Pn.rightJustifiedTextSymbolIndex,Pn.centerJustifiedTextSymbolIndex,Pn.leftJustifiedTextSymbolIndex].forEach(function(Zl){Zl>=0&&(W.text.placedSymbolArray.get(Zl).hidden=bi||Ra?1:0)}),Pn.verticalPlacedTextSymbolIndex>=0&&(W.text.placedSymbolArray.get(Pn.verticalPlacedTextSymbolIndex).hidden=bi||Wa?1:0);var Ha=ge.variableOffsets[Pn.crossTileID];Ha&&ge.markUsedJustification(W,Ha.anchor,Pn,Ea);var Ni=ge.placedOrientations[Pn.crossTileID];Ni&&(ge.markUsedJustification(W,"left",Pn,Ni),ge.markUsedOrientation(W,Ni,Pn))}if(_a){var Gi=Nr(pa.icon),Zi=!(dr&&Pn.verticalPlacedIconSymbolIndex&&Ra);if(Pn.placedIconSymbolIndex>=0){var Ei=Zi?Gi:mn;Yr(W.icon,Pn.numIconVertices,Ei),W.icon.placedSymbolArray.get(Pn.placedIconSymbolIndex).hidden=pa.icon.isHidden()}if(Pn.verticalPlacedIconSymbolIndex>=0){var ro=Zi?mn:Gi;Yr(W.icon,Pn.numVerticalIconVertices,ro),W.icon.placedSymbolArray.get(Pn.verticalPlacedIconSymbolIndex).hidden=pa.icon.isHidden()}}if(W.hasIconCollisionBoxData()||W.hasTextCollisionBoxData()){var ui=W.collisionArrays[pn];if(ui){var Ci=new e.Point(0,0);if(ui.textBox||ui.verticalTextBox){var Po=!0;if(Lt){var Ko=ge.variableOffsets[ra];Ko?(Ci=hi(Ko.anchor,Ko.width,Ko.height,Ko.textOffset,Ko.textBoxScale),$t&&Ci._rotate(cr?ge.transform.angle:-ge.transform.angle)):Po=!1}ui.textBox&&an(W.textCollisionBox.collisionVertexArray,pa.text.placed,!Po||Ra,Ci.x,Ci.y),ui.verticalTextBox&&an(W.textCollisionBox.collisionVertexArray,pa.text.placed,!Po||Wa,Ci.x,Ci.y)}var Xl=Boolean(!Wa&&ui.verticalIconBox);ui.iconBox&&an(W.iconCollisionBox.collisionVertexArray,pa.icon.placed,Xl,dr?Ci.x:0,dr?Ci.y:0),ui.verticalIconBox&&an(W.iconCollisionBox.collisionVertexArray,pa.icon.placed,!Xl,dr?Ci.x:0,dr?Ci.y:0)}}},Hr=0;Hr<W.symbolInstances.length;Hr++)Xr(Hr);if(W.sortFeatures(this.transform.angle),this.retainedQueryData[W.bucketInstanceId]&&(this.retainedQueryData[W.bucketInstanceId].featureSortOrder=W.featureSortOrder),W.hasTextData()&&W.text.opacityVertexBuffer&&W.text.opacityVertexBuffer.updateData(W.text.opacityVertexArray),W.hasIconData()&&W.icon.opacityVertexBuffer&&W.icon.opacityVertexBuffer.updateData(W.icon.opacityVertexArray),W.hasIconCollisionBoxData()&&W.iconCollisionBox.collisionVertexBuffer&&W.iconCollisionBox.collisionVertexBuffer.updateData(W.iconCollisionBox.collisionVertexArray),W.hasTextCollisionBoxData()&&W.textCollisionBox.collisionVertexBuffer&&W.textCollisionBox.collisionVertexBuffer.updateData(W.textCollisionBox.collisionVertexArray),W.bucketInstanceId in this.collisionCircleArrays){var $r=this.collisionCircleArrays[W.bucketInstanceId];W.placementInvProjMatrix=$r.invProjMatrix,W.placementViewportMatrix=$r.viewportMatrix,W.collisionCircleArray=$r.circles,delete this.collisionCircleArrays[W.bucketInstanceId]}},pr.prototype.symbolFadeChange=function(W){return this.fadeDuration===0?1:(W-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},pr.prototype.zoomAdjustment=function(W){return Math.max(0,(this.transform.zoom-W)/1.5)},pr.prototype.hasTransitions=function(W){return this.stale||W-this.lastPlacementChangeTime<this.fadeDuration},pr.prototype.stillRecent=function(W,de){var J=this.zoomAtLastRecencyCheck===de?1-this.zoomAdjustment(de):1;return this.zoomAtLastRecencyCheck=de,this.commitTime+this.fadeDuration*J>W},pr.prototype.setStale=function(){this.stale=!0};function an(he,W,de,J,ge){he.emplaceBack(W?1:0,de?1:0,J||0,ge||0),he.emplaceBack(W?1:0,de?1:0,J||0,ge||0),he.emplaceBack(W?1:0,de?1:0,J||0,ge||0),he.emplaceBack(W?1:0,de?1:0,J||0,ge||0)}var dn=Math.pow(2,25),rn=Math.pow(2,24),Mn=Math.pow(2,17),_n=Math.pow(2,16),fn=Math.pow(2,9),mr=Math.pow(2,8),br=Math.pow(2,1);function Nr(he){if(he.opacity===0&&!he.placed)return 0;if(he.opacity===1&&he.placed)return 4294967295;var W=he.placed?1:0,de=Math.floor(he.opacity*127);return de*dn+W*rn+de*Mn+W*_n+de*fn+W*mr+de*br+W}var mn=0,Bn=function(W){this._sortAcrossTiles=W.layout.get("symbol-z-order")!=="viewport-y"&&W.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Bn.prototype.continuePlacement=function(W,de,J,ge,Ce){for(var Fe=this._bucketParts;this._currentTileIndex<W.length;){var Je=W[this._currentTileIndex];if(de.getBucketParts(Fe,ge,Je,this._sortAcrossTiles),this._currentTileIndex++,Ce())return!0}for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Fe.sort(function(Lt,$t){return Lt.sortKey-$t.sortKey}));this._currentPartIndex<Fe.length;){var ft=Fe[this._currentPartIndex];if(de.placeLayerBucketPart(ft,this._seenCrossTileIDs,J),this._currentPartIndex++,Ce())return!0}return!1};var aa=function(W,de,J,ge,Ce,Fe,Je){this.placement=new pr(W,Ce,Fe,Je),this._currentPlacementIndex=de.length-1,this._forceFullPlacement=J,this._showCollisionBoxes=ge,this._done=!1};aa.prototype.isDone=function(){return this._done},aa.prototype.continuePlacement=function(W,de,J){for(var ge=this,Ce=e.browser.now(),Fe=function(){var cr=e.browser.now()-Ce;return ge._forceFullPlacement?!1:cr>2};this._currentPlacementIndex>=0;){var Je=W[this._currentPlacementIndex],ft=de[Je],Lt=this.placement.collisionIndex.transform.zoom;if(ft.type==="symbol"&&(!ft.minzoom||ft.minzoom<=Lt)&&(!ft.maxzoom||ft.maxzoom>Lt)){this._inProgressLayer||(this._inProgressLayer=new Bn(ft));var $t=this._inProgressLayer.continuePlacement(J[ft.source],this.placement,this._showCollisionBoxes,ft,Fe);if($t)return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},aa.prototype.commit=function(W){return this.placement.commit(W),this.placement};var Tn=512/e.EXTENT/2,Qn=function(W,de,J){this.tileID=W,this.indexedSymbolInstances={},this.bucketInstanceId=J;for(var ge=0;ge<de.length;ge++){var Ce=de.get(ge),Fe=Ce.key;this.indexedSymbolInstances[Fe]||(this.indexedSymbolInstances[Fe]=[]),this.indexedSymbolInstances[Fe].push({crossTileID:Ce.crossTileID,coord:this.getScaledCoordinates(Ce,W)})}};Qn.prototype.getScaledCoordinates=function(W,de){var J=de.canonical.z-this.tileID.canonical.z,ge=Tn/Math.pow(2,J);return{x:Math.floor((de.canonical.x*e.EXTENT+W.anchorX)*ge),y:Math.floor((de.canonical.y*e.EXTENT+W.anchorY)*ge)}},Qn.prototype.findMatches=function(W,de,J){for(var ge=this.tileID.canonical.z<de.canonical.z?1:Math.pow(2,this.tileID.canonical.z-de.canonical.z),Ce=0;Ce<W.length;Ce++){var Fe=W.get(Ce);if(!Fe.crossTileID){var Je=this.indexedSymbolInstances[Fe.key];if(!!Je)for(var ft=this.getScaledCoordinates(Fe,de),Lt=0,$t=Je;Lt<$t.length;Lt+=1){var cr=$t[Lt];if(Math.abs(cr.coord.x-ft.x)<=ge&&Math.abs(cr.coord.y-ft.y)<=ge&&!J[cr.crossTileID]){J[cr.crossTileID]=!0,Fe.crossTileID=cr.crossTileID;break}}}}};var sa=function(){this.maxCrossTileID=0};sa.prototype.generate=function(){return++this.maxCrossTileID};var ma=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};ma.prototype.handleWrapJump=function(W){var de=Math.round((W-this.lng)/360);if(de!==0)for(var J in this.indexes){var ge=this.indexes[J],Ce={};for(var Fe in ge){var Je=ge[Fe];Je.tileID=Je.tileID.unwrapTo(Je.tileID.wrap+de),Ce[Je.tileID.key]=Je}this.indexes[J]=Ce}this.lng=W},ma.prototype.addBucket=function(W,de,J){if(this.indexes[W.overscaledZ]&&this.indexes[W.overscaledZ][W.key]){if(this.indexes[W.overscaledZ][W.key].bucketInstanceId===de.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(W.overscaledZ,this.indexes[W.overscaledZ][W.key])}for(var ge=0;ge<de.symbolInstances.length;ge++){var Ce=de.symbolInstances.get(ge);Ce.crossTileID=0}this.usedCrossTileIDs[W.overscaledZ]||(this.usedCrossTileIDs[W.overscaledZ]={});var Fe=this.usedCrossTileIDs[W.overscaledZ];for(var Je in this.indexes){var ft=this.indexes[Je];if(Number(Je)>W.overscaledZ)for(var Lt in ft){var $t=ft[Lt];$t.tileID.isChildOf(W)&&$t.findMatches(de.symbolInstances,W,Fe)}else{var cr=W.scaledTo(Number(Je)),dr=ft[cr.key];dr&&dr.findMatches(de.symbolInstances,W,Fe)}}for(var Pr=0;Pr<de.symbolInstances.length;Pr++){var Yr=de.symbolInstances.get(Pr);Yr.crossTileID||(Yr.crossTileID=J.generate(),Fe[Yr.crossTileID]=!0)}return this.indexes[W.overscaledZ]===void 0&&(this.indexes[W.overscaledZ]={}),this.indexes[W.overscaledZ][W.key]=new Qn(W,de.symbolInstances,de.bucketInstanceId),!0},ma.prototype.removeBucketCrossTileIDs=function(W,de){for(var J in de.indexedSymbolInstances)for(var ge=0,Ce=de.indexedSymbolInstances[J];ge<Ce.length;ge+=1){var Fe=Ce[ge];delete this.usedCrossTileIDs[W][Fe.crossTileID]}},ma.prototype.removeStaleBuckets=function(W){var de=!1;for(var J in this.indexes){var ge=this.indexes[J];for(var Ce in ge)W[ge[Ce].bucketInstanceId]||(this.removeBucketCrossTileIDs(J,ge[Ce]),delete ge[Ce],de=!0)}return de};var wa=function(){this.layerIndexes={},this.crossTileIDs=new sa,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};wa.prototype.addLayer=function(W,de,J){var ge=this.layerIndexes[W.id];ge===void 0&&(ge=this.layerIndexes[W.id]=new ma);var Ce=!1,Fe={};ge.handleWrapJump(J);for(var Je=0,ft=de;Je<ft.length;Je+=1){var Lt=ft[Je],$t=Lt.getBucket(W);!$t||W.id!==$t.layerIds[0]||($t.bucketInstanceId||($t.bucketInstanceId=++this.maxBucketInstanceId),ge.addBucket(Lt.tileID,$t,this.crossTileIDs)&&(Ce=!0),Fe[$t.bucketInstanceId]=!0)}return ge.removeStaleBuckets(Fe)&&(Ce=!0),Ce},wa.prototype.pruneUnusedLayers=function(W){var de={};W.forEach(function(ge){de[ge]=!0});for(var J in this.layerIndexes)de[J]||delete this.layerIndexes[J]};var ca=function(he,W){return e.emitValidationErrors(he,W&&W.filter(function(de){return de.identifier!=="source.canvas"}))},Ca=e.pick(ir,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),To=e.pick(ir,["setCenter","setZoom","setBearing","setPitch"]),Wo=Zr(),is=function(he){function W(de,J){var ge=this;J===void 0&&(J={}),he.call(this),this.map=de,this.dispatcher=new R(Wt(),this),this.imageManager=new x,this.imageManager.setEventedParent(this),this.glyphManager=new S(de._requestManager,J.localIdeographFontFamily),this.lineAtlas=new D(256,512),this.crossTileSymbolIndex=new wa,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new e.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",e.getReferrer());var Ce=this;this._rtlTextPluginCallback=W.registerForPluginStateChange(function(Fe){var Je={pluginStatus:Fe.pluginStatus,pluginURL:Fe.pluginURL};Ce.dispatcher.broadcast("syncRTLPluginState",Je,function(ft,Lt){if(e.triggerPluginCompletionEvent(ft),Lt){var $t=Lt.every(function(dr){return dr});if($t)for(var cr in Ce.sourceCaches)Ce.sourceCaches[cr].reload()}})}),this.on("data",function(Fe){if(!(Fe.dataType!=="source"||Fe.sourceDataType!=="metadata")){var Je=ge.sourceCaches[Fe.sourceId];if(!!Je){var ft=Je.getSource();if(!(!ft||!ft.vectorLayerIds))for(var Lt in ge._layers){var $t=ge._layers[Lt];$t.source===ft.id&&ge._validateLayer($t)}}}})}return he&&(W.__proto__=he),W.prototype=Object.create(he&&he.prototype),W.prototype.constructor=W,W.prototype.loadURL=function(J,ge){var Ce=this;ge===void 0&&(ge={}),this.fire(new e.Event("dataloading",{dataType:"style"}));var Fe=typeof ge.validate=="boolean"?ge.validate:!e.isMapboxURL(J);J=this.map._requestManager.normalizeStyleURL(J,ge.accessToken);var Je=this.map._requestManager.transformRequest(J,e.ResourceType.Style);this._request=e.getJSON(Je,function(ft,Lt){Ce._request=null,ft?Ce.fire(new e.ErrorEvent(ft)):Lt&&Ce._load(Lt,Fe)})},W.prototype.loadJSON=function(J,ge){var Ce=this;ge===void 0&&(ge={}),this.fire(new e.Event("dataloading",{dataType:"style"})),this._request=e.browser.frame(function(){Ce._request=null,Ce._load(J,ge.validate!==!1)})},W.prototype.loadEmpty=function(){this.fire(new e.Event("dataloading",{dataType:"style"})),this._load(Wo,!1)},W.prototype._load=function(J,ge){if(!(ge&&ca(this,e.validateStyle(J)))){this._loaded=!0,this.stylesheet=J;for(var Ce in J.sources)this.addSource(Ce,J.sources[Ce],{validate:!1});J.sprite?this._loadSprite(J.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(J.glyphs);var Fe=Sr(this.stylesheet.layers);this._order=Fe.map(function($t){return $t.id}),this._layers={},this._serializedLayers={};for(var Je=0,ft=Fe;Je<ft.length;Je+=1){var Lt=ft[Je];Lt=e.createStyleLayer(Lt),Lt.setEventedParent(this,{layer:{id:Lt.id}}),this._layers[Lt.id]=Lt,this._serializedLayers[Lt.id]=Lt.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new I(this.stylesheet.light),this.fire(new e.Event("data",{dataType:"style"})),this.fire(new e.Event("style.load"))}},W.prototype._loadSprite=function(J){var ge=this;this._spriteRequest=f(J,this.map._requestManager,function(Ce,Fe){if(ge._spriteRequest=null,Ce)ge.fire(new e.ErrorEvent(Ce));else if(Fe)for(var Je in Fe)ge.imageManager.addImage(Je,Fe[Je]);ge.imageManager.setLoaded(!0),ge._availableImages=ge.imageManager.listImages(),ge.dispatcher.broadcast("setImages",ge._availableImages),ge.fire(new e.Event("data",{dataType:"style"}))})},W.prototype._validateLayer=function(J){var ge=this.sourceCaches[J.source];if(!!ge){var Ce=J.sourceLayer;if(!!Ce){var Fe=ge.getSource();(Fe.type==="geojson"||Fe.vectorLayerIds&&Fe.vectorLayerIds.indexOf(Ce)===-1)&&this.fire(new e.ErrorEvent(new Error('Source layer "'+Ce+'" does not exist on source "'+Fe.id+'" as specified by style layer "'+J.id+'"')))}}},W.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var J in this.sourceCaches)if(!this.sourceCaches[J].loaded())return!1;return!!this.imageManager.isLoaded()},W.prototype._serializeLayers=function(J){for(var ge=[],Ce=0,Fe=J;Ce<Fe.length;Ce+=1){var Je=Fe[Ce],ft=this._layers[Je];ft.type!=="custom"&&ge.push(ft.serialize())}return ge},W.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var J in this.sourceCaches)if(this.sourceCaches[J].hasTransition())return!0;for(var ge in this._layers)if(this._layers[ge].hasTransition())return!0;return!1},W.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},W.prototype.update=function(J){if(!!this._loaded){var ge=this._changed;if(this._changed){var Ce=Object.keys(this._updatedLayers),Fe=Object.keys(this._removedLayers);(Ce.length||Fe.length)&&this._updateWorkerLayers(Ce,Fe);for(var Je in this._updatedSources){var ft=this._updatedSources[Je];ft==="reload"?this._reloadSource(Je):ft==="clear"&&this._clearSource(Je)}this._updateTilesForChangedImages();for(var Lt in this._updatedPaintProps)this._layers[Lt].updateTransitions(J);this.light.updateTransitions(J),this._resetUpdates()}for(var $t in this.sourceCaches)this.sourceCaches[$t].used=!1;for(var cr=0,dr=this._order;cr<dr.length;cr+=1){var Pr=dr[cr],Yr=this._layers[Pr];Yr.recalculate(J,this._availableImages),!Yr.isHidden(J.zoom)&&Yr.source&&(this.sourceCaches[Yr.source].used=!0)}this.light.recalculate(J),this.z=J.zoom,ge&&this.fire(new e.Event("data",{dataType:"style"}))}},W.prototype._updateTilesForChangedImages=function(){var J=Object.keys(this._changedImages);if(J.length){for(var ge in this.sourceCaches)this.sourceCaches[ge].reloadTilesForDependencies(["icons","patterns"],J);this._changedImages={}}},W.prototype._updateWorkerLayers=function(J,ge){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(J),removedIds:ge})},W.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},W.prototype.setState=function(J){var ge=this;if(this._checkLoaded(),ca(this,e.validateStyle(J)))return!1;J=e.clone$1(J),J.layers=Sr(J.layers);var Ce=Ur(this.serialize(),J).filter(function(Je){return!(Je.command in To)});if(Ce.length===0)return!1;var Fe=Ce.filter(function(Je){return!(Je.command in Ca)});if(Fe.length>0)throw new Error("Unimplemented: "+Fe.map(function(Je){return Je.command}).join(", ")+".");return Ce.forEach(function(Je){Je.command!=="setTransition"&&ge[Je.command].apply(ge,Je.args)}),this.stylesheet=J,!0},W.prototype.addImage=function(J,ge){if(this.getImage(J))return this.fire(new e.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(J,ge),this._availableImages=this.imageManager.listImages(),this._changedImages[J]=!0,this._changed=!0,this.fire(new e.Event("data",{dataType:"style"}))},W.prototype.updateImage=function(J,ge){this.imageManager.updateImage(J,ge)},W.prototype.getImage=function(J){return this.imageManager.getImage(J)},W.prototype.removeImage=function(J){if(!this.getImage(J))return this.fire(new e.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(J),this._availableImages=this.imageManager.listImages(),this._changedImages[J]=!0,this._changed=!0,this.fire(new e.Event("data",{dataType:"style"}))},W.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},W.prototype.addSource=function(J,ge,Ce){var Fe=this;if(Ce===void 0&&(Ce={}),this._checkLoaded(),this.sourceCaches[J]!==void 0)throw new Error("There is already a source with this ID");if(!ge.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(ge).join(", ")+".");var Je=["vector","raster","geojson","video","image"],ft=Je.indexOf(ge.type)>=0;if(!(ft&&this._validate(e.validateStyle.source,"sources."+J,ge,null,Ce))){this.map&&this.map._collectResourceTiming&&(ge.collectResourceTiming=!0);var Lt=this.sourceCaches[J]=new Pe(J,ge,this.dispatcher);Lt.style=this,Lt.setEventedParent(this,function(){return{isSourceLoaded:Fe.loaded(),source:Lt.serialize(),sourceId:J}}),Lt.onAdd(this.map),this._changed=!0}},W.prototype.removeSource=function(J){if(this._checkLoaded(),this.sourceCaches[J]===void 0)throw new Error("There is no source with this ID");for(var ge in this._layers)if(this._layers[ge].source===J)return this.fire(new e.ErrorEvent(new Error('Source "'+J+'" cannot be removed while layer "'+ge+'" is using it.')));var Ce=this.sourceCaches[J];delete this.sourceCaches[J],delete this._updatedSources[J],Ce.fire(new e.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:J})),Ce.setEventedParent(null),Ce.clearTiles(),Ce.onRemove&&Ce.onRemove(this.map),this._changed=!0},W.prototype.setGeoJSONSourceData=function(J,ge){this._checkLoaded();var Ce=this.sourceCaches[J].getSource();Ce.setData(ge),this._changed=!0},W.prototype.getSource=function(J){return this.sourceCaches[J]&&this.sourceCaches[J].getSource()},W.prototype.addLayer=function(J,ge,Ce){Ce===void 0&&(Ce={}),this._checkLoaded();var Fe=J.id;if(this.getLayer(Fe)){this.fire(new e.ErrorEvent(new Error('Layer with id "'+Fe+'" already exists on this map')));return}var Je;if(J.type==="custom"){if(ca(this,e.validateCustomStyleLayer(J)))return;Je=e.createStyleLayer(J)}else{if(typeof J.source=="object"&&(this.addSource(Fe,J.source),J=e.clone$1(J),J=e.extend(J,{source:Fe})),this._validate(e.validateStyle.layer,"layers."+Fe,J,{arrayIndex:-1},Ce))return;Je=e.createStyleLayer(J),this._validateLayer(Je),Je.setEventedParent(this,{layer:{id:Fe}}),this._serializedLayers[Je.id]=Je.serialize()}var ft=ge?this._order.indexOf(ge):this._order.length;if(ge&&ft===-1){this.fire(new e.ErrorEvent(new Error('Layer with id "'+ge+'" does not exist on this map.')));return}if(this._order.splice(ft,0,Fe),this._layerOrderChanged=!0,this._layers[Fe]=Je,this._removedLayers[Fe]&&Je.source&&Je.type!=="custom"){var Lt=this._removedLayers[Fe];delete this._removedLayers[Fe],Lt.type!==Je.type?this._updatedSources[Je.source]="clear":(this._updatedSources[Je.source]="reload",this.sourceCaches[Je.source].pause())}this._updateLayer(Je),Je.onAdd&&Je.onAdd(this.map)},W.prototype.moveLayer=function(J,ge){this._checkLoaded(),this._changed=!0;var Ce=this._layers[J];if(!Ce){this.fire(new e.ErrorEvent(new Error("The layer '"+J+"' does not exist in the map's style and cannot be moved.")));return}if(J!==ge){var Fe=this._order.indexOf(J);this._order.splice(Fe,1);var Je=ge?this._order.indexOf(ge):this._order.length;if(ge&&Je===-1){this.fire(new e.ErrorEvent(new Error('Layer with id "'+ge+'" does not exist on this map.')));return}this._order.splice(Je,0,J),this._layerOrderChanged=!0}},W.prototype.removeLayer=function(J){this._checkLoaded();var ge=this._layers[J];if(!ge){this.fire(new e.ErrorEvent(new Error("The layer '"+J+"' does not exist in the map's style and cannot be removed.")));return}ge.setEventedParent(null);var Ce=this._order.indexOf(J);this._order.splice(Ce,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[J]=ge,delete this._layers[J],delete this._serializedLayers[J],delete this._updatedLayers[J],delete this._updatedPaintProps[J],ge.onRemove&&ge.onRemove(this.map)},W.prototype.getLayer=function(J){return this._layers[J]},W.prototype.hasLayer=function(J){return J in this._layers},W.prototype.setLayerZoomRange=function(J,ge,Ce){this._checkLoaded();var Fe=this.getLayer(J);if(!Fe){this.fire(new e.ErrorEvent(new Error("The layer '"+J+"' does not exist in the map's style and cannot have zoom extent.")));return}Fe.minzoom===ge&&Fe.maxzoom===Ce||(ge!=null&&(Fe.minzoom=ge),Ce!=null&&(Fe.maxzoom=Ce),this._updateLayer(Fe))},W.prototype.setFilter=function(J,ge,Ce){Ce===void 0&&(Ce={}),this._checkLoaded();var Fe=this.getLayer(J);if(!Fe){this.fire(new e.ErrorEvent(new Error("The layer '"+J+"' does not exist in the map's style and cannot be filtered.")));return}if(!e.deepEqual(Fe.filter,ge)){if(ge==null){Fe.filter=void 0,this._updateLayer(Fe);return}this._validate(e.validateStyle.filter,"layers."+Fe.id+".filter",ge,null,Ce)||(Fe.filter=e.clone$1(ge),this._updateLayer(Fe))}},W.prototype.getFilter=function(J){return e.clone$1(this.getLayer(J).filter)},W.prototype.setLayoutProperty=function(J,ge,Ce,Fe){Fe===void 0&&(Fe={}),this._checkLoaded();var Je=this.getLayer(J);if(!Je){this.fire(new e.ErrorEvent(new Error("The layer '"+J+"' does not exist in the map's style and cannot be styled.")));return}e.deepEqual(Je.getLayoutProperty(ge),Ce)||(Je.setLayoutProperty(ge,Ce,Fe),this._updateLayer(Je))},W.prototype.getLayoutProperty=function(J,ge){var Ce=this.getLayer(J);if(!Ce){this.fire(new e.ErrorEvent(new Error("The layer '"+J+"' does not exist in the map's style.")));return}return Ce.getLayoutProperty(ge)},W.prototype.setPaintProperty=function(J,ge,Ce,Fe){Fe===void 0&&(Fe={}),this._checkLoaded();var Je=this.getLayer(J);if(!Je){this.fire(new e.ErrorEvent(new Error("The layer '"+J+"' does not exist in the map's style and cannot be styled.")));return}if(!e.deepEqual(Je.getPaintProperty(ge),Ce)){var ft=Je.setPaintProperty(ge,Ce,Fe);ft&&this._updateLayer(Je),this._changed=!0,this._updatedPaintProps[J]=!0}},W.prototype.getPaintProperty=function(J,ge){return this.getLayer(J).getPaintProperty(ge)},W.prototype.setFeatureState=function(J,ge){this._checkLoaded();var Ce=J.source,Fe=J.sourceLayer,Je=this.sourceCaches[Ce];if(Je===void 0){this.fire(new e.ErrorEvent(new Error("The source '"+Ce+"' does not exist in the map's style.")));return}var ft=Je.getSource().type;if(ft==="geojson"&&Fe){this.fire(new e.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));return}if(ft==="vector"&&!Fe){this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}J.id===void 0&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),Je.setFeatureState(Fe,J.id,ge)},W.prototype.removeFeatureState=function(J,ge){this._checkLoaded();var Ce=J.source,Fe=this.sourceCaches[Ce];if(Fe===void 0){this.fire(new e.ErrorEvent(new Error("The source '"+Ce+"' does not exist in the map's style.")));return}var Je=Fe.getSource().type,ft=Je==="vector"?J.sourceLayer:void 0;if(Je==="vector"&&!ft){this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}if(ge&&typeof J.id!="string"&&typeof J.id!="number"){this.fire(new e.ErrorEvent(new Error("A feature id is requred to remove its specific state property.")));return}Fe.removeFeatureState(ft,J.id,ge)},W.prototype.getFeatureState=function(J){this._checkLoaded();var ge=J.source,Ce=J.sourceLayer,Fe=this.sourceCaches[ge];if(Fe===void 0){this.fire(new e.ErrorEvent(new Error("The source '"+ge+"' does not exist in the map's style.")));return}var Je=Fe.getSource().type;if(Je==="vector"&&!Ce){this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}return J.id===void 0&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),Fe.getFeatureState(Ce,J.id)},W.prototype.getTransition=function(){return e.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},W.prototype.serialize=function(){return e.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:e.mapObject(this.sourceCaches,function(J){return J.serialize()}),layers:this._serializeLayers(this._order)},function(J){return J!==void 0})},W.prototype._updateLayer=function(J){this._updatedLayers[J.id]=!0,J.source&&!this._updatedSources[J.source]&&this.sourceCaches[J.source].getSource().type!=="raster"&&(this._updatedSources[J.source]="reload",this.sourceCaches[J.source].pause()),this._changed=!0},W.prototype._flattenAndSortRenderedFeatures=function(J){for(var ge=this,Ce=function(Wa){return ge._layers[Wa].type==="fill-extrusion"},Fe={},Je=[],ft=this._order.length-1;ft>=0;ft--){var Lt=this._order[ft];if(Ce(Lt)){Fe[Lt]=ft;for(var $t=0,cr=J;$t<cr.length;$t+=1){var dr=cr[$t],Pr=dr[Lt];if(Pr)for(var Yr=0,Xr=Pr;Yr<Xr.length;Yr+=1){var Hr=Xr[Yr];Je.push(Hr)}}}}Je.sort(function(Wa,si){return si.intersectionZ-Wa.intersectionZ});for(var $r=[],pn=this._order.length-1;pn>=0;pn--){var Pn=this._order[pn];if(Ce(Pn))for(var On=Je.length-1;On>=0;On--){var $n=Je[On].feature;if(Fe[$n.layer.id]<pn)break;$r.push($n),Je.pop()}else for(var ra=0,ea=J;ra<ea.length;ra+=1){var pa=ea[ra],Aa=pa[Pn];if(Aa)for(var _a=0,Ea=Aa;_a<Ea.length;_a+=1){var Ra=Ea[_a];$r.push(Ra.feature)}}}return $r},W.prototype.queryRenderedFeatures=function(J,ge,Ce){ge&&ge.filter&&this._validate(e.validateStyle.filter,"queryRenderedFeatures.filter",ge.filter,null,ge);var Fe={};if(ge&&ge.layers){if(!Array.isArray(ge.layers))return this.fire(new e.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var Je=0,ft=ge.layers;Je<ft.length;Je+=1){var Lt=ft[Je],$t=this._layers[Lt];if(!$t)return this.fire(new e.ErrorEvent(new Error("The layer '"+Lt+"' does not exist in the map's style and cannot be queried for features."))),[];Fe[$t.source]=!0}}var cr=[];ge.availableImages=this._availableImages;for(var dr in this.sourceCaches)ge.layers&&!Fe[dr]||cr.push(ie(this.sourceCaches[dr],this._layers,this._serializedLayers,J,ge,Ce));return this.placement&&cr.push(oe(this._layers,this._serializedLayers,this.sourceCaches,J,ge,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(cr)},W.prototype.querySourceFeatures=function(J,ge){ge&&ge.filter&&this._validate(e.validateStyle.filter,"querySourceFeatures.filter",ge.filter,null,ge);var Ce=this.sourceCaches[J];return Ce?ae(Ce,ge):[]},W.prototype.addSourceType=function(J,ge,Ce){if(W.getSourceType(J))return Ce(new Error('A source type called "'+J+'" already exists.'));if(W.setSourceType(J,ge),!ge.workerSourceURL)return Ce(null,null);this.dispatcher.broadcast("loadWorkerSource",{name:J,url:ge.workerSourceURL},Ce)},W.prototype.getLight=function(){return this.light.getLight()},W.prototype.setLight=function(J,ge){ge===void 0&&(ge={}),this._checkLoaded();var Ce=this.light.getLight(),Fe=!1;for(var Je in J)if(!e.deepEqual(J[Je],Ce[Je])){Fe=!0;break}if(!!Fe){var ft={now:e.browser.now(),transition:e.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(J,ge),this.light.updateTransitions(ft)}},W.prototype._validate=function(J,ge,Ce,Fe,Je){return Je===void 0&&(Je={}),Je&&Je.validate===!1?!1:ca(this,J.call(e.validateStyle,e.extend({key:ge,style:this.serialize(),value:Ce,styleSpec:e.styleSpec},Fe)))},W.prototype._remove=function(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),e.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(var J in this._layers){var ge=this._layers[J];ge.setEventedParent(null)}for(var Ce in this.sourceCaches)this.sourceCaches[Ce].clearTiles(),this.sourceCaches[Ce].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},W.prototype._clearSource=function(J){this.sourceCaches[J].clearTiles()},W.prototype._reloadSource=function(J){this.sourceCaches[J].resume(),this.sourceCaches[J].reload()},W.prototype._updateSources=function(J){for(var ge in this.sourceCaches)this.sourceCaches[ge].update(J)},W.prototype._generateCollisionBoxes=function(){for(var J in this.sourceCaches)this._reloadSource(J)},W.prototype._updatePlacement=function(J,ge,Ce,Fe,Je){Je===void 0&&(Je=!1);for(var ft=!1,Lt=!1,$t={},cr=0,dr=this._order;cr<dr.length;cr+=1){var Pr=dr[cr],Yr=this._layers[Pr];if(Yr.type==="symbol"){if(!$t[Yr.source]){var Xr=this.sourceCaches[Yr.source];$t[Yr.source]=Xr.getRenderableIds(!0).map(function(ra){return Xr.getTileByID(ra)}).sort(function(ra,ea){return ea.tileID.overscaledZ-ra.tileID.overscaledZ||(ra.tileID.isLessThan(ea.tileID)?-1:1)})}var Hr=this.crossTileSymbolIndex.addLayer(Yr,$t[Yr.source],J.center.lng);ft=ft||Hr}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),Je=Je||this._layerOrderChanged||Ce===0,(Je||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.browser.now(),J.zoom))&&(this.pauseablePlacement=new aa(J,this._order,Je,ge,Ce,Fe,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,$t),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(e.browser.now()),Lt=!0),ft&&this.pauseablePlacement.placement.setStale()),Lt||ft)for(var $r=0,pn=this._order;$r<pn.length;$r+=1){var Pn=pn[$r],On=this._layers[Pn];On.type==="symbol"&&this.placement.updateLayerOpacities(On,$t[On.source])}var $n=!this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.browser.now());return $n},W.prototype._releaseSymbolFadeTiles=function(){for(var J in this.sourceCaches)this.sourceCaches[J].releaseSymbolFadeTiles()},W.prototype.getImages=function(J,ge,Ce){this.imageManager.getImages(ge.icons,Ce),this._updateTilesForChangedImages();var Fe=this.sourceCaches[ge.source];Fe&&Fe.setDependencies(ge.tileID.key,ge.type,ge.icons)},W.prototype.getGlyphs=function(J,ge,Ce){this.glyphManager.getGlyphs(ge.stacks,Ce)},W.prototype.getResource=function(J,ge,Ce){return e.makeRequest(ge,Ce)},W}(e.Evented);is.getSourceType=q,is.setSourceType=re,is.registerForPluginStateChange=e.registerForPluginStateChange;var _l=e.createLayout([{name:"a_pos",type:"Int16",components:2}]),Fl=`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,wu=`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`,xi=`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,nl="attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}",Xs=`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,ji="uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}",Io=`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,zl=`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`,Ms="void main() {gl_FragColor=vec4(1.0);}",Ui="attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}",wl=`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,ao=`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`,Yi=`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,vo="uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}",io="varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}",vs="attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}",al="varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",Hu="attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}",os="uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",Gu="attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}",Zs=`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Fo=`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`,dc=`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,js=`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`,Is=`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,tu=`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`,gc=`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,yc=`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`,il=`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,ru=`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`,Fs=`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Tu=`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`,Tl=`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Au="uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}",Yu=`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,nu="uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}",mc=`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,ol=`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`,Mu=`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,au=`
#define MAX_LINE_DISTANCE 32767.0
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`,Ss=`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Nl=`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`,Su=`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Wu=`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`,Xu=`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,iu="uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}",xc=`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Zu=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`,ss=`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Al=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`,Ml=`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Eu=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`,Es=Vi(Fl,wu),zo=Vi(xi,nl),ou=Vi(Xs,ji),zs=Vi(Io,zl),Ns=Vi(Ms,Ui),yo=Vi(wl,ao),Ol=Vi(Yi,vo),Bl=Vi(io,vs),sl=Vi(al,Hu),Cs=Vi(os,Gu),Ul=Vi(Zs,Fo),Sl=Vi(dc,js),su=Vi(Is,tu),Vl=Vi(gc,yc),ll=Vi(il,ru),bc=Vi(Fs,Tu),ps=Vi(Tl,Au),Vc=Vi(Yu,nu),Cu=Vi(mc,ol),El=Vi(Mu,au),Hl=Vi(Ss,Nl),ul=Vi(Su,Wu),Gl=Vi(Xu,iu),ju=Vi(xc,Zu),Ku=Vi(ss,Al),Hc=Vi(Ml,Eu);function Vi(he,W){var de=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,J={};return he=he.replace(de,function(ge,Ce,Fe,Je,ft){return J[ft]=!0,Ce==="define"?`
#ifndef HAS_UNIFORM_u_`+ft+`
varying `+Fe+" "+Je+" "+ft+`;
#else
uniform `+Fe+" "+Je+" u_"+ft+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+ft+`
    `+Fe+" "+Je+" "+ft+" = u_"+ft+`;
#endif
`}),W=W.replace(de,function(ge,Ce,Fe,Je,ft){var Lt=Je==="float"?"vec2":"vec4",$t=ft.match(/color/)?"color":Lt;return J[ft]?Ce==="define"?`
#ifndef HAS_UNIFORM_u_`+ft+`
uniform lowp float u_`+ft+`_t;
attribute `+Fe+" "+Lt+" a_"+ft+`;
varying `+Fe+" "+Je+" "+ft+`;
#else
uniform `+Fe+" "+Je+" u_"+ft+`;
#endif
`:$t==="vec4"?`
#ifndef HAS_UNIFORM_u_`+ft+`
    `+ft+" = a_"+ft+`;
#else
    `+Fe+" "+Je+" "+ft+" = u_"+ft+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+ft+`
    `+ft+" = unpack_mix_"+$t+"(a_"+ft+", u_"+ft+`_t);
#else
    `+Fe+" "+Je+" "+ft+" = u_"+ft+`;
#endif
`:Ce==="define"?`
#ifndef HAS_UNIFORM_u_`+ft+`
uniform lowp float u_`+ft+`_t;
attribute `+Fe+" "+Lt+" a_"+ft+`;
#else
uniform `+Fe+" "+Je+" u_"+ft+`;
#endif
`:$t==="vec4"?`
#ifndef HAS_UNIFORM_u_`+ft+`
    `+Fe+" "+Je+" "+ft+" = a_"+ft+`;
#else
    `+Fe+" "+Je+" "+ft+" = u_"+ft+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+ft+`
    `+Fe+" "+Je+" "+ft+" = unpack_mix_"+$t+"(a_"+ft+", u_"+ft+`_t);
#else
    `+Fe+" "+Je+" "+ft+" = u_"+ft+`;
#endif
`}),{fragmentSource:he,vertexSource:W}}var Cl=Object.freeze({__proto__:null,prelude:Es,background:zo,backgroundPattern:ou,circle:zs,clippingMask:Ns,heatmap:yo,heatmapTexture:Ol,collisionBox:Bl,collisionCircle:sl,debug:Cs,fill:Ul,fillOutline:Sl,fillOutlinePattern:su,fillPattern:Vl,fillExtrusion:ll,fillExtrusionPattern:bc,hillshadePrepare:ps,hillshade:Vc,line:Cu,lineGradient:El,linePattern:Hl,lineSDF:ul,raster:Gl,symbolIcon:ju,symbolSDF:Ku,symbolTextAndIcon:Hc}),cl=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};cl.prototype.bind=function(W,de,J,ge,Ce,Fe,Je,ft){this.context=W;for(var Lt=this.boundPaintVertexBuffers.length!==ge.length,$t=0;!Lt&&$t<ge.length;$t++)this.boundPaintVertexBuffers[$t]!==ge[$t]&&(Lt=!0);var cr=!this.vao||this.boundProgram!==de||this.boundLayoutVertexBuffer!==J||Lt||this.boundIndexBuffer!==Ce||this.boundVertexOffset!==Fe||this.boundDynamicVertexBuffer!==Je||this.boundDynamicVertexBuffer2!==ft;!W.extVertexArrayObject||cr?this.freshBind(de,J,ge,Ce,Fe,Je,ft):(W.bindVertexArrayOES.set(this.vao),Je&&Je.bind(),Ce&&Ce.dynamicDraw&&Ce.bind(),ft&&ft.bind())},cl.prototype.freshBind=function(W,de,J,ge,Ce,Fe,Je){var ft,Lt=W.numAttributes,$t=this.context,cr=$t.gl;if($t.extVertexArrayObject)this.vao&&this.destroy(),this.vao=$t.extVertexArrayObject.createVertexArrayOES(),$t.bindVertexArrayOES.set(this.vao),ft=0,this.boundProgram=W,this.boundLayoutVertexBuffer=de,this.boundPaintVertexBuffers=J,this.boundIndexBuffer=ge,this.boundVertexOffset=Ce,this.boundDynamicVertexBuffer=Fe,this.boundDynamicVertexBuffer2=Je;else{ft=$t.currentNumAttributes||0;for(var dr=Lt;dr<ft;dr++)cr.disableVertexAttribArray(dr)}de.enableAttributes(cr,W);for(var Pr=0,Yr=J;Pr<Yr.length;Pr+=1){var Xr=Yr[Pr];Xr.enableAttributes(cr,W)}Fe&&Fe.enableAttributes(cr,W),Je&&Je.enableAttributes(cr,W),de.bind(),de.setVertexAttribPointers(cr,W,Ce);for(var Hr=0,$r=J;Hr<$r.length;Hr+=1){var pn=$r[Hr];pn.bind(),pn.setVertexAttribPointers(cr,W,Ce)}Fe&&(Fe.bind(),Fe.setVertexAttribPointers(cr,W,Ce)),ge&&ge.bind(),Je&&(Je.bind(),Je.setVertexAttribPointers(cr,W,Ce)),$t.currentNumAttributes=Lt},cl.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var ls=function(W,de,J,ge,Ce){var Fe=W.gl;this.program=Fe.createProgram();var Je=J?J.defines():[];Ce&&Je.push("#define OVERDRAW_INSPECTOR;");var ft=Je.concat(Es.fragmentSource,de.fragmentSource).join(`
`),Lt=Je.concat(Es.vertexSource,de.vertexSource).join(`
`),$t=Fe.createShader(Fe.FRAGMENT_SHADER);if(Fe.isContextLost()){this.failedToCreate=!0;return}Fe.shaderSource($t,ft),Fe.compileShader($t),Fe.attachShader(this.program,$t);var cr=Fe.createShader(Fe.VERTEX_SHADER);if(Fe.isContextLost()){this.failedToCreate=!0;return}Fe.shaderSource(cr,Lt),Fe.compileShader(cr),Fe.attachShader(this.program,cr);for(var dr=J?J.layoutAttributes:[],Pr=0;Pr<dr.length;Pr++)Fe.bindAttribLocation(this.program,Pr,dr[Pr].name);Fe.linkProgram(this.program),Fe.deleteShader(cr),Fe.deleteShader($t),this.numAttributes=Fe.getProgramParameter(this.program,Fe.ACTIVE_ATTRIBUTES),this.attributes={};for(var Yr={},Xr=0;Xr<this.numAttributes;Xr++){var Hr=Fe.getActiveAttrib(this.program,Xr);Hr&&(this.attributes[Hr.name]=Fe.getAttribLocation(this.program,Hr.name))}for(var $r=Fe.getProgramParameter(this.program,Fe.ACTIVE_UNIFORMS),pn=0;pn<$r;pn++){var Pn=Fe.getActiveUniform(this.program,pn);Pn&&(Yr[Pn.name]=Fe.getUniformLocation(this.program,Pn.name))}this.fixedUniforms=ge(W,Yr),this.binderUniforms=J?J.getUniforms(W,Yr):[]};ls.prototype.draw=function(W,de,J,ge,Ce,Fe,Je,ft,Lt,$t,cr,dr,Pr,Yr,Xr,Hr){var $r,pn=W.gl;if(!this.failedToCreate){W.program.set(this.program),W.setDepthMode(J),W.setStencilMode(ge),W.setColorMode(Ce),W.setCullFace(Fe);for(var Pn in this.fixedUniforms)this.fixedUniforms[Pn].set(Je[Pn]);Yr&&Yr.setUniforms(W,this.binderUniforms,dr,{zoom:Pr});for(var On=($r={},$r[pn.LINES]=2,$r[pn.TRIANGLES]=3,$r[pn.LINE_STRIP]=1,$r)[de],$n=0,ra=cr.get();$n<ra.length;$n+=1){var ea=ra[$n],pa=ea.vaos||(ea.vaos={}),Aa=pa[ft]||(pa[ft]=new cl);Aa.bind(W,this,Lt,Yr?Yr.getPaintVertexBuffers():[],$t,ea.vertexOffset,Xr,Hr),pn.drawElements(de,ea.primitiveLength*On,pn.UNSIGNED_SHORT,ea.primitiveOffset*On*2)}}};function ds(he,W,de){var J=1/Sn(de,1,W.transform.tileZoom),ge=Math.pow(2,de.tileID.overscaledZ),Ce=de.tileSize*Math.pow(2,W.transform.tileZoom)/ge,Fe=Ce*(de.tileID.canonical.x+de.tileID.wrap*ge),Je=Ce*de.tileID.canonical.y;return{u_image:0,u_texsize:de.imageAtlasTexture.size,u_scale:[J,he.fromScale,he.toScale],u_fade:he.t,u_pixel_coord_upper:[Fe>>16,Je>>16],u_pixel_coord_lower:[Fe&65535,Je&65535]}}function Yl(he,W,de,J){var ge=de.imageManager.getPattern(he.from.toString()),Ce=de.imageManager.getPattern(he.to.toString()),Fe=de.imageManager.getPixelSize(),Je=Fe.width,ft=Fe.height,Lt=Math.pow(2,J.tileID.overscaledZ),$t=J.tileSize*Math.pow(2,de.transform.tileZoom)/Lt,cr=$t*(J.tileID.canonical.x+J.tileID.wrap*Lt),dr=$t*J.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:ge.tl,u_pattern_br_a:ge.br,u_pattern_tl_b:Ce.tl,u_pattern_br_b:Ce.br,u_texsize:[Je,ft],u_mix:W.t,u_pattern_size_a:ge.displaySize,u_pattern_size_b:Ce.displaySize,u_scale_a:W.fromScale,u_scale_b:W.toScale,u_tile_units_to_pixels:1/Sn(J,1,de.transform.tileZoom),u_pixel_coord_upper:[cr>>16,dr>>16],u_pixel_coord_lower:[cr&65535,dr&65535]}}var mo=function(he,W){return{u_matrix:new e.UniformMatrix4f(he,W.u_matrix),u_lightpos:new e.Uniform3f(he,W.u_lightpos),u_lightintensity:new e.Uniform1f(he,W.u_lightintensity),u_lightcolor:new e.Uniform3f(he,W.u_lightcolor),u_vertical_gradient:new e.Uniform1f(he,W.u_vertical_gradient),u_opacity:new e.Uniform1f(he,W.u_opacity)}},Ju=function(he,W){return{u_matrix:new e.UniformMatrix4f(he,W.u_matrix),u_lightpos:new e.Uniform3f(he,W.u_lightpos),u_lightintensity:new e.Uniform1f(he,W.u_lightintensity),u_lightcolor:new e.Uniform3f(he,W.u_lightcolor),u_vertical_gradient:new e.Uniform1f(he,W.u_vertical_gradient),u_height_factor:new e.Uniform1f(he,W.u_height_factor),u_image:new e.Uniform1i(he,W.u_image),u_texsize:new e.Uniform2f(he,W.u_texsize),u_pixel_coord_upper:new e.Uniform2f(he,W.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(he,W.u_pixel_coord_lower),u_scale:new e.Uniform3f(he,W.u_scale),u_fade:new e.Uniform1f(he,W.u_fade),u_opacity:new e.Uniform1f(he,W.u_opacity)}},gs=function(he,W,de,J){var ge=W.style.light,Ce=ge.properties.get("position"),Fe=[Ce.x,Ce.y,Ce.z],Je=e.create$1();ge.properties.get("anchor")==="viewport"&&e.fromRotation(Je,-W.transform.angle),e.transformMat3(Fe,Fe,Je);var ft=ge.properties.get("color");return{u_matrix:he,u_lightpos:Fe,u_lightintensity:ge.properties.get("intensity"),u_lightcolor:[ft.r,ft.g,ft.b],u_vertical_gradient:+de,u_opacity:J}},Ks=function(he,W,de,J,ge,Ce,Fe){return e.extend(gs(he,W,de,J),ds(Ce,W,Fe),{u_height_factor:-Math.pow(2,ge.overscaledZ)/Fe.tileSize/8})},Js=function(he,W){return{u_matrix:new e.UniformMatrix4f(he,W.u_matrix)}},Os=function(he,W){return{u_matrix:new e.UniformMatrix4f(he,W.u_matrix),u_image:new e.Uniform1i(he,W.u_image),u_texsize:new e.Uniform2f(he,W.u_texsize),u_pixel_coord_upper:new e.Uniform2f(he,W.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(he,W.u_pixel_coord_lower),u_scale:new e.Uniform3f(he,W.u_scale),u_fade:new e.Uniform1f(he,W.u_fade)}},ys=function(he,W){return{u_matrix:new e.UniformMatrix4f(he,W.u_matrix),u_world:new e.Uniform2f(he,W.u_world)}},Ki=function(he,W){return{u_matrix:new e.UniformMatrix4f(he,W.u_matrix),u_world:new e.Uniform2f(he,W.u_world),u_image:new e.Uniform1i(he,W.u_image),u_texsize:new e.Uniform2f(he,W.u_texsize),u_pixel_coord_upper:new e.Uniform2f(he,W.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(he,W.u_pixel_coord_lower),u_scale:new e.Uniform3f(he,W.u_scale),u_fade:new e.Uniform1f(he,W.u_fade)}},No=function(he){return{u_matrix:he}},ms=function(he,W,de,J){return e.extend(No(he),ds(de,W,J))},Qu=function(he,W){return{u_matrix:he,u_world:W}},lu=function(he,W,de,J,ge){return e.extend(ms(he,W,de,J),{u_world:ge})},$u=function(he,W){return{u_camera_to_center_distance:new e.Uniform1f(he,W.u_camera_to_center_distance),u_scale_with_map:new e.Uniform1i(he,W.u_scale_with_map),u_pitch_with_map:new e.Uniform1i(he,W.u_pitch_with_map),u_extrude_scale:new e.Uniform2f(he,W.u_extrude_scale),u_device_pixel_ratio:new e.Uniform1f(he,W.u_device_pixel_ratio),u_matrix:new e.UniformMatrix4f(he,W.u_matrix)}},xt=function(he,W,de,J){var ge=he.transform,Ce,Fe;if(J.paint.get("circle-pitch-alignment")==="map"){var Je=Sn(de,1,ge.zoom);Ce=!0,Fe=[Je,Je]}else Ce=!1,Fe=ge.pixelsToGLUnits;return{u_camera_to_center_distance:ge.cameraToCenterDistance,u_scale_with_map:+(J.paint.get("circle-pitch-scale")==="map"),u_matrix:he.translatePosMatrix(W.posMatrix,de,J.paint.get("circle-translate"),J.paint.get("circle-translate-anchor")),u_pitch_with_map:+Ce,u_device_pixel_ratio:e.browser.devicePixelRatio,u_extrude_scale:Fe}},Bt=function(he,W){return{u_matrix:new e.UniformMatrix4f(he,W.u_matrix),u_camera_to_center_distance:new e.Uniform1f(he,W.u_camera_to_center_distance),u_pixels_to_tile_units:new e.Uniform1f(he,W.u_pixels_to_tile_units),u_extrude_scale:new e.Uniform2f(he,W.u_extrude_scale),u_overscale_factor:new e.Uniform1f(he,W.u_overscale_factor)}},vr=function(he,W){return{u_matrix:new e.UniformMatrix4f(he,W.u_matrix),u_inv_matrix:new e.UniformMatrix4f(he,W.u_inv_matrix),u_camera_to_center_distance:new e.Uniform1f(he,W.u_camera_to_center_distance),u_viewport_size:new e.Uniform2f(he,W.u_viewport_size)}},lr=function(he,W,de){var J=Sn(de,1,W.zoom),ge=Math.pow(2,W.zoom-de.tileID.overscaledZ),Ce=de.tileID.overscaleFactor();return{u_matrix:he,u_camera_to_center_distance:W.cameraToCenterDistance,u_pixels_to_tile_units:J,u_extrude_scale:[W.pixelsToGLUnits[0]/(J*ge),W.pixelsToGLUnits[1]/(J*ge)],u_overscale_factor:Ce}},Fr=function(he,W,de){return{u_matrix:he,u_inv_matrix:W,u_camera_to_center_distance:de.cameraToCenterDistance,u_viewport_size:[de.width,de.height]}},nn=function(he,W){return{u_color:new e.UniformColor(he,W.u_color),u_matrix:new e.UniformMatrix4f(he,W.u_matrix),u_overlay:new e.Uniform1i(he,W.u_overlay),u_overlay_scale:new e.Uniform1f(he,W.u_overlay_scale)}},yn=function(he,W,de){return de===void 0&&(de=1),{u_matrix:he,u_color:W,u_overlay:0,u_overlay_scale:de}},En=function(he,W){return{u_matrix:new e.UniformMatrix4f(he,W.u_matrix)}},Dn=function(he){return{u_matrix:he}},Hn=function(he,W){return{u_extrude_scale:new e.Uniform1f(he,W.u_extrude_scale),u_intensity:new e.Uniform1f(he,W.u_intensity),u_matrix:new e.UniformMatrix4f(he,W.u_matrix)}},xn=function(he,W){return{u_matrix:new e.UniformMatrix4f(he,W.u_matrix),u_world:new e.Uniform2f(he,W.u_world),u_image:new e.Uniform1i(he,W.u_image),u_color_ramp:new e.Uniform1i(he,W.u_color_ramp),u_opacity:new e.Uniform1f(he,W.u_opacity)}},Nn=function(he,W,de,J){return{u_matrix:he,u_extrude_scale:Sn(W,1,de),u_intensity:J}},Rn=function(he,W,de,J){var ge=e.create();e.ortho(ge,0,he.width,he.height,0,0,1);var Ce=he.context.gl;return{u_matrix:ge,u_world:[Ce.drawingBufferWidth,Ce.drawingBufferHeight],u_image:de,u_color_ramp:J,u_opacity:W.paint.get("heatmap-opacity")}},Yn=function(he,W){return{u_matrix:new e.UniformMatrix4f(he,W.u_matrix),u_image:new e.Uniform1i(he,W.u_image),u_latrange:new e.Uniform2f(he,W.u_latrange),u_light:new e.Uniform2f(he,W.u_light),u_shadow:new e.UniformColor(he,W.u_shadow),u_highlight:new e.UniformColor(he,W.u_highlight),u_accent:new e.UniformColor(he,W.u_accent)}},ta=function(he,W){return{u_matrix:new e.UniformMatrix4f(he,W.u_matrix),u_image:new e.Uniform1i(he,W.u_image),u_dimension:new e.Uniform2f(he,W.u_dimension),u_zoom:new e.Uniform1f(he,W.u_zoom),u_maxzoom:new e.Uniform1f(he,W.u_maxzoom),u_unpack:new e.Uniform4f(he,W.u_unpack)}},Ba=function(he,W,de){var J=de.paint.get("hillshade-shadow-color"),ge=de.paint.get("hillshade-highlight-color"),Ce=de.paint.get("hillshade-accent-color"),Fe=de.paint.get("hillshade-illumination-direction")*(Math.PI/180);de.paint.get("hillshade-illumination-anchor")==="viewport"&&(Fe-=he.transform.angle);var Je=!he.options.moving;return{u_matrix:he.transform.calculatePosMatrix(W.tileID.toUnwrapped(),Je),u_image:0,u_latrange:Ua(he,W.tileID),u_light:[de.paint.get("hillshade-exaggeration"),Fe],u_shadow:J,u_highlight:ge,u_accent:Ce}},Da=function(he,W,de){var J=W.stride,ge=e.create();return e.ortho(ge,0,e.EXTENT,-e.EXTENT,0,0,1),e.translate(ge,ge,[0,-e.EXTENT,0]),{u_matrix:ge,u_image:1,u_dimension:[J,J],u_zoom:he.overscaledZ,u_maxzoom:de,u_unpack:W.getUnpackVector()}};function Ua(he,W){var de=Math.pow(2,W.canonical.z),J=W.canonical.y;return[new e.MercatorCoordinate(0,J/de).toLngLat().lat,new e.MercatorCoordinate(0,(J+1)/de).toLngLat().lat]}var Va=function(he,W){return{u_matrix:new e.UniformMatrix4f(he,W.u_matrix),u_ratio:new e.Uniform1f(he,W.u_ratio),u_device_pixel_ratio:new e.Uniform1f(he,W.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(he,W.u_units_to_pixels)}},qn=function(he,W){return{u_matrix:new e.UniformMatrix4f(he,W.u_matrix),u_ratio:new e.Uniform1f(he,W.u_ratio),u_device_pixel_ratio:new e.Uniform1f(he,W.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(he,W.u_units_to_pixels),u_image:new e.Uniform1i(he,W.u_image)}},da=function(he,W){return{u_matrix:new e.UniformMatrix4f(he,W.u_matrix),u_texsize:new e.Uniform2f(he,W.u_texsize),u_ratio:new e.Uniform1f(he,W.u_ratio),u_device_pixel_ratio:new e.Uniform1f(he,W.u_device_pixel_ratio),u_image:new e.Uniform1i(he,W.u_image),u_units_to_pixels:new e.Uniform2f(he,W.u_units_to_pixels),u_scale:new e.Uniform3f(he,W.u_scale),u_fade:new e.Uniform1f(he,W.u_fade)}},Za=function(he,W){return{u_matrix:new e.UniformMatrix4f(he,W.u_matrix),u_ratio:new e.Uniform1f(he,W.u_ratio),u_device_pixel_ratio:new e.Uniform1f(he,W.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(he,W.u_units_to_pixels),u_patternscale_a:new e.Uniform2f(he,W.u_patternscale_a),u_patternscale_b:new e.Uniform2f(he,W.u_patternscale_b),u_sdfgamma:new e.Uniform1f(he,W.u_sdfgamma),u_image:new e.Uniform1i(he,W.u_image),u_tex_y_a:new e.Uniform1f(he,W.u_tex_y_a),u_tex_y_b:new e.Uniform1f(he,W.u_tex_y_b),u_mix:new e.Uniform1f(he,W.u_mix)}},ti=function(he,W,de){var J=he.transform;return{u_matrix:ci(he,W,de),u_ratio:1/Sn(W,1,J.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_units_to_pixels:[1/J.pixelsToGLUnits[0],1/J.pixelsToGLUnits[1]]}},_i=function(he,W,de){return e.extend(ti(he,W,de),{u_image:0})},wi=function(he,W,de,J){var ge=he.transform,Ce=Li(W,ge);return{u_matrix:ci(he,W,de),u_texsize:W.imageAtlasTexture.size,u_ratio:1/Sn(W,1,ge.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_image:0,u_scale:[Ce,J.fromScale,J.toScale],u_fade:J.t,u_units_to_pixels:[1/ge.pixelsToGLUnits[0],1/ge.pixelsToGLUnits[1]]}},Ai=function(he,W,de,J,ge){var Ce=he.transform,Fe=he.lineAtlas,Je=Li(W,Ce),ft=de.layout.get("line-cap")==="round",Lt=Fe.getDash(J.from,ft),$t=Fe.getDash(J.to,ft),cr=Lt.width*ge.fromScale,dr=$t.width*ge.toScale;return e.extend(ti(he,W,de),{u_patternscale_a:[Je/cr,-Lt.height/2],u_patternscale_b:[Je/dr,-$t.height/2],u_sdfgamma:Fe.width/(Math.min(cr,dr)*256*e.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:Lt.y,u_tex_y_b:$t.y,u_mix:ge.t})};function Li(he,W){return 1/Sn(he,1,W.tileZoom)}function ci(he,W,de){return he.translatePosMatrix(W.tileID.posMatrix,W,de.paint.get("line-translate"),de.paint.get("line-translate-anchor"))}var Eo=function(he,W){return{u_matrix:new e.UniformMatrix4f(he,W.u_matrix),u_tl_parent:new e.Uniform2f(he,W.u_tl_parent),u_scale_parent:new e.Uniform1f(he,W.u_scale_parent),u_buffer_scale:new e.Uniform1f(he,W.u_buffer_scale),u_fade_t:new e.Uniform1f(he,W.u_fade_t),u_opacity:new e.Uniform1f(he,W.u_opacity),u_image0:new e.Uniform1i(he,W.u_image0),u_image1:new e.Uniform1i(he,W.u_image1),u_brightness_low:new e.Uniform1f(he,W.u_brightness_low),u_brightness_high:new e.Uniform1f(he,W.u_brightness_high),u_saturation_factor:new e.Uniform1f(he,W.u_saturation_factor),u_contrast_factor:new e.Uniform1f(he,W.u_contrast_factor),u_spin_weights:new e.Uniform3f(he,W.u_spin_weights)}},uo=function(he,W,de,J,ge){return{u_matrix:he,u_tl_parent:W,u_scale_parent:de,u_buffer_scale:1,u_fade_t:J.mix,u_opacity:J.opacity*ge.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:ge.paint.get("raster-brightness-min"),u_brightness_high:ge.paint.get("raster-brightness-max"),u_saturation_factor:Mi(ge.paint.get("raster-saturation")),u_contrast_factor:ga(ge.paint.get("raster-contrast")),u_spin_weights:ei(ge.paint.get("raster-hue-rotate"))}};function ei(he){he*=Math.PI/180;var W=Math.sin(he),de=Math.cos(he);return[(2*de+1)/3,(-Math.sqrt(3)*W-de+1)/3,(Math.sqrt(3)*W-de+1)/3]}function ga(he){return he>0?1/(1-he):1+he}function Mi(he){return he>0?1-1/(1.001-he):-he}var xo=function(he,W){return{u_is_size_zoom_constant:new e.Uniform1i(he,W.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(he,W.u_is_size_feature_constant),u_size_t:new e.Uniform1f(he,W.u_size_t),u_size:new e.Uniform1f(he,W.u_size),u_camera_to_center_distance:new e.Uniform1f(he,W.u_camera_to_center_distance),u_pitch:new e.Uniform1f(he,W.u_pitch),u_rotate_symbol:new e.Uniform1i(he,W.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(he,W.u_aspect_ratio),u_fade_change:new e.Uniform1f(he,W.u_fade_change),u_matrix:new e.UniformMatrix4f(he,W.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(he,W.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(he,W.u_coord_matrix),u_is_text:new e.Uniform1i(he,W.u_is_text),u_pitch_with_map:new e.Uniform1i(he,W.u_pitch_with_map),u_texsize:new e.Uniform2f(he,W.u_texsize),u_texture:new e.Uniform1i(he,W.u_texture)}},Ao=function(he,W){return{u_is_size_zoom_constant:new e.Uniform1i(he,W.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(he,W.u_is_size_feature_constant),u_size_t:new e.Uniform1f(he,W.u_size_t),u_size:new e.Uniform1f(he,W.u_size),u_camera_to_center_distance:new e.Uniform1f(he,W.u_camera_to_center_distance),u_pitch:new e.Uniform1f(he,W.u_pitch),u_rotate_symbol:new e.Uniform1i(he,W.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(he,W.u_aspect_ratio),u_fade_change:new e.Uniform1f(he,W.u_fade_change),u_matrix:new e.UniformMatrix4f(he,W.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(he,W.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(he,W.u_coord_matrix),u_is_text:new e.Uniform1i(he,W.u_is_text),u_pitch_with_map:new e.Uniform1i(he,W.u_pitch_with_map),u_texsize:new e.Uniform2f(he,W.u_texsize),u_texture:new e.Uniform1i(he,W.u_texture),u_gamma_scale:new e.Uniform1f(he,W.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(he,W.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(he,W.u_is_halo)}},xs=function(he,W){return{u_is_size_zoom_constant:new e.Uniform1i(he,W.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(he,W.u_is_size_feature_constant),u_size_t:new e.Uniform1f(he,W.u_size_t),u_size:new e.Uniform1f(he,W.u_size),u_camera_to_center_distance:new e.Uniform1f(he,W.u_camera_to_center_distance),u_pitch:new e.Uniform1f(he,W.u_pitch),u_rotate_symbol:new e.Uniform1i(he,W.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(he,W.u_aspect_ratio),u_fade_change:new e.Uniform1f(he,W.u_fade_change),u_matrix:new e.UniformMatrix4f(he,W.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(he,W.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(he,W.u_coord_matrix),u_is_text:new e.Uniform1i(he,W.u_is_text),u_pitch_with_map:new e.Uniform1i(he,W.u_pitch_with_map),u_texsize:new e.Uniform2f(he,W.u_texsize),u_texsize_icon:new e.Uniform2f(he,W.u_texsize_icon),u_texture:new e.Uniform1i(he,W.u_texture),u_texture_icon:new e.Uniform1i(he,W.u_texture_icon),u_gamma_scale:new e.Uniform1f(he,W.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(he,W.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(he,W.u_is_halo)}},Bs=function(he,W,de,J,ge,Ce,Fe,Je,ft,Lt){var $t=ge.transform;return{u_is_size_zoom_constant:+(he==="constant"||he==="source"),u_is_size_feature_constant:+(he==="constant"||he==="camera"),u_size_t:W?W.uSizeT:0,u_size:W?W.uSize:0,u_camera_to_center_distance:$t.cameraToCenterDistance,u_pitch:$t.pitch/360*2*Math.PI,u_rotate_symbol:+de,u_aspect_ratio:$t.width/$t.height,u_fade_change:ge.options.fadeDuration?ge.symbolFadeChange:1,u_matrix:Ce,u_label_plane_matrix:Fe,u_coord_matrix:Je,u_is_text:+ft,u_pitch_with_map:+J,u_texsize:Lt,u_texture:0}},Xo=function(he,W,de,J,ge,Ce,Fe,Je,ft,Lt,$t){var cr=ge.transform;return e.extend(Bs(he,W,de,J,ge,Ce,Fe,Je,ft,Lt),{u_gamma_scale:J?Math.cos(cr._pitch)*cr.cameraToCenterDistance:1,u_device_pixel_ratio:e.browser.devicePixelRatio,u_is_halo:+$t})},fl=function(he,W,de,J,ge,Ce,Fe,Je,ft,Lt){return e.extend(Xo(he,W,de,J,ge,Ce,Fe,Je,!0,ft,!0),{u_texsize_icon:Lt,u_texture_icon:1})},ks=function(he,W){return{u_matrix:new e.UniformMatrix4f(he,W.u_matrix),u_opacity:new e.Uniform1f(he,W.u_opacity),u_color:new e.UniformColor(he,W.u_color)}},bs=function(he,W){return{u_matrix:new e.UniformMatrix4f(he,W.u_matrix),u_opacity:new e.Uniform1f(he,W.u_opacity),u_image:new e.Uniform1i(he,W.u_image),u_pattern_tl_a:new e.Uniform2f(he,W.u_pattern_tl_a),u_pattern_br_a:new e.Uniform2f(he,W.u_pattern_br_a),u_pattern_tl_b:new e.Uniform2f(he,W.u_pattern_tl_b),u_pattern_br_b:new e.Uniform2f(he,W.u_pattern_br_b),u_texsize:new e.Uniform2f(he,W.u_texsize),u_mix:new e.Uniform1f(he,W.u_mix),u_pattern_size_a:new e.Uniform2f(he,W.u_pattern_size_a),u_pattern_size_b:new e.Uniform2f(he,W.u_pattern_size_b),u_scale_a:new e.Uniform1f(he,W.u_scale_a),u_scale_b:new e.Uniform1f(he,W.u_scale_b),u_pixel_coord_upper:new e.Uniform2f(he,W.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(he,W.u_pixel_coord_lower),u_tile_units_to_pixels:new e.Uniform1f(he,W.u_tile_units_to_pixels)}},Co=function(he,W,de){return{u_matrix:he,u_opacity:W,u_color:de}},uu=function(he,W,de,J,ge,Ce){return e.extend(Yl(J,Ce,de,ge),{u_matrix:he,u_opacity:W})},ku={fillExtrusion:mo,fillExtrusionPattern:Ju,fill:Js,fillPattern:Os,fillOutline:ys,fillOutlinePattern:Ki,circle:$u,collisionBox:Bt,collisionCircle:vr,debug:nn,clippingMask:En,heatmap:Hn,heatmapTexture:xn,hillshade:Yn,hillshadePrepare:ta,line:Va,lineGradient:qn,linePattern:da,lineSDF:Za,raster:Eo,symbolIcon:xo,symbolSDF:Ao,symbolTextAndIcon:xs,background:ks,backgroundPattern:bs},_s;function qu(he,W,de,J,ge,Ce,Fe){for(var Je=he.context,ft=Je.gl,Lt=he.useProgram("collisionBox"),$t=[],cr=0,dr=0,Pr=0;Pr<J.length;Pr++){var Yr=J[Pr],Xr=W.getTile(Yr),Hr=Xr.getBucket(de);if(!!Hr){var $r=Yr.posMatrix;(ge[0]!==0||ge[1]!==0)&&($r=he.translatePosMatrix(Yr.posMatrix,Xr,ge,Ce));var pn=Fe?Hr.textCollisionBox:Hr.iconCollisionBox,Pn=Hr.collisionCircleArray;if(Pn.length>0){var On=e.create(),$n=$r;e.mul(On,Hr.placementInvProjMatrix,he.transform.glCoordMatrix),e.mul(On,On,Hr.placementViewportMatrix),$t.push({circleArray:Pn,circleOffset:dr,transform:$n,invTransform:On}),cr+=Pn.length/4,dr=cr}!pn||Lt.draw(Je,ft.LINES,Jr.disabled,Kt.disabled,he.colorModeForRenderPass(),Mt.disabled,lr($r,he.transform,Xr),de.id,pn.layoutVertexBuffer,pn.indexBuffer,pn.segments,null,he.transform.zoom,null,null,pn.collisionVertexBuffer)}}if(!(!Fe||!$t.length)){var ra=he.useProgram("collisionCircle"),ea=new e.StructArrayLayout2f1f2i16;ea.resize(cr*4),ea._trim();for(var pa=0,Aa=0,_a=$t;Aa<_a.length;Aa+=1)for(var Ea=_a[Aa],Ra=0;Ra<Ea.circleArray.length/4;Ra++){var Wa=Ra*4,si=Ea.circleArray[Wa+0],zi=Ea.circleArray[Wa+1],vi=Ea.circleArray[Wa+2],bi=Ea.circleArray[Wa+3];ea.emplace(pa++,si,zi,vi,bi,0),ea.emplace(pa++,si,zi,vi,bi,1),ea.emplace(pa++,si,zi,vi,bi,2),ea.emplace(pa++,si,zi,vi,bi,3)}(!_s||_s.length<cr*2)&&(_s=cu(cr));for(var Ha=Je.createIndexBuffer(_s,!0),Ni=Je.createVertexBuffer(ea,e.collisionCircleLayout.members,!0),Gi=0,Zi=$t;Gi<Zi.length;Gi+=1){var Ei=Zi[Gi],ro=Fr(Ei.transform,Ei.invTransform,he.transform);ra.draw(Je,ft.TRIANGLES,Jr.disabled,Kt.disabled,he.colorModeForRenderPass(),Mt.disabled,ro,de.id,Ni,Ha,e.SegmentVector.simpleSegment(0,Ei.circleOffset*2,Ei.circleArray.length,Ei.circleArray.length/2),null,he.transform.zoom,null,null,null)}Ni.destroy(),Ha.destroy()}}function cu(he){var W=he*2,de=new e.StructArrayLayout3ui6;de.resize(W),de._trim();for(var J=0;J<W;J++){var ge=J*6;de.uint16[ge+0]=J*4+0,de.uint16[ge+1]=J*4+1,de.uint16[ge+2]=J*4+2,de.uint16[ge+3]=J*4+2,de.uint16[ge+4]=J*4+3,de.uint16[ge+5]=J*4+0}return de}var Ff=e.identity(new Float32Array(16));function _c(he,W,de,J,ge){if(he.renderPass==="translucent"){var Ce=Kt.disabled,Fe=he.colorModeForRenderPass(),Je=de.layout.get("text-variable-anchor");Je&&wc(J,he,de,W,de.layout.get("text-rotation-alignment"),de.layout.get("text-pitch-alignment"),ge),de.paint.get("icon-opacity").constantOr(1)!==0&&Tc(he,W,de,J,!1,de.paint.get("icon-translate"),de.paint.get("icon-translate-anchor"),de.layout.get("icon-rotation-alignment"),de.layout.get("icon-pitch-alignment"),de.layout.get("icon-keep-upright"),Ce,Fe),de.paint.get("text-opacity").constantOr(1)!==0&&Tc(he,W,de,J,!0,de.paint.get("text-translate"),de.paint.get("text-translate-anchor"),de.layout.get("text-rotation-alignment"),de.layout.get("text-pitch-alignment"),de.layout.get("text-keep-upright"),Ce,Fe),W.map.showCollisionBoxes&&(qu(he,W,de,J,de.paint.get("text-translate"),de.paint.get("text-translate-anchor"),!0),qu(he,W,de,J,de.paint.get("icon-translate"),de.paint.get("icon-translate-anchor"),!1))}}function ec(he,W,de,J,ge,Ce){var Fe=e.getAnchorAlignment(he),Je=Fe.horizontalAlign,ft=Fe.verticalAlign,Lt=-(Je-.5)*W,$t=-(ft-.5)*de,cr=e.evaluateVariableOffset(he,J);return new e.Point((Lt/ge+cr[0])*Ce,($t/ge+cr[1])*Ce)}function wc(he,W,de,J,ge,Ce,Fe){for(var Je=W.transform,ft=ge==="map",Lt=Ce==="map",$t=0,cr=he;$t<cr.length;$t+=1){var dr=cr[$t],Pr=J.getTile(dr),Yr=Pr.getBucket(de);if(!(!Yr||!Yr.text||!Yr.text.segments.get().length)){var Xr=Yr.textSizeData,Hr=e.evaluateSizeForZoom(Xr,Je.zoom),$r=Sn(Pr,1,W.transform.zoom),pn=Wr(dr.posMatrix,Lt,ft,W.transform,$r),Pn=de.layout.get("icon-text-fit")!=="none"&&Yr.hasIconData();if(Hr){var On=Math.pow(2,Je.zoom-Pr.tileID.overscaledZ);Us(Yr,ft,Lt,Fe,e.symbolSize,Je,pn,dr.posMatrix,On,Hr,Pn)}}}}function Us(he,W,de,J,ge,Ce,Fe,Je,ft,Lt,$t){var cr=he.text.placedSymbolArray,dr=he.text.dynamicLayoutVertexArray,Pr=he.icon.dynamicLayoutVertexArray,Yr={};dr.clear();for(var Xr=0;Xr<cr.length;Xr++){var Hr=cr.get(Xr),$r=he.allowVerticalPlacement&&!Hr.placedOrientation,pn=!Hr.hidden&&Hr.crossTileID&&!$r?J[Hr.crossTileID]:null;if(!pn)Ka(Hr.numGlyphs,dr);else{var Pn=new e.Point(Hr.anchorX,Hr.anchorY),On=vn(Pn,de?Je:Fe),$n=Un(Ce.cameraToCenterDistance,On.signedDistanceFromCamera),ra=ge.evaluateSizeForFeature(he.textSizeData,Lt,Hr)*$n/e.ONE_EM;de&&(ra*=he.tilePixelRatio/ft);for(var ea=pn.width,pa=pn.height,Aa=pn.anchor,_a=pn.textOffset,Ea=pn.textBoxScale,Ra=ec(Aa,ea,pa,_a,Ea,ra),Wa=de?vn(Pn.add(Ra),Fe).point:On.point.add(W?Ra.rotate(-Ce.angle):Ra),si=he.allowVerticalPlacement&&Hr.placedOrientation===e.WritingMode.vertical?Math.PI/2:0,zi=0;zi<Hr.numGlyphs;zi++)e.addDynamicAttributes(dr,Wa,si);$t&&Hr.associatedIconIndex>=0&&(Yr[Hr.associatedIconIndex]={shiftedAnchor:Wa,angle:si})}}if($t){Pr.clear();for(var vi=he.icon.placedSymbolArray,bi=0;bi<vi.length;bi++){var Ha=vi.get(bi);if(Ha.hidden)Ka(Ha.numGlyphs,Pr);else{var Ni=Yr[bi];if(!Ni)Ka(Ha.numGlyphs,Pr);else for(var Gi=0;Gi<Ha.numGlyphs;Gi++)e.addDynamicAttributes(Pr,Ni.shiftedAnchor,Ni.angle)}}he.icon.dynamicLayoutVertexBuffer.updateData(Pr)}he.text.dynamicLayoutVertexBuffer.updateData(dr)}function Gc(he,W,de){return de.iconsInText&&W?"symbolTextAndIcon":he?"symbolSDF":"symbolIcon"}function Tc(he,W,de,J,ge,Ce,Fe,Je,ft,Lt,$t,cr){for(var dr=he.context,Pr=dr.gl,Yr=he.transform,Xr=Je==="map",Hr=ft==="map",$r=Xr&&de.layout.get("symbol-placement")!=="point",pn=Xr&&!Hr&&!$r,Pn=de.layout.get("symbol-sort-key").constantOr(1)!==void 0,On=he.depthModeForSublayer(0,Jr.ReadOnly),$n=de.layout.get("text-variable-anchor"),ra=[],ea=0,pa=J;ea<pa.length;ea+=1){var Aa=pa[ea],_a=W.getTile(Aa),Ea=_a.getBucket(de);if(!!Ea){var Ra=ge?Ea.text:Ea.icon;if(!(!Ra||!Ra.segments.get().length)){var Wa=Ra.programConfigurations.get(de.id),si=ge||Ea.sdfIcons,zi=ge?Ea.textSizeData:Ea.iconSizeData,vi=Hr||Yr.pitch!==0,bi=he.useProgram(Gc(si,ge,Ea),Wa),Ha=e.evaluateSizeForZoom(zi,Yr.zoom),Ni=void 0,Gi=[0,0],Zi=void 0,Ei=void 0,ro=null,ui=void 0;if(ge){if(Zi=_a.glyphAtlasTexture,Ei=Pr.LINEAR,Ni=_a.glyphAtlasTexture.size,Ea.iconsInText){Gi=_a.imageAtlasTexture.size,ro=_a.imageAtlasTexture;var Ci=zi.kind==="composite"||zi.kind==="camera";ui=vi||he.options.rotating||he.options.zooming||Ci?Pr.LINEAR:Pr.NEAREST}}else{var Po=de.layout.get("icon-size").constantOr(0)!==1||Ea.iconsNeedLinear;Zi=_a.imageAtlasTexture,Ei=si||he.options.rotating||he.options.zooming||Po||vi?Pr.LINEAR:Pr.NEAREST,Ni=_a.imageAtlasTexture.size}var Ko=Sn(_a,1,he.transform.zoom),Xl=Wr(Aa.posMatrix,Hr,Xr,he.transform,Ko),Zl=An(Aa.posMatrix,Hr,Xr,he.transform,Ko),Lu=$n&&Ea.hasTextData(),Pu=de.layout.get("icon-text-fit")!=="none"&&Lu&&Ea.hasIconData();$r&&Zn(Ea,Aa.posMatrix,he,ge,Xl,Zl,Hr,Lt);var ic=he.translatePosMatrix(Aa.posMatrix,_a,Ce,Fe),Du=$r||ge&&$n||Pu?Ff:Xl,$s=he.translatePosMatrix(Zl,_a,Ce,Fe,!0),Dc=si&&de.paint.get(ge?"text-halo-width":"icon-halo-width").constantOr(1)!==0,Ds=void 0;si?Ea.iconsInText?Ds=fl(zi.kind,Ha,pn,Hr,he,ic,Du,$s,Ni,Gi):Ds=Xo(zi.kind,Ha,pn,Hr,he,ic,Du,$s,ge,Ni,!0):Ds=Bs(zi.kind,Ha,pn,Hr,he,ic,Du,$s,ge,Ni);var kl={program:bi,buffers:Ra,uniformValues:Ds,atlasTexture:Zi,atlasTextureIcon:ro,atlasInterpolation:Ei,atlasInterpolationIcon:ui,isSDF:si,hasHalo:Dc};if(Pn)for(var Ru=Ra.segments.get(),vu=0,Iu=Ru;vu<Iu.length;vu+=1){var ph=Iu[vu];ra.push({segments:new e.SegmentVector([ph]),sortKey:ph.sortKey,state:kl})}else ra.push({segments:Ra.segments,sortKey:0,state:kl})}}}Pn&&ra.sort(function(dh,gh){return dh.sortKey-gh.sortKey});for(var Yc=0,Ts=ra;Yc<Ts.length;Yc+=1){var Uf=Ts[Yc],Vs=Uf.state;if(dr.activeTexture.set(Pr.TEXTURE0),Vs.atlasTexture.bind(Vs.atlasInterpolation,Pr.CLAMP_TO_EDGE),Vs.atlasTextureIcon&&(dr.activeTexture.set(Pr.TEXTURE1),Vs.atlasTextureIcon&&Vs.atlasTextureIcon.bind(Vs.atlasInterpolationIcon,Pr.CLAMP_TO_EDGE)),Vs.isSDF){var Vf=Vs.uniformValues;Vs.hasHalo&&(Vf.u_is_halo=1,Ac(Vs.buffers,Uf.segments,de,he,Vs.program,On,$t,cr,Vf)),Vf.u_is_halo=0}Ac(Vs.buffers,Uf.segments,de,he,Vs.program,On,$t,cr,Vs.uniformValues)}}function Ac(he,W,de,J,ge,Ce,Fe,Je,ft){var Lt=J.context,$t=Lt.gl;ge.draw(Lt,$t.TRIANGLES,Ce,Fe,Je,Mt.disabled,ft,de.id,he.layoutVertexBuffer,he.indexBuffer,W,de.paint,J.transform.zoom,he.programConfigurations.get(de.id),he.dynamicLayoutVertexBuffer,he.opacityVertexBuffer)}function Zo(he,W,de,J){if(he.renderPass==="translucent"){var ge=de.paint.get("circle-opacity"),Ce=de.paint.get("circle-stroke-width"),Fe=de.paint.get("circle-stroke-opacity"),Je=de.layout.get("circle-sort-key").constantOr(1)!==void 0;if(!(ge.constantOr(1)===0&&(Ce.constantOr(1)===0||Fe.constantOr(1)===0))){for(var ft=he.context,Lt=ft.gl,$t=he.depthModeForSublayer(0,Jr.ReadOnly),cr=Kt.disabled,dr=he.colorModeForRenderPass(),Pr=[],Yr=0;Yr<J.length;Yr++){var Xr=J[Yr],Hr=W.getTile(Xr),$r=Hr.getBucket(de);if(!!$r){var pn=$r.programConfigurations.get(de.id),Pn=he.useProgram("circle",pn),On=$r.layoutVertexBuffer,$n=$r.indexBuffer,ra=xt(he,Xr,Hr,de),ea={programConfiguration:pn,program:Pn,layoutVertexBuffer:On,indexBuffer:$n,uniformValues:ra};if(Je)for(var pa=$r.segments.get(),Aa=0,_a=pa;Aa<_a.length;Aa+=1){var Ea=_a[Aa];Pr.push({segments:new e.SegmentVector([Ea]),sortKey:Ea.sortKey,state:ea})}else Pr.push({segments:$r.segments,sortKey:0,state:ea})}}Je&&Pr.sort(function(Ei,ro){return Ei.sortKey-ro.sortKey});for(var Ra=0,Wa=Pr;Ra<Wa.length;Ra+=1){var si=Wa[Ra],zi=si.state,vi=zi.programConfiguration,bi=zi.program,Ha=zi.layoutVertexBuffer,Ni=zi.indexBuffer,Gi=zi.uniformValues,Zi=si.segments;bi.draw(ft,Lt.TRIANGLES,$t,cr,dr,Mt.disabled,Gi,de.id,Ha,Ni,Zi,de.paint,he.transform.zoom,vi)}}}}function Mc(he,W,de,J){if(de.paint.get("heatmap-opacity")!==0)if(he.renderPass==="offscreen"){var ge=he.context,Ce=ge.gl,Fe=Kt.disabled,Je=new $e([Ce.ONE,Ce.ONE],e.Color.transparent,[!0,!0,!0,!0]);of(ge,he,de),ge.clear({color:e.Color.transparent});for(var ft=0;ft<J.length;ft++){var Lt=J[ft];if(!W.hasRenderableParent(Lt)){var $t=W.getTile(Lt),cr=$t.getBucket(de);if(!!cr){var dr=cr.programConfigurations.get(de.id),Pr=he.useProgram("heatmap",dr),Yr=he.transform,Xr=Yr.zoom;Pr.draw(ge,Ce.TRIANGLES,Jr.disabled,Fe,Je,Mt.disabled,Nn(Lt.posMatrix,$t,Xr,de.paint.get("heatmap-intensity")),de.id,cr.layoutVertexBuffer,cr.indexBuffer,cr.segments,de.paint,he.transform.zoom,dr)}}}ge.viewport.set([0,0,he.width,he.height])}else he.renderPass==="translucent"&&(he.context.setColorMode(he.colorModeForRenderPass()),tc(he,de))}function of(he,W,de){var J=he.gl;he.activeTexture.set(J.TEXTURE1),he.viewport.set([0,0,W.width/4,W.height/4]);var ge=de.heatmapFbo;if(ge)J.bindTexture(J.TEXTURE_2D,ge.colorAttachment.get()),he.bindFramebuffer.set(ge.framebuffer);else{var Ce=J.createTexture();J.bindTexture(J.TEXTURE_2D,Ce),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_WRAP_S,J.CLAMP_TO_EDGE),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_WRAP_T,J.CLAMP_TO_EDGE),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_MIN_FILTER,J.LINEAR),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_MAG_FILTER,J.LINEAR),ge=de.heatmapFbo=he.createFramebuffer(W.width/4,W.height/4,!1),Ls(he,W,Ce,ge)}}function Ls(he,W,de,J){var ge=he.gl,Ce=he.extRenderToTextureHalfFloat?he.extTextureHalfFloat.HALF_FLOAT_OES:ge.UNSIGNED_BYTE;ge.texImage2D(ge.TEXTURE_2D,0,ge.RGBA,W.width/4,W.height/4,0,ge.RGBA,Ce,null),J.colorAttachment.set(de)}function tc(he,W){var de=he.context,J=de.gl,ge=W.heatmapFbo;if(!!ge){de.activeTexture.set(J.TEXTURE0),J.bindTexture(J.TEXTURE_2D,ge.colorAttachment.get()),de.activeTexture.set(J.TEXTURE1);var Ce=W.colorRampTexture;Ce||(Ce=W.colorRampTexture=new e.Texture(de,W.colorRamp,J.RGBA)),Ce.bind(J.LINEAR,J.CLAMP_TO_EDGE),he.useProgram("heatmapTexture").draw(de,J.TRIANGLES,Jr.disabled,Kt.disabled,he.colorModeForRenderPass(),Mt.disabled,Rn(he,W,0,1),W.id,he.viewportBuffer,he.quadTriangleIndexBuffer,he.viewportSegments,W.paint,he.transform.zoom)}}function rc(he,W,de,J){if(he.renderPass==="translucent"){var ge=de.paint.get("line-opacity"),Ce=de.paint.get("line-width");if(!(ge.constantOr(1)===0||Ce.constantOr(1)===0)){var Fe=he.depthModeForSublayer(0,Jr.ReadOnly),Je=he.colorModeForRenderPass(),ft=de.paint.get("line-dasharray"),Lt=de.paint.get("line-pattern"),$t=Lt.constantOr(1),cr=de.paint.get("line-gradient"),dr=de.getCrossfadeParameters(),Pr=$t?"linePattern":ft?"lineSDF":cr?"lineGradient":"line",Yr=he.context,Xr=Yr.gl,Hr=!0;if(cr){Yr.activeTexture.set(Xr.TEXTURE0);var $r=de.gradientTexture;if(!de.gradient)return;$r||($r=de.gradientTexture=new e.Texture(Yr,de.gradient,Xr.RGBA)),$r.bind(Xr.LINEAR,Xr.CLAMP_TO_EDGE)}for(var pn=0,Pn=J;pn<Pn.length;pn+=1){var On=Pn[pn],$n=W.getTile(On);if(!($t&&!$n.patternsLoaded())){var ra=$n.getBucket(de);if(!!ra){var ea=ra.programConfigurations.get(de.id),pa=he.context.program.get(),Aa=he.useProgram(Pr,ea),_a=Hr||Aa.program!==pa,Ea=Lt.constantOr(null);if(Ea&&$n.imageAtlas){var Ra=$n.imageAtlas,Wa=Ra.patternPositions[Ea.to.toString()],si=Ra.patternPositions[Ea.from.toString()];Wa&&si&&ea.setConstantPatternPositions(Wa,si)}var zi=$t?wi(he,$n,de,dr):ft?Ai(he,$n,de,ft,dr):cr?_i(he,$n,de):ti(he,$n,de);$t?(Yr.activeTexture.set(Xr.TEXTURE0),$n.imageAtlasTexture.bind(Xr.LINEAR,Xr.CLAMP_TO_EDGE),ea.updatePaintBuffers(dr)):ft&&(_a||he.lineAtlas.dirty)&&(Yr.activeTexture.set(Xr.TEXTURE0),he.lineAtlas.bind(Yr)),Aa.draw(Yr,Xr.TRIANGLES,Fe,he.stencilModeForClipping(On),Je,Mt.disabled,zi,de.id,ra.layoutVertexBuffer,ra.indexBuffer,ra.segments,de.paint,he.transform.zoom,ea),Hr=!1}}}}}}function Sc(he,W,de,J){var ge=de.paint.get("fill-color"),Ce=de.paint.get("fill-opacity");if(Ce.constantOr(1)!==0){var Fe=he.colorModeForRenderPass(),Je=de.paint.get("fill-pattern"),ft=he.opaquePassEnabledForLayer()&&!Je.constantOr(1)&&ge.constantOr(e.Color.transparent).a===1&&Ce.constantOr(0)===1?"opaque":"translucent";if(he.renderPass===ft){var Lt=he.depthModeForSublayer(1,he.renderPass==="opaque"?Jr.ReadWrite:Jr.ReadOnly);Ne(he,W,de,J,Lt,Fe,!1)}if(he.renderPass==="translucent"&&de.paint.get("fill-antialias")){var $t=he.depthModeForSublayer(de.getPaintProperty("fill-outline-color")?2:0,Jr.ReadOnly);Ne(he,W,de,J,$t,Fe,!0)}}}function Ne(he,W,de,J,ge,Ce,Fe){var Je=he.context.gl,ft=de.paint.get("fill-pattern"),Lt=ft&&ft.constantOr(1),$t=de.getCrossfadeParameters(),cr,dr,Pr,Yr,Xr;Fe?(dr=Lt&&!de.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",cr=Je.LINES):(dr=Lt?"fillPattern":"fill",cr=Je.TRIANGLES);for(var Hr=0,$r=J;Hr<$r.length;Hr+=1){var pn=$r[Hr],Pn=W.getTile(pn);if(!(Lt&&!Pn.patternsLoaded())){var On=Pn.getBucket(de);if(!!On){var $n=On.programConfigurations.get(de.id),ra=he.useProgram(dr,$n);Lt&&(he.context.activeTexture.set(Je.TEXTURE0),Pn.imageAtlasTexture.bind(Je.LINEAR,Je.CLAMP_TO_EDGE),$n.updatePaintBuffers($t));var ea=ft.constantOr(null);if(ea&&Pn.imageAtlas){var pa=Pn.imageAtlas,Aa=pa.patternPositions[ea.to.toString()],_a=pa.patternPositions[ea.from.toString()];Aa&&_a&&$n.setConstantPatternPositions(Aa,_a)}var Ea=he.translatePosMatrix(pn.posMatrix,Pn,de.paint.get("fill-translate"),de.paint.get("fill-translate-anchor"));if(!Fe)Yr=On.indexBuffer,Xr=On.segments,Pr=Lt?ms(Ea,he,$t,Pn):No(Ea);else{Yr=On.indexBuffer2,Xr=On.segments2;var Ra=[Je.drawingBufferWidth,Je.drawingBufferHeight];Pr=dr==="fillOutlinePattern"&&Lt?lu(Ea,he,$t,Pn,Ra):Qu(Ea,Ra)}ra.draw(he.context,cr,ge,he.stencilModeForClipping(pn),Ce,Mt.disabled,Pr,de.id,On.layoutVertexBuffer,Yr,Xr,de.paint,he.transform.zoom,$n)}}}}function Ze(he,W,de,J){var ge=de.paint.get("fill-extrusion-opacity");if(ge!==0&&he.renderPass==="translucent"){var Ce=new Jr(he.context.gl.LEQUAL,Jr.ReadWrite,he.depthRangeFor3D);if(ge===1&&!de.paint.get("fill-extrusion-pattern").constantOr(1)){var Fe=he.colorModeForRenderPass();rt(he,W,de,J,Ce,Kt.disabled,Fe)}else rt(he,W,de,J,Ce,Kt.disabled,$e.disabled),rt(he,W,de,J,Ce,he.stencilModeFor3D(),he.colorModeForRenderPass())}}function rt(he,W,de,J,ge,Ce,Fe){for(var Je=he.context,ft=Je.gl,Lt=de.paint.get("fill-extrusion-pattern"),$t=Lt.constantOr(1),cr=de.getCrossfadeParameters(),dr=de.paint.get("fill-extrusion-opacity"),Pr=0,Yr=J;Pr<Yr.length;Pr+=1){var Xr=Yr[Pr],Hr=W.getTile(Xr),$r=Hr.getBucket(de);if(!!$r){var pn=$r.programConfigurations.get(de.id),Pn=he.useProgram($t?"fillExtrusionPattern":"fillExtrusion",pn);$t&&(he.context.activeTexture.set(ft.TEXTURE0),Hr.imageAtlasTexture.bind(ft.LINEAR,ft.CLAMP_TO_EDGE),pn.updatePaintBuffers(cr));var On=Lt.constantOr(null);if(On&&Hr.imageAtlas){var $n=Hr.imageAtlas,ra=$n.patternPositions[On.to.toString()],ea=$n.patternPositions[On.from.toString()];ra&&ea&&pn.setConstantPatternPositions(ra,ea)}var pa=he.translatePosMatrix(Xr.posMatrix,Hr,de.paint.get("fill-extrusion-translate"),de.paint.get("fill-extrusion-translate-anchor")),Aa=de.paint.get("fill-extrusion-vertical-gradient"),_a=$t?Ks(pa,he,Aa,dr,Xr,cr,Hr):gs(pa,he,Aa,dr);Pn.draw(Je,Je.gl.TRIANGLES,ge,Ce,Fe,Mt.backCCW,_a,de.id,$r.layoutVertexBuffer,$r.indexBuffer,$r.segments,de.paint,he.transform.zoom,pn)}}}function lt(he,W,de,J){if(!(he.renderPass!=="offscreen"&&he.renderPass!=="translucent")){for(var ge=he.context,Ce=W.getSource().maxzoom,Fe=he.depthModeForSublayer(0,Jr.ReadOnly),Je=he.colorModeForRenderPass(),ft=he.renderPass==="translucent"?he.stencilConfigForOverlap(J):[{},J],Lt=ft[0],$t=ft[1],cr=0,dr=$t;cr<dr.length;cr+=1){var Pr=dr[cr],Yr=W.getTile(Pr);Yr.needsHillshadePrepare&&he.renderPass==="offscreen"?bt(he,Yr,de,Ce,Fe,Kt.disabled,Je):he.renderPass==="translucent"&&wt(he,Yr,de,Fe,Lt[Pr.overscaledZ],Je)}ge.viewport.set([0,0,he.width,he.height])}}function wt(he,W,de,J,ge,Ce){var Fe=he.context,Je=Fe.gl,ft=W.fbo;if(!!ft){var Lt=he.useProgram("hillshade");Fe.activeTexture.set(Je.TEXTURE0),Je.bindTexture(Je.TEXTURE_2D,ft.colorAttachment.get());var $t=Ba(he,W,de);Lt.draw(Fe,Je.TRIANGLES,J,ge,Ce,Mt.disabled,$t,de.id,he.rasterBoundsBuffer,he.quadTriangleIndexBuffer,he.rasterBoundsSegments)}}function bt(he,W,de,J,ge,Ce,Fe){var Je=he.context,ft=Je.gl,Lt=W.dem;if(Lt&&Lt.data){var $t=Lt.dim,cr=Lt.stride,dr=Lt.getPixels();if(Je.activeTexture.set(ft.TEXTURE1),Je.pixelStoreUnpackPremultiplyAlpha.set(!1),W.demTexture=W.demTexture||he.getTileTexture(cr),W.demTexture){var Pr=W.demTexture;Pr.update(dr,{premultiply:!1}),Pr.bind(ft.NEAREST,ft.CLAMP_TO_EDGE)}else W.demTexture=new e.Texture(Je,dr,ft.RGBA,{premultiply:!1}),W.demTexture.bind(ft.NEAREST,ft.CLAMP_TO_EDGE);Je.activeTexture.set(ft.TEXTURE0);var Yr=W.fbo;if(!Yr){var Xr=new e.Texture(Je,{width:$t,height:$t,data:null},ft.RGBA);Xr.bind(ft.LINEAR,ft.CLAMP_TO_EDGE),Yr=W.fbo=Je.createFramebuffer($t,$t,!0),Yr.colorAttachment.set(Xr.texture)}Je.bindFramebuffer.set(Yr.framebuffer),Je.viewport.set([0,0,$t,$t]),he.useProgram("hillshadePrepare").draw(Je,ft.TRIANGLES,ge,Ce,Fe,Mt.disabled,Da(W.tileID,Lt,J),de.id,he.rasterBoundsBuffer,he.quadTriangleIndexBuffer,he.rasterBoundsSegments),W.needsHillshadePrepare=!1}}function kt(he,W,de,J){if(he.renderPass==="translucent"&&de.paint.get("raster-opacity")!==0&&!!J.length)for(var ge=he.context,Ce=ge.gl,Fe=W.getSource(),Je=he.useProgram("raster"),ft=he.colorModeForRenderPass(),Lt=Fe instanceof ne?[{},J]:he.stencilConfigForOverlap(J),$t=Lt[0],cr=Lt[1],dr=cr[cr.length-1].overscaledZ,Pr=!he.options.moving,Yr=0,Xr=cr;Yr<Xr.length;Yr+=1){var Hr=Xr[Yr],$r=he.depthModeForSublayer(Hr.overscaledZ-dr,de.paint.get("raster-opacity")===1?Jr.ReadWrite:Jr.ReadOnly,Ce.LESS),pn=W.getTile(Hr),Pn=he.transform.calculatePosMatrix(Hr.toUnwrapped(),Pr);pn.registerFadeDuration(de.paint.get("raster-fade-duration"));var On=W.findLoadedParent(Hr,0),$n=hr(pn,On,W,de,he.transform),ra=void 0,ea=void 0,pa=de.paint.get("raster-resampling")==="nearest"?Ce.NEAREST:Ce.LINEAR;ge.activeTexture.set(Ce.TEXTURE0),pn.texture.bind(pa,Ce.CLAMP_TO_EDGE,Ce.LINEAR_MIPMAP_NEAREST),ge.activeTexture.set(Ce.TEXTURE1),On?(On.texture.bind(pa,Ce.CLAMP_TO_EDGE,Ce.LINEAR_MIPMAP_NEAREST),ra=Math.pow(2,On.tileID.overscaledZ-pn.tileID.overscaledZ),ea=[pn.tileID.canonical.x*ra%1,pn.tileID.canonical.y*ra%1]):pn.texture.bind(pa,Ce.CLAMP_TO_EDGE,Ce.LINEAR_MIPMAP_NEAREST);var Aa=uo(Pn,ea||[0,0],ra||1,$n,de);Fe instanceof ne?Je.draw(ge,Ce.TRIANGLES,$r,Kt.disabled,ft,Mt.disabled,Aa,de.id,Fe.boundsBuffer,he.quadTriangleIndexBuffer,Fe.boundsSegments):Je.draw(ge,Ce.TRIANGLES,$r,$t[Hr.overscaledZ],ft,Mt.disabled,Aa,de.id,he.rasterBoundsBuffer,he.quadTriangleIndexBuffer,he.rasterBoundsSegments)}}function hr(he,W,de,J,ge){var Ce=J.paint.get("raster-fade-duration");if(Ce>0){var Fe=e.browser.now(),Je=(Fe-he.timeAdded)/Ce,ft=W?(Fe-W.timeAdded)/Ce:-1,Lt=de.getSource(),$t=ge.coveringZoomLevel({tileSize:Lt.tileSize,roundZoom:Lt.roundZoom}),cr=!W||Math.abs(W.tileID.overscaledZ-$t)>Math.abs(he.tileID.overscaledZ-$t),dr=cr&&he.refreshedUponExpiration?1:e.clamp(cr?Je:1-ft,0,1);return he.refreshedUponExpiration&&Je>=1&&(he.refreshedUponExpiration=!1),W?{opacity:1,mix:1-dr}:{opacity:dr,mix:0}}else return{opacity:1,mix:0}}function gr(he,W,de){var J=de.paint.get("background-color"),ge=de.paint.get("background-opacity");if(ge!==0){var Ce=he.context,Fe=Ce.gl,Je=he.transform,ft=Je.tileSize,Lt=de.paint.get("background-pattern");if(!he.isPatternMissing(Lt)){var $t=!Lt&&J.a===1&&ge===1&&he.opaquePassEnabledForLayer()?"opaque":"translucent";if(he.renderPass===$t){var cr=Kt.disabled,dr=he.depthModeForSublayer(0,$t==="opaque"?Jr.ReadWrite:Jr.ReadOnly),Pr=he.colorModeForRenderPass(),Yr=he.useProgram(Lt?"backgroundPattern":"background"),Xr=Je.coveringTiles({tileSize:ft});Lt&&(Ce.activeTexture.set(Fe.TEXTURE0),he.imageManager.bind(he.context));for(var Hr=de.getCrossfadeParameters(),$r=0,pn=Xr;$r<pn.length;$r+=1){var Pn=pn[$r],On=he.transform.calculatePosMatrix(Pn.toUnwrapped()),$n=Lt?uu(On,ge,he,Lt,{tileID:Pn,tileSize:ft},Hr):Co(On,ge,J);Yr.draw(Ce,Fe.TRIANGLES,dr,cr,Pr,Mt.disabled,$n,de.id,he.tileExtentBuffer,he.quadTriangleIndexBuffer,he.tileExtentSegments)}}}}}var ur=new e.Color(1,0,0,1),_r=new e.Color(0,1,0,1),Ir=new e.Color(0,0,1,1),jr=new e.Color(1,0,1,1),tn=new e.Color(0,1,1,1);function wn(he){var W=he.transform.padding,de=3;jn(he,he.transform.height-(W.top||0),de,ur),jn(he,W.bottom||0,de,_r),ba(he,W.left||0,de,Ir),ba(he,he.transform.width-(W.right||0),de,jr);var J=he.transform.centerPoint;In(he,J.x,he.transform.height-J.y,tn)}function In(he,W,de,J){var ge=20,Ce=2;Ta(he,W-Ce/2,de-ge/2,Ce,ge,J),Ta(he,W-ge/2,de-Ce/2,ge,Ce,J)}function jn(he,W,de,J){Ta(he,0,W+de/2,he.transform.width,de,J)}function ba(he,W,de,J){Ta(he,W-de/2,0,de,he.transform.height,J)}function Ta(he,W,de,J,ge,Ce){var Fe=he.context,Je=Fe.gl;Je.enable(Je.SCISSOR_TEST),Je.scissor(W*e.browser.devicePixelRatio,de*e.browser.devicePixelRatio,J*e.browser.devicePixelRatio,ge*e.browser.devicePixelRatio),Fe.clear({color:Ce}),Je.disable(Je.SCISSOR_TEST)}function qa(he,W,de){for(var J=0;J<de.length;J++)ja(he,W,de[J])}function ja(he,W,de){var J=he.context,ge=J.gl,Ce=de.posMatrix,Fe=he.useProgram("debug"),Je=Jr.disabled,ft=Kt.disabled,Lt=he.colorModeForRenderPass(),$t="$debug";J.activeTexture.set(ge.TEXTURE0),he.emptyTexture.bind(ge.LINEAR,ge.CLAMP_TO_EDGE),Fe.draw(J,ge.LINE_STRIP,Je,ft,Lt,Mt.disabled,yn(Ce,e.Color.red),$t,he.debugBuffer,he.tileBorderIndexBuffer,he.debugSegments);var cr=W.getTileByID(de.key).latestRawTileData,dr=cr&&cr.byteLength||0,Pr=Math.floor(dr/1024),Yr=W.getTile(de).tileSize,Xr=512/Math.min(Yr,512)*(de.overscaledZ/he.transform.zoom)*.5,Hr=de.canonical.toString();de.overscaledZ!==de.canonical.z&&(Hr+=" => "+de.overscaledZ);var $r=Hr+" "+Pr+"kb";ai(he,$r),Fe.draw(J,ge.TRIANGLES,Je,ft,$e.alphaBlended,Mt.disabled,yn(Ce,e.Color.transparent,Xr),$t,he.debugBuffer,he.quadTriangleIndexBuffer,he.debugSegments)}function ai(he,W){he.initDebugOverlayCanvas();var de=he.debugOverlayCanvas,J=he.context.gl,ge=he.debugOverlayCanvas.getContext("2d");ge.clearRect(0,0,de.width,de.height),ge.shadowColor="white",ge.shadowBlur=2,ge.lineWidth=1.5,ge.strokeStyle="white",ge.textBaseline="top",ge.font="bold "+36+"px Open Sans, sans-serif",ge.fillText(W,5,5),ge.strokeText(W,5,5),he.debugOverlayTexture.update(de),he.debugOverlayTexture.bind(J.LINEAR,J.CLAMP_TO_EDGE)}function gi(he,W,de){var J=he.context,ge=de.implementation;if(he.renderPass==="offscreen"){var Ce=ge.prerender;Ce&&(he.setCustomLayerDefaults(),J.setColorMode(he.colorModeForRenderPass()),Ce.call(ge,J.gl,he.transform.customLayerMatrix()),J.setDirty(),he.setBaseState())}else if(he.renderPass==="translucent"){he.setCustomLayerDefaults(),J.setColorMode(he.colorModeForRenderPass()),J.setStencilMode(Kt.disabled);var Fe=ge.renderingMode==="3d"?new Jr(he.context.gl.LEQUAL,Jr.ReadWrite,he.depthRangeFor3D):he.depthModeForSublayer(0,Jr.ReadOnly);J.setDepthMode(Fe),ge.render(J.gl,he.transform.customLayerMatrix()),J.setDirty(),he.setBaseState(),J.bindFramebuffer.set(null)}}var po={symbol:_c,circle:Zo,heatmap:Mc,line:rc,fill:Sc,"fill-extrusion":Ze,hillshade:lt,raster:kt,background:gr,debug:qa,custom:gi},oi=function(W,de){this.context=new Ut(W),this.transform=de,this._tileTextures={},this.setup(),this.numSublayers=Pe.maxUnderzooming+Pe.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new wa,this.gpuTimers={}};oi.prototype.resize=function(W,de){if(this.width=W*e.browser.devicePixelRatio,this.height=de*e.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var J=0,ge=this.style._order;J<ge.length;J+=1){var Ce=ge[J];this.style._layers[Ce].resize()}},oi.prototype.setup=function(){var W=this.context,de=new e.StructArrayLayout2i4;de.emplaceBack(0,0),de.emplaceBack(e.EXTENT,0),de.emplaceBack(0,e.EXTENT),de.emplaceBack(e.EXTENT,e.EXTENT),this.tileExtentBuffer=W.createVertexBuffer(de,_l.members),this.tileExtentSegments=e.SegmentVector.simpleSegment(0,0,4,2);var J=new e.StructArrayLayout2i4;J.emplaceBack(0,0),J.emplaceBack(e.EXTENT,0),J.emplaceBack(0,e.EXTENT),J.emplaceBack(e.EXTENT,e.EXTENT),this.debugBuffer=W.createVertexBuffer(J,_l.members),this.debugSegments=e.SegmentVector.simpleSegment(0,0,4,5);var ge=new e.StructArrayLayout4i8;ge.emplaceBack(0,0,0,0),ge.emplaceBack(e.EXTENT,0,e.EXTENT,0),ge.emplaceBack(0,e.EXTENT,0,e.EXTENT),ge.emplaceBack(e.EXTENT,e.EXTENT,e.EXTENT,e.EXTENT),this.rasterBoundsBuffer=W.createVertexBuffer(ge,X.members),this.rasterBoundsSegments=e.SegmentVector.simpleSegment(0,0,4,2);var Ce=new e.StructArrayLayout2i4;Ce.emplaceBack(0,0),Ce.emplaceBack(1,0),Ce.emplaceBack(0,1),Ce.emplaceBack(1,1),this.viewportBuffer=W.createVertexBuffer(Ce,_l.members),this.viewportSegments=e.SegmentVector.simpleSegment(0,0,4,2);var Fe=new e.StructArrayLayout1ui2;Fe.emplaceBack(0),Fe.emplaceBack(1),Fe.emplaceBack(3),Fe.emplaceBack(2),Fe.emplaceBack(0),this.tileBorderIndexBuffer=W.createIndexBuffer(Fe);var Je=new e.StructArrayLayout3ui6;Je.emplaceBack(0,1,2),Je.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=W.createIndexBuffer(Je),this.emptyTexture=new e.Texture(W,{width:1,height:1,data:new Uint8Array([0,0,0,0])},W.gl.RGBA);var ft=this.context.gl;this.stencilClearMode=new Kt({func:ft.ALWAYS,mask:0},0,255,ft.ZERO,ft.ZERO,ft.ZERO)},oi.prototype.clearStencil=function(){var W=this.context,de=W.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var J=e.create();e.ortho(J,0,this.width,this.height,0,0,1),e.scale(J,J,[de.drawingBufferWidth,de.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(W,de.TRIANGLES,Jr.disabled,this.stencilClearMode,$e.disabled,Mt.disabled,Dn(J),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},oi.prototype._renderTileClippingMasks=function(W,de){if(!(this.currentStencilSource===W.source||!W.isTileClipped()||!de||!de.length)){this.currentStencilSource=W.source;var J=this.context,ge=J.gl;this.nextStencilID+de.length>256&&this.clearStencil(),J.setColorMode($e.disabled),J.setDepthMode(Jr.disabled);var Ce=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var Fe=0,Je=de;Fe<Je.length;Fe+=1){var ft=Je[Fe],Lt=this._tileClippingMaskIDs[ft.key]=this.nextStencilID++;Ce.draw(J,ge.TRIANGLES,Jr.disabled,new Kt({func:ge.ALWAYS,mask:0},Lt,255,ge.KEEP,ge.KEEP,ge.REPLACE),$e.disabled,Mt.disabled,Dn(ft.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},oi.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var W=this.nextStencilID++,de=this.context.gl;return new Kt({func:de.NOTEQUAL,mask:255},W,255,de.KEEP,de.KEEP,de.REPLACE)},oi.prototype.stencilModeForClipping=function(W){var de=this.context.gl;return new Kt({func:de.EQUAL,mask:255},this._tileClippingMaskIDs[W.key],0,de.KEEP,de.KEEP,de.REPLACE)},oi.prototype.stencilConfigForOverlap=function(W){var de,J=this.context.gl,ge=W.sort(function(Lt,$t){return $t.overscaledZ-Lt.overscaledZ}),Ce=ge[ge.length-1].overscaledZ,Fe=ge[0].overscaledZ-Ce+1;if(Fe>1){this.currentStencilSource=void 0,this.nextStencilID+Fe>256&&this.clearStencil();for(var Je={},ft=0;ft<Fe;ft++)Je[ft+Ce]=new Kt({func:J.GEQUAL,mask:255},ft+this.nextStencilID,255,J.KEEP,J.KEEP,J.REPLACE);return this.nextStencilID+=Fe,[Je,ge]}return[(de={},de[Ce]=Kt.disabled,de),ge]},oi.prototype.colorModeForRenderPass=function(){var W=this.context.gl;if(this._showOverdrawInspector){var de=8,J=1/de;return new $e([W.CONSTANT_COLOR,W.ONE],new e.Color(J,J,J,0),[!0,!0,!0,!0])}else return this.renderPass==="opaque"?$e.unblended:$e.alphaBlended},oi.prototype.depthModeForSublayer=function(W,de,J){if(!this.opaquePassEnabledForLayer())return Jr.disabled;var ge=1-((1+this.currentLayer)*this.numSublayers+W)*this.depthEpsilon;return new Jr(J||this.context.gl.LEQUAL,de,[ge,ge])},oi.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},oi.prototype.render=function(W,de){var J=this;this.style=W,this.options=de,this.lineAtlas=W.lineAtlas,this.imageManager=W.imageManager,this.glyphManager=W.glyphManager,this.symbolFadeChange=W.placement.symbolFadeChange(e.browser.now()),this.imageManager.beginFrame();var ge=this.style._order,Ce=this.style.sourceCaches;for(var Fe in Ce){var Je=Ce[Fe];Je.used&&Je.prepare(this.context)}var ft={},Lt={},$t={};for(var cr in Ce){var dr=Ce[cr];ft[cr]=dr.getVisibleCoordinates(),Lt[cr]=ft[cr].slice().reverse(),$t[cr]=dr.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var Pr=0;Pr<ge.length;Pr++){var Yr=ge[Pr];if(this.style._layers[Yr].is3D()){this.opaquePassCutoff=Pr;break}}this.renderPass="offscreen";for(var Xr=0,Hr=ge;Xr<Hr.length;Xr+=1){var $r=Hr[Xr],pn=this.style._layers[$r];if(!(!pn.hasOffscreenPass()||pn.isHidden(this.transform.zoom))){var Pn=Lt[pn.source];pn.type!=="custom"&&!Pn.length||this.renderLayer(this,Ce[pn.source],pn,Pn)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:de.showOverdrawInspector?e.Color.black:e.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=de.showOverdrawInspector,this.depthRangeFor3D=[0,1-(W._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=ge.length-1;this.currentLayer>=0;this.currentLayer--){var On=this.style._layers[ge[this.currentLayer]],$n=Ce[On.source],ra=ft[On.source];this._renderTileClippingMasks(On,ra),this.renderLayer(this,$n,On,ra)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<ge.length;this.currentLayer++){var ea=this.style._layers[ge[this.currentLayer]],pa=Ce[ea.source],Aa=(ea.type==="symbol"?$t:Lt)[ea.source];this._renderTileClippingMasks(ea,ft[ea.source]),this.renderLayer(this,pa,ea,Aa)}if(this.options.showTileBoundaries){var _a,Ea,Ra=e.values(this.style._layers);Ra.forEach(function(Wa){Wa.source&&!Wa.isHidden(J.transform.zoom)&&(Wa.source!==(Ea&&Ea.id)&&(Ea=J.style.sourceCaches[Wa.source]),(!_a||_a.getSource().maxzoom<Ea.getSource().maxzoom)&&(_a=Ea))}),_a&&po.debug(this,_a,_a.getVisibleCoordinates())}this.options.showPadding&&wn(this),this.context.setDefault()},oi.prototype.renderLayer=function(W,de,J,ge){J.isHidden(this.transform.zoom)||J.type!=="background"&&J.type!=="custom"&&!ge.length||(this.id=J.id,this.gpuTimingStart(J),po[J.type](W,de,J,ge,this.style.placement.variableOffsets),this.gpuTimingEnd())},oi.prototype.gpuTimingStart=function(W){if(!!this.options.gpuTiming){var de=this.context.extTimerQuery,J=this.gpuTimers[W.id];J||(J=this.gpuTimers[W.id]={calls:0,cpuTime:0,query:de.createQueryEXT()}),J.calls++,de.beginQueryEXT(de.TIME_ELAPSED_EXT,J.query)}},oi.prototype.gpuTimingEnd=function(){if(!!this.options.gpuTiming){var W=this.context.extTimerQuery;W.endQueryEXT(W.TIME_ELAPSED_EXT)}},oi.prototype.collectGpuTimers=function(){var W=this.gpuTimers;return this.gpuTimers={},W},oi.prototype.queryGpuTimers=function(W){var de={};for(var J in W){var ge=W[J],Ce=this.context.extTimerQuery,Fe=Ce.getQueryObjectEXT(ge.query,Ce.QUERY_RESULT_EXT)/(1e3*1e3);Ce.deleteQueryEXT(ge.query),de[J]=Fe}return de},oi.prototype.translatePosMatrix=function(W,de,J,ge,Ce){if(!J[0]&&!J[1])return W;var Fe=Ce?ge==="map"?this.transform.angle:0:ge==="viewport"?-this.transform.angle:0;if(Fe){var Je=Math.sin(Fe),ft=Math.cos(Fe);J=[J[0]*ft-J[1]*Je,J[0]*Je+J[1]*ft]}var Lt=[Ce?J[0]:Sn(de,J[0],this.transform.zoom),Ce?J[1]:Sn(de,J[1],this.transform.zoom),0],$t=new Float32Array(16);return e.translate($t,W,Lt),$t},oi.prototype.saveTileTexture=function(W){var de=this._tileTextures[W.size[0]];de?de.push(W):this._tileTextures[W.size[0]]=[W]},oi.prototype.getTileTexture=function(W){var de=this._tileTextures[W];return de&&de.length>0?de.pop():null},oi.prototype.isPatternMissing=function(W){if(!W)return!1;if(!W.from||!W.to)return!0;var de=this.imageManager.getPattern(W.from.toString()),J=this.imageManager.getPattern(W.to.toString());return!de||!J},oi.prototype.useProgram=function(W,de){this.cache=this.cache||{};var J=""+W+(de?de.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[J]||(this.cache[J]=new ls(this.context,Cl[W],de,ku[W],this._showOverdrawInspector)),this.cache[J]},oi.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},oi.prototype.setBaseState=function(){var W=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(W.FUNC_ADD)},oi.prototype.initDebugOverlayCanvas=function(){if(this.debugOverlayCanvas==null){this.debugOverlayCanvas=e.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512;var W=this.context.gl;this.debugOverlayTexture=new e.Texture(this.context,this.debugOverlayCanvas,W.RGBA)}},oi.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var Ji=function(W,de){this.points=W,this.planes=de};Ji.fromInvProjectionMatrix=function(W,de,J){var ge=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]],Ce=Math.pow(2,J),Fe=ge.map(function(Lt){return e.transformMat4([],Lt,W)}).map(function(Lt){return e.scale$1([],Lt,1/Lt[3]/de*Ce)}),Je=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],ft=Je.map(function(Lt){var $t=e.sub([],Fe[Lt[0]],Fe[Lt[1]]),cr=e.sub([],Fe[Lt[2]],Fe[Lt[1]]),dr=e.normalize([],e.cross([],$t,cr)),Pr=-e.dot(dr,Fe[Lt[1]]);return dr.concat(Pr)});return new Ji(Fe,ft)};var bo=function(W,de){this.min=W,this.max=de,this.center=e.scale$2([],e.add([],this.min,this.max),.5)};bo.prototype.quadrant=function(W){for(var de=[W%2===0,W<2],J=e.clone$2(this.min),ge=e.clone$2(this.max),Ce=0;Ce<de.length;Ce++)J[Ce]=de[Ce]?this.min[Ce]:this.center[Ce],ge[Ce]=de[Ce]?this.center[Ce]:this.max[Ce];return ge[2]=this.max[2],new bo(J,ge)},bo.prototype.distanceX=function(W){var de=Math.max(Math.min(this.max[0],W[0]),this.min[0]);return de-W[0]},bo.prototype.distanceY=function(W){var de=Math.max(Math.min(this.max[1],W[1]),this.min[1]);return de-W[1]},bo.prototype.intersects=function(W){for(var de=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],J=!0,ge=0;ge<W.planes.length;ge++){for(var Ce=W.planes[ge],Fe=0,Je=0;Je<de.length;Je++)Fe+=e.dot$1(Ce,de[Je])>=0;if(Fe===0)return 0;Fe!==de.length&&(J=!1)}if(J)return 2;for(var ft=0;ft<3;ft++){for(var Lt=Number.MAX_VALUE,$t=-Number.MAX_VALUE,cr=0;cr<W.points.length;cr++){var dr=W.points[cr][ft]-this.min[ft];Lt=Math.min(Lt,dr),$t=Math.max($t,dr)}if($t<0||Lt>this.max[ft]-this.min[ft])return 0}return 1};var Lo=function(W,de,J,ge){if(W===void 0&&(W=0),de===void 0&&(de=0),J===void 0&&(J=0),ge===void 0&&(ge=0),isNaN(W)||W<0||isNaN(de)||de<0||isNaN(J)||J<0||isNaN(ge)||ge<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=W,this.bottom=de,this.left=J,this.right=ge};Lo.prototype.interpolate=function(W,de,J){return de.top!=null&&W.top!=null&&(this.top=e.number(W.top,de.top,J)),de.bottom!=null&&W.bottom!=null&&(this.bottom=e.number(W.bottom,de.bottom,J)),de.left!=null&&W.left!=null&&(this.left=e.number(W.left,de.left,J)),de.right!=null&&W.right!=null&&(this.right=e.number(W.right,de.right,J)),this},Lo.prototype.getCenter=function(W,de){var J=e.clamp((this.left+W-this.right)/2,0,W),ge=e.clamp((this.top+de-this.bottom)/2,0,de);return new e.Point(J,ge)},Lo.prototype.equals=function(W){return this.top===W.top&&this.bottom===W.bottom&&this.left===W.left&&this.right===W.right},Lo.prototype.clone=function(){return new Lo(this.top,this.bottom,this.left,this.right)},Lo.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Si=function(W,de,J,ge,Ce){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=Ce===void 0?!0:Ce,this._minZoom=W||0,this._maxZoom=de||22,this._minPitch=J==null?0:J,this._maxPitch=ge==null?60:ge,this.setMaxBounds(),this.width=0,this.height=0,this._center=new e.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Lo,this._posMatrixCache={},this._alignedPosMatrixCache={}},Pi={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Si.prototype.clone=function(){var W=new Si(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return W.tileSize=this.tileSize,W.latRange=this.latRange,W.width=this.width,W.height=this.height,W._center=this._center,W.zoom=this.zoom,W.angle=this.angle,W._fov=this._fov,W._pitch=this._pitch,W._unmodified=this._unmodified,W._edgeInsets=this._edgeInsets.clone(),W._calcMatrices(),W},Pi.minZoom.get=function(){return this._minZoom},Pi.minZoom.set=function(he){this._minZoom!==he&&(this._minZoom=he,this.zoom=Math.max(this.zoom,he))},Pi.maxZoom.get=function(){return this._maxZoom},Pi.maxZoom.set=function(he){this._maxZoom!==he&&(this._maxZoom=he,this.zoom=Math.min(this.zoom,he))},Pi.minPitch.get=function(){return this._minPitch},Pi.minPitch.set=function(he){this._minPitch!==he&&(this._minPitch=he,this.pitch=Math.max(this.pitch,he))},Pi.maxPitch.get=function(){return this._maxPitch},Pi.maxPitch.set=function(he){this._maxPitch!==he&&(this._maxPitch=he,this.pitch=Math.min(this.pitch,he))},Pi.renderWorldCopies.get=function(){return this._renderWorldCopies},Pi.renderWorldCopies.set=function(he){he===void 0?he=!0:he===null&&(he=!1),this._renderWorldCopies=he},Pi.worldSize.get=function(){return this.tileSize*this.scale},Pi.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Pi.size.get=function(){return new e.Point(this.width,this.height)},Pi.bearing.get=function(){return-this.angle/Math.PI*180},Pi.bearing.set=function(he){var W=-e.wrap(he,-180,180)*Math.PI/180;this.angle!==W&&(this._unmodified=!1,this.angle=W,this._calcMatrices(),this.rotationMatrix=e.create$2(),e.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Pi.pitch.get=function(){return this._pitch/Math.PI*180},Pi.pitch.set=function(he){var W=e.clamp(he,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==W&&(this._unmodified=!1,this._pitch=W,this._calcMatrices())},Pi.fov.get=function(){return this._fov/Math.PI*180},Pi.fov.set=function(he){he=Math.max(.01,Math.min(60,he)),this._fov!==he&&(this._unmodified=!1,this._fov=he/180*Math.PI,this._calcMatrices())},Pi.zoom.get=function(){return this._zoom},Pi.zoom.set=function(he){var W=Math.min(Math.max(he,this.minZoom),this.maxZoom);this._zoom!==W&&(this._unmodified=!1,this._zoom=W,this.scale=this.zoomScale(W),this.tileZoom=Math.floor(W),this.zoomFraction=W-this.tileZoom,this._constrain(),this._calcMatrices())},Pi.center.get=function(){return this._center},Pi.center.set=function(he){he.lat===this._center.lat&&he.lng===this._center.lng||(this._unmodified=!1,this._center=he,this._constrain(),this._calcMatrices())},Pi.padding.get=function(){return this._edgeInsets.toJSON()},Pi.padding.set=function(he){this._edgeInsets.equals(he)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,he,1),this._calcMatrices())},Pi.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Si.prototype.isPaddingEqual=function(W){return this._edgeInsets.equals(W)},Si.prototype.interpolatePadding=function(W,de,J){this._unmodified=!1,this._edgeInsets.interpolate(W,de,J),this._constrain(),this._calcMatrices()},Si.prototype.coveringZoomLevel=function(W){var de=(W.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/W.tileSize));return Math.max(0,de)},Si.prototype.getVisibleUnwrappedCoordinates=function(W){var de=[new e.UnwrappedTileID(0,W)];if(this._renderWorldCopies)for(var J=this.pointCoordinate(new e.Point(0,0)),ge=this.pointCoordinate(new e.Point(this.width,0)),Ce=this.pointCoordinate(new e.Point(this.width,this.height)),Fe=this.pointCoordinate(new e.Point(0,this.height)),Je=Math.floor(Math.min(J.x,ge.x,Ce.x,Fe.x)),ft=Math.floor(Math.max(J.x,ge.x,Ce.x,Fe.x)),Lt=1,$t=Je-Lt;$t<=ft+Lt;$t++)$t!==0&&de.push(new e.UnwrappedTileID($t,W));return de},Si.prototype.coveringTiles=function(W){var de=this.coveringZoomLevel(W),J=de;if(W.minzoom!==void 0&&de<W.minzoom)return[];W.maxzoom!==void 0&&de>W.maxzoom&&(de=W.maxzoom);var ge=e.MercatorCoordinate.fromLngLat(this.center),Ce=Math.pow(2,de),Fe=[Ce*ge.x,Ce*ge.y,0],Je=Ji.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,de),ft=W.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(ft=de);var Lt=3,$t=function(Ra){return{aabb:new bo([Ra*Ce,0,0],[(Ra+1)*Ce,Ce,0]),zoom:0,x:0,y:0,wrap:Ra,fullyVisible:!1}},cr=[],dr=[],Pr=de,Yr=W.reparseOverscaled?J:de;if(this._renderWorldCopies)for(var Xr=1;Xr<=3;Xr++)cr.push($t(-Xr)),cr.push($t(Xr));for(cr.push($t(0));cr.length>0;){var Hr=cr.pop(),$r=Hr.x,pn=Hr.y,Pn=Hr.fullyVisible;if(!Pn){var On=Hr.aabb.intersects(Je);if(On===0)continue;Pn=On===2}var $n=Hr.aabb.distanceX(Fe),ra=Hr.aabb.distanceY(Fe),ea=Math.max(Math.abs($n),Math.abs(ra)),pa=Lt+(1<<Pr-Hr.zoom)-2;if(Hr.zoom===Pr||ea>pa&&Hr.zoom>=ft){dr.push({tileID:new e.OverscaledTileID(Hr.zoom===Pr?Yr:Hr.zoom,Hr.wrap,Hr.zoom,$r,pn),distanceSq:e.sqrLen([Fe[0]-.5-$r,Fe[1]-.5-pn])});continue}for(var Aa=0;Aa<4;Aa++){var _a=($r<<1)+Aa%2,Ea=(pn<<1)+(Aa>>1);cr.push({aabb:Hr.aabb.quadrant(Aa),zoom:Hr.zoom+1,x:_a,y:Ea,wrap:Hr.wrap,fullyVisible:Pn})}}return dr.sort(function(Ra,Wa){return Ra.distanceSq-Wa.distanceSq}).map(function(Ra){return Ra.tileID})},Si.prototype.resize=function(W,de){this.width=W,this.height=de,this.pixelsToGLUnits=[2/W,-2/de],this._constrain(),this._calcMatrices()},Pi.unmodified.get=function(){return this._unmodified},Si.prototype.zoomScale=function(W){return Math.pow(2,W)},Si.prototype.scaleZoom=function(W){return Math.log(W)/Math.LN2},Si.prototype.project=function(W){var de=e.clamp(W.lat,-this.maxValidLatitude,this.maxValidLatitude);return new e.Point(e.mercatorXfromLng(W.lng)*this.worldSize,e.mercatorYfromLat(de)*this.worldSize)},Si.prototype.unproject=function(W){return new e.MercatorCoordinate(W.x/this.worldSize,W.y/this.worldSize).toLngLat()},Pi.point.get=function(){return this.project(this.center)},Si.prototype.setLocationAtPoint=function(W,de){var J=this.pointCoordinate(de),ge=this.pointCoordinate(this.centerPoint),Ce=this.locationCoordinate(W),Fe=new e.MercatorCoordinate(Ce.x-(J.x-ge.x),Ce.y-(J.y-ge.y));this.center=this.coordinateLocation(Fe),this._renderWorldCopies&&(this.center=this.center.wrap())},Si.prototype.locationPoint=function(W){return this.coordinatePoint(this.locationCoordinate(W))},Si.prototype.pointLocation=function(W){return this.coordinateLocation(this.pointCoordinate(W))},Si.prototype.locationCoordinate=function(W){return e.MercatorCoordinate.fromLngLat(W)},Si.prototype.coordinateLocation=function(W){return W.toLngLat()},Si.prototype.pointCoordinate=function(W){var de=0,J=[W.x,W.y,0,1],ge=[W.x,W.y,1,1];e.transformMat4(J,J,this.pixelMatrixInverse),e.transformMat4(ge,ge,this.pixelMatrixInverse);var Ce=J[3],Fe=ge[3],Je=J[0]/Ce,ft=ge[0]/Fe,Lt=J[1]/Ce,$t=ge[1]/Fe,cr=J[2]/Ce,dr=ge[2]/Fe,Pr=cr===dr?0:(de-cr)/(dr-cr);return new e.MercatorCoordinate(e.number(Je,ft,Pr)/this.worldSize,e.number(Lt,$t,Pr)/this.worldSize)},Si.prototype.coordinatePoint=function(W){var de=[W.x*this.worldSize,W.y*this.worldSize,0,1];return e.transformMat4(de,de,this.pixelMatrix),new e.Point(de[0]/de[3],de[1]/de[3])},Si.prototype.getBounds=function(){return new e.LngLatBounds().extend(this.pointLocation(new e.Point(0,0))).extend(this.pointLocation(new e.Point(this.width,0))).extend(this.pointLocation(new e.Point(this.width,this.height))).extend(this.pointLocation(new e.Point(0,this.height)))},Si.prototype.getMaxBounds=function(){return!this.latRange||this.latRange.length!==2||!this.lngRange||this.lngRange.length!==2?null:new e.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]])},Si.prototype.setMaxBounds=function(W){W?(this.lngRange=[W.getWest(),W.getEast()],this.latRange=[W.getSouth(),W.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Si.prototype.calculatePosMatrix=function(W,de){de===void 0&&(de=!1);var J=W.key,ge=de?this._alignedPosMatrixCache:this._posMatrixCache;if(ge[J])return ge[J];var Ce=W.canonical,Fe=this.worldSize/this.zoomScale(Ce.z),Je=Ce.x+Math.pow(2,Ce.z)*W.wrap,ft=e.identity(new Float64Array(16));return e.translate(ft,ft,[Je*Fe,Ce.y*Fe,0]),e.scale(ft,ft,[Fe/e.EXTENT,Fe/e.EXTENT,1]),e.multiply(ft,de?this.alignedProjMatrix:this.projMatrix,ft),ge[J]=new Float32Array(ft),ge[J]},Si.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Si.prototype._constrain=function(){if(!(!this.center||!this.width||!this.height||this._constraining)){this._constraining=!0;var W=-90,de=90,J=-180,ge=180,Ce,Fe,Je,ft,Lt=this.size,$t=this._unmodified;if(this.latRange){var cr=this.latRange;W=e.mercatorYfromLat(cr[1])*this.worldSize,de=e.mercatorYfromLat(cr[0])*this.worldSize,Ce=de-W<Lt.y?Lt.y/(de-W):0}if(this.lngRange){var dr=this.lngRange;J=e.mercatorXfromLng(dr[0])*this.worldSize,ge=e.mercatorXfromLng(dr[1])*this.worldSize,Fe=ge-J<Lt.x?Lt.x/(ge-J):0}var Pr=this.point,Yr=Math.max(Fe||0,Ce||0);if(Yr){this.center=this.unproject(new e.Point(Fe?(ge+J)/2:Pr.x,Ce?(de+W)/2:Pr.y)),this.zoom+=this.scaleZoom(Yr),this._unmodified=$t,this._constraining=!1;return}if(this.latRange){var Xr=Pr.y,Hr=Lt.y/2;Xr-Hr<W&&(ft=W+Hr),Xr+Hr>de&&(ft=de-Hr)}if(this.lngRange){var $r=Pr.x,pn=Lt.x/2;$r-pn<J&&(Je=J+pn),$r+pn>ge&&(Je=ge-pn)}(Je!==void 0||ft!==void 0)&&(this.center=this.unproject(new e.Point(Je!==void 0?Je:Pr.x,ft!==void 0?ft:Pr.y))),this._unmodified=$t,this._constraining=!1}},Si.prototype._calcMatrices=function(){if(!!this.height){var W=this._fov/2,de=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(W)*this.height;var J=Math.PI/2+this._pitch,ge=this._fov*(.5+de.y/this.height),Ce=Math.sin(ge)*this.cameraToCenterDistance/Math.sin(e.clamp(Math.PI-J-ge,.01,Math.PI-.01)),Fe=this.point,Je=Fe.x,ft=Fe.y,Lt=Math.cos(Math.PI/2-this._pitch)*Ce+this.cameraToCenterDistance,$t=Lt*1.01,cr=this.height/50,dr=new Float64Array(16);e.perspective(dr,this._fov,this.width/this.height,cr,$t),dr[8]=-de.x*2/this.width,dr[9]=de.y*2/this.height,e.scale(dr,dr,[1,-1,1]),e.translate(dr,dr,[0,0,-this.cameraToCenterDistance]),e.rotateX(dr,dr,this._pitch),e.rotateZ(dr,dr,this.angle),e.translate(dr,dr,[-Je,-ft,0]),this.mercatorMatrix=e.scale([],dr,[this.worldSize,this.worldSize,this.worldSize]),e.scale(dr,dr,[1,1,e.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=dr,this.invProjMatrix=e.invert([],this.projMatrix);var Pr=this.width%2/2,Yr=this.height%2/2,Xr=Math.cos(this.angle),Hr=Math.sin(this.angle),$r=Je-Math.round(Je)+Xr*Pr+Hr*Yr,pn=ft-Math.round(ft)+Xr*Yr+Hr*Pr,Pn=new Float64Array(dr);if(e.translate(Pn,Pn,[$r>.5?$r-1:$r,pn>.5?pn-1:pn,0]),this.alignedProjMatrix=Pn,dr=e.create(),e.scale(dr,dr,[this.width/2,-this.height/2,1]),e.translate(dr,dr,[1,-1,0]),this.labelPlaneMatrix=dr,dr=e.create(),e.scale(dr,dr,[1,-1,1]),e.translate(dr,dr,[-1,-1,0]),e.scale(dr,dr,[2/this.width,2/this.height,1]),this.glCoordMatrix=dr,this.pixelMatrix=e.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),dr=e.invert(new Float64Array(16),this.pixelMatrix),!dr)throw new Error("failed to invert matrix");this.pixelMatrixInverse=dr,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Si.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var W=this.pointCoordinate(new e.Point(0,0)),de=[W.x*this.worldSize,W.y*this.worldSize,0,1],J=e.transformMat4(de,de,this.pixelMatrix);return J[3]/this.cameraToCenterDistance},Si.prototype.getCameraPoint=function(){var W=this._pitch,de=Math.tan(W)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.Point(0,de))},Si.prototype.getCameraQueryGeometry=function(W){var de=this.getCameraPoint();if(W.length===1)return[W[0],de];for(var J=de.x,ge=de.y,Ce=de.x,Fe=de.y,Je=0,ft=W;Je<ft.length;Je+=1){var Lt=ft[Je];J=Math.min(J,Lt.x),ge=Math.min(ge,Lt.y),Ce=Math.max(Ce,Lt.x),Fe=Math.max(Fe,Lt.y)}return[new e.Point(J,ge),new e.Point(Ce,ge),new e.Point(Ce,Fe),new e.Point(J,Fe),new e.Point(J,ge)]},Object.defineProperties(Si.prototype,Pi);function ws(he,W){var de=!1,J=null,ge=function(){J=null,de&&(he(),J=setTimeout(ge,W),de=!1)};return function(){return de=!0,J||ge(),J}}var Mo=function(W){this._hashName=W&&encodeURIComponent(W),e.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=ws(this._updateHashUnthrottled.bind(this),30*1e3/100)};Mo.prototype.addTo=function(W){return this._map=W,e.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Mo.prototype.remove=function(){return e.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Mo.prototype.getHashString=function(W){var de=this._map.getCenter(),J=Math.round(this._map.getZoom()*100)/100,ge=Math.ceil((J*Math.LN2+Math.log(512/360/.5))/Math.LN10),Ce=Math.pow(10,ge),Fe=Math.round(de.lng*Ce)/Ce,Je=Math.round(de.lat*Ce)/Ce,ft=this._map.getBearing(),Lt=this._map.getPitch(),$t="";if(W?$t+="/"+Fe+"/"+Je+"/"+J:$t+=J+"/"+Je+"/"+Fe,(ft||Lt)&&($t+="/"+Math.round(ft*10)/10),Lt&&($t+="/"+Math.round(Lt)),this._hashName){var cr=this._hashName,dr=!1,Pr=e.window.location.hash.slice(1).split("&").map(function(Yr){var Xr=Yr.split("=")[0];return Xr===cr?(dr=!0,Xr+"="+$t):Yr}).filter(function(Yr){return Yr});return dr||Pr.push(cr+"="+$t),"#"+Pr.join("&")}return"#"+$t},Mo.prototype._getCurrentHash=function(){var W=this,de=e.window.location.hash.replace("#","");if(this._hashName){var J;return de.split("&").map(function(ge){return ge.split("=")}).forEach(function(ge){ge[0]===W._hashName&&(J=ge)}),(J&&J[1]||"").split("/")}return de.split("/")},Mo.prototype._onHashChange=function(){var W=this._getCurrentHash();if(W.length>=3&&!W.some(function(J){return isNaN(J)})){var de=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(W[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+W[2],+W[1]],zoom:+W[0],bearing:de,pitch:+(W[4]||0)}),!0}return!1},Mo.prototype._updateHashUnthrottled=function(){var W=this.getHashString();try{e.window.history.replaceState(e.window.history.state,"",W)}catch{}};var Ho={linearity:.3,easing:e.bezier(0,0,.3,1)},es=e.extend({deceleration:2500,maxSpeed:1400},Ho),le=e.extend({deceleration:20,maxSpeed:1400},Ho),Te=e.extend({deceleration:1e3,maxSpeed:360},Ho),Re=e.extend({deceleration:1e3,maxSpeed:90},Ho),Ue=function(W){this._map=W,this.clear()};Ue.prototype.clear=function(){this._inertiaBuffer=[]},Ue.prototype.record=function(W){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:e.browser.now(),settings:W})},Ue.prototype._drainInertiaBuffer=function(){for(var W=this._inertiaBuffer,de=e.browser.now(),J=160;W.length>0&&de-W[0].time>J;)W.shift()},Ue.prototype._onMoveEnd=function(W){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var de={zoom:0,bearing:0,pitch:0,pan:new e.Point(0,0),pinchAround:void 0,around:void 0},J=0,ge=this._inertiaBuffer;J<ge.length;J+=1){var Ce=ge[J],Fe=Ce.settings;de.zoom+=Fe.zoomDelta||0,de.bearing+=Fe.bearingDelta||0,de.pitch+=Fe.pitchDelta||0,Fe.panDelta&&de.pan._add(Fe.panDelta),Fe.around&&(de.around=Fe.around),Fe.pinchAround&&(de.pinchAround=Fe.pinchAround)}var Je=this._inertiaBuffer[this._inertiaBuffer.length-1],ft=Je.time-this._inertiaBuffer[0].time,Lt={};if(de.pan.mag()){var $t=Qe(de.pan.mag(),ft,e.extend({},es,W||{}));Lt.offset=de.pan.mult($t.amount/de.pan.mag()),Lt.center=this._map.transform.center,Be(Lt,$t)}if(de.zoom){var cr=Qe(de.zoom,ft,le);Lt.zoom=this._map.transform.zoom+cr.amount,Be(Lt,cr)}if(de.bearing){var dr=Qe(de.bearing,ft,Te);Lt.bearing=this._map.transform.bearing+e.clamp(dr.amount,-179,179),Be(Lt,dr)}if(de.pitch){var Pr=Qe(de.pitch,ft,Re);Lt.pitch=this._map.transform.pitch+Pr.amount,Be(Lt,Pr)}if(Lt.zoom||Lt.bearing){var Yr=de.pinchAround===void 0?de.around:de.pinchAround;Lt.around=Yr?this._map.unproject(Yr):this._map.getCenter()}return this.clear(),e.extend(Lt,{noMoveStart:!0})}};function Be(he,W){(!he.duration||he.duration<W.duration)&&(he.duration=W.duration,he.easing=W.easing)}function Qe(he,W,de){var J=de.maxSpeed,ge=de.linearity,Ce=de.deceleration,Fe=e.clamp(he*ge/(W/1e3),-J,J),Je=Math.abs(Fe)/(Ce*ge);return{easing:de.easing,duration:Je*1e3,amount:Fe*(Je/2)}}var _t=function(he){function W(J,ge,Ce,Fe){Fe===void 0&&(Fe={});var Je=i.mousePos(ge.getCanvasContainer(),Ce),ft=ge.unproject(Je);he.call(this,J,e.extend({point:Je,lngLat:ft,originalEvent:Ce},Fe)),this._defaultPrevented=!1,this.target=ge}he&&(W.__proto__=he),W.prototype=Object.create(he&&he.prototype),W.prototype.constructor=W;var de={defaultPrevented:{configurable:!0}};return W.prototype.preventDefault=function(){this._defaultPrevented=!0},de.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(W.prototype,de),W}(e.Event),dt=function(he){function W(J,ge,Ce){var Fe=J==="touchend"?Ce.changedTouches:Ce.touches,Je=i.touchPos(ge.getCanvasContainer(),Fe),ft=Je.map(function(cr){return ge.unproject(cr)}),Lt=Je.reduce(function(cr,dr,Pr,Yr){return cr.add(dr.div(Yr.length))},new e.Point(0,0)),$t=ge.unproject(Lt);he.call(this,J,{points:Je,point:Lt,lngLats:ft,lngLat:$t,originalEvent:Ce}),this._defaultPrevented=!1}he&&(W.__proto__=he),W.prototype=Object.create(he&&he.prototype),W.prototype.constructor=W;var de={defaultPrevented:{configurable:!0}};return W.prototype.preventDefault=function(){this._defaultPrevented=!0},de.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(W.prototype,de),W}(e.Event),Rt=function(he){function W(J,ge,Ce){he.call(this,J,{originalEvent:Ce}),this._defaultPrevented=!1}he&&(W.__proto__=he),W.prototype=Object.create(he&&he.prototype),W.prototype.constructor=W;var de={defaultPrevented:{configurable:!0}};return W.prototype.preventDefault=function(){this._defaultPrevented=!0},de.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(W.prototype,de),W}(e.Event),Jt=function(W,de){this._map=W,this._clickTolerance=de.clickTolerance};Jt.prototype.reset=function(){delete this._mousedownPos},Jt.prototype.wheel=function(W){return this._firePreventable(new Rt(W.type,this._map,W))},Jt.prototype.mousedown=function(W,de){return this._mousedownPos=de,this._firePreventable(new _t(W.type,this._map,W))},Jt.prototype.mouseup=function(W){this._map.fire(new _t(W.type,this._map,W))},Jt.prototype.click=function(W,de){this._mousedownPos&&this._mousedownPos.dist(de)>=this._clickTolerance||this._map.fire(new _t(W.type,this._map,W))},Jt.prototype.dblclick=function(W){return this._firePreventable(new _t(W.type,this._map,W))},Jt.prototype.mouseover=function(W){this._map.fire(new _t(W.type,this._map,W))},Jt.prototype.mouseout=function(W){this._map.fire(new _t(W.type,this._map,W))},Jt.prototype.touchstart=function(W){return this._firePreventable(new dt(W.type,this._map,W))},Jt.prototype.touchmove=function(W){this._map.fire(new dt(W.type,this._map,W))},Jt.prototype.touchend=function(W){this._map.fire(new dt(W.type,this._map,W))},Jt.prototype.touchcancel=function(W){this._map.fire(new dt(W.type,this._map,W))},Jt.prototype._firePreventable=function(W){if(this._map.fire(W),W.defaultPrevented)return{}},Jt.prototype.isEnabled=function(){return!0},Jt.prototype.isActive=function(){return!1},Jt.prototype.enable=function(){},Jt.prototype.disable=function(){};var tr=function(W){this._map=W};tr.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},tr.prototype.mousemove=function(W){this._map.fire(new _t(W.type,this._map,W))},tr.prototype.mousedown=function(){this._delayContextMenu=!0},tr.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new _t("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},tr.prototype.contextmenu=function(W){this._delayContextMenu?this._contextMenuEvent=W:this._map.fire(new _t(W.type,this._map,W)),this._map.listens("contextmenu")&&W.preventDefault()},tr.prototype.isEnabled=function(){return!0},tr.prototype.isActive=function(){return!1},tr.prototype.enable=function(){},tr.prototype.disable=function(){};var rr=function(W,de){this._map=W,this._el=W.getCanvasContainer(),this._container=W.getContainer(),this._clickTolerance=de.clickTolerance||1};rr.prototype.isEnabled=function(){return!!this._enabled},rr.prototype.isActive=function(){return!!this._active},rr.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},rr.prototype.disable=function(){!this.isEnabled()||(this._enabled=!1)},rr.prototype.mousedown=function(W,de){!this.isEnabled()||!(W.shiftKey&&W.button===0)||(i.disableDrag(),this._startPos=this._lastPos=de,this._active=!0)},rr.prototype.mousemoveWindow=function(W,de){if(!!this._active){var J=de;if(!(this._lastPos.equals(J)||!this._box&&J.dist(this._startPos)<this._clickTolerance)){var ge=this._startPos;this._lastPos=J,this._box||(this._box=i.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",W));var Ce=Math.min(ge.x,J.x),Fe=Math.max(ge.x,J.x),Je=Math.min(ge.y,J.y),ft=Math.max(ge.y,J.y);i.setTransform(this._box,"translate("+Ce+"px,"+Je+"px)"),this._box.style.width=Fe-Ce+"px",this._box.style.height=ft-Je+"px"}}},rr.prototype.mouseupWindow=function(W,de){var J=this;if(!!this._active&&W.button===0){var ge=this._startPos,Ce=de;if(this.reset(),i.suppressClick(),ge.x===Ce.x&&ge.y===Ce.y)this._fireEvent("boxzoomcancel",W);else return this._map.fire(new e.Event("boxzoomend",{originalEvent:W})),{cameraAnimation:function(Fe){return Fe.fitScreenCoordinates(ge,Ce,J._map.getBearing(),{linear:!0})}}}},rr.prototype.keydown=function(W){!this._active||W.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",W))},rr.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(i.remove(this._box),this._box=null),i.enableDrag(),delete this._startPos,delete this._lastPos},rr.prototype._fireEvent=function(W,de){return this._map.fire(new e.Event(W,{originalEvent:de}))};function Er(he,W){for(var de={},J=0;J<he.length;J++)de[he[J].identifier]=W[J];return de}function qr(he){for(var W=new e.Point(0,0),de=0,J=he;de<J.length;de+=1){var ge=J[de];W._add(ge)}return W.div(he.length)}var cn=500,Dr=500,Vr=30,Kr=function(W){this.reset(),this.numTouches=W.numTouches};Kr.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Kr.prototype.touchstart=function(W,de,J){(this.centroid||J.length>this.numTouches)&&(this.aborted=!0),!this.aborted&&(this.startTime===void 0&&(this.startTime=W.timeStamp),J.length===this.numTouches&&(this.centroid=qr(de),this.touches=Er(J,de)))},Kr.prototype.touchmove=function(W,de,J){if(!(this.aborted||!this.centroid)){var ge=Er(J,de);for(var Ce in this.touches){var Fe=this.touches[Ce],Je=ge[Ce];(!Je||Je.dist(Fe)>Vr)&&(this.aborted=!0)}}},Kr.prototype.touchend=function(W,de,J){if((!this.centroid||W.timeStamp-this.startTime>Dr)&&(this.aborted=!0),J.length===0){var ge=!this.aborted&&this.centroid;if(this.reset(),ge)return ge}};var sn=function(W){this.singleTap=new Kr(W),this.numTaps=W.numTaps,this.reset()};sn.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},sn.prototype.touchstart=function(W,de,J){this.singleTap.touchstart(W,de,J)},sn.prototype.touchmove=function(W,de,J){this.singleTap.touchmove(W,de,J)},sn.prototype.touchend=function(W,de,J){var ge=this.singleTap.touchend(W,de,J);if(ge){var Ce=W.timeStamp-this.lastTime<cn,Fe=!this.lastTap||this.lastTap.dist(ge)<Vr;if((!Ce||!Fe)&&this.reset(),this.count++,this.lastTime=W.timeStamp,this.lastTap=ge,this.count===this.numTaps)return this.reset(),ge}};var un=function(){this._zoomIn=new sn({numTouches:1,numTaps:2}),this._zoomOut=new sn({numTouches:2,numTaps:1}),this.reset()};un.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},un.prototype.touchstart=function(W,de,J){this._zoomIn.touchstart(W,de,J),this._zoomOut.touchstart(W,de,J)},un.prototype.touchmove=function(W,de,J){this._zoomIn.touchmove(W,de,J),this._zoomOut.touchmove(W,de,J)},un.prototype.touchend=function(W,de,J){var ge=this,Ce=this._zoomIn.touchend(W,de,J),Fe=this._zoomOut.touchend(W,de,J);if(Ce)return this._active=!0,W.preventDefault(),setTimeout(function(){return ge.reset()},0),{cameraAnimation:function(Je){return Je.easeTo({duration:300,zoom:Je.getZoom()+1,around:Je.unproject(Ce)},{originalEvent:W})}};if(Fe)return this._active=!0,W.preventDefault(),setTimeout(function(){return ge.reset()},0),{cameraAnimation:function(Je){return Je.easeTo({duration:300,zoom:Je.getZoom()-1,around:Je.unproject(Fe)},{originalEvent:W})}}},un.prototype.touchcancel=function(){this.reset()},un.prototype.enable=function(){this._enabled=!0},un.prototype.disable=function(){this._enabled=!1,this.reset()},un.prototype.isEnabled=function(){return this._enabled},un.prototype.isActive=function(){return this._active};var Qr=0,Gn=2,ia=function(W){this.reset(),this._clickTolerance=W.clickTolerance||1};ia.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},ia.prototype._correctButton=function(W,de){return!1},ia.prototype._move=function(W,de){return{}},ia.prototype.mousedown=function(W,de){if(!this._lastPoint){var J=i.mouseButton(W);!this._correctButton(W,J)||(this._lastPoint=de,this._eventButton=J)}},ia.prototype.mousemoveWindow=function(W,de){var J=this._lastPoint;if(!!J&&(W.preventDefault(),!(!this._moved&&de.dist(J)<this._clickTolerance)))return this._moved=!0,this._lastPoint=de,this._move(J,de)},ia.prototype.mouseupWindow=function(W){var de=i.mouseButton(W);de===this._eventButton&&(this._moved&&i.suppressClick(),this.reset())},ia.prototype.enable=function(){this._enabled=!0},ia.prototype.disable=function(){this._enabled=!1,this.reset()},ia.prototype.isEnabled=function(){return this._enabled},ia.prototype.isActive=function(){return this._active};var Ma=function(he){function W(){he.apply(this,arguments)}return he&&(W.__proto__=he),W.prototype=Object.create(he&&he.prototype),W.prototype.constructor=W,W.prototype.mousedown=function(J,ge){he.prototype.mousedown.call(this,J,ge),this._lastPoint&&(this._active=!0)},W.prototype._correctButton=function(J,ge){return ge===Qr&&!J.ctrlKey},W.prototype._move=function(J,ge){return{around:ge,panDelta:ge.sub(J)}},W}(ia),la=function(he){function W(){he.apply(this,arguments)}return he&&(W.__proto__=he),W.prototype=Object.create(he&&he.prototype),W.prototype.constructor=W,W.prototype._correctButton=function(J,ge){return ge===Qr&&J.ctrlKey||ge===Gn},W.prototype._move=function(J,ge){var Ce=.8,Fe=(ge.x-J.x)*Ce;if(Fe)return this._active=!0,{bearingDelta:Fe}},W.prototype.contextmenu=function(J){J.preventDefault()},W}(ia),Pa=function(he){function W(){he.apply(this,arguments)}return he&&(W.__proto__=he),W.prototype=Object.create(he&&he.prototype),W.prototype.constructor=W,W.prototype._correctButton=function(J,ge){return ge===Qr&&J.ctrlKey||ge===Gn},W.prototype._move=function(J,ge){var Ce=-.5,Fe=(ge.y-J.y)*Ce;if(Fe)return this._active=!0,{pitchDelta:Fe}},W.prototype.contextmenu=function(J){J.preventDefault()},W}(ia),fa=function(W){this._minTouches=1,this._clickTolerance=W.clickTolerance||1,this.reset()};fa.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new e.Point(0,0)},fa.prototype.touchstart=function(W,de,J){return this._calculateTransform(W,de,J)},fa.prototype.touchmove=function(W,de,J){if(!!this._active)return W.preventDefault(),this._calculateTransform(W,de,J)},fa.prototype.touchend=function(W,de,J){this._calculateTransform(W,de,J),this._active&&J.length<this._minTouches&&this.reset()},fa.prototype.touchcancel=function(){this.reset()},fa.prototype._calculateTransform=function(W,de,J){J.length>0&&(this._active=!0);var ge=Er(J,de),Ce=new e.Point(0,0),Fe=new e.Point(0,0),Je=0;for(var ft in ge){var Lt=ge[ft],$t=this._touches[ft];$t&&(Ce._add(Lt),Fe._add(Lt.sub($t)),Je++,ge[ft]=Lt)}if(this._touches=ge,!(Je<this._minTouches||!Fe.mag())){var cr=Fe.div(Je);if(this._sum._add(cr),!(this._sum.mag()<this._clickTolerance)){var dr=Ce.div(Je);return{around:dr,panDelta:cr}}}},fa.prototype.enable=function(){this._enabled=!0},fa.prototype.disable=function(){this._enabled=!1,this.reset()},fa.prototype.isEnabled=function(){return this._enabled},fa.prototype.isActive=function(){return this._active};var Ga=function(){this.reset()};Ga.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Ga.prototype._start=function(W){},Ga.prototype._move=function(W,de,J){return{}},Ga.prototype.touchstart=function(W,de,J){this._firstTwoTouches||J.length<2||(this._firstTwoTouches=[J[0].identifier,J[1].identifier],this._start([de[0],de[1]]))},Ga.prototype.touchmove=function(W,de,J){if(!!this._firstTwoTouches){W.preventDefault();var ge=this._firstTwoTouches,Ce=ge[0],Fe=ge[1],Je=Fa(J,de,Ce),ft=Fa(J,de,Fe);if(!(!Je||!ft)){var Lt=this._aroundCenter?null:Je.add(ft).div(2);return this._move([Je,ft],Lt,W)}}},Ga.prototype.touchend=function(W,de,J){if(!!this._firstTwoTouches){var ge=this._firstTwoTouches,Ce=ge[0],Fe=ge[1],Je=Fa(J,de,Ce),ft=Fa(J,de,Fe);Je&&ft||(this._active&&i.suppressClick(),this.reset())}},Ga.prototype.touchcancel=function(){this.reset()},Ga.prototype.enable=function(W){this._enabled=!0,this._aroundCenter=!!W&&W.around==="center"},Ga.prototype.disable=function(){this._enabled=!1,this.reset()},Ga.prototype.isEnabled=function(){return this._enabled},Ga.prototype.isActive=function(){return this._active};function Fa(he,W,de){for(var J=0;J<he.length;J++)if(he[J].identifier===de)return W[J]}var ri=.1;function Ti(he,W){return Math.log(he/W)/Math.LN2}var _o=function(he){function W(){he.apply(this,arguments)}return he&&(W.__proto__=he),W.prototype=Object.create(he&&he.prototype),W.prototype.constructor=W,W.prototype.reset=function(){he.prototype.reset.call(this),delete this._distance,delete this._startDistance},W.prototype._start=function(J){this._startDistance=this._distance=J[0].dist(J[1])},W.prototype._move=function(J,ge){var Ce=this._distance;if(this._distance=J[0].dist(J[1]),!(!this._active&&Math.abs(Ti(this._distance,this._startDistance))<ri))return this._active=!0,{zoomDelta:Ti(this._distance,Ce),pinchAround:ge}},W}(Ga),Hi=25;function va(he,W){return he.angleWith(W)*180/Math.PI}var li=function(he){function W(){he.apply(this,arguments)}return he&&(W.__proto__=he),W.prototype=Object.create(he&&he.prototype),W.prototype.constructor=W,W.prototype.reset=function(){he.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},W.prototype._start=function(J){this._startVector=this._vector=J[0].sub(J[1]),this._minDiameter=J[0].dist(J[1])},W.prototype._move=function(J,ge){var Ce=this._vector;if(this._vector=J[0].sub(J[1]),!(!this._active&&this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:va(this._vector,Ce),pinchAround:ge}},W.prototype._isBelowThreshold=function(J){this._minDiameter=Math.min(this._minDiameter,J.mag());var ge=Math.PI*this._minDiameter,Ce=Hi/ge*360,Fe=va(J,this._startVector);return Math.abs(Fe)<Ce},W}(Ga);function Ja(he){return Math.abs(he.y)>Math.abs(he.x)}var Di=100,fi=function(he){function W(){he.apply(this,arguments)}return he&&(W.__proto__=he),W.prototype=Object.create(he&&he.prototype),W.prototype.constructor=W,W.prototype.reset=function(){he.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},W.prototype._start=function(J){this._lastPoints=J,Ja(J[0].sub(J[1]))&&(this._valid=!1)},W.prototype._move=function(J,ge,Ce){var Fe=J[0].sub(this._lastPoints[0]),Je=J[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(Fe,Je,Ce.timeStamp),!!this._valid){this._lastPoints=J,this._active=!0;var ft=(Fe.y+Je.y)/2,Lt=-.5;return{pitchDelta:ft*Lt}}},W.prototype.gestureBeginsVertically=function(J,ge,Ce){if(this._valid!==void 0)return this._valid;var Fe=2,Je=J.mag()>=Fe,ft=ge.mag()>=Fe;if(!(!Je&&!ft)){if(!Je||!ft)return this._firstMove===void 0&&(this._firstMove=Ce),Ce-this._firstMove<Di?void 0:!1;var Lt=J.y>0==ge.y>0;return Ja(J)&&Ja(ge)&&Lt}},W}(Ga),go={panStep:100,bearingStep:15,pitchStep:10},oo=function(){var W=go;this._panStep=W.panStep,this._bearingStep=W.bearingStep,this._pitchStep=W.pitchStep};oo.prototype.reset=function(){this._active=!1},oo.prototype.keydown=function(W){var de=this;if(!(W.altKey||W.ctrlKey||W.metaKey)){var J=0,ge=0,Ce=0,Fe=0,Je=0;switch(W.keyCode){case 61:case 107:case 171:case 187:J=1;break;case 189:case 109:case 173:J=-1;break;case 37:W.shiftKey?ge=-1:(W.preventDefault(),Fe=-1);break;case 39:W.shiftKey?ge=1:(W.preventDefault(),Fe=1);break;case 38:W.shiftKey?Ce=1:(W.preventDefault(),Je=-1);break;case 40:W.shiftKey?Ce=-1:(W.preventDefault(),Je=1);break;default:return}return{cameraAnimation:function(ft){var Lt=ft.getZoom();ft.easeTo({duration:300,easeId:"keyboardHandler",easing:So,zoom:J?Math.round(Lt)+J*(W.shiftKey?2:1):Lt,bearing:ft.getBearing()+ge*de._bearingStep,pitch:ft.getPitch()+Ce*de._pitchStep,offset:[-Fe*de._panStep,-Je*de._panStep],center:ft.getCenter()},{originalEvent:W})}}}},oo.prototype.enable=function(){this._enabled=!0},oo.prototype.disable=function(){this._enabled=!1,this.reset()},oo.prototype.isEnabled=function(){return this._enabled},oo.prototype.isActive=function(){return this._active};function So(he){return he*(2-he)}var ts=4.000244140625,jo=1/100,rs=1/450,Qi=2,Xi=function(W,de){this._map=W,this._el=W.getCanvasContainer(),this._handler=de,this._delta=0,this._defaultZoomRate=jo,this._wheelZoomRate=rs,e.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};Xi.prototype.setZoomRate=function(W){this._defaultZoomRate=W},Xi.prototype.setWheelZoomRate=function(W){this._wheelZoomRate=W},Xi.prototype.isEnabled=function(){return!!this._enabled},Xi.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},Xi.prototype.isZooming=function(){return!!this._zooming},Xi.prototype.enable=function(W){this.isEnabled()||(this._enabled=!0,this._aroundCenter=W&&W.around==="center")},Xi.prototype.disable=function(){!this.isEnabled()||(this._enabled=!1)},Xi.prototype.wheel=function(W){if(!!this.isEnabled()){var de=W.deltaMode===e.window.WheelEvent.DOM_DELTA_LINE?W.deltaY*40:W.deltaY,J=e.browser.now(),ge=J-(this._lastWheelEventTime||0);this._lastWheelEventTime=J,de!==0&&de%ts===0?this._type="wheel":de!==0&&Math.abs(de)<4?this._type="trackpad":ge>400?(this._type=null,this._lastValue=de,this._timeout=setTimeout(this._onTimeout,40,W)):this._type||(this._type=Math.abs(ge*de)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,de+=this._lastValue)),W.shiftKey&&de&&(de=de/4),this._type&&(this._lastWheelEvent=W,this._delta-=de,this._active||this._start(W)),W.preventDefault()}},Xi.prototype._onTimeout=function(W){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(W)},Xi.prototype._start=function(W){if(!!this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var de=i.mousePos(this._el,W);this._around=e.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(de)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},Xi.prototype.renderFrame=function(){return this._onScrollFrame()},Xi.prototype._onScrollFrame=function(){var W=this;if(!!this._frameId&&(this._frameId=null,!!this.isActive())){var de=this._map.transform;if(this._delta!==0){var J=this._type==="wheel"&&Math.abs(this._delta)>ts?this._wheelZoomRate:this._defaultZoomRate,ge=Qi/(1+Math.exp(-Math.abs(this._delta*J)));this._delta<0&&ge!==0&&(ge=1/ge);var Ce=typeof this._targetZoom=="number"?de.zoomScale(this._targetZoom):de.scale;this._targetZoom=Math.min(de.maxZoom,Math.max(de.minZoom,de.scaleZoom(Ce*ge))),this._type==="wheel"&&(this._startZoom=de.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var Fe=typeof this._targetZoom=="number"?this._targetZoom:de.zoom,Je=this._startZoom,ft=this._easing,Lt=!1,$t;if(this._type==="wheel"&&Je&&ft){var cr=Math.min((e.browser.now()-this._lastWheelEventTime)/200,1),dr=ft(cr);$t=e.number(Je,Fe,dr),cr<1?this._frameId||(this._frameId=!0):Lt=!0}else $t=Fe,Lt=!0;return this._active=!0,Lt&&(this._active=!1,this._finishTimeout=setTimeout(function(){W._zooming=!1,W._handler._triggerRenderFrame(),delete W._targetZoom,delete W._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!Lt,zoomDelta:$t-de.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},Xi.prototype._smoothOutEasing=function(W){var de=e.ease;if(this._prevEase){var J=this._prevEase,ge=(e.browser.now()-J.start)/J.duration,Ce=J.easing(ge+.01)-J.easing(ge),Fe=.27/Math.sqrt(Ce*Ce+1e-4)*.01,Je=Math.sqrt(.27*.27-Fe*Fe);de=e.bezier(Fe,Je,.25,1)}return this._prevEase={start:e.browser.now(),duration:W,easing:de},de},Xi.prototype.reset=function(){this._active=!1};var Oa=function(W,de){this._clickZoom=W,this._tapZoom=de};Oa.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Oa.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Oa.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Oa.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Qa=function(){this.reset()};Qa.prototype.reset=function(){this._active=!1},Qa.prototype.dblclick=function(W,de){return W.preventDefault(),{cameraAnimation:function(J){J.easeTo({duration:300,zoom:J.getZoom()+(W.shiftKey?-1:1),around:J.unproject(de)},{originalEvent:W})}}},Qa.prototype.enable=function(){this._enabled=!0},Qa.prototype.disable=function(){this._enabled=!1,this.reset()},Qa.prototype.isEnabled=function(){return this._enabled},Qa.prototype.isActive=function(){return this._active};var ko=function(){this._tap=new sn({numTouches:1,numTaps:1}),this.reset()};ko.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},ko.prototype.touchstart=function(W,de,J){this._swipePoint||(this._tapTime&&W.timeStamp-this._tapTime>cn&&this.reset(),this._tapTime?J.length>0&&(this._swipePoint=de[0],this._swipeTouch=J[0].identifier):this._tap.touchstart(W,de,J))},ko.prototype.touchmove=function(W,de,J){if(!this._tapTime)this._tap.touchmove(W,de,J);else if(this._swipePoint){if(J[0].identifier!==this._swipeTouch)return;var ge=de[0],Ce=ge.y-this._swipePoint.y;return this._swipePoint=ge,W.preventDefault(),this._active=!0,{zoomDelta:Ce/128}}},ko.prototype.touchend=function(W,de,J){if(this._tapTime)this._swipePoint&&J.length===0&&this.reset();else{var ge=this._tap.touchend(W,de,J);ge&&(this._tapTime=W.timeStamp)}},ko.prototype.touchcancel=function(){this.reset()},ko.prototype.enable=function(){this._enabled=!0},ko.prototype.disable=function(){this._enabled=!1,this.reset()},ko.prototype.isEnabled=function(){return this._enabled},ko.prototype.isActive=function(){return this._active};var co=function(W,de,J){this._el=W,this._mousePan=de,this._touchPan=J};co.prototype.enable=function(W){this._inertiaOptions=W||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},co.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},co.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},co.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Go=function(W,de,J){this._pitchWithRotate=W.pitchWithRotate,this._mouseRotate=de,this._mousePitch=J};Go.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Go.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Go.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Go.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var eo=function(W,de,J,ge){this._el=W,this._touchZoom=de,this._touchRotate=J,this._tapDragZoom=ge,this._rotationDisabled=!1,this._enabled=!0};eo.prototype.enable=function(W){this._touchZoom.enable(W),this._rotationDisabled||this._touchRotate.enable(W),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},eo.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},eo.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},eo.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},eo.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},eo.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var ns=function(he){return he.zoom||he.drag||he.pitch||he.rotate},Ps=function(he){function W(){he.apply(this,arguments)}return he&&(W.__proto__=he),W.prototype=Object.create(he&&he.prototype),W.prototype.constructor=W,W}(e.Event);function fu(he){return he.panDelta&&he.panDelta.mag()||he.zoomDelta||he.bearingDelta||he.pitchDelta}var to=function(W,de){this._map=W,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ue(W),this._bearingSnap=de.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(de),e.bindAll(["handleEvent","handleWindowEvent"],this);var J=this._el;this._listeners=[[J,"touchstart",{passive:!1}],[J,"touchmove",{passive:!1}],[J,"touchend",void 0],[J,"touchcancel",void 0],[J,"mousedown",void 0],[J,"mousemove",void 0],[J,"mouseup",void 0],[e.window.document,"mousemove",{capture:!0}],[e.window.document,"mouseup",void 0],[J,"mouseover",void 0],[J,"mouseout",void 0],[J,"dblclick",void 0],[J,"click",void 0],[J,"keydown",{capture:!1}],[J,"keyup",void 0],[J,"wheel",{passive:!1}],[J,"contextmenu",void 0],[e.window,"blur",void 0]];for(var ge=0,Ce=this._listeners;ge<Ce.length;ge+=1){var Fe=Ce[ge],Je=Fe[0],ft=Fe[1],Lt=Fe[2];i.addEventListener(Je,ft,Je===e.window.document?this.handleWindowEvent:this.handleEvent,Lt)}};to.prototype.destroy=function(){for(var W=0,de=this._listeners;W<de.length;W+=1){var J=de[W],ge=J[0],Ce=J[1],Fe=J[2];i.removeEventListener(ge,Ce,ge===e.window.document?this.handleWindowEvent:this.handleEvent,Fe)}},to.prototype._addDefaultHandlers=function(W){var de=this._map,J=de.getCanvasContainer();this._add("mapEvent",new Jt(de,W));var ge=de.boxZoom=new rr(de,W);this._add("boxZoom",ge);var Ce=new un,Fe=new Qa;de.doubleClickZoom=new Oa(Fe,Ce),this._add("tapZoom",Ce),this._add("clickZoom",Fe);var Je=new ko;this._add("tapDragZoom",Je);var ft=de.touchPitch=new fi;this._add("touchPitch",ft);var Lt=new la(W),$t=new Pa(W);de.dragRotate=new Go(W,Lt,$t),this._add("mouseRotate",Lt,["mousePitch"]),this._add("mousePitch",$t,["mouseRotate"]);var cr=new Ma(W),dr=new fa(W);de.dragPan=new co(J,cr,dr),this._add("mousePan",cr),this._add("touchPan",dr,["touchZoom","touchRotate"]);var Pr=new li,Yr=new _o;de.touchZoomRotate=new eo(J,Yr,Pr,Je),this._add("touchRotate",Pr,["touchPan","touchZoom"]),this._add("touchZoom",Yr,["touchPan","touchRotate"]);var Xr=de.scrollZoom=new Xi(de,this);this._add("scrollZoom",Xr,["mousePan"]);var Hr=de.keyboard=new oo;this._add("keyboard",Hr),this._add("blockableMapEvent",new tr(de));for(var $r=0,pn=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];$r<pn.length;$r+=1){var Pn=pn[$r];W.interactive&&W[Pn]&&de[Pn].enable(W[Pn])}},to.prototype._add=function(W,de,J){this._handlers.push({handlerName:W,handler:de,allowed:J}),this._handlersById[W]=de},to.prototype.stop=function(){if(!this._updatingCamera){for(var W=0,de=this._handlers;W<de.length;W+=1){var J=de[W],ge=J.handler;ge.reset()}this._inertia.clear(),this._fireEvents({},{}),this._changes=[]}},to.prototype.isActive=function(){for(var W=0,de=this._handlers;W<de.length;W+=1){var J=de[W],ge=J.handler;if(ge.isActive())return!0}return!1},to.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},to.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},to.prototype.isMoving=function(){return Boolean(ns(this._eventsInProgress))||this.isZooming()},to.prototype._blockedByActive=function(W,de,J){for(var ge in W)if(ge!==J&&(!de||de.indexOf(ge)<0))return!0;return!1},to.prototype.handleWindowEvent=function(W){this.handleEvent(W,W.type+"Window")},to.prototype._getMapTouches=function(W){for(var de=[],J=0,ge=W;J<ge.length;J+=1){var Ce=ge[J],Fe=Ce.target;this._el.contains(Fe)&&de.push(Ce)}return de},to.prototype.handleEvent=function(W,de){if(W.type==="blur"){this.stop();return}this._updatingCamera=!0;for(var J=W.type==="renderFrame"?void 0:W,ge={needsRenderFrame:!1},Ce={},Fe={},Je=W.touches?this._getMapTouches(W.touches):void 0,ft=Je?i.touchPos(this._el,Je):i.mousePos(this._el,W),Lt=0,$t=this._handlers;Lt<$t.length;Lt+=1){var cr=$t[Lt],dr=cr.handlerName,Pr=cr.handler,Yr=cr.allowed;if(!!Pr.isEnabled()){var Xr=void 0;this._blockedByActive(Fe,Yr,dr)?Pr.reset():Pr[de||W.type]&&(Xr=Pr[de||W.type](W,ft,Je),this.mergeHandlerResult(ge,Ce,Xr,dr,J),Xr&&Xr.needsRenderFrame&&this._triggerRenderFrame()),(Xr||Pr.isActive())&&(Fe[dr]=Pr)}}var Hr={};for(var $r in this._previousActiveHandlers)Fe[$r]||(Hr[$r]=J);this._previousActiveHandlers=Fe,(Object.keys(Hr).length||fu(ge))&&(this._changes.push([ge,Ce,Hr]),this._triggerRenderFrame()),(Object.keys(Fe).length||fu(ge))&&this._map._stop(!0),this._updatingCamera=!1;var pn=ge.cameraAnimation;pn&&(this._inertia.clear(),this._fireEvents({},{}),this._changes=[],pn(this._map))},to.prototype.mergeHandlerResult=function(W,de,J,ge,Ce){if(!!J){e.extend(W,J);var Fe={handlerName:ge,originalEvent:J.originalEvent||Ce};J.zoomDelta!==void 0&&(de.zoom=Fe),J.panDelta!==void 0&&(de.drag=Fe),J.pitchDelta!==void 0&&(de.pitch=Fe),J.bearingDelta!==void 0&&(de.rotate=Fe)}},to.prototype._applyChanges=function(){for(var W={},de={},J={},ge=0,Ce=this._changes;ge<Ce.length;ge+=1){var Fe=Ce[ge],Je=Fe[0],ft=Fe[1],Lt=Fe[2];Je.panDelta&&(W.panDelta=(W.panDelta||new e.Point(0,0))._add(Je.panDelta)),Je.zoomDelta&&(W.zoomDelta=(W.zoomDelta||0)+Je.zoomDelta),Je.bearingDelta&&(W.bearingDelta=(W.bearingDelta||0)+Je.bearingDelta),Je.pitchDelta&&(W.pitchDelta=(W.pitchDelta||0)+Je.pitchDelta),Je.around!==void 0&&(W.around=Je.around),Je.pinchAround!==void 0&&(W.pinchAround=Je.pinchAround),Je.noInertia&&(W.noInertia=Je.noInertia),e.extend(de,ft),e.extend(J,Lt)}this._updateMapTransform(W,de,J),this._changes=[]},to.prototype._updateMapTransform=function(W,de,J){var ge=this._map,Ce=ge.transform;if(!fu(W))return this._fireEvents(de,J);var Fe=W.panDelta,Je=W.zoomDelta,ft=W.bearingDelta,Lt=W.pitchDelta,$t=W.around,cr=W.pinchAround;cr!==void 0&&($t=cr),ge._stop(!0),$t=$t||ge.transform.centerPoint;var dr=Ce.pointLocation(Fe?$t.sub(Fe):$t);ft&&(Ce.bearing+=ft),Lt&&(Ce.pitch+=Lt),Je&&(Ce.zoom+=Je),Ce.setLocationAtPoint(dr,$t),this._map._update(),W.noInertia||this._inertia.record(W),this._fireEvents(de,J)},to.prototype._fireEvents=function(W,de){var J=this,ge=ns(this._eventsInProgress),Ce=ns(W),Fe={};for(var Je in W){var ft=W[Je],Lt=ft.originalEvent;this._eventsInProgress[Je]||(Fe[Je+"start"]=Lt),this._eventsInProgress[Je]=W[Je]}!ge&&Ce&&this._fireEvent("movestart",Ce.originalEvent);for(var $t in Fe)this._fireEvent($t,Fe[$t]);W.rotate&&(this._bearingChanged=!0),Ce&&this._fireEvent("move",Ce.originalEvent);for(var cr in W){var dr=W[cr],Pr=dr.originalEvent;this._fireEvent(cr,Pr)}var Yr={},Xr;for(var Hr in this._eventsInProgress){var $r=this._eventsInProgress[Hr],pn=$r.handlerName,Pn=$r.originalEvent;this._handlersById[pn].isActive()||(delete this._eventsInProgress[Hr],Xr=de[pn]||Pn,Yr[Hr+"end"]=Xr)}for(var On in Yr)this._fireEvent(On,Yr[On]);var $n=ns(this._eventsInProgress);if((ge||Ce)&&!$n){this._updatingCamera=!0;var ra=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ea=function(pa){return pa!==0&&-J._bearingSnap<pa&&pa<J._bearingSnap};ra?(ea(ra.bearing||this._map.getBearing())&&(ra.bearing=0),this._map.easeTo(ra,{originalEvent:Xr})):(this._map.fire(new e.Event("moveend",{originalEvent:Xr})),ea(this._map.getBearing())&&this._map.resetNorth()),this._bearingChanged=!1,this._updatingCamera=!1}},to.prototype._fireEvent=function(W,de){this._map.fire(new e.Event(W,de?{originalEvent:de}:{}))},to.prototype._triggerRenderFrame=function(){var W=this;this._frameId===void 0&&(this._frameId=this._map._requestRenderFrame(function(de){delete W._frameId,W.handleEvent(new Ps("renderFrame",{timeStamp:de})),W._applyChanges()}))};var sf=function(he){function W(de,J){he.call(this),this._moving=!1,this._zooming=!1,this.transform=de,this._bearingSnap=J.bearingSnap,e.bindAll(["_renderFrameCallback"],this)}return he&&(W.__proto__=he),W.prototype=Object.create(he&&he.prototype),W.prototype.constructor=W,W.prototype.getCenter=function(){return new e.LngLat(this.transform.center.lng,this.transform.center.lat)},W.prototype.setCenter=function(J,ge){return this.jumpTo({center:J},ge)},W.prototype.panBy=function(J,ge,Ce){return J=e.Point.convert(J).mult(-1),this.panTo(this.transform.center,e.extend({offset:J},ge),Ce)},W.prototype.panTo=function(J,ge,Ce){return this.easeTo(e.extend({center:J},ge),Ce)},W.prototype.getZoom=function(){return this.transform.zoom},W.prototype.setZoom=function(J,ge){return this.jumpTo({zoom:J},ge),this},W.prototype.zoomTo=function(J,ge,Ce){return this.easeTo(e.extend({zoom:J},ge),Ce)},W.prototype.zoomIn=function(J,ge){return this.zoomTo(this.getZoom()+1,J,ge),this},W.prototype.zoomOut=function(J,ge){return this.zoomTo(this.getZoom()-1,J,ge),this},W.prototype.getBearing=function(){return this.transform.bearing},W.prototype.setBearing=function(J,ge){return this.jumpTo({bearing:J},ge),this},W.prototype.getPadding=function(){return this.transform.padding},W.prototype.setPadding=function(J,ge){return this.jumpTo({padding:J},ge),this},W.prototype.rotateTo=function(J,ge,Ce){return this.easeTo(e.extend({bearing:J},ge),Ce)},W.prototype.resetNorth=function(J,ge){return this.rotateTo(0,e.extend({duration:1e3},J),ge),this},W.prototype.resetNorthPitch=function(J,ge){return this.easeTo(e.extend({bearing:0,pitch:0,duration:1e3},J),ge),this},W.prototype.snapToNorth=function(J,ge){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(J,ge):this},W.prototype.getPitch=function(){return this.transform.pitch},W.prototype.setPitch=function(J,ge){return this.jumpTo({pitch:J},ge),this},W.prototype.cameraForBounds=function(J,ge){return J=e.LngLatBounds.convert(J),this._cameraForBoxAndBearing(J.getNorthWest(),J.getSouthEast(),0,ge)},W.prototype._cameraForBoxAndBearing=function(J,ge,Ce,Fe){var Je={top:0,bottom:0,right:0,left:0};if(Fe=e.extend({padding:Je,offset:[0,0],maxZoom:this.transform.maxZoom},Fe),typeof Fe.padding=="number"){var ft=Fe.padding;Fe.padding={top:ft,bottom:ft,right:ft,left:ft}}Fe.padding=e.extend(Je,Fe.padding);var Lt=this.transform,$t=Lt.padding,cr=Lt.project(e.LngLat.convert(J)),dr=Lt.project(e.LngLat.convert(ge)),Pr=cr.rotate(-Ce*Math.PI/180),Yr=dr.rotate(-Ce*Math.PI/180),Xr=new e.Point(Math.max(Pr.x,Yr.x),Math.max(Pr.y,Yr.y)),Hr=new e.Point(Math.min(Pr.x,Yr.x),Math.min(Pr.y,Yr.y)),$r=Xr.sub(Hr),pn=(Lt.width-($t.left+$t.right+Fe.padding.left+Fe.padding.right))/$r.x,Pn=(Lt.height-($t.top+$t.bottom+Fe.padding.top+Fe.padding.bottom))/$r.y;if(Pn<0||pn<0){e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");return}var On=Math.min(Lt.scaleZoom(Lt.scale*Math.min(pn,Pn)),Fe.maxZoom),$n=e.Point.convert(Fe.offset),ra=(Fe.padding.left-Fe.padding.right)/2,ea=(Fe.padding.top-Fe.padding.bottom)/2,pa=new e.Point($n.x+ra,$n.y+ea),Aa=pa.mult(Lt.scale/Lt.zoomScale(On)),_a=Lt.unproject(cr.add(dr).div(2).sub(Aa));return{center:_a,zoom:On,bearing:Ce}},W.prototype.fitBounds=function(J,ge,Ce){return this._fitInternal(this.cameraForBounds(J,ge),ge,Ce)},W.prototype.fitScreenCoordinates=function(J,ge,Ce,Fe,Je){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(e.Point.convert(J)),this.transform.pointLocation(e.Point.convert(ge)),Ce,Fe),Fe,Je)},W.prototype._fitInternal=function(J,ge,Ce){return J?(ge=e.extend(J,ge),delete ge.padding,ge.linear?this.easeTo(ge,Ce):this.flyTo(ge,Ce)):this},W.prototype.jumpTo=function(J,ge){this.stop();var Ce=this.transform,Fe=!1,Je=!1,ft=!1;return"zoom"in J&&Ce.zoom!==+J.zoom&&(Fe=!0,Ce.zoom=+J.zoom),J.center!==void 0&&(Ce.center=e.LngLat.convert(J.center)),"bearing"in J&&Ce.bearing!==+J.bearing&&(Je=!0,Ce.bearing=+J.bearing),"pitch"in J&&Ce.pitch!==+J.pitch&&(ft=!0,Ce.pitch=+J.pitch),J.padding!=null&&!Ce.isPaddingEqual(J.padding)&&(Ce.padding=J.padding),this.fire(new e.Event("movestart",ge)).fire(new e.Event("move",ge)),Fe&&this.fire(new e.Event("zoomstart",ge)).fire(new e.Event("zoom",ge)).fire(new e.Event("zoomend",ge)),Je&&this.fire(new e.Event("rotatestart",ge)).fire(new e.Event("rotate",ge)).fire(new e.Event("rotateend",ge)),ft&&this.fire(new e.Event("pitchstart",ge)).fire(new e.Event("pitch",ge)).fire(new e.Event("pitchend",ge)),this.fire(new e.Event("moveend",ge))},W.prototype.easeTo=function(J,ge){var Ce=this;this._stop(!1,J.easeId),J=e.extend({offset:[0,0],duration:500,easing:e.ease},J),(J.animate===!1||!J.essential&&e.browser.prefersReducedMotion)&&(J.duration=0);var Fe=this.transform,Je=this.getZoom(),ft=this.getBearing(),Lt=this.getPitch(),$t=this.getPadding(),cr="zoom"in J?+J.zoom:Je,dr="bearing"in J?this._normalizeBearing(J.bearing,ft):ft,Pr="pitch"in J?+J.pitch:Lt,Yr="padding"in J?J.padding:Fe.padding,Xr=e.Point.convert(J.offset),Hr=Fe.centerPoint.add(Xr),$r=Fe.pointLocation(Hr),pn=e.LngLat.convert(J.center||$r);this._normalizeCenter(pn);var Pn=Fe.project($r),On=Fe.project(pn).sub(Pn),$n=Fe.zoomScale(cr-Je),ra,ea;J.around&&(ra=e.LngLat.convert(J.around),ea=Fe.locationPoint(ra));var pa={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||cr!==Je,this._rotating=this._rotating||ft!==dr,this._pitching=this._pitching||Pr!==Lt,this._padding=!Fe.isPaddingEqual(Yr),this._easeId=J.easeId,this._prepareEase(ge,J.noMoveStart,pa),clearTimeout(this._easeEndTimeoutID),this._ease(function(Aa){if(Ce._zooming&&(Fe.zoom=e.number(Je,cr,Aa)),Ce._rotating&&(Fe.bearing=e.number(ft,dr,Aa)),Ce._pitching&&(Fe.pitch=e.number(Lt,Pr,Aa)),Ce._padding&&(Fe.interpolatePadding($t,Yr,Aa),Hr=Fe.centerPoint.add(Xr)),ra)Fe.setLocationAtPoint(ra,ea);else{var _a=Fe.zoomScale(Fe.zoom-Je),Ea=cr>Je?Math.min(2,$n):Math.max(.5,$n),Ra=Math.pow(Ea,1-Aa),Wa=Fe.unproject(Pn.add(On.mult(Aa*Ra)).mult(_a));Fe.setLocationAtPoint(Fe.renderWorldCopies?Wa.wrap():Wa,Hr)}Ce._fireMoveEvents(ge)},function(Aa){Ce._afterEase(ge,Aa)},J),this},W.prototype._prepareEase=function(J,ge,Ce){Ce===void 0&&(Ce={}),this._moving=!0,!ge&&!Ce.moving&&this.fire(new e.Event("movestart",J)),this._zooming&&!Ce.zooming&&this.fire(new e.Event("zoomstart",J)),this._rotating&&!Ce.rotating&&this.fire(new e.Event("rotatestart",J)),this._pitching&&!Ce.pitching&&this.fire(new e.Event("pitchstart",J))},W.prototype._fireMoveEvents=function(J){this.fire(new e.Event("move",J)),this._zooming&&this.fire(new e.Event("zoom",J)),this._rotating&&this.fire(new e.Event("rotate",J)),this._pitching&&this.fire(new e.Event("pitch",J))},W.prototype._afterEase=function(J,ge){if(!(this._easeId&&ge&&this._easeId===ge)){delete this._easeId;var Ce=this._zooming,Fe=this._rotating,Je=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,Ce&&this.fire(new e.Event("zoomend",J)),Fe&&this.fire(new e.Event("rotateend",J)),Je&&this.fire(new e.Event("pitchend",J)),this.fire(new e.Event("moveend",J))}},W.prototype.flyTo=function(J,ge){var Ce=this;if(!J.essential&&e.browser.prefersReducedMotion){var Fe=e.pick(J,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Fe,ge)}this.stop(),J=e.extend({offset:[0,0],speed:1.2,curve:1.42,easing:e.ease},J);var Je=this.transform,ft=this.getZoom(),Lt=this.getBearing(),$t=this.getPitch(),cr=this.getPadding(),dr="zoom"in J?e.clamp(+J.zoom,Je.minZoom,Je.maxZoom):ft,Pr="bearing"in J?this._normalizeBearing(J.bearing,Lt):Lt,Yr="pitch"in J?+J.pitch:$t,Xr="padding"in J?J.padding:Je.padding,Hr=Je.zoomScale(dr-ft),$r=e.Point.convert(J.offset),pn=Je.centerPoint.add($r),Pn=Je.pointLocation(pn),On=e.LngLat.convert(J.center||Pn);this._normalizeCenter(On);var $n=Je.project(Pn),ra=Je.project(On).sub($n),ea=J.curve,pa=Math.max(Je.width,Je.height),Aa=pa/Hr,_a=ra.mag();if("minZoom"in J){var Ea=e.clamp(Math.min(J.minZoom,ft,dr),Je.minZoom,Je.maxZoom),Ra=pa/Je.zoomScale(Ea-ft);ea=Math.sqrt(Ra/_a*2)}var Wa=ea*ea;function si(ui){var Ci=(Aa*Aa-pa*pa+(ui?-1:1)*Wa*Wa*_a*_a)/(2*(ui?Aa:pa)*Wa*_a);return Math.log(Math.sqrt(Ci*Ci+1)-Ci)}function zi(ui){return(Math.exp(ui)-Math.exp(-ui))/2}function vi(ui){return(Math.exp(ui)+Math.exp(-ui))/2}function bi(ui){return zi(ui)/vi(ui)}var Ha=si(0),Ni=function(ui){return vi(Ha)/vi(Ha+ea*ui)},Gi=function(ui){return pa*((vi(Ha)*bi(Ha+ea*ui)-zi(Ha))/Wa)/_a},Zi=(si(1)-Ha)/ea;if(Math.abs(_a)<1e-6||!isFinite(Zi)){if(Math.abs(pa-Aa)<1e-6)return this.easeTo(J,ge);var Ei=Aa<pa?-1:1;Zi=Math.abs(Math.log(Aa/pa))/ea,Gi=function(){return 0},Ni=function(ui){return Math.exp(Ei*ea*ui)}}if("duration"in J)J.duration=+J.duration;else{var ro="screenSpeed"in J?+J.screenSpeed/ea:+J.speed;J.duration=1e3*Zi/ro}return J.maxDuration&&J.duration>J.maxDuration&&(J.duration=0),this._zooming=!0,this._rotating=Lt!==Pr,this._pitching=Yr!==$t,this._padding=!Je.isPaddingEqual(Xr),this._prepareEase(ge,!1),this._ease(function(ui){var Ci=ui*Zi,Po=1/Ni(Ci);Je.zoom=ui===1?dr:ft+Je.scaleZoom(Po),Ce._rotating&&(Je.bearing=e.number(Lt,Pr,ui)),Ce._pitching&&(Je.pitch=e.number($t,Yr,ui)),Ce._padding&&(Je.interpolatePadding(cr,Xr,ui),pn=Je.centerPoint.add($r));var Ko=ui===1?On:Je.unproject($n.add(ra.mult(Gi(Ci))).mult(Po));Je.setLocationAtPoint(Je.renderWorldCopies?Ko.wrap():Ko,pn),Ce._fireMoveEvents(ge)},function(){return Ce._afterEase(ge)},J),this},W.prototype.isEasing=function(){return!!this._easeFrameId},W.prototype.stop=function(){return this._stop()},W.prototype._stop=function(J,ge){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var Ce=this._onEaseEnd;delete this._onEaseEnd,Ce.call(this,ge)}if(!J){var Fe=this.handlers;Fe&&Fe.stop()}return this},W.prototype._ease=function(J,ge,Ce){Ce.animate===!1||Ce.duration===0?(J(1),ge()):(this._easeStart=e.browser.now(),this._easeOptions=Ce,this._onEaseFrame=J,this._onEaseEnd=ge,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},W.prototype._renderFrameCallback=function(){var J=Math.min((e.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(J)),J<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},W.prototype._normalizeBearing=function(J,ge){J=e.wrap(J,-180,180);var Ce=Math.abs(J-ge);return Math.abs(J-360-ge)<Ce&&(J-=360),Math.abs(J+360-ge)<Ce&&(J+=360),J},W.prototype._normalizeCenter=function(J){var ge=this.transform;if(!(!ge.renderWorldCopies||ge.lngRange)){var Ce=J.lng-ge.center.lng;J.lng+=Ce>180?-360:Ce<-180?360:0}},W}(e.Evented),Wl=function(W){W===void 0&&(W={}),this.options=W,e.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};Wl.prototype.getDefaultPosition=function(){return"bottom-right"},Wl.prototype.onAdd=function(W){var de=this.options&&this.options.compact;return this._map=W,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=i.create("div","mapboxgl-ctrl-attrib-inner",this._container),de&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),de===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Wl.prototype.onRemove=function(){i.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Wl.prototype._updateEditLink=function(){var W=this._editLink;W||(W=this._editLink=this._container.querySelector(".mapbox-improve-map"));var de=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||e.config.ACCESS_TOKEN}];if(W){var J=de.reduce(function(ge,Ce,Fe){return Ce.value&&(ge+=Ce.key+"="+Ce.value+(Fe<de.length-1?"&":"")),ge},"?");W.href=e.config.FEEDBACK_URL+"/"+J+(this._map._hash?this._map._hash.getHashString(!0):""),W.rel="noopener nofollow"}},Wl.prototype._updateData=function(W){W&&(W.sourceDataType==="metadata"||W.dataType==="style")&&(this._updateAttributions(),this._updateEditLink())},Wl.prototype._updateAttributions=function(){if(!!this._map.style){var W=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?W=W.concat(this.options.customAttribution.map(function(ft){return typeof ft!="string"?"":ft})):typeof this.options.customAttribution=="string"&&W.push(this.options.customAttribution)),this._map.style.stylesheet){var de=this._map.style.stylesheet;this.styleOwner=de.owner,this.styleId=de.id}var J=this._map.style.sourceCaches;for(var ge in J){var Ce=J[ge];if(Ce.used){var Fe=Ce.getSource();Fe.attribution&&W.indexOf(Fe.attribution)<0&&W.push(Fe.attribution)}}W.sort(function(ft,Lt){return ft.length-Lt.length}),W=W.filter(function(ft,Lt){for(var $t=Lt+1;$t<W.length;$t++)if(W[$t].indexOf(ft)>=0)return!1;return!0});var Je=W.join(" | ");Je!==this._attribHTML&&(this._attribHTML=Je,W.length?(this._innerContainer.innerHTML=Je,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Wl.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var Wi=function(){e.bindAll(["_updateLogo"],this),e.bindAll(["_updateCompact"],this)};Wi.prototype.onAdd=function(W){this._map=W,this._container=i.create("div","mapboxgl-ctrl");var de=i.create("a","mapboxgl-ctrl-logo");return de.target="_blank",de.rel="noopener nofollow",de.href="https://www.mapbox.com/",de.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),de.setAttribute("rel","noopener nofollow"),this._container.appendChild(de),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Wi.prototype.onRemove=function(){i.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Wi.prototype.getDefaultPosition=function(){return"bottom-left"},Wi.prototype._updateLogo=function(W){(!W||W.sourceDataType==="metadata")&&(this._container.style.display=this._logoRequired()?"block":"none")},Wi.prototype._logoRequired=function(){if(!!this._map.style){var W=this._map.style.sourceCaches;for(var de in W){var J=W[de].getSource();if(J.mapbox_logo)return!0}return!1}},Wi.prototype._updateCompact=function(){var W=this._container.children;if(W.length){var de=W[0];this._map.getCanvasContainer().offsetWidth<250?de.classList.add("mapboxgl-compact"):de.classList.remove("mapboxgl-compact")}};var Yo=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Yo.prototype.add=function(W){var de=++this._id,J=this._queue;return J.push({callback:W,id:de,cancelled:!1}),de},Yo.prototype.remove=function(W){for(var de=this._currentlyRunning,J=de?this._queue.concat(de):this._queue,ge=0,Ce=J;ge<Ce.length;ge+=1){var Fe=Ce[ge];if(Fe.id===W){Fe.cancelled=!0;return}}},Yo.prototype.run=function(W){W===void 0&&(W=0);var de=this._currentlyRunning=this._queue;this._queue=[];for(var J=0,ge=de;J<ge.length;J+=1){var Ce=ge[J];if(!Ce.cancelled&&(Ce.callback(W),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Yo.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Rd={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},ch=e.window.HTMLImageElement,zf=e.window.HTMLElement,Ec=e.window.ImageBitmap,lf=-2,fh=22,Qs=0,Cc=60,cv={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:lf,maxZoom:fh,minPitch:Qs,maxPitch:Cc,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},fv=function(he){function W(J){var ge=this;if(J=e.extend({},cv,J),J.minZoom!=null&&J.maxZoom!=null&&J.minZoom>J.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(J.minPitch!=null&&J.maxPitch!=null&&J.minPitch>J.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(J.minPitch!=null&&J.minPitch<Qs)throw new Error("minPitch must be greater than or equal to "+Qs);if(J.maxPitch!=null&&J.maxPitch>Cc)throw new Error("maxPitch must be less than or equal to "+Cc);var Ce=new Si(J.minZoom,J.maxZoom,J.minPitch,J.maxPitch,J.renderWorldCopies);if(he.call(this,Ce,J),this._interactive=J.interactive,this._maxTileCacheSize=J.maxTileCacheSize,this._failIfMajorPerformanceCaveat=J.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=J.preserveDrawingBuffer,this._antialias=J.antialias,this._trackResize=J.trackResize,this._bearingSnap=J.bearingSnap,this._refreshExpiredTiles=J.refreshExpiredTiles,this._fadeDuration=J.fadeDuration,this._crossSourceCollisions=J.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=J.collectResourceTiming,this._renderTaskQueue=new Yo,this._controls=[],this._mapId=e.uniqueId(),this._locale=e.extend({},Rd,J.locale),this._requestManager=new e.RequestManager(J.transformRequest,J.accessToken),typeof J.container=="string"){if(this._container=e.window.document.getElementById(J.container),!this._container)throw new Error("Container '"+J.container+"' not found.")}else if(J.container instanceof zf)this._container=J.container;else throw new Error("Invalid type: 'container' must be a String or HTMLElement.");if(J.maxBounds&&this.setMaxBounds(J.maxBounds),e.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return ge._update(!1)}),this.on("moveend",function(){return ge._update(!1)}),this.on("zoom",function(){return ge._update(!0)}),typeof e.window<"u"&&(e.window.addEventListener("online",this._onWindowOnline,!1),e.window.addEventListener("resize",this._onWindowResize,!1)),this.handlers=new to(this,J);var Fe=typeof J.hash=="string"&&J.hash||void 0;this._hash=J.hash&&new Mo(Fe).addTo(this),(!this._hash||!this._hash._onHashChange())&&(this.jumpTo({center:J.center,zoom:J.zoom,bearing:J.bearing,pitch:J.pitch}),J.bounds&&(this.resize(),this.fitBounds(J.bounds,e.extend({},J.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=J.localIdeographFontFamily,J.style&&this.setStyle(J.style,{localIdeographFontFamily:J.localIdeographFontFamily}),J.attributionControl&&this.addControl(new Wl({customAttribution:J.customAttribution})),this.addControl(new Wi,J.logoPosition),this.on("style.load",function(){ge.transform.unmodified&&ge.jumpTo(ge.style.stylesheet)}),this.on("data",function(Je){ge._update(Je.dataType==="style"),ge.fire(new e.Event(Je.dataType+"data",Je))}),this.on("dataloading",function(Je){ge.fire(new e.Event(Je.dataType+"dataloading",Je))})}he&&(W.__proto__=he),W.prototype=Object.create(he&&he.prototype),W.prototype.constructor=W;var de={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return W.prototype._getMapId=function(){return this._mapId},W.prototype.addControl=function(ge,Ce){if(Ce===void 0&&ge.getDefaultPosition&&(Ce=ge.getDefaultPosition()),Ce===void 0&&(Ce="top-right"),!ge||!ge.onAdd)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var Fe=ge.onAdd(this);this._controls.push(ge);var Je=this._controlPositions[Ce];return Ce.indexOf("bottom")!==-1?Je.insertBefore(Fe,Je.firstChild):Je.appendChild(Fe),this},W.prototype.removeControl=function(ge){if(!ge||!ge.onRemove)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var Ce=this._controls.indexOf(ge);return Ce>-1&&this._controls.splice(Ce,1),ge.onRemove(this),this},W.prototype.resize=function(ge){var Ce=this._containerDimensions(),Fe=Ce[0],Je=Ce[1];this._resizeCanvas(Fe,Je),this.transform.resize(Fe,Je),this.painter.resize(Fe,Je);var ft=!this._moving;return ft&&(this.stop(),this.fire(new e.Event("movestart",ge)).fire(new e.Event("move",ge))),this.fire(new e.Event("resize",ge)),ft&&this.fire(new e.Event("moveend",ge)),this},W.prototype.getBounds=function(){return this.transform.getBounds()},W.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},W.prototype.setMaxBounds=function(ge){return this.transform.setMaxBounds(e.LngLatBounds.convert(ge)),this._update()},W.prototype.setMinZoom=function(ge){if(ge=ge==null?lf:ge,ge>=lf&&ge<=this.transform.maxZoom)return this.transform.minZoom=ge,this._update(),this.getZoom()<ge&&this.setZoom(ge),this;throw new Error("minZoom must be between "+lf+" and the current maxZoom, inclusive")},W.prototype.getMinZoom=function(){return this.transform.minZoom},W.prototype.setMaxZoom=function(ge){if(ge=ge==null?fh:ge,ge>=this.transform.minZoom)return this.transform.maxZoom=ge,this._update(),this.getZoom()>ge&&this.setZoom(ge),this;throw new Error("maxZoom must be greater than the current minZoom")},W.prototype.getMaxZoom=function(){return this.transform.maxZoom},W.prototype.setMinPitch=function(ge){if(ge=ge==null?Qs:ge,ge<Qs)throw new Error("minPitch must be greater than or equal to "+Qs);if(ge>=Qs&&ge<=this.transform.maxPitch)return this.transform.minPitch=ge,this._update(),this.getPitch()<ge&&this.setPitch(ge),this;throw new Error("minPitch must be between "+Qs+" and the current maxPitch, inclusive")},W.prototype.getMinPitch=function(){return this.transform.minPitch},W.prototype.setMaxPitch=function(ge){if(ge=ge==null?Cc:ge,ge>Cc)throw new Error("maxPitch must be less than or equal to "+Cc);if(ge>=this.transform.minPitch)return this.transform.maxPitch=ge,this._update(),this.getPitch()>ge&&this.setPitch(ge),this;throw new Error("maxPitch must be greater than the current minPitch")},W.prototype.getMaxPitch=function(){return this.transform.maxPitch},W.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},W.prototype.setRenderWorldCopies=function(ge){return this.transform.renderWorldCopies=ge,this._update()},W.prototype.project=function(ge){return this.transform.locationPoint(e.LngLat.convert(ge))},W.prototype.unproject=function(ge){return this.transform.pointLocation(e.Point.convert(ge))},W.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},W.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},W.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},W.prototype._createDelegatedListener=function(ge,Ce,Fe){var Je=this,ft;if(ge==="mouseenter"||ge==="mouseover"){var Lt=!1,$t=function(Hr){var $r=Je.getLayer(Ce)?Je.queryRenderedFeatures(Hr.point,{layers:[Ce]}):[];$r.length?Lt||(Lt=!0,Fe.call(Je,new _t(ge,Je,Hr.originalEvent,{features:$r}))):Lt=!1},cr=function(){Lt=!1};return{layer:Ce,listener:Fe,delegates:{mousemove:$t,mouseout:cr}}}else if(ge==="mouseleave"||ge==="mouseout"){var dr=!1,Pr=function(Hr){var $r=Je.getLayer(Ce)?Je.queryRenderedFeatures(Hr.point,{layers:[Ce]}):[];$r.length?dr=!0:dr&&(dr=!1,Fe.call(Je,new _t(ge,Je,Hr.originalEvent)))},Yr=function(Hr){dr&&(dr=!1,Fe.call(Je,new _t(ge,Je,Hr.originalEvent)))};return{layer:Ce,listener:Fe,delegates:{mousemove:Pr,mouseout:Yr}}}else{var Xr=function(Hr){var $r=Je.getLayer(Ce)?Je.queryRenderedFeatures(Hr.point,{layers:[Ce]}):[];$r.length&&(Hr.features=$r,Fe.call(Je,Hr),delete Hr.features)};return{layer:Ce,listener:Fe,delegates:(ft={},ft[ge]=Xr,ft)}}},W.prototype.on=function(ge,Ce,Fe){if(Fe===void 0)return he.prototype.on.call(this,ge,Ce);var Je=this._createDelegatedListener(ge,Ce,Fe);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[ge]=this._delegatedListeners[ge]||[],this._delegatedListeners[ge].push(Je);for(var ft in Je.delegates)this.on(ft,Je.delegates[ft]);return this},W.prototype.once=function(ge,Ce,Fe){if(Fe===void 0)return he.prototype.once.call(this,ge,Ce);var Je=this._createDelegatedListener(ge,Ce,Fe);for(var ft in Je.delegates)this.once(ft,Je.delegates[ft]);return this},W.prototype.off=function(ge,Ce,Fe){var Je=this;if(Fe===void 0)return he.prototype.off.call(this,ge,Ce);var ft=function(Lt){for(var $t=Lt[ge],cr=0;cr<$t.length;cr++){var dr=$t[cr];if(dr.layer===Ce&&dr.listener===Fe){for(var Pr in dr.delegates)Je.off(Pr,dr.delegates[Pr]);return $t.splice(cr,1),Je}}};return this._delegatedListeners&&this._delegatedListeners[ge]&&ft(this._delegatedListeners),this},W.prototype.queryRenderedFeatures=function(ge,Ce){if(!this.style)return[];Ce===void 0&&ge!==void 0&&!(ge instanceof e.Point)&&!Array.isArray(ge)&&(Ce=ge,ge=void 0),Ce=Ce||{},ge=ge||[[0,0],[this.transform.width,this.transform.height]];var Fe;if(ge instanceof e.Point||typeof ge[0]=="number")Fe=[e.Point.convert(ge)];else{var Je=e.Point.convert(ge[0]),ft=e.Point.convert(ge[1]);Fe=[Je,new e.Point(ft.x,Je.y),ft,new e.Point(Je.x,ft.y),Je]}return this.style.queryRenderedFeatures(Fe,Ce,this.transform)},W.prototype.querySourceFeatures=function(ge,Ce){return this.style.querySourceFeatures(ge,Ce)},W.prototype.setStyle=function(ge,Ce){return Ce=e.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},Ce),Ce.diff!==!1&&Ce.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&ge?(this._diffStyle(ge,Ce),this):(this._localIdeographFontFamily=Ce.localIdeographFontFamily,this._updateStyle(ge,Ce))},W.prototype._getUIString=function(ge){var Ce=this._locale[ge];if(Ce==null)throw new Error("Missing UI string '"+ge+"'");return Ce},W.prototype._updateStyle=function(ge,Ce){if(this.style&&(this.style.setEventedParent(null),this.style._remove()),ge)this.style=new is(this,Ce||{});else return delete this.style,this;return this.style.setEventedParent(this,{style:this.style}),typeof ge=="string"?this.style.loadURL(ge):this.style.loadJSON(ge),this},W.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new is(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},W.prototype._diffStyle=function(ge,Ce){var Fe=this;if(typeof ge=="string"){var Je=this._requestManager.normalizeStyleURL(ge),ft=this._requestManager.transformRequest(Je,e.ResourceType.Style);e.getJSON(ft,function(Lt,$t){Lt?Fe.fire(new e.ErrorEvent(Lt)):$t&&Fe._updateDiff($t,Ce)})}else typeof ge=="object"&&this._updateDiff(ge,Ce)},W.prototype._updateDiff=function(ge,Ce){try{this.style.setState(ge)&&this._update(!0)}catch(Fe){e.warnOnce("Unable to perform style diff: "+(Fe.message||Fe.error||Fe)+".  Rebuilding the style from scratch."),this._updateStyle(ge,Ce)}},W.prototype.getStyle=function(){if(this.style)return this.style.serialize()},W.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():e.warnOnce("There is no style added to the map.")},W.prototype.addSource=function(ge,Ce){return this._lazyInitEmptyStyle(),this.style.addSource(ge,Ce),this._update(!0)},W.prototype.isSourceLoaded=function(ge){var Ce=this.style&&this.style.sourceCaches[ge];if(Ce===void 0){this.fire(new e.ErrorEvent(new Error("There is no source with ID '"+ge+"'")));return}return Ce.loaded()},W.prototype.areTilesLoaded=function(){var ge=this.style&&this.style.sourceCaches;for(var Ce in ge){var Fe=ge[Ce],Je=Fe._tiles;for(var ft in Je){var Lt=Je[ft];if(!(Lt.state==="loaded"||Lt.state==="errored"))return!1}}return!0},W.prototype.addSourceType=function(ge,Ce,Fe){return this._lazyInitEmptyStyle(),this.style.addSourceType(ge,Ce,Fe)},W.prototype.removeSource=function(ge){return this.style.removeSource(ge),this._update(!0)},W.prototype.getSource=function(ge){return this.style.getSource(ge)},W.prototype.addImage=function(ge,Ce,Fe){Fe===void 0&&(Fe={});var Je=Fe.pixelRatio;Je===void 0&&(Je=1);var ft=Fe.sdf;ft===void 0&&(ft=!1);var Lt=Fe.stretchX,$t=Fe.stretchY,cr=Fe.content;this._lazyInitEmptyStyle();var dr=0;if(Ce instanceof ch||Ec&&Ce instanceof Ec){var Pr=e.browser.getImageData(Ce),Yr=Pr.width,Xr=Pr.height,Hr=Pr.data;this.style.addImage(ge,{data:new e.RGBAImage({width:Yr,height:Xr},Hr),pixelRatio:Je,stretchX:Lt,stretchY:$t,content:cr,sdf:ft,version:dr})}else{if(Ce.width===void 0||Ce.height===void 0)return this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var $r=Ce.width,pn=Ce.height,Pn=Ce.data,On=Ce;this.style.addImage(ge,{data:new e.RGBAImage({width:$r,height:pn},new Uint8Array(Pn)),pixelRatio:Je,stretchX:Lt,stretchY:$t,content:cr,sdf:ft,version:dr,userImage:On}),On.onAdd&&On.onAdd(this,ge)}},W.prototype.updateImage=function(ge,Ce){var Fe=this.style.getImage(ge);if(!Fe)return this.fire(new e.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var Je=Ce instanceof ch||Ec&&Ce instanceof Ec?e.browser.getImageData(Ce):Ce,ft=Je.width,Lt=Je.height,$t=Je.data;if(ft===void 0||Lt===void 0)return this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(ft!==Fe.data.width||Lt!==Fe.data.height)return this.fire(new e.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));var cr=!(Ce instanceof ch||Ec&&Ce instanceof Ec);Fe.data.replace($t,cr),this.style.updateImage(ge,Fe)},W.prototype.hasImage=function(ge){return ge?!!this.style.getImage(ge):(this.fire(new e.ErrorEvent(new Error("Missing required image id"))),!1)},W.prototype.removeImage=function(ge){this.style.removeImage(ge)},W.prototype.loadImage=function(ge,Ce){e.getImage(this._requestManager.transformRequest(ge,e.ResourceType.Image),Ce)},W.prototype.listImages=function(){return this.style.listImages()},W.prototype.addLayer=function(ge,Ce){return this._lazyInitEmptyStyle(),this.style.addLayer(ge,Ce),this._update(!0)},W.prototype.moveLayer=function(ge,Ce){return this.style.moveLayer(ge,Ce),this._update(!0)},W.prototype.removeLayer=function(ge){return this.style.removeLayer(ge),this._update(!0)},W.prototype.getLayer=function(ge){return this.style.getLayer(ge)},W.prototype.setLayerZoomRange=function(ge,Ce,Fe){return this.style.setLayerZoomRange(ge,Ce,Fe),this._update(!0)},W.prototype.setFilter=function(ge,Ce,Fe){return Fe===void 0&&(Fe={}),this.style.setFilter(ge,Ce,Fe),this._update(!0)},W.prototype.getFilter=function(ge){return this.style.getFilter(ge)},W.prototype.setPaintProperty=function(ge,Ce,Fe,Je){return Je===void 0&&(Je={}),this.style.setPaintProperty(ge,Ce,Fe,Je),this._update(!0)},W.prototype.getPaintProperty=function(ge,Ce){return this.style.getPaintProperty(ge,Ce)},W.prototype.setLayoutProperty=function(ge,Ce,Fe,Je){return Je===void 0&&(Je={}),this.style.setLayoutProperty(ge,Ce,Fe,Je),this._update(!0)},W.prototype.getLayoutProperty=function(ge,Ce){return this.style.getLayoutProperty(ge,Ce)},W.prototype.setLight=function(ge,Ce){return Ce===void 0&&(Ce={}),this._lazyInitEmptyStyle(),this.style.setLight(ge,Ce),this._update(!0)},W.prototype.getLight=function(){return this.style.getLight()},W.prototype.setFeatureState=function(ge,Ce){return this.style.setFeatureState(ge,Ce),this._update()},W.prototype.removeFeatureState=function(ge,Ce){return this.style.removeFeatureState(ge,Ce),this._update()},W.prototype.getFeatureState=function(ge){return this.style.getFeatureState(ge)},W.prototype.getContainer=function(){return this._container},W.prototype.getCanvasContainer=function(){return this._canvasContainer},W.prototype.getCanvas=function(){return this._canvas},W.prototype._containerDimensions=function(){var ge=0,Ce=0;return this._container&&(ge=this._container.clientWidth||400,Ce=this._container.clientHeight||300),[ge,Ce]},W.prototype._detectMissingCSS=function(){var ge=e.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color");ge!=="rgb(250, 128, 114)"&&e.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},W.prototype._setupContainer=function(){var ge=this._container;ge.classList.add("mapboxgl-map");var Ce=this._missingCSSCanary=i.create("div","mapboxgl-canary",ge);Ce.style.visibility="hidden",this._detectMissingCSS();var Fe=this._canvasContainer=i.create("div","mapboxgl-canvas-container",ge);this._interactive&&Fe.classList.add("mapboxgl-interactive"),this._canvas=i.create("canvas","mapboxgl-canvas",Fe),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var Je=this._containerDimensions();this._resizeCanvas(Je[0],Je[1]);var ft=this._controlContainer=i.create("div","mapboxgl-control-container",ge),Lt=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function($t){Lt[$t]=i.create("div","mapboxgl-ctrl-"+$t,ft)})},W.prototype._resizeCanvas=function(ge,Ce){var Fe=e.browser.devicePixelRatio||1;this._canvas.width=Fe*ge,this._canvas.height=Fe*Ce,this._canvas.style.width=ge+"px",this._canvas.style.height=Ce+"px"},W.prototype._setupPainter=function(){var ge=e.extend({},a.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),Ce=this._canvas.getContext("webgl",ge)||this._canvas.getContext("experimental-webgl",ge);if(!Ce){this.fire(new e.ErrorEvent(new Error("Failed to initialize WebGL")));return}this.painter=new oi(Ce,this.transform),e.webpSupported.testSupport(Ce)},W.prototype._contextLost=function(ge){ge.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new e.Event("webglcontextlost",{originalEvent:ge}))},W.prototype._contextRestored=function(ge){this._setupPainter(),this.resize(),this._update(),this.fire(new e.Event("webglcontextrestored",{originalEvent:ge}))},W.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},W.prototype._update=function(ge){return this.style?(this._styleDirty=this._styleDirty||ge,this._sourcesDirty=!0,this.triggerRepaint(),this):this},W.prototype._requestRenderFrame=function(ge){return this._update(),this._renderTaskQueue.add(ge)},W.prototype._cancelRenderFrame=function(ge){this._renderTaskQueue.remove(ge)},W.prototype._render=function(ge){var Ce=this,Fe,Je=0,ft=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(Fe=ft.createQueryEXT(),ft.beginQueryEXT(ft.TIME_ELAPSED_EXT,Fe),Je=e.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(ge),!this._removed){var Lt=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var $t=this.transform.zoom,cr=e.browser.now();this.style.zoomHistory.update($t,cr);var dr=new e.EvaluationParameters($t,{now:cr,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Pr=dr.crossFadingFactor();(Pr!==1||Pr!==this._crossFadingFactor)&&(Lt=!0,this._crossFadingFactor=Pr),this.style.update(dr)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new e.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new e.Event("load"))),this.style&&(this.style.hasTransitions()||Lt)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var Yr=e.browser.now()-Je;ft.endQueryEXT(ft.TIME_ELAPSED_EXT,Fe),setTimeout(function(){var $r=ft.getQueryObjectEXT(Fe,ft.QUERY_RESULT_EXT)/1e6;ft.deleteQueryEXT(Fe),Ce.fire(new e.Event("gpu-timing-frame",{cpuTime:Yr,gpuTime:$r}))},50)}if(this.listens("gpu-timing-layer")){var Xr=this.painter.collectGpuTimers();setTimeout(function(){var $r=Ce.painter.queryGpuTimers(Xr);Ce.fire(new e.Event("gpu-timing-layer",{layerTimes:$r}))},50)}var Hr=this._sourcesDirty||this._styleDirty||this._placementDirty;return Hr||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new e.Event("idle"))),this}},W.prototype.remove=function(){this._hash&&this._hash.remove();for(var ge=0,Ce=this._controls;ge<Ce.length;ge+=1){var Fe=Ce[ge];Fe.onRemove(this)}this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof e.window<"u"&&(e.window.removeEventListener("resize",this._onWindowResize,!1),e.window.removeEventListener("online",this._onWindowOnline,!1));var Je=this.painter.context.gl.getExtension("WEBGL_lose_context");Je&&Je.loseContext(),Nf(this._canvasContainer),Nf(this._controlContainer),Nf(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new e.Event("remove"))},W.prototype.triggerRepaint=function(){var ge=this;this.style&&!this._frame&&(this._frame=e.browser.frame(function(Ce){ge._frame=null,ge._render(Ce)}))},W.prototype._onWindowOnline=function(){this._update()},W.prototype._onWindowResize=function(ge){this._trackResize&&this.resize({originalEvent:ge})._update()},de.showTileBoundaries.get=function(){return!!this._showTileBoundaries},de.showTileBoundaries.set=function(J){this._showTileBoundaries!==J&&(this._showTileBoundaries=J,this._update())},de.showPadding.get=function(){return!!this._showPadding},de.showPadding.set=function(J){this._showPadding!==J&&(this._showPadding=J,this._update())},de.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},de.showCollisionBoxes.set=function(J){this._showCollisionBoxes!==J&&(this._showCollisionBoxes=J,J?this.style._generateCollisionBoxes():this._update())},de.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},de.showOverdrawInspector.set=function(J){this._showOverdrawInspector!==J&&(this._showOverdrawInspector=J,this._update())},de.repaint.get=function(){return!!this._repaint},de.repaint.set=function(J){this._repaint!==J&&(this._repaint=J,this.triggerRepaint())},de.vertices.get=function(){return!!this._vertices},de.vertices.set=function(J){this._vertices=J,this._update()},W.prototype._setCacheLimits=function(ge,Ce){e.setCacheLimits(ge,Ce)},de.version.get=function(){return e.version},Object.defineProperties(W.prototype,de),W}(sf);function Nf(he){he.parentNode&&he.parentNode.removeChild(he)}var hh={showCompass:!0,showZoom:!0,visualizePitch:!1},nc=function(W){var de=this;this.options=e.extend({},hh,W),this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(J){return J.preventDefault()}),this.options.showZoom&&(e.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(J){return de._map.zoomIn({},{originalEvent:J})}),i.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(J){return de._map.zoomOut({},{originalEvent:J})}),i.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(e.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(J){de.options.visualizePitch?de._map.resetNorthPitch({},{originalEvent:J}):de._map.resetNorth({},{originalEvent:J})}),this._compassIcon=i.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};nc.prototype._updateZoomButtons=function(){var W=this._map.getZoom();this._zoomInButton.disabled=W===this._map.getMaxZoom(),this._zoomOutButton.disabled=W===this._map.getMinZoom()},nc.prototype._rotateCompassArrow=function(){var W=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=W},nc.prototype.onAdd=function(W){return this._map=W,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new hl(this._map,this._compass,this.options.visualizePitch)),this._container},nc.prototype.onRemove=function(){i.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},nc.prototype._createButton=function(W,de){var J=i.create("button",W,this._container);return J.type="button",J.addEventListener("click",de),J},nc.prototype._setButtonTitle=function(W,de){var J=this._map._getUIString("NavigationControl."+de);W.title=J,W.setAttribute("aria-label",J)};var hl=function(W,de,J){J===void 0&&(J=!1),this._clickTolerance=10,this.element=de,this.mouseRotate=new la({clickTolerance:W.dragRotate._mouseRotate._clickTolerance}),this.map=W,J&&(this.mousePitch=new Pa({clickTolerance:W.dragRotate._mousePitch._clickTolerance})),e.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),i.addEventListener(de,"mousedown",this.mousedown),i.addEventListener(de,"touchstart",this.touchstart,{passive:!1}),i.addEventListener(de,"touchmove",this.touchmove),i.addEventListener(de,"touchend",this.touchend),i.addEventListener(de,"touchcancel",this.reset)};hl.prototype.down=function(W,de){this.mouseRotate.mousedown(W,de),this.mousePitch&&this.mousePitch.mousedown(W,de),i.disableDrag()},hl.prototype.move=function(W,de){var J=this.map,ge=this.mouseRotate.mousemoveWindow(W,de);if(ge&&ge.bearingDelta&&J.setBearing(J.getBearing()+ge.bearingDelta),this.mousePitch){var Ce=this.mousePitch.mousemoveWindow(W,de);Ce&&Ce.pitchDelta&&J.setPitch(J.getPitch()+Ce.pitchDelta)}},hl.prototype.off=function(){var W=this.element;i.removeEventListener(W,"mousedown",this.mousedown),i.removeEventListener(W,"touchstart",this.touchstart,{passive:!1}),i.removeEventListener(W,"touchmove",this.touchmove),i.removeEventListener(W,"touchend",this.touchend),i.removeEventListener(W,"touchcancel",this.reset),this.offTemp()},hl.prototype.offTemp=function(){i.enableDrag(),i.removeEventListener(e.window,"mousemove",this.mousemove),i.removeEventListener(e.window,"mouseup",this.mouseup)},hl.prototype.mousedown=function(W){this.down(e.extend({},W,{ctrlKey:!0,preventDefault:function(){return W.preventDefault()}}),i.mousePos(this.element,W)),i.addEventListener(e.window,"mousemove",this.mousemove),i.addEventListener(e.window,"mouseup",this.mouseup)},hl.prototype.mousemove=function(W){this.move(W,i.mousePos(this.element,W))},hl.prototype.mouseup=function(W){this.mouseRotate.mouseupWindow(W),this.mousePitch&&this.mousePitch.mouseupWindow(W),this.offTemp()},hl.prototype.touchstart=function(W){W.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=i.touchPos(this.element,W.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return W.preventDefault()}},this._startPos))},hl.prototype.touchmove=function(W){W.targetTouches.length!==1?this.reset():(this._lastPos=i.touchPos(this.element,W.targetTouches)[0],this.move({preventDefault:function(){return W.preventDefault()}},this._lastPos))},hl.prototype.touchend=function(W){W.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},hl.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};function ac(he,W,de){if(he=new e.LngLat(he.lng,he.lat),W){var J=new e.LngLat(he.lng-360,he.lat),ge=new e.LngLat(he.lng+360,he.lat),Ce=de.locationPoint(he).distSqr(W);de.locationPoint(J).distSqr(W)<Ce?he=J:de.locationPoint(ge).distSqr(W)<Ce&&(he=ge)}for(;Math.abs(he.lng-de.center.lng)>180;){var Fe=de.locationPoint(he);if(Fe.x>=0&&Fe.y>=0&&Fe.x<=de.width&&Fe.y<=de.height)break;he.lng>de.center.lng?he.lng-=360:he.lng+=360}return he}var Of={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function vh(he,W,de){var J=he.classList;for(var ge in Of)J.remove("mapboxgl-"+de+"-anchor-"+ge);J.add("mapboxgl-"+de+"-anchor-"+W)}var uf=function(he){function W(de,J){var ge=this;if(he.call(this),(de instanceof e.window.HTMLElement||J)&&(de=e.extend({element:de},J)),e.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=de&&de.anchor||"center",this._color=de&&de.color||"#3FB1CE",this._draggable=de&&de.draggable||!1,this._state="inactive",this._rotation=de&&de.rotation||0,this._rotationAlignment=de&&de.rotationAlignment||"auto",this._pitchAlignment=de&&de.pitchAlignment&&de.pitchAlignment!=="auto"?de.pitchAlignment:this._rotationAlignment,!de||!de.element){this._defaultMarker=!0,this._element=i.create("div"),this._element.setAttribute("aria-label","Map marker");var Ce=i.createNS("http://www.w3.org/2000/svg","svg");Ce.setAttributeNS(null,"display","block"),Ce.setAttributeNS(null,"height","41px"),Ce.setAttributeNS(null,"width","27px"),Ce.setAttributeNS(null,"viewBox","0 0 27 41");var Fe=i.createNS("http://www.w3.org/2000/svg","g");Fe.setAttributeNS(null,"stroke","none"),Fe.setAttributeNS(null,"stroke-width","1"),Fe.setAttributeNS(null,"fill","none"),Fe.setAttributeNS(null,"fill-rule","evenodd");var Je=i.createNS("http://www.w3.org/2000/svg","g");Je.setAttributeNS(null,"fill-rule","nonzero");var ft=i.createNS("http://www.w3.org/2000/svg","g");ft.setAttributeNS(null,"transform","translate(3.0, 29.0)"),ft.setAttributeNS(null,"fill","#000000");for(var Lt=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}],$t=0,cr=Lt;$t<cr.length;$t+=1){var dr=cr[$t],Pr=i.createNS("http://www.w3.org/2000/svg","ellipse");Pr.setAttributeNS(null,"opacity","0.04"),Pr.setAttributeNS(null,"cx","10.5"),Pr.setAttributeNS(null,"cy","5.80029008"),Pr.setAttributeNS(null,"rx",dr.rx),Pr.setAttributeNS(null,"ry",dr.ry),ft.appendChild(Pr)}var Yr=i.createNS("http://www.w3.org/2000/svg","g");Yr.setAttributeNS(null,"fill",this._color);var Xr=i.createNS("http://www.w3.org/2000/svg","path");Xr.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Yr.appendChild(Xr);var Hr=i.createNS("http://www.w3.org/2000/svg","g");Hr.setAttributeNS(null,"opacity","0.25"),Hr.setAttributeNS(null,"fill","#000000");var $r=i.createNS("http://www.w3.org/2000/svg","path");$r.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Hr.appendChild($r);var pn=i.createNS("http://www.w3.org/2000/svg","g");pn.setAttributeNS(null,"transform","translate(6.0, 7.0)"),pn.setAttributeNS(null,"fill","#FFFFFF");var Pn=i.createNS("http://www.w3.org/2000/svg","g");Pn.setAttributeNS(null,"transform","translate(8.0, 8.0)");var On=i.createNS("http://www.w3.org/2000/svg","circle");On.setAttributeNS(null,"fill","#000000"),On.setAttributeNS(null,"opacity","0.25"),On.setAttributeNS(null,"cx","5.5"),On.setAttributeNS(null,"cy","5.5"),On.setAttributeNS(null,"r","5.4999962");var $n=i.createNS("http://www.w3.org/2000/svg","circle");$n.setAttributeNS(null,"fill","#FFFFFF"),$n.setAttributeNS(null,"cx","5.5"),$n.setAttributeNS(null,"cy","5.5"),$n.setAttributeNS(null,"r","5.4999962"),Pn.appendChild(On),Pn.appendChild($n),Je.appendChild(ft),Je.appendChild(Yr),Je.appendChild(Hr),Je.appendChild(pn),Je.appendChild(Pn),Ce.appendChild(Je),this._element.appendChild(Ce),this._offset=e.Point.convert(de&&de.offset||[0,-14])}else this._element=de.element,this._offset=e.Point.convert(de&&de.offset||[0,0]);this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(ra){ra.preventDefault()}),this._element.addEventListener("mousedown",function(ra){ra.preventDefault()}),this._element.addEventListener("focus",function(){var ra=ge._map.getContainer();ra.scrollTop=0,ra.scrollLeft=0}),vh(this._element,this._anchor,"marker"),this._popup=null}return he&&(W.__proto__=he),W.prototype=Object.create(he&&he.prototype),W.prototype.constructor=W,W.prototype.addTo=function(J){return this.remove(),this._map=J,J.getCanvasContainer().appendChild(this._element),J.on("move",this._update),J.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},W.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),i.remove(this._element),this._popup&&this._popup.remove(),this},W.prototype.getLngLat=function(){return this._lngLat},W.prototype.setLngLat=function(J){return this._lngLat=e.LngLat.convert(J),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},W.prototype.getElement=function(){return this._element},W.prototype.setPopup=function(J){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),J){if(!("offset"in J.options)){var ge=38.1,Ce=13.5,Fe=Math.sqrt(Math.pow(Ce,2)/2);J.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-ge],"bottom-left":[Fe,(ge-Ce+Fe)*-1],"bottom-right":[-Fe,(ge-Ce+Fe)*-1],left:[Ce,(ge-Ce)*-1],right:[-Ce,(ge-Ce)*-1]}:this._offset}this._popup=J,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},W.prototype._onKeyPress=function(J){var ge=J.code,Ce=J.charCode||J.keyCode;(ge==="Space"||ge==="Enter"||Ce===32||Ce===13)&&this.togglePopup()},W.prototype._onMapClick=function(J){var ge=J.originalEvent.target,Ce=this._element;this._popup&&(ge===Ce||Ce.contains(ge))&&this.togglePopup()},W.prototype.getPopup=function(){return this._popup},W.prototype.togglePopup=function(){var J=this._popup;if(J)J.isOpen()?J.remove():J.addTo(this._map);else return this;return this},W.prototype._update=function(J){if(!!this._map){this._map.transform.renderWorldCopies&&(this._lngLat=ac(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var ge="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?ge="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(ge="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var Ce="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?Ce="rotateX(0deg)":this._pitchAlignment==="map"&&(Ce="rotateX("+this._map.getPitch()+"deg)"),(!J||J.type==="moveend")&&(this._pos=this._pos.round()),i.setTransform(this._element,Of[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+Ce+" "+ge)}},W.prototype.getOffset=function(){return this._offset},W.prototype.setOffset=function(J){return this._offset=e.Point.convert(J),this._update(),this},W.prototype._onMove=function(J){this._pos=J.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new e.Event("dragstart"))),this.fire(new e.Event("drag"))},W.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new e.Event("dragend")),this._state="inactive"},W.prototype._addDragHandler=function(J){this._element.contains(J.originalEvent.target)&&(J.preventDefault(),this._positionDelta=J.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},W.prototype.setDraggable=function(J){return this._draggable=!!J,this._map&&(J?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},W.prototype.isDraggable=function(){return this._draggable},W.prototype.setRotation=function(J){return this._rotation=J||0,this._update(),this},W.prototype.getRotation=function(){return this._rotation},W.prototype.setRotationAlignment=function(J){return this._rotationAlignment=J||"auto",this._update(),this},W.prototype.getRotationAlignment=function(){return this._rotationAlignment},W.prototype.setPitchAlignment=function(J){return this._pitchAlignment=J&&J!=="auto"?J:this._rotationAlignment,this._update(),this},W.prototype.getPitchAlignment=function(){return this._pitchAlignment},W}(e.Evented),hv={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},kc;function Bf(he){kc!==void 0?he(kc):e.window.navigator.permissions!==void 0?e.window.navigator.permissions.query({name:"geolocation"}).then(function(W){kc=W.state!=="denied",he(kc)}):(kc=!!e.window.navigator.geolocation,he(kc))}var cf=0,Lc=!1,vv=function(he){function W(de){he.call(this),this.options=e.extend({},hv,de),e.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return he&&(W.__proto__=he),W.prototype=Object.create(he&&he.prototype),W.prototype.constructor=W,W.prototype.onAdd=function(J){return this._map=J,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),Bf(this._setupUI),this._container},W.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),i.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,cf=0,Lc=!1},W.prototype._isOutOfMapMaxBounds=function(J){var ge=this._map.getMaxBounds(),Ce=J.coords;return ge&&(Ce.longitude<ge.getWest()||Ce.longitude>ge.getEast()||Ce.latitude<ge.getSouth()||Ce.latitude>ge.getNorth())},W.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break}},W.prototype._onSuccess=function(J){if(!!this._map){if(this._isOutOfMapMaxBounds(J)){this._setErrorState(),this.fire(new e.Event("outofmaxbounds",J)),this._updateMarker(),this._finish();return}if(this.options.trackUserLocation)switch(this._lastKnownPosition=J,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(J),(!this.options.trackUserLocation||this._watchState==="ACTIVE_LOCK")&&this._updateCamera(J),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("geolocate",J)),this._finish()}},W.prototype._updateCamera=function(J){var ge=new e.LngLat(J.coords.longitude,J.coords.latitude),Ce=J.coords.accuracy,Fe=this._map.getBearing(),Je=e.extend({bearing:Fe},this.options.fitBoundsOptions);this._map.fitBounds(ge.toBounds(Ce),Je,{geolocateSource:!0})},W.prototype._updateMarker=function(J){if(J){var ge=new e.LngLat(J.coords.longitude,J.coords.latitude);this._accuracyCircleMarker.setLngLat(ge).addTo(this._map),this._userLocationDotMarker.setLngLat(ge).addTo(this._map),this._accuracy=J.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},W.prototype._updateCircleRadius=function(){var J=this._map._container.clientHeight/2,ge=this._map.unproject([0,J]),Ce=this._map.unproject([1,J]),Fe=ge.distanceTo(Ce),Je=Math.ceil(2*this._accuracy/Fe);this._circleElement.style.width=Je+"px",this._circleElement.style.height=Je+"px"},W.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},W.prototype._onError=function(J){if(!!this._map){if(this.options.trackUserLocation)if(J.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var ge=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=ge,this._geolocateButton.setAttribute("aria-label",ge),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(J.code===3&&Lc)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("error",J)),this._finish()}},W.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},W.prototype._setupUI=function(J){var ge=this;if(this._container.addEventListener("contextmenu",function(Je){return Je.preventDefault()}),this._geolocateButton=i.create("button","mapboxgl-ctrl-geolocate",this._container),i.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",J===!1){e.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var Ce=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=Ce,this._geolocateButton.setAttribute("aria-label",Ce)}else{var Fe=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=Fe,this._geolocateButton.setAttribute("aria-label",Fe)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=i.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new uf(this._dotElement),this._circleElement=i.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new uf({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(Je){var ft=Je.originalEvent&&Je.originalEvent.type==="resize";!Je.geolocateSource&&ge._watchState==="ACTIVE_LOCK"&&!ft&&(ge._watchState="BACKGROUND",ge._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),ge._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),ge.fire(new e.Event("trackuserlocationend")))})},W.prototype.trigger=function(){if(!this._setup)return e.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":cf--,Lc=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new e.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.Event("trackuserlocationstart"));break}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error");break}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),cf++;var J;cf>1?(J={maximumAge:6e5,timeout:0},Lc=!0):(J=this.options.positionOptions,Lc=!1),this._geolocationWatchID=e.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,J)}}else e.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},W.prototype._clearWatch=function(){e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},W}(e.Evented),np={maxWidth:100,unit:"metric"},Pc=function(W){this.options=e.extend({},np,W),e.bindAll(["_onMove","setUnit"],this)};Pc.prototype.getDefaultPosition=function(){return"bottom-left"},Pc.prototype._onMove=function(){pv(this._map,this._container,this.options)},Pc.prototype.onAdd=function(W){return this._map=W,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",W.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Pc.prototype.onRemove=function(){i.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Pc.prototype.setUnit=function(W){this.options.unit=W,pv(this._map,this._container,this.options)};function pv(he,W,de){var J=de&&de.maxWidth||100,ge=he._container.clientHeight/2,Ce=he.unproject([0,ge]),Fe=he.unproject([J,ge]),Je=Ce.distanceTo(Fe);if(de&&de.unit==="imperial"){var ft=3.2808*Je;if(ft>5280){var Lt=ft/5280;ff(W,J,Lt,he._getUIString("ScaleControl.Miles"))}else ff(W,J,ft,he._getUIString("ScaleControl.Feet"))}else if(de&&de.unit==="nautical"){var $t=Je/1852;ff(W,J,$t,he._getUIString("ScaleControl.NauticalMiles"))}else Je>=1e3?ff(W,J,Je/1e3,he._getUIString("ScaleControl.Kilometers")):ff(W,J,Je,he._getUIString("ScaleControl.Meters"))}function ff(he,W,de,J){var ge=ip(de),Ce=ge/de;he.style.width=W*Ce+"px",he.innerHTML=ge+"&nbsp;"+J}function ap(he){var W=Math.pow(10,Math.ceil(-Math.log(he)/Math.LN10));return Math.round(he*W)/W}function ip(he){var W=Math.pow(10,(""+Math.floor(he)).length-1),de=he/W;return de=de>=10?10:de>=5?5:de>=3?3:de>=2?2:de>=1?1:ap(de),W*de}var hu=function(W){this._fullscreen=!1,W&&W.container&&(W.container instanceof e.window.HTMLElement?this._container=W.container:e.warnOnce("Full screen control 'container' must be a DOM element.")),e.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in e.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in e.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in e.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in e.window.document&&(this._fullscreenchange="MSFullscreenChange")};hu.prototype.onAdd=function(W){return this._map=W,this._container||(this._container=this._map.getContainer()),this._controlContainer=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",e.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},hu.prototype.onRemove=function(){i.remove(this._controlContainer),this._map=null,e.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},hu.prototype._checkFullscreenSupport=function(){return!!(e.window.document.fullscreenEnabled||e.window.document.mozFullScreenEnabled||e.window.document.msFullscreenEnabled||e.window.document.webkitFullscreenEnabled)},hu.prototype._setupUI=function(){var W=this._fullscreenButton=i.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);i.create("span","mapboxgl-ctrl-icon",W).setAttribute("aria-hidden",!0),W.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),e.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},hu.prototype._updateTitle=function(){var W=this._getTitle();this._fullscreenButton.setAttribute("aria-label",W),this._fullscreenButton.title=W},hu.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},hu.prototype._isFullscreen=function(){return this._fullscreen},hu.prototype._changeIcon=function(){var W=e.window.document.fullscreenElement||e.window.document.mozFullScreenElement||e.window.document.webkitFullscreenElement||e.window.document.msFullscreenElement;W===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},hu.prototype._onClickFullscreen=function(){this._isFullscreen()?e.window.document.exitFullscreen?e.window.document.exitFullscreen():e.window.document.mozCancelFullScreen?e.window.document.mozCancelFullScreen():e.window.document.msExitFullscreen?e.window.document.msExitFullscreen():e.window.document.webkitCancelFullScreen&&e.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var op={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},sp=function(he){function W(de){he.call(this),this.options=e.extend(Object.create(op),de),e.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return he&&(W.__proto__=he),W.prototype=Object.create(he&&he.prototype),W.prototype.constructor=W,W.prototype.addTo=function(J){return this._map&&this.remove(),this._map=J,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new e.Event("open")),this},W.prototype.isOpen=function(){return!!this._map},W.prototype.remove=function(){return this._content&&i.remove(this._content),this._container&&(i.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new e.Event("close")),this},W.prototype.getLngLat=function(){return this._lngLat},W.prototype.setLngLat=function(J){return this._lngLat=e.LngLat.convert(J),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},W.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},W.prototype.getElement=function(){return this._container},W.prototype.setText=function(J){return this.setDOMContent(e.window.document.createTextNode(J))},W.prototype.setHTML=function(J){var ge=e.window.document.createDocumentFragment(),Ce=e.window.document.createElement("body"),Fe;for(Ce.innerHTML=J;Fe=Ce.firstChild,!!Fe;)ge.appendChild(Fe);return this.setDOMContent(ge)},W.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},W.prototype.setMaxWidth=function(J){return this.options.maxWidth=J,this._update(),this},W.prototype.setDOMContent=function(J){return this._createContent(),this._content.appendChild(J),this._update(),this},W.prototype.addClassName=function(J){this._container&&this._container.classList.add(J)},W.prototype.removeClassName=function(J){this._container&&this._container.classList.remove(J)},W.prototype.toggleClassName=function(J){if(this._container)return this._container.classList.toggle(J)},W.prototype._createContent=function(){this._content&&i.remove(this._content),this._content=i.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=i.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},W.prototype._onMouseUp=function(J){this._update(J.point)},W.prototype._onMouseMove=function(J){this._update(J.point)},W.prototype._onDrag=function(J){this._update(J.point)},W.prototype._update=function(J){var ge=this,Ce=this._lngLat||this._trackPointer;if(!(!this._map||!Ce||!this._content)&&(this._container||(this._container=i.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=i.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Pr){return ge._container.classList.add(Pr)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=ac(this._lngLat,this._pos,this._map.transform)),!(this._trackPointer&&!J))){var Fe=this._pos=this._trackPointer&&J?J:this._map.project(this._lngLat),Je=this.options.anchor,ft=dv(this.options.offset);if(!Je){var Lt=this._container.offsetWidth,$t=this._container.offsetHeight,cr;Fe.y+ft.bottom.y<$t?cr=["top"]:Fe.y>this._map.transform.height-$t?cr=["bottom"]:cr=[],Fe.x<Lt/2?cr.push("left"):Fe.x>this._map.transform.width-Lt/2&&cr.push("right"),cr.length===0?Je="bottom":Je=cr.join("-")}var dr=Fe.add(ft[Je]).round();i.setTransform(this._container,Of[Je]+" translate("+dr.x+"px,"+dr.y+"px)"),vh(this._container,Je,"popup")}},W.prototype._onClose=function(){this.remove()},W}(e.Evented);function dv(he){if(he)if(typeof he=="number"){var W=Math.round(Math.sqrt(.5*Math.pow(he,2)));return{center:new e.Point(0,0),top:new e.Point(0,he),"top-left":new e.Point(W,W),"top-right":new e.Point(-W,W),bottom:new e.Point(0,-he),"bottom-left":new e.Point(W,-W),"bottom-right":new e.Point(-W,-W),left:new e.Point(he,0),right:new e.Point(-he,0)}}else if(he instanceof e.Point||Array.isArray(he)){var de=e.Point.convert(he);return{center:de,top:de,"top-left":de,"top-right":de,bottom:de,"bottom-left":de,"bottom-right":de,left:de,right:de}}else return{center:e.Point.convert(he.center||[0,0]),top:e.Point.convert(he.top||[0,0]),"top-left":e.Point.convert(he["top-left"]||[0,0]),"top-right":e.Point.convert(he["top-right"]||[0,0]),bottom:e.Point.convert(he.bottom||[0,0]),"bottom-left":e.Point.convert(he["bottom-left"]||[0,0]),"bottom-right":e.Point.convert(he["bottom-right"]||[0,0]),left:e.Point.convert(he.left||[0,0]),right:e.Point.convert(he.right||[0,0])};else return dv(new e.Point(0,0))}var lp={version:e.version,supported:a,setRTLTextPlugin:e.setRTLTextPlugin,getRTLTextPluginStatus:e.getRTLTextPluginStatus,Map:fv,NavigationControl:nc,GeolocateControl:vv,AttributionControl:Wl,ScaleControl:Pc,FullscreenControl:hu,Popup:sp,Marker:uf,Style:is,LngLat:e.LngLat,LngLatBounds:e.LngLatBounds,Point:e.Point,MercatorCoordinate:e.MercatorCoordinate,Evented:e.Evented,config:e.config,prewarm:ar,clearPrewarmedResources:kr,get accessToken(){return e.config.ACCESS_TOKEN},set accessToken(he){e.config.ACCESS_TOKEN=he},get baseApiUrl(){return e.config.API_URL},set baseApiUrl(he){e.config.API_URL=he},get workerCount(){return St.workerCount},set workerCount(he){St.workerCount=he},get maxParallelImageRequests(){return e.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(he){e.config.MAX_PARALLEL_IMAGE_REQUESTS=he},clearStorage:function(W){e.clearTileCache(W)},workerUrl:""};return lp}),A})},{}],240:[function(t,B,V){B.exports=Math.log2||function(m){return Math.log(m)*Math.LOG2E}},{}],241:[function(t,B,V){B.exports=c;var m=t("mouse-event");function c(A,T){T||(T=A,A=window);var e=0,a=0,i=0,n={shift:!1,alt:!1,control:!1,meta:!1},r=!1;function v(M){var _=!1;return"altKey"in M&&(_=_||M.altKey!==n.alt,n.alt=!!M.altKey),"shiftKey"in M&&(_=_||M.shiftKey!==n.shift,n.shift=!!M.shiftKey),"ctrlKey"in M&&(_=_||M.ctrlKey!==n.control,n.control=!!M.ctrlKey),"metaKey"in M&&(_=_||M.metaKey!==n.meta,n.meta=!!M.metaKey),_}function s(M,_){var p=m.x(_),w=m.y(_);"buttons"in _&&(M=_.buttons|0),(M!==e||p!==a||w!==i||v(_))&&(e=M|0,a=p||0,i=w||0,T&&T(e,a,i,n))}function o(M){s(0,M)}function b(){(e||a||i||n.shift||n.alt||n.meta||n.control)&&(a=i=0,e=0,n.shift=n.alt=n.control=n.meta=!1,T&&T(0,0,0,n))}function g(M){v(M)&&T&&T(e,a,i,n)}function d(M){m.buttons(M)===0?s(0,M):s(e,M)}function f(M){s(e|m.buttons(M),M)}function y(M){s(e&~m.buttons(M),M)}function l(){r||(r=!0,A.addEventListener("mousemove",d),A.addEventListener("mousedown",f),A.addEventListener("mouseup",y),A.addEventListener("mouseleave",o),A.addEventListener("mouseenter",o),A.addEventListener("mouseout",o),A.addEventListener("mouseover",o),A.addEventListener("blur",b),A.addEventListener("keyup",g),A.addEventListener("keydown",g),A.addEventListener("keypress",g),A!==window&&(window.addEventListener("blur",b),window.addEventListener("keyup",g),window.addEventListener("keydown",g),window.addEventListener("keypress",g)))}function x(){!r||(r=!1,A.removeEventListener("mousemove",d),A.removeEventListener("mousedown",f),A.removeEventListener("mouseup",y),A.removeEventListener("mouseleave",o),A.removeEventListener("mouseenter",o),A.removeEventListener("mouseout",o),A.removeEventListener("mouseover",o),A.removeEventListener("blur",b),A.removeEventListener("keyup",g),A.removeEventListener("keydown",g),A.removeEventListener("keypress",g),A!==window&&(window.removeEventListener("blur",b),window.removeEventListener("keyup",g),window.removeEventListener("keydown",g),window.removeEventListener("keypress",g)))}l();var u={element:A};return Object.defineProperties(u,{enabled:{get:function(){return r},set:function(M){M?l():x()},enumerable:!0},buttons:{get:function(){return e},enumerable:!0},x:{get:function(){return a},enumerable:!0},y:{get:function(){return i},enumerable:!0},mods:{get:function(){return n},enumerable:!0}}),u}},{"mouse-event":243}],242:[function(t,B,V){var m={left:0,top:0};B.exports=c;function c(T,e,a){e=e||T.currentTarget||T.srcElement,Array.isArray(a)||(a=[0,0]);var i=T.clientX||0,n=T.clientY||0,r=A(e);return a[0]=i-r.left,a[1]=n-r.top,a}function A(T){return T===window||T===document||T===document.body?m:T.getBoundingClientRect()}},{}],243:[function(t,B,V){function m(e){if(typeof e=="object"){if("buttons"in e)return e.buttons;if("which"in e){var a=e.which;if(a===2)return 4;if(a===3)return 2;if(a>0)return 1<<a-1}else if("button"in e){var a=e.button;if(a===1)return 4;if(a===2)return 2;if(a>=0)return 1<<a}}return 0}V.buttons=m;function c(e){return e.target||e.srcElement||window}V.element=c;function A(e){if(typeof e=="object"){if("offsetX"in e)return e.offsetX;var a=c(e),i=a.getBoundingClientRect();return e.clientX-i.left}return 0}V.x=A;function T(e){if(typeof e=="object"){if("offsetY"in e)return e.offsetY;var a=c(e),i=a.getBoundingClientRect();return e.clientY-i.top}return 0}V.y=T},{}],244:[function(t,B,V){var m=t("to-px");B.exports=c;function c(A,T,e){typeof A=="function"&&(e=!!T,T=A,A=window);var a=m("ex",A),i=function(n){e&&n.preventDefault();var r=n.deltaX||0,v=n.deltaY||0,s=n.deltaZ||0,o=n.deltaMode,b=1;switch(o){case 1:b=a;break;case 2:b=window.innerHeight;break}if(r*=b,v*=b,s*=b,r||v||s)return T(r,v,s,n)};return A.addEventListener("wheel",i),i}},{"to-px":315}],245:[function(t,B,V){(function(m,c){(function(){/*! Native Promise Only
    v0.8.1 (c) Kyle Simpson
    MIT License: http://getify.mit-license.org
*/(function(T,e,a){e[T]=e[T]||a(),typeof B<"u"&&B.exports&&(B.exports=e[T])})("Promise",typeof m<"u"?m:this,function(){var T,e,a,i=Object.prototype.toString,n=typeof c<"u"?function(M){return c(M)}:setTimeout;try{Object.defineProperty({},"x",{}),T=function(M,_,p,w){return Object.defineProperty(M,_,{value:p,writable:!0,configurable:w!==!1})}}catch{T=function(_,p,w){return _[p]=w,_}}a=function(){var M,_,p;function w(h,L){this.fn=h,this.self=L,this.next=void 0}return{add:function(L,S){p=new w(L,S),_?_.next=p:M=p,_=p,p=void 0},drain:function(){var L=M;for(M=_=e=void 0;L;)L.fn.call(L.self),L=L.next}}}();function r(u,M){a.add(u,M),e||(e=n(a.drain))}function v(u){var M,_=typeof u;return u!=null&&(_=="object"||_=="function")&&(M=u.then),typeof M=="function"?M:!1}function s(){for(var u=0;u<this.chain.length;u++)o(this,this.state===1?this.chain[u].success:this.chain[u].failure,this.chain[u]);this.chain.length=0}function o(u,M,_){var p,w;try{M===!1?_.reject(u.msg):(M===!0?p=u.msg:p=M.call(void 0,u.msg),p===_.promise?_.reject(TypeError("Promise-chain cycle")):(w=v(p))?w.call(p,_.resolve,_.reject):_.resolve(p))}catch(h){_.reject(h)}}function b(u){var M,_=this;if(!_.triggered){_.triggered=!0,_.def&&(_=_.def);try{(M=v(u))?r(function(){var p=new f(_);try{M.call(u,function(){b.apply(p,arguments)},function(){g.apply(p,arguments)})}catch(w){g.call(p,w)}}):(_.msg=u,_.state=1,_.chain.length>0&&r(s,_))}catch(p){g.call(new f(_),p)}}}function g(u){var M=this;M.triggered||(M.triggered=!0,M.def&&(M=M.def),M.msg=u,M.state=2,M.chain.length>0&&r(s,M))}function d(u,M,_,p){for(var w=0;w<M.length;w++)(function(L){u.resolve(M[L]).then(function(E){_(L,E)},p)})(w)}function f(u){this.def=u,this.triggered=!1}function y(u){this.promise=u,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function l(u){if(typeof u!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var M=new y(this);this.then=function(p,w){var h={success:typeof p=="function"?p:!0,failure:typeof w=="function"?w:!1};return h.promise=new this.constructor(function(S,E){if(typeof S!="function"||typeof E!="function")throw TypeError("Not a function");h.resolve=S,h.reject=E}),M.chain.push(h),M.state!==0&&r(s,M),h.promise},this.catch=function(p){return this.then(void 0,p)};try{u.call(void 0,function(p){b.call(M,p)},function(p){g.call(M,p)})}catch(_){g.call(M,_)}}var x=T({},"constructor",l,!1);return l.prototype=x,T(x,"__NPO__",0,!1),T(l,"resolve",function(M){var _=this;return M&&typeof M=="object"&&M.__NPO__===1?M:new _(function(w,h){if(typeof w!="function"||typeof h!="function")throw TypeError("Not a function");w(M)})}),T(l,"reject",function(M){return new this(function(p,w){if(typeof p!="function"||typeof w!="function")throw TypeError("Not a function");w(M)})}),T(l,"all",function(M){var _=this;return i.call(M)!="[object Array]"?_.reject(TypeError("Not an array")):M.length===0?_.resolve([]):new _(function(w,h){if(typeof w!="function"||typeof h!="function")throw TypeError("Not a function");var L=M.length,S=Array(L),E=0;d(_,M,function(F,I){S[F]=I,++E===L&&w(S)},h)})}),T(l,"race",function(M){var _=this;return i.call(M)!="[object Array]"?_.reject(TypeError("Not an array")):new _(function(w,h){if(typeof w!="function"||typeof h!="function")throw TypeError("Not a function");d(_,M,function(S,E){w(E)},h)})}),l})}).call(this)}).call(this,typeof Ro<"u"?Ro:typeof self<"u"?self:typeof window<"u"?window:{},t("timers").setImmediate)},{timers:312}],246:[function(t,B,V){var m=Math.PI,c=n(120);B.exports=A;function A(r){for(var v,s=[],o=0,b=0,g=0,d=0,f=null,y=null,l=0,x=0,u=0,M=r.length;u<M;u++){var _=r[u],p=_[0];switch(p){case"M":g=_[1],d=_[2];break;case"A":_=a(l,x,_[1],_[2],n(_[3]),_[4],_[5],_[6],_[7]),_.unshift("C"),_.length>7&&(s.push(_.splice(0,7)),_.unshift("C"));break;case"S":var w=l,h=x;(v=="C"||v=="S")&&(w+=w-o,h+=h-b),_=["C",w,h,_[1],_[2],_[3],_[4]];break;case"T":v=="Q"||v=="T"?(f=l*2-f,y=x*2-y):(f=l,y=x),_=e(l,x,f,y,_[1],_[2]);break;case"Q":f=_[1],y=_[2],_=e(l,x,_[1],_[2],_[3],_[4]);break;case"L":_=T(l,x,_[1],_[2]);break;case"H":_=T(l,x,_[1],x);break;case"V":_=T(l,x,l,_[1]);break;case"Z":_=T(l,x,g,d);break}v=p,l=_[_.length-2],x=_[_.length-1],_.length>4?(o=_[_.length-4],b=_[_.length-3]):(o=l,b=x),s.push(_)}return s}function T(r,v,s,o){return["C",r,v,s,o,s,o]}function e(r,v,s,o,b,g){return["C",r/3+2/3*s,v/3+2/3*o,b/3+2/3*s,g/3+2/3*o,b,g]}function a(r,v,s,o,b,g,d,f,y,l){if(l)E=l[0],P=l[1],L=l[2],S=l[3];else{var x=i(r,v,-b);r=x.x,v=x.y,x=i(f,y,-b),f=x.x,y=x.y;var u=(r-f)/2,M=(v-y)/2,_=u*u/(s*s)+M*M/(o*o);_>1&&(_=Math.sqrt(_),s=_*s,o=_*o);var p=s*s,w=o*o,h=(g==d?-1:1)*Math.sqrt(Math.abs((p*w-p*M*M-w*u*u)/(p*M*M+w*u*u)));h==1/0&&(h=1);var L=h*s*M/o+(r+f)/2,S=h*-o*u/s+(v+y)/2,E=Math.asin(((v-S)/o).toFixed(9)),P=Math.asin(((y-S)/o).toFixed(9));E=r<L?m-E:E,P=f<L?m-P:P,E<0&&(E=m*2+E),P<0&&(P=m*2+P),d&&E>P&&(E=E-m*2),!d&&P>E&&(P=P-m*2)}if(Math.abs(P-E)>c){var F=P,I=f,D=y;P=E+c*(d&&P>E?1:-1),f=L+s*Math.cos(P),y=S+o*Math.sin(P);var R=a(f,y,s,o,b,0,d,I,D,[P,F,L,S])}var N=Math.tan((P-E)/4),z=4/3*s*N,G=4/3*o*N,Y=[2*r-(r+z*Math.sin(E)),2*v-(v-G*Math.cos(E)),f+z*Math.sin(P),y-G*Math.cos(P),f,y];if(l)return Y;R&&(Y=Y.concat(R));for(var ee=0;ee<Y.length;){var Z=i(Y[ee],Y[ee+1],b);Y[ee++]=Z.x,Y[ee++]=Z.y}return Y}function i(r,v,s){return{x:r*Math.cos(s)-v*Math.sin(s),y:r*Math.sin(s)+v*Math.cos(s)}}function n(r){return r*(m/180)}},{}],247:[function(t,B,V){var m=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;function T(a){if(a==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(a)}function e(){try{if(!Object.assign)return!1;var a=new String("abc");if(a[5]="de",Object.getOwnPropertyNames(a)[0]==="5")return!1;for(var i={},n=0;n<10;n++)i["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(i).map(function(s){return i[s]});if(r.join("")!=="0123456789")return!1;var v={};return"abcdefghijklmnopqrst".split("").forEach(function(s){v[s]=s}),Object.keys(Object.assign({},v)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}B.exports=e()?Object.assign:function(a,i){for(var n,r=T(a),v,s=1;s<arguments.length;s++){n=Object(arguments[s]);for(var o in n)c.call(n,o)&&(r[o]=n[o]);if(m){v=m(n);for(var b=0;b<v.length;b++)A.call(n,v[b])&&(r[v[b]]=n[v[b]])}}return r}},{}],248:[function(t,B,V){function m(T,e){if(typeof T!="string")return[T];var a=[T];typeof e=="string"||Array.isArray(e)?e={brackets:e}:e||(e={});var i=e.brackets?Array.isArray(e.brackets)?e.brackets:[e.brackets]:["{}","[]","()"],n=e.escape||"___",r=!!e.flat;i.forEach(function(o){var b=new RegExp(["\\",o[0],"[^\\",o[0],"\\",o[1],"]*\\",o[1]].join("")),g=[];function d(f,y,l){var x=a.push(f.slice(o[0].length,-o[1].length))-1;return g.push(x),n+x+n}a.forEach(function(f,y){for(var l,x=0;f!=l;)if(l=f,f=f.replace(b,d),x++>1e4)throw Error("References have circular dependency. Please, check them.");a[y]=f}),g=g.reverse(),a=a.map(function(f){return g.forEach(function(y){f=f.replace(new RegExp("(\\"+n+y+"\\"+n+")","g"),o[0]+"$1"+o[1])}),f})});var v=new RegExp("\\"+n+"([0-9]+)\\"+n);function s(o,b,g){for(var d=[],f,y=0;f=v.exec(o);){if(y++>1e4)throw Error("Circular references in parenthesis");d.push(o.slice(0,f.index)),d.push(s(b[f[1]],b)),o=o.slice(f.index+f[0].length)}return d.push(o),d}return r?a:s(a[0],a)}function c(T,e){if(e&&e.flat){var a=e&&e.escape||"___",i=T[0],n;if(!i)return"";for(var r=new RegExp("\\"+a+"([0-9]+)\\"+a),v=0;i!=n;){if(v++>1e4)throw Error("Circular references in "+T);n=i,i=i.replace(r,s)}return i}return T.reduce(function o(b,g){return Array.isArray(g)&&(g=g.reduce(o,"")),b+g},"");function s(o,b){if(T[b]==null)throw Error("Reference "+b+"is undefined");return T[b]}}function A(T,e){return Array.isArray(T)?c(T,e):m(T,e)}A.parse=m,A.stringify=c,B.exports=A},{}],249:[function(t,B,V){var m=t("pick-by-alias");B.exports=c;function c(A){var T;return arguments.length>1&&(A=arguments),typeof A=="string"?A=A.split(/\s/).map(parseFloat):typeof A=="number"&&(A=[A]),A.length&&typeof A[0]=="number"?A.length===1?T={width:A[0],height:A[0],x:0,y:0}:A.length===2?T={width:A[0],height:A[1],x:0,y:0}:T={x:A[0],y:A[1],width:A[2]-A[0]||0,height:A[3]-A[1]||0}:A&&(A=m(A,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"}),T={x:A.left||0,y:A.top||0},A.width==null?A.right?T.width=A.right-T.x:T.width=0:T.width=A.width,A.height==null?A.bottom?T.height=A.bottom-T.y:T.height=0:T.height=A.height),T}},{"pick-by-alias":253}],250:[function(t,B,V){B.exports=A;var m={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},c=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function A(a){var i=[];return a.replace(c,function(n,r,v){var s=r.toLowerCase();for(v=e(v),s=="m"&&v.length>2&&(i.push([r].concat(v.splice(0,2))),s="l",r=r=="m"?"l":"L");;){if(v.length==m[s])return v.unshift(r),i.push(v);if(v.length<m[s])throw new Error("malformed path data");i.push([r].concat(v.splice(0,m[s])))}}),i}var T=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function e(a){var i=a.match(T);return i?i.map(Number):[]}},{}],251:[function(t,B,V){B.exports=function(c,A){A||(A=[0,""]),c=String(c);var T=parseFloat(c,10);return A[0]=T,A[1]=c.match(/[\d.\-\+]*\s*(.*)/)[1]||"",A}},{}],252:[function(t,B,V){(function(m){(function(){(function(){var c,A,T,e,a,i;typeof performance<"u"&&performance!==null&&performance.now?B.exports=function(){return performance.now()}:typeof m<"u"&&m!==null&&m.hrtime?(B.exports=function(){return(c()-a)/1e6},A=m.hrtime,c=function(){var n;return n=A(),n[0]*1e9+n[1]},e=c(),i=m.uptime()*1e9,a=e-i):Date.now?(B.exports=function(){return Date.now()-T},T=Date.now()):(B.exports=function(){return new Date().getTime()-T},T=new Date().getTime())}).call(this)}).call(this)}).call(this,t("_process"))},{_process:278}],253:[function(t,B,V){B.exports=function(T,e,a){var i={},n,r;if(typeof e=="string"&&(e=c(e)),Array.isArray(e)){var v={};for(r=0;r<e.length;r++)v[e[r]]=!0;e=v}for(n in e)e[n]=c(e[n]);var s={};for(n in e){var o=e[n];if(Array.isArray(o))for(r=0;r<o.length;r++){var b=o[r];if(a&&(s[b]=!0),b in T){if(i[n]=T[b],a)for(var g=r;g<o.length;g++)s[o[g]]=!0;break}}else n in T&&(e[n]&&(i[n]=T[n]),a&&(s[n]=!0))}if(a)for(n in T)s[n]||(i[n]=T[n]);return i};var m={};function c(A){return m[A]?m[A]:(typeof A=="string"&&(A=m[A]=A.split(/\s*,\s*|\s+/)),A)}},{}],254:[function(t,B,V){B.exports=function(c,A,T,e){var a=c[0],i=c[1],n=!1;T===void 0&&(T=0),e===void 0&&(e=A.length);for(var r=e-T,v=0,s=r-1;v<r;s=v++){var o=A[v+T][0],b=A[v+T][1],g=A[s+T][0],d=A[s+T][1],f=b>i!=d>i&&a<(g-o)*(i-b)/(d-b)+o;f&&(n=!n)}return n}},{}],255:[function(t,B,V){/*
 * @copyright 2016 Sean Connelly (@voidqk), http://syntheti.cc
 * @license MIT
 * @preserve Project Home: https://github.com/voidqk/polybooljs
 */var m=t("./lib/build-log"),c=t("./lib/epsilon"),A=t("./lib/intersecter"),T=t("./lib/segment-chainer"),e=t("./lib/segment-selector"),a=t("./lib/geojson"),i=!1,n=c(),r;r={buildLog:function(s){return s===!0?i=m():s===!1&&(i=!1),i===!1?!1:i.list},epsilon:function(s){return n.epsilon(s)},segments:function(s){var o=A(!0,n,i);return s.regions.forEach(o.addRegion),{segments:o.calculate(s.inverted),inverted:s.inverted}},combine:function(s,o){var b=A(!1,n,i);return{combined:b.calculate(s.segments,s.inverted,o.segments,o.inverted),inverted1:s.inverted,inverted2:o.inverted}},selectUnion:function(s){return{segments:e.union(s.combined,i),inverted:s.inverted1||s.inverted2}},selectIntersect:function(s){return{segments:e.intersect(s.combined,i),inverted:s.inverted1&&s.inverted2}},selectDifference:function(s){return{segments:e.difference(s.combined,i),inverted:s.inverted1&&!s.inverted2}},selectDifferenceRev:function(s){return{segments:e.differenceRev(s.combined,i),inverted:!s.inverted1&&s.inverted2}},selectXor:function(s){return{segments:e.xor(s.combined,i),inverted:s.inverted1!==s.inverted2}},polygon:function(s){return{regions:T(s.segments,n,i),inverted:s.inverted}},polygonFromGeoJSON:function(s){return a.toPolygon(r,s)},polygonToGeoJSON:function(s){return a.fromPolygon(r,n,s)},union:function(s,o){return v(s,o,r.selectUnion)},intersect:function(s,o){return v(s,o,r.selectIntersect)},difference:function(s,o){return v(s,o,r.selectDifference)},differenceRev:function(s,o){return v(s,o,r.selectDifferenceRev)},xor:function(s,o){return v(s,o,r.selectXor)}};function v(s,o,b){var g=r.segments(s),d=r.segments(o),f=r.combine(g,d),y=b(f);return r.polygon(y)}typeof window=="object"&&(window.PolyBool=r),B.exports=r},{"./lib/build-log":256,"./lib/epsilon":257,"./lib/geojson":258,"./lib/intersecter":259,"./lib/segment-chainer":261,"./lib/segment-selector":262}],256:[function(t,B,V){function m(){var c,A=0,T=!1;function e(a,i){return c.list.push({type:a,data:i?JSON.parse(JSON.stringify(i)):void 0}),c}return c={list:[],segmentId:function(){return A++},checkIntersection:function(a,i){return e("check",{seg1:a,seg2:i})},segmentChop:function(a,i){return e("div_seg",{seg:a,pt:i}),e("chop",{seg:a,pt:i})},statusRemove:function(a){return e("pop_seg",{seg:a})},segmentUpdate:function(a){return e("seg_update",{seg:a})},segmentNew:function(a,i){return e("new_seg",{seg:a,primary:i})},segmentRemove:function(a){return e("rem_seg",{seg:a})},tempStatus:function(a,i,n){return e("temp_status",{seg:a,above:i,below:n})},rewind:function(a){return e("rewind",{seg:a})},status:function(a,i,n){return e("status",{seg:a,above:i,below:n})},vert:function(a){return a===T?c:(T=a,e("vert",{x:a}))},log:function(a){return typeof a!="string"&&(a=JSON.stringify(a,!1,"  ")),e("log",{txt:a})},reset:function(){return e("reset")},selected:function(a){return e("selected",{segs:a})},chainStart:function(a){return e("chain_start",{seg:a})},chainRemoveHead:function(a,i){return e("chain_rem_head",{index:a,pt:i})},chainRemoveTail:function(a,i){return e("chain_rem_tail",{index:a,pt:i})},chainNew:function(a,i){return e("chain_new",{pt1:a,pt2:i})},chainMatch:function(a){return e("chain_match",{index:a})},chainClose:function(a){return e("chain_close",{index:a})},chainAddHead:function(a,i){return e("chain_add_head",{index:a,pt:i})},chainAddTail:function(a,i){return e("chain_add_tail",{index:a,pt:i})},chainConnect:function(a,i){return e("chain_con",{index1:a,index2:i})},chainReverse:function(a){return e("chain_rev",{index:a})},chainJoin:function(a,i){return e("chain_join",{index1:a,index2:i})},done:function(){return e("done")}},c}B.exports=m},{}],257:[function(t,B,V){function m(c){typeof c!="number"&&(c=1e-10);var A={epsilon:function(T){return typeof T=="number"&&(c=T),c},pointAboveOrOnLine:function(T,e,a){var i=e[0],n=e[1],r=a[0],v=a[1],s=T[0],o=T[1];return(r-i)*(o-n)-(v-n)*(s-i)>=-c},pointBetween:function(T,e,a){var i=T[1]-e[1],n=a[0]-e[0],r=T[0]-e[0],v=a[1]-e[1],s=r*n+i*v;if(s<c)return!1;var o=n*n+v*v;return!(s-o>-c)},pointsSameX:function(T,e){return Math.abs(T[0]-e[0])<c},pointsSameY:function(T,e){return Math.abs(T[1]-e[1])<c},pointsSame:function(T,e){return A.pointsSameX(T,e)&&A.pointsSameY(T,e)},pointsCompare:function(T,e){return A.pointsSameX(T,e)?A.pointsSameY(T,e)?0:T[1]<e[1]?-1:1:T[0]<e[0]?-1:1},pointsCollinear:function(T,e,a){var i=T[0]-e[0],n=T[1]-e[1],r=e[0]-a[0],v=e[1]-a[1];return Math.abs(i*v-r*n)<c},linesIntersect:function(T,e,a,i){var n=e[0]-T[0],r=e[1]-T[1],v=i[0]-a[0],s=i[1]-a[1],o=n*s-r*v;if(Math.abs(o)<c)return!1;var b=T[0]-a[0],g=T[1]-a[1],d=(v*g-s*b)/o,f=(n*g-r*b)/o,y={alongA:0,alongB:0,pt:[T[0]+d*n,T[1]+d*r]};return d<=-c?y.alongA=-2:d<c?y.alongA=-1:d-1<=-c?y.alongA=0:d-1<c?y.alongA=1:y.alongA=2,f<=-c?y.alongB=-2:f<c?y.alongB=-1:f-1<=-c?y.alongB=0:f-1<c?y.alongB=1:y.alongB=2,y},pointInsideRegion:function(T,e){for(var a=T[0],i=T[1],n=e[e.length-1][0],r=e[e.length-1][1],v=!1,s=0;s<e.length;s++){var o=e[s][0],b=e[s][1];b-i>c!=r-i>c&&(n-o)*(i-b)/(r-b)+o-a>c&&(v=!v),n=o,r=b}return v}};return A}B.exports=m},{}],258:[function(t,B,V){var m={toPolygon:function(c,A){function T(i){if(i.length<=0)return c.segments({inverted:!1,regions:[]});function n(s){var o=s.slice(0,s.length-1);return c.segments({inverted:!1,regions:[o]})}for(var r=n(i[0]),v=1;v<i.length;v++)r=c.selectDifference(c.combine(r,n(i[v])));return r}if(A.type==="Polygon")return c.polygon(T(A.coordinates));if(A.type==="MultiPolygon"){for(var e=c.segments({inverted:!1,regions:[]}),a=0;a<A.coordinates.length;a++)e=c.selectUnion(c.combine(e,T(A.coordinates[a])));return c.polygon(e)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(c,A,T){T=c.polygon(c.segments(T));function e(d,f){return A.pointInsideRegion([(d[0][0]+d[1][0])*.5,(d[0][1]+d[1][1])*.5],f)}function a(d){return{region:d,children:[]}}var i=a(null);function n(d,f){for(var y=0;y<d.children.length;y++){var l=d.children[y];if(e(f,l.region)){n(l,f);return}}for(var x=a(f),y=0;y<d.children.length;y++){var l=d.children[y];e(l.region,f)&&(x.children.push(l),d.children.splice(y,1),y--)}d.children.push(x)}for(var r=0;r<T.regions.length;r++){var v=T.regions[r];v.length<3||n(i,v)}function s(d,f){for(var y=0,l=d[d.length-1][0],x=d[d.length-1][1],u=[],M=0;M<d.length;M++){var _=d[M][0],p=d[M][1];u.push([_,p]),y+=p*l-_*x,l=_,x=p}var w=y<0;return w!==f&&u.reverse(),u.push([u[0][0],u[0][1]]),u}var o=[];function b(d){var f=[s(d.region,!1)];o.push(f);for(var y=0;y<d.children.length;y++)f.push(g(d.children[y]))}function g(d){for(var f=0;f<d.children.length;f++)b(d.children[f]);return s(d.region,!0)}for(var r=0;r<i.children.length;r++)b(i.children[r]);return o.length<=0?{type:"Polygon",coordinates:[]}:o.length==1?{type:"Polygon",coordinates:o[0]}:{type:"MultiPolygon",coordinates:o}}};B.exports=m},{}],259:[function(t,B,V){var m=t("./linked-list");function c(A,T,e){function a(y,l){return{id:e?e.segmentId():-1,start:y,end:l,myFill:{above:null,below:null},otherFill:null}}function i(y,l,x){return{id:e?e.segmentId():-1,start:y,end:l,myFill:{above:x.myFill.above,below:x.myFill.below},otherFill:null}}var n=m.create();function r(y,l,x,u,M,_){var p=T.pointsCompare(l,M);return p!==0?p:T.pointsSame(x,_)?0:y!==u?y?1:-1:T.pointAboveOrOnLine(x,u?M:_,u?_:M)?1:-1}function v(y,l){n.insertBefore(y,function(x){var u=r(y.isStart,y.pt,l,x.isStart,x.pt,x.other.pt);return u<0})}function s(y,l){var x=m.node({isStart:!0,pt:y.start,seg:y,primary:l,other:null,status:null});return v(x,y.end),x}function o(y,l,x){var u=m.node({isStart:!1,pt:l.end,seg:l,primary:x,other:y,status:null});y.other=u,v(u,y.pt)}function b(y,l){var x=s(y,l);return o(x,y,l),x}function g(y,l){e&&e.segmentChop(y.seg,l),y.other.remove(),y.seg.end=l,y.other.pt=l,v(y.other,y.pt)}function d(y,l){var x=i(l,y.seg.end,y.seg);return g(y,l),b(x,y.primary)}function f(y,l){var x=m.create();function u(N,z){var G=N.seg.start,Y=N.seg.end,ee=z.seg.start,Z=z.seg.end;return T.pointsCollinear(G,ee,Z)?T.pointsCollinear(Y,ee,Z)||T.pointAboveOrOnLine(Y,ee,Z)?1:-1:T.pointAboveOrOnLine(G,ee,Z)?1:-1}function M(N){return x.findTransition(function(z){var G=u(N,z.ev);return G>0})}function _(N,z){var G=N.seg,Y=z.seg,ee=G.start,Z=G.end,X=Y.start,ne=Y.end;e&&e.checkIntersection(G,Y);var ce=T.linesIntersect(ee,Z,X,ne);if(ce===!1){if(!T.pointsCollinear(ee,Z,X)||T.pointsSame(ee,ne)||T.pointsSame(Z,X))return!1;var Q=T.pointsSame(ee,X),K=T.pointsSame(Z,ne);if(Q&&K)return z;var U=!Q&&T.pointBetween(ee,X,ne),H=!K&&T.pointBetween(Z,X,ne);if(Q)return H?d(z,Z):d(N,ne),z;U&&(K||(H?d(z,Z):d(N,ne)),d(z,ee))}else ce.alongA===0&&(ce.alongB===-1?d(N,X):ce.alongB===0?d(N,ce.pt):ce.alongB===1&&d(N,ne)),ce.alongB===0&&(ce.alongA===-1?d(z,ee):ce.alongA===0?d(z,ce.pt):ce.alongA===1&&d(z,Z));return!1}for(var p=[];!n.isEmpty();){var w=n.getHead();if(e&&e.vert(w.pt[0]),w.isStart){let N=function(){if(L){var z=_(w,L);if(z)return z}return S?_(w,S):!1};var R=N;e&&e.segmentNew(w.seg,w.primary);var h=M(w),L=h.before?h.before.ev:null,S=h.after?h.after.ev:null;e&&e.tempStatus(w.seg,L?L.seg:!1,S?S.seg:!1);var E=N();if(E){if(A){var P;w.seg.myFill.below===null?P=!0:P=w.seg.myFill.above!==w.seg.myFill.below,P&&(E.seg.myFill.above=!E.seg.myFill.above)}else E.seg.otherFill=w.seg.myFill;e&&e.segmentUpdate(E.seg),w.other.remove(),w.remove()}if(n.getHead()!==w){e&&e.rewind(w.seg);continue}if(A){var P;w.seg.myFill.below===null?P=!0:P=w.seg.myFill.above!==w.seg.myFill.below,S?w.seg.myFill.below=S.seg.myFill.above:w.seg.myFill.below=y,P?w.seg.myFill.above=!w.seg.myFill.below:w.seg.myFill.above=w.seg.myFill.below}else if(w.seg.otherFill===null){var F;S?w.primary===S.primary?F=S.seg.otherFill.above:F=S.seg.myFill.above:F=w.primary?l:y,w.seg.otherFill={above:F,below:F}}e&&e.status(w.seg,L?L.seg:!1,S?S.seg:!1),w.other.status=h.insert(m.node({ev:w}))}else{var I=w.status;if(I===null)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(x.exists(I.prev)&&x.exists(I.next)&&_(I.prev.ev,I.next.ev),e&&e.statusRemove(I.ev.seg),I.remove(),!w.primary){var D=w.seg.myFill;w.seg.myFill=w.seg.otherFill,w.seg.otherFill=D}p.push(w.seg)}n.getHead().remove()}return e&&e.done(),p}return A?{addRegion:function(y){for(var l,x=y[y.length-1],u=0;u<y.length;u++){l=x,x=y[u];var M=T.pointsCompare(l,x);M!==0&&b(a(M<0?l:x,M<0?x:l),!0)}},calculate:function(y){return f(y,!1)}}:{calculate:function(y,l,x,u){return y.forEach(function(M){b(i(M.start,M.end,M),!0)}),x.forEach(function(M){b(i(M.start,M.end,M),!1)}),f(l,u)}}}B.exports=c},{"./linked-list":260}],260:[function(t,B,V){var m={create:function(){var c={root:{root:!0,next:null},exists:function(A){return!(A===null||A===c.root)},isEmpty:function(){return c.root.next===null},getHead:function(){return c.root.next},insertBefore:function(A,T){for(var e=c.root,a=c.root.next;a!==null;){if(T(a)){A.prev=a.prev,A.next=a,a.prev.next=A,a.prev=A;return}e=a,a=a.next}e.next=A,A.prev=e,A.next=null},findTransition:function(A){for(var T=c.root,e=c.root.next;e!==null&&!A(e);)T=e,e=e.next;return{before:T===c.root?null:T,after:e,insert:function(a){return a.prev=T,a.next=e,T.next=a,e!==null&&(e.prev=a),a}}}};return c},node:function(c){return c.prev=null,c.next=null,c.remove=function(){c.prev.next=c.next,c.next&&(c.next.prev=c.prev),c.prev=null,c.next=null},c}};B.exports=m},{}],261:[function(t,B,V){function m(c,A,T){var e=[],a=[];return c.forEach(function(i){var n=i.start,r=i.end;if(A.pointsSame(n,r)){console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");return}T&&T.chainStart(i);var v={index:0,matches_head:!1,matches_pt1:!1},s={index:0,matches_head:!1,matches_pt1:!1},o=v;function b(F,I,D){return o.index=F,o.matches_head=I,o.matches_pt1=D,o===v?(o=s,!1):(o=null,!0)}for(var g=0;g<e.length;g++){var d=e[g],f=d[0];d[1];var y=d[d.length-1];if(d[d.length-2],A.pointsSame(f,n)){if(b(g,!0,!0))break}else if(A.pointsSame(f,r)){if(b(g,!0,!1))break}else if(A.pointsSame(y,n)){if(b(g,!1,!0))break}else if(A.pointsSame(y,r)&&b(g,!1,!1))break}if(o===v){e.push([n,r]),T&&T.chainNew(n,r);return}if(o===s){T&&T.chainMatch(v.index);var l=v.index,x=v.matches_pt1?r:n,u=v.matches_head,d=e[l],M=u?d[0]:d[d.length-1],_=u?d[1]:d[d.length-2],p=u?d[d.length-1]:d[0],w=u?d[d.length-2]:d[1];if(A.pointsCollinear(_,M,x)&&(u?(T&&T.chainRemoveHead(v.index,x),d.shift()):(T&&T.chainRemoveTail(v.index,x),d.pop()),M=_),A.pointsSame(p,x)){e.splice(l,1),A.pointsCollinear(w,p,M)&&(u?(T&&T.chainRemoveTail(v.index,M),d.pop()):(T&&T.chainRemoveHead(v.index,M),d.shift())),T&&T.chainClose(v.index),a.push(d);return}u?(T&&T.chainAddHead(v.index,x),d.unshift(x)):(T&&T.chainAddTail(v.index,x),d.push(x));return}function h(F){T&&T.chainReverse(F),e[F].reverse()}function L(F,I){var D=e[F],R=e[I],N=D[D.length-1],z=D[D.length-2],G=R[0],Y=R[1];A.pointsCollinear(z,N,G)&&(T&&T.chainRemoveTail(F,N),D.pop(),N=z),A.pointsCollinear(N,G,Y)&&(T&&T.chainRemoveHead(I,G),R.shift()),T&&T.chainJoin(F,I),e[F]=D.concat(R),e.splice(I,1)}var S=v.index,E=s.index;T&&T.chainConnect(S,E);var P=e[S].length<e[E].length;v.matches_head?s.matches_head?P?(h(S),L(S,E)):(h(E),L(E,S)):L(E,S):s.matches_head?L(S,E):P?(h(S),L(E,S)):(h(E),L(S,E))}),a}B.exports=m},{}],262:[function(t,B,V){function m(A,T,e){var a=[];return A.forEach(function(i){var n=(i.myFill.above?8:0)+(i.myFill.below?4:0)+(i.otherFill&&i.otherFill.above?2:0)+(i.otherFill&&i.otherFill.below?1:0);T[n]!==0&&a.push({id:e?e.segmentId():-1,start:i.start,end:i.end,myFill:{above:T[n]===1,below:T[n]===2},otherFill:null})}),e&&e.selected(a),a}var c={union:function(A,T){return m(A,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],T)},intersect:function(A,T){return m(A,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],T)},difference:function(A,T){return m(A,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],T)},differenceRev:function(A,T){return m(A,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],T)},xor:function(A,T){return m(A,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],T)}};B.exports=c},{}],263:[function(t,B,V){var m=t("stream").Transform,c=t("stream-parser");function A(){m.call(this,{readableObjectMode:!0})}A.prototype=Object.create(m.prototype),A.prototype.constructor=A,c(A.prototype),V.ParserStream=A,V.sliceEq=function(e,a,i){for(var n=a,r=0;r<i.length;)if(e[n++]!==i[r++])return!1;return!0},V.str2arr=function(e,a){var i=[],n=0;if(a&&a==="hex")for(;n<e.length;)i.push(parseInt(e.slice(n,n+2),16)),n+=2;else for(;n<e.length;n++)i.push(e.charCodeAt(n)&255);return i},V.readUInt16LE=function(e,a){return e[a]|e[a+1]<<8},V.readUInt16BE=function(e,a){return e[a+1]|e[a]<<8},V.readUInt32LE=function(e,a){return e[a]|e[a+1]<<8|e[a+2]<<16|e[a+3]*16777216},V.readUInt32BE=function(e,a){return e[a+3]|e[a+2]<<8|e[a+1]<<16|e[a]*16777216};function T(e,a,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||"",this.name=this.constructor.name,this.message=e,a&&(this.code=a),i&&(this.statusCode=i)}T.prototype=Object.create(Error.prototype),T.prototype.constructor=T,V.ProbeError=T},{stream:286,"stream-parser":302}],264:[function(t,B,V){function m(T,e){var a=new Error(T);return a.code=e,a}function c(T){try{return decodeURIComponent(escape(T))}catch{return T}}function A(T,e,a){this.input=T.subarray(e,a),this.start=e;var i=String.fromCharCode.apply(null,this.input.subarray(0,4));if(i!=="II*\0"&&i!=="MM\0*")throw m("invalid TIFF signature","EBADDATA");this.big_endian=i[0]==="M"}A.prototype.each=function(T){this.aborted=!1;var e=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:e}];this.ifds_to_read.length>0&&!this.aborted;){var a=this.ifds_to_read.shift();!a.offset||this.scan_ifd(a.id,a.offset,T)}},A.prototype.read_uint16=function(T){var e=this.input;if(T+2>e.length)throw m("unexpected EOF","EBADDATA");return this.big_endian?e[T]*256+e[T+1]:e[T]+e[T+1]*256},A.prototype.read_uint32=function(T){var e=this.input;if(T+4>e.length)throw m("unexpected EOF","EBADDATA");return this.big_endian?e[T]*16777216+e[T+1]*65536+e[T+2]*256+e[T+3]:e[T]+e[T+1]*256+e[T+2]*65536+e[T+3]*16777216},A.prototype.is_subifd_link=function(T,e){return T===0&&e===34665||T===0&&e===34853||T===34665&&e===40965},A.prototype.exif_format_length=function(T){switch(T){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},A.prototype.exif_format_read=function(T,e){var a;switch(T){case 1:case 2:return a=this.input[e],a;case 6:return a=this.input[e],a|(a&128)*33554430;case 3:return a=this.read_uint16(e),a;case 8:return a=this.read_uint16(e),a|(a&32768)*131070;case 4:return a=this.read_uint32(e),a;case 9:return a=this.read_uint32(e),a|0;case 5:case 10:case 11:case 12:return null;case 7:return null;default:return null}},A.prototype.scan_ifd=function(T,e,a){var i=this.read_uint16(e);e+=2;for(var n=0;n<i;n++){var r=this.read_uint16(e),v=this.read_uint16(e+2),s=this.read_uint32(e+4),o=this.exif_format_length(v),b=s*o,g=b<=4?e+8:this.read_uint32(e+8),d=!1;if(g+b>this.input.length)throw m("unexpected EOF","EBADDATA");for(var f=[],y=g,l=0;l<s;l++,y+=o){var x=this.exif_format_read(v,y);if(x===null){f=null;break}f.push(x)}Array.isArray(f)&&v===2&&(f=c(String.fromCharCode.apply(null,f)),f&&f[f.length-1]==="\0"&&(f=f.slice(0,-1))),this.is_subifd_link(T,r)&&Array.isArray(f)&&Number.isInteger(f[0])&&f[0]>0&&(this.ifds_to_read.push({id:r,offset:f[0]}),d=!0);var u={is_big_endian:this.big_endian,ifd:T,tag:r,format:v,count:s,entry_offset:e+this.start,data_length:b,data_offset:g+this.start,value:f,is_subifd_link:d};if(a(u)===!1){this.aborted=!0;return}e+=12}T===0&&this.ifds_to_read.push({id:1,offset:this.read_uint32(e)})},B.exports.ExifParser=A,B.exports.get_orientation=function(T){var e=0;try{return new A(T,0,T.length).each(function(a){if(a.ifd===0&&a.tag===274&&Array.isArray(a.value))return e=a.value[0],!1}),e}catch{return-1}}},{}],265:[function(t,B,V){var m=t("./common").readUInt16BE,c=t("./common").readUInt32BE;function A(s,o){if(s.length<4+o)return null;var b=c(s,o);return s.length<b+o||b<8?null:{boxtype:String.fromCharCode.apply(null,s.slice(o+4,o+8)),data:s.slice(o+8,o+b),end:o+b}}B.exports.unbox=A;function T(s,o){for(var b=0;;){var g=A(s,b);if(!g)break;switch(g.boxtype){case"ispe":o.sizes.push({width:c(g.data,4),height:c(g.data,8)});break;case"irot":o.transforms.push({type:"irot",value:g.data[0]&3});break;case"imir":o.transforms.push({type:"imir",value:g.data[0]&1});break}b=g.end}}function e(s,o,b){for(var g=0,d=0;d<b;d++)g=g*256+(s[o+d]||0);return g}function a(s,o){for(var b=s[4]>>4&15,g=s[4]&15,d=s[5]>>4&15,f=m(s,6),y=8,l=0;l<f;l++){var x=m(s,y);y+=2;var u=m(s,y);y+=2;var M=e(s,y,d);y+=d;var _=m(s,y);if(y+=2,u===0&&_===1){var p=e(s,y,b),w=e(s,y+b,g);o.item_loc[x]={length:w,offset:p+M}}y+=_*(b+g)}}function i(s,o){for(var b=m(s,4),g=6,d=0;d<b;d++){var f=A(s,g);if(!f)break;if(f.boxtype==="infe"){for(var y=m(f.data,4),l="",x=8;x<f.data.length&&f.data[x];x++)l+=String.fromCharCode(f.data[x]);o.item_inf[l]=y}g=f.end}}function n(s,o){for(var b=0;;){var g=A(s,b);if(!g)break;g.boxtype==="ipco"&&T(g.data,o),b=g.end}}function r(s,o){for(var b=4;;){var g=A(s,b);if(!g)break;g.boxtype==="iprp"&&n(g.data,o),g.boxtype==="iloc"&&a(g.data,o),g.boxtype==="iinf"&&i(g.data,o),b=g.end}}function v(s){var o=s.reduce(function(d,f){return d.width>f.width||d.width===f.width&&d.height>f.height?d:f}),b=s.reduce(function(d,f){return d.height>f.height||d.height===f.height&&d.width>f.width?d:f}),g;return o.width>b.height||o.width===b.height&&o.height>b.width?g=o:g=b,g}B.exports.readSizeFromMeta=function(s){var o={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(r(s,o),!!o.sizes.length){var b=v(o.sizes),g=1;o.transforms.forEach(function(f){var y={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},l={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if(f.type==="imir"&&(f.value===0?g=l[g]:(g=l[g],g=y[g],g=y[g])),f.type==="irot")for(var x=0;x<f.value;x++)g=y[g]});var d=null;return o.item_inf.Exif&&(d=o.item_loc[o.item_inf.Exif]),{width:b.width,height:b.height,orientation:o.transforms.length?g:null,variants:o.sizes,exif_location:d}}},B.exports.getMimeType=function(s){var o=String.fromCharCode.apply(null,s.slice(0,4)),b={};b[o]=!0;for(var g=8;g<s.length;g+=4)b[String.fromCharCode.apply(null,s.slice(g,g+4))]=!0;if(!(!b.mif1&&!b.msf1&&!b.miaf))return o==="avif"||o==="avis"||o==="avio"?{type:"avif",mime:"image/avif"}:o==="heic"||o==="heix"?{type:"heic",mime:"image/heic"}:o==="hevc"||o==="hevx"?{type:"heic",mime:"image/heic-sequence"}:b.avif||b.avis?{type:"avif",mime:"image/avif"}:b.heic||b.heix||b.hevc||b.hevx||b.heis?b.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},{"./common":263}],266:[function(t,B,V){var m=t("../common").str2arr,c=t("../common").sliceEq,A=t("../common").readUInt32BE,T=t("../miaf_utils"),e=t("../exif_utils"),a=m("ftyp");B.exports=function(i){if(!!c(i,4,a)){var n=T.unbox(i,0);if(!!n){var r=T.getMimeType(n.data);if(!!r){for(var v,s=n.end;;){var o=T.unbox(i,s);if(!o)break;if(s=o.end,o.boxtype==="mdat")return;if(o.boxtype==="meta"){v=o.data;break}}if(!!v){var b=T.readSizeFromMeta(v);if(!!b){var g={width:b.width,height:b.height,type:r.type,mime:r.mime,wUnits:"px",hUnits:"px"};if(b.variants.length>1&&(g.variants=b.variants),b.orientation&&(g.orientation=b.orientation),b.exif_location&&b.exif_location.offset+b.exif_location.length<=i.length){var d=A(i,b.exif_location.offset),f=i.slice(b.exif_location.offset+d+4,b.exif_location.offset+b.exif_location.length),y=e.get_orientation(f);y>0&&(g.orientation=y)}return g}}}}}}},{"../common":263,"../exif_utils":264,"../miaf_utils":265}],267:[function(t,B,V){var m=t("../common").str2arr,c=t("../common").sliceEq,A=t("../common").readUInt16LE,T=m("BM");B.exports=function(e){if(!(e.length<26)&&!!c(e,0,T))return{width:A(e,18),height:A(e,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},{"../common":263}],268:[function(t,B,V){var m=t("../common").str2arr,c=t("../common").sliceEq,A=t("../common").readUInt16LE,T=m("GIF87a"),e=m("GIF89a");B.exports=function(a){if(!(a.length<10)&&!(!c(a,0,T)&&!c(a,0,e)))return{width:A(a,6),height:A(a,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},{"../common":263}],269:[function(t,B,V){var m=t("../common").readUInt16LE,c=0,A=1,T=16;B.exports=function(e){var a=m(e,0),i=m(e,2),n=m(e,4);if(!(a!==c||i!==A||!n)){for(var r=[],v={width:0,height:0},s=0;s<n;s++){var o=e[6+T*s]||256,b=e[6+T*s+1]||256,g={width:o,height:b};r.push(g),(o>v.width||b>v.height)&&(v=g)}return{width:v.width,height:v.height,variants:r,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},{"../common":263}],270:[function(t,B,V){var m=t("../common").readUInt16BE,c=t("../common").str2arr,A=t("../common").sliceEq,T=t("../exif_utils"),e=c("Exif\0\0");B.exports=function(a){if(!(a.length<2)&&!(a[0]!==255||a[1]!==216||a[2]!==255))for(var i=2;;){for(;;){if(a.length-i<2)return;if(a[i++]===255)break}for(var n=a[i++],r;n===255;)n=a[i++];if(208<=n&&n<=217||n===1)r=0;else if(192<=n&&n<=254){if(a.length-i<2)return;r=m(a,i)-2,i+=2}else return;if(n===217||n===218)return;var v;if(n===225&&r>=10&&A(a,i,e)&&(v=T.get_orientation(a.slice(i+6,i+r))),r>=5&&192<=n&&n<=207&&n!==196&&n!==200&&n!==204){if(a.length-i<r)return;var s={width:m(a,i+3),height:m(a,i+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return v>0&&(s.orientation=v),s}i+=r}}},{"../common":263,"../exif_utils":264}],271:[function(t,B,V){var m=t("../common").str2arr,c=t("../common").sliceEq,A=t("../common").readUInt32BE,T=m(`\x89PNG\r

`),e=m("IHDR");B.exports=function(a){if(!(a.length<24)&&!!c(a,0,T)&&!!c(a,12,e))return{width:A(a,16),height:A(a,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},{"../common":263}],272:[function(t,B,V){var m=t("../common").str2arr,c=t("../common").sliceEq,A=t("../common").readUInt32BE,T=m("8BPS\0");B.exports=function(e){if(!(e.length<6+16)&&!!c(e,0,T))return{width:A(e,6+12),height:A(e,6+8),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},{"../common":263}],273:[function(t,B,V){function m(o){return o===32||o===9||o===13||o===10}function c(o){return typeof o=="number"&&isFinite(o)&&o>0}function A(o){var b=0,g=o.length;for(o[0]===239&&o[1]===187&&o[2]===191&&(b=3);b<g&&m(o[b]);)b++;return b===g?!1:o[b]===60}var T=/<[-_.:a-zA-Z0-9][^>]*>/,e=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,a=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,i=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,n=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,r=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function v(o){var b=o.match(a),g=o.match(i),d=o.match(n);return{width:b&&(b[1]||b[2]),height:g&&(g[1]||g[2]),viewbox:d&&(d[1]||d[2])}}function s(o){return r.test(o)?o.match(r)[0]:"px"}B.exports=function(o){if(!!A(o)){for(var b="",g=0;g<o.length;g++)b+=String.fromCharCode(o[g]);var d=(b.match(T)||[""])[0];if(!!e.test(d)){var f=v(d),y=parseFloat(f.width),l=parseFloat(f.height);if(f.width&&f.height)return!c(y)||!c(l)?void 0:{width:y,height:l,type:"svg",mime:"image/svg+xml",wUnits:s(f.width),hUnits:s(f.height)};var x=(f.viewbox||"").split(" "),u={width:x[2],height:x[3]},M=parseFloat(u.width),_=parseFloat(u.height);if(!(!c(M)||!c(_))&&s(u.width)===s(u.height)){var p=M/_;return f.width?c(y)?{width:y,height:y/p,type:"svg",mime:"image/svg+xml",wUnits:s(f.width),hUnits:s(f.width)}:void 0:f.height?c(l)?{width:l*p,height:l,type:"svg",mime:"image/svg+xml",wUnits:s(f.height),hUnits:s(f.height)}:void 0:{width:M,height:_,type:"svg",mime:"image/svg+xml",wUnits:s(u.width),hUnits:s(u.height)}}}}}},{}],274:[function(t,B,V){var m=t("../common").str2arr,c=t("../common").sliceEq,A=t("../common").readUInt16LE,T=t("../common").readUInt16BE,e=t("../common").readUInt32LE,a=t("../common").readUInt32BE,i=m("II*\0"),n=m("MM\0*");function r(o,b,g){return g?T(o,b):A(o,b)}function v(o,b,g){return g?a(o,b):e(o,b)}function s(o,b,g){var d=r(o,b+2,g),f=v(o,b+4,g);return f!==1||d!==3&&d!==4?null:d===3?r(o,b+8,g):v(o,b+8,g)}B.exports=function(o){if(!(o.length<8)&&!(!c(o,0,i)&&!c(o,0,n))){var b=o[0]===77,g=v(o,4,b)-8;if(!(g<0)){var d=g+8;if(!(o.length-d<2)){var f=r(o,d+0,b)*12;if(!(f<=0)&&(d+=2,!(o.length-d<f))){var y,l,x,u;for(y=0;y<f;y+=12)u=r(o,d+y,b),u===256?l=s(o,d+y,b):u===257&&(x=s(o,d+y,b));if(l&&x)return{width:l,height:x,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}}}}}}},{"../common":263}],275:[function(t,B,V){var m=t("../common").str2arr,c=t("../common").sliceEq,A=t("../common").readUInt16LE,T=t("../common").readUInt32LE,e=t("../exif_utils"),a=m("RIFF"),i=m("WEBP");function n(s,o){if(!(s[o+3]!==157||s[o+4]!==1||s[o+5]!==42))return{width:A(s,o+6)&16383,height:A(s,o+8)&16383,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function r(s,o){if(s[o]===47){var b=T(s,o+1);return{width:(b&16383)+1,height:(b>>14&16383)+1,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}function v(s,o){return{width:(s[o+6]<<16|s[o+5]<<8|s[o+4])+1,height:(s[o+9]<<o|s[o+8]<<8|s[o+7])+1,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}B.exports=function(s){if(!(s.length<16)&&!(!c(s,0,a)&&!c(s,8,i))){var o=12,b=null,g=0,d=T(s,4)+8;if(!(d>s.length)){for(;o+8<d;){if(s[o]===0){o++;continue}var f=String.fromCharCode.apply(null,s.slice(o,o+4)),y=T(s,o+4);f==="VP8 "&&y>=10?b=b||n(s,o+8):f==="VP8L"&&y>=9?b=b||r(s,o+8):f==="VP8X"&&y>=10?b=b||v(s,o+8):f==="EXIF"&&(g=e.get_orientation(s.slice(o+8,o+8+y)),o=1/0),o+=8+y}if(!!b)return g>0&&(b.orientation=g),b}}}},{"../common":263,"../exif_utils":264}],276:[function(t,B,V){B.exports={avif:t("./parse_sync/avif"),bmp:t("./parse_sync/bmp"),gif:t("./parse_sync/gif"),ico:t("./parse_sync/ico"),jpeg:t("./parse_sync/jpeg"),png:t("./parse_sync/png"),psd:t("./parse_sync/psd"),svg:t("./parse_sync/svg"),tiff:t("./parse_sync/tiff"),webp:t("./parse_sync/webp")}},{"./parse_sync/avif":266,"./parse_sync/bmp":267,"./parse_sync/gif":268,"./parse_sync/ico":269,"./parse_sync/jpeg":270,"./parse_sync/png":271,"./parse_sync/psd":272,"./parse_sync/svg":273,"./parse_sync/tiff":274,"./parse_sync/webp":275}],277:[function(t,B,V){var m=t("./lib/parsers_sync");function c(A){for(var T=Object.keys(m),e=0;e<T.length;e++){var a=m[T[e]](A);if(a)return a}return null}B.exports=function(T){return c(T)},B.exports.parsers=m},{"./lib/parsers_sync":276}],278:[function(t,B,V){var m=B.exports={},c,A;function T(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?c=setTimeout:c=T}catch{c=T}try{typeof clearTimeout=="function"?A=clearTimeout:A=e}catch{A=e}})();function a(f){if(c===setTimeout)return setTimeout(f,0);if((c===T||!c)&&setTimeout)return c=setTimeout,setTimeout(f,0);try{return c(f,0)}catch{try{return c.call(null,f,0)}catch{return c.call(this,f,0)}}}function i(f){if(A===clearTimeout)return clearTimeout(f);if((A===e||!A)&&clearTimeout)return A=clearTimeout,clearTimeout(f);try{return A(f)}catch{try{return A.call(null,f)}catch{return A.call(this,f)}}}var n=[],r=!1,v,s=-1;function o(){!r||!v||(r=!1,v.length?n=v.concat(n):s=-1,n.length&&b())}function b(){if(!r){var f=a(o);r=!0;for(var y=n.length;y;){for(v=n,n=[];++s<y;)v&&v[s].run();s=-1,y=n.length}v=null,r=!1,i(f)}}m.nextTick=function(f){var y=new Array(arguments.length-1);if(arguments.length>1)for(var l=1;l<arguments.length;l++)y[l-1]=arguments[l];n.push(new g(f,y)),n.length===1&&!r&&a(b)};function g(f,y){this.fun=f,this.array=y}g.prototype.run=function(){this.fun.apply(null,this.array)},m.title="browser",m.browser=!0,m.env={},m.argv=[],m.version="",m.versions={};function d(){}m.on=d,m.addListener=d,m.once=d,m.off=d,m.removeListener=d,m.removeAllListeners=d,m.emit=d,m.prependListener=d,m.prependOnceListener=d,m.listeners=function(f){return[]},m.binding=function(f){throw new Error("process.binding is not supported")},m.cwd=function(){return"/"},m.chdir=function(f){throw new Error("process.chdir is not supported")},m.umask=function(){return 0}},{}],279:[function(t,B,V){(function(m){(function(){for(var c=t("performance-now"),A=typeof window>"u"?m:window,T=["moz","webkit"],e="AnimationFrame",a=A["request"+e],i=A["cancel"+e]||A["cancelRequest"+e],n=0;!a&&n<T.length;n++)a=A[T[n]+"Request"+e],i=A[T[n]+"Cancel"+e]||A[T[n]+"CancelRequest"+e];if(!a||!i){var r=0,v=0,s=[],o=1e3/60;a=function(b){if(s.length===0){var g=c(),d=Math.max(0,o-(g-r));r=d+g,setTimeout(function(){var f=s.slice(0);s.length=0;for(var y=0;y<f.length;y++)if(!f[y].cancelled)try{f[y].callback(r)}catch(l){setTimeout(function(){throw l},0)}},Math.round(d))}return s.push({handle:++v,callback:b,cancelled:!1}),v},i=function(b){for(var g=0;g<s.length;g++)s[g].handle===b&&(s[g].cancelled=!0)}}B.exports=function(b){return a.call(A,b)},B.exports.cancel=function(){i.apply(A,arguments)},B.exports.polyfill=function(b){b||(b=A),b.requestAnimationFrame=a,b.cancelAnimationFrame=i}}).call(this)}).call(this,typeof Ro<"u"?Ro:typeof self<"u"?self:typeof window<"u"?window:{})},{"performance-now":252}],280:[function(t,B,V){var m=t("array-bounds"),c=t("color-normalize"),A=t("update-diff"),T=t("pick-by-alias"),e=t("object-assign"),a=t("flatten-vertex-data"),i=t("to-float32"),n=i.float32,r=i.fract32;B.exports=s;var v=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]];function s(o,b){if(typeof o=="function"?(b||(b={}),b.regl=o):b=o,b.length&&(b.positions=b),o=b.regl,!o.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var g=o._gl,d,f,y,l,x,u,M={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},_=[];return l=o.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),f=o.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),y=o.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),x=o.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),u=o.buffer({usage:"static",type:"float",data:v}),L(b),d=o({vert:`
		precision highp float;

		attribute vec2 position, positionFract;
		attribute vec4 error;
		attribute vec4 color;

		attribute vec2 direction, lineOffset, capOffset;

		uniform vec4 viewport;
		uniform float lineWidth, capSize;
		uniform vec2 scale, scaleFract, translate, translateFract;

		varying vec4 fragColor;

		void main() {
			fragColor = color / 255.;

			vec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;

			vec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;

			vec2 position = position + dxy;

			vec2 pos = (position + translate) * scale
				+ (positionFract + translateFract) * scale
				+ (position + translate) * scaleFract
				+ (positionFract + translateFract) * scaleFract;

			pos += pixelOffset / viewport.zw;

			gl_Position = vec4(pos * 2. - 1., 0, 1);
		}
		`,frag:`
		precision highp float;

		varying vec4 fragColor;

		uniform float opacity;

		void main() {
			gl_FragColor = fragColor;
			gl_FragColor.a *= opacity;
		}
		`,uniforms:{range:o.prop("range"),lineWidth:o.prop("lineWidth"),capSize:o.prop("capSize"),opacity:o.prop("opacity"),scale:o.prop("scale"),translate:o.prop("translate"),scaleFract:o.prop("scaleFract"),translateFract:o.prop("translateFract"),viewport:function(E,P){return[P.viewport.x,P.viewport.y,E.viewportWidth,E.viewportHeight]}},attributes:{color:{buffer:l,offset:function(E,P){return P.offset*4},divisor:1},position:{buffer:f,offset:function(E,P){return P.offset*8},divisor:1},positionFract:{buffer:y,offset:function(E,P){return P.offset*8},divisor:1},error:{buffer:x,offset:function(E,P){return P.offset*16},divisor:1},direction:{buffer:u,stride:24,offset:0},lineOffset:{buffer:u,stride:24,offset:8},capOffset:{buffer:u,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:o.prop("viewport")},viewport:o.prop("viewport"),stencil:!1,instances:o.prop("count"),count:v.length}),e(p,{update:L,draw:w,destroy:S,regl:o,gl:g,canvas:g.canvas,groups:_}),p;function p(E){E?L(E):E===null&&S(),w()}function w(E){if(typeof E=="number")return h(E);E&&!Array.isArray(E)&&(E=[E]),o._refresh(),_.forEach(function(P,F){if(!!P){if(E&&(E[F]?P.draw=!0:P.draw=!1),!P.draw){P.draw=!0;return}h(F)}})}function h(E){typeof E=="number"&&(E=_[E]),E!=null&&(!(E&&E.count&&E.color&&E.opacity&&E.positions&&E.positions.length>1)||(E.scaleRatio=[E.scale[0]*E.viewport.width,E.scale[1]*E.viewport.height],d(E),E.after&&E.after(E)))}function L(E){if(!!E){E.length!=null?typeof E[0]=="number"&&(E=[{positions:E}]):Array.isArray(E)||(E=[E]);var P=0,F=0;if(p.groups=_=E.map(function(Y,ee){var Z=_[ee];if(Y)typeof Y=="function"?Y={after:Y}:typeof Y[0]=="number"&&(Y={positions:Y});else return Z;return Y=T(Y,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),Z||(_[ee]=Z={id:ee,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},Y=e({},M,Y)),A(Z,Y,[{lineWidth:function(X){return+X*.5},capSize:function(X){return+X*.5},opacity:parseFloat,errors:function(X){return X=a(X),F+=X.length,X},positions:function(X,ne){return X=a(X,"float64"),ne.count=Math.floor(X.length/2),ne.bounds=m(X,2),ne.offset=P,P+=ne.count,X}},{color:function(X,ne){var ce=ne.count;if(X||(X="transparent"),!Array.isArray(X)||typeof X[0]=="number"){var Q=X;X=Array(ce);for(var K=0;K<ce;K++)X[K]=Q}if(X.length<ce)throw Error("Not enough colors");for(var U=new Uint8Array(ce*4),H=0;H<ce;H++){var q=c(X[H],"uint8");U.set(q,H*4)}return U},range:function(X,ne,ce){var Q=ne.bounds;return X||(X=Q),ne.scale=[1/(X[2]-X[0]),1/(X[3]-X[1])],ne.translate=[-X[0],-X[1]],ne.scaleFract=r(ne.scale),ne.translateFract=r(ne.translate),X},viewport:function(X){var ne;return Array.isArray(X)?ne={x:X[0],y:X[1],width:X[2]-X[0],height:X[3]-X[1]}:X?(ne={x:X.x||X.left||0,y:X.y||X.top||0},X.right?ne.width=X.right-ne.x:ne.width=X.w||X.width||0,X.bottom?ne.height=X.bottom-ne.y:ne.height=X.h||X.height||0):ne={x:0,y:0,width:g.drawingBufferWidth,height:g.drawingBufferHeight},ne}}]),Z}),P||F){var I=_.reduce(function(Y,ee,Z){return Y+(ee?ee.count:0)},0),D=new Float64Array(I*2),R=new Uint8Array(I*4),N=new Float32Array(I*4);_.forEach(function(Y,ee){if(!!Y){var Z=Y.positions,X=Y.count,ne=Y.offset,ce=Y.color,Q=Y.errors;!X||(R.set(ce,ne*4),N.set(Q,ne*4),D.set(Z,ne*2))}});var z=n(D);f(z);var G=r(D,z);y(G),l(R),x(N)}}}function S(){f.destroy(),y.destroy(),l.destroy(),x.destroy(),u.destroy()}}},{"array-bounds":71,"color-normalize":89,"flatten-vertex-data":191,"object-assign":247,"pick-by-alias":253,"to-float32":314,"update-diff":330}],281:[function(t,B,V){var m=t("color-normalize"),c=t("array-bounds"),A=t("object-assign"),T=t("glslify"),e=t("pick-by-alias"),a=t("flatten-vertex-data"),i=t("earcut"),n=t("array-normalize"),r=t("to-float32"),v=r.float32,s=r.fract32,o=t("es6-weak-map"),b=t("parse-rect"),g=t("array-find-index");B.exports=d;function d(f,y){if(!(this instanceof d))return new d(f,y);if(typeof f=="function"?(y||(y={}),y.regl=f):y=f,y.length&&(y.positions=y),f=y.regl,!f.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=f._gl,this.regl=f,this.passes=[],this.shaders=d.shaders.has(f)?d.shaders.get(f):d.shaders.set(f,d.createShaders(f)).get(f),this.update(y)}d.dashMult=2,d.maxPatternLength=256,d.precisionThreshold=3e6,d.maxPoints=1e4,d.maxLines=2048,d.shaders=new o,d.createShaders=function(f){var y=f.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),l={primitive:"triangle strip",instances:f.prop("count"),count:4,offset:0,uniforms:{miterMode:function(_,p){return p.join==="round"?2:1},miterLimit:f.prop("miterLimit"),scale:f.prop("scale"),scaleFract:f.prop("scaleFract"),translateFract:f.prop("translateFract"),translate:f.prop("translate"),thickness:f.prop("thickness"),dashTexture:f.prop("dashTexture"),opacity:f.prop("opacity"),pixelRatio:f.context("pixelRatio"),id:f.prop("id"),dashLength:f.prop("dashLength"),viewport:function(_,p){return[p.viewport.x,p.viewport.y,_.viewportWidth,_.viewportHeight]},depth:f.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(_,p){return!p.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:f.prop("viewport")},viewport:f.prop("viewport")},x=f(A({vert:T([`precision highp float;
#define GLSLIFY 1

attribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;
attribute vec4 color;
attribute float lineEnd, lineTop;

uniform vec2 scale, scaleFract, translate, translateFract;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;

varying vec4 fragColor;
varying vec2 tangent;

vec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {
	// the order is important
	return position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;
}

void main() {
	float lineStart = 1. - lineEnd;
	float lineOffset = lineTop * 2. - 1.;

	vec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);
	tangent = normalize(diff * scale * viewport.zw);
	vec2 normal = vec2(-tangent.y, tangent.x);

	vec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart
		+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd

		+ thickness * normal * .5 * lineOffset / viewport.zw;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
}
`]),frag:T([`precision highp float;
#define GLSLIFY 1

uniform float dashLength, pixelRatio, thickness, opacity, id;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;

void main() {
	float alpha = 1.;

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`]),attributes:{lineEnd:{buffer:y,divisor:0,stride:8,offset:0},lineTop:{buffer:y,divisor:0,stride:8,offset:4},aCoord:{buffer:f.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:f.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:f.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:f.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:f.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},l)),u;try{u=f(A({cull:{enable:!0,face:"back"},vert:T([`precision highp float;
#define GLSLIFY 1

attribute vec2 aCoord, bCoord, nextCoord, prevCoord;
attribute vec4 aColor, bColor;
attribute float lineEnd, lineTop;

uniform vec2 scale, translate;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;
uniform float miterLimit, miterMode;

varying vec4 fragColor;
varying vec4 startCutoff, endCutoff;
varying vec2 tangent;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

const float REVERSE_THRESHOLD = -.875;
const float MIN_DIFF = 1e-6;

// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead
// TODO: precalculate dot products, normalize things beforehead etc.
// TODO: refactor to rectangular algorithm

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

bool isNaN( float val ){
  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;
}

void main() {
	vec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;

  vec2 adjustedScale;
  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;
  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;

  vec2 scaleRatio = adjustedScale * viewport.zw;
	vec2 normalWidth = thickness / scaleRatio;

	float lineStart = 1. - lineEnd;
	float lineBot = 1. - lineTop;

	fragColor = (lineStart * aColor + lineEnd * bColor) / 255.;

	if (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;

	if (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);
	if (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);

	vec2 prevDiff = aCoord - prevCoord;
	vec2 currDiff = bCoord - aCoord;
	vec2 nextDiff = nextCoord - bCoord;

	vec2 prevTangent = normalize(prevDiff * scaleRatio);
	vec2 currTangent = normalize(currDiff * scaleRatio);
	vec2 nextTangent = normalize(nextDiff * scaleRatio);

	vec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);
	vec2 currNormal = vec2(-currTangent.y, currTangent.x);
	vec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);

	vec2 startJoinDirection = normalize(prevTangent - currTangent);
	vec2 endJoinDirection = normalize(currTangent - nextTangent);

	// collapsed/unidirectional segment cases
	// FIXME: there should be more elegant solution
	vec2 prevTanDiff = abs(prevTangent - currTangent);
	vec2 nextTanDiff = abs(nextTangent - currTangent);
	if (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {
		startJoinDirection = currNormal;
	}
	if (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {
		endJoinDirection = currNormal;
	}
	if (aCoord == bCoord) {
		endJoinDirection = startJoinDirection;
		currNormal = prevNormal;
		currTangent = prevTangent;
	}

	tangent = currTangent;

	//calculate join shifts relative to normals
	float startJoinShift = dot(currNormal, startJoinDirection);
	float endJoinShift = dot(currNormal, endJoinDirection);

	float startMiterRatio = abs(1. / startJoinShift);
	float endMiterRatio = abs(1. / endJoinShift);

	vec2 startJoin = startJoinDirection * startMiterRatio;
	vec2 endJoin = endJoinDirection * endMiterRatio;

	vec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;
	startTopJoin = sign(startJoinShift) * startJoin * .5;
	startBotJoin = -startTopJoin;

	endTopJoin = sign(endJoinShift) * endJoin * .5;
	endBotJoin = -endTopJoin;

	vec2 aTopCoord = aCoord + normalWidth * startTopJoin;
	vec2 bTopCoord = bCoord + normalWidth * endTopJoin;
	vec2 aBotCoord = aCoord + normalWidth * startBotJoin;
	vec2 bBotCoord = bCoord + normalWidth * endBotJoin;

	//miter anti-clipping
	float baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));
	float abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));

	//prevent close to reverse direction switch
	bool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);
	bool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);

	if (prevReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);
		aBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		aTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {
		//handle miter clipping
		bTopCoord -= normalWidth * endTopJoin;
		bTopCoord += normalize(endTopJoin * normalWidth) * baClipping;
	}

	if (nextReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);
		bBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		bTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {
		//handle miter clipping
		aBotCoord -= normalWidth * startBotJoin;
		aBotCoord += normalize(startBotJoin * normalWidth) * abClipping;
	}

	vec2 aTopPosition = (aTopCoord) * adjustedScale + translate;
	vec2 aBotPosition = (aBotCoord) * adjustedScale + translate;

	vec2 bTopPosition = (bTopCoord) * adjustedScale + translate;
	vec2 bBotPosition = (bBotCoord) * adjustedScale + translate;

	//position is normalized 0..1 coord on the screen
	vec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;

	startCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;
	endCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;

	gl_Position = vec4(position  * 2.0 - 1.0, depth, 1);

	enableStartMiter = step(dot(currTangent, prevTangent), .5);
	enableEndMiter = step(dot(currTangent, nextTangent), .5);

	//bevel miter cutoffs
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}

	//round miter cutoffs
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}
}
`]),frag:T([`precision highp float;
#define GLSLIFY 1

uniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;
varying vec4 startCutoff, endCutoff;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

void main() {
	float alpha = 1., distToStart, distToEnd;
	float cutoff = thickness * .5;

	//bevel miter
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToStart + 1., 0.), 1.);
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToEnd + 1., 0.), 1.);
		}
	}

	// round miter
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < 0.) {
				float radius = length(gl_FragCoord.xy - startCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < 0.) {
				float radius = length(gl_FragCoord.xy - endCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}
	}

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`]),attributes:{lineEnd:{buffer:y,divisor:0,stride:8,offset:0},lineTop:{buffer:y,divisor:0,stride:8,offset:4},aColor:{buffer:f.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:f.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:f.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:f.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:f.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:f.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},l))}catch{u=x}var M=f({primitive:"triangle",elements:function(_,p){return p.triangles},offset:0,vert:T([`precision highp float;
#define GLSLIFY 1

attribute vec2 position, positionFract;

uniform vec4 color;
uniform vec2 scale, scaleFract, translate, translateFract;
uniform float pixelRatio, id;
uniform vec4 viewport;
uniform float opacity;

varying vec4 fragColor;

const float MAX_LINES = 256.;

void main() {
	float depth = (MAX_LINES - 4. - id) / (MAX_LINES);

	vec2 position = position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
	fragColor.a *= opacity;
}
`]),frag:T([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
	gl_FragColor = fragColor;
}
`]),uniforms:{scale:f.prop("scale"),color:f.prop("fill"),scaleFract:f.prop("scaleFract"),translateFract:f.prop("translateFract"),translate:f.prop("translate"),opacity:f.prop("opacity"),pixelRatio:f.context("pixelRatio"),id:f.prop("id"),viewport:function(_,p){return[p.viewport.x,p.viewport.y,_.viewportWidth,_.viewportHeight]}},attributes:{position:{buffer:f.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:f.prop("positionFractBuffer"),stride:8,offset:8}},blend:l.blend,depth:{enable:!1},scissor:l.scissor,stencil:l.stencil,viewport:l.viewport});return{fill:M,rect:x,miter:u}},d.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},d.prototype.render=function(){for(var f,y=[],l=arguments.length;l--;)y[l]=arguments[l];y.length&&(f=this).update.apply(f,y),this.draw()},d.prototype.draw=function(){for(var f=this,y=[],l=arguments.length;l--;)y[l]=arguments[l];return(y.length?y:this.passes).forEach(function(x,u){var M;if(x&&Array.isArray(x))return(M=f).draw.apply(M,x);typeof x=="number"&&(x=f.passes[x]),x&&x.count>1&&x.opacity&&(f.regl._refresh(),x.fill&&x.triangles&&x.triangles.length>2&&f.shaders.fill(x),x.thickness&&(x.scale[0]*x.viewport.width>d.precisionThreshold||x.scale[1]*x.viewport.height>d.precisionThreshold||x.join==="rect"||!x.join&&(x.thickness<=2||x.count>=d.maxPoints)?f.shaders.rect(x):f.shaders.miter(x)))}),this},d.prototype.update=function(f){var y=this;if(!!f){f.length!=null?typeof f[0]=="number"&&(f=[{positions:f}]):Array.isArray(f)||(f=[f]);var l=this,x=l.regl,u=l.gl;if(f.forEach(function(h,L){var S=y.passes[L];if(h!==void 0){if(h===null){y.passes[L]=null;return}if(typeof h[0]=="number"&&(h={positions:h}),h=e(h,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),S||(y.passes[L]=S={id:L,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:x.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:x.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:x.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:x.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},h=A({},d.defaults,h)),h.thickness!=null&&(S.thickness=parseFloat(h.thickness)),h.opacity!=null&&(S.opacity=parseFloat(h.opacity)),h.miterLimit!=null&&(S.miterLimit=parseFloat(h.miterLimit)),h.overlay!=null&&(S.overlay=!!h.overlay,L<d.maxLines&&(S.depth=2*(d.maxLines-1-L%d.maxLines)/d.maxLines-1)),h.join!=null&&(S.join=h.join),h.hole!=null&&(S.hole=h.hole),h.fill!=null&&(S.fill=h.fill?m(h.fill,"uint8"):null),h.viewport!=null&&(S.viewport=b(h.viewport)),S.viewport||(S.viewport=b([u.drawingBufferWidth,u.drawingBufferHeight])),h.close!=null&&(S.close=h.close),h.positions===null&&(h.positions=[]),h.positions){var E,P;if(h.positions.x&&h.positions.y){var F=h.positions.x,I=h.positions.y;P=S.count=Math.max(F.length,I.length),E=new Float64Array(P*2);for(var D=0;D<P;D++)E[D*2]=F[D],E[D*2+1]=I[D]}else E=a(h.positions,"float64"),P=S.count=Math.floor(E.length/2);var R=S.bounds=c(E,2);if(S.fill){for(var N=[],z={},G=0,Y=0,ee=0,Z=S.count;Y<Z;Y++){var X=E[Y*2],ne=E[Y*2+1];isNaN(X)||isNaN(ne)||X==null||ne==null?(X=E[G*2],ne=E[G*2+1],z[Y]=G):G=Y,N[ee++]=X,N[ee++]=ne}if(h.splitNull){S.count-1 in z||(z[S.count]=S.count-1);var ce=Object.keys(z).map(Number).sort(function(Xe,at){return Xe-at}),Q=[],K=0,U=S.hole!=null?S.hole[0]:null;if(U!=null){var H=g(ce,function(Xe){return Xe>=U});ce=ce.slice(0,H),ce.push(U)}for(var q=function(Xe){var at=N.slice(K*2,ce[Xe]*2).concat(U?N.slice(U*2):[]),Ge=(S.hole||[]).map(function(He){return He-U+(ce[Xe]-K)}),Se=i(at,Ge);Se=Se.map(function(He){return He+K+(He+K<ce[Xe]?0:U-ce[Xe])}),Q.push.apply(Q,Se),K=ce[Xe]+1},re=0;re<ce.length;re++)q(re);for(var j=0,$=Q.length;j<$;j++)z[Q[j]]!=null&&(Q[j]=z[Q[j]]);S.triangles=Q}else{for(var ie=i(N,S.hole||[]),oe=0,ae=ie.length;oe<ae;oe++)z[ie[oe]]!=null&&(ie[oe]=z[ie[oe]]);S.triangles=ie}}var se=new Float64Array(E);n(se,2,R);var _e=new Float64Array(P*2+6);S.close?E[0]===E[P*2-2]&&E[1]===E[P*2-1]?(_e[0]=se[P*2-4],_e[1]=se[P*2-3]):(_e[0]=se[P*2-2],_e[1]=se[P*2-1]):(_e[0]=se[0],_e[1]=se[1]),_e.set(se,2),S.close?E[0]===E[P*2-2]&&E[1]===E[P*2-1]?(_e[P*2+2]=se[2],_e[P*2+3]=se[3],S.count-=1):(_e[P*2+2]=se[0],_e[P*2+3]=se[1],_e[P*2+4]=se[2],_e[P*2+5]=se[3]):(_e[P*2+2]=se[P*2-2],_e[P*2+3]=se[P*2-1],_e[P*2+4]=se[P*2-2],_e[P*2+5]=se[P*2-1]);var ue=v(_e);S.positionBuffer(ue);var ye=s(_e,ue);S.positionFractBuffer(ye)}if(h.range?S.range=h.range:S.range||(S.range=S.bounds),(h.range||h.positions)&&S.count){var xe=S.bounds,me=xe[2]-xe[0],be=xe[3]-xe[1],ke=S.range[2]-S.range[0],De=S.range[3]-S.range[1];S.scale=[me/ke,be/De],S.translate=[-S.range[0]/ke+xe[0]/ke||0,-S.range[1]/De+xe[1]/De||0],S.scaleFract=s(S.scale),S.translateFract=s(S.translate)}if(h.dashes){var Ve=0,Ae;if(!h.dashes||h.dashes.length<2)Ve=1,Ae=new Uint8Array([255,255,255,255,255,255,255,255]);else{Ve=0;for(var Le=0;Le<h.dashes.length;++Le)Ve+=h.dashes[Le];Ae=new Uint8Array(Ve*d.dashMult);for(var je=0,Ye=255,ze=0;ze<2;ze++)for(var Ie=0;Ie<h.dashes.length;++Ie){for(var We=0,pt=h.dashes[Ie]*d.dashMult*.5;We<pt;++We)Ae[je++]=Ye;Ye^=255}}S.dashLength=Ve,S.dashTexture({channels:1,data:Ae,width:Ae.length,height:1,mag:"linear",min:"linear"},0,0)}if(h.color){var Ft=S.count,Qt=h.color;Qt||(Qt="transparent");var zt=new Uint8Array(Ft*4+4);if(!Array.isArray(Qt)||typeof Qt[0]=="number")for(var Et=m(Qt,"uint8"),Xt=0;Xt<Ft+1;Xt++)zt.set(Et,Xt*4);else{for(var Nt=0;Nt<Ft;Nt++){var Ct=m(Qt[Nt],"uint8");zt.set(Ct,Nt*4)}zt.set(m(Qt[0],"uint8"),Ft*4)}S.colorBuffer({usage:"dynamic",type:"uint8",data:zt})}}}),f.length<this.passes.length){for(var M=f.length;M<this.passes.length;M++){var _=this.passes[M];!_||(_.colorBuffer.destroy(),_.positionBuffer.destroy(),_.dashTexture.destroy())}this.passes.length=f.length}for(var p=[],w=0;w<this.passes.length;w++)this.passes[w]!==null&&p.push(this.passes[w]);return this.passes=p,this}},d.prototype.destroy=function(){return this.passes.forEach(function(f){f.colorBuffer.destroy(),f.positionBuffer.destroy(),f.dashTexture.destroy()}),this.passes.length=0,this}},{"array-bounds":71,"array-find-index":72,"array-normalize":73,"color-normalize":89,earcut:129,"es6-weak-map":183,"flatten-vertex-data":191,glslify:227,"object-assign":247,"parse-rect":249,"pick-by-alias":253,"to-float32":314}],282:[function(t,B,V){function m(S,E){return T(S)||a(S,E)||i(S,E)||v()}function c(S){return A(S)||e(S)||i(S)||r()}function A(S){if(Array.isArray(S))return n(S)}function T(S){if(Array.isArray(S))return S}function e(S){if(typeof Symbol<"u"&&S[Symbol.iterator]!=null||S["@@iterator"]!=null)return Array.from(S)}function a(S,E){var P=S==null?null:typeof Symbol<"u"&&S[Symbol.iterator]||S["@@iterator"];if(P!=null){var F=[],I=!0,D=!1,R,N;try{for(P=P.call(S);!(I=(R=P.next()).done)&&(F.push(R.value),!(E&&F.length===E));I=!0);}catch(z){D=!0,N=z}finally{try{!I&&P.return!=null&&P.return()}finally{if(D)throw N}}return F}}function i(S,E){if(!!S){if(typeof S=="string")return n(S,E);var P=Object.prototype.toString.call(S).slice(8,-1);if(P==="Object"&&S.constructor&&(P=S.constructor.name),P==="Map"||P==="Set")return Array.from(S);if(P==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(P))return n(S,E)}}function n(S,E){(E==null||E>S.length)&&(E=S.length);for(var P=0,F=new Array(E);P<E;P++)F[P]=S[P];return F}function r(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function v(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=t("color-normalize"),o=t("array-bounds"),b=t("color-id"),g=t("@plotly/point-cluster"),d=t("object-assign"),f=t("glslify"),y=t("pick-by-alias"),l=t("update-diff"),x=t("flatten-vertex-data"),u=t("is-iexplorer"),M=t("to-float32"),_=t("parse-rect"),p=w;function w(S,E){var P=this;if(!(this instanceof w))return new w(S,E);typeof S=="function"?(E||(E={}),E.regl=S):(E=S,S=null),E&&E.length&&(E.positions=E),S=E.regl;var F=S._gl,I,D=[],R={},N=[],z=[null],G=[null],Y=255,ee=100;this.tooManyColors=u,I=S.texture({data:new Uint8Array(Y*4),width:Y,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),d(this,{regl:S,gl:F,groups:N,markerCache:G,markerTextures:z,palette:D,paletteIds:R,paletteTexture:I,maxColors:Y,maxSize:ee,canvas:F.canvas}),this.update(E);var Z={uniforms:{constPointSize:!!E.constPointSize,opacity:S.prop("opacity"),paletteSize:function(Q,K){return[P.tooManyColors?0:Y,I.height]},pixelRatio:S.context("pixelRatio"),scale:S.prop("scale"),scaleFract:S.prop("scaleFract"),translate:S.prop("translate"),translateFract:S.prop("translateFract"),markerTexture:S.prop("markerTexture"),paletteTexture:I},attributes:{x:function(Q,K){return K.xAttr||{buffer:K.positionBuffer,stride:8,offset:0}},y:function(Q,K){return K.yAttr||{buffer:K.positionBuffer,stride:8,offset:4}},xFract:function(Q,K){return K.xAttr?{constant:[0,0]}:{buffer:K.positionFractBuffer,stride:8,offset:0}},yFract:function(Q,K){return K.yAttr?{constant:[0,0]}:{buffer:K.positionFractBuffer,stride:8,offset:4}},size:function(Q,K){return K.size.length?{buffer:K.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(K.size*255/P.maxSize)]}},borderSize:function(Q,K){return K.borderSize.length?{buffer:K.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(K.borderSize*255/P.maxSize)]}},colorId:function(Q,K){return K.color.length?{buffer:K.colorBuffer,stride:P.tooManyColors?8:4,offset:0}:{constant:P.tooManyColors?D.slice(K.color*4,K.color*4+4):[K.color]}},borderColorId:function(Q,K){return K.borderColor.length?{buffer:K.colorBuffer,stride:P.tooManyColors?8:4,offset:P.tooManyColors?4:2}:{constant:P.tooManyColors?D.slice(K.borderColor*4,K.borderColor*4+4):[K.borderColor]}},isActive:function(Q,K){return K.activation===!0?{constant:[1]}:K.activation?K.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:S.prop("viewport")},viewport:S.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:S.prop("elements"),count:S.prop("count"),offset:S.prop("offset"),primitive:"points"},X=d({},Z);X.frag=f([`precision highp float;
#define GLSLIFY 1

uniform float opacity;
uniform sampler2D markerTexture;

varying vec4 fragColor, fragBorderColor;
varying float fragWidth, fragBorderColorLevel, fragColorLevel;

float smoothStep(float x, float y) {
  return 1.0 / (1.0 + exp(50.0*(x - y)));
}

void main() {
  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;

  // max-distance alpha
  if (dist < 0.003) discard;

  // null-border case
  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {
    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);
    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);
  }
  else {
    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);
    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);

    vec4 color = fragBorderColor;
    color.a *= borderColorAmt;
    color = mix(color, fragColor, colorAmt);
    color.a *= opacity;

    gl_FragColor = color;
  }

}
`]),X.vert=f([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 scale, scaleFract, translate, translateFract, paletteSize;
uniform sampler2D paletteTexture;

const float maxSize = 100.;
const float borderLevel = .5;

varying vec4 fragColor, fragBorderColor;
varying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = 2. * size * pointSizeScale;
  fragPointSize = size * pixelRatio;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragColor = color;
  fragBorderColor = borderColor;
  fragWidth = 1. / gl_PointSize;

  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);
  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);
}`]),this.drawMarker=S(X);var ne=d({},Z);ne.frag=f([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

uniform float opacity;

float smoothStep(float edge0, float edge1, float x) {
	float t;
	t = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);
	return t * t * (3.0 - 2.0 * t);
}

void main() {
	float radius, alpha = 1.0, delta = fragWidth;

	radius = length(2.0 * gl_PointCoord.xy - 1.0);

	if (radius > 1.0 + delta) {
		discard;
	}

	alpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);

	float borderRadius = fragBorderRadius;
	float ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);
	vec4 color = mix(fragColor, fragBorderColor, ratio);
	color.a *= alpha * opacity;
	gl_FragColor = color;
}
`]),ne.vert=f([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 paletteSize, scale, scaleFract, translate, translateFract;
uniform sampler2D paletteTexture;

const float maxSize = 100.;

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = (size + borderSize) * pointSizeScale;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);
  fragColor = color;
  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;
  fragWidth = 1. / gl_PointSize;
}
`]),u&&(ne.frag=ne.frag.replace("smoothstep","smoothStep"),X.frag=X.frag.replace("smoothstep","smoothStep")),this.drawCircle=S(ne)}w.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},w.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},w.prototype.draw=function(){for(var S=this,E=arguments.length,P=new Array(E),F=0;F<E;F++)P[F]=arguments[F];var I=this.groups;if(P.length===1&&Array.isArray(P[0])&&(P[0][0]===null||Array.isArray(P[0][0]))&&(P=P[0]),this.regl._refresh(),P.length)for(var D=0;D<P.length;D++)this.drawItem(D,P[D]);else I.forEach(function(R,N){S.drawItem(N)});return this},w.prototype.drawItem=function(S,E){var P=this.groups,F=P[S];if(typeof E=="number"&&(S=E,F=P[E],E=null),!!(F&&F.count&&F.opacity)){F.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,F,E));for(var I=[],D=1;D<F.activation.length;D++)!F.activation[D]||F.activation[D]!==!0&&!F.activation[D].data.length||I.push.apply(I,c(this.getMarkerDrawOptions(D,F,E)));I.length&&this.drawMarker(I)}},w.prototype.getMarkerDrawOptions=function(S,E,P){var F=E.range,I=E.tree,D=E.viewport,R=E.activation,N=E.selectionBuffer,z=E.count;if(this.regl,!I)return P?[d({},E,{markerTexture:this.markerTextures[S],activation:R[S],count:P.length,elements:P,offset:0})]:[d({},E,{markerTexture:this.markerTextures[S],activation:R[S],offset:0})];var G=[],Y=I.range(F,{lod:!0,px:[(F[2]-F[0])/D.width,(F[3]-F[1])/D.height]});if(P){for(var ee=R[S],Z=ee.data,X=new Uint8Array(z),ne=0;ne<P.length;ne++){var ce=P[ne];X[ce]=Z?Z[ce]:1}N.subdata(X)}for(var Q=Y.length;Q--;){var K=m(Y[Q],2),U=K[0],H=K[1];G.push(d({},E,{markerTexture:this.markerTextures[S],activation:P?N:R[S],offset:U,count:H-U}))}return G},w.prototype.update=function(){for(var S=this,E=arguments.length,P=new Array(E),F=0;F<E;F++)P[F]=arguments[F];if(!!P.length){P.length===1&&Array.isArray(P[0])&&(P=P[0]);var I=this.groups,D=this.gl,R=this.regl,N=this.maxSize,z=this.maxColors,G=this.palette;this.groups=I=P.map(function(Y,ee){var Z=I[ee];if(Y===void 0)return Z;Y===null?Y={positions:null}:typeof Y=="function"?Y={ondraw:Y}:typeof Y[0]=="number"&&(Y={positions:Y}),Y=y(Y,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"}),Y.positions===null&&(Y.positions=[]),Y.tooManyColors!=null&&(S.tooManyColors=Y.tooManyColors),Z||(I[ee]=Z={id:ee,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:R.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:R.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:R.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:R.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:R.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},Y=d({},w.defaults,Y)),Y.positions&&!("marker"in Y)&&(Y.marker=Z.marker,delete Z.marker),Y.marker&&!("positions"in Y)&&(Y.positions=Z.positions,delete Z.positions);var X=0,ne=0;if(l(Z,Y,[{snap:!0,size:function(be,ke){return be==null&&(be=w.defaults.size),X+=be&&be.length?1:0,be},borderSize:function(be,ke){return be==null&&(be=w.defaults.borderSize),X+=be&&be.length?1:0,be},opacity:parseFloat,color:function(be,ke){return be==null&&(be=w.defaults.color),be=S.updateColor(be),ne++,be},borderColor:function(be,ke){return be==null&&(be=w.defaults.borderColor),be=S.updateColor(be),ne++,be},bounds:function(be,ke,De){return"range"in De||(De.range=null),be},positions:function(be,ke,De){var Ve=ke.snap,Ae=ke.positionBuffer,Le=ke.positionFractBuffer,je=ke.selectionBuffer;if(be.x||be.y)return be.x.length?ke.xAttr={buffer:R.buffer(be.x),offset:0,stride:4,count:be.x.length}:ke.xAttr={buffer:be.x.buffer,offset:be.x.offset*4||0,stride:(be.x.stride||1)*4,count:be.x.count},be.y.length?ke.yAttr={buffer:R.buffer(be.y),offset:0,stride:4,count:be.y.length}:ke.yAttr={buffer:be.y.buffer,offset:be.y.offset*4||0,stride:(be.y.stride||1)*4,count:be.y.count},ke.count=Math.max(ke.xAttr.count,ke.yAttr.count),be;be=x(be,"float64");var Ye=ke.count=Math.floor(be.length/2),ze=ke.bounds=Ye?o(be,2):null;if(!De.range&&!ke.range&&(delete ke.range,De.range=ze),!De.marker&&!ke.marker&&(delete ke.marker,De.marker=null),Ve&&(Ve===!0||Ye>Ve)?ke.tree=g(be,{bounds:ze}):Ve&&Ve.length&&(ke.tree=Ve),ke.tree){var Ie={primitive:"points",usage:"static",data:ke.tree,type:"uint32"};ke.elements?ke.elements(Ie):ke.elements=R.elements(Ie)}var We=M.float32(be);Ae({data:We,usage:"dynamic"});var pt=M.fract32(be,We);return Le({data:pt,usage:"dynamic"}),je({data:new Uint8Array(Ye),type:"uint8",usage:"stream"}),be}},{marker:function(be,ke,De){var Ve=ke.activation;if(Ve.forEach(function(pt){return pt&&pt.destroy&&pt.destroy()}),Ve.length=0,!be||typeof be[0]=="number"){var Ae=S.addMarker(be);Ve[Ae]=!0}else{for(var Le=[],je=0,Ye=Math.min(be.length,ke.count);je<Ye;je++){var ze=S.addMarker(be[je]);Le[ze]||(Le[ze]=new Uint8Array(ke.count)),Le[ze][je]=1}for(var Ie=0;Ie<Le.length;Ie++)if(!!Le[Ie]){var We={data:Le[Ie],type:"uint8",usage:"static"};Ve[Ie]?Ve[Ie](We):Ve[Ie]=R.buffer(We),Ve[Ie].data=Le[Ie]}}return be},range:function(be,ke,De){var Ve=ke.bounds;if(!!Ve)return be||(be=Ve),ke.scale=[1/(be[2]-be[0]),1/(be[3]-be[1])],ke.translate=[-be[0],-be[1]],ke.scaleFract=M.fract(ke.scale),ke.translateFract=M.fract(ke.translate),be},viewport:function(be){var ke=_(be||[D.drawingBufferWidth,D.drawingBufferHeight]);return ke}}]),X){var ce=Z,Q=ce.count,K=ce.size,U=ce.borderSize,H=ce.sizeBuffer,q=new Uint8Array(Q*2);if(K.length||U.length)for(var re=0;re<Q;re++)q[re*2]=Math.round((K[re]==null?K:K[re])*255/N),q[re*2+1]=Math.round((U[re]==null?U:U[re])*255/N);H({data:q,usage:"dynamic"})}if(ne){var j=Z,$=j.count,ie=j.color,oe=j.borderColor,ae=j.colorBuffer,se;if(S.tooManyColors){if(ie.length||oe.length){se=new Uint8Array($*8);for(var _e=0;_e<$;_e++){var ue=ie[_e];se[_e*8]=G[ue*4],se[_e*8+1]=G[ue*4+1],se[_e*8+2]=G[ue*4+2],se[_e*8+3]=G[ue*4+3];var ye=oe[_e];se[_e*8+4]=G[ye*4],se[_e*8+5]=G[ye*4+1],se[_e*8+6]=G[ye*4+2],se[_e*8+7]=G[ye*4+3]}}}else if(ie.length||oe.length){se=new Uint8Array($*4+2);for(var xe=0;xe<$;xe++)ie[xe]!=null&&(se[xe*4]=ie[xe]%z,se[xe*4+1]=Math.floor(ie[xe]/z)),oe[xe]!=null&&(se[xe*4+2]=oe[xe]%z,se[xe*4+3]=Math.floor(oe[xe]/z))}ae({data:se||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return Z})}},w.prototype.addMarker=function(S){var E=this.markerTextures,P=this.regl,F=this.markerCache,I=S==null?0:F.indexOf(S);if(I>=0)return I;var D;if(S instanceof Uint8Array||S instanceof Uint8ClampedArray)D=S;else{D=new Uint8Array(S.length);for(var R=0,N=S.length;R<N;R++)D[R]=S[R]*255}var z=Math.floor(Math.sqrt(D.length));return I=E.length,F.push(S),E.push(P.texture({channels:1,data:D,radius:z,mag:"linear",min:"linear"})),I},w.prototype.updateColor=function(S){var E=this.paletteIds,P=this.palette,F=this.maxColors;Array.isArray(S)||(S=[S]);var I=[];if(typeof S[0]=="number"){var D=[];if(Array.isArray(S))for(var R=0;R<S.length;R+=4)D.push(S.slice(R,R+4));else for(var N=0;N<S.length;N+=4)D.push(S.subarray(N,N+4));S=D}for(var z=0;z<S.length;z++){var G=S[z];G=s(G,"uint8");var Y=b(G,!1);if(E[Y]==null){var ee=P.length;E[Y]=Math.floor(ee/4),P[ee]=G[0],P[ee+1]=G[1],P[ee+2]=G[2],P[ee+3]=G[3]}I[z]=E[Y]}return!this.tooManyColors&&P.length>F*4&&(this.tooManyColors=!0),this.updatePalette(P),I.length===1?I[0]:I},w.prototype.updatePalette=function(S){if(!this.tooManyColors){var E=this.maxColors,P=this.paletteTexture,F=Math.ceil(S.length*.25/E);if(F>1){S=S.slice();for(var I=S.length*.25%E;I<F*E;I++)S.push(0,0,0,0)}P.height<F&&P.resize(E,F),P.subimage({width:Math.min(S.length*.25,E),height:F,data:S},0,0)}},w.prototype.destroy=function(){return this.groups.forEach(function(S){S.sizeBuffer.destroy(),S.positionBuffer.destroy(),S.positionFractBuffer.destroy(),S.colorBuffer.destroy(),S.activation.forEach(function(E){return E&&E.destroy&&E.destroy()}),S.selectionBuffer.destroy(),S.elements&&S.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(S){return S&&S.destroy&&S.destroy()}),this};var h=t("object-assign"),L=function(E,P){var F=new p(E,P),I=F.render.bind(F);return h(I,{render:I,update:F.update.bind(F),draw:F.draw.bind(F),destroy:F.destroy.bind(F),regl:F.regl,gl:F.gl,canvas:F.gl.canvas,groups:F.groups,markers:F.markerCache,palette:F.palette}),I};B.exports=L},{"@plotly/point-cluster":59,"array-bounds":71,"color-id":87,"color-normalize":89,"flatten-vertex-data":191,glslify:227,"is-iexplorer":233,"object-assign":247,"parse-rect":249,"pick-by-alias":253,"to-float32":314,"update-diff":330}],283:[function(t,B,V){var m=t("regl-scatter2d"),c=t("pick-by-alias"),A=t("array-bounds"),T=t("raf"),e=t("array-range"),a=t("parse-rect"),i=t("flatten-vertex-data");B.exports=n;function n(o,b){if(!(this instanceof n))return new n(o);this.traces=[],this.passes={},this.regl=o,this.scatter=m(o),this.canvas=this.scatter.canvas}n.prototype.render=function(){for(var o=this,b,g=[],d=arguments.length;d--;)g[d]=arguments[d];return g.length&&(b=this).update.apply(b,g),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?this.planned==null&&(this.planned=T(function(){o.draw(),o.dirty=!0,o.planned=null})):(this.draw(),this.dirty=!0,T(function(){o.dirty=!1})),this)},n.prototype.update=function(){for(var o,b=[],g=arguments.length;g--;)b[g]=arguments[g];if(!!b.length){for(var d=0;d<b.length;d++)this.updateItem(d,b[d]);this.traces=this.traces.filter(Boolean);for(var f=[],y=0,l=0;l<this.traces.length;l++){for(var x=this.traces[l],u=this.traces[l].passes,M=0;M<u.length;M++)f.push(this.passes[u[M]]);x.passOffset=y,y+=x.passes.length}return(o=this.scatter).update.apply(o,f),this}},n.prototype.updateItem=function(o,b){var g=this,d=g.regl;if(b===null)return this.traces[o]=null,this;if(!b)return this;var f=c(b,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),y=this.traces[o]||(this.traces[o]={id:o,buffer:d.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:a([d._gl.drawingBufferWidth,d._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(f.color!=null&&(y.color=f.color),f.size!=null&&(y.size=f.size),f.marker!=null&&(y.marker=f.marker),f.borderColor!=null&&(y.borderColor=f.borderColor),f.borderSize!=null&&(y.borderSize=f.borderSize),f.opacity!=null&&(y.opacity=f.opacity),f.viewport&&(y.viewport=a(f.viewport)),f.diagonal!=null&&(y.diagonal=f.diagonal),f.upper!=null&&(y.upper=f.upper),f.lower!=null&&(y.lower=f.lower),f.data){y.buffer(i(f.data)),y.columns=f.data.length,y.count=f.data[0].length,y.bounds=[];for(var l=0;l<y.columns;l++)y.bounds[l]=A(f.data[l],1)}var x;f.range&&(y.range=f.range,x=y.range&&typeof y.range[0]!="number"),f.domain&&(y.domain=f.domain);var u=!1;f.padding!=null&&(Array.isArray(f.padding)&&f.padding.length===y.columns&&typeof f.padding[f.padding.length-1]=="number"?(y.padding=f.padding.map(s),u=!0):y.padding=s(f.padding));var M=y.columns,_=y.count,p=y.viewport.width,w=y.viewport.height,h=y.viewport.x,L=y.viewport.y,S=p/M,E=w/M;y.passes=[];for(var P=0;P<M;P++)for(var F=0;F<M;F++)if(!(!y.diagonal&&F===P)&&!(!y.upper&&P>F)&&!(!y.lower&&P<F)){var I=r(y.id,P,F),D=this.passes[I]||(this.passes[I]={});if(f.data&&(f.transpose?D.positions={x:{buffer:y.buffer,offset:F,count:_,stride:M},y:{buffer:y.buffer,offset:P,count:_,stride:M}}:D.positions={x:{buffer:y.buffer,offset:F*_,count:_},y:{buffer:y.buffer,offset:P*_,count:_}},D.bounds=v(y.bounds,P,F)),f.domain||f.viewport||f.data){var R=u?v(y.padding,P,F):y.padding;if(y.domain){var N=v(y.domain,P,F),z=N[0],G=N[1],Y=N[2],ee=N[3];D.viewport=[h+z*p+R[0],L+G*w+R[1],h+Y*p-R[2],L+ee*w-R[3]]}else D.viewport=[h+F*S+S*R[0],L+P*E+E*R[1],h+(F+1)*S-S*R[2],L+(P+1)*E-E*R[3]]}f.color&&(D.color=y.color),f.size&&(D.size=y.size),f.marker&&(D.marker=y.marker),f.borderSize&&(D.borderSize=y.borderSize),f.borderColor&&(D.borderColor=y.borderColor),f.opacity&&(D.opacity=y.opacity),f.range&&(D.range=x?v(y.range,P,F):y.range||D.bounds),y.passes.push(I)}return this},n.prototype.draw=function(){for(var o,b=[],g=arguments.length;g--;)b[g]=arguments[g];if(!b.length)this.scatter.draw();else{for(var d=[],f=0;f<b.length;f++)if(typeof b[f]=="number"){var y=this.traces[b[f]],l=y.passes,x=y.passOffset;d.push.apply(d,e(x,x+l.length))}else if(b[f].length){var u=b[f],M=this.traces[f],_=M.passes,p=M.passOffset;_=_.map(function(w,h){d[p+h]=u})}(o=this.scatter).draw.apply(o,d)}return this},n.prototype.destroy=function(){return this.traces.forEach(function(o){o.buffer&&o.buffer.destroy&&o.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this};function r(o,b,g){var d=o.id!=null?o.id:o,f=b,y=g,l=d<<16|(f&255)<<8|y&255;return l}function v(o,b,g){var d,f,y,l,x=o[b],u=o[g];return x.length>2?(x[0],x[2],d=x[1],f=x[3]):x.length?(d=x[0],f=x[1]):(x.x,d=x.y,x.x+x.width,f=x.y+x.height),u.length>2?(y=u[0],l=u[2],u[1],u[3]):u.length?(y=u[0],l=u[1]):(y=u.x,u.y,l=u.x+u.width,u.y+u.height),[y,d,l,f]}function s(o){if(typeof o=="number")return[o,o,o,o];if(o.length===2)return[o[0],o[1],o[0],o[1]];var b=a(o);return[b.x,b.y,b.x+b.width,b.y+b.height]}},{"array-bounds":71,"array-range":74,"flatten-vertex-data":191,"parse-rect":249,"pick-by-alias":253,raf:279,"regl-scatter2d":282}],284:[function(t,B,V){(function(m,c){typeof V=="object"&&typeof B<"u"?B.exports=c():m.createREGL=c()})(this,function(){function m(ot,er){this.id=_e++,this.type=ot,this.data=er}function c(ot){if(ot.length===0)return[];var er=ot.charAt(0),Kt=ot.charAt(ot.length-1);if(1<ot.length&&er===Kt&&(er==='"'||er==="'"))return['"'+ot.substr(1,ot.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(er=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(ot))return c(ot.substr(0,er.index)).concat(c(er[1])).concat(c(ot.substr(er.index+er[0].length)));if(er=ot.split("."),er.length===1)return['"'+ot.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(ot=[],Kt=0;Kt<er.length;++Kt)ot=ot.concat(c(er[Kt]));return ot}function A(ot){return"["+c(ot).join("][")+"]"}function T(ot,er){if(typeof ot=="function")return new m(0,ot);if(typeof ot=="number"||typeof ot=="boolean")return new m(5,ot);if(Array.isArray(ot))return new m(6,ot.map(function(Kt,fr){return T(Kt)}));if(ot instanceof m)return ot}function e(){var ot={"":0},er=[""];return{id:function(Kt){var fr=ot[Kt];return fr||(fr=ot[Kt]=er.length,er.push(Kt),fr)},str:function(Kt){return er[Kt]}}}function a(ot,er,Kt){function fr(){var $e=window.innerWidth,st=window.innerHeight;ot!==document.body&&(st=Ar.getBoundingClientRect(),$e=st.right-st.left,st=st.bottom-st.top),Ar.width=Kt*$e,Ar.height=Kt*st}var Ar=document.createElement("canvas");se(Ar.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),ot.appendChild(Ar),ot===document.body&&(Ar.style.position="absolute",se(ot.style,{margin:0,padding:0}));var et;return ot!==document.body&&typeof ResizeObserver=="function"?(et=new ResizeObserver(function(){setTimeout(fr)}),et.observe(ot)):window.addEventListener("resize",fr,!1),fr(),{canvas:Ar,onDestroy:function(){et?et.disconnect():window.removeEventListener("resize",fr),ot.removeChild(Ar)}}}function i(ot,er){function Kt(fr){try{return ot.getContext(fr,er)}catch{return null}}return Kt("webgl")||Kt("experimental-webgl")||Kt("webgl-experimental")}function n(ot){return typeof ot=="string"?ot.split():ot}function r(ot){return typeof ot=="string"?document.querySelector(ot):ot}function v(ot){var er=ot||{},Kt,fr,Ar,et;ot={};var $e=[],st=[],ct=typeof window>"u"?1:window.devicePixelRatio,Mt=!1,Ut={},Pe=function(it){},Ee=function(){};if(typeof er=="string"?Kt=document.querySelector(er):typeof er=="object"&&(typeof er.nodeName=="string"&&typeof er.appendChild=="function"&&typeof er.getBoundingClientRect=="function"?Kt=er:typeof er.drawArrays=="function"||typeof er.drawElements=="function"?(et=er,Ar=et.canvas):("gl"in er?et=er.gl:"canvas"in er?Ar=r(er.canvas):"container"in er&&(fr=r(er.container)),"attributes"in er&&(ot=er.attributes),"extensions"in er&&($e=n(er.extensions)),"optionalExtensions"in er&&(st=n(er.optionalExtensions)),"onDone"in er&&(Pe=er.onDone),"profile"in er&&(Mt=!!er.profile),"pixelRatio"in er&&(ct=+er.pixelRatio),"cachedCode"in er&&(Ut=er.cachedCode))),Kt&&(Kt.nodeName.toLowerCase()==="canvas"?Ar=Kt:fr=Kt),!et){if(!Ar){if(Kt=a(fr||document.body,Pe,ct),!Kt)return null;Ar=Kt.canvas,Ee=Kt.onDestroy}ot.premultipliedAlpha===void 0&&(ot.premultipliedAlpha=!0),et=i(Ar,ot)}return et?{gl:et,canvas:Ar,container:fr,extensions:$e,optionalExtensions:st,pixelRatio:ct,profile:Mt,cachedCode:Ut,onDone:Pe,onDestroy:Ee}:(Ee(),Pe("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function s(ot,er){function Kt($e){$e=$e.toLowerCase();var st;try{st=fr[$e]=ot.getExtension($e)}catch{}return!!st}for(var fr={},Ar=0;Ar<er.extensions.length;++Ar){var et=er.extensions[Ar];if(!Kt(et))return er.onDestroy(),er.onDone('"'+et+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return er.optionalExtensions.forEach(Kt),{extensions:fr,restore:function(){Object.keys(fr).forEach(function($e){if(fr[$e]&&!Kt($e))throw Error("(regl): error restoring extension "+$e)})}}}function o(ot,er){for(var Kt=Array(ot),fr=0;fr<ot;++fr)Kt[fr]=er(fr);return Kt}function b(ot){var er,Kt;return er=(65535<ot)<<4,ot>>>=er,Kt=(255<ot)<<3,ot>>>=Kt,er|=Kt,Kt=(15<ot)<<2,ot>>>=Kt,er|=Kt,Kt=(3<ot)<<1,er|Kt|ot>>>Kt>>1}function g(){function ot(fr){e:{for(var Ar=16;268435456>=Ar;Ar*=16)if(fr<=Ar){fr=Ar;break e}fr=0}return Ar=Kt[b(fr)>>2],0<Ar.length?Ar.pop():new ArrayBuffer(fr)}function er(fr){Kt[b(fr.byteLength)>>2].push(fr)}var Kt=o(8,function(){return[]});return{alloc:ot,free:er,allocType:function(fr,Ar){var et=null;switch(fr){case 5120:et=new Int8Array(ot(Ar),0,Ar);break;case 5121:et=new Uint8Array(ot(Ar),0,Ar);break;case 5122:et=new Int16Array(ot(2*Ar),0,Ar);break;case 5123:et=new Uint16Array(ot(2*Ar),0,Ar);break;case 5124:et=new Int32Array(ot(4*Ar),0,Ar);break;case 5125:et=new Uint32Array(ot(4*Ar),0,Ar);break;case 5126:et=new Float32Array(ot(4*Ar),0,Ar);break;default:return null}return et.length!==Ar?et.subarray(0,Ar):et},freeType:function(fr){er(fr.buffer)}}}function d(ot){return!!ot&&typeof ot=="object"&&Array.isArray(ot.shape)&&Array.isArray(ot.stride)&&typeof ot.offset=="number"&&ot.shape.length===ot.stride.length&&(Array.isArray(ot.data)||ke(ot.data))}function f(ot,er,Kt,fr,Ar,et){for(var $e=0;$e<er;++$e)for(var st=ot[$e],ct=0;ct<Kt;++ct)for(var Mt=st[ct],Ut=0;Ut<fr;++Ut)Ar[et++]=Mt[Ut]}function y(ot,er,Kt,fr,Ar){for(var et=1,$e=Kt+1;$e<er.length;++$e)et*=er[$e];var st=er[Kt];if(er.length-Kt===4){var ct=er[Kt+1],Mt=er[Kt+2];for(er=er[Kt+3],$e=0;$e<st;++$e)f(ot[$e],ct,Mt,er,fr,Ar),Ar+=et}else for($e=0;$e<st;++$e)y(ot[$e],er,Kt+1,fr,Ar),Ar+=et}function l(ot){return Ae[Object.prototype.toString.call(ot)]|0}function x(ot,er){for(var Kt=0;Kt<er.length;++Kt)ot[Kt]=er[Kt]}function u(ot,er,Kt,fr,Ar,et,$e){for(var st=0,ct=0;ct<Kt;++ct)for(var Mt=0;Mt<fr;++Mt)ot[st++]=er[Ar*ct+et*Mt+$e]}function M(ot,er,Kt,fr){function Ar(Pe){this.id=ct++,this.buffer=ot.createBuffer(),this.type=Pe,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,Kt.profile&&(this.stats={size:0})}function et(Pe,Ee,it){Pe.byteLength=Ee.byteLength,ot.bufferData(Pe.type,Ee,it)}function $e(Pe,Ee,it,ut,vt,St){if(Pe.usage=it,Array.isArray(Ee)){if(Pe.dtype=ut||5126,0<Ee.length)if(Array.isArray(Ee[0])){vt=ze(Ee);for(var yt=ut=1;yt<vt.length;++yt)ut*=vt[yt];Pe.dimension=ut,Ee=Ye(Ee,vt,Pe.dtype),et(Pe,Ee,it),St?Pe.persistentData=Ee:me.freeType(Ee)}else typeof Ee[0]=="number"?(Pe.dimension=vt,vt=me.allocType(Pe.dtype,Ee.length),x(vt,Ee),et(Pe,vt,it),St?Pe.persistentData=vt:me.freeType(vt)):ke(Ee[0])&&(Pe.dimension=Ee[0].length,Pe.dtype=ut||l(Ee[0])||5126,Ee=Ye(Ee,[Ee.length,Ee[0].length],Pe.dtype),et(Pe,Ee,it),St?Pe.persistentData=Ee:me.freeType(Ee))}else if(ke(Ee))Pe.dtype=ut||l(Ee),Pe.dimension=vt,et(Pe,Ee,it),St&&(Pe.persistentData=new Uint8Array(new Uint8Array(Ee.buffer)));else if(d(Ee)){vt=Ee.shape;var Pt=Ee.stride,yt=Ee.offset,Wt=0,ar=0,kr=0,wr=0;vt.length===1?(Wt=vt[0],ar=1,kr=Pt[0],wr=0):vt.length===2&&(Wt=vt[0],ar=vt[1],kr=Pt[0],wr=Pt[1]),Pe.dtype=ut||l(Ee.data)||5126,Pe.dimension=ar,vt=me.allocType(Pe.dtype,Wt*ar),u(vt,Ee.data,Wt,ar,kr,wr,yt),et(Pe,vt,it),St?Pe.persistentData=vt:me.freeType(vt)}else Ee instanceof ArrayBuffer&&(Pe.dtype=5121,Pe.dimension=vt,et(Pe,Ee,it),St&&(Pe.persistentData=new Uint8Array(new Uint8Array(Ee))))}function st(Pe){er.bufferCount--,fr(Pe),ot.deleteBuffer(Pe.buffer),Pe.buffer=null,delete Mt[Pe.id]}var ct=0,Mt={};Ar.prototype.bind=function(){ot.bindBuffer(this.type,this.buffer)},Ar.prototype.destroy=function(){st(this)};var Ut=[];return Kt.profile&&(er.getTotalBufferSize=function(){var Pe=0;return Object.keys(Mt).forEach(function(Ee){Pe+=Mt[Ee].stats.size}),Pe}),{create:function(Pe,Ee,it,ut){function vt(yt){var Pt=35044,Wt=null,ar=0,kr=0,wr=1;return Array.isArray(yt)||ke(yt)||d(yt)||yt instanceof ArrayBuffer?Wt=yt:typeof yt=="number"?ar=yt|0:yt&&("data"in yt&&(Wt=yt.data),"usage"in yt&&(Pt=je[yt.usage]),"type"in yt&&(kr=Le[yt.type]),"dimension"in yt&&(wr=yt.dimension|0),"length"in yt&&(ar=yt.length|0)),St.bind(),Wt?$e(St,Wt,Pt,kr,wr,ut):(ar&&ot.bufferData(St.type,ar,Pt),St.dtype=kr||5121,St.usage=Pt,St.dimension=wr,St.byteLength=ar),Kt.profile&&(St.stats.size=St.byteLength*Ie[St.dtype]),vt}er.bufferCount++;var St=new Ar(Ee);return Mt[St.id]=St,it||vt(Pe),vt._reglType="buffer",vt._buffer=St,vt.subdata=function(yt,Pt){var Wt=(Pt||0)|0,ar;if(St.bind(),ke(yt)||yt instanceof ArrayBuffer)ot.bufferSubData(St.type,Wt,yt);else if(Array.isArray(yt)){if(0<yt.length)if(typeof yt[0]=="number"){var kr=me.allocType(St.dtype,yt.length);x(kr,yt),ot.bufferSubData(St.type,Wt,kr),me.freeType(kr)}else(Array.isArray(yt[0])||ke(yt[0]))&&(ar=ze(yt),kr=Ye(yt,ar,St.dtype),ot.bufferSubData(St.type,Wt,kr),me.freeType(kr))}else if(d(yt)){ar=yt.shape;var wr=yt.stride,Sr=kr=0,Zr=0,ir=0;ar.length===1?(kr=ar[0],Sr=1,Zr=wr[0],ir=0):ar.length===2&&(kr=ar[0],Sr=ar[1],Zr=wr[0],ir=wr[1]),ar=Array.isArray(yt.data)?St.dtype:l(yt.data),ar=me.allocType(ar,kr*Sr),u(ar,yt.data,kr,Sr,Zr,ir,yt.offset),ot.bufferSubData(St.type,Wt,ar),me.freeType(ar)}return vt},Kt.profile&&(vt.stats=St.stats),vt.destroy=function(){st(St)},vt},createStream:function(Pe,Ee){var it=Ut.pop();return it||(it=new Ar(Pe)),it.bind(),$e(it,Ee,35040,0,1,!1),it},destroyStream:function(Pe){Ut.push(Pe)},clear:function(){De(Mt).forEach(st),Ut.forEach(st)},getBuffer:function(Pe){return Pe&&Pe._buffer instanceof Ar?Pe._buffer:null},restore:function(){De(Mt).forEach(function(Pe){Pe.buffer=ot.createBuffer(),ot.bindBuffer(Pe.type,Pe.buffer),ot.bufferData(Pe.type,Pe.persistentData||Pe.byteLength,Pe.usage)})},_initBuffer:$e}}function _(ot,er,Kt,fr){function Ar(Pe){this.id=ct++,st[this.id]=this,this.buffer=Pe,this.primType=4,this.type=this.vertCount=0}function et(Pe,Ee,it,ut,vt,St,yt){Pe.buffer.bind();var Pt;if(Ee?((Pt=yt)||ke(Ee)&&(!d(Ee)||ke(Ee.data))||(Pt=er.oes_element_index_uint?5125:5123),Kt._initBuffer(Pe.buffer,Ee,it,Pt,3)):(ot.bufferData(34963,St,it),Pe.buffer.dtype=Pt||5121,Pe.buffer.usage=it,Pe.buffer.dimension=3,Pe.buffer.byteLength=St),Pt=yt,!yt){switch(Pe.buffer.dtype){case 5121:case 5120:Pt=5121;break;case 5123:case 5122:Pt=5123;break;case 5125:case 5124:Pt=5125}Pe.buffer.dtype=Pt}Pe.type=Pt,Ee=vt,0>Ee&&(Ee=Pe.buffer.byteLength,Pt===5123?Ee>>=1:Pt===5125&&(Ee>>=2)),Pe.vertCount=Ee,Ee=ut,0>ut&&(Ee=4,ut=Pe.buffer.dimension,ut===1&&(Ee=0),ut===2&&(Ee=1),ut===3&&(Ee=4)),Pe.primType=Ee}function $e(Pe){fr.elementsCount--,delete st[Pe.id],Pe.buffer.destroy(),Pe.buffer=null}var st={},ct=0,Mt={uint8:5121,uint16:5123};er.oes_element_index_uint&&(Mt.uint32=5125),Ar.prototype.bind=function(){this.buffer.bind()};var Ut=[];return{create:function(Pe,Ee){function it(St){if(St)if(typeof St=="number")ut(St),vt.primType=4,vt.vertCount=St|0,vt.type=5121;else{var yt=null,Pt=35044,Wt=-1,ar=-1,kr=0,wr=0;Array.isArray(St)||ke(St)||d(St)?yt=St:("data"in St&&(yt=St.data),"usage"in St&&(Pt=je[St.usage]),"primitive"in St&&(Wt=We[St.primitive]),"count"in St&&(ar=St.count|0),"type"in St&&(wr=Mt[St.type]),"length"in St?kr=St.length|0:(kr=ar,wr===5123||wr===5122?kr*=2:(wr===5125||wr===5124)&&(kr*=4))),et(vt,yt,Pt,Wt,ar,kr,wr)}else ut(),vt.primType=4,vt.vertCount=0,vt.type=5121;return it}var ut=Kt.create(null,34963,!0),vt=new Ar(ut._buffer);return fr.elementsCount++,it(Pe),it._reglType="elements",it._elements=vt,it.subdata=function(St,yt){return ut.subdata(St,yt),it},it.destroy=function(){$e(vt)},it},createStream:function(Pe){var Ee=Ut.pop();return Ee||(Ee=new Ar(Kt.create(null,34963,!0,!1)._buffer)),et(Ee,Pe,35040,-1,-1,0,0),Ee},destroyStream:function(Pe){Ut.push(Pe)},getElements:function(Pe){return typeof Pe=="function"&&Pe._elements instanceof Ar?Pe._elements:null},clear:function(){De(st).forEach($e)}}}function p(ot){for(var er=me.allocType(5123,ot.length),Kt=0;Kt<ot.length;++Kt)if(isNaN(ot[Kt]))er[Kt]=65535;else if(ot[Kt]===1/0)er[Kt]=31744;else if(ot[Kt]===-1/0)er[Kt]=64512;else{pt[0]=ot[Kt];var et=Ft[0],fr=et>>>31<<15,Ar=(et<<1>>>24)-127,et=et>>13&1023;er[Kt]=-24>Ar?fr:-14>Ar?fr+(et+1024>>-14-Ar):15<Ar?fr+31744:fr+(Ar+15<<10)+et}return er}function w(ot){return Array.isArray(ot)||ke(ot)}function h(ot){return"[object "+ot+"]"}function L(ot){return Array.isArray(ot)&&(ot.length===0||typeof ot[0]=="number")}function S(ot){return!!(Array.isArray(ot)&&ot.length!==0&&w(ot[0]))}function E(ot){return Object.prototype.toString.call(ot)}function P(ot){if(!ot)return!1;var er=E(ot);return 0<=Se.indexOf(er)?!0:L(ot)||S(ot)||d(ot)}function F(ot,er){ot.type===36193?(ot.data=p(er),me.freeType(er)):ot.data=er}function I(ot,er,Kt,fr,Ar,et){if(ot=typeof Ke[ot]<"u"?Ke[ot]:Et[ot]*He[er],et&&(ot*=6),Ar){for(fr=0;1<=Kt;)fr+=ot*Kt*Kt,Kt/=2;return fr}return ot*Kt*fr}function D(ot,er,Kt,fr,Ar,et,$e){function st(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function ct(Mr,gn){Mr.internalformat=gn.internalformat,Mr.format=gn.format,Mr.type=gn.type,Mr.compressed=gn.compressed,Mr.premultiplyAlpha=gn.premultiplyAlpha,Mr.flipY=gn.flipY,Mr.unpackAlignment=gn.unpackAlignment,Mr.colorSpace=gn.colorSpace,Mr.width=gn.width,Mr.height=gn.height,Mr.channels=gn.channels}function Mt(Mr,gn){if(typeof gn=="object"&&gn){"premultiplyAlpha"in gn&&(Mr.premultiplyAlpha=gn.premultiplyAlpha),"flipY"in gn&&(Mr.flipY=gn.flipY),"alignment"in gn&&(Mr.unpackAlignment=gn.alignment),"colorSpace"in gn&&(Mr.colorSpace=sr[gn.colorSpace]),"type"in gn&&(Mr.type=zr[gn.type]);var hn=Mr.width,Sn=Mr.height,Jn=Mr.channels,ha=!1;"shape"in gn?(hn=gn.shape[0],Sn=gn.shape[1],gn.shape.length===3&&(Jn=gn.shape[2],ha=!0)):("radius"in gn&&(hn=Sn=gn.radius),"width"in gn&&(hn=gn.width),"height"in gn&&(Sn=gn.height),"channels"in gn&&(Jn=gn.channels,ha=!0)),Mr.width=hn|0,Mr.height=Sn|0,Mr.channels=Jn|0,hn=!1,"format"in gn&&(hn=gn.format,Sn=Mr.internalformat=Ur[hn],Mr.format=Wn[Sn],hn in zr&&!("type"in gn)&&(Mr.type=zr[hn]),hn in Lr&&(Mr.compressed=!0),hn=!0),!ha&&hn?Mr.channels=Et[Mr.format]:ha&&!hn&&Mr.channels!==zt[Mr.format]&&(Mr.format=Mr.internalformat=zt[Mr.channels])}}function Ut(Mr){ot.pixelStorei(37440,Mr.flipY),ot.pixelStorei(37441,Mr.premultiplyAlpha),ot.pixelStorei(37443,Mr.colorSpace),ot.pixelStorei(3317,Mr.unpackAlignment)}function Pe(){st.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Ee(Mr,gn){var hn=null;if(P(gn)?hn=gn:gn&&(Mt(Mr,gn),"x"in gn&&(Mr.xOffset=gn.x|0),"y"in gn&&(Mr.yOffset=gn.y|0),P(gn.data)&&(hn=gn.data)),gn.copy){var Sn=Ar.viewportWidth,Jn=Ar.viewportHeight;Mr.width=Mr.width||Sn-Mr.xOffset,Mr.height=Mr.height||Jn-Mr.yOffset,Mr.needsCopy=!0}else if(!hn)Mr.width=Mr.width||1,Mr.height=Mr.height||1,Mr.channels=Mr.channels||4;else if(ke(hn))Mr.channels=Mr.channels||4,Mr.data=hn,"type"in gn||Mr.type!==5121||(Mr.type=Ae[Object.prototype.toString.call(hn)]|0);else if(L(hn)){switch(Mr.channels=Mr.channels||4,Sn=hn,Jn=Sn.length,Mr.type){case 5121:case 5123:case 5125:case 5126:Jn=me.allocType(Mr.type,Jn),Jn.set(Sn),Mr.data=Jn;break;case 36193:Mr.data=p(Sn)}Mr.alignment=1,Mr.needsFree=!0}else if(d(hn)){Sn=hn.data,Array.isArray(Sn)||Mr.type!==5121||(Mr.type=Ae[Object.prototype.toString.call(Sn)]|0);var Jn=hn.shape,ha=hn.stride,na,Fn,Kn,Ya;Jn.length===3?(Kn=Jn[2],Ya=ha[2]):Ya=Kn=1,na=Jn[0],Fn=Jn[1],Jn=ha[0],ha=ha[1],Mr.alignment=1,Mr.width=na,Mr.height=Fn,Mr.channels=Kn,Mr.format=Mr.internalformat=zt[Kn],Mr.needsFree=!0,na=Ya,hn=hn.offset,Kn=Mr.width,Ya=Mr.height,Fn=Mr.channels;for(var hi=me.allocType(Mr.type===36193?5126:Mr.type,Kn*Ya*Fn),Gt=0,pr=0;pr<Ya;++pr)for(var an=0;an<Kn;++an)for(var dn=0;dn<Fn;++dn)hi[Gt++]=Sn[Jn*an+ha*pr+na*dn+hn];F(Mr,hi)}else if(E(hn)===Xt||E(hn)===Nt||E(hn)===Ct)E(hn)===Xt||E(hn)===Nt?Mr.element=hn:Mr.element=hn.canvas,Mr.width=Mr.element.width,Mr.height=Mr.element.height,Mr.channels=4;else if(E(hn)===Xe)Mr.element=hn,Mr.width=hn.width,Mr.height=hn.height,Mr.channels=4;else if(E(hn)===at)Mr.element=hn,Mr.width=hn.naturalWidth,Mr.height=hn.naturalHeight,Mr.channels=4;else if(E(hn)===Ge)Mr.element=hn,Mr.width=hn.videoWidth,Mr.height=hn.videoHeight,Mr.channels=4;else if(S(hn)){for(Sn=Mr.width||hn[0].length,Jn=Mr.height||hn.length,ha=Mr.channels,ha=w(hn[0][0])?ha||hn[0][0].length:ha||1,na=Ve.shape(hn),Kn=1,Ya=0;Ya<na.length;++Ya)Kn*=na[Ya];Kn=me.allocType(Mr.type===36193?5126:Mr.type,Kn),Ve.flatten(hn,na,"",Kn),F(Mr,Kn),Mr.alignment=1,Mr.width=Sn,Mr.height=Jn,Mr.channels=ha,Mr.format=Mr.internalformat=zt[ha],Mr.needsFree=!0}}function it(Mr,gn,hn,Sn,Jn){var ha=Mr.element,na=Mr.data,Fn=Mr.internalformat,Kn=Mr.format,Ya=Mr.type,hi=Mr.width,Gt=Mr.height;Ut(Mr),ha?ot.texSubImage2D(gn,Jn,hn,Sn,Kn,Ya,ha):Mr.compressed?ot.compressedTexSubImage2D(gn,Jn,hn,Sn,Fn,hi,Gt,na):Mr.needsCopy?(fr(),ot.copyTexSubImage2D(gn,Jn,hn,Sn,Mr.xOffset,Mr.yOffset,hi,Gt)):ot.texSubImage2D(gn,Jn,hn,Sn,hi,Gt,Kn,Ya,na)}function ut(){return ya.pop()||new Pe}function vt(Mr){Mr.needsFree&&me.freeType(Mr.data),Pe.call(Mr),ya.push(Mr)}function St(){st.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function yt(Mr,gn,hn){var Sn=Mr.images[0]=ut();Mr.mipmask=1,Sn.width=Mr.width=gn,Sn.height=Mr.height=hn,Sn.channels=Mr.channels=4}function Pt(Mr,gn){var hn=null;if(P(gn))hn=Mr.images[0]=ut(),ct(hn,Mr),Ee(hn,gn),Mr.mipmask=1;else if(Mt(Mr,gn),Array.isArray(gn.mipmap))for(var Sn=gn.mipmap,Jn=0;Jn<Sn.length;++Jn)hn=Mr.images[Jn]=ut(),ct(hn,Mr),hn.width>>=Jn,hn.height>>=Jn,Ee(hn,Sn[Jn]),Mr.mipmask|=1<<Jn;else hn=Mr.images[0]=ut(),ct(hn,Mr),Ee(hn,gn),Mr.mipmask=1;ct(Mr,Mr.images[0])}function Wt(Mr,gn){for(var hn=Mr.images,Sn=0;Sn<hn.length&&hn[Sn];++Sn){var Jn=hn[Sn],ha=gn,na=Sn,Fn=Jn.element,Kn=Jn.data,Ya=Jn.internalformat,hi=Jn.format,Gt=Jn.type,pr=Jn.width,an=Jn.height;Ut(Jn),Fn?ot.texImage2D(ha,na,hi,hi,Gt,Fn):Jn.compressed?ot.compressedTexImage2D(ha,na,Ya,pr,an,0,Kn):Jn.needsCopy?(fr(),ot.copyTexImage2D(ha,na,hi,Jn.xOffset,Jn.yOffset,pr,an,0)):ot.texImage2D(ha,na,hi,pr,an,0,hi,Gt,Kn||null)}}function ar(){var Mr=ka.pop()||new St;st.call(Mr);for(var gn=Mr.mipmask=0;16>gn;++gn)Mr.images[gn]=null;return Mr}function kr(Mr){for(var gn=Mr.images,hn=0;hn<gn.length;++hn)gn[hn]&&vt(gn[hn]),gn[hn]=null;ka.push(Mr)}function wr(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function Sr(Mr,gn){"min"in gn&&(Mr.minFilter=Zt[gn.min],0<=Qt.indexOf(Mr.minFilter)&&!("faces"in gn)&&(Mr.genMipmaps=!0)),"mag"in gn&&(Mr.magFilter=Dt[gn.mag]);var hn=Mr.wrapS,Sn=Mr.wrapT;if("wrap"in gn){var Jn=gn.wrap;typeof Jn=="string"?hn=Sn=nt[Jn]:Array.isArray(Jn)&&(hn=nt[Jn[0]],Sn=nt[Jn[1]])}else"wrapS"in gn&&(hn=nt[gn.wrapS]),"wrapT"in gn&&(Sn=nt[gn.wrapT]);if(Mr.wrapS=hn,Mr.wrapT=Sn,"anisotropic"in gn&&(Mr.anisotropic=gn.anisotropic),"mipmap"in gn){switch(hn=!1,typeof gn.mipmap){case"string":Mr.mipmapHint=Cr[gn.mipmap],hn=Mr.genMipmaps=!0;break;case"boolean":hn=Mr.genMipmaps=gn.mipmap;break;case"object":Mr.genMipmaps=!1,hn=!0}!hn||"min"in gn||(Mr.minFilter=9984)}}function Zr(Mr,gn){ot.texParameteri(gn,10241,Mr.minFilter),ot.texParameteri(gn,10240,Mr.magFilter),ot.texParameteri(gn,10242,Mr.wrapS),ot.texParameteri(gn,10243,Mr.wrapT),er.ext_texture_filter_anisotropic&&ot.texParameteri(gn,34046,Mr.anisotropic),Mr.genMipmaps&&(ot.hint(33170,Mr.mipmapHint),ot.generateMipmap(gn))}function ir(Mr){st.call(this),this.mipmask=0,this.internalformat=6408,this.id=di++,this.refCount=1,this.target=Mr,this.texture=ot.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new wr,$e.profile&&(this.stats={size:0})}function xr(Mr){ot.activeTexture(33984),ot.bindTexture(Mr.target,Mr.texture)}function Rr(){var Mr=Ka[0];Mr?ot.bindTexture(Mr.target,Mr.texture):ot.bindTexture(3553,null)}function Br(Mr){var gn=Mr.texture,hn=Mr.unit,Sn=Mr.target;0<=hn&&(ot.activeTexture(33984+hn),ot.bindTexture(Sn,null),Ka[hn]=null),ot.deleteTexture(gn),Mr.texture=null,Mr.params=null,Mr.pixels=null,Mr.refCount=0,delete Xa[Mr.id],et.textureCount--}var Cr={"don't care":4352,"dont care":4352,nice:4354,fast:4353},nt={repeat:10497,clamp:33071,mirror:33648},Dt={nearest:9728,linear:9729},Zt=se({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},Dt),sr={none:0,browser:37444},zr={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},Ur={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},Lr={};er.ext_srgb&&(Ur.srgb=35904,Ur.srgba=35906),er.oes_texture_float&&(zr.float32=zr.float=5126),er.oes_texture_half_float&&(zr.float16=zr["half float"]=36193),er.webgl_depth_texture&&(se(Ur,{depth:6402,"depth stencil":34041}),se(zr,{uint16:5123,uint32:5125,"depth stencil":34042})),er.webgl_compressed_texture_s3tc&&se(Lr,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),er.webgl_compressed_texture_atc&&se(Lr,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),er.webgl_compressed_texture_pvrtc&&se(Lr,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),er.webgl_compressed_texture_etc1&&(Lr["rgb etc1"]=36196);var Tr=Array.prototype.slice.call(ot.getParameter(34467));Object.keys(Lr).forEach(function(Mr){var gn=Lr[Mr];0<=Tr.indexOf(gn)&&(Ur[Mr]=gn)});var Wr=Object.keys(Ur);Kt.textureFormats=Wr;var An=[];Object.keys(Ur).forEach(function(Mr){An[Ur[Mr]]=Mr});var vn=[];Object.keys(zr).forEach(function(Mr){vn[zr[Mr]]=Mr});var Un=[];Object.keys(Dt).forEach(function(Mr){Un[Dt[Mr]]=Mr});var Ln=[];Object.keys(Zt).forEach(function(Mr){Ln[Zt[Mr]]=Mr});var Zn=[];Object.keys(nt).forEach(function(Mr){Zn[nt[Mr]]=Mr});var Wn=Wr.reduce(function(Mr,gn){var hn=Ur[gn];return hn===6409||hn===6406||hn===6409||hn===6410||hn===6402||hn===34041||er.ext_srgb&&(hn===35904||hn===35906)?Mr[hn]=hn:hn===32855||0<=gn.indexOf("rgba")?Mr[hn]=6408:Mr[hn]=6407,Mr},{}),ya=[],ka=[],di=0,Xa={},$a=Kt.maxTextureUnits,Ka=Array($a).map(function(){return null});return se(ir.prototype,{bind:function(){this.bindCount+=1;var Mr=this.unit;if(0>Mr){for(var gn=0;gn<$a;++gn){var hn=Ka[gn];if(hn){if(0<hn.bindCount)continue;hn.unit=-1}Ka[gn]=this,Mr=gn;break}$e.profile&&et.maxTextureUnits<Mr+1&&(et.maxTextureUnits=Mr+1),this.unit=Mr,ot.activeTexture(33984+Mr),ot.bindTexture(this.target,this.texture)}return Mr},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&Br(this)}}),$e.profile&&(et.getTotalTextureSize=function(){var Mr=0;return Object.keys(Xa).forEach(function(gn){Mr+=Xa[gn].stats.size}),Mr}),{create2D:function(Mr,gn){function hn(Jn,ha){var na=Sn.texInfo;wr.call(na);var Fn=ar();return typeof Jn=="number"?typeof ha=="number"?yt(Fn,Jn|0,ha|0):yt(Fn,Jn|0,Jn|0):Jn?(Sr(na,Jn),Pt(Fn,Jn)):yt(Fn,1,1),na.genMipmaps&&(Fn.mipmask=(Fn.width<<1)-1),Sn.mipmask=Fn.mipmask,ct(Sn,Fn),Sn.internalformat=Fn.internalformat,hn.width=Fn.width,hn.height=Fn.height,xr(Sn),Wt(Fn,3553),Zr(na,3553),Rr(),kr(Fn),$e.profile&&(Sn.stats.size=I(Sn.internalformat,Sn.type,Fn.width,Fn.height,na.genMipmaps,!1)),hn.format=An[Sn.internalformat],hn.type=vn[Sn.type],hn.mag=Un[na.magFilter],hn.min=Ln[na.minFilter],hn.wrapS=Zn[na.wrapS],hn.wrapT=Zn[na.wrapT],hn}var Sn=new ir(3553);return Xa[Sn.id]=Sn,et.textureCount++,hn(Mr,gn),hn.subimage=function(Jn,ha,na,Fn){ha|=0,na|=0,Fn|=0;var Kn=ut();return ct(Kn,Sn),Kn.width=0,Kn.height=0,Ee(Kn,Jn),Kn.width=Kn.width||(Sn.width>>Fn)-ha,Kn.height=Kn.height||(Sn.height>>Fn)-na,xr(Sn),it(Kn,3553,ha,na,Fn),Rr(),vt(Kn),hn},hn.resize=function(Jn,ha){var na=Jn|0,Fn=ha|0||na;if(na===Sn.width&&Fn===Sn.height)return hn;hn.width=Sn.width=na,hn.height=Sn.height=Fn,xr(Sn);for(var Kn=0;Sn.mipmask>>Kn;++Kn){var Ya=na>>Kn,hi=Fn>>Kn;if(!Ya||!hi)break;ot.texImage2D(3553,Kn,Sn.format,Ya,hi,0,Sn.format,Sn.type,null)}return Rr(),$e.profile&&(Sn.stats.size=I(Sn.internalformat,Sn.type,na,Fn,!1,!1)),hn},hn._reglType="texture2d",hn._texture=Sn,$e.profile&&(hn.stats=Sn.stats),hn.destroy=function(){Sn.decRef()},hn},createCube:function(Mr,gn,hn,Sn,Jn,ha){function na(Ya,hi,Gt,pr,an,dn){var rn,Mn=Fn.texInfo;for(wr.call(Mn),rn=0;6>rn;++rn)Kn[rn]=ar();if(typeof Ya=="number"||!Ya)for(Ya=Ya|0||1,rn=0;6>rn;++rn)yt(Kn[rn],Ya,Ya);else if(typeof Ya=="object")if(hi)Pt(Kn[0],Ya),Pt(Kn[1],hi),Pt(Kn[2],Gt),Pt(Kn[3],pr),Pt(Kn[4],an),Pt(Kn[5],dn);else if(Sr(Mn,Ya),Mt(Fn,Ya),"faces"in Ya)for(Ya=Ya.faces,rn=0;6>rn;++rn)ct(Kn[rn],Fn),Pt(Kn[rn],Ya[rn]);else for(rn=0;6>rn;++rn)Pt(Kn[rn],Ya);for(ct(Fn,Kn[0]),Fn.mipmask=Mn.genMipmaps?(Kn[0].width<<1)-1:Kn[0].mipmask,Fn.internalformat=Kn[0].internalformat,na.width=Kn[0].width,na.height=Kn[0].height,xr(Fn),rn=0;6>rn;++rn)Wt(Kn[rn],34069+rn);for(Zr(Mn,34067),Rr(),$e.profile&&(Fn.stats.size=I(Fn.internalformat,Fn.type,na.width,na.height,Mn.genMipmaps,!0)),na.format=An[Fn.internalformat],na.type=vn[Fn.type],na.mag=Un[Mn.magFilter],na.min=Ln[Mn.minFilter],na.wrapS=Zn[Mn.wrapS],na.wrapT=Zn[Mn.wrapT],rn=0;6>rn;++rn)kr(Kn[rn]);return na}var Fn=new ir(34067);Xa[Fn.id]=Fn,et.cubeCount++;var Kn=Array(6);return na(Mr,gn,hn,Sn,Jn,ha),na.subimage=function(Ya,hi,Gt,pr,an){Gt|=0,pr|=0,an|=0;var dn=ut();return ct(dn,Fn),dn.width=0,dn.height=0,Ee(dn,hi),dn.width=dn.width||(Fn.width>>an)-Gt,dn.height=dn.height||(Fn.height>>an)-pr,xr(Fn),it(dn,34069+Ya,Gt,pr,an),Rr(),vt(dn),na},na.resize=function(Ya){if(Ya|=0,Ya!==Fn.width){na.width=Fn.width=Ya,na.height=Fn.height=Ya,xr(Fn);for(var hi=0;6>hi;++hi)for(var Gt=0;Fn.mipmask>>Gt;++Gt)ot.texImage2D(34069+hi,Gt,Fn.format,Ya>>Gt,Ya>>Gt,0,Fn.format,Fn.type,null);return Rr(),$e.profile&&(Fn.stats.size=I(Fn.internalformat,Fn.type,na.width,na.height,!1,!0)),na}},na._reglType="textureCube",na._texture=Fn,$e.profile&&(na.stats=Fn.stats),na.destroy=function(){Fn.decRef()},na},clear:function(){for(var Mr=0;Mr<$a;++Mr)ot.activeTexture(33984+Mr),ot.bindTexture(3553,null),Ka[Mr]=null;De(Xa).forEach(Br),et.cubeCount=0,et.textureCount=0},getTexture:function(Mr){return null},restore:function(){for(var Mr=0;Mr<$a;++Mr){var gn=Ka[Mr];gn&&(gn.bindCount=0,gn.unit=-1,Ka[Mr]=null)}De(Xa).forEach(function(hn){hn.texture=ot.createTexture(),ot.bindTexture(hn.target,hn.texture);for(var Sn=0;32>Sn;++Sn)if((hn.mipmask&1<<Sn)!==0)if(hn.target===3553)ot.texImage2D(3553,Sn,hn.internalformat,hn.width>>Sn,hn.height>>Sn,0,hn.internalformat,hn.type,null);else for(var Jn=0;6>Jn;++Jn)ot.texImage2D(34069+Jn,Sn,hn.internalformat,hn.width>>Sn,hn.height>>Sn,0,hn.internalformat,hn.type,null);Zr(hn.texInfo,hn.target)})},refresh:function(){for(var Mr=0;Mr<$a;++Mr){var gn=Ka[Mr];gn&&(gn.bindCount=0,gn.unit=-1,Ka[Mr]=null),ot.activeTexture(33984+Mr),ot.bindTexture(3553,null),ot.bindTexture(34067,null)}}}}function R(ot,er,Kt,fr,Ar,et){function $e(ir,xr,Rr){this.target=ir,this.texture=xr,this.renderbuffer=Rr;var Br=ir=0;xr?(ir=xr.width,Br=xr.height):Rr&&(ir=Rr.width,Br=Rr.height),this.width=ir,this.height=Br}function st(ir){ir&&(ir.texture&&ir.texture._texture.decRef(),ir.renderbuffer&&ir.renderbuffer._renderbuffer.decRef())}function ct(ir,xr,Rr){ir&&(ir.texture?ir.texture._texture.refCount+=1:ir.renderbuffer._renderbuffer.refCount+=1)}function Mt(ir,xr){xr&&(xr.texture?ot.framebufferTexture2D(36160,ir,xr.target,xr.texture._texture.texture,0):ot.framebufferRenderbuffer(36160,ir,36161,xr.renderbuffer._renderbuffer.renderbuffer))}function Ut(ir){var xr=3553,Rr=null,Br=null,Cr=ir;return typeof ir=="object"&&(Cr=ir.data,"target"in ir&&(xr=ir.target|0)),ir=Cr._reglType,ir==="texture2d"||ir==="textureCube"?Rr=Cr:ir==="renderbuffer"&&(Br=Cr,xr=36161),new $e(xr,Rr,Br)}function Pe(ir,xr,Rr,Br,Cr){return Rr?(ir=fr.create2D({width:ir,height:xr,format:Br,type:Cr}),ir._texture.refCount=0,new $e(3553,ir,null)):(ir=Ar.create({width:ir,height:xr,format:Br}),ir._renderbuffer.refCount=0,new $e(36161,null,ir))}function Ee(ir){return ir&&(ir.texture||ir.renderbuffer)}function it(ir,xr,Rr){ir&&(ir.texture?ir.texture.resize(xr,Rr):ir.renderbuffer&&ir.renderbuffer.resize(xr,Rr),ir.width=xr,ir.height=Rr)}function ut(){this.id=Sr++,Zr[this.id]=this,this.framebuffer=ot.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function vt(ir){ir.colorAttachments.forEach(st),st(ir.depthAttachment),st(ir.stencilAttachment),st(ir.depthStencilAttachment)}function St(ir){ot.deleteFramebuffer(ir.framebuffer),ir.framebuffer=null,et.framebufferCount--,delete Zr[ir.id]}function yt(ir){var xr;ot.bindFramebuffer(36160,ir.framebuffer);var Rr=ir.colorAttachments;for(xr=0;xr<Rr.length;++xr)Mt(36064+xr,Rr[xr]);for(xr=Rr.length;xr<Kt.maxColorAttachments;++xr)ot.framebufferTexture2D(36160,36064+xr,3553,null,0);ot.framebufferTexture2D(36160,33306,3553,null,0),ot.framebufferTexture2D(36160,36096,3553,null,0),ot.framebufferTexture2D(36160,36128,3553,null,0),Mt(36096,ir.depthAttachment),Mt(36128,ir.stencilAttachment),Mt(33306,ir.depthStencilAttachment),ot.checkFramebufferStatus(36160),ot.isContextLost(),ot.bindFramebuffer(36160,Wt.next?Wt.next.framebuffer:null),Wt.cur=Wt.next,ot.getError()}function Pt(ir,xr){function Rr(Cr,nt){var Dt,Zt=0,sr=0,zr=!0,Ur=!0;Dt=null;var Lr=!0,Tr="rgba",Wr="uint8",An=1,vn=null,Un=null,Ln=null,Zn=!1;typeof Cr=="number"?(Zt=Cr|0,sr=nt|0||Zt):Cr?("shape"in Cr?(sr=Cr.shape,Zt=sr[0],sr=sr[1]):("radius"in Cr&&(Zt=sr=Cr.radius),"width"in Cr&&(Zt=Cr.width),"height"in Cr&&(sr=Cr.height)),("color"in Cr||"colors"in Cr)&&(Dt=Cr.color||Cr.colors),Dt||("colorCount"in Cr&&(An=Cr.colorCount|0),"colorTexture"in Cr&&(Lr=!!Cr.colorTexture,Tr="rgba4"),"colorType"in Cr&&(Wr=Cr.colorType,!Lr)&&(Wr==="half float"||Wr==="float16"?Tr="rgba16f":(Wr==="float"||Wr==="float32")&&(Tr="rgba32f")),"colorFormat"in Cr&&(Tr=Cr.colorFormat,0<=ar.indexOf(Tr)?Lr=!0:0<=kr.indexOf(Tr)&&(Lr=!1))),("depthTexture"in Cr||"depthStencilTexture"in Cr)&&(Zn=!(!Cr.depthTexture&&!Cr.depthStencilTexture)),"depth"in Cr&&(typeof Cr.depth=="boolean"?zr=Cr.depth:(vn=Cr.depth,Ur=!1)),"stencil"in Cr&&(typeof Cr.stencil=="boolean"?Ur=Cr.stencil:(Un=Cr.stencil,zr=!1)),"depthStencil"in Cr&&(typeof Cr.depthStencil=="boolean"?zr=Ur=Cr.depthStencil:(Ln=Cr.depthStencil,Ur=zr=!1))):Zt=sr=1;var Wn=null,ya=null,ka=null,di=null;if(Array.isArray(Dt))Wn=Dt.map(Ut);else if(Dt)Wn=[Ut(Dt)];else for(Wn=Array(An),Dt=0;Dt<An;++Dt)Wn[Dt]=Pe(Zt,sr,Lr,Tr,Wr);for(Zt=Zt||Wn[0].width,sr=sr||Wn[0].height,vn?ya=Ut(vn):zr&&!Ur&&(ya=Pe(Zt,sr,Zn,"depth","uint32")),Un?ka=Ut(Un):Ur&&!zr&&(ka=Pe(Zt,sr,!1,"stencil","uint8")),Ln?di=Ut(Ln):!vn&&!Un&&Ur&&zr&&(di=Pe(Zt,sr,Zn,"depth stencil","depth stencil")),zr=null,Dt=0;Dt<Wn.length;++Dt)ct(Wn[Dt]),Wn[Dt]&&Wn[Dt].texture&&(Ur=mt[Wn[Dt].texture._texture.format]*At[Wn[Dt].texture._texture.type],zr===null&&(zr=Ur));return ct(ya),ct(ka),ct(di),vt(Br),Br.width=Zt,Br.height=sr,Br.colorAttachments=Wn,Br.depthAttachment=ya,Br.stencilAttachment=ka,Br.depthStencilAttachment=di,Rr.color=Wn.map(Ee),Rr.depth=Ee(ya),Rr.stencil=Ee(ka),Rr.depthStencil=Ee(di),Rr.width=Br.width,Rr.height=Br.height,yt(Br),Rr}var Br=new ut;return et.framebufferCount++,Rr(ir,xr),se(Rr,{resize:function(Cr,nt){var Dt=Math.max(Cr|0,1),Zt=Math.max(nt|0||Dt,1);if(Dt===Br.width&&Zt===Br.height)return Rr;for(var sr=Br.colorAttachments,zr=0;zr<sr.length;++zr)it(sr[zr],Dt,Zt);return it(Br.depthAttachment,Dt,Zt),it(Br.stencilAttachment,Dt,Zt),it(Br.depthStencilAttachment,Dt,Zt),Br.width=Rr.width=Dt,Br.height=Rr.height=Zt,yt(Br),Rr},_reglType:"framebuffer",_framebuffer:Br,destroy:function(){St(Br),vt(Br)},use:function(Cr){Wt.setFBO({framebuffer:Rr},Cr)}})}var Wt={cur:null,next:null,dirty:!1,setFBO:null},ar=["rgba"],kr=["rgba4","rgb565","rgb5 a1"];er.ext_srgb&&kr.push("srgba"),er.ext_color_buffer_half_float&&kr.push("rgba16f","rgb16f"),er.webgl_color_buffer_float&&kr.push("rgba32f");var wr=["uint8"];er.oes_texture_half_float&&wr.push("half float","float16"),er.oes_texture_float&&wr.push("float","float32");var Sr=0,Zr={};return se(Wt,{getFramebuffer:function(ir){return typeof ir=="function"&&ir._reglType==="framebuffer"&&(ir=ir._framebuffer,ir instanceof ut)?ir:null},create:Pt,createCube:function(ir){function xr(Br){var Cr,nt={color:null},Dt=0,Zt=null;Cr="rgba";var sr="uint8",zr=1;if(typeof Br=="number"?Dt=Br|0:Br?("shape"in Br?Dt=Br.shape[0]:("radius"in Br&&(Dt=Br.radius|0),"width"in Br?Dt=Br.width|0:"height"in Br&&(Dt=Br.height|0)),("color"in Br||"colors"in Br)&&(Zt=Br.color||Br.colors),Zt||("colorCount"in Br&&(zr=Br.colorCount|0),"colorType"in Br&&(sr=Br.colorType),"colorFormat"in Br&&(Cr=Br.colorFormat)),"depth"in Br&&(nt.depth=Br.depth),"stencil"in Br&&(nt.stencil=Br.stencil),"depthStencil"in Br&&(nt.depthStencil=Br.depthStencil)):Dt=1,Zt)if(Array.isArray(Zt))for(Br=[],Cr=0;Cr<Zt.length;++Cr)Br[Cr]=Zt[Cr];else Br=[Zt];else for(Br=Array(zr),Zt={radius:Dt,format:Cr,type:sr},Cr=0;Cr<zr;++Cr)Br[Cr]=fr.createCube(Zt);for(nt.color=Array(Br.length),Cr=0;Cr<Br.length;++Cr)zr=Br[Cr],Dt=Dt||zr.width,nt.color[Cr]={target:34069,data:Br[Cr]};for(Cr=0;6>Cr;++Cr){for(zr=0;zr<Br.length;++zr)nt.color[zr].target=34069+Cr;0<Cr&&(nt.depth=Rr[0].depth,nt.stencil=Rr[0].stencil,nt.depthStencil=Rr[0].depthStencil),Rr[Cr]?Rr[Cr](nt):Rr[Cr]=Pt(nt)}return se(xr,{width:Dt,height:Dt,color:Br})}var Rr=Array(6);return xr(ir),se(xr,{faces:Rr,resize:function(Br){var Cr=Br|0;if(Cr===xr.width)return xr;var nt=xr.color;for(Br=0;Br<nt.length;++Br)nt[Br].resize(Cr);for(Br=0;6>Br;++Br)Rr[Br].resize(Cr);return xr.width=xr.height=Cr,xr},_reglType:"framebufferCube",destroy:function(){Rr.forEach(function(Br){Br.destroy()})}})},clear:function(){De(Zr).forEach(St)},restore:function(){Wt.cur=null,Wt.next=null,Wt.dirty=!0,De(Zr).forEach(function(ir){ir.framebuffer=ot.createFramebuffer(),yt(ir)})}})}function N(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function z(ot,er,Kt,fr,Ar,et,$e){function st(yt){if(yt!==St.currentVAO){var Pt=er.oes_vertex_array_object;yt?Pt.bindVertexArrayOES(yt.vao):Pt.bindVertexArrayOES(null),St.currentVAO=yt}}function ct(yt){if(yt!==St.currentVAO){if(yt)yt.bindAttrs();else{for(var Pt=er.angle_instanced_arrays,Wt=0;Wt<it.length;++Wt){var ar=it[Wt];ar.buffer?(ot.enableVertexAttribArray(Wt),ar.buffer.bind(),ot.vertexAttribPointer(Wt,ar.size,ar.type,ar.normalized,ar.stride,ar.offfset),Pt&&ar.divisor&&Pt.vertexAttribDivisorANGLE(Wt,ar.divisor)):(ot.disableVertexAttribArray(Wt),ot.vertexAttrib4f(Wt,ar.x,ar.y,ar.z,ar.w))}$e.elements?ot.bindBuffer(34963,$e.elements.buffer.buffer):ot.bindBuffer(34963,null)}St.currentVAO=yt}}function Mt(){De(vt).forEach(function(yt){yt.destroy()})}function Ut(){this.id=++ut,this.attributes=[],this.elements=null,this.ownsElements=!1,this.offset=this.count=0,this.instances=-1,this.primitive=4;var yt=er.oes_vertex_array_object;this.vao=yt?yt.createVertexArrayOES():null,vt[this.id]=this,this.buffers=[]}function Pe(){er.oes_vertex_array_object&&De(vt).forEach(function(yt){yt.refresh()})}var Ee=Kt.maxAttributes,it=Array(Ee);for(Kt=0;Kt<Ee;++Kt)it[Kt]=new N;var ut=0,vt={},St={Record:N,scope:{},state:it,currentVAO:null,targetVAO:null,restore:er.oes_vertex_array_object?Pe:function(){},createVAO:function(yt){function Pt(ar){var kr;Array.isArray(ar)?(kr=ar,Wt.elements&&Wt.ownsElements&&Wt.elements.destroy(),Wt.elements=null,Wt.ownsElements=!1,Wt.offset=0,Wt.count=0,Wt.instances=-1,Wt.primitive=4):(ar.elements?(kr=ar.elements,Wt.ownsElements?(typeof kr=="function"&&kr._reglType==="elements"?Wt.elements.destroy():Wt.elements(kr),Wt.ownsElements=!1):et.getElements(ar.elements)?(Wt.elements=ar.elements,Wt.ownsElements=!1):(Wt.elements=et.create(ar.elements),Wt.ownsElements=!0)):(Wt.elements=null,Wt.ownsElements=!1),kr=ar.attributes,Wt.offset=0,Wt.count=-1,Wt.instances=-1,Wt.primitive=4,Wt.elements&&(Wt.count=Wt.elements._elements.vertCount,Wt.primitive=Wt.elements._elements.primType),"offset"in ar&&(Wt.offset=ar.offset|0),"count"in ar&&(Wt.count=ar.count|0),"instances"in ar&&(Wt.instances=ar.instances|0),"primitive"in ar&&(Wt.primitive=We[ar.primitive])),ar={};var wr=Wt.attributes;wr.length=kr.length;for(var Sr=0;Sr<kr.length;++Sr){var Zr=kr[Sr],ir=wr[Sr]=new N,xr=Zr.data||Zr;if(Array.isArray(xr)||ke(xr)||d(xr)){var Rr;Wt.buffers[Sr]&&(Rr=Wt.buffers[Sr],ke(xr)&&Rr._buffer.byteLength>=xr.byteLength?Rr.subdata(xr):(Rr.destroy(),Wt.buffers[Sr]=null)),Wt.buffers[Sr]||(Rr=Wt.buffers[Sr]=Ar.create(Zr,34962,!1,!0)),ir.buffer=Ar.getBuffer(Rr),ir.size=ir.buffer.dimension|0,ir.normalized=!1,ir.type=ir.buffer.dtype,ir.offset=0,ir.stride=0,ir.divisor=0,ir.state=1,ar[Sr]=1}else Ar.getBuffer(Zr)?(ir.buffer=Ar.getBuffer(Zr),ir.size=ir.buffer.dimension|0,ir.normalized=!1,ir.type=ir.buffer.dtype,ir.offset=0,ir.stride=0,ir.divisor=0,ir.state=1):Ar.getBuffer(Zr.buffer)?(ir.buffer=Ar.getBuffer(Zr.buffer),ir.size=(+Zr.size||ir.buffer.dimension)|0,ir.normalized=!!Zr.normalized||!1,ir.type="type"in Zr?Le[Zr.type]:ir.buffer.dtype,ir.offset=(Zr.offset||0)|0,ir.stride=(Zr.stride||0)|0,ir.divisor=(Zr.divisor||0)|0,ir.state=1):"x"in Zr&&(ir.x=+Zr.x||0,ir.y=+Zr.y||0,ir.z=+Zr.z||0,ir.w=+Zr.w||0,ir.state=2)}for(Rr=0;Rr<Wt.buffers.length;++Rr)!ar[Rr]&&Wt.buffers[Rr]&&(Wt.buffers[Rr].destroy(),Wt.buffers[Rr]=null);return Wt.refresh(),Pt}var Wt=new Ut;return fr.vaoCount+=1,Pt.destroy=function(){for(var ar=0;ar<Wt.buffers.length;++ar)Wt.buffers[ar]&&Wt.buffers[ar].destroy();Wt.buffers.length=0,Wt.ownsElements&&(Wt.elements.destroy(),Wt.elements=null,Wt.ownsElements=!1),Wt.destroy()},Pt._vao=Wt,Pt._reglType="vao",Pt(yt)},getVAO:function(yt){return typeof yt=="function"&&yt._vao?yt._vao:null},destroyBuffer:function(yt){for(var Pt=0;Pt<it.length;++Pt){var Wt=it[Pt];Wt.buffer===yt&&(ot.disableVertexAttribArray(Pt),Wt.buffer=null)}},setVAO:er.oes_vertex_array_object?st:ct,clear:er.oes_vertex_array_object?Mt:function(){}};return Ut.prototype.bindAttrs=function(){for(var yt=er.angle_instanced_arrays,Pt=this.attributes,Wt=0;Wt<Pt.length;++Wt){var ar=Pt[Wt];ar.buffer?(ot.enableVertexAttribArray(Wt),ot.bindBuffer(34962,ar.buffer.buffer),ot.vertexAttribPointer(Wt,ar.size,ar.type,ar.normalized,ar.stride,ar.offset),yt&&ar.divisor&&yt.vertexAttribDivisorANGLE(Wt,ar.divisor)):(ot.disableVertexAttribArray(Wt),ot.vertexAttrib4f(Wt,ar.x,ar.y,ar.z,ar.w))}for(yt=Pt.length;yt<Ee;++yt)ot.disableVertexAttribArray(yt);(yt=et.getElements(this.elements))?ot.bindBuffer(34963,yt.buffer.buffer):ot.bindBuffer(34963,null)},Ut.prototype.refresh=function(){var yt=er.oes_vertex_array_object;yt&&(yt.bindVertexArrayOES(this.vao),this.bindAttrs(),St.currentVAO=null,yt.bindVertexArrayOES(null))},Ut.prototype.destroy=function(){if(this.vao){var yt=er.oes_vertex_array_object;this===St.currentVAO&&(St.currentVAO=null,yt.bindVertexArrayOES(null)),yt.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),vt[this.id]&&(delete vt[this.id],--fr.vaoCount)},St}function G(ot,er,Kt,fr){function Ar(ut,vt,St,yt){this.name=ut,this.id=vt,this.location=St,this.info=yt}function et(ut,vt){for(var St=0;St<ut.length;++St)if(ut[St].id===vt.id){ut[St].location=vt.location;return}ut.push(vt)}function $e(ut,vt,St){St=ut===35632?Mt:Ut;var yt=St[vt];if(!yt){var Pt=er.str(vt),yt=ot.createShader(ut);ot.shaderSource(yt,Pt),ot.compileShader(yt),St[vt]=yt}return yt}function st(ut,vt){this.id=it++,this.fragId=ut,this.vertId=vt,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,fr.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function ct(ut,vt,St){var yt;yt=$e(35632,ut.fragId);var Pt=$e(35633,ut.vertId);if(vt=ut.program=ot.createProgram(),ot.attachShader(vt,yt),ot.attachShader(vt,Pt),St)for(yt=0;yt<St.length;++yt)Pt=St[yt],ot.bindAttribLocation(vt,Pt[0],Pt[1]);ot.linkProgram(vt),Pt=ot.getProgramParameter(vt,35718),fr.profile&&(ut.stats.uniformsCount=Pt);var Wt=ut.uniforms;for(yt=0;yt<Pt;++yt)if(St=ot.getActiveUniform(vt,yt))if(1<St.size)for(var ar=0;ar<St.size;++ar){var kr=St.name.replace("[0]","["+ar+"]");et(Wt,new Ar(kr,er.id(kr),ot.getUniformLocation(vt,kr),St))}else et(Wt,new Ar(St.name,er.id(St.name),ot.getUniformLocation(vt,St.name),St));for(Pt=ot.getProgramParameter(vt,35721),fr.profile&&(ut.stats.attributesCount=Pt),ut=ut.attributes,yt=0;yt<Pt;++yt)(St=ot.getActiveAttrib(vt,yt))&&et(ut,new Ar(St.name,er.id(St.name),ot.getAttribLocation(vt,St.name),St))}var Mt={},Ut={},Pe={},Ee=[],it=0;return fr.profile&&(Kt.getMaxUniformsCount=function(){var ut=0;return Ee.forEach(function(vt){vt.stats.uniformsCount>ut&&(ut=vt.stats.uniformsCount)}),ut},Kt.getMaxAttributesCount=function(){var ut=0;return Ee.forEach(function(vt){vt.stats.attributesCount>ut&&(ut=vt.stats.attributesCount)}),ut}),{clear:function(){var ut=ot.deleteShader.bind(ot);De(Mt).forEach(ut),Mt={},De(Ut).forEach(ut),Ut={},Ee.forEach(function(vt){ot.deleteProgram(vt.program)}),Ee.length=0,Pe={},Kt.shaderCount=0},program:function(ut,vt,St,yt){var Pt=Pe[vt];Pt||(Pt=Pe[vt]={});var Wt=Pt[ut];if(Wt&&(Wt.refCount++,!yt))return Wt;var ar=new st(vt,ut);return Kt.shaderCount++,ct(ar,St,yt),Wt||(Pt[ut]=ar),Ee.push(ar),se(ar,{destroy:function(){if(ar.refCount--,0>=ar.refCount){ot.deleteProgram(ar.program);var kr=Ee.indexOf(ar);Ee.splice(kr,1),Kt.shaderCount--}0>=Pt[ar.vertId].refCount&&(ot.deleteShader(Ut[ar.vertId]),delete Ut[ar.vertId],delete Pe[ar.fragId][ar.vertId]),Object.keys(Pe[ar.fragId]).length||(ot.deleteShader(Mt[ar.fragId]),delete Mt[ar.fragId],delete Pe[ar.fragId])}})},restore:function(){Mt={},Ut={};for(var ut=0;ut<Ee.length;++ut)ct(Ee[ut],null,Ee[ut].attributes.map(function(vt){return[vt.location,vt.name]}))},shader:$e,frag:-1,vert:-1}}function Y(ot,er,Kt,fr,Ar,et,$e){function st(Mt){var Ut;Ut=er.next===null?5121:er.next.colorAttachments[0].texture._texture.type;var Pe=0,Ee=0,it=fr.framebufferWidth,ut=fr.framebufferHeight,vt=null;return ke(Mt)?vt=Mt:Mt&&(Pe=Mt.x|0,Ee=Mt.y|0,it=(Mt.width||fr.framebufferWidth-Pe)|0,ut=(Mt.height||fr.framebufferHeight-Ee)|0,vt=Mt.data||null),Kt(),Mt=it*ut*4,vt||(Ut===5121?vt=new Uint8Array(Mt):Ut===5126&&(vt=vt||new Float32Array(Mt))),ot.pixelStorei(3333,4),ot.readPixels(Pe,Ee,it,ut,6408,Ut,vt),vt}function ct(Mt){var Ut;return er.setFBO({framebuffer:Mt.framebuffer},function(){Ut=st(Mt)}),Ut}return function(Mt){return Mt&&"framebuffer"in Mt?ct(Mt):st(Mt)}}function ee(ot){for(var er=Array(ot.length>>2),fr=0;fr<er.length;fr++)er[fr]=0;for(fr=0;fr<8*ot.length;fr+=8)er[fr>>5]|=(ot.charCodeAt(fr/8)&255)<<24-fr%32;var Kt=8*ot.length;ot=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225];var fr=Array(64),Ar,et,$e,st,ct,Mt,Ut,Pe,Ee,it,ut;for(er[Kt>>5]|=128<<24-Kt%32,er[(Kt+64>>9<<4)+15]=Kt,Pe=0;Pe<er.length;Pe+=16){for(Kt=ot[0],Ar=ot[1],et=ot[2],$e=ot[3],st=ot[4],ct=ot[5],Mt=ot[6],Ut=ot[7],Ee=0;64>Ee;Ee++){if(16>Ee)fr[Ee]=er[Ee+Pe];else{it=Ee,ut=fr[Ee-2],ut=ne(ut,17)^ne(ut,19)^ut>>>10,ut=ce(ut,fr[Ee-7]);var vt;vt=fr[Ee-15],vt=ne(vt,7)^ne(vt,18)^vt>>>3,fr[it]=ce(ce(ut,vt),fr[Ee-16])}it=st,it=ne(it,6)^ne(it,11)^ne(it,25),it=ce(ce(ce(ce(Ut,it),st&ct^~st&Mt),Ht[Ee]),fr[Ee]),Ut=Kt,Ut=ne(Ut,2)^ne(Ut,13)^ne(Ut,22),ut=ce(Ut,Kt&Ar^Kt&et^Ar&et),Ut=Mt,Mt=ct,ct=st,st=ce($e,it),$e=et,et=Ar,Ar=Kt,Kt=ce(it,ut)}ot[0]=ce(Kt,ot[0]),ot[1]=ce(Ar,ot[1]),ot[2]=ce(et,ot[2]),ot[3]=ce($e,ot[3]),ot[4]=ce(st,ot[4]),ot[5]=ce(ct,ot[5]),ot[6]=ce(Mt,ot[6]),ot[7]=ce(Ut,ot[7])}for(er="",fr=0;fr<32*ot.length;fr+=8)er+=String.fromCharCode(ot[fr>>5]>>>24-fr%32&255);return er}function Z(ot){for(var er="",Kt,fr=0;fr<ot.length;fr++)Kt=ot.charCodeAt(fr),er+="0123456789abcdef".charAt(Kt>>>4&15)+"0123456789abcdef".charAt(Kt&15);return er}function X(ot){for(var er="",Kt=-1,fr,Ar;++Kt<ot.length;)fr=ot.charCodeAt(Kt),Ar=Kt+1<ot.length?ot.charCodeAt(Kt+1):0,55296<=fr&&56319>=fr&&56320<=Ar&&57343>=Ar&&(fr=65536+((fr&1023)<<10)+(Ar&1023),Kt++),127>=fr?er+=String.fromCharCode(fr):2047>=fr?er+=String.fromCharCode(192|fr>>>6&31,128|fr&63):65535>=fr?er+=String.fromCharCode(224|fr>>>12&15,128|fr>>>6&63,128|fr&63):2097151>=fr&&(er+=String.fromCharCode(240|fr>>>18&7,128|fr>>>12&63,128|fr>>>6&63,128|fr&63));return er}function ne(ot,er){return ot>>>er|ot<<32-er}function ce(ot,er){var Kt=(ot&65535)+(er&65535);return(ot>>16)+(er>>16)+(Kt>>16)<<16|Kt&65535}function Q(ot){return Array.prototype.slice.call(ot)}function K(ot){return Q(ot).join("")}function U(ot){function er(){var Ut=[],Pe=[];return se(function(){Ut.push.apply(Ut,Q(arguments))},{def:function(){var Ee="v"+Ar++;return Pe.push(Ee),0<arguments.length&&(Ut.push(Ee,"="),Ut.push.apply(Ut,Q(arguments)),Ut.push(";")),Ee},toString:function(){return K([0<Pe.length?"var "+Pe.join(",")+";":"",K(Ut)])}})}function Kt(){function Ut(vt,St){Ee(vt,St,"=",Pe.def(vt,St),";")}var Pe=er(),Ee=er(),it=Pe.toString,ut=Ee.toString;return se(function(){Pe.apply(Pe,Q(arguments))},{def:Pe.def,entry:Pe,exit:Ee,save:Ut,set:function(vt,St,yt){Ut(vt,St),Pe(vt,St,"=",yt,";")},toString:function(){return it()+ut()}})}var fr=ot&&ot.cache,Ar=0,et=[],$e=[],st=[],ct=er(),Mt={};return{global:ct,link:function(Ut,Pe){var Ee=Pe&&Pe.stable;if(!Ee){for(var it=0;it<$e.length;++it)if($e[it]===Ut&&!st[it])return et[it]}return it="g"+Ar++,et.push(it),$e.push(Ut),st.push(Ee),it},block:er,proc:function(Ut,Pe){function Ee(){var St="a"+it.length;return it.push(St),St}var it=[];Pe=Pe||0;for(var ut=0;ut<Pe;++ut)Ee();var ut=Kt(),vt=ut.toString;return Mt[Ut]=se(ut,{arg:Ee,toString:function(){return K(["function(",it.join(),"){",vt(),"}"])}})},scope:Kt,cond:function(){var Ut=K(arguments),Pe=Kt(),Ee=Kt(),it=Pe.toString,ut=Ee.toString;return se(Pe,{then:function(){return Pe.apply(Pe,Q(arguments)),this},else:function(){return Ee.apply(Ee,Q(arguments)),this},toString:function(){var vt=ut();return vt&&(vt="else{"+vt+"}"),K(["if(",Ut,"){",it(),"}",vt])}})},compile:function(){var Ut=['"use strict";',ct,"return {"];Object.keys(Mt).forEach(function(it){Ut.push('"',it,'":',Mt[it].toString(),",")}),Ut.push("}");var Pe=K(Ut).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),Ee;return fr&&(Ee=Z(ee(X(Pe))),fr[Ee])?fr[Ee].apply(null,$e):(Pe=Function.apply(null,et.concat(Pe)),fr&&(fr[Ee]=Pe),Pe.apply(null,$e))}}}function H(ot){return Array.isArray(ot)||ke(ot)||d(ot)}function q(ot){return ot.sort(function(er,Kt){return er==="viewport"?-1:Kt==="viewport"?1:er<Kt?-1:1})}function re(ot,er,Kt,fr){this.thisDep=ot,this.contextDep=er,this.propDep=Kt,this.append=fr}function j(ot){return ot&&!(ot.thisDep||ot.contextDep||ot.propDep)}function $(ot){return new re(!1,!1,!1,ot)}function ie(ot,er){var Kt=ot.type;if(Kt===0)return Kt=ot.data.length,new re(!0,1<=Kt,2<=Kt,er);if(Kt===4)return Kt=ot.data,new re(Kt.thisDep,Kt.contextDep,Kt.propDep,er);if(Kt===5)return new re(!1,!1,!1,er);if(Kt===6){for(var fr=Kt=!1,Ar=!1,et=0;et<ot.data.length;++et){var $e=ot.data[et];$e.type===1?Ar=!0:$e.type===2?fr=!0:$e.type===3?Kt=!0:$e.type===0?(Kt=!0,$e=$e.data,1<=$e&&(fr=!0),2<=$e&&(Ar=!0)):$e.type===4&&(Kt=Kt||$e.data.thisDep,fr=fr||$e.data.contextDep,Ar=Ar||$e.data.propDep)}return new re(Kt,fr,Ar,er)}return new re(Kt===3,Kt===2,Kt===1,er)}function oe(ot,er,Kt,fr,Ar,et,$e,st,ct,Mt,Ut,Pe,Ee,it,ut,vt){function St(Gt){return Gt.replace(".","_")}function yt(Gt,pr,an){var dn=St(Gt);ha.push(Gt),Jn[dn]=Sn[dn]=!!an,na[dn]=pr}function Pt(Gt,pr,an){var dn=St(Gt);ha.push(Gt),Array.isArray(an)?(Sn[dn]=an.slice(),Jn[dn]=an.slice()):Sn[dn]=Jn[dn]=an,Fn[dn]=pr}function Wt(){var Gt=U({cache:ut}),pr=Gt.link,an=Gt.global;Gt.id=hi++,Gt.batchId="0";var dn=pr(Kn),rn=Gt.shared={props:"a0"};Object.keys(Kn).forEach(function(br){rn[br]=an.def(dn,".",br)});var Mn=Gt.next={},_n=Gt.current={};Object.keys(Fn).forEach(function(br){Array.isArray(Sn[br])&&(Mn[br]=an.def(rn.next,".",br),_n[br]=an.def(rn.current,".",br))});var fn=Gt.constants={};Object.keys(Ya).forEach(function(br){fn[br]=an.def(JSON.stringify(Ya[br]))}),Gt.invoke=function(br,Nr){switch(Nr.type){case 0:var mn=["this",rn.context,rn.props,Gt.batchId];return br.def(pr(Nr.data),".call(",mn.slice(0,Math.max(Nr.data.length+1,4)),")");case 1:return br.def(rn.props,Nr.data);case 2:return br.def(rn.context,Nr.data);case 3:return br.def("this",Nr.data);case 4:return Nr.data.append(Gt,br),Nr.data.ref;case 5:return Nr.data.toString();case 6:return Nr.data.map(function(Bn){return Gt.invoke(br,Bn)})}},Gt.attribCache={};var mr={};return Gt.scopeAttrib=function(br){if(br=er.id(br),br in mr)return mr[br];var Nr=Mt.scope[br];return Nr||(Nr=Mt.scope[br]=new $a),mr[br]=pr(Nr)},Gt}function ar(Gt){var pr=Gt.static;Gt=Gt.dynamic;var an;if("profile"in pr){var dn=!!pr.profile;an=$(function(Mn,_n){return dn}),an.enable=dn}else if("profile"in Gt){var rn=Gt.profile;an=ie(rn,function(Mn,_n){return Mn.invoke(_n,rn)})}return an}function kr(Gt,pr){var an=Gt.static,dn=Gt.dynamic;if("framebuffer"in an){var rn=an.framebuffer;return rn?(rn=st.getFramebuffer(rn),$(function(_n,fn){var mr=_n.link(rn),br=_n.shared;return fn.set(br.framebuffer,".next",mr),br=br.context,fn.set(br,".framebufferWidth",mr+".width"),fn.set(br,".framebufferHeight",mr+".height"),mr})):$(function(_n,fn){var mr=_n.shared;return fn.set(mr.framebuffer,".next","null"),mr=mr.context,fn.set(mr,".framebufferWidth",mr+".drawingBufferWidth"),fn.set(mr,".framebufferHeight",mr+".drawingBufferHeight"),"null"})}if("framebuffer"in dn){var Mn=dn.framebuffer;return ie(Mn,function(_n,fn){var Nr=_n.invoke(fn,Mn),mr=_n.shared,br=mr.framebuffer,Nr=fn.def(br,".getFramebuffer(",Nr,")");return fn.set(br,".next",Nr),mr=mr.context,fn.set(mr,".framebufferWidth",Nr+"?"+Nr+".width:"+mr+".drawingBufferWidth"),fn.set(mr,".framebufferHeight",Nr+"?"+Nr+".height:"+mr+".drawingBufferHeight"),Nr})}return null}function wr(Gt,pr,an){function dn(fn){if(fn in rn){var mr=rn[fn];fn=!0;var br=mr.x|0,Nr=mr.y|0,mn,Bn;return"width"in mr?mn=mr.width|0:fn=!1,"height"in mr?Bn=mr.height|0:fn=!1,new re(!fn&&pr&&pr.thisDep,!fn&&pr&&pr.contextDep,!fn&&pr&&pr.propDep,function(Tn,Qn){var sa=Tn.shared.context,ma=mn;"width"in mr||(ma=Qn.def(sa,".","framebufferWidth","-",br));var wa=Bn;return"height"in mr||(wa=Qn.def(sa,".","framebufferHeight","-",Nr)),[br,Nr,ma,wa]})}if(fn in Mn){var aa=Mn[fn];return fn=ie(aa,function(Tn,Qn){var Ca=Tn.invoke(Qn,aa),sa=Tn.shared.context,ma=Qn.def(Ca,".x|0"),wa=Qn.def(Ca,".y|0"),ca=Qn.def('"width" in ',Ca,"?",Ca,".width|0:","(",sa,".","framebufferWidth","-",ma,")"),Ca=Qn.def('"height" in ',Ca,"?",Ca,".height|0:","(",sa,".","framebufferHeight","-",wa,")");return[ma,wa,ca,Ca]}),pr&&(fn.thisDep=fn.thisDep||pr.thisDep,fn.contextDep=fn.contextDep||pr.contextDep,fn.propDep=fn.propDep||pr.propDep),fn}return pr?new re(pr.thisDep,pr.contextDep,pr.propDep,function(Tn,Qn){var sa=Tn.shared.context;return[0,0,Qn.def(sa,".","framebufferWidth"),Qn.def(sa,".","framebufferHeight")]}):null}var rn=Gt.static,Mn=Gt.dynamic;if(Gt=dn("viewport")){var _n=Gt;Gt=new re(Gt.thisDep,Gt.contextDep,Gt.propDep,function(fn,mr){var br=_n.append(fn,mr),Nr=fn.shared.context;return mr.set(Nr,".viewportWidth",br[2]),mr.set(Nr,".viewportHeight",br[3]),br})}return{viewport:Gt,scissor_box:dn("scissor.box")}}function Sr(Gt,pr){var an=Gt.static;if(typeof an.frag=="string"&&typeof an.vert=="string"){if(0<Object.keys(pr.dynamic).length)return null;var an=pr.static,dn=Object.keys(an);if(0<dn.length&&typeof an[dn[0]]=="number"){for(var rn=[],Mn=0;Mn<dn.length;++Mn)rn.push([an[dn[Mn]]|0,dn[Mn]]);return rn}}return null}function Zr(Gt,pr,an){function dn(br){if(br in rn){var Nr=er.id(rn[br]);return br=$(function(){return Nr}),br.id=Nr,br}if(br in Mn){var mn=Mn[br];return ie(mn,function(Bn,aa){var Tn=Bn.invoke(aa,mn);return aa.def(Bn.shared.strings,".id(",Tn,")")})}return null}var rn=Gt.static,Mn=Gt.dynamic,_n=dn("frag"),fn=dn("vert"),mr=null;return j(_n)&&j(fn)?(mr=Ut.program(fn.id,_n.id,null,an),Gt=$(function(br,Nr){return br.link(mr)})):Gt=new re(_n&&_n.thisDep||fn&&fn.thisDep,_n&&_n.contextDep||fn&&fn.contextDep,_n&&_n.propDep||fn&&fn.propDep,function(br,Nr){var mn=br.shared.shader,Bn;Bn=_n?_n.append(br,Nr):Nr.def(mn,".","frag");var aa;return aa=fn?fn.append(br,Nr):Nr.def(mn,".","vert"),Nr.def(mn+".program("+aa+","+Bn+")")}),{frag:_n,vert:fn,progVar:Gt,program:mr}}function ir(Gt,pr){function an(Tn,Qn){if(Tn in dn){var sa=dn[Tn]|0;return Qn?Mn.offset=sa:Mn.instances=sa,$(function(wa,ca){return Qn&&(wa.OFFSET=sa),sa})}if(Tn in rn){var ma=rn[Tn];return ie(ma,function(wa,ca){var Ca=wa.invoke(ca,ma);return Qn&&(wa.OFFSET=Ca),Ca})}if(Qn){if(mr)return $(function(wa,ca){return wa.OFFSET=0});if(_n)return new re(fn.thisDep,fn.contextDep,fn.propDep,function(wa,ca){return ca.def(wa.shared.vao+".currentVAO?"+wa.shared.vao+".currentVAO.offset:0")})}else if(_n)return new re(fn.thisDep,fn.contextDep,fn.propDep,function(wa,ca){return ca.def(wa.shared.vao+".currentVAO?"+wa.shared.vao+".currentVAO.instances:-1")});return null}var dn=Gt.static,rn=Gt.dynamic,Mn={},_n=!1,fn=function(){if("vao"in dn){var Tn=dn.vao;return Tn!==null&&Mt.getVAO(Tn)===null&&(Tn=Mt.createVAO(Tn)),_n=!0,Mn.vao=Tn,$(function(sa){var ma=Mt.getVAO(Tn);return ma?sa.link(ma):"null"})}if("vao"in rn){_n=!0;var Qn=rn.vao;return ie(Qn,function(sa,ma){var wa=sa.invoke(ma,Qn);return ma.def(sa.shared.vao+".getVAO("+wa+")")})}return null}(),mr=!1,br=function(){if("elements"in dn){var Tn=dn.elements;if(Mn.elements=Tn,H(Tn)){var Qn=Mn.elements=et.create(Tn,!0),Tn=et.getElements(Qn);mr=!0}else Tn&&(Tn=et.getElements(Tn),mr=!0);return Qn=$(function(ma,wa){if(Tn){var ca=ma.link(Tn);return ma.ELEMENTS=ca}return ma.ELEMENTS=null}),Qn.value=Tn,Qn}if("elements"in rn){mr=!0;var sa=rn.elements;return ie(sa,function(ma,wa){var ca=ma.shared,To=ca.isBufferArgs,ca=ca.elements,Wo=ma.invoke(wa,sa),Ca=wa.def("null"),To=wa.def(To,"(",Wo,")"),Wo=ma.cond(To).then(Ca,"=",ca,".createStream(",Wo,");").else(Ca,"=",ca,".getElements(",Wo,");");return wa.entry(Wo),wa.exit(ma.cond(To).then(ca,".destroyStream(",Ca,");")),ma.ELEMENTS=Ca})}return _n?new re(fn.thisDep,fn.contextDep,fn.propDep,function(ma,wa){return wa.def(ma.shared.vao+".currentVAO?"+ma.shared.elements+".getElements("+ma.shared.vao+".currentVAO.elements):null")}):null}(),Nr=an("offset",!0),mn=function(){if("primitive"in dn){var Tn=dn.primitive;return Mn.primitive=Tn,$(function(sa,ma){return We[Tn]})}if("primitive"in rn){var Qn=rn.primitive;return ie(Qn,function(sa,ma){var wa=sa.constants.primTypes,ca=sa.invoke(ma,Qn);return ma.def(wa,"[",ca,"]")})}return mr?j(br)?br.value?$(function(sa,ma){return ma.def(sa.ELEMENTS,".primType")}):$(function(){return 4}):new re(br.thisDep,br.contextDep,br.propDep,function(sa,ma){var wa=sa.ELEMENTS;return ma.def(wa,"?",wa,".primType:",4)}):_n?new re(fn.thisDep,fn.contextDep,fn.propDep,function(sa,ma){return ma.def(sa.shared.vao+".currentVAO?"+sa.shared.vao+".currentVAO.primitive:4")}):null}(),Bn=function(){if("count"in dn){var Tn=dn.count|0;return Mn.count=Tn,$(function(){return Tn})}if("count"in rn){var Qn=rn.count;return ie(Qn,function(sa,ma){return sa.invoke(ma,Qn)})}return mr?j(br)?br?Nr?new re(Nr.thisDep,Nr.contextDep,Nr.propDep,function(sa,ma){return ma.def(sa.ELEMENTS,".vertCount-",sa.OFFSET)}):$(function(sa,ma){return ma.def(sa.ELEMENTS,".vertCount")}):$(function(){return-1}):new re(br.thisDep||Nr.thisDep,br.contextDep||Nr.contextDep,br.propDep||Nr.propDep,function(sa,ma){var wa=sa.ELEMENTS;return sa.OFFSET?ma.def(wa,"?",wa,".vertCount-",sa.OFFSET,":-1"):ma.def(wa,"?",wa,".vertCount:-1")}):_n?new re(fn.thisDep,fn.contextDep,fn.propDep,function(sa,ma){return ma.def(sa.shared.vao,".currentVAO?",sa.shared.vao,".currentVAO.count:-1")}):null}(),aa=an("instances",!1);return{elements:br,primitive:mn,count:Bn,instances:aa,offset:Nr,vao:fn,vaoActive:_n,elementsActive:mr,static:Mn}}function xr(Gt,pr){var an=Gt.static,dn=Gt.dynamic,rn={};return ha.forEach(function(Mn){function _n(mr,br){if(Mn in an){var Nr=mr(an[Mn]);rn[fn]=$(function(){return Nr})}else if(Mn in dn){var mn=dn[Mn];rn[fn]=ie(mn,function(Bn,aa){return br(Bn,aa,Bn.invoke(aa,mn))})}}var fn=St(Mn);switch(Mn){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":return _n(function(mr){return mr},function(mr,br,Nr){return Nr});case"depth.func":return _n(function(mr){return Yt[mr]},function(mr,br,Nr){return br.def(mr.constants.compareFuncs,"[",Nr,"]")});case"depth.range":return _n(function(mr){return mr},function(mr,br,Nr){return mr=br.def("+",Nr,"[0]"),br=br.def("+",Nr,"[1]"),[mr,br]});case"blend.func":return _n(function(mr){return[jt["srcRGB"in mr?mr.srcRGB:mr.src],jt["dstRGB"in mr?mr.dstRGB:mr.dst],jt["srcAlpha"in mr?mr.srcAlpha:mr.src],jt["dstAlpha"in mr?mr.dstAlpha:mr.dst]]},function(mr,br,Nr){function mn(Qn,sa){return br.def('"',Qn,sa,'" in ',Nr,"?",Nr,".",Qn,sa,":",Nr,".",Qn)}mr=mr.constants.blendFuncs;var Bn=mn("src","RGB"),Tn=mn("dst","RGB"),Bn=br.def(mr,"[",Bn,"]"),aa=br.def(mr,"[",mn("src","Alpha"),"]"),Tn=br.def(mr,"[",Tn,"]");return mr=br.def(mr,"[",mn("dst","Alpha"),"]"),[Bn,Tn,aa,mr]});case"blend.equation":return _n(function(mr){if(typeof mr=="string")return[Ka[mr],Ka[mr]];if(typeof mr=="object")return[Ka[mr.rgb],Ka[mr.alpha]]},function(mr,br,Nr){var mn=mr.constants.blendEquations,Bn=br.def(),aa=br.def();return mr=mr.cond("typeof ",Nr,'==="string"'),mr.then(Bn,"=",aa,"=",mn,"[",Nr,"];"),mr.else(Bn,"=",mn,"[",Nr,".rgb];",aa,"=",mn,"[",Nr,".alpha];"),br(mr),[Bn,aa]});case"blend.color":return _n(function(mr){return o(4,function(br){return+mr[br]})},function(mr,br,Nr){return o(4,function(mn){return br.def("+",Nr,"[",mn,"]")})});case"stencil.mask":return _n(function(mr){return mr|0},function(mr,br,Nr){return br.def(Nr,"|0")});case"stencil.func":return _n(function(mr){return[Yt[mr.cmp||"keep"],mr.ref||0,"mask"in mr?mr.mask:-1]},function(mr,br,Nr){mr=br.def('"cmp" in ',Nr,"?",mr.constants.compareFuncs,"[",Nr,".cmp]",":",7680);var mn=br.def(Nr,".ref|0");return br=br.def('"mask" in ',Nr,"?",Nr,".mask|0:-1"),[mr,mn,br]});case"stencil.opFront":case"stencil.opBack":return _n(function(mr){return[Mn==="stencil.opBack"?1029:1028,or[mr.fail||"keep"],or[mr.zfail||"keep"],or[mr.zpass||"keep"]]},function(mr,br,Nr){function mn(aa){return br.def('"',aa,'" in ',Nr,"?",Bn,"[",Nr,".",aa,"]:",7680)}var Bn=mr.constants.stencilOps;return[Mn==="stencil.opBack"?1029:1028,mn("fail"),mn("zfail"),mn("zpass")]});case"polygonOffset.offset":return _n(function(mr){return[mr.factor|0,mr.units|0]},function(mr,br,Nr){return mr=br.def(Nr,".factor|0"),br=br.def(Nr,".units|0"),[mr,br]});case"cull.face":return _n(function(mr){var br=0;return mr==="front"?br=1028:mr==="back"&&(br=1029),br},function(mr,br,Nr){return br.def(Nr,'==="front"?',1028,":",1029)});case"lineWidth":return _n(function(mr){return mr},function(mr,br,Nr){return Nr});case"frontFace":return _n(function(mr){return Gr[mr]},function(mr,br,Nr){return br.def(Nr+'==="cw"?2304:2305')});case"colorMask":return _n(function(mr){return mr.map(function(br){return!!br})},function(mr,br,Nr){return o(4,function(mn){return"!!"+Nr+"["+mn+"]"})});case"sample.coverage":return _n(function(mr){return["value"in mr?mr.value:1,!!mr.invert]},function(mr,br,Nr){return mr=br.def('"value" in ',Nr,"?+",Nr,".value:1"),br=br.def("!!",Nr,".invert"),[mr,br]})}}),rn}function Rr(Gt,pr){var an=Gt.static,dn=Gt.dynamic,rn={};return Object.keys(an).forEach(function(Mn){var _n=an[Mn],fn;if(typeof _n=="number"||typeof _n=="boolean")fn=$(function(){return _n});else if(typeof _n=="function"){var mr=_n._reglType;mr==="texture2d"||mr==="textureCube"?fn=$(function(br){return br.link(_n)}):(mr==="framebuffer"||mr==="framebufferCube")&&(fn=$(function(br){return br.link(_n.color[0])}))}else w(_n)&&(fn=$(function(br){return br.global.def("[",o(_n.length,function(Nr){return _n[Nr]}),"]")}));fn.value=_n,rn[Mn]=fn}),Object.keys(dn).forEach(function(Mn){var _n=dn[Mn];rn[Mn]=ie(_n,function(fn,mr){return fn.invoke(mr,_n)})}),rn}function Br(Gt,pr){var an=Gt.static,dn=Gt.dynamic,rn={};return Object.keys(an).forEach(function(Mn){var _n=an[Mn],fn=er.id(Mn),mr=new $a;if(H(_n))mr.state=1,mr.buffer=Ar.getBuffer(Ar.create(_n,34962,!1,!0)),mr.type=0;else{var br=Ar.getBuffer(_n);if(br)mr.state=1,mr.buffer=br,mr.type=0;else if("constant"in _n){var Nr=_n.constant;mr.buffer="null",mr.state=2,typeof Nr=="number"?mr.x=Nr:It.forEach(function(sa,ma){ma<Nr.length&&(mr[sa]=Nr[ma])})}else{var br=H(_n.buffer)?Ar.getBuffer(Ar.create(_n.buffer,34962,!1,!0)):Ar.getBuffer(_n.buffer),mn=_n.offset|0,Bn=_n.stride|0,aa=_n.size|0,Tn=!!_n.normalized,Qn=0;"type"in _n&&(Qn=Le[_n.type]),_n=_n.divisor|0,mr.buffer=br,mr.state=1,mr.size=aa,mr.normalized=Tn,mr.type=Qn||br.dtype,mr.offset=mn,mr.stride=Bn,mr.divisor=_n}}rn[Mn]=$(function(sa,ma){var wa=sa.attribCache;if(fn in wa)return wa[fn];var ca={isStream:!1};return Object.keys(mr).forEach(function(Ca){ca[Ca]=mr[Ca]}),mr.buffer&&(ca.buffer=sa.link(mr.buffer),ca.type=ca.type||ca.buffer+".dtype"),wa[fn]=ca})}),Object.keys(dn).forEach(function(Mn){var _n=dn[Mn];rn[Mn]=ie(_n,function(fn,mr){function br(wa){mr(Tn[wa],"=",Nr,".",wa,"|0;")}var Nr=fn.invoke(mr,_n),aa=fn.shared,mn=fn.constants,Bn=aa.isBufferArgs,aa=aa.buffer,Tn={isStream:mr.def(!1)},Qn=new $a;Qn.state=1,Object.keys(Qn).forEach(function(wa){Tn[wa]=mr.def(""+Qn[wa])});var sa=Tn.buffer,ma=Tn.type;return mr("if(",Bn,"(",Nr,")){",Tn.isStream,"=true;",sa,"=",aa,".createStream(",34962,",",Nr,");",ma,"=",sa,".dtype;","}else{",sa,"=",aa,".getBuffer(",Nr,");","if(",sa,"){",ma,"=",sa,".dtype;",'}else if("constant" in ',Nr,"){",Tn.state,"=",2,";","if(typeof "+Nr+'.constant === "number"){',Tn[It[0]],"=",Nr,".constant;",It.slice(1).map(function(wa){return Tn[wa]}).join("="),"=0;","}else{",It.map(function(wa,ca){return Tn[wa]+"="+Nr+".constant.length>"+ca+"?"+Nr+".constant["+ca+"]:0;"}).join(""),"}}else{","if(",Bn,"(",Nr,".buffer)){",sa,"=",aa,".createStream(",34962,",",Nr,".buffer);","}else{",sa,"=",aa,".getBuffer(",Nr,".buffer);","}",ma,'="type" in ',Nr,"?",mn.glTypes,"[",Nr,".type]:",sa,".dtype;",Tn.normalized,"=!!",Nr,".normalized;"),br("size"),br("offset"),br("stride"),br("divisor"),mr("}}"),mr.exit("if(",Tn.isStream,"){",aa,".destroyStream(",sa,");","}"),Tn})}),rn}function Cr(Gt){var pr=Gt.static,an=Gt.dynamic,dn={};return Object.keys(pr).forEach(function(rn){var Mn=pr[rn];dn[rn]=$(function(_n,fn){return typeof Mn=="number"||typeof Mn=="boolean"?""+Mn:_n.link(Mn)})}),Object.keys(an).forEach(function(rn){var Mn=an[rn];dn[rn]=ie(Mn,function(_n,fn){return _n.invoke(fn,Mn)})}),dn}function nt(Gt,pr,an,dn,rn){function Mn(Qn){var sa=fn[Qn];sa&&(br[Qn]=sa)}var _n=Sr(Gt,pr),Bn=kr(Gt),fn=wr(Gt,Bn),mr=ir(Gt),br=xr(Gt),Nr=Zr(Gt,rn,_n);Mn("viewport"),Mn(St("scissor.box"));var mn=0<Object.keys(br).length,Bn={framebuffer:Bn,draw:mr,shader:Nr,state:br,dirty:mn,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(Bn.profile=ar(Gt),Bn.uniforms=Rr(an),Bn.drawVAO=Bn.scopeVAO=mr.vao,!Bn.drawVAO&&Nr.program&&!_n&&Kt.angle_instanced_arrays&&mr.static.elements){var aa=!0;if(Gt=Nr.program.attributes.map(function(Qn){return Qn=pr.static[Qn],aa=aa&&!!Qn,Qn}),aa&&0<Gt.length){var Tn=Mt.getVAO(Mt.createVAO({attributes:Gt,elements:mr.static.elements}));Bn.drawVAO=new re(null,null,null,function(Qn,sa){return Qn.link(Tn)}),Bn.useVAO=!0}}return _n?Bn.useVAO=!0:Bn.attributes=Br(pr),Bn.context=Cr(dn),Bn}function Dt(Gt,pr,an){var dn=Gt.shared.context,rn=Gt.scope();Object.keys(an).forEach(function(Mn){pr.save(dn,"."+Mn);var _n=an[Mn].append(Gt,pr);Array.isArray(_n)?rn(dn,".",Mn,"=[",_n.join(),"];"):rn(dn,".",Mn,"=",_n,";")}),pr(rn)}function Zt(Gt,pr,an,dn){var fn=Gt.shared,rn=fn.gl,Mn=fn.framebuffer,_n;gn&&(_n=pr.def(fn.extensions,".webgl_draw_buffers"));var mr=Gt.constants,fn=mr.drawBuffer,mr=mr.backBuffer;Gt=an?an.append(Gt,pr):pr.def(Mn,".next"),dn||pr("if(",Gt,"!==",Mn,".cur){"),pr("if(",Gt,"){",rn,".bindFramebuffer(",36160,",",Gt,".framebuffer);"),gn&&pr(_n,".drawBuffersWEBGL(",fn,"[",Gt,".colorAttachments.length]);"),pr("}else{",rn,".bindFramebuffer(",36160,",null);"),gn&&pr(_n,".drawBuffersWEBGL(",mr,");"),pr("}",Mn,".cur=",Gt,";"),dn||pr("}")}function sr(Gt,pr,an){var dn=Gt.shared,rn=dn.gl,Mn=Gt.current,_n=Gt.next,fn=dn.current,mr=dn.next,br=Gt.cond(fn,".dirty");ha.forEach(function(Nr){if(Nr=St(Nr),!(Nr in an.state)){var mn,Bn;if(Nr in _n){mn=_n[Nr],Bn=Mn[Nr];var aa=o(Sn[Nr].length,function(Tn){return br.def(mn,"[",Tn,"]")});br(Gt.cond(aa.map(function(Tn,Qn){return Tn+"!=="+Bn+"["+Qn+"]"}).join("||")).then(rn,".",Fn[Nr],"(",aa,");",aa.map(function(Tn,Qn){return Bn+"["+Qn+"]="+Tn}).join(";"),";"))}else mn=br.def(mr,".",Nr),aa=Gt.cond(mn,"!==",fn,".",Nr),br(aa),Nr in na?aa(Gt.cond(mn).then(rn,".enable(",na[Nr],");").else(rn,".disable(",na[Nr],");"),fn,".",Nr,"=",mn,";"):aa(rn,".",Fn[Nr],"(",mn,");",fn,".",Nr,"=",mn,";")}}),Object.keys(an.state).length===0&&br(fn,".dirty=false;"),pr(br)}function zr(Gt,pr,an,dn){var rn=Gt.shared,Mn=Gt.current,_n=rn.current,fn=rn.gl,mr;q(Object.keys(an)).forEach(function(br){var Nr=an[br];if(!dn||dn(Nr)){var mn=Nr.append(Gt,pr);if(na[br]){var Bn=na[br];j(Nr)?(mr=Gt.link(mn,{stable:!0}),pr(Gt.cond(mr).then(fn,".enable(",Bn,");").else(fn,".disable(",Bn,");")),pr(_n,".",br,"=",mr,";")):(pr(Gt.cond(mn).then(fn,".enable(",Bn,");").else(fn,".disable(",Bn,");")),pr(_n,".",br,"=",mn,";"))}else if(w(mn)){var aa=Mn[br];pr(fn,".",Fn[br],"(",mn,");",mn.map(function(Tn,Qn){return aa+"["+Qn+"]="+Tn}).join(";"),";")}else j(Nr)?(mr=Gt.link(mn,{stable:!0}),pr(fn,".",Fn[br],"(",mr,");",_n,".",br,"=",mr,";")):pr(fn,".",Fn[br],"(",mn,");",_n,".",br,"=",mn,";")}})}function Ur(Gt,pr){Mr&&(Gt.instancing=pr.def(Gt.shared.extensions,".angle_instanced_arrays"))}function Lr(Gt,pr,an,dn,rn){function Mn(){return typeof performance>"u"?"Date.now()":"performance.now()"}function _n(Qn){aa=pr.def(),Qn(aa,"=",Mn(),";"),typeof rn=="string"?Qn(Nr,".count+=",rn,";"):Qn(Nr,".count++;"),it&&(dn?(Tn=pr.def(),Qn(Tn,"=",Bn,".getNumPendingQueries();")):Qn(Bn,".beginQuery(",Nr,");"))}function fn(Qn){Qn(Nr,".cpuTime+=",Mn(),"-",aa,";"),it&&(dn?Qn(Bn,".pushScopeStats(",Tn,",",Bn,".getNumPendingQueries(),",Nr,");"):Qn(Bn,".endQuery();"))}function mr(Qn){var sa=pr.def(mn,".profile");pr(mn,".profile=",Qn,";"),pr.exit(mn,".profile=",sa,";")}var br=Gt.shared,Nr=Gt.stats,mn=br.current,Bn=br.timer;an=an.profile;var aa,Tn;if(an){if(j(an)){an.enable?(_n(pr),fn(pr.exit),mr("true")):mr("false");return}an=an.append(Gt,pr),mr(an)}else an=pr.def(mn,".profile");br=Gt.block(),_n(br),pr("if(",an,"){",br,"}"),Gt=Gt.block(),fn(Gt),pr.exit("if(",an,"){",Gt,"}")}function Tr(Gt,pr,an,dn,rn){function Mn(mr){switch(mr){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function _n(mr,br,Nr){function mn(){pr("if(!",Qn,".buffer){",aa,".enableVertexAttribArray(",Tn,");}");var ca=Nr.type,Ca;Ca=Nr.size?pr.def(Nr.size,"||",br):br,pr("if(",Qn,".type!==",ca,"||",Qn,".size!==",Ca,"||",wa.map(function(To){return Qn+"."+To+"!=="+Nr[To]}).join("||"),"){",aa,".bindBuffer(",34962,",",sa,".buffer);",aa,".vertexAttribPointer(",[Tn,Ca,ca,Nr.normalized,Nr.stride,Nr.offset],");",Qn,".type=",ca,";",Qn,".size=",Ca,";",wa.map(function(To){return Qn+"."+To+"="+Nr[To]+";"}).join(""),"}"),Mr&&(ca=Nr.divisor,pr("if(",Qn,".divisor!==",ca,"){",Gt.instancing,".vertexAttribDivisorANGLE(",[Tn,ca],");",Qn,".divisor=",ca,";}"))}function Bn(){pr("if(",Qn,".buffer){",aa,".disableVertexAttribArray(",Tn,");",Qn,".buffer=null;","}if(",It.map(function(ca,Ca){return Qn+"."+ca+"!=="+ma[Ca]}).join("||"),"){",aa,".vertexAttrib4f(",Tn,",",ma,");",It.map(function(ca,Ca){return Qn+"."+ca+"="+ma[Ca]+";"}).join(""),"}")}var aa=fn.gl,Tn=pr.def(mr,".location"),Qn=pr.def(fn.attributes,"[",Tn,"]");mr=Nr.state;var sa=Nr.buffer,ma=[Nr.x,Nr.y,Nr.z,Nr.w],wa=["buffer","normalized","offset","stride"];mr===1?mn():mr===2?Bn():(pr("if(",mr,"===",1,"){"),mn(),pr("}else{"),Bn(),pr("}"))}var fn=Gt.shared;dn.forEach(function(mr){var br=mr.name,Nr=an.attributes[br],mn;if(Nr){if(!rn(Nr))return;mn=Nr.append(Gt,pr)}else{if(!rn(on))return;var Bn=Gt.scopeAttrib(br);mn={},Object.keys(new $a).forEach(function(aa){mn[aa]=pr.def(Bn,".",aa)})}_n(Gt.link(mr),Mn(mr.info.type),mn)})}function Wr(Gt,pr,an,dn,rn,Mn){for(var _n=Gt.shared,fn=_n.gl,mr,br=0;br<dn.length;++br){var aa=dn[br],Nr=aa.name,mn=aa.info.type,Bn=an.uniforms[Nr],aa=Gt.link(aa)+".location",Tn;if(Bn){if(!rn(Bn))continue;if(j(Bn)){if(Nr=Bn.value,mn===35678||mn===35680)mn=Gt.link(Nr._texture||Nr.color[0]._texture),pr(fn,".uniform1i(",aa,",",mn+".bind());"),pr.exit(mn,".unbind();");else if(mn===35674||mn===35675||mn===35676)Nr=Gt.global.def("new Float32Array(["+Array.prototype.slice.call(Nr)+"])"),Bn=2,mn===35675?Bn=3:mn===35676&&(Bn=4),pr(fn,".uniformMatrix",Bn,"fv(",aa,",false,",Nr,");");else{switch(mn){case 5126:mr="1f";break;case 35664:mr="2f";break;case 35665:mr="3f";break;case 35666:mr="4f";break;case 35670:mr="1i";break;case 5124:mr="1i";break;case 35671:mr="2i";break;case 35667:mr="2i";break;case 35672:mr="3i";break;case 35668:mr="3i";break;case 35673:mr="4i";break;case 35669:mr="4i"}pr(fn,".uniform",mr,"(",aa,",",w(Nr)?Array.prototype.slice.call(Nr):Nr,");")}continue}else Tn=Bn.append(Gt,pr)}else{if(!rn(on))continue;Tn=pr.def(_n.uniforms,"[",er.id(Nr),"]")}switch(mn===35678?pr("if(",Tn,"&&",Tn,'._reglType==="framebuffer"){',Tn,"=",Tn,".color[0];","}"):mn===35680&&pr("if(",Tn,"&&",Tn,'._reglType==="framebufferCube"){',Tn,"=",Tn,".color[0];","}"),Nr=1,mn){case 35678:case 35680:mn=pr.def(Tn,"._texture"),pr(fn,".uniform1i(",aa,",",mn,".bind());"),pr.exit(mn,".unbind();");continue;case 5124:case 35670:mr="1i";break;case 35667:case 35671:mr="2i",Nr=2;break;case 35668:case 35672:mr="3i",Nr=3;break;case 35669:case 35673:mr="4i",Nr=4;break;case 5126:mr="1f";break;case 35664:mr="2f",Nr=2;break;case 35665:mr="3f",Nr=3;break;case 35666:mr="4f",Nr=4;break;case 35674:mr="Matrix2fv";break;case 35675:mr="Matrix3fv";break;case 35676:mr="Matrix4fv"}if(mr.charAt(0)==="M"){pr(fn,".uniform",mr,"(",aa,",");var aa=Math.pow(mn-35674+2,2),Qn=Gt.global.def("new Float32Array(",aa,")");Array.isArray(Tn)?pr("false,(",o(aa,function(wa){return Qn+"["+wa+"]="+Tn[wa]}),",",Qn,")"):pr("false,(Array.isArray(",Tn,")||",Tn," instanceof Float32Array)?",Tn,":(",o(aa,function(wa){return Qn+"["+wa+"]="+Tn+"["+wa+"]"}),",",Qn,")"),pr(");")}else{if(1<Nr){for(var mn=[],sa=[],Bn=0;Bn<Nr;++Bn)Array.isArray(Tn)?sa.push(Tn[Bn]):sa.push(pr.def(Tn+"["+Bn+"]")),Mn&&mn.push(pr.def());Mn&&pr("if(!",Gt.batchId,"||",mn.map(function(ma,wa){return ma+"!=="+sa[wa]}).join("||"),"){",mn.map(function(ma,wa){return ma+"="+sa[wa]+";"}).join("")),pr(fn,".uniform",mr,"(",aa,",",sa.join(","),");")}else Mn&&(mn=pr.def(),pr("if(!",Gt.batchId,"||",mn,"!==",Tn,"){",mn,"=",Tn,";")),pr(fn,".uniform",mr,"(",aa,",",Tn,");");Mn&&pr("}")}}}function An(Gt,pr,an,dn){function rn(ca){var Ca=Nr[ca];return Ca?Ca.contextDep&&dn.contextDynamic||Ca.propDep?Ca.append(Gt,an):Ca.append(Gt,pr):pr.def(br,".",ca)}function Mn(){function ca(){an(sa,".drawElementsInstancedANGLE(",[Bn,Tn,ma,aa+"<<(("+ma+"-5121)>>1)",Qn],");")}function Ca(){an(sa,".drawArraysInstancedANGLE(",[Bn,aa,Tn,Qn],");")}mn&&mn!=="null"?wa?ca():(an("if(",mn,"){"),ca(),an("}else{"),Ca(),an("}")):Ca()}function _n(){function ca(){an(mr+".drawElements("+[Bn,Tn,ma,aa+"<<(("+ma+"-5121)>>1)"]+");")}function Ca(){an(mr+".drawArrays("+[Bn,aa,Tn]+");")}mn&&mn!=="null"?wa?ca():(an("if(",mn,"){"),ca(),an("}else{"),Ca(),an("}")):Ca()}var fn=Gt.shared,mr=fn.gl,br=fn.draw,Nr=dn.draw,mn=function(){var ca=Nr.elements,Ca=pr;return ca?((ca.contextDep&&dn.contextDynamic||ca.propDep)&&(Ca=an),ca=ca.append(Gt,Ca),Nr.elementsActive&&Ca("if("+ca+")"+mr+".bindBuffer(34963,"+ca+".buffer.buffer);")):(ca=Ca.def(),Ca(ca,"=",br,".","elements",";","if(",ca,"){",mr,".bindBuffer(",34963,",",ca,".buffer.buffer);}","else if(",fn.vao,".currentVAO){",ca,"=",Gt.shared.elements+".getElements("+fn.vao,".currentVAO.elements);",hn?"":"if("+ca+")"+mr+".bindBuffer(34963,"+ca+".buffer.buffer);","}")),ca}(),Bn=rn("primitive"),aa=rn("offset"),Tn=function(){var ca=Nr.count,Ca=pr;return ca?((ca.contextDep&&dn.contextDynamic||ca.propDep)&&(Ca=an),ca=ca.append(Gt,Ca)):ca=Ca.def(br,".","count"),ca}();if(typeof Tn=="number"){if(Tn===0)return}else an("if(",Tn,"){"),an.exit("}");var Qn,sa;Mr&&(Qn=rn("instances"),sa=Gt.instancing);var ma=mn+".type",wa=Nr.elements&&j(Nr.elements)&&!Nr.vaoActive;Mr&&(typeof Qn!="number"||0<=Qn)?typeof Qn=="string"?(an("if(",Qn,">0){"),Mn(),an("}else if(",Qn,"<0){"),_n(),an("}")):Mn():_n()}function vn(Gt,pr,an,dn,rn){return pr=Wt(),rn=pr.proc("body",rn),Mr&&(pr.instancing=rn.def(pr.shared.extensions,".angle_instanced_arrays")),Gt(pr,rn,an,dn),pr.compile().body}function Un(Gt,pr,an,dn){Ur(Gt,pr),an.useVAO?an.drawVAO?pr(Gt.shared.vao,".setVAO(",an.drawVAO.append(Gt,pr),");"):pr(Gt.shared.vao,".setVAO(",Gt.shared.vao,".targetVAO);"):(pr(Gt.shared.vao,".setVAO(null);"),Tr(Gt,pr,an,dn.attributes,function(){return!0})),Wr(Gt,pr,an,dn.uniforms,function(){return!0},!1),An(Gt,pr,pr,an)}function Ln(Gt,pr){var an=Gt.proc("draw",1);Ur(Gt,an),Dt(Gt,an,pr.context),Zt(Gt,an,pr.framebuffer),sr(Gt,an,pr),zr(Gt,an,pr.state),Lr(Gt,an,pr,!1,!0);var dn=pr.shader.progVar.append(Gt,an);if(an(Gt.shared.gl,".useProgram(",dn,".program);"),pr.shader.program)Un(Gt,an,pr,pr.shader.program);else{an(Gt.shared.vao,".setVAO(null);");var rn=Gt.global.def("{}"),Mn=an.def(dn,".id"),_n=an.def(rn,"[",Mn,"]");an(Gt.cond(_n).then(_n,".call(this,a0);").else(_n,"=",rn,"[",Mn,"]=",Gt.link(function(fn){return vn(Un,Gt,pr,fn,1)}),"(",dn,");",_n,".call(this,a0);"))}0<Object.keys(pr.state).length&&an(Gt.shared.current,".dirty=true;"),Gt.shared.vao&&an(Gt.shared.vao,".setVAO(null);")}function Zn(Gt,pr,an,dn){function rn(){return!0}Gt.batchId="a1",Ur(Gt,pr),Tr(Gt,pr,an,dn.attributes,rn),Wr(Gt,pr,an,dn.uniforms,rn,!1),An(Gt,pr,pr,an)}function Wn(Gt,pr,an,dn){function rn(mn){return mn.contextDep&&_n||mn.propDep}function Mn(mn){return!rn(mn)}Ur(Gt,pr);var _n=an.contextDep,fn=pr.def(),mr=pr.def();Gt.shared.props=mr,Gt.batchId=fn;var br=Gt.scope(),Nr=Gt.scope();pr(br.entry,"for(",fn,"=0;",fn,"<","a1",";++",fn,"){",mr,"=","a0","[",fn,"];",Nr,"}",br.exit),an.needsContext&&Dt(Gt,Nr,an.context),an.needsFramebuffer&&Zt(Gt,Nr,an.framebuffer),zr(Gt,Nr,an.state,rn),an.profile&&rn(an.profile)&&Lr(Gt,Nr,an,!1,!0),dn?(an.useVAO?an.drawVAO?rn(an.drawVAO)?Nr(Gt.shared.vao,".setVAO(",an.drawVAO.append(Gt,Nr),");"):br(Gt.shared.vao,".setVAO(",an.drawVAO.append(Gt,br),");"):br(Gt.shared.vao,".setVAO(",Gt.shared.vao,".targetVAO);"):(br(Gt.shared.vao,".setVAO(null);"),Tr(Gt,br,an,dn.attributes,Mn),Tr(Gt,Nr,an,dn.attributes,rn)),Wr(Gt,br,an,dn.uniforms,Mn,!1),Wr(Gt,Nr,an,dn.uniforms,rn,!0),An(Gt,br,Nr,an)):(pr=Gt.global.def("{}"),dn=an.shader.progVar.append(Gt,Nr),mr=Nr.def(dn,".id"),br=Nr.def(pr,"[",mr,"]"),Nr(Gt.shared.gl,".useProgram(",dn,".program);","if(!",br,"){",br,"=",pr,"[",mr,"]=",Gt.link(function(mn){return vn(Zn,Gt,an,mn,2)}),"(",dn,");}",br,".call(this,a0[",fn,"],",fn,");"))}function ya(Gt,pr){function an(br){return br.contextDep&&rn||br.propDep}var dn=Gt.proc("batch",2);Gt.batchId="0",Ur(Gt,dn);var rn=!1,Mn=!0;Object.keys(pr.context).forEach(function(br){rn=rn||pr.context[br].propDep}),rn||(Dt(Gt,dn,pr.context),Mn=!1);var _n=pr.framebuffer,fn=!1;if(_n?(_n.propDep?rn=fn=!0:_n.contextDep&&rn&&(fn=!0),fn||Zt(Gt,dn,_n)):Zt(Gt,dn,null),pr.state.viewport&&pr.state.viewport.propDep&&(rn=!0),sr(Gt,dn,pr),zr(Gt,dn,pr.state,function(br){return!an(br)}),pr.profile&&an(pr.profile)||Lr(Gt,dn,pr,!1,"a1"),pr.contextDep=rn,pr.needsContext=Mn,pr.needsFramebuffer=fn,Mn=pr.shader.progVar,Mn.contextDep&&rn||Mn.propDep)Wn(Gt,dn,pr,null);else if(Mn=Mn.append(Gt,dn),dn(Gt.shared.gl,".useProgram(",Mn,".program);"),pr.shader.program)Wn(Gt,dn,pr,pr.shader.program);else{dn(Gt.shared.vao,".setVAO(null);");var _n=Gt.global.def("{}"),fn=dn.def(Mn,".id"),mr=dn.def(_n,"[",fn,"]");dn(Gt.cond(mr).then(mr,".call(this,a0,a1);").else(mr,"=",_n,"[",fn,"]=",Gt.link(function(mn){return vn(Wn,Gt,pr,mn,2)}),"(",Mn,");",mr,".call(this,a0,a1);"))}0<Object.keys(pr.state).length&&dn(Gt.shared.current,".dirty=true;"),Gt.shared.vao&&dn(Gt.shared.vao,".setVAO(null);")}function ka(Gt,pr){function an(fn){var mr=pr.shader[fn];mr&&(mr=mr.append(Gt,dn),isNaN(mr)?dn.set(rn.shader,"."+fn,mr):dn.set(rn.shader,"."+fn,Gt.link(mr,{stable:!0})))}var dn=Gt.proc("scope",3);Gt.batchId="a2";var rn=Gt.shared,Mn=rn.current;if(Dt(Gt,dn,pr.context),pr.framebuffer&&pr.framebuffer.append(Gt,dn),q(Object.keys(pr.state)).forEach(function(fn){var mr=pr.state[fn],br=mr.append(Gt,dn);w(br)?br.forEach(function(Nr,mn){isNaN(Nr)?dn.set(Gt.next[fn],"["+mn+"]",Nr):dn.set(Gt.next[fn],"["+mn+"]",Gt.link(Nr,{stable:!0}))}):j(mr)?dn.set(rn.next,"."+fn,Gt.link(br,{stable:!0})):dn.set(rn.next,"."+fn,br)}),Lr(Gt,dn,pr,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(fn){var mr=pr.draw[fn];mr&&(mr=mr.append(Gt,dn),isNaN(mr)?dn.set(rn.draw,"."+fn,mr):dn.set(rn.draw,"."+fn,Gt.link(mr),{stable:!0}))}),Object.keys(pr.uniforms).forEach(function(fn){var mr=pr.uniforms[fn].append(Gt,dn);Array.isArray(mr)&&(mr="["+mr.map(function(br){return isNaN(br)?br:Gt.link(br,{stable:!0})})+"]"),dn.set(rn.uniforms,"["+Gt.link(er.id(fn),{stable:!0})+"]",mr)}),Object.keys(pr.attributes).forEach(function(fn){var mr=pr.attributes[fn].append(Gt,dn),br=Gt.scopeAttrib(fn);Object.keys(new $a).forEach(function(Nr){dn.set(br,"."+Nr,mr[Nr])})}),pr.scopeVAO){var _n=pr.scopeVAO.append(Gt,dn);isNaN(_n)?dn.set(rn.vao,".targetVAO",_n):dn.set(rn.vao,".targetVAO",Gt.link(_n,{stable:!0}))}an("vert"),an("frag"),0<Object.keys(pr.state).length&&(dn(Mn,".dirty=true;"),dn.exit(Mn,".dirty=true;")),dn("a1(",Gt.shared.context,",a0,",Gt.batchId,");")}function di(Gt){if(typeof Gt=="object"&&!w(Gt)){for(var pr=Object.keys(Gt),an=0;an<pr.length;++an)if(ue.isDynamic(Gt[pr[an]]))return!0;return!1}}function Xa(Gt,pr,an){function dn(mn,Bn){_n.forEach(function(aa){var Tn=rn[aa];ue.isDynamic(Tn)&&(Tn=mn.invoke(Bn,Tn),Bn(Nr,".",aa,"=",Tn,";"))})}var rn=pr.static[an];if(rn&&di(rn)){var Mn=Gt.global,_n=Object.keys(rn),fn=!1,mr=!1,br=!1,Nr=Gt.global.def("{}");_n.forEach(function(mn){var Bn=rn[mn];if(ue.isDynamic(Bn))typeof Bn=="function"&&(Bn=rn[mn]=ue.unbox(Bn)),mn=ie(Bn,null),fn=fn||mn.thisDep,br=br||mn.propDep,mr=mr||mn.contextDep;else{switch(Mn(Nr,".",mn,"="),typeof Bn){case"number":Mn(Bn);break;case"string":Mn('"',Bn,'"');break;case"object":Array.isArray(Bn)&&Mn("[",Bn.join(),"]");break;default:Mn(Gt.link(Bn))}Mn(";")}}),pr.dynamic[an]=new ue.DynamicVariable(4,{thisDep:fn,contextDep:mr,propDep:br,ref:Nr,append:dn}),delete pr.static[an]}}var $a=Mt.Record,Ka={add:32774,subtract:32778,"reverse subtract":32779};Kt.ext_blend_minmax&&(Ka.min=32775,Ka.max=32776);var Mr=Kt.angle_instanced_arrays,gn=Kt.webgl_draw_buffers,hn=Kt.oes_vertex_array_object,Sn={dirty:!0,profile:vt.profile},Jn={},ha=[],na={},Fn={};yt("dither",3024),yt("blend.enable",3042),Pt("blend.color","blendColor",[0,0,0,0]),Pt("blend.equation","blendEquationSeparate",[32774,32774]),Pt("blend.func","blendFuncSeparate",[1,0,1,0]),yt("depth.enable",2929,!0),Pt("depth.func","depthFunc",513),Pt("depth.range","depthRange",[0,1]),Pt("depth.mask","depthMask",!0),Pt("colorMask","colorMask",[!0,!0,!0,!0]),yt("cull.enable",2884),Pt("cull.face","cullFace",1029),Pt("frontFace","frontFace",2305),Pt("lineWidth","lineWidth",1),yt("polygonOffset.enable",32823),Pt("polygonOffset.offset","polygonOffset",[0,0]),yt("sample.alpha",32926),yt("sample.enable",32928),Pt("sample.coverage","sampleCoverage",[1,!1]),yt("stencil.enable",2960),Pt("stencil.mask","stencilMask",-1),Pt("stencil.func","stencilFunc",[519,0,-1]),Pt("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),Pt("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),yt("scissor.enable",3089),Pt("scissor.box","scissor",[0,0,ot.drawingBufferWidth,ot.drawingBufferHeight]),Pt("viewport","viewport",[0,0,ot.drawingBufferWidth,ot.drawingBufferHeight]);var Kn={gl:ot,context:Ee,strings:er,next:Jn,current:Sn,draw:Pe,elements:et,buffer:Ar,shader:Ut,attributes:Mt.state,vao:Mt,uniforms:ct,framebuffer:st,extensions:Kt,timer:it,isBufferArgs:H},Ya={primTypes:We,compareFuncs:Yt,blendFuncs:jt,blendEquations:Ka,stencilOps:or,glTypes:Le,orientationType:Gr};gn&&(Ya.backBuffer=[1029],Ya.drawBuffer=o(fr.maxDrawbuffers,function(Gt){return Gt===0?[0]:o(Gt,function(pr){return 36064+pr})}));var hi=0;return{next:Jn,current:Sn,procs:function(){var Gt=Wt(),pr=Gt.proc("poll"),an=Gt.proc("refresh"),dn=Gt.block();pr(dn),an(dn);var mr=Gt.shared,rn=mr.gl,Mn=mr.next,_n=mr.current;dn(_n,".dirty=false;"),Zt(Gt,pr),Zt(Gt,an,null,!0);var fn;Mr&&(fn=Gt.link(Mr)),Kt.oes_vertex_array_object&&an(Gt.link(Kt.oes_vertex_array_object),".bindVertexArrayOES(null);");var mr=an.def(mr.attributes),br=an.def(0),Nr=Gt.cond(br,".buffer");Nr.then(rn,".enableVertexAttribArray(i);",rn,".bindBuffer(",34962,",",br,".buffer.buffer);",rn,".vertexAttribPointer(i,",br,".size,",br,".type,",br,".normalized,",br,".stride,",br,".offset);").else(rn,".disableVertexAttribArray(i);",rn,".vertexAttrib4f(i,",br,".x,",br,".y,",br,".z,",br,".w);",br,".buffer=null;");var mn=Gt.link(fr.maxAttributes,{stable:!0});return an("for(var i=0;i<",mn,";++i){",br,"=",mr,"[i];",Nr,"}"),Mr&&an("for(var i=0;i<",mn,";++i){",fn,".vertexAttribDivisorANGLE(i,",mr,"[i].divisor);","}"),an(Gt.shared.vao,".currentVAO=null;",Gt.shared.vao,".setVAO(",Gt.shared.vao,".targetVAO);"),Object.keys(na).forEach(function(Bn){var aa=na[Bn],Tn=dn.def(Mn,".",Bn),Qn=Gt.block();Qn("if(",Tn,"){",rn,".enable(",aa,")}else{",rn,".disable(",aa,")}",_n,".",Bn,"=",Tn,";"),an(Qn),pr("if(",Tn,"!==",_n,".",Bn,"){",Qn,"}")}),Object.keys(Fn).forEach(function(Bn){var aa=Fn[Bn],Tn=Sn[Bn],Qn,sa,ma=Gt.block();ma(rn,".",aa,"("),w(Tn)?(aa=Tn.length,Qn=Gt.global.def(Mn,".",Bn),sa=Gt.global.def(_n,".",Bn),ma(o(aa,function(wa){return Qn+"["+wa+"]"}),");",o(aa,function(wa){return sa+"["+wa+"]="+Qn+"["+wa+"];"}).join("")),pr("if(",o(aa,function(wa){return Qn+"["+wa+"]!=="+sa+"["+wa+"]"}).join("||"),"){",ma,"}")):(Qn=dn.def(Mn,".",Bn),sa=dn.def(_n,".",Bn),ma(Qn,");",_n,".",Bn,"=",Qn,";"),pr("if(",Qn,"!==",sa,"){",ma,"}")),an(ma)}),Gt.compile()}(),compile:function(Gt,pr,an,dn,rn){var Mn=Wt();Mn.stats=Mn.link(rn),Object.keys(pr.static).forEach(function(fn){Xa(Mn,pr,fn)}),Vt.forEach(function(fn){Xa(Mn,Gt,fn)});var _n=nt(Gt,pr,an,dn,Mn);return _n.shader.program&&(_n.shader.program.attributes.sort(function(fn,mr){return fn.name<mr.name?-1:1}),_n.shader.program.uniforms.sort(function(fn,mr){return fn.name<mr.name?-1:1})),Ln(Mn,_n),ka(Mn,_n),ya(Mn,_n),se(Mn.compile(),{destroy:function(){_n.shader.program.destroy()}})}}}function ae(ot,er){for(var Kt=0;Kt<ot.length;++Kt)if(ot[Kt]===er)return Kt;return-1}var se=function(ot,er){for(var Kt=Object.keys(er),fr=0;fr<Kt.length;++fr)ot[Kt[fr]]=er[Kt[fr]];return ot},_e=0,ue={DynamicVariable:m,define:function(ot,er){return new m(ot,A(er+""))},isDynamic:function(ot){return typeof ot=="function"&&!ot._reglType||ot instanceof m},unbox:T,accessor:A},ye={next:typeof requestAnimationFrame=="function"?function(ot){return requestAnimationFrame(ot)}:function(ot){return setTimeout(ot,16)},cancel:typeof cancelAnimationFrame=="function"?function(ot){return cancelAnimationFrame(ot)}:clearTimeout},xe=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date},me=g();me.zero=g();var be=function(ot,er){var Kt=1;er.ext_texture_filter_anisotropic&&(Kt=ot.getParameter(34047));var fr=1,Ar=1;er.webgl_draw_buffers&&(fr=ot.getParameter(34852),Ar=ot.getParameter(36063));var et=!!er.oes_texture_float;if(et){et=ot.createTexture(),ot.bindTexture(3553,et),ot.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var $e=ot.createFramebuffer();if(ot.bindFramebuffer(36160,$e),ot.framebufferTexture2D(36160,36064,3553,et,0),ot.bindTexture(3553,null),ot.checkFramebufferStatus(36160)!==36053)et=!1;else{ot.viewport(0,0,1,1),ot.clearColor(1,0,0,1),ot.clear(16384);var st=me.allocType(5126,4);ot.readPixels(0,0,1,1,6408,5126,st),ot.getError()?et=!1:(ot.deleteFramebuffer($e),ot.deleteTexture(et),et=st[0]===1),me.freeType(st)}}return st=!0,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(st=ot.createTexture(),$e=me.allocType(5121,36),ot.activeTexture(33984),ot.bindTexture(34067,st),ot.texImage2D(34069,0,6408,3,3,0,6408,5121,$e),me.freeType($e),ot.bindTexture(34067,null),ot.deleteTexture(st),st=!ot.getError()),{colorBits:[ot.getParameter(3410),ot.getParameter(3411),ot.getParameter(3412),ot.getParameter(3413)],depthBits:ot.getParameter(3414),stencilBits:ot.getParameter(3415),subpixelBits:ot.getParameter(3408),extensions:Object.keys(er).filter(function(ct){return!!er[ct]}),maxAnisotropic:Kt,maxDrawbuffers:fr,maxColorAttachments:Ar,pointSizeDims:ot.getParameter(33901),lineWidthDims:ot.getParameter(33902),maxViewportDims:ot.getParameter(3386),maxCombinedTextureUnits:ot.getParameter(35661),maxCubeMapSize:ot.getParameter(34076),maxRenderbufferSize:ot.getParameter(34024),maxTextureUnits:ot.getParameter(34930),maxTextureSize:ot.getParameter(3379),maxAttributes:ot.getParameter(34921),maxVertexUniforms:ot.getParameter(36347),maxVertexTextureUnits:ot.getParameter(35660),maxVaryingVectors:ot.getParameter(36348),maxFragmentUniforms:ot.getParameter(36349),glsl:ot.getParameter(35724),renderer:ot.getParameter(7937),vendor:ot.getParameter(7936),version:ot.getParameter(7938),readFloat:et,npotTextureCube:st}},ke=function(ot){return ot instanceof Uint8Array||ot instanceof Uint16Array||ot instanceof Uint32Array||ot instanceof Int8Array||ot instanceof Int16Array||ot instanceof Int32Array||ot instanceof Float32Array||ot instanceof Float64Array||ot instanceof Uint8ClampedArray},De=function(ot){return Object.keys(ot).map(function(er){return ot[er]})},Ve={shape:function(ot){for(var er=[];ot.length;ot=ot[0])er.push(ot.length);return er},flatten:function(ot,er,Kt,fr){var Ar=1;if(er.length)for(var et=0;et<er.length;++et)Ar*=er[et];else Ar=0;switch(Kt=fr||me.allocType(Kt,Ar),er.length){case 0:break;case 1:for(fr=er[0],er=0;er<fr;++er)Kt[er]=ot[er];break;case 2:for(fr=er[0],er=er[1],et=Ar=0;et<fr;++et)for(var $e=ot[et],st=0;st<er;++st)Kt[Ar++]=$e[st];break;case 3:f(ot,er[0],er[1],er[2],Kt,0);break;default:y(ot,er,0,Kt,0)}return Kt}},Ae={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Le={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},je={dynamic:35048,stream:35040,static:35044},Ye=Ve.flatten,ze=Ve.shape,Ie=[];Ie[5120]=1,Ie[5122]=2,Ie[5124]=4,Ie[5121]=1,Ie[5123]=2,Ie[5125]=4,Ie[5126]=4;var We={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},pt=new Float32Array(1),Ft=new Uint32Array(pt.buffer),Qt=[9984,9986,9985,9987],zt=[0,6409,6410,6407,6408],Et={};Et[6409]=Et[6406]=Et[6402]=1,Et[34041]=Et[6410]=2,Et[6407]=Et[35904]=3,Et[6408]=Et[35906]=4;var Xt=h("HTMLCanvasElement"),Nt=h("OffscreenCanvas"),Ct=h("CanvasRenderingContext2D"),Xe=h("ImageBitmap"),at=h("HTMLImageElement"),Ge=h("HTMLVideoElement"),Se=Object.keys(Ae).concat([Xt,Nt,Ct,Xe,at,Ge]),He=[];He[5121]=1,He[5126]=4,He[36193]=2,He[5123]=2,He[5125]=4;var Ke=[];Ke[32854]=2,Ke[32855]=2,Ke[36194]=2,Ke[34041]=4,Ke[33776]=.5,Ke[33777]=.5,Ke[33778]=1,Ke[33779]=1,Ke[35986]=.5,Ke[35987]=1,Ke[34798]=1,Ke[35840]=.5,Ke[35841]=.25,Ke[35842]=.5,Ke[35843]=.25,Ke[36196]=.5;var qe=[];qe[32854]=2,qe[32855]=2,qe[36194]=2,qe[33189]=2,qe[36168]=1,qe[34041]=4,qe[35907]=4,qe[34836]=16,qe[34842]=8,qe[34843]=6;var Tt=function(ot,er,Kt,fr,Ar){function et(Pe){this.id=Mt++,this.refCount=1,this.renderbuffer=Pe,this.format=32854,this.height=this.width=0,Ar.profile&&(this.stats={size:0})}function $e(Pe){var Ee=Pe.renderbuffer;ot.bindRenderbuffer(36161,null),ot.deleteRenderbuffer(Ee),Pe.renderbuffer=null,Pe.refCount=0,delete Ut[Pe.id],fr.renderbufferCount--}var st={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};er.ext_srgb&&(st.srgba=35907),er.ext_color_buffer_half_float&&(st.rgba16f=34842,st.rgb16f=34843),er.webgl_color_buffer_float&&(st.rgba32f=34836);var ct=[];Object.keys(st).forEach(function(Pe){ct[st[Pe]]=Pe});var Mt=0,Ut={};return et.prototype.decRef=function(){0>=--this.refCount&&$e(this)},Ar.profile&&(fr.getTotalRenderbufferSize=function(){var Pe=0;return Object.keys(Ut).forEach(function(Ee){Pe+=Ut[Ee].stats.size}),Pe}),{create:function(Pe,Ee){function it(vt,St){var yt=0,Pt=0,Wt=32854;if(typeof vt=="object"&&vt?("shape"in vt?(Pt=vt.shape,yt=Pt[0]|0,Pt=Pt[1]|0):("radius"in vt&&(yt=Pt=vt.radius|0),"width"in vt&&(yt=vt.width|0),"height"in vt&&(Pt=vt.height|0)),"format"in vt&&(Wt=st[vt.format])):typeof vt=="number"?(yt=vt|0,Pt=typeof St=="number"?St|0:yt):vt||(yt=Pt=1),yt!==ut.width||Pt!==ut.height||Wt!==ut.format)return it.width=ut.width=yt,it.height=ut.height=Pt,ut.format=Wt,ot.bindRenderbuffer(36161,ut.renderbuffer),ot.renderbufferStorage(36161,Wt,yt,Pt),Ar.profile&&(ut.stats.size=qe[ut.format]*ut.width*ut.height),it.format=ct[ut.format],it}var ut=new et(ot.createRenderbuffer());return Ut[ut.id]=ut,fr.renderbufferCount++,it(Pe,Ee),it.resize=function(vt,St){var yt=vt|0,Pt=St|0||yt;return yt===ut.width&&Pt===ut.height||(it.width=ut.width=yt,it.height=ut.height=Pt,ot.bindRenderbuffer(36161,ut.renderbuffer),ot.renderbufferStorage(36161,ut.format,yt,Pt),Ar.profile&&(ut.stats.size=qe[ut.format]*ut.width*ut.height)),it},it._reglType="renderbuffer",it._renderbuffer=ut,Ar.profile&&(it.stats=ut.stats),it.destroy=function(){ut.decRef()},it},clear:function(){De(Ut).forEach($e)},restore:function(){De(Ut).forEach(function(Pe){Pe.renderbuffer=ot.createRenderbuffer(),ot.bindRenderbuffer(36161,Pe.renderbuffer),ot.renderbufferStorage(36161,Pe.format,Pe.width,Pe.height)}),ot.bindRenderbuffer(36161,null)}}},mt=[];mt[6408]=4,mt[6407]=3;var At=[];At[5121]=1,At[5126]=4,At[36193]=2;var Ht=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],It=["x","y","z","w"],Vt="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),jt={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Yt={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},or={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Gr={cw:2304,ccw:2305},on=new re(!1,!1,!1,function(){}),Jr=function(ot,er){function Kt(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function fr(Ut,Pe,Ee){var it=$e.pop()||new Kt;it.startQueryIndex=Ut,it.endQueryIndex=Pe,it.sum=0,it.stats=Ee,st.push(it)}if(!er.ext_disjoint_timer_query)return null;var Ar=[],et=[],$e=[],st=[],ct=[],Mt=[];return{beginQuery:function(Ut){var Pe=Ar.pop()||er.ext_disjoint_timer_query.createQueryEXT();er.ext_disjoint_timer_query.beginQueryEXT(35007,Pe),et.push(Pe),fr(et.length-1,et.length,Ut)},endQuery:function(){er.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:fr,update:function(){var Ut,Pe;if(Ut=et.length,Ut!==0){Mt.length=Math.max(Mt.length,Ut+1),ct.length=Math.max(ct.length,Ut+1),ct[0]=0;var Ee=Mt[0]=0;for(Pe=Ut=0;Pe<et.length;++Pe){var it=et[Pe];er.ext_disjoint_timer_query.getQueryObjectEXT(it,34919)?(Ee+=er.ext_disjoint_timer_query.getQueryObjectEXT(it,34918),Ar.push(it)):et[Ut++]=it,ct[Pe+1]=Ee,Mt[Pe+1]=Ut}for(et.length=Ut,Pe=Ut=0;Pe<st.length;++Pe){var Ee=st[Pe],ut=Ee.startQueryIndex,it=Ee.endQueryIndex;Ee.sum+=ct[it]-ct[ut],ut=Mt[ut],it=Mt[it],it===ut?(Ee.stats.gpuTime+=Ee.sum/1e6,$e.push(Ee)):(Ee.startQueryIndex=ut,Ee.endQueryIndex=it,st[Ut++]=Ee)}st.length=Ut}},getNumPendingQueries:function(){return et.length},clear:function(){Ar.push.apply(Ar,et);for(var Ut=0;Ut<Ar.length;Ut++)er.ext_disjoint_timer_query.deleteQueryEXT(Ar[Ut]);et.length=0,Ar.length=0},restore:function(){et.length=0,Ar.length=0}}};return function(ot){function er(){if(Lr.length===0)Wt&&Wt.update(),vn=null;else{vn=ye.next(er),Ut();for(var Ln=Lr.length-1;0<=Ln;--Ln){var Zn=Lr[Ln];Zn&&Zn(wr,null,0)}it.flush(),Wt&&Wt.update()}}function Kt(){!vn&&0<Lr.length&&(vn=ye.next(er))}function fr(){vn&&(ye.cancel(er),vn=null)}function Ar(Ln){Ln.preventDefault(),fr(),Tr.forEach(function(Zn){Zn()})}function et(Ln){it.getError(),vt.restore(),Br.restore(),ir.restore(),Cr.restore(),nt.restore(),Dt.restore(),Rr.restore(),Wt&&Wt.restore(),Zt.procs.refresh(),Kt(),Wr.forEach(function(Zn){Zn()})}function $e(Ln){function Zn(Sn,Jn){var ha={},na={};return Object.keys(Sn).forEach(function(Fn){var Kn=Sn[Fn];if(ue.isDynamic(Kn))na[Fn]=ue.unbox(Kn,Fn);else{if(Jn&&Array.isArray(Kn)){for(var Ya=0;Ya<Kn.length;++Ya)if(ue.isDynamic(Kn[Ya])){na[Fn]=ue.unbox(Kn,Fn);return}}ha[Fn]=Kn}}),{dynamic:na,static:ha}}function Wn(Sn){for(;hn.length<Sn;)hn.push(null);return hn}var ya=Zn(Ln.context||{},!0),ka=Zn(Ln.uniforms||{},!0),di=Zn(Ln.attributes||{},!1);Ln=Zn(function(Sn){function Jn(na){if(na in ha){var Fn=ha[na];delete ha[na],Object.keys(Fn).forEach(function(Kn){ha[na+"."+Kn]=Fn[Kn]})}}var ha=se({},Sn);return delete ha.uniforms,delete ha.attributes,delete ha.context,delete ha.vao,"stencil"in ha&&ha.stencil.op&&(ha.stencil.opBack=ha.stencil.opFront=ha.stencil.op,delete ha.stencil.op),Jn("blend"),Jn("depth"),Jn("cull"),Jn("stencil"),Jn("polygonOffset"),Jn("scissor"),Jn("sample"),"vao"in Sn&&(ha.vao=Sn.vao),ha}(Ln),!1);var Xa={gpuTime:0,cpuTime:0,count:0},$a=Zt.compile(Ln,di,ka,ya,Xa),Ka=$a.draw,Mr=$a.batch,gn=$a.scope,hn=[];return se(function(Sn,Jn){var ha;if(typeof Sn=="function")return gn.call(this,null,Sn,0);if(typeof Jn=="function")if(typeof Sn=="number")for(ha=0;ha<Sn;++ha)gn.call(this,null,Jn,ha);else if(Array.isArray(Sn))for(ha=0;ha<Sn.length;++ha)gn.call(this,Sn[ha],Jn,ha);else return gn.call(this,Sn,Jn,0);else if(typeof Sn=="number"){if(0<Sn)return Mr.call(this,Wn(Sn|0),Sn|0)}else if(Array.isArray(Sn)){if(Sn.length)return Mr.call(this,Sn,Sn.length)}else return Ka.call(this,Sn)},{stats:Xa,destroy:function(){$a.destroy()}})}function st(Ln,Zn){var Wn=0;Zt.procs.poll();var ya=Zn.color;ya&&(it.clearColor(+ya[0]||0,+ya[1]||0,+ya[2]||0,+ya[3]||0),Wn|=16384),"depth"in Zn&&(it.clearDepth(+Zn.depth),Wn|=256),"stencil"in Zn&&(it.clearStencil(Zn.stencil|0),Wn|=1024),it.clear(Wn)}function ct(Ln){return Lr.push(Ln),Kt(),{cancel:function(){function Zn(){var ya=ae(Lr,Zn);Lr[ya]=Lr[Lr.length-1],--Lr.length,0>=Lr.length&&fr()}var Wn=ae(Lr,Ln);Lr[Wn]=Zn}}}function Mt(){var Ln=zr.viewport,Zn=zr.scissor_box;Ln[0]=Ln[1]=Zn[0]=Zn[1]=0,wr.viewportWidth=wr.framebufferWidth=wr.drawingBufferWidth=Ln[2]=Zn[2]=it.drawingBufferWidth,wr.viewportHeight=wr.framebufferHeight=wr.drawingBufferHeight=Ln[3]=Zn[3]=it.drawingBufferHeight}function Ut(){wr.tick+=1,wr.time=Ee(),Mt(),Zt.procs.poll()}function Pe(){Cr.refresh(),Mt(),Zt.procs.refresh(),Wt&&Wt.update()}function Ee(){return(xe()-ar)/1e3}if(ot=v(ot),!ot)return null;var it=ot.gl,ut=it.getContextAttributes();it.isContextLost();var vt=s(it,ot);if(!vt)return null;var sr=e(),St={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},yt=ot.cachedCode||{},Pt=vt.extensions,Wt=Jr(it,Pt),ar=xe(),Sr=it.drawingBufferWidth,kr=it.drawingBufferHeight,wr={tick:0,time:0,viewportWidth:Sr,viewportHeight:kr,framebufferWidth:Sr,framebufferHeight:kr,drawingBufferWidth:Sr,drawingBufferHeight:kr,pixelRatio:ot.pixelRatio},Sr={elements:null,primitive:4,count:-1,offset:0,instances:-1},Zr=be(it,Pt),ir=M(it,St,ot,function(Ln){return Rr.destroyBuffer(Ln)}),xr=_(it,Pt,ir,St),Rr=z(it,Pt,Zr,St,ir,xr,Sr),Br=G(it,sr,St,ot),Cr=D(it,Pt,Zr,function(){Zt.procs.poll()},wr,St,ot),nt=Tt(it,Pt,Zr,St,ot),Dt=R(it,Pt,Zr,Cr,nt,St),Zt=oe(it,sr,Pt,Zr,ir,xr,Cr,Dt,{},Rr,Br,Sr,wr,Wt,yt,ot),sr=Y(it,Dt,Zt.procs.poll,wr),zr=Zt.next,Ur=it.canvas,Lr=[],Tr=[],Wr=[],An=[ot.onDestroy],vn=null;Ur&&(Ur.addEventListener("webglcontextlost",Ar,!1),Ur.addEventListener("webglcontextrestored",et,!1));var Un=Dt.setFBO=$e({framebuffer:ue.define.call(null,1,"framebuffer")});return Pe(),ut=se($e,{clear:function(Ln){if("framebuffer"in Ln)if(Ln.framebuffer&&Ln.framebuffer_reglType==="framebufferCube")for(var Zn=0;6>Zn;++Zn)Un(se({framebuffer:Ln.framebuffer.faces[Zn]},Ln),st);else Un(Ln,st);else st(null,Ln)},prop:ue.define.bind(null,1),context:ue.define.bind(null,2),this:ue.define.bind(null,3),draw:$e({}),buffer:function(Ln){return ir.create(Ln,34962,!1,!1)},elements:function(Ln){return xr.create(Ln,!1)},texture:Cr.create2D,cube:Cr.createCube,renderbuffer:nt.create,framebuffer:Dt.create,framebufferCube:Dt.createCube,vao:Rr.createVAO,attributes:ut,frame:ct,on:function(Ln,Zn){var Wn;switch(Ln){case"frame":return ct(Zn);case"lost":Wn=Tr;break;case"restore":Wn=Wr;break;case"destroy":Wn=An}return Wn.push(Zn),{cancel:function(){for(var ya=0;ya<Wn.length;++ya)if(Wn[ya]===Zn){Wn[ya]=Wn[Wn.length-1],Wn.pop();break}}}},limits:Zr,hasExtension:function(Ln){return 0<=Zr.extensions.indexOf(Ln.toLowerCase())},read:sr,destroy:function(){Lr.length=0,fr(),Ur&&(Ur.removeEventListener("webglcontextlost",Ar),Ur.removeEventListener("webglcontextrestored",et)),Br.clear(),Dt.clear(),nt.clear(),Rr.clear(),Cr.clear(),xr.clear(),ir.clear(),Wt&&Wt.clear(),An.forEach(function(Ln){Ln()})},_gl:it,_refresh:Pe,poll:function(){Ut(),Wt&&Wt.update()},now:Ee,stats:St,getCachedCode:function(){return yt},preloadCachedCode:function(Ln){Object.entries(Ln).forEach(function(Zn){yt[Zn[0]]=Zn[1]})}}),ot.onDone(null,ut),ut}})},{}],285:[function(t,B,V){var m=t("buffer"),c=m.Buffer;function A(e,a){for(var i in e)a[i]=e[i]}c.from&&c.alloc&&c.allocUnsafe&&c.allocUnsafeSlow?B.exports=m:(A(m,V),V.Buffer=T);function T(e,a,i){return c(e,a,i)}T.prototype=Object.create(c.prototype),A(c,T),T.from=function(e,a,i){if(typeof e=="number")throw new TypeError("Argument must not be a number");return c(e,a,i)},T.alloc=function(e,a,i){if(typeof e!="number")throw new TypeError("Argument must be a number");var n=c(e);return a!==void 0?typeof i=="string"?n.fill(a,i):n.fill(a):n.fill(0),n},T.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return c(e)},T.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return m.SlowBuffer(e)}},{buffer:85}],286:[function(t,B,V){B.exports=A;var m=t("events").EventEmitter,c=t("inherits");c(A,m),A.Readable=t("readable-stream/lib/_stream_readable.js"),A.Writable=t("readable-stream/lib/_stream_writable.js"),A.Duplex=t("readable-stream/lib/_stream_duplex.js"),A.Transform=t("readable-stream/lib/_stream_transform.js"),A.PassThrough=t("readable-stream/lib/_stream_passthrough.js"),A.finished=t("readable-stream/lib/internal/streams/end-of-stream.js"),A.pipeline=t("readable-stream/lib/internal/streams/pipeline.js"),A.Stream=A;function A(){m.call(this)}A.prototype.pipe=function(T,e){var a=this;function i(g){T.writable&&T.write(g)===!1&&a.pause&&a.pause()}a.on("data",i);function n(){a.readable&&a.resume&&a.resume()}T.on("drain",n),!T._isStdio&&(!e||e.end!==!1)&&(a.on("end",v),a.on("close",s));var r=!1;function v(){r||(r=!0,T.end())}function s(){r||(r=!0,typeof T.destroy=="function"&&T.destroy())}function o(g){if(b(),m.listenerCount(this,"error")===0)throw g}a.on("error",o),T.on("error",o);function b(){a.removeListener("data",i),T.removeListener("drain",n),a.removeListener("end",v),a.removeListener("close",s),a.removeListener("error",o),T.removeListener("error",o),a.removeListener("end",b),a.removeListener("close",b),T.removeListener("close",b)}return a.on("end",b),a.on("close",b),T.on("close",b),T.emit("pipe",a),T}},{events:84,inherits:231,"readable-stream/lib/_stream_duplex.js":288,"readable-stream/lib/_stream_passthrough.js":289,"readable-stream/lib/_stream_readable.js":290,"readable-stream/lib/_stream_transform.js":291,"readable-stream/lib/_stream_writable.js":292,"readable-stream/lib/internal/streams/end-of-stream.js":296,"readable-stream/lib/internal/streams/pipeline.js":298}],287:[function(t,B,V){function m(n,r){n.prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r}var c={};function A(n,r,v){v||(v=Error);function s(b,g,d){return typeof r=="string"?r:r(b,g,d)}var o=function(b){m(g,b);function g(d,f,y){return b.call(this,s(d,f,y))||this}return g}(v);o.prototype.name=v.name,o.prototype.code=n,c[n]=o}function T(n,r){if(Array.isArray(n)){var v=n.length;return n=n.map(function(s){return String(s)}),v>2?"one of ".concat(r," ").concat(n.slice(0,v-1).join(", "),", or ")+n[v-1]:v===2?"one of ".concat(r," ").concat(n[0]," or ").concat(n[1]):"of ".concat(r," ").concat(n[0])}else return"of ".concat(r," ").concat(String(n))}function e(n,r,v){return n.substr(!v||v<0?0:+v,r.length)===r}function a(n,r,v){return(v===void 0||v>n.length)&&(v=n.length),n.substring(v-r.length,v)===r}function i(n,r,v){return typeof v!="number"&&(v=0),v+r.length>n.length?!1:n.indexOf(r,v)!==-1}A("ERR_INVALID_OPT_VALUE",function(n,r){return'The value "'+r+'" is invalid for option "'+n+'"'},TypeError),A("ERR_INVALID_ARG_TYPE",function(n,r,v){var s;typeof r=="string"&&e(r,"not ")?(s="must not be",r=r.replace(/^not /,"")):s="must be";var o;if(a(n," argument"))o="The ".concat(n," ").concat(s," ").concat(T(r,"type"));else{var b=i(n,".")?"property":"argument";o='The "'.concat(n,'" ').concat(b," ").concat(s," ").concat(T(r,"type"))}return o+=". Received type ".concat(typeof v),o},TypeError),A("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),A("ERR_METHOD_NOT_IMPLEMENTED",function(n){return"The "+n+" method is not implemented"}),A("ERR_STREAM_PREMATURE_CLOSE","Premature close"),A("ERR_STREAM_DESTROYED",function(n){return"Cannot call "+n+" after a stream was destroyed"}),A("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),A("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),A("ERR_STREAM_WRITE_AFTER_END","write after end"),A("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),A("ERR_UNKNOWN_ENCODING",function(n){return"Unknown encoding: "+n},TypeError),A("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),B.exports.codes=c},{}],288:[function(t,B,V){(function(m){(function(){var c=Object.keys||function(s){var o=[];for(var b in s)o.push(b);return o};B.exports=n;var A=t("./_stream_readable"),T=t("./_stream_writable");t("inherits")(n,A);for(var e=c(T.prototype),a=0;a<e.length;a++){var i=e[a];n.prototype[i]||(n.prototype[i]=T.prototype[i])}function n(s){if(!(this instanceof n))return new n(s);A.call(this,s),T.call(this,s),this.allowHalfOpen=!0,s&&(s.readable===!1&&(this.readable=!1),s.writable===!1&&(this.writable=!1),s.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",r)))}Object.defineProperty(n.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(n.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(n.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function r(){this._writableState.ended||m.nextTick(v,this)}function v(s){s.end()}Object.defineProperty(n.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(o){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=o,this._writableState.destroyed=o)}})}).call(this)}).call(this,t("_process"))},{"./_stream_readable":290,"./_stream_writable":292,_process:278,inherits:231}],289:[function(t,B,V){B.exports=c;var m=t("./_stream_transform");t("inherits")(c,m);function c(A){if(!(this instanceof c))return new c(A);m.call(this,A)}c.prototype._transform=function(A,T,e){e(null,A)}},{"./_stream_transform":291,inherits:231}],290:[function(t,B,V){(function(m,c){(function(){B.exports=E;var A;E.ReadableState=S,t("events").EventEmitter;var T=function(ie,oe){return ie.listeners(oe).length},e=t("./internal/streams/stream"),a=t("buffer").Buffer,i=c.Uint8Array||function(){};function n($){return a.from($)}function r($){return a.isBuffer($)||$ instanceof i}var v=t("util"),s;v&&v.debuglog?s=v.debuglog("stream"):s=function(){};var o=t("./internal/streams/buffer_list"),b=t("./internal/streams/destroy"),g=t("./internal/streams/state"),d=g.getHighWaterMark,f=t("../errors").codes,y=f.ERR_INVALID_ARG_TYPE,l=f.ERR_STREAM_PUSH_AFTER_EOF,x=f.ERR_METHOD_NOT_IMPLEMENTED,u=f.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,M,_,p;t("inherits")(E,e);var w=b.errorOrDestroy,h=["error","close","destroy","pause","resume"];function L($,ie,oe){if(typeof $.prependListener=="function")return $.prependListener(ie,oe);!$._events||!$._events[ie]?$.on(ie,oe):Array.isArray($._events[ie])?$._events[ie].unshift(oe):$._events[ie]=[oe,$._events[ie]]}function S($,ie,oe){A=A||t("./_stream_duplex"),$=$||{},typeof oe!="boolean"&&(oe=ie instanceof A),this.objectMode=!!$.objectMode,oe&&(this.objectMode=this.objectMode||!!$.readableObjectMode),this.highWaterMark=d(this,$,"readableHighWaterMark",oe),this.buffer=new o,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=$.emitClose!==!1,this.autoDestroy=!!$.autoDestroy,this.destroyed=!1,this.defaultEncoding=$.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,$.encoding&&(M||(M=t("string_decoder/").StringDecoder),this.decoder=new M($.encoding),this.encoding=$.encoding)}function E($){if(A=A||t("./_stream_duplex"),!(this instanceof E))return new E($);var ie=this instanceof A;this._readableState=new S($,this,ie),this.readable=!0,$&&(typeof $.read=="function"&&(this._read=$.read),typeof $.destroy=="function"&&(this._destroy=$.destroy)),e.call(this)}Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(ie){!this._readableState||(this._readableState.destroyed=ie)}}),E.prototype.destroy=b.destroy,E.prototype._undestroy=b.undestroy,E.prototype._destroy=function($,ie){ie($)},E.prototype.push=function($,ie){var oe=this._readableState,ae;return oe.objectMode?ae=!0:typeof $=="string"&&(ie=ie||oe.defaultEncoding,ie!==oe.encoding&&($=a.from($,ie),ie=""),ae=!0),P(this,$,ie,!1,ae)},E.prototype.unshift=function($){return P(this,$,null,!0,!1)};function P($,ie,oe,ae,se){s("readableAddChunk",ie);var _e=$._readableState;if(ie===null)_e.reading=!1,z($,_e);else{var ue;if(se||(ue=I(_e,ie)),ue)w($,ue);else if(_e.objectMode||ie&&ie.length>0)if(typeof ie!="string"&&!_e.objectMode&&Object.getPrototypeOf(ie)!==a.prototype&&(ie=n(ie)),ae)_e.endEmitted?w($,new u):F($,_e,ie,!0);else if(_e.ended)w($,new l);else{if(_e.destroyed)return!1;_e.reading=!1,_e.decoder&&!oe?(ie=_e.decoder.write(ie),_e.objectMode||ie.length!==0?F($,_e,ie,!1):ee($,_e)):F($,_e,ie,!1)}else ae||(_e.reading=!1,ee($,_e))}return!_e.ended&&(_e.length<_e.highWaterMark||_e.length===0)}function F($,ie,oe,ae){ie.flowing&&ie.length===0&&!ie.sync?(ie.awaitDrain=0,$.emit("data",oe)):(ie.length+=ie.objectMode?1:oe.length,ae?ie.buffer.unshift(oe):ie.buffer.push(oe),ie.needReadable&&G($)),ee($,ie)}function I($,ie){var oe;return!r(ie)&&typeof ie!="string"&&ie!==void 0&&!$.objectMode&&(oe=new y("chunk",["string","Buffer","Uint8Array"],ie)),oe}E.prototype.isPaused=function(){return this._readableState.flowing===!1},E.prototype.setEncoding=function($){M||(M=t("string_decoder/").StringDecoder);var ie=new M($);this._readableState.decoder=ie,this._readableState.encoding=this._readableState.decoder.encoding;for(var oe=this._readableState.buffer.head,ae="";oe!==null;)ae+=ie.write(oe.data),oe=oe.next;return this._readableState.buffer.clear(),ae!==""&&this._readableState.buffer.push(ae),this._readableState.length=ae.length,this};var D=1073741824;function R($){return $>=D?$=D:($--,$|=$>>>1,$|=$>>>2,$|=$>>>4,$|=$>>>8,$|=$>>>16,$++),$}function N($,ie){return $<=0||ie.length===0&&ie.ended?0:ie.objectMode?1:$!==$?ie.flowing&&ie.length?ie.buffer.head.data.length:ie.length:($>ie.highWaterMark&&(ie.highWaterMark=R($)),$<=ie.length?$:ie.ended?ie.length:(ie.needReadable=!0,0))}E.prototype.read=function($){s("read",$),$=parseInt($,10);var ie=this._readableState,oe=$;if($!==0&&(ie.emittedReadable=!1),$===0&&ie.needReadable&&((ie.highWaterMark!==0?ie.length>=ie.highWaterMark:ie.length>0)||ie.ended))return s("read: emitReadable",ie.length,ie.ended),ie.length===0&&ie.ended?q(this):G(this),null;if($=N($,ie),$===0&&ie.ended)return ie.length===0&&q(this),null;var ae=ie.needReadable;s("need readable",ae),(ie.length===0||ie.length-$<ie.highWaterMark)&&(ae=!0,s("length less than watermark",ae)),ie.ended||ie.reading?(ae=!1,s("reading or ended",ae)):ae&&(s("do read"),ie.reading=!0,ie.sync=!0,ie.length===0&&(ie.needReadable=!0),this._read(ie.highWaterMark),ie.sync=!1,ie.reading||($=N(oe,ie)));var se;return $>0?se=H($,ie):se=null,se===null?(ie.needReadable=ie.length<=ie.highWaterMark,$=0):(ie.length-=$,ie.awaitDrain=0),ie.length===0&&(ie.ended||(ie.needReadable=!0),oe!==$&&ie.ended&&q(this)),se!==null&&this.emit("data",se),se};function z($,ie){if(s("onEofChunk"),!ie.ended){if(ie.decoder){var oe=ie.decoder.end();oe&&oe.length&&(ie.buffer.push(oe),ie.length+=ie.objectMode?1:oe.length)}ie.ended=!0,ie.sync?G($):(ie.needReadable=!1,ie.emittedReadable||(ie.emittedReadable=!0,Y($)))}}function G($){var ie=$._readableState;s("emitReadable",ie.needReadable,ie.emittedReadable),ie.needReadable=!1,ie.emittedReadable||(s("emitReadable",ie.flowing),ie.emittedReadable=!0,m.nextTick(Y,$))}function Y($){var ie=$._readableState;s("emitReadable_",ie.destroyed,ie.length,ie.ended),!ie.destroyed&&(ie.length||ie.ended)&&($.emit("readable"),ie.emittedReadable=!1),ie.needReadable=!ie.flowing&&!ie.ended&&ie.length<=ie.highWaterMark,U($)}function ee($,ie){ie.readingMore||(ie.readingMore=!0,m.nextTick(Z,$,ie))}function Z($,ie){for(;!ie.reading&&!ie.ended&&(ie.length<ie.highWaterMark||ie.flowing&&ie.length===0);){var oe=ie.length;if(s("maybeReadMore read 0"),$.read(0),oe===ie.length)break}ie.readingMore=!1}E.prototype._read=function($){w(this,new x("_read()"))},E.prototype.pipe=function($,ie){var oe=this,ae=this._readableState;switch(ae.pipesCount){case 0:ae.pipes=$;break;case 1:ae.pipes=[ae.pipes,$];break;default:ae.pipes.push($);break}ae.pipesCount+=1,s("pipe count=%d opts=%j",ae.pipesCount,ie);var se=(!ie||ie.end!==!1)&&$!==m.stdout&&$!==m.stderr,_e=se?ye:Le;ae.endEmitted?m.nextTick(_e):oe.once("end",_e),$.on("unpipe",ue);function ue(je,Ye){s("onunpipe"),je===oe&&Ye&&Ye.hasUnpiped===!1&&(Ye.hasUnpiped=!0,be())}function ye(){s("onend"),$.end()}var xe=X(oe);$.on("drain",xe);var me=!1;function be(){s("cleanup"),$.removeListener("close",Ve),$.removeListener("finish",Ae),$.removeListener("drain",xe),$.removeListener("error",De),$.removeListener("unpipe",ue),oe.removeListener("end",ye),oe.removeListener("end",Le),oe.removeListener("data",ke),me=!0,ae.awaitDrain&&(!$._writableState||$._writableState.needDrain)&&xe()}oe.on("data",ke);function ke(je){s("ondata");var Ye=$.write(je);s("dest.write",Ye),Ye===!1&&((ae.pipesCount===1&&ae.pipes===$||ae.pipesCount>1&&j(ae.pipes,$)!==-1)&&!me&&(s("false write response, pause",ae.awaitDrain),ae.awaitDrain++),oe.pause())}function De(je){s("onerror",je),Le(),$.removeListener("error",De),T($,"error")===0&&w($,je)}L($,"error",De);function Ve(){$.removeListener("finish",Ae),Le()}$.once("close",Ve);function Ae(){s("onfinish"),$.removeListener("close",Ve),Le()}$.once("finish",Ae);function Le(){s("unpipe"),oe.unpipe($)}return $.emit("pipe",oe),ae.flowing||(s("pipe resume"),oe.resume()),$};function X($){return function(){var oe=$._readableState;s("pipeOnDrain",oe.awaitDrain),oe.awaitDrain&&oe.awaitDrain--,oe.awaitDrain===0&&T($,"data")&&(oe.flowing=!0,U($))}}E.prototype.unpipe=function($){var ie=this._readableState,oe={hasUnpiped:!1};if(ie.pipesCount===0)return this;if(ie.pipesCount===1)return $&&$!==ie.pipes?this:($||($=ie.pipes),ie.pipes=null,ie.pipesCount=0,ie.flowing=!1,$&&$.emit("unpipe",this,oe),this);if(!$){var ae=ie.pipes,se=ie.pipesCount;ie.pipes=null,ie.pipesCount=0,ie.flowing=!1;for(var _e=0;_e<se;_e++)ae[_e].emit("unpipe",this,{hasUnpiped:!1});return this}var ue=j(ie.pipes,$);return ue===-1?this:(ie.pipes.splice(ue,1),ie.pipesCount-=1,ie.pipesCount===1&&(ie.pipes=ie.pipes[0]),$.emit("unpipe",this,oe),this)},E.prototype.on=function($,ie){var oe=e.prototype.on.call(this,$,ie),ae=this._readableState;return $==="data"?(ae.readableListening=this.listenerCount("readable")>0,ae.flowing!==!1&&this.resume()):$==="readable"&&!ae.endEmitted&&!ae.readableListening&&(ae.readableListening=ae.needReadable=!0,ae.flowing=!1,ae.emittedReadable=!1,s("on readable",ae.length,ae.reading),ae.length?G(this):ae.reading||m.nextTick(ce,this)),oe},E.prototype.addListener=E.prototype.on,E.prototype.removeListener=function($,ie){var oe=e.prototype.removeListener.call(this,$,ie);return $==="readable"&&m.nextTick(ne,this),oe},E.prototype.removeAllListeners=function($){var ie=e.prototype.removeAllListeners.apply(this,arguments);return($==="readable"||$===void 0)&&m.nextTick(ne,this),ie};function ne($){var ie=$._readableState;ie.readableListening=$.listenerCount("readable")>0,ie.resumeScheduled&&!ie.paused?ie.flowing=!0:$.listenerCount("data")>0&&$.resume()}function ce($){s("readable nexttick read 0"),$.read(0)}E.prototype.resume=function(){var $=this._readableState;return $.flowing||(s("resume"),$.flowing=!$.readableListening,Q(this,$)),$.paused=!1,this};function Q($,ie){ie.resumeScheduled||(ie.resumeScheduled=!0,m.nextTick(K,$,ie))}function K($,ie){s("resume",ie.reading),ie.reading||$.read(0),ie.resumeScheduled=!1,$.emit("resume"),U($),ie.flowing&&!ie.reading&&$.read(0)}E.prototype.pause=function(){return s("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(s("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function U($){var ie=$._readableState;for(s("flow",ie.flowing);ie.flowing&&$.read()!==null;);}E.prototype.wrap=function($){var ie=this,oe=this._readableState,ae=!1;$.on("end",function(){if(s("wrapped end"),oe.decoder&&!oe.ended){var ue=oe.decoder.end();ue&&ue.length&&ie.push(ue)}ie.push(null)}),$.on("data",function(ue){if(s("wrapped data"),oe.decoder&&(ue=oe.decoder.write(ue)),!(oe.objectMode&&ue==null)&&!(!oe.objectMode&&(!ue||!ue.length))){var ye=ie.push(ue);ye||(ae=!0,$.pause())}});for(var se in $)this[se]===void 0&&typeof $[se]=="function"&&(this[se]=function(ye){return function(){return $[ye].apply($,arguments)}}(se));for(var _e=0;_e<h.length;_e++)$.on(h[_e],this.emit.bind(this,h[_e]));return this._read=function(ue){s("wrapped _read",ue),ae&&(ae=!1,$.resume())},this},typeof Symbol=="function"&&(E.prototype[Symbol.asyncIterator]=function(){return _===void 0&&(_=t("./internal/streams/async_iterator")),_(this)}),Object.defineProperty(E.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(E.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(E.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(ie){this._readableState&&(this._readableState.flowing=ie)}}),E._fromList=H,Object.defineProperty(E.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function H($,ie){if(ie.length===0)return null;var oe;return ie.objectMode?oe=ie.buffer.shift():!$||$>=ie.length?(ie.decoder?oe=ie.buffer.join(""):ie.buffer.length===1?oe=ie.buffer.first():oe=ie.buffer.concat(ie.length),ie.buffer.clear()):oe=ie.buffer.consume($,ie.decoder),oe}function q($){var ie=$._readableState;s("endReadable",ie.endEmitted),ie.endEmitted||(ie.ended=!0,m.nextTick(re,ie,$))}function re($,ie){if(s("endReadableNT",$.endEmitted,$.length),!$.endEmitted&&$.length===0&&($.endEmitted=!0,ie.readable=!1,ie.emit("end"),$.autoDestroy)){var oe=ie._writableState;(!oe||oe.autoDestroy&&oe.finished)&&ie.destroy()}}typeof Symbol=="function"&&(E.from=function($,ie){return p===void 0&&(p=t("./internal/streams/from")),p(E,$,ie)});function j($,ie){for(var oe=0,ae=$.length;oe<ae;oe++)if($[oe]===ie)return oe;return-1}}).call(this)}).call(this,t("_process"),typeof Ro<"u"?Ro:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":287,"./_stream_duplex":288,"./internal/streams/async_iterator":293,"./internal/streams/buffer_list":294,"./internal/streams/destroy":295,"./internal/streams/from":297,"./internal/streams/state":299,"./internal/streams/stream":300,_process:278,buffer:85,events:84,inherits:231,"string_decoder/":301,util:83}],291:[function(t,B,V){B.exports=n;var m=t("../errors").codes,c=m.ERR_METHOD_NOT_IMPLEMENTED,A=m.ERR_MULTIPLE_CALLBACK,T=m.ERR_TRANSFORM_ALREADY_TRANSFORMING,e=m.ERR_TRANSFORM_WITH_LENGTH_0,a=t("./_stream_duplex");t("inherits")(n,a);function i(s,o){var b=this._transformState;b.transforming=!1;var g=b.writecb;if(g===null)return this.emit("error",new A);b.writechunk=null,b.writecb=null,o!=null&&this.push(o),g(s);var d=this._readableState;d.reading=!1,(d.needReadable||d.length<d.highWaterMark)&&this._read(d.highWaterMark)}function n(s){if(!(this instanceof n))return new n(s);a.call(this,s),this._transformState={afterTransform:i.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,s&&(typeof s.transform=="function"&&(this._transform=s.transform),typeof s.flush=="function"&&(this._flush=s.flush)),this.on("prefinish",r)}function r(){var s=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(o,b){v(s,o,b)}):v(this,null,null)}n.prototype.push=function(s,o){return this._transformState.needTransform=!1,a.prototype.push.call(this,s,o)},n.prototype._transform=function(s,o,b){b(new c("_transform()"))},n.prototype._write=function(s,o,b){var g=this._transformState;if(g.writecb=b,g.writechunk=s,g.writeencoding=o,!g.transforming){var d=this._readableState;(g.needTransform||d.needReadable||d.length<d.highWaterMark)&&this._read(d.highWaterMark)}},n.prototype._read=function(s){var o=this._transformState;o.writechunk!==null&&!o.transforming?(o.transforming=!0,this._transform(o.writechunk,o.writeencoding,o.afterTransform)):o.needTransform=!0},n.prototype._destroy=function(s,o){a.prototype._destroy.call(this,s,function(b){o(b)})};function v(s,o,b){if(o)return s.emit("error",o);if(b!=null&&s.push(b),s._writableState.length)throw new e;if(s._transformState.transforming)throw new T;return s.push(null)}},{"../errors":287,"./_stream_duplex":288,inherits:231}],292:[function(t,B,V){(function(m,c){(function(){B.exports=S;function A(U){var H=this;this.next=null,this.entry=null,this.finish=function(){K(H,U)}}var T;S.WritableState=h;var e={deprecate:t("util-deprecate")},a=t("./internal/streams/stream"),i=t("buffer").Buffer,n=c.Uint8Array||function(){};function r(U){return i.from(U)}function v(U){return i.isBuffer(U)||U instanceof n}var s=t("./internal/streams/destroy"),o=t("./internal/streams/state"),b=o.getHighWaterMark,g=t("../errors").codes,d=g.ERR_INVALID_ARG_TYPE,f=g.ERR_METHOD_NOT_IMPLEMENTED,y=g.ERR_MULTIPLE_CALLBACK,l=g.ERR_STREAM_CANNOT_PIPE,x=g.ERR_STREAM_DESTROYED,u=g.ERR_STREAM_NULL_VALUES,M=g.ERR_STREAM_WRITE_AFTER_END,_=g.ERR_UNKNOWN_ENCODING,p=s.errorOrDestroy;t("inherits")(S,a);function w(){}function h(U,H,q){T=T||t("./_stream_duplex"),U=U||{},typeof q!="boolean"&&(q=H instanceof T),this.objectMode=!!U.objectMode,q&&(this.objectMode=this.objectMode||!!U.writableObjectMode),this.highWaterMark=b(this,U,"writableHighWaterMark",q),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var re=U.decodeStrings===!1;this.decodeStrings=!re,this.defaultEncoding=U.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(j){z(H,j)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=U.emitClose!==!1,this.autoDestroy=!!U.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new A(this)}h.prototype.getBuffer=function(){for(var H=this.bufferedRequest,q=[];H;)q.push(H),H=H.next;return q},function(){try{Object.defineProperty(h.prototype,"buffer",{get:e.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var L;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(L=Function.prototype[Symbol.hasInstance],Object.defineProperty(S,Symbol.hasInstance,{value:function(H){return L.call(this,H)?!0:this!==S?!1:H&&H._writableState instanceof h}})):L=function(H){return H instanceof this};function S(U){T=T||t("./_stream_duplex");var H=this instanceof T;if(!H&&!L.call(S,this))return new S(U);this._writableState=new h(U,this,H),this.writable=!0,U&&(typeof U.write=="function"&&(this._write=U.write),typeof U.writev=="function"&&(this._writev=U.writev),typeof U.destroy=="function"&&(this._destroy=U.destroy),typeof U.final=="function"&&(this._final=U.final)),a.call(this)}S.prototype.pipe=function(){p(this,new l)};function E(U,H){var q=new M;p(U,q),m.nextTick(H,q)}function P(U,H,q,re){var j;return q===null?j=new u:typeof q!="string"&&!H.objectMode&&(j=new d("chunk",["string","Buffer"],q)),j?(p(U,j),m.nextTick(re,j),!1):!0}S.prototype.write=function(U,H,q){var re=this._writableState,j=!1,$=!re.objectMode&&v(U);return $&&!i.isBuffer(U)&&(U=r(U)),typeof H=="function"&&(q=H,H=null),$?H="buffer":H||(H=re.defaultEncoding),typeof q!="function"&&(q=w),re.ending?E(this,q):($||P(this,re,U,q))&&(re.pendingcb++,j=I(this,re,$,U,H,q)),j},S.prototype.cork=function(){this._writableState.corked++},S.prototype.uncork=function(){var U=this._writableState;U.corked&&(U.corked--,!U.writing&&!U.corked&&!U.bufferProcessing&&U.bufferedRequest&&ee(this,U))},S.prototype.setDefaultEncoding=function(H){if(typeof H=="string"&&(H=H.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((H+"").toLowerCase())>-1))throw new _(H);return this._writableState.defaultEncoding=H,this},Object.defineProperty(S.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function F(U,H,q){return!U.objectMode&&U.decodeStrings!==!1&&typeof H=="string"&&(H=i.from(H,q)),H}Object.defineProperty(S.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function I(U,H,q,re,j,$){if(!q){var ie=F(H,re,j);re!==ie&&(q=!0,j="buffer",re=ie)}var oe=H.objectMode?1:re.length;H.length+=oe;var ae=H.length<H.highWaterMark;if(ae||(H.needDrain=!0),H.writing||H.corked){var se=H.lastBufferedRequest;H.lastBufferedRequest={chunk:re,encoding:j,isBuf:q,callback:$,next:null},se?se.next=H.lastBufferedRequest:H.bufferedRequest=H.lastBufferedRequest,H.bufferedRequestCount+=1}else D(U,H,!1,oe,re,j,$);return ae}function D(U,H,q,re,j,$,ie){H.writelen=re,H.writecb=ie,H.writing=!0,H.sync=!0,H.destroyed?H.onwrite(new x("write")):q?U._writev(j,H.onwrite):U._write(j,$,H.onwrite),H.sync=!1}function R(U,H,q,re,j){--H.pendingcb,q?(m.nextTick(j,re),m.nextTick(ce,U,H),U._writableState.errorEmitted=!0,p(U,re)):(j(re),U._writableState.errorEmitted=!0,p(U,re),ce(U,H))}function N(U){U.writing=!1,U.writecb=null,U.length-=U.writelen,U.writelen=0}function z(U,H){var q=U._writableState,re=q.sync,j=q.writecb;if(typeof j!="function")throw new y;if(N(q),H)R(U,q,re,H,j);else{var $=Z(q)||U.destroyed;!$&&!q.corked&&!q.bufferProcessing&&q.bufferedRequest&&ee(U,q),re?m.nextTick(G,U,q,$,j):G(U,q,$,j)}}function G(U,H,q,re){q||Y(U,H),H.pendingcb--,re(),ce(U,H)}function Y(U,H){H.length===0&&H.needDrain&&(H.needDrain=!1,U.emit("drain"))}function ee(U,H){H.bufferProcessing=!0;var q=H.bufferedRequest;if(U._writev&&q&&q.next){var re=H.bufferedRequestCount,j=new Array(re),$=H.corkedRequestsFree;$.entry=q;for(var ie=0,oe=!0;q;)j[ie]=q,q.isBuf||(oe=!1),q=q.next,ie+=1;j.allBuffers=oe,D(U,H,!0,H.length,j,"",$.finish),H.pendingcb++,H.lastBufferedRequest=null,$.next?(H.corkedRequestsFree=$.next,$.next=null):H.corkedRequestsFree=new A(H),H.bufferedRequestCount=0}else{for(;q;){var ae=q.chunk,se=q.encoding,_e=q.callback,ue=H.objectMode?1:ae.length;if(D(U,H,!1,ue,ae,se,_e),q=q.next,H.bufferedRequestCount--,H.writing)break}q===null&&(H.lastBufferedRequest=null)}H.bufferedRequest=q,H.bufferProcessing=!1}S.prototype._write=function(U,H,q){q(new f("_write()"))},S.prototype._writev=null,S.prototype.end=function(U,H,q){var re=this._writableState;return typeof U=="function"?(q=U,U=null,H=null):typeof H=="function"&&(q=H,H=null),U!=null&&this.write(U,H),re.corked&&(re.corked=1,this.uncork()),re.ending||Q(this,re,q),this},Object.defineProperty(S.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function Z(U){return U.ending&&U.length===0&&U.bufferedRequest===null&&!U.finished&&!U.writing}function X(U,H){U._final(function(q){H.pendingcb--,q&&p(U,q),H.prefinished=!0,U.emit("prefinish"),ce(U,H)})}function ne(U,H){!H.prefinished&&!H.finalCalled&&(typeof U._final=="function"&&!H.destroyed?(H.pendingcb++,H.finalCalled=!0,m.nextTick(X,U,H)):(H.prefinished=!0,U.emit("prefinish")))}function ce(U,H){var q=Z(H);if(q&&(ne(U,H),H.pendingcb===0&&(H.finished=!0,U.emit("finish"),H.autoDestroy))){var re=U._readableState;(!re||re.autoDestroy&&re.endEmitted)&&U.destroy()}return q}function Q(U,H,q){H.ending=!0,ce(U,H),q&&(H.finished?m.nextTick(q):U.once("finish",q)),H.ended=!0,U.writable=!1}function K(U,H,q){var re=U.entry;for(U.entry=null;re;){var j=re.callback;H.pendingcb--,j(q),re=re.next}H.corkedRequestsFree.next=U}Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(H){!this._writableState||(this._writableState.destroyed=H)}}),S.prototype.destroy=s.destroy,S.prototype._undestroy=s.undestroy,S.prototype._destroy=function(U,H){H(U)}}).call(this)}).call(this,t("_process"),typeof Ro<"u"?Ro:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":287,"./_stream_duplex":288,"./internal/streams/destroy":295,"./internal/streams/state":299,"./internal/streams/stream":300,_process:278,buffer:85,inherits:231,"util-deprecate":331}],293:[function(t,B,V){(function(m){(function(){var c;function A(x,u,M){return u in x?Object.defineProperty(x,u,{value:M,enumerable:!0,configurable:!0,writable:!0}):x[u]=M,x}var T=t("./end-of-stream"),e=Symbol("lastResolve"),a=Symbol("lastReject"),i=Symbol("error"),n=Symbol("ended"),r=Symbol("lastPromise"),v=Symbol("handlePromise"),s=Symbol("stream");function o(x,u){return{value:x,done:u}}function b(x){var u=x[e];if(u!==null){var M=x[s].read();M!==null&&(x[r]=null,x[e]=null,x[a]=null,u(o(M,!1)))}}function g(x){m.nextTick(b,x)}function d(x,u){return function(M,_){x.then(function(){if(u[n]){M(o(void 0,!0));return}u[v](M,_)},_)}}var f=Object.getPrototypeOf(function(){}),y=Object.setPrototypeOf((c={get stream(){return this[s]},next:function(){var u=this,M=this[i];if(M!==null)return Promise.reject(M);if(this[n])return Promise.resolve(o(void 0,!0));if(this[s].destroyed)return new Promise(function(h,L){m.nextTick(function(){u[i]?L(u[i]):h(o(void 0,!0))})});var _=this[r],p;if(_)p=new Promise(d(_,this));else{var w=this[s].read();if(w!==null)return Promise.resolve(o(w,!1));p=new Promise(this[v])}return this[r]=p,p}},A(c,Symbol.asyncIterator,function(){return this}),A(c,"return",function(){var u=this;return new Promise(function(M,_){u[s].destroy(null,function(p){if(p){_(p);return}M(o(void 0,!0))})})}),c),f),l=function(u){var M,_=Object.create(y,(M={},A(M,s,{value:u,writable:!0}),A(M,e,{value:null,writable:!0}),A(M,a,{value:null,writable:!0}),A(M,i,{value:null,writable:!0}),A(M,n,{value:u._readableState.endEmitted,writable:!0}),A(M,v,{value:function(w,h){var L=_[s].read();L?(_[r]=null,_[e]=null,_[a]=null,w(o(L,!1))):(_[e]=w,_[a]=h)},writable:!0}),M));return _[r]=null,T(u,function(p){if(p&&p.code!=="ERR_STREAM_PREMATURE_CLOSE"){var w=_[a];w!==null&&(_[r]=null,_[e]=null,_[a]=null,w(p)),_[i]=p;return}var h=_[e];h!==null&&(_[r]=null,_[e]=null,_[a]=null,h(o(void 0,!0))),_[n]=!0}),u.on("readable",g.bind(null,_)),_};B.exports=l}).call(this)}).call(this,t("_process"))},{"./end-of-stream":296,_process:278}],294:[function(t,B,V){function m(b,g){var d=Object.keys(b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(b);g&&(f=f.filter(function(y){return Object.getOwnPropertyDescriptor(b,y).enumerable})),d.push.apply(d,f)}return d}function c(b){for(var g=1;g<arguments.length;g++){var d=arguments[g]!=null?arguments[g]:{};g%2?m(Object(d),!0).forEach(function(f){A(b,f,d[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(d)):m(Object(d)).forEach(function(f){Object.defineProperty(b,f,Object.getOwnPropertyDescriptor(d,f))})}return b}function A(b,g,d){return g in b?Object.defineProperty(b,g,{value:d,enumerable:!0,configurable:!0,writable:!0}):b[g]=d,b}function T(b,g){if(!(b instanceof g))throw new TypeError("Cannot call a class as a function")}function e(b,g){for(var d=0;d<g.length;d++){var f=g[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(b,f.key,f)}}function a(b,g,d){return g&&e(b.prototype,g),d&&e(b,d),b}var i=t("buffer"),n=i.Buffer,r=t("util"),v=r.inspect,s=v&&v.custom||"inspect";function o(b,g,d){n.prototype.copy.call(b,g,d)}B.exports=function(){function b(){T(this,b),this.head=null,this.tail=null,this.length=0}return a(b,[{key:"push",value:function(d){var f={data:d,next:null};this.length>0?this.tail.next=f:this.head=f,this.tail=f,++this.length}},{key:"unshift",value:function(d){var f={data:d,next:this.head};this.length===0&&(this.tail=f),this.head=f,++this.length}},{key:"shift",value:function(){if(this.length!==0){var d=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,d}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(d){if(this.length===0)return"";for(var f=this.head,y=""+f.data;f=f.next;)y+=d+f.data;return y}},{key:"concat",value:function(d){if(this.length===0)return n.alloc(0);for(var f=n.allocUnsafe(d>>>0),y=this.head,l=0;y;)o(y.data,f,l),l+=y.data.length,y=y.next;return f}},{key:"consume",value:function(d,f){var y;return d<this.head.data.length?(y=this.head.data.slice(0,d),this.head.data=this.head.data.slice(d)):d===this.head.data.length?y=this.shift():y=f?this._getString(d):this._getBuffer(d),y}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(d){var f=this.head,y=1,l=f.data;for(d-=l.length;f=f.next;){var x=f.data,u=d>x.length?x.length:d;if(u===x.length?l+=x:l+=x.slice(0,d),d-=u,d===0){u===x.length?(++y,f.next?this.head=f.next:this.head=this.tail=null):(this.head=f,f.data=x.slice(u));break}++y}return this.length-=y,l}},{key:"_getBuffer",value:function(d){var f=n.allocUnsafe(d),y=this.head,l=1;for(y.data.copy(f),d-=y.data.length;y=y.next;){var x=y.data,u=d>x.length?x.length:d;if(x.copy(f,f.length-d,0,u),d-=u,d===0){u===x.length?(++l,y.next?this.head=y.next:this.head=this.tail=null):(this.head=y,y.data=x.slice(u));break}++l}return this.length-=l,f}},{key:s,value:function(d,f){return v(this,c({},f,{depth:0,customInspect:!1}))}}]),b}()},{buffer:85,util:83}],295:[function(t,B,V){(function(m){(function(){function c(n,r){var v=this,s=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return s||o?(r?r(n):n&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,m.nextTick(a,this,n)):m.nextTick(a,this,n)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(n||null,function(b){!r&&b?v._writableState?v._writableState.errorEmitted?m.nextTick(T,v):(v._writableState.errorEmitted=!0,m.nextTick(A,v,b)):m.nextTick(A,v,b):r?(m.nextTick(T,v),r(b)):m.nextTick(T,v)}),this)}function A(n,r){a(n,r),T(n)}function T(n){n._writableState&&!n._writableState.emitClose||n._readableState&&!n._readableState.emitClose||n.emit("close")}function e(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function a(n,r){n.emit("error",r)}function i(n,r){var v=n._readableState,s=n._writableState;v&&v.autoDestroy||s&&s.autoDestroy?n.destroy(r):n.emit("error",r)}B.exports={destroy:c,undestroy:e,errorOrDestroy:i}}).call(this)}).call(this,t("_process"))},{_process:278}],296:[function(t,B,V){var m=t("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function c(a){var i=!1;return function(){if(!i){i=!0;for(var n=arguments.length,r=new Array(n),v=0;v<n;v++)r[v]=arguments[v];a.apply(this,r)}}}function A(){}function T(a){return a.setHeader&&typeof a.abort=="function"}function e(a,i,n){if(typeof i=="function")return e(a,null,i);i||(i={}),n=c(n||A);var r=i.readable||i.readable!==!1&&a.readable,v=i.writable||i.writable!==!1&&a.writable,s=function(){a.writable||b()},o=a._writableState&&a._writableState.finished,b=function(){v=!1,o=!0,r||n.call(a)},g=a._readableState&&a._readableState.endEmitted,d=function(){r=!1,g=!0,v||n.call(a)},f=function(u){n.call(a,u)},y=function(){var u;if(r&&!g)return(!a._readableState||!a._readableState.ended)&&(u=new m),n.call(a,u);if(v&&!o)return(!a._writableState||!a._writableState.ended)&&(u=new m),n.call(a,u)},l=function(){a.req.on("finish",b)};return T(a)?(a.on("complete",b),a.on("abort",y),a.req?l():a.on("request",l)):v&&!a._writableState&&(a.on("end",s),a.on("close",s)),a.on("end",d),a.on("finish",b),i.error!==!1&&a.on("error",f),a.on("close",y),function(){a.removeListener("complete",b),a.removeListener("abort",y),a.removeListener("request",l),a.req&&a.req.removeListener("finish",b),a.removeListener("end",s),a.removeListener("close",s),a.removeListener("finish",b),a.removeListener("end",d),a.removeListener("error",f),a.removeListener("close",y)}}B.exports=e},{"../../../errors":287}],297:[function(t,B,V){B.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],298:[function(t,B,V){var m;function c(b){var g=!1;return function(){g||(g=!0,b.apply(void 0,arguments))}}var A=t("../../../errors").codes,T=A.ERR_MISSING_ARGS,e=A.ERR_STREAM_DESTROYED;function a(b){if(b)throw b}function i(b){return b.setHeader&&typeof b.abort=="function"}function n(b,g,d,f){f=c(f);var y=!1;b.on("close",function(){y=!0}),m===void 0&&(m=t("./end-of-stream")),m(b,{readable:g,writable:d},function(x){if(x)return f(x);y=!0,f()});var l=!1;return function(x){if(!y&&!l){if(l=!0,i(b))return b.abort();if(typeof b.destroy=="function")return b.destroy();f(x||new e("pipe"))}}}function r(b){b()}function v(b,g){return b.pipe(g)}function s(b){return!b.length||typeof b[b.length-1]!="function"?a:b.pop()}function o(){for(var b=arguments.length,g=new Array(b),d=0;d<b;d++)g[d]=arguments[d];var f=s(g);if(Array.isArray(g[0])&&(g=g[0]),g.length<2)throw new T("streams");var y,l=g.map(function(x,u){var M=u<g.length-1,_=u>0;return n(x,M,_,function(p){y||(y=p),p&&l.forEach(r),!M&&(l.forEach(r),f(y))})});return g.reduce(v)}B.exports=o},{"../../../errors":287,"./end-of-stream":296}],299:[function(t,B,V){var m=t("../../../errors").codes.ERR_INVALID_OPT_VALUE;function c(T,e,a){return T.highWaterMark!=null?T.highWaterMark:e?T[a]:null}function A(T,e,a,i){var n=c(e,i,a);if(n!=null){if(!(isFinite(n)&&Math.floor(n)===n)||n<0){var r=i?a:"highWaterMark";throw new m(r,n)}return Math.floor(n)}return T.objectMode?16:16*1024}B.exports={getHighWaterMark:A}},{"../../../errors":287}],300:[function(t,B,V){B.exports=t("events").EventEmitter},{events:84}],301:[function(t,B,V){var m=t("safe-buffer").Buffer,c=m.isEncoding||function(l){switch(l=""+l,l&&l.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function A(l){if(!l)return"utf8";for(var x;;)switch(l){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return l;default:if(x)return;l=(""+l).toLowerCase(),x=!0}}function T(l){var x=A(l);if(typeof x!="string"&&(m.isEncoding===c||!c(l)))throw new Error("Unknown encoding: "+l);return x||l}V.StringDecoder=e;function e(l){this.encoding=T(l);var x;switch(this.encoding){case"utf16le":this.text=o,this.end=b,x=4;break;case"utf8":this.fillLast=r,x=4;break;case"base64":this.text=g,this.end=d,x=3;break;default:this.write=f,this.end=y;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=m.allocUnsafe(x)}e.prototype.write=function(l){if(l.length===0)return"";var x,u;if(this.lastNeed){if(x=this.fillLast(l),x===void 0)return"";u=this.lastNeed,this.lastNeed=0}else u=0;return u<l.length?x?x+this.text(l,u):this.text(l,u):x||""},e.prototype.end=s,e.prototype.text=v,e.prototype.fillLast=function(l){if(this.lastNeed<=l.length)return l.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);l.copy(this.lastChar,this.lastTotal-this.lastNeed,0,l.length),this.lastNeed-=l.length};function a(l){return l<=127?0:l>>5===6?2:l>>4===14?3:l>>3===30?4:l>>6===2?-1:-2}function i(l,x,u){var M=x.length-1;if(M<u)return 0;var _=a(x[M]);return _>=0?(_>0&&(l.lastNeed=_-1),_):--M<u||_===-2?0:(_=a(x[M]),_>=0?(_>0&&(l.lastNeed=_-2),_):--M<u||_===-2?0:(_=a(x[M]),_>=0?(_>0&&(_===2?_=0:l.lastNeed=_-3),_):0))}function n(l,x,u){if((x[0]&192)!==128)return l.lastNeed=0,"\uFFFD";if(l.lastNeed>1&&x.length>1){if((x[1]&192)!==128)return l.lastNeed=1,"\uFFFD";if(l.lastNeed>2&&x.length>2&&(x[2]&192)!==128)return l.lastNeed=2,"\uFFFD"}}function r(l){var x=this.lastTotal-this.lastNeed,u=n(this,l);if(u!==void 0)return u;if(this.lastNeed<=l.length)return l.copy(this.lastChar,x,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);l.copy(this.lastChar,x,0,l.length),this.lastNeed-=l.length}function v(l,x){var u=i(this,l,x);if(!this.lastNeed)return l.toString("utf8",x);this.lastTotal=u;var M=l.length-(u-this.lastNeed);return l.copy(this.lastChar,0,M),l.toString("utf8",x,M)}function s(l){var x=l&&l.length?this.write(l):"";return this.lastNeed?x+"\uFFFD":x}function o(l,x){if((l.length-x)%2===0){var u=l.toString("utf16le",x);if(u){var M=u.charCodeAt(u.length-1);if(M>=55296&&M<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=l[l.length-2],this.lastChar[1]=l[l.length-1],u.slice(0,-1)}return u}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=l[l.length-1],l.toString("utf16le",x,l.length-1)}function b(l){var x=l&&l.length?this.write(l):"";if(this.lastNeed){var u=this.lastTotal-this.lastNeed;return x+this.lastChar.toString("utf16le",0,u)}return x}function g(l,x){var u=(l.length-x)%3;return u===0?l.toString("base64",x):(this.lastNeed=3-u,this.lastTotal=3,u===1?this.lastChar[0]=l[l.length-1]:(this.lastChar[0]=l[l.length-2],this.lastChar[1]=l[l.length-1]),l.toString("base64",x,l.length-u))}function d(l){var x=l&&l.length?this.write(l):"";return this.lastNeed?x+this.lastChar.toString("base64",0,3-this.lastNeed):x}function f(l){return l.toString(this.encoding)}function y(l){return l&&l.length?this.write(l):""}},{"safe-buffer":285}],302:[function(t,B,V){(function(m,c){(function(){var A=t("assert"),T=t("debug")("stream-parser");B.exports=r;var e=-1,a=0,i=1,n=2;function r(u){var M=u&&typeof u._transform=="function",_=u&&typeof u._write=="function";if(!M&&!_)throw new Error("must pass a Writable or Transform stream in");T("extending Parser into stream"),u._bytes=s,u._skipBytes=o,M&&(u._passthrough=b),M?u._transform=d:u._write=g}function v(u){T("initializing parser stream"),u._parserBytesLeft=0,u._parserBuffers=[],u._parserBuffered=0,u._parserState=e,u._parserCallback=null,typeof u.push=="function"&&(u._parserOutput=u.push.bind(u)),u._parserInit=!0}function s(u,M){A(!this._parserCallback,'there is already a "callback" set!'),A(isFinite(u)&&u>0,'can only buffer a finite number of bytes > 0, got "'+u+'"'),this._parserInit||v(this),T("buffering %o bytes",u),this._parserBytesLeft=u,this._parserCallback=M,this._parserState=a}function o(u,M){A(!this._parserCallback,'there is already a "callback" set!'),A(u>0,'can only skip > 0 bytes, got "'+u+'"'),this._parserInit||v(this),T("skipping %o bytes",u),this._parserBytesLeft=u,this._parserCallback=M,this._parserState=i}function b(u,M){A(!this._parserCallback,'There is already a "callback" set!'),A(u>0,'can only pass through > 0 bytes, got "'+u+'"'),this._parserInit||v(this),T("passing through %o bytes",u),this._parserBytesLeft=u,this._parserCallback=M,this._parserState=n}function g(u,M,_){this._parserInit||v(this),T("write(%o bytes)",u.length),typeof M=="function"&&(_=M),l(this,u,null,_)}function d(u,M,_){this._parserInit||v(this),T("transform(%o bytes)",u.length),typeof M!="function"&&(M=this._parserOutput),l(this,u,M,_)}function f(u,M,_,p){return u._parserBytesLeft<=0?p(new Error("got data but not currently parsing anything")):M.length<=u._parserBytesLeft?function(){return y(u,M,_,p)}:function(){var w=M.slice(0,u._parserBytesLeft);return y(u,w,_,function(h){if(h)return p(h);if(M.length>w.length)return function(){return f(u,M.slice(w.length),_,p)}})}}function y(u,M,_,p){if(u._parserBytesLeft-=M.length,T("%o bytes left for stream piece",u._parserBytesLeft),u._parserState===a?(u._parserBuffers.push(M),u._parserBuffered+=M.length):u._parserState===n&&_(M),u._parserBytesLeft===0){var w=u._parserCallback;if(w&&u._parserState===a&&u._parserBuffers.length>1&&(M=c.concat(u._parserBuffers,u._parserBuffered)),u._parserState!==a&&(M=null),u._parserCallback=null,u._parserBuffered=0,u._parserState=e,u._parserBuffers.splice(0),w){var h=[];M&&h.push(M),_&&h.push(_);var L=w.length>h.length;L&&h.push(x(p));var S=w.apply(u,h);if(!L||p===S)return p}}else return p}var l=x(f);function x(u){return function(){for(var M=u.apply(this,arguments);typeof M=="function";)M=M();return M}}}).call(this)}).call(this,t("_process"),t("buffer").Buffer)},{_process:278,assert:75,buffer:85,debug:303}],303:[function(t,B,V){(function(m){(function(){V=B.exports=t("./debug"),V.log=T,V.formatArgs=A,V.save=e,V.load=a,V.useColors=c,V.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:i(),V.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function c(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}V.formatters.j=function(n){try{return JSON.stringify(n)}catch(r){return"[UnexpectedJSONParseError]: "+r.message}};function A(n){var r=this.useColors;if(n[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+n[0]+(r?"%c ":" ")+"+"+V.humanize(this.diff),!!r){var v="color: "+this.color;n.splice(1,0,v,"color: inherit");var s=0,o=0;n[0].replace(/%[a-zA-Z%]/g,function(b){b!=="%%"&&(s++,b==="%c"&&(o=s))}),n.splice(o,0,v)}}function T(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function e(n){try{n==null?V.storage.removeItem("debug"):V.storage.debug=n}catch{}}function a(){var n;try{n=V.storage.debug}catch{}return!n&&typeof m<"u"&&"env"in m&&(n=m.env.DEBUG),n}V.enable(a());function i(){try{return window.localStorage}catch{}}}).call(this)}).call(this,t("_process"))},{"./debug":304,_process:278}],304:[function(t,B,V){V=B.exports=A.debug=A.default=A,V.coerce=i,V.disable=e,V.enable=T,V.enabled=a,V.humanize=t("ms"),V.names=[],V.skips=[],V.formatters={};var m;function c(n){var r=0,v;for(v in n)r=(r<<5)-r+n.charCodeAt(v),r|=0;return V.colors[Math.abs(r)%V.colors.length]}function A(n){function r(){if(!!r.enabled){var v=r,s=+new Date,o=s-(m||s);v.diff=o,v.prev=m,v.curr=s,m=s;for(var b=new Array(arguments.length),g=0;g<b.length;g++)b[g]=arguments[g];b[0]=V.coerce(b[0]),typeof b[0]!="string"&&b.unshift("%O");var d=0;b[0]=b[0].replace(/%([a-zA-Z%])/g,function(y,l){if(y==="%%")return y;d++;var x=V.formatters[l];if(typeof x=="function"){var u=b[d];y=x.call(v,u),b.splice(d,1),d--}return y}),V.formatArgs.call(v,b);var f=r.log||V.log||console.log.bind(console);f.apply(v,b)}}return r.namespace=n,r.enabled=V.enabled(n),r.useColors=V.useColors(),r.color=c(n),typeof V.init=="function"&&V.init(r),r}function T(n){V.save(n),V.names=[],V.skips=[];for(var r=(typeof n=="string"?n:"").split(/[\s,]+/),v=r.length,s=0;s<v;s++)!r[s]||(n=r[s].replace(/\*/g,".*?"),n[0]==="-"?V.skips.push(new RegExp("^"+n.substr(1)+"$")):V.names.push(new RegExp("^"+n+"$")))}function e(){V.enable("")}function a(n){var r,v;for(r=0,v=V.skips.length;r<v;r++)if(V.skips[r].test(n))return!1;for(r=0,v=V.names.length;r<v;r++)if(V.names[r].test(n))return!0;return!1}function i(n){return n instanceof Error?n.stack||n.message:n}},{ms:305}],305:[function(t,B,V){var m=1e3,c=m*60,A=c*60,T=A*24,e=T*365.25;B.exports=function(v,s){s=s||{};var o=typeof v;if(o==="string"&&v.length>0)return a(v);if(o==="number"&&isNaN(v)===!1)return s.long?n(v):i(v);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(v))};function a(v){if(v=String(v),!(v.length>100)){var s=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(v);if(!!s){var o=parseFloat(s[1]),b=(s[2]||"ms").toLowerCase();switch(b){case"years":case"year":case"yrs":case"yr":case"y":return o*e;case"days":case"day":case"d":return o*T;case"hours":case"hour":case"hrs":case"hr":case"h":return o*A;case"minutes":case"minute":case"mins":case"min":case"m":return o*c;case"seconds":case"second":case"secs":case"sec":case"s":return o*m;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}function i(v){return v>=T?Math.round(v/T)+"d":v>=A?Math.round(v/A)+"h":v>=c?Math.round(v/c)+"m":v>=m?Math.round(v/m)+"s":v+"ms"}function n(v){return r(v,T,"day")||r(v,A,"hour")||r(v,c,"minute")||r(v,m,"second")||v+" ms"}function r(v,s,o){if(!(v<s))return v<s*1.5?Math.floor(v/s)+" "+o:Math.ceil(v/s)+" "+o+"s"}},{}],306:[function(t,B,V){var m=t("parenthesis");B.exports=function(A,T,e){if(A==null)throw Error("First argument should be a string");if(T==null)throw Error("Separator should be a string or a RegExp");e?(typeof e=="string"||Array.isArray(e))&&(e={ignore:e}):e={},e.escape==null&&(e.escape=!0),e.ignore==null?e.ignore=["[]","()","{}","<>",'""',"''","``","\u201C\u201D","\xAB\xBB"]:(typeof e.ignore=="string"&&(e.ignore=[e.ignore]),e.ignore=e.ignore.map(function(b){return b.length===1&&(b=b+b),b}));var a=m.parse(A,{flat:!0,brackets:e.ignore}),i=a[0],n=i.split(T);if(e.escape){for(var r=[],v=0;v<n.length;v++){var s=n[v],o=n[v+1];s[s.length-1]==="\\"&&s[s.length-2]!=="\\"?(r.push(s+T+o),v++):r.push(s)}n=r}for(var v=0;v<n.length;v++)a[0]=n[v],n[v]=m.stringify(a,{flat:!0});return n}},{parenthesis:248}],307:[function(t,B,V){B.exports=m;function m(c){for(var A=c.length,T=new Array(A),e=new Array(A),a=new Array(A),i=new Array(A),n=new Array(A),r=new Array(A),v=0;v<A;++v)T[v]=-1,e[v]=0,a[v]=!1,i[v]=0,n[v]=-1,r[v]=[];var s=0,o=[],b=[];function g(l){var x=[l],u=[l];for(T[l]=e[l]=s,a[l]=!0,s+=1;u.length>0;){l=u[u.length-1];var M=c[l];if(i[l]<M.length){for(var _=i[l];_<M.length;++_){var p=M[_];if(T[p]<0){T[p]=e[p]=s,a[p]=!0,s+=1,x.push(p),u.push(p);break}else a[p]&&(e[l]=Math.min(e[l],e[p])|0);n[p]>=0&&r[l].push(n[p])}i[l]=_}else{if(e[l]===T[l]){for(var w=[],h=[],L=0,_=x.length-1;_>=0;--_){var S=x[_];if(a[S]=!1,w.push(S),h.push(r[S]),L+=r[S].length,n[S]=o.length,S===l){x.length=_;break}}o.push(w);for(var E=new Array(L),_=0;_<h.length;_++)for(var P=0;P<h[_].length;P++)E[--L]=h[_][P];b.push(E)}u.pop()}}}for(var v=0;v<A;++v)T[v]<0&&g(v);for(var d,v=0;v<b.length;v++){var f=b[v];if(f.length!==0){f.sort(function(x,u){return x-u}),d=[f[0]];for(var y=1;y<f.length;y++)f[y]!==f[y-1]&&d.push(f[y]);b[v]=d}}return{components:o,adjacencyList:b}}},{}],308:[function(t,B,V){Object.defineProperty(V,"__esModule",{value:!0});var m=function(){function n(r,v){var s=[],o=!0,b=!1,g=void 0;try{for(var d=r[Symbol.iterator](),f;!(o=(f=d.next()).done)&&(s.push(f.value),!(v&&s.length===v));o=!0);}catch(y){b=!0,g=y}finally{try{!o&&d.return&&d.return()}finally{if(b)throw g}}return s}return function(r,v){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return n(r,v);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=Math.PI*2,A=function(r,v,s,o,b,g,d){var f=r.x,y=r.y;f*=v,y*=s;var l=o*f-b*y,x=b*f+o*y;return{x:l+g,y:x+d}},T=function(r,v){var s=v===1.5707963267948966?.551915024494:v===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(v/4),o=Math.cos(r),b=Math.sin(r),g=Math.cos(r+v),d=Math.sin(r+v);return[{x:o-b*s,y:b+o*s},{x:g+d*s,y:d-g*s},{x:g,y:d}]},e=function(r,v,s,o){var b=r*o-v*s<0?-1:1,g=r*s+v*o;return g>1&&(g=1),g<-1&&(g=-1),b*Math.acos(g)},a=function(r,v,s,o,b,g,d,f,y,l,x,u){var M=Math.pow(b,2),_=Math.pow(g,2),p=Math.pow(x,2),w=Math.pow(u,2),h=M*_-M*w-_*p;h<0&&(h=0),h/=M*w+_*p,h=Math.sqrt(h)*(d===f?-1:1);var L=h*b/g*u,S=h*-g/b*x,E=l*L-y*S+(r+s)/2,P=y*L+l*S+(v+o)/2,F=(x-L)/b,I=(u-S)/g,D=(-x-L)/b,R=(-u-S)/g,N=e(1,0,F,I),z=e(F,I,D,R);return f===0&&z>0&&(z-=c),f===1&&z<0&&(z+=c),[E,P,N,z]},i=function(r){var v=r.px,s=r.py,o=r.cx,b=r.cy,g=r.rx,d=r.ry,f=r.xAxisRotation,y=f===void 0?0:f,l=r.largeArcFlag,x=l===void 0?0:l,u=r.sweepFlag,M=u===void 0?0:u,_=[];if(g===0||d===0)return[];var p=Math.sin(y*c/360),w=Math.cos(y*c/360),h=w*(v-o)/2+p*(s-b)/2,L=-p*(v-o)/2+w*(s-b)/2;if(h===0&&L===0)return[];g=Math.abs(g),d=Math.abs(d);var S=Math.pow(h,2)/Math.pow(g,2)+Math.pow(L,2)/Math.pow(d,2);S>1&&(g*=Math.sqrt(S),d*=Math.sqrt(S));var E=a(v,s,o,b,g,d,x,M,p,w,h,L),P=m(E,4),F=P[0],I=P[1],D=P[2],R=P[3],N=Math.abs(R)/(c/4);Math.abs(1-N)<1e-7&&(N=1);var z=Math.max(Math.ceil(N),1);R/=z;for(var G=0;G<z;G++)_.push(T(D,R)),D+=R;return _.map(function(Y){var ee=A(Y[0],g,d,w,p,F,I),Z=ee.x,X=ee.y,ne=A(Y[1],g,d,w,p,F,I),ce=ne.x,Q=ne.y,K=A(Y[2],g,d,w,p,F,I),U=K.x,H=K.y;return{x1:Z,y1:X,x2:ce,y2:Q,x:U,y:H}})};V.default=i,B.exports=V.default},{}],309:[function(t,B,V){var m=t("parse-svg-path"),c=t("abs-svg-path"),A=t("normalize-svg-path"),T=t("is-svg-path"),e=t("assert");B.exports=a;function a(i){if(Array.isArray(i)&&i.length===1&&typeof i[0]=="string"&&(i=i[0]),typeof i=="string"&&(e(T(i),"String is not an SVG path."),i=m(i)),e(Array.isArray(i),"Argument should be a string or an array of path segments."),i=c(i),i=A(i),!i.length)return[0,0,0,0];for(var n=[1/0,1/0,-1/0,-1/0],r=0,v=i.length;r<v;r++)for(var s=i[r].slice(1),o=0;o<s.length;o+=2)s[o+0]<n[0]&&(n[0]=s[o+0]),s[o+1]<n[1]&&(n[1]=s[o+1]),s[o+0]>n[2]&&(n[2]=s[o+0]),s[o+1]>n[3]&&(n[3]=s[o+1]);return n}},{"abs-svg-path":70,assert:75,"is-svg-path":238,"normalize-svg-path":310,"parse-svg-path":250}],310:[function(t,B,V){B.exports=c;var m=t("svg-arc-to-cubic-bezier");function c(e){for(var a,i=[],n=0,r=0,v=0,s=0,o=null,b=null,g=0,d=0,f=0,y=e.length;f<y;f++){var l=e[f],x=l[0];switch(x){case"M":v=l[1],s=l[2];break;case"A":var u=m({px:g,py:d,cx:l[6],cy:l[7],rx:l[1],ry:l[2],xAxisRotation:l[3],largeArcFlag:l[4],sweepFlag:l[5]});if(!u.length)continue;for(var M=0,_;M<u.length;M++)_=u[M],l=["C",_.x1,_.y1,_.x2,_.y2,_.x,_.y],M<u.length-1&&i.push(l);break;case"S":var p=g,w=d;(a=="C"||a=="S")&&(p+=p-n,w+=w-r),l=["C",p,w,l[1],l[2],l[3],l[4]];break;case"T":a=="Q"||a=="T"?(o=g*2-o,b=d*2-b):(o=g,b=d),l=T(g,d,o,b,l[1],l[2]);break;case"Q":o=l[1],b=l[2],l=T(g,d,l[1],l[2],l[3],l[4]);break;case"L":l=A(g,d,l[1],l[2]);break;case"H":l=A(g,d,l[1],d);break;case"V":l=A(g,d,g,l[1]);break;case"Z":l=A(g,d,v,s);break}a=x,g=l[l.length-2],d=l[l.length-1],l.length>4?(n=l[l.length-4],r=l[l.length-3]):(n=g,r=d),i.push(l)}return i}function A(e,a,i,n){return["C",e,a,i,n,i,n]}function T(e,a,i,n,r,v){return["C",e/3+2/3*i,a/3+2/3*n,r/3+2/3*i,v/3+2/3*n,r,v]}},{"svg-arc-to-cubic-bezier":308}],311:[function(t,B,V){var m=t("svg-path-bounds"),c=t("parse-svg-path"),A=t("draw-svg-path"),T=t("is-svg-path"),e=t("bitmap-sdf"),a=document.createElement("canvas"),i=a.getContext("2d");B.exports=n;function n(s,o){if(!T(s))throw Error("Argument should be valid svg path string");o||(o={});var b,g;o.shape?(b=o.shape[0],g=o.shape[1]):(b=a.width=o.w||o.width||200,g=a.height=o.h||o.height||200);var d=Math.min(b,g),f=o.stroke||0,y=o.viewbox||o.viewBox||m(s),l=[b/(y[2]-y[0]),g/(y[3]-y[1])],x=Math.min(l[0]||0,l[1]||0)/2;if(i.fillStyle="black",i.fillRect(0,0,b,g),i.fillStyle="white",f&&(typeof f!="number"&&(f=1),f>0?i.strokeStyle="white":i.strokeStyle="black",i.lineWidth=Math.abs(f)),i.translate(b*.5,g*.5),i.scale(x,x),v()){var u=new Path2D(s);i.fill(u),f&&i.stroke(u)}else{var M=c(s);A(i,M),i.fill(),f&&i.stroke()}i.setTransform(1,0,0,1,0,0);var _=e(i,{cutoff:o.cutoff!=null?o.cutoff:.5,radius:o.radius!=null?o.radius:d*.5});return _}var r;function v(){if(r!=null)return r;var s=document.createElement("canvas").getContext("2d");if(s.canvas.width=s.canvas.height=1,!window.Path2D)return r=!1;var o=new Path2D("M0,0h1v1h-1v-1Z");s.fillStyle="black",s.fill(o);var b=s.getImageData(0,0,1,1);return r=b&&b.data&&b.data[3]===255}},{"bitmap-sdf":82,"draw-svg-path":126,"is-svg-path":238,"parse-svg-path":250,"svg-path-bounds":309}],312:[function(t,B,V){(function(m,c){(function(){var A=t("process/browser.js").nextTick,T=Function.prototype.apply,e=Array.prototype.slice,a={},i=0;V.setTimeout=function(){return new n(T.call(setTimeout,window,arguments),clearTimeout)},V.setInterval=function(){return new n(T.call(setInterval,window,arguments),clearInterval)},V.clearTimeout=V.clearInterval=function(r){r.close()};function n(r,v){this._id=r,this._clearFn=v}n.prototype.unref=n.prototype.ref=function(){},n.prototype.close=function(){this._clearFn.call(window,this._id)},V.enroll=function(r,v){clearTimeout(r._idleTimeoutId),r._idleTimeout=v},V.unenroll=function(r){clearTimeout(r._idleTimeoutId),r._idleTimeout=-1},V._unrefActive=V.active=function(r){clearTimeout(r._idleTimeoutId);var v=r._idleTimeout;v>=0&&(r._idleTimeoutId=setTimeout(function(){r._onTimeout&&r._onTimeout()},v))},V.setImmediate=typeof m=="function"?m:function(r){var v=i++,s=arguments.length<2?!1:e.call(arguments,1);return a[v]=!0,A(function(){a[v]&&(s?r.apply(null,s):r.call(null),V.clearImmediate(v))}),v},V.clearImmediate=typeof c=="function"?c:function(r){delete a[r]}}).call(this)}).call(this,t("timers").setImmediate,t("timers").clearImmediate)},{"process/browser.js":278,timers:312}],313:[function(t,B,V){(function(m){var c=/^\s+/,A=/\s+$/,T=0,e=m.round,a=m.min,i=m.max,n=m.random;function r(j,$){if(j=j||"",$=$||{},j instanceof r)return j;if(!(this instanceof r))return new r(j,$);var ie=v(j);this._originalInput=j,this._r=ie.r,this._g=ie.g,this._b=ie.b,this._a=ie.a,this._roundA=e(100*this._a)/100,this._format=$.format||ie.format,this._gradientType=$.gradientType,this._r<1&&(this._r=e(this._r)),this._g<1&&(this._g=e(this._g)),this._b<1&&(this._b=e(this._b)),this._ok=ie.ok,this._tc_id=T++}r.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var j=this.toRgb();return(j.r*299+j.g*587+j.b*114)/1e3},getLuminance:function(){var j=this.toRgb(),$,ie,oe,ae,se,_e;return $=j.r/255,ie=j.g/255,oe=j.b/255,$<=.03928?ae=$/12.92:ae=m.pow(($+.055)/1.055,2.4),ie<=.03928?se=ie/12.92:se=m.pow((ie+.055)/1.055,2.4),oe<=.03928?_e=oe/12.92:_e=m.pow((oe+.055)/1.055,2.4),.2126*ae+.7152*se+.0722*_e},setAlpha:function(j){return this._a=z(j),this._roundA=e(100*this._a)/100,this},toHsv:function(){var j=g(this._r,this._g,this._b);return{h:j.h*360,s:j.s,v:j.v,a:this._a}},toHsvString:function(){var j=g(this._r,this._g,this._b),$=e(j.h*360),ie=e(j.s*100),oe=e(j.v*100);return this._a==1?"hsv("+$+", "+ie+"%, "+oe+"%)":"hsva("+$+", "+ie+"%, "+oe+"%, "+this._roundA+")"},toHsl:function(){var j=o(this._r,this._g,this._b);return{h:j.h*360,s:j.s,l:j.l,a:this._a}},toHslString:function(){var j=o(this._r,this._g,this._b),$=e(j.h*360),ie=e(j.s*100),oe=e(j.l*100);return this._a==1?"hsl("+$+", "+ie+"%, "+oe+"%)":"hsla("+$+", "+ie+"%, "+oe+"%, "+this._roundA+")"},toHex:function(j){return f(this._r,this._g,this._b,j)},toHexString:function(j){return"#"+this.toHex(j)},toHex8:function(j){return y(this._r,this._g,this._b,this._a,j)},toHex8String:function(j){return"#"+this.toHex8(j)},toRgb:function(){return{r:e(this._r),g:e(this._g),b:e(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+e(this._r)+", "+e(this._g)+", "+e(this._b)+")":"rgba("+e(this._r)+", "+e(this._g)+", "+e(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:e(G(this._r,255)*100)+"%",g:e(G(this._g,255)*100)+"%",b:e(G(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+e(G(this._r,255)*100)+"%, "+e(G(this._g,255)*100)+"%, "+e(G(this._b,255)*100)+"%)":"rgba("+e(G(this._r,255)*100)+"%, "+e(G(this._g,255)*100)+"%, "+e(G(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:R[f(this._r,this._g,this._b,!0)]||!1},toFilter:function(j){var $="#"+l(this._r,this._g,this._b,this._a),ie=$,oe=this._gradientType?"GradientType = 1, ":"";if(j){var ae=r(j);ie="#"+l(ae._r,ae._g,ae._b,ae._a)}return"progid:DXImageTransform.Microsoft.gradient("+oe+"startColorstr="+$+",endColorstr="+ie+")"},toString:function(j){var $=!!j;j=j||this._format;var ie=!1,oe=this._a<1&&this._a>=0,ae=!$&&oe&&(j==="hex"||j==="hex6"||j==="hex3"||j==="hex4"||j==="hex8"||j==="name");return ae?j==="name"&&this._a===0?this.toName():this.toRgbString():(j==="rgb"&&(ie=this.toRgbString()),j==="prgb"&&(ie=this.toPercentageRgbString()),(j==="hex"||j==="hex6")&&(ie=this.toHexString()),j==="hex3"&&(ie=this.toHexString(!0)),j==="hex4"&&(ie=this.toHex8String(!0)),j==="hex8"&&(ie=this.toHex8String()),j==="name"&&(ie=this.toName()),j==="hsl"&&(ie=this.toHslString()),j==="hsv"&&(ie=this.toHsvString()),ie||this.toHexString())},clone:function(){return r(this.toString())},_applyModification:function(j,$){var ie=j.apply(null,[this].concat([].slice.call($)));return this._r=ie._r,this._g=ie._g,this._b=ie._b,this.setAlpha(ie._a),this},lighten:function(){return this._applyModification(_,arguments)},brighten:function(){return this._applyModification(p,arguments)},darken:function(){return this._applyModification(w,arguments)},desaturate:function(){return this._applyModification(x,arguments)},saturate:function(){return this._applyModification(u,arguments)},greyscale:function(){return this._applyModification(M,arguments)},spin:function(){return this._applyModification(h,arguments)},_applyCombination:function(j,$){return j.apply(null,[this].concat([].slice.call($)))},analogous:function(){return this._applyCombination(F,arguments)},complement:function(){return this._applyCombination(L,arguments)},monochromatic:function(){return this._applyCombination(I,arguments)},splitcomplement:function(){return this._applyCombination(P,arguments)},triad:function(){return this._applyCombination(S,arguments)},tetrad:function(){return this._applyCombination(E,arguments)}},r.fromRatio=function(j,$){if(typeof j=="object"){var ie={};for(var oe in j)j.hasOwnProperty(oe)&&(oe==="a"?ie[oe]=j[oe]:ie[oe]=ce(j[oe]));j=ie}return r(j,$)};function v(j){var $={r:0,g:0,b:0},ie=1,oe=null,ae=null,se=null,_e=!1,ue=!1;return typeof j=="string"&&(j=q(j)),typeof j=="object"&&(H(j.r)&&H(j.g)&&H(j.b)?($=s(j.r,j.g,j.b),_e=!0,ue=String(j.r).substr(-1)==="%"?"prgb":"rgb"):H(j.h)&&H(j.s)&&H(j.v)?(oe=ce(j.s),ae=ce(j.v),$=d(j.h,oe,ae),_e=!0,ue="hsv"):H(j.h)&&H(j.s)&&H(j.l)&&(oe=ce(j.s),se=ce(j.l),$=b(j.h,oe,se),_e=!0,ue="hsl"),j.hasOwnProperty("a")&&(ie=j.a)),ie=z(ie),{ok:_e,format:j.format||ue,r:a(255,i($.r,0)),g:a(255,i($.g,0)),b:a(255,i($.b,0)),a:ie}}function s(j,$,ie){return{r:G(j,255)*255,g:G($,255)*255,b:G(ie,255)*255}}function o(j,$,ie){j=G(j,255),$=G($,255),ie=G(ie,255);var oe=i(j,$,ie),ae=a(j,$,ie),se,_e,ue=(oe+ae)/2;if(oe==ae)se=_e=0;else{var ye=oe-ae;switch(_e=ue>.5?ye/(2-oe-ae):ye/(oe+ae),oe){case j:se=($-ie)/ye+($<ie?6:0);break;case $:se=(ie-j)/ye+2;break;case ie:se=(j-$)/ye+4;break}se/=6}return{h:se,s:_e,l:ue}}function b(j,$,ie){var oe,ae,se;j=G(j,360),$=G($,100),ie=G(ie,100);function _e(xe,me,be){return be<0&&(be+=1),be>1&&(be-=1),be<1/6?xe+(me-xe)*6*be:be<1/2?me:be<2/3?xe+(me-xe)*(2/3-be)*6:xe}if($===0)oe=ae=se=ie;else{var ue=ie<.5?ie*(1+$):ie+$-ie*$,ye=2*ie-ue;oe=_e(ye,ue,j+1/3),ae=_e(ye,ue,j),se=_e(ye,ue,j-1/3)}return{r:oe*255,g:ae*255,b:se*255}}function g(j,$,ie){j=G(j,255),$=G($,255),ie=G(ie,255);var oe=i(j,$,ie),ae=a(j,$,ie),se,_e,ue=oe,ye=oe-ae;if(_e=oe===0?0:ye/oe,oe==ae)se=0;else{switch(oe){case j:se=($-ie)/ye+($<ie?6:0);break;case $:se=(ie-j)/ye+2;break;case ie:se=(j-$)/ye+4;break}se/=6}return{h:se,s:_e,v:ue}}function d(j,$,ie){j=G(j,360)*6,$=G($,100),ie=G(ie,100);var oe=m.floor(j),ae=j-oe,se=ie*(1-$),_e=ie*(1-ae*$),ue=ie*(1-(1-ae)*$),ye=oe%6,xe=[ie,_e,se,se,ue,ie][ye],me=[ue,ie,ie,_e,se,se][ye],be=[se,se,ue,ie,ie,_e][ye];return{r:xe*255,g:me*255,b:be*255}}function f(j,$,ie,oe){var ae=[ne(e(j).toString(16)),ne(e($).toString(16)),ne(e(ie).toString(16))];return oe&&ae[0].charAt(0)==ae[0].charAt(1)&&ae[1].charAt(0)==ae[1].charAt(1)&&ae[2].charAt(0)==ae[2].charAt(1)?ae[0].charAt(0)+ae[1].charAt(0)+ae[2].charAt(0):ae.join("")}function y(j,$,ie,oe,ae){var se=[ne(e(j).toString(16)),ne(e($).toString(16)),ne(e(ie).toString(16)),ne(Q(oe))];return ae&&se[0].charAt(0)==se[0].charAt(1)&&se[1].charAt(0)==se[1].charAt(1)&&se[2].charAt(0)==se[2].charAt(1)&&se[3].charAt(0)==se[3].charAt(1)?se[0].charAt(0)+se[1].charAt(0)+se[2].charAt(0)+se[3].charAt(0):se.join("")}function l(j,$,ie,oe){var ae=[ne(Q(oe)),ne(e(j).toString(16)),ne(e($).toString(16)),ne(e(ie).toString(16))];return ae.join("")}r.equals=function(j,$){return!j||!$?!1:r(j).toRgbString()==r($).toRgbString()},r.random=function(){return r.fromRatio({r:n(),g:n(),b:n()})};function x(j,$){$=$===0?0:$||10;var ie=r(j).toHsl();return ie.s-=$/100,ie.s=Y(ie.s),r(ie)}function u(j,$){$=$===0?0:$||10;var ie=r(j).toHsl();return ie.s+=$/100,ie.s=Y(ie.s),r(ie)}function M(j){return r(j).desaturate(100)}function _(j,$){$=$===0?0:$||10;var ie=r(j).toHsl();return ie.l+=$/100,ie.l=Y(ie.l),r(ie)}function p(j,$){$=$===0?0:$||10;var ie=r(j).toRgb();return ie.r=i(0,a(255,ie.r-e(255*-($/100)))),ie.g=i(0,a(255,ie.g-e(255*-($/100)))),ie.b=i(0,a(255,ie.b-e(255*-($/100)))),r(ie)}function w(j,$){$=$===0?0:$||10;var ie=r(j).toHsl();return ie.l-=$/100,ie.l=Y(ie.l),r(ie)}function h(j,$){var ie=r(j).toHsl(),oe=(ie.h+$)%360;return ie.h=oe<0?360+oe:oe,r(ie)}function L(j){var $=r(j).toHsl();return $.h=($.h+180)%360,r($)}function S(j){var $=r(j).toHsl(),ie=$.h;return[r(j),r({h:(ie+120)%360,s:$.s,l:$.l}),r({h:(ie+240)%360,s:$.s,l:$.l})]}function E(j){var $=r(j).toHsl(),ie=$.h;return[r(j),r({h:(ie+90)%360,s:$.s,l:$.l}),r({h:(ie+180)%360,s:$.s,l:$.l}),r({h:(ie+270)%360,s:$.s,l:$.l})]}function P(j){var $=r(j).toHsl(),ie=$.h;return[r(j),r({h:(ie+72)%360,s:$.s,l:$.l}),r({h:(ie+216)%360,s:$.s,l:$.l})]}function F(j,$,ie){$=$||6,ie=ie||30;var oe=r(j).toHsl(),ae=360/ie,se=[r(j)];for(oe.h=(oe.h-(ae*$>>1)+720)%360;--$;)oe.h=(oe.h+ae)%360,se.push(r(oe));return se}function I(j,$){$=$||6;for(var ie=r(j).toHsv(),oe=ie.h,ae=ie.s,se=ie.v,_e=[],ue=1/$;$--;)_e.push(r({h:oe,s:ae,v:se})),se=(se+ue)%1;return _e}r.mix=function(j,$,ie){ie=ie===0?0:ie||50;var oe=r(j).toRgb(),ae=r($).toRgb(),se=ie/100,_e={r:(ae.r-oe.r)*se+oe.r,g:(ae.g-oe.g)*se+oe.g,b:(ae.b-oe.b)*se+oe.b,a:(ae.a-oe.a)*se+oe.a};return r(_e)},r.readability=function(j,$){var ie=r(j),oe=r($);return(m.max(ie.getLuminance(),oe.getLuminance())+.05)/(m.min(ie.getLuminance(),oe.getLuminance())+.05)},r.isReadable=function(j,$,ie){var oe=r.readability(j,$),ae,se;switch(se=!1,ae=re(ie),ae.level+ae.size){case"AAsmall":case"AAAlarge":se=oe>=4.5;break;case"AAlarge":se=oe>=3;break;case"AAAsmall":se=oe>=7;break}return se},r.mostReadable=function(j,$,ie){var oe=null,ae=0,se,_e,ue,ye;ie=ie||{},_e=ie.includeFallbackColors,ue=ie.level,ye=ie.size;for(var xe=0;xe<$.length;xe++)se=r.readability(j,$[xe]),se>ae&&(ae=se,oe=r($[xe]));return r.isReadable(j,oe,{level:ue,size:ye})||!_e?oe:(ie.includeFallbackColors=!1,r.mostReadable(j,["#fff","#000"],ie))};var D=r.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},R=r.hexNames=N(D);function N(j){var $={};for(var ie in j)j.hasOwnProperty(ie)&&($[j[ie]]=ie);return $}function z(j){return j=parseFloat(j),(isNaN(j)||j<0||j>1)&&(j=1),j}function G(j,$){Z(j)&&(j="100%");var ie=X(j);return j=a($,i(0,parseFloat(j))),ie&&(j=parseInt(j*$,10)/100),m.abs(j-$)<1e-6?1:j%$/parseFloat($)}function Y(j){return a(1,i(0,j))}function ee(j){return parseInt(j,16)}function Z(j){return typeof j=="string"&&j.indexOf(".")!=-1&&parseFloat(j)===1}function X(j){return typeof j=="string"&&j.indexOf("%")!=-1}function ne(j){return j.length==1?"0"+j:""+j}function ce(j){return j<=1&&(j=j*100+"%"),j}function Q(j){return m.round(parseFloat(j)*255).toString(16)}function K(j){return ee(j)/255}var U=function(){var j="[-\\+]?\\d+%?",$="[-\\+]?\\d*\\.\\d+%?",ie="(?:"+$+")|(?:"+j+")",oe="[\\s|\\(]+("+ie+")[,|\\s]+("+ie+")[,|\\s]+("+ie+")\\s*\\)?",ae="[\\s|\\(]+("+ie+")[,|\\s]+("+ie+")[,|\\s]+("+ie+")[,|\\s]+("+ie+")\\s*\\)?";return{CSS_UNIT:new RegExp(ie),rgb:new RegExp("rgb"+oe),rgba:new RegExp("rgba"+ae),hsl:new RegExp("hsl"+oe),hsla:new RegExp("hsla"+ae),hsv:new RegExp("hsv"+oe),hsva:new RegExp("hsva"+ae),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function H(j){return!!U.CSS_UNIT.exec(j)}function q(j){j=j.replace(c,"").replace(A,"").toLowerCase();var $=!1;if(D[j])j=D[j],$=!0;else if(j=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var ie;return(ie=U.rgb.exec(j))?{r:ie[1],g:ie[2],b:ie[3]}:(ie=U.rgba.exec(j))?{r:ie[1],g:ie[2],b:ie[3],a:ie[4]}:(ie=U.hsl.exec(j))?{h:ie[1],s:ie[2],l:ie[3]}:(ie=U.hsla.exec(j))?{h:ie[1],s:ie[2],l:ie[3],a:ie[4]}:(ie=U.hsv.exec(j))?{h:ie[1],s:ie[2],v:ie[3]}:(ie=U.hsva.exec(j))?{h:ie[1],s:ie[2],v:ie[3],a:ie[4]}:(ie=U.hex8.exec(j))?{r:ee(ie[1]),g:ee(ie[2]),b:ee(ie[3]),a:K(ie[4]),format:$?"name":"hex8"}:(ie=U.hex6.exec(j))?{r:ee(ie[1]),g:ee(ie[2]),b:ee(ie[3]),format:$?"name":"hex"}:(ie=U.hex4.exec(j))?{r:ee(ie[1]+""+ie[1]),g:ee(ie[2]+""+ie[2]),b:ee(ie[3]+""+ie[3]),a:K(ie[4]+""+ie[4]),format:$?"name":"hex8"}:(ie=U.hex3.exec(j))?{r:ee(ie[1]+""+ie[1]),g:ee(ie[2]+""+ie[2]),b:ee(ie[3]+""+ie[3]),format:$?"name":"hex"}:!1}function re(j){var $,ie;return j=j||{level:"AA",size:"small"},$=(j.level||"AA").toUpperCase(),ie=(j.size||"small").toLowerCase(),$!=="AA"&&$!=="AAA"&&($="AA"),ie!=="small"&&ie!=="large"&&(ie="small"),{level:$,size:ie}}typeof B<"u"&&B.exports?B.exports=r:window.tinycolor=r})(Math)},{}],314:[function(t,B,V){B.exports=A,B.exports.float32=B.exports.float=A,B.exports.fract32=B.exports.fract=c;var m=new Float32Array(1);function c(T,e){if(T.length){if(T instanceof Float32Array)return new Float32Array(T.length);e instanceof Float32Array||(e=A(T));for(var a=0,i=e.length;a<i;a++)e[a]=T[a]-e[a];return e}return A(T-A(T))}function A(T){return T.length?T instanceof Float32Array?T:new Float32Array(T):(m[0]=T,m[0])}},{}],315:[function(t,B,V){var m=t("parse-unit");B.exports=e;var c=96;function A(a,i){var n=m(getComputedStyle(a).getPropertyValue(i));return n[0]*e(n[1],a)}function T(a,i){var n=document.createElement("div");n.style["font-size"]="128"+a,i.appendChild(n);var r=A(n,"font-size")/128;return i.removeChild(n),r}function e(a,i){switch(i=i||document.body,a=(a||"px").trim().toLowerCase(),(i===window||i===document)&&(i=document.body),a){case"%":return i.clientHeight/100;case"ch":case"ex":return T(a,i);case"em":return A(i,"font-size");case"rem":return A(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return c;case"cm":return c/2.54;case"mm":return c/25.4;case"pt":return c/72;case"pc":return c/6}return 1}},{"parse-unit":251}],316:[function(t,B,V){(function(m,c){typeof V=="object"&&typeof B<"u"?c(V):(m=m||self,c(m.topojson=m.topojson||{}))})(this,function(m){function c(u){return u}function A(u){if(u==null)return c;var M,_,p=u.scale[0],w=u.scale[1],h=u.translate[0],L=u.translate[1];return function(S,E){E||(M=_=0);var P=2,F=S.length,I=new Array(F);for(I[0]=(M+=S[0])*p+h,I[1]=(_+=S[1])*w+L;P<F;)I[P]=S[P],++P;return I}}function T(u){var M=A(u.transform),_,p=1/0,w=p,h=-p,L=-p;function S(P){P=M(P),P[0]<p&&(p=P[0]),P[0]>h&&(h=P[0]),P[1]<w&&(w=P[1]),P[1]>L&&(L=P[1])}function E(P){switch(P.type){case"GeometryCollection":P.geometries.forEach(E);break;case"Point":S(P.coordinates);break;case"MultiPoint":P.coordinates.forEach(S);break}}u.arcs.forEach(function(P){for(var F=-1,I=P.length,D;++F<I;)D=M(P[F],F),D[0]<p&&(p=D[0]),D[0]>h&&(h=D[0]),D[1]<w&&(w=D[1]),D[1]>L&&(L=D[1])});for(_ in u.objects)E(u.objects[_]);return[p,w,h,L]}function e(u,M){for(var _,p=u.length,w=p-M;w<--p;)_=u[w],u[w++]=u[p],u[p]=_}function a(u,M){return typeof M=="string"&&(M=u.objects[M]),M.type==="GeometryCollection"?{type:"FeatureCollection",features:M.geometries.map(function(_){return i(u,_)})}:i(u,M)}function i(u,M){var _=M.id,p=M.bbox,w=M.properties==null?{}:M.properties,h=n(u,M);return _==null&&p==null?{type:"Feature",properties:w,geometry:h}:p==null?{type:"Feature",id:_,properties:w,geometry:h}:{type:"Feature",id:_,bbox:p,properties:w,geometry:h}}function n(u,M){var _=A(u.transform),p=u.arcs;function w(F,I){I.length&&I.pop();for(var D=p[F<0?~F:F],R=0,N=D.length;R<N;++R)I.push(_(D[R],R));F<0&&e(I,N)}function h(F){return _(F)}function L(F){for(var I=[],D=0,R=F.length;D<R;++D)w(F[D],I);return I.length<2&&I.push(I[0]),I}function S(F){for(var I=L(F);I.length<4;)I.push(I[0]);return I}function E(F){return F.map(S)}function P(F){var I=F.type,D;switch(I){case"GeometryCollection":return{type:I,geometries:F.geometries.map(P)};case"Point":D=h(F.coordinates);break;case"MultiPoint":D=F.coordinates.map(h);break;case"LineString":D=L(F.arcs);break;case"MultiLineString":D=F.arcs.map(L);break;case"Polygon":D=E(F.arcs);break;case"MultiPolygon":D=F.arcs.map(E);break;default:return null}return{type:I,coordinates:D}}return P(M)}function r(u,M){var _={},p={},w={},h=[],L=-1;M.forEach(function(P,F){var I=u.arcs[P<0?~P:P],D;I.length<3&&!I[1][0]&&!I[1][1]&&(D=M[++L],M[L]=P,M[F]=D)}),M.forEach(function(P){var F=S(P),I=F[0],D=F[1],R,N;if(R=w[I])if(delete w[R.end],R.push(P),R.end=D,N=p[D]){delete p[N.start];var z=N===R?R:R.concat(N);p[z.start=R.start]=w[z.end=N.end]=z}else p[R.start]=w[R.end]=R;else if(R=p[D])if(delete p[R.start],R.unshift(P),R.start=I,N=w[I]){delete w[N.end];var G=N===R?R:N.concat(R);p[G.start=N.start]=w[G.end=R.end]=G}else p[R.start]=w[R.end]=R;else R=[P],p[R.start=I]=w[R.end=D]=R});function S(P){var F=u.arcs[P<0?~P:P],I=F[0],D;return u.transform?(D=[0,0],F.forEach(function(R){D[0]+=R[0],D[1]+=R[1]})):D=F[F.length-1],P<0?[D,I]:[I,D]}function E(P,F){for(var I in P){var D=P[I];delete F[D.start],delete D.start,delete D.end,D.forEach(function(R){_[R<0?~R:R]=1}),h.push(D)}}return E(w,p),E(p,w),M.forEach(function(P){_[P<0?~P:P]||h.push([P])}),h}function v(u){return n(u,s.apply(this,arguments))}function s(u,M,_){var p,w,h;if(arguments.length>1)p=o(u,M,_);else for(w=0,p=new Array(h=u.arcs.length);w<h;++w)p[w]=w;return{type:"MultiLineString",arcs:r(u,p)}}function o(u,M,_){var p=[],w=[],h;function L(I){var D=I<0?~I:I;(w[D]||(w[D]=[])).push({i:I,g:h})}function S(I){I.forEach(L)}function E(I){I.forEach(S)}function P(I){I.forEach(E)}function F(I){switch(h=I,I.type){case"GeometryCollection":I.geometries.forEach(F);break;case"LineString":S(I.arcs);break;case"MultiLineString":case"Polygon":E(I.arcs);break;case"MultiPolygon":P(I.arcs);break}}return F(M),w.forEach(_==null?function(I){p.push(I[0].i)}:function(I){_(I[0].g,I[I.length-1].g)&&p.push(I[0].i)}),p}function b(u){for(var M=-1,_=u.length,p,w=u[_-1],h=0;++M<_;)p=w,w=u[M],h+=p[0]*w[1]-p[1]*w[0];return Math.abs(h)}function g(u){return n(u,d.apply(this,arguments))}function d(u,M){var _={},p=[],w=[];M.forEach(h);function h(E){switch(E.type){case"GeometryCollection":E.geometries.forEach(h);break;case"Polygon":L(E.arcs);break;case"MultiPolygon":E.arcs.forEach(L);break}}function L(E){E.forEach(function(P){P.forEach(function(F){(_[F=F<0?~F:F]||(_[F]=[])).push(E)})}),p.push(E)}function S(E){return b(n(u,{type:"Polygon",arcs:[E]}).coordinates[0])}return p.forEach(function(E){if(!E._){var P=[],F=[E];for(E._=1,w.push(P);E=F.pop();)P.push(E),E.forEach(function(I){I.forEach(function(D){_[D<0?~D:D].forEach(function(R){R._||(R._=1,F.push(R))})})})}}),p.forEach(function(E){delete E._}),{type:"MultiPolygon",arcs:w.map(function(E){var P=[],F;if(E.forEach(function(z){z.forEach(function(G){G.forEach(function(Y){_[Y<0?~Y:Y].length<2&&P.push(Y)})})}),P=r(u,P),(F=P.length)>1)for(var I=1,D=S(P[0]),R,N;I<F;++I)(R=S(P[I]))>D&&(N=P[0],P[0]=P[I],P[I]=N,D=R);return P}).filter(function(E){return E.length>0})}}function f(u,M){for(var _=0,p=u.length;_<p;){var w=_+p>>>1;u[w]<M?_=w+1:p=w}return _}function y(u){var M={},_=u.map(function(){return[]});function p(z,G){z.forEach(function(Y){Y<0&&(Y=~Y);var ee=M[Y];ee?ee.push(G):M[Y]=[G]})}function w(z,G){z.forEach(function(Y){p(Y,G)})}function h(z,G){z.type==="GeometryCollection"?z.geometries.forEach(function(Y){h(Y,G)}):z.type in L&&L[z.type](z.arcs,G)}var L={LineString:p,MultiLineString:w,Polygon:w,MultiPolygon:function(z,G){z.forEach(function(Y){w(Y,G)})}};u.forEach(h);for(var S in M)for(var E=M[S],P=E.length,F=0;F<P;++F)for(var I=F+1;I<P;++I){var D=E[F],R=E[I],N;(N=_[D])[S=f(N,R)]!==R&&N.splice(S,0,R),(N=_[R])[S=f(N,D)]!==D&&N.splice(S,0,D)}return _}function l(u){if(u==null)return c;var M,_,p=u.scale[0],w=u.scale[1],h=u.translate[0],L=u.translate[1];return function(S,E){E||(M=_=0);var P=2,F=S.length,I=new Array(F),D=Math.round((S[0]-h)/p),R=Math.round((S[1]-L)/w);for(I[0]=D-M,M=D,I[1]=R-_,_=R;P<F;)I[P]=S[P],++P;return I}}function x(u,M){if(u.transform)throw new Error("already quantized");if(!M||!M.scale){if(!((L=Math.floor(M))>=2))throw new Error("n must be \u22652");E=u.bbox||T(u);var _=E[0],p=E[1],w=E[2],h=E[3],L;M={scale:[w-_?(w-_)/(L-1):1,h-p?(h-p)/(L-1):1],translate:[_,p]}}else E=u.bbox;var S=l(M),E,P,F=u.objects,I={};function D(z){return S(z)}function R(z){var G;switch(z.type){case"GeometryCollection":G={type:"GeometryCollection",geometries:z.geometries.map(R)};break;case"Point":G={type:"Point",coordinates:D(z.coordinates)};break;case"MultiPoint":G={type:"MultiPoint",coordinates:z.coordinates.map(D)};break;default:return z}return z.id!=null&&(G.id=z.id),z.bbox!=null&&(G.bbox=z.bbox),z.properties!=null&&(G.properties=z.properties),G}function N(z){var G=0,Y=1,ee=z.length,Z,X=new Array(ee);for(X[0]=S(z[0],0);++G<ee;)((Z=S(z[G],G))[0]||Z[1])&&(X[Y++]=Z);return Y===1&&(X[Y++]=[0,0]),X.length=Y,X}for(P in F)I[P]=R(F[P]);return{type:"Topology",bbox:E,transform:M,objects:I,arcs:u.arcs.map(N)}}m.bbox=T,m.feature=a,m.merge=g,m.mergeArcs=d,m.mesh=v,m.meshArcs=s,m.neighbors=y,m.quantize=x,m.transform=A,m.untransform=l,Object.defineProperty(m,"__esModule",{value:!0})})},{}],317:[function(t,B,V){var m=t("../prototype/is");B.exports=function(c){if(typeof c!="function"||!hasOwnProperty.call(c,"length"))return!1;try{if(typeof c.length!="number"||typeof c.call!="function"||typeof c.apply!="function")return!1}catch{return!1}return!m(c)}},{"../prototype/is":324}],318:[function(t,B,V){var m=t("../value/is"),c=t("../object/is"),A=t("../string/coerce"),T=t("./to-short-string"),e=function(a,i){return a.replace("%v",T(i))};B.exports=function(a,i,n){if(!c(n))throw new TypeError(e(i,a));if(!m(a)){if("default"in n)return n.default;if(n.isOptional)return null}var r=A(n.errorMessage);throw m(r)||(r=i),new TypeError(e(r,a))}},{"../object/is":321,"../string/coerce":325,"../value/is":327,"./to-short-string":320}],319:[function(t,B,V){B.exports=function(m){try{return m.toString()}catch{try{return String(m)}catch{return null}}}},{}],320:[function(t,B,V){var m=t("./safe-to-string"),c=/[\n\r\u2028\u2029]/g;B.exports=function(A){var T=m(A);return T===null?"<Non-coercible to string value>":(T.length>100&&(T=T.slice(0,99)+"\u2026"),T=T.replace(c,function(e){switch(e){case`
`:return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}),T)}},{"./safe-to-string":319}],321:[function(t,B,V){var m=t("../value/is"),c={object:!0,function:!0,undefined:!0};B.exports=function(A){return m(A)?hasOwnProperty.call(c,typeof A):!1}},{"../value/is":327}],322:[function(t,B,V){var m=t("../lib/resolve-exception"),c=t("./is");B.exports=function(A){return c(A)?A:m(A,"%v is not a plain function",arguments[1])}},{"../lib/resolve-exception":318,"./is":323}],323:[function(t,B,V){var m=t("../function/is"),c=/^\s*class[\s{/}]/,A=Function.prototype.toString;B.exports=function(T){return!(!m(T)||c.test(A.call(T)))}},{"../function/is":317}],324:[function(t,B,V){var m=t("../object/is");B.exports=function(c){if(!m(c))return!1;try{return c.constructor?c.constructor.prototype===c:!1}catch{return!1}}},{"../object/is":321}],325:[function(t,B,V){var m=t("../value/is"),c=t("../object/is"),A=Object.prototype.toString;B.exports=function(T){if(!m(T))return null;if(c(T)){var e=T.toString;if(typeof e!="function"||e===A)return null}try{return""+T}catch{return null}}},{"../object/is":321,"../value/is":327}],326:[function(t,B,V){var m=t("../lib/resolve-exception"),c=t("./is");B.exports=function(A){return c(A)?A:m(A,"Cannot use %v",arguments[1])}},{"../lib/resolve-exception":318,"./is":327}],327:[function(t,B,V){var m=void 0;B.exports=function(c){return c!==m&&c!==null}},{}],328:[function(t,B,V){(function(m){(function(){var c=t("bit-twiddle"),A=t("dup"),T=t("buffer").Buffer;m.__TYPEDARRAY_POOL||(m.__TYPEDARRAY_POOL={UINT8:A([32,0]),UINT16:A([32,0]),UINT32:A([32,0]),BIGUINT64:A([32,0]),INT8:A([32,0]),INT16:A([32,0]),INT32:A([32,0]),BIGINT64:A([32,0]),FLOAT:A([32,0]),DOUBLE:A([32,0]),DATA:A([32,0]),UINT8C:A([32,0]),BUFFER:A([32,0])});var e=typeof Uint8ClampedArray<"u",a=typeof BigUint64Array<"u",i=typeof BigInt64Array<"u",n=m.__TYPEDARRAY_POOL;n.UINT8C||(n.UINT8C=A([32,0])),n.BIGUINT64||(n.BIGUINT64=A([32,0])),n.BIGINT64||(n.BIGINT64=A([32,0])),n.BUFFER||(n.BUFFER=A([32,0]));var r=n.DATA,v=n.BUFFER;V.free=function(E){if(T.isBuffer(E))v[c.log2(E.length)].push(E);else{if(Object.prototype.toString.call(E)!=="[object ArrayBuffer]"&&(E=E.buffer),!E)return;var P=E.length||E.byteLength,F=c.log2(P)|0;r[F].push(E)}};function s(S){if(!!S){var E=S.length||S.byteLength,P=c.log2(E);r[P].push(S)}}function o(S){s(S.buffer)}V.freeUint8=V.freeUint16=V.freeUint32=V.freeBigUint64=V.freeInt8=V.freeInt16=V.freeInt32=V.freeBigInt64=V.freeFloat32=V.freeFloat=V.freeFloat64=V.freeDouble=V.freeUint8Clamped=V.freeDataView=o,V.freeArrayBuffer=s,V.freeBuffer=function(E){v[c.log2(E.length)].push(E)},V.malloc=function(E,P){if(P===void 0||P==="arraybuffer")return b(E);switch(P){case"uint8":return g(E);case"uint16":return d(E);case"uint32":return f(E);case"int8":return y(E);case"int16":return l(E);case"int32":return x(E);case"float":case"float32":return u(E);case"double":case"float64":return M(E);case"uint8_clamped":return _(E);case"bigint64":return w(E);case"biguint64":return p(E);case"buffer":return L(E);case"data":case"dataview":return h(E);default:return null}return null};function b(E){var E=c.nextPow2(E),P=c.log2(E),F=r[P];return F.length>0?F.pop():new ArrayBuffer(E)}V.mallocArrayBuffer=b;function g(S){return new Uint8Array(b(S),0,S)}V.mallocUint8=g;function d(S){return new Uint16Array(b(2*S),0,S)}V.mallocUint16=d;function f(S){return new Uint32Array(b(4*S),0,S)}V.mallocUint32=f;function y(S){return new Int8Array(b(S),0,S)}V.mallocInt8=y;function l(S){return new Int16Array(b(2*S),0,S)}V.mallocInt16=l;function x(S){return new Int32Array(b(4*S),0,S)}V.mallocInt32=x;function u(S){return new Float32Array(b(4*S),0,S)}V.mallocFloat32=V.mallocFloat=u;function M(S){return new Float64Array(b(8*S),0,S)}V.mallocFloat64=V.mallocDouble=M;function _(S){return e?new Uint8ClampedArray(b(S),0,S):g(S)}V.mallocUint8Clamped=_;function p(S){return a?new BigUint64Array(b(8*S),0,S):null}V.mallocBigUint64=p;function w(S){return i?new BigInt64Array(b(8*S),0,S):null}V.mallocBigInt64=w;function h(S){return new DataView(b(S),0,S)}V.mallocDataView=h;function L(S){S=c.nextPow2(S);var E=c.log2(S),P=v[E];return P.length>0?P.pop():new T(S)}V.mallocBuffer=L,V.clearCache=function(){for(var E=0;E<32;++E)n.UINT8[E].length=0,n.UINT16[E].length=0,n.UINT32[E].length=0,n.INT8[E].length=0,n.INT16[E].length=0,n.INT32[E].length=0,n.FLOAT[E].length=0,n.DOUBLE[E].length=0,n.BIGUINT64[E].length=0,n.BIGINT64[E].length=0,n.UINT8C[E].length=0,r[E].length=0,v[E].length=0}}).call(this)}).call(this,typeof Ro<"u"?Ro:typeof self<"u"?self:typeof window<"u"?window:{})},{"bit-twiddle":81,buffer:85,dup:128}],329:[function(t,B,V){var m=/[\'\"]/;B.exports=function(A){return A?(m.test(A.charAt(0))&&(A=A.substr(1)),m.test(A.charAt(A.length-1))&&(A=A.substr(0,A.length-1)),A):""}},{}],330:[function(t,B,V){B.exports=function(c,A,T){Array.isArray(T)||(T=[].slice.call(arguments,2));for(var e=0,a=T.length;e<a;e++){var i=T[e];for(var n in i)if(!(A[n]!==void 0&&!Array.isArray(A[n])&&c[n]===A[n])&&n in A){var r;if(i[n]===!0)r=A[n];else{if(i[n]===!1)continue;if(typeof i[n]=="function"&&(r=i[n](A[n],c,A),r===void 0))continue}c[n]=r}}return c}},{}],331:[function(t,B,V){(function(m){(function(){B.exports=c;function c(T,e){if(A("noDeprecation"))return T;var a=!1;function i(){if(!a){if(A("throwDeprecation"))throw new Error(e);A("traceDeprecation")?console.trace(e):console.warn(e),a=!0}return T.apply(this,arguments)}return i}function A(T){try{if(!m.localStorage)return!1}catch{return!1}var e=m.localStorage[T];return e==null?!1:String(e).toLowerCase()==="true"}}).call(this)}).call(this,typeof Ro<"u"?Ro:typeof self<"u"?self:typeof window<"u"?window:{})},{}],332:[function(t,B,V){var m=t("get-canvas-context");B.exports=function(A){return m("webgl",A)}},{"get-canvas-context":194}],333:[function(t,B,V){var m=t("../main"),c=t("object-assign"),A=m.instance();function T(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}T.prototype=new m.baseCalendar,c(T.prototype,{name:"Chinese",jdEpoch:17214255e-1,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(b,g){if(typeof b=="string"){var d=b.match(a);return d?d[0]:""}var f=this._validateYear(b),y=b.month(),l=""+this.toChineseMonth(f,y);return g&&l.length<2&&(l="0"+l),this.isIntercalaryMonth(f,y)&&(l+="i"),l},monthNames:function(b){if(typeof b=="string"){var g=b.match(i);return g?g[0]:""}var d=this._validateYear(b),f=b.month(),y=this.toChineseMonth(d,f),l=["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"][y-1];return this.isIntercalaryMonth(d,f)&&(l="\u95F0"+l),l},monthNamesShort:function(b){if(typeof b=="string"){var g=b.match(n);return g?g[0]:""}var d=this._validateYear(b),f=b.month(),y=this.toChineseMonth(d,f),l=["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"][y-1];return this.isIntercalaryMonth(d,f)&&(l="\u95F0"+l),l},parseMonth:function(b,g){b=this._validateYear(b);var d=parseInt(g),f;if(isNaN(d))g[0]==="\u95F0"&&(f=!0,g=g.substring(1)),g[g.length-1]==="\u6708"&&(g=g.substring(0,g.length-1)),d=1+["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"].indexOf(g);else{var y=g[g.length-1];f=y==="i"||y==="I"}var l=this.toMonthIndex(b,d,f);return l},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(b,g){if(b.year&&(b=b.year()),typeof b!="number"||b<1888||b>2111)throw g.replace(/\{0\}/,this.local.name);return b},toMonthIndex:function(b,g,d){var f=this.intercalaryMonth(b),y=d&&g!==f;if(y||g<1||g>12)throw m.local.invalidMonth.replace(/\{0\}/,this.local.name);var l;return f?!d&&g<=f?l=g-1:l=g:l=g-1,l},toChineseMonth:function(b,g){b.year&&(b=b.year(),g=b.month());var d=this.intercalaryMonth(b),f=d?12:11;if(g<0||g>f)throw m.local.invalidMonth.replace(/\{0\}/,this.local.name);var y;return d?g<d?y=g+1:y=g:y=g+1,y},intercalaryMonth:function(b){b=this._validateYear(b);var g=r[b-r[0]],d=g>>13;return d},isIntercalaryMonth:function(b,g){b.year&&(b=b.year(),g=b.month());var d=this.intercalaryMonth(b);return!!d&&d===g},leapYear:function(b){return this.intercalaryMonth(b)!==0},weekOfYear:function(b,g,d){var f=this._validateYear(b,m.local.invalidyear),y=v[f-v[0]],l=y>>9&4095,x=y>>5&15,u=y&31,M;M=A.newDate(l,x,u),M.add(4-(M.dayOfWeek()||7),"d");var _=this.toJD(b,g,d)-M.toJD();return 1+Math.floor(_/7)},monthsInYear:function(b){return this.leapYear(b)?13:12},daysInMonth:function(b,g){b.year&&(g=b.month(),b=b.year()),b=this._validateYear(b);var d=r[b-r[0]],f=d>>13,y=f?12:11;if(g>y)throw m.local.invalidMonth.replace(/\{0\}/,this.local.name);var l=d&1<<12-g?30:29;return l},weekDay:function(b,g,d){return(this.dayOfWeek(b,g,d)||7)<6},toJD:function(b,g,d){var f=this._validate(b,l,d,m.local.invalidDate);b=this._validateYear(f.year()),g=f.month(),d=f.day();var y=this.isIntercalaryMonth(b,g),l=this.toChineseMonth(b,g),x=o(b,l,d,y);return A.toJD(x.year,x.month,x.day)},fromJD:function(b){var g=A.fromJD(b),d=s(g.year(),g.month(),g.day()),f=this.toMonthIndex(d.year,d.month,d.isIntercalary);return this.newDate(d.year,f,d.day)},fromString:function(b){var g=b.match(e),d=this._validateYear(+g[1]),f=+g[2],y=!!g[3],l=this.toMonthIndex(d,f,y),x=+g[4];return this.newDate(d,l,x)},add:function(b,g,d){var f=b.year(),y=b.month(),l=this.isIntercalaryMonth(f,y),x=this.toChineseMonth(f,y),u=Object.getPrototypeOf(T.prototype).add.call(this,b,g,d);if(d==="y"){var M=u.year(),_=u.month(),p=this.isIntercalaryMonth(M,x),w=l&&p?this.toMonthIndex(M,x,!0):this.toMonthIndex(M,x,!1);w!==_&&u.month(w)}return u}});var e=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,a=/^\d?\d[iI]?/m,i=/^闰?十?[一二三四五六七八九]?月/m,n=/^闰?十?[一二三四五六七八九]?/m;m.calendars.chinese=T;var r=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],v=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904];function s(b,g,d,f){var y,l;if(typeof b=="object")y=b,l=g||{};else{var x=typeof b=="number"&&b>=1888&&b<=2111;if(!x)throw new Error("Solar year outside range 1888-2111");var u=typeof g=="number"&&g>=1&&g<=12;if(!u)throw new Error("Solar month outside range 1 - 12");var M=typeof d=="number"&&d>=1&&d<=31;if(!M)throw new Error("Solar day outside range 1 - 31");y={year:b,month:g,day:d},l=f||{}}var _=v[y.year-v[0]],p=y.year<<9|y.month<<5|y.day;l.year=p>=_?y.year:y.year-1,_=v[l.year-v[0]];var w=_>>9&4095,h=_>>5&15,L=_&31,S,E=new Date(w,h-1,L),P=new Date(y.year,y.month-1,y.day);S=Math.round((P-E)/(24*3600*1e3));var F=r[l.year-r[0]],I;for(I=0;I<13;I++){var D=F&1<<12-I?30:29;if(S<D)break;S-=D}var R=F>>13;return!R||I<R?(l.isIntercalary=!1,l.month=1+I):I===R?(l.isIntercalary=!0,l.month=I):(l.isIntercalary=!1,l.month=I),l.day=1+S,l}function o(b,g,d,f,y){var l,x;if(typeof b=="object")x=b,l=g||{};else{var u=typeof b=="number"&&b>=1888&&b<=2111;if(!u)throw new Error("Lunar year outside range 1888-2111");var M=typeof g=="number"&&g>=1&&g<=12;if(!M)throw new Error("Lunar month outside range 1 - 12");var _=typeof d=="number"&&d>=1&&d<=30;if(!_)throw new Error("Lunar day outside range 1 - 30");var p;typeof f=="object"?(p=!1,l=f):(p=!!f,l=y||{}),x={year:b,month:g,day:d,isIntercalary:p}}var w;w=x.day-1;var h=r[x.year-r[0]],L=h>>13,S;L&&(x.month>L||x.isIntercalary)?S=x.month:S=x.month-1;for(var E=0;E<S;E++){var P=h&1<<12-E?30:29;w+=P}var F=v[x.year-v[0]],I=F>>9&4095,D=F>>5&15,R=F&31,N=new Date(I,D-1,R+w);return l.year=N.getFullYear(),l.month=1+N.getMonth(),l.day=N.getDate(),l}},{"../main":347,"object-assign":247}],334:[function(t,B,V){var m=t("../main"),c=t("object-assign");function A(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}A.prototype=new m.baseCalendar,c(A.prototype,{name:"Coptic",jdEpoch:18250295e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){var e=this._validate(a,this.minMonth,this.minDay,m.local.invalidYear),a=e.year()+(e.year()<0?1:0);return a%4===3||a%4===-1},monthsInYear:function(T){return this._validate(T,this.minMonth,this.minDay,m.local.invalidYear||m.regionalOptions[""].invalidYear),13},weekOfYear:function(T,e,a){var i=this.newDate(T,e,a);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(T,e){var a=this._validate(T,e,this.minDay,m.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===13&&this.leapYear(a.year())?1:0)},weekDay:function(T,e,a){return(this.dayOfWeek(T,e,a)||7)<6},toJD:function(T,e,a){var i=this._validate(T,e,a,m.local.invalidDate);return T=i.year(),T<0&&T++,i.day()+(i.month()-1)*30+(T-1)*365+Math.floor(T/4)+this.jdEpoch-1},fromJD:function(T){var e=Math.floor(T)+.5-this.jdEpoch,a=Math.floor((e-Math.floor((e+366)/1461))/365)+1;a<=0&&a--,e=Math.floor(T)+.5-this.newDate(a,1,1).toJD();var i=Math.floor(e/30)+1,n=e-(i-1)*30+1;return this.newDate(a,i,n)}}),m.calendars.coptic=A},{"../main":347,"object-assign":247}],335:[function(t,B,V){var m=t("../main"),c=t("object-assign");function A(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}A.prototype=new m.baseCalendar,c(A.prototype,{name:"Discworld",jdEpoch:17214255e-1,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(e){return this._validate(e,this.minMonth,this.minDay,m.local.invalidYear),!1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,m.local.invalidYear),13},daysInYear:function(e){return this._validate(e,this.minMonth,this.minDay,m.local.invalidYear),400},weekOfYear:function(e,a,i){var n=this.newDate(e,a,i);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/8)+1},daysInMonth:function(e,a){var i=this._validate(e,a,this.minDay,m.local.invalidMonth);return this.daysPerMonth[i.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(e,a,i){var n=this._validate(e,a,i,m.local.invalidDate);return(n.day()+1)%8},weekDay:function(e,a,i){var n=this.dayOfWeek(e,a,i);return n>=2&&n<=6},extraInfo:function(e,a,i){var n=this._validate(e,a,i,m.local.invalidDate);return{century:T[Math.floor((n.year()-1)/100)+1]||""}},toJD:function(e,a,i){var n=this._validate(e,a,i,m.local.invalidDate);return e=n.year()+(n.year()<0?1:0),a=n.month(),i=n.day(),i+(a>1?16:0)+(a>2?(a-2)*32:0)+(e-1)*400+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e+.5)-Math.floor(this.jdEpoch)-1;var a=Math.floor(e/400)+1;e-=(a-1)*400,e+=e>15?16:0;var i=Math.floor(e/32)+1,n=e-(i-1)*32+1;return this.newDate(a<=0?a-1:a,i,n)}});var T={20:"Fruitbat",21:"Anchovy"};m.calendars.discworld=A},{"../main":347,"object-assign":247}],336:[function(t,B,V){var m=t("../main"),c=t("object-assign");function A(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}A.prototype=new m.baseCalendar,c(A.prototype,{name:"Ethiopian",jdEpoch:17242205e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){var e=this._validate(a,this.minMonth,this.minDay,m.local.invalidYear),a=e.year()+(e.year()<0?1:0);return a%4===3||a%4===-1},monthsInYear:function(T){return this._validate(T,this.minMonth,this.minDay,m.local.invalidYear||m.regionalOptions[""].invalidYear),13},weekOfYear:function(T,e,a){var i=this.newDate(T,e,a);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(T,e){var a=this._validate(T,e,this.minDay,m.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===13&&this.leapYear(a.year())?1:0)},weekDay:function(T,e,a){return(this.dayOfWeek(T,e,a)||7)<6},toJD:function(T,e,a){var i=this._validate(T,e,a,m.local.invalidDate);return T=i.year(),T<0&&T++,i.day()+(i.month()-1)*30+(T-1)*365+Math.floor(T/4)+this.jdEpoch-1},fromJD:function(T){var e=Math.floor(T)+.5-this.jdEpoch,a=Math.floor((e-Math.floor((e+366)/1461))/365)+1;a<=0&&a--,e=Math.floor(T)+.5-this.newDate(a,1,1).toJD();var i=Math.floor(e/30)+1,n=e-(i-1)*30+1;return this.newDate(a,i,n)}}),m.calendars.ethiopian=A},{"../main":347,"object-assign":247}],337:[function(t,B,V){var m=t("../main"),c=t("object-assign");function A(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}A.prototype=new m.baseCalendar,c(A.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var a=this._validate(e,this.minMonth,this.minDay,m.local.invalidYear);return this._leapYear(a.year())},_leapYear:function(e){return e=e<0?e+1:e,T(e*7+1,19)<7},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,m.local.invalidYear),this._leapYear(e.year?e.year():e)?13:12},weekOfYear:function(e,a,i){var n=this.newDate(e,a,i);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInYear:function(e){var a=this._validate(e,this.minMonth,this.minDay,m.local.invalidYear);return e=a.year(),this.toJD(e===-1?1:e+1,7,1)-this.toJD(e,7,1)},daysInMonth:function(e,a){return e.year&&(a=e.month(),e=e.year()),this._validate(e,a,this.minDay,m.local.invalidMonth),a===12&&this.leapYear(e)||a===8&&T(this.daysInYear(e),10)===5?30:a===9&&T(this.daysInYear(e),10)===3?29:this.daysPerMonth[a-1]},weekDay:function(e,a,i){return this.dayOfWeek(e,a,i)!==6},extraInfo:function(e,a,i){var n=this._validate(e,a,i,m.local.invalidDate);return{yearType:(this.leapYear(n)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(n)%10-3]}},toJD:function(e,a,i){var n=this._validate(e,a,i,m.local.invalidDate);e=n.year(),a=n.month(),i=n.day();var r=e<=0?e+1:e,v=this.jdEpoch+this._delay1(r)+this._delay2(r)+i+1;if(a<7){for(var s=7;s<=this.monthsInYear(e);s++)v+=this.daysInMonth(e,s);for(var s=1;s<a;s++)v+=this.daysInMonth(e,s)}else for(var s=7;s<a;s++)v+=this.daysInMonth(e,s);return v},_delay1:function(e){var a=Math.floor((235*e-234)/19),i=12084+13753*a,n=a*29+Math.floor(i/25920);return T(3*(n+1),7)<3&&n++,n},_delay2:function(e){var a=this._delay1(e-1),i=this._delay1(e),n=this._delay1(e+1);return n-i===356?2:i-a===382?1:0},fromJD:function(e){e=Math.floor(e)+.5;for(var a=Math.floor((e-this.jdEpoch)*98496/35975351)-1;e>=this.toJD(a===-1?1:a+1,7,1);)a++;for(var i=e<this.toJD(a,1,1)?7:1;e>this.toJD(a,i,this.daysInMonth(a,i));)i++;var n=e-this.toJD(a,i,1)+1;return this.newDate(a,i,n)}});function T(e,a){return e-a*Math.floor(e/a)}m.calendars.hebrew=A},{"../main":347,"object-assign":247}],338:[function(t,B,V){var m=t("../main"),c=t("object-assign");function A(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}A.prototype=new m.baseCalendar,c(A.prototype,{name:"Islamic",jdEpoch:19484395e-1,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-kham\u012Bs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(T){var e=this._validate(T,this.minMonth,this.minDay,m.local.invalidYear);return(e.year()*11+14)%30<11},weekOfYear:function(T,e,a){var i=this.newDate(T,e,a);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInYear:function(T){return this.leapYear(T)?355:354},daysInMonth:function(T,e){var a=this._validate(T,e,this.minDay,m.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===12&&this.leapYear(a.year())?1:0)},weekDay:function(T,e,a){return this.dayOfWeek(T,e,a)!==5},toJD:function(T,e,a){var i=this._validate(T,e,a,m.local.invalidDate);return T=i.year(),e=i.month(),a=i.day(),T=T<=0?T+1:T,a+Math.ceil(29.5*(e-1))+(T-1)*354+Math.floor((3+11*T)/30)+this.jdEpoch-1},fromJD:function(T){T=Math.floor(T)+.5;var e=Math.floor((30*(T-this.jdEpoch)+10646)/10631);e=e<=0?e-1:e;var a=Math.min(12,Math.ceil((T-29-this.toJD(e,1,1))/29.5)+1),i=T-this.toJD(e,a,1)+1;return this.newDate(e,a,i)}}),m.calendars.islamic=A},{"../main":347,"object-assign":247}],339:[function(t,B,V){var m=t("../main"),c=t("object-assign");function A(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}A.prototype=new m.baseCalendar,c(A.prototype,{name:"Julian",jdEpoch:17214235e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){var e=this._validate(a,this.minMonth,this.minDay,m.local.invalidYear),a=e.year()<0?e.year()+1:e.year();return a%4===0},weekOfYear:function(T,e,a){var i=this.newDate(T,e,a);return i.add(4-(i.dayOfWeek()||7),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(T,e){var a=this._validate(T,e,this.minDay,m.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===2&&this.leapYear(a.year())?1:0)},weekDay:function(T,e,a){return(this.dayOfWeek(T,e,a)||7)<6},toJD:function(T,e,a){var i=this._validate(T,e,a,m.local.invalidDate);return T=i.year(),e=i.month(),a=i.day(),T<0&&T++,e<=2&&(T--,e+=12),Math.floor(365.25*(T+4716))+Math.floor(30.6001*(e+1))+a-1524.5},fromJD:function(T){var e=Math.floor(T+.5),a=e+1524,i=Math.floor((a-122.1)/365.25),n=Math.floor(365.25*i),r=Math.floor((a-n)/30.6001),v=r-Math.floor(r<14?1:13),s=i-Math.floor(v>2?4716:4715),o=a-n-Math.floor(30.6001*r);return s<=0&&s--,this.newDate(s,v,o)}}),m.calendars.julian=A},{"../main":347,"object-assign":247}],340:[function(t,B,V){var m=t("../main"),c=t("object-assign");function A(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}A.prototype=new m.baseCalendar,c(A.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(a){return this._validate(a,this.minMonth,this.minDay,m.local.invalidYear),!1},formatYear:function(a){var i=this._validate(a,this.minMonth,this.minDay,m.local.invalidYear);a=i.year();var n=Math.floor(a/400);a=a%400,a+=a<0?400:0;var r=Math.floor(a/20);return n+"."+r+"."+a%20},forYear:function(a){if(a=a.split("."),a.length<3)throw"Invalid Mayan year";for(var i=0,n=0;n<a.length;n++){var r=parseInt(a[n],10);if(Math.abs(r)>19||n>0&&r<0)throw"Invalid Mayan year";i=i*20+r}return i},monthsInYear:function(a){return this._validate(a,this.minMonth,this.minDay,m.local.invalidYear),18},weekOfYear:function(a,i,n){return this._validate(a,i,n,m.local.invalidDate),0},daysInYear:function(a){return this._validate(a,this.minMonth,this.minDay,m.local.invalidYear),360},daysInMonth:function(a,i){return this._validate(a,i,this.minDay,m.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(a,i,n){var r=this._validate(a,i,n,m.local.invalidDate);return r.day()},weekDay:function(a,i,n){return this._validate(a,i,n,m.local.invalidDate),!0},extraInfo:function(a,i,n){var r=this._validate(a,i,n,m.local.invalidDate),v=r.toJD(),s=this._toHaab(v),o=this._toTzolkin(v);return{haabMonthName:this.local.haabMonths[s[0]-1],haabMonth:s[0],haabDay:s[1],tzolkinDayName:this.local.tzolkinMonths[o[0]-1],tzolkinDay:o[0],tzolkinTrecena:o[1]}},_toHaab:function(a){a-=this.jdEpoch;var i=T(a+8+(18-1)*20,365);return[Math.floor(i/20)+1,T(i,20)]},_toTzolkin:function(a){return a-=this.jdEpoch,[e(a+20,20),e(a+4,13)]},toJD:function(a,i,n){var r=this._validate(a,i,n,m.local.invalidDate);return r.day()+r.month()*20+r.year()*360+this.jdEpoch},fromJD:function(a){a=Math.floor(a)+.5-this.jdEpoch;var i=Math.floor(a/360);a=a%360,a+=a<0?360:0;var n=Math.floor(a/20),r=a%20;return this.newDate(i,n,r)}});function T(a,i){return a-i*Math.floor(a/i)}function e(a,i){return T(a-1,i)+1}m.calendars.mayan=A},{"../main":347,"object-assign":247}],341:[function(t,B,V){var m=t("../main"),c=t("object-assign");function A(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}A.prototype=new m.baseCalendar;var T=m.instance("gregorian");c(A.prototype,{name:"Nanakshahi",jdEpoch:22576735e-1,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var a=this._validate(e,this.minMonth,this.minDay,m.local.invalidYear||m.regionalOptions[""].invalidYear);return T.leapYear(a.year()+(a.year()<1?1:0)+1469)},weekOfYear:function(e,a,i){var n=this.newDate(e,a,i);return n.add(1-(n.dayOfWeek()||7),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(e,a){var i=this._validate(e,a,this.minDay,m.local.invalidMonth);return this.daysPerMonth[i.month()-1]+(i.month()===12&&this.leapYear(i.year())?1:0)},weekDay:function(e,a,i){return(this.dayOfWeek(e,a,i)||7)<6},toJD:function(r,a,i){var n=this._validate(r,a,i,m.local.invalidMonth),r=n.year();r<0&&r++;for(var v=n.day(),s=1;s<n.month();s++)v+=this.daysPerMonth[s-1];return v+T.toJD(r+1468,3,13)},fromJD:function(e){e=Math.floor(e+.5);for(var a=Math.floor((e-(this.jdEpoch-1))/366);e>=this.toJD(a+1,1,1);)a++;for(var i=e-Math.floor(this.toJD(a,1,1)+.5)+1,n=1;i>this.daysInMonth(a,n);)i-=this.daysInMonth(a,n),n++;return this.newDate(a,n,i)}}),m.calendars.nanakshahi=A},{"../main":347,"object-assign":247}],342:[function(t,B,V){var m=t("../main"),c=t("object-assign");function A(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}A.prototype=new m.baseCalendar,c(A.prototype,{name:"Nepali",jdEpoch:17007095e-1,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(T){return this.daysInYear(T)!==this.daysPerYear},weekOfYear:function(T,e,a){var i=this.newDate(T,e,a);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInYear:function(T){var e=this._validate(T,this.minMonth,this.minDay,m.local.invalidYear);if(T=e.year(),typeof this.NEPALI_CALENDAR_DATA[T]>"u")return this.daysPerYear;for(var a=0,i=this.minMonth;i<=12;i++)a+=this.NEPALI_CALENDAR_DATA[T][i];return a},daysInMonth:function(T,e){return T.year&&(e=T.month(),T=T.year()),this._validate(T,e,this.minDay,m.local.invalidMonth),typeof this.NEPALI_CALENDAR_DATA[T]>"u"?this.daysPerMonth[e-1]:this.NEPALI_CALENDAR_DATA[T][e]},weekDay:function(T,e,a){return this.dayOfWeek(T,e,a)!==6},toJD:function(T,e,a){var i=this._validate(T,e,a,m.local.invalidDate);T=i.year(),e=i.month(),a=i.day();var n=m.instance(),r=0,v=e,s=T;this._createMissingCalendarData(T);var o=T-(v>9||v===9&&a>=this.NEPALI_CALENDAR_DATA[s][0]?56:57);for(e!==9&&(r=a,v--);v!==9;)v<=0&&(v=12,s--),r+=this.NEPALI_CALENDAR_DATA[s][v],v--;return e===9?(r+=a-this.NEPALI_CALENDAR_DATA[s][0],r<0&&(r+=n.daysInYear(o))):r+=this.NEPALI_CALENDAR_DATA[s][9]-this.NEPALI_CALENDAR_DATA[s][0],n.newDate(o,1,1).add(r,"d").toJD()},fromJD:function(T){var e=m.instance(),a=e.fromJD(T),i=a.year(),n=a.dayOfYear(),r=i+56;this._createMissingCalendarData(r);for(var v=9,s=this.NEPALI_CALENDAR_DATA[r][0],o=this.NEPALI_CALENDAR_DATA[r][v]-s+1;n>o;)v++,v>12&&(v=1,r++),o+=this.NEPALI_CALENDAR_DATA[r][v];var b=this.NEPALI_CALENDAR_DATA[r][v]-(o-n);return this.newDate(r,v,b)},_createMissingCalendarData:function(T){var e=this.daysPerMonth.slice(0);e.unshift(17);for(var a=T-1;a<T+2;a++)typeof this.NEPALI_CALENDAR_DATA[a]>"u"&&(this.NEPALI_CALENDAR_DATA[a]=e)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),m.calendars.nepali=A},{"../main":347,"object-assign":247}],343:[function(t,B,V){var m=t("../main"),c=t("object-assign");function A(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}A.prototype=new m.baseCalendar,c(A.prototype,{name:"Persian",jdEpoch:19483205e-1,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Ch\xE6harshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch\xE6","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(e){var a=this._validate(e,this.minMonth,this.minDay,m.local.invalidYear);return((a.year()-(a.year()>0?474:473))%2820+474+38)*682%2816<682},weekOfYear:function(e,a,i){var n=this.newDate(e,a,i);return n.add(-((n.dayOfWeek()+1)%7),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(e,a){var i=this._validate(e,a,this.minDay,m.local.invalidMonth);return this.daysPerMonth[i.month()-1]+(i.month()===12&&this.leapYear(i.year())?1:0)},weekDay:function(e,a,i){return this.dayOfWeek(e,a,i)!==5},toJD:function(e,a,i){var n=this._validate(e,a,i,m.local.invalidDate);e=n.year(),a=n.month(),i=n.day();var r=e-(e>=0?474:473),v=474+T(r,2820);return i+(a<=7?(a-1)*31:(a-1)*30+6)+Math.floor((v*682-110)/2816)+(v-1)*365+Math.floor(r/2820)*1029983+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e)+.5;var a=e-this.toJD(475,1,1),i=Math.floor(a/1029983),n=T(a,1029983),r=2820;if(n!==1029982){var v=Math.floor(n/366),s=T(n,366);r=Math.floor((2134*v+2816*s+2815)/1028522)+v+1}var o=r+2820*i+474;o=o<=0?o-1:o;var b=e-this.toJD(o,1,1)+1,g=b<=186?Math.ceil(b/31):Math.ceil((b-6)/30),d=e-this.toJD(o,g,1)+1;return this.newDate(o,g,d)}});function T(e,a){return e-a*Math.floor(e/a)}m.calendars.persian=A,m.calendars.jalali=A},{"../main":347,"object-assign":247}],344:[function(t,B,V){var m=t("../main"),c=t("object-assign"),A=m.instance();function T(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}T.prototype=new m.baseCalendar,c(T.prototype,{name:"Taiwan",jdEpoch:24194025e-1,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(i){var a=this._validate(i,this.minMonth,this.minDay,m.local.invalidYear),i=this._t2gYear(a.year());return A.leapYear(i)},weekOfYear:function(r,a,i){var n=this._validate(r,this.minMonth,this.minDay,m.local.invalidYear),r=this._t2gYear(n.year());return A.weekOfYear(r,n.month(),n.day())},daysInMonth:function(e,a){var i=this._validate(e,a,this.minDay,m.local.invalidMonth);return this.daysPerMonth[i.month()-1]+(i.month()===2&&this.leapYear(i.year())?1:0)},weekDay:function(e,a,i){return(this.dayOfWeek(e,a,i)||7)<6},toJD:function(r,a,i){var n=this._validate(r,a,i,m.local.invalidDate),r=this._t2gYear(n.year());return A.toJD(r,n.month(),n.day())},fromJD:function(e){var a=A.fromJD(e),i=this._g2tYear(a.year());return this.newDate(i,a.month(),a.day())},_t2gYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)},_g2tYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)}}),m.calendars.taiwan=T},{"../main":347,"object-assign":247}],345:[function(t,B,V){var m=t("../main"),c=t("object-assign"),A=m.instance();function T(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}T.prototype=new m.baseCalendar,c(T.prototype,{name:"Thai",jdEpoch:15230985e-1,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(i){var a=this._validate(i,this.minMonth,this.minDay,m.local.invalidYear),i=this._t2gYear(a.year());return A.leapYear(i)},weekOfYear:function(r,a,i){var n=this._validate(r,this.minMonth,this.minDay,m.local.invalidYear),r=this._t2gYear(n.year());return A.weekOfYear(r,n.month(),n.day())},daysInMonth:function(e,a){var i=this._validate(e,a,this.minDay,m.local.invalidMonth);return this.daysPerMonth[i.month()-1]+(i.month()===2&&this.leapYear(i.year())?1:0)},weekDay:function(e,a,i){return(this.dayOfWeek(e,a,i)||7)<6},toJD:function(r,a,i){var n=this._validate(r,a,i,m.local.invalidDate),r=this._t2gYear(n.year());return A.toJD(r,n.month(),n.day())},fromJD:function(e){var a=A.fromJD(e),i=this._g2tYear(a.year());return this.newDate(i,a.month(),a.day())},_t2gYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)},_g2tYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)}}),m.calendars.thai=T},{"../main":347,"object-assign":247}],346:[function(t,B,V){var m=t("../main"),c=t("object-assign");function A(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}A.prototype=new m.baseCalendar,c(A.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thal\u0101th\u0101\u2019","Yawm al-Arba\u2018\u0101\u2019","Yawm al-Kham\u012Bs","Yawm al-Jum\u2018a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(e){var a=this._validate(e,this.minMonth,this.minDay,m.local.invalidYear);return this.daysInYear(a.year())===355},weekOfYear:function(e,a,i){var n=this.newDate(e,a,i);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInYear:function(e){for(var a=0,i=1;i<=12;i++)a+=this.daysInMonth(e,i);return a},daysInMonth:function(e,a){for(var i=this._validate(e,a,this.minDay,m.local.invalidMonth),n=i.toJD()-24e5+.5,r=0,v=0;v<T.length;v++){if(T[v]>n)return T[r]-T[r-1];r++}return 30},weekDay:function(e,a,i){return this.dayOfWeek(e,a,i)!==5},toJD:function(e,a,i){var n=this._validate(e,a,i,m.local.invalidDate),r=12*(n.year()-1)+n.month()-15292,v=n.day()+T[r-1]-1;return v+24e5-.5},fromJD:function(e){for(var a=e-24e5+.5,i=0,n=0;n<T.length&&!(T[n]>a);n++)i++;var r=i+15292,v=Math.floor((r-1)/12),s=v+1,o=r-12*v,b=a-T[i-1]+1;return this.newDate(s,o,b)},isValid:function(e,a,i){var n=m.baseCalendar.prototype.isValid.apply(this,arguments);return n&&(e=e.year!=null?e.year:e,n=e>=1276&&e<=1500),n},_validate:function(e,a,i,n){var r=m.baseCalendar.prototype._validate.apply(this,arguments);if(r.year<1276||r.year>1500)throw n.replace(/\{0\}/,this.local.name);return r}}),m.calendars.ummalqura=A;var T=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},{"../main":347,"object-assign":247}],347:[function(t,B,V){var m=t("object-assign");function c(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}m(c.prototype,{instance:function(n,r){n=(n||"gregorian").toLowerCase(),r=r||"";var v=this._localCals[n+"-"+r];if(!v&&this.calendars[n]&&(v=new this.calendars[n](r),this._localCals[n+"-"+r]=v),!v)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,n);return v},newDate:function(n,r,v,s,o){return s=(n!=null&&n.year?n.calendar():typeof s=="string"?this.instance(s,o):s)||this.instance(),s.newDate(n,r,v)},substituteDigits:function(n){return function(r){return(r+"").replace(/[0-9]/g,function(v){return n[v]})}},substituteChineseDigits:function(n,r){return function(v){for(var s="",o=0;v>0;){var b=v%10;s=(b===0?"":n[b]+r[o])+s,o++,v=Math.floor(v/10)}return s.indexOf(n[1]+r[1])===0&&(s=s.substr(1)),s||n[0]}}});function A(n,r,v,s){if(this._calendar=n,this._year=r,this._month=v,this._day=s,this._calendar._validateLevel===0&&!this._calendar.isValid(this._year,this._month,this._day))throw(i.local.invalidDate||i.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function T(n,r){return n=""+n,"000000".substring(0,r-n.length)+n}m(A.prototype,{newDate:function(n,r,v){return this._calendar.newDate(n==null?this:n,r,v)},year:function(n){return arguments.length===0?this._year:this.set(n,"y")},month:function(n){return arguments.length===0?this._month:this.set(n,"m")},day:function(n){return arguments.length===0?this._day:this.set(n,"d")},date:function(n,r,v){if(!this._calendar.isValid(n,r,v))throw(i.local.invalidDate||i.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=n,this._month=r,this._day=v,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(n,r){return this._calendar.add(this,n,r)},set:function(n,r){return this._calendar.set(this,n,r)},compareTo:function(n){if(this._calendar.name!==n._calendar.name)throw(i.local.differentCalendars||i.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,n._calendar.local.name);var r=this._year!==n._year?this._year-n._year:this._month!==n._month?this.monthOfYear()-n.monthOfYear():this._day-n._day;return r===0?0:r<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(n){return this._calendar.fromJD(n)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(n){return this._calendar.fromJSDate(n)},toString:function(){return(this.year()<0?"-":"")+T(Math.abs(this.year()),4)+"-"+T(this.month(),2)+"-"+T(this.day(),2)}});function e(){this.shortYearCutoff="+10"}m(e.prototype,{_validateLevel:0,newDate:function(n,r,v){return n==null?this.today():(n.year&&(this._validate(n,r,v,i.local.invalidDate||i.regionalOptions[""].invalidDate),v=n.day(),r=n.month(),n=n.year()),new A(this,n,r,v))},today:function(){return this.fromJSDate(new Date)},epoch:function(n){var r=this._validate(n,this.minMonth,this.minDay,i.local.invalidYear||i.regionalOptions[""].invalidYear);return r.year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(n){var r=this._validate(n,this.minMonth,this.minDay,i.local.invalidYear||i.regionalOptions[""].invalidYear);return(r.year()<0?"-":"")+T(Math.abs(r.year()),4)},monthsInYear:function(n){return this._validate(n,this.minMonth,this.minDay,i.local.invalidYear||i.regionalOptions[""].invalidYear),12},monthOfYear:function(n,r){var v=this._validate(n,r,this.minDay,i.local.invalidMonth||i.regionalOptions[""].invalidMonth);return(v.month()+this.monthsInYear(v)-this.firstMonth)%this.monthsInYear(v)+this.minMonth},fromMonthOfYear:function(n,r){var v=(r+this.firstMonth-2*this.minMonth)%this.monthsInYear(n)+this.minMonth;return this._validate(n,v,this.minDay,i.local.invalidMonth||i.regionalOptions[""].invalidMonth),v},daysInYear:function(n){var r=this._validate(n,this.minMonth,this.minDay,i.local.invalidYear||i.regionalOptions[""].invalidYear);return this.leapYear(r)?366:365},dayOfYear:function(n,r,v){var s=this._validate(n,r,v,i.local.invalidDate||i.regionalOptions[""].invalidDate);return s.toJD()-this.newDate(s.year(),this.fromMonthOfYear(s.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(n,r,v){var s=this._validate(n,r,v,i.local.invalidDate||i.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(s))+2)%this.daysInWeek()},extraInfo:function(n,r,v){return this._validate(n,r,v,i.local.invalidDate||i.regionalOptions[""].invalidDate),{}},add:function(n,r,v){return this._validate(n,this.minMonth,this.minDay,i.local.invalidDate||i.regionalOptions[""].invalidDate),this._correctAdd(n,this._add(n,r,v),r,v)},_add:function(n,r,v){if(this._validateLevel++,v==="d"||v==="w"){var s=n.toJD()+r*(v==="w"?this.daysInWeek():1),o=n.calendar().fromJD(s);return this._validateLevel--,[o.year(),o.month(),o.day()]}try{var b=n.year()+(v==="y"?r:0),g=n.monthOfYear()+(v==="m"?r:0),o=n.day(),d=function(l){for(;g<l.minMonth;)b--,g+=l.monthsInYear(b);for(var x=l.monthsInYear(b);g>x-1+l.minMonth;)b++,g-=x,x=l.monthsInYear(b)};v==="y"?(n.month()!==this.fromMonthOfYear(b,g)&&(g=this.newDate(b,n.month(),this.minDay).monthOfYear()),g=Math.min(g,this.monthsInYear(b)),o=Math.min(o,this.daysInMonth(b,this.fromMonthOfYear(b,g)))):v==="m"&&(d(this),o=Math.min(o,this.daysInMonth(b,this.fromMonthOfYear(b,g))));var f=[b,this.fromMonthOfYear(b,g),o];return this._validateLevel--,f}catch(y){throw this._validateLevel--,y}},_correctAdd:function(n,r,v,s){if(!this.hasYearZero&&(s==="y"||s==="m")&&(r[0]===0||n.year()>0!=r[0]>0)){var o={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[s],b=v<0?-1:1;r=this._add(n,v*o[0]+b*o[1],o[2])}return n.date(r[0],r[1],r[2])},set:function(n,r,v){this._validate(n,this.minMonth,this.minDay,i.local.invalidDate||i.regionalOptions[""].invalidDate);var s=v==="y"?r:n.year(),o=v==="m"?r:n.month(),b=v==="d"?r:n.day();return(v==="y"||v==="m")&&(b=Math.min(b,this.daysInMonth(s,o))),n.date(s,o,b)},isValid:function(n,r,v){this._validateLevel++;var s=this.hasYearZero||n!==0;if(s){var o=this.newDate(n,r,this.minDay);s=r>=this.minMonth&&r-this.minMonth<this.monthsInYear(o)&&v>=this.minDay&&v-this.minDay<this.daysInMonth(o)}return this._validateLevel--,s},toJSDate:function(n,r,v){var s=this._validate(n,r,v,i.local.invalidDate||i.regionalOptions[""].invalidDate);return i.instance().fromJD(this.toJD(s)).toJSDate()},fromJSDate:function(n){return this.fromJD(i.instance().fromJSDate(n).toJD())},_validate:function(n,r,v,s){if(n.year){if(this._validateLevel===0&&this.name!==n.calendar().name)throw(i.local.differentCalendars||i.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,n.calendar().local.name);return n}try{if(this._validateLevel++,this._validateLevel===1&&!this.isValid(n,r,v))throw s.replace(/\{0\}/,this.local.name);var o=this.newDate(n,r,v);return this._validateLevel--,o}catch(b){throw this._validateLevel--,b}}});function a(n){this.local=this.regionalOptions[n]||this.regionalOptions[""]}a.prototype=new e,m(a.prototype,{name:"Gregorian",jdEpoch:17214255e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(v){var r=this._validate(v,this.minMonth,this.minDay,i.local.invalidYear||i.regionalOptions[""].invalidYear),v=r.year()+(r.year()<0?1:0);return v%4===0&&(v%100!==0||v%400===0)},weekOfYear:function(n,r,v){var s=this.newDate(n,r,v);return s.add(4-(s.dayOfWeek()||7),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInMonth:function(n,r){var v=this._validate(n,r,this.minDay,i.local.invalidMonth||i.regionalOptions[""].invalidMonth);return this.daysPerMonth[v.month()-1]+(v.month()===2&&this.leapYear(v.year())?1:0)},weekDay:function(n,r,v){return(this.dayOfWeek(n,r,v)||7)<6},toJD:function(n,r,v){var s=this._validate(n,r,v,i.local.invalidDate||i.regionalOptions[""].invalidDate);n=s.year(),r=s.month(),v=s.day(),n<0&&n++,r<3&&(r+=12,n--);var o=Math.floor(n/100),b=2-o+Math.floor(o/4);return Math.floor(365.25*(n+4716))+Math.floor(30.6001*(r+1))+v+b-1524.5},fromJD:function(n){var r=Math.floor(n+.5),v=Math.floor((r-186721625e-2)/36524.25);v=r+1+v-Math.floor(v/4);var s=v+1524,o=Math.floor((s-122.1)/365.25),b=Math.floor(365.25*o),g=Math.floor((s-b)/30.6001),d=s-b-Math.floor(g*30.6001),f=g-(g>13.5?13:1),y=o-(f>2.5?4716:4715);return y<=0&&y--,this.newDate(y,f,d)},toJSDate:function(n,r,v){var s=this._validate(n,r,v,i.local.invalidDate||i.regionalOptions[""].invalidDate),o=new Date(s.year(),s.month()-1,s.day());return o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0),o.setHours(o.getHours()>12?o.getHours()+2:0),o},fromJSDate:function(n){return this.newDate(n.getFullYear(),n.getMonth()+1,n.getDate())}});var i=B.exports=new c;i.cdate=A,i.baseCalendar=e,i.calendars.gregorian=a},{"object-assign":247}],348:[function(t,B,V){var m=t("object-assign"),c=t("./main");m(c.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),c.local=c.regionalOptions[""],m(c.cdate.prototype,{formatDate:function(A,T){return typeof A!="string"&&(T=A,A=""),this._calendar.formatDate(A||"",this,T)}}),m(c.baseCalendar.prototype,{UNIX_EPOCH:c.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:24*60*60,TICKS_EPOCH:c.instance().jdEpoch,TICKS_PER_DAY:24*60*60*1e7,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(A,T,e){if(typeof A!="string"&&(e=T,T=A,A=""),!T)return"";if(T.calendar()!==this)throw c.local.invalidFormat||c.regionalOptions[""].invalidFormat;A=A||this.local.dateFormat,e=e||{};var a=e.dayNamesShort||this.local.dayNamesShort,i=e.dayNames||this.local.dayNames,n=e.monthNumbers||this.local.monthNumbers,r=e.monthNamesShort||this.local.monthNamesShort,v=e.monthNames||this.local.monthNames;e.calculateWeek||this.local.calculateWeek;for(var s=function(_,p){for(var w=1;M+w<A.length&&A.charAt(M+w)===_;)w++;return M+=w-1,Math.floor(w/(p||1))>1},o=function(_,p,w,h){var L=""+p;if(s(_,h))for(;L.length<w;)L="0"+L;return L},b=function(_,p,w,h){return s(_)?h[p]:w[p]},g=this,d=function(_){return typeof n=="function"?n.call(g,_,s("m")):l(o("m",_.month(),2))},f=function(_,p){return p?typeof v=="function"?v.call(g,_):v[_.month()-g.minMonth]:typeof r=="function"?r.call(g,_):r[_.month()-g.minMonth]},y=this.local.digits,l=function(_){return e.localNumbers&&y?y(_):_},x="",u=!1,M=0;M<A.length;M++)if(u)A.charAt(M)==="'"&&!s("'")?u=!1:x+=A.charAt(M);else switch(A.charAt(M)){case"d":x+=l(o("d",T.day(),2));break;case"D":x+=b("D",T.dayOfWeek(),a,i);break;case"o":x+=o("o",T.dayOfYear(),3);break;case"w":x+=o("w",T.weekOfYear(),2);break;case"m":x+=d(T);break;case"M":x+=f(T,s("M"));break;case"y":x+=s("y",2)?T.year():(T.year()%100<10?"0":"")+T.year()%100;break;case"Y":s("Y",2),x+=T.formatYear();break;case"J":x+=T.toJD();break;case"@":x+=(T.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":x+=(T.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":s("'")?x+="'":u=!0;break;default:x+=A.charAt(M)}return x},parseDate:function(A,T,e){if(T==null)throw c.local.invalidArguments||c.regionalOptions[""].invalidArguments;if(T=typeof T=="object"?T.toString():T+"",T==="")return null;A=A||this.local.dateFormat,e=e||{};var a=e.shortYearCutoff||this.shortYearCutoff;a=typeof a!="string"?a:this.today().year()%100+parseInt(a,10);for(var i=e.dayNamesShort||this.local.dayNamesShort,n=e.dayNames||this.local.dayNames,r=e.parseMonth||this.local.parseMonth,v=e.monthNumbers||this.local.monthNumbers,s=e.monthNamesShort||this.local.monthNamesShort,o=e.monthNames||this.local.monthNames,b=-1,g=-1,d=-1,f=-1,y=-1,l=!1,x=!1,u=function(I,D){for(var R=1;E+R<A.length&&A.charAt(E+R)===I;)R++;return E+=R-1,Math.floor(R/(D||1))>1},M=function(I,D){var R=u(I,D),N=[2,3,R?4:2,R?4:2,10,11,20]["oyYJ@!".indexOf(I)+1],z=new RegExp("^-?\\d{1,"+N+"}"),G=T.substring(S).match(z);if(!G)throw(c.local.missingNumberAt||c.regionalOptions[""].missingNumberAt).replace(/\{0\}/,S);return S+=G[0].length,parseInt(G[0],10)},_=this,p=function(){if(typeof v=="function"){u("m");var I=v.call(_,T.substring(S));return S+=I.length,I}return M("m")},w=function(I,D,R,N){for(var z=u(I,N)?R:D,G=0;G<z.length;G++)if(T.substr(S,z[G].length).toLowerCase()===z[G].toLowerCase())return S+=z[G].length,G+_.minMonth;throw(c.local.unknownNameAt||c.regionalOptions[""].unknownNameAt).replace(/\{0\}/,S)},h=function(){if(typeof o=="function"){var I=u("M")?o.call(_,T.substring(S)):s.call(_,T.substring(S));return S+=I.length,I}return w("M",s,o)},L=function(){if(T.charAt(S)!==A.charAt(E))throw(c.local.unexpectedLiteralAt||c.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,S);S++},S=0,E=0;E<A.length;E++)if(x)A.charAt(E)==="'"&&!u("'")?x=!1:L();else switch(A.charAt(E)){case"d":f=M("d");break;case"D":w("D",i,n);break;case"o":y=M("o");break;case"w":M("w");break;case"m":d=p();break;case"M":d=h();break;case"y":var P=E;l=!u("y",2),E=P,g=M("y",2);break;case"Y":g=M("Y",2);break;case"J":b=M("J")+.5,T.charAt(S)==="."&&(S++,M("J"));break;case"@":b=M("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":b=M("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":S=T.length;break;case"'":u("'")?L():x=!0;break;default:L()}if(S<T.length)throw c.local.unexpectedText||c.regionalOptions[""].unexpectedText;if(g===-1?g=this.today().year():g<100&&l&&(g+=a===-1?1900:this.today().year()-this.today().year()%100-(g<=a?0:100)),typeof d=="string"&&(d=r.call(this,g,d)),y>-1){d=1,f=y;for(var F=this.daysInMonth(g,d);f>F;F=this.daysInMonth(g,d))d++,f-=F}return b>-1?this.fromJD(b):this.newDate(g,d,f)},determineDate:function(A,T,e,a,i){e&&typeof e!="object"&&(i=a,a=e,e=null),typeof a!="string"&&(i=a,a="");var n=this,r=function(v){try{return n.parseDate(a,v,i)}catch{}v=v.toLowerCase();for(var s=(v.match(/^c/)&&e?e.newDate():null)||n.today(),o=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,b=o.exec(v);b;)s.add(parseInt(b[1],10),b[2]||"d"),b=o.exec(v);return s};return T=T?T.newDate():null,A=A==null?T:typeof A=="string"?r(A):typeof A=="number"?isNaN(A)||A===1/0||A===-1/0?T:n.today().add(A,"d"):n.newDate(A),A}})},{"./main":347,"object-assign":247}],349:[function(t,B,V){B.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},{}],350:[function(t,B,V){var m=t("./arrow_paths"),c=t("../../plots/font_attributes"),A=t("../../plots/cartesian/constants"),T=t("../../plot_api/plot_template").templatedArray;t("../../constants/axis_placeable_objects"),B.exports=T("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:c({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:m.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:m.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",A.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",A.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",A.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",A.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:c({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../constants/axis_placeable_objects":484,"../../plot_api/plot_template":555,"../../plots/cartesian/constants":573,"../../plots/font_attributes":594,"./arrow_paths":349}],351:[function(t,B,V){var m=t("../../lib"),c=t("../../plots/cartesian/axes"),A=t("./draw").draw;B.exports=function(i){var n=i._fullLayout,r=m.filterVisible(n.annotations);if(r.length&&i._fullData.length)return m.syncOrAsync([A,T],i)};function T(a){var i=a._fullLayout;m.filterVisible(i.annotations).forEach(function(n){var r=c.getFromId(a,n.xref),v=c.getFromId(a,n.yref),s=c.getRefType(n.xref),o=c.getRefType(n.yref);n._extremes={},s==="range"&&e(n,r),o==="range"&&e(n,v)})}function e(a,i){var n=i._id,r=n.charAt(0),v=a[r],s=a["a"+r],o=a[r+"ref"],b=a["a"+r+"ref"],g=a["_"+r+"padplus"],d=a["_"+r+"padminus"],f={x:1,y:-1}[r]*a[r+"shift"],y=3*a.arrowsize*a.arrowwidth||0,l=y+f,x=y-f,u=3*a.startarrowsize*a.arrowwidth||0,M=u+f,_=u-f,p;if(b===o){var w=c.findExtremes(i,[i.r2c(v)],{ppadplus:l,ppadminus:x}),h=c.findExtremes(i,[i.r2c(s)],{ppadplus:Math.max(g,M),ppadminus:Math.max(d,_)});p={min:[w.min[0],h.min[0]],max:[w.max[0],h.max[0]]}}else M=s?M+s:M,_=s?_-s:_,p=c.findExtremes(i,[i.r2c(v)],{ppadplus:Math.max(g,l,M),ppadminus:Math.max(d,x,_)});a._extremes[n]=p}},{"../../lib":515,"../../plots/cartesian/axes":566,"./draw":356}],352:[function(t,B,V){var m=t("../../lib"),c=t("../../registry"),A=t("../../plot_api/plot_template").arrayEditor;B.exports={hasClickToShow:T,onClick:e};function T(n,r){var v=a(n,r);return v.on.length>0||v.explicitOff.length>0}function e(n,r){var v=a(n,r),s=v.on,o=v.off.concat(v.explicitOff),b={},g=n._fullLayout.annotations,d,f;if(!!(s.length||o.length)){for(d=0;d<s.length;d++)f=A(n.layout,"annotations",g[s[d]]),f.modifyItem("visible",!0),m.extendFlat(b,f.getUpdateObj());for(d=0;d<o.length;d++)f=A(n.layout,"annotations",g[o[d]]),f.modifyItem("visible",!1),m.extendFlat(b,f.getUpdateObj());return c.call("update",n,{},b)}}function a(n,r){var v=n._fullLayout.annotations,s=[],o=[],b=[],g=(r||[]).length,d,f,y,l,x,u,M,_;for(d=0;d<v.length;d++)if(y=v[d],l=y.clicktoshow,l){for(f=0;f<g;f++)if(x=r[f],u=x.xaxis,M=x.yaxis,u._id===y.xref&&M._id===y.yref&&u.d2r(x.x)===i(y._xclick,u)&&M.d2r(x.y)===i(y._yclick,M)){y.visible?l==="onout"?_=o:_=b:_=s,_.push(d);break}f===g&&y.visible&&l==="onout"&&o.push(d)}return{on:s,off:o,explicitOff:b}}function i(n,r){return r.type==="log"?r.l2r(n):r.d2r(n)}},{"../../lib":515,"../../plot_api/plot_template":555,"../../registry":647}],353:[function(t,B,V){var m=t("../../lib"),c=t("../color");B.exports=function(T,e,a,i){i("opacity");var n=i("bgcolor"),r=i("bordercolor"),v=c.opacity(r);i("borderpad");var s=i("borderwidth"),o=i("showarrow");i("text",o?" ":a._dfltTitle.annotation),i("textangle"),m.coerceFont(i,"font",a.font),i("width"),i("align");var b=i("height");if(b&&i("valign"),o){var g=i("arrowside"),d,f;g.indexOf("end")!==-1&&(d=i("arrowhead"),f=i("arrowsize")),g.indexOf("start")!==-1&&(i("startarrowhead",d),i("startarrowsize",f)),i("arrowcolor",v?e.bordercolor:c.defaultLine),i("arrowwidth",(v&&s||1)*2),i("standoff"),i("startstandoff")}var y=i("hovertext"),l=a.hoverlabel||{};if(y){var x=i("hoverlabel.bgcolor",l.bgcolor||(c.opacity(n)?c.rgb(n):c.defaultLine)),u=i("hoverlabel.bordercolor",l.bordercolor||c.contrast(x));m.coerceFont(i,"hoverlabel.font",{family:l.font.family,size:l.font.size,color:l.font.color||u})}i("captureevents",!!y)}},{"../../lib":515,"../color":367}],354:[function(t,B,V){var m=t("fast-isnumeric"),c=t("../../lib/to_log_range");B.exports=function(T,e,a,i){e=e||{};var n=a==="log"&&e.type==="linear",r=a==="linear"&&e.type==="log";if(!(n||r))return;var v=T._fullLayout.annotations,s=e._id.charAt(0),o,b;function g(f){var y=o[f],l=null;n?l=c(y,e.range):l=Math.pow(10,y),m(l)||(l=null),i(b+f,l)}for(var d=0;d<v.length;d++)o=v[d],b="annotations["+d+"].",o[s+"ref"]===e._id&&g(s),o["a"+s+"ref"]===e._id&&g("a"+s)}},{"../../lib/to_log_range":543,"fast-isnumeric":190}],355:[function(t,B,V){var m=t("../../lib"),c=t("../../plots/cartesian/axes"),A=t("../../plots/array_container_defaults"),T=t("./common_defaults"),e=t("./attributes");B.exports=function(n,r){A(n,r,{name:"annotations",handleItemDefaults:a})};function a(i,n,r){function v(L,S){return m.coerce(i,n,e,L,S)}var s=v("visible"),o=v("clicktoshow");if(!!(s||o)){T(i,n,r,v);for(var b=n.showarrow,g=["x","y"],d=[-10,-30],f={_fullLayout:r},y=0;y<2;y++){var l=g[y],x=c.coerceRef(i,n,f,l,"","paper");if(x!=="paper"){var u=c.getFromId(f,x);u._annIndices.push(n._index)}if(c.coercePosition(n,f,v,x,l,.5),b){var M="a"+l,_=c.coerceRef(i,n,f,M,"pixel",["pixel","paper"]);_!=="pixel"&&_!==x&&(_=n[M]="pixel");var p=_==="pixel"?d[y]:.4;c.coercePosition(n,f,v,_,M,p)}v(l+"anchor"),v(l+"shift")}if(m.noneOrAll(i,n,["x","y"]),b&&m.noneOrAll(i,n,["ax","ay"]),o){var w=v("xclick"),h=v("yclick");n._xclick=w===void 0?n.x:c.cleanPosition(w,f,n.xref),n._yclick=h===void 0?n.y:c.cleanPosition(h,f,n.yref)}}}},{"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"./attributes":350,"./common_defaults":353}],356:[function(t,B,V){var m=t("@plotly/d3"),c=t("../../registry"),A=t("../../plots/plots"),T=t("../../lib"),e=T.strTranslate,a=t("../../plots/cartesian/axes"),i=t("../color"),n=t("../drawing"),r=t("../fx"),v=t("../../lib/svg_text_utils"),s=t("../../lib/setcursor"),o=t("../dragelement"),b=t("../../plot_api/plot_template").arrayEditor,g=t("./draw_arrow_head");B.exports={draw:d,drawOne:f,drawRaw:l};function d(x){var u=x._fullLayout;u._infolayer.selectAll(".annotation").remove();for(var M=0;M<u.annotations.length;M++)u.annotations[M].visible&&f(x,M);return A.previousPromises(x)}function f(x,u){var M=x._fullLayout,_=M.annotations[u]||{},p=a.getFromId(x,_.xref),w=a.getFromId(x,_.yref);p&&p.setScale(),w&&w.setScale(),l(x,_,u,!1,p,w)}function y(x,u,M,_,p){var w=p[M],h=p[M+"ref"],L=M.indexOf("y")!==-1,S=a.getRefType(h)==="domain",E=L?_.h:_.w;return x?S?w+(L?-u:u)/x._length:x.p2r(x.r2p(w)+u):w+(L?-u:u)/E}function l(x,u,M,_,p,w){var h=x._fullLayout,L=x._fullLayout._size,S=x._context.edits,E,P;_?(E="annotation-"+_,P=_+".annotations"):(E="annotation",P="annotations");var F=b(x.layout,P,u),I=F.modifyBase,D=F.modifyItem,R=F.getUpdateObj;h._infolayer.selectAll("."+E+'[data-index="'+M+'"]').remove();var N="clip"+h._uid+"_ann"+M;if(!u._input||u.visible===!1){m.selectAll("#"+N).remove();return}var z={x:{},y:{}},G=+u.textangle||0,Y=h._infolayer.append("g").classed(E,!0).attr("data-index",String(M)).style("opacity",u.opacity),ee=Y.append("g").classed("annotation-text-g",!0),Z=S[u.showarrow?"annotationTail":"annotationPosition"],X=u.captureevents||S.annotationText||Z;function ne(se){var _e={index:M,annotation:u._input,fullAnnotation:u,event:se};return _&&(_e.subplotId=_),_e}var ce=ee.append("g").style("pointer-events",X?"all":null).call(s,"pointer").on("click",function(){x._dragging=!1,x.emit("plotly_clickannotation",ne(m.event))});u.hovertext&&ce.on("mouseover",function(){var se=u.hoverlabel,_e=se.font,ue=this.getBoundingClientRect(),ye=x.getBoundingClientRect();r.loneHover({x0:ue.left-ye.left,x1:ue.right-ye.left,y:(ue.top+ue.bottom)/2-ye.top,text:u.hovertext,color:se.bgcolor,borderColor:se.bordercolor,fontFamily:_e.family,fontSize:_e.size,fontColor:_e.color},{container:h._hoverlayer.node(),outerContainer:h._paper.node(),gd:x})}).on("mouseout",function(){r.loneUnhover(h._hoverlayer.node())});var Q=u.borderwidth,K=u.borderpad,U=Q+K,H=ce.append("rect").attr("class","bg").style("stroke-width",Q+"px").call(i.stroke,u.bordercolor).call(i.fill,u.bgcolor),q=u.width||u.height,re=h._topclips.selectAll("#"+N).data(q?[0]:[]);re.enter().append("clipPath").classed("annclip",!0).attr("id",N).append("rect"),re.exit().remove();var j=u.font,$=h._meta?T.templateString(u.text,h._meta):u.text,ie=ce.append("text").classed("annotation-text",!0).text($);function oe(se){return se.call(n.font,j).attr({"text-anchor":{left:"start",right:"end"}[u.align]||"middle"}),v.convertToTspans(se,x,ae),se}function ae(){var se=ie.selectAll("a");if(se.size()===1&&se.text()===ie.text()){var _e=ce.insert("a",":first-child").attr({"xlink:xlink:href":se.attr("xlink:href"),"xlink:xlink:show":se.attr("xlink:show")}).style({cursor:"pointer"});_e.node().appendChild(H.node())}var ue=ce.select(".annotation-text-math-group"),ye=!ue.empty(),xe=n.bBox((ye?ue:ie).node()),me=xe.width,be=xe.height,ke=u.width||me,De=u.height||be,Ve=Math.round(ke+2*U),Ae=Math.round(De+2*U);function Le(er,Kt){return Kt==="auto"&&(er<1/3?Kt="left":er>2/3?Kt="right":Kt="center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[Kt]}for(var je=!1,Ye=["x","y"],ze=0;ze<Ye.length;ze++){var Ie=Ye[ze],We=u[Ie+"ref"]||Ie,pt=u["a"+Ie+"ref"],Ft={x:p,y:w}[Ie],Qt=(G+(Ie==="x"?0:-90))*Math.PI/180,zt=Ve*Math.cos(Qt),Et=Ae*Math.sin(Qt),Xt=Math.abs(zt)+Math.abs(Et),Nt=u[Ie+"anchor"],Ct=u[Ie+"shift"]*(Ie==="x"?1:-1),Xe=z[Ie],at,Ge,Se,He,Ke,qe=a.getRefType(We);if(Ft&&qe!=="domain"){var Tt=Ft.r2fraction(u[Ie]);(Tt<0||Tt>1)&&(pt===We?(Tt=Ft.r2fraction(u["a"+Ie]),(Tt<0||Tt>1)&&(je=!0)):je=!0),at=Ft._offset+Ft.r2p(u[Ie]),He=.5}else{var mt=qe==="domain";Ie==="x"?(Se=u[Ie],at=mt?Ft._offset+Ft._length*Se:at=L.l+L.w*Se):(Se=1-u[Ie],at=mt?Ft._offset+Ft._length*Se:at=L.t+L.h*Se),He=u.showarrow?.5:Se}if(u.showarrow){Xe.head=at;var At=u["a"+Ie];if(Ke=zt*Le(.5,u.xanchor)-Et*Le(.5,u.yanchor),pt===We){var Ht=a.getRefType(pt);Ht==="domain"?(Ie==="y"&&(At=1-At),Xe.tail=Ft._offset+Ft._length*At):Ht==="paper"?Ie==="y"?(At=1-At,Xe.tail=L.t+L.h*At):Xe.tail=L.l+L.w*At:Xe.tail=Ft._offset+Ft.r2p(At),Ge=Ke}else Xe.tail=at+At,Ge=Ke+At;Xe.text=Xe.tail+Ke;var It=h[Ie==="x"?"width":"height"];if(We==="paper"&&(Xe.head=T.constrain(Xe.head,1,It-1)),pt==="pixel"){var Vt=-Math.max(Xe.tail-3,Xe.text),jt=Math.min(Xe.tail+3,Xe.text)-It;Vt>0?(Xe.tail+=Vt,Xe.text+=Vt):jt>0&&(Xe.tail-=jt,Xe.text-=jt)}Xe.tail+=Ct,Xe.head+=Ct}else Ke=Xt*Le(He,Nt),Ge=Ke,Xe.text=at+Ke;Xe.text+=Ct,Ke+=Ct,Ge+=Ct,u["_"+Ie+"padplus"]=Xt/2+Ge,u["_"+Ie+"padminus"]=Xt/2-Ge,u["_"+Ie+"size"]=Xt,u["_"+Ie+"shift"]=Ke}if(je){ce.remove();return}var Yt=0,or=0;if(u.align!=="left"&&(Yt=(ke-me)*(u.align==="center"?.5:1)),u.valign!=="top"&&(or=(De-be)*(u.valign==="middle"?.5:1)),ye)ue.select("svg").attr({x:U+Yt-1,y:U+or}).call(n.setClipUrl,q?N:null,x);else{var Gr=U+or-xe.top,on=U+Yt-xe.left;ie.call(v.positionText,on,Gr).call(n.setClipUrl,q?N:null,x)}re.select("rect").call(n.setRect,U,U,ke,De),H.call(n.setRect,Q/2,Q/2,Ve-Q,Ae-Q),ce.call(n.setTranslate,Math.round(z.x.text-Ve/2),Math.round(z.y.text-Ae/2)),ee.attr({transform:"rotate("+G+","+z.x.text+","+z.y.text+")"});var Jr=function(er,Kt){Y.selectAll(".annotation-arrow-g").remove();var fr=z.x.head,Ar=z.y.head,et=z.x.tail+er,$e=z.y.tail+Kt,st=z.x.text+er,ct=z.y.text+Kt,Mt=T.rotationXYMatrix(G,st,ct),Ut=T.apply2DTransform(Mt),Pe=T.apply2DTransform2(Mt),Ee=+H.attr("width"),it=+H.attr("height"),ut=st-.5*Ee,vt=ut+Ee,St=ct-.5*it,yt=St+it,Pt=[[ut,St,ut,yt],[ut,yt,vt,yt],[vt,yt,vt,St],[vt,St,ut,St]].map(Pe);if(!Pt.reduce(function(nt,Dt){return nt^!!T.segmentsIntersect(fr,Ar,fr+1e6,Ar+1e6,Dt[0],Dt[1],Dt[2],Dt[3])},!1)){Pt.forEach(function(nt){var Dt=T.segmentsIntersect(et,$e,fr,Ar,nt[0],nt[1],nt[2],nt[3]);Dt&&(et=Dt.x,$e=Dt.y)});var Wt=u.arrowwidth,ar=u.arrowcolor,kr=u.arrowside,wr=Y.append("g").style({opacity:i.opacity(ar)}).classed("annotation-arrow-g",!0),Sr=wr.append("path").attr("d","M"+et+","+$e+"L"+fr+","+Ar).style("stroke-width",Wt+"px").call(i.stroke,i.rgb(ar));if(g(Sr,kr,u),S.annotationPosition&&Sr.node().parentNode&&!_){var Zr=fr,ir=Ar;if(u.standoff){var xr=Math.sqrt(Math.pow(fr-et,2)+Math.pow(Ar-$e,2));Zr+=u.standoff*(et-fr)/xr,ir+=u.standoff*($e-Ar)/xr}var Rr=wr.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(et-Zr)+","+($e-ir),transform:e(Zr,ir)}).style("stroke-width",Wt+6+"px").call(i.stroke,"rgba(0,0,0,0)").call(i.fill,"rgba(0,0,0,0)"),Br,Cr;o.init({element:Rr.node(),gd:x,prepFn:function(){var nt=n.getTranslate(ce);Br=nt.x,Cr=nt.y,p&&p.autorange&&I(p._name+".autorange",!0),w&&w.autorange&&I(w._name+".autorange",!0)},moveFn:function(nt,Dt){var Zt=Ut(Br,Cr),sr=Zt[0]+nt,zr=Zt[1]+Dt;ce.call(n.setTranslate,sr,zr),D("x",y(p,nt,"x",L,u)),D("y",y(w,Dt,"y",L,u)),u.axref===u.xref&&D("ax",y(p,nt,"ax",L,u)),u.ayref===u.yref&&D("ay",y(w,Dt,"ay",L,u)),wr.attr("transform",e(nt,Dt)),ee.attr({transform:"rotate("+G+","+sr+","+zr+")"})},doneFn:function(){c.call("_guiRelayout",x,R());var nt=document.querySelector(".js-notes-box-panel");nt&&nt.redraw(nt.selectedObj)}})}}};if(u.showarrow&&Jr(0,0),Z){var ot;o.init({element:ce.node(),gd:x,prepFn:function(){ot=ee.attr("transform")},moveFn:function(er,Kt){var fr="pointer";if(u.showarrow)u.axref===u.xref?D("ax",y(p,er,"ax",L,u)):D("ax",u.ax+er),u.ayref===u.yref?D("ay",y(w,Kt,"ay",L.w,u)):D("ay",u.ay+Kt),Jr(er,Kt);else{if(_)return;var Ar,et;if(p)Ar=y(p,er,"x",L,u);else{var $e=u._xsize/L.w,st=u.x+(u._xshift-u.xshift)/L.w-$e/2;Ar=o.align(st+er/L.w,$e,0,1,u.xanchor)}if(w)et=y(w,Kt,"y",L,u);else{var ct=u._ysize/L.h,Mt=u.y-(u._yshift+u.yshift)/L.h-ct/2;et=o.align(Mt-Kt/L.h,ct,0,1,u.yanchor)}D("x",Ar),D("y",et),(!p||!w)&&(fr=o.getCursor(p?.5:Ar,w?.5:et,u.xanchor,u.yanchor))}ee.attr({transform:e(er,Kt)+ot}),s(ce,fr)},clickFn:function(er,Kt){u.captureevents&&x.emit("plotly_clickannotation",ne(Kt))},doneFn:function(){s(ce),c.call("_guiRelayout",x,R());var er=document.querySelector(".js-notes-box-panel");er&&er.redraw(er.selectedObj)}})}}S.annotationText?ie.call(v.makeEditable,{delegate:ce,gd:x}).call(oe).on("edit",function(se){u.text=se,this.call(oe),D("text",se),p&&p.autorange&&I(p._name+".autorange",!0),w&&w.autorange&&I(w._name+".autorange",!0),c.call("_guiRelayout",x,R())}):ie.call(oe)}},{"../../lib":515,"../../lib/setcursor":536,"../../lib/svg_text_utils":541,"../../plot_api/plot_template":555,"../../plots/cartesian/axes":566,"../../plots/plots":628,"../../registry":647,"../color":367,"../dragelement":386,"../drawing":389,"../fx":407,"./draw_arrow_head":357,"@plotly/d3":58}],357:[function(t,B,V){var m=t("@plotly/d3"),c=t("../color"),A=t("./arrow_paths"),T=t("../../lib"),e=T.strScale,a=T.strRotate,i=T.strTranslate;B.exports=function(r,v,s){var o=r.node(),b=A[s.arrowhead||0],g=A[s.startarrowhead||0],d=(s.arrowwidth||1)*(s.arrowsize||1),f=(s.arrowwidth||1)*(s.startarrowsize||1),y=v.indexOf("start")>=0,l=v.indexOf("end")>=0,x=b.backoff*d+s.standoff,u=g.backoff*f+s.startstandoff,M,_,p,w;if(o.nodeName==="line"){M={x:+r.attr("x1"),y:+r.attr("y1")},_={x:+r.attr("x2"),y:+r.attr("y2")};var h=M.x-_.x,L=M.y-_.y;if(p=Math.atan2(L,h),w=p+Math.PI,x&&u&&x+u>Math.sqrt(h*h+L*L)){ee();return}if(x){if(x*x>h*h+L*L){ee();return}var S=x*Math.cos(p),E=x*Math.sin(p);_.x+=S,_.y+=E,r.attr({x2:_.x,y2:_.y})}if(u){if(u*u>h*h+L*L){ee();return}var P=u*Math.cos(p),F=u*Math.sin(p);M.x-=P,M.y-=F,r.attr({x1:M.x,y1:M.y})}}else if(o.nodeName==="path"){var I=o.getTotalLength(),D="";if(I<x+u){ee();return}var R=o.getPointAtLength(0),N=o.getPointAtLength(.1);p=Math.atan2(R.y-N.y,R.x-N.x),M=o.getPointAtLength(Math.min(u,I)),D="0px,"+u+"px,";var z=o.getPointAtLength(I),G=o.getPointAtLength(I-.1);w=Math.atan2(z.y-G.y,z.x-G.x),_=o.getPointAtLength(Math.max(0,I-x));var Y=D?u+x:x;D+=I-Y+"px,"+I+"px",r.style("stroke-dasharray",D)}function ee(){r.style("stroke-dasharray","0px,100px")}function Z(X,ne,ce,Q){!X.path||(X.noRotate&&(ce=0),m.select(o.parentNode).append("path").attr({class:r.attr("class"),d:X.path,transform:i(ne.x,ne.y)+a(ce*180/Math.PI)+e(Q)}).style({fill:c.rgb(s.arrowcolor),"stroke-width":0}))}y&&Z(g,M,p,f),l&&Z(b,_,w,d)}},{"../../lib":515,"../color":367,"./arrow_paths":349,"@plotly/d3":58}],358:[function(t,B,V){var m=t("./draw"),c=t("./click");B.exports={moduleType:"component",name:"annotations",layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),includeBasePlot:t("../../plots/cartesian/include_components")("annotations"),calcAutorange:t("./calc_autorange"),draw:m.draw,drawOne:m.drawOne,drawRaw:m.drawRaw,hasClickToShow:c.hasClickToShow,onClick:c.onClick,convertCoords:t("./convert_coords")}},{"../../plots/cartesian/include_components":577,"./attributes":350,"./calc_autorange":351,"./click":352,"./convert_coords":354,"./defaults":355,"./draw":356}],359:[function(t,B,V){var m=t("../annotations/attributes"),c=t("../../plot_api/edit_types").overrideAll,A=t("../../plot_api/plot_template").templatedArray;B.exports=c(A("annotation",{visible:m.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:m.xanchor,xshift:m.xshift,yanchor:m.yanchor,yshift:m.yshift,text:m.text,textangle:m.textangle,font:m.font,width:m.width,height:m.height,opacity:m.opacity,align:m.align,valign:m.valign,bgcolor:m.bgcolor,bordercolor:m.bordercolor,borderpad:m.borderpad,borderwidth:m.borderwidth,showarrow:m.showarrow,arrowcolor:m.arrowcolor,arrowhead:m.arrowhead,startarrowhead:m.startarrowhead,arrowside:m.arrowside,arrowsize:m.arrowsize,startarrowsize:m.startarrowsize,arrowwidth:m.arrowwidth,standoff:m.standoff,startstandoff:m.startstandoff,hovertext:m.hovertext,hoverlabel:m.hoverlabel,captureevents:m.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../annotations/attributes":350}],360:[function(t,B,V){var m=t("../../lib"),c=t("../../plots/cartesian/axes");B.exports=function(e){for(var a=e.fullSceneLayout,i=a.annotations,n=0;n<i.length;n++)A(i[n],e);e.fullLayout._infolayer.selectAll(".annotation-"+e.id).remove()};function A(T,e){var a=e.fullSceneLayout,i=a.domain,n=e.fullLayout._size,r={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};T._xa={},m.extendFlat(T._xa,r),c.setConvert(T._xa),T._xa._offset=n.l+i.x[0]*n.w,T._xa.l2p=function(){return .5*(1+T._pdata[0]/T._pdata[3])*n.w*(i.x[1]-i.x[0])},T._ya={},m.extendFlat(T._ya,r),c.setConvert(T._ya),T._ya._offset=n.t+(1-i.y[1])*n.h,T._ya.l2p=function(){return .5*(1-T._pdata[1]/T._pdata[3])*n.h*(i.y[1]-i.y[0])}}},{"../../lib":515,"../../plots/cartesian/axes":566}],361:[function(t,B,V){var m=t("../../lib"),c=t("../../plots/cartesian/axes"),A=t("../../plots/array_container_defaults"),T=t("../annotations/common_defaults"),e=t("./attributes");B.exports=function(n,r,v){A(n,r,{name:"annotations",handleItemDefaults:a,fullLayout:v.fullLayout})};function a(i,n,r,v){function s(g,d){return m.coerce(i,n,e,g,d)}function o(g){var d=g+"axis",f={_fullLayout:{}};return f._fullLayout[d]=r[d],c.coercePosition(n,f,s,g,g,.5)}var b=s("visible");!b||(T(i,n,v.fullLayout,s),o("x"),o("y"),o("z"),m.noneOrAll(i,n,["x","y","z"]),n.xref="x",n.yref="y",n.zref="z",s("xanchor"),s("yanchor"),s("xshift"),s("yshift"),n.showarrow&&(n.axref="pixel",n.ayref="pixel",s("ax",-10),s("ay",-30),m.noneOrAll(i,n,["ax","ay"])))}},{"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"../annotations/common_defaults":353,"./attributes":359}],362:[function(t,B,V){var m=t("../annotations/draw").drawRaw,c=t("../../plots/gl3d/project"),A=["x","y","z"];B.exports=function(e){for(var a=e.fullSceneLayout,i=e.dataScale,n=a.annotations,r=0;r<n.length;r++){for(var v=n[r],s=!1,o=0;o<3;o++){var b=A[o],g=v[b],d=a[b+"axis"],f=d.r2fraction(g);if(f<0||f>1){s=!0;break}}s?e.fullLayout._infolayer.select(".annotation-"+e.id+'[data-index="'+r+'"]').remove():(v._pdata=c(e.glplot.cameraParams,[a.xaxis.r2l(v.x)*i[0],a.yaxis.r2l(v.y)*i[1],a.zaxis.r2l(v.z)*i[2]]),m(e.graphDiv,v,r,e.id,v._xa,v._ya))}}},{"../../plots/gl3d/project":616,"../annotations/draw":356}],363:[function(t,B,V){var m=t("../../registry"),c=t("../../lib");B.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:t("./attributes")}}},layoutAttributes:t("./attributes"),handleDefaults:t("./defaults"),includeBasePlot:A,convert:t("./convert"),draw:t("./draw")};function A(T,e){var a=m.subplotsRegistry.gl3d;if(!!a)for(var i=a.attrRegex,n=Object.keys(T),r=0;r<n.length;r++){var v=n[r];i.test(v)&&(T[v].annotations||[]).length&&(c.pushUnique(e._basePlotModules,a),c.pushUnique(e._subplots.gl3d,v))}}},{"../../lib":515,"../../registry":647,"./attributes":359,"./convert":360,"./defaults":361,"./draw":362}],364:[function(t,B,V){B.exports=t("world-calendars/dist/main"),t("world-calendars/dist/plus"),t("world-calendars/dist/calendars/chinese"),t("world-calendars/dist/calendars/coptic"),t("world-calendars/dist/calendars/discworld"),t("world-calendars/dist/calendars/ethiopian"),t("world-calendars/dist/calendars/hebrew"),t("world-calendars/dist/calendars/islamic"),t("world-calendars/dist/calendars/julian"),t("world-calendars/dist/calendars/mayan"),t("world-calendars/dist/calendars/nanakshahi"),t("world-calendars/dist/calendars/nepali"),t("world-calendars/dist/calendars/persian"),t("world-calendars/dist/calendars/taiwan"),t("world-calendars/dist/calendars/thai"),t("world-calendars/dist/calendars/ummalqura")},{"world-calendars/dist/calendars/chinese":333,"world-calendars/dist/calendars/coptic":334,"world-calendars/dist/calendars/discworld":335,"world-calendars/dist/calendars/ethiopian":336,"world-calendars/dist/calendars/hebrew":337,"world-calendars/dist/calendars/islamic":338,"world-calendars/dist/calendars/julian":339,"world-calendars/dist/calendars/mayan":340,"world-calendars/dist/calendars/nanakshahi":341,"world-calendars/dist/calendars/nepali":342,"world-calendars/dist/calendars/persian":343,"world-calendars/dist/calendars/taiwan":344,"world-calendars/dist/calendars/thai":345,"world-calendars/dist/calendars/ummalqura":346,"world-calendars/dist/main":347,"world-calendars/dist/plus":348}],365:[function(t,B,V){var m=t("./calendars"),c=t("../../lib"),A=t("../../constants/numerical"),T=A.EPOCHJD,e=A.ONEDAY,a={valType:"enumerated",values:c.sortObjectKeys(m.calendars),editType:"calc",dflt:"gregorian"},i=function(p,w,h,L){var S={};return S[h]=a,c.coerce(p,w,S,h,L)},n=function(p,w,h,L){for(var S=0;S<h.length;S++)i(p,w,h[S]+"calendar",L.calendar)},r={chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},v={chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},s={chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},o="##",b={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:o,w:o,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}};function g(p,w,h){for(var L=Math.floor((w+.05)/e)+T,S=f(h).fromJD(L),E=0,P,F,I,D,R;(E=p.indexOf("%",E))!==-1;)P=p.charAt(E+1),P==="0"||P==="-"||P==="_"?(I=3,F=p.charAt(E+2),P==="_"&&(P="-")):(F=P,P="0",I=2),D=b[F],D?(D===o?R=o:R=S.formatDate(D[P]),p=p.substr(0,E)+R+p.substr(E+I),E+=R.length):E+=I;return p}var d={};function f(p){var w=d[p];return w||(w=d[p]=m.instance(p),w)}function y(p){return c.extendFlat({},a,{description:p})}function l(p){return"Sets the calendar system to use with `"+p+"` date data."}var x={xcalendar:y(l("x"))},u=c.extendFlat({},x,{ycalendar:y(l("y"))}),M=c.extendFlat({},u,{zcalendar:y(l("z"))}),_=y(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));B.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:u,bar:u,box:u,heatmap:u,contour:u,histogram:u,histogram2d:u,histogram2dcontour:u,scatter3d:M,surface:M,mesh3d:M,scattergl:u,ohlc:x,candlestick:x},layout:{calendar:y(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:_},yaxis:{calendar:_},scene:{xaxis:{calendar:_},yaxis:{calendar:_},zaxis:{calendar:_}},polar:{radialaxis:{calendar:_}}},transforms:{filter:{valuecalendar:y(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:y(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:a,handleDefaults:i,handleTraceDefaults:n,CANONICAL_SUNDAY:v,CANONICAL_TICK:r,DFLTRANGE:s,getCal:f,worldCalFmt:g}},{"../../constants/numerical":491,"../../lib":515,"./calendars":364}],366:[function(t,B,V){V.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],V.defaultLine="#444",V.lightLine="#eee",V.background="#fff",V.borderLine="#BEC8D9",V.lightFraction=100*(14-4)/(15-4)},{}],367:[function(t,B,V){var m=t("tinycolor2"),c=t("fast-isnumeric"),A=t("../../lib/array").isTypedArray,T=B.exports={},e=t("./attributes");T.defaults=e.defaults;var a=T.defaultLine=e.defaultLine;T.lightLine=e.lightLine;var i=T.background=e.background;T.tinyRGB=function(r){var v=r.toRgb();return"rgb("+Math.round(v.r)+", "+Math.round(v.g)+", "+Math.round(v.b)+")"},T.rgb=function(r){return T.tinyRGB(m(r))},T.opacity=function(r){return r?m(r).getAlpha():0},T.addOpacity=function(r,v){var s=m(r).toRgb();return"rgba("+Math.round(s.r)+", "+Math.round(s.g)+", "+Math.round(s.b)+", "+v+")"},T.combine=function(r,v){var s=m(r).toRgb();if(s.a===1)return m(r).toRgbString();var o=m(v||i).toRgb(),b=o.a===1?o:{r:255*(1-o.a)+o.r*o.a,g:255*(1-o.a)+o.g*o.a,b:255*(1-o.a)+o.b*o.a},g={r:b.r*(1-s.a)+s.r*s.a,g:b.g*(1-s.a)+s.g*s.a,b:b.b*(1-s.a)+s.b*s.a};return m(g).toRgbString()},T.contrast=function(r,v,s){var o=m(r);o.getAlpha()!==1&&(o=m(T.combine(r,i)));var b=o.isDark()?v?o.lighten(v):i:s?o.darken(s):a;return b.toString()},T.stroke=function(r,v){var s=m(v);r.style({stroke:T.tinyRGB(s),"stroke-opacity":s.getAlpha()})},T.fill=function(r,v){var s=m(v);r.style({fill:T.tinyRGB(s),"fill-opacity":s.getAlpha()})},T.clean=function(r){if(!(!r||typeof r!="object")){var v=Object.keys(r),s,o,b,g;for(s=0;s<v.length;s++)if(b=v[s],g=r[b],b.substr(b.length-5)==="color")if(Array.isArray(g))for(o=0;o<g.length;o++)g[o]=n(g[o]);else r[b]=n(g);else if(b.substr(b.length-10)==="colorscale"&&Array.isArray(g))for(o=0;o<g.length;o++)Array.isArray(g[o])&&(g[o][1]=n(g[o][1]));else if(Array.isArray(g)){var d=g[0];if(!Array.isArray(d)&&d&&typeof d=="object")for(o=0;o<g.length;o++)T.clean(g[o])}else g&&typeof g=="object"&&!A(g)&&T.clean(g)}};function n(r){if(c(r)||typeof r!="string")return r;var v=r.trim();if(v.substr(0,3)!=="rgb")return r;var s=v.match(/^rgba?\s*\(([^()]*)\)$/);if(!s)return r;var o=s[1].trim().split(/\s*[\s,]\s*/),b=v.charAt(3)==="a"&&o.length===4;if(!b&&o.length!==3)return r;for(var g=0;g<o.length;g++){if(!o[g].length||(o[g]=Number(o[g]),!(o[g]>=0)))return r;if(g===3)o[g]>1&&(o[g]=1);else if(o[g]>=1)return r}var d=Math.round(o[0]*255)+", "+Math.round(o[1]*255)+", "+Math.round(o[2]*255);return b?"rgba("+d+", "+o[3]+")":"rgb("+d+")"}},{"../../lib/array":497,"./attributes":366,"fast-isnumeric":190,tinycolor2:313}],368:[function(t,B,V){var m=t("../../plots/cartesian/layout_attributes"),c=t("../../plots/font_attributes"),A=t("../../lib/extend").extendFlat,T=t("../../plot_api/edit_types").overrideAll;B.exports=T({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:m.linecolor,outlinewidth:m.linewidth,bordercolor:m.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:m.tickmode,nticks:m.nticks,tick0:m.tick0,dtick:m.dtick,tickvals:m.tickvals,ticktext:m.ticktext,ticks:A({},m.ticks,{dflt:""}),ticklabeloverflow:A({},m.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:m.ticklen,tickwidth:m.tickwidth,tickcolor:m.tickcolor,ticklabelstep:m.ticklabelstep,showticklabels:m.showticklabels,tickfont:c({}),tickangle:m.tickangle,tickformat:m.tickformat,tickformatstops:m.tickformatstops,tickprefix:m.tickprefix,showtickprefix:m.showtickprefix,ticksuffix:m.ticksuffix,showticksuffix:m.showticksuffix,separatethousands:m.separatethousands,exponentformat:m.exponentformat,minexponent:m.minexponent,showexponent:m.showexponent,title:{text:{valType:"string"},font:c({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:c({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},{"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/cartesian/layout_attributes":579,"../../plots/font_attributes":594}],369:[function(t,B,V){B.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],370:[function(t,B,V){var m=t("../../lib"),c=t("../../plot_api/plot_template"),A=t("../../plots/cartesian/tick_value_defaults"),T=t("../../plots/cartesian/tick_mark_defaults"),e=t("../../plots/cartesian/tick_label_defaults"),a=t("../../plots/cartesian/prefix_suffix_defaults"),i=t("./attributes");B.exports=function(r,v,s){var o=c.newContainer(v,"colorbar"),b=r.colorbar||{};function g(S,E){return m.coerce(b,o,i,S,E)}var d=s.margin||{t:0,b:0,l:0,r:0},f=s.width-d.l-d.r,y=s.height-d.t-d.b,l=g("orientation"),x=l==="v",u=g("thicknessmode");g("thickness",u==="fraction"?30/(x?f:y):30);var M=g("lenmode");g("len",M==="fraction"?1:x?y:f),g("x",x?1.02:.5),g("xanchor",x?"left":"center"),g("xpad"),g("y",x?.5:1.02),g("yanchor",x?"middle":"bottom"),g("ypad"),m.noneOrAll(b,o,["x","y"]),g("outlinecolor"),g("outlinewidth"),g("bordercolor"),g("borderwidth"),g("bgcolor");var _=m.coerce(b,o,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:x?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");g("ticklabeloverflow",_.indexOf("inside")!==-1?"hide past domain":"hide past div"),A(b,o,g,"linear");var p=s.font,w={outerTicks:!1,font:p};_.indexOf("inside")!==-1&&(w.bgColor="black"),a(b,o,g,"linear",w),e(b,o,g,"linear",w),T(b,o,g,"linear",w),g("title.text",s._dfltTitle.colorbar);var h=o.tickfont,L=m.extendFlat({},h,{color:p.color,size:m.bigFont(h.size)});m.coerceFont(g,"title.font",L),g("title.side",x?"top":"right")}},{"../../lib":515,"../../plot_api/plot_template":555,"../../plots/cartesian/prefix_suffix_defaults":583,"../../plots/cartesian/tick_label_defaults":587,"../../plots/cartesian/tick_mark_defaults":588,"../../plots/cartesian/tick_value_defaults":589,"./attributes":368}],371:[function(t,B,V){var m=t("@plotly/d3"),c=t("tinycolor2"),A=t("../../plots/plots"),T=t("../../registry"),e=t("../../plots/cartesian/axes"),a=t("../dragelement"),i=t("../../lib"),n=i.strTranslate,r=t("../../lib/extend").extendFlat,v=t("../../lib/setcursor"),s=t("../drawing"),o=t("../color"),b=t("../titles"),g=t("../../lib/svg_text_utils"),d=t("../colorscale/helpers").flipScale,f=t("../../plots/cartesian/axis_defaults"),y=t("../../plots/cartesian/position_defaults"),l=t("../../plots/cartesian/layout_attributes"),x=t("../../constants/alignment"),u=x.LINE_SPACING,M=x.FROM_TL,_=x.FROM_BR,p=t("./constants").cn;function w(F){var I=F._fullLayout,D=I._infolayer.selectAll("g."+p.colorbar).data(h(F),function(R){return R._id});D.enter().append("g").attr("class",function(R){return R._id}).classed(p.colorbar,!0),D.each(function(R){var N=m.select(this);i.ensureSingle(N,"rect",p.cbbg),i.ensureSingle(N,"g",p.cbfills),i.ensureSingle(N,"g",p.cblines),i.ensureSingle(N,"g",p.cbaxis,function(G){G.classed(p.crisp,!0)}),i.ensureSingle(N,"g",p.cbtitleunshift,function(G){G.append("g").classed(p.cbtitle,!0)}),i.ensureSingle(N,"rect",p.cboutline);var z=L(N,R,F);z&&z.then&&(F._promises||[]).push(z),F._context.edits.colorbarPosition&&S(N,R,F)}),D.exit().each(function(R){A.autoMargin(F,R._id)}).remove(),D.order()}function h(F){var I=F._fullLayout,D=F.calcdata,R=[],N,z,G,Y;function ee(j){return r(j,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function Z(){typeof Y.calc=="function"?Y.calc(F,G,N):(N._fillgradient=z.reversescale?d(z.colorscale):z.colorscale,N._zrange=[z[Y.min],z[Y.max]])}for(var X=0;X<D.length;X++){var ne=D[X];G=ne[0].trace;var ce=G._module.colorbar;if(G.visible===!0&&ce)for(var Q=Array.isArray(ce),K=Q?ce:[ce],U=0;U<K.length;U++){Y=K[U];var H=Y.container;z=H?G[H]:G,z&&z.showscale&&(N=ee(z.colorbar),N._id="cb"+G.uid+(Q&&H?"-"+H:""),N._traceIndex=G.index,N._propPrefix=(H?H+".":"")+"colorbar.",N._meta=G._meta,Z(),R.push(N))}}for(var q in I._colorAxes)if(z=I[q],z.showscale){var re=I._colorAxes[q];N=ee(z.colorbar),N._id="cb"+q,N._propPrefix=q+".colorbar.",N._meta=I._meta,Y={min:"cmin",max:"cmax"},re[0]!=="heatmap"&&(G=re[1],Y.calc=G._module.colorbar.calc),Z(),R.push(N)}return R}function L(F,I,D){var R=I.orientation==="v",N=I.len,z=I.lenmode,G=I.thickness,Y=I.thicknessmode,ee=I.outlinewidth,Z=I.borderwidth,X=I.bgcolor,ne=I.xanchor,ce=I.yanchor,Q=I.xpad,K=I.ypad,U=I.x,H=R?I.y:1-I.y,q=D._fullLayout,re=q._size,j=I._fillcolor,$=I._line,ie=I.title,oe=ie.side,ae=I._zrange||m.extent((typeof j=="function"?j:$.color).domain()),se=typeof $.color=="function"?$.color:function(){return $.color},_e=typeof j=="function"?j:function(){return j},ue=I._levels,ye=E(D,I,ae),xe=ye.fill,me=ye.line,be=Math.round(G*(Y==="fraction"?R?re.w:re.h:1)),ke=be/(R?re.w:re.h),De=Math.round(N*(z==="fraction"?R?re.h:re.w:1)),Ve=De/(R?re.h:re.w),Ae=Math.round(R?U*re.w+Q:H*re.h+K),Le={center:.5,right:1}[ne]||0,je={top:1,middle:.5}[ce]||0,Ye=R?U-Le*ke:H-je*ke,ze=R?H-je*Ve:U-Le*Ve,Ie=Math.round(R?re.h*(1-ze):re.w*ze);I._lenFrac=Ve,I._thickFrac=ke,I._uFrac=Ye,I._vFrac=ze;var We=I._axis=P(D,I,ae);We.position=ke+(R?U+Q/re.w:H+K/re.h);var pt=["top","bottom"].indexOf(oe)!==-1;if(R&&pt&&(We.title.side=oe,We.titlex=U+Q/re.w,We.titley=ze+(ie.side==="top"?Ve-K/re.h:K/re.h)),!R&&!pt&&(We.title.side=oe,We.titley=H+K/re.h,We.titlex=ze+Q/re.w),$.color&&I.tickmode==="auto"){We.tickmode="linear",We.tick0=ue.start;var Ft=ue.size,Qt=i.constrain(De/50,4,15)+1,zt=(ae[1]-ae[0])/((I.nticks||Qt)*Ft);if(zt>1){var Et=Math.pow(10,Math.floor(Math.log(zt)/Math.LN10));Ft*=Et*i.roundUp(zt/Et,[2,5,10]),(Math.abs(ue.start)/ue.size+1e-6)%1<2e-6&&(We.tick0=0)}We.dtick=Ft}We.domain=R?[ze+K/re.h,ze+Ve-K/re.h]:[ze+Q/re.w,ze+Ve-Q/re.w],We.setScale(),F.attr("transform",n(Math.round(re.l),Math.round(re.t)));var Xt=F.select("."+p.cbtitleunshift).attr("transform",n(-Math.round(re.l),-Math.round(re.t))),Nt=We.ticklabelposition,Ct=We.title.font.size,Xe=F.select("."+p.cbaxis),at,Ge=0,Se=0;function He(At,Ht){var It={propContainer:We,propName:I._propPrefix+"title",traceIndex:I._traceIndex,_meta:I._meta,placeholder:q._dfltTitle.colorbar,containerGroup:F.select("."+p.cbtitle)},Vt=At.charAt(0)==="h"?At.substr(1):"h"+At;F.selectAll("."+Vt+",."+Vt+"-math-group").remove(),b.draw(D,At,r(It,Ht||{}))}function Ke(){if(R&&pt||!R&&!pt){var At,Ht;oe==="top"&&(At=Q+re.l+re.w*U,Ht=K+re.t+re.h*(1-ze-Ve)+3+Ct*.75),oe==="bottom"&&(At=Q+re.l+re.w*U,Ht=K+re.t+re.h*(1-ze)-3-Ct*.25),oe==="right"&&(Ht=K+re.t+re.h*H+3+Ct*.75,At=Q+re.l+re.w*ze),He(We._id+"title",{attributes:{x:At,y:Ht,"text-anchor":R?"start":"middle"}})}}function qe(){if(R&&!pt||!R&&pt){var At=We.position||0,Ht=We._offset+We._length/2,It,Vt;if(oe==="right")Vt=Ht,It=re.l+re.w*At+10+Ct*(We.showticklabels?1:.5);else if(It=Ht,oe==="bottom"&&(Vt=re.t+re.h*At+10+(Nt.indexOf("inside")===-1?We.tickfont.size:0)+(We.ticks!=="intside"&&I.ticklen||0)),oe==="top"){var jt=ie.text.split("<br>").length;Vt=re.t+re.h*At+10-be-u*Ct*jt}He((R?"h":"v")+We._id+"title",{avoid:{selection:m.select(D).selectAll("g."+We._id+"tick"),side:oe,offsetTop:R?0:re.t,offsetLeft:R?re.l:0,maxShift:R?q.width:q.height},attributes:{x:It,y:Vt,"text-anchor":"middle"},transform:{rotate:R?-90:0,offset:0}})}}function Tt(){if(!R&&!pt||R&&pt){var At=F.select("."+p.cbtitle),Ht=At.select("text"),It=[-ee/2,ee/2],Vt=At.select(".h"+We._id+"title-math-group").node(),jt=15.6;Ht.node()&&(jt=parseInt(Ht.node().style.fontSize,10)*u);var Yt;if(Vt?(Yt=s.bBox(Vt),Se=Yt.width,Ge=Yt.height,Ge>jt&&(It[1]-=(Ge-jt)/2)):Ht.node()&&!Ht.classed(p.jsPlaceholder)&&(Yt=s.bBox(Ht.node()),Se=Yt.width,Ge=Yt.height),R){if(Ge){if(Ge+=5,oe==="top")We.domain[1]-=Ge/re.h,It[1]*=-1;else{We.domain[0]+=Ge/re.h;var or=g.lineCount(Ht);It[1]+=(1-or)*jt}At.attr("transform",n(It[0],It[1])),We.setScale()}}else Se&&(oe==="right"&&(We.domain[0]+=(Se+Ct/2)/re.w),At.attr("transform",n(It[0],It[1])),We.setScale())}F.selectAll("."+p.cbfills+",."+p.cblines).attr("transform",R?n(0,Math.round(re.h*(1-We.domain[1]))):n(Math.round(re.w*We.domain[0]),0)),Xe.attr("transform",R?n(0,Math.round(-re.t)):n(Math.round(-re.l),0));var Gr=F.select("."+p.cbfills).selectAll("rect."+p.cbfill).attr("style","").data(xe);Gr.enter().append("rect").classed(p.cbfill,!0).style("stroke","none"),Gr.exit().remove();var on=ae.map(We.c2p).map(Math.round).sort(function(fr,Ar){return fr-Ar});Gr.each(function(fr,Ar){var et=[Ar===0?ae[0]:(xe[Ar]+xe[Ar-1])/2,Ar===xe.length-1?ae[1]:(xe[Ar]+xe[Ar+1])/2].map(We.c2p).map(Math.round);R&&(et[1]=i.constrain(et[1]+(et[1]>et[0])?1:-1,on[0],on[1]));var $e=m.select(this).attr(R?"x":"y",Ae).attr(R?"y":"x",m.min(et)).attr(R?"width":"height",Math.max(be,2)).attr(R?"height":"width",Math.max(m.max(et)-m.min(et),2));if(I._fillgradient)s.gradient($e,D,I._id,R?"vertical":"horizontalreversed",I._fillgradient,"fill");else{var st=_e(fr).replace("e-","");$e.attr("fill",c(st).toHexString())}});var Jr=F.select("."+p.cblines).selectAll("path."+p.cbline).data($.color&&$.width?me:[]);Jr.enter().append("path").classed(p.cbline,!0),Jr.exit().remove(),Jr.each(function(fr){var Ar=Ae,et=Math.round(We.c2p(fr))+$.width/2%1;m.select(this).attr("d","M"+(R?Ar+","+et:et+","+Ar)+(R?"h":"v")+be).call(s.lineGroupStyle,$.width,se(fr),$.dash)}),Xe.selectAll("g."+We._id+"tick,path").remove();var ot=Ae+be+(ee||0)/2-(I.ticks==="outside"?1:0),er=e.calcTicks(We),Kt=e.getTickSigns(We)[2];return e.drawTicks(D,We,{vals:We.ticks==="inside"?e.clipEnds(We,er):er,layer:Xe,path:e.makeTickPath(We,ot,Kt),transFn:e.makeTransTickFn(We)}),e.drawLabels(D,We,{vals:er,layer:Xe,transFn:e.makeTransTickLabelFn(We),labelFns:e.makeLabelFns(We,ot)})}function mt(){var At,Ht=be+ee/2;Nt.indexOf("inside")===-1&&(At=s.bBox(Xe.node()),Ht+=R?At.width:At.height),at=Xt.select("text");var It=0,Vt=R&&oe==="top",jt=!R&&oe==="right",Yt=0;if(at.node()&&!at.classed(p.jsPlaceholder)){var or,Gr=Xt.select(".h"+We._id+"title-math-group").node();Gr&&(R&&pt||!R&&!pt)?(At=s.bBox(Gr),It=At.width,or=At.height):(At=s.bBox(Xt.node()),It=At.right-re.l-(R?Ae:Ie),or=At.bottom-re.t-(R?Ie:Ae),!R&&oe==="top"&&(Ht+=At.height,Yt=At.height)),jt&&(at.attr("transform",n(It/2+Ct/2,0)),It*=2),Ht=Math.max(Ht,R?It:or)}var on=(R?Q:K)*2+Ht+Z+ee/2,Jr=0;!R&&ie.text&&ce==="bottom"&&H<=0&&(Jr=on/2,on+=Jr,Yt+=Jr),q._hColorbarMoveTitle=Jr,q._hColorbarMoveCBTitle=Yt;var ot=Z+ee;F.select("."+p.cbbg).attr("x",(R?Ae:Ie)-ot/2-(R?Q:0)).attr("y",(R?Ie:Ae)-(R?De:K+Yt-Jr)).attr(R?"width":"height",Math.max(on-Jr,2)).attr(R?"height":"width",Math.max(De+ot,2)).call(o.fill,X).call(o.stroke,I.bordercolor).style("stroke-width",Z);var er=jt?Math.max(It-10,0):0;if(F.selectAll("."+p.cboutline).attr("x",(R?Ae:Ie+Q)+er).attr("y",(R?Ie+K-De:Ae)+(Vt?Ge:0)).attr(R?"width":"height",Math.max(be,2)).attr(R?"height":"width",Math.max(De-(R?2*K+Ge:2*Q+er),2)).call(o.stroke,I.outlinecolor).style({fill:"none","stroke-width":ee}),F.attr("transform",n(re.l-(R?Le*on:0),re.t-(R?0:(1-je)*on-Yt))),!R&&(Z||c(X).getAlpha()&&!c.equals(q.paper_bgcolor,X))){var Kt=Xe.selectAll("text"),fr=Kt[0].length,Ar=F.select("."+p.cbbg).node(),et=s.bBox(Ar),$e=s.getTranslate(F),st=2;Kt.each(function(ut,vt){var St=0,yt=fr-1;if(vt===St||vt===yt){var Pt=s.bBox(this),Wt=s.getTranslate(this),ar;if(vt===yt){var kr=Pt.right+Wt.x,wr=et.right+$e.x+Ie-Z-st+U;ar=wr-kr,ar>0&&(ar=0)}else if(vt===St){var Sr=Pt.left+Wt.x,Zr=et.left+$e.x+Ie+Z+st;ar=Zr-Sr,ar<0&&(ar=0)}ar&&(fr<3?this.setAttribute("transform","translate("+ar+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var ct={},Mt=M[ne],Ut=_[ne],Pe=M[ce],Ee=_[ce],it=on-be;R?(z==="pixels"?(ct.y=H,ct.t=De*Pe,ct.b=De*Ee):(ct.t=ct.b=0,ct.yt=H+N*Pe,ct.yb=H-N*Ee),Y==="pixels"?(ct.x=U,ct.l=on*Mt,ct.r=on*Ut):(ct.l=it*Mt,ct.r=it*Ut,ct.xl=U-G*Mt,ct.xr=U+G*Ut)):(z==="pixels"?(ct.x=U,ct.l=De*Mt,ct.r=De*Ut):(ct.l=ct.r=0,ct.xl=U+N*Mt,ct.xr=U-N*Ut),Y==="pixels"?(ct.y=1-H,ct.t=on*Pe,ct.b=on*Ee):(ct.t=it*Pe,ct.b=it*Ee,ct.yt=H-G*Pe,ct.yb=H+G*Ee)),A.autoMargin(D,I._id,ct)}return i.syncOrAsync([A.previousPromises,Ke,Tt,qe,A.previousPromises,mt],D)}function S(F,I,D){var R=I.orientation==="v",N=D._fullLayout,z=N._size,G,Y,ee;a.init({element:F.node(),gd:D,prepFn:function(){G=F.attr("transform"),v(F)},moveFn:function(Z,X){F.attr("transform",G+n(Z,X)),Y=a.align((R?I._uFrac:I._vFrac)+Z/z.w,R?I._thickFrac:I._lenFrac,0,1,I.xanchor),ee=a.align((R?I._vFrac:1-I._uFrac)-X/z.h,R?I._lenFrac:I._thickFrac,0,1,I.yanchor);var ne=a.getCursor(Y,ee,I.xanchor,I.yanchor);v(F,ne)},doneFn:function(){if(v(F),Y!==void 0&&ee!==void 0){var Z={};Z[I._propPrefix+"x"]=Y,Z[I._propPrefix+"y"]=ee,I._traceIndex!==void 0?T.call("_guiRestyle",D,Z,I._traceIndex):T.call("_guiRelayout",D,Z)}}})}function E(F,I,D){var R=I._levels,N=[],z=[],G,Y,ee=R.end+R.size/100,Z=R.size,X=1.001*D[0]-.001*D[1],ne=1.001*D[1]-.001*D[0];for(Y=0;Y<1e5&&(G=R.start+Y*Z,!(Z>0?G>=ee:G<=ee));Y++)G>X&&G<ne&&N.push(G);if(I._fillgradient)z=[0];else if(typeof I._fillcolor=="function"){var ce=I._filllevels;if(ce)for(ee=ce.end+ce.size/100,Z=ce.size,Y=0;Y<1e5&&(G=ce.start+Y*Z,!(Z>0?G>=ee:G<=ee));Y++)G>D[0]&&G<D[1]&&z.push(G);else z=N.map(function(Q){return Q-R.size/2}),z.push(z[z.length-1]+R.size)}else I._fillcolor&&typeof I._fillcolor=="string"&&(z=[0]);return R.size<0&&(N.reverse(),z.reverse()),{line:N,fill:z}}function P(F,I,D){var R=F._fullLayout,N=I.orientation==="v",z={type:"linear",range:D,tickmode:I.tickmode,nticks:I.nticks,tick0:I.tick0,dtick:I.dtick,tickvals:I.tickvals,ticktext:I.ticktext,ticks:I.ticks,ticklen:I.ticklen,tickwidth:I.tickwidth,tickcolor:I.tickcolor,showticklabels:I.showticklabels,ticklabelposition:I.ticklabelposition,ticklabeloverflow:I.ticklabeloverflow,ticklabelstep:I.ticklabelstep,tickfont:I.tickfont,tickangle:I.tickangle,tickformat:I.tickformat,exponentformat:I.exponentformat,minexponent:I.minexponent,separatethousands:I.separatethousands,showexponent:I.showexponent,showtickprefix:I.showtickprefix,tickprefix:I.tickprefix,showticksuffix:I.showticksuffix,ticksuffix:I.ticksuffix,title:I.title,showline:!0,anchor:"free",side:N?"right":"bottom",position:1},G=N?"y":"x",Y={type:"linear",_id:G+I._id},ee={letter:G,font:R.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:R.calendar};function Z(X,ne){return i.coerce(z,Y,l,X,ne)}return f(z,Y,Z,ee,R),y(z,Y,Z,ee),Y}B.exports={draw:w}},{"../../constants/alignment":483,"../../lib":515,"../../lib/extend":505,"../../lib/setcursor":536,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../plots/cartesian/axis_defaults":568,"../../plots/cartesian/layout_attributes":579,"../../plots/cartesian/position_defaults":582,"../../plots/plots":628,"../../registry":647,"../color":367,"../colorscale/helpers":378,"../dragelement":386,"../drawing":389,"../titles":476,"./constants":369,"@plotly/d3":58,tinycolor2:313}],372:[function(t,B,V){var m=t("../../lib");B.exports=function(A){return m.isPlainObject(A.colorbar)}},{"../../lib":515}],373:[function(t,B,V){B.exports={moduleType:"component",name:"colorbar",attributes:t("./attributes"),supplyDefaults:t("./defaults"),draw:t("./draw").draw,hasColorbar:t("./has_colorbar")}},{"./attributes":368,"./defaults":370,"./draw":371,"./has_colorbar":372}],374:[function(t,B,V){var m=t("../colorbar/attributes"),c=t("../../lib/regex").counter,A=t("../../lib/sort_object_keys"),T=t("./scales.js").scales;A(T),B.exports=function(a,i){a=a||"",i=i||{};var n=i.cLetter||"c";"onlyIfNumerical"in i?i.onlyIfNumerical:Boolean(a);var r="noScale"in i?i.noScale:a==="marker.line",v="showScaleDflt"in i?i.showScaleDflt:n==="z",s=typeof i.colorscaleDflt=="string"?T[i.colorscaleDflt]:null,o=i.editTypeOverride||"",b;"colorAttr"in i?(b=i.colorAttr,i.colorAttr):b={z:"z",c:"color"}[n];var g=n+"auto",d=n+"min",f=n+"max",y=n+"mid",l={};l[d]=l[f]=void 0;var x={};x[g]=!1;var u={};return b==="color"&&(u.color={valType:"color",arrayOk:!0,editType:o||"style"},i.anim&&(u.color.anim=!0)),u[g]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:l},u[d]={valType:"number",dflt:null,editType:o||"plot",impliedEdits:x},u[f]={valType:"number",dflt:null,editType:o||"plot",impliedEdits:x},u[y]={valType:"number",dflt:null,editType:"calc",impliedEdits:l},u.colorscale={valType:"colorscale",editType:"calc",dflt:s,impliedEdits:{autocolorscale:!1}},u.autocolorscale={valType:"boolean",dflt:i.autoColorDflt!==!1,editType:"calc",impliedEdits:{colorscale:void 0}},u.reversescale={valType:"boolean",dflt:!1,editType:"plot"},r||(u.showscale={valType:"boolean",dflt:v,editType:"calc"},u.colorbar=m),i.noColorAxis||(u.coloraxis={valType:"subplotid",regex:c("coloraxis"),dflt:null,editType:"calc"}),u}},{"../../lib/regex":532,"../../lib/sort_object_keys":538,"../colorbar/attributes":368,"./scales.js":382}],375:[function(t,B,V){var m=t("fast-isnumeric"),c=t("../../lib"),A=t("./helpers").extractOpts;B.exports=function(e,a,i){var n=e._fullLayout,r=i.vals,v=i.containerStr,s=v?c.nestedProperty(a,v).get():a,o=A(s),b=o.auto!==!1,g=o.min,d=o.max,f=o.mid,y=function(){return c.aggNums(Math.min,null,r)},l=function(){return c.aggNums(Math.max,null,r)};if(g===void 0?g=y():b&&(s._colorAx&&m(g)?g=Math.min(g,y()):g=y()),d===void 0?d=l():b&&(s._colorAx&&m(d)?d=Math.max(d,l()):d=l()),b&&f!==void 0&&(d-f>f-g?g=f-(d-f):d-f<f-g&&(d=f+(f-g))),g===d&&(g-=.5,d+=.5),o._sync("min",g),o._sync("max",d),o.autocolorscale){var x;g*d<0?x=n.colorscale.diverging:g>=0?x=n.colorscale.sequential:x=n.colorscale.sequentialminus,o._sync("colorscale",x)}}},{"../../lib":515,"./helpers":378,"fast-isnumeric":190}],376:[function(t,B,V){var m=t("../../lib"),c=t("./helpers").hasColorscale,A=t("./helpers").extractOpts;B.exports=function(e,a){function i(g,d){var f=g["_"+d];f!==void 0&&(g[d]=f)}function n(g,d){var f=d.container?m.nestedProperty(g,d.container).get():g;if(f)if(f.coloraxis)f._colorAx=a[f.coloraxis];else{var y=A(f),l=y.auto;(l||y.min===void 0)&&i(f,d.min),(l||y.max===void 0)&&i(f,d.max),y.autocolorscale&&i(f,"colorscale")}}for(var r=0;r<e.length;r++){var v=e[r],s=v._module.colorbar;if(s)if(Array.isArray(s))for(var o=0;o<s.length;o++)n(v,s[o]);else n(v,s);c(v,"marker.line")&&n(v,{container:"marker.line",min:"cmin",max:"cmax"})}for(var b in a._colorAxes)n(a[b],{min:"cmin",max:"cmax"})}},{"../../lib":515,"./helpers":378}],377:[function(t,B,V){var m=t("fast-isnumeric"),c=t("../../lib"),A=t("../colorbar/has_colorbar"),T=t("../colorbar/defaults"),e=t("./scales").isValid,a=t("../../registry").traceIs;function i(n,r){var v=r.slice(0,r.length-1);return r?c.nestedProperty(n,v).get()||{}:n}B.exports=function n(r,v,s,o,b){var g=b.prefix,d=b.cLetter,f="_module"in v,y=i(r,g),l=i(v,g),x=i(v._template||{},g)||{},u=function(){return delete r.coloraxis,delete v.coloraxis,n(r,v,s,o,b)};if(f){var M=s._colorAxes||{},_=o(g+"coloraxis");if(_){var p=a(v,"contour")&&c.nestedProperty(v,"contours.coloring").get()||"heatmap",w=M[_];w?(w[2].push(u),w[0]!==p&&(w[0]=!1,c.warn(["Ignoring coloraxis:",_,"setting","as it is linked to incompatible colorscales."].join(" ")))):M[_]=[p,v,[u]];return}}var h=y[d+"min"],L=y[d+"max"],S=m(h)&&m(L)&&h<L,E=o(g+d+"auto",!S);E?o(g+d+"mid"):(o(g+d+"min"),o(g+d+"max"));var P=y.colorscale,F=x.colorscale,I;if(P!==void 0&&(I=!e(P)),F!==void 0&&(I=!e(F)),o(g+"autocolorscale",I),o(g+"colorscale"),o(g+"reversescale"),g!=="marker.line."){var D;g&&f&&(D=A(y));var R=o(g+"showscale",D);R&&(g&&x&&(l._template=x),T(y,l,s))}}},{"../../lib":515,"../../registry":647,"../colorbar/defaults":370,"../colorbar/has_colorbar":372,"./scales":382,"fast-isnumeric":190}],378:[function(t,B,V){var m=t("@plotly/d3"),c=t("tinycolor2"),A=t("fast-isnumeric"),T=t("../../lib"),e=t("../color"),a=t("./scales").isValid;function i(f,y,l){var x=y?T.nestedProperty(f,y).get()||{}:f,u=x[l||"color"],M=!1;if(T.isArrayOrTypedArray(u)){for(var _=0;_<u.length;_++)if(A(u[_])){M=!0;break}}return T.isPlainObject(x)&&(M||x.showscale===!0||A(x.cmin)&&A(x.cmax)||a(x.colorscale)||T.isPlainObject(x.colorbar))}var n=["showscale","autocolorscale","colorscale","reversescale","colorbar"],r=["min","max","mid","auto"];function v(f){var y=f._colorAx,l=y||f,x={},u,M,_;for(M=0;M<n.length;M++)_=n[M],x[_]=l[_];if(y)for(u="c",M=0;M<r.length;M++)_=r[M],x[_]=l["c"+_];else{var p;for(M=0;M<r.length;M++){if(_=r[M],p="c"+_,p in l){x[_]=l[p];continue}p="z"+_,p in l&&(x[_]=l[p])}u=p.charAt(0)}return x._sync=function(w,h){var L=r.indexOf(w)!==-1?u+w:w;l[L]=l["_"+L]=h},x}function s(f){for(var y=v(f),l=y.min,x=y.max,u=y.reversescale?o(y.colorscale):y.colorscale,M=u.length,_=new Array(M),p=new Array(M),w=0;w<M;w++){var h=u[w];_[w]=l+h[0]*(x-l),p[w]=h[1]}return{domain:_,range:p}}function o(f){for(var y=f.length,l=new Array(y),x=y-1,u=0;x>=0;x--,u++){var M=f[x];l[u]=[1-M[0],M[1]]}return l}function b(f,y){y=y||{};for(var l=f.domain,x=f.range,u=x.length,M=new Array(u),_=0;_<u;_++){var p=c(x[_]).toRgb();M[_]=[p.r,p.g,p.b,p.a]}var w=m.scale.linear().domain(l).range(M).clamp(!0),h=y.noNumericCheck,L=y.returnArray,S;return h&&L?S=w:h?S=function(E){return d(w(E))}:L?S=function(E){return A(E)?w(E):c(E).isValid()?E:e.defaultLine}:S=function(E){return A(E)?d(w(E)):c(E).isValid()?E:e.defaultLine},S.domain=w.domain,S.range=function(){return x},S}function g(f,y){return b(s(f),y)}function d(f){var y={r:f[0],g:f[1],b:f[2],a:f[3]};return c(y).toRgbString()}B.exports={hasColorscale:i,extractOpts:v,extractScale:s,flipScale:o,makeColorScaleFunc:b,makeColorScaleFuncFromTrace:g}},{"../../lib":515,"../color":367,"./scales":382,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:313}],379:[function(t,B,V){var m=t("./scales"),c=t("./helpers");B.exports={moduleType:"component",name:"colorscale",attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyLayoutDefaults:t("./layout_defaults"),handleDefaults:t("./defaults"),crossTraceDefaults:t("./cross_trace_defaults"),calc:t("./calc"),scales:m.scales,defaultScale:m.defaultScale,getScale:m.get,isValidScale:m.isValid,hasColorscale:c.hasColorscale,extractOpts:c.extractOpts,extractScale:c.extractScale,flipScale:c.flipScale,makeColorScaleFunc:c.makeColorScaleFunc,makeColorScaleFuncFromTrace:c.makeColorScaleFuncFromTrace}},{"./attributes":374,"./calc":375,"./cross_trace_defaults":376,"./defaults":377,"./helpers":378,"./layout_attributes":380,"./layout_defaults":381,"./scales":382}],380:[function(t,B,V){var m=t("../../lib/extend").extendFlat,c=t("./attributes"),A=t("./scales").scales;B.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:A.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:A.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:A.RdBu,editType:"calc"}},coloraxis:m({_isSubplotObj:!0,editType:"calc"},c("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},{"../../lib/extend":505,"./attributes":374,"./scales":382}],381:[function(t,B,V){var m=t("../../lib"),c=t("../../plot_api/plot_template"),A=t("./layout_attributes"),T=t("./defaults");B.exports=function(a,i){function n(f,y){return m.coerce(a,i,A,f,y)}n("colorscale.sequential"),n("colorscale.sequentialminus"),n("colorscale.diverging");var r=i._colorAxes,v,s;function o(f,y){return m.coerce(v,s,A.coloraxis,f,y)}for(var b in r){var g=r[b];if(g[0])v=a[b]||{},s=c.newContainer(i,b,"coloraxis"),s._name=b,T(v,s,i,o,{prefix:"",cLetter:"c"});else{for(var d=0;d<g[2].length;d++)g[2][d]();delete i._colorAxes[b]}}}},{"../../lib":515,"../../plot_api/plot_template":555,"./defaults":377,"./layout_attributes":380}],382:[function(t,B,V){var m=t("tinycolor2"),c={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},A=c.RdBu;function T(i,n){if(n||(n=A),!i)return n;function r(){try{i=c[i]||JSON.parse(i)}catch{i=n}}return typeof i=="string"&&(r(),typeof i=="string"&&r()),e(i)?i:n}function e(i){var n=0;if(!Array.isArray(i)||i.length<2||!i[0]||!i[i.length-1]||+i[0][0]!=0||+i[i.length-1][0]!=1)return!1;for(var r=0;r<i.length;r++){var v=i[r];if(v.length!==2||+v[0]<n||!m(v[1]).isValid())return!1;n=+v[0]}return!0}function a(i){return c[i]!==void 0?!0:e(i)}B.exports={scales:c,defaultScale:A,get:T,isValid:a}},{tinycolor2:313}],383:[function(t,B,V){B.exports=function(c,A,T,e,a){var i=(c-T)/(e-T),n=i+A/(e-T),r=(i+n)/2;return a==="left"||a==="bottom"?i:a==="center"||a==="middle"?r:a==="right"||a==="top"?n:i<2/3-r?i:n>4/3-r?n:r}},{}],384:[function(t,B,V){var m=t("../../lib"),c=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];B.exports=function(T,e,a,i){return a==="left"?T=0:a==="center"?T=1:a==="right"?T=2:T=m.constrain(Math.floor(T*3),0,2),i==="bottom"?e=0:i==="middle"?e=1:i==="top"?e=2:e=m.constrain(Math.floor(e*3),0,2),c[e][T]}},{"../../lib":515}],385:[function(t,B,V){V.selectMode=function(m){return m==="lasso"||m==="select"},V.drawMode=function(m){return m==="drawclosedpath"||m==="drawopenpath"||m==="drawline"||m==="drawrect"||m==="drawcircle"},V.openMode=function(m){return m==="drawline"||m==="drawopenpath"},V.rectMode=function(m){return m==="select"||m==="drawline"||m==="drawrect"||m==="drawcircle"},V.freeMode=function(m){return m==="lasso"||m==="drawclosedpath"||m==="drawopenpath"},V.selectingOrDrawing=function(m){return V.freeMode(m)||V.rectMode(m)}},{}],386:[function(t,B,V){var m=t("mouse-event-offset"),c=t("has-hover"),A=t("has-passive-events"),T=t("../../lib").removeElement,e=t("../../plots/cartesian/constants"),a=B.exports={};a.align=t("./align"),a.getCursor=t("./cursor");var i=t("./unhover");a.unhover=i.wrapped,a.unhoverRaw=i.raw,a.init=function(s){var o=s.gd,b=1,g=o._context.doubleClickDelay,d=s.element,f,y,l,x,u,M,_,p;o._mouseDownTime||(o._mouseDownTime=0),d.style.pointerEvents="all",d.onmousedown=L,A?(d._ontouchstart&&d.removeEventListener("touchstart",d._ontouchstart),d._ontouchstart=L,d.addEventListener("touchstart",L,{passive:!1})):d.ontouchstart=L;function w(P,F,I){return Math.abs(P)<I&&(P=0),Math.abs(F)<I&&(F=0),[P,F]}var h=s.clampFn||w;function L(P){o._dragged=!1,o._dragging=!0;var F=r(P);f=F[0],y=F[1],_=P.target,M=P,p=P.buttons===2||P.ctrlKey,typeof P.clientX>"u"&&typeof P.clientY>"u"&&(P.clientX=f,P.clientY=y),l=new Date().getTime(),l-o._mouseDownTime<g?b+=1:(b=1,o._mouseDownTime=l),s.prepFn&&s.prepFn(P,f,y),c&&!p?(u=n(),u.style.cursor=window.getComputedStyle(d).cursor):c||(u=document,x=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(d).cursor),document.addEventListener("mouseup",E),document.addEventListener("touchend",E),s.dragmode!==!1&&(P.preventDefault(),document.addEventListener("mousemove",S),document.addEventListener("touchmove",S,{passive:!1}))}function S(P){P.preventDefault();var F=r(P),I=s.minDrag||e.MINDRAG,D=h(F[0]-f,F[1]-y,I),R=D[0],N=D[1];(R||N)&&(o._dragged=!0,a.unhover(o,P)),o._dragged&&s.moveFn&&!p&&(o._dragdata={element:d,dx:R,dy:N},s.moveFn(R,N))}function E(P){if(delete o._dragdata,s.dragmode!==!1&&(P.preventDefault(),document.removeEventListener("mousemove",S),document.removeEventListener("touchmove",S)),document.removeEventListener("mouseup",E),document.removeEventListener("touchend",E),c?T(u):x&&(u.documentElement.style.cursor=x,x=null),!o._dragging){o._dragged=!1;return}if(o._dragging=!1,new Date().getTime()-o._mouseDownTime>g&&(b=Math.max(b-1,1)),o._dragged)s.doneFn&&s.doneFn();else if(s.clickFn&&s.clickFn(b,M),!p){var F;try{F=new MouseEvent("click",P)}catch{var I=r(P);F=document.createEvent("MouseEvents"),F.initMouseEvent("click",P.bubbles,P.cancelable,P.view,P.detail,P.screenX,P.screenY,I[0],I[1],P.ctrlKey,P.altKey,P.shiftKey,P.metaKey,P.button,P.relatedTarget)}_.dispatchEvent(F)}o._dragging=!1,o._dragged=!1}};function n(){var v=document.createElement("div");v.className="dragcover";var s=v.style;return s.position="fixed",s.left=0,s.right=0,s.top=0,s.bottom=0,s.zIndex=999999999,s.background="none",document.body.appendChild(v),v}a.coverSlip=n;function r(v){return m(v.changedTouches?v.changedTouches[0]:v,document.body)}},{"../../lib":515,"../../plots/cartesian/constants":573,"./align":383,"./cursor":384,"./unhover":387,"has-hover":228,"has-passive-events":229,"mouse-event-offset":242}],387:[function(t,B,V){var m=t("../../lib/events"),c=t("../../lib/throttle"),A=t("../../lib/dom").getGraphDiv,T=t("../fx/constants"),e=B.exports={};e.wrapped=function(a,i,n){a=A(a),a._fullLayout&&c.clear(a._fullLayout._uid+T.HOVERID),e.raw(a,i,n)},e.raw=function(i,n){var r=i._fullLayout,v=i._hoverdata;n||(n={}),!(n.target&&!i._dragged&&m.triggerHandler(i,"plotly_beforehover",n)===!1)&&(r._hoverlayer.selectAll("g").remove(),r._hoverlayer.selectAll("line").remove(),r._hoverlayer.selectAll("circle").remove(),i._hoverdata=void 0,n.target&&v&&i.emit("plotly_unhover",{event:n,points:v}))}},{"../../lib/dom":503,"../../lib/events":504,"../../lib/throttle":542,"../fx/constants":401}],388:[function(t,B,V){V.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},V.pattern={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},{}],389:[function(t,B,V){var m=t("@plotly/d3"),c=t("../../lib"),A=c.numberFormat,T=t("fast-isnumeric"),e=t("tinycolor2"),a=t("../../registry"),i=t("../color"),n=t("../colorscale"),r=c.strTranslate,v=t("../../lib/svg_text_utils"),s=t("../../constants/xmlns_namespaces"),o=t("../../constants/alignment"),b=o.LINE_SPACING,g=t("../../constants/interactions").DESELECTDIM,d=t("../../traces/scatter/subtypes"),f=t("../../traces/scatter/make_bubble_size_func"),y=t("../../components/fx/helpers").appendArrayPointValue,l=B.exports={};l.font=function(me,be,ke,De){c.isPlainObject(be)&&(De=be.color,ke=be.size,be=be.family),be&&me.style("font-family",be),ke+1&&me.style("font-size",ke+"px"),De&&me.call(i.fill,De)},l.setPosition=function(me,be,ke){me.attr("x",be).attr("y",ke)},l.setSize=function(me,be,ke){me.attr("width",be).attr("height",ke)},l.setRect=function(me,be,ke,De,Ve){me.call(l.setPosition,be,ke).call(l.setSize,De,Ve)},l.translatePoint=function(me,be,ke,De){var Ve=ke.c2p(me.x),Ae=De.c2p(me.y);if(T(Ve)&&T(Ae)&&be.node())be.node().nodeName==="text"?be.attr("x",Ve).attr("y",Ae):be.attr("transform",r(Ve,Ae));else return!1;return!0},l.translatePoints=function(me,be,ke){me.each(function(De){var Ve=m.select(this);l.translatePoint(De,Ve,be,ke)})},l.hideOutsideRangePoint=function(me,be,ke,De,Ve,Ae){be.attr("display",ke.isPtWithinRange(me,Ve)&&De.isPtWithinRange(me,Ae)?null:"none")},l.hideOutsideRangePoints=function(me,be){if(!!be._hasClipOnAxisFalse){var ke=be.xaxis,De=be.yaxis;me.each(function(Ve){var Ae=Ve[0].trace,Le=Ae.xcalendar,je=Ae.ycalendar,Ye=a.traceIs(Ae,"bar-like")?".bartext":".point,.textpoint";me.selectAll(Ye).each(function(ze){l.hideOutsideRangePoint(ze,m.select(this),ke,De,Le,je)})})}},l.crispRound=function(me,be,ke){return!be||!T(be)?ke||0:me._context.staticPlot?be:be<1?1:Math.round(be)},l.singleLineStyle=function(me,be,ke,De,Ve){be.style("fill","none");var Ae=(((me||[])[0]||{}).trace||{}).line||{},Le=ke||Ae.width||0,je=Ve||Ae.dash||"";i.stroke(be,De||Ae.color),l.dashLine(be,je,Le)},l.lineGroupStyle=function(me,be,ke,De){me.style("fill","none").each(function(Ve){var Ae=(((Ve||[])[0]||{}).trace||{}).line||{},Le=be||Ae.width||0,je=De||Ae.dash||"";m.select(this).call(i.stroke,ke||Ae.color).call(l.dashLine,je,Le)})},l.dashLine=function(me,be,ke){ke=+ke||0,be=l.dashStyle(be,ke),me.style({"stroke-dasharray":be,"stroke-width":ke+"px"})},l.dashStyle=function(me,be){be=+be||1;var ke=Math.max(be,3);return me==="solid"?me="":me==="dot"?me=ke+"px,"+ke+"px":me==="dash"?me=3*ke+"px,"+3*ke+"px":me==="longdash"?me=5*ke+"px,"+5*ke+"px":me==="dashdot"?me=3*ke+"px,"+ke+"px,"+ke+"px,"+ke+"px":me==="longdashdot"&&(me=5*ke+"px,"+2*ke+"px,"+ke+"px,"+2*ke+"px"),me};function x(me,be,ke){var De=be.fillpattern,Ve=De&&l.getPatternAttr(De.shape,0,"");if(Ve){var Ae=l.getPatternAttr(De.bgcolor,0,null),Le=l.getPatternAttr(De.fgcolor,0,null),je=De.fgopacity,Ye=l.getPatternAttr(De.size,0,8),ze=l.getPatternAttr(De.solidity,0,.3),Ie=be.uid;l.pattern(me,"point",ke,Ie,Ve,Ye,ze,void 0,De.fillmode,Ae,Le,je)}else be.fillcolor&&me.call(i.fill,be.fillcolor)}l.singleFillStyle=function(me,be){var ke=m.select(me.node()),De=ke.data(),Ve=((De[0]||[])[0]||{}).trace||{};x(me,Ve,be)},l.fillGroupStyle=function(me,be){me.style("stroke-width",0).each(function(ke){var De=m.select(this);ke[0].trace&&x(De,ke[0].trace,be)})};var u=t("./symbol_defs");l.symbolNames=[],l.symbolFuncs=[],l.symbolBackOffs=[],l.symbolNeedLines={},l.symbolNoDot={},l.symbolNoFill={},l.symbolList=[],Object.keys(u).forEach(function(me){var be=u[me],ke=be.n;l.symbolList.push(ke,String(ke),me,ke+100,String(ke+100),me+"-open"),l.symbolNames[ke]=me,l.symbolFuncs[ke]=be.f,l.symbolBackOffs[ke]=be.backoff||0,be.needLine&&(l.symbolNeedLines[ke]=!0),be.noDot?l.symbolNoDot[ke]=!0:l.symbolList.push(ke+200,String(ke+200),me+"-dot",ke+300,String(ke+300),me+"-open-dot"),be.noFill&&(l.symbolNoFill[ke]=!0)});var M=l.symbolNames.length,_="M0,0.5L0.5,0L0,-0.5L-0.5,0Z";l.symbolNumber=function(me){if(T(me))me=+me;else if(typeof me=="string"){var be=0;me.indexOf("-open")>0&&(be=100,me=me.replace("-open","")),me.indexOf("-dot")>0&&(be+=200,me=me.replace("-dot","")),me=l.symbolNames.indexOf(me),me>=0&&(me+=be)}return me%100>=M||me>=400?0:Math.floor(Math.max(me,0))};function p(me,be,ke,De){var Ve=me%100;return l.symbolFuncs[Ve](be,ke,De)+(me>=200?_:"")}var w={x1:1,x2:0,y1:0,y2:0},h={x1:0,x2:0,y1:1,y2:0},L=A("~f"),S={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:w},horizontalreversed:{node:"linearGradient",attrs:w,reversed:!0},vertical:{node:"linearGradient",attrs:h},verticalreversed:{node:"linearGradient",attrs:h,reversed:!0}};l.gradient=function(me,be,ke,De,Ve,Ae){for(var Le=Ve.length,je=S[De],Ye=new Array(Le),ze=0;ze<Le;ze++)je.reversed?Ye[Le-1-ze]=[L((1-Ve[ze][0])*100),Ve[ze][1]]:Ye[ze]=[L(Ve[ze][0]*100),Ve[ze][1]];var Ie=be._fullLayout,We="g"+Ie._uid+"-"+ke,pt=Ie._defs.select(".gradients").selectAll("#"+We).data([De+Ye.join(";")],c.identity);pt.exit().remove(),pt.enter().append(je.node).each(function(){var Ft=m.select(this);je.attrs&&Ft.attr(je.attrs),Ft.attr("id",We);var Qt=Ft.selectAll("stop").data(Ye);Qt.exit().remove(),Qt.enter().append("stop"),Qt.each(function(zt){var Et=e(zt[1]);m.select(this).attr({offset:zt[0]+"%","stop-color":i.tinyRGB(Et),"stop-opacity":Et.getAlpha()})})}),me.style(Ae,K(We,be)).style(Ae+"-opacity",null),me.classed("gradient_filled",!0)},l.pattern=function(me,be,ke,De,Ve,Ae,Le,je,Ye,ze,Ie,We){var pt=be==="legend";je&&(Ye==="overlay"?(ze=je,Ie=i.contrast(ze)):(ze=void 0,Ie=je));var Ft=ke._fullLayout,Qt="p"+Ft._uid+"-"+De,zt,Et,Xt=function(At,Ht,It,Vt,jt){return Vt+(jt-Vt)*(At-Ht)/(It-Ht)},Nt,Ct,Xe,at,Ge={},Se=e(Ie),He=i.tinyRGB(Se),Ke=Se.getAlpha(),qe=We*Ke;switch(Ve){case"/":zt=Ae*Math.sqrt(2),Et=Ae*Math.sqrt(2),Nt="M-"+zt/4+","+Et/4+"l"+zt/2+",-"+Et/2+"M0,"+Et+"L"+zt+",0M"+zt/4*3+","+Et/4*5+"l"+zt/2+",-"+Et/2,Ct=Le*Ae,at="path",Ge={d:Nt,opacity:qe,stroke:He,"stroke-width":Ct+"px"};break;case"\\":zt=Ae*Math.sqrt(2),Et=Ae*Math.sqrt(2),Nt="M"+zt/4*3+",-"+Et/4+"l"+zt/2+","+Et/2+"M0,0L"+zt+","+Et+"M-"+zt/4+","+Et/4*3+"l"+zt/2+","+Et/2,Ct=Le*Ae,at="path",Ge={d:Nt,opacity:qe,stroke:He,"stroke-width":Ct+"px"};break;case"x":zt=Ae*Math.sqrt(2),Et=Ae*Math.sqrt(2),Nt="M-"+zt/4+","+Et/4+"l"+zt/2+",-"+Et/2+"M0,"+Et+"L"+zt+",0M"+zt/4*3+","+Et/4*5+"l"+zt/2+",-"+Et/2+"M"+zt/4*3+",-"+Et/4+"l"+zt/2+","+Et/2+"M0,0L"+zt+","+Et+"M-"+zt/4+","+Et/4*3+"l"+zt/2+","+Et/2,Ct=Ae-Ae*Math.sqrt(1-Le),at="path",Ge={d:Nt,opacity:qe,stroke:He,"stroke-width":Ct+"px"};break;case"|":zt=Ae,Et=Ae,at="path",Nt="M"+zt/2+",0L"+zt/2+","+Et,Ct=Le*Ae,at="path",Ge={d:Nt,opacity:qe,stroke:He,"stroke-width":Ct+"px"};break;case"-":zt=Ae,Et=Ae,at="path",Nt="M0,"+Et/2+"L"+zt+","+Et/2,Ct=Le*Ae,at="path",Ge={d:Nt,opacity:qe,stroke:He,"stroke-width":Ct+"px"};break;case"+":zt=Ae,Et=Ae,at="path",Nt="M"+zt/2+",0L"+zt/2+","+Et+"M0,"+Et/2+"L"+zt+","+Et/2,Ct=Ae-Ae*Math.sqrt(1-Le),at="path",Ge={d:Nt,opacity:qe,stroke:He,"stroke-width":Ct+"px"};break;case".":zt=Ae,Et=Ae,Le<Math.PI/4?Xe=Math.sqrt(Le*Ae*Ae/Math.PI):Xe=Xt(Le,Math.PI/4,1,Ae/2,Ae/Math.sqrt(2)),at="circle",Ge={cx:zt/2,cy:Et/2,r:Xe,opacity:qe,fill:He};break}var Tt=[Ve||"noSh",ze||"noBg",Ie||"noFg",Ae,Le].join(";"),mt=Ft._defs.select(".patterns").selectAll("#"+Qt).data([Tt],c.identity);mt.exit().remove(),mt.enter().append("pattern").each(function(){var At=m.select(this);if(At.attr({id:Qt,width:zt+"px",height:Et+"px",patternUnits:"userSpaceOnUse",patternTransform:pt?"scale(0.8)":""}),ze){var Ht=e(ze),It=i.tinyRGB(Ht),Vt=Ht.getAlpha(),jt=At.selectAll("rect").data([0]);jt.exit().remove(),jt.enter().append("rect").attr({width:zt+"px",height:Et+"px",fill:It,"fill-opacity":Vt})}var Yt=At.selectAll(at).data([0]);Yt.exit().remove(),Yt.enter().append(at).attr(Ge)}),me.style("fill",K(Qt,ke)).style("fill-opacity",null),me.classed("pattern_filled",!0)},l.initGradients=function(me){var be=me._fullLayout,ke=c.ensureSingle(be._defs,"g","gradients");ke.selectAll("linearGradient,radialGradient").remove(),m.select(me).selectAll(".gradient_filled").classed("gradient_filled",!1)},l.initPatterns=function(me){var be=me._fullLayout,ke=c.ensureSingle(be._defs,"g","patterns");ke.selectAll("pattern").remove(),m.select(me).selectAll(".pattern_filled").classed("pattern_filled",!1)},l.getPatternAttr=function(me,be,ke){return me&&c.isArrayOrTypedArray(me)?be<me.length?me[be]:ke:me},l.pointStyle=function(me,be,ke){if(!!me.size()){var De=l.makePointStyleFns(be);me.each(function(Ve){l.singlePointStyle(Ve,m.select(this),be,De,ke)})}},l.singlePointStyle=function(me,be,ke,De,Ve){var Ae=ke.marker,Le=Ae.line;if(be.style("opacity",De.selectedOpacityFn?De.selectedOpacityFn(me):me.mo===void 0?Ae.opacity:me.mo),De.ms2mrc){var je;me.ms==="various"||Ae.size==="various"?je=3:je=De.ms2mrc(me.ms),me.mrc=je,De.selectedSizeFn&&(je=me.mrc=De.selectedSizeFn(me));var Ye=l.symbolNumber(me.mx||Ae.symbol)||0;me.om=Ye%200>=100;var ze=xe(me,ke),Ie=q(me,ke);be.attr("d",p(Ye,je,ze,Ie))}var We=!1,pt,Ft,Qt;if(me.so)Qt=Le.outlierwidth,Ft=Le.outliercolor,pt=Ae.outliercolor;else{var zt=(Le||{}).width;Qt=(me.mlw+1||zt+1||(me.trace?(me.trace.marker.line||{}).width:0)+1)-1||0,"mlc"in me?Ft=me.mlcc=De.lineScale(me.mlc):c.isArrayOrTypedArray(Le.color)?Ft=i.defaultLine:Ft=Le.color,c.isArrayOrTypedArray(Ae.color)&&(pt=i.defaultLine,We=!0),"mc"in me?pt=me.mcc=De.markerScale(me.mc):pt=Ae.color||"rgba(0,0,0,0)",De.selectedColorFn&&(pt=De.selectedColorFn(me))}if(me.om)be.call(i.stroke,pt).style({"stroke-width":(Qt||1)+"px",fill:"none"});else{be.style("stroke-width",(me.isBlank?0:Qt)+"px");var Et=Ae.gradient,Xt=me.mgt;Xt?We=!0:Xt=Et&&Et.type,c.isArrayOrTypedArray(Xt)&&(Xt=Xt[0],S[Xt]||(Xt=0));var Nt=Ae.pattern,Ct=Nt&&l.getPatternAttr(Nt.shape,me.i,"");if(Xt&&Xt!=="none"){var Xe=me.mgc;Xe?We=!0:Xe=Et.color;var at=ke.uid;We&&(at+="-"+me.i),l.gradient(be,Ve,at,Xt,[[0,Xe],[1,pt]],"fill")}else if(Ct){var Ge=l.getPatternAttr(Nt.bgcolor,me.i,null),Se=l.getPatternAttr(Nt.fgcolor,me.i,null),He=Nt.fgopacity,Ke=l.getPatternAttr(Nt.size,me.i,8),qe=l.getPatternAttr(Nt.solidity,me.i,.3),Tt=me.mcc||c.isArrayOrTypedArray(Nt.shape)||c.isArrayOrTypedArray(Nt.bgcolor)||c.isArrayOrTypedArray(Nt.size)||c.isArrayOrTypedArray(Nt.solidity),mt=ke.uid;Tt&&(mt+="-"+me.i),l.pattern(be,"point",Ve,mt,Ct,Ke,qe,me.mcc,Nt.fillmode,Ge,Se,He)}else i.fill(be,pt);Qt&&i.stroke(be,Ft)}},l.makePointStyleFns=function(me){var be={},ke=me.marker;return be.markerScale=l.tryColorscale(ke,""),be.lineScale=l.tryColorscale(ke,"line"),a.traceIs(me,"symbols")&&(be.ms2mrc=d.isBubble(me)?f(me):function(){return(ke.size||6)/2}),me.selectedpoints&&c.extendFlat(be,l.makeSelectedPointStyleFns(me)),be},l.makeSelectedPointStyleFns=function(me){var be={},ke=me.selected||{},De=me.unselected||{},Ve=me.marker||{},Ae=ke.marker||{},Le=De.marker||{},je=Ve.opacity,Ye=Ae.opacity,ze=Le.opacity,Ie=Ye!==void 0,We=ze!==void 0;(c.isArrayOrTypedArray(je)||Ie||We)&&(be.selectedOpacityFn=function(Xe){var at=Xe.mo===void 0?Ve.opacity:Xe.mo;return Xe.selected?Ie?Ye:at:We?ze:g*at});var pt=Ve.color,Ft=Ae.color,Qt=Le.color;(Ft||Qt)&&(be.selectedColorFn=function(Xe){var at=Xe.mcc||pt;return Xe.selected?Ft||at:Qt||at});var zt=Ve.size,Et=Ae.size,Xt=Le.size,Nt=Et!==void 0,Ct=Xt!==void 0;return a.traceIs(me,"symbols")&&(Nt||Ct)&&(be.selectedSizeFn=function(Xe){var at=Xe.mrc||zt/2;return Xe.selected?Nt?Et/2:at:Ct?Xt/2:at}),be},l.makeSelectedTextStyleFns=function(me){var be={},ke=me.selected||{},De=me.unselected||{},Ve=me.textfont||{},Ae=ke.textfont||{},Le=De.textfont||{},je=Ve.color,Ye=Ae.color,ze=Le.color;return be.selectedTextColorFn=function(Ie){var We=Ie.tc||je;return Ie.selected?Ye||We:ze||(Ye?We:i.addOpacity(We,g))},be},l.selectedPointStyle=function(me,be){if(!(!me.size()||!be.selectedpoints)){var ke=l.makeSelectedPointStyleFns(be),De=be.marker||{},Ve=[];ke.selectedOpacityFn&&Ve.push(function(Ae,Le){Ae.style("opacity",ke.selectedOpacityFn(Le))}),ke.selectedColorFn&&Ve.push(function(Ae,Le){i.fill(Ae,ke.selectedColorFn(Le))}),ke.selectedSizeFn&&Ve.push(function(Ae,Le){var je=Le.mx||De.symbol||0,Ye=ke.selectedSizeFn(Le);Ae.attr("d",p(l.symbolNumber(je),Ye,xe(Le,be),q(Le,be))),Le.mrc2=Ye}),Ve.length&&me.each(function(Ae){for(var Le=m.select(this),je=0;je<Ve.length;je++)Ve[je](Le,Ae)})}},l.tryColorscale=function(me,be){var ke=be?c.nestedProperty(me,be).get():me;if(ke){var De=ke.color;if((ke.colorscale||ke._colorAx)&&c.isArrayOrTypedArray(De))return n.makeColorScaleFuncFromTrace(ke)}return c.identity};var E={start:1,end:-1,middle:0,bottom:1,top:-1};function P(me,be,ke,De,Ve){var Ae=m.select(me.node().parentNode),Le=be.indexOf("top")!==-1?"top":be.indexOf("bottom")!==-1?"bottom":"middle",je=be.indexOf("left")!==-1?"end":be.indexOf("right")!==-1?"start":"middle",Ye=De?De/.8+1:0,ze=(v.lineCount(me)-1)*b+1,Ie=E[je]*Ye,We=ke*.75+E[Le]*Ye+(E[Le]-1)*ze*ke/2;me.attr("text-anchor",je),Ve||Ae.attr("transform",r(Ie,We))}function F(me,be){var ke=me.ts||be.textfont.size;return T(ke)&&ke>0?ke:0}l.textPointStyle=function(me,be,ke){if(!!me.size()){var De;if(be.selectedpoints){var Ve=l.makeSelectedTextStyleFns(be);De=Ve.selectedTextColorFn}var Ae=be.texttemplate,Le=ke._fullLayout;me.each(function(je){var Ye=m.select(this),ze=Ae?c.extractOption(je,be,"txt","texttemplate"):c.extractOption(je,be,"tx","text");if(!ze&&ze!==0){Ye.remove();return}if(Ae){var Ie=be._module.formatLabels,We=Ie?Ie(je,be,Le):{},pt={};y(pt,be,je.i);var Ft=be._meta||{};ze=c.texttemplateString(ze,We,Le._d3locale,pt,je,Ft)}var Qt=je.tp||be.textposition,zt=F(je,be),Et=De?De(je):je.tc||be.textfont.color;Ye.call(l.font,je.tf||be.textfont.family,zt,Et).text(ze).call(v.convertToTspans,ke).call(P,Qt,zt,je.mrc)})}},l.selectedTextStyle=function(me,be){if(!(!me.size()||!be.selectedpoints)){var ke=l.makeSelectedTextStyleFns(be);me.each(function(De){var Ve=m.select(this),Ae=ke.selectedTextColorFn(De),Le=De.tp||be.textposition,je=F(De,be);i.fill(Ve,Ae);var Ye=a.traceIs(be,"bar-like");P(Ve,Le,je,De.mrc2||De.mrc,Ye)})}};var I=.5;l.smoothopen=function(me,be){if(me.length<3)return"M"+me.join("L");var ke="M"+me[0],De=[],Ve;for(Ve=1;Ve<me.length-1;Ve++)De.push(Y(me[Ve-1],me[Ve],me[Ve+1],be));for(ke+="Q"+De[0][0]+" "+me[1],Ve=2;Ve<me.length-1;Ve++)ke+="C"+De[Ve-2][1]+" "+De[Ve-1][0]+" "+me[Ve];return ke+="Q"+De[me.length-3][1]+" "+me[me.length-1],ke},l.smoothclosed=function(me,be){if(me.length<3)return"M"+me.join("L")+"Z";var ke="M"+me[0],De=me.length-1,Ve=[Y(me[De],me[0],me[1],be)],Ae;for(Ae=1;Ae<De;Ae++)Ve.push(Y(me[Ae-1],me[Ae],me[Ae+1],be));for(Ve.push(Y(me[De-1],me[De],me[0],be)),Ae=1;Ae<=De;Ae++)ke+="C"+Ve[Ae-1][1]+" "+Ve[Ae][0]+" "+me[Ae];return ke+="C"+Ve[De][1]+" "+Ve[0][0]+" "+me[0]+"Z",ke};var D,R;function N(me,be,ke){return ke&&(me=X(me)),be?G(me[1]):z(me[0])}function z(me){var be=m.round(me,2);return D=be,be}function G(me){var be=m.round(me,2);return R=be,be}function Y(me,be,ke,De){var Ve=me[0]-be[0],Ae=me[1]-be[1],Le=ke[0]-be[0],je=ke[1]-be[1],Ye=Math.pow(Ve*Ve+Ae*Ae,I/2),ze=Math.pow(Le*Le+je*je,I/2),Ie=(ze*ze*Ve-Ye*Ye*Le)*De,We=(ze*ze*Ae-Ye*Ye*je)*De,pt=3*ze*(Ye+ze),Ft=3*Ye*(Ye+ze);return[[z(be[0]+(pt&&Ie/pt)),G(be[1]+(pt&&We/pt))],[z(be[0]-(Ft&&Ie/Ft)),G(be[1]-(Ft&&We/Ft))]]}var ee={hv:function(me,be,ke){return"H"+z(be[0])+"V"+N(be,1,ke)},vh:function(me,be,ke){return"V"+G(be[1])+"H"+N(be,0,ke)},hvh:function(me,be,ke){return"H"+z((me[0]+be[0])/2)+"V"+G(be[1])+"H"+N(be,0,ke)},vhv:function(me,be,ke){return"V"+G((me[1]+be[1])/2)+"H"+z(be[0])+"V"+N(be,1,ke)}},Z=function(me,be,ke){return"L"+N(be,0,ke)+","+N(be,1,ke)};l.steps=function(me){var be=ee[me]||Z;return function(ke){for(var De="M"+z(ke[0][0])+","+G(ke[0][1]),Ve=ke.length,Ae=1;Ae<Ve;Ae++)De+=be(ke[Ae-1],ke[Ae],Ae===Ve-1);return De}};function X(me,be){var ke=me.backoff,De=me.trace,Ve=me.d,Ae=me.i;if(ke&&De&&De.marker&&De.marker.angle%360===0&&De.line&&De.line.shape!=="spline"){var Le=c.isArrayOrTypedArray(ke),je=me,Ye=be?be[0]:D||0,ze=be?be[1]:R||0,Ie=je[0],We=je[1],pt=Ie-Ye,Ft=We-ze,Qt=Math.atan2(Ft,pt),zt=Le?ke[Ae]:ke;if(zt==="auto"){var Et=je.i;De.type==="scatter"&&Et--;var Xt=je.marker;zt=Xt?l.symbolBackOffs[l.symbolNumber(Xt.symbol)]*Xt.size:0,zt+=l.getMarkerStandoff(Ve[Et],De)||0}var Nt=Ie-zt*Math.cos(Qt),Ct=We-zt*Math.sin(Qt);(Nt<=Ie&&Nt>=Ye||Nt>=Ie&&Nt<=Ye)&&(Ct<=We&&Ct>=ze||Ct>=We&&Ct<=ze)&&(me=[Nt,Ct])}return me}l.applyBackoff=X,l.makeTester=function(){var me=c.ensureSingleById(m.select("body"),"svg","js-plotly-tester",function(ke){ke.attr(s.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),be=c.ensureSingle(me,"path","js-reference-point",function(ke){ke.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});l.tester=me,l.testref=be},l.savedBBoxes={};var ne=0,ce=1e4;l.bBox=function(me,be,ke){ke||(ke=Q(me));var De;if(ke){if(De=l.savedBBoxes[ke],De)return c.extendFlat({},De)}else if(me.childNodes.length===1){var Ve=me.childNodes[0];if(ke=Q(Ve),ke){var Ae=+Ve.getAttribute("x")||0,Le=+Ve.getAttribute("y")||0,je=Ve.getAttribute("transform");if(!je){var Ye=l.bBox(Ve,!1,ke);return Ae&&(Ye.left+=Ae,Ye.right+=Ae),Le&&(Ye.top+=Le,Ye.bottom+=Le),Ye}if(ke+="~"+Ae+"~"+Le+"~"+je,De=l.savedBBoxes[ke],De)return c.extendFlat({},De)}}var ze,Ie;be?ze=me:(Ie=l.tester.node(),ze=me.cloneNode(!0),Ie.appendChild(ze)),m.select(ze).attr("transform",null).call(v.positionText,0,0);var We=ze.getBoundingClientRect(),pt=l.testref.node().getBoundingClientRect();be||Ie.removeChild(ze);var Ft={height:We.height,width:We.width,left:We.left-pt.left,top:We.top-pt.top,right:We.right-pt.left,bottom:We.bottom-pt.top};return ne>=ce&&(l.savedBBoxes={},ne=0),ke&&(l.savedBBoxes[ke]=Ft),ne++,c.extendFlat({},Ft)};function Q(me){var be=me.getAttribute("data-unformatted");if(be!==null)return be+me.getAttribute("data-math")+me.getAttribute("text-anchor")+me.getAttribute("style")}l.setClipUrl=function(me,be,ke){me.attr("clip-path",K(be,ke))};function K(me,be){if(!me)return null;var ke=be._context,De=ke._exportedPlot?"":ke._baseUrl||"";return De?"url('"+De+"#"+me+"')":"url(#"+me+")"}l.getTranslate=function(me){var be=/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,ke=me.attr?"attr":"getAttribute",De=me[ke]("transform")||"",Ve=De.replace(be,function(Ae,Le,je){return[Le,je].join(" ")}).split(" ");return{x:+Ve[0]||0,y:+Ve[1]||0}},l.setTranslate=function(me,be,ke){var De=/(\btranslate\(.*?\);?)/,Ve=me.attr?"attr":"getAttribute",Ae=me.attr?"attr":"setAttribute",Le=me[Ve]("transform")||"";return be=be||0,ke=ke||0,Le=Le.replace(De,"").trim(),Le+=r(be,ke),Le=Le.trim(),me[Ae]("transform",Le),Le},l.getScale=function(me){var be=/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,ke=me.attr?"attr":"getAttribute",De=me[ke]("transform")||"",Ve=De.replace(be,function(Ae,Le,je){return[Le,je].join(" ")}).split(" ");return{x:+Ve[0]||1,y:+Ve[1]||1}},l.setScale=function(me,be,ke){var De=/(\bscale\(.*?\);?)/,Ve=me.attr?"attr":"getAttribute",Ae=me.attr?"attr":"setAttribute",Le=me[Ve]("transform")||"";return be=be||1,ke=ke||1,Le=Le.replace(De,"").trim(),Le+="scale("+be+","+ke+")",Le=Le.trim(),me[Ae]("transform",Le),Le};var U=/\s*sc.*/;l.setPointGroupScale=function(me,be,ke){if(be=be||1,ke=ke||1,!!me){var De=be===1&&ke===1?"":"scale("+be+","+ke+")";me.each(function(){var Ve=(this.getAttribute("transform")||"").replace(U,"");Ve+=De,Ve=Ve.trim(),this.setAttribute("transform",Ve)})}};var H=/translate\([^)]*\)\s*$/;l.setTextPointsScale=function(me,be,ke){!me||me.each(function(){var De,Ve=m.select(this),Ae=Ve.select("text");if(!!Ae.node()){var Le=parseFloat(Ae.attr("x")||0),je=parseFloat(Ae.attr("y")||0),Ye=(Ve.attr("transform")||"").match(H);be===1&&ke===1?De=[]:De=[r(Le,je),"scale("+be+","+ke+")",r(-Le,-je)],Ye&&De.push(Ye),Ve.attr("transform",De.join(""))}})};function q(me,be){var ke;return me&&(ke=me.mf),ke===void 0&&(ke=be.marker&&be.marker.standoff||0),!be._geo&&!be._xA?-ke:ke}l.getMarkerStandoff=q;var re=Math.atan2,j=Math.cos,$=Math.sin;function ie(me,be){var ke=be[0],De=be[1];return[ke*j(me)-De*$(me),ke*$(me)+De*j(me)]}var oe,ae,se,_e,ue,ye;function xe(me,be){var ke=me.ma;ke===void 0&&(ke=be.marker.angle||0);var De,Ve,Ae=be.marker.angleref;if(Ae==="previous"||Ae==="north"){if(be._geo){var Le=be._geo.project(me.lonlat);De=Le[0],Ve=Le[1]}else{var je=be._xA,Ye=be._yA;if(je&&Ye)De=je.c2p(me.x),Ve=Ye.c2p(me.y);else return 90}if(be._geo){var ze=me.lonlat[0],Ie=me.lonlat[1],We=be._geo.project([ze,Ie+1e-5]),pt=be._geo.project([ze+1e-5,Ie]),Ft=re(pt[1]-Ve,pt[0]-De),Qt=re(We[1]-Ve,We[0]-De),zt;if(Ae==="north")zt=ke/180*Math.PI;else if(Ae==="previous"){var Et=ze/180*Math.PI,Xt=Ie/180*Math.PI,Nt=oe/180*Math.PI,Ct=ae/180*Math.PI,Xe=Nt-Et,at=j(Ct)*$(Xe),Ge=$(Ct)*j(Xt)-j(Ct)*$(Xt)*j(Xe);zt=-re(at,Ge)-Math.PI,oe=ze,ae=Ie}var Se=ie(Ft,[j(zt),0]),He=ie(Qt,[$(zt),0]);ke=re(Se[1]+He[1],Se[0]+He[0])/Math.PI*180,Ae==="previous"&&!(ye===be.uid&&me.i===ue+1)&&(ke=null)}if(Ae==="previous"&&!be._geo)if(ye===be.uid&&me.i===ue+1&&T(De)&&T(Ve)){var Ke=De-se,qe=Ve-_e,Tt=be.line&&be.line.shape||"",mt=Tt.slice(Tt.length-1);mt==="h"&&(qe=0),mt==="v"&&(Ke=0),ke+=re(qe,Ke)/Math.PI*180+90}else ke=null}return se=De,_e=Ve,ue=me.i,ye=be.uid,ke}l.getMarkerAngle=xe},{"../../components/fx/helpers":403,"../../constants/alignment":483,"../../constants/interactions":490,"../../constants/xmlns_namespaces":492,"../../lib":515,"../../lib/svg_text_utils":541,"../../registry":647,"../../traces/scatter/make_bubble_size_func":953,"../../traces/scatter/subtypes":961,"../color":367,"../colorscale":379,"./symbol_defs":390,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:313}],390:[function(t,B,V){var m=t("parse-svg-path"),c=t("@plotly/d3").round,A="M0,0Z",T=Math.sqrt(2),e=Math.sqrt(3),a=Math.PI,i=Math.cos,n=Math.sin;B.exports={circle:{n:0,f:function(d,f,y){if(r(f))return A;var l=c(d,2),x="M"+l+",0A"+l+","+l+" 0 1,1 0,-"+l+"A"+l+","+l+" 0 0,1 "+l+",0Z";return y?g(f,y,x):x}},square:{n:1,f:function(d,f,y){if(r(f))return A;var l=c(d,2);return g(f,y,"M"+l+","+l+"H-"+l+"V-"+l+"H"+l+"Z")}},diamond:{n:2,f:function(d,f,y){if(r(f))return A;var l=c(d*1.3,2);return g(f,y,"M"+l+",0L0,"+l+"L-"+l+",0L0,-"+l+"Z")}},cross:{n:3,f:function(d,f,y){if(r(f))return A;var l=c(d*.4,2),x=c(d*1.2,2);return g(f,y,"M"+x+","+l+"H"+l+"V"+x+"H-"+l+"V"+l+"H-"+x+"V-"+l+"H-"+l+"V-"+x+"H"+l+"V-"+l+"H"+x+"Z")}},x:{n:4,f:function(d,f,y){if(r(f))return A;var l=c(d*.8/T,2),x="l"+l+","+l,u="l"+l+",-"+l,M="l-"+l+",-"+l,_="l-"+l+","+l;return g(f,y,"M0,"+l+x+u+M+u+M+_+M+_+x+_+x+"Z")}},"triangle-up":{n:5,f:function(d,f,y){if(r(f))return A;var l=c(d*2/e,2),x=c(d/2,2),u=c(d,2);return g(f,y,"M-"+l+","+x+"H"+l+"L0,-"+u+"Z")}},"triangle-down":{n:6,f:function(d,f,y){if(r(f))return A;var l=c(d*2/e,2),x=c(d/2,2),u=c(d,2);return g(f,y,"M-"+l+",-"+x+"H"+l+"L0,"+u+"Z")}},"triangle-left":{n:7,f:function(d,f,y){if(r(f))return A;var l=c(d*2/e,2),x=c(d/2,2),u=c(d,2);return g(f,y,"M"+x+",-"+l+"V"+l+"L-"+u+",0Z")}},"triangle-right":{n:8,f:function(d,f,y){if(r(f))return A;var l=c(d*2/e,2),x=c(d/2,2),u=c(d,2);return g(f,y,"M-"+x+",-"+l+"V"+l+"L"+u+",0Z")}},"triangle-ne":{n:9,f:function(d,f,y){if(r(f))return A;var l=c(d*.6,2),x=c(d*1.2,2);return g(f,y,"M-"+x+",-"+l+"H"+l+"V"+x+"Z")}},"triangle-se":{n:10,f:function(d,f,y){if(r(f))return A;var l=c(d*.6,2),x=c(d*1.2,2);return g(f,y,"M"+l+",-"+x+"V"+l+"H-"+x+"Z")}},"triangle-sw":{n:11,f:function(d,f,y){if(r(f))return A;var l=c(d*.6,2),x=c(d*1.2,2);return g(f,y,"M"+x+","+l+"H-"+l+"V-"+x+"Z")}},"triangle-nw":{n:12,f:function(d,f,y){if(r(f))return A;var l=c(d*.6,2),x=c(d*1.2,2);return g(f,y,"M-"+l+","+x+"V-"+l+"H"+x+"Z")}},pentagon:{n:13,f:function(d,f,y){if(r(f))return A;var l=c(d*.951,2),x=c(d*.588,2),u=c(-d,2),M=c(d*-.309,2),_=c(d*.809,2);return g(f,y,"M"+l+","+M+"L"+x+","+_+"H-"+x+"L-"+l+","+M+"L0,"+u+"Z")}},hexagon:{n:14,f:function(d,f,y){if(r(f))return A;var l=c(d,2),x=c(d/2,2),u=c(d*e/2,2);return g(f,y,"M"+u+",-"+x+"V"+x+"L0,"+l+"L-"+u+","+x+"V-"+x+"L0,-"+l+"Z")}},hexagon2:{n:15,f:function(d,f,y){if(r(f))return A;var l=c(d,2),x=c(d/2,2),u=c(d*e/2,2);return g(f,y,"M-"+x+","+u+"H"+x+"L"+l+",0L"+x+",-"+u+"H-"+x+"L-"+l+",0Z")}},octagon:{n:16,f:function(d,f,y){if(r(f))return A;var l=c(d*.924,2),x=c(d*.383,2);return g(f,y,"M-"+x+",-"+l+"H"+x+"L"+l+",-"+x+"V"+x+"L"+x+","+l+"H-"+x+"L-"+l+","+x+"V-"+x+"Z")}},star:{n:17,f:function(d,f,y){if(r(f))return A;var l=d*1.4,x=c(l*.225,2),u=c(l*.951,2),M=c(l*.363,2),_=c(l*.588,2),p=c(-l,2),w=c(l*-.309,2),h=c(l*.118,2),L=c(l*.809,2),S=c(l*.382,2);return g(f,y,"M"+x+","+w+"H"+u+"L"+M+","+h+"L"+_+","+L+"L0,"+S+"L-"+_+","+L+"L-"+M+","+h+"L-"+u+","+w+"H-"+x+"L0,"+p+"Z")}},hexagram:{n:18,f:function(d,f,y){if(r(f))return A;var l=c(d*.66,2),x=c(d*.38,2),u=c(d*.76,2);return g(f,y,"M-"+u+",0l-"+x+",-"+l+"h"+u+"l"+x+",-"+l+"l"+x+","+l+"h"+u+"l-"+x+","+l+"l"+x+","+l+"h-"+u+"l-"+x+","+l+"l-"+x+",-"+l+"h-"+u+"Z")}},"star-triangle-up":{n:19,f:function(d,f,y){if(r(f))return A;var l=c(d*e*.8,2),x=c(d*.8,2),u=c(d*1.6,2),M=c(d*4,2),_="A "+M+","+M+" 0 0 1 ";return g(f,y,"M-"+l+","+x+_+l+","+x+_+"0,-"+u+_+"-"+l+","+x+"Z")}},"star-triangle-down":{n:20,f:function(d,f,y){if(r(f))return A;var l=c(d*e*.8,2),x=c(d*.8,2),u=c(d*1.6,2),M=c(d*4,2),_="A "+M+","+M+" 0 0 1 ";return g(f,y,"M"+l+",-"+x+_+"-"+l+",-"+x+_+"0,"+u+_+l+",-"+x+"Z")}},"star-square":{n:21,f:function(d,f,y){if(r(f))return A;var l=c(d*1.1,2),x=c(d*2,2),u="A "+x+","+x+" 0 0 1 ";return g(f,y,"M-"+l+",-"+l+u+"-"+l+","+l+u+l+","+l+u+l+",-"+l+u+"-"+l+",-"+l+"Z")}},"star-diamond":{n:22,f:function(d,f,y){if(r(f))return A;var l=c(d*1.4,2),x=c(d*1.9,2),u="A "+x+","+x+" 0 0 1 ";return g(f,y,"M-"+l+",0"+u+"0,"+l+u+l+",0"+u+"0,-"+l+u+"-"+l+",0Z")}},"diamond-tall":{n:23,f:function(d,f,y){if(r(f))return A;var l=c(d*.7,2),x=c(d*1.4,2);return g(f,y,"M0,"+x+"L"+l+",0L0,-"+x+"L-"+l+",0Z")}},"diamond-wide":{n:24,f:function(d,f,y){if(r(f))return A;var l=c(d*1.4,2),x=c(d*.7,2);return g(f,y,"M0,"+x+"L"+l+",0L0,-"+x+"L-"+l+",0Z")}},hourglass:{n:25,f:function(d,f,y){if(r(f))return A;var l=c(d,2);return g(f,y,"M"+l+","+l+"H-"+l+"L"+l+",-"+l+"H-"+l+"Z")},noDot:!0},bowtie:{n:26,f:function(d,f,y){if(r(f))return A;var l=c(d,2);return g(f,y,"M"+l+","+l+"V-"+l+"L-"+l+","+l+"V-"+l+"Z")},noDot:!0},"circle-cross":{n:27,f:function(d,f,y){if(r(f))return A;var l=c(d,2);return g(f,y,"M0,"+l+"V-"+l+"M"+l+",0H-"+l+"M"+l+",0A"+l+","+l+" 0 1,1 0,-"+l+"A"+l+","+l+" 0 0,1 "+l+",0Z")},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(d,f,y){if(r(f))return A;var l=c(d,2),x=c(d/T,2);return g(f,y,"M"+x+","+x+"L-"+x+",-"+x+"M"+x+",-"+x+"L-"+x+","+x+"M"+l+",0A"+l+","+l+" 0 1,1 0,-"+l+"A"+l+","+l+" 0 0,1 "+l+",0Z")},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(d,f,y){if(r(f))return A;var l=c(d,2);return g(f,y,"M0,"+l+"V-"+l+"M"+l+",0H-"+l+"M"+l+","+l+"H-"+l+"V-"+l+"H"+l+"Z")},needLine:!0,noDot:!0},"square-x":{n:30,f:function(d,f,y){if(r(f))return A;var l=c(d,2);return g(f,y,"M"+l+","+l+"L-"+l+",-"+l+"M"+l+",-"+l+"L-"+l+","+l+"M"+l+","+l+"H-"+l+"V-"+l+"H"+l+"Z")},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(d,f,y){if(r(f))return A;var l=c(d*1.3,2);return g(f,y,"M"+l+",0L0,"+l+"L-"+l+",0L0,-"+l+"ZM0,-"+l+"V"+l+"M-"+l+",0H"+l)},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(d,f,y){if(r(f))return A;var l=c(d*1.3,2),x=c(d*.65,2);return g(f,y,"M"+l+",0L0,"+l+"L-"+l+",0L0,-"+l+"ZM-"+x+",-"+x+"L"+x+","+x+"M-"+x+","+x+"L"+x+",-"+x)},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(d,f,y){if(r(f))return A;var l=c(d*1.4,2);return g(f,y,"M0,"+l+"V-"+l+"M"+l+",0H-"+l)},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(d,f,y){if(r(f))return A;var l=c(d,2);return g(f,y,"M"+l+","+l+"L-"+l+",-"+l+"M"+l+",-"+l+"L-"+l+","+l)},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(d,f,y){if(r(f))return A;var l=c(d*1.2,2),x=c(d*.85,2);return g(f,y,"M0,"+l+"V-"+l+"M"+l+",0H-"+l+"M"+x+","+x+"L-"+x+",-"+x+"M"+x+",-"+x+"L-"+x+","+x)},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(d,f,y){if(r(f))return A;var l=c(d/2,2),x=c(d,2);return g(f,y,"M"+l+","+x+"V-"+x+"M"+(l-x)+",-"+x+"V"+x+"M"+x+","+l+"H-"+x+"M-"+x+","+(l-x)+"H"+x)},needLine:!0,noFill:!0},"y-up":{n:37,f:function(d,f,y){if(r(f))return A;var l=c(d*1.2,2),x=c(d*1.6,2),u=c(d*.8,2);return g(f,y,"M-"+l+","+u+"L0,0M"+l+","+u+"L0,0M0,-"+x+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(d,f,y){if(r(f))return A;var l=c(d*1.2,2),x=c(d*1.6,2),u=c(d*.8,2);return g(f,y,"M-"+l+",-"+u+"L0,0M"+l+",-"+u+"L0,0M0,"+x+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(d,f,y){if(r(f))return A;var l=c(d*1.2,2),x=c(d*1.6,2),u=c(d*.8,2);return g(f,y,"M"+u+","+l+"L0,0M"+u+",-"+l+"L0,0M-"+x+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(d,f,y){if(r(f))return A;var l=c(d*1.2,2),x=c(d*1.6,2),u=c(d*.8,2);return g(f,y,"M-"+u+","+l+"L0,0M-"+u+",-"+l+"L0,0M"+x+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(d,f,y){if(r(f))return A;var l=c(d*1.4,2);return g(f,y,"M"+l+",0H-"+l)},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(d,f,y){if(r(f))return A;var l=c(d*1.4,2);return g(f,y,"M0,"+l+"V-"+l)},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(d,f,y){if(r(f))return A;var l=c(d,2);return g(f,y,"M"+l+",-"+l+"L-"+l+","+l)},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(d,f,y){if(r(f))return A;var l=c(d,2);return g(f,y,"M"+l+","+l+"L-"+l+",-"+l)},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(d,f,y){if(r(f))return A;var l=c(d,2),x=c(d*2,2);return g(f,y,"M0,0L-"+l+","+x+"H"+l+"Z")},backoff:1,noDot:!0},"arrow-down":{n:46,f:function(d,f,y){if(r(f))return A;var l=c(d,2),x=c(d*2,2);return g(f,y,"M0,0L-"+l+",-"+x+"H"+l+"Z")},noDot:!0},"arrow-left":{n:47,f:function(d,f,y){if(r(f))return A;var l=c(d*2,2),x=c(d,2);return g(f,y,"M0,0L"+l+",-"+x+"V"+x+"Z")},noDot:!0},"arrow-right":{n:48,f:function(d,f,y){if(r(f))return A;var l=c(d*2,2),x=c(d,2);return g(f,y,"M0,0L-"+l+",-"+x+"V"+x+"Z")},noDot:!0},"arrow-bar-up":{n:49,f:function(d,f,y){if(r(f))return A;var l=c(d,2),x=c(d*2,2);return g(f,y,"M-"+l+",0H"+l+"M0,0L-"+l+","+x+"H"+l+"Z")},backoff:1,needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(d,f,y){if(r(f))return A;var l=c(d,2),x=c(d*2,2);return g(f,y,"M-"+l+",0H"+l+"M0,0L-"+l+",-"+x+"H"+l+"Z")},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(d,f,y){if(r(f))return A;var l=c(d*2,2),x=c(d,2);return g(f,y,"M0,-"+x+"V"+x+"M0,0L"+l+",-"+x+"V"+x+"Z")},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(d,f,y){if(r(f))return A;var l=c(d*2,2),x=c(d,2);return g(f,y,"M0,-"+x+"V"+x+"M0,0L-"+l+",-"+x+"V"+x+"Z")},needLine:!0,noDot:!0},arrow:{n:53,f:function(d,f,y){if(r(f))return A;var l=a/2.5,x=2*d*i(l),u=2*d*n(l);return g(f,y,"M0,0L"+-x+","+u+"L"+x+","+u+"Z")},backoff:.9,noDot:!0},"arrow-wide":{n:54,f:function(d,f,y){if(r(f))return A;var l=a/4,x=2*d*i(l),u=2*d*n(l);return g(f,y,"M0,0L"+-x+","+u+"A "+2*d+","+2*d+" 0 0 1 "+x+","+u+"Z")},backoff:.4,noDot:!0}};function r(d){return d===null}var v,s,o,b;function g(d,f,y){if((!d||d%360===0)&&!f)return y;if(o===d&&b===f&&v===y)return s;o=d,b=f,v=y;function l(I,D){var R=i(I),N=n(I),z=D[0],G=D[1]+(f||0);return[z*R-G*N,z*N+G*R]}for(var x=d/180*a,u=0,M=0,_=m(y),p="",w=0;w<_.length;w++){var h=_[w],L=h[0],S=u,E=M;if(L==="M"||L==="L")u=+h[1],M=+h[2];else if(L==="m"||L==="l")u+=+h[1],M+=+h[2];else if(L==="H")u=+h[1];else if(L==="h")u+=+h[1];else if(L==="V")M=+h[1];else if(L==="v")M+=+h[1];else if(L==="A"){u=+h[1],M=+h[2];var P=l(x,[+h[6],+h[7]]);h[6]=P[0],h[7]=P[1],h[3]=+h[3]+d}(L==="H"||L==="V")&&(L="L"),(L==="h"||L==="v")&&(L="l"),(L==="m"||L==="l")&&(u-=S,M-=E);var F=l(x,[u,M]);(L==="H"||L==="V")&&(L="L"),(L==="M"||L==="L"||L==="m"||L==="l")&&(h[1]=F[0],h[2]=F[1]),h[0]=L,p+=h[0]+h.slice(1).join(",")}return s=p,p}},{"@plotly/d3":58,"parse-svg-path":250}],391:[function(t,B,V){B.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},{}],392:[function(t,B,V){var m=t("fast-isnumeric"),c=t("../../registry"),A=t("../../plots/cartesian/axes"),T=t("../../lib"),e=t("./compute_error");B.exports=function(n){for(var r=n.calcdata,v=0;v<r.length;v++){var s=r[v],o=s[0].trace;if(o.visible===!0&&c.traceIs(o,"errorBarsOK")){var b=A.getFromId(n,o.xaxis),g=A.getFromId(n,o.yaxis);a(s,o,b,"x"),a(s,o,g,"y")}}};function a(i,n,r,v){var s=n["error_"+v]||{},o=s.visible&&["linear","log"].indexOf(r.type)!==-1,b=[];if(!!o){for(var g=e(s),d=0;d<i.length;d++){var f=i[d],y=f.i;if(y===void 0)y=d;else if(y===null)continue;var l=f[v];if(!!m(r.c2l(l))){var x=g(l,y);if(m(x[0])&&m(x[1])){var u=f[v+"s"]=l-x[0],M=f[v+"h"]=l+x[1];b.push(u,M)}}}var _=r._id,p=n._extremes[_],w=A.findExtremes(r,b,T.extendFlat({tozero:p.opts.tozero},{padded:!0}));p.min=p.min.concat(w.min),p.max=p.max.concat(w.max)}}},{"../../lib":515,"../../plots/cartesian/axes":566,"../../registry":647,"./compute_error":393,"fast-isnumeric":190}],393:[function(t,B,V){B.exports=function(A){var T=A.type,e=A.symmetric;if(T==="data"){var a=A.array||[];if(e)return function(s,o){var b=+a[o];return[b,b]};var i=A.arrayminus||[];return function(s,o){var b=+a[o],g=+i[o];return!isNaN(b)||!isNaN(g)?[g||0,b||0]:[NaN,NaN]}}else{var n=m(T,A.value),r=m(T,A.valueminus);return e||A.valueminus===void 0?function(s){var o=n(s);return[o,o]}:function(s){return[r(s),n(s)]}}};function m(c,A){if(c==="percent")return function(T){return Math.abs(T*A/100)};if(c==="constant")return function(){return Math.abs(A)};if(c==="sqrt")return function(T){return Math.sqrt(Math.abs(T))}}},{}],394:[function(t,B,V){var m=t("fast-isnumeric"),c=t("../../registry"),A=t("../../lib"),T=t("../../plot_api/plot_template"),e=t("./attributes");B.exports=function(a,i,n,r){var v="error_"+r.axis,s=T.newContainer(i,v),o=a[v]||{};function b(u,M){return A.coerce(o,s,e,u,M)}var g=o.array!==void 0||o.value!==void 0||o.type==="sqrt",d=b("visible",g);if(d!==!1){var f=b("type","array"in o?"data":"percent"),y=!0;f!=="sqrt"&&(y=b("symmetric",!((f==="data"?"arrayminus":"valueminus")in o))),f==="data"?(b("array"),b("traceref"),y||(b("arrayminus"),b("tracerefminus"))):(f==="percent"||f==="constant")&&(b("value"),y||b("valueminus"));var l="copy_"+r.inherit+"style";if(r.inherit){var x=i["error_"+r.inherit];(x||{}).visible&&b(l,!(o.color||m(o.thickness)||m(o.width)))}(!r.inherit||!s[l])&&(b("color",n),b("thickness"),b("width",c.traceIs(i,"gl3d")?0:4))}}},{"../../lib":515,"../../plot_api/plot_template":555,"../../registry":647,"./attributes":391,"fast-isnumeric":190}],395:[function(t,B,V){var m=t("../../lib"),c=t("../../plot_api/edit_types").overrideAll,A=t("./attributes"),T={error_x:m.extendFlat({},A),error_y:m.extendFlat({},A)};delete T.error_x.copy_zstyle,delete T.error_y.copy_zstyle,delete T.error_y.copy_ystyle;var e={error_x:m.extendFlat({},A),error_y:m.extendFlat({},A),error_z:m.extendFlat({},A)};delete e.error_x.copy_ystyle,delete e.error_y.copy_ystyle,delete e.error_z.copy_ystyle,delete e.error_z.copy_zstyle,B.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:T,bar:T,histogram:T,scatter3d:c(e,"calc","nested"),scattergl:c(T,"calc","nested")}},supplyDefaults:t("./defaults"),calc:t("./calc"),makeComputeError:t("./compute_error"),plot:t("./plot"),style:t("./style"),hoverInfo:a};function a(i,n,r){(n.error_y||{}).visible&&(r.yerr=i.yh-i.y,n.error_y.symmetric||(r.yerrneg=i.y-i.ys)),(n.error_x||{}).visible&&(r.xerr=i.xh-i.x,n.error_x.symmetric||(r.xerrneg=i.x-i.xs))}},{"../../lib":515,"../../plot_api/edit_types":548,"./attributes":391,"./calc":392,"./compute_error":393,"./defaults":394,"./plot":396,"./style":397}],396:[function(t,B,V){var m=t("@plotly/d3"),c=t("fast-isnumeric"),A=t("../drawing"),T=t("../../traces/scatter/subtypes");B.exports=function(i,n,r,v){var s,o=r.xaxis,b=r.yaxis,g=v&&v.duration>0;n.each(function(d){var f=d[0].trace,y=f.error_x||{},l=f.error_y||{},x;f.ids&&(x=function(p){return p.id});var u=T.hasMarkers(f)&&f.marker.maxdisplayed>0;!l.visible&&!y.visible&&(d=[]);var M=m.select(this).selectAll("g.errorbar").data(d,x);if(M.exit().remove(),!!d.length){y.visible||M.selectAll("path.xerror").remove(),l.visible||M.selectAll("path.yerror").remove(),M.style("opacity",1);var _=M.enter().append("g").classed("errorbar",!0);g&&_.style("opacity",0).transition().duration(v.duration).style("opacity",1),A.setClipUrl(M,r.layerClipId,i),M.each(function(p){var w=m.select(this),h=e(p,o,b);if(!(u&&!p.vis)){var L,S=w.select("path.yerror");if(l.visible&&c(h.x)&&c(h.yh)&&c(h.ys)){var E=l.width;L="M"+(h.x-E)+","+h.yh+"h"+2*E+"m-"+E+",0V"+h.ys,h.noYS||(L+="m-"+E+",0h"+2*E),s=!S.size(),s?S=w.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0):g&&(S=S.transition().duration(v.duration).ease(v.easing)),S.attr("d",L)}else S.remove();var P=w.select("path.xerror");if(y.visible&&c(h.y)&&c(h.xh)&&c(h.xs)){var F=(y.copy_ystyle?l:y).width;L="M"+h.xh+","+(h.y-F)+"v"+2*F+"m0,-"+F+"H"+h.xs,h.noXS||(L+="m0,-"+F+"v"+2*F),s=!P.size(),s?P=w.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0):g&&(P=P.transition().duration(v.duration).ease(v.easing)),P.attr("d",L)}else P.remove()}})}})};function e(a,i,n){var r={x:i.c2p(a.x),y:n.c2p(a.y)};return a.yh!==void 0&&(r.yh=n.c2p(a.yh),r.ys=n.c2p(a.ys),c(r.ys)||(r.noYS=!0,r.ys=n.c2p(a.ys,!0))),a.xh!==void 0&&(r.xh=i.c2p(a.xh),r.xs=i.c2p(a.xs),c(r.xs)||(r.noXS=!0,r.xs=i.c2p(a.xs,!0))),r}},{"../../traces/scatter/subtypes":961,"../drawing":389,"@plotly/d3":58,"fast-isnumeric":190}],397:[function(t,B,V){var m=t("@plotly/d3"),c=t("../color");B.exports=function(T){T.each(function(e){var a=e[0].trace,i=a.error_y||{},n=a.error_x||{},r=m.select(this);r.selectAll("path.yerror").style("stroke-width",i.thickness+"px").call(c.stroke,i.color),n.copy_ystyle&&(n=i),r.selectAll("path.xerror").style("stroke-width",n.thickness+"px").call(c.stroke,n.color)})}},{"../color":367,"@plotly/d3":58}],398:[function(t,B,V){var m=t("../../plots/font_attributes"),c=t("./layout_attributes").hoverlabel,A=t("../../lib/extend").extendFlat;B.exports={hoverlabel:{bgcolor:A({},c.bgcolor,{arrayOk:!0}),bordercolor:A({},c.bordercolor,{arrayOk:!0}),font:m({arrayOk:!0,editType:"none"}),align:A({},c.align,{arrayOk:!0}),namelength:A({},c.namelength,{arrayOk:!0}),editType:"none"}}},{"../../lib/extend":505,"../../plots/font_attributes":594,"./layout_attributes":408}],399:[function(t,B,V){var m=t("../../lib"),c=t("../../registry");B.exports=function(e){var a=e.calcdata,i=e._fullLayout;function n(b){return function(g){return m.coerceHoverinfo({hoverinfo:g},{_module:b._module},i)}}for(var r=0;r<a.length;r++){var v=a[r],s=v[0].trace;if(!c.traceIs(s,"pie-like")){var o=c.traceIs(s,"2dMap")?A:m.fillArray;o(s.hoverinfo,v,"hi",n(s)),s.hovertemplate&&o(s.hovertemplate,v,"ht"),s.hoverlabel&&(o(s.hoverlabel.bgcolor,v,"hbg"),o(s.hoverlabel.bordercolor,v,"hbc"),o(s.hoverlabel.font.size,v,"hts"),o(s.hoverlabel.font.color,v,"htc"),o(s.hoverlabel.font.family,v,"htf"),o(s.hoverlabel.namelength,v,"hnl"),o(s.hoverlabel.align,v,"hta"))}}};function A(T,e,a,i){i=i||m.identity,Array.isArray(T)&&(e[0][a]=i(T))}},{"../../lib":515,"../../registry":647}],400:[function(t,B,V){var m=t("../../registry"),c=t("./hover").hover;B.exports=function(T,e,a){var i=m.getComponentMethod("annotations","onClick")(T,T._hoverdata);a!==void 0&&c(T,e,a,!0);function n(){T.emit("plotly_click",{points:T._hoverdata,event:e})}T._hoverdata&&e&&e.target&&(i&&i.then?i.then(n):n(),e.stopImmediatePropagation&&e.stopImmediatePropagation())}},{"../../registry":647,"./hover":404}],401:[function(t,B,V){B.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],402:[function(t,B,V){var m=t("../../lib"),c=t("./attributes"),A=t("./hoverlabel_defaults");B.exports=function(e,a,i,n){function r(s,o){return m.coerce(e,a,c,s,o)}var v=m.extendFlat({},n.hoverlabel);a.hovertemplate&&(v.namelength=-1),A(e,a,r,v)}},{"../../lib":515,"./attributes":398,"./hoverlabel_defaults":405}],403:[function(t,B,V){var m=t("../../lib");V.getSubplot=function(i){return i.subplot||i.xaxis+i.yaxis||i.geo},V.isTraceInSubplots=function(i,n){if(i.type==="splom"){for(var r=i.xaxes||[],v=i.yaxes||[],s=0;s<r.length;s++)for(var o=0;o<v.length;o++)if(n.indexOf(r[s]+v[o])!==-1)return!0;return!1}return n.indexOf(V.getSubplot(i))!==-1},V.flat=function(i,n){for(var r=new Array(i.length),v=0;v<i.length;v++)r[v]=n;return r},V.p2c=function(i,n){for(var r=new Array(i.length),v=0;v<i.length;v++)r[v]=i[v].p2c(n);return r},V.getDistanceFunction=function(i,n,r,v){return i==="closest"?v||V.quadrature(n,r):i.charAt(0)==="x"?n:r},V.getClosest=function(i,n,r){if(r.index!==!1)r.index>=0&&r.index<i.length?r.distance=0:r.index=!1;else for(var v=0;v<i.length;v++){var s=n(i[v]);s<=r.distance&&(r.index=v,r.distance=s)}return r},V.inbox=function(i,n,r){return i*n<0||i===0?r:1/0},V.quadrature=function(i,n){return function(r){var v=i(r),s=n(r);return Math.sqrt(v*v+s*s)}},V.makeEventData=function(i,n,r){var v="index"in i?i.index:i.pointNumber,s={data:n._input,fullData:n,curveNumber:n.index,pointNumber:v};if(n._indexToPoints){var o=n._indexToPoints[v];o.length===1?s.pointIndex=o[0]:s.pointIndices=o}else s.pointIndex=v;return n._module.eventData?s=n._module.eventData(s,i,n,r,v):("xVal"in i?s.x=i.xVal:"x"in i&&(s.x=i.x),"yVal"in i?s.y=i.yVal:"y"in i&&(s.y=i.y),i.xa&&(s.xaxis=i.xa),i.ya&&(s.yaxis=i.ya),i.zLabelVal!==void 0&&(s.z=i.zLabelVal)),V.appendArrayPointValue(s,n,v),s},V.appendArrayPointValue=function(i,n,r){var v=n._arrayAttrs;if(!!v)for(var s=0;s<v.length;s++){var o=v[s],b=A(o);if(i[b]===void 0){var g=m.nestedProperty(n,o).get(),d=T(g,r);d!==void 0&&(i[b]=d)}}},V.appendArrayMultiPointValues=function(i,n,r){var v=n._arrayAttrs;if(!!v)for(var s=0;s<v.length;s++){var o=v[s],b=A(o);if(i[b]===void 0){for(var g=m.nestedProperty(n,o).get(),d=new Array(r.length),f=0;f<r.length;f++)d[f]=T(g,r[f]);i[b]=d}}};var c={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function A(i){return c[i]||i}function T(i,n){if(Array.isArray(n)){if(Array.isArray(i)&&Array.isArray(i[n[0]]))return i[n[0]][n[1]]}else return i[n]}var e={x:!0,y:!0},a={"x unified":!0,"y unified":!0};V.isUnifiedHover=function(i){return typeof i!="string"?!1:!!a[i]},V.isXYhover=function(i){return typeof i!="string"?!1:!!e[i]}},{"../../lib":515}],404:[function(t,B,V){var m=t("@plotly/d3"),c=t("fast-isnumeric"),A=t("tinycolor2"),T=t("../../lib"),e=T.strTranslate,a=T.strRotate,i=t("../../lib/events"),n=t("../../lib/svg_text_utils"),r=t("../../lib/override_cursor"),v=t("../drawing"),s=t("../color"),o=t("../dragelement"),b=t("../../plots/cartesian/axes"),g=t("../../registry"),d=t("./helpers"),f=t("./constants"),y=t("../legend/defaults"),l=t("../legend/draw"),x=f.YANGLE,u=Math.PI*x/180,M=1/Math.sin(u),_=Math.cos(u),p=Math.sin(u),w=f.HOVERARROWSIZE,h=f.HOVERTEXTPAD,L={box:!0,ohlc:!0,violin:!0,candlestick:!0},S={scatter:!0,scattergl:!0,splom:!0};V.hover=function(H,q,re,j){H=T.getGraphDiv(H);var $=q.target;T.throttle(H._fullLayout._uid+f.HOVERID,f.HOVERMINTIME,function(){E(H,q,re,j,$)})},V.loneHover=function(H,q){var re=!0;Array.isArray(H)||(re=!1,H=[H]);var j=q.gd,$=ce(j),ie=Q(j),oe=H.map(function(be){var ke=be._x0||be.x0||be.x||0,De=be._x1||be.x1||be.x||0,Ve=be._y0||be.y0||be.y||0,Ae=be._y1||be.y1||be.y||0,Le=be.eventData;if(Le){var je=Math.min(ke,De),Ye=Math.max(ke,De),ze=Math.min(Ve,Ae),Ie=Math.max(Ve,Ae),We=be.trace;if(g.traceIs(We,"gl3d")){var pt=j._fullLayout[We.scene]._scene.container,Ft=pt.offsetLeft,Qt=pt.offsetTop;je+=Ft,Ye+=Ft,ze+=Qt,Ie+=Qt}Le.bbox={x0:je+ie,x1:Ye+ie,y0:ze+$,y1:Ie+$},q.inOut_bbox&&q.inOut_bbox.push(Le.bbox)}else Le=!1;return{color:be.color||s.defaultLine,x0:be.x0||be.x||0,x1:be.x1||be.x||0,y0:be.y0||be.y||0,y1:be.y1||be.y||0,xLabel:be.xLabel,yLabel:be.yLabel,zLabel:be.zLabel,text:be.text,name:be.name,idealAlign:be.idealAlign,borderColor:be.borderColor,fontFamily:be.fontFamily,fontSize:be.fontSize,fontColor:be.fontColor,nameLength:be.nameLength,textAlign:be.textAlign,trace:be.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:be.hovertemplate||!1,hovertemplateLabels:be.hovertemplateLabels||!1,eventData:Le}}),ae=!1,se=I(oe,{gd:j,hovermode:"closest",rotateLabels:ae,bgColor:q.bgColor||s.background,container:m.select(q.container),outerContainer:q.outerContainer||q.container}),_e=5,ue=0,ye=0;se.sort(function(be,ke){return be.y0-ke.y0}).each(function(be,ke){var De=be.y0-be.by/2;De-_e<ue?be.offset=ue-De+_e:be.offset=0,ue=De+be.by+be.offset,ke===q.anchorIndex&&(ye=be.offset)}).each(function(be){be.offset-=ye});var xe=j._fullLayout._invScaleX,me=j._fullLayout._invScaleY;return N(se,ae,xe,me),re?se:se.node()};function E(U,H,q,re,j){q||(q="xy");var $=Array.isArray(q)?q:[q],ie=U._fullLayout,oe=ie._plots||[],ae=oe[q],se=ie._has("cartesian");if(ae){var _e=ae.overlays.map(function(sr){return sr.id});$=$.concat(_e)}for(var ue=$.length,ye=new Array(ue),xe=new Array(ue),me=!1,be=0;be<ue;be++){var ke=$[be];if(oe[ke])me=!0,ye[be]=oe[ke].xaxis,xe[be]=oe[ke].yaxis;else if(ie[ke]&&ie[ke]._subplot){var De=ie[ke]._subplot;ye[be]=De.xaxis,xe[be]=De.yaxis}else{T.warn("Unrecognized subplot: "+ke);return}}var Ve=H.hovermode||ie.hovermode;if(Ve&&!me&&(Ve="closest"),["x","y","closest","x unified","y unified"].indexOf(Ve)===-1||!U.calcdata||U.querySelector(".zoombox")||U._dragging)return o.unhoverRaw(U,H);var Ae=ie.hoverdistance;Ae===-1&&(Ae=1/0);var Le=ie.spikedistance;Le===-1&&(Le=1/0);var je=[],Ye=[],ze,Ie,We,pt,Ft,Qt,zt,Et,Xt,Nt,Ct,Xe,at,Ge={hLinePoint:null,vLinePoint:null},Se=!1;if(Array.isArray(H))for(Ve="array",We=0;We<H.length;We++)Ft=U.calcdata[H[We].curveNumber||0],Ft&&(Qt=Ft[0].trace,Ft[0].trace.hoverinfo!=="skip"&&(Ye.push(Ft),Qt.orientation==="h"&&(Se=!0)));else{for(pt=0;pt<U.calcdata.length;pt++)Ft=U.calcdata[pt],Qt=Ft[0].trace,Qt.hoverinfo!=="skip"&&d.isTraceInSubplots(Qt,$)&&(Ye.push(Ft),Qt.orientation==="h"&&(Se=!0));var He=!j,Ke,qe;if(He)"xpx"in H?Ke=H.xpx:Ke=ye[0]._length/2,"ypx"in H?qe=H.ypx:qe=xe[0]._length/2;else{if(i.triggerHandler(U,"plotly_beforehover",H)===!1)return;var Tt=j.getBoundingClientRect();Ke=H.clientX-Tt.left,qe=H.clientY-Tt.top,ie._calcInverseTransform(U);var mt=T.apply3DTransform(ie._invTransform)(Ke,qe);if(Ke=mt[0],qe=mt[1],Ke<0||Ke>ye[0]._length||qe<0||qe>xe[0]._length)return o.unhoverRaw(U,H)}if(H.pointerX=Ke+ye[0]._offset,H.pointerY=qe+xe[0]._offset,"xval"in H?ze=d.flat($,H.xval):ze=d.p2c(ye,Ke),"yval"in H?Ie=d.flat($,H.yval):Ie=d.p2c(xe,qe),!c(ze[0])||!c(Ie[0]))return T.warn("Fx.hover failed",H,U),o.unhoverRaw(U,H)}var At=1/0;function Ht(sr,zr){for(pt=0;pt<Ye.length;pt++)if(Ft=Ye[pt],!(!Ft||!Ft[0]||!Ft[0].trace)&&(Qt=Ft[0].trace,!(Qt.visible!==!0||Qt._length===0)&&["carpet","contourcarpet"].indexOf(Qt._module.name)===-1)){if(Qt.type==="splom"?(Et=0,zt=$[Et]):(zt=d.getSubplot(Qt),Et=$.indexOf(zt)),Xt=Ve,d.isUnifiedHover(Xt)&&(Xt=Xt.charAt(0)),Xe={cd:Ft,trace:Qt,xa:ye[Et],ya:xe[Et],maxHoverDistance:Ae,maxSpikeDistance:Le,index:!1,distance:Math.min(At,Ae),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:s.defaultLine,name:Qt.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},ie[zt]&&(Xe.subplot=ie[zt]._subplot),ie._splomScenes&&ie._splomScenes[Qt.uid]&&(Xe.scene=ie._splomScenes[Qt.uid]),at=je.length,Xt==="array"){var Ur=H[pt];"pointNumber"in Ur?(Xe.index=Ur.pointNumber,Xt="closest"):(Xt="","xval"in Ur&&(Nt=Ur.xval,Xt="x"),"yval"in Ur&&(Ct=Ur.yval,Xt=Xt?"closest":"y"))}else sr!==void 0&&zr!==void 0?(Nt=sr,Ct=zr):(Nt=ze[Et],Ct=Ie[Et]);if(Ae!==0)if(Qt._module&&Qt._module.hoverPoints){var Lr=Qt._module.hoverPoints(Xe,Nt,Ct,Xt,{finiteRange:!0,hoverLayer:ie._hoverlayer});if(Lr)for(var Tr,Wr=0;Wr<Lr.length;Wr++)Tr=Lr[Wr],c(Tr.x0)&&c(Tr.y0)&&je.push(z(Tr,Ve))}else T.log("Unrecognized trace type in hover:",Qt);if(Ve==="closest"&&je.length>at&&(je.splice(0,at),At=je[0].distance),se&&Le!==0&&je.length===0){Xe.distance=Le,Xe.index=!1;var An=Qt._module.hoverPoints(Xe,Nt,Ct,"closest",{hoverLayer:ie._hoverlayer});if(An&&(An=An.filter(function(ya){return ya.spikeDistance<=Le})),An&&An.length){var vn,Un=An.filter(function(ya){return ya.xa.showspikes&&ya.xa.spikesnap!=="hovered data"});if(Un.length){var Ln=Un[0];c(Ln.x0)&&c(Ln.y0)&&(vn=Vt(Ln),(!Ge.vLinePoint||Ge.vLinePoint.spikeDistance>vn.spikeDistance)&&(Ge.vLinePoint=vn))}var Zn=An.filter(function(ya){return ya.ya.showspikes&&ya.ya.spikesnap!=="hovered data"});if(Zn.length){var Wn=Zn[0];c(Wn.x0)&&c(Wn.y0)&&(vn=Vt(Wn),(!Ge.hLinePoint||Ge.hLinePoint.spikeDistance>vn.spikeDistance)&&(Ge.hLinePoint=vn))}}}}}Ht();function It(sr,zr,Ur){for(var Lr=null,Tr=1/0,Wr,An=0;An<sr.length;An++)Wr=sr[An].spikeDistance,Ur&&An===0&&(Wr=-1/0),Wr<=Tr&&Wr<=zr&&(Lr=sr[An],Tr=Wr);return Lr}function Vt(sr){return sr?{xa:sr.xa,ya:sr.ya,x:sr.xSpike!==void 0?sr.xSpike:(sr.x0+sr.x1)/2,y:sr.ySpike!==void 0?sr.ySpike:(sr.y0+sr.y1)/2,distance:sr.distance,spikeDistance:sr.spikeDistance,curveNumber:sr.trace.index,color:sr.color,pointNumber:sr.index}:null}var jt={fullLayout:ie,container:ie._hoverlayer,event:H},Yt=U._spikepoints,or={vLinePoint:Ge.vLinePoint,hLinePoint:Ge.hLinePoint};U._spikepoints=or;var Gr=function(){je.sort(function(sr,zr){return sr.distance-zr.distance}),je=X(je,Ve)};Gr();var on=Ve.charAt(0),Jr=(on==="x"||on==="y")&&je[0]&&S[je[0].trace.type];if(se&&Le!==0&&je.length!==0){var ot=je.filter(function(sr){return sr.ya.showspikes}),er=It(ot,Le,Jr);Ge.hLinePoint=Vt(er);var Kt=je.filter(function(sr){return sr.xa.showspikes}),fr=It(Kt,Le,Jr);Ge.vLinePoint=Vt(fr)}if(je.length===0){var Ar=o.unhoverRaw(U,H);return se&&(Ge.hLinePoint!==null||Ge.vLinePoint!==null)&&ee(Yt)&&G(U,Ge,jt),Ar}if(se&&ee(Yt)&&G(U,Ge,jt),d.isXYhover(Xt)&&je[0].length!==0&&je[0].trace.type!=="splom"){var et=je[0];L[et.trace.type]?je=je.filter(function(sr){return sr.trace.index===et.trace.index}):je=[et];var $e=je.length,st=ne("x",et,ie),ct=ne("y",et,ie);Ht(st,ct);var Mt=[],Ut={},Pe=0,Ee=function(sr){var zr=L[sr.trace.type]?P(sr):sr.trace.index;if(!Ut[zr])Pe++,Ut[zr]=Pe,Mt.push(sr);else{var Ur=Ut[zr]-1,Lr=Mt[Ur];Ur>0&&Math.abs(sr.distance)<Math.abs(Lr.distance)&&(Mt[Ur]=sr)}},it;for(it=0;it<$e;it++)Ee(je[it]);for(it=je.length-1;it>$e-1;it--)Ee(je[it]);je=Mt,Gr()}var ut=U._hoverdata,vt=[],St=ce(U),yt=Q(U);for(We=0;We<je.length;We++){var Pt=je[We],Wt=d.makeEventData(Pt,Pt.trace,Pt.cd);if(Pt.hovertemplate!==!1){var ar=!1;Pt.cd[Pt.index]&&Pt.cd[Pt.index].ht&&(ar=Pt.cd[Pt.index].ht),Pt.hovertemplate=ar||Pt.trace.hovertemplate||!1}if(Pt.xa&&Pt.ya){var kr=Pt.x0+Pt.xa._offset,wr=Pt.x1+Pt.xa._offset,Sr=Pt.y0+Pt.ya._offset,Zr=Pt.y1+Pt.ya._offset,ir=Math.min(kr,wr),xr=Math.max(kr,wr),Rr=Math.min(Sr,Zr),Br=Math.max(Sr,Zr);Wt.bbox={x0:ir+yt,x1:xr+yt,y0:Rr+St,y1:Br+St}}Pt.eventData=[Wt],vt.push(Wt)}U._hoverdata=vt;var Cr=Ve==="y"&&(Ye.length>1||je.length>1)||Ve==="closest"&&Se&&je.length>1,nt=s.combine(ie.plot_bgcolor||s.background,ie.paper_bgcolor),Dt=I(je,{gd:U,hovermode:Ve,rotateLabels:Cr,bgColor:nt,container:ie._hoverlayer,outerContainer:ie._paper.node(),commonLabelOpts:ie.hoverlabel,hoverdistance:ie.hoverdistance});if(d.isUnifiedHover(Ve)||(R(Dt,Cr?"xa":"ya",ie),N(Dt,Cr,ie._invScaleX,ie._invScaleY)),j&&j.tagName){var Zt=g.getComponentMethod("annotations","hasClickToShow")(U,vt);r(m.select(j),Zt?"pointer":"")}!j||re||!Y(U,H,ut)||(ut&&U.emit("plotly_unhover",{event:H,points:ut}),U.emit("plotly_hover",{event:H,points:U._hoverdata,xaxes:ye,yaxes:xe,xvals:ze,yvals:Ie}))}function P(U){return[U.trace.index,U.index,U.x0,U.y0,U.name,U.attr,U.xa?U.xa._id:"",U.ya?U.ya._id:""].join(",")}var F=/<extra>([\s\S]*)<\/extra>/;function I(U,H){var q=H.gd,re=q._fullLayout,j=H.hovermode,$=H.rotateLabels,ie=H.bgColor,oe=H.container,ae=H.outerContainer,se=H.commonLabelOpts||{};if(U.length===0)return[[]];var _e=H.fontFamily||f.HOVERFONT,ue=H.fontSize||f.HOVERFONTSIZE,ye=U[0],xe=ye.xa,me=ye.ya,be=j.charAt(0),ke=be+"Label",De=ye[ke];if(De===void 0&&xe.type==="multicategory")for(var Ve=0;Ve<U.length&&(De=U[Ve][ke],De===void 0);Ve++);var Ae=K(q,ae),Le=Ae.top,je=Ae.width,Ye=Ae.height,ze=De!==void 0&&ye.distance<=H.hoverdistance&&(j==="x"||j==="y");if(ze){var Ie=!0,We,pt;for(We=0;We<U.length;We++)if(Ie&&U[We].zLabel===void 0&&(Ie=!1),pt=U[We].hoverinfo||U[We].trace.hoverinfo,pt){var Ft=Array.isArray(pt)?pt:pt.split("+");if(Ft.indexOf("all")===-1&&Ft.indexOf(j)===-1){ze=!1;break}}Ie&&(ze=!1)}var Qt=oe.selectAll("g.axistext").data(ze?[0]:[]);if(Qt.enter().append("g").classed("axistext",!0),Qt.exit().remove(),Qt.each(function(){var et=m.select(this),$e=T.ensureSingle(et,"path","",function(xr){xr.style({"stroke-width":"1px"})}),st=T.ensureSingle(et,"text","",function(xr){xr.attr("data-notex",1)}),ct=se.bgcolor||s.defaultLine,Mt=se.bordercolor||s.contrast(ct),Ut=s.contrast(ct),Pe={family:se.font.family||_e,size:se.font.size||ue,color:se.font.color||Ut};$e.style({fill:ct,stroke:Mt}),st.text(De).call(v.font,Pe).call(n.positionText,0,0).call(n.convertToTspans,q),et.attr("transform","");var Ee=K(q,st.node()),it,ut;if(j==="x"){var vt=xe.side==="top"?"-":"";st.attr("text-anchor","middle").call(n.positionText,0,xe.side==="top"?Le-Ee.bottom-w-h:Le-Ee.top+w+h),it=xe._offset+(ye.x0+ye.x1)/2,ut=me._offset+(xe.side==="top"?0:me._length);var St=Ee.width/2+h;it<St?(it=St,$e.attr("d","M-"+(St-w)+",0L-"+(St-w*2)+","+vt+w+"H"+(h+Ee.width/2)+"v"+vt+(h*2+Ee.height)+"H-"+St+"V"+vt+w+"Z")):it>re.width-St?(it=re.width-St,$e.attr("d","M"+(St-w)+",0L"+St+","+vt+w+"v"+vt+(h*2+Ee.height)+"H-"+St+"V"+vt+w+"H"+(St-w*2)+"Z")):$e.attr("d","M0,0L"+w+","+vt+w+"H"+(h+Ee.width/2)+"v"+vt+(h*2+Ee.height)+"H-"+(h+Ee.width/2)+"V"+vt+w+"H-"+w+"Z")}else{var yt,Pt,Wt;me.side==="right"?(yt="start",Pt=1,Wt="",it=xe._offset+xe._length):(yt="end",Pt=-1,Wt="-",it=xe._offset),ut=me._offset+(ye.y0+ye.y1)/2,st.attr("text-anchor",yt),$e.attr("d","M0,0L"+Wt+w+","+w+"V"+(h+Ee.height/2)+"h"+Wt+(h*2+Ee.width)+"V-"+(h+Ee.height/2)+"H"+Wt+w+"V-"+w+"Z");var ar=Ee.height/2,kr=Le-Ee.top-ar,wr="clip"+re._uid+"commonlabel"+me._id,Sr;if(it<Ee.width+2*h+w){Sr="M-"+(w+h)+"-"+ar+"h-"+(Ee.width-h)+"V"+ar+"h"+(Ee.width-h)+"Z";var Zr=Ee.width-it+h;n.positionText(st,Zr,kr),yt==="end"&&st.selectAll("tspan").each(function(){var xr=m.select(this),Rr=v.tester.append("text").text(xr.text()).call(v.font,Pe),Br=K(q,Rr.node());Math.round(Br.width)<Math.round(Ee.width)&&xr.attr("x",Zr-Br.width),Rr.remove()})}else n.positionText(st,Pt*(h+w),kr),Sr=null;var ir=re._topclips.selectAll("#"+wr).data(Sr?[0]:[]);ir.enter().append("clipPath").attr("id",wr).append("path"),ir.exit().remove(),ir.select("path").attr("d",Sr),v.setClipUrl(st,Sr?wr:null,q)}et.attr("transform",e(it,ut))}),d.isUnifiedHover(j)){oe.selectAll("g.hovertext").remove();var zt=U.filter(function(et){return et.hoverinfo!=="none"});if(zt.length===0)return;var Et=re.hoverlabel,Xt=Et.font,Nt={showlegend:!0,legend:{title:{text:De,font:Xt},font:Xt,bgcolor:Et.bgcolor,bordercolor:Et.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:re.legend?re.legend.traceorder:void 0,orientation:"v"}},Ct={font:Xt};y(Nt,Ct,q._fullData);var Xe=Ct.legend;Xe.entries=[];for(var at=0;at<zt.length;at++){var Ge=zt[at];if(Ge.hoverinfo!=="none"){var Se=D(Ge,!0,j,re,De),He=Se[0],Ke=Se[1];Ge.name=Ke,Ke!==""?Ge.text=Ke+" : "+He:Ge.text=He;var qe=Ge.cd[Ge.index];qe&&(qe.mc&&(Ge.mc=qe.mc),qe.mcc&&(Ge.mc=qe.mcc),qe.mlc&&(Ge.mlc=qe.mlc),qe.mlcc&&(Ge.mlc=qe.mlcc),qe.mlw&&(Ge.mlw=qe.mlw),qe.mrc&&(Ge.mrc=qe.mrc),qe.dir&&(Ge.dir=qe.dir)),Ge._distinct=!0,Xe.entries.push([Ge])}}Xe.entries.sort(function(et,$e){return et[0].trace.index-$e[0].trace.index}),Xe.layer=oe,Xe._inHover=!0,Xe._groupTitleFont=Et.grouptitlefont,l(q,Xe);var Tt=oe.select("g.legend"),mt=K(q,Tt.node()),At=mt.width+2*h,Ht=mt.height+2*h,It=zt[0],Vt=(It.x0+It.x1)/2,jt=(It.y0+It.y1)/2,Yt=!(g.traceIs(It.trace,"bar-like")||g.traceIs(It.trace,"box-violin")),or,Gr;be==="y"?Yt?(Gr=jt-h,or=jt+h):(Gr=Math.min.apply(null,zt.map(function(et){return Math.min(et.y0,et.y1)})),or=Math.max.apply(null,zt.map(function(et){return Math.max(et.y0,et.y1)}))):Gr=or=T.mean(zt.map(function(et){return(et.y0+et.y1)/2}))-Ht/2;var on,Jr;be==="x"?Yt?(on=Vt+h,Jr=Vt-h):(on=Math.max.apply(null,zt.map(function(et){return Math.max(et.x0,et.x1)})),Jr=Math.min.apply(null,zt.map(function(et){return Math.min(et.x0,et.x1)}))):on=Jr=T.mean(zt.map(function(et){return(et.x0+et.x1)/2}))-At/2;var ot=xe._offset,er=me._offset;or+=er,on+=ot,Jr+=ot-At,Gr+=er-Ht;var Kt,fr;return on+At<je&&on>=0?Kt=on:Jr+At<je&&Jr>=0?Kt=Jr:ot+At<je?Kt=ot:on-Vt<Vt-Jr+At?Kt=je-At:Kt=0,Kt+=h,or+Ht<Ye&&or>=0?fr=or:Gr+Ht<Ye&&Gr>=0?fr=Gr:er+Ht<Ye?fr=er:or-jt<jt-Gr+Ht?fr=Ye-Ht:fr=0,fr+=h,Tt.attr("transform",e(Kt-1,fr-1)),Tt}var Ar=oe.selectAll("g.hovertext").data(U,function(et){return P(et)});return Ar.enter().append("g").classed("hovertext",!0).each(function(){var et=m.select(this);et.append("rect").call(s.fill,s.addOpacity(ie,.8)),et.append("text").classed("name",!0),et.append("path").style("stroke-width","1px"),et.append("text").classed("nums",!0).call(v.font,_e,ue)}),Ar.exit().remove(),Ar.each(function(et){var $e=m.select(this).attr("transform",""),st=et.color;Array.isArray(st)&&(st=st[et.eventData[0].pointNumber]);var ct=et.bgcolor||st,Mt=s.combine(s.opacity(ct)?ct:s.defaultLine,ie),Ut=s.combine(s.opacity(st)?st:s.defaultLine,ie),Pe=et.borderColor||s.contrast(Mt),Ee=D(et,ze,j,re,De,$e),it=Ee[0],ut=Ee[1],vt=$e.select("text.nums").call(v.font,et.fontFamily||_e,et.fontSize||ue,et.fontColor||Pe).text(it).attr("data-notex",1).call(n.positionText,0,0).call(n.convertToTspans,q),St=$e.select("text.name"),yt=0,Pt=0;if(ut&&ut!==it){St.call(v.font,et.fontFamily||_e,et.fontSize||ue,Ut).text(ut).attr("data-notex",1).call(n.positionText,0,0).call(n.convertToTspans,q);var Wt=K(q,St.node());yt=Wt.width+2*h,Pt=Wt.height+2*h}else St.remove(),$e.select("rect").remove();$e.select("path").style({fill:Mt,stroke:Pe});var ar=et.xa._offset+(et.x0+et.x1)/2,kr=et.ya._offset+(et.y0+et.y1)/2,wr=Math.abs(et.x1-et.x0),Sr=Math.abs(et.y1-et.y0),Zr=K(q,vt.node()),ir=Zr.width/re._invScaleX,xr=Zr.height/re._invScaleY;et.ty0=(Le-Zr.top)/re._invScaleY,et.bx=ir+2*h,et.by=Math.max(xr+2*h,Pt),et.anchor="start",et.txwidth=ir,et.tx2width=yt,et.offset=0;var Rr=(ir+w+h+yt)*re._invScaleX,Br,Cr;if($)et.pos=ar,Br=kr+Sr/2+Rr<=Ye,Cr=kr-Sr/2-Rr>=0,(et.idealAlign==="top"||!Br)&&Cr?(kr-=Sr/2,et.anchor="end"):Br?(kr+=Sr/2,et.anchor="start"):et.anchor="middle";else if(et.pos=kr,Br=ar+wr/2+Rr<=je,Cr=ar-wr/2-Rr>=0,(et.idealAlign==="left"||!Br)&&Cr)ar-=wr/2,et.anchor="end";else if(Br)ar+=wr/2,et.anchor="start";else{et.anchor="middle";var nt=Rr/2,Dt=ar+nt-je,Zt=ar-nt;Dt>0&&(ar-=Dt),Zt<0&&(ar+=-Zt)}vt.attr("text-anchor",et.anchor),yt&&St.attr("text-anchor",et.anchor),$e.attr("transform",e(ar,kr)+($?a(x):""))}),Ar}function D(U,H,q,re,j,$){var ie="",oe="";U.nameOverride!==void 0&&(U.name=U.nameOverride),U.name&&(U.trace._meta&&(U.name=T.templateString(U.name,U.trace._meta)),ie=Z(U.name,U.nameLength));var ae=q.charAt(0),se=ae==="x"?"y":"x";U.zLabel!==void 0?(U.xLabel!==void 0&&(oe+="x: "+U.xLabel+"<br>"),U.yLabel!==void 0&&(oe+="y: "+U.yLabel+"<br>"),U.trace.type!=="choropleth"&&U.trace.type!=="choroplethmapbox"&&(oe+=(oe?"z: ":"")+U.zLabel)):H&&U[ae+"Label"]===j?oe=U[se+"Label"]||"":U.xLabel===void 0?U.yLabel!==void 0&&U.trace.type!=="scattercarpet"&&(oe=U.yLabel):U.yLabel===void 0?oe=U.xLabel:oe="("+U.xLabel+", "+U.yLabel+")",(U.text||U.text===0)&&!Array.isArray(U.text)&&(oe+=(oe?"<br>":"")+U.text),U.extraText!==void 0&&(oe+=(oe?"<br>":"")+U.extraText),$&&oe===""&&!U.hovertemplate&&(ie===""&&$.remove(),oe=ie);var _e=U.hovertemplate||!1;if(_e){var ue=U.hovertemplateLabels||U;U[ae+"Label"]!==j&&(ue[ae+"other"]=ue[ae+"Val"],ue[ae+"otherLabel"]=ue[ae+"Label"]),oe=T.hovertemplateString(_e,ue,re._d3locale,U.eventData[0]||{},U.trace._meta),oe=oe.replace(F,function(ye,xe){return ie=Z(xe,U.nameLength),""})}return[oe,ie]}function R(U,H,q){var re=0,j=1,$=U.size(),ie=new Array($),oe=0;U.each(function(ze){var Ie=ze[H],We=Ie._id.charAt(0)==="x",pt=Ie.range;oe===0&&pt&&pt[0]>pt[1]!==We&&(j=-1),ie[oe++]=[{datum:ze,traceIndex:ze.trace.index,dp:0,pos:ze.pos,posref:ze.posref,size:ze.by*(We?M:1)/2,pmin:0,pmax:We?q.width:q.height}]}),ie.sort(function(ze,Ie){return ze[0].posref-Ie[0].posref||j*(Ie[0].traceIndex-ze[0].traceIndex)});var ae,se,_e,ue,ye,xe,me;function be(ze){var Ie=ze[0],We=ze[ze.length-1];if(se=Ie.pmin-Ie.pos-Ie.dp+Ie.size,_e=We.pos+We.dp+We.size-Ie.pmax,se>.01){for(ye=ze.length-1;ye>=0;ye--)ze[ye].dp+=se;ae=!1}if(!(_e<.01)){if(se<-.01){for(ye=ze.length-1;ye>=0;ye--)ze[ye].dp-=_e;ae=!1}if(!!ae){var pt=0;for(ue=0;ue<ze.length;ue++)xe=ze[ue],xe.pos+xe.dp+xe.size>Ie.pmax&&pt++;for(ue=ze.length-1;ue>=0&&!(pt<=0);ue--)xe=ze[ue],xe.pos>Ie.pmax-1&&(xe.del=!0,pt--);for(ue=0;ue<ze.length&&!(pt<=0);ue++)if(xe=ze[ue],xe.pos<Ie.pmin+1)for(xe.del=!0,pt--,_e=xe.size*2,ye=ze.length-1;ye>=0;ye--)ze[ye].dp-=_e;for(ue=ze.length-1;ue>=0&&!(pt<=0);ue--)xe=ze[ue],xe.pos+xe.dp+xe.size>Ie.pmax&&(xe.del=!0,pt--)}}}for(;!ae&&re<=$;){for(re++,ae=!0,ue=0;ue<ie.length-1;){var ke=ie[ue],De=ie[ue+1],Ve=ke[ke.length-1],Ae=De[0];if(se=Ve.pos+Ve.dp+Ve.size-Ae.pos-Ae.dp+Ae.size,se>.01&&Ve.pmin===Ae.pmin&&Ve.pmax===Ae.pmax){for(ye=De.length-1;ye>=0;ye--)De[ye].dp+=se;for(ke.push.apply(ke,De),ie.splice(ue+1,1),me=0,ye=ke.length-1;ye>=0;ye--)me+=ke[ye].dp;for(_e=me/ke.length,ye=ke.length-1;ye>=0;ye--)ke[ye].dp-=_e;ae=!1}else ue++}ie.forEach(be)}for(ue=ie.length-1;ue>=0;ue--){var Le=ie[ue];for(ye=Le.length-1;ye>=0;ye--){var je=Le[ye],Ye=je.datum;Ye.offset=je.dp,Ye.del=je.del}}}function N(U,H,q,re){var j=function(ie){return ie*q},$=function(ie){return ie*re};U.each(function(ie){var oe=m.select(this);if(ie.del)return oe.remove();var ae=oe.select("text.nums"),se=ie.anchor,_e=se==="end"?-1:1,ue={start:1,end:-1,middle:0}[se],ye=ue*(w+h),xe=ye+ue*(ie.txwidth+h),me=0,be=ie.offset,ke=se==="middle";ke&&(ye-=ie.tx2width/2,xe+=ie.txwidth/2+h),H&&(be*=-p,me=ie.offset*_),oe.select("path").attr("d",ke?"M-"+j(ie.bx/2+ie.tx2width/2)+","+$(be-ie.by/2)+"h"+j(ie.bx)+"v"+$(ie.by)+"h-"+j(ie.bx)+"Z":"M0,0L"+j(_e*w+me)+","+$(w+be)+"v"+$(ie.by/2-w)+"h"+j(_e*ie.bx)+"v-"+$(ie.by)+"H"+j(_e*w+me)+"V"+$(be-w)+"Z");var De=me+ye,Ve=be+ie.ty0-ie.by/2+h,Ae=ie.textAlign||"auto";Ae!=="auto"&&(Ae==="left"&&se!=="start"?(ae.attr("text-anchor","start"),De=ke?-ie.bx/2-ie.tx2width/2+h:-ie.bx-h):Ae==="right"&&se!=="end"&&(ae.attr("text-anchor","end"),De=ke?ie.bx/2-ie.tx2width/2-h:ie.bx+h)),ae.call(n.positionText,j(De),$(Ve)),ie.tx2width&&(oe.select("text.name").call(n.positionText,j(xe+ue*h+me),$(be+ie.ty0-ie.by/2+h)),oe.select("rect").call(v.setRect,j(xe+(ue-1)*ie.tx2width/2+me),$(be-ie.by/2-1),j(ie.tx2width),$(ie.by+2)))})}function z(U,H){var q=U.index,re=U.trace||{},j=U.cd[0],$=U.cd[q]||{};function ie(ye){return ye||c(ye)&&ye===0}var oe=Array.isArray(q)?function(ye,xe){var me=T.castOption(j,q,ye);return ie(me)?me:T.extractOption({},re,"",xe)}:function(ye,xe){return T.extractOption($,re,ye,xe)};function ae(ye,xe,me){var be=oe(xe,me);ie(be)&&(U[ye]=be)}if(ae("hoverinfo","hi","hoverinfo"),ae("bgcolor","hbg","hoverlabel.bgcolor"),ae("borderColor","hbc","hoverlabel.bordercolor"),ae("fontFamily","htf","hoverlabel.font.family"),ae("fontSize","hts","hoverlabel.font.size"),ae("fontColor","htc","hoverlabel.font.color"),ae("nameLength","hnl","hoverlabel.namelength"),ae("textAlign","hta","hoverlabel.align"),U.posref=H==="y"||H==="closest"&&re.orientation==="h"?U.xa._offset+(U.x0+U.x1)/2:U.ya._offset+(U.y0+U.y1)/2,U.x0=T.constrain(U.x0,0,U.xa._length),U.x1=T.constrain(U.x1,0,U.xa._length),U.y0=T.constrain(U.y0,0,U.ya._length),U.y1=T.constrain(U.y1,0,U.ya._length),U.xLabelVal!==void 0&&(U.xLabel="xLabel"in U?U.xLabel:b.hoverLabelText(U.xa,U.xLabelVal,re.xhoverformat),U.xVal=U.xa.c2d(U.xLabelVal)),U.yLabelVal!==void 0&&(U.yLabel="yLabel"in U?U.yLabel:b.hoverLabelText(U.ya,U.yLabelVal,re.yhoverformat),U.yVal=U.ya.c2d(U.yLabelVal)),U.zLabelVal!==void 0&&U.zLabel===void 0&&(U.zLabel=String(U.zLabelVal)),!isNaN(U.xerr)&&!(U.xa.type==="log"&&U.xerr<=0)){var se=b.tickText(U.xa,U.xa.c2l(U.xerr),"hover").text;U.xerrneg!==void 0?U.xLabel+=" +"+se+" / -"+b.tickText(U.xa,U.xa.c2l(U.xerrneg),"hover").text:U.xLabel+=" \xB1 "+se,H==="x"&&(U.distance+=1)}if(!isNaN(U.yerr)&&!(U.ya.type==="log"&&U.yerr<=0)){var _e=b.tickText(U.ya,U.ya.c2l(U.yerr),"hover").text;U.yerrneg!==void 0?U.yLabel+=" +"+_e+" / -"+b.tickText(U.ya,U.ya.c2l(U.yerrneg),"hover").text:U.yLabel+=" \xB1 "+_e,H==="y"&&(U.distance+=1)}var ue=U.hoverinfo||U.trace.hoverinfo;return ue&&ue!=="all"&&(ue=Array.isArray(ue)?ue:ue.split("+"),ue.indexOf("x")===-1&&(U.xLabel=void 0),ue.indexOf("y")===-1&&(U.yLabel=void 0),ue.indexOf("z")===-1&&(U.zLabel=void 0),ue.indexOf("text")===-1&&(U.text=void 0),ue.indexOf("name")===-1&&(U.name=void 0)),U}function G(U,H,q){var re=q.container,j=q.fullLayout,$=j._size,ie=q.event,oe=!!H.hLinePoint,ae=!!H.vLinePoint,se,_e;if(re.selectAll(".spikeline").remove(),!!(ae||oe)){var ue=s.combine(j.plot_bgcolor,j.paper_bgcolor);if(oe){var ye=H.hLinePoint,xe,me;se=ye&&ye.xa,_e=ye&&ye.ya;var be=_e.spikesnap;be==="cursor"?(xe=ie.pointerX,me=ie.pointerY):(xe=se._offset+ye.x,me=_e._offset+ye.y);var ke=A.readability(ye.color,ue)<1.5?s.contrast(ue):ye.color,De=_e.spikemode,Ve=_e.spikethickness,Ae=_e.spikecolor||ke,Le=b.getPxPosition(U,_e),je,Ye;if(De.indexOf("toaxis")!==-1||De.indexOf("across")!==-1){if(De.indexOf("toaxis")!==-1&&(je=Le,Ye=xe),De.indexOf("across")!==-1){var ze=_e._counterDomainMin,Ie=_e._counterDomainMax;_e.anchor==="free"&&(ze=Math.min(ze,_e.position),Ie=Math.max(Ie,_e.position)),je=$.l+ze*$.w,Ye=$.l+Ie*$.w}re.insert("line",":first-child").attr({x1:je,x2:Ye,y1:me,y2:me,"stroke-width":Ve,stroke:Ae,"stroke-dasharray":v.dashStyle(_e.spikedash,Ve)}).classed("spikeline",!0).classed("crisp",!0),re.insert("line",":first-child").attr({x1:je,x2:Ye,y1:me,y2:me,"stroke-width":Ve+2,stroke:ue}).classed("spikeline",!0).classed("crisp",!0)}De.indexOf("marker")!==-1&&re.insert("circle",":first-child").attr({cx:Le+(_e.side!=="right"?Ve:-Ve),cy:me,r:Ve,fill:Ae}).classed("spikeline",!0)}if(ae){var We=H.vLinePoint,pt,Ft;se=We&&We.xa,_e=We&&We.ya;var Qt=se.spikesnap;Qt==="cursor"?(pt=ie.pointerX,Ft=ie.pointerY):(pt=se._offset+We.x,Ft=_e._offset+We.y);var zt=A.readability(We.color,ue)<1.5?s.contrast(ue):We.color,Et=se.spikemode,Xt=se.spikethickness,Nt=se.spikecolor||zt,Ct=b.getPxPosition(U,se),Xe,at;if(Et.indexOf("toaxis")!==-1||Et.indexOf("across")!==-1){if(Et.indexOf("toaxis")!==-1&&(Xe=Ct,at=Ft),Et.indexOf("across")!==-1){var Ge=se._counterDomainMin,Se=se._counterDomainMax;se.anchor==="free"&&(Ge=Math.min(Ge,se.position),Se=Math.max(Se,se.position)),Xe=$.t+(1-Se)*$.h,at=$.t+(1-Ge)*$.h}re.insert("line",":first-child").attr({x1:pt,x2:pt,y1:Xe,y2:at,"stroke-width":Xt,stroke:Nt,"stroke-dasharray":v.dashStyle(se.spikedash,Xt)}).classed("spikeline",!0).classed("crisp",!0),re.insert("line",":first-child").attr({x1:pt,x2:pt,y1:Xe,y2:at,"stroke-width":Xt+2,stroke:ue}).classed("spikeline",!0).classed("crisp",!0)}Et.indexOf("marker")!==-1&&re.insert("circle",":first-child").attr({cx:pt,cy:Ct-(se.side!=="top"?Xt:-Xt),r:Xt,fill:Nt}).classed("spikeline",!0)}}}function Y(U,H,q){if(!q||q.length!==U._hoverdata.length)return!0;for(var re=q.length-1;re>=0;re--){var j=q[re],$=U._hoverdata[re];if(j.curveNumber!==$.curveNumber||String(j.pointNumber)!==String($.pointNumber)||String(j.pointNumbers)!==String($.pointNumbers))return!0}return!1}function ee(U,H){return!H||H.vLinePoint!==U._spikepoints.vLinePoint||H.hLinePoint!==U._spikepoints.hLinePoint}function Z(U,H){return n.plainText(U||"",{len:H,allowedTags:["br","sub","sup","b","i","em"]})}function X(U,H){for(var q=H.charAt(0),re=[],j=[],$=[],ie=0;ie<U.length;ie++){var oe=U[ie];g.traceIs(oe.trace,"bar-like")||g.traceIs(oe.trace,"box-violin")?$.push(oe):oe.trace[q+"period"]?j.push(oe):re.push(oe)}return re.concat(j).concat($)}function ne(U,H,q){var re=H[U+"a"],j=H[U+"Val"],$=H.cd[0];if(re.type==="category"||re.type==="multicategory")j=re._categoriesMap[j];else if(re.type==="date"){var ie=H.trace[U+"periodalignment"];if(ie){var oe=H.cd[H.index],ae=oe[U+"Start"];ae===void 0&&(ae=oe[U]);var se=oe[U+"End"];se===void 0&&(se=oe[U]);var _e=se-ae;ie==="end"?j+=_e:ie==="middle"&&(j+=_e/2)}j=re.d2c(j)}return $&&$.t&&$.t.posLetter===re._id&&(q.boxmode==="group"||q.violinmode==="group")&&(j+=$.t.dPos),j}function ce(U){return U.offsetTop+U.clientTop}function Q(U){return U.offsetLeft+U.clientLeft}function K(U,H){var q=U._fullLayout,re=H.getBoundingClientRect(),j=re.x,$=re.y,ie=j+re.width,oe=$+re.height,ae=T.apply3DTransform(q._invTransform)(j,$),se=T.apply3DTransform(q._invTransform)(ie,oe),_e=ae[0],ue=ae[1],ye=se[0],xe=se[1];return{x:_e,y:ue,width:ye-_e,height:xe-ue,top:Math.min(ue,xe),left:Math.min(_e,ye),right:Math.max(_e,ye),bottom:Math.max(ue,xe)}}},{"../../lib":515,"../../lib/events":504,"../../lib/override_cursor":526,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../registry":647,"../color":367,"../dragelement":386,"../drawing":389,"../legend/defaults":419,"../legend/draw":420,"./constants":401,"./helpers":403,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:313}],405:[function(t,B,V){var m=t("../../lib"),c=t("../color"),A=t("./helpers").isUnifiedHover;B.exports=function(e,a,i,n){n=n||{};var r=a.legend;function v(s){n.font[s]||(n.font[s]=r?a.legend.font[s]:a.font[s])}a&&A(a.hovermode)&&(n.font||(n.font={}),v("size"),v("family"),v("color"),r?(n.bgcolor||(n.bgcolor=c.combine(a.legend.bgcolor,a.paper_bgcolor)),n.bordercolor||(n.bordercolor=a.legend.bordercolor)):n.bgcolor||(n.bgcolor=a.paper_bgcolor)),i("hoverlabel.bgcolor",n.bgcolor),i("hoverlabel.bordercolor",n.bordercolor),i("hoverlabel.namelength",n.namelength),m.coerceFont(i,"hoverlabel.font",n.font),i("hoverlabel.align",n.align)}},{"../../lib":515,"../color":367,"./helpers":403}],406:[function(t,B,V){var m=t("../../lib"),c=t("./layout_attributes");B.exports=function(T,e){function a(i,n){return e[i]!==void 0?e[i]:m.coerce(T,e,c,i,n)}return a("clickmode"),a("hovermode")}},{"../../lib":515,"./layout_attributes":408}],407:[function(t,B,V){var m=t("@plotly/d3"),c=t("../../lib"),A=t("../dragelement"),T=t("./helpers"),e=t("./layout_attributes"),a=t("./hover");B.exports={moduleType:"component",name:"fx",constants:t("./constants"),schema:{layout:e},attributes:t("./attributes"),layoutAttributes:e,supplyLayoutGlobalDefaults:t("./layout_global_defaults"),supplyDefaults:t("./defaults"),supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc"),getDistanceFunction:T.getDistanceFunction,getClosest:T.getClosest,inbox:T.inbox,quadrature:T.quadrature,appendArrayPointValue:T.appendArrayPointValue,castHoverOption:n,castHoverinfo:r,hover:a.hover,unhover:A.unhover,loneHover:a.loneHover,loneUnhover:i,click:t("./click")};function i(v){var s=c.isD3Selection(v)?v:m.select(v);s.selectAll("g.hovertext").remove(),s.selectAll(".spikeline").remove()}function n(v,s,o){return c.castOption(v,s,"hoverlabel."+o)}function r(v,s,o){function b(g){return c.coerceHoverinfo({hoverinfo:g},{_module:v._module},s)}return c.castOption(v,o,"hoverinfo",b)}},{"../../lib":515,"../dragelement":386,"./attributes":398,"./calc":399,"./click":400,"./constants":401,"./defaults":402,"./helpers":403,"./hover":404,"./layout_attributes":408,"./layout_defaults":409,"./layout_global_defaults":410,"@plotly/d3":58}],408:[function(t,B,V){var m=t("./constants"),c=t("../../plots/font_attributes"),A=c({editType:"none"});A.family.dflt=m.HOVERFONT,A.size.dflt=m.HOVERFONTSIZE,B.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:A,grouptitlefont:c({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":594,"./constants":401}],409:[function(t,B,V){var m=t("../../lib"),c=t("./layout_attributes"),A=t("./hovermode_defaults"),T=t("./hoverlabel_defaults");B.exports=function(a,i){function n(g,d){return m.coerce(a,i,c,g,d)}var r=A(a,i);r&&(n("hoverdistance"),n("spikedistance"));var v=n("dragmode");v==="select"&&n("selectdirection");var s=i._has("mapbox"),o=i._has("geo"),b=i._basePlotModules.length;i.dragmode==="zoom"&&((s||o)&&b===1||s&&o&&b===2)&&(i.dragmode="pan"),T(a,i,n),m.coerceFont(n,"hoverlabel.grouptitlefont",i.hoverlabel.font)}},{"../../lib":515,"./hoverlabel_defaults":405,"./hovermode_defaults":406,"./layout_attributes":408}],410:[function(t,B,V){var m=t("../../lib"),c=t("./hoverlabel_defaults"),A=t("./layout_attributes");B.exports=function(e,a){function i(n,r){return m.coerce(e,a,A,n,r)}c(e,a,i)}},{"../../lib":515,"./hoverlabel_defaults":405,"./layout_attributes":408}],411:[function(t,B,V){var m=t("../../lib"),c=t("../../lib/regex").counter,A=t("../../plots/domain").attributes,T=t("../../plots/cartesian/constants").idRegex,e=t("../../plot_api/plot_template"),a={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[c("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[T.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[T.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:A({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function i(o,b,g){var d=b[g+"axes"],f=Object.keys((o._splomAxes||{})[g]||{});if(Array.isArray(d))return d;if(f.length)return f}function n(o,b){var g=o.grid||{},d=i(b,g,"x"),f=i(b,g,"y");if(!o.grid&&!d&&!f)return;var y=Array.isArray(g.subplots)&&Array.isArray(g.subplots[0]),l=Array.isArray(d),x=Array.isArray(f),u=l&&d!==g.xaxes&&x&&f!==g.yaxes,M,_;y?(M=g.subplots.length,_=g.subplots[0].length):(x&&(M=f.length),l&&(_=d.length));var p=e.newContainer(b,"grid");function w(N,z){return m.coerce(g,p,a,N,z)}var h=w("rows",M),L=w("columns",_);if(!(h*L>1)){delete b.grid;return}if(!y&&!l&&!x){var S=w("pattern")==="independent";S&&(y=!0)}p._hasSubplotGrid=y;var E=w("roworder"),P=E==="top to bottom",F=y?.2:.1,I=y?.3:.1,D,R;u&&b._splomGridDflt&&(D=b._splomGridDflt.xside,R=b._splomGridDflt.yside),p._domains={x:r("x",w,F,D,L),y:r("y",w,I,R,h,P)}}function r(o,b,g,d,f,y){var l=b(o+"gap",g),x=b("domain."+o);b(o+"side",d);for(var u=new Array(f),M=x[0],_=(x[1]-M)/(f-l),p=_*(1-l),w=0;w<f;w++){var h=M+_*w;u[y?f-1-w:w]=[h,h+p]}return u}function v(o,b){var g=b.grid;if(!(!g||!g._domains)){var d=o.grid||{},f=b._subplots,y=g._hasSubplotGrid,l=g.rows,x=g.columns,u=g.pattern==="independent",M,_,p,w,h,L,S,E=g._axisMap={};if(y){var P=d.subplots||[];L=g.subplots=new Array(l);var F=1;for(M=0;M<l;M++){var I=L[M]=new Array(x),D=P[M]||[];for(_=0;_<x;_++)if(u?(h=F===1?"xy":"x"+F+"y"+F,F++):h=D[_],I[_]="",f.cartesian.indexOf(h)!==-1){if(S=h.indexOf("y"),p=h.slice(0,S),w=h.slice(S),E[p]!==void 0&&E[p]!==_||E[w]!==void 0&&E[w]!==M)continue;I[_]=h,E[p]=_,E[w]=M}}}else{var R=i(b,d,"x"),N=i(b,d,"y");g.xaxes=s(R,f.xaxis,x,E,"x"),g.yaxes=s(N,f.yaxis,l,E,"y")}var z=g._anchors={},G=g.roworder==="top to bottom";for(var Y in E){var ee=Y.charAt(0),Z=g[ee+"side"],X,ne,ce;if(Z.length<8)z[Y]="free";else if(ee==="x"){if(Z.charAt(0)==="t"===G?(X=0,ne=1,ce=l):(X=l-1,ne=-1,ce=-1),y){var Q=E[Y];for(M=X;M!==ce;M+=ne)if(h=L[M][Q],!!h&&(S=h.indexOf("y"),h.slice(0,S)===Y)){z[Y]=h.slice(S);break}}else for(M=X;M!==ce;M+=ne)if(w=g.yaxes[M],f.cartesian.indexOf(Y+w)!==-1){z[Y]=w;break}}else if(Z.charAt(0)==="l"?(X=0,ne=1,ce=x):(X=x-1,ne=-1,ce=-1),y){var K=E[Y];for(M=X;M!==ce;M+=ne)if(h=L[K][M],!!h&&(S=h.indexOf("y"),h.slice(S)===Y)){z[Y]=h.slice(0,S);break}}else for(M=X;M!==ce;M+=ne)if(p=g.xaxes[M],f.cartesian.indexOf(p+Y)!==-1){z[Y]=p;break}}}}function s(o,b,g,d,f){var y=new Array(g),l;function x(u,M){b.indexOf(M)!==-1&&d[M]===void 0?(y[u]=M,d[M]=u):y[u]=""}if(Array.isArray(o))for(l=0;l<g;l++)x(l,o[l]);else for(x(0,f),l=1;l<g;l++)x(l,f+(l+1));return y}B.exports={moduleType:"component",name:"grid",schema:{layout:{grid:a}},layoutAttributes:a,sizeDefaults:n,contentDefaults:v}},{"../../lib":515,"../../lib/regex":532,"../../plot_api/plot_template":555,"../../plots/cartesian/constants":573,"../../plots/domain":593}],412:[function(t,B,V){var m=t("../../plots/cartesian/constants"),c=t("../../plot_api/plot_template").templatedArray;t("../../constants/axis_placeable_objects"),B.exports=c("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",m.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",m.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":484,"../../plot_api/plot_template":555,"../../plots/cartesian/constants":573}],413:[function(t,B,V){var m=t("fast-isnumeric"),c=t("../../lib/to_log_range");B.exports=function(T,e,a,i){e=e||{};var n=a==="log"&&e.type==="linear",r=a==="linear"&&e.type==="log";if(!!(n||r)){for(var v=T._fullLayout.images,s=e._id.charAt(0),o,b,g=0;g<v.length;g++)if(o=v[g],b="images["+g+"].",o[s+"ref"]===e._id){var d=o[s],f=o["size"+s],y=null,l=null;if(n){y=c(d,e.range);var x=f/Math.pow(10,y)/2;l=2*Math.log(x+Math.sqrt(1+x*x))/Math.LN10}else y=Math.pow(10,d),l=y*(Math.pow(10,f/2)-Math.pow(10,-f/2));m(y)?m(l)||(l=null):(y=null,l=null),i(b+s,y),i(b+"size"+s,l)}}}},{"../../lib/to_log_range":543,"fast-isnumeric":190}],414:[function(t,B,V){var m=t("../../lib"),c=t("../../plots/cartesian/axes"),A=t("../../plots/array_container_defaults"),T=t("./attributes"),e="images";B.exports=function(n,r){var v={name:e,handleItemDefaults:a};A(n,r,v)};function a(i,n,r){function v(x,u){return m.coerce(i,n,T,x,u)}var s=v("source"),o=v("visible",!!s);if(!o)return n;v("layer"),v("xanchor"),v("yanchor"),v("sizex"),v("sizey"),v("sizing"),v("opacity");for(var b={_fullLayout:r},g=["x","y"],d=0;d<2;d++){var f=g[d],y=c.coerceRef(i,n,b,f,"paper",void 0);if(y!=="paper"){var l=c.getFromId(b,y);l._imgIndices.push(n._index)}c.coercePosition(n,b,v,y,f,0)}return n}},{"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"./attributes":412}],415:[function(t,B,V){var m=t("@plotly/d3"),c=t("../drawing"),A=t("../../plots/cartesian/axes"),T=t("../../plots/cartesian/axis_ids"),e=t("../../constants/xmlns_namespaces");B.exports=function(i){var n=i._fullLayout,r=[],v={},s=[],o,b;for(b=0;b<n.images.length;b++){var g=n.images[b];if(g.visible)if(g.layer==="below"&&g.xref!=="paper"&&g.yref!=="paper"){o=T.ref2id(g.xref)+T.ref2id(g.yref);var d=n._plots[o];if(!d){s.push(g);continue}d.mainplot&&(o=d.mainplot.id),v[o]||(v[o]=[]),v[o].push(g)}else g.layer==="above"?r.push(g):s.push(g)}var f={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-1/2},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-1/2},bottom:{sizing:"YMax",offset:-1}}};function y(w){var h=m.select(this);if(this._imgSrc!==w.source)if(h.attr("xmlns",e.svg),w.source&&w.source.slice(0,5)==="data:")h.attr("xlink:href",w.source),this._imgSrc=w.source;else{var L=new Promise(function(S){var E=new Image;this.img=E,E.setAttribute("crossOrigin","anonymous"),E.onerror=P,E.onload=function(){var F=document.createElement("canvas");F.width=this.width,F.height=this.height;var I=F.getContext("2d",{willReadFrequently:!0});I.drawImage(this,0,0);var D=F.toDataURL("image/png");h.attr("xlink:href",D),S()},h.on("error",P),E.src=w.source,this._imgSrc=w.source;function P(){h.remove(),S()}}.bind(this));i._promises.push(L)}}function l(w){var h=m.select(this),L=A.getFromId(i,w.xref),S=A.getFromId(i,w.yref),E=A.getRefType(w.xref)==="domain",P=A.getRefType(w.yref)==="domain",F=n._size,I,D;L!==void 0?I=typeof w.xref=="string"&&E?L._length*w.sizex:Math.abs(L.l2p(w.sizex)-L.l2p(0)):I=w.sizex*F.w,S!==void 0?D=typeof w.yref=="string"&&P?S._length*w.sizey:Math.abs(S.l2p(w.sizey)-S.l2p(0)):D=w.sizey*F.h;var R=I*f.x[w.xanchor].offset,N=D*f.y[w.yanchor].offset,z=f.x[w.xanchor].sizing+f.y[w.yanchor].sizing,G,Y;switch(L!==void 0?G=typeof w.xref=="string"&&E?L._length*w.x+L._offset:L.r2p(w.x)+L._offset:G=w.x*F.w+F.l,G+=R,S!==void 0?Y=typeof w.yref=="string"&&P?S._length*(1-w.y)+S._offset:S.r2p(w.y)+S._offset:Y=F.h-w.y*F.h+F.t,Y+=N,w.sizing){case"fill":z+=" slice";break;case"stretch":z="none";break}h.attr({x:G,y:Y,width:I,height:D,preserveAspectRatio:z,opacity:w.opacity});var ee=L&&A.getRefType(w.xref)!=="domain"?L._id:"",Z=S&&A.getRefType(w.yref)!=="domain"?S._id:"",X=ee+Z;c.setClipUrl(h,X?"clip"+n._uid+X:null,i)}var x=n._imageLowerLayer.selectAll("image").data(s),u=n._imageUpperLayer.selectAll("image").data(r);x.enter().append("image"),u.enter().append("image"),x.exit().remove(),u.exit().remove(),x.each(function(w){y.bind(this)(w),l.bind(this)(w)}),u.each(function(w){y.bind(this)(w),l.bind(this)(w)});var M=Object.keys(n._plots);for(b=0;b<M.length;b++){o=M[b];var _=n._plots[o];if(!!_.imagelayer){var p=_.imagelayer.selectAll("image").data(v[o]||[]);p.enter().append("image"),p.exit().remove(),p.each(function(w){y.bind(this)(w),l.bind(this)(w)})}}}},{"../../constants/xmlns_namespaces":492,"../../plots/cartesian/axes":566,"../../plots/cartesian/axis_ids":570,"../drawing":389,"@plotly/d3":58}],416:[function(t,B,V){B.exports={moduleType:"component",name:"images",layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),includeBasePlot:t("../../plots/cartesian/include_components")("images"),draw:t("./draw"),convertCoords:t("./convert_coords")}},{"../../plots/cartesian/include_components":577,"./attributes":412,"./convert_coords":413,"./defaults":414,"./draw":415}],417:[function(t,B,V){var m=t("../../plots/font_attributes"),c=t("../color/attributes");B.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:c.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:m({editType:"legend"}),grouptitlefont:m({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},entrywidth:{valType:"number",min:0,editType:"legend"},entrywidthmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",min:-2,max:3,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:m({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":594,"../color/attributes":366}],418:[function(t,B,V){B.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},{}],419:[function(t,B,V){var m=t("../../registry"),c=t("../../lib"),A=t("../../plot_api/plot_template"),T=t("../../plots/attributes"),e=t("./attributes"),a=t("../../plots/layout_attributes"),i=t("./helpers");B.exports=function(r,v,s){var o=r.legend||{},b=A.newContainer(v,"legend");function g(D,R){return c.coerce(o,b,e,D,R)}for(var d,f=function(D,R){var N=d._input,z=d;return c.coerce(N,z,T,D,R)},y=v.font||{},l=c.coerceFont(g,"grouptitlefont",c.extendFlat({},y,{size:Math.round(y.size*1.1)})),x=0,u=!1,M="normal",_=0;_<s.length;_++)d=s[_],d.visible&&((d.showlegend||d._dfltShowLegend&&!(d._module&&d._module.attributes&&d._module.attributes.showlegend&&d._module.attributes.showlegend.dflt===!1))&&(x++,d.showlegend&&(u=!0,(m.traceIs(d,"pie-like")||d._input.showlegend===!0)&&x++),c.coerceFont(f,"legendgrouptitle.font",l)),(m.traceIs(d,"bar")&&v.barmode==="stack"||["tonextx","tonexty"].indexOf(d.fill)!==-1)&&(M=i.isGrouped({traceorder:M})?"grouped+reversed":"reversed"),d.legendgroup!==void 0&&d.legendgroup!==""&&(M=i.isReversed({traceorder:M})?"reversed+grouped":"grouped"));var p=c.coerce(r,v,a,"showlegend",u&&x>1);if(p===!1&&(v.legend=void 0),!(p===!1&&!o.uirevision)&&(g("uirevision",v.uirevision),p!==!1)){g("bgcolor",v.paper_bgcolor),g("bordercolor"),g("borderwidth");var w=c.coerceFont(g,"font",v.font),h=g("orientation"),L=h==="h",S,E,P;L?(S=0,m.getComponentMethod("rangeslider","isVisible")(r.xaxis)?(E=1.1,P="bottom"):(E=-.1,P="top")):(S=1.02,E=1,P="auto"),g("traceorder",M),i.isGrouped(v.legend)&&g("tracegroupgap"),g("entrywidth"),g("entrywidthmode"),g("itemsizing"),g("itemwidth"),g("itemclick"),g("itemdoubleclick"),g("groupclick"),g("x",S),g("xanchor"),g("y",E),g("yanchor",P),g("valign"),c.noneOrAll(o,b,["x","y"]);var F=g("title.text");if(F){g("title.side",L?"left":"top");var I=c.extendFlat({},w,{size:c.bigFont(w.size)});c.coerceFont(g,"title.font",I)}}}},{"../../lib":515,"../../plot_api/plot_template":555,"../../plots/attributes":562,"../../plots/layout_attributes":619,"../../registry":647,"./attributes":417,"./helpers":423}],420:[function(t,B,V){var m=t("@plotly/d3"),c=t("../../lib"),A=t("../../plots/plots"),T=t("../../registry"),e=t("../../lib/events"),a=t("../dragelement"),i=t("../drawing"),n=t("../color"),r=t("../../lib/svg_text_utils"),v=t("./handle_click"),s=t("./constants"),o=t("../../constants/alignment"),b=o.LINE_SPACING,g=o.FROM_TL,d=o.FROM_BR,f=t("./get_legend_data"),y=t("./style"),l=t("./helpers"),x=1;B.exports=function(N,z){return z||(z=N._fullLayout.legend||{}),u(N,z)};function u(R,N){var z=R._fullLayout,G="legend"+z._uid,Y,ee=N._inHover;if(ee?(Y=N.layer,G+="-hover"):Y=z._infolayer,!!Y){R._legendMouseDownTime||(R._legendMouseDownTime=0);var Z;if(ee){if(!N.entries)return;Z=f(N.entries,N)}else{if(!R.calcdata)return;Z=z.showlegend&&f(R.calcdata,N)}var X=z.hiddenlabels||[];if(!ee&&(!z.showlegend||!Z.length))return Y.selectAll(".legend").remove(),z._topdefs.select("#"+G).remove(),A.autoMargin(R,"legend");var ne=c.ensureSingle(Y,"g","legend",function($){ee||$.attr("pointer-events","all")}),ce=c.ensureSingleById(z._topdefs,"clipPath",G,function($){$.append("rect")}),Q=c.ensureSingle(ne,"rect","bg",function($){$.attr("shape-rendering","crispEdges")});Q.call(n.stroke,N.bordercolor).call(n.fill,N.bgcolor).style("stroke-width",N.borderwidth+"px");var K=c.ensureSingle(ne,"g","scrollbox"),U=N.title;if(N._titleWidth=0,N._titleHeight=0,U.text){var H=c.ensureSingle(K,"text","legendtitletext");H.attr("text-anchor","start").call(i.font,U.font).text(U.text),L(H,K,R,N,x)}else K.selectAll(".legendtitletext").remove();var q=c.ensureSingle(ne,"rect","scrollbar",function($){$.attr(s.scrollBarEnterAttrs).call(n.fill,s.scrollBarColor)}),re=K.selectAll("g.groups").data(Z);re.enter().append("g").attr("class","groups"),re.exit().remove();var j=re.selectAll("g.traces").data(c.identity);j.enter().append("g").attr("class","traces"),j.exit().remove(),j.style("opacity",function($){var ie=$[0].trace;return T.traceIs(ie,"pie-like")?X.indexOf($[0].label)!==-1?.5:1:ie.visible==="legendonly"?.5:1}).each(function(){m.select(this).call(p,R,N)}).call(y,R,N).each(function(){ee||m.select(this).call(h,R)}),c.syncOrAsync([A.previousPromises,function(){return P(R,re,j,N)},function(){var $=z._size,ie=N.borderwidth;if(!ee){var oe=F(R);if(oe)return;var ae=$.l+$.w*N.x-g[I(N)]*N._width,se=$.t+$.h*(1-N.y)-g[D(N)]*N._effHeight;if(z.margin.autoexpand){var _e=ae,ue=se;ae=c.constrain(ae,0,z.width-N._width),se=c.constrain(se,0,z.height-N._effHeight),ae!==_e&&c.log("Constrain legend.x to make legend fit inside graph"),se!==ue&&c.log("Constrain legend.y to make legend fit inside graph")}i.setTranslate(ne,ae,se)}if(q.on(".drag",null),ne.on("wheel",null),ee||N._height<=N._maxHeight||R._context.staticPlot){var ye=N._effHeight;ee&&(ye=N._height),Q.attr({width:N._width-ie,height:ye-ie,x:ie/2,y:ie/2}),i.setTranslate(K,0,0),ce.select("rect").attr({width:N._width-2*ie,height:ye-2*ie,x:ie,y:ie}),i.setClipUrl(K,G,R),i.setRect(q,0,0,0,0),delete N._scrollY}else{var xe=Math.max(s.scrollBarMinHeight,N._effHeight*N._effHeight/N._height),me=N._effHeight-xe-2*s.scrollBarMargin,be=N._height-N._effHeight,ke=me/be,De=Math.min(N._scrollY||0,be);Q.attr({width:N._width-2*ie+s.scrollBarWidth+s.scrollBarMargin,height:N._effHeight-ie,x:ie/2,y:ie/2}),ce.select("rect").attr({width:N._width-2*ie+s.scrollBarWidth+s.scrollBarMargin,height:N._effHeight-2*ie,x:ie,y:ie+De}),i.setClipUrl(K,G,R),We(De,xe,ke),ne.on("wheel",function(){De=c.constrain(N._scrollY+m.event.deltaY/me*be,0,be),We(De,xe,ke),De!==0&&De!==be&&m.event.preventDefault()});var Ve,Ae,Le,je=function(Et,Xt,Nt){var Ct=(Nt-Xt)/ke+Et;return c.constrain(Ct,0,be)},Ye=function(Et,Xt,Nt){var Ct=(Xt-Nt)/ke+Et;return c.constrain(Ct,0,be)},ze=m.behavior.drag().on("dragstart",function(){var Et=m.event.sourceEvent;Et.type==="touchstart"?Ve=Et.changedTouches[0].clientY:Ve=Et.clientY,Le=De}).on("drag",function(){var Et=m.event.sourceEvent;Et.buttons===2||Et.ctrlKey||(Et.type==="touchmove"?Ae=Et.changedTouches[0].clientY:Ae=Et.clientY,De=je(Le,Ve,Ae),We(De,xe,ke))});q.call(ze);var Ie=m.behavior.drag().on("dragstart",function(){var Et=m.event.sourceEvent;Et.type==="touchstart"&&(Ve=Et.changedTouches[0].clientY,Le=De)}).on("drag",function(){var Et=m.event.sourceEvent;Et.type==="touchmove"&&(Ae=Et.changedTouches[0].clientY,De=Ye(Le,Ve,Ae),We(De,xe,ke))});K.call(Ie)}function We(Et,Xt,Nt){N._scrollY=R._fullLayout.legend._scrollY=Et,i.setTranslate(K,0,-Et),i.setRect(q,N._width,s.scrollBarMargin+Et*Nt,s.scrollBarWidth,Xt),ce.select("rect").attr("y",ie+Et)}if(R._context.edits.legendPosition){var pt,Ft,Qt,zt;ne.classed("cursor-move",!0),a.init({element:ne.node(),gd:R,prepFn:function(){var Et=i.getTranslate(ne);Qt=Et.x,zt=Et.y},moveFn:function(Et,Xt){var Nt=Qt+Et,Ct=zt+Xt;i.setTranslate(ne,Nt,Ct),pt=a.align(Nt,0,$.l,$.l+$.w,N.xanchor),Ft=a.align(Ct,0,$.t+$.h,$.t,N.yanchor)},doneFn:function(){pt!==void 0&&Ft!==void 0&&T.call("_guiRelayout",R,{"legend.x":pt,"legend.y":Ft})},clickFn:function(Et,Xt){var Nt=Y.selectAll("g.traces").filter(function(){var Ct=this.getBoundingClientRect();return Xt.clientX>=Ct.left&&Xt.clientX<=Ct.right&&Xt.clientY>=Ct.top&&Xt.clientY<=Ct.bottom});Nt.size()>0&&_(R,ne,Nt,Et,Xt)}})}}],R)}}function M(R,N,z){var G=R[0],Y=G.width,ee=N.entrywidthmode,Z=G.trace.legendwidth||N.entrywidth;return ee==="fraction"?N._maxWidth*Z:z+(Z||Y)}function _(R,N,z,G,Y){var ee=z.data()[0][0].trace,Z={event:Y,node:z.node(),curveNumber:ee.index,expandedIndex:ee._expandedIndex,data:R.data,layout:R.layout,frames:R._transitionData._frames,config:R._context,fullData:R._fullData,fullLayout:R._fullLayout};ee._group&&(Z.group=ee._group),T.traceIs(ee,"pie-like")&&(Z.label=z.datum()[0].label);var X=e.triggerHandler(R,"plotly_legendclick",Z);if(X!==!1){if(G===1)N._clickTimeout=setTimeout(function(){!R._fullLayout||v(z,R,G)},R._context.doubleClickDelay);else if(G===2){N._clickTimeout&&clearTimeout(N._clickTimeout),R._legendMouseDownTime=0;var ne=e.triggerHandler(R,"plotly_legenddoubleclick",Z);ne!==!1&&v(z,R,G)}}}function p(R,N,z){var G=R.data()[0][0],Y=G.trace,ee=T.traceIs(Y,"pie-like"),Z=!z._inHover&&N._context.edits.legendText&&!ee,X=z._maxNameLength,ne,ce;G.groupTitle?(ne=G.groupTitle.text,ce=G.groupTitle.font):(ce=z.font,z.entries?ne=G.text:(ne=ee?G.label:Y.name,Y._meta&&(ne=c.templateString(ne,Y._meta))));var Q=c.ensureSingle(R,"text","legendtext");Q.attr("text-anchor","start").call(i.font,ce).text(Z?w(ne,X):ne);var K=z.itemwidth+s.itemGap*2;r.positionText(Q,K,0),Z?Q.call(r.makeEditable,{gd:N,text:ne}).call(L,R,N,z).on("edit",function(U){this.text(w(U,X)).call(L,R,N,z);var H=G.trace._fullInput||{},q={};if(T.hasTransform(H,"groupby")){var re=T.getTransformIndices(H,"groupby"),j=re[re.length-1],$=c.keyedContainer(H,"transforms["+j+"].styles","target","value.name");$.set(G.trace._group,U),q=$.constructUpdate()}else q.name=U;return T.call("_guiRestyle",N,q,Y.index)}):L(Q,R,N,z)}function w(R,N){var z=Math.max(4,N);if(R&&R.trim().length>=z/2)return R;R=R||"";for(var G=z-R.length;G>0;G--)R+=" ";return R}function h(R,N){var z=N._context.doubleClickDelay,G,Y=1,ee=c.ensureSingle(R,"rect","legendtoggle",function(Z){N._context.staticPlot||Z.style("cursor","pointer").attr("pointer-events","all"),Z.call(n.fill,"rgba(0,0,0,0)")});N._context.staticPlot||(ee.on("mousedown",function(){G=new Date().getTime(),G-N._legendMouseDownTime<z?Y+=1:(Y=1,N._legendMouseDownTime=G)}),ee.on("mouseup",function(){if(!(N._dragged||N._editing)){var Z=N._fullLayout.legend;new Date().getTime()-N._legendMouseDownTime>z&&(Y=Math.max(Y-1,1)),_(N,Z,R,Y,m.event)}}))}function L(R,N,z,G,Y){G._inHover&&R.attr("data-notex",!0),r.convertToTspans(R,z,function(){S(N,z,G,Y)})}function S(R,N,z,G){var Y=R.data()[0][0];if(!z._inHover&&Y&&!Y.trace.showlegend){R.remove();return}var ee=R.select("g[class*=math-group]"),Z=ee.node();z||(z=N._fullLayout.legend);var X=z.borderwidth,ne;G===x?ne=z.title.font:Y.groupTitle?ne=Y.groupTitle.font:ne=z.font;var ce=ne.size*b,Q,K;if(Z){var U=i.bBox(Z);Q=U.height,K=U.width,G===x?i.setTranslate(ee,X,X+Q*.75):i.setTranslate(ee,0,Q*.25)}else{var H=R.select(G===x?".legendtitletext":".legendtext"),q=r.lineCount(H),re=H.node();if(Q=ce*q,K=re?i.bBox(re).width:0,G===x)z.title.side==="left"&&(K+=s.itemGap*2),r.positionText(H,X+s.titlePad,X+ce);else{var j=s.itemGap*2+z.itemwidth;Y.groupTitle&&(j=s.itemGap,K-=z.itemwidth),r.positionText(H,j,-ce*((q-1)/2-.3))}}G===x?(z._titleWidth=K,z._titleHeight=Q):(Y.lineHeight=ce,Y.height=Math.max(Q,16)+3,Y.width=K)}function E(R){var N=0,z=0,G=R.title.side;return G&&(G.indexOf("left")!==-1&&(N=R._titleWidth),G.indexOf("top")!==-1&&(z=R._titleHeight)),[N,z]}function P(R,N,z,G){var Y=R._fullLayout;G||(G=Y.legend);var ee=Y._size,Z=l.isVertical(G),X=l.isGrouped(G),ne=G.entrywidthmode==="fraction",ce=G.borderwidth,Q=2*ce,K=s.itemGap,U=G.itemwidth+K*2,H=2*(ce+K),q=D(G),re=G.y<0||G.y===0&&q==="top",j=G.y>1||G.y===1&&q==="bottom",$=G.tracegroupgap,ie={};G._maxHeight=Math.max(re||j?Y.height/2:ee.h,30);var oe=0;G._width=0,G._height=0;var ae=E(G);if(Z)z.each(function(Qt){var zt=Qt[0].height;i.setTranslate(this,ce+ae[0],ce+ae[1]+G._height+zt/2+K),G._height+=zt,G._width=Math.max(G._width,Qt[0].width)}),oe=U+G._width,G._width+=K+U+Q,G._height+=H,X&&(N.each(function(Qt,zt){i.setTranslate(this,0,zt*G.tracegroupgap)}),G._height+=(G._lgroupsLength-1)*G.tracegroupgap);else{var se=I(G),_e=G.x<0||G.x===0&&se==="right",ue=G.x>1||G.x===1&&se==="left",ye=j||re,xe=Y.width/2;G._maxWidth=Math.max(_e?ye&&se==="left"?ee.l+ee.w:xe:ue?ye&&se==="right"?ee.r+ee.w:xe:ee.w,2*U);var me=0,be=0;z.each(function(Qt){var zt=M(Qt,G,U);me=Math.max(me,zt),be+=zt}),oe=null;var ke=0;if(X){var De=0,Ve=0,Ae=0;N.each(function(){var Qt=0,zt=0;m.select(this).selectAll("g.traces").each(function(Xt){var Nt=M(Xt,G,U),Ct=Xt[0].height;i.setTranslate(this,ae[0],ae[1]+ce+K+Ct/2+zt),zt+=Ct,Qt=Math.max(Qt,Nt),ie[Xt[0].trace.legendgroup]=Qt});var Et=Qt+K;Ve>0&&Et+ce+Ve>G._maxWidth?(ke=Math.max(ke,Ve),Ve=0,Ae+=De+$,De=zt):De=Math.max(De,zt),i.setTranslate(this,Ve,Ae),Ve+=Et}),G._width=Math.max(ke,Ve)+ce,G._height=Ae+De+H}else{var Le=z.size(),je=be+Q+(Le-1)*K<G._maxWidth,Ye=0,ze=0,Ie=0,We=0;z.each(function(Qt){var zt=Qt[0].height,Et=M(Qt,G,U),Xt=je?Et:me;ne||(Xt+=K),Xt+ce+ze-K>=G._maxWidth&&(ke=Math.max(ke,We),ze=0,Ie+=Ye,G._height+=Ye,Ye=0),i.setTranslate(this,ae[0]+ce+ze,ae[1]+ce+Ie+zt/2+K),We=ze+Et+K,ze+=Xt,Ye=Math.max(Ye,zt)}),je?(G._width=ze+Q,G._height=Ye+H):(G._width=Math.max(ke,We)+Q,G._height+=Ye+H)}}G._width=Math.ceil(Math.max(G._width+ae[0],G._titleWidth+2*(ce+s.titlePad))),G._height=Math.ceil(Math.max(G._height+ae[1],G._titleHeight+2*(ce+s.itemGap))),G._effHeight=Math.min(G._height,G._maxHeight);var pt=R._context.edits,Ft=pt.legendText||pt.legendPosition;z.each(function(Qt){var zt=m.select(this).select(".legendtoggle"),Et=Qt[0].height,Xt=Qt[0].trace.legendgroup,Nt=M(Qt,G,U);X&&Xt!==""&&(Nt=ie[Xt]);var Ct=Ft?U:oe||Nt;!Z&&!ne&&(Ct+=K/2),i.setRect(zt,0,-Et/2,Ct,Et)})}function F(R){var N=R._fullLayout,z=N.legend,G=I(z),Y=D(z);return A.autoMargin(R,"legend",{x:z.x,y:z.y,l:z._width*g[G],r:z._width*d[G],b:z._effHeight*d[Y],t:z._effHeight*g[Y]})}function I(R){return c.isRightAnchor(R)?"right":c.isCenterAnchor(R)?"center":"left"}function D(R){return c.isBottomAnchor(R)?"bottom":c.isMiddleAnchor(R)?"middle":"top"}},{"../../constants/alignment":483,"../../lib":515,"../../lib/events":504,"../../lib/svg_text_utils":541,"../../plots/plots":628,"../../registry":647,"../color":367,"../dragelement":386,"../drawing":389,"./constants":418,"./get_legend_data":421,"./handle_click":422,"./helpers":423,"./style":425,"@plotly/d3":58}],421:[function(t,B,V){var m=t("../../registry"),c=t("./helpers");B.exports=function(T,e){var a=e._inHover,i=c.isGrouped(e),n=c.isReversed(e),r={},v=[],s=!1,o={},b=0,g=0,d,f;function y(N,z){if(N===""||!c.isGrouped(e)){var G="~~i"+b;v.push(G),r[G]=[z],b++}else v.indexOf(N)===-1?(v.push(N),s=!0,r[N]=[z]):r[N].push(z)}for(d=0;d<T.length;d++){var l=T[d],x=l[0],u=x.trace,M=u.legendgroup;if(!(!a&&(!u.visible||!u.showlegend)))if(m.traceIs(u,"pie-like"))for(o[M]||(o[M]={}),f=0;f<l.length;f++){var _=l[f].label;o[M][_]||(y(M,{label:_,color:l[f].color,i:l[f].i,trace:u,pts:l[f].pts}),o[M][_]=!0,g=Math.max(g,(_||"").length))}else y(M,x),g=Math.max(g,(u.name||"").length)}if(!v.length)return[];var p=!s||!i,w=[];for(d=0;d<v.length;d++){var h=r[v[d]];p?w.push(h[0]):w.push(h)}for(p&&(w=[w]),d=0;d<w.length;d++){var L=1/0;for(f=0;f<w[d].length;f++){var S=w[d][f].trace.legendrank;L>S&&(L=S)}w[d][0]._groupMinRank=L,w[d][0]._preGroupSort=d}var E=function(N,z){return N[0]._groupMinRank-z[0]._groupMinRank||N[0]._preGroupSort-z[0]._preGroupSort},P=function(N,z){return N.trace.legendrank-z.trace.legendrank||N._preSort-z._preSort};for(w.forEach(function(N,z){N[0]._preGroupSort=z}),w.sort(E),d=0;d<w.length;d++){w[d].forEach(function(N,z){N._preSort=z}),w[d].sort(P);var F=w[d][0].trace,I=null;for(f=0;f<w[d].length;f++){var D=w[d][f].trace.legendgrouptitle;if(D&&D.text){I=D,a&&(D.font=e._groupTitleFont);break}}if(n&&w[d].reverse(),I){var R=!1;for(f=0;f<w[d].length;f++)if(m.traceIs(w[d][f].trace,"pie-like")){R=!0;break}w[d].unshift({i:-1,groupTitle:I,noClick:R,trace:{showlegend:F.showlegend,legendgroup:F.legendgroup,visible:e.groupclick==="toggleitem"?!0:F.visible}})}for(f=0;f<w[d].length;f++)w[d][f]=[w[d][f]]}return e._lgroupsLength=w.length,e._maxNameLength=g,w}},{"../../registry":647,"./helpers":423}],422:[function(t,B,V){var m=t("../../lib"),c=t("../../registry"),A=!0;B.exports=function(e,a,i){var n=a._fullLayout;if(a._dragged||a._editing)return;var r=n.legend.itemclick,v=n.legend.itemdoubleclick,s=n.legend.groupclick;i===1&&r==="toggle"&&v==="toggleothers"&&A&&a.data&&a._context.showTips&&m.notifier(m._(a,"Double-click on legend to isolate one trace"),"long"),A=!1;var o;if(i===1?o=r:i===2&&(o=v),!o)return;var b=s==="togglegroup",g=n.hiddenlabels?n.hiddenlabels.slice():[],d=e.data()[0][0];if(d.groupTitle&&d.noClick)return;var f=a._fullData,y=d.trace,l=y.legendgroup,x,u,M,_,p,w,h={},L=[],S=[],E=[];function P(K,U,H){var q=L.indexOf(K),re=h[U];return re||(re=h[U]=[]),L.indexOf(K)===-1&&(L.push(K),q=L.length-1),re[q]=H,q}function F(K,U){if(!(d.groupTitle&&!b)){var H=K._fullInput;if(c.hasTransform(H,"groupby")){var q=S[H.index];if(!q){var re=c.getTransformIndices(H,"groupby"),j=re[re.length-1];q=m.keyedContainer(H,"transforms["+j+"].styles","target","value.visible"),S[H.index]=q}var $=q.get(K._group);$===void 0&&($=!0),$!==!1&&q.set(K._group,U),E[H.index]=P(H.index,"visible",H.visible!==!1)}else{var ie=H.visible===!1?!1:U;P(H.index,"visible",ie)}}}if(c.traceIs(y,"pie-like")){var I=d.label,D=g.indexOf(I);o==="toggle"?D===-1?g.push(I):g.splice(D,1):o==="toggleothers"&&(g=[],a.calcdata[0].forEach(function(K){I!==K.label&&g.push(K.label)}),a._fullLayout.hiddenlabels&&a._fullLayout.hiddenlabels.length===g.length&&D===-1&&(g=[])),c.call("_guiRelayout",a,"hiddenlabels",g)}else{var R=l&&l.length,N=[],z;if(R)for(x=0;x<f.length;x++)z=f[x],!!z.visible&&z.legendgroup===l&&N.push(x);if(o==="toggle"){var G;switch(y.visible){case!0:G="legendonly";break;case!1:G=!1;break;case"legendonly":G=!0;break}if(R)if(b)for(x=0;x<f.length;x++)f[x].visible!==!1&&f[x].legendgroup===l&&F(f[x],G);else F(y,G);else F(y,G)}else if(o==="toggleothers"){var Y,ee,Z,X,ne=!0;for(x=0;x<f.length;x++)if(Y=f[x]===y,Z=f[x].showlegend!==!0,!(Y||Z)&&(ee=R&&f[x].legendgroup===l,!ee&&f[x].visible===!0&&!c.traceIs(f[x],"notLegendIsolatable"))){ne=!1;break}for(x=0;x<f.length;x++)if(f[x].visible!==!1&&!c.traceIs(f[x],"notLegendIsolatable"))switch(y.visible){case"legendonly":F(f[x],!0);break;case!0:X=ne?!0:"legendonly",Y=f[x]===y,Z=f[x].showlegend!==!0&&!f[x].legendgroup,ee=Y||R&&f[x].legendgroup===l,F(f[x],ee||Z?!0:X);break}}for(x=0;x<S.length;x++)if(M=S[x],!!M){var ce=M.constructUpdate(),Q=Object.keys(ce);for(u=0;u<Q.length;u++)_=Q[u],w=h[_]=h[_]||[],w[E[x]]=ce[_]}for(p=Object.keys(h),x=0;x<p.length;x++)for(_=p[x],u=0;u<L.length;u++)h[_].hasOwnProperty(u)||(h[_][u]=void 0);c.call("_guiRestyle",a,h,L)}}},{"../../lib":515,"../../registry":647}],423:[function(t,B,V){V.isGrouped=function(c){return(c.traceorder||"").indexOf("grouped")!==-1},V.isVertical=function(c){return c.orientation!=="h"},V.isReversed=function(c){return(c.traceorder||"").indexOf("reversed")!==-1}},{}],424:[function(t,B,V){B.exports={moduleType:"component",name:"legend",layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),draw:t("./draw"),style:t("./style")}},{"./attributes":417,"./defaults":419,"./draw":420,"./style":425}],425:[function(t,B,V){var m=t("@plotly/d3"),c=t("../../registry"),A=t("../../lib"),T=A.strTranslate,e=t("../drawing"),a=t("../color"),i=t("../colorscale/helpers").extractOpts,n=t("../../traces/scatter/subtypes"),r=t("../../traces/pie/style_one"),v=t("../../traces/pie/helpers").castOption,s=t("./constants"),o=12,b=5,g=2,d=10,f=5;B.exports=function(M,_,p){var w=_._fullLayout;p||(p=w.legend);var h=p.itemsizing==="constant",L=p.itemwidth,S=(L+s.itemGap*2)/2,E=T(S,0),P=function(Q,K,U,H){var q;if(Q+1)q=Q;else if(K&&K.width>0)q=K.width;else return 0;return h?H:Math.min(q,U)};M.each(function(Q){var K=m.select(this),U=A.ensureSingle(K,"g","layers");U.style("opacity",Q[0].trace.opacity);var H=p.valign,q=Q[0].lineHeight,re=Q[0].height;if(H==="middle"||!q||!re)U.attr("transform",null);else{var j={top:1,bottom:-1}[H],$=j*(.5*(q-re+3));U.attr("transform",T(0,$))}var ie=U.selectAll("g.legendfill").data([Q]);ie.enter().append("g").classed("legendfill",!0);var oe=U.selectAll("g.legendlines").data([Q]);oe.enter().append("g").classed("legendlines",!0);var ae=U.selectAll("g.legendsymbols").data([Q]);ae.enter().append("g").classed("legendsymbols",!0),ae.selectAll("g.legendpoints").data([Q]).enter().append("g").classed("legendpoints",!0)}).each(ce).each(D).each(N).each(R).each(G).each(X).each(Z).each(F).each(I).each(Y).each(ee);function F(Q){var K=l(Q),U=K.showFill,H=K.showLine,q=K.showGradientLine,re=K.showGradientFill,j=K.anyFill,$=K.anyLine,ie=Q[0],oe=ie.trace,ae,se,_e=i(oe),ue=_e.colorscale,ye=_e.reversescale,xe=function(Le){if(Le.size())if(U)e.fillGroupStyle(Le,_);else{var je="legendfill-"+oe.uid;e.gradient(Le,_,je,y(ye),ue,"fill")}},me=function(Le){if(Le.size()){var je="legendline-"+oe.uid;e.lineGroupStyle(Le),e.gradient(Le,_,je,y(ye),ue,"stroke")}},be=n.hasMarkers(oe)||!j?"M5,0":$?"M5,-2":"M5,-3",ke=m.select(this),De=ke.select(".legendfill").selectAll("path").data(U||re?[Q]:[]);if(De.enter().append("path").classed("js-fill",!0),De.exit().remove(),De.attr("d",be+"h"+L+"v6h-"+L+"z").call(xe),H||q){var Ve=P(void 0,oe.line,d,b);se=A.minExtend(oe,{line:{width:Ve}}),ae=[A.minExtend(ie,{trace:se})]}var Ae=ke.select(".legendlines").selectAll("path").data(H||q?[ae]:[]);Ae.enter().append("path").classed("js-line",!0),Ae.exit().remove(),Ae.attr("d",be+(q?"l"+L+",0.0001":"h"+L)).call(H?e.lineGroupStyle:me)}function I(Q){var K=l(Q),U=K.anyFill,H=K.anyLine,q=K.showLine,re=K.showMarker,j=Q[0],$=j.trace,ie=!re&&!H&&!U&&n.hasText($),oe,ae;function se(De,Ve,Ae,Le){var je=A.nestedProperty($,De).get(),Ye=A.isArrayOrTypedArray(je)&&Ve?Ve(je):je;if(h&&Ye&&Le!==void 0&&(Ye=Le),Ae){if(Ye<Ae[0])return Ae[0];if(Ye>Ae[1])return Ae[1]}return Ye}function _e(De){return j._distinct&&j.index&&De[j.index]?De[j.index]:De[0]}if(re||ie||q){var ue={},ye={};if(re){ue.mc=se("marker.color",_e),ue.mx=se("marker.symbol",_e),ue.mo=se("marker.opacity",A.mean,[.2,1]),ue.mlc=se("marker.line.color",_e),ue.mlw=se("marker.line.width",A.mean,[0,5],g),ye.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var xe=se("marker.size",A.mean,[2,16],o);ue.ms=xe,ye.marker.size=xe}q&&(ye.line={width:se("line.width",_e,[0,10],b)}),ie&&(ue.tx="Aa",ue.tp=se("textposition",_e),ue.ts=10,ue.tc=se("textfont.color",_e),ue.tf=se("textfont.family",_e)),oe=[A.minExtend(j,ue)],ae=A.minExtend($,ye),ae.selectedpoints=null,ae.texttemplate=null}var me=m.select(this).select("g.legendpoints"),be=me.selectAll("path.scatterpts").data(re?oe:[]);be.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",E),be.exit().remove(),be.call(e.pointStyle,ae,_),re&&(oe[0].mrc=3);var ke=me.selectAll("g.pointtext").data(ie?oe:[]);ke.enter().append("g").classed("pointtext",!0).append("text").attr("transform",E),ke.exit().remove(),ke.selectAll("text").call(e.textPointStyle,ae,_)}function D(Q){var K=Q[0].trace,U=K.type==="waterfall";if(Q[0]._distinct&&U){var H=Q[0].trace[Q[0].dir].marker;return Q[0].mc=H.color,Q[0].mlw=H.line.width,Q[0].mlc=H.line.color,z(Q,this,"waterfall")}var q=[];K.visible&&U&&(q=Q[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var re=m.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(q);re.enter().append("path").classed("legendwaterfall",!0).attr("transform",E).style("stroke-miterlimit",1),re.exit().remove(),re.each(function(j){var $=m.select(this),ie=K[j[0]].marker,oe=P(void 0,ie.line,f,g);$.attr("d",j[1]).style("stroke-width",oe+"px").call(a.fill,ie.color),oe&&$.call(a.stroke,ie.line.color)})}function R(Q){z(Q,this)}function N(Q){z(Q,this,"funnel")}function z(Q,K,U){var H=Q[0].trace,q=H.marker||{},re=q.line||{},j=U?H.visible&&H.type===U:c.traceIs(H,"bar"),$=m.select(K).select("g.legendpoints").selectAll("path.legend"+U).data(j?[Q]:[]);$.enter().append("path").classed("legend"+U,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",E),$.exit().remove(),$.each(function(ie){var oe=m.select(this),ae=ie[0],se=P(ae.mlw,q.line,f,g);oe.style("stroke-width",se+"px");var _e=ae.mcc;if(!p._inHover&&"mc"in ae){var ue=i(q),ye=ue.mid;ye===void 0&&(ye=(ue.max+ue.min)/2),_e=e.tryColorscale(q,"")(ye)}var xe=_e||ae.mc||q.color,me=q.pattern,be=me&&e.getPatternAttr(me.shape,0,"");if(be){var ke=e.getPatternAttr(me.bgcolor,0,null),De=e.getPatternAttr(me.fgcolor,0,null),Ve=me.fgopacity,Ae=x(me.size,8,10),Le=x(me.solidity,.5,1),je="legend-"+H.uid;oe.call(e.pattern,"legend",_,je,be,Ae,Le,_e,me.fillmode,ke,De,Ve)}else oe.call(a.fill,xe);se&&a.stroke(oe,ae.mlc||re.color)})}function G(Q){var K=Q[0].trace,U=m.select(this).select("g.legendpoints").selectAll("path.legendbox").data(K.visible&&c.traceIs(K,"box-violin")?[Q]:[]);U.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",E),U.exit().remove(),U.each(function(){var H=m.select(this);if((K.boxpoints==="all"||K.points==="all")&&a.opacity(K.fillcolor)===0&&a.opacity((K.line||{}).color)===0){var q=A.minExtend(K,{marker:{size:h?o:A.constrain(K.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});U.call(e.pointStyle,q,_)}else{var re=P(void 0,K.line,f,g);H.style("stroke-width",re+"px").call(a.fill,K.fillcolor),re&&a.stroke(H,K.line.color)}})}function Y(Q){var K=Q[0].trace,U=m.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(K.visible&&K.type==="candlestick"?[Q,Q]:[]);U.enter().append("path").classed("legendcandle",!0).attr("d",function(H,q){return q?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",E).style("stroke-miterlimit",1),U.exit().remove(),U.each(function(H,q){var re=m.select(this),j=K[q?"increasing":"decreasing"],$=P(void 0,j.line,f,g);re.style("stroke-width",$+"px").call(a.fill,j.fillcolor),$&&a.stroke(re,j.line.color)})}function ee(Q){var K=Q[0].trace,U=m.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(K.visible&&K.type==="ohlc"?[Q,Q]:[]);U.enter().append("path").classed("legendohlc",!0).attr("d",function(H,q){return q?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",E).style("stroke-miterlimit",1),U.exit().remove(),U.each(function(H,q){var re=m.select(this),j=K[q?"increasing":"decreasing"],$=P(void 0,j.line,f,g);re.style("fill","none").call(e.dashLine,j.line.dash,$),$&&a.stroke(re,j.line.color)})}function Z(Q){ne(Q,this,"pie")}function X(Q){ne(Q,this,"funnelarea")}function ne(Q,K,U){var H=Q[0],q=H.trace,re=U?q.visible&&q.type===U:c.traceIs(q,U),j=m.select(K).select("g.legendpoints").selectAll("path.legend"+U).data(re?[Q]:[]);if(j.enter().append("path").classed("legend"+U,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",E),j.exit().remove(),j.size()){var $=(q.marker||{}).line,ie=P(v($.width,H.pts),$,f,g),oe=A.minExtend(q,{marker:{line:{width:ie}}});oe.marker.line.color=$.color;var ae=A.minExtend(H,{trace:oe});r(j,ae,oe)}}function ce(Q){var K=Q[0].trace,U,H=[];if(K.visible)switch(K.type){case"histogram2d":case"heatmap":H=[["M-15,-2V4H15V-2Z"]],U=!0;break;case"choropleth":case"choroplethmapbox":H=[["M-6,-6V6H6V-6Z"]],U=!0;break;case"densitymapbox":H=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],U="radial";break;case"cone":H=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],U=!1;break;case"streamtube":H=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],U=!1;break;case"surface":H=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],U=!0;break;case"mesh3d":H=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],U=!1;break;case"volume":H=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],U=!0;break;case"isosurface":H=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],U=!1;break}var q=m.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(H);q.enter().append("path").classed("legend3dandfriends",!0).attr("transform",E).style("stroke-miterlimit",1),q.exit().remove(),q.each(function(re,j){var $=m.select(this),ie=i(K),oe=ie.colorscale,ae=ie.reversescale,se=function(xe){if(xe.size()){var me="legendfill-"+K.uid;e.gradient(xe,_,me,y(ae,U==="radial"),oe,"fill")}},_e;if(oe){if(!U){var ye=oe.length;_e=j===0?oe[ae?ye-1:0][1]:j===1?oe[ae?0:ye-1][1]:oe[Math.floor((ye-1)/2)][1]}}else{var ue=K.vertexcolor||K.facecolor||K.color;_e=A.isArrayOrTypedArray(ue)?ue[j]||ue[0]:ue}$.attr("d",re[0]),_e?$.call(a.fill,_e):$.call(se)})}};function y(u,M){var _=M?"radial":"horizontal";return _+(u?"":"reversed")}function l(u){var M=u[0].trace,_=M.contours,p=n.hasLines(M),w=n.hasMarkers(M),h=M.visible&&M.fill&&M.fill!=="none",L=!1,S=!1;if(_){var E=_.coloring;E==="lines"?L=!0:p=E==="none"||E==="heatmap"||_.showlines,_.type==="constraint"?h=_._operation!=="=":(E==="fill"||E==="heatmap")&&(S=!0)}return{showMarker:w,showLine:p,showFill:h,showGradientLine:L,showGradientFill:S,anyLine:p||L,anyFill:h||S}}function x(u,M,_){return u&&A.isArrayOrTypedArray(u)?M:u>_?_:u}},{"../../lib":515,"../../registry":647,"../../traces/pie/helpers":915,"../../traces/pie/style_one":921,"../../traces/scatter/subtypes":961,"../color":367,"../colorscale/helpers":378,"../drawing":389,"./constants":418,"@plotly/d3":58}],426:[function(t,B,V){t("./constants"),B.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},{"./constants":428}],427:[function(t,B,V){var m=t("../../registry"),c=t("../../plots/plots"),A=t("../../plots/cartesian/axis_ids"),T=t("../../fonts/ploticon"),e=t("../shapes/draw").eraseActiveShape,a=t("../../lib"),i=a._,n=B.exports={};n.toImage={name:"toImage",title:function(u){var M=u._context.toImageButtonOptions||{},_=M.format||"png";return _==="png"?i(u,"Download plot as a png"):i(u,"Download plot")},icon:T.camera,click:function(u){var M=u._context.toImageButtonOptions,_={format:M.format||"png"};a.notifier(i(u,"Taking snapshot - this may take a few seconds"),"long"),_.format!=="svg"&&a.isIE()&&(a.notifier(i(u,"IE only supports svg.  Changing format to svg."),"long"),_.format="svg"),["filename","width","height","scale"].forEach(function(p){p in M&&(_[p]=M[p])}),m.call("downloadImage",u,_).then(function(p){a.notifier(i(u,"Snapshot succeeded")+" - "+p,"long")}).catch(function(){a.notifier(i(u,"Sorry, there was a problem downloading your snapshot!"),"long")})}},n.sendDataToCloud={name:"sendDataToCloud",title:function(u){return i(u,"Edit in Chart Studio")},icon:T.disk,click:function(u){c.sendDataToCloud(u)}},n.editInChartStudio={name:"editInChartStudio",title:function(u){return i(u,"Edit in Chart Studio")},icon:T.pencil,click:function(u){c.sendDataToCloud(u)}},n.zoom2d={name:"zoom2d",_cat:"zoom",title:function(u){return i(u,"Zoom")},attr:"dragmode",val:"zoom",icon:T.zoombox,click:r},n.pan2d={name:"pan2d",_cat:"pan",title:function(u){return i(u,"Pan")},attr:"dragmode",val:"pan",icon:T.pan,click:r},n.select2d={name:"select2d",_cat:"select",title:function(u){return i(u,"Box Select")},attr:"dragmode",val:"select",icon:T.selectbox,click:r},n.lasso2d={name:"lasso2d",_cat:"lasso",title:function(u){return i(u,"Lasso Select")},attr:"dragmode",val:"lasso",icon:T.lasso,click:r},n.drawclosedpath={name:"drawclosedpath",title:function(u){return i(u,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:T.drawclosedpath,click:r},n.drawopenpath={name:"drawopenpath",title:function(u){return i(u,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:T.drawopenpath,click:r},n.drawline={name:"drawline",title:function(u){return i(u,"Draw line")},attr:"dragmode",val:"drawline",icon:T.drawline,click:r},n.drawrect={name:"drawrect",title:function(u){return i(u,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:T.drawrect,click:r},n.drawcircle={name:"drawcircle",title:function(u){return i(u,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:T.drawcircle,click:r},n.eraseshape={name:"eraseshape",title:function(u){return i(u,"Erase active shape")},icon:T.eraseshape,click:e},n.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(u){return i(u,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:r},n.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(u){return i(u,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:r},n.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(u){return i(u,"Autoscale")},attr:"zoom",val:"auto",icon:T.autoscale,click:r},n.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(u){return i(u,"Reset axes")},attr:"zoom",val:"reset",icon:T.home,click:r},n.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(u){return i(u,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:T.tooltip_basic,gravity:"ne",click:r},n.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(u){return i(u,"Compare data on hover")},attr:"hovermode",val:function(u){return u._fullLayout._isHoriz?"y":"x"},icon:T.tooltip_compare,gravity:"ne",click:r};function r(u,M){var _=M.currentTarget,p=_.getAttribute("data-attr"),w=_.getAttribute("data-val")||!0,h=u._fullLayout,L={},S=A.list(u,null,!0),E=h._cartesianSpikesEnabled,P,F;if(p==="zoom"){var I=w==="in"?.5:2,D=(1+I)/2,R=(1-I)/2,N;for(F=0;F<S.length;F++)if(P=S[F],!P.fixedrange)if(N=P._name,w==="auto")L[N+".autorange"]=!0;else if(w==="reset"){if(P._rangeInitial===void 0)L[N+".autorange"]=!0;else{var z=P._rangeInitial.slice();L[N+".range[0]"]=z[0],L[N+".range[1]"]=z[1]}P._showSpikeInitial!==void 0&&(L[N+".showspikes"]=P._showSpikeInitial,E==="on"&&!P._showSpikeInitial&&(E="off"))}else{var G=[P.r2l(P.range[0]),P.r2l(P.range[1])],Y=[D*G[0]+R*G[1],D*G[1]+R*G[0]];L[N+".range[0]"]=P.l2r(Y[0]),L[N+".range[1]"]=P.l2r(Y[1])}}else p==="hovermode"&&(w==="x"||w==="y")&&(w=h._isHoriz?"y":"x",_.setAttribute("data-val",w)),L[p]=w;h._cartesianSpikesEnabled=E,m.call("_guiRelayout",u,L)}n.zoom3d={name:"zoom3d",_cat:"zoom",title:function(u){return i(u,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:T.zoombox,click:v},n.pan3d={name:"pan3d",_cat:"pan",title:function(u){return i(u,"Pan")},attr:"scene.dragmode",val:"pan",icon:T.pan,click:v},n.orbitRotation={name:"orbitRotation",title:function(u){return i(u,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:T["3d_rotate"],click:v},n.tableRotation={name:"tableRotation",title:function(u){return i(u,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:T["z-axis"],click:v};function v(u,M){for(var _=M.currentTarget,p=_.getAttribute("data-attr"),w=_.getAttribute("data-val")||!0,h=u._fullLayout._subplots.gl3d||[],L={},S=p.split("."),E=0;E<h.length;E++)L[h[E]+"."+S[1]]=w;var P=w==="pan"?w:"zoom";L.dragmode=P,m.call("_guiRelayout",u,L)}n.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(u){return i(u,"Reset camera to default")},attr:"resetDefault",icon:T.home,click:s},n.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(u){return i(u,"Reset camera to last save")},attr:"resetLastSave",icon:T.movie,click:s};function s(u,M){for(var _=M.currentTarget,p=_.getAttribute("data-attr"),w=p==="resetLastSave",h=p==="resetDefault",L=u._fullLayout,S=L._subplots.gl3d||[],E={},P=0;P<S.length;P++){var F=S[P],I=F+".camera",D=F+".aspectratio",R=F+".aspectmode",N=L[F]._scene,z;w?(E[I+".up"]=N.viewInitial.up,E[I+".eye"]=N.viewInitial.eye,E[I+".center"]=N.viewInitial.center,z=!0):h&&(E[I+".up"]=null,E[I+".eye"]=null,E[I+".center"]=null,z=!0),z&&(E[D+".x"]=N.viewInitial.aspectratio.x,E[D+".y"]=N.viewInitial.aspectratio.y,E[D+".z"]=N.viewInitial.aspectratio.z,E[R]=N.viewInitial.aspectmode)}m.call("_guiRelayout",u,E)}n.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(u){return i(u,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:b};function o(u,M){var _=M.currentTarget,p=_._previousVal,w=u._fullLayout,h=w._subplots.gl3d||[],L=["xaxis","yaxis","zaxis"],S={},E={};if(p)E=p,_._previousVal=null;else{for(var P=0;P<h.length;P++){var F=h[P],I=w[F],D=F+".hovermode";S[D]=I.hovermode,E[D]=!1;for(var R=0;R<3;R++){var N=L[R],z=F+"."+N+".showspikes";E[z]=!1,S[z]=I[N].showspikes}}_._previousVal=S}return E}function b(u,M){var _=o(u,M);m.call("_guiRelayout",u,_)}n.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(u){return i(u,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:g},n.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(u){return i(u,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:g},n.resetGeo={name:"resetGeo",_cat:"reset",title:function(u){return i(u,"Reset")},attr:"reset",val:null,icon:T.autoscale,click:g},n.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(u){return i(u,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:f};function g(u,M){for(var _=M.currentTarget,p=_.getAttribute("data-attr"),w=_.getAttribute("data-val")||!0,h=u._fullLayout,L=h._subplots.geo||[],S=0;S<L.length;S++){var E=L[S],P=h[E];if(p==="zoom"){var F=P.projection.scale,I=w==="in"?2*F:.5*F;m.call("_guiRelayout",u,E+".projection.scale",I)}}p==="reset"&&x(u,"geo")}n.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(u){return i(u,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:f},n.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(u){return i(u,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:T.tooltip_basic,gravity:"ne",click:f};function d(u){var M=u._fullLayout;return M.hovermode?!1:M._has("cartesian")?M._isHoriz?"y":"x":"closest"}function f(u){var M=d(u);m.call("_guiRelayout",u,"hovermode",M)}n.resetViewSankey={name:"resetSankeyGroup",title:function(u){return i(u,"Reset view")},icon:T.home,click:function(u){for(var M={"node.groups":[],"node.x":[],"node.y":[]},_=0;_<u._fullData.length;_++){var p=u._fullData[_]._viewInitial;M["node.groups"].push(p.node.groups.slice()),M["node.x"].push(p.node.x.slice()),M["node.y"].push(p.node.y.slice())}m.call("restyle",u,M)}},n.toggleHover={name:"toggleHover",title:function(u){return i(u,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:function(u,M){var _=o(u,M);_.hovermode=d(u),m.call("_guiRelayout",u,_)}},n.resetViews={name:"resetViews",title:function(u){return i(u,"Reset views")},icon:T.home,click:function(u,M){var _=M.currentTarget;_.setAttribute("data-attr","zoom"),_.setAttribute("data-val","reset"),r(u,M),_.setAttribute("data-attr","resetLastSave"),s(u,M),x(u,"geo"),x(u,"mapbox")}},n.toggleSpikelines={name:"toggleSpikelines",title:function(u){return i(u,"Toggle Spike Lines")},icon:T.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(u){var M=u._fullLayout,_=M._cartesianSpikesEnabled;M._cartesianSpikesEnabled=_==="on"?"off":"on",m.call("_guiRelayout",u,y(u))}};function y(u){for(var M=u._fullLayout,_=M._cartesianSpikesEnabled==="on",p=A.list(u,null,!0),w={},h=0;h<p.length;h++){var L=p[h];w[L._name+".showspikes"]=_?!0:L._showSpikeInitial}return w}n.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(u){return i(u,"Reset view")},attr:"reset",icon:T.home,click:function(u){x(u,"mapbox")}},n.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(u){return i(u,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:l},n.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(u){return i(u,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:l};function l(u,M){for(var _=M.currentTarget,p=_.getAttribute("data-val"),w=u._fullLayout,h=w._subplots.mapbox||[],L=1.05,S={},E=0;E<h.length;E++){var P=h[E],F=w[P].zoom,I=p==="in"?L*F:F/L;S[P+".zoom"]=I}m.call("_guiRelayout",u,S)}function x(u,M){for(var _=u._fullLayout,p=_._subplots[M]||[],w={},h=0;h<p.length;h++)for(var L=p[h],S=_[L]._subplot,E=S.viewInitial,P=Object.keys(E),F=0;F<P.length;F++){var I=P[F];w[L+"."+I]=E[I]}m.call("_guiRelayout",u,w)}},{"../../fonts/ploticon":494,"../../lib":515,"../../plots/cartesian/axis_ids":570,"../../plots/plots":628,"../../registry":647,"../shapes/draw":462}],428:[function(t,B,V){var m=t("./buttons"),c=Object.keys(m),A=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],T=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(A),e=[],a=function(i){if(T.indexOf(i._cat||i.name)===-1){var n=i.name,r=(i._cat||i.name).toLowerCase();e.indexOf(n)===-1&&e.push(n),e.indexOf(r)===-1&&e.push(r)}};c.forEach(function(i){a(m[i])}),e.sort(),B.exports={DRAW_MODES:A,backButtons:T,foreButtons:e}},{"./buttons":427}],429:[function(t,B,V){var m=t("../../lib"),c=t("../color"),A=t("../../plot_api/plot_template"),T=t("./attributes");B.exports=function(a,i){var n=a.modebar||{},r=A.newContainer(i,"modebar");function v(o,b){return m.coerce(n,r,T,o,b)}v("orientation"),v("bgcolor",c.addOpacity(i.paper_bgcolor,.5));var s=c.contrast(c.rgb(i.modebar.bgcolor));v("color",c.addOpacity(s,.3)),v("activecolor",c.addOpacity(s,.7)),v("uirevision",i.uirevision),v("add"),v("remove")}},{"../../lib":515,"../../plot_api/plot_template":555,"../color":367,"./attributes":426}],430:[function(t,B,V){B.exports={moduleType:"component",name:"modebar",layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),manage:t("./manage")}},{"./attributes":426,"./defaults":429,"./manage":431}],431:[function(t,B,V){var m=t("../../plots/cartesian/axis_ids"),c=t("../../traces/scatter/subtypes"),A=t("../../registry"),T=t("../fx/helpers").isUnifiedHover,e=t("./modebar"),a=t("./buttons"),i=t("./constants").DRAW_MODES,n=t("../../lib").extendDeep;B.exports=function(f){var y=f._fullLayout,l=f._context,x=y._modeBar;if(!l.displayModeBar&&!l.watermark){x&&(x.destroy(),delete y._modeBar);return}if(!Array.isArray(l.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(l.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var u=l.modeBarButtons,M;Array.isArray(u)&&u.length?M=g(u):!l.displayModeBar&&l.watermark?M=[]:M=r(f),x?x.update(f,M):y._modeBar=e(f,M)};function r(d){var f=d._fullLayout,y=d._fullData,l=d._context;function x(j,$){if(typeof $=="string"){if($.toLowerCase()===j.toLowerCase())return!0}else{var ie=$.name,oe=$._cat||$.name;if(ie===j||oe===j.toLowerCase())return!0}return!1}var u=f.modebar.add;typeof u=="string"&&(u=[u]);var M=f.modebar.remove;typeof M=="string"&&(M=[M]);var _=l.modeBarButtonsToAdd.concat(u.filter(function(j){for(var $=0;$<l.modeBarButtonsToRemove.length;$++)if(x(j,l.modeBarButtonsToRemove[$]))return!1;return!0})),p=l.modeBarButtonsToRemove.concat(M.filter(function(j){for(var $=0;$<l.modeBarButtonsToAdd.length;$++)if(x(j,l.modeBarButtonsToAdd[$]))return!1;return!0})),w=f._has("cartesian"),h=f._has("gl3d"),L=f._has("geo"),S=f._has("pie"),E=f._has("funnelarea"),P=f._has("gl2d"),F=f._has("ternary"),I=f._has("mapbox"),D=f._has("polar"),R=f._has("smith"),N=f._has("sankey"),z=v(f),G=T(f.hovermode),Y=[];function ee(j){if(!!j.length){for(var $=[],ie=0;ie<j.length;ie++){for(var oe=j[ie],ae=a[oe],se=ae.name.toLowerCase(),_e=(ae._cat||ae.name).toLowerCase(),ue=!1,ye=0;ye<p.length;ye++){var xe=p[ye].toLowerCase();if(xe===se||xe===_e){ue=!0;break}}ue||$.push(a[oe])}Y.push($)}}var Z=["toImage"];l.showEditInChartStudio?Z.push("editInChartStudio"):l.showSendToCloud&&Z.push("sendDataToCloud"),ee(Z);var X=[],ne=[],ce=[],Q=[];(w||P||S||E||F)+L+h+I+D+R>1?(ne=["toggleHover"],ce=["resetViews"]):L?(X=["zoomInGeo","zoomOutGeo"],ne=["hoverClosestGeo"],ce=["resetGeo"]):h?(ne=["hoverClosest3d"],ce=["resetCameraDefault3d","resetCameraLastSave3d"]):I?(X=["zoomInMapbox","zoomOutMapbox"],ne=["toggleHover"],ce=["resetViewMapbox"]):P?ne=["hoverClosestGl2d"]:S?ne=["hoverClosestPie"]:N?(ne=["hoverClosestCartesian","hoverCompareCartesian"],ce=["resetViewSankey"]):ne=["toggleHover"],w&&(ne=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(o(y)||G)&&(ne=[]),(w||P)&&!z&&(X=["zoomIn2d","zoomOut2d","autoScale2d"],ce[0]!=="resetViews"&&(ce=["resetScale2d"])),h?Q=["zoom3d","pan3d","orbitRotation","tableRotation"]:(w||P)&&!z||F?Q=["zoom2d","pan2d"]:I||L?Q=["pan2d"]:D&&(Q=["zoom2d"]),s(y)&&Q.push("select2d","lasso2d");var K=[],U=function(j){K.indexOf(j)===-1&&ne.indexOf(j)!==-1&&K.push(j)};if(Array.isArray(_)){for(var H=[],q=0;q<_.length;q++){var re=_[q];typeof re=="string"?(re=re.toLowerCase(),i.indexOf(re)!==-1?(f._has("mapbox")||f._has("cartesian"))&&Q.push(re):re==="togglespikelines"?U("toggleSpikelines"):re==="togglehover"?U("toggleHover"):re==="hovercompare"?U("hoverCompareCartesian"):re==="hoverclosest"?(U("hoverClosestCartesian"),U("hoverClosestGeo"),U("hoverClosest3d"),U("hoverClosestGl2d"),U("hoverClosestPie")):re==="v1hovermode"&&(U("toggleHover"),U("hoverClosestCartesian"),U("hoverCompareCartesian"),U("hoverClosestGeo"),U("hoverClosest3d"),U("hoverClosestGl2d"),U("hoverClosestPie"))):H.push(re)}_=H}return ee(Q),ee(X.concat(ce)),ee(K),b(Y,_)}function v(d){for(var f=m.list({_fullLayout:d},null,!0),y=0;y<f.length;y++)if(!f[y].fixedrange)return!1;return!0}function s(d){for(var f=!1,y=0;y<d.length&&!f;y++){var l=d[y];!l._module||!l._module.selectPoints||(A.traceIs(l,"scatter-like")?(c.hasMarkers(l)||c.hasText(l))&&(f=!0):A.traceIs(l,"box-violin")?(l.boxpoints==="all"||l.points==="all")&&(f=!0):f=!0)}return f}function o(d){for(var f=0;f<d.length;f++)if(!A.traceIs(d[f],"noHover"))return!1;return!0}function b(d,f){if(f.length)if(Array.isArray(f[0]))for(var y=0;y<f.length;y++)d.push(f[y]);else d.push(f);return d}function g(d){for(var f=n([],d),y=0;y<f.length;y++)for(var l=f[y],x=0;x<l.length;x++){var u=l[x];if(typeof u=="string")if(a[u]!==void 0)f[y][x]=a[u];else throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "))}return f}},{"../../lib":515,"../../plots/cartesian/axis_ids":570,"../../registry":647,"../../traces/scatter/subtypes":961,"../fx/helpers":403,"./buttons":427,"./constants":428,"./modebar":432}],432:[function(t,B,V){var m=t("@plotly/d3"),c=t("fast-isnumeric"),A=t("../../lib"),T=t("../../fonts/ploticon"),e=t("../../version").version,a=new DOMParser;function i(s){this.container=s.container,this.element=document.createElement("div"),this.update(s.graphInfo,s.buttons),this.container.appendChild(this.element)}var n=i.prototype;n.update=function(s,o){this.graphInfo=s;var b=this.graphInfo._context,g=this.graphInfo._fullLayout,d="modebar-"+g._uid;this.element.setAttribute("id",d),this._uid=d,this.element.className="modebar",b.displayModeBar==="hover"&&(this.element.className+=" modebar--hover ease-bg"),g.modebar.orientation==="v"&&(this.element.className+=" vertical",o=o.reverse());var f=g.modebar,y=b.displayModeBar==="hover"?".js-plotly-plot .plotly:hover ":"";A.deleteRelatedStyleRule(d),A.addRelatedStyleRule(d,y+"#"+d+" .modebar-group","background-color: "+f.bgcolor),A.addRelatedStyleRule(d,"#"+d+" .modebar-btn .icon path","fill: "+f.color),A.addRelatedStyleRule(d,"#"+d+" .modebar-btn:hover .icon path","fill: "+f.activecolor),A.addRelatedStyleRule(d,"#"+d+" .modebar-btn.active .icon path","fill: "+f.activecolor);var l=!this.hasButtons(o),x=this.hasLogo!==b.displaylogo,u=this.locale!==b.locale;if(this.locale=b.locale,(l||x||u)&&(this.removeAllButtons(),this.updateButtons(o),b.watermark||b.displaylogo)){var M=this.getLogo();b.watermark&&(M.className=M.className+" watermark"),g.modebar.orientation==="v"?this.element.insertBefore(M,this.element.childNodes[0]):this.element.appendChild(M),this.hasLogo=!0}this.updateActiveButton()},n.updateButtons=function(s){var o=this;this.buttons=s,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(b){var g=o.createGroup();b.forEach(function(d){var f=d.name;if(!f)throw new Error("must provide button 'name' in button config");if(o.buttonsNames.indexOf(f)!==-1)throw new Error("button name '"+f+"' is taken");o.buttonsNames.push(f);var y=o.createButton(d);o.buttonElements.push(y),g.appendChild(y)}),o.element.appendChild(g)})},n.createGroup=function(){var s=document.createElement("div");return s.className="modebar-group",s},n.createButton=function(s){var o=this,b=document.createElement("a");b.setAttribute("rel","tooltip"),b.className="modebar-btn";var g=s.title;g===void 0?g=s.name:typeof g=="function"&&(g=g(this.graphInfo)),(g||g===0)&&b.setAttribute("data-title",g),s.attr!==void 0&&b.setAttribute("data-attr",s.attr);var d=s.val;d!==void 0&&(typeof d=="function"&&(d=d(this.graphInfo)),b.setAttribute("data-val",d));var f=s.click;if(typeof f!="function")throw new Error("must provide button 'click' function in button config");b.addEventListener("click",function(l){s.click(o.graphInfo,l),o.updateActiveButton(l.currentTarget)}),b.setAttribute("data-toggle",s.toggle||!1),s.toggle&&m.select(b).classed("active",!0);var y=s.icon;return typeof y=="function"?b.appendChild(y()):b.appendChild(this.createIcon(y||T.question)),b.setAttribute("data-gravity",s.gravity||"n"),b},n.createIcon=function(s){var o=c(s.height)?Number(s.height):s.ascent-s.descent,b="http://www.w3.org/2000/svg",g;if(s.path){g=document.createElementNS(b,"svg"),g.setAttribute("viewBox",[0,0,s.width,o].join(" ")),g.setAttribute("class","icon");var d=document.createElementNS(b,"path");d.setAttribute("d",s.path),s.transform?d.setAttribute("transform",s.transform):s.ascent!==void 0&&d.setAttribute("transform","matrix(1 0 0 -1 0 "+s.ascent+")"),g.appendChild(d)}if(s.svg){var f=a.parseFromString(s.svg,"application/xml");g=f.childNodes[0]}return g.setAttribute("height","1em"),g.setAttribute("width","1em"),g},n.updateActiveButton=function(s){var o=this.graphInfo._fullLayout,b=s!==void 0?s.getAttribute("data-attr"):null;this.buttonElements.forEach(function(g){var d=g.getAttribute("data-val")||!0,f=g.getAttribute("data-attr"),y=g.getAttribute("data-toggle")==="true",l=m.select(g);if(y)f===b&&l.classed("active",!l.classed("active"));else{var x=f===null?f:A.nestedProperty(o,f).get();l.classed("active",x===d)}})},n.hasButtons=function(s){var o=this.buttons;if(!o||s.length!==o.length)return!1;for(var b=0;b<s.length;++b){if(s[b].length!==o[b].length)return!1;for(var g=0;g<s[b].length;g++)if(s[b][g].name!==o[b][g].name)return!1}return!0};function r(s){return s+" (v"+e+")"}n.getLogo=function(){var s=this.createGroup(),o=document.createElement("a");return o.href="https://plotly.com/",o.target="_blank",o.setAttribute("data-title",r(A._(this.graphInfo,"Produced with Plotly.js"))),o.className="modebar-btn plotlyjsicon modebar-btn--logo",o.appendChild(this.createIcon(T.newplotlylogo)),s.appendChild(o),s},n.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},n.destroy=function(){A.removeElement(this.container.querySelector(".modebar")),A.deleteRelatedStyleRule(this._uid)};function v(s,o){var b=s._fullLayout,g=new i({graphInfo:s,container:b._modebardiv.node(),buttons:o});return b._privateplot&&m.select(g.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),g}B.exports=v},{"../../fonts/ploticon":494,"../../lib":515,"../../version":1132,"@plotly/d3":58,"fast-isnumeric":190}],433:[function(t,B,V){var m=t("../../plots/font_attributes"),c=t("../color/attributes"),A=t("../../plot_api/plot_template").templatedArray,T=A("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});B.exports={visible:{valType:"boolean",editType:"plot"},buttons:T,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:m({editType:"plot"}),bgcolor:{valType:"color",dflt:c.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:c.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":555,"../../plots/font_attributes":594,"../color/attributes":366}],434:[function(t,B,V){B.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],435:[function(t,B,V){var m=t("../../lib"),c=t("../color"),A=t("../../plot_api/plot_template"),T=t("../../plots/array_container_defaults"),e=t("./attributes"),a=t("./constants");B.exports=function(v,s,o,b,g){var d=v.rangeselector||{},f=A.newContainer(s,"rangeselector");function y(_,p){return m.coerce(d,f,e,_,p)}var l=T(d,f,{name:"buttons",handleItemDefaults:i,calendar:g}),x=y("visible",l.length>0);if(x){var u=n(s,o,b);y("x",u[0]),y("y",u[1]),m.noneOrAll(v,s,["x","y"]),y("xanchor"),y("yanchor"),m.coerceFont(y,"font",o.font);var M=y("bgcolor");y("activecolor",c.contrast(M,a.lightAmount,a.darkAmount)),y("bordercolor"),y("borderwidth")}};function i(r,v,s,o){var b=o.calendar;function g(y,l){return m.coerce(r,v,e.buttons,y,l)}var d=g("visible");if(d){var f=g("step");f!=="all"&&(b&&b!=="gregorian"&&(f==="month"||f==="year")?v.stepmode="backward":g("stepmode"),g("count")),g("label")}}function n(r,v,s){for(var o=s.filter(function(f){return v[f].anchor===r._id}),b=0,g=0;g<o.length;g++){var d=v[o[g]].domain;d&&(b=Math.max(d[1],b))}return[r.domain[0],b+a.yPad]}},{"../../lib":515,"../../plot_api/plot_template":555,"../../plots/array_container_defaults":561,"../color":367,"./attributes":433,"./constants":434}],436:[function(t,B,V){var m=t("@plotly/d3"),c=t("../../registry"),A=t("../../plots/plots"),T=t("../color"),e=t("../drawing"),a=t("../../lib"),i=a.strTranslate,n=t("../../lib/svg_text_utils"),r=t("../../plots/cartesian/axis_ids"),v=t("../../constants/alignment"),s=v.LINE_SPACING,o=v.FROM_TL,b=v.FROM_BR,g=t("./constants"),d=t("./get_update_object");B.exports=function(h){var L=h._fullLayout,S=L._infolayer.selectAll(".rangeselector").data(f(h),y);S.enter().append("g").classed("rangeselector",!0),S.exit().remove(),S.style({cursor:"pointer","pointer-events":"all"}),S.each(function(E){var P=m.select(this),F=E,I=F.rangeselector,D=P.selectAll("g.button").data(a.filterVisible(I.buttons));D.enter().append("g").classed("button",!0),D.exit().remove(),D.each(function(R){var N=m.select(this),z=d(F,R);R._isActive=l(F,R,z),N.call(x,I,R),N.call(M,I,R,h),N.on("click",function(){h._dragged||c.call("_guiRelayout",h,z)}),N.on("mouseover",function(){R._isHovered=!0,N.call(x,I,R)}),N.on("mouseout",function(){R._isHovered=!1,N.call(x,I,R)})}),p(h,D,I,F._name,P)})};function f(w){for(var h=r.list(w,"x",!0),L=[],S=0;S<h.length;S++){var E=h[S];E.rangeselector&&E.rangeselector.visible&&L.push(E)}return L}function y(w){return w._id}function l(w,h,L){if(h.step==="all")return w.autorange===!0;var S=Object.keys(L);return w.range[0]===L[S[0]]&&w.range[1]===L[S[1]]}function x(w,h,L){var S=a.ensureSingle(w,"rect","selector-rect",function(E){E.attr("shape-rendering","crispEdges")});S.attr({rx:g.rx,ry:g.ry}),S.call(T.stroke,h.bordercolor).call(T.fill,u(h,L)).style("stroke-width",h.borderwidth+"px")}function u(w,h){return h._isActive||h._isHovered?w.activecolor:w.bgcolor}function M(w,h,L,S){function E(F){n.convertToTspans(F,S)}var P=a.ensureSingle(w,"text","selector-text",function(F){F.attr("text-anchor","middle")});P.call(e.font,h.font).text(_(L,S._fullLayout._meta)).call(E)}function _(w,h){return w.label?h?a.templateString(w.label,h):w.label:w.step==="all"?"all":w.count+w.step.charAt(0)}function p(w,h,L,S,E){var P=0,F=0,I=L.borderwidth;h.each(function(){var Y=m.select(this),ee=Y.select(".selector-text"),Z=L.font.size*s,X=Math.max(Z*n.lineCount(ee),16)+3;F=Math.max(F,X)}),h.each(function(){var Y=m.select(this),ee=Y.select(".selector-rect"),Z=Y.select(".selector-text"),X=Z.node()&&e.bBox(Z.node()).width,ne=L.font.size*s,ce=n.lineCount(Z),Q=Math.max(X+10,g.minButtonWidth);Y.attr("transform",i(I+P,I)),ee.attr({x:0,y:0,width:Q,height:F}),n.positionText(Z,Q/2,F/2-(ce-1)*ne/2+3),P+=Q+5});var D=w._fullLayout._size,R=D.l+D.w*L.x,N=D.t+D.h*(1-L.y),z="left";a.isRightAnchor(L)&&(R-=P,z="right"),a.isCenterAnchor(L)&&(R-=P/2,z="center");var G="top";a.isBottomAnchor(L)&&(N-=F,G="bottom"),a.isMiddleAnchor(L)&&(N-=F/2,G="middle"),P=Math.ceil(P),F=Math.ceil(F),R=Math.round(R),N=Math.round(N),A.autoMargin(w,S+"-range-selector",{x:L.x,y:L.y,l:P*o[z],r:P*b[z],b:F*b[G],t:F*o[G]}),E.attr("transform",i(R,N))}},{"../../constants/alignment":483,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/cartesian/axis_ids":570,"../../plots/plots":628,"../../registry":647,"../color":367,"../drawing":389,"./constants":434,"./get_update_object":437,"@plotly/d3":58}],437:[function(t,B,V){var m=t("d3-time"),c=t("../../lib").titleCase;B.exports=function(e,a){var i=e._name,n={};if(a.step==="all")n[i+".autorange"]=!0;else{var r=A(e,a);n[i+".range[0]"]=r[0],n[i+".range[1]"]=r[1]}return n};function A(T,e){var a=T.range,i=new Date(T.r2l(a[1])),n=e.step,r=m["utc"+c(n)],v=e.count,s;switch(e.stepmode){case"backward":s=T.l2r(+r.offset(i,-v));break;case"todate":var o=r.offset(i,-v);s=T.l2r(+r.ceil(o));break}var b=a[1];return[s,b]}},{"../../lib":515,"d3-time":122}],438:[function(t,B,V){B.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:t("./attributes")}}},layoutAttributes:t("./attributes"),handleDefaults:t("./defaults"),draw:t("./draw")}},{"./attributes":433,"./defaults":435,"./draw":436}],439:[function(t,B,V){var m=t("../color/attributes");B.exports={bgcolor:{valType:"color",dflt:m.background,editType:"plot"},bordercolor:{valType:"color",dflt:m.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},{"../color/attributes":366}],440:[function(t,B,V){var m=t("../../plots/cartesian/axis_ids").list,c=t("../../plots/cartesian/autorange").getAutoRange,A=t("./constants");B.exports=function(e){for(var a=m(e,"x",!0),i=0;i<a.length;i++){var n=a[i],r=n[A.name];r&&r.visible&&r.autorange&&(r._input.autorange=!0,r._input.range=r.range=c(e,n))}}},{"../../plots/cartesian/autorange":565,"../../plots/cartesian/axis_ids":570,"./constants":441}],441:[function(t,B,V){B.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},{}],442:[function(t,B,V){var m=t("../../lib"),c=t("../../plot_api/plot_template"),A=t("../../plots/cartesian/axis_ids"),T=t("./attributes"),e=t("./oppaxis_attributes");B.exports=function(i,n,r){var v=i[r],s=n[r];if(!(v.rangeslider||n._requestRangeslider[s._id]))return;m.isPlainObject(v.rangeslider)||(v.rangeslider={});var o=v.rangeslider,b=c.newContainer(s,"rangeslider");function g(S,E){return m.coerce(o,b,T,S,E)}var d,f;function y(S,E){return m.coerce(d,f,e,S,E)}var l=g("visible");if(!!l){g("bgcolor",n.plot_bgcolor),g("bordercolor"),g("borderwidth"),g("thickness"),g("autorange",!s.isValidRange(o.range)),g("range");var x=n._subplots;if(x)for(var u=x.cartesian.filter(function(S){return S.substr(0,S.indexOf("y"))===A.name2id(r)}).map(function(S){return S.substr(S.indexOf("y"),S.length)}),M=m.simpleMap(u,A.id2name),_=0;_<M.length;_++){var p=M[_];d=o[p]||{},f=c.newContainer(b,p,"yaxis");var w=n[p],h;d.range&&w.isValidRange(d.range)&&(h="fixed");var L=y("rangemode",h);L!=="match"&&y("range",w.range.slice())}b._input=o}}},{"../../lib":515,"../../plot_api/plot_template":555,"../../plots/cartesian/axis_ids":570,"./attributes":439,"./oppaxis_attributes":446}],443:[function(t,B,V){var m=t("@plotly/d3"),c=t("../../registry"),A=t("../../plots/plots"),T=t("../../lib"),e=T.strTranslate,a=t("../drawing"),i=t("../color"),n=t("../titles"),r=t("../../plots/cartesian"),v=t("../../plots/cartesian/axis_ids"),s=t("../dragelement"),o=t("../../lib/setcursor"),b=t("./constants");B.exports=function(w){for(var h=w._fullLayout,L=h._rangeSliderData,S=0;S<L.length;S++){var E=L[S][b.name];E._clipId=E._id+"-"+h._uid}function P(I){return I._name}var F=h._infolayer.selectAll("g."+b.containerClassName).data(L,P);F.exit().each(function(I){var D=I[b.name];h._topdefs.select("#"+D._clipId).remove()}).remove(),L.length!==0&&(F.enter().append("g").classed(b.containerClassName,!0).attr("pointer-events","all"),F.each(function(I){var D=m.select(this),R=I[b.name],N=h[v.id2name(I.anchor)],z=R[v.id2name(I.anchor)];if(R.range){var G=T.simpleMap(R.range,I.r2l),Y=T.simpleMap(I.range,I.r2l),ee;Y[0]<Y[1]?ee=[Math.min(G[0],Y[0]),Math.max(G[1],Y[1])]:ee=[Math.max(G[0],Y[0]),Math.min(G[1],Y[1])],R.range=R._input.range=T.simpleMap(ee,I.l2r)}I.cleanRange("rangeslider.range");var Z=h._size,X=I.domain;R._width=Z.w*(X[1]-X[0]);var ne=Math.round(Z.l+Z.w*X[0]),ce=Math.round(Z.t+Z.h*(1-I._counterDomainMin)+(I.side==="bottom"?I._depth:0)+R._offsetShift+b.extraPad);D.attr("transform",e(ne,ce)),R._rl=T.simpleMap(R.range,I.r2l);var Q=R._rl[0],K=R._rl[1],U=K-Q;if(R.p2d=function(_e){return _e/R._width*U+Q},R.d2p=function(_e){return(_e-Q)/U*R._width},I.rangebreaks){var H=I.locateBreaks(Q,K);if(H.length){var q,re,j=0;for(q=0;q<H.length;q++)re=H[q],j+=re.max-re.min;var $=R._width/(K-Q-j),ie=[-$*Q];for(q=0;q<H.length;q++)re=H[q],ie.push(ie[ie.length-1]-$*(re.max-re.min));for(R.d2p=function(_e){for(var ue=ie[0],ye=0;ye<H.length;ye++){var xe=H[ye];if(_e>=xe.max)ue=ie[ye+1];else if(_e<xe.min)break}return ue+$*_e},q=0;q<H.length;q++)re=H[q],re.pmin=R.d2p(re.min),re.pmax=R.d2p(re.max);R.p2d=function(_e){for(var ue=ie[0],ye=0;ye<H.length;ye++){var xe=H[ye];if(_e>=xe.pmax)ue=ie[ye+1];else if(_e<xe.pmin)break}return(_e-ue)/$}}}if(z.rangemode!=="match"){var oe=N.r2l(z.range[0]),ae=N.r2l(z.range[1]),se=ae-oe;R.d2pOppAxis=function(_e){return(_e-oe)/se*R._height}}D.call(y,w,I,R).call(l,w,I,R).call(x,w,I,R).call(M,w,I,R,z).call(_,w,I,R).call(p,w,I,R),g(D,w,I,R),f(D,w,I,R,N,z),I.side==="bottom"&&n.draw(w,I._id+"title",{propContainer:I,propName:I._name+".title",placeholder:h._dfltTitle.x,attributes:{x:I._offset+I._length/2,y:ce+R._height+R._offsetShift+10+1.5*I.title.font.size,"text-anchor":"middle"}})}))};function g(w,h,L,S){if(h._context.staticPlot)return;var E=w.select("rect."+b.slideBoxClassName).node(),P=w.select("rect."+b.grabAreaMinClassName).node(),F=w.select("rect."+b.grabAreaMaxClassName).node();function I(){var D=m.event,R=D.target,N=D.clientX||D.touches[0].clientX,z=N-w.node().getBoundingClientRect().left,G=S.d2p(L._rl[0]),Y=S.d2p(L._rl[1]),ee=s.coverSlip();this.addEventListener("touchmove",Z),this.addEventListener("touchend",X),ee.addEventListener("mousemove",Z),ee.addEventListener("mouseup",X);function Z(ne){var ce=ne.clientX||ne.touches[0].clientX,Q=+ce-N,K,U,H;switch(R){case E:H="ew-resize",K=G+Q,U=Y+Q;break;case P:H="col-resize",K=G+Q,U=Y;break;case F:H="col-resize",K=G,U=Y+Q;break;default:H="ew-resize",K=z,U=z+Q;break}if(U<K){var q=U;U=K,K=q}S._pixelMin=K,S._pixelMax=U,o(m.select(ee),H),d(w,h,L,S)}function X(){ee.removeEventListener("mousemove",Z),ee.removeEventListener("mouseup",X),this.removeEventListener("touchmove",Z),this.removeEventListener("touchend",X),T.removeElement(ee)}}w.on("mousedown",I),w.on("touchstart",I)}function d(w,h,L,S){function E(I){return L.l2r(T.constrain(I,S._rl[0],S._rl[1]))}var P=E(S.p2d(S._pixelMin)),F=E(S.p2d(S._pixelMax));window.requestAnimationFrame(function(){c.call("_guiRelayout",h,L._name+".range",[P,F])})}function f(w,h,L,S,E,P){var F=b.handleWidth/2;function I(ne){return T.constrain(ne,0,S._width)}function D(ne){return T.constrain(ne,0,S._height)}function R(ne){return T.constrain(ne,-F,S._width+F)}var N=I(S.d2p(L._rl[0])),z=I(S.d2p(L._rl[1]));if(w.select("rect."+b.slideBoxClassName).attr("x",N).attr("width",z-N),w.select("rect."+b.maskMinClassName).attr("width",N),w.select("rect."+b.maskMaxClassName).attr("x",z).attr("width",S._width-z),P.rangemode!=="match"){var G=S._height-D(S.d2pOppAxis(E._rl[1])),Y=S._height-D(S.d2pOppAxis(E._rl[0]));w.select("rect."+b.maskMinOppAxisClassName).attr("x",N).attr("height",G).attr("width",z-N),w.select("rect."+b.maskMaxOppAxisClassName).attr("x",N).attr("y",Y).attr("height",S._height-Y).attr("width",z-N),w.select("rect."+b.slideBoxClassName).attr("y",G).attr("height",Y-G)}var ee=.5,Z=Math.round(R(N-F))-ee,X=Math.round(R(z-F))+ee;w.select("g."+b.grabberMinClassName).attr("transform",e(Z,ee)),w.select("g."+b.grabberMaxClassName).attr("transform",e(X,ee))}function y(w,h,L,S){var E=T.ensureSingle(w,"rect",b.bgClassName,function(D){D.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),P=S.borderwidth%2===0?S.borderwidth:S.borderwidth-1,F=-S._offsetShift,I=a.crispRound(h,S.borderwidth);E.attr({width:S._width+P,height:S._height+P,transform:e(F,F),"stroke-width":I}).call(i.stroke,S.bordercolor).call(i.fill,S.bgcolor)}function l(w,h,L,S){var E=h._fullLayout,P=T.ensureSingleById(E._topdefs,"clipPath",S._clipId,function(F){F.append("rect").attr({x:0,y:0})});P.select("rect").attr({width:S._width,height:S._height})}function x(w,h,L,S){var E=h.calcdata,P=w.selectAll("g."+b.rangePlotClassName).data(L._subplotsWith,T.identity);P.enter().append("g").attr("class",function(I){return b.rangePlotClassName+" "+I}).call(a.setClipUrl,S._clipId,h),P.order(),P.exit().remove();var F;P.each(function(I,D){var R=m.select(this),N=D===0,z=v.getFromId(h,I,"y"),G=z._name,Y=S[G],ee={data:[],layout:{xaxis:{type:L.type,domain:[0,1],range:S.range.slice(),calendar:L.calendar},width:S._width,height:S._height,margin:{t:0,b:0,l:0,r:0}},_context:h._context};L.rangebreaks&&(ee.layout.xaxis.rangebreaks=L.rangebreaks),ee.layout[G]={type:z.type,domain:[0,1],range:Y.rangemode!=="match"?Y.range.slice():z.range.slice(),calendar:z.calendar},z.rangebreaks&&(ee.layout[G].rangebreaks=z.rangebreaks),A.supplyDefaults(ee);var Z=ee._fullLayout.xaxis,X=ee._fullLayout[G];Z.clearCalc(),Z.setScale(),X.clearCalc(),X.setScale();var ne={id:I,plotgroup:R,xaxis:Z,yaxis:X,isRangePlot:!0};N?F=ne:(ne.mainplot="xy",ne.mainplotinfo=F),r.rangePlot(h,ne,u(E,I))})}function u(w,h){for(var L=[],S=0;S<w.length;S++){var E=w[S],P=E[0].trace;P.xaxis+P.yaxis===h&&L.push(E)}return L}function M(w,h,L,S,E){var P=T.ensureSingle(w,"rect",b.maskMinClassName,function(R){R.attr({x:0,y:0,"shape-rendering":"crispEdges"})});P.attr("height",S._height).call(i.fill,b.maskColor);var F=T.ensureSingle(w,"rect",b.maskMaxClassName,function(R){R.attr({y:0,"shape-rendering":"crispEdges"})});if(F.attr("height",S._height).call(i.fill,b.maskColor),E.rangemode!=="match"){var I=T.ensureSingle(w,"rect",b.maskMinOppAxisClassName,function(R){R.attr({y:0,"shape-rendering":"crispEdges"})});I.attr("width",S._width).call(i.fill,b.maskOppAxisColor);var D=T.ensureSingle(w,"rect",b.maskMaxOppAxisClassName,function(R){R.attr({y:0,"shape-rendering":"crispEdges"})});D.attr("width",S._width).style("border-top",b.maskOppBorder).call(i.fill,b.maskOppAxisColor)}}function _(w,h,L,S){if(!h._context.staticPlot){var E=T.ensureSingle(w,"rect",b.slideBoxClassName,function(P){P.attr({y:0,cursor:b.slideBoxCursor,"shape-rendering":"crispEdges"})});E.attr({height:S._height,fill:b.slideBoxFill})}}function p(w,h,L,S){var E=T.ensureSingle(w,"g",b.grabberMinClassName),P=T.ensureSingle(w,"g",b.grabberMaxClassName),F={x:0,width:b.handleWidth,rx:b.handleRadius,fill:i.background,stroke:i.defaultLine,"stroke-width":b.handleStrokeWidth,"shape-rendering":"crispEdges"},I={y:Math.round(S._height/4),height:Math.round(S._height/2)},D=T.ensureSingle(E,"rect",b.handleMinClassName,function(Y){Y.attr(F)});D.attr(I);var R=T.ensureSingle(P,"rect",b.handleMaxClassName,function(Y){Y.attr(F)});R.attr(I);var N={width:b.grabAreaWidth,x:0,y:0,fill:b.grabAreaFill,cursor:h._context.staticPlot?void 0:b.grabAreaCursor},z=T.ensureSingle(E,"rect",b.grabAreaMinClassName,function(Y){Y.attr(N)});z.attr("height",S._height);var G=T.ensureSingle(P,"rect",b.grabAreaMaxClassName,function(Y){Y.attr(N)});G.attr("height",S._height)}},{"../../lib":515,"../../lib/setcursor":536,"../../plots/cartesian":578,"../../plots/cartesian/axis_ids":570,"../../plots/plots":628,"../../registry":647,"../color":367,"../dragelement":386,"../drawing":389,"../titles":476,"./constants":441,"@plotly/d3":58}],444:[function(t,B,V){var m=t("../../plots/cartesian/axis_ids"),c=t("../../lib/svg_text_utils"),A=t("./constants"),T=t("../../constants/alignment").LINE_SPACING,e=A.name;function a(i){var n=i&&i[e];return n&&n.visible}V.isVisible=a,V.makeData=function(i){var n=m.list({_fullLayout:i},"x",!0),r=i.margin,v=[];if(!i._has("gl2d"))for(var s=0;s<n.length;s++){var o=n[s];if(a(o)){v.push(o);var b=o[e];b._id=e+o._id,b._height=(i.height-r.b-r.t)*b.thickness,b._offsetShift=Math.floor(b.borderwidth/2)}}i._rangeSliderData=v},V.autoMarginOpts=function(i,n){var r=i._fullLayout,v=n[e],s=n._id.charAt(0),o=0,b=0;if(n.side==="bottom"&&(o=n._depth,n.title.text!==r._dfltTitle[s])){b=1.5*n.title.font.size+10+v._offsetShift;var g=(n.title.text.match(c.BR_TAG_ALL)||[]).length;b+=g*n.title.font.size*T}return{x:0,y:n._counterDomainMin,l:0,r:0,t:0,b:v._height+o+Math.max(r.margin.b,b),pad:A.extraPad+v._offsetShift*2}}},{"../../constants/alignment":483,"../../lib/svg_text_utils":541,"../../plots/cartesian/axis_ids":570,"./constants":441}],445:[function(t,B,V){var m=t("../../lib"),c=t("./attributes"),A=t("./oppaxis_attributes"),T=t("./helpers");B.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:m.extendFlat({},c,{yaxis:A})}}},layoutAttributes:t("./attributes"),handleDefaults:t("./defaults"),calcAutorange:t("./calc_autorange"),draw:t("./draw"),isVisible:T.isVisible,makeData:T.makeData,autoMarginOpts:T.autoMarginOpts}},{"../../lib":515,"./attributes":439,"./calc_autorange":440,"./defaults":442,"./draw":443,"./helpers":444,"./oppaxis_attributes":446}],446:[function(t,B,V){B.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},{}],447:[function(t,B,V){var m=t("../annotations/attributes"),c=t("../../traces/scatter/attributes").line,A=t("../drawing/attributes").dash,T=t("../../lib/extend").extendFlat,e=t("../../plot_api/edit_types").overrideAll,a=t("../../plot_api/plot_template").templatedArray;t("../../constants/axis_placeable_objects"),B.exports=e(a("selection",{type:{valType:"enumerated",values:["rect","path"]},xref:T({},m.xref,{}),yref:T({},m.yref,{}),x0:{valType:"any"},x1:{valType:"any"},y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw"},line:{color:c.color,width:T({},c.width,{min:1,dflt:1}),dash:T({},A,{dflt:"dot"})}}),"arraydraw","from-root")},{"../../constants/axis_placeable_objects":484,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../traces/scatter/attributes":936,"../annotations/attributes":350,"../drawing/attributes":388}],448:[function(t,B,V){B.exports={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"}},{}],449:[function(t,B,V){var m=t("../../lib"),c=t("../../plots/cartesian/axes"),A=t("../../plots/array_container_defaults"),T=t("./attributes"),e=t("../shapes/helpers");B.exports=function(n,r){A(n,r,{name:"selections",handleItemDefaults:a});for(var v=r.selections,s=0;s<v.length;s++){var o=v[s];!o||o.path===void 0&&(o.x0===void 0||o.x1===void 0||o.y0===void 0||o.y1===void 0)&&(r.selections[s]=null)}};function a(i,n,r){function v(P,F){return m.coerce(i,n,T,P,F)}var s=v("path"),o=s?"path":"rect",b=v("type",o),g=b!=="path";g&&delete n.path,v("opacity"),v("line.color"),v("line.width"),v("line.dash");for(var d=["x","y"],f=0;f<2;f++){var y=d[f],l={_fullLayout:r},x,u,M,_=c.coerceRef(i,n,l,y);if(x=c.getFromId(l,_),x._selectionIndices.push(n._index),M=e.rangeToShapePosition(x),u=e.shapePositionToRange(x),g){var p=y+"0",w=y+"1",h=i[p],L=i[w];i[p]=u(i[p],!0),i[w]=u(i[w],!0),c.coercePosition(n,l,v,_,p),c.coercePosition(n,l,v,_,w);var S=n[p],E=n[w];S!==void 0&&E!==void 0&&(n[p]=M(S),n[w]=M(E),i[p]=h,i[w]=L)}}g&&m.noneOrAll(i,n,["x0","x1","y0","y1"])}},{"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"../shapes/helpers":469,"./attributes":447}],450:[function(t,B,V){var m=t("../shapes/draw_newshape/helpers").readPaths,c=t("../shapes/display_outlines"),A=t("../shapes/handle_outline").clearOutlineControllers,T=t("../color"),e=t("../drawing"),a=t("../../plot_api/plot_template").arrayEditor,i=t("../shapes/helpers"),n=i.getPathString;B.exports={draw:r,drawOne:s,activateLastSelection:g};function r(f){var y=f._fullLayout;A(f),y._selectionLayer.selectAll("path").remove();for(var l in y._plots){var x=y._plots[l].selectionLayer;x&&x.selectAll("path").remove()}for(var u=0;u<y.selections.length;u++)s(f,u)}function v(f){return f._context.editSelection}function s(f,y){f._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+y+'"]').remove();var l=i.makeSelectionsOptionsAndPlotinfo(f,y),x=l.options,u=l.plotinfo;if(!x._input)return;M(f._fullLayout._selectionLayer);function M(_){var p=n(f,x),w={"data-index":y,"fill-rule":"evenodd",d:p},h=x.opacity,L="rgba(0,0,0,0)",S=x.line.color||T.contrast(f._fullLayout.plot_bgcolor),E=x.line.width,P=x.line.dash;E||(E=5,P="solid");var F=v(f)&&f._fullLayout._activeSelectionIndex===y;F&&(L=f._fullLayout.activeselection.fillcolor,h=f._fullLayout.activeselection.opacity);for(var I=[],D=1;D>=0;D--){var R=_.append("path").attr(w).style("opacity",D?.1:h).call(T.stroke,S).call(T.fill,L).call(e.dashLine,D?"solid":P,D?4+E:E);if(o(R,f,x),F){var N=a(f.layout,"selections",x);R.style({cursor:"move"});var z={element:R.node(),plotinfo:u,gd:f,editHelpers:N,isActiveSelection:!0},G=m(p,f);c(G,R,z)}else R.style("pointer-events",D?"all":"none");I[D]=R}var Y=I[0],ee=I[1];ee.node().addEventListener("click",function(){return b(f,Y)})}}function o(f,y,l){var x=l.xref+l.yref;e.setClipUrl(f,"clip"+y._fullLayout._uid+x,y)}function b(f,y){if(!!v(f)){var l=y.node(),x=+l.getAttribute("data-index");if(x>=0){if(x===f._fullLayout._activeSelectionIndex){d(f);return}f._fullLayout._activeSelectionIndex=x,f._fullLayout._deactivateSelection=d,r(f)}}}function g(f){if(!!v(f)){var y=f._fullLayout.selections.length-1;f._fullLayout._activeSelectionIndex=y,f._fullLayout._deactivateSelection=d,r(f)}}function d(f){if(!!v(f)){var y=f._fullLayout._activeSelectionIndex;y>=0&&(A(f),delete f._fullLayout._activeSelectionIndex,r(f))}}},{"../../plot_api/plot_template":555,"../color":367,"../drawing":389,"../shapes/display_outlines":461,"../shapes/draw_newshape/helpers":466,"../shapes/handle_outline":468,"../shapes/helpers":469}],451:[function(t,B,V){var m=t("../../drawing/attributes").dash,c=t("../../../lib/extend").extendFlat;B.exports={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none"},line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:1,dflt:1,editType:"none"},dash:c({},m,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":505,"../../drawing/attributes":388}],452:[function(t,B,V){B.exports=function(c,A,T){T("newselection.mode");var e=T("newselection.line.width");e&&(T("newselection.line.color"),T("newselection.line.dash")),T("activeselection.fillcolor"),T("activeselection.opacity")}},{}],453:[function(t,B,V){var m=t("../../dragelement/helpers"),c=m.selectMode,A=t("../../shapes/handle_outline"),T=A.clearOutline,e=t("../../shapes/draw_newshape/helpers"),a=e.readPaths,i=e.writePaths,n=e.fixDatesForPaths;B.exports=function(v,s){if(!!v.length){var o=v[0][0];if(!!o){var b=o.getAttribute("d"),g=s.gd,d=g._fullLayout.newselection,f=s.plotinfo,y=f.xaxis,l=f.yaxis,x=s.isActiveSelection,u=s.dragmode,M=(g.layout||{}).selections||[];if(!c(u)&&x!==void 0){var _=g._fullLayout._activeSelectionIndex;if(_<M.length)switch(g._fullLayout.selections[_].type){case"rect":u="select";break;case"path":u="lasso";break}}var p=a(b,g,f,x),w={xref:y._id,yref:l._id,opacity:d.opacity,line:{color:d.line.color,width:d.line.width,dash:d.line.dash}},h;p.length===1&&(h=p[0]),h&&h.length===5&&u==="select"?(w.type="rect",w.x0=h[0][1],w.y0=h[0][2],w.x1=h[2][1],w.y1=h[2][2]):(w.type="path",y&&l&&n(p,y,l),w.path=i(p),h=null),T(g);for(var L=s.editHelpers,S=(L||{}).modifyItem,E=[],P=0;P<M.length;P++){var F=g._fullLayout.selections[P];if(!F){E[P]=F;continue}if(E[P]=F._input,x!==void 0&&P===g._fullLayout._activeSelectionIndex){var I=w;switch(F.type){case"rect":S("x0",I.x0),S("x1",I.x1),S("y0",I.y0),S("y1",I.y1);break;case"path":S("path",I.path);break}}}return x===void 0?(E.push(w),E):L?L.getUpdateObj():{}}}}},{"../../dragelement/helpers":385,"../../shapes/draw_newshape/helpers":466,"../../shapes/handle_outline":468}],454:[function(t,B,V){var m=t("../../lib").strTranslate;function c(a,i){switch(a.type){case"log":return a.p2d(i);case"date":return a.p2r(i,0,a.calendar);default:return a.p2r(i)}}function A(a,i){switch(a.type){case"log":return a.d2p(i);case"date":return a.r2p(i,0,a.calendar);default:return a.r2p(i)}}function T(a){var i=a._id.charAt(0)==="y"?1:0;return function(n){return c(a,n[i])}}function e(a){return m(a.xaxis._offset,a.yaxis._offset)}B.exports={p2r:c,r2p:A,axValue:T,getTransform:e}},{"../../lib":515}],455:[function(t,B,V){var m=t("./draw"),c=t("./select");B.exports={moduleType:"component",name:"selections",layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),supplyDrawNewSelectionDefaults:t("./draw_newselection/defaults"),includeBasePlot:t("../../plots/cartesian/include_components")("selections"),draw:m.draw,drawOne:m.drawOne,reselect:c.reselect,prepSelect:c.prepSelect,clearOutline:c.clearOutline,clearSelectionsCache:c.clearSelectionsCache,selectOnClick:c.selectOnClick}},{"../../plots/cartesian/include_components":577,"./attributes":447,"./defaults":449,"./draw":450,"./draw_newselection/defaults":452,"./select":456}],456:[function(t,B,V){var m=t("polybooljs"),c=t("point-in-polygon/nested"),A=t("../../registry"),T=t("../drawing").dashStyle,e=t("../color"),a=t("../fx"),i=t("../fx/helpers").makeEventData,n=t("../dragelement/helpers"),r=n.freeMode,v=n.rectMode,s=n.drawMode,o=n.openMode,b=n.selectMode,g=t("../shapes/helpers"),d=t("../shapes/constants"),f=t("../shapes/display_outlines"),y=t("../shapes/handle_outline").clearOutline,l=t("../shapes/draw_newshape/helpers"),x=l.handleEllipse,u=l.readPaths,M=t("../shapes/draw_newshape/newshapes"),_=t("./draw_newselection/newselections"),p=t("./draw").activateLastSelection,w=t("../../lib"),h=w.sorterAsc,L=t("../../lib/polygon"),S=t("../../lib/throttle"),E=t("../../plots/cartesian/axis_ids").getFromId,P=t("../../lib/clear_gl_canvases"),F=t("../../plot_api/subroutines").redrawReglTraces,I=t("./constants"),D=I.MINSELECT,R=L.filter,N=L.tester,z=t("./helpers"),G=z.p2r,Y=z.axValue,ee=z.getTransform;function Z(Xe){return Xe.subplot!==void 0}function X(Xe,at,Ge,Se,He){var Ke=!Z(Se),qe=r(He),Tt=v(He),mt=o(He),At=s(He),Ht=b(He),It=He==="drawline",Vt=He==="drawcircle",jt=It||Vt,Yt=Se.gd,or=Yt._fullLayout,Gr=Ht&&or.newselection.mode==="immediate"&&Ke,on=or._zoomlayer,Jr=Se.element.getBoundingClientRect(),ot=Se.plotinfo,er=ee(ot),Kt=at-Jr.left,fr=Ge-Jr.top;or._calcInverseTransform(Yt);var Ar=w.apply3DTransform(or._invTransform)(Kt,fr);Kt=Ar[0],fr=Ar[1];var et=or._invScaleX,$e=or._invScaleY,st=Kt,ct=fr,Mt="M"+Kt+","+fr,Ut=Se.xaxes[0],Pe=Se.yaxes[0],Ee=Ut._length,it=Pe._length,ut=Xe.altKey&&!(s(He)&&mt),vt,St,yt,Pt,Wt,ar,kr;H(Xe,Yt,Se),qe&&(vt=R([[Kt,fr]],I.BENDPX));var wr=on.selectAll("path.select-outline-"+ot.id).data([1]),Sr=At?or.newshape:or.newselection,Zr=At&&!mt?Sr.fillcolor:"rgba(0,0,0,0)",ir=Sr.line.color||(Ke?e.contrast(Yt._fullLayout.plot_bgcolor):"#7f7f7f");wr.enter().append("path").attr("class","select-outline select-outline-"+ot.id).style({opacity:At?Sr.opacity/2:1,"stroke-dasharray":T(Sr.line.dash,Sr.line.width),"stroke-width":Sr.line.width+"px","shape-rendering":"crispEdges"}).call(e.stroke,ir).call(e.fill,Zr).attr("fill-rule","evenodd").classed("cursor-move",!!At).attr("transform",er).attr("d",Mt+"Z");var xr=on.append("path").attr("class","zoombox-corners").style({fill:e.background,stroke:e.defaultLine,"stroke-width":1}).attr("transform",er).attr("d","M0,0Z"),Rr=or._uid+I.SELECTID,Br=[],Cr=ie(Yt,Se.xaxes,Se.yaxes,Se.subplot);Gr&&!Xe.shiftKey&&(Se._clearSubplotSelections=function(){if(!!Ke){var Dt=Ut._id,Zt=Pe._id;Ye(Yt,Dt,Zt,Cr);for(var sr=(Yt.layout||{}).selections||[],zr=[],Ur=!1,Lr=0;Lr<sr.length;Lr++){var Tr=or.selections[Lr];Tr.xref!==Dt||Tr.yref!==Zt?zr.push(sr[Lr]):Ur=!0}Ur&&(Yt._fullLayout._noEmitSelectedAtStart=!0,A.call("_guiRelayout",Yt,{selections:zr}))}});var nt=Et(Se);Se.moveFn=function(Dt,Zt){Se._clearSubplotSelections&&(Se._clearSubplotSelections(),Se._clearSubplotSelections=void 0),st=Math.max(0,Math.min(Ee,et*Dt+Kt)),ct=Math.max(0,Math.min(it,$e*Zt+fr));var sr=Math.abs(st-Kt),zr=Math.abs(ct-fr);if(Tt){var Ur,Lr,Tr;if(Ht){var Wr=or.selectdirection;switch(Wr==="any"?zr<Math.min(sr*.6,D)?Ur="h":sr<Math.min(zr*.6,D)?Ur="v":Ur="d":Ur=Wr,Ur){case"h":Lr=Vt?it/2:0,Tr=it;break;case"v":Lr=Vt?Ee/2:0,Tr=Ee;break}}if(At)switch(or.newshape.drawdirection){case"vertical":Ur="h",Lr=Vt?it/2:0,Tr=it;break;case"horizontal":Ur="v",Lr=Vt?Ee/2:0,Tr=Ee;break;case"ortho":sr<zr?(Ur="h",Lr=fr,Tr=ct):(Ur="v",Lr=Kt,Tr=st);break;default:Ur="d"}Ur==="h"?(Pt=jt?x(Vt,[st,Lr],[st,Tr]):[[Kt,Lr],[Kt,Tr],[st,Tr],[st,Lr]],Pt.xmin=jt?st:Math.min(Kt,st),Pt.xmax=jt?st:Math.max(Kt,st),Pt.ymin=Math.min(Lr,Tr),Pt.ymax=Math.max(Lr,Tr),xr.attr("d","M"+Pt.xmin+","+(fr-D)+"h-4v"+2*D+"h4ZM"+(Pt.xmax-1)+","+(fr-D)+"h4v"+2*D+"h-4Z")):Ur==="v"?(Pt=jt?x(Vt,[Lr,ct],[Tr,ct]):[[Lr,fr],[Lr,ct],[Tr,ct],[Tr,fr]],Pt.xmin=Math.min(Lr,Tr),Pt.xmax=Math.max(Lr,Tr),Pt.ymin=jt?ct:Math.min(fr,ct),Pt.ymax=jt?ct:Math.max(fr,ct),xr.attr("d","M"+(Kt-D)+","+Pt.ymin+"v-4h"+2*D+"v4ZM"+(Kt-D)+","+(Pt.ymax-1)+"v4h"+2*D+"v-4Z")):Ur==="d"&&(Pt=jt?x(Vt,[Kt,fr],[st,ct]):[[Kt,fr],[Kt,ct],[st,ct],[st,fr]],Pt.xmin=Math.min(Kt,st),Pt.xmax=Math.max(Kt,st),Pt.ymin=Math.min(fr,ct),Pt.ymax=Math.max(fr,ct),xr.attr("d","M0,0Z"))}else qe&&(vt.addPt([st,ct]),Pt=vt.filtered);if(Se.selectionDefs&&Se.selectionDefs.length?(yt=be(Se.mergedPolygons,Pt,ut),Pt.subtract=ut,St=U(Se.selectionDefs.concat([Pt]))):(yt=[Pt],St=N(Pt)),f(De(yt,mt),wr,Se),Ht){var An=Ae(Yt,!1),vn=An.eventData?An.eventData.points.slice():[];An=Ae(Yt,!1,St,Cr,Se),St=An.selectionTesters,kr=An.eventData;var Un;vt?Un=vt.filtered:Un=Ft(yt),S.throttle(Rr,I.SELECTDELAY,function(){Br=Ve(St,Cr);for(var Ln=Br.slice(),Zn=0;Zn<vn.length;Zn++){for(var Wn=vn[Zn],ya=!1,ka=0;ka<Ln.length;ka++)if(Ln[ka].curveNumber===Wn.curveNumber&&Ln[ka].pointNumber===Wn.pointNumber){ya=!0;break}ya||Ln.push(Wn)}Ln.length&&(kr||(kr={}),kr.points=Ln),nt(kr,Un),Xt(Yt,kr)})}},Se.clickFn=function(Dt,Zt){if(xr.remove(),Yt._fullLayout._activeShapeIndex>=0){Yt._fullLayout._deactivateShape(Yt);return}if(!At){var sr=or.clickmode;S.done(Rr).then(function(){if(S.clear(Rr),Dt===2){for(wr.remove(),Wt=0;Wt<Cr.length;Wt++)ar=Cr[Wt],ar._module.selectPoints(ar,!1);if(xe(Yt,Cr),j(Se),Ct(Yt),Cr.length){var zr=Cr[0].xaxis,Ur=Cr[0].yaxis;if(zr&&Ur){for(var Lr=[],Tr=Yt._fullLayout.selections,Wr=0;Wr<Tr.length;Wr++){var An=Tr[Wr];!An||(An.xref!==zr._id||An.yref!==Ur._id)&&Lr.push(An)}Lr.length<Tr.length&&(Yt._fullLayout._noEmitSelectedAtStart=!0,A.call("_guiRelayout",Yt,{selections:Lr}))}}}else sr.indexOf("select")>-1&&ne(Zt,Yt,Se.xaxes,Se.yaxes,Se.subplot,Se,wr),sr==="event"&&Nt(Yt,void 0);a.click(Yt,Zt)}).catch(w.error)}},Se.doneFn=function(){xr.remove(),S.done(Rr).then(function(){S.clear(Rr),!Gr&&Pt&&Se.selectionDefs&&(Pt.subtract=ut,Se.selectionDefs.push(Pt),Se.mergedPolygons.length=0,[].push.apply(Se.mergedPolygons,yt)),(Gr||At)&&j(Se,Gr),Se.doneFnCompleted&&Se.doneFnCompleted(Br),Ht&&Nt(Yt,kr)}).catch(w.error)}}function ne(Xe,at,Ge,Se,He,Ke,qe){var Tt=at._hoverdata,mt=at._fullLayout,At=mt.clickmode,Ht=At.indexOf("event")>-1,It=[],Vt,jt,Yt,or,Gr,on,Jr,ot,er,Kt;if(ae(Tt)){H(Xe,at,Ke),Vt=ie(at,Ge,Se,He);var fr=se(Tt,Vt),Ar=fr.pointNumbers.length>0;if(Ar?ue(Vt,fr):ye(Vt)&&(Jr=_e(fr))){for(qe&&qe.remove(),Kt=0;Kt<Vt.length;Kt++)jt=Vt[Kt],jt._module.selectPoints(jt,!1);xe(at,Vt),j(Ke),Ht&&Ct(at)}else{ot=Xe.shiftKey&&(Jr!==void 0?Jr:_e(fr)),Yt=ce(fr.pointNumber,fr.searchInfo,ot);var et=Ke.selectionDefs.concat([Yt]);for(or=U(et),Kt=0;Kt<Vt.length;Kt++)if(Gr=Vt[Kt]._module.selectPoints(Vt[Kt],or),on=ke(Gr,Vt[Kt]),It.length)for(var $e=0;$e<on.length;$e++)It.push(on[$e]);else It=on;if(er={points:It},xe(at,Vt,er),Yt&&Ke&&Ke.selectionDefs.push(Yt),qe){var st=Ke.mergedPolygons,ct=o(Ke.dragmode);f(De(st,ct),qe,Ke)}Ht&&Nt(at,er)}}}function ce(Xe,at,Ge){return{pointNumber:Xe,searchInfo:at,subtract:!!Ge}}function Q(Xe){return"pointNumber"in Xe&&"searchInfo"in Xe}function K(Xe){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(at,Ge,Se,He){var Ke=Xe.searchInfo.cd[0].trace._expandedIndex,qe=He.cd[0].trace._expandedIndex;return qe===Ke&&Se===Xe.pointNumber},isRect:!1,degenerate:!1,subtract:!!Xe.subtract}}function U(Xe){if(!Xe.length)return;for(var at=[],Ge=Q(Xe[0])?0:Xe[0][0][0],Se=Ge,He=Q(Xe[0])?0:Xe[0][0][1],Ke=He,qe=0;qe<Xe.length;qe++)if(Q(Xe[qe]))at.push(K(Xe[qe]));else{var Tt=N(Xe[qe]);Tt.subtract=!!Xe[qe].subtract,at.push(Tt),Ge=Math.min(Ge,Tt.xmin),Se=Math.max(Se,Tt.xmax),He=Math.min(He,Tt.ymin),Ke=Math.max(Ke,Tt.ymax)}function mt(At,Ht,It,Vt){for(var jt=!1,Yt=0;Yt<at.length;Yt++)at[Yt].contains(At,Ht,It,Vt)&&(jt=!at[Yt].subtract);return jt}return{xmin:Ge,xmax:Se,ymin:He,ymax:Ke,pts:[],contains:mt,isRect:!1,degenerate:!1}}function H(Xe,at,Ge){var Se=at._fullLayout,He=Ge.plotinfo,Ke=Ge.dragmode,qe=Se._lastSelectedSubplot&&Se._lastSelectedSubplot===He.id,Tt=(Xe.shiftKey||Xe.altKey)&&!(s(Ke)&&o(Ke));qe&&Tt&&He.selection&&He.selection.selectionDefs&&!Ge.selectionDefs?(Ge.selectionDefs=He.selection.selectionDefs,Ge.mergedPolygons=He.selection.mergedPolygons):(!Tt||!He.selection)&&j(Ge),qe||(y(at),Se._lastSelectedSubplot=He.id)}function q(Xe){return Xe._fullLayout._activeShapeIndex>=0}function re(Xe){return Xe._fullLayout._activeSelectionIndex>=0}function j(Xe,at){var Ge=Xe.dragmode,Se=Xe.plotinfo,He=Xe.gd;q(He)&&He._fullLayout._deactivateShape(He),re(He)&&He._fullLayout._deactivateSelection(He);var Ke=He._fullLayout,qe=Ke._zoomlayer,Tt=s(Ge),mt=b(Ge);if(Tt||mt){var At=qe.selectAll(".select-outline-"+Se.id);if(At&&He._fullLayout._outlining){var Ht;Tt&&(Ht=M(At,Xe)),Ht&&A.call("_guiRelayout",He,{shapes:Ht});var It;mt&&!Z(Xe)&&(It=_(At,Xe)),It&&(He._fullLayout._noEmitSelectedAtStart=!0,A.call("_guiRelayout",He,{selections:It}).then(function(){at&&p(He)})),He._fullLayout._outlining=!1}}Se.selection={},Se.selection.selectionDefs=Xe.selectionDefs=[],Se.selection.mergedPolygons=Xe.mergedPolygons=[]}function $(Xe){return Xe._id}function ie(Xe,at,Ge,Se){if(!Xe.calcdata)return[];var He=[],Ke=at.map($),qe=Ge.map($),Tt,mt,At;for(At=0;At<Xe.calcdata.length;At++)if(Tt=Xe.calcdata[At],mt=Tt[0].trace,!(mt.visible!==!0||!mt._module||!mt._module.selectPoints))if(Z({subplot:Se})&&(mt.subplot===Se||mt.geo===Se))He.push(oe(mt._module,Tt,at[0],Ge[0]));else if(mt.type==="splom"){if(mt._xaxes[Ke[0]]&&mt._yaxes[qe[0]]){var Ht=oe(mt._module,Tt,at[0],Ge[0]);Ht.scene=Xe._fullLayout._splomScenes[mt.uid],He.push(Ht)}}else if(mt.type==="sankey"){var It=oe(mt._module,Tt,at[0],Ge[0]);He.push(It)}else{if(Ke.indexOf(mt.xaxis)===-1||qe.indexOf(mt.yaxis)===-1)continue;He.push(oe(mt._module,Tt,E(Xe,mt.xaxis),E(Xe,mt.yaxis)))}return He}function oe(Xe,at,Ge,Se){return{_module:Xe,cd:at,xaxis:Ge,yaxis:Se}}function ae(Xe){return Xe&&Array.isArray(Xe)&&Xe[0].hoverOnBox!==!0}function se(Xe,at){var Ge=Xe[0],Se=-1,He=[],Ke,qe;for(qe=0;qe<at.length;qe++)if(Ke=at[qe],Ge.fullData._expandedIndex===Ke.cd[0].trace._expandedIndex){if(Ge.hoverOnBox===!0)break;Ge.pointNumber!==void 0?Se=Ge.pointNumber:Ge.binNumber!==void 0&&(Se=Ge.binNumber,He=Ge.pointNumbers);break}return{pointNumber:Se,pointNumbers:He,searchInfo:Ke}}function _e(Xe){var at=Xe.searchInfo.cd[0].trace,Ge=Xe.pointNumber,Se=Xe.pointNumbers,He=Se.length>0,Ke=He?Se[0]:Ge;return at.selectedpoints?at.selectedpoints.indexOf(Ke)>-1:!1}function ue(Xe,at){var Ge=[],Se,He,Ke,qe;for(qe=0;qe<Xe.length;qe++)Se=Xe[qe],Se.cd[0].trace.selectedpoints&&Se.cd[0].trace.selectedpoints.length>0&&Ge.push(Se);if(Ge.length===1&&(Ke=Ge[0]===at.searchInfo,Ke&&(He=at.searchInfo.cd[0].trace,He.selectedpoints.length===at.pointNumbers.length))){for(qe=0;qe<at.pointNumbers.length;qe++)if(He.selectedpoints.indexOf(at.pointNumbers[qe])<0)return!1;return!0}return!1}function ye(Xe){var at=0,Ge,Se,He;for(He=0;He<Xe.length;He++)if(Ge=Xe[He],Se=Ge.cd[0].trace,Se.selectedpoints&&(Se.selectedpoints.length>1||(at+=Se.selectedpoints.length,at>1)))return!1;return at===1}function xe(Xe,at,Ge){var Se;for(Se=0;Se<at.length;Se++){var He=at[Se].cd[0].trace._fullInput,Ke=Xe._fullLayout._tracePreGUI[He.uid]||{};Ke.selectedpoints===void 0&&(Ke.selectedpoints=He._input.selectedpoints||null)}var qe;if(Ge){var Tt=Ge.points||[];for(Se=0;Se<at.length;Se++)qe=at[Se].cd[0].trace,qe._input.selectedpoints=qe._fullInput.selectedpoints=[],qe._fullInput!==qe&&(qe.selectedpoints=[]);for(var mt=0;mt<Tt.length;mt++){var At=Tt[mt],Ht=At.data,It=At.fullData,Vt=At.pointIndex,jt=At.pointIndices;jt?([].push.apply(Ht.selectedpoints,jt),qe._fullInput!==qe&&[].push.apply(It.selectedpoints,jt)):(Ht.selectedpoints.push(Vt),qe._fullInput!==qe&&It.selectedpoints.push(Vt))}}else for(Se=0;Se<at.length;Se++)qe=at[Se].cd[0].trace,delete qe.selectedpoints,delete qe._input.selectedpoints,qe._fullInput!==qe&&delete qe._fullInput.selectedpoints;me(Xe,at)}function me(Xe,at){for(var Ge=!1,Se=0;Se<at.length;Se++){var He=at[Se],Ke=He.cd;A.traceIs(Ke[0].trace,"regl")&&(Ge=!0);var qe=He._module,Tt=qe.styleOnSelect||qe.style;Tt&&(Tt(Xe,Ke,Ke[0].node3),Ke[0].nodeRangePlot3&&Tt(Xe,Ke,Ke[0].nodeRangePlot3))}Ge&&(P(Xe),F(Xe))}function be(Xe,at,Ge){for(var Se=Ge?m.difference:m.union,He=Se({regions:Xe},{regions:[at]}),Ke=He.regions.reverse(),qe=0;qe<Ke.length;qe++){var Tt=Ke[qe];Tt.subtract=We(Tt,Ke.slice(0,qe))}return Ke}function ke(Xe,at){if(Array.isArray(Xe))for(var Ge=at.cd,Se=at.cd[0].trace,He=0;He<Xe.length;He++)Xe[He]=i(Xe[He],Se,Ge);return Xe}function De(Xe,at){for(var Ge=[],Se=0;Se<Xe.length;Se++){Ge[Se]=[];for(var He=0;He<Xe[Se].length;He++){Ge[Se][He]=[],Ge[Se][He][0]=He?"L":"M";for(var Ke=0;Ke<Xe[Se][He].length;Ke++)Ge[Se][He].push(Xe[Se][He][Ke])}at||Ge[Se].push(["Z",Ge[Se][0][1],Ge[Se][0][2]])}return Ge}function Ve(Xe,at){for(var Ge=[],Se,He,Ke=0;Ke<at.length;Ke++){var qe=at[Ke];He=qe._module.selectPoints(qe,Xe),Se=ke(He,qe),Ge=Ge.concat(Se)}return Ge}function Ae(Xe,at,Ge,Se,He){var Ke=!!Se,qe,Tt,mt;He&&(qe=He.plotinfo,Tt=He.xaxes[0]._id,mt=He.yaxes[0]._id);var At=[],Ht=[],It=Ie(Xe),Vt=Xe._fullLayout;if(qe){var jt=Vt._zoomlayer,Yt=Vt.dragmode,or=s(Yt),Gr=b(Yt);if(or||Gr){var on=E(Xe,Tt,"x"),Jr=E(Xe,mt,"y");if(on&&Jr){var ot=jt.selectAll(".select-outline-"+qe.id);if(ot&&Xe._fullLayout._outlining&&ot.length){for(var er=ot[0][0],Kt=er.getAttribute("d"),fr=u(Kt,Xe,qe),Ar=[],et=0;et<fr.length;et++){for(var $e=fr[et],st=[],ct=0;ct<$e.length;ct++)st.push([pt(on,$e[ct][1]),pt(Jr,$e[ct][2])]);st.xref=Tt,st.yref=mt,st.subtract=We(st,Ar),Ar.push(st)}It=It.concat(Ar)}}}}var Mt=Tt&&mt?[Tt+mt]:Vt._subplots.cartesian;Le(Xe);for(var Ut={},Pe=0;Pe<Mt.length;Pe++){var Ee=Mt[Pe],it=Ee.indexOf("y"),ut=Ee.slice(0,it),vt=Ee.slice(it),St=Tt&&mt?Ge:void 0;if(St=ze(It,ut,vt,St),St){var yt=Se;if(!Ke){var Pt=E(Xe,ut,"x"),Wt=E(Xe,vt,"y");yt=ie(Xe,[Pt],[Wt],Ee);for(var ar=0;ar<yt.length;ar++){var kr=yt[ar],wr=kr.cd[0],Sr=wr.trace;if(kr._module.name==="scattergl"&&!wr.t.xpx){var Zr=Sr.x,ir=Sr.y,xr=Sr._length;wr.t.xpx=[],wr.t.ypx=[];for(var Rr=0;Rr<xr;Rr++)wr.t.xpx[Rr]=Pt.c2p(Zr[Rr]),wr.t.ypx[Rr]=Wt.c2p(ir[Rr])}kr._module.name==="splom"&&(Ut[Sr.uid]||(Ut[Sr.uid]=!0))}}var Br=Ve(St,yt);At=At.concat(Br),Ht=Ht.concat(yt)}}var Cr={points:At};xe(Xe,Ht,Cr);var nt=Vt.clickmode,Dt=nt.indexOf("event")>-1&&at;if(!qe&&at){var Zt=Ie(Xe,!0);if(Zt.length){var sr=Zt[0].xref,zr=Zt[0].yref;if(sr&&zr){var Ur=Ft(Zt),Lr=zt([E(Xe,sr,"x"),E(Xe,zr,"y")]);Lr(Cr,Ur)}}Xe._fullLayout._noEmitSelectedAtStart?Xe._fullLayout._noEmitSelectedAtStart=!1:Dt&&Nt(Xe,Cr),Vt._reselect=!1}if(!qe&&Vt._deselect){var Tr=Vt._deselect;Tt=Tr.xref,mt=Tr.yref,je(Tt,mt,Ht)||Ye(Xe,Tt,mt,Se),Dt&&(Cr.points.length?Nt(Xe,Cr):Ct(Xe)),Vt._deselect=!1}return{eventData:Cr,selectionTesters:Ge}}function Le(Xe){var at=Xe.calcdata;if(!!at)for(var Ge=0;Ge<at.length;Ge++){var Se=at[Ge][0],He=Se.trace,Ke=Xe._fullLayout._splomScenes;if(Ke){var qe=Ke[He.uid];qe&&(qe.selectBatch=[])}}}function je(Xe,at,Ge){for(var Se=0;Se<Ge.length;Se++){var He=Ge[Se];if(He.xaxis&&He.xaxis._id===Xe&&He.yaxis&&He.yaxis._id===at)return!0}return!1}function Ye(Xe,at,Ge,Se){Se=ie(Xe,[E(Xe,at,"x")],[E(Xe,Ge,"y")],at+Ge);for(var He=0;He<Se.length;He++){var Ke=Se[He];Ke._module.selectPoints(Ke,!1)}xe(Xe,Se)}function ze(Xe,at,Ge,Se){for(var He,Ke=0;Ke<Xe.length;Ke++){var qe=Xe[Ke];if(!(at!==qe.xref||Ge!==qe.yref))if(He){var Tt=!!qe.subtract;He=be(He,qe,Tt),Se=U(He)}else He=[qe],Se=N(qe)}return Se}function Ie(Xe,at){for(var Ge=[],Se=Xe._fullLayout,He=Se.selections,Ke=He.length,qe=0;qe<Ke;qe++)if(!(at&&qe!==Se._activeSelectionIndex)){var Tt=He[qe];if(!!Tt){var mt=Tt.xref,At=Tt.yref,Ht=E(Xe,mt,"x"),It=E(Xe,At,"y"),Vt,jt,Yt,or,Gr;if(Tt.type==="rect"){Gr=[];var on=pt(Ht,Tt.x0),Jr=pt(Ht,Tt.x1),ot=pt(It,Tt.y0),er=pt(It,Tt.y1);Gr=[[on,ot],[on,er],[Jr,er],[Jr,ot]],Vt=Math.min(on,Jr),jt=Math.max(on,Jr),Yt=Math.min(ot,er),or=Math.max(ot,er),Gr.xmin=Vt,Gr.xmax=jt,Gr.ymin=Yt,Gr.ymax=or,Gr.xref=mt,Gr.yref=At,Gr.subtract=!1,Gr.isRect=!0,Ge.push(Gr)}else if(Tt.type==="path")for(var Kt=Tt.path.split("Z"),fr=[],Ar=0;Ar<Kt.length;Ar++){var et=Kt[Ar];if(!!et){et+="Z";var $e=g.extractPathCoords(et,d.paramIsX,"raw"),st=g.extractPathCoords(et,d.paramIsY,"raw");Vt=1/0,jt=-1/0,Yt=1/0,or=-1/0,Gr=[];for(var ct=0;ct<$e.length;ct++){var Mt=pt(Ht,$e[ct]),Ut=pt(It,st[ct]);Gr.push([Mt,Ut]),Vt=Math.min(Mt,Vt),jt=Math.max(Mt,jt),Yt=Math.min(Ut,Yt),or=Math.max(Ut,or)}Gr.xmin=Vt,Gr.xmax=jt,Gr.ymin=Yt,Gr.ymax=or,Gr.xref=mt,Gr.yref=At,Gr.subtract=We(Gr,fr),fr.push(Gr),Ge.push(Gr)}}}}return Ge}function We(Xe,at){for(var Ge=!1,Se=0;Se<at.length;Se++)for(var He=at[Se],Ke=0;Ke<Xe.length;Ke++)if(c(Xe[Ke],He)){Ge=!Ge;break}return Ge}function pt(Xe,at){return Xe.type==="date"&&(at=at.replace("_"," ")),Xe.type==="log"?Xe.c2p(at):Xe.r2p(at,null,Xe.calendar)}function Ft(Xe){for(var at=Xe.length,Ge=[],Se=0;Se<at;Se++){var He=Xe[Se];Ge=Ge.concat(He),Ge=Ge.concat([He[0]])}return Qt(Ge)}function Qt(Xe){return Xe.isRect=Xe.length===5&&Xe[0][0]===Xe[4][0]&&Xe[0][1]===Xe[4][1]&&Xe[0][0]===Xe[1][0]&&Xe[2][0]===Xe[3][0]&&Xe[0][1]===Xe[3][1]&&Xe[1][1]===Xe[2][1]||Xe[0][1]===Xe[1][1]&&Xe[2][1]===Xe[3][1]&&Xe[0][0]===Xe[3][0]&&Xe[1][0]===Xe[2][0],Xe.isRect&&(Xe.xmin=Math.min(Xe[0][0],Xe[2][0]),Xe.xmax=Math.max(Xe[0][0],Xe[2][0]),Xe.ymin=Math.min(Xe[0][1],Xe[2][1]),Xe.ymax=Math.max(Xe[0][1],Xe[2][1])),Xe}function zt(Xe){return function(at,Ge){for(var Se,He,Ke=0;Ke<Xe.length;Ke++){var qe=Xe[Ke],Tt=qe._id,mt=Tt.charAt(0);if(Ge.isRect){Se||(Se={});var At=Ge[mt+"min"],Ht=Ge[mt+"max"];At!==void 0&&Ht!==void 0&&(Se[Tt]=[G(qe,At),G(qe,Ht)].sort(h))}else He||(He={}),He[Tt]=Ge.map(Y(qe))}Se&&(at.range=Se),He&&(at.lassoPoints=He)}}function Et(Xe){var at=Xe.plotinfo;return at.fillRangeItems||zt(Xe.xaxes.concat(Xe.yaxes))}function Xt(Xe,at){Xe.emit("plotly_selecting",at)}function Nt(Xe,at){at&&(at.selections=(Xe.layout||{}).selections||[]),Xe.emit("plotly_selected",at)}function Ct(Xe){Xe.emit("plotly_deselect",null)}B.exports={reselect:Ae,prepSelect:X,clearOutline:y,clearSelectionsCache:j,selectOnClick:ne}},{"../../lib":515,"../../lib/clear_gl_canvases":499,"../../lib/polygon":527,"../../lib/throttle":542,"../../plot_api/subroutines":556,"../../plots/cartesian/axis_ids":570,"../../registry":647,"../color":367,"../dragelement/helpers":385,"../drawing":389,"../fx":407,"../fx/helpers":403,"../shapes/constants":459,"../shapes/display_outlines":461,"../shapes/draw_newshape/helpers":466,"../shapes/draw_newshape/newshapes":467,"../shapes/handle_outline":468,"../shapes/helpers":469,"./constants":448,"./draw":450,"./draw_newselection/newselections":453,"./helpers":454,"point-in-polygon/nested":254,polybooljs:255}],457:[function(t,B,V){var m=t("../annotations/attributes"),c=t("../../traces/scatter/attributes").line,A=t("../drawing/attributes").dash,T=t("../../lib/extend").extendFlat,e=t("../../plot_api/plot_template").templatedArray;t("../../constants/axis_placeable_objects"),B.exports=e("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:T({},m.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:T({},m.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:T({},c.color,{editType:"arraydraw"}),width:T({},c.width,{editType:"calc+arraydraw"}),dash:T({},A,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":484,"../../lib/extend":505,"../../plot_api/plot_template":555,"../../traces/scatter/attributes":936,"../annotations/attributes":350,"../drawing/attributes":388}],458:[function(t,B,V){var m=t("../../lib"),c=t("../../plots/cartesian/axes"),A=t("./constants"),T=t("./helpers");B.exports=function(v){var s=v._fullLayout,o=m.filterVisible(s.shapes);if(!(!o.length||!v._fullData.length))for(var b=0;b<o.length;b++){var g=o[b];g._extremes={};var d,f,y=c.getRefType(g.xref),l=c.getRefType(g.yref);if(g.xref!=="paper"&&y!=="domain"){var x=g.xsizemode==="pixel"?g.xanchor:g.x0,u=g.xsizemode==="pixel"?g.xanchor:g.x1;d=c.getFromId(v,g.xref),f=n(d,x,u,g.path,A.paramIsX),f&&(g._extremes[d._id]=c.findExtremes(d,f,e(g)))}if(g.yref!=="paper"&&l!=="domain"){var M=g.ysizemode==="pixel"?g.yanchor:g.y0,_=g.ysizemode==="pixel"?g.yanchor:g.y1;d=c.getFromId(v,g.yref),f=n(d,M,_,g.path,A.paramIsY),f&&(g._extremes[d._id]=c.findExtremes(d,f,a(g)))}}};function e(r){return i(r.line.width,r.xsizemode,r.x0,r.x1,r.path,!1)}function a(r){return i(r.line.width,r.ysizemode,r.y0,r.y1,r.path,!0)}function i(r,v,s,o,b,g){var d=r/2,f=g;if(v==="pixel"){var y=b?T.extractPathCoords(b,g?A.paramIsY:A.paramIsX):[s,o],l=m.aggNums(Math.max,null,y),x=m.aggNums(Math.min,null,y),u=x<0?Math.abs(x)+d:d,M=l>0?l+d:d;return{ppad:d,ppadplus:f?u:M,ppadminus:f?M:u}}else return{ppad:d}}function n(r,v,s,o,b){var g=r.type==="category"||r.type==="multicategory"?r.r2c:r.d2c;if(v!==void 0)return[g(v),g(s)];if(!!o){var d=1/0,f=-1/0,y=o.match(A.segmentRE),l,x,u,M,_;for(r.type==="date"&&(g=T.decodeDate(g)),l=0;l<y.length;l++)x=y[l],u=b[x.charAt(0)].drawn,u!==void 0&&(M=y[l].substr(1).match(A.paramRE),!(!M||M.length<u)&&(_=g(M[u]),_<d&&(d=_),_>f&&(f=_)));if(f>=d)return[d,f]}}},{"../../lib":515,"../../plots/cartesian/axes":566,"./constants":459,"./helpers":469}],459:[function(t,B,V){B.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],460:[function(t,B,V){var m=t("../../lib"),c=t("../../plots/cartesian/axes"),A=t("../../plots/array_container_defaults"),T=t("./attributes"),e=t("./helpers");B.exports=function(n,r){A(n,r,{name:"shapes",handleItemDefaults:a})};function a(i,n,r){function v(Y,ee){return m.coerce(i,n,T,Y,ee)}var s=v("visible");if(!!s){var o=v("path"),b=o?"path":"rect",g=v("type",b),d=g!=="path";d&&delete n.path,v("editable"),v("layer"),v("opacity"),v("fillcolor"),v("fillrule");var f=v("line.width");f&&(v("line.color"),v("line.dash"));for(var y=v("xsizemode"),l=v("ysizemode"),x=["x","y"],u=0;u<2;u++){var M=x[u],_=M+"anchor",p=M==="x"?y:l,w={_fullLayout:r},h,L,S,E=c.coerceRef(i,n,w,M,void 0,"paper"),P=c.getRefType(E);if(P==="range"?(h=c.getFromId(w,E),h._shapeIndices.push(n._index),S=e.rangeToShapePosition(h),L=e.shapePositionToRange(h)):L=S=m.identity,d){var F=.25,I=.75,D=M+"0",R=M+"1",N=i[D],z=i[R];i[D]=L(i[D],!0),i[R]=L(i[R],!0),p==="pixel"?(v(D,0),v(R,10)):(c.coercePosition(n,w,v,E,D,F),c.coercePosition(n,w,v,E,R,I)),n[D]=S(n[D]),n[R]=S(n[R]),i[D]=N,i[R]=z}if(p==="pixel"){var G=i[_];i[_]=L(i[_],!0),c.coercePosition(n,w,v,E,_,.25),n[_]=S(n[_]),i[_]=G}}d&&m.noneOrAll(i,n,["x0","x1","y0","y1"])}}},{"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"./attributes":457,"./helpers":469}],461:[function(t,B,V){var m=t("../../lib"),c=m.strTranslate,A=t("../dragelement"),T=t("../dragelement/helpers"),e=T.drawMode,a=T.selectMode,i=t("../../registry"),n=t("../color"),r=t("./draw_newshape/constants"),v=r.i000,s=r.i090,o=r.i180,b=r.i270,g=t("./handle_outline"),d=g.clearOutlineControllers,f=t("./draw_newshape/helpers"),y=f.pointsOnRectangle,l=f.pointsOnEllipse,x=f.writePaths,u=t("./draw_newshape/newshapes"),M=t("../selections/draw_newselection/newselections");B.exports=function h(L,S,E,P){P||(P=0);var F=E.gd;function I(){h(L,S,E,P++),l(L[0])&&D({redrawing:!0})}function D(ue){var ye={};E.isActiveShape!==void 0&&(E.isActiveShape=!1,ye=u(S,E)),E.isActiveSelection!==void 0&&(E.isActiveSelection=!1,ye=M(S,E),F._fullLayout._reselect=!0),Object.keys(ye).length&&i.call((ue||{}).redrawing?"relayout":"_guiRelayout",F,ye)}var R=F._fullLayout,N=R._zoomlayer,z=E.dragmode,G=e(z),Y=a(z);(G||Y)&&(F._fullLayout._outlining=!0),d(F),S.attr("d",x(L));var ee,Z,X,ne,ce;if(!P&&(E.isActiveShape||E.isActiveSelection)){ce=_([],L);var Q=N.append("g").attr("class","outline-controllers");j(Q),_e()}function K(ue){X=+ue.srcElement.getAttribute("data-i"),ne=+ue.srcElement.getAttribute("data-j"),ee[X][ne].moveFn=U}function U(ue,ye){if(!!L.length){var xe=ce[X][ne][1],me=ce[X][ne][2],be=L[X],ke=be.length;if(y(be)){var De=ue,Ve=ye;if(E.isActiveSelection){var Ae=p(be,ne);Ae[1]===be[ne][1]?Ve=0:De=0}for(var Le=0;Le<ke;Le++)if(Le!==ne){var je=be[Le];je[1]===be[ne][1]&&(je[1]=xe+De),je[2]===be[ne][2]&&(je[2]=me+Ve)}if(be[ne][1]=xe+De,be[ne][2]=me+Ve,!y(be))for(var Ye=0;Ye<ke;Ye++)for(var ze=0;ze<be[Ye].length;ze++)be[Ye][ze]=ce[X][Ye][ze]}else be[ne][1]=xe+ue,be[ne][2]=me+ye;I()}}function H(){D()}function q(){if(!!L.length&&!!L[X]&&!!L[X].length){for(var ue=[],ye=0;ye<L[X].length;ye++)ye!==ne&&ue.push(L[X][ye]);ue.length>1&&!(ue.length===2&&ue[1][0]==="Z")&&(ne===0&&(ue[0][0]="M"),L[X]=ue,I(),D())}}function re(ue,ye){if(ue===2){X=+ye.srcElement.getAttribute("data-i"),ne=+ye.srcElement.getAttribute("data-j");var xe=L[X];!y(xe)&&!l(xe)&&q()}}function j(ue){ee=[];for(var ye=0;ye<L.length;ye++){var xe=L[ye],me=y(xe),be=!me&&l(xe);ee[ye]=[];for(var ke=xe.length,De=0;De<ke;De++)if(xe[De][0]!=="Z"&&!(be&&De!==v&&De!==s&&De!==o&&De!==b)){var Ve=me&&E.isActiveSelection,Ae;Ve&&(Ae=p(xe,De));var Le=xe[De][1],je=xe[De][2],Ye=ue.append(Ve?"rect":"circle").attr("data-i",ye).attr("data-j",De).style({fill:n.background,stroke:n.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(Ve){var ze=Ae[1]-Le,Ie=Ae[2]-je,We=Ie?5:Math.max(Math.min(25,Math.abs(ze)-5),5),pt=ze?5:Math.max(Math.min(25,Math.abs(Ie)-5),5);Ye.classed(Ie?"cursor-ew-resize":"cursor-ns-resize",!0).attr("width",We).attr("height",pt).attr("x",Le-We/2).attr("y",je-pt/2).attr("transform",c(ze/2,Ie/2))}else Ye.classed("cursor-grab",!0).attr("r",5).attr("cx",Le).attr("cy",je);ee[ye][De]={element:Ye.node(),gd:F,prepFn:K,doneFn:H,clickFn:re},A.init(ee[ye][De])}}}function $(ue,ye){if(!!L.length)for(var xe=0;xe<L.length;xe++)for(var me=0;me<L[xe].length;me++)for(var be=0;be+2<L[xe][me].length;be+=2)L[xe][me][be+1]=ce[xe][me][be+1]+ue,L[xe][me][be+2]=ce[xe][me][be+2]+ye}function ie(ue,ye){$(ue,ye),I()}function oe(ue){X=+ue.srcElement.getAttribute("data-i"),X||(X=0),Z[X].moveFn=ie}function ae(){D()}function se(ue){ue===2&&w(F)}function _e(){if(Z=[],!!L.length){var ue=0;Z[ue]={element:S[0][0],gd:F,prepFn:oe,doneFn:ae,clickFn:se},A.init(Z[ue])}}};function _(h,L){for(var S=0;S<L.length;S++){var E=L[S];h[S]=[];for(var P=0;P<E.length;P++){h[S][P]=[];for(var F=0;F<E[P].length;F++)h[S][P][F]=E[P][F]}}return h}function p(h,L){var S=h[L][1],E=h[L][2],P=h.length,F,I,D;return F=(L+1)%P,I=h[F][1],D=h[F][2],I===S&&D===E&&(F=(L+2)%P,I=h[F][1],D=h[F][2]),[F,I,D]}function w(h){if(!!a(h._fullLayout.dragmode)){d(h);var L=h._fullLayout._activeSelectionIndex,S=(h.layout||{}).selections||[];if(L<S.length){for(var E=[],P=0;P<S.length;P++)P!==L&&E.push(S[P]);delete h._fullLayout._activeSelectionIndex;var F=h._fullLayout.selections[L];h._fullLayout._deselect={xref:F.xref,yref:F.yref},i.call("_guiRelayout",h,{selections:E})}}}},{"../../lib":515,"../../registry":647,"../color":367,"../dragelement":386,"../dragelement/helpers":385,"../selections/draw_newselection/newselections":453,"./draw_newshape/constants":464,"./draw_newshape/helpers":466,"./draw_newshape/newshapes":467,"./handle_outline":468}],462:[function(t,B,V){var m=t("../../registry"),c=t("../../lib"),A=t("../../plots/cartesian/axes"),T=t("./draw_newshape/helpers").readPaths,e=t("./display_outlines"),a=t("./handle_outline").clearOutlineControllers,i=t("../color"),n=t("../drawing"),r=t("../../plot_api/plot_template").arrayEditor,v=t("../dragelement"),s=t("../../lib/setcursor"),o=t("./constants"),b=t("./helpers"),g=b.getPathString;B.exports={draw:d,drawOne:l,eraseActiveShape:w};function d(h){var L=h._fullLayout;L._shapeUpperLayer.selectAll("path").remove(),L._shapeLowerLayer.selectAll("path").remove();for(var S in L._plots){var E=L._plots[S].shapelayer;E&&E.selectAll("path").remove()}for(var P=0;P<L.shapes.length;P++)L.shapes[P].visible&&l(h,P)}function f(h){return!!h._fullLayout._outlining}function y(h){return!h._context.edits.shapePosition}function l(h,L){h._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+L+'"]').remove();var S=b.makeShapesOptionsAndPlotinfo(h,L),E=S.options,P=S.plotinfo;if(!E._input||E.visible===!1)return;if(E.layer!=="below")I(h._fullLayout._shapeUpperLayer);else if(E.xref==="paper"||E.yref==="paper")I(h._fullLayout._shapeLowerLayer);else if(P._hadPlotinfo){var F=P.mainplotinfo||P;I(F.shapelayer)}else I(h._fullLayout._shapeLowerLayer);function I(D){var R=g(h,E),N={"data-index":L,"fill-rule":E.fillrule,d:R},z=E.opacity,G=E.fillcolor,Y=E.line.width?E.line.color:"rgba(0,0,0,0)",ee=E.line.width,Z=E.line.dash;!ee&&E.editable===!0&&(ee=5,Z="solid");var X=R[R.length-1]!=="Z",ne=y(h)&&E.editable&&h._fullLayout._activeShapeIndex===L;ne&&(G=X?"rgba(0,0,0,0)":h._fullLayout.activeshape.fillcolor,z=h._fullLayout.activeshape.opacity);var ce=D.append("path").attr(N).style("opacity",z).call(i.stroke,Y).call(i.fill,G).call(n.dashLine,Z,ee);x(ce,h,E);var Q;if((ne||h._context.edits.shapePosition)&&(Q=r(h.layout,"shapes",E)),ne){ce.style({cursor:"move"});var K={element:ce.node(),plotinfo:P,gd:h,editHelpers:Q,isActiveShape:!0},U=T(R,h);e(U,ce,K)}else h._context.edits.shapePosition?u(h,ce,E,L,D,Q):E.editable===!0&&ce.style("pointer-events",X||i.opacity(G)*z<=.5?"stroke":"all");ce.node().addEventListener("click",function(){return _(h,ce)})}}function x(h,L,S){var E=(S.xref+S.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");n.setClipUrl(h,E?"clip"+L._fullLayout._uid+E:null,L)}function u(h,L,S,E,P,F){var I=10,D=10,R=S.xsizemode==="pixel",N=S.ysizemode==="pixel",z=S.type==="line",G=S.type==="path",Y=F.modifyItem,ee,Z,X,ne,ce,Q,K,U,H,q,re,j,$,ie,oe,ae=A.getFromId(h,S.xref),se=A.getRefType(S.xref),_e=A.getFromId(h,S.yref),ue=A.getRefType(S.yref),ye=b.getDataToPixel(h,ae,!1,se),xe=b.getDataToPixel(h,_e,!0,ue),me=b.getPixelToData(h,ae,!1,se),be=b.getPixelToData(h,_e,!0,ue),ke=Ae(),De={element:ke.node(),gd:h,prepFn:Ye,doneFn:ze,clickFn:Ie},Ve;v.init(De),ke.node().onmousemove=je;function Ae(){return z?Le():L}function Le(){var Et=10,Xt=Math.max(S.line.width,Et),Nt=P.append("g").attr("data-index",E);Nt.append("path").attr("d",L.attr("d")).style({cursor:"move","stroke-width":Xt,"stroke-opacity":"0"});var Ct={"fill-opacity":"0"},Xe=Math.max(Xt/2,Et);return Nt.append("circle").attr({"data-line-point":"start-point",cx:R?ye(S.xanchor)+S.x0:ye(S.x0),cy:N?xe(S.yanchor)-S.y0:xe(S.y0),r:Xe}).style(Ct).classed("cursor-grab",!0),Nt.append("circle").attr({"data-line-point":"end-point",cx:R?ye(S.xanchor)+S.x1:ye(S.x1),cy:N?xe(S.yanchor)-S.y1:xe(S.y1),r:Xe}).style(Ct).classed("cursor-grab",!0),Nt}function je(Et){if(f(h)){Ve=null;return}if(z)Et.target.tagName==="path"?Ve="move":Ve=Et.target.attributes["data-line-point"].value==="start-point"?"resize-over-start-point":"resize-over-end-point";else{var Xt=De.element.getBoundingClientRect(),Nt=Xt.right-Xt.left,Ct=Xt.bottom-Xt.top,Xe=Et.clientX-Xt.left,at=Et.clientY-Xt.top,Ge=!G&&Nt>I&&Ct>D&&!Et.shiftKey?v.getCursor(Xe/Nt,1-at/Ct):"move";s(L,Ge),Ve=Ge.split("-")[0]}}function Ye(Et){f(h)||(R&&(ce=ye(S.xanchor)),N&&(Q=xe(S.yanchor)),S.type==="path"?oe=S.path:(ee=R?S.x0:ye(S.x0),Z=N?S.y0:xe(S.y0),X=R?S.x1:ye(S.x1),ne=N?S.y1:xe(S.y1)),ee<X?(H=ee,$="x0",q=X,ie="x1"):(H=X,$="x1",q=ee,ie="x0"),!N&&Z<ne||N&&Z>ne?(K=Z,re="y0",U=ne,j="y1"):(K=ne,re="y1",U=Z,j="y0"),je(Et),Ft(P,S),zt(L,S,h),De.moveFn=Ve==="move"?We:pt,De.altKey=Et.altKey)}function ze(){f(h)||(s(L),Qt(P),x(L,h,S),m.call("_guiRelayout",h,F.getUpdateObj()))}function Ie(){f(h)||Qt(P)}function We(Et,Xt){if(S.type==="path"){var Nt=function(at){return at},Ct=Nt,Xe=Nt;R?Y("xanchor",S.xanchor=me(ce+Et)):(Ct=function(Ge){return me(ye(Ge)+Et)},ae&&ae.type==="date"&&(Ct=b.encodeDate(Ct))),N?Y("yanchor",S.yanchor=be(Q+Xt)):(Xe=function(Ge){return be(xe(Ge)+Xt)},_e&&_e.type==="date"&&(Xe=b.encodeDate(Xe))),Y("path",S.path=M(oe,Ct,Xe))}else R?Y("xanchor",S.xanchor=me(ce+Et)):(Y("x0",S.x0=me(ee+Et)),Y("x1",S.x1=me(X+Et))),N?Y("yanchor",S.yanchor=be(Q+Xt)):(Y("y0",S.y0=be(Z+Xt)),Y("y1",S.y1=be(ne+Xt)));L.attr("d",g(h,S)),Ft(P,S)}function pt(Et,Xt){if(G){var Nt=function(Yt){return Yt},Ct=Nt,Xe=Nt;R?Y("xanchor",S.xanchor=me(ce+Et)):(Ct=function(or){return me(ye(or)+Et)},ae&&ae.type==="date"&&(Ct=b.encodeDate(Ct))),N?Y("yanchor",S.yanchor=be(Q+Xt)):(Xe=function(or){return be(xe(or)+Xt)},_e&&_e.type==="date"&&(Xe=b.encodeDate(Xe))),Y("path",S.path=M(oe,Ct,Xe))}else if(z){if(Ve==="resize-over-start-point"){var at=ee+Et,Ge=N?Z-Xt:Z+Xt;Y("x0",S.x0=R?at:me(at)),Y("y0",S.y0=N?Ge:be(Ge))}else if(Ve==="resize-over-end-point"){var Se=X+Et,He=N?ne-Xt:ne+Xt;Y("x1",S.x1=R?Se:me(Se)),Y("y1",S.y1=N?He:be(He))}}else{var Ke=function(Yt){return Ve.indexOf(Yt)!==-1},qe=Ke("n"),Tt=Ke("s"),mt=Ke("w"),At=Ke("e"),Ht=qe?K+Xt:K,It=Tt?U+Xt:U,Vt=mt?H+Et:H,jt=At?q+Et:q;N&&(qe&&(Ht=K-Xt),Tt&&(It=U-Xt)),(!N&&It-Ht>D||N&&Ht-It>D)&&(Y(re,S[re]=N?Ht:be(Ht)),Y(j,S[j]=N?It:be(It))),jt-Vt>I&&(Y($,S[$]=R?Vt:me(Vt)),Y(ie,S[ie]=R?jt:me(jt)))}L.attr("d",g(h,S)),Ft(P,S)}function Ft(Et,Xt){(R||N)&&Nt();function Nt(){var Ct=Xt.type!=="path",Xe=Et.selectAll(".visual-cue").data([0]),at=1;Xe.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":at}).classed("visual-cue",!0);var Ge=ye(R?Xt.xanchor:c.midRange(Ct?[Xt.x0,Xt.x1]:b.extractPathCoords(Xt.path,o.paramIsX))),Se=xe(N?Xt.yanchor:c.midRange(Ct?[Xt.y0,Xt.y1]:b.extractPathCoords(Xt.path,o.paramIsY)));if(Ge=b.roundPositionForSharpStrokeRendering(Ge,at),Se=b.roundPositionForSharpStrokeRendering(Se,at),R&&N){var He="M"+(Ge-1-at)+","+(Se-1-at)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";Xe.attr("d",He)}else if(R){var Ke="M"+(Ge-1-at)+","+(Se-9-at)+"v18 h2 v-18 Z";Xe.attr("d",Ke)}else{var qe="M"+(Ge-9-at)+","+(Se-1-at)+"h18 v2 h-18 Z";Xe.attr("d",qe)}}}function Qt(Et){Et.selectAll(".visual-cue").remove()}function zt(Et,Xt,Nt){var Ct=Xt.xref,Xe=Xt.yref,at=A.getFromId(Nt,Ct),Ge=A.getFromId(Nt,Xe),Se="";Ct!=="paper"&&!at.autorange&&(Se+=Ct),Xe!=="paper"&&!Ge.autorange&&(Se+=Xe),n.setClipUrl(Et,Se?"clip"+Nt._fullLayout._uid+Se:null,Nt)}}function M(h,L,S){return h.replace(o.segmentRE,function(E){var P=0,F=E.charAt(0),I=o.paramIsX[F],D=o.paramIsY[F],R=o.numParams[F],N=E.substr(1).replace(o.paramRE,function(z){return P>=R||(I[P]?z=L(z):D[P]&&(z=S(z)),P++),z});return F+N})}function _(h,L){if(!!y(h)){var S=L.node(),E=+S.getAttribute("data-index");if(E>=0){if(E===h._fullLayout._activeShapeIndex){p(h);return}h._fullLayout._activeShapeIndex=E,h._fullLayout._deactivateShape=p,d(h)}}}function p(h){if(!!y(h)){var L=h._fullLayout._activeShapeIndex;L>=0&&(a(h),delete h._fullLayout._activeShapeIndex,d(h))}}function w(h){if(!!y(h)){a(h);var L=h._fullLayout._activeShapeIndex,S=(h.layout||{}).shapes||[];if(L<S.length){for(var E=[],P=0;P<S.length;P++)P!==L&&E.push(S[P]);delete h._fullLayout._activeShapeIndex,m.call("_guiRelayout",h,{shapes:E})}}}},{"../../lib":515,"../../lib/setcursor":536,"../../plot_api/plot_template":555,"../../plots/cartesian/axes":566,"../../registry":647,"../color":367,"../dragelement":386,"../drawing":389,"./constants":459,"./display_outlines":461,"./draw_newshape/helpers":466,"./handle_outline":468,"./helpers":469}],463:[function(t,B,V){var m=t("../../drawing/attributes").dash,c=t("../../../lib/extend").extendFlat;B.exports={newshape:{line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:0,dflt:4,editType:"none"},dash:c({},m,{dflt:"solid",editType:"none"}),editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none"},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":505,"../../drawing/attributes":388}],464:[function(t,B,V){var m=32;B.exports={CIRCLE_SIDES:m,i000:0,i090:m/4,i180:m/2,i270:m/4*3,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},{}],465:[function(t,B,V){var m=t("../../color");B.exports=function(A,T,e){e("newshape.drawdirection"),e("newshape.layer"),e("newshape.fillcolor"),e("newshape.fillrule"),e("newshape.opacity");var a=e("newshape.line.width");if(a){var i=(A||{}).plot_bgcolor||"#FFF";e("newshape.line.color",m.contrast(i)),e("newshape.line.dash")}e("activeshape.fillcolor"),e("activeshape.opacity")}},{"../../color":367}],466:[function(t,B,V){var m=t("parse-svg-path"),c=t("./constants"),A=c.CIRCLE_SIDES,T=c.SQRT2,e=t("../../selections/helpers"),a=e.p2r,i=e.r2p,n=[0,3,4,5,6,1,2],r=[0,3,4,1,2];V.writePaths=function(o){var b=o.length;if(!b)return"M0,0Z";for(var g="",d=0;d<b;d++)for(var f=o[d].length,y=0;y<f;y++){var l=o[d][y][0];if(l==="Z")g+="Z";else for(var x=o[d][y].length,u=0;u<x;u++){var M=u;l==="Q"||l==="S"?M=r[u]:l==="C"&&(M=n[u]),g+=o[d][y][M],u>0&&u<x-1&&(g+=",")}}return g},V.readPaths=function(o,b,g,d){var f=m(o),y=[],l=-1,x=function(){l++,y[l]=[]},u,M=0,_=0,p,w,h=function(){p=M,w=_};h();for(var L=0;L<f.length;L++){var S=[],E,P,F,I,D=f[L][0],R=D;switch(D){case"M":x(),M=+f[L][1],_=+f[L][2],S.push([R,M,_]),h();break;case"Q":case"S":E=+f[L][1],F=+f[L][2],M=+f[L][3],_=+f[L][4],S.push([R,M,_,E,F]);break;case"C":E=+f[L][1],F=+f[L][2],P=+f[L][3],I=+f[L][4],M=+f[L][5],_=+f[L][6],S.push([R,M,_,E,F,P,I]);break;case"T":case"L":M=+f[L][1],_=+f[L][2],S.push([R,M,_]);break;case"H":R="L",M=+f[L][1],S.push([R,M,_]);break;case"V":R="L",_=+f[L][1],S.push([R,M,_]);break;case"A":R="L";var N=+f[L][1],z=+f[L][2];+f[L][4]||(N=-N,z=-z);var G=M-N,Y=_;for(u=1;u<=A/2;u++){var ee=2*Math.PI*u/A;S.push([R,G+N*Math.cos(ee),Y+z*Math.sin(ee)])}break;case"Z":(M!==p||_!==w)&&(M=p,_=w,S.push([R,M,_]));break}for(var Z=(g||{}).domain,X=b._fullLayout._size,ne=g&&g.xsizemode==="pixel",ce=g&&g.ysizemode==="pixel",Q=d===!1,K=0;K<S.length;K++){for(u=0;u+2<7;u+=2){var U=S[K][u+1],H=S[K][u+2];U===void 0||H===void 0||(M=U,_=H,g&&(g.xaxis&&g.xaxis.p2r?(Q&&(U-=g.xaxis._offset),ne?U=i(g.xaxis,g.xanchor)+U:U=a(g.xaxis,U)):(Q&&(U-=X.l),Z?U=Z.x[0]+U/X.w:U=U/X.w),g.yaxis&&g.yaxis.p2r?(Q&&(H-=g.yaxis._offset),ce?H=i(g.yaxis,g.yanchor)-H:H=a(g.yaxis,H)):(Q&&(H-=X.t),Z?H=Z.y[1]-H/X.h:H=1-H/X.h)),S[K][u+1]=U,S[K][u+2]=H)}y[l].push(S[K].slice())}}return y};function v(o,b){return Math.abs(o-b)<=1e-6}function s(o,b){var g=b[1]-o[1],d=b[2]-o[2];return Math.sqrt(g*g+d*d)}V.pointsOnRectangle=function(o){var b=o.length;if(b!==5)return!1;for(var g=1;g<3;g++){var d=o[0][g]-o[1][g],f=o[3][g]-o[2][g];if(!v(d,f))return!1;var y=o[0][g]-o[3][g],l=o[1][g]-o[2][g];if(!v(y,l))return!1}return!v(o[0][1],o[1][1])&&!v(o[0][1],o[3][1])?!1:!!(s(o[0],o[1])*s(o[0],o[3]))},V.pointsOnEllipse=function(o){var b=o.length;if(b!==A+1)return!1;b=A;for(var g=0;g<b;g++){var d=(b*2-g)%b,f=(b/2+d)%b,y=(b/2+g)%b;if(!v(s(o[g],o[y]),s(o[d],o[f])))return!1}return!0},V.handleEllipse=function(o,b,g){if(!o)return[b,g];var d=V.ellipseOver({x0:b[0],y0:b[1],x1:g[0],y1:g[1]}),f=(d.x1+d.x0)/2,y=(d.y1+d.y0)/2,l=(d.x1-d.x0)/2,x=(d.y1-d.y0)/2;l||(l=x=x/T),x||(x=l=l/T);for(var u=[],M=0;M<A;M++){var _=M*2*Math.PI/A;u.push([f+l*Math.cos(_),y+x*Math.sin(_)])}return u},V.ellipseOver=function(o){var b=o.x0,g=o.y0,d=o.x1,f=o.y1,y=d-b,l=f-g;b-=y,g-=l;var x=(b+d)/2,u=(g+f)/2,M=T;return y*=M,l*=M,{x0:x-y,y0:u-l,x1:x+y,y1:u+l}},V.fixDatesForPaths=function(o,b,g){var d=b.type==="date",f=g.type==="date";if(!d&&!f)return o;for(var y=0;y<o.length;y++)for(var l=0;l<o[y].length;l++)for(var x=0;x+2<o[y][l].length;x+=2)d&&(o[y][l][x+1]=o[y][l][x+1].replace(" ","_")),f&&(o[y][l][x+2]=o[y][l][x+2].replace(" ","_"));return o}},{"../../selections/helpers":454,"./constants":464,"parse-svg-path":250}],467:[function(t,B,V){var m=t("../../dragelement/helpers"),c=m.drawMode,A=m.openMode,T=t("./constants"),e=T.i000,a=T.i090,i=T.i180,n=T.i270,r=T.cos45,v=T.sin45,s=t("../../selections/helpers"),o=s.p2r,b=s.r2p,g=t(".././handle_outline"),d=g.clearOutline,f=t("./helpers"),y=f.readPaths,l=f.writePaths,x=f.ellipseOver,u=f.fixDatesForPaths;B.exports=function(_,p){if(!!_.length){var w=_[0][0];if(!!w){var h=w.getAttribute("d"),L=p.gd,S=L._fullLayout.newshape,E=p.plotinfo,P=E.xaxis,F=E.yaxis,I=!!E.domain||!E.xaxis,D=!!E.domain||!E.yaxis,R=p.isActiveShape,N=p.dragmode,z=(L.layout||{}).shapes||[];if(!c(N)&&R!==void 0){var G=L._fullLayout._activeShapeIndex;if(G<z.length)switch(L._fullLayout.shapes[G].type){case"rect":N="drawrect";break;case"circle":N="drawcircle";break;case"line":N="drawline";break;case"path":var Y=z[G].path||"";Y[Y.length-1]==="Z"?N="drawclosedpath":N="drawopenpath";break}}var ee=A(N),Z=y(h,L,E,R),X={editable:!0,xref:I?"paper":P._id,yref:D?"paper":F._id,layer:S.layer,opacity:S.opacity,line:{color:S.line.color,width:S.line.width,dash:S.line.dash}};ee||(X.fillcolor=S.fillcolor,X.fillrule=S.fillrule);var ne;if(Z.length===1&&(ne=Z[0]),ne&&ne.length===5&&N==="drawrect")X.type="rect",X.x0=ne[0][1],X.y0=ne[0][2],X.x1=ne[2][1],X.y1=ne[2][2];else if(ne&&N==="drawline")X.type="line",X.x0=ne[0][1],X.y0=ne[0][2],X.x1=ne[1][1],X.y1=ne[1][2];else if(ne&&N==="drawcircle"){X.type="circle";var ce=ne[e][1],Q=ne[a][1],K=ne[i][1],U=ne[n][1],H=ne[e][2],q=ne[a][2],re=ne[i][2],j=ne[n][2],$=E.xaxis&&(E.xaxis.type==="date"||E.xaxis.type==="log"),ie=E.yaxis&&(E.yaxis.type==="date"||E.yaxis.type==="log");$&&(ce=b(E.xaxis,ce),Q=b(E.xaxis,Q),K=b(E.xaxis,K),U=b(E.xaxis,U)),ie&&(H=b(E.yaxis,H),q=b(E.yaxis,q),re=b(E.yaxis,re),j=b(E.yaxis,j));var oe=(Q+U)/2,ae=(H+re)/2,se=(U-Q+K-ce)/2,_e=(j-q+re-H)/2,ue=x({x0:oe,y0:ae,x1:oe+se*r,y1:ae+_e*v});$&&(ue.x0=o(E.xaxis,ue.x0),ue.x1=o(E.xaxis,ue.x1)),ie&&(ue.y0=o(E.yaxis,ue.y0),ue.y1=o(E.yaxis,ue.y1)),X.x0=ue.x0,X.y0=ue.y0,X.x1=ue.x1,X.y1=ue.y1}else X.type="path",P&&F&&u(Z,P,F),X.path=l(Z),ne=null;d(L);for(var ye=p.editHelpers,xe=(ye||{}).modifyItem,me=[],be=0;be<z.length;be++){var ke=L._fullLayout.shapes[be];if(me[be]=ke._input,R!==void 0&&be===L._fullLayout._activeShapeIndex){var De=X;switch(ke.type){case"line":case"rect":case"circle":xe("x0",De.x0),xe("x1",De.x1),xe("y0",De.y0),xe("y1",De.y1);break;case"path":xe("path",De.path);break}}}return R===void 0?(me.push(X),me):ye?ye.getUpdateObj():{}}}}},{"../../dragelement/helpers":385,"../../selections/helpers":454,".././handle_outline":468,"./constants":464,"./helpers":466}],468:[function(t,B,V){function m(A){var T=A._fullLayout._zoomlayer;T&&T.selectAll(".outline-controllers").remove()}function c(A){var T=A._fullLayout._zoomlayer;T&&T.selectAll(".select-outline").remove(),A._fullLayout._outlining=!1}B.exports={clearOutlineControllers:m,clearOutline:c}},{}],469:[function(t,B,V){var m=t("./constants"),c=t("../../lib"),A=t("../../plots/cartesian/axes");V.rangeToShapePosition=function(e){return e.type==="log"?e.r2d:function(a){return a}},V.shapePositionToRange=function(e){return e.type==="log"?e.d2r:function(a){return a}},V.decodeDate=function(e){return function(a){return a.replace&&(a=a.replace("_"," ")),e(a)}},V.encodeDate=function(e){return function(a){return e(a).replace(" ","_")}},V.extractPathCoords=function(e,a,i){var n=[],r=e.match(m.segmentRE);return r.forEach(function(v){var s=a[v.charAt(0)].drawn;if(s!==void 0){var o=v.substr(1).match(m.paramRE);if(!(!o||o.length<s)){var b=o[s],g=i?b:c.cleanNumber(b);n.push(g)}}}),n},V.getDataToPixel=function(e,a,i,n){var r=e._fullLayout._size,v;if(a)if(n==="domain")v=function(o){return a._length*(i?1-o:o)+a._offset};else{var s=V.shapePositionToRange(a);v=function(o){return a._offset+a.r2p(s(o,!0))},a.type==="date"&&(v=V.decodeDate(v))}else i?v=function(o){return r.t+r.h*(1-o)}:v=function(o){return r.l+r.w*o};return v},V.getPixelToData=function(e,a,i,n){var r=e._fullLayout._size,v;if(a)if(n==="domain")v=function(o){var b=(o-a._offset)/a._length;return i?1-b:b};else{var s=V.rangeToShapePosition(a);v=function(o){return s(a.p2r(o-a._offset))}}else i?v=function(o){return 1-(o-r.t)/r.h}:v=function(o){return(o-r.l)/r.w};return v},V.roundPositionForSharpStrokeRendering=function(e,a){var i=Math.round(a%2)===1,n=Math.round(e);return i?n+.5:n},V.makeShapesOptionsAndPlotinfo=function(e,a){var i=e._fullLayout.shapes[a]||{},n=e._fullLayout._plots[i.xref+i.yref],r=!!n;return r?n._hadPlotinfo=!0:(n={},i.xref&&i.xref!=="paper"&&(n.xaxis=e._fullLayout[i.xref+"axis"]),i.yref&&i.yref!=="paper"&&(n.yaxis=e._fullLayout[i.yref+"axis"])),n.xsizemode=i.xsizemode,n.ysizemode=i.ysizemode,n.xanchor=i.xanchor,n.yanchor=i.yanchor,{options:i,plotinfo:n}},V.makeSelectionsOptionsAndPlotinfo=function(e,a){var i=e._fullLayout.selections[a]||{},n=e._fullLayout._plots[i.xref+i.yref],r=!!n;return r?n._hadPlotinfo=!0:(n={},i.xref&&(n.xaxis=e._fullLayout[i.xref+"axis"]),i.yref&&(n.yaxis=e._fullLayout[i.yref+"axis"])),{options:i,plotinfo:n}},V.getPathString=function(e,a){var i=a.type,n=A.getRefType(a.xref),r=A.getRefType(a.yref),v=A.getFromId(e,a.xref),s=A.getFromId(e,a.yref),o=e._fullLayout._size,b,g,d,f,y,l,x,u;if(v?n==="domain"?g=function(F){return v._offset+v._length*F}:(b=V.shapePositionToRange(v),g=function(F){return v._offset+v.r2p(b(F,!0))}):g=function(F){return o.l+o.w*F},s?r==="domain"?f=function(F){return s._offset+s._length*(1-F)}:(d=V.shapePositionToRange(s),f=function(F){return s._offset+s.r2p(d(F,!0))}):f=function(F){return o.t+o.h*(1-F)},i==="path")return v&&v.type==="date"&&(g=V.decodeDate(g)),s&&s.type==="date"&&(f=V.decodeDate(f)),T(a,g,f);if(a.xsizemode==="pixel"){var M=g(a.xanchor);y=M+a.x0,l=M+a.x1}else y=g(a.x0),l=g(a.x1);if(a.ysizemode==="pixel"){var _=f(a.yanchor);x=_-a.y0,u=_-a.y1}else x=f(a.y0),u=f(a.y1);if(i==="line")return"M"+y+","+x+"L"+l+","+u;if(i==="rect")return"M"+y+","+x+"H"+l+"V"+u+"H"+y+"Z";var p=(y+l)/2,w=(x+u)/2,h=Math.abs(p-y),L=Math.abs(w-x),S="A"+h+","+L,E=p+h+","+w,P=p+","+(w-L);return"M"+E+S+" 0 1,1 "+P+S+" 0 0,1 "+E+"Z"};function T(e,a,i){var n=e.path,r=e.xsizemode,v=e.ysizemode,s=e.xanchor,o=e.yanchor;return n.replace(m.segmentRE,function(b){var g=0,d=b.charAt(0),f=m.paramIsX[d],y=m.paramIsY[d],l=m.numParams[d],x=b.substr(1).replace(m.paramRE,function(u){return f[g]?r==="pixel"?u=a(s)+Number(u):u=a(u):y[g]&&(v==="pixel"?u=i(o)-Number(u):u=i(u)),g++,g>l&&(u="X"),u});return g>l&&(x=x.replace(/[\s,]*X.*/,""),c.log("Ignoring extra params in segment "+b)),d+x})}},{"../../lib":515,"../../plots/cartesian/axes":566,"./constants":459}],470:[function(t,B,V){var m=t("./draw");B.exports={moduleType:"component",name:"shapes",layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),supplyDrawNewShapeDefaults:t("./draw_newshape/defaults"),includeBasePlot:t("../../plots/cartesian/include_components")("shapes"),calcAutorange:t("./calc_autorange"),draw:m.draw,drawOne:m.drawOne}},{"../../plots/cartesian/include_components":577,"./attributes":457,"./calc_autorange":458,"./defaults":460,"./draw":462,"./draw_newshape/defaults":465}],471:[function(t,B,V){var m=t("../../plots/font_attributes"),c=t("../../plots/pad_attributes"),A=t("../../lib/extend").extendDeepAll,T=t("../../plot_api/edit_types").overrideAll,e=t("../../plots/animation_attributes"),a=t("../../plot_api/plot_template").templatedArray,i=t("./constants"),n=a("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});B.exports=T(a("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:n,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:A(c({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:e.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:m({})},font:m({}),activebgcolor:{valType:"color",dflt:i.gripBgActiveColor},bgcolor:{valType:"color",dflt:i.railBgColor},bordercolor:{valType:"color",dflt:i.railBorderColor},borderwidth:{valType:"number",min:0,dflt:i.railBorderWidth},ticklen:{valType:"number",min:0,dflt:i.tickLength},tickcolor:{valType:"color",dflt:i.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:i.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../plots/animation_attributes":560,"../../plots/font_attributes":594,"../../plots/pad_attributes":627,"./constants":472}],472:[function(t,B,V){B.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],473:[function(t,B,V){var m=t("../../lib"),c=t("../../plots/array_container_defaults"),A=t("./attributes"),T=t("./constants"),e=T.name,a=A.steps;B.exports=function(v,s){c(v,s,{name:e,handleItemDefaults:i})};function i(r,v,s){function o(u,M){return m.coerce(r,v,A,u,M)}for(var b=c(r,v,{name:"steps",handleItemDefaults:n}),g=0,d=0;d<b.length;d++)b[d].visible&&g++;var f;if(g<2?f=v.visible=!1:f=o("visible"),!!f){v._stepCount=g;var y=v._visibleSteps=m.filterVisible(b),l=o("active");(b[l]||{}).visible||(v.active=y[0]._index),o("x"),o("y"),m.noneOrAll(r,v,["x","y"]),o("xanchor"),o("yanchor"),o("len"),o("lenmode"),o("pad.t"),o("pad.r"),o("pad.b"),o("pad.l"),m.coerceFont(o,"font",s.font);var x=o("currentvalue.visible");x&&(o("currentvalue.xanchor"),o("currentvalue.prefix"),o("currentvalue.suffix"),o("currentvalue.offset"),m.coerceFont(o,"currentvalue.font",v.font)),o("transition.duration"),o("transition.easing"),o("bgcolor"),o("activebgcolor"),o("bordercolor"),o("borderwidth"),o("ticklen"),o("tickwidth"),o("tickcolor"),o("minorticklen")}}function n(r,v){function s(g,d){return m.coerce(r,v,a,g,d)}var o;if(r.method!=="skip"&&!Array.isArray(r.args)?o=v.visible=!1:o=s("visible"),o){s("method"),s("args");var b=s("label","step-"+v._index);s("value",b),s("execute")}}},{"../../lib":515,"../../plots/array_container_defaults":561,"./attributes":471,"./constants":472}],474:[function(t,B,V){var m=t("@plotly/d3"),c=t("../../plots/plots"),A=t("../color"),T=t("../drawing"),e=t("../../lib"),a=e.strTranslate,i=t("../../lib/svg_text_utils"),n=t("../../plot_api/plot_template").arrayEditor,r=t("./constants"),v=t("../../constants/alignment"),s=v.LINE_SPACING,o=v.FROM_TL,b=v.FROM_BR;B.exports=function(N){var z=N._fullLayout,G=d(z,N),Y=z._infolayer.selectAll("g."+r.containerClassName).data(G.length>0?[0]:[]);Y.enter().append("g").classed(r.containerClassName,!0).style("cursor","ew-resize");function ee(ce){ce._commandObserver&&(ce._commandObserver.remove(),delete ce._commandObserver),c.autoMargin(N,g(ce))}if(Y.exit().each(function(){m.select(this).selectAll("g."+r.groupClassName).each(ee)}).remove(),G.length!==0){var Z=Y.selectAll("g."+r.groupClassName).data(G,f);Z.enter().append("g").classed(r.groupClassName,!0),Z.exit().each(ee).remove();for(var X=0;X<G.length;X++){var ne=G[X];y(N,ne)}Z.each(function(ce){var Q=m.select(this);S(ce),c.manageCommandObserver(N,ce,ce._visibleSteps,function(K){var U=Q.data()[0];U.active!==K.index&&(U._dragging||w(N,Q,U,K.index,!1,!0))}),l(N,m.select(this),ce)})}};function g(R){return r.autoMarginIdRoot+R._index}function d(R,N){for(var z=R[r.name],G=[],Y=0;Y<z.length;Y++){var ee=z[Y];!ee.visible||(ee._gd=N,G.push(ee))}return G}function f(R){return R._index}function y(R,N){var z=T.tester.selectAll("g."+r.labelGroupClass).data(N._visibleSteps);z.enter().append("g").classed(r.labelGroupClass,!0);var G=0,Y=0;z.each(function(q){var re=m.select(this),j=M(re,{step:q},N),$=j.node();if($){var ie=T.bBox($);Y=Math.max(Y,ie.height),G=Math.max(G,ie.width)}}),z.remove();var ee=N._dims={};ee.inputAreaWidth=Math.max(r.railWidth,r.gripHeight);var Z=R._fullLayout._size;ee.lx=Z.l+Z.w*N.x,ee.ly=Z.t+Z.h*(1-N.y),N.lenmode==="fraction"?ee.outerLength=Math.round(Z.w*N.len):ee.outerLength=N.len,ee.inputAreaStart=0,ee.inputAreaLength=Math.round(ee.outerLength-N.pad.l-N.pad.r);var X=ee.inputAreaLength-2*r.stepInset,ne=X/(N._stepCount-1),ce=G+r.labelPadding;if(ee.labelStride=Math.max(1,Math.ceil(ce/ne)),ee.labelHeight=Y,ee.currentValueMaxWidth=0,ee.currentValueHeight=0,ee.currentValueTotalHeight=0,ee.currentValueMaxLines=1,N.currentvalue.visible){var Q=T.tester.append("g");z.each(function(q){var re=x(Q,N,q.label),j=re.node()&&T.bBox(re.node())||{width:0,height:0},$=i.lineCount(re);ee.currentValueMaxWidth=Math.max(ee.currentValueMaxWidth,Math.ceil(j.width)),ee.currentValueHeight=Math.max(ee.currentValueHeight,Math.ceil(j.height)),ee.currentValueMaxLines=Math.max(ee.currentValueMaxLines,$)}),ee.currentValueTotalHeight=ee.currentValueHeight+N.currentvalue.offset,Q.remove()}ee.height=ee.currentValueTotalHeight+r.tickOffset+N.ticklen+r.labelOffset+ee.labelHeight+N.pad.t+N.pad.b;var K="left";e.isRightAnchor(N)&&(ee.lx-=ee.outerLength,K="right"),e.isCenterAnchor(N)&&(ee.lx-=ee.outerLength/2,K="center");var U="top";e.isBottomAnchor(N)&&(ee.ly-=ee.height,U="bottom"),e.isMiddleAnchor(N)&&(ee.ly-=ee.height/2,U="middle"),ee.outerLength=Math.ceil(ee.outerLength),ee.height=Math.ceil(ee.height),ee.lx=Math.round(ee.lx),ee.ly=Math.round(ee.ly);var H={y:N.y,b:ee.height*b[U],t:ee.height*o[U]};N.lenmode==="fraction"?(H.l=0,H.xl=N.x-N.len*o[K],H.r=0,H.xr=N.x+N.len*b[K]):(H.x=N.x,H.l=ee.outerLength*o[K],H.r=ee.outerLength*b[K]),c.autoMargin(R,g(N),H)}function l(R,N,z){(z.steps[z.active]||{}).visible||(z.active=z._visibleSteps[0]._index),N.call(x,z).call(D,z).call(_,z).call(L,z).call(I,R,z).call(u,R,z);var G=z._dims;T.setTranslate(N,G.lx+z.pad.l,G.ly+z.pad.t),N.call(E,z,!1),N.call(x,z)}function x(R,N,z){if(!!N.currentvalue.visible){var G=N._dims,Y,ee;switch(N.currentvalue.xanchor){case"right":Y=G.inputAreaLength-r.currentValueInset-G.currentValueMaxWidth,ee="left";break;case"center":Y=G.inputAreaLength*.5,ee="middle";break;default:Y=r.currentValueInset,ee="left"}var Z=e.ensureSingle(R,"text",r.labelClass,function(U){U.attr({"text-anchor":ee,"data-notex":1})}),X=N.currentvalue.prefix?N.currentvalue.prefix:"";if(typeof z=="string")X+=z;else{var ne=N.steps[N.active].label,ce=N._gd._fullLayout._meta;ce&&(ne=e.templateString(ne,ce)),X+=ne}N.currentvalue.suffix&&(X+=N.currentvalue.suffix),Z.call(T.font,N.currentvalue.font).text(X).call(i.convertToTspans,N._gd);var Q=i.lineCount(Z),K=(G.currentValueMaxLines+1-Q)*N.currentvalue.font.size*s;return i.positionText(Z,Y,K),Z}}function u(R,N,z){var G=e.ensureSingle(R,"rect",r.gripRectClass,function(Y){Y.call(h,N,R,z).style("pointer-events","all")});G.attr({width:r.gripWidth,height:r.gripHeight,rx:r.gripRadius,ry:r.gripRadius}).call(A.stroke,z.bordercolor).call(A.fill,z.bgcolor).style("stroke-width",z.borderwidth+"px")}function M(R,N,z){var G=e.ensureSingle(R,"text",r.labelClass,function(Z){Z.attr({"text-anchor":"middle","data-notex":1})}),Y=N.step.label,ee=z._gd._fullLayout._meta;return ee&&(Y=e.templateString(Y,ee)),G.call(T.font,z.font).text(Y).call(i.convertToTspans,z._gd),G}function _(R,N){var z=e.ensureSingle(R,"g",r.labelsClass),G=N._dims,Y=z.selectAll("g."+r.labelGroupClass).data(G.labelSteps);Y.enter().append("g").classed(r.labelGroupClass,!0),Y.exit().remove(),Y.each(function(ee){var Z=m.select(this);Z.call(M,ee,N),T.setTranslate(Z,P(N,ee.fraction),r.tickOffset+N.ticklen+N.font.size*s+r.labelOffset+G.currentValueTotalHeight)})}function p(R,N,z,G,Y){var ee=Math.round(G*(z._stepCount-1)),Z=z._visibleSteps[ee]._index;Z!==z.active&&w(R,N,z,Z,!0,Y)}function w(R,N,z,G,Y,ee){var Z=z.active;z.active=G,n(R.layout,r.name,z).applyUpdate("active",G);var X=z.steps[z.active];N.call(E,z,ee),N.call(x,z),R.emit("plotly_sliderchange",{slider:z,step:z.steps[z.active],interaction:Y,previousActive:Z}),X&&X.method&&Y&&(N._nextMethod?(N._nextMethod.step=X,N._nextMethod.doCallback=Y,N._nextMethod.doTransition=ee):(N._nextMethod={step:X,doCallback:Y,doTransition:ee},N._nextMethodRaf=window.requestAnimationFrame(function(){var ne=N._nextMethod.step;!ne.method||(ne.execute&&c.executeAPICommand(R,ne.method,ne.args),N._nextMethod=null,N._nextMethodRaf=null)})))}function h(R,N,z){var G=z.node(),Y=m.select(N);function ee(){return z.data()[0]}function Z(){var X=ee();N.emit("plotly_sliderstart",{slider:X});var ne=z.select("."+r.gripRectClass);m.event.stopPropagation(),m.event.preventDefault(),ne.call(A.fill,X.activebgcolor);var ce=F(X,m.mouse(G)[0]);p(N,z,X,ce,!0),X._dragging=!0;function Q(){var U=ee(),H=F(U,m.mouse(G)[0]);p(N,z,U,H,!1)}Y.on("mousemove",Q),Y.on("touchmove",Q);function K(){var U=ee();U._dragging=!1,ne.call(A.fill,U.bgcolor),Y.on("mouseup",null),Y.on("mousemove",null),Y.on("touchend",null),Y.on("touchmove",null),N.emit("plotly_sliderend",{slider:U,step:U.steps[U.active]})}Y.on("mouseup",K),Y.on("touchend",K)}R.on("mousedown",Z),R.on("touchstart",Z)}function L(R,N){var z=R.selectAll("rect."+r.tickRectClass).data(N._visibleSteps),G=N._dims;z.enter().append("rect").classed(r.tickRectClass,!0),z.exit().remove(),z.attr({width:N.tickwidth+"px","shape-rendering":"crispEdges"}),z.each(function(Y,ee){var Z=ee%G.labelStride===0,X=m.select(this);X.attr({height:Z?N.ticklen:N.minorticklen}).call(A.fill,N.tickcolor),T.setTranslate(X,P(N,ee/(N._stepCount-1))-.5*N.tickwidth,(Z?r.tickOffset:r.minorTickOffset)+G.currentValueTotalHeight)})}function S(R){var N=R._dims;N.labelSteps=[];for(var z=R._stepCount,G=0;G<z;G+=N.labelStride)N.labelSteps.push({fraction:G/(z-1),step:R._visibleSteps[G]})}function E(R,N,z){for(var G=R.select("rect."+r.gripRectClass),Y=0,ee=0;ee<N._stepCount;ee++)if(N._visibleSteps[ee]._index===N.active){Y=ee;break}var Z=P(N,Y/(N._stepCount-1));if(!N._invokingCommand){var X=G;z&&N.transition.duration>0&&(X=X.transition().duration(N.transition.duration).ease(N.transition.easing)),X.attr("transform",a(Z-r.gripWidth*.5,N._dims.currentValueTotalHeight))}}function P(R,N){var z=R._dims;return z.inputAreaStart+r.stepInset+(z.inputAreaLength-2*r.stepInset)*Math.min(1,Math.max(0,N))}function F(R,N){var z=R._dims;return Math.min(1,Math.max(0,(N-r.stepInset-z.inputAreaStart)/(z.inputAreaLength-2*r.stepInset-2*z.inputAreaStart)))}function I(R,N,z){var G=z._dims,Y=e.ensureSingle(R,"rect",r.railTouchRectClass,function(ee){ee.call(h,N,R,z).style("pointer-events","all")});Y.attr({width:G.inputAreaLength,height:Math.max(G.inputAreaWidth,r.tickOffset+z.ticklen+G.labelHeight)}).call(A.fill,z.bgcolor).attr("opacity",0),T.setTranslate(Y,0,G.currentValueTotalHeight)}function D(R,N){var z=N._dims,G=z.inputAreaLength-r.railInset*2,Y=e.ensureSingle(R,"rect",r.railRectClass);Y.attr({width:G,height:r.railWidth,rx:r.railRadius,ry:r.railRadius,"shape-rendering":"crispEdges"}).call(A.stroke,N.bordercolor).call(A.fill,N.bgcolor).style("stroke-width",N.borderwidth+"px"),T.setTranslate(Y,r.railInset,(z.inputAreaWidth-r.railWidth)*.5+z.currentValueTotalHeight)}},{"../../constants/alignment":483,"../../lib":515,"../../lib/svg_text_utils":541,"../../plot_api/plot_template":555,"../../plots/plots":628,"../color":367,"../drawing":389,"./constants":472,"@plotly/d3":58}],475:[function(t,B,V){var m=t("./constants");B.exports={moduleType:"component",name:m.name,layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),draw:t("./draw")}},{"./attributes":471,"./constants":472,"./defaults":473,"./draw":474}],476:[function(t,B,V){var m=t("@plotly/d3"),c=t("fast-isnumeric"),A=t("../../plots/plots"),T=t("../../registry"),e=t("../../lib"),a=e.strTranslate,i=t("../drawing"),n=t("../color"),r=t("../../lib/svg_text_utils"),v=t("../../constants/interactions"),s=t("../../constants/alignment").OPPOSITE_SIDE,o=/ [XY][0-9]* /;function b(g,d,f){var y=f.propContainer,l=f.propName,x=f.placeholder,u=f.traceIndex,M=f.avoid||{},_=f.attributes,p=f.transform,w=f.containerGroup,h=g._fullLayout,L=1,S=!1,E=y.title,P=(E&&E.text?E.text:"").trim(),F=E&&E.font?E.font:{},I=F.family,D=F.size,R=F.color,N;l==="title.text"?N="titleText":l.indexOf("axis")!==-1?N="axisTitleText":l.indexOf("colorbar"!==-1)&&(N="colorbarTitleText");var z=g._context.edits[N];P===""?L=0:P.replace(o," % ")===x.replace(o," % ")&&(L=.2,S=!0,z||(P="")),f._meta?P=e.templateString(P,f._meta):h._meta&&(P=e.templateString(P,h._meta));var G=P||z,Y;w||(w=e.ensureSingle(h._infolayer,"g","g-"+d),Y=h._hColorbarMoveTitle);var ee=w.selectAll("text").data(G?[0]:[]);if(ee.enter().append("text"),ee.text(P).attr("class",d),ee.exit().remove(),!G)return w;function Z(Q){e.syncOrAsync([X,ne],Q)}function X(Q){var K;return!p&&Y&&(p={}),p?(K="",p.rotate&&(K+="rotate("+[p.rotate,_.x,_.y]+")"),(p.offset||Y)&&(K+=a(0,(p.offset||0)-(Y||0)))):K=null,Q.attr("transform",K),Q.style({"font-family":I,"font-size":m.round(D,2)+"px",fill:n.rgb(R),opacity:L*n.opacity(R),"font-weight":A.fontWeight}).attr(_).call(r.convertToTspans,g),A.previousPromises(g)}function ne(Q){var K=m.select(Q.node().parentNode);if(M&&M.selection&&M.side&&P){K.attr("transform",null);var U=s[M.side],H=M.side==="left"||M.side==="top"?-1:1,q=c(M.pad)?M.pad:2,re=i.bBox(K.node()),j={left:0,top:0,right:h.width,bottom:h.height},$=M.maxShift||H*(j[M.side]-re[M.side]),ie=0;if($<0)ie=$;else{var oe=M.offsetLeft||0,ae=M.offsetTop||0;re.left-=oe,re.right-=oe,re.top-=ae,re.bottom-=ae,M.selection.each(function(){var _e=i.bBox(this);e.bBoxIntersect(re,_e,q)&&(ie=Math.max(ie,H*(_e[M.side]-re[U])+q))}),ie=Math.min($,ie)}if(ie>0||$<0){var se={left:[-ie,0],right:[ie,0],top:[0,-ie],bottom:[0,ie]}[M.side];K.attr("transform",a(se[0],se[1]))}}}ee.call(Z);function ce(){L=0,S=!0,ee.text(x).on("mouseover.opacity",function(){m.select(this).transition().duration(v.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){m.select(this).transition().duration(v.HIDE_PLACEHOLDER).style("opacity",0)})}return z&&(P?ee.on(".opacity",null):ce(),ee.call(r.makeEditable,{gd:g}).on("edit",function(Q){u!==void 0?T.call("_guiRestyle",g,l,Q,u):T.call("_guiRelayout",g,l,Q)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(Z)}).on("input",function(Q){this.text(Q||" ").call(r.positionText,_.x,_.y)})),ee.classed("js-placeholder",S),w}B.exports={draw:b}},{"../../constants/alignment":483,"../../constants/interactions":490,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/plots":628,"../../registry":647,"../color":367,"../drawing":389,"@plotly/d3":58,"fast-isnumeric":190}],477:[function(t,B,V){var m=t("../../plots/font_attributes"),c=t("../color/attributes"),A=t("../../lib/extend").extendFlat,T=t("../../plot_api/edit_types").overrideAll,e=t("../../plots/pad_attributes"),a=t("../../plot_api/plot_template").templatedArray,i=a("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});B.exports=T(a("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:i,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:A(e({editType:"arraydraw"}),{}),font:m({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:c.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},{"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../plots/font_attributes":594,"../../plots/pad_attributes":627,"../color/attributes":366}],478:[function(t,B,V){B.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25C4",right:"\u25BA",up:"\u25B2",down:"\u25BC"}}},{}],479:[function(t,B,V){var m=t("../../lib"),c=t("../../plots/array_container_defaults"),A=t("./attributes"),T=t("./constants"),e=T.name,a=A.buttons;B.exports=function(v,s){var o={name:e,handleItemDefaults:i};c(v,s,o)};function i(r,v,s){function o(d,f){return m.coerce(r,v,A,d,f)}var b=c(r,v,{name:"buttons",handleItemDefaults:n}),g=o("visible",b.length>0);!g||(o("active"),o("direction"),o("type"),o("showactive"),o("x"),o("y"),m.noneOrAll(r,v,["x","y"]),o("xanchor"),o("yanchor"),o("pad.t"),o("pad.r"),o("pad.b"),o("pad.l"),m.coerceFont(o,"font",s.font),o("bgcolor",s.paper_bgcolor),o("bordercolor"),o("borderwidth"))}function n(r,v){function s(b,g){return m.coerce(r,v,a,b,g)}var o=s("visible",r.method==="skip"||Array.isArray(r.args));o&&(s("method"),s("args"),s("args2"),s("label"),s("execute"))}},{"../../lib":515,"../../plots/array_container_defaults":561,"./attributes":477,"./constants":478}],480:[function(t,B,V){var m=t("@plotly/d3"),c=t("../../plots/plots"),A=t("../color"),T=t("../drawing"),e=t("../../lib"),a=t("../../lib/svg_text_utils"),i=t("../../plot_api/plot_template").arrayEditor,n=t("../../constants/alignment").LINE_SPACING,r=t("./constants"),v=t("./scrollbox");B.exports=function(F){var I=F._fullLayout,D=e.filterVisible(I[r.name]);function R(ne){c.autoMargin(F,L(ne))}var N=I._menulayer.selectAll("g."+r.containerClassName).data(D.length>0?[0]:[]);if(N.enter().append("g").classed(r.containerClassName,!0).style("cursor","pointer"),N.exit().each(function(){m.select(this).selectAll("g."+r.headerGroupClassName).each(R)}).remove(),D.length!==0){var z=N.selectAll("g."+r.headerGroupClassName).data(D,s);z.enter().append("g").classed(r.headerGroupClassName,!0);for(var G=e.ensureSingle(N,"g",r.dropdownButtonGroupClassName,function(ne){ne.style("pointer-events","all")}),Y=0;Y<D.length;Y++){var ee=D[Y];h(F,ee)}var Z="updatemenus"+I._uid,X=new v(F,G,Z);z.enter().size()&&(G.node().parentNode.appendChild(G.node()),G.call(E)),z.exit().each(function(ne){G.call(E),R(ne)}).remove(),z.each(function(ne){var ce=m.select(this),Q=ne.type==="dropdown"?G:null;c.manageCommandObserver(F,ne,ne.buttons,function(K){g(F,ne,ne.buttons[K.index],ce,Q,X,K.index,!0)}),ne.type==="dropdown"?(d(F,ce,G,X,ne),b(G,ne)&&f(F,ce,G,X,ne)):f(F,ce,null,null,ne)})}};function s(P){return P._index}function o(P){return+P.attr(r.menuIndexAttrName)==-1}function b(P,F){return+P.attr(r.menuIndexAttrName)===F._index}function g(P,F,I,D,R,N,z,G){F.active=z,i(P.layout,r.name,F).applyUpdate("active",z),F.type==="buttons"?f(P,D,null,null,F):F.type==="dropdown"&&(R.attr(r.menuIndexAttrName,"-1"),d(P,D,R,N,F),G||f(P,D,R,N,F))}function d(P,F,I,D,R){var N=e.ensureSingle(F,"g",r.headerClassName,function(ne){ne.style("pointer-events","all")}),z=R._dims,G=R.active,Y=R.buttons[G]||r.blankHeaderOpts,ee={y:R.pad.t,yPad:0,x:R.pad.l,xPad:0,index:0},Z={width:z.headerWidth,height:z.headerHeight};N.call(x,R,Y,P).call(S,R,ee,Z);var X=e.ensureSingle(F,"text",r.headerArrowClassName,function(ne){ne.attr("text-anchor","end").call(T.font,R.font).text(r.arrowSymbol[R.direction])});X.attr({x:z.headerWidth-r.arrowOffsetX+R.pad.l,y:z.headerHeight/2+r.textOffsetY+R.pad.t}),N.on("click",function(){I.call(E,String(b(I,R)?-1:R._index)),f(P,F,I,D,R)}),N.on("mouseover",function(){N.call(p)}),N.on("mouseout",function(){N.call(w,R)}),T.setTranslate(F,z.lx,z.ly)}function f(P,F,I,D,R){I||(I=F,I.attr("pointer-events","all"));var N=!o(I)||R.type==="buttons"?R.buttons:[],z=R.type==="dropdown"?r.dropdownButtonClassName:r.buttonClassName,G=I.selectAll("g."+z).data(e.filterVisible(N)),Y=G.enter().append("g").classed(z,!0),ee=G.exit();R.type==="dropdown"?(Y.attr("opacity","0").transition().attr("opacity","1"),ee.transition().attr("opacity","0").remove()):ee.remove();var Z=0,X=0,ne=R._dims,ce=["up","down"].indexOf(R.direction)!==-1;R.type==="dropdown"&&(ce?X=ne.headerHeight+r.gapButtonHeader:Z=ne.headerWidth+r.gapButtonHeader),R.type==="dropdown"&&R.direction==="up"&&(X=-r.gapButtonHeader+r.gapButton-ne.openHeight),R.type==="dropdown"&&R.direction==="left"&&(Z=-r.gapButtonHeader+r.gapButton-ne.openWidth);var Q={x:ne.lx+Z+R.pad.l,y:ne.ly+X+R.pad.t,yPad:r.gapButton,xPad:r.gapButton,index:0},K={l:Q.x+R.borderwidth,t:Q.y+R.borderwidth};G.each(function(U,H){var q=m.select(this);q.call(x,R,U,P).call(S,R,Q),q.on("click",function(){m.event.defaultPrevented||(U.execute&&(U.args2&&R.active===H?(g(P,R,U,F,I,D,-1),c.executeAPICommand(P,U.method,U.args2)):(g(P,R,U,F,I,D,H),c.executeAPICommand(P,U.method,U.args))),P.emit("plotly_buttonclicked",{menu:R,button:U,active:R.active}))}),q.on("mouseover",function(){q.call(p)}),q.on("mouseout",function(){q.call(w,R),G.call(_,R)})}),G.call(_,R),ce?(K.w=Math.max(ne.openWidth,ne.headerWidth),K.h=Q.y-K.t):(K.w=Q.x-K.l,K.h=Math.max(ne.openHeight,ne.headerHeight)),K.direction=R.direction,D&&(G.size()?y(P,F,I,D,R,K):l(D))}function y(P,F,I,D,R,N){var z=R.direction,G=z==="up"||z==="down",Y=R._dims,ee=R.active,Z,X,ne;if(G)for(X=0,ne=0;ne<ee;ne++)X+=Y.heights[ne]+r.gapButton;else for(Z=0,ne=0;ne<ee;ne++)Z+=Y.widths[ne]+r.gapButton;D.enable(N,Z,X),D.hbar&&D.hbar.attr("opacity","0").transition().attr("opacity","1"),D.vbar&&D.vbar.attr("opacity","0").transition().attr("opacity","1")}function l(P){var F=!!P.hbar,I=!!P.vbar;F&&P.hbar.transition().attr("opacity","0").each("end",function(){F=!1,I||P.disable()}),I&&P.vbar.transition().attr("opacity","0").each("end",function(){I=!1,F||P.disable()})}function x(P,F,I,D){P.call(u,F).call(M,F,I,D)}function u(P,F){var I=e.ensureSingle(P,"rect",r.itemRectClassName,function(D){D.attr({rx:r.rx,ry:r.ry,"shape-rendering":"crispEdges"})});I.call(A.stroke,F.bordercolor).call(A.fill,F.bgcolor).style("stroke-width",F.borderwidth+"px")}function M(P,F,I,D){var R=e.ensureSingle(P,"text",r.itemTextClassName,function(G){G.attr({"text-anchor":"start","data-notex":1})}),N=I.label,z=D._fullLayout._meta;z&&(N=e.templateString(N,z)),R.call(T.font,F.font).text(N).call(a.convertToTspans,D)}function _(P,F){var I=F.active;P.each(function(D,R){var N=m.select(this);R===I&&F.showactive&&N.select("rect."+r.itemRectClassName).call(A.fill,r.activeColor)})}function p(P){P.select("rect."+r.itemRectClassName).call(A.fill,r.hoverColor)}function w(P,F){P.select("rect."+r.itemRectClassName).call(A.fill,F.bgcolor)}function h(P,F){var I=F._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},D=T.tester.selectAll("g."+r.dropdownButtonClassName).data(e.filterVisible(F.buttons));D.enter().append("g").classed(r.dropdownButtonClassName,!0);var R=["up","down"].indexOf(F.direction)!==-1;D.each(function(Z,X){var ne=m.select(this);ne.call(x,F,Z,P);var ce=ne.select("."+r.itemTextClassName),Q=ce.node()&&T.bBox(ce.node()).width,K=Math.max(Q+r.textPadX,r.minWidth),U=F.font.size*n,H=a.lineCount(ce),q=Math.max(U*H,r.minHeight)+r.textOffsetY;q=Math.ceil(q),K=Math.ceil(K),I.widths[X]=K,I.heights[X]=q,I.height1=Math.max(I.height1,q),I.width1=Math.max(I.width1,K),R?(I.totalWidth=Math.max(I.totalWidth,K),I.openWidth=I.totalWidth,I.totalHeight+=q+r.gapButton,I.openHeight+=q+r.gapButton):(I.totalWidth+=K+r.gapButton,I.openWidth+=K+r.gapButton,I.totalHeight=Math.max(I.totalHeight,q),I.openHeight=I.totalHeight)}),R?I.totalHeight-=r.gapButton:I.totalWidth-=r.gapButton,I.headerWidth=I.width1+r.arrowPadX,I.headerHeight=I.height1,F.type==="dropdown"&&(R?(I.width1+=r.arrowPadX,I.totalHeight=I.height1):I.totalWidth=I.width1,I.totalWidth+=r.arrowPadX),D.remove();var N=I.totalWidth+F.pad.l+F.pad.r,z=I.totalHeight+F.pad.t+F.pad.b,G=P._fullLayout._size;I.lx=G.l+G.w*F.x,I.ly=G.t+G.h*(1-F.y);var Y="left";e.isRightAnchor(F)&&(I.lx-=N,Y="right"),e.isCenterAnchor(F)&&(I.lx-=N/2,Y="center");var ee="top";e.isBottomAnchor(F)&&(I.ly-=z,ee="bottom"),e.isMiddleAnchor(F)&&(I.ly-=z/2,ee="middle"),I.totalWidth=Math.ceil(I.totalWidth),I.totalHeight=Math.ceil(I.totalHeight),I.lx=Math.round(I.lx),I.ly=Math.round(I.ly),c.autoMargin(P,L(F),{x:F.x,y:F.y,l:N*({right:1,center:.5}[Y]||0),r:N*({left:1,center:.5}[Y]||0),b:z*({top:1,middle:.5}[ee]||0),t:z*({bottom:1,middle:.5}[ee]||0)})}function L(P){return r.autoMarginIdRoot+P._index}function S(P,F,I,D){D=D||{};var R=P.select("."+r.itemRectClassName),N=P.select("."+r.itemTextClassName),z=F.borderwidth,G=I.index,Y=F._dims;T.setTranslate(P,z+I.x,z+I.y);var ee=["up","down"].indexOf(F.direction)!==-1,Z=D.height||(ee?Y.heights[G]:Y.height1);R.attr({x:0,y:0,width:D.width||(ee?Y.width1:Y.widths[G]),height:Z});var X=F.font.size*n,ne=a.lineCount(N),ce=(ne-1)*X/2;a.positionText(N,r.textOffsetX,Z/2-ce+r.textOffsetY),ee?I.y+=Y.heights[G]+I.yPad:I.x+=Y.widths[G]+I.xPad,I.index++}function E(P,F){P.attr(r.menuIndexAttrName,F||"-1").selectAll("g."+r.dropdownButtonClassName).remove()}},{"../../constants/alignment":483,"../../lib":515,"../../lib/svg_text_utils":541,"../../plot_api/plot_template":555,"../../plots/plots":628,"../color":367,"../drawing":389,"./constants":478,"./scrollbox":482,"@plotly/d3":58}],481:[function(t,B,V){arguments[4][475][0].apply(V,arguments)},{"./attributes":477,"./constants":478,"./defaults":479,"./draw":480,dup:475}],482:[function(t,B,V){B.exports=e;var m=t("@plotly/d3"),c=t("../color"),A=t("../drawing"),T=t("../../lib");function e(a,i,n){this.gd=a,this.container=i,this.id=n,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}e.barWidth=2,e.barLength=20,e.barRadius=2,e.barPad=1,e.barColor="#808BA4",e.prototype.enable=function(i,n,r){var v=this.gd._fullLayout,s=v.width,o=v.height;this.position=i;var b=this.position.l,g=this.position.w,d=this.position.t,f=this.position.h,y=this.position.direction,l=y==="down",x=y==="left",u=y==="right",M=y==="up",_=g,p=f,w,h,L,S;!l&&!x&&!u&&!M&&(this.position.direction="down",l=!0);var E=l||M;E?(w=b,h=w+_,l?(L=d,S=Math.min(L+p,o),p=S-L):(S=d+p,L=Math.max(S-p,0),p=S-L)):(L=d,S=L+p,x?(h=b+_,w=Math.max(h-_,0),_=h-w):(w=b,h=Math.min(w+_,s),_=h-w)),this._box={l:w,t:L,w:_,h:p};var P=g>_,F=e.barLength+2*e.barPad,I=e.barWidth+2*e.barPad,D=b,R=d+f;R+I>o&&(R=o-I);var N=this.container.selectAll("rect.scrollbar-horizontal").data(P?[0]:[]);N.exit().on(".drag",null).remove(),N.enter().append("rect").classed("scrollbar-horizontal",!0).call(c.fill,e.barColor),P?(this.hbar=N.attr({rx:e.barRadius,ry:e.barRadius,x:D,y:R,width:F,height:I}),this._hbarXMin=D+F/2,this._hbarTranslateMax=_-F):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var z=f>p,G=e.barWidth+2*e.barPad,Y=e.barLength+2*e.barPad,ee=b+g,Z=d;ee+G>s&&(ee=s-G);var X=this.container.selectAll("rect.scrollbar-vertical").data(z?[0]:[]);X.exit().on(".drag",null).remove(),X.enter().append("rect").classed("scrollbar-vertical",!0).call(c.fill,e.barColor),z?(this.vbar=X.attr({rx:e.barRadius,ry:e.barRadius,x:ee,y:Z,width:G,height:Y}),this._vbarYMin=Z+Y/2,this._vbarTranslateMax=p-Y):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var ne=this.id,ce=w-.5,Q=z?h+G+.5:h+.5,K=L-.5,U=P?S+I+.5:S+.5,H=v._topdefs.selectAll("#"+ne).data(P||z?[0]:[]);if(H.exit().remove(),H.enter().append("clipPath").attr("id",ne).append("rect"),P||z?(this._clipRect=H.select("rect").attr({x:Math.floor(ce),y:Math.floor(K),width:Math.ceil(Q)-Math.floor(ce),height:Math.ceil(U)-Math.floor(K)}),this.container.call(A.setClipUrl,ne,this.gd),this.bg.attr({x:b,y:d,width:g,height:f})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(A.setClipUrl,null),delete this._clipRect),P||z){var q=m.behavior.drag().on("dragstart",function(){m.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(q);var re=m.behavior.drag().on("dragstart",function(){m.event.sourceEvent.preventDefault(),m.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));P&&this.hbar.on(".drag",null).call(re),z&&this.vbar.on(".drag",null).call(re)}this.setTranslate(n,r)},e.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(A.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},e.prototype._onBoxDrag=function(){var i=this.translateX,n=this.translateY;this.hbar&&(i-=m.event.dx),this.vbar&&(n-=m.event.dy),this.setTranslate(i,n)},e.prototype._onBoxWheel=function(){var i=this.translateX,n=this.translateY;this.hbar&&(i+=m.event.deltaY),this.vbar&&(n+=m.event.deltaY),this.setTranslate(i,n)},e.prototype._onBarDrag=function(){var i=this.translateX,n=this.translateY;if(this.hbar){var r=i+this._hbarXMin,v=r+this._hbarTranslateMax,s=T.constrain(m.event.x,r,v),o=(s-r)/(v-r),b=this.position.w-this._box.w;i=o*b}if(this.vbar){var g=n+this._vbarYMin,d=g+this._vbarTranslateMax,f=T.constrain(m.event.y,g,d),y=(f-g)/(d-g),l=this.position.h-this._box.h;n=y*l}this.setTranslate(i,n)},e.prototype.setTranslate=function(i,n){var r=this.position.w-this._box.w,v=this.position.h-this._box.h;if(i=T.constrain(i||0,0,r),n=T.constrain(n||0,0,v),this.translateX=i,this.translateY=n,this.container.call(A.setTranslate,this._box.l-this.position.l-i,this._box.t-this.position.t-n),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+i-.5),y:Math.floor(this.position.t+n-.5)}),this.hbar){var s=i/r;this.hbar.call(A.setTranslate,i+s*this._hbarTranslateMax,n)}if(this.vbar){var o=n/v;this.vbar.call(A.setTranslate,i,n+o*this._vbarTranslateMax)}}},{"../../lib":515,"../color":367,"../drawing":389,"@plotly/d3":58}],483:[function(t,B,V){B.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],484:[function(t,B,V){B.exports={axisRefDescription:function(m,c,A){return["If set to a",m,"axis id (e.g. *"+m+"* or","*"+m+"2*), the `"+m+"` position refers to a",m,"coordinate. If set to *paper*, the `"+m+"`","position refers to the distance from the",c,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",c,"("+A+"). If set to a",m,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",c,"of the domain of that axis: e.g.,","*"+m+"2 domain* refers to the domain of the second",m," axis and a",m,"position of 0.5 refers to the","point between the",c,"and the",A,"of the domain of the","second",m,"axis."].join(" ")}}},{}],485:[function(t,B,V){B.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"\u25B2"},DECREASING:{COLOR:"#FF4136",SYMBOL:"\u25BC"}}},{}],486:[function(t,B,V){B.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},{}],487:[function(t,B,V){B.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},{}],488:[function(t,B,V){B.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},{}],489:[function(t,B,V){B.exports={circle:"\u25CF","circle-open":"\u25CB",square:"\u25A0","square-open":"\u25A1",diamond:"\u25C6","diamond-open":"\u25C7",cross:"+",x:"\u274C"}},{}],490:[function(t,B,V){B.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},{}],491:[function(t,B,V){B.exports={BADNUM:void 0,FP_SAFE:Number.MAX_VALUE*1e-4,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:24405875e-1,ALMOST_EQUAL:1-1e-6,LOG_CLIP:10,MINUS_SIGN:"\u2212"}},{}],492:[function(t,B,V){V.xmlns="http://www.w3.org/2000/xmlns/",V.svg="http://www.w3.org/2000/svg",V.xlink="http://www.w3.org/1999/xlink",V.svgAttrs={xmlns:V.svg,"xmlns:xlink":V.xlink}},{}],493:[function(t,B,V){V.version=t("./version").version,t("native-promise-only"),t("../build/plotcss");for(var m=t("./registry"),c=V.register=m.register,A=t("./plot_api"),T=Object.keys(A),e=0;e<T.length;e++){var a=T[e];a.charAt(0)!=="_"&&(V[a]=A[a]),c({moduleType:"apiMethod",name:a,fn:A[a]})}c(t("./traces/scatter")),c([t("./components/legend"),t("./components/fx"),t("./components/annotations"),t("./components/annotations3d"),t("./components/selections"),t("./components/shapes"),t("./components/images"),t("./components/updatemenus"),t("./components/sliders"),t("./components/rangeslider"),t("./components/rangeselector"),t("./components/grid"),t("./components/errorbars"),t("./components/colorscale"),t("./components/colorbar"),t("./components/modebar")]),c([t("./locale-en"),t("./locale-en-us")]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(c(window.PlotlyLocales),delete window.PlotlyLocales),V.Icons=t("./fonts/ploticon");var i=t("./components/fx"),n=t("./plots/plots");V.Plots={resize:n.resize,graphJson:n.graphJson,sendDataToCloud:n.sendDataToCloud},V.Fx={hover:i.hover,unhover:i.unhover,loneHover:i.loneHover,loneUnhover:i.loneUnhover},V.Snapshot=t("./snapshot"),V.PlotSchema=t("./plot_api/plot_schema")},{"../build/plotcss":1,"./components/annotations":358,"./components/annotations3d":363,"./components/colorbar":373,"./components/colorscale":379,"./components/errorbars":395,"./components/fx":407,"./components/grid":411,"./components/images":416,"./components/legend":424,"./components/modebar":430,"./components/rangeselector":438,"./components/rangeslider":445,"./components/selections":455,"./components/shapes":470,"./components/sliders":475,"./components/updatemenus":481,"./fonts/ploticon":494,"./locale-en":546,"./locale-en-us":545,"./plot_api":550,"./plot_api/plot_schema":554,"./plots/plots":628,"./registry":647,"./snapshot":652,"./traces/scatter":948,"./version":1132,"native-promise-only":245}],494:[function(t,B,V){B.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:["<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'>","<defs>"," <style>","  .cls-0{fill:#000;}","  .cls-1{fill:#FFF;}","  .cls-2{fill:#F26;}","  .cls-3{fill:#D69;}","  .cls-4{fill:#BAC;}","  .cls-5{fill:#9EF;}"," </style>","</defs>"," <title>plotly-logomark</title>"," <g id='symbol'>","  <rect class='cls-0' x='0' y='0' width='132' height='132' rx='18' ry='18'/>","  <circle class='cls-5' cx='102' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='54' r='6'/>","  <circle class='cls-3' cx='54' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='54' r='6'/>","  <path class='cls-1' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>","  <path class='cls-1' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>","  <path class='cls-1' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>","  <path class='cls-1' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/>"," </g>","</svg>"].join("")}}},{}],495:[function(t,B,V){V.isLeftAnchor=function(c){return c.xanchor==="left"||c.xanchor==="auto"&&c.x<=1/3},V.isCenterAnchor=function(c){return c.xanchor==="center"||c.xanchor==="auto"&&c.x>1/3&&c.x<2/3},V.isRightAnchor=function(c){return c.xanchor==="right"||c.xanchor==="auto"&&c.x>=2/3},V.isTopAnchor=function(c){return c.yanchor==="top"||c.yanchor==="auto"&&c.y>=2/3},V.isMiddleAnchor=function(c){return c.yanchor==="middle"||c.yanchor==="auto"&&c.y>1/3&&c.y<2/3},V.isBottomAnchor=function(c){return c.yanchor==="bottom"||c.yanchor==="auto"&&c.y<=1/3}},{}],496:[function(t,B,V){var m=t("./mod"),c=m.mod,A=m.modHalf,T=Math.PI,e=2*T;function a(y){return y/180*T}function i(y){return y/T*180}function n(y){return Math.abs(y[1]-y[0])>e-1e-14}function r(y,l){return A(l-y,e)}function v(y,l){return Math.abs(r(y,l))}function s(y,l){if(n(l))return!0;var x,u;l[0]<l[1]?(x=l[0],u=l[1]):(x=l[1],u=l[0]),x=c(x,e),u=c(u,e),x>u&&(u+=e);var M=c(y,e),_=M+e;return M>=x&&M<=u||_>=x&&_<=u}function o(y,l,x,u){if(!s(l,u))return!1;var M,_;return x[0]<x[1]?(M=x[0],_=x[1]):(M=x[1],_=x[0]),y>=M&&y<=_}function b(y,l,x,u,M,_,p){M=M||0,_=_||0;var w=n([x,u]),h,L,S,E,P;w?(h=0,L=T,S=e):x<u?(h=x,S=u):(h=u,S=x),y<l?(E=y,P=l):(E=l,P=y);function F(N,z){return[N*Math.cos(z)+M,_-N*Math.sin(z)]}var I=Math.abs(S-h)<=T?0:1;function D(N,z,G){return"A"+[N,N]+" "+[0,I,G]+" "+F(N,z)}var R;return w?E===null?R="M"+F(P,h)+D(P,L,0)+D(P,S,0)+"Z":R="M"+F(E,h)+D(E,L,0)+D(E,S,0)+"ZM"+F(P,h)+D(P,L,1)+D(P,S,1)+"Z":E===null?(R="M"+F(P,h)+D(P,S,0),p&&(R+="L0,0Z")):R="M"+F(E,h)+"L"+F(P,h)+D(P,S,0)+"L"+F(E,S)+D(E,h,1)+"Z",R}function g(y,l,x,u,M){return b(null,y,l,x,u,M,0)}function d(y,l,x,u,M){return b(null,y,l,x,u,M,1)}function f(y,l,x,u,M,_){return b(y,l,x,u,M,_,1)}B.exports={deg2rad:a,rad2deg:i,angleDelta:r,angleDist:v,isFullCircle:n,isAngleInsideSector:s,isPtInsideSector:o,pathArc:g,pathSector:d,pathAnnulus:f}},{"./mod":522}],497:[function(t,B,V){var m=Array.isArray,c=ArrayBuffer,A=DataView;function T(n){return c.isView(n)&&!(n instanceof A)}V.isTypedArray=T;function e(n){return m(n)||T(n)}V.isArrayOrTypedArray=e;function a(n){return!e(n[0])}V.isArray1D=a,V.ensureArray=function(n,r){return m(n)||(n=[]),n.length=r,n},V.concat=function(){var n=[],r=!0,v=0,s,o,b,g,d,f,y,l;for(b=0;b<arguments.length;b++)g=arguments[b],f=g.length,f&&(o?n.push(g):(o=g,d=f),m(g)?s=!1:(r=!1,v?s!==g.constructor&&(s=!1):s=g.constructor),v+=f);if(!v)return[];if(!n.length)return o;if(r)return o.concat.apply(o,n);if(s){for(y=new s(v),y.set(o),b=0;b<n.length;b++)g=n[b],y.set(g,d),d+=g.length;return y}for(y=new Array(v),l=0;l<o.length;l++)y[l]=o[l];for(b=0;b<n.length;b++){for(g=n[b],l=0;l<g.length;l++)y[d+l]=g[l];d+=l}return y},V.maxRowLength=function(n){return i(n,Math.max,0)},V.minRowLength=function(n){return i(n,Math.min,1/0)};function i(n,r,v){if(e(n))if(e(n[0])){for(var s=v,o=0;o<n.length;o++)s=r(s,n[o].length);return s}else return n.length;return 0}},{}],498:[function(t,B,V){var m=t("fast-isnumeric"),c=t("../constants/numerical").BADNUM,A=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;B.exports=function(e){return typeof e=="string"&&(e=e.replace(A,"")),m(e)?Number(e):c}},{"../constants/numerical":491,"fast-isnumeric":190}],499:[function(t,B,V){B.exports=function(c){var A=c._fullLayout;A._glcanvas&&A._glcanvas.size()&&A._glcanvas.each(function(T){T.regl&&T.regl.clear({color:!0,depth:!0})})}},{}],500:[function(t,B,V){B.exports=function(c){c._responsiveChartHandler&&(window.removeEventListener("resize",c._responsiveChartHandler),delete c._responsiveChartHandler)}},{}],501:[function(t,B,V){var m=t("fast-isnumeric"),c=t("tinycolor2"),A=t("../plots/attributes"),T=t("../components/colorscale/scales"),e=t("../components/color"),a=t("../constants/interactions").DESELECTDIM,i=t("./nested_property"),n=t("./regex").counter,r=t("./mod").modHalf,v=t("./array").isArrayOrTypedArray;V.valObjectMeta={data_array:{coerceFunction:function(o,b,g){v(o)?b.set(o):g!==void 0&&b.set(g)}},enumerated:{coerceFunction:function(o,b,g,d){d.coerceNumber&&(o=+o),d.values.indexOf(o)===-1?b.set(g):b.set(o)},validateFunction:function(o,b){b.coerceNumber&&(o=+o);for(var g=b.values,d=0;d<g.length;d++){var f=String(g[d]);if(f.charAt(0)==="/"&&f.charAt(f.length-1)==="/"){var y=new RegExp(f.substr(1,f.length-2));if(y.test(o))return!0}else if(o===g[d])return!0}return!1}},boolean:{coerceFunction:function(o,b,g){o===!0||o===!1?b.set(o):b.set(g)}},number:{coerceFunction:function(o,b,g,d){!m(o)||d.min!==void 0&&o<d.min||d.max!==void 0&&o>d.max?b.set(g):b.set(+o)}},integer:{coerceFunction:function(o,b,g,d){o%1||!m(o)||d.min!==void 0&&o<d.min||d.max!==void 0&&o>d.max?b.set(g):b.set(+o)}},string:{coerceFunction:function(o,b,g,d){if(typeof o!="string"){var f=typeof o=="number";d.strict===!0||!f?b.set(g):b.set(String(o))}else d.noBlank&&!o?b.set(g):b.set(o)}},color:{coerceFunction:function(o,b,g){c(o).isValid()?b.set(o):b.set(g)}},colorlist:{coerceFunction:function(o,b,g){function d(f){return c(f).isValid()}!Array.isArray(o)||!o.length?b.set(g):o.every(d)?b.set(o):b.set(g)}},colorscale:{coerceFunction:function(o,b,g){b.set(T.get(o,g))}},angle:{coerceFunction:function(o,b,g){o==="auto"?b.set("auto"):m(o)?b.set(r(+o,360)):b.set(g)}},subplotid:{coerceFunction:function(o,b,g,d){var f=d.regex||n(g);if(typeof o=="string"&&f.test(o)){b.set(o);return}b.set(g)},validateFunction:function(o,b){var g=b.dflt;return o===g?!0:typeof o!="string"?!1:!!n(g).test(o)}},flaglist:{coerceFunction:function(o,b,g,d){if((d.extras||[]).indexOf(o)!==-1){b.set(o);return}if(typeof o!="string"){b.set(g);return}for(var f=o.split("+"),y=0;y<f.length;){var l=f[y];d.flags.indexOf(l)===-1||f.indexOf(l)<y?f.splice(y,1):y++}f.length?b.set(f.join("+")):b.set(g)}},any:{coerceFunction:function(o,b,g){o===void 0?b.set(g):b.set(o)}},info_array:{coerceFunction:function(o,b,g,d){function f(F,I,D){var R,N={set:function(z){R=z}};return D===void 0&&(D=I.dflt),V.valObjectMeta[I.valType].coerceFunction(F,N,D,I),R}var y=d.dimensions===2||d.dimensions==="1-2"&&Array.isArray(o)&&Array.isArray(o[0]);if(!Array.isArray(o)){b.set(g);return}var l=d.items,x=[],u=Array.isArray(l),M=u&&y&&Array.isArray(l[0]),_=y&&u&&!M,p=u&&!_?l.length:o.length,w,h,L,S,E,P;if(g=Array.isArray(g)?g:[],y)for(w=0;w<p;w++)for(x[w]=[],L=Array.isArray(o[w])?o[w]:[],_?E=l.length:u?E=l[w].length:E=L.length,h=0;h<E;h++)_?S=l[h]:u?S=l[w][h]:S=l,P=f(L[h],S,(g[w]||[])[h]),P!==void 0&&(x[w][h]=P);else for(w=0;w<p;w++)P=f(o[w],u?l[w]:l,g[w]),P!==void 0&&(x[w]=P);b.set(x)},validateFunction:function(o,b){if(!Array.isArray(o))return!1;var g=b.items,d=Array.isArray(g),f=b.dimensions===2;if(!b.freeLength&&o.length!==g.length)return!1;for(var y=0;y<o.length;y++)if(f){if(!Array.isArray(o[y])||!b.freeLength&&o[y].length!==g[y].length)return!1;for(var l=0;l<o[y].length;l++)if(!s(o[y][l],d?g[y][l]:g))return!1}else if(!s(o[y],d?g[y]:g))return!1;return!0}}},V.coerce=function(o,b,g,d,f){var y=i(g,d).get(),l=i(o,d),x=i(b,d),u=l.get(),M=b._template;if(u===void 0&&M&&(u=i(M,d).get(),M=0),f===void 0&&(f=y.dflt),y.arrayOk&&v(u))return x.set(u),u;var _=V.valObjectMeta[y.valType].coerceFunction;_(u,x,f,y);var p=x.get();return M&&p===f&&!s(u,y)&&(u=i(M,d).get(),_(u,x,f,y),p=x.get()),p},V.coerce2=function(o,b,g,d,f){var y=i(o,d),l=V.coerce(o,b,g,d,f),x=y.get();return x!=null?l:!1},V.coerceFont=function(o,b,g){var d={};return g=g||{},d.family=o(b+".family",g.family),d.size=o(b+".size",g.size),d.color=o(b+".color",g.color),d},V.coercePattern=function(o,b,g,d){var f=o(b+".shape");if(f){o(b+".solidity"),o(b+".size");var y=o(b+".fillmode"),l=y==="overlay";if(!d){var x=o(b+".bgcolor",l?g:void 0);o(b+".fgcolor",l?e.contrast(x):g)}o(b+".fgopacity",l?.5:1)}},V.coerceHoverinfo=function(o,b,g){var d=b._module.attributes,f=d.hoverinfo?d:A,y=f.hoverinfo,l;if(g._dataLength===1){var x=y.dflt==="all"?y.flags.slice():y.dflt.split("+");x.splice(x.indexOf("name"),1),l=x.join("+")}return V.coerce(o,b,f,"hoverinfo",l)},V.coerceSelectionMarkerOpacity=function(o,b){if(!!o.marker){var g=o.marker.opacity;if(g!==void 0){var d,f;!v(g)&&!o.selected&&!o.unselected&&(d=g,f=a*g),b("selected.marker.opacity",d),b("unselected.marker.opacity",f)}}};function s(o,b){var g=V.valObjectMeta[b.valType];if(b.arrayOk&&v(o))return!0;if(g.validateFunction)return g.validateFunction(o,b);var d={},f=d,y={set:function(l){f=l}};return g.coerceFunction(o,y,d,b),f!==d}V.validate=s},{"../components/color":367,"../components/colorscale/scales":382,"../constants/interactions":490,"../plots/attributes":562,"./array":497,"./mod":522,"./nested_property":523,"./regex":532,"fast-isnumeric":190,tinycolor2:313}],502:[function(t,B,V){var m=t("d3-time-format").timeFormat,c=t("fast-isnumeric"),A=t("./loggers"),T=t("./mod").mod,e=t("../constants/numerical"),a=e.BADNUM,i=e.ONEDAY,n=e.ONEHOUR,r=e.ONEMIN,v=e.ONESEC,s=e.EPOCHJD,o=t("../registry"),b=t("d3-time-format").utcFormat,g=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,d=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,f=new Date().getFullYear()-70;function y(R){return R&&o.componentsRegistry.calendars&&typeof R=="string"&&R!=="gregorian"}V.dateTick0=function(R,N){var z=l(R,!!N);if(N<2)return z;var G=V.dateTime2ms(z,R);return G+=i*(N-1),V.ms2DateTime(G,0,R)};function l(R,N){return y(R)?N?o.getComponentMethod("calendars","CANONICAL_SUNDAY")[R]:o.getComponentMethod("calendars","CANONICAL_TICK")[R]:N?"2000-01-02":"2000-01-01"}V.dfltRange=function(R){return y(R)?o.getComponentMethod("calendars","DFLTRANGE")[R]:["2000-01-01","2001-01-01"]},V.isJSDate=function(R){return typeof R=="object"&&R!==null&&typeof R.getTime=="function"};var x,u;V.dateTime2ms=function(R,N){if(V.isJSDate(R)){var z=R.getTimezoneOffset()*r,G=(R.getUTCMinutes()-R.getMinutes())*r+(R.getUTCSeconds()-R.getSeconds())*v+(R.getUTCMilliseconds()-R.getMilliseconds());if(G){var Y=3*r;z=z-Y/2+T(G-z+Y/2,Y)}return R=Number(R)-z,R>=x&&R<=u?R:a}if(typeof R!="string"&&typeof R!="number")return a;R=String(R);var ee=y(N),Z=R.charAt(0);ee&&(Z==="G"||Z==="g")&&(R=R.substr(1),N="");var X=ee&&N.substr(0,7)==="chinese",ne=R.match(X?d:g);if(!ne)return a;var ce=ne[1],Q=ne[3]||"1",K=Number(ne[5]||1),U=Number(ne[7]||0),H=Number(ne[9]||0),q=Number(ne[11]||0);if(ee){if(ce.length===2)return a;ce=Number(ce);var re;try{var j=o.getComponentMethod("calendars","getCal")(N);if(X){var $=Q.charAt(Q.length-1)==="i";Q=parseInt(Q,10),re=j.newDate(ce,j.toMonthIndex(ce,Q,$),K)}else re=j.newDate(ce,Number(Q),K)}catch{return a}return re?(re.toJD()-s)*i+U*n+H*r+q*v:a}ce.length===2?ce=(Number(ce)+2e3-f)%100+f:ce=Number(ce),Q-=1;var ie=new Date(Date.UTC(2e3,Q,K,U,H));return ie.setUTCFullYear(ce),ie.getUTCMonth()!==Q||ie.getUTCDate()!==K?a:ie.getTime()+q*v},x=V.MIN_MS=V.dateTime2ms("-9999"),u=V.MAX_MS=V.dateTime2ms("9999-12-31 23:59:59.9999"),V.isDateTime=function(R,N){return V.dateTime2ms(R,N)!==a};function M(R,N){return String(R+Math.pow(10,N)).substr(1)}var _=90*i,p=3*n,w=5*r;V.ms2DateTime=function(R,N,z){if(typeof R!="number"||!(R>=x&&R<=u))return a;N||(N=0);var G=Math.floor(T(R+.05,1)*10),Y=Math.round(R-G/10),ee,Z,X,ne,ce,Q;if(y(z)){var K=Math.floor(Y/i)+s,U=Math.floor(T(R,i));try{ee=o.getComponentMethod("calendars","getCal")(z).fromJD(K).formatDate("yyyy-mm-dd")}catch{ee=b("G%Y-%m-%d")(new Date(Y))}if(ee.charAt(0)==="-")for(;ee.length<11;)ee="-0"+ee.substr(1);else for(;ee.length<10;)ee="0"+ee;Z=N<_?Math.floor(U/n):0,X=N<_?Math.floor(U%n/r):0,ne=N<p?Math.floor(U%r/v):0,ce=N<w?U%v*10+G:0}else Q=new Date(Y),ee=b("%Y-%m-%d")(Q),Z=N<_?Q.getUTCHours():0,X=N<_?Q.getUTCMinutes():0,ne=N<p?Q.getUTCSeconds():0,ce=N<w?Q.getUTCMilliseconds()*10+G:0;return h(ee,Z,X,ne,ce)},V.ms2DateTimeLocal=function(R){if(!(R>=x+i&&R<=u-i))return a;var N=Math.floor(T(R+.05,1)*10),z=new Date(Math.round(R-N/10)),G=m("%Y-%m-%d")(z),Y=z.getHours(),ee=z.getMinutes(),Z=z.getSeconds(),X=z.getUTCMilliseconds()*10+N;return h(G,Y,ee,Z,X)};function h(R,N,z,G,Y){if((N||z||G||Y)&&(R+=" "+M(N,2)+":"+M(z,2),(G||Y)&&(R+=":"+M(G,2),Y))){for(var ee=4;Y%10===0;)ee-=1,Y/=10;R+="."+M(Y,ee)}return R}V.cleanDate=function(R,N,z){if(R===a)return N;if(V.isJSDate(R)||typeof R=="number"&&isFinite(R)){if(y(z))return A.error("JS Dates and milliseconds are incompatible with world calendars",R),N;if(R=V.ms2DateTimeLocal(+R),!R&&N!==void 0)return N}else if(!V.isDateTime(R,z))return A.error("unrecognized date",R),N;return R};var L=/%\d?f/g,S=/%h/g,E={1:"1",2:"1",3:"2",4:"2"};function P(R,N,z,G){R=R.replace(L,function(ee){var Z=Math.min(+ee.charAt(1)||6,6),X=(N/1e3%1+2).toFixed(Z).substr(2).replace(/0+$/,"")||"0";return X});var Y=new Date(Math.floor(N+.05));if(R=R.replace(S,function(){return E[z("%q")(Y)]}),y(G))try{R=o.getComponentMethod("calendars","worldCalFmt")(R,N,G)}catch{return"Invalid"}return z(R)(Y)}var F=[59,59.9,59.99,59.999,59.9999];function I(R,N){var z=T(R+.05,i),G=M(Math.floor(z/n),2)+":"+M(T(Math.floor(z/r),60),2);if(N!=="M"){c(N)||(N=0);var Y=Math.min(T(R/v,60),F[N]),ee=(100+Y).toFixed(N).substr(1);N>0&&(ee=ee.replace(/0+$/,"").replace(/[\.]$/,"")),G+=":"+ee}return G}V.formatDate=function(R,N,z,G,Y,ee){if(Y=y(Y)&&Y,!N)if(z==="y")N=ee.year;else if(z==="m")N=ee.month;else if(z==="d")N=ee.dayMonth+`
`+ee.year;else return I(R,z)+`
`+P(ee.dayMonthYear,R,G,Y);return P(N,R,G,Y)};var D=3*i;V.incrementMonth=function(R,N,z){z=y(z)&&z;var G=T(R,i);if(R=Math.round(R-G),z)try{var Y=Math.round(R/i)+s,ee=o.getComponentMethod("calendars","getCal")(z),Z=ee.fromJD(Y);return N%12?ee.add(Z,N,"m"):ee.add(Z,N/12,"y"),(Z.toJD()-s)*i+G}catch{A.error("invalid ms "+R+" in calendar "+z)}var X=new Date(R+D);return X.setUTCMonth(X.getUTCMonth()+N)+G-D},V.findExactDates=function(R,N){for(var z=0,G=0,Y=0,ee=0,Z,X,ne=y(N)&&o.getComponentMethod("calendars","getCal")(N),ce=0;ce<R.length;ce++){if(X=R[ce],!c(X)){ee++;continue}if(!(X%i))if(ne)try{Z=ne.fromJD(X/i+s),Z.day()===1?Z.month()===1?z++:G++:Y++}catch{}else Z=new Date(X),Z.getUTCDate()===1?Z.getUTCMonth()===0?z++:G++:Y++}G+=z,Y+=G;var Q=R.length-ee;return{exactYears:z/Q,exactMonths:G/Q,exactDays:Y/Q}}},{"../constants/numerical":491,"../registry":647,"./loggers":519,"./mod":522,"d3-time-format":120,"fast-isnumeric":190}],503:[function(t,B,V){var m=t("@plotly/d3"),c=t("./loggers"),A=t("./matrix"),T=t("gl-mat4");function e(f){var y;if(typeof f=="string"){if(y=document.getElementById(f),y===null)throw new Error("No DOM element with id '"+f+"' exists on the page.");return y}else if(f==null)throw new Error("DOM element provided is null or undefined");return f}function a(f){var y=m.select(f);return y.node()instanceof HTMLElement&&y.size()&&y.classed("js-plotly-plot")}function i(f){var y=f&&f.parentNode;y&&y.removeChild(f)}function n(f,y){r("global",f,y)}function r(f,y,l){var x="plotly.js-style-"+f,u=document.getElementById(x);u||(u=document.createElement("style"),u.setAttribute("id",x),u.appendChild(document.createTextNode("")),document.head.appendChild(u));var M=u.sheet;M.insertRule?M.insertRule(y+"{"+l+"}",0):M.addRule?M.addRule(y,l,0):c.warn("addStyleRule failed")}function v(f){var y="plotly.js-style-"+f,l=document.getElementById(y);l&&i(l)}function s(f){var y=b(f),l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return y.forEach(function(x){var u=o(x);if(u){var M=A.convertCssMatrix(u);l=T.multiply(l,l,M)}}),l}function o(f){var y=window.getComputedStyle(f,null),l=y.getPropertyValue("-webkit-transform")||y.getPropertyValue("-moz-transform")||y.getPropertyValue("-ms-transform")||y.getPropertyValue("-o-transform")||y.getPropertyValue("transform");return l==="none"?null:l.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(x){return+x})}function b(f){for(var y=[];g(f);)y.push(f),f=f.parentNode;return y}function g(f){return f&&(f instanceof Element||f instanceof HTMLElement)}function d(f,y){return f&&y&&f.x===y.x&&f.y===y.y&&f.top===y.top&&f.left===y.left&&f.right===y.right&&f.bottom===y.bottom}B.exports={getGraphDiv:e,isPlotDiv:a,removeElement:i,addStyleRule:n,addRelatedStyleRule:r,deleteRelatedStyleRule:v,getFullTransformMatrix:s,getElementTransformMatrix:o,getElementAndAncestors:b,equalDomRects:d}},{"./loggers":519,"./matrix":521,"@plotly/d3":58,"gl-mat4":210}],504:[function(t,B,V){var m=t("events").EventEmitter,c={init:function(A){if(A._ev instanceof m)return A;var T=new m,e=new m;return A._ev=T,A._internalEv=e,A.on=T.on.bind(T),A.once=T.once.bind(T),A.removeListener=T.removeListener.bind(T),A.removeAllListeners=T.removeAllListeners.bind(T),A._internalOn=e.on.bind(e),A._internalOnce=e.once.bind(e),A._removeInternalListener=e.removeListener.bind(e),A._removeAllInternalListeners=e.removeAllListeners.bind(e),A.emit=function(a,i){typeof jQuery<"u"&&jQuery(A).trigger(a,i),T.emit(a,i),e.emit(a,i)},A},triggerHandler:function(A,T,e){var a,i;typeof jQuery<"u"&&(a=jQuery(A).triggerHandler(T,e));var n=A._ev;if(!n)return a;var r=n._events[T];if(!r)return a;function v(o){if(o.listener){if(n.removeListener(T,o.listener),!o.fired)return o.fired=!0,o.listener.apply(n,[e])}else return o.apply(n,[e])}r=Array.isArray(r)?r:[r];var s;for(s=0;s<r.length-1;s++)v(r[s]);return i=v(r[s]),a!==void 0?a:i},purge:function(A){return delete A._ev,delete A.on,delete A.once,delete A.removeListener,delete A.removeAllListeners,delete A.emit,delete A._ev,delete A._internalEv,delete A._internalOn,delete A._internalOnce,delete A._removeInternalListener,delete A._removeAllInternalListeners,A}};B.exports=c},{events:84}],505:[function(t,B,V){var m=t("./is_plain_object.js"),c=Array.isArray;function A(e,a){var i,n;for(i=0;i<e.length;i++){if(n=e[i],n!==null&&typeof n=="object")return!1;n!==void 0&&(a[i]=n)}return!0}V.extendFlat=function(){return T(arguments,!1,!1,!1)},V.extendDeep=function(){return T(arguments,!0,!1,!1)},V.extendDeepAll=function(){return T(arguments,!0,!0,!1)},V.extendDeepNoArrays=function(){return T(arguments,!0,!1,!0)};function T(e,a,i,n){var r=e[0],v=e.length,s,o,b,g,d,f,y;if(v===2&&c(r)&&c(e[1])&&r.length===0){if(y=A(e[1],r),y)return r;r.splice(0,r.length)}for(var l=1;l<v;l++){s=e[l];for(o in s)b=r[o],g=s[o],n&&c(g)?r[o]=g:a&&g&&(m(g)||(d=c(g)))?(d?(d=!1,f=b&&c(b)?b:[]):f=b&&m(b)?b:{},r[o]=T([f,g],a,i,n)):(typeof g<"u"||i)&&(r[o]=g)}return r}},{"./is_plain_object.js":516}],506:[function(t,B,V){B.exports=function(c){for(var A={},T=[],e=0,a=0;a<c.length;a++){var i=c[a];A[i]!==1&&(A[i]=1,T[e++]=i)}return T}},{}],507:[function(t,B,V){B.exports=function(e){for(var a=A(e)?c:m,i=[],n=0;n<e.length;n++){var r=e[n];a(r)&&i.push(r)}return i};function m(T){return T.visible===!0}function c(T){var e=T[0].trace;return e.visible===!0&&e._length!==0}function A(T){return Array.isArray(T)&&Array.isArray(T[0])&&T[0][0]&&T[0][0].trace}},{}],508:[function(t,B,V){var m=t("@plotly/d3"),c=t("country-regex"),A=t("@turf/area"),T=t("@turf/centroid"),e=t("@turf/bbox"),a=t("./identity"),i=t("./loggers"),n=t("./is_plain_object"),r=t("./nested_property"),v=t("./polygon"),s=Object.keys(c),o={"ISO-3":a,"USA-states":a,"country names":b};function b(M){for(var _=0;_<s.length;_++){var p=s[_],w=new RegExp(c[p]);if(w.test(M.trim().toLowerCase()))return p}return i.log("Unrecognized country name: "+M+"."),!1}function g(M,_,p){if(!_||typeof _!="string")return!1;var w=o[M](_),h,L,S;if(w){if(M==="USA-states")for(h=[],S=0;S<p.length;S++)L=p[S],L.properties&&L.properties.gu&&L.properties.gu==="USA"&&h.push(L);else h=p;for(S=0;S<h.length;S++)if(L=h[S],L.id===w)return L;i.log(["Location with id",w,"does not have a matching topojson feature at this resolution."].join(" "))}return!1}function d(M){var _=M.geometry,p=_.coordinates,w=M.id,h=[],L,S,E,P;function F(I){for(var D=0;D<I.length-1;D++)if(I[D][0]>0&&I[D+1][0]<0)return D;return null}switch(w==="RUS"||w==="FJI"?L=function(I){var D;if(F(I)===null)D=I;else for(D=new Array(I.length),P=0;P<I.length;P++)D[P]=[I[P][0]<0?I[P][0]+360:I[P][0],I[P][1]];h.push(v.tester(D))}:w==="ATA"?L=function(I){var D=F(I);if(D===null)return h.push(v.tester(I));var R=new Array(I.length+1),N=0;for(P=0;P<I.length;P++)P>D?R[N++]=[I[P][0]+360,I[P][1]]:P===D?(R[N++]=I[P],R[N++]=[I[P][0],-90]):R[N++]=I[P];var z=v.tester(R);z.pts.pop(),h.push(z)}:L=function(I){h.push(v.tester(I))},_.type){case"MultiPolygon":for(S=0;S<p.length;S++)for(E=0;E<p[S].length;E++)L(p[S][E]);break;case"Polygon":for(S=0;S<p.length;S++)L(p[S]);break}return h}function f(M){var _=M.geojson,p=window.PlotlyGeoAssets||{},w=typeof _=="string"?p[_]:_;return n(w)?w:(i.error("Oops ... something went wrong when fetching "+_),!1)}function y(M){var _=M[0].trace,p=f(_);if(!p)return!1;var w={},h=[],L;for(L=0;L<_._length;L++){var S=M[L];(S.loc||S.loc===0)&&(w[S.loc]=S)}function E(I){var D=r(I,_.featureidkey||"id").get(),R=w[D];if(R){var N=I.geometry;if(N.type==="Polygon"||N.type==="MultiPolygon"){var z={type:"Feature",id:D,geometry:N,properties:{}};z.properties.ct=l(z),R.fIn=I,R.fOut=z,h.push(z)}else i.log(["Location",R.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete w[D]}switch(p.type){case"FeatureCollection":var P=p.features;for(L=0;L<P.length;L++)E(P[L]);break;case"Feature":E(p);break;default:return i.warn(["Invalid GeoJSON type",(p.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var F in w)i.log(["Location *"+F+"*","does not have a matching feature with id-key","*"+_.featureidkey+"*."].join(" "));return h}function l(M){var _=M.geometry,p;if(_.type==="MultiPolygon")for(var w=_.coordinates,h=0,L=0;L<w.length;L++){var S={type:"Polygon",coordinates:w[L]},E=A.default(S);E>h&&(h=E,p=S)}else p=_;return T.default(p).geometry.coordinates}function x(M){var _=window.PlotlyGeoAssets||{},p=[];function w(P){return new Promise(function(F,I){m.json(P,function(D,R){if(D){delete _[P];var N=D.status===404?'GeoJSON at URL "'+P+'" does not exist.':"Unexpected error while fetching from "+P;return I(new Error(N))}return _[P]=R,F(R)})})}function h(P){return new Promise(function(F,I){var D=0,R=setInterval(function(){if(_[P]&&_[P]!=="pending")return clearInterval(R),F(_[P]);if(D>100)return clearInterval(R),I("Unexpected error while fetching from "+P);D++},50)})}for(var L=0;L<M.length;L++){var S=M[L][0].trace,E=S.geojson;typeof E=="string"&&(_[E]?_[E]==="pending"&&p.push(h(E)):(_[E]="pending",p.push(w(E))))}return p}function u(M){return e.default(M)}B.exports={locationToFeature:g,feature2polygons:d,getTraceGeojson:f,extractTraceFeature:y,fetchTraceGeoData:x,computeBbox:u}},{"./identity":513,"./is_plain_object":516,"./loggers":519,"./nested_property":523,"./polygon":527,"@plotly/d3":58,"@turf/area":61,"@turf/bbox":64,"@turf/centroid":67,"country-regex":94}],509:[function(t,B,V){var m=t("../constants/numerical").BADNUM;V.calcTraceToLineCoords=function(c){for(var A=c[0].trace,T=A.connectgaps,e=[],a=[],i=0;i<c.length;i++){var n=c[i],r=n.lonlat;r[0]!==m?a.push(r):!T&&a.length>0&&(e.push(a),a=[])}return a.length>0&&e.push(a),e},V.makeLine=function(c){return c.length===1?{type:"LineString",coordinates:c[0]}:{type:"MultiLineString",coordinates:c}},V.makePolygon=function(c){if(c.length===1)return{type:"Polygon",coordinates:c};for(var A=new Array(c.length),T=0;T<c.length;T++)A[T]=[c[T]];return{type:"MultiPolygon",coordinates:A}},V.makeBlank=function(){return{type:"Point",coordinates:[]}}},{"../constants/numerical":491}],510:[function(t,B,V){var m=t("./mod").mod;V.segmentsIntersect=c;function c(i,n,r,v,s,o,b,g){var d=r-i,f=s-i,y=b-s,l=v-n,x=o-n,u=g-o,M=d*u-y*l;if(M===0)return null;var _=(f*u-y*x)/M,p=(f*l-d*x)/M;return p<0||p>1||_<0||_>1?null:{x:i+d*_,y:n+l*_}}V.segmentDistance=function(n,r,v,s,o,b,g,d){if(c(n,r,v,s,o,b,g,d))return 0;var f=v-n,y=s-r,l=g-o,x=d-b,u=f*f+y*y,M=l*l+x*x,_=Math.min(A(f,y,u,o-n,b-r),A(f,y,u,g-n,d-r),A(l,x,M,n-o,r-b),A(l,x,M,v-o,s-b));return Math.sqrt(_)};function A(i,n,r,v,s){var o=v*i+s*n;if(o<0)return v*v+s*s;if(o>r){var b=v-i,g=s-n;return b*b+g*g}else{var d=v*n-s*i;return d*d/r}}var T,e,a;V.getTextLocation=function(n,r,v,s){if((n!==e||s!==a)&&(T={},e=n,a=s),T[v])return T[v];var o=n.getPointAtLength(m(v-s/2,r)),b=n.getPointAtLength(m(v+s/2,r)),g=Math.atan((b.y-o.y)/(b.x-o.x)),d=n.getPointAtLength(m(v,r)),f=(d.x*4+o.x+b.x)/6,y=(d.y*4+o.y+b.y)/6,l={x:f,y,theta:g};return T[v]=l,l},V.clearLocationCache=function(){e=null},V.getVisibleSegment=function(n,r,v){var s=r.left,o=r.right,b=r.top,g=r.bottom,d=0,f=n.getTotalLength(),y=f,l,x;function u(_){var p=n.getPointAtLength(_);_===0?l=p:_===f&&(x=p);var w=p.x<s?s-p.x:p.x>o?p.x-o:0,h=p.y<b?b-p.y:p.y>g?p.y-g:0;return Math.sqrt(w*w+h*h)}for(var M=u(d);M;){if(d+=M+v,d>y)return;M=u(d)}for(M=u(y);M;){if(y-=M+v,d>y)return;M=u(y)}return{min:d,max:y,len:y-d,total:f,isClosed:d===0&&y===f&&Math.abs(l.x-x.x)<.1&&Math.abs(l.y-x.y)<.1}},V.findPointOnPath=function(n,r,v,s){s=s||{};for(var o=s.pathLength||n.getTotalLength(),b=s.tolerance||.001,g=s.iterationLimit||30,d=n.getPointAtLength(0)[v]>n.getPointAtLength(o)[v]?-1:1,f=0,y=0,l=o,x,u,M;f<g;){if(x=(y+l)/2,u=n.getPointAtLength(x),M=u[v]-r,Math.abs(M)<b)return u;d*M>0?l=x:y=x,f++}return u}},{"./mod":522}],511:[function(t,B,V){var m=t("fast-isnumeric"),c=t("tinycolor2"),A=t("color-normalize"),T=t("../components/colorscale"),e=t("../components/color/attributes").defaultLine,a=t("./array").isArrayOrTypedArray,i=A(e),n=1;function r(g,d){var f=g;return f[3]*=d,f}function v(g){if(m(g))return i;var d=A(g);return d.length?d:i}function s(g){return m(g)?g:n}function o(g,d,f){var y=g.color,l=a(y),x=a(d),u=T.extractOpts(g),M=[],_,p,w,h,L;if(u.colorscale!==void 0?_=T.makeColorScaleFuncFromTrace(g):_=v,l?p=function(E,P){return E[P]===void 0?i:A(_(E[P]))}:p=v,x?w=function(E,P){return E[P]===void 0?n:s(E[P])}:w=s,l||x)for(var S=0;S<f;S++)h=p(y,S),L=w(d,S),M[S]=r(h,L);else M=r(A(y),d);return M}function b(g){var d=T.extractOpts(g),f=d.colorscale;return d.reversescale&&(f=T.flipScale(d.colorscale)),f.map(function(y){var l=y[0],x=c(y[1]),u=x.toRgb();return{index:l,rgb:[u.r,u.g,u.b,u.a]}})}B.exports={formatColor:o,parseColorScale:b}},{"../components/color/attributes":366,"../components/colorscale":379,"./array":497,"color-normalize":89,"fast-isnumeric":190,tinycolor2:313}],512:[function(t,B,V){var m=t("./identity");function c(A){return[A]}B.exports={keyFun:function(A){return A.key},repeat:c,descend:m,wrap:c,unwrap:function(A){return A[0]}}},{"./identity":513}],513:[function(t,B,V){B.exports=function(c){return c}},{}],514:[function(t,B,V){B.exports=function(c,A){if(!A)return c;var T=1/Math.abs(A),e=T>1?(T*c+T*A)/T:c+A,a=String(e).length;if(a>16){var i=String(A).length,n=String(c).length;if(a>=n+i){var r=parseFloat(e).toPrecision(12);r.indexOf("e+")===-1&&(e=+r)}}return e}},{}],515:[function(t,B,V){var m=t("@plotly/d3"),c=t("d3-time-format").utcFormat,A=t("d3-format").format,T=t("fast-isnumeric"),e=t("../constants/numerical"),a=e.FP_SAFE,i=-a,n=e.BADNUM,r=B.exports={};r.adjustFormat=function(Q){return!Q||/^\d[.]\df/.test(Q)||/[.]\d%/.test(Q)?Q:Q==="0.f"?"~f":/^\d%/.test(Q)?"~%":/^\ds/.test(Q)?"~s":!/^[~,.0$]/.test(Q)&&/[&fps]/.test(Q)?"~"+Q:Q};var v={};r.warnBadFormat=function(ce){var Q=String(ce);v[Q]||(v[Q]=1,r.warn('encountered bad format: "'+Q+'"'))},r.noFormat=function(ce){return String(ce)},r.numberFormat=function(ce){var Q;try{Q=A(r.adjustFormat(ce))}catch{return r.warnBadFormat(ce),r.noFormat}return Q},r.nestedProperty=t("./nested_property"),r.keyedContainer=t("./keyed_container"),r.relativeAttr=t("./relative_attr"),r.isPlainObject=t("./is_plain_object"),r.toLogRange=t("./to_log_range"),r.relinkPrivateKeys=t("./relink_private");var s=t("./array");r.isTypedArray=s.isTypedArray,r.isArrayOrTypedArray=s.isArrayOrTypedArray,r.isArray1D=s.isArray1D,r.ensureArray=s.ensureArray,r.concat=s.concat,r.maxRowLength=s.maxRowLength,r.minRowLength=s.minRowLength;var o=t("./mod");r.mod=o.mod,r.modHalf=o.modHalf;var b=t("./coerce");r.valObjectMeta=b.valObjectMeta,r.coerce=b.coerce,r.coerce2=b.coerce2,r.coerceFont=b.coerceFont,r.coercePattern=b.coercePattern,r.coerceHoverinfo=b.coerceHoverinfo,r.coerceSelectionMarkerOpacity=b.coerceSelectionMarkerOpacity,r.validate=b.validate;var g=t("./dates");r.dateTime2ms=g.dateTime2ms,r.isDateTime=g.isDateTime,r.ms2DateTime=g.ms2DateTime,r.ms2DateTimeLocal=g.ms2DateTimeLocal,r.cleanDate=g.cleanDate,r.isJSDate=g.isJSDate,r.formatDate=g.formatDate,r.incrementMonth=g.incrementMonth,r.dateTick0=g.dateTick0,r.dfltRange=g.dfltRange,r.findExactDates=g.findExactDates,r.MIN_MS=g.MIN_MS,r.MAX_MS=g.MAX_MS;var d=t("./search");r.findBin=d.findBin,r.sorterAsc=d.sorterAsc,r.sorterDes=d.sorterDes,r.distinctVals=d.distinctVals,r.roundUp=d.roundUp,r.sort=d.sort,r.findIndexOfMin=d.findIndexOfMin,r.sortObjectKeys=t("./sort_object_keys");var f=t("./stats");r.aggNums=f.aggNums,r.len=f.len,r.mean=f.mean,r.median=f.median,r.midRange=f.midRange,r.variance=f.variance,r.stdev=f.stdev,r.interp=f.interp;var y=t("./matrix");r.init2dArray=y.init2dArray,r.transposeRagged=y.transposeRagged,r.dot=y.dot,r.translationMatrix=y.translationMatrix,r.rotationMatrix=y.rotationMatrix,r.rotationXYMatrix=y.rotationXYMatrix,r.apply3DTransform=y.apply3DTransform,r.apply2DTransform=y.apply2DTransform,r.apply2DTransform2=y.apply2DTransform2,r.convertCssMatrix=y.convertCssMatrix,r.inverseTransformMatrix=y.inverseTransformMatrix;var l=t("./angles");r.deg2rad=l.deg2rad,r.rad2deg=l.rad2deg,r.angleDelta=l.angleDelta,r.angleDist=l.angleDist,r.isFullCircle=l.isFullCircle,r.isAngleInsideSector=l.isAngleInsideSector,r.isPtInsideSector=l.isPtInsideSector,r.pathArc=l.pathArc,r.pathSector=l.pathSector,r.pathAnnulus=l.pathAnnulus;var x=t("./anchor_utils");r.isLeftAnchor=x.isLeftAnchor,r.isCenterAnchor=x.isCenterAnchor,r.isRightAnchor=x.isRightAnchor,r.isTopAnchor=x.isTopAnchor,r.isMiddleAnchor=x.isMiddleAnchor,r.isBottomAnchor=x.isBottomAnchor;var u=t("./geometry2d");r.segmentsIntersect=u.segmentsIntersect,r.segmentDistance=u.segmentDistance,r.getTextLocation=u.getTextLocation,r.clearLocationCache=u.clearLocationCache,r.getVisibleSegment=u.getVisibleSegment,r.findPointOnPath=u.findPointOnPath;var M=t("./extend");r.extendFlat=M.extendFlat,r.extendDeep=M.extendDeep,r.extendDeepAll=M.extendDeepAll,r.extendDeepNoArrays=M.extendDeepNoArrays;var _=t("./loggers");r.log=_.log,r.warn=_.warn,r.error=_.error;var p=t("./regex");r.counterRegex=p.counter;var w=t("./throttle");r.throttle=w.throttle,r.throttleDone=w.done,r.clearThrottle=w.clear;var h=t("./dom");r.getGraphDiv=h.getGraphDiv,r.isPlotDiv=h.isPlotDiv,r.removeElement=h.removeElement,r.addStyleRule=h.addStyleRule,r.addRelatedStyleRule=h.addRelatedStyleRule,r.deleteRelatedStyleRule=h.deleteRelatedStyleRule,r.getFullTransformMatrix=h.getFullTransformMatrix,r.getElementTransformMatrix=h.getElementTransformMatrix,r.getElementAndAncestors=h.getElementAndAncestors,r.equalDomRects=h.equalDomRects,r.clearResponsive=t("./clear_responsive"),r.preserveDrawingBuffer=t("./preserve_drawing_buffer"),r.makeTraceGroups=t("./make_trace_groups"),r._=t("./localize"),r.notifier=t("./notifier"),r.filterUnique=t("./filter_unique"),r.filterVisible=t("./filter_visible"),r.pushUnique=t("./push_unique"),r.increment=t("./increment"),r.cleanNumber=t("./clean_number"),r.ensureNumber=function(Q){return T(Q)?(Q=Number(Q),Q>a||Q<i?n:Q):n},r.isIndex=function(ce,Q){return Q!==void 0&&ce>=Q?!1:T(ce)&&ce>=0&&ce%1===0},r.noop=t("./noop"),r.identity=t("./identity"),r.repeat=function(ce,Q){for(var K=new Array(Q),U=0;U<Q;U++)K[U]=ce;return K},r.swapAttrs=function(ce,Q,K,U){K||(K="x"),U||(U="y");for(var H=0;H<Q.length;H++){var q=Q[H],re=r.nestedProperty(ce,q.replace("?",K)),j=r.nestedProperty(ce,q.replace("?",U)),$=re.get();re.set(j.get()),j.set($)}},r.raiseToTop=function(Q){Q.parentNode.appendChild(Q)},r.cancelTransition=function(ce){return ce.transition().duration(0)},r.constrain=function(ce,Q,K){return Q>K?Math.max(K,Math.min(Q,ce)):Math.max(Q,Math.min(K,ce))},r.bBoxIntersect=function(ce,Q,K){return K=K||0,ce.left<=Q.right+K&&Q.left<=ce.right+K&&ce.top<=Q.bottom+K&&Q.top<=ce.bottom+K},r.simpleMap=function(ce,Q,K,U,H){for(var q=ce.length,re=new Array(q),j=0;j<q;j++)re[j]=Q(ce[j],K,U,H);return re},r.randstr=function ce(Q,K,U,H){if(U||(U=16),K===void 0&&(K=24),K<=0)return"0";var q=Math.log(Math.pow(2,K))/Math.log(U),re="",j,$,ie;for(j=2;q===1/0;j*=2)q=Math.log(Math.pow(2,K/j))/Math.log(U)*j;var oe=q-Math.floor(q);for(j=0;j<Math.floor(q);j++)ie=Math.floor(Math.random()*U).toString(U),re=ie+re;oe&&($=Math.pow(U,oe),ie=Math.floor(Math.random()*$).toString(U),re=ie+re);var ae=parseInt(re,U);return Q&&Q[re]||ae!==1/0&&ae>=Math.pow(2,K)?H>10?(r.warn("randstr failed uniqueness"),re):ce(Q,K,U,(H||0)+1):re},r.OptionControl=function(ce,Q){ce||(ce={}),Q||(Q="opt");var K={};return K.optionList=[],K._newoption=function(U){U[Q]=ce,K[U.name]=U,K.optionList.push(U)},K["_"+Q]=ce,K},r.smooth=function(ce,Q){if(Q=Math.round(Q)||0,Q<2)return ce;var K=ce.length,U=2*K,H=2*Q-1,q=new Array(H),re=new Array(K),j,$,ie,oe;for(j=0;j<H;j++)q[j]=(1-Math.cos(Math.PI*(j+1)/Q))/(2*Q);for(j=0;j<K;j++){for(oe=0,$=0;$<H;$++)ie=j+$+1-Q,ie<-K?ie-=U*Math.round(ie/U):ie>=U&&(ie-=U*Math.floor(ie/U)),ie<0?ie=-1-ie:ie>=K&&(ie=U-1-ie),oe+=ce[ie]*q[$];re[j]=oe}return re},r.syncOrAsync=function(ce,Q,K){var U,H;function q(){return r.syncOrAsync(ce,Q,K)}for(;ce.length;)if(H=ce.splice(0,1)[0],U=H(Q),U&&U.then)return U.then(q);return K&&K(Q)},r.stripTrailingSlash=function(ce){return ce.substr(-1)==="/"?ce.substr(0,ce.length-1):ce},r.noneOrAll=function(ce,Q,K){if(!!ce){var U=!1,H=!0,q,re;for(q=0;q<K.length;q++)re=ce[K[q]],re!=null?U=!0:H=!1;if(U&&!H)for(q=0;q<K.length;q++)ce[K[q]]=Q[K[q]]}},r.mergeArray=function(ce,Q,K,U){var H=typeof U=="function";if(r.isArrayOrTypedArray(ce))for(var q=Math.min(ce.length,Q.length),re=0;re<q;re++){var j=ce[re];Q[re][K]=H?U(j):j}},r.mergeArrayCastPositive=function(ce,Q,K){return r.mergeArray(ce,Q,K,function(U){var H=+U;return isFinite(H)&&H>0?H:0})},r.fillArray=function(ce,Q,K,U){if(U=U||r.identity,r.isArrayOrTypedArray(ce))for(var H=0;H<Q.length;H++)Q[H][K]=U(ce[H])},r.castOption=function(ce,Q,K,U){U=U||r.identity;var H=r.nestedProperty(ce,K).get();return r.isArrayOrTypedArray(H)?Array.isArray(Q)&&r.isArrayOrTypedArray(H[Q[0]])?U(H[Q[0]][Q[1]]):U(H[Q]):H},r.extractOption=function(ce,Q,K,U){if(K in ce)return ce[K];var H=r.nestedProperty(Q,U).get();if(!Array.isArray(H))return H};function L(ce){var Q={};for(var K in ce)for(var U=ce[K],H=0;H<U.length;H++)Q[U[H]]=+K;return Q}r.tagSelected=function(ce,Q,K){var U=Q.selectedpoints,H=Q._indexToPoints,q;H&&(q=L(H));function re(ae){return ae!==void 0&&ae<ce.length}for(var j=0;j<U.length;j++){var $=U[j];if(r.isIndex($)||r.isArrayOrTypedArray($)&&r.isIndex($[0])&&r.isIndex($[1])){var ie=q?q[$]:$,oe=K?K[ie]:ie;re(oe)&&(ce[oe].selected=1)}}},r.selIndices2selPoints=function(ce){var Q=ce.selectedpoints,K=ce._indexToPoints;if(K){for(var U=L(K),H=[],q=0;q<Q.length;q++){var re=Q[q];if(r.isIndex(re)){var j=U[re];r.isIndex(j)&&H.push(j)}}return H}else return Q},r.getTargetArray=function(ce,Q){var K=Q.target;if(typeof K=="string"&&K){var U=r.nestedProperty(ce,K).get();return Array.isArray(U)?U:!1}else if(Array.isArray(K))return K;return!1},r.minExtend=function(ce,Q){var K={};typeof Q!="object"&&(Q={});var U=3,H=Object.keys(ce),q,re,j;for(q=0;q<H.length;q++)re=H[q],j=ce[re],!(re.charAt(0)==="_"||typeof j=="function")&&(re==="module"?K[re]=j:Array.isArray(j)?re==="colorscale"?K[re]=j.slice():K[re]=j.slice(0,U):r.isTypedArray(j)?K[re]=j.subarray(0,U):j&&typeof j=="object"?K[re]=r.minExtend(ce[re],Q[re]):K[re]=j);for(H=Object.keys(Q),q=0;q<H.length;q++)re=H[q],j=Q[re],(typeof j!="object"||!(re in K)||typeof K[re]!="object")&&(K[re]=j);return K},r.titleCase=function(ce){return ce.charAt(0).toUpperCase()+ce.substr(1)},r.containsAny=function(ce,Q){for(var K=0;K<Q.length;K++)if(ce.indexOf(Q[K])!==-1)return!0;return!1},r.isIE=function(){return typeof window.navigator.msSaveBlob<"u"};var S=/Version\/[\d\.]+.*Safari/;r.isSafari=function(){return S.test(window.navigator.userAgent)};var E=/iPad|iPhone|iPod/;r.isIOS=function(){return E.test(window.navigator.userAgent)};var P=/Firefox\/(\d+)\.\d+/;r.getFirefoxVersion=function(){var ce=P.exec(window.navigator.userAgent);if(ce&&ce.length===2){var Q=parseInt(ce[1]);if(!isNaN(Q))return Q}return null},r.isD3Selection=function(ce){return ce instanceof m.selection},r.ensureSingle=function(ce,Q,K,U){var H=ce.select(Q+(K?"."+K:""));if(H.size())return H;var q=ce.append(Q);return K&&q.classed(K,!0),U&&q.call(U),q},r.ensureSingleById=function(ce,Q,K,U){var H=ce.select(Q+"#"+K);if(H.size())return H;var q=ce.append(Q).attr("id",K);return U&&q.call(U),q},r.objectFromPath=function(ce,Q){for(var K=ce.split("."),U,H=U={},q=0;q<K.length;q++){var re=K[q],j=null,$=K[q].match(/(.*)\[([0-9]+)\]/);$?(re=$[1],j=$[2],U=U[re]=[],q===K.length-1?U[j]=Q:U[j]={},U=U[j]):(q===K.length-1?U[re]=Q:U[re]={},U=U[re])}return H};var F=/^([^\[\.]+)\.(.+)?/,I=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;r.expandObjectPaths=function(ce){var Q,K,U,H,q,re,j;if(typeof ce=="object"&&!Array.isArray(ce))for(K in ce)ce.hasOwnProperty(K)&&((Q=K.match(F))?(H=ce[K],U=Q[1],delete ce[K],ce[U]=r.extendDeepNoArrays(ce[U]||{},r.objectFromPath(K,r.expandObjectPaths(H))[U])):(Q=K.match(I))?(H=ce[K],U=Q[1],q=parseInt(Q[2]),delete ce[K],ce[U]=ce[U]||[],Q[3]==="."?(j=Q[4],re=ce[U][q]=ce[U][q]||{},r.extendDeepNoArrays(re,r.objectFromPath(j,r.expandObjectPaths(H)))):ce[U][q]=r.expandObjectPaths(H)):ce[K]=r.expandObjectPaths(ce[K]));return ce},r.numSeparate=function(ce,Q,K){if(K||(K=!1),typeof Q!="string"||Q.length===0)throw new Error("Separator string required for formatting!");typeof ce=="number"&&(ce=String(ce));var U=/(\d+)(\d{3})/,H=Q.charAt(0),q=Q.charAt(1),re=ce.split("."),j=re[0],$=re.length>1?H+re[1]:"";if(q&&(re.length>1||j.length>4||K))for(;U.test(j);)j=j.replace(U,"$1"+q+"$2");return j+$},r.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var D=/^\w*$/;r.templateString=function(ce,Q){var K={};return ce.replace(r.TEMPLATE_STRING_REGEX,function(U,H){var q;return D.test(H)?q=Q[H]:(K[H]=K[H]||r.nestedProperty(Q,H).get,q=K[H]()),r.isValidTextValue(q)?q:""})};var R={max:10,count:0,name:"hovertemplate"};r.hovertemplateString=function(){return G.apply(R,arguments)};var N={max:10,count:0,name:"texttemplate"};r.texttemplateString=function(){return G.apply(N,arguments)};var z=/^[:|\|]/;function G(ce,Q,K){var U=this,H=arguments;Q||(Q={});var q={};return ce.replace(r.TEMPLATE_STRING_REGEX,function(re,j,$){var ie=j==="xother"||j==="yother",oe=j==="_xother"||j==="_yother",ae=j==="_xother_"||j==="_yother_",se=j==="xother_"||j==="yother_",_e=ie||oe||se||ae,ue=j;(oe||ae)&&(ue=ue.substring(1)),(se||ae)&&(ue=ue.substring(0,ue.length-1));var ye;if(_e){if(ye=Q[ue],ye===void 0)return""}else{var xe,me;for(me=3;me<H.length;me++)if(xe=H[me],!!xe){if(xe.hasOwnProperty(ue)){ye=xe[ue];break}if(D.test(ue)||(ye=r.nestedProperty(xe,ue).get(),ye=q[ue]||r.nestedProperty(xe,ue).get(),ye&&(q[ue]=ye)),ye!==void 0)break}}if(ye===void 0&&U)return U.count<U.max&&(r.warn("Variable '"+ue+"' in "+U.name+" could not be found!"),ye=re),U.count===U.max&&r.warn("Too many "+U.name+" warnings - additional warnings will be suppressed"),U.count++,re;if($){var be;if($[0]===":"&&(be=K?K.numberFormat:r.numberFormat,ye=be($.replace(z,""))(ye)),$[0]==="|"){be=K?K.timeFormat:c;var ke=r.dateTime2ms(ye);ye=r.formatDate(ke,$.replace(z,""),!1,be)}}else{var De=ue+"Label";Q.hasOwnProperty(De)&&(ye=Q[De])}return _e&&(ye="("+ye+")",(oe||ae)&&(ye=" "+ye),(se||ae)&&(ye=ye+" ")),ye})}var Y=48,ee=57;r.subplotSort=function(ce,Q){for(var K=Math.min(ce.length,Q.length)+1,U=0,H=0,q=0;q<K;q++){var re=ce.charCodeAt(q)||0,j=Q.charCodeAt(q)||0,$=re>=Y&&re<=ee,ie=j>=Y&&j<=ee;if($&&(U=10*U+re-Y),ie&&(H=10*H+j-Y),!$||!ie){if(U!==H)return U-H;if(re!==j)return re-j}}return H-U};var Z=2e9;r.seedPseudoRandom=function(){Z=2e9},r.pseudoRandom=function(){var ce=Z;return Z=(69069*Z+1)%4294967296,Math.abs(Z-ce)<429496729?r.pseudoRandom():Z/4294967296},r.fillText=function(ce,Q,K){var U=Array.isArray(K)?function(re){K.push(re)}:function(re){K.text=re},H=r.extractOption(ce,Q,"htx","hovertext");if(r.isValidTextValue(H))return U(H);var q=r.extractOption(ce,Q,"tx","text");if(r.isValidTextValue(q))return U(q)},r.isValidTextValue=function(ce){return ce||ce===0},r.formatPercent=function(ce,Q){Q=Q||0;for(var K=(Math.round(100*ce*Math.pow(10,Q))*Math.pow(.1,Q)).toFixed(Q)+"%",U=0;U<Q;U++)K.indexOf(".")!==-1&&(K=K.replace("0%","%"),K=K.replace(".%","%"));return K},r.isHidden=function(ce){var Q=window.getComputedStyle(ce).display;return!Q||Q==="none"},r.strTranslate=function(ce,Q){return ce||Q?"translate("+ce+","+Q+")":""},r.strRotate=function(ce){return ce?"rotate("+ce+")":""},r.strScale=function(ce){return ce!==1?"scale("+ce+")":""},r.getTextTransform=function(ce){var Q=ce.noCenter,K=ce.textX,U=ce.textY,H=ce.targetX,q=ce.targetY,re=ce.anchorX||0,j=ce.anchorY||0,$=ce.rotate,ie=ce.scale;return ie?ie>1&&(ie=1):ie=0,r.strTranslate(H-ie*(K+re),q-ie*(U+j))+r.strScale(ie)+($?"rotate("+$+(Q?"":" "+K+" "+U)+")":"")},r.setTransormAndDisplay=function(ce,Q){ce.attr("transform",r.getTextTransform(Q)),ce.style("display",Q.scale?null:"none")},r.ensureUniformFontSize=function(ce,Q){var K=r.extendFlat({},Q);return K.size=Math.max(Q.size,ce._fullLayout.uniformtext.minsize||0),K},r.join2=function(ce,Q,K){var U=ce.length;return U>1?ce.slice(0,-1).join(Q)+K+ce[U-1]:ce.join(Q)},r.bigFont=function(ce){return Math.round(1.2*ce)};var X=r.getFirefoxVersion(),ne=X!==null&&X<86;r.getPositionFromD3Event=function(){return ne?[m.event.layerX,m.event.layerY]:[m.event.offsetX,m.event.offsetY]}},{"../constants/numerical":491,"./anchor_utils":495,"./angles":496,"./array":497,"./clean_number":498,"./clear_responsive":500,"./coerce":501,"./dates":502,"./dom":503,"./extend":505,"./filter_unique":506,"./filter_visible":507,"./geometry2d":510,"./identity":513,"./increment":514,"./is_plain_object":516,"./keyed_container":517,"./localize":518,"./loggers":519,"./make_trace_groups":520,"./matrix":521,"./mod":522,"./nested_property":523,"./noop":524,"./notifier":525,"./preserve_drawing_buffer":529,"./push_unique":530,"./regex":532,"./relative_attr":533,"./relink_private":534,"./search":535,"./sort_object_keys":538,"./stats":539,"./throttle":542,"./to_log_range":543,"@plotly/d3":58,"d3-format":112,"d3-time-format":120,"fast-isnumeric":190}],516:[function(t,B,V){B.exports=function(c){return window&&window.process&&window.process.versions?Object.prototype.toString.call(c)==="[object Object]":Object.prototype.toString.call(c)==="[object Object]"&&Object.getPrototypeOf(c).hasOwnProperty("hasOwnProperty")}},{}],517:[function(t,B,V){var m=t("./nested_property"),c=/^\w*$/,A=0,T=1,e=2,a=3,i=4;B.exports=function(r,v,s,o){s=s||"name",o=o||"value";var b,g,d,f={};v&&v.length?(d=m(r,v),g=d.get()):g=r,v=v||"";var y={};if(g)for(b=0;b<g.length;b++)y[g[b][s]]=b;var l=c.test(o),x={set:function(u,M){var _=M===null?i:A;if(!g){if(!d||_===i)return;g=[],d.set(g)}var p=y[u];if(p===void 0){if(_===i)return;_=_|a,p=g.length,y[u]=p}else M!==(l?g[p][o]:m(g[p],o).get())&&(_=_|e);var w=g[p]=g[p]||{};return w[s]=u,l?w[o]=M:m(w,o).set(M),M!==null&&(_=_&~i),f[p]=f[p]|_,x},get:function(u){if(!!g){var M=y[u];if(M!==void 0)return l?g[M][o]:m(g[M],o).get()}},rename:function(u,M){var _=y[u];return _===void 0||(f[_]=f[_]|T,y[M]=_,delete y[u],g[_][s]=M),x},remove:function(u){var M=y[u];if(M===void 0)return x;var _=g[M];if(Object.keys(_).length>2)return f[M]=f[M]|e,x.set(u,null);if(l){for(b=M;b<g.length;b++)f[b]=f[b]|a;for(b=M;b<g.length;b++)y[g[b][s]]--;g.splice(M,1),delete y[u]}else m(_,o).set(null),f[M]=f[M]|e|i;return x},constructUpdate:function(){for(var u,M,_={},p=Object.keys(f),w=0;w<p.length;w++)M=p[w],u=v+"["+M+"]",g[M]?(f[M]&T&&(_[u+"."+s]=g[M][s]),f[M]&e&&(l?_[u+"."+o]=f[M]&i?null:g[M][o]:_[u+"."+o]=f[M]&i?null:m(g[M],o).get())):_[u]=null;return _}};return x}},{"./nested_property":523}],518:[function(t,B,V){var m=t("../registry");B.exports=function(A,T){for(var e=A._context.locale,a=0;a<2;a++){for(var i=A._context.locales,n=0;n<2;n++){var r=(i[e]||{}).dictionary;if(r){var v=r[T];if(v)return v}i=m.localeRegistry}var s=e.split("-")[0];if(s===e)break;e=s}return T}},{"../registry":647}],519:[function(t,B,V){var m=t("../plot_api/plot_config").dfltConfig,c=t("./notifier"),A=B.exports={};A.log=function(){var T;if(m.logging>1){var e=["LOG:"];for(T=0;T<arguments.length;T++)e.push(arguments[T]);console.trace.apply(console,e)}if(m.notifyOnLogging>1){var a=[];for(T=0;T<arguments.length;T++)a.push(arguments[T]);c(a.join("<br>"),"long")}},A.warn=function(){var T;if(m.logging>0){var e=["WARN:"];for(T=0;T<arguments.length;T++)e.push(arguments[T]);console.trace.apply(console,e)}if(m.notifyOnLogging>0){var a=[];for(T=0;T<arguments.length;T++)a.push(arguments[T]);c(a.join("<br>"),"stick")}},A.error=function(){var T;if(m.logging>0){var e=["ERROR:"];for(T=0;T<arguments.length;T++)e.push(arguments[T]);console.error.apply(console,e)}if(m.notifyOnLogging>0){var a=[];for(T=0;T<arguments.length;T++)a.push(arguments[T]);c(a.join("<br>"),"stick")}}},{"../plot_api/plot_config":553,"./notifier":525}],520:[function(t,B,V){var m=t("@plotly/d3");B.exports=function(A,T,e){var a=A.selectAll("g."+e.replace(/\s/g,".")).data(T,function(n){return n[0].trace.uid});a.exit().remove(),a.enter().append("g").attr("class",e),a.order();var i=A.classed("rangeplot")?"nodeRangePlot3":"node3";return a.each(function(n){n[0][i]=m.select(this)}),a}},{"@plotly/d3":58}],521:[function(t,B,V){var m=t("gl-mat4");V.init2dArray=function(c,A){for(var T=new Array(c),e=0;e<c;e++)T[e]=new Array(A);return T},V.transposeRagged=function(c){var A=0,T=c.length,e,a;for(e=0;e<T;e++)A=Math.max(A,c[e].length);var i=new Array(A);for(e=0;e<A;e++)for(i[e]=new Array(T),a=0;a<T;a++)i[e][a]=c[a][e];return i},V.dot=function(c,A){if(!(c.length&&A.length)||c.length!==A.length)return null;var T=c.length,e,a;if(c[0].length)for(e=new Array(T),a=0;a<T;a++)e[a]=V.dot(c[a],A);else if(A[0].length){var i=V.transposeRagged(A);for(e=new Array(i.length),a=0;a<i.length;a++)e[a]=V.dot(c,i[a])}else for(e=0,a=0;a<T;a++)e+=c[a]*A[a];return e},V.translationMatrix=function(c,A){return[[1,0,c],[0,1,A],[0,0,1]]},V.rotationMatrix=function(c){var A=c*Math.PI/180;return[[Math.cos(A),-Math.sin(A),0],[Math.sin(A),Math.cos(A),0],[0,0,1]]},V.rotationXYMatrix=function(c,A,T){return V.dot(V.dot(V.translationMatrix(A,T),V.rotationMatrix(c)),V.translationMatrix(-A,-T))},V.apply3DTransform=function(c){return function(){var A=arguments,T=arguments.length===1?A[0]:[A[0],A[1],A[2]||0];return V.dot(c,[T[0],T[1],T[2],1]).slice(0,3)}},V.apply2DTransform=function(c){return function(){var A=arguments;A.length===3&&(A=A[0]);var T=arguments.length===1?A[0]:[A[0],A[1]];return V.dot(c,[T[0],T[1],1]).slice(0,2)}},V.apply2DTransform2=function(c){var A=V.apply2DTransform(c);return function(T){return A(T.slice(0,2)).concat(A(T.slice(2,4)))}},V.convertCssMatrix=function(c){if(c){var A=c.length;if(A===16)return c;if(A===6)return[c[0],c[1],0,0,c[2],c[3],0,0,0,0,1,0,c[4],c[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},V.inverseTransformMatrix=function(c){var A=[];return m.invert(A,c),[[A[0],A[1],A[2],A[3]],[A[4],A[5],A[6],A[7]],[A[8],A[9],A[10],A[11]],[A[12],A[13],A[14],A[15]]]}},{"gl-mat4":210}],522:[function(t,B,V){function m(A,T){var e=A%T;return e<0?e+T:e}function c(A,T){return Math.abs(A)>T/2?A-Math.round(A/T)*T:A}B.exports={mod:m,modHalf:c}},{}],523:[function(t,B,V){var m=t("fast-isnumeric"),c=t("./array").isArrayOrTypedArray;B.exports=function(o,b){if(m(b))b=String(b);else if(typeof b!="string"||b.substr(b.length-4)==="[-1]")throw"bad property string";for(var g=0,d=b.split("."),f,y,l;g<d.length;){if(f=String(d[g]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/),f){if(f[1])d[g]=f[1];else if(g===0)d.splice(0,1);else throw"bad property string";for(y=f[2].substr(1,f[2].length-2).split("]["),l=0;l<y.length;l++)g++,d.splice(g,0,Number(y[l]))}g++}return typeof o!="object"?v(o,b,d):{set:a(o,d,b),get:A(o,d),astr:b,parts:d,obj:o}};function A(s,o){return function(){var b=s,g,d,f,y,l;for(y=0;y<o.length-1;y++){if(g=o[y],g===-1){for(d=!0,f=[],l=0;l<b.length;l++)f[l]=A(b[l],o.slice(y+1))(),f[l]!==f[0]&&(d=!1);return d?f[0]:f}if(typeof g=="number"&&!c(b)||(b=b[g],typeof b!="object"||b===null))return}if(!(typeof b!="object"||b===null)&&(f=b[o[y]],f!==null))return f}}var T=/(^|\.)args\[/;function e(s,o){return s===void 0||s===null&&!o.match(T)}function a(s,o,b){return function(g){var d=s,f="",y=e(g,b),l,x;for(x=0;x<o.length-1;x++){if(l=o[x],typeof l=="number"&&!c(d))throw"array index but container is not an array";if(l===-1){if(y=!n(d,o.slice(x+1),g,b),y)break;return}if(!r(d,l,o[x+1],y))break;if(d=d[l],typeof d!="object"||d===null)throw"container is not an object";f=i(f,l)}if(y){if(x===o.length-1&&(delete d[o[x]],Array.isArray(d)&&+o[x]===d.length-1))for(;d.length&&d[d.length-1]===void 0;)d.pop()}else d[o[x]]=g}}function i(s,o){var b=o;return m(o)?b="["+o+"]":s&&(b="."+o),s+b}function n(s,o,b,g){var d=c(b),f=!0,y=b,l=g.replace("-1",0),x=d?!1:e(b,l),u=o[0],M;for(M=0;M<s.length;M++)l=g.replace("-1",M),d&&(y=b[M%b.length],x=e(y,l)),x&&(f=!1),r(s,M,u,x)&&a(s[M],o,g.replace("-1",M))(y);return f}function r(s,o,b,g){if(s[o]===void 0){if(g)return!1;typeof b=="number"?s[o]=[]:s[o]={}}return!0}function v(s,o,b){return{set:function(){throw"bad container"},get:function(){},astr:o,parts:b,obj:s}}},{"./array":497,"fast-isnumeric":190}],524:[function(t,B,V){B.exports=function(){}},{}],525:[function(t,B,V){var m=t("@plotly/d3"),c=t("fast-isnumeric"),A=[];B.exports=function(T,e){if(A.indexOf(T)!==-1)return;A.push(T);var a=1e3;c(e)?a=e:e==="long"&&(a=3e3);var i=m.select("body").selectAll(".plotly-notifier").data([0]);i.enter().append("div").classed("plotly-notifier",!0);var n=i.selectAll(".notifier-note").data(A);function r(v){v.duration(700).style("opacity",0).each("end",function(s){var o=A.indexOf(s);o!==-1&&A.splice(o,1),m.select(this).remove()})}n.enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(v){var s=m.select(this);s.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){s.transition().call(r)});for(var o=s.append("p"),b=v.split(/<br\s*\/?>/g),g=0;g<b.length;g++)g&&o.append("br"),o.append("span").text(b[g]);e==="stick"?s.transition().duration(350).style("opacity",1):s.transition().duration(700).style("opacity",1).transition().delay(a).call(r)})}},{"@plotly/d3":58,"fast-isnumeric":190}],526:[function(t,B,V){var m=t("./setcursor"),c="data-savedcursor",A="!!";B.exports=function(e,a){var i=e.attr(c);if(a){if(!i){for(var n=(e.attr("class")||"").split(" "),r=0;r<n.length;r++){var v=n[r];v.indexOf("cursor-")===0&&e.attr(c,v.substr(7)).classed(v,!1)}e.attr(c)||e.attr(c,A)}m(e,a)}else i&&(e.attr(c,null),i===A?m(e):m(e,i))}},{"./setcursor":536}],527:[function(t,B,V){var m=t("./matrix").dot,c=t("../constants/numerical").BADNUM,A=B.exports={};A.tester=function(e){var a=e.slice(),i=a[0][0],n=i,r=a[0][1],v=r,s;for((a[a.length-1][0]!==a[0][0]||a[a.length-1][1]!==a[0][1])&&a.push(a[0]),s=1;s<a.length;s++)i=Math.min(i,a[s][0]),n=Math.max(n,a[s][0]),r=Math.min(r,a[s][1]),v=Math.max(v,a[s][1]);var o=!1,b;a.length===5&&(a[0][0]===a[1][0]?a[2][0]===a[3][0]&&a[0][1]===a[3][1]&&a[1][1]===a[2][1]&&(o=!0,b=function(l){return l[0]===a[0][0]}):a[0][1]===a[1][1]&&a[2][1]===a[3][1]&&a[0][0]===a[3][0]&&a[1][0]===a[2][0]&&(o=!0,b=function(l){return l[1]===a[0][1]}));function g(l,x){var u=l[0],M=l[1];return!(u===c||u<i||u>n||M===c||M<r||M>v||x&&b(l))}function d(l,x){var u=l[0],M=l[1];if(u===c||u<i||u>n||M===c||M<r||M>v)return!1;var _=a.length,p=a[0][0],w=a[0][1],h=0,L,S,E,P,F;for(L=1;L<_;L++)if(S=p,E=w,p=a[L][0],w=a[L][1],P=Math.min(S,p),!(u<P||u>Math.max(S,p)||M>Math.max(E,w)))if(M<Math.min(E,w))u!==P&&h++;else{if(p===S?F=M:F=E+(u-S)*(w-E)/(p-S),M===F)return!(L===1&&x);M<=F&&u!==P&&h++}return h%2===1}var f=!0,y=a[0];for(s=1;s<a.length;s++)if(y[0]!==a[s][0]||y[1]!==a[s][1]){f=!1;break}return{xmin:i,xmax:n,ymin:r,ymax:v,pts:a,contains:o?g:d,isRect:o,degenerate:f}},A.isSegmentBent=function(e,a,i,n){var r=e[a],v=[e[i][0]-r[0],e[i][1]-r[1]],s=m(v,v),o=Math.sqrt(s),b=[-v[1]/o,v[0]/o],g,d,f;for(g=a+1;g<i;g++)if(d=[e[g][0]-r[0],e[g][1]-r[1]],f=m(d,v),f<0||f>s||Math.abs(m(d,b))>n)return!0;return!1},A.filter=function(e,a){var i=[e[0]],n=0,r=0;function v(o){e.push(o);var b=i.length,g=n;i.splice(r+1);for(var d=g+1;d<e.length;d++)(d===e.length-1||A.isSegmentBent(e,g,d+1,a))&&(i.push(e[d]),i.length<b-2&&(n=d,r=i.length-1),g=d)}if(e.length>1){var s=e.pop();v(s)}return{addPt:v,raw:e,filtered:i}}},{"../constants/numerical":491,"./matrix":521}],528:[function(t,B,V){(function(m){(function(){var c=t("./show_no_webgl_msg"),A=t("regl");B.exports=function(e,a,i){var n=e._fullLayout,r=!0;return n._glcanvas.each(function(v){if(v.regl){v.regl.preloadCachedCode(i);return}if(!(v.pick&&!n._has("parcoords"))){try{v.regl=A({canvas:this,attributes:{antialias:!v.pick,preserveDrawingBuffer:!0},pixelRatio:e._context.plotGlPixelRatio||m.devicePixelRatio,extensions:a||[],cachedCode:i||{}})}catch{r=!1}v.regl||(r=!1),r&&this.addEventListener("webglcontextlost",function(s){e&&e.emit&&e.emit("plotly_webglcontextlost",{event:s,layer:v.key})},!1)}}),r||c({container:n._glcontainer.node()}),r}}).call(this)}).call(this,typeof Ro<"u"?Ro:typeof self<"u"?self:typeof window<"u"?window:{})},{"./show_no_webgl_msg":537,regl:284}],529:[function(t,B,V){var m=t("fast-isnumeric"),c=t("is-mobile");B.exports=function(e){var a;if(e&&e.hasOwnProperty("userAgent")?a=e.userAgent:a=A(),typeof a!="string")return!0;var i=c({ua:{headers:{"user-agent":a}},tablet:!0,featureDetect:!1});if(!i)for(var n=a.split(" "),r=1;r<n.length;r++){var v=n[r];if(v.indexOf("Safari")!==-1)for(var s=r-1;s>-1;s--){var o=n[s];if(o.substr(0,8)==="Version/"){var b=o.substr(8).split(".")[0];if(m(b)&&(b=+b),b>=13)return!0}}}return i};function A(){var T;return typeof navigator<"u"&&(T=navigator.userAgent),T&&T.headers&&typeof T.headers["user-agent"]=="string"&&(T=T.headers["user-agent"]),T}},{"fast-isnumeric":190,"is-mobile":234}],530:[function(t,B,V){B.exports=function(c,A){if(A instanceof RegExp){for(var T=A.toString(),e=0;e<c.length;e++)if(c[e]instanceof RegExp&&c[e].toString()===T)return c;c.push(A)}else(A||A===0)&&c.indexOf(A)===-1&&c.push(A);return c}},{}],531:[function(t,B,V){var m=t("../lib"),c=t("../plot_api/plot_config").dfltConfig;function A(e,a){for(var i=[],n,r=0;r<a.length;r++)n=a[r],n===e?i[r]=n:typeof n=="object"?i[r]=Array.isArray(n)?m.extendDeep([],n):m.extendDeepAll({},n):i[r]=n;return i}var T={};T.add=function(e,a,i,n,r){var v,s;if(e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},s=e.undoQueue.index,e.autoplay){e.undoQueue.inSequence||(e.autoplay=!1);return}!e.undoQueue.sequence||e.undoQueue.beginSequence?(v={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},e.undoQueue.queue.splice(s,e.undoQueue.queue.length-s,v),e.undoQueue.index+=1):v=e.undoQueue.queue[s-1],e.undoQueue.beginSequence=!1,v&&(v.undo.calls.unshift(a),v.undo.args.unshift(i),v.redo.calls.push(n),v.redo.args.push(r)),e.undoQueue.queue.length>c.queueLength&&(e.undoQueue.queue.shift(),e.undoQueue.index--)},T.startSequence=function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!0,e.undoQueue.beginSequence=!0},T.stopSequence=function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!1,e.undoQueue.beginSequence=!1},T.undo=function(a){var i,n;if(!(a.undoQueue===void 0||isNaN(a.undoQueue.index)||a.undoQueue.index<=0)){for(a.undoQueue.index--,i=a.undoQueue.queue[a.undoQueue.index],a.undoQueue.inSequence=!0,n=0;n<i.undo.calls.length;n++)T.plotDo(a,i.undo.calls[n],i.undo.args[n]);a.undoQueue.inSequence=!1,a.autoplay=!1}},T.redo=function(a){var i,n;if(!(a.undoQueue===void 0||isNaN(a.undoQueue.index)||a.undoQueue.index>=a.undoQueue.queue.length)){for(i=a.undoQueue.queue[a.undoQueue.index],a.undoQueue.inSequence=!0,n=0;n<i.redo.calls.length;n++)T.plotDo(a,i.redo.calls[n],i.redo.args[n]);a.undoQueue.inSequence=!1,a.autoplay=!1,a.undoQueue.index++}},T.plotDo=function(e,a,i){e.autoplay=!0,i=A(e,i),a.apply(null,i)},B.exports=T},{"../lib":515,"../plot_api/plot_config":553}],532:[function(t,B,V){V.counter=function(m,c,A,T){var e=(c||"")+(A?"":"$"),a=T===!1?"":"^";return m==="xy"?new RegExp(a+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+e):new RegExp(a+m+"([2-9]|[1-9][0-9]+)?"+e)}},{}],533:[function(t,B,V){var m=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,c=/^[^\.\[\]]+$/;B.exports=function(A,T){for(;T;){var e=A.match(m);if(e)A=e[1];else if(A.match(c))A="";else throw new Error("bad relativeAttr call:"+[A,T]);if(T.charAt(0)==="^")T=T.slice(1);else break}return A&&T.charAt(0)!=="["?A+"."+T:A+T}},{}],534:[function(t,B,V){var m=t("./array").isArrayOrTypedArray,c=t("./is_plain_object");B.exports=function A(T,e){for(var a in e){var i=e[a],n=T[a];if(n!==i)if(a.charAt(0)==="_"||typeof i=="function"){if(a in T)continue;T[a]=i}else if(m(i)&&m(n)&&c(i[0])){if(a==="customdata"||a==="ids")continue;for(var r=Math.min(i.length,n.length),v=0;v<r;v++)n[v]!==i[v]&&c(i[v])&&c(n[v])&&A(n[v],i[v])}else c(i)&&c(n)&&(A(n,i),Object.keys(n).length||delete T[a])}}},{"./array":497,"./is_plain_object":516}],535:[function(t,B,V){var m=t("fast-isnumeric"),c=t("./loggers"),A=t("./identity"),T=t("../constants/numerical").BADNUM,e=1e-9;V.findBin=function(v,s,o){if(m(s.start))return o?Math.ceil((v-s.start)/s.size-e)-1:Math.floor((v-s.start)/s.size+e);var b=0,g=s.length,d=0,f=g>1?(s[g-1]-s[0])/(g-1):1,y,l;for(f>=0?l=o?a:i:l=o?r:n,v+=f*e*(o?-1:1)*(f>=0?1:-1);b<g&&d++<100;)y=Math.floor((b+g)/2),l(s[y],v)?b=y+1:g=y;return d>90&&c.log("Long binary search..."),b-1};function a(v,s){return v<s}function i(v,s){return v<=s}function n(v,s){return v>s}function r(v,s){return v>=s}V.sorterAsc=function(v,s){return v-s},V.sorterDes=function(v,s){return s-v},V.distinctVals=function(v){var s=v.slice();s.sort(V.sorterAsc);var o;for(o=s.length-1;o>-1&&s[o]===T;o--);for(var b=s[o]-s[0]||1,g=b/(o||1)/1e4,d=[],f,y=0;y<=o;y++){var l=s[y],x=l-f;f===void 0?(d.push(l),f=l):x>g&&(b=Math.min(b,x),d.push(l),f=l)}return{vals:d,minDiff:b}},V.roundUp=function(v,s,o){for(var b=0,g=s.length-1,d,f=0,y=o?0:1,l=o?1:0,x=o?Math.ceil:Math.floor;b<g&&f++<100;)d=x((b+g)/2),s[d]<=v?b=d+y:g=d-l;return s[b]},V.sort=function(v,s){for(var o=0,b=0,g=1;g<v.length;g++){var d=s(v[g],v[g-1]);if(d<0?o=1:d>0&&(b=1),o&&b)return v.sort(s)}return b?v:v.reverse()},V.findIndexOfMin=function(v,s){s=s||A;for(var o=1/0,b,g=0;g<v.length;g++){var d=s(v[g]);d<o&&(o=d,b=g)}return b}},{"../constants/numerical":491,"./identity":513,"./loggers":519,"fast-isnumeric":190}],536:[function(t,B,V){B.exports=function(c,A){(c.attr("class")||"").split(" ").forEach(function(T){T.indexOf("cursor-")===0&&c.classed(T,!1)}),A&&c.classed("cursor-"+A,!0)}},{}],537:[function(t,B,V){var m=t("../components/color"),c=function(){};B.exports=function(T){for(var e in T)typeof T[e]=="function"&&(T[e]=c);T.destroy=function(){T.container.parentNode.removeChild(T.container)};var a=document.createElement("div");a.className="no-webgl",a.style.cursor="pointer",a.style.fontSize="24px",a.style.color=m.defaults[0],a.style.position="absolute",a.style.left=a.style.top="0px",a.style.width=a.style.height="100%",a.style["background-color"]=m.lightLine,a.style["z-index"]=30;var i=document.createElement("p");return i.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",i.style.position="relative",i.style.top="50%",i.style.left="50%",i.style.height="30%",i.style.width="50%",i.style.margin="-15% 0 0 -25%",a.appendChild(i),T.container.appendChild(a),T.container.style.background="#FFFFFF",T.container.onclick=function(){window.open("https://get.webgl.org")},!1}},{"../components/color":367}],538:[function(t,B,V){B.exports=function(c){return Object.keys(c).sort()}},{}],539:[function(t,B,V){var m=t("fast-isnumeric"),c=t("./array").isArrayOrTypedArray;V.aggNums=function(A,T,e,a){var i,n;if((!a||a>e.length)&&(a=e.length),m(T)||(T=!1),c(e[0])){for(n=new Array(a),i=0;i<a;i++)n[i]=V.aggNums(A,T,e[i]);e=n}for(i=0;i<a;i++)m(T)?m(e[i])&&(T=A(+T,+e[i])):T=e[i];return T},V.len=function(A){return V.aggNums(function(T){return T+1},0,A)},V.mean=function(A,T){return T||(T=V.len(A)),V.aggNums(function(e,a){return e+a},0,A)/T},V.midRange=function(A){if(!(A===void 0||A.length===0))return(V.aggNums(Math.max,null,A)+V.aggNums(Math.min,null,A))/2},V.variance=function(A,T,e){return T||(T=V.len(A)),m(e)||(e=V.mean(A,T)),V.aggNums(function(a,i){return a+Math.pow(i-e,2)},0,A)/T},V.stdev=function(A,T,e){return Math.sqrt(V.variance(A,T,e))},V.median=function(A){var T=A.slice().sort();return V.interp(T,.5)},V.interp=function(A,T){if(!m(T))throw"n should be a finite number";if(T=T*A.length-.5,T<0)return A[0];if(T>A.length-1)return A[A.length-1];var e=T%1;return e*A[Math.ceil(T)]+(1-e)*A[Math.floor(T)]}},{"./array":497,"fast-isnumeric":190}],540:[function(t,B,V){var m=t("color-normalize");function c(A){return A?m(A):[0,0,0,1]}B.exports=c},{"color-normalize":89}],541:[function(t,B,V){var m=t("@plotly/d3"),c=t("../lib"),A=c.strTranslate,T=t("../constants/xmlns_namespaces"),e=t("../constants/alignment").LINE_SPACING,a=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;V.convertToTspans=function(z,G,Y){var ee=z.text(),Z=!z.attr("data-notex")&&G&&G._context.typesetMath&&typeof MathJax<"u"&&ee.match(a),X=m.select(z.node().parentNode);if(X.empty())return;var ne=z.attr("class")?z.attr("class").split(" ")[0]:"text";ne+="-math",X.selectAll("svg."+ne).remove(),X.selectAll("g."+ne+"-group").remove(),z.style("display",null).attr({"data-unformatted":ee,"data-math":"N"});function ce(){X.empty()||(ne=z.attr("class")+"-math",X.select("svg."+ne).remove()),z.text("").style("white-space","pre");var Q=I(z.node(),ee);Q&&z.style("pointer-events","all"),V.positionText(z),Y&&Y.call(z)}return Z?(G&&G._promises||[]).push(new Promise(function(Q){z.style("display","none");var K=parseInt(z.node().style.fontSize,10),U={fontSize:K};s(Z[2],U,function(H,q,re){X.selectAll("svg."+ne).remove(),X.selectAll("g."+ne+"-group").remove();var j=H&&H.select("svg");if(!j||!j.node()){ce(),Q();return}var $=X.append("g").classed(ne+"-group",!0).attr({"pointer-events":"none","data-unformatted":ee,"data-math":"Y"});$.node().appendChild(j.node()),q&&q.node()&&j.node().insertBefore(q.node().cloneNode(!0),j.node().firstChild);var ie=re.width,oe=re.height;j.attr({class:ne,height:oe,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var ae=z.node().style.fill||"black",se=j.select("g");se.attr({fill:ae,stroke:ae});var _e=se.node().getBoundingClientRect(),ue=_e.width,ye=_e.height;(ue>ie||ye>oe)&&(j.style("overflow","hidden"),_e=j.node().getBoundingClientRect(),ue=_e.width,ye=_e.height);var xe=+z.attr("x"),me=+z.attr("y"),be=K||z.node().getBoundingClientRect().height,ke=-be/4;if(ne[0]==="y")$.attr({transform:"rotate("+[-90,xe,me]+")"+A(-ue/2,ke-ye/2)});else if(ne[0]==="l")me=ke-ye/2;else if(ne[0]==="a"&&ne.indexOf("atitle")!==0)xe=0,me=ke;else{var De=z.attr("text-anchor");xe=xe-ue*(De==="middle"?.5:De==="end"?1:0),me=me+ke-ye/2}j.attr({x:xe,y:me}),Y&&Y.call(z,$),Q($)})})):ce(),z};var i=/(<|&lt;|&#60;)/g,n=/(>|&gt;|&#62;)/g;function r(z){return z.replace(i,"\\lt ").replace(n,"\\gt ")}var v=[["$","$"],["\\(","\\)"]];function s(z,G,Y){var ee=parseInt((MathJax.version||"").split(".")[0]);if(ee!==2&&ee!==3){c.warn("No MathJax version:",MathJax.version);return}var Z,X,ne,ce,Q=function(){return X=c.extendDeepAll({},MathJax.Hub.config),ne=MathJax.Hub.processSectionDelay,MathJax.Hub.processSectionDelay!==void 0&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:v},displayAlign:"left"})},K=function(){X=c.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=v},U=function(){if(Z=MathJax.Hub.config.menuSettings.renderer,Z!=="SVG")return MathJax.Hub.setRenderer("SVG")},H=function(){Z=MathJax.config.startup.output,Z!=="svg"&&(MathJax.config.startup.output="svg")},q=function(){var ae="math-output-"+c.randstr({},64);ce=m.select("body").append("div").attr({id:ae}).style({visibility:"hidden",position:"absolute","font-size":G.fontSize+"px"}).text(r(z));var se=ce.node();return ee===2?MathJax.Hub.Typeset(se):MathJax.typeset([se])},re=function(){var ae=ce.select(ee===2?".MathJax_SVG":".MathJax"),se=!ae.empty()&&ce.select("svg").node();if(!se)c.log("There was an error in the tex syntax.",z),Y();else{var _e=se.getBoundingClientRect(),ue;ee===2?ue=m.select("body").select("#MathJax_SVG_glyphs"):ue=ae.select("defs"),Y(ae,ue,_e)}ce.remove()},j=function(){if(Z!=="SVG")return MathJax.Hub.setRenderer(Z)},$=function(){Z!=="svg"&&(MathJax.config.startup.output=Z)},ie=function(){return ne!==void 0&&(MathJax.Hub.processSectionDelay=ne),MathJax.Hub.Config(X)},oe=function(){MathJax.config=X};ee===2?MathJax.Hub.Queue(Q,U,q,re,j,ie):ee===3&&(K(),H(),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){q(),re(),$(),oe()}))}var o={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},b={sub:"0.3em",sup:"-0.6em"},g={sub:"-0.21em",sup:"0.42em"},d="\u200B",f=["http:","https:","mailto:","",void 0,":"],y=V.NEWLINES=/(\r\n?|\n)/g,l=/(<[^<>]*>)/,x=/<(\/?)([^ >]*)(\s+(.*))?>/i,u=/<br(\s+.*)?>/i;V.BR_TAG_ALL=/<br(\s+.*)?>/gi;var M=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,_=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,p=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,w=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function h(z,G){if(!z)return null;var Y=z.match(G),ee=Y&&(Y[3]||Y[4]);return ee&&P(ee)}var L=/(^|;)\s*color:/;V.plainText=function(z,G){G=G||{};for(var Y=G.len!==void 0&&G.len!==-1?G.len:1/0,ee=G.allowedTags!==void 0?G.allowedTags:["br"],Z="...",X=Z.length,ne=z.split(l),ce=[],Q="",K=0,U=0;U<ne.length;U++){var H=ne[U],q=H.match(x),re=q&&q[2].toLowerCase();if(re)ee.indexOf(re)!==-1&&(ce.push(H),Q=re);else{var j=H.length;if(K+j<Y)ce.push(H),K+=j;else if(K<Y){var $=Y-K;Q&&(Q!=="br"||$<=X||j<=X)&&ce.pop(),Y>X?ce.push(H.substr(0,$-X)+Z):ce.push(H.substr(0,$));break}Q=""}}return ce.join("")};var S={mu:"\u03BC",amp:"&",lt:"<",gt:">",nbsp:"\xA0",times:"\xD7",plusmn:"\xB1",deg:"\xB0"},E=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function P(z){return z.replace(E,function(G,Y){var ee;return Y.charAt(0)==="#"?ee=F(Y.charAt(1)==="x"?parseInt(Y.substr(2),16):parseInt(Y.substr(1),10)):ee=S[Y],ee||G})}V.convertEntities=P;function F(z){if(!(z>1114111)){var G=String.fromCodePoint;if(G)return G(z);var Y=String.fromCharCode;return z<=65535?Y(z):Y((z>>10)+55232,z%1024+56320)}}function I(z,G){G=G.replace(y," ");var Y=!1,ee=[],Z,X=-1;function ne(){X++;var ye=document.createElementNS(T.svg,"tspan");m.select(ye).attr({class:"line",dy:X*e+"em"}),z.appendChild(ye),Z=ye;var xe=ee;if(ee=[{node:ye}],xe.length>1)for(var me=1;me<xe.length;me++)ce(xe[me])}function ce(ye){var xe=ye.type,me={},be;if(xe==="a"){be="a";var ke=ye.target,De=ye.href,Ve=ye.popup;De&&(me={"xlink:xlink:show":ke==="_blank"||ke.charAt(0)!=="_"?"new":"replace",target:ke,"xlink:xlink:href":De},Ve&&(me.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+Ve+'");return false;'))}else be="tspan";ye.style&&(me.style=ye.style);var Ae=document.createElementNS(T.svg,be);if(xe==="sup"||xe==="sub"){Q(Z,d),Z.appendChild(Ae);var Le=document.createElementNS(T.svg,"tspan");Q(Le,d),m.select(Le).attr("dy",g[xe]),me.dy=b[xe],Z.appendChild(Ae),Z.appendChild(Le)}else Z.appendChild(Ae);m.select(Ae).attr(me),Z=ye.node=Ae,ee.push(ye)}function Q(ye,xe){ye.appendChild(document.createTextNode(xe))}function K(ye){if(ee.length===1){c.log("Ignoring unexpected end tag </"+ye+">.",G);return}var xe=ee.pop();ye!==xe.type&&c.log("Start tag <"+xe.type+"> doesnt match end tag <"+ye+">. Pretending it did match.",G),Z=ee[ee.length-1].node}var U=u.test(G);U?ne():(Z=z,ee=[{node:z}]);for(var H=G.split(l),q=0;q<H.length;q++){var re=H[q],j=re.match(x),$=j&&j[2].toLowerCase(),ie=o[$];if($==="br")ne();else if(ie===void 0)Q(Z,P(re));else if(j[1])K($);else{var oe=j[4],ae={type:$},se=h(oe,M);if(se?(se=se.replace(L,"$1 fill:"),ie&&(se+=";"+ie)):ie&&(se=ie),se&&(ae.style=se),$==="a"){Y=!0;var _e=h(oe,_);if(_e){var ue=D(_e);ue&&(ae.href=ue,ae.target=h(oe,p)||"_blank",ae.popup=h(oe,w))}}ce(ae)}}return Y}function D(z){var G=encodeURI(decodeURI(z)),Y=document.createElement("a"),ee=document.createElement("a");Y.href=z,ee.href=G;var Z=Y.protocol,X=ee.protocol;return f.indexOf(Z)!==-1&&f.indexOf(X)!==-1?G:""}V.sanitizeHTML=function(G){G=G.replace(y," ");for(var Y=document.createElement("p"),ee=Y,Z=[],X=G.split(l),ne=0;ne<X.length;ne++){var ce=X[ne],Q=ce.match(x),K=Q&&Q[2].toLowerCase();if(K in o)if(Q[1])Z.length&&(ee=Z.pop());else{var U=Q[4],H=h(U,M),q=H?{style:H}:{};if(K==="a"){var re=h(U,_);if(re){var j=D(re);if(j){q.href=j;var $=h(U,p);$&&(q.target=$)}}}var ie=document.createElement(K);ee.appendChild(ie),m.select(ie).attr(q),ee=ie,Z.push(ie)}else ee.appendChild(document.createTextNode(P(ce)))}var oe="innerHTML";return Y[oe]},V.lineCount=function(G){return G.selectAll("tspan.line").size()||1},V.positionText=function(G,Y,ee){return G.each(function(){var Z=m.select(this);function X(Q,K){return K===void 0?(K=Z.attr(Q),K===null&&(Z.attr(Q,0),K=0)):Z.attr(Q,K),K}var ne=X("x",Y),ce=X("y",ee);this.nodeName==="text"&&Z.selectAll("tspan.line").attr({x:ne,y:ce})})};function R(z,G,Y){var ee=Y.horizontalAlign,Z=Y.verticalAlign||"top",X=z.node().getBoundingClientRect(),ne=G.node().getBoundingClientRect(),ce,Q,K;return Z==="bottom"?Q=function(){return X.bottom-ce.height}:Z==="middle"?Q=function(){return X.top+(X.height-ce.height)/2}:Q=function(){return X.top},ee==="right"?K=function(){return X.right-ce.width}:ee==="center"?K=function(){return X.left+(X.width-ce.width)/2}:K=function(){return X.left},function(){ce=this.node().getBoundingClientRect();var U=K()-ne.left,H=Q()-ne.top,q=Y.gd||{};if(Y.gd){q._fullLayout._calcInverseTransform(q);var re=c.apply3DTransform(q._fullLayout._invTransform)(U,H);U=re[0],H=re[1]}return this.style({top:H+"px",left:U+"px","z-index":1e3}),this}}var N="1px ";V.makeTextShadow=function(z){var G=N,Y=N,ee=N;return G+Y+ee+z+", -"+G+"-"+Y+ee+z+", "+G+"-"+Y+ee+z+", -"+G+Y+ee+z},V.makeEditable=function(z,G){var Y=G.gd,ee=G.delegate,Z=m.dispatch("edit","input","cancel"),X=ee||z;if(z.style({"pointer-events":ee?"none":"all"}),z.size()!==1)throw new Error("boo");function ne(){Q(),z.style({opacity:0});var K=X.attr("class"),U;K?U="."+K.split(" ")[0]+"-math-group":U="[class*=-math-group]",U&&m.select(z.node().parentNode).select(U).style({opacity:0})}function ce(K){var U=K.node(),H=document.createRange();H.selectNodeContents(U);var q=window.getSelection();q.removeAllRanges(),q.addRange(H),U.focus()}function Q(){var K=m.select(Y),U=K.select(".svg-container"),H=U.append("div"),q=z.node().style,re=parseFloat(q.fontSize||12),j=G.text;j===void 0&&(j=z.attr("data-unformatted")),H.classed("plugin-editable editable",!0).style({position:"absolute","font-family":q.fontFamily||"Arial","font-size":re,color:G.fill||q.fill||"black",opacity:1,"background-color":G.background||"transparent",outline:"#ffffff33 1px solid",margin:[-re/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(j).call(R(z,U,G)).on("blur",function(){Y._editing=!1,z.text(this.textContent).style({opacity:1});var $=m.select(this).attr("class"),ie;$?ie="."+$.split(" ")[0]+"-math-group":ie="[class*=-math-group]",ie&&m.select(z.node().parentNode).select(ie).style({opacity:0});var oe=this.textContent;m.select(this).transition().duration(0).remove(),m.select(document).on("mouseup",null),Z.edit.call(z,oe)}).on("focus",function(){var $=this;Y._editing=!0,m.select(document).on("mouseup",function(){if(m.event.target===$)return!1;document.activeElement===H.node()&&H.node().blur()})}).on("keyup",function(){m.event.which===27?(Y._editing=!1,z.style({opacity:1}),m.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),Z.cancel.call(z,this.textContent)):(Z.input.call(z,this.textContent),m.select(this).call(R(z,U,G)))}).on("keydown",function(){m.event.which===13&&this.blur()}).call(ce)}return G.immediate?ne():X.on("click",ne),m.rebind(z,Z,"on")}},{"../constants/alignment":483,"../constants/xmlns_namespaces":492,"../lib":515,"@plotly/d3":58}],542:[function(t,B,V){var m={};V.throttle=function(T,e,a){var i=m[T],n=Date.now();if(!i){for(var r in m)m[r].ts<n-6e4&&delete m[r];i=m[T]={ts:0,timer:null}}c(i);function v(){a(),i.ts=Date.now(),i.onDone&&(i.onDone(),i.onDone=null)}if(n>i.ts+e){v();return}i.timer=setTimeout(function(){v(),i.timer=null},e)},V.done=function(A){var T=m[A];return!T||!T.timer?Promise.resolve():new Promise(function(e){var a=T.onDone;T.onDone=function(){a&&a(),e(),T.onDone=null}})},V.clear=function(A){if(A)c(m[A]),delete m[A];else for(var T in m)V.clear(T)};function c(A){A&&A.timer!==null&&(clearTimeout(A.timer),A.timer=null)}},{}],543:[function(t,B,V){var m=t("fast-isnumeric");B.exports=function(A,T){if(A>0)return Math.log(A)/Math.LN10;var e=Math.log(Math.min(T[0],T[1]))/Math.LN10;return m(e)||(e=Math.log(Math.max(T[0],T[1]))/Math.LN10-6),e}},{"fast-isnumeric":190}],544:[function(t,B,V){var m=B.exports={},c=t("../plots/geo/constants").locationmodeToLayer,A=t("topojson-client").feature;m.getTopojsonName=function(T){return[T.scope.replace(/ /g,"-"),"_",T.resolution.toString(),"m"].join("")},m.getTopojsonPath=function(T,e){return T+e+".json"},m.getTopojsonFeatures=function(T,e){var a=c[T.locationmode],i=e.objects[a];return A(e,i).features}},{"../plots/geo/constants":596,"topojson-client":316}],545:[function(t,B,V){B.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],546:[function(t,B,V){B.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},{}],547:[function(t,B,V){var m=t("../registry");B.exports=function(A){for(var T=m.layoutArrayContainers,e=m.layoutArrayRegexes,a=A.split("[")[0],i,n,r=0;r<e.length;r++)if(n=A.match(e[r]),n&&n.index===0){i=n[0];break}if(i||(i=T[T.indexOf(a)]),!i)return!1;var v=A.substr(i.length);return v?(n=v.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/),n?{array:i,index:Number(n[1]),property:n[3]||""}:!1):{array:i,index:"",property:""}}},{"../registry":647}],548:[function(t,B,V){var m=t("../lib"),c=m.extendFlat,A=m.isPlainObject,T={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},e={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},a=T.flags.slice().concat(["fullReplot"]),i=e.flags.slice().concat("layoutReplot");B.exports={traces:T,layout:e,traceFlags:function(){return n(a)},layoutFlags:function(){return n(i)},update:function(s,o){var b=o.editType;if(b&&b!=="none")for(var g=b.split("+"),d=0;d<g.length;d++)s[g[d]]=!0},overrideAll:r};function n(s){for(var o={},b=0;b<s.length;b++)o[s[b]]=!1;return o}function r(s,o,b){var g=c({},s);for(var d in g){var f=g[d];A(f)&&(g[d]=v(f,o,b,d))}return b==="from-root"&&(g.editType=o),g}function v(s,o,b,g){if(s.valType){var d=c({},s);if(d.editType=o,Array.isArray(s.items)){d.items=new Array(s.items.length);for(var f=0;f<s.items.length;f++)d.items[f]=v(s.items[f],o)}return d}else return r(s,o,g.charAt(0)==="_"?"nested":"from-root")}},{"../lib":515}],549:[function(t,B,V){var m=t("fast-isnumeric"),c=t("gl-mat4/fromQuat"),A=t("../registry"),T=t("../lib"),e=t("../plots/plots"),a=t("../plots/cartesian/axis_ids"),i=t("../components/color"),n=a.cleanId,r=a.getFromTrace,v=A.traceIs;V.clearPromiseQueue=function(u){Array.isArray(u._promises)&&u._promises.length>0&&T.log("Clearing previous rejected promises from queue."),u._promises=[]},V.cleanLayout=function(u){var M,_;u||(u={}),u.xaxis1&&(u.xaxis||(u.xaxis=u.xaxis1),delete u.xaxis1),u.yaxis1&&(u.yaxis||(u.yaxis=u.yaxis1),delete u.yaxis1),u.scene1&&(u.scene||(u.scene=u.scene1),delete u.scene1);var p=(e.subplotsRegistry.cartesian||{}).attrRegex,w=(e.subplotsRegistry.polar||{}).attrRegex,h=(e.subplotsRegistry.ternary||{}).attrRegex,L=(e.subplotsRegistry.gl3d||{}).attrRegex,S=Object.keys(u);for(M=0;M<S.length;M++){var E=S[M];if(p&&p.test(E)){var P=u[E];P.anchor&&P.anchor!=="free"&&(P.anchor=n(P.anchor)),P.overlaying&&(P.overlaying=n(P.overlaying)),P.type||(P.isdate?P.type="date":P.islog?P.type="log":P.isdate===!1&&P.islog===!1&&(P.type="linear")),(P.autorange==="withzero"||P.autorange==="tozero")&&(P.autorange=!0,P.rangemode="tozero"),delete P.islog,delete P.isdate,delete P.categories,f(P,"domain")&&delete P.domain,P.autotick!==void 0&&(P.tickmode===void 0&&(P.tickmode=P.autotick?"auto":"linear"),delete P.autotick),o(P)}else if(w&&w.test(E)){var F=u[E];o(F.radialaxis)}else if(h&&h.test(E)){var I=u[E];o(I.aaxis),o(I.baxis),o(I.caxis)}else if(L&&L.test(E)){var D=u[E],R=D.cameraposition;if(Array.isArray(R)&&R[0].length===4){var N=R[0],z=R[1],G=R[2],Y=c([],N),ee=[];for(_=0;_<3;++_)ee[_]=z[_]+G*Y[2+4*_];D.camera={eye:{x:ee[0],y:ee[1],z:ee[2]},center:{x:z[0],y:z[1],z:z[2]},up:{x:0,y:0,z:1}},delete D.cameraposition}o(D.xaxis),o(D.yaxis),o(D.zaxis)}}var Z=Array.isArray(u.annotations)?u.annotations.length:0;for(M=0;M<Z;M++){var X=u.annotations[M];!T.isPlainObject(X)||(X.ref&&(X.ref==="paper"?(X.xref="paper",X.yref="paper"):X.ref==="data"&&(X.xref="x",X.yref="y"),delete X.ref),s(X,"xref"),s(X,"yref"))}var ne=Array.isArray(u.shapes)?u.shapes.length:0;for(M=0;M<ne;M++){var ce=u.shapes[M];!T.isPlainObject(ce)||(s(ce,"xref"),s(ce,"yref"))}var Q=Array.isArray(u.images)?u.images.length:0;for(M=0;M<Q;M++){var K=u.images[M];!T.isPlainObject(K)||(s(K,"xref"),s(K,"yref"))}var U=u.legend;return U&&(U.x>3?(U.x=1.02,U.xanchor="left"):U.x<-2&&(U.x=-.02,U.xanchor="right"),U.y>3?(U.y=1.02,U.yanchor="bottom"):U.y<-2&&(U.y=-.02,U.yanchor="top")),o(u),u.dragmode==="rotate"&&(u.dragmode="orbit"),i.clean(u),u.template&&u.template.layout&&V.cleanLayout(u.template.layout),u};function s(u,M){var _=u[M],p=M.charAt(0);_&&_!=="paper"&&(u[M]=n(_,p,!0))}function o(u){u&&((typeof u.title=="string"||typeof u.title=="number")&&(u.title={text:u.title}),M("titlefont","font"),M("titleposition","position"),M("titleside","side"),M("titleoffset","offset"));function M(_,p){var w=u[_],h=u.title&&u.title[p];w&&!h&&(u.title||(u.title={}),u.title[p]=u[_],delete u[_])}}V.cleanData=function(u){for(var M=0;M<u.length;M++){var _=u[M],p;if(_.type==="histogramy"&&"xbins"in _&&!("ybins"in _)&&(_.ybins=_.xbins,delete _.xbins),_.error_y&&"opacity"in _.error_y){var w=i.defaults,h=_.error_y.color||(v(_,"bar")?i.defaultLine:w[M%w.length]);_.error_y.color=i.addOpacity(i.rgb(h),i.opacity(h)*_.error_y.opacity),delete _.error_y.opacity}if("bardir"in _&&(_.bardir==="h"&&(v(_,"bar")||_.type.substr(0,9)==="histogram")&&(_.orientation="h",V.swapXYData(_)),delete _.bardir),_.type==="histogramy"&&V.swapXYData(_),(_.type==="histogramx"||_.type==="histogramy")&&(_.type="histogram"),"scl"in _&&!("colorscale"in _)&&(_.colorscale=_.scl,delete _.scl),"reversescl"in _&&!("reversescale"in _)&&(_.reversescale=_.reversescl,delete _.reversescl),_.xaxis&&(_.xaxis=n(_.xaxis,"x")),_.yaxis&&(_.yaxis=n(_.yaxis,"y")),v(_,"gl3d")&&_.scene&&(_.scene=e.subplotsRegistry.gl3d.cleanId(_.scene)),!v(_,"pie-like")&&!v(_,"bar-like"))if(Array.isArray(_.textposition))for(p=0;p<_.textposition.length;p++)_.textposition[p]=d(_.textposition[p]);else _.textposition&&(_.textposition=d(_.textposition));var L=A.getModule(_);if(L&&L.colorbar){var S=L.colorbar.container,E=S?_[S]:_;E&&E.colorscale&&(E.colorscale==="YIGnBu"&&(E.colorscale="YlGnBu"),E.colorscale==="YIOrRd"&&(E.colorscale="YlOrRd"))}if(_.type==="surface"&&T.isPlainObject(_.contours)){var P=["x","y","z"];for(p=0;p<P.length;p++){var F=_.contours[P[p]];!T.isPlainObject(F)||(F.highlightColor&&(F.highlightcolor=F.highlightColor,delete F.highlightColor),F.highlightWidth&&(F.highlightwidth=F.highlightWidth,delete F.highlightWidth))}}if(_.type==="candlestick"||_.type==="ohlc"){var I=(_.increasing||{}).showlegend!==!1,D=(_.decreasing||{}).showlegend!==!1,R=b(_.increasing),N=b(_.decreasing);if(R!==!1&&N!==!1){var z=g(R,N,I,D);z&&(_.name=z)}else(R||N)&&!_.name&&(_.name=R||N)}if(Array.isArray(_.transforms)){var G=_.transforms;for(p=0;p<G.length;p++){var Y=G[p];if(!!T.isPlainObject(Y))switch(Y.type){case"filter":Y.filtersrc&&(Y.target=Y.filtersrc,delete Y.filtersrc),Y.calendar&&(Y.valuecalendar||(Y.valuecalendar=Y.calendar),delete Y.calendar);break;case"groupby":if(Y.styles=Y.styles||Y.style,Y.styles&&!Array.isArray(Y.styles)){var ee=Y.styles,Z=Object.keys(ee);Y.styles=[];for(var X=0;X<Z.length;X++)Y.styles.push({target:Z[X],value:ee[Z[X]]})}break}}}f(_,"line")&&delete _.line,"marker"in _&&(f(_.marker,"line")&&delete _.marker.line,f(_,"marker")&&delete _.marker),i.clean(_),_.autobinx&&(delete _.autobinx,delete _.xbins),_.autobiny&&(delete _.autobiny,delete _.ybins),o(_),_.colorbar&&o(_.colorbar),_.marker&&_.marker.colorbar&&o(_.marker.colorbar),_.line&&_.line.colorbar&&o(_.line.colorbar),_.aaxis&&o(_.aaxis),_.baxis&&o(_.baxis)}};function b(u){if(!T.isPlainObject(u))return!1;var M=u.name;return delete u.name,delete u.showlegend,(typeof M=="string"||typeof M=="number")&&String(M)}function g(u,M,_,p){if(_&&!p)return u;if(p&&!_||!u.trim())return M;if(!M.trim())return u;var w=Math.min(u.length,M.length),h;for(h=0;h<w&&u.charAt(h)===M.charAt(h);h++);var L=u.substr(0,h);return L.trim()}function d(u){var M="middle",_="center";return typeof u=="string"&&(u.indexOf("top")!==-1?M="top":u.indexOf("bottom")!==-1&&(M="bottom"),u.indexOf("left")!==-1?_="left":u.indexOf("right")!==-1&&(_="right")),M+" "+_}function f(u,M){return M in u&&typeof u[M]=="object"&&Object.keys(u[M]).length===0}V.swapXYData=function(u){var M;if(T.swapAttrs(u,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(u.z)&&Array.isArray(u.z[0])&&(u.transpose?delete u.transpose:u.transpose=!0),u.error_x&&u.error_y){var _=u.error_y,p="copy_ystyle"in _?_.copy_ystyle:!(_.color||_.thickness||_.width);T.swapAttrs(u,["error_?.copy_ystyle"]),p&&T.swapAttrs(u,["error_?.color","error_?.thickness","error_?.width"])}if(typeof u.hoverinfo=="string"){var w=u.hoverinfo.split("+");for(M=0;M<w.length;M++)w[M]==="x"?w[M]="y":w[M]==="y"&&(w[M]="x");u.hoverinfo=w.join("+")}},V.coerceTraceIndices=function(u,M){if(m(M))return[M];if(!Array.isArray(M)||!M.length)return u.data.map(function(w,h){return h});if(Array.isArray(M)){for(var _=[],p=0;p<M.length;p++)T.isIndex(M[p],u.data.length)?_.push(M[p]):T.warn("trace index (",M[p],") is not a number or is out of bounds");return _}return M},V.manageArrayContainers=function(u,M,_){var p=u.obj,w=u.parts,h=w.length,L=w[h-1],S=m(L);if(S&&M===null){var E=w.slice(0,h-1).join("."),P=T.nestedProperty(p,E).get();P.splice(L,1)}else S&&u.get()===void 0&&u.get()===void 0&&(_[u.astr]=null),u.set(M)};var y=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function l(u){var M=u.search(y);if(M>0)return u.substr(0,M)}V.hasParent=function(u,M){for(var _=l(M);_;){if(_ in u)return!0;_=l(_)}return!1};var x=["x","y","z"];V.clearAxisTypes=function(u,M,_){for(var p=0;p<M.length;p++)for(var w=u._fullData[p],h=0;h<3;h++){var L=r(u,w,x[h]);if(L&&L.type!=="log"){var S=L._name,E=L._id.substr(1);if(E.substr(0,5)==="scene"){if(_[E]!==void 0)continue;S=E+"."+S}var P=S+".type";_[S]===void 0&&_[P]===void 0&&T.nestedProperty(u.layout,P).set(null)}}}},{"../components/color":367,"../lib":515,"../plots/cartesian/axis_ids":570,"../plots/plots":628,"../registry":647,"fast-isnumeric":190,"gl-mat4/fromQuat":200}],550:[function(t,B,V){var m=t("./plot_api");V._doPlot=m._doPlot,V.newPlot=m.newPlot,V.restyle=m.restyle,V.relayout=m.relayout,V.redraw=m.redraw,V.update=m.update,V._guiRestyle=m._guiRestyle,V._guiRelayout=m._guiRelayout,V._guiUpdate=m._guiUpdate,V._storeDirectGUIEdit=m._storeDirectGUIEdit,V.react=m.react,V.extendTraces=m.extendTraces,V.prependTraces=m.prependTraces,V.addTraces=m.addTraces,V.deleteTraces=m.deleteTraces,V.moveTraces=m.moveTraces,V.purge=m.purge,V.addFrames=m.addFrames,V.deleteFrames=m.deleteFrames,V.animate=m.animate,V.setPlotConfig=m.setPlotConfig,V.toImage=t("./to_image"),V.validate=t("./validate"),V.downloadImage=t("../snapshot/download");var c=t("./template_api");V.makeTemplate=c.makeTemplate,V.validateTemplate=c.validateTemplate},{"../snapshot/download":649,"./plot_api":552,"./template_api":557,"./to_image":558,"./validate":559}],551:[function(t,B,V){var m=t("../lib/is_plain_object"),c=t("../lib/noop"),A=t("../lib/loggers"),T=t("../lib/search").sorterAsc,e=t("../registry");V.containerArrayMatch=t("./container_array_match");var a=V.isAddVal=function(r){return r==="add"||m(r)},i=V.isRemoveVal=function(r){return r===null||r==="remove"};V.applyContainerArrayChanges=function(r,v,s,o,b){var g=v.astr,d=e.getComponentMethod(g,"supplyLayoutDefaults"),f=e.getComponentMethod(g,"draw"),y=e.getComponentMethod(g,"drawOne"),l=o.replot||o.recalc||d===c||f===c,x=r.layout,u=r._fullLayout;if(s[""]){Object.keys(s).length>1&&A.warn("Full array edits are incompatible with other edits",g);var M=s[""][""];if(i(M))v.set(null);else if(Array.isArray(M))v.set(M);else return A.warn("Unrecognized full array edit value",g,M),!0;return l?!1:(d(x,u),f(r),!0)}var _=Object.keys(s).map(Number).sort(T),p=v.get(),w=p||[],h=b(u,g).get(),L=[],S=-1,E=w.length,P,F,I,D,R,N,z,G;for(P=0;P<_.length;P++){if(I=_[P],D=s[I],R=Object.keys(D),N=D[""],z=a(N),I<0||I>w.length-(z?0:1)){A.warn("index out of range",g,I);continue}if(N!==void 0)R.length>1&&A.warn("Insertion & removal are incompatible with edits to the same index.",g,I),i(N)?L.push(I):z?(N==="add"&&(N={}),w.splice(I,0,N),h&&h.splice(I,0,{})):A.warn("Unrecognized full object edit value",g,I,N),S===-1&&(S=I);else for(F=0;F<R.length;F++)G=g+"["+I+"].",b(w[I],R[F],G).set(D[R[F]])}for(P=L.length-1;P>=0;P--)w.splice(L[P],1),h&&h.splice(L[P],1);if(w.length?p||v.set(w):v.set(null),l)return!1;if(d(x,u),y!==c){var Y;if(S===-1)Y=_;else{for(E=Math.max(w.length,E),Y=[],P=0;P<_.length&&(I=_[P],!(I>=S));P++)Y.push(I);for(P=S;P<E;P++)Y.push(P)}for(P=0;P<Y.length;P++)y(r,Y[P])}else f(r);return!0}},{"../lib/is_plain_object":516,"../lib/loggers":519,"../lib/noop":524,"../lib/search":535,"../registry":647,"./container_array_match":547}],552:[function(t,B,V){var m=t("@plotly/d3"),c=t("fast-isnumeric"),A=t("has-hover"),T=t("../lib"),e=T.nestedProperty,a=t("../lib/events"),i=t("../lib/queue"),n=t("../registry"),r=t("./plot_schema"),v=t("../plots/plots"),s=t("../plots/cartesian/axes"),o=t("../components/drawing"),b=t("../components/color"),g=t("../plots/cartesian/graph_interact").initInteractions,d=t("../constants/xmlns_namespaces"),f=t("../components/selections").clearOutline,y=t("./plot_config").dfltConfig,l=t("./manage_arrays"),x=t("./helpers"),u=t("./subroutines"),M=t("./edit_types"),_=t("../plots/cartesian/constants").AX_NAME_PATTERN,p=0,w=5;function h(Se,He,Ke,qe){var Tt;if(Se=T.getGraphDiv(Se),a.init(Se),T.isPlainObject(He)){var mt=He;He=mt.data,Ke=mt.layout,qe=mt.config,Tt=mt.frames}var At=a.triggerHandler(Se,"plotly_beforeplot",[He,Ke,qe]);if(At===!1)return Promise.reject();!He&&!Ke&&!T.isPlotDiv(Se)&&T.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",Se);function Ht(){if(Tt)return V.addFrames(Se,Tt)}F(Se,qe),Ke||(Ke={}),m.select(Se).classed("js-plotly-plot",!0),o.makeTester(),Array.isArray(Se._promises)||(Se._promises=[]);var It=(Se.data||[]).length===0&&Array.isArray(He);Array.isArray(He)&&(x.cleanData(He),It?Se.data=He:Se.data.push.apply(Se.data,He),Se.empty=!1),(!Se.layout||It)&&(Se.layout=x.cleanLayout(Ke)),v.supplyDefaults(Se);var Vt=Se._fullLayout,jt=Vt._has("cartesian");Vt._replotting=!0,(It||Vt._shouldCreateBgLayer)&&(Ge(Se),Vt._shouldCreateBgLayer&&delete Vt._shouldCreateBgLayer),o.initGradients(Se),o.initPatterns(Se),It&&s.saveShowSpikeInitial(Se);var Yt=!Se.calcdata||Se.calcdata.length!==(Se._fullData||[]).length;Yt&&v.doCalcdata(Se);for(var or=0;or<Se.calcdata.length;or++)Se.calcdata[or][0].trace=Se._fullData[or];Se._context.responsive?Se._responsiveChartHandler||(Se._responsiveChartHandler=function(){T.isHidden(Se)||v.resize(Se)},window.addEventListener("resize",Se._responsiveChartHandler)):T.clearResponsive(Se);var Gr=T.extendFlat({},Vt._size),on=0;function Jr(){for(var ct=Vt._basePlotModules,Mt=0;Mt<ct.length;Mt++)ct[Mt].drawFramework&&ct[Mt].drawFramework(Se);!Vt._glcanvas&&Vt._has("gl")&&(Vt._glcanvas=Vt._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(it){return it.key}),Vt._glcanvas.enter().append("canvas").attr("class",function(it){return"gl-canvas gl-canvas-"+it.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var Ut=Se._context.plotGlPixelRatio;if(Vt._glcanvas){Vt._glcanvas.attr("width",Vt.width*Ut).attr("height",Vt.height*Ut).style("width",Vt.width+"px").style("height",Vt.height+"px");var Pe=Vt._glcanvas.data()[0].regl;if(Pe&&(Math.floor(Vt.width*Ut)!==Pe._gl.drawingBufferWidth||Math.floor(Vt.height*Ut)!==Pe._gl.drawingBufferHeight)){var Ee="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(on)T.error(Ee);else return T.log(Ee+" Clearing graph and plotting again."),v.cleanPlot([],{},Se._fullData,Vt),v.supplyDefaults(Se),Vt=Se._fullLayout,v.doCalcdata(Se),on++,Jr()}}return Vt.modebar.orientation==="h"?Vt._modebardiv.style("height",null).style("width","100%"):Vt._modebardiv.style("width",null).style("height",Vt.height+"px"),v.previousPromises(Se)}function ot(){if(v.clearAutoMarginIds(Se),u.drawMarginPushers(Se),s.allowAutoMargin(Se),Vt._has("pie"))for(var ct=Se._fullData,Mt=0;Mt<ct.length;Mt++){var Ut=ct[Mt];Ut.type==="pie"&&Ut.automargin&&v.allowAutoMargin(Se,"pie."+Ut.uid+".automargin")}return v.doAutoMargin(Se),v.previousPromises(Se)}function er(){if(!!v.didMarginChange(Gr,Vt._size))return T.syncOrAsync([ot,u.layoutStyles],Se)}function Kt(){if(!Yt){fr();return}return T.syncOrAsync([n.getComponentMethod("shapes","calcAutorange"),n.getComponentMethod("annotations","calcAutorange"),fr],Se)}function fr(){Se._transitioning||(u.doAutoRangeAndConstraints(Se),It&&s.saveRangeInitial(Se),n.getComponentMethod("rangeslider","calcAutorange")(Se))}function Ar(){return s.draw(Se,It?"":"redraw")}var et=[v.previousPromises,Ht,Jr,ot,er];jt&&et.push(Kt),et.push(u.layoutStyles),jt&&et.push(Ar,function(Mt){Mt._fullLayout._insideTickLabelsAutorange&&ae(Mt,Mt._fullLayout._insideTickLabelsAutorange).then(function(){Mt._fullLayout._insideTickLabelsAutorange=void 0})}),et.push(u.drawData,u.finalDraw,g,v.addLinks,v.rehover,v.redrag,v.reselect,v.doAutoMargin,$e,v.previousPromises);function $e(ct){ct._fullLayout._insideTickLabelsAutorange&&It&&s.saveRangeInitial(ct,!0)}var st=T.syncOrAsync(et,Se);return(!st||!st.then)&&(st=Promise.resolve()),st.then(function(){return L(Se),Se})}function L(Se){var He=Se._fullLayout;He._redrawFromAutoMarginCount?He._redrawFromAutoMarginCount--:Se.emit("plotly_afterplot")}function S(Se){return T.extendFlat(y,Se)}function E(Se,He){try{Se._fullLayout._paper.style("background",He)}catch(Ke){T.error(Ke)}}function P(Se,He){var Ke=b.combine(He,"white");E(Se,Ke)}function F(Se,He){if(!Se._context){Se._context=T.extendDeep({},y);var Ke=m.select("base");Se._context._baseUrl=Ke.size()&&Ke.attr("href")?window.location.href.split("#")[0]:""}var qe=Se._context,Tt,mt,At;if(He){for(mt=Object.keys(He),Tt=0;Tt<mt.length;Tt++)At=mt[Tt],!(At==="editable"||At==="edits")&&At in qe&&(At==="setBackground"&&He[At]==="opaque"?qe[At]=P:qe[At]=He[At]);He.plot3dPixelRatio&&!qe.plotGlPixelRatio&&(qe.plotGlPixelRatio=qe.plot3dPixelRatio);var Ht=He.editable;if(Ht!==void 0)for(qe.editable=Ht,mt=Object.keys(qe.edits),Tt=0;Tt<mt.length;Tt++)qe.edits[mt[Tt]]=Ht;if(He.edits)for(mt=Object.keys(He.edits),Tt=0;Tt<mt.length;Tt++)At=mt[Tt],At in qe.edits&&(qe.edits[At]=He.edits[At]);qe._exportedPlot=He._exportedPlot}qe.staticPlot&&(qe.editable=!1,qe.edits={},qe.autosizable=!1,qe.scrollZoom=!1,qe.doubleClick=!1,qe.showTips=!1,qe.showLink=!1,qe.displayModeBar=!1),qe.displayModeBar==="hover"&&!A&&(qe.displayModeBar=!0),(qe.setBackground==="transparent"||typeof qe.setBackground!="function")&&(qe.setBackground=E),qe._hasZeroHeight=qe._hasZeroHeight||Se.clientHeight===0,qe._hasZeroWidth=qe._hasZeroWidth||Se.clientWidth===0;var It=qe.scrollZoom,Vt=qe._scrollZoom={};if(It===!0)Vt.cartesian=1,Vt.gl3d=1,Vt.geo=1,Vt.mapbox=1;else if(typeof It=="string"){var jt=It.split("+");for(Tt=0;Tt<jt.length;Tt++)Vt[jt[Tt]]=1}else It!==!1&&(Vt.gl3d=1,Vt.geo=1,Vt.mapbox=1)}function I(Se){if(Se=T.getGraphDiv(Se),!T.isPlotDiv(Se))throw new Error("This element is not a Plotly plot: "+Se);return x.cleanData(Se.data),x.cleanLayout(Se.layout),Se.calcdata=void 0,V._doPlot(Se).then(function(){return Se.emit("plotly_redraw"),Se})}function D(Se,He,Ke,qe){return Se=T.getGraphDiv(Se),v.cleanPlot([],{},Se._fullData||[],Se._fullLayout||{}),v.purge(Se),V._doPlot(Se,He,Ke,qe)}function R(Se,He){var Ke=He+1,qe=[],Tt,mt;for(Tt=0;Tt<Se.length;Tt++)mt=Se[Tt],mt<0?qe.push(Ke+mt):qe.push(mt);return qe}function N(Se,He,Ke){var qe,Tt;for(qe=0;qe<He.length;qe++){if(Tt=He[qe],Tt!==parseInt(Tt,10))throw new Error("all values in "+Ke+" must be integers");if(Tt>=Se.data.length||Tt<-Se.data.length)throw new Error(Ke+" must be valid indices for gd.data.");if(He.indexOf(Tt,qe+1)>-1||Tt>=0&&He.indexOf(-Se.data.length+Tt)>-1||Tt<0&&He.indexOf(Se.data.length+Tt)>-1)throw new Error("each index in "+Ke+" must be unique.")}}function z(Se,He,Ke){if(!Array.isArray(Se.data))throw new Error("gd.data must be an array.");if(typeof He>"u")throw new Error("currentIndices is a required argument.");if(Array.isArray(He)||(He=[He]),N(Se,He,"currentIndices"),typeof Ke<"u"&&!Array.isArray(Ke)&&(Ke=[Ke]),typeof Ke<"u"&&N(Se,Ke,"newIndices"),typeof Ke<"u"&&He.length!==Ke.length)throw new Error("current and new indices must be of equal length.")}function G(Se,He,Ke){var qe,Tt;if(!Array.isArray(Se.data))throw new Error("gd.data must be an array.");if(typeof He>"u")throw new Error("traces must be defined.");for(Array.isArray(He)||(He=[He]),qe=0;qe<He.length;qe++)if(Tt=He[qe],typeof Tt!="object"||Array.isArray(Tt)||Tt===null)throw new Error("all values in traces array must be non-array objects");if(typeof Ke<"u"&&!Array.isArray(Ke)&&(Ke=[Ke]),typeof Ke<"u"&&Ke.length!==He.length)throw new Error("if indices is specified, traces.length must equal indices.length")}function Y(Se,He,Ke,qe){var Tt=T.isPlainObject(qe);if(!Array.isArray(Se.data))throw new Error("gd.data must be an array");if(!T.isPlainObject(He))throw new Error("update must be a key:value object");if(typeof Ke>"u")throw new Error("indices must be an integer or array of integers");N(Se,Ke,"indices");for(var mt in He){if(!Array.isArray(He[mt])||He[mt].length!==Ke.length)throw new Error("attribute "+mt+" must be an array of length equal to indices array length");if(Tt&&(!(mt in qe)||!Array.isArray(qe[mt])||qe[mt].length!==He[mt].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}function ee(Se,He,Ke,qe){var Tt=T.isPlainObject(qe),mt=[],At,Ht,It,Vt,jt;Array.isArray(Ke)||(Ke=[Ke]),Ke=R(Ke,Se.data.length-1);for(var Yt in He)for(var or=0;or<Ke.length;or++){if(At=Se.data[Ke[or]],It=e(At,Yt),Ht=It.get(),Vt=He[Yt][or],!T.isArrayOrTypedArray(Vt))throw new Error("attribute: "+Yt+" index: "+or+" must be an array");if(!T.isArrayOrTypedArray(Ht))throw new Error("cannot extend missing or non-array attribute: "+Yt);if(Ht.constructor!==Vt.constructor)throw new Error("cannot extend array with an array of a different type: "+Yt);jt=Tt?qe[Yt][or]:qe,c(jt)||(jt=-1),mt.push({prop:It,target:Ht,insert:Vt,maxp:Math.floor(jt)})}return mt}function Z(Se,He,Ke,qe,Tt){Y(Se,He,Ke,qe);for(var mt=ee(Se,He,Ke,qe),At={},Ht={},It=0;It<mt.length;It++){var Vt=mt[It].prop,jt=mt[It].maxp,Yt=Tt(mt[It].target,mt[It].insert,jt);Vt.set(Yt[0]),Array.isArray(At[Vt.astr])||(At[Vt.astr]=[]),At[Vt.astr].push(Yt[1]),Array.isArray(Ht[Vt.astr])||(Ht[Vt.astr]=[]),Ht[Vt.astr].push(mt[It].target.length)}return{update:At,maxPoints:Ht}}function X(Se,He){var Ke=new Se.constructor(Se.length+He.length);return Ke.set(Se),Ke.set(He,Se.length),Ke}function ne(Se,He,Ke,qe){Se=T.getGraphDiv(Se);function Tt(It,Vt,jt){var Yt,or;if(T.isTypedArray(It))if(jt<0){var Gr=new It.constructor(0),on=X(It,Vt);jt<0?(Yt=on,or=Gr):(Yt=Gr,or=on)}else if(Yt=new It.constructor(jt),or=new It.constructor(It.length+Vt.length-jt),jt===Vt.length)Yt.set(Vt),or.set(It);else if(jt<Vt.length){var Jr=Vt.length-jt;Yt.set(Vt.subarray(Jr)),or.set(It),or.set(Vt.subarray(0,Jr),It.length)}else{var ot=jt-Vt.length,er=It.length-ot;Yt.set(It.subarray(er)),Yt.set(Vt,ot),or.set(It.subarray(0,er))}else Yt=It.concat(Vt),or=jt>=0&&jt<Yt.length?Yt.splice(0,Yt.length-jt):[];return[Yt,or]}var mt=Z(Se,He,Ke,qe,Tt),At=V.redraw(Se),Ht=[Se,mt.update,Ke,mt.maxPoints];return i.add(Se,V.prependTraces,Ht,ne,arguments),At}function ce(Se,He,Ke,qe){Se=T.getGraphDiv(Se);function Tt(It,Vt,jt){var Yt,or;if(T.isTypedArray(It))if(jt<=0){var Gr=new It.constructor(0),on=X(Vt,It);jt<0?(Yt=on,or=Gr):(Yt=Gr,or=on)}else if(Yt=new It.constructor(jt),or=new It.constructor(It.length+Vt.length-jt),jt===Vt.length)Yt.set(Vt),or.set(It);else if(jt<Vt.length){var Jr=Vt.length-jt;Yt.set(Vt.subarray(0,Jr)),or.set(Vt.subarray(Jr)),or.set(It,Jr)}else{var ot=jt-Vt.length;Yt.set(Vt),Yt.set(It.subarray(0,ot),Vt.length),or.set(It.subarray(ot))}else Yt=Vt.concat(It),or=jt>=0&&jt<Yt.length?Yt.splice(jt,Yt.length):[];return[Yt,or]}var mt=Z(Se,He,Ke,qe,Tt),At=V.redraw(Se),Ht=[Se,mt.update,Ke,mt.maxPoints];return i.add(Se,V.extendTraces,Ht,ce,arguments),At}function Q(Se,He,Ke){Se=T.getGraphDiv(Se);var qe=[],Tt=V.deleteTraces,mt=Q,At=[Se,qe],Ht=[Se,He],It,Vt;for(G(Se,He,Ke),Array.isArray(He)||(He=[He]),He=He.map(function(jt){return T.extendFlat({},jt)}),x.cleanData(He),It=0;It<He.length;It++)Se.data.push(He[It]);for(It=0;It<He.length;It++)qe.push(-He.length+It);if(typeof Ke>"u")return Vt=V.redraw(Se),i.add(Se,Tt,At,mt,Ht),Vt;Array.isArray(Ke)||(Ke=[Ke]);try{z(Se,qe,Ke)}catch(jt){throw Se.data.splice(Se.data.length-He.length,He.length),jt}return i.startSequence(Se),i.add(Se,Tt,At,mt,Ht),Vt=V.moveTraces(Se,qe,Ke),i.stopSequence(Se),Vt}function K(Se,He){Se=T.getGraphDiv(Se);var Ke=[],qe=V.addTraces,Tt=K,mt=[Se,Ke,He],At=[Se,He],Ht,It;if(typeof He>"u")throw new Error("indices must be an integer or array of integers.");for(Array.isArray(He)||(He=[He]),N(Se,He,"indices"),He=R(He,Se.data.length-1),He.sort(T.sorterDes),Ht=0;Ht<He.length;Ht+=1)It=Se.data.splice(He[Ht],1)[0],Ke.push(It);var Vt=V.redraw(Se);return i.add(Se,qe,mt,Tt,At),Vt}function U(Se,He,Ke){Se=T.getGraphDiv(Se);var qe=[],Tt=[],mt=U,At=U,Ht=[Se,Ke,He],It=[Se,He,Ke],Vt;if(z(Se,He,Ke),He=Array.isArray(He)?He:[He],typeof Ke>"u")for(Ke=[],Vt=0;Vt<He.length;Vt++)Ke.push(-He.length+Vt);for(Ke=Array.isArray(Ke)?Ke:[Ke],He=R(He,Se.data.length-1),Ke=R(Ke,Se.data.length-1),Vt=0;Vt<Se.data.length;Vt++)He.indexOf(Vt)===-1&&qe.push(Se.data[Vt]);for(Vt=0;Vt<He.length;Vt++)Tt.push({newIndex:Ke[Vt],trace:Se.data[He[Vt]]});for(Tt.sort(function(Yt,or){return Yt.newIndex-or.newIndex}),Vt=0;Vt<Tt.length;Vt+=1)qe.splice(Tt[Vt].newIndex,0,Tt[Vt].trace);Se.data=qe;var jt=V.redraw(Se);return i.add(Se,mt,Ht,At,It),jt}function H(Se,He,Ke,qe){Se=T.getGraphDiv(Se),x.clearPromiseQueue(Se);var Tt={};if(typeof He=="string")Tt[He]=Ke;else if(T.isPlainObject(He))Tt=T.extendFlat({},He),qe===void 0&&(qe=Ke);else return T.warn("Restyle fail.",He,Ke,qe),Promise.reject();Object.keys(Tt).length&&(Se.changed=!0);var mt=x.coerceTraceIndices(Se,qe),At=ie(Se,Tt,mt),Ht=At.flags;Ht.calc&&(Se.calcdata=void 0),Ht.clearAxisTypes&&x.clearAxisTypes(Se,mt,{});var It=[];Ht.fullReplot?It.push(V._doPlot):(It.push(v.previousPromises),v.supplyDefaults(Se),Ht.markerSize&&(v.doCalcdata(Se),_e(It)),Ht.style&&It.push(u.doTraceStyle),Ht.colorbars&&It.push(u.doColorBars),It.push(L)),It.push(v.rehover,v.redrag,v.reselect),i.add(Se,H,[Se,At.undoit,At.traces],H,[Se,At.redoit,At.traces]);var Vt=T.syncOrAsync(It,Se);return(!Vt||!Vt.then)&&(Vt=Promise.resolve()),Vt.then(function(){return Se.emit("plotly_restyle",At.eventData),Se})}function q(Se){return Se===void 0?null:Se}function re(Se,He){return He?function(Ke,qe,Tt){var mt=e(Ke,qe),At=mt.set;return mt.set=function(Ht){var It=(Tt||"")+qe;j(It,mt.get(),Ht,Se),At(Ht)},mt}:e}function j(Se,He,Ke,qe){if(Array.isArray(He)||Array.isArray(Ke))for(var Tt=Array.isArray(He)?He:[],mt=Array.isArray(Ke)?Ke:[],At=Math.max(Tt.length,mt.length),Ht=0;Ht<At;Ht++)j(Se+"["+Ht+"]",Tt[Ht],mt[Ht],qe);else if(T.isPlainObject(He)||T.isPlainObject(Ke)){var It=T.isPlainObject(He)?He:{},Vt=T.isPlainObject(Ke)?Ke:{},jt=T.extendFlat({},It,Vt);for(var Yt in jt)j(Se+"."+Yt,It[Yt],Vt[Yt],qe)}else qe[Se]===void 0&&(qe[Se]=q(He))}function $(Se,He,Ke){for(var qe in Ke){var Tt=e(Se,qe);j(qe,Tt.get(),Ke[qe],He)}}function ie(Se,He,Ke){var qe=Se._fullLayout,Tt=Se._fullData,mt=Se.data,At=qe._guiEditing,Ht=re(qe._preGUI,At),It=T.extendDeepAll({},He),Vt;oe(He);var jt=M.traceFlags(),Yt={},or={},Gr;function on(){return Ke.map(function(){})}function Jr(Zt){var sr=s.id2name(Zt);Gr.indexOf(sr)===-1&&Gr.push(sr)}function ot(Zt){return"LAYOUT"+Zt+".autorange"}function er(Zt){return"LAYOUT"+Zt+".range"}function Kt(Zt){for(var sr=Zt;sr<Tt.length;sr++)if(Tt[sr]._input===mt[Zt])return Tt[sr]}function fr(Zt,sr,zr){if(Array.isArray(Zt)){Zt.forEach(function(Wr){fr(Wr,sr,zr)});return}if(!(Zt in He||x.hasParent(He,Zt))){var Ur;if(Zt.substr(0,6)==="LAYOUT")Ur=Ht(Se.layout,Zt.replace("LAYOUT",""));else{var Lr=Ke[zr],Tr=qe._tracePreGUI[Kt(Lr)._fullInput.uid];Ur=re(Tr,At)(mt[Lr],Zt)}Zt in or||(or[Zt]=on()),or[Zt][zr]===void 0&&(or[Zt][zr]=q(Ur.get())),sr!==void 0&&Ur.set(sr)}}function Ar(Zt){return function(sr){return Tt[sr][Zt]}}function et(Zt){return function(sr,zr){return sr===!1?Tt[Ke[zr]][Zt]:null}}for(var $e in He){if(x.hasParent(He,$e))throw new Error("cannot set "+$e+" and a parent attribute simultaneously");var st=He[$e],ct,Mt,Ut,Pe,Ee,it;if(($e==="autobinx"||$e==="autobiny")&&($e=$e.charAt($e.length-1)+"bins",Array.isArray(st)?st=st.map(et($e)):st===!1?st=Ke.map(Ar($e)):st=null),Yt[$e]=st,$e.substr(0,6)==="LAYOUT"){Ut=Ht(Se.layout,$e.replace("LAYOUT","")),or[$e]=[q(Ut.get())],Ut.set(Array.isArray(st)?st[0]:st),jt.calc=!0;continue}for(or[$e]=on(),Vt=0;Vt<Ke.length;Vt++){ct=mt[Ke[Vt]],Mt=Kt(Ke[Vt]);var ut=qe._tracePreGUI[Mt._fullInput.uid];if(Ut=re(ut,At)(ct,$e),Pe=Ut.get(),Ee=Array.isArray(st)?st[Vt%st.length]:st,Ee!==void 0){var vt=Ut.parts[Ut.parts.length-1],St=$e.substr(0,$e.length-vt.length-1),yt=St?St+".":"",Pt=St?e(Mt,St).get():Mt;if(it=r.getTraceValObject(Mt,Ut.parts),it&&it.impliedEdits&&Ee!==null)for(var Wt in it.impliedEdits)fr(T.relativeAttr($e,Wt),it.impliedEdits[Wt],Vt);else if((vt==="thicknessmode"||vt==="lenmode")&&Pe!==Ee&&(Ee==="fraction"||Ee==="pixels")&&Pt){var ar=qe._size,kr=Pt.orient,wr=kr==="top"||kr==="bottom";if(vt==="thicknessmode"){var Sr=wr?ar.h:ar.w;fr(yt+"thickness",Pt.thickness*(Ee==="fraction"?1/Sr:Sr),Vt)}else{var Zr=wr?ar.w:ar.h;fr(yt+"len",Pt.len*(Ee==="fraction"?1/Zr:Zr),Vt)}}else if($e==="type"&&(Ee==="pie"!=(Pe==="pie")||Ee==="funnelarea"!=(Pe==="funnelarea"))){var ir="x",xr="y";(Ee==="bar"||Pe==="bar")&&ct.orientation==="h"&&(ir="y",xr="x"),T.swapAttrs(ct,["?","?src"],"labels",ir),T.swapAttrs(ct,["d?","?0"],"label",ir),T.swapAttrs(ct,["?","?src"],"values",xr),Pe==="pie"||Pe==="funnelarea"?(e(ct,"marker.color").set(e(ct,"marker.colors").get()),qe._pielayer.selectAll("g.trace").remove()):n.traceIs(ct,"cartesian")&&e(ct,"marker.colors").set(e(ct,"marker.color").get())}or[$e][Vt]=q(Pe);var Rr=["swapxy","swapxyaxes","orientation","orientationaxes"];if(Rr.indexOf($e)!==-1){if($e==="orientation"){Ut.set(Ee);var Br=ct.x&&!ct.y?"h":"v";if((Ut.get()||Br)===Mt.orientation)continue}else $e==="orientationaxes"&&(ct.orientation={v:"h",h:"v"}[Mt.orientation]);x.swapXYData(ct),jt.calc=jt.clearAxisTypes=!0}else v.dataArrayContainers.indexOf(Ut.parts[0])!==-1?(x.manageArrayContainers(Ut,Ee,or),jt.calc=!0):(it?it.arrayOk&&!n.traceIs(Mt,"regl")&&(T.isArrayOrTypedArray(Ee)||T.isArrayOrTypedArray(Pe))?jt.calc=!0:M.update(jt,it):jt.calc=!0,Ut.set(Ee))}}if(["swapxyaxes","orientationaxes"].indexOf($e)!==-1&&s.swap(Se,Ke),$e==="orientationaxes"){var Cr=e(Se.layout,"hovermode"),nt=Cr.get();nt==="x"?Cr.set("y"):nt==="y"?Cr.set("x"):nt==="x unified"?Cr.set("y unified"):nt==="y unified"&&Cr.set("x unified")}if(["orientation","type"].indexOf($e)!==-1){for(Gr=[],Vt=0;Vt<Ke.length;Vt++){var Dt=mt[Ke[Vt]];n.traceIs(Dt,"cartesian")&&(Jr(Dt.xaxis||"x"),Jr(Dt.yaxis||"y"))}fr(Gr.map(ot),!0,0),fr(Gr.map(er),[0,1],0)}}return(jt.calc||jt.plot)&&(jt.fullReplot=!0),{flags:jt,undoit:or,redoit:Yt,traces:Ke,eventData:T.extendDeepNoArrays([],[It,Ke])}}function oe(Se){var He=T.counterRegex("axis",".title",!1,!1),Ke=/colorbar\.title$/,qe=Object.keys(Se),Tt,mt,At;for(Tt=0;Tt<qe.length;Tt++)mt=qe[Tt],At=Se[mt],(mt==="title"||He.test(mt)||Ke.test(mt))&&(typeof At=="string"||typeof At=="number")?Ht(mt,mt.replace("title","title.text")):mt.indexOf("titlefont")>-1&&mt.indexOf("grouptitlefont")===-1?Ht(mt,mt.replace("titlefont","title.font")):mt.indexOf("titleposition")>-1?Ht(mt,mt.replace("titleposition","title.position")):mt.indexOf("titleside")>-1?Ht(mt,mt.replace("titleside","title.side")):mt.indexOf("titleoffset")>-1&&Ht(mt,mt.replace("titleoffset","title.offset"));function Ht(It,Vt){Se[Vt]=Se[It],delete Se[It]}}function ae(Se,He,Ke){Se=T.getGraphDiv(Se),x.clearPromiseQueue(Se);var qe={};if(typeof He=="string")qe[He]=Ke;else if(T.isPlainObject(He))qe=T.extendFlat({},He);else return T.warn("Relayout fail.",He,Ke),Promise.reject();Object.keys(qe).length&&(Se.changed=!0);var Tt=me(Se,qe),mt=Tt.flags;mt.calc&&(Se.calcdata=void 0);var At=[v.previousPromises];mt.layoutReplot?At.push(u.layoutReplot):Object.keys(qe).length&&(se(Se,mt,Tt)||v.supplyDefaults(Se),mt.legend&&At.push(u.doLegend),mt.layoutstyle&&At.push(u.layoutStyles),mt.axrange&&_e(At,Tt.rangesAltered),mt.ticks&&At.push(u.doTicksRelayout),mt.modebar&&At.push(u.doModeBar),mt.camera&&At.push(u.doCamera),mt.colorbars&&At.push(u.doColorBars),At.push(L)),At.push(v.rehover,v.redrag,v.reselect),i.add(Se,ae,[Se,Tt.undoit],ae,[Se,Tt.redoit]);var Ht=T.syncOrAsync(At,Se);return(!Ht||!Ht.then)&&(Ht=Promise.resolve(Se)),Ht.then(function(){return Se.emit("plotly_relayout",Tt.eventData),Se})}function se(Se,He,Ke){var qe=Se._fullLayout;if(!He.axrange)return!1;for(var Tt in He)if(Tt!=="axrange"&&He[Tt])return!1;for(var mt in Ke.rangesAltered){var At=s.id2name(mt),Ht=Se.layout[At],It=qe[At];if(It.autorange=Ht.autorange,Ht.range&&(It.range=Ht.range.slice()),It.cleanRange(),It._matchGroup){for(var Vt in It._matchGroup)if(Vt!==mt){var jt=qe[s.id2name(Vt)];jt.autorange=It.autorange,jt.range=It.range.slice(),jt._input.range=It.range.slice()}}}return!0}function _e(Se,He){var Ke=He?function(qe){var Tt=[],mt=!0;for(var At in He){var Ht=s.getFromId(qe,At);if(Tt.push(At),(Ht.ticklabelposition||"").indexOf("inside")!==-1&&Ht._anchorAxis&&Tt.push(Ht._anchorAxis._id),Ht._matchGroup)for(var It in Ht._matchGroup)He[It]||Tt.push(It)}return s.draw(qe,Tt,{skipTitle:mt})}:function(qe){return s.draw(qe,"redraw")};Se.push(f,u.doAutoRangeAndConstraints,Ke,u.drawData,u.finalDraw)}var ue=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,ye=/^[xyz]axis[0-9]*\.autorange$/,xe=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function me(Se,He){var Ke=Se.layout,qe=Se._fullLayout,Tt=qe._guiEditing,mt=re(qe._preGUI,Tt),At=Object.keys(He),Ht=s.list(Se),It=T.extendDeepAll({},He),Vt={},jt,Yt,or;for(oe(He),At=Object.keys(He),Yt=0;Yt<At.length;Yt++)if(At[Yt].indexOf("allaxes")===0){for(or=0;or<Ht.length;or++){var Gr=Ht[or]._id.substr(1),on=Gr.indexOf("scene")!==-1?Gr+".":"",Jr=At[Yt].replace("allaxes",on+Ht[or]._name);He[Jr]||(He[Jr]=He[At[Yt]])}delete He[At[Yt]]}var ot=M.layoutFlags(),er={},Kt={};function fr(Lr,Tr){if(Array.isArray(Lr)){Lr.forEach(function(An){fr(An,Tr)});return}if(!(Lr in He||x.hasParent(He,Lr))){var Wr=mt(Ke,Lr);Lr in Kt||(Kt[Lr]=q(Wr.get())),Tr!==void 0&&Wr.set(Tr)}}var Ar={},et;function $e(Lr){var Tr=s.name2id(Lr.split(".")[0]);return Ar[Tr]=1,Tr}for(var st in He){if(x.hasParent(He,st))throw new Error("cannot set "+st+" and a parent attribute simultaneously");for(var ct=mt(Ke,st),Mt=He[st],Ut=ct.parts.length,Pe=Ut-1;Pe>0&&typeof ct.parts[Pe]!="string";)Pe--;var Ee=ct.parts[Pe],it=ct.parts[Pe-1]+"."+Ee,ut=ct.parts.slice(0,Pe).join("."),vt=e(Se.layout,ut).get(),St=e(qe,ut).get(),yt=ct.get();if(Mt!==void 0){er[st]=Mt,Kt[st]=Ee==="reverse"?Mt:q(yt);var Pt=r.getLayoutValObject(qe,ct.parts);if(Pt&&Pt.impliedEdits&&Mt!==null)for(var Wt in Pt.impliedEdits)fr(T.relativeAttr(st,Wt),Pt.impliedEdits[Wt]);if(["width","height"].indexOf(st)!==-1)if(Mt){fr("autosize",null);var ar=st==="height"?"width":"height";fr(ar,qe[ar])}else qe[st]=Se._initialAutoSize[st];else if(st==="autosize")fr("width",Mt?null:qe.width),fr("height",Mt?null:qe.height);else if(it.match(ue))$e(it),e(qe,ut+"._inputRange").set(null);else if(it.match(ye)){$e(it),e(qe,ut+"._inputRange").set(null);var kr=e(qe,ut).get();kr._inputDomain&&(kr._input.domain=kr._inputDomain.slice())}else it.match(xe)&&e(qe,ut+"._inputDomain").set(null);if(Ee==="type"){et=vt;var wr=St.type==="linear"&&Mt==="log",Sr=St.type==="log"&&Mt==="linear";if(wr||Sr){if(!et||!et.range)fr(ut+".autorange",!0);else if(St.autorange)wr&&(et.range=et.range[1]>et.range[0]?[1,2]:[2,1]);else{var Zr=et.range[0],ir=et.range[1];wr?(Zr<=0&&ir<=0&&fr(ut+".autorange",!0),Zr<=0?Zr=ir/1e6:ir<=0&&(ir=Zr/1e6),fr(ut+".range[0]",Math.log(Zr)/Math.LN10),fr(ut+".range[1]",Math.log(ir)/Math.LN10)):(fr(ut+".range[0]",Math.pow(10,Zr)),fr(ut+".range[1]",Math.pow(10,ir)))}Array.isArray(qe._subplots.polar)&&qe._subplots.polar.length&&qe[ct.parts[0]]&&ct.parts[1]==="radialaxis"&&delete qe[ct.parts[0]]._subplot.viewInitial["radialaxis.range"],n.getComponentMethod("annotations","convertCoords")(Se,St,Mt,fr),n.getComponentMethod("images","convertCoords")(Se,St,Mt,fr)}else fr(ut+".autorange",!0),fr(ut+".range",null);e(qe,ut+"._inputRange").set(null)}else if(Ee.match(_)){var xr=e(qe,st).get(),Rr=(Mt||{}).type;(!Rr||Rr==="-")&&(Rr="linear"),n.getComponentMethod("annotations","convertCoords")(Se,xr,Rr,fr),n.getComponentMethod("images","convertCoords")(Se,xr,Rr,fr)}var Br=l.containerArrayMatch(st);if(Br){jt=Br.array,Yt=Br.index;var Cr=Br.property,nt=Pt||{editType:"calc"};Yt!==""&&Cr===""&&(l.isAddVal(Mt)?Kt[st]=null:l.isRemoveVal(Mt)?Kt[st]=(e(Ke,jt).get()||[])[Yt]:T.warn("unrecognized full object value",He)),M.update(ot,nt),Vt[jt]||(Vt[jt]={});var Dt=Vt[jt][Yt];Dt||(Dt=Vt[jt][Yt]={}),Dt[Cr]=Mt,delete He[st]}else Ee==="reverse"?(vt.range?vt.range.reverse():(fr(ut+".autorange",!0),vt.range=[1,0]),St.autorange?ot.calc=!0:ot.plot=!0):(st==="dragmode"&&(Mt===!1&&yt!==!1||Mt!==!1&&yt===!1)||qe._has("scatter-like")&&qe._has("regl")&&st==="dragmode"&&(Mt==="lasso"||Mt==="select")&&!(yt==="lasso"||yt==="select")||qe._has("gl2d")?ot.plot=!0:Pt?M.update(ot,Pt):ot.calc=!0,ct.set(Mt))}}for(jt in Vt){var Zt=l.applyContainerArrayChanges(Se,mt(Ke,jt),Vt[jt],ot,mt);Zt||(ot.plot=!0)}for(var sr in Ar){et=s.getFromId(Se,sr);var zr=et&&et._constraintGroup;if(zr){ot.calc=!0;for(var Ur in zr)Ar[Ur]||(s.getFromId(Se,Ur)._constraintShrinkable=!0)}}return(be(Se)||He.height||He.width)&&(ot.plot=!0),(ot.plot||ot.calc)&&(ot.layoutReplot=!0),{flags:ot,rangesAltered:Ar,undoit:Kt,redoit:er,eventData:It}}function be(Se){var He=Se._fullLayout,Ke=He.width,qe=He.height;return Se.layout.autosize&&v.plotAutoSize(Se,Se.layout,He),He.width!==Ke||He.height!==qe}function ke(Se,He,Ke,qe){Se=T.getGraphDiv(Se),x.clearPromiseQueue(Se),T.isPlainObject(He)||(He={}),T.isPlainObject(Ke)||(Ke={}),Object.keys(He).length&&(Se.changed=!0),Object.keys(Ke).length&&(Se.changed=!0);var Tt=x.coerceTraceIndices(Se,qe),mt=ie(Se,T.extendFlat({},He),Tt),At=mt.flags,Ht=me(Se,T.extendFlat({},Ke)),It=Ht.flags;(At.calc||It.calc)&&(Se.calcdata=void 0),At.clearAxisTypes&&x.clearAxisTypes(Se,Tt,Ke);var Vt=[];It.layoutReplot?Vt.push(u.layoutReplot):At.fullReplot?Vt.push(V._doPlot):(Vt.push(v.previousPromises),se(Se,It,Ht)||v.supplyDefaults(Se),At.style&&Vt.push(u.doTraceStyle),(At.colorbars||It.colorbars)&&Vt.push(u.doColorBars),It.legend&&Vt.push(u.doLegend),It.layoutstyle&&Vt.push(u.layoutStyles),It.axrange&&_e(Vt,Ht.rangesAltered),It.ticks&&Vt.push(u.doTicksRelayout),It.modebar&&Vt.push(u.doModeBar),It.camera&&Vt.push(u.doCamera),Vt.push(L)),Vt.push(v.rehover,v.redrag,v.reselect),i.add(Se,ke,[Se,mt.undoit,Ht.undoit,mt.traces],ke,[Se,mt.redoit,Ht.redoit,mt.traces]);var jt=T.syncOrAsync(Vt,Se);return(!jt||!jt.then)&&(jt=Promise.resolve(Se)),jt.then(function(){return Se.emit("plotly_update",{data:mt.eventData,layout:Ht.eventData}),Se})}function De(Se){return function(Ke){Ke._fullLayout._guiEditing=!0;var qe=Se.apply(null,arguments);return Ke._fullLayout._guiEditing=!1,qe}}var Ve=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],Ae=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function Le(Se,He){for(var Ke=0;Ke<He.length;Ke++){var qe=He[Ke],Tt=Se.match(qe.pattern);if(Tt){var mt=Tt[1]||"";return{head:mt,tail:Se.substr(mt.length+1),attr:qe.attr}}}}function je(Se,He){var Ke=e(He,Se).get();if(Ke!==void 0)return Ke;var qe=Se.split(".");for(qe.pop();qe.length>1;)if(qe.pop(),Ke=e(He,qe.join(".")+".uirevision").get(),Ke!==void 0)return Ke;return He.uirevision}function Ye(Se,He){for(var Ke=0;Ke<He.length;Ke++)if(He[Ke]._fullInput.uid===Se)return Ke;return-1}function ze(Se,He,Ke){for(var qe=0;qe<He.length;qe++)if(He[qe].uid===Se)return qe;return!He[Ke]||He[Ke].uid?-1:Ke}function Ie(Se,He){var Ke=T.isPlainObject(Se),qe=Array.isArray(Se);return Ke||qe?(Ke&&T.isPlainObject(He)||qe&&Array.isArray(He))&&JSON.stringify(Se)===JSON.stringify(He):Se===He}function We(Se,He,Ke,qe){var Tt=qe._preGUI,mt,At,Ht,It,Vt,jt,Yt,or,Gr,on,Jr=[],ot={},er={};for(mt in Tt){if(Vt=Le(mt,Ve),Vt){if(Gr=Vt.head,on=Vt.tail,At=Vt.attr||Gr+".uirevision",Ht=e(qe,At).get(),It=Ht&&je(At,He),It&&It===Ht){if(jt=Tt[mt],jt===null&&(jt=void 0),Yt=e(He,mt),or=Yt.get(),Ie(or,jt)){or===void 0&&on==="autorange"&&Jr.push(Gr),Yt.set(q(e(qe,mt).get()));continue}else if(on==="autorange"||on.substr(0,6)==="range["){var Kt=Tt[Gr+".range[0]"],fr=Tt[Gr+".range[1]"],Ar=Tt[Gr+".autorange"];if(Ar||Ar===null&&Kt===null&&fr===null){if(!(Gr in ot)){var et=e(He,Gr).get();ot[Gr]=et&&(et.autorange||et.autorange!==!1&&(!et.range||et.range.length!==2))}if(ot[Gr]){Yt.set(q(e(qe,mt).get()));continue}}}}}else T.warn("unrecognized GUI edit: "+mt);delete Tt[mt],Vt&&Vt.tail.substr(0,6)==="range["&&(er[Vt.head]=1)}for(var $e=0;$e<Jr.length;$e++){var st=Jr[$e];if(er[st]){var ct=e(He,st).get();ct&&delete ct.autorange}}var Mt=qe._tracePreGUI;for(var Ut in Mt){var Pe=Mt[Ut],Ee=null,it;for(mt in Pe){if(!Ee){var ut=Ye(Ut,Ke);if(ut<0){delete Mt[Ut];break}var vt=Ke[ut];it=vt._fullInput;var St=ze(Ut,Se,it.index);if(St<0){delete Mt[Ut];break}Ee=Se[St]}if(Vt=Le(mt,Ae),Vt){if(Vt.attr?(Ht=e(qe,Vt.attr).get(),It=Ht&&je(Vt.attr,He)):(Ht=it.uirevision,It=Ee.uirevision,It===void 0&&(It=He.uirevision)),It&&It===Ht&&(jt=Pe[mt],jt===null&&(jt=void 0),Yt=e(Ee,mt),or=Yt.get(),Ie(or,jt))){Yt.set(q(e(it,mt).get()));continue}}else T.warn("unrecognized GUI edit: "+mt+" in trace uid "+Ut);delete Pe[mt]}}}function pt(Se,He,Ke,qe){var Tt,mt;function At(){return V.addFrames(Se,Tt)}Se=T.getGraphDiv(Se),x.clearPromiseQueue(Se);var Ht=Se._fullData,It=Se._fullLayout;if(!T.isPlotDiv(Se)||!Ht||!It)mt=V.newPlot(Se,He,Ke,qe);else{if(T.isPlainObject(He)){var Vt=He;He=Vt.data,Ke=Vt.layout,qe=Vt.config,Tt=Vt.frames}var jt=!1;if(qe){var Yt=T.extendDeep({},Se._context);Se._context=void 0,F(Se,qe),jt=Et(Yt,Se._context)}Se.data=He||[],x.cleanData(Se.data),Se.layout=Ke||{},x.cleanLayout(Se.layout),We(Se.data,Se.layout,Ht,It),v.supplyDefaults(Se,{skipUpdateCalc:!0});var or=Se._fullData,Gr=Se._fullLayout,on=Gr.datarevision===void 0,Jr=Gr.transition,ot=Qt(Se,It,Gr,on,Jr),er=ot.newDataRevision,Kt=Ft(Se,Ht,or,on,Jr,er);if(be(Se)&&(ot.layoutReplot=!0),Kt.calc||ot.calc){Se.calcdata=void 0;for(var fr=Object.getOwnPropertyNames(Gr),Ar=0;Ar<fr.length;Ar++){var et=fr[Ar],$e=et.substring(0,5);if($e==="xaxis"||$e==="yaxis"){var st=Gr[et]._emptyCategories;st&&st()}}}else v.supplyDefaultsUpdateCalc(Se.calcdata,or);var ct=[];if(Tt&&(Se._transitionData={},v.createTransitionData(Se),ct.push(At)),Gr.transition&&!jt&&(Kt.anim||ot.anim))ot.ticks&&ct.push(u.doTicksRelayout),v.doCalcdata(Se),u.doAutoRangeAndConstraints(Se),ct.push(function(){return v.transitionFromReact(Se,Kt,ot,It)});else if(Kt.fullReplot||ot.layoutReplot||jt)Se._fullLayout._skipDefaults=!0,ct.push(V._doPlot);else{for(var Mt in ot.arrays){var Ut=ot.arrays[Mt];if(Ut.length){var Pe=n.getComponentMethod(Mt,"drawOne");if(Pe!==T.noop)for(var Ee=0;Ee<Ut.length;Ee++)Pe(Se,Ut[Ee]);else{var it=n.getComponentMethod(Mt,"draw");if(it===T.noop)throw new Error("cannot draw components: "+Mt);it(Se)}}}ct.push(v.previousPromises),Kt.style&&ct.push(u.doTraceStyle),(Kt.colorbars||ot.colorbars)&&ct.push(u.doColorBars),ot.legend&&ct.push(u.doLegend),ot.layoutstyle&&ct.push(u.layoutStyles),ot.axrange&&_e(ct),ot.ticks&&ct.push(u.doTicksRelayout),ot.modebar&&ct.push(u.doModeBar),ot.camera&&ct.push(u.doCamera),ct.push(L)}ct.push(v.rehover,v.redrag,v.reselect),mt=T.syncOrAsync(ct,Se),(!mt||!mt.then)&&(mt=Promise.resolve(Se))}return mt.then(function(){return Se.emit("plotly_react",{data:He,layout:Ke}),Se})}function Ft(Se,He,Ke,qe,Tt,mt){var At=He.length===Ke.length;if(!Tt&&!At)return{fullReplot:!0,calc:!0};var Ht=M.traceFlags();Ht.arrays={},Ht.nChanges=0,Ht.nChangesAnim=0;var It,Vt;function jt(Gr){var on=r.getTraceValObject(Vt,Gr);return!Vt._module.animatable&&on.anim&&(on.anim=!1),on}var Yt={getValObject:jt,flags:Ht,immutable:qe,transition:Tt,newDataRevision:mt,gd:Se},or={};for(It=0;It<He.length;It++)if(Ke[It]){if(Vt=Ke[It]._fullInput,v.hasMakesDataTransform(Vt)&&(Vt=Ke[It]),or[Vt.uid])continue;or[Vt.uid]=1,zt(He[It]._fullInput,Vt,[],Yt)}return(Ht.calc||Ht.plot)&&(Ht.fullReplot=!0),Tt&&Ht.nChanges&&Ht.nChangesAnim&&(Ht.anim=Ht.nChanges===Ht.nChangesAnim&&At?"all":"some"),Ht}function Qt(Se,He,Ke,qe,Tt){var mt=M.layoutFlags();mt.arrays={},mt.rangesAltered={},mt.nChanges=0,mt.nChangesAnim=0;function At(It){return r.getLayoutValObject(Ke,It)}var Ht={getValObject:At,flags:mt,immutable:qe,transition:Tt,gd:Se};return zt(He,Ke,[],Ht),(mt.plot||mt.calc)&&(mt.layoutReplot=!0),Tt&&mt.nChanges&&mt.nChangesAnim&&(mt.anim=mt.nChanges===mt.nChangesAnim?"all":"some"),mt}function zt(Se,He,Ke,qe){var Tt,mt,At,Ht=qe.getValObject,It=qe.flags,Vt=qe.immutable,jt=qe.inArray,Yt=qe.arrayIndex;function or(){var ut=Tt.editType;if(jt&&ut.indexOf("arraydraw")!==-1){T.pushUnique(It.arrays[jt],Yt);return}M.update(It,Tt),ut!=="none"&&It.nChanges++,qe.transition&&Tt.anim&&It.nChangesAnim++,(ue.test(At)||ye.test(At))&&(It.rangesAltered[Ke[0]]=1),xe.test(At)&&e(He,"_inputDomain").set(null),mt==="datarevision"&&(It.newDataRevision=1)}function Gr(ut){return ut.valType==="data_array"||ut.arrayOk}for(mt in Se){if(It.calc&&!qe.transition)return;var on=Se[mt],Jr=He[mt],ot=Ke.concat(mt);if(At=ot.join("."),!(mt.charAt(0)==="_"||typeof on=="function"||on===Jr)){if((mt==="tick0"||mt==="dtick")&&Ke[0]!=="geo"){var er=He.tickmode;if(er==="auto"||er==="array"||!er)continue}if(!(mt==="range"&&He.autorange)&&!((mt==="zmin"||mt==="zmax")&&He.type==="contourcarpet")&&(Tt=Ht(ot),!!Tt&&!(Tt._compareAsJSON&&JSON.stringify(on)===JSON.stringify(Jr)))){var Kt=Tt.valType,fr,Ar=Gr(Tt),et=Array.isArray(on),$e=Array.isArray(Jr);if(et&&$e){var st="_input_"+mt,ct=Se[st],Mt=He[st];if(Array.isArray(ct)&&ct===Mt)continue}if(Jr===void 0)Ar&&et?It.calc=!0:or();else if(Tt._isLinkedToArray){var Ut=[],Pe=!1;jt||(It.arrays[mt]=Ut);var Ee=Math.min(on.length,Jr.length),it=Math.max(on.length,Jr.length);if(Ee!==it)if(Tt.editType==="arraydraw")Pe=!0;else{or();continue}for(fr=0;fr<Ee;fr++)zt(on[fr],Jr[fr],ot.concat(fr),T.extendFlat({inArray:mt,arrayIndex:fr},qe));if(Pe)for(fr=Ee;fr<it;fr++)Ut.push(fr)}else!Kt&&T.isPlainObject(on)?zt(on,Jr,ot,qe):Ar?et&&$e?(Vt&&(It.calc=!0),(Vt||qe.newDataRevision)&&or()):et!==$e?It.calc=!0:or():et&&$e?(on.length!==Jr.length||String(on)!==String(Jr))&&or():or()}}}for(mt in He)if(!(mt in Se||mt.charAt(0)==="_"||typeof He[mt]=="function"))if(Tt=Ht(Ke.concat(mt)),Gr(Tt)&&Array.isArray(He[mt])){It.calc=!0;return}else or()}function Et(Se,He){var Ke;for(Ke in Se)if(Ke.charAt(0)!=="_"){var qe=Se[Ke],Tt=He[Ke];if(qe!==Tt)if(T.isPlainObject(qe)&&T.isPlainObject(Tt)){if(Et(qe,Tt))return!0}else if(Array.isArray(qe)&&Array.isArray(Tt)){if(qe.length!==Tt.length)return!0;for(var mt=0;mt<qe.length;mt++)if(qe[mt]!==Tt[mt])if(T.isPlainObject(qe[mt])&&T.isPlainObject(Tt[mt])){if(Et(qe[mt],Tt[mt]))return!0}else return!0}else return!0}}function Xt(Se,He,Ke){if(Se=T.getGraphDiv(Se),!T.isPlotDiv(Se))throw new Error("This element is not a Plotly plot: "+Se+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var qe=Se._transitionData;qe._frameQueue||(qe._frameQueue=[]),Ke=v.supplyAnimationDefaults(Ke);var Tt=Ke.transition,mt=Ke.frame;qe._frameWaitingCnt===void 0&&(qe._frameWaitingCnt=0);function At(Vt){return Array.isArray(Tt)?Vt>=Tt.length?Tt[0]:Tt[Vt]:Tt}function Ht(Vt){return Array.isArray(mt)?Vt>=mt.length?mt[0]:mt[Vt]:mt}function It(Vt,jt){var Yt=0;return function(){if(Vt&&++Yt===jt)return Vt()}}return new Promise(function(Vt,jt){function Yt(){if(qe._frameQueue.length!==0){for(;qe._frameQueue.length;){var Ee=qe._frameQueue.pop();Ee.onInterrupt&&Ee.onInterrupt()}Se.emit("plotly_animationinterrupted",[])}}function or(Ee){if(Ee.length!==0){for(var it=0;it<Ee.length;it++){var ut;Ee[it].type==="byname"?ut=v.computeFrame(Se,Ee[it].name):ut=Ee[it].data;var vt=Ht(it),St=At(it);St.duration=Math.min(St.duration,vt.duration);var yt={frame:ut,name:Ee[it].name,frameOpts:vt,transitionOpts:St};it===Ee.length-1&&(yt.onComplete=It(Vt,2),yt.onInterrupt=jt),qe._frameQueue.push(yt)}Ke.mode==="immediate"&&(qe._lastFrameAt=-1/0),qe._animationRaf||Jr()}}function Gr(){Se.emit("plotly_animated"),window.cancelAnimationFrame(qe._animationRaf),qe._animationRaf=null}function on(){qe._currentFrame&&qe._currentFrame.onComplete&&qe._currentFrame.onComplete();var Ee=qe._currentFrame=qe._frameQueue.shift();if(Ee){var it=Ee.name?Ee.name.toString():null;Se._fullLayout._currentFrame=it,qe._lastFrameAt=Date.now(),qe._timeToNext=Ee.frameOpts.duration,v.transition(Se,Ee.frame.data,Ee.frame.layout,x.coerceTraceIndices(Se,Ee.frame.traces),Ee.frameOpts,Ee.transitionOpts).then(function(){Ee.onComplete&&Ee.onComplete()}),Se.emit("plotly_animatingframe",{name:it,frame:Ee.frame,animation:{frame:Ee.frameOpts,transition:Ee.transitionOpts}})}else Gr()}function Jr(){Se.emit("plotly_animating"),qe._lastFrameAt=-1/0,qe._timeToNext=0,qe._runningTransitions=0,qe._currentFrame=null;var Ee=function(){qe._animationRaf=window.requestAnimationFrame(Ee),Date.now()-qe._lastFrameAt>qe._timeToNext&&on()};Ee()}var ot=0;function er(Ee){return Array.isArray(Tt)?ot>=Tt.length?Ee.transitionOpts=Tt[ot]:Ee.transitionOpts=Tt[0]:Ee.transitionOpts=Tt,ot++,Ee}var Kt,fr,Ar=[],et=He==null,$e=Array.isArray(He),st=!et&&!$e&&T.isPlainObject(He);if(st)Ar.push({type:"object",data:er(T.extendFlat({},He))});else if(et||["string","number"].indexOf(typeof He)!==-1)for(Kt=0;Kt<qe._frames.length;Kt++)fr=qe._frames[Kt],!!fr&&(et||String(fr.group)===String(He))&&Ar.push({type:"byname",name:String(fr.name),data:er({name:fr.name})});else if($e)for(Kt=0;Kt<He.length;Kt++){var ct=He[Kt];["number","string"].indexOf(typeof ct)!==-1?(ct=String(ct),Ar.push({type:"byname",name:ct,data:er({name:ct})})):T.isPlainObject(ct)&&Ar.push({type:"object",data:er(T.extendFlat({},ct))})}for(Kt=0;Kt<Ar.length;Kt++)if(fr=Ar[Kt],fr.type==="byname"&&!qe._frameHash[fr.data.name]){T.warn('animate failure: frame not found: "'+fr.data.name+'"'),jt();return}["next","immediate"].indexOf(Ke.mode)!==-1&&Yt(),Ke.direction==="reverse"&&Ar.reverse();var Mt=Se._fullLayout._currentFrame;if(Mt&&Ke.fromcurrent){var Ut=-1;for(Kt=0;Kt<Ar.length;Kt++)if(fr=Ar[Kt],fr.type==="byname"&&fr.name===Mt){Ut=Kt;break}if(Ut>0&&Ut<Ar.length-1){var Pe=[];for(Kt=0;Kt<Ar.length;Kt++)fr=Ar[Kt],(Ar[Kt].type!=="byname"||Kt>Ut)&&Pe.push(fr);Ar=Pe}}Ar.length>0?or(Ar):(Se.emit("plotly_animated"),Vt())})}function Nt(Se,He,Ke){if(Se=T.getGraphDiv(Se),He==null)return Promise.resolve();if(!T.isPlotDiv(Se))throw new Error("This element is not a Plotly plot: "+Se+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var qe,Tt,mt,At,Ht=Se._transitionData._frames,It=Se._transitionData._frameHash;if(!Array.isArray(He))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+He);var Vt=Ht.length+He.length*2,jt=[],Yt={};for(qe=He.length-1;qe>=0;qe--)if(!!T.isPlainObject(He[qe])){var or=He[qe].name,Gr=(It[or]||Yt[or]||{}).name,on=He[qe].name,Jr=It[Gr]||Yt[Gr];Gr&&on&&typeof on=="number"&&Jr&&p<w&&(p++,T.warn('addFrames: overwriting frame "'+(It[Gr]||Yt[Gr]).name+'" with a frame whose name of type "number" also equates to "'+Gr+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),p===w&&T.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),Yt[or]={name:or},jt.push({frame:v.supplyFrameDefaults(He[qe]),index:Ke&&Ke[qe]!==void 0&&Ke[qe]!==null?Ke[qe]:Vt+qe})}jt.sort(function(st,ct){return st.index>ct.index?-1:st.index<ct.index?1:0});var ot=[],er=[],Kt=Ht.length;for(qe=jt.length-1;qe>=0;qe--){if(Tt=jt[qe].frame,typeof Tt.name=="number"&&T.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!Tt.name)for(;It[Tt.name="frame "+Se._transitionData._counter++];);if(It[Tt.name]){for(mt=0;mt<Ht.length&&(Ht[mt]||{}).name!==Tt.name;mt++);ot.push({type:"replace",index:mt,value:Tt}),er.unshift({type:"replace",index:mt,value:Ht[mt]})}else At=Math.max(0,Math.min(jt[qe].index,Kt)),ot.push({type:"insert",index:At,value:Tt}),er.unshift({type:"delete",index:At}),Kt++}var fr=v.modifyFrames,Ar=v.modifyFrames,et=[Se,er],$e=[Se,ot];return i&&i.add(Se,fr,et,Ar,$e),v.modifyFrames(Se,ot)}function Ct(Se,He){if(Se=T.getGraphDiv(Se),!T.isPlotDiv(Se))throw new Error("This element is not a Plotly plot: "+Se);var Ke,qe,Tt=Se._transitionData._frames,mt=[],At=[];if(!He)for(He=[],Ke=0;Ke<Tt.length;Ke++)He.push(Ke);for(He=He.slice(),He.sort(),Ke=He.length-1;Ke>=0;Ke--)qe=He[Ke],mt.push({type:"delete",index:qe}),At.unshift({type:"insert",index:qe,value:Tt[qe]});var Ht=v.modifyFrames,It=v.modifyFrames,Vt=[Se,At],jt=[Se,mt];return i&&i.add(Se,Ht,Vt,It,jt),v.modifyFrames(Se,mt)}function Xe(Se){Se=T.getGraphDiv(Se);var He=Se._fullLayout||{},Ke=Se._fullData||[];return v.cleanPlot([],{},Ke,He),v.purge(Se),a.purge(Se),He._container&&He._container.remove(),delete Se._context,Se}function at(Se){var He=Se._fullLayout,Ke=Se.getBoundingClientRect();if(!T.equalDomRects(Ke,He._lastBBox)){var qe=He._invTransform=T.inverseTransformMatrix(T.getFullTransformMatrix(Se));He._invScaleX=Math.sqrt(qe[0][0]*qe[0][0]+qe[0][1]*qe[0][1]+qe[0][2]*qe[0][2]),He._invScaleY=Math.sqrt(qe[1][0]*qe[1][0]+qe[1][1]*qe[1][1]+qe[1][2]*qe[1][2]),He._lastBBox=Ke}}function Ge(Se){var He=m.select(Se),Ke=Se._fullLayout;if(Ke._calcInverseTransform=at,Ke._calcInverseTransform(Se),Ke._container=He.selectAll(".plot-container").data([0]),Ke._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),Ke._paperdiv=Ke._container.selectAll(".svg-container").data([0]),Ke._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),Ke._glcontainer=Ke._paperdiv.selectAll(".gl-container").data([{}]),Ke._glcontainer.enter().append("div").classed("gl-container",!0),Ke._paperdiv.selectAll(".main-svg").remove(),Ke._paperdiv.select(".modebar-container").remove(),Ke._paper=Ke._paperdiv.insert("svg",":first-child").classed("main-svg",!0),Ke._toppaper=Ke._paperdiv.append("svg").classed("main-svg",!0),Ke._modebardiv=Ke._paperdiv.append("div"),delete Ke._modeBar,Ke._hoverpaper=Ke._paperdiv.append("svg").classed("main-svg",!0),!Ke._uid){var qe={};m.selectAll("defs").each(function(){this.id&&(qe[this.id.split("-")[1]]=1)}),Ke._uid=T.randstr(qe)}Ke._paperdiv.selectAll(".main-svg").attr(d.svgAttrs),Ke._defs=Ke._paper.append("defs").attr("id","defs-"+Ke._uid),Ke._clips=Ke._defs.append("g").classed("clips",!0),Ke._topdefs=Ke._toppaper.append("defs").attr("id","topdefs-"+Ke._uid),Ke._topclips=Ke._topdefs.append("g").classed("clips",!0),Ke._bgLayer=Ke._paper.append("g").classed("bglayer",!0),Ke._draggers=Ke._paper.append("g").classed("draglayer",!0);var Tt=Ke._paper.append("g").classed("layer-below",!0);Ke._imageLowerLayer=Tt.append("g").classed("imagelayer",!0),Ke._shapeLowerLayer=Tt.append("g").classed("shapelayer",!0),Ke._cartesianlayer=Ke._paper.append("g").classed("cartesianlayer",!0),Ke._polarlayer=Ke._paper.append("g").classed("polarlayer",!0),Ke._smithlayer=Ke._paper.append("g").classed("smithlayer",!0),Ke._ternarylayer=Ke._paper.append("g").classed("ternarylayer",!0),Ke._geolayer=Ke._paper.append("g").classed("geolayer",!0),Ke._funnelarealayer=Ke._paper.append("g").classed("funnelarealayer",!0),Ke._pielayer=Ke._paper.append("g").classed("pielayer",!0),Ke._iciclelayer=Ke._paper.append("g").classed("iciclelayer",!0),Ke._treemaplayer=Ke._paper.append("g").classed("treemaplayer",!0),Ke._sunburstlayer=Ke._paper.append("g").classed("sunburstlayer",!0),Ke._indicatorlayer=Ke._toppaper.append("g").classed("indicatorlayer",!0),Ke._glimages=Ke._paper.append("g").classed("glimages",!0);var mt=Ke._toppaper.append("g").classed("layer-above",!0);Ke._imageUpperLayer=mt.append("g").classed("imagelayer",!0),Ke._shapeUpperLayer=mt.append("g").classed("shapelayer",!0),Ke._selectionLayer=Ke._toppaper.append("g").classed("selectionlayer",!0),Ke._infolayer=Ke._toppaper.append("g").classed("infolayer",!0),Ke._menulayer=Ke._toppaper.append("g").classed("menulayer",!0),Ke._zoomlayer=Ke._toppaper.append("g").classed("zoomlayer",!0),Ke._hoverlayer=Ke._hoverpaper.append("g").classed("hoverlayer",!0),Ke._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),Se.emit("plotly_framework")}V.animate=Xt,V.addFrames=Nt,V.deleteFrames=Ct,V.addTraces=Q,V.deleteTraces=K,V.extendTraces=ne,V.moveTraces=U,V.prependTraces=ce,V.newPlot=D,V._doPlot=h,V.purge=Xe,V.react=pt,V.redraw=I,V.relayout=ae,V.restyle=H,V.setPlotConfig=S,V.update=ke,V._guiRelayout=De(ae),V._guiRestyle=De(H),V._guiUpdate=De(ke),V._storeDirectGUIEdit=$},{"../components/color":367,"../components/drawing":389,"../components/selections":455,"../constants/xmlns_namespaces":492,"../lib":515,"../lib/events":504,"../lib/queue":531,"../plots/cartesian/axes":566,"../plots/cartesian/constants":573,"../plots/cartesian/graph_interact":576,"../plots/plots":628,"../registry":647,"./edit_types":548,"./helpers":549,"./manage_arrays":551,"./plot_config":553,"./plot_schema":554,"./subroutines":556,"@plotly/d3":58,"fast-isnumeric":190,"has-hover":228}],553:[function(t,B,V){var m={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},editSelection:{valType:"boolean",dflt:!0},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},c={};function A(T,e){for(var a in T){var i=T[a];i.valType?e[a]=i.dflt:(e[a]||(e[a]={}),A(i,e[a]))}}A(m,c),B.exports={configAttributes:m,dfltConfig:c}},{}],554:[function(t,B,V){var m=t("../registry"),c=t("../lib"),A=t("../plots/attributes"),T=t("../plots/layout_attributes"),e=t("../plots/frame_attributes"),a=t("../plots/animation_attributes"),i=t("./plot_config").configAttributes,n=t("./edit_types"),r=c.extendDeepAll,v=c.isPlainObject,s=c.isArrayOrTypedArray,o=c.nestedProperty,b=c.valObjectMeta,g="_isSubplotObj",d="_isLinkedToArray",f="_arrayAttrRegexps",y="_deprecated",l=[g,d,f,y];V.IS_SUBPLOT_OBJ=g,V.IS_LINKED_TO_ARRAY=d,V.DEPRECATED=y,V.UNDERSCORE_ATTRS=l,V.get=function(){var D={};m.allTypes.forEach(function(N){D[N]=_(N)});var R={};return Object.keys(m.transformsRegistry).forEach(function(N){R[N]=w(N)}),{defs:{valObjects:b,metaKeys:l.concat(["description","role","editType","impliedEdits"]),editType:{traces:n.traces,layout:n.layout},impliedEdits:{}},traces:D,layout:p(),transforms:R,frames:h(),animation:L(a),config:L(i)}},V.crawl=function(D,R,N,z){var G=N||0;z=z||"",Object.keys(D).forEach(function(Y){var ee=D[Y];if(l.indexOf(Y)===-1){var Z=(z?z+".":"")+Y;R(ee,Y,D,G,Z),!V.isValObject(ee)&&v(ee)&&Y!=="impliedEdits"&&V.crawl(ee,R,G+1,Z)}})},V.isValObject=function(D){return D&&D.valType!==void 0},V.findArrayAttributes=function(D){var R=[],N=[],z=[],G,Y;function ee(K,U,H,q){N=N.slice(0,q).concat([U]),z=z.slice(0,q).concat([K&&K._isLinkedToArray]);var re=K&&(K.valType==="data_array"||K.arrayOk===!0)&&!(N[q-1]==="colorbar"&&(U==="ticktext"||U==="tickvals"));!re||Z(G,0,"")}function Z(K,U,H){var q=K[N[U]],re=H+N[U];if(U===N.length-1)s(q)&&R.push(Y+re);else if(z[U]){if(Array.isArray(q))for(var j=0;j<q.length;j++)v(q[j])&&Z(q[j],U+1,re+"["+j+"].")}else v(q)&&Z(q,U+1,re+".")}G=D,Y="",V.crawl(A,ee),D._module&&D._module.attributes&&V.crawl(D._module.attributes,ee);var X=D.transforms;if(X)for(var ne=0;ne<X.length;ne++){var ce=X[ne],Q=ce._module;Q&&(Y="transforms["+ne+"].",G=ce,V.crawl(Q.attributes,ee))}return R},V.getTraceValObject=function(D,R){var N=R[0],z=1,G,Y;if(N==="transforms"){if(R.length===1)return A.transforms;var ee=D.transforms;if(!Array.isArray(ee)||!ee.length)return!1;var Z=R[1];if(!M(Z)||Z>=ee.length)return!1;G=(m.transformsRegistry[ee[Z].type]||{}).attributes,Y=G&&G[R[2]],z=3}else{var X=D._module;if(X||(X=(m.modules[D.type||A.type.dflt]||{})._module),!X)return!1;if(G=X.attributes,Y=G&&G[N],!Y){var ne=X.basePlotModule;ne&&ne.attributes&&(Y=ne.attributes[N])}Y||(Y=A[N])}return u(Y,R,z)},V.getLayoutValObject=function(D,R){var N=x(D,R[0]);return u(N,R,1)};function x(D,R){var N,z,G,Y,ee=D._basePlotModules;if(ee){var Z;for(N=0;N<ee.length;N++){if(G=ee[N],G.attrRegex&&G.attrRegex.test(R)){if(G.layoutAttrOverrides)return G.layoutAttrOverrides;!Z&&G.layoutAttributes&&(Z=G.layoutAttributes)}var X=G.baseLayoutAttrOverrides;if(X&&R in X)return X[R]}if(Z)return Z}var ne=D._modules;if(ne){for(N=0;N<ne.length;N++)if(Y=ne[N].layoutAttributes,Y&&R in Y)return Y[R]}for(z in m.componentsRegistry){if(G=m.componentsRegistry[z],G.name==="colorscale"&&R.indexOf("coloraxis")===0)return G.layoutAttributes[R];if(!G.schema&&R===G.name)return G.layoutAttributes}return R in T?T[R]:!1}function u(D,R,N){if(!D)return!1;if(D._isLinkedToArray){if(M(R[N]))N++;else if(N<R.length)return!1}for(;N<R.length;N++){var z=D[R[N]];if(v(z))D=z;else break;if(N===R.length-1)break;if(D._isLinkedToArray){if(N++,!M(R[N]))return!1}else if(D.valType==="info_array"){N++;var G=R[N];if(!M(G))return!1;var Y=D.items;if(Array.isArray(Y)){if(G>=Y.length)return!1;if(D.dimensions===2){if(N++,R.length===N)return D;var ee=R[N];if(!M(ee))return!1;D=Y[G][ee]}else D=Y[G]}else D=Y}}return D}function M(D){return D===Math.round(D)&&D>=0}function _(D){var R,N;R=m.modules[D]._module,N=R.basePlotModule;var z={};z.type=null;var G=r({},A),Y=r({},R.attributes);V.crawl(Y,function(X,ne,ce,Q,K){o(G,K).set(void 0),X===void 0&&o(Y,K).set(void 0)}),r(z,G),m.traceIs(D,"noOpacity")&&delete z.opacity,m.traceIs(D,"showLegend")||(delete z.showlegend,delete z.legendgroup),m.traceIs(D,"noHover")&&(delete z.hoverinfo,delete z.hoverlabel),R.selectPoints||delete z.selectedpoints,r(z,Y),N.attributes&&r(z,N.attributes),z.type=D;var ee={meta:R.meta||{},categories:R.categories||{},animatable:Boolean(R.animatable),type:D,attributes:L(z)};if(R.layoutAttributes){var Z={};r(Z,R.layoutAttributes),ee.layoutAttributes=L(Z)}return R.animatable||V.crawl(ee,function(X){V.isValObject(X)&&"anim"in X&&delete X.anim}),ee}function p(){var D={},R,N;r(D,T);for(R in m.subplotsRegistry)if(N=m.subplotsRegistry[R],!!N.layoutAttributes)if(Array.isArray(N.attr))for(var z=0;z<N.attr.length;z++)F(D,N,N.attr[z]);else{var G=N.attr==="subplot"?N.name:N.attr;F(D,N,G)}for(R in m.componentsRegistry){N=m.componentsRegistry[R];var Y=N.schema;if(Y&&(Y.subplots||Y.layout)){var ee=Y.subplots;if(ee&&ee.xaxis&&!ee.yaxis)for(var Z in ee.xaxis)delete D.yaxis[Z]}else N.name==="colorscale"?r(D,N.layoutAttributes):N.layoutAttributes&&I(D,N.layoutAttributes,N.name)}return{layoutAttributes:L(D)}}function w(D){var R=m.transformsRegistry[D],N=r({},R.attributes);return Object.keys(m.componentsRegistry).forEach(function(z){var G=m.componentsRegistry[z];G.schema&&G.schema.transforms&&G.schema.transforms[D]&&Object.keys(G.schema.transforms[D]).forEach(function(Y){I(N,G.schema.transforms[D][Y],Y)})}),{attributes:L(N)}}function h(){var D={frames:r({},e)};return L(D),D.frames}function L(D){return S(D),E(D),P(D),D}function S(D){function R(z){return{valType:"string",editType:"none"}}function N(z,G,Y){V.isValObject(z)?(z.arrayOk===!0||z.valType==="data_array")&&(Y[G+"src"]=R()):v(z)&&(z.role="object")}V.crawl(D,N)}function E(D){function R(N,z,G){if(!!N){var Y=N[d];!Y||(delete N[d],G[z]={items:{}},G[z].items[Y]=N,G[z].role="object")}}V.crawl(D,R)}function P(D){function R(N){for(var z in N)if(v(N[z]))R(N[z]);else if(Array.isArray(N[z]))for(var G=0;G<N[z].length;G++)R(N[z][G]);else N[z]instanceof RegExp&&(N[z]=N[z].toString())}R(D)}function F(D,R,N){var z=o(D,N),G=r({},R.layoutAttributes);G[g]=!0,z.set(G)}function I(D,R,N){var z=o(D,N);z.set(r(z.get()||{},R))}},{"../lib":515,"../plots/animation_attributes":560,"../plots/attributes":562,"../plots/frame_attributes":595,"../plots/layout_attributes":619,"../registry":647,"./edit_types":548,"./plot_config":553}],555:[function(t,B,V){var m=t("../lib"),c=t("../plots/attributes"),A="templateitemname",T={name:{valType:"string",editType:"none"}};T[A]={valType:"string",editType:"calc"},V.templatedArray=function(i,n){return n._isLinkedToArray=i,n.name=T.name,n[A]=T[A],n},V.traceTemplater=function(i){var n={},r,v;for(r in i)v=i[r],Array.isArray(v)&&v.length&&(n[r]=0);function s(o){r=m.coerce(o,{},c,"type");var b={type:r,_template:null};if(r in n){v=i[r];var g=n[r]%v.length;n[r]++,b._template=v[g]}return b}return{newTrace:s}},V.newContainer=function(i,n,r){var v=i._template,s=v&&(v[n]||r&&v[r]);m.isPlainObject(s)||(s=null);var o=i[n]={_template:s};return o},V.arrayTemplater=function(i,n,r){var v=i._template,s=v&&v[a(n)],o=v&&v[n];(!Array.isArray(o)||!o.length)&&(o=[]);var b={};function g(f){var y={name:f.name,_input:f},l=y[A]=f[A];if(!e(l))return y._template=s,y;for(var x=0;x<o.length;x++){var u=o[x];if(u.name===l)return b[l]=1,y._template=u,y}return y[r]=f[r]||!1,y._template=!1,y}function d(){for(var f=[],y=0;y<o.length;y++){var l=o[y],x=l.name;if(e(x)&&!b[x]){var u={_template:l,name:x,_input:{_templateitemname:x}};u[A]=l[A],f.push(u),b[x]=1}}return f}return{newItem:g,defaultItems:d}};function e(i){return i&&typeof i=="string"}function a(i){var n=i.length-1;return i.charAt(n)!=="s"&&m.warn("bad argument to arrayDefaultKey: "+i),i.substr(0,i.length-1)+"defaults"}V.arrayDefaultKey=a,V.arrayEditor=function(i,n,r){var v=(m.nestedProperty(i,n).get()||[]).length,s=r._index,o=s>=v&&(r._input||{})._templateitemname;o&&(s=v);var b=n+"["+s+"]",g;function d(){g={},o&&(g[b]={},g[b][A]=o)}d();function f(u,M){g[u]=M}function y(u,M){o?m.nestedProperty(g[b],u).set(M):g[b+"."+u]=M}function l(){var u=g;return d(),u}function x(u,M){u&&y(u,M);var _=l();for(var p in _)m.nestedProperty(i,p).set(_[p])}return{modifyBase:f,modifyItem:y,getUpdateObj:l,applyUpdate:x}}},{"../lib":515,"../plots/attributes":562}],556:[function(t,B,V){var m=t("@plotly/d3"),c=t("../registry"),A=t("../plots/plots"),T=t("../lib"),e=t("../lib/clear_gl_canvases"),a=t("../components/color"),i=t("../components/drawing"),n=t("../components/titles"),r=t("../components/modebar"),v=t("../plots/cartesian/axes"),s=t("../constants/alignment"),o=t("../plots/cartesian/constraints"),b=o.enforce,g=o.clean,d=t("../plots/cartesian/autorange").doAutoRange,f="start",y="middle",l="end";V.layoutStyles=function(E){return T.syncOrAsync([A.doAutoMargin,u],E)};function x(E,P,F){for(var I=0;I<F.length;I++){var D=F[I][0],R=F[I][1];if(!(D[0]>=E[1]||D[1]<=E[0])&&R[0]<P[1]&&R[1]>P[0])return!0}return!1}function u(E){var P=E._fullLayout,F=P._size,I=F.p,D=v.list(E,"",!0),R,N,z,G,Y,ee;if(P._paperdiv.style({width:E._context.responsive&&P.autosize&&!E._context._hasZeroWidth&&!E.layout.width?"100%":P.width+"px",height:E._context.responsive&&P.autosize&&!E._context._hasZeroHeight&&!E.layout.height?"100%":P.height+"px"}).selectAll(".main-svg").call(i.setSize,P.width,P.height),E._context.setBackground(E,P.paper_bgcolor),V.drawMainTitle(E),r.manage(E),!P._has("cartesian"))return A.previousPromises(E);function Z(Et,Xt,Nt){var Ct=Et._lw/2;if(Et._id.charAt(0)==="x"){if(Xt){if(Nt==="top")return Xt._offset-I-Ct}else return F.t+F.h*(1-(Et.position||0))+Ct%1;return Xt._offset+Xt._length+I+Ct}if(Xt){if(Nt==="right")return Xt._offset+Xt._length+I+Ct}else return F.l+F.w*(Et.position||0)+Ct%1;return Xt._offset-I-Ct}for(R=0;R<D.length;R++){G=D[R];var X=G._anchorAxis;G._linepositions={},G._lw=i.crispRound(E,G.linewidth,1),G._mainLinePosition=Z(G,X,G.side),G._mainMirrorPosition=G.mirror&&X?Z(G,X,s.OPPOSITE_SIDE[G.side]):null}var ne=[],ce=[],Q=[],K=a.opacity(P.paper_bgcolor)===1&&a.opacity(P.plot_bgcolor)===1&&P.paper_bgcolor===P.plot_bgcolor;for(N in P._plots)if(z=P._plots[N],z.mainplot)z.bg&&z.bg.remove(),z.bg=void 0;else{var U=z.xaxis.domain,H=z.yaxis.domain,q=z.plotgroup;if(x(U,H,Q)){var re=q.node(),j=z.bg=T.ensureSingle(q,"rect","bg");re.insertBefore(j.node(),re.childNodes[0]),ce.push(N)}else q.select("rect.bg").remove(),Q.push([U,H]),K||(ne.push(N),ce.push(N))}var $=P._bgLayer.selectAll(".bg").data(ne);for($.enter().append("rect").classed("bg",!0),$.exit().remove(),$.each(function(Et){P._plots[Et].bg=m.select(this)}),R=0;R<ce.length;R++)z=P._plots[ce[R]],Y=z.xaxis,ee=z.yaxis,z.bg&&Y._offset!==void 0&&ee._offset!==void 0&&z.bg.call(i.setRect,Y._offset-I,ee._offset-I,Y._length+2*I,ee._length+2*I).call(a.fill,P.plot_bgcolor).style("stroke-width",0);if(!P._hasOnlyLargeSploms)for(N in P._plots){z=P._plots[N],Y=z.xaxis,ee=z.yaxis;var ie=z.clipId="clip"+P._uid+N+"plot",oe=T.ensureSingleById(P._clips,"clipPath",ie,function(Et){Et.classed("plotclip",!0).append("rect")});z.clipRect=oe.select("rect").attr({width:Y._length,height:ee._length}),i.setTranslate(z.plot,Y._offset,ee._offset);var ae,se;z._hasClipOnAxisFalse?(ae=null,se=ie):(ae=ie,se=null),i.setClipUrl(z.plot,ae,E),z.layerClipId=se}var _e,ue,ye,xe,me,be,ke,De,Ve,Ae,Le,je,Ye;function ze(Et){return"M"+_e+","+Et+"H"+ue}function Ie(Et){return"M"+Y._offset+","+Et+"h"+Y._length}function We(Et){return"M"+Et+","+De+"V"+ke}function pt(Et){return"M"+Et+","+ee._offset+"v"+ee._length}function Ft(Et,Xt,Nt){if(!Et.showline||N!==Et._mainSubplot)return"";if(!Et._anchorAxis)return Nt(Et._mainLinePosition);var Ct=Xt(Et._mainLinePosition);return Et.mirror&&(Ct+=Xt(Et._mainMirrorPosition)),Ct}for(N in P._plots){z=P._plots[N],Y=z.xaxis,ee=z.yaxis;var Qt="M0,0";M(Y,N)&&(me=p(Y,"left",ee,D),_e=Y._offset-(me?I+me:0),be=p(Y,"right",ee,D),ue=Y._offset+Y._length+(be?I+be:0),ye=Z(Y,ee,"bottom"),xe=Z(Y,ee,"top"),Ye=!Y._anchorAxis||N!==Y._mainSubplot,Ye&&(Y.mirror==="allticks"||Y.mirror==="all")&&(Y._linepositions[N]=[ye,xe]),Qt=Ft(Y,ze,Ie),Ye&&Y.showline&&(Y.mirror==="all"||Y.mirror==="allticks")&&(Qt+=ze(ye)+ze(xe)),z.xlines.style("stroke-width",Y._lw+"px").call(a.stroke,Y.showline?Y.linecolor:"rgba(0,0,0,0)")),z.xlines.attr("d",Qt);var zt="M0,0";M(ee,N)&&(Le=p(ee,"bottom",Y,D),ke=ee._offset+ee._length+(Le?I:0),je=p(ee,"top",Y,D),De=ee._offset-(je?I:0),Ve=Z(ee,Y,"left"),Ae=Z(ee,Y,"right"),Ye=!ee._anchorAxis||N!==ee._mainSubplot,Ye&&(ee.mirror==="allticks"||ee.mirror==="all")&&(ee._linepositions[N]=[Ve,Ae]),zt=Ft(ee,We,pt),Ye&&ee.showline&&(ee.mirror==="all"||ee.mirror==="allticks")&&(zt+=We(Ve)+We(Ae)),z.ylines.style("stroke-width",ee._lw+"px").call(a.stroke,ee.showline?ee.linecolor:"rgba(0,0,0,0)")),z.ylines.attr("d",zt)}return v.makeClipPaths(E),A.previousPromises(E)}function M(E,P){return(E.ticks||E.showline)&&(P===E._mainSubplot||E.mirror==="all"||E.mirror==="allticks")}function _(E,P,F){if(!F.showline||!F._lw)return!1;if(F.mirror==="all"||F.mirror==="allticks")return!0;var I=F._anchorAxis;if(!I)return!1;var D=s.FROM_BL[P];return F.side===P?I.domain[D]===E.domain[D]:F.mirror&&I.domain[1-D]===E.domain[1-D]}function p(E,P,F,I){if(_(E,P,F))return F._lw;for(var D=0;D<I.length;D++){var R=I[D];if(R._mainAxis===F._mainAxis&&_(E,P,R))return R._lw}return 0}V.drawMainTitle=function(E){var P=E._fullLayout,F=L(P),I=S(P);n.draw(E,"gtitle",{propContainer:P,propName:"title.text",placeholder:P._dfltTitle.plot,attributes:{x:w(P,F),y:h(P,I),"text-anchor":F,dy:I}})};function w(E,P){var F=E.title,I=E._size,D=0;switch(P===f?D=F.pad.l:P===l&&(D=-F.pad.r),F.xref){case"paper":return I.l+I.w*F.x+D;case"container":default:return E.width*F.x+D}}function h(E,P){var F=E.title,I=E._size,D=0;if(P==="0em"||!P?D=-F.pad.b:P===s.CAP_SHIFT+"em"&&(D=F.pad.t),F.y==="auto")return I.t/2;switch(F.yref){case"paper":return I.t+I.h-I.h*F.y+D;case"container":default:return E.height-E.height*F.y+D}}function L(E){var P=E.title,F=y;return T.isRightAnchor(P)?F=l:T.isLeftAnchor(P)&&(F=f),F}function S(E){var P=E.title,F="0em";return T.isTopAnchor(P)?F=s.CAP_SHIFT+"em":T.isMiddleAnchor(P)&&(F=s.MID_SHIFT+"em"),F}V.doTraceStyle=function(E){var P=E.calcdata,F=[],I;for(I=0;I<P.length;I++){var D=P[I],R=D[0]||{},N=R.trace||{},z=N._module||{},G=z.arraysToCalcdata;G&&G(D,N);var Y=z.editStyle;Y&&F.push({fn:Y,cd0:R})}if(F.length){for(I=0;I<F.length;I++){var ee=F[I];ee.fn(E,ee.cd0)}e(E),V.redrawReglTraces(E)}return A.style(E),c.getComponentMethod("legend","draw")(E),A.previousPromises(E)},V.doColorBars=function(E){return c.getComponentMethod("colorbar","draw")(E),A.previousPromises(E)},V.layoutReplot=function(E){var P=E.layout;return E.layout=void 0,c.call("_doPlot",E,"",P)},V.doLegend=function(E){return c.getComponentMethod("legend","draw")(E),A.previousPromises(E)},V.doTicksRelayout=function(E){return v.draw(E,"redraw"),E._fullLayout._hasOnlyLargeSploms&&(c.subplotsRegistry.splom.updateGrid(E),e(E),V.redrawReglTraces(E)),V.drawMainTitle(E),A.previousPromises(E)},V.doModeBar=function(E){var P=E._fullLayout;r.manage(E);for(var F=0;F<P._basePlotModules.length;F++){var I=P._basePlotModules[F].updateFx;I&&I(E)}return A.previousPromises(E)},V.doCamera=function(E){for(var P=E._fullLayout,F=P._subplots.gl3d,I=0;I<F.length;I++){var D=P[F[I]],R=D._scene;R.setViewport(D)}},V.drawData=function(E){var P=E._fullLayout;e(E);for(var F=P._basePlotModules,I=0;I<F.length;I++)F[I].plot(E);return V.redrawReglTraces(E),A.style(E),c.getComponentMethod("selections","draw")(E),c.getComponentMethod("shapes","draw")(E),c.getComponentMethod("annotations","draw")(E),c.getComponentMethod("images","draw")(E),P._replotting=!1,A.previousPromises(E)},V.redrawReglTraces=function(E){var P=E._fullLayout;if(P._has("regl")){var F=E._fullData,I=[],D=[],R,N;for(P._hasOnlyLargeSploms&&P._splomGrid.draw(),R=0;R<F.length;R++){var z=F[R];z.visible===!0&&z._length!==0&&(z.type==="splom"?P._splomScenes[z.uid].draw():z.type==="scattergl"?T.pushUnique(I,z.xaxis+z.yaxis):z.type==="scatterpolargl"&&T.pushUnique(D,z.subplot))}for(R=0;R<I.length;R++)N=P._plots[I[R]],N._scene&&N._scene.draw();for(R=0;R<D.length;R++)N=P[D[R]]._subplot,N._scene&&N._scene.draw()}},V.doAutoRangeAndConstraints=function(E){for(var P=v.list(E,"",!0),F,I={},D=0;D<P.length;D++)if(F=P[D],!I[F._id]){I[F._id]=1,g(E,F),d(E,F);var R=F._matchGroup;if(R)for(var N in R){var z=v.getFromId(E,N);d(E,z,F.range),I[N]=1}}b(E)},V.finalDraw=function(E){c.getComponentMethod("rangeslider","draw")(E),c.getComponentMethod("rangeselector","draw")(E)},V.drawMarginPushers=function(E){c.getComponentMethod("legend","draw")(E),c.getComponentMethod("rangeselector","draw")(E),c.getComponentMethod("sliders","draw")(E),c.getComponentMethod("updatemenus","draw")(E),c.getComponentMethod("colorbar","draw")(E)}},{"../components/color":367,"../components/drawing":389,"../components/modebar":430,"../components/titles":476,"../constants/alignment":483,"../lib":515,"../lib/clear_gl_canvases":499,"../plots/cartesian/autorange":565,"../plots/cartesian/axes":566,"../plots/cartesian/constraints":574,"../plots/plots":628,"../registry":647,"@plotly/d3":58}],557:[function(t,B,V){var m=t("../lib"),c=m.isPlainObject,A=t("./plot_schema"),T=t("../plots/plots"),e=t("../plots/attributes"),a=t("./plot_template"),i=t("./plot_config").dfltConfig;V.makeTemplate=function(f){f=m.isPlainObject(f)?f:m.getGraphDiv(f),f=m.extendDeep({_context:i},{data:f.data,layout:f.layout}),T.supplyDefaults(f);var y=f.data||[],l=f.layout||{};l._basePlotModules=f._fullLayout._basePlotModules,l._modules=f._fullLayout._modules;var x={data:{},layout:{}};y.forEach(function(P){var F={};v(P,F,o.bind(null,P));var I=m.coerce(P,{},e,"type"),D=x.data[I];D||(D=x.data[I]=[]),D.push(F)}),v(l,x.layout,s.bind(null,l)),delete x.layout.template;var u=l.template;if(c(u)){var M=u.layout,_,p,w,h,L,S;c(M)&&n(M,x.layout);var E=u.data;if(c(E)){for(p in x.data)if(w=E[p],Array.isArray(w)){for(L=x.data[p],S=L.length,h=w.length,_=0;_<S;_++)n(w[_%h],L[_]);for(_=S;_<h;_++)L.push(m.extendDeep({},w[_]))}for(p in E)p in x.data||(x.data[p]=m.extendDeep([],E[p]))}}return x};function n(f,y){f=m.extendDeep({},f);var l=Object.keys(f).sort(),x,u;function M(L,S,E){if(c(S)&&c(L))n(L,S);else if(Array.isArray(S)&&Array.isArray(L)){var P=a.arrayTemplater({_template:f},E);for(u=0;u<S.length;u++){var F=S[u],I=P.newItem(F)._template;I&&n(I,F)}var D=P.defaultItems();for(u=0;u<D.length;u++)S.push(D[u]._template);for(u=0;u<S.length;u++)delete S[u].templateitemname}}for(x=0;x<l.length;x++){var _=l[x],p=f[_];if(_ in y?M(p,y[_],_):y[_]=p,r(_)===_)for(var w in y){var h=r(w);w!==h&&h===_&&!(w in f)&&M(p,y[w],_)}}}function r(f){return f.replace(/[0-9]+$/,"")}function v(f,y,l,x,u){var M=u&&l(u);for(var _ in f){var p=f[_],w=b(f,_,x),h=b(f,_,u),L=l(h);if(!L){var S=r(_);S!==_&&(h=b(f,S,u),L=l(h))}if(!(M&&M===L)&&!(!L||L._noTemplating||L.valType==="data_array"||L.arrayOk&&Array.isArray(p)))if(!L.valType&&c(p))v(p,y,l,w,h);else if(L._isLinkedToArray&&Array.isArray(p))for(var E=!1,P=0,F={},I=0;I<p.length;I++){var D=p[I];if(c(D)){var R=D.name;if(R)F[R]||(v(D,y,l,b(p,P,w),b(p,P,h)),P++,F[R]=1);else if(!E){var N=a.arrayDefaultKey(_),z=b(f,N,x),G=b(p,P,w);v(D,y,l,G,b(p,P,h));var Y=m.nestedProperty(y,G),ee=m.nestedProperty(y,z);ee.set(Y.get()),Y.set(null),E=!0}}}else{var Z=m.nestedProperty(y,w);Z.set(p)}}}function s(f,y){return A.getLayoutValObject(f,m.nestedProperty({},y).parts)}function o(f,y){return A.getTraceValObject(f,m.nestedProperty({},y).parts)}function b(f,y,l){var x;return l?Array.isArray(f)?x=l+"["+y+"]":x=l+"."+y:x=y,x}V.validateTemplate=function(f,y){var l=m.extendDeep({},{_context:i,data:f.data,layout:f.layout}),x=l.layout||{};c(y)||(y=x.template||{});var u=y.layout,M=y.data,_=[];l.layout=x,l.layout.template=y,T.supplyDefaults(l);var p=l._fullLayout,w=l._fullData,h={};function L(z,G){for(var Y in z)if(Y.charAt(0)!=="_"&&c(z[Y])){var ee=r(Y),Z=[],X;for(X=0;X<G.length;X++)Z.push(b(z,Y,G[X])),ee!==Y&&Z.push(b(z,ee,G[X]));for(X=0;X<Z.length;X++)h[Z[X]]=1;L(z[Y],Z)}}function S(z,G){for(var Y in z)if(Y.indexOf("defaults")===-1&&c(z[Y])){var ee=b(z,Y,G);h[ee]?S(z[Y],ee):_.push({code:"unused",path:ee})}}if(c(u)?(L(p,["layout"]),S(u,"layout")):_.push({code:"layout"}),!c(M))_.push({code:"data"});else{for(var E={},P,F=0;F<w.length;F++){var I=w[F];P=I.type,E[P]=(E[P]||0)+1,I._fullInput._template||_.push({code:"missing",index:I._fullInput.index,traceType:P})}for(P in M){var D=M[P].length,R=E[P]||0;D>R?_.push({code:"unused",traceType:P,templateCount:D,dataCount:R}):R>D&&_.push({code:"reused",traceType:P,templateCount:D,dataCount:R})}}function N(z,G){for(var Y in z)if(Y.charAt(0)!=="_"){var ee=z[Y],Z=b(z,Y,G);c(ee)?(Array.isArray(z)&&ee._template===!1&&ee.templateitemname&&_.push({code:"missing",path:Z,templateitemname:ee.templateitemname}),N(ee,Z)):Array.isArray(ee)&&g(ee)&&N(ee,Z)}}if(N({data:w,layout:p},""),_.length)return _.map(d)};function g(f){for(var y=0;y<f.length;y++)if(c(f[y]))return!0}function d(f){var y;switch(f.code){case"data":y="The template has no key data.";break;case"layout":y="The template has no key layout.";break;case"missing":f.path?y="There are no templates for item "+f.path+" with name "+f.templateitemname:y="There are no templates for trace "+f.index+", of type "+f.traceType+".";break;case"unused":f.path?y="The template item at "+f.path+" was not used in constructing the plot.":f.dataCount?y="Some of the templates of type "+f.traceType+" were not used. The template has "+f.templateCount+" traces, the data only has "+f.dataCount+" of this type.":y="The template has "+f.templateCount+" traces of type "+f.traceType+" but there are none in the data.";break;case"reused":y="Some of the templates of type "+f.traceType+" were used more than once. The template has "+f.templateCount+" traces, the data has "+f.dataCount+" of this type.";break}return f.msg=y,f}},{"../lib":515,"../plots/attributes":562,"../plots/plots":628,"./plot_config":553,"./plot_schema":554,"./plot_template":555}],558:[function(t,B,V){var m=t("fast-isnumeric"),c=t("./plot_api"),A=t("../plots/plots"),T=t("../lib"),e=t("../snapshot/helpers"),a=t("../snapshot/tosvg"),i=t("../snapshot/svgtoimg"),n=t("../version").version,r={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};function v(s,o){o=o||{};var b,g,d,f;T.isPlainObject(s)?(b=s.data||[],g=s.layout||{},d=s.config||{},f={}):(s=T.getGraphDiv(s),b=T.extendDeep([],s.data),g=T.extendDeep({},s.layout),d=s._context,f=s._fullLayout||{});function y(R){return!(R in o)||T.validate(o[R],r[R])}if(!y("width")&&o.width!==null||!y("height")&&o.height!==null)throw new Error("Height and width should be pixel values.");if(!y("format"))throw new Error("Export format is not "+T.join2(r.format.values,", "," or ")+".");var l={};function x(R,N){return T.coerce(o,l,r,R,N)}var u=x("format"),M=x("width"),_=x("height"),p=x("scale"),w=x("setBackground"),h=x("imageDataOnly"),L=document.createElement("div");L.style.position="absolute",L.style.left="-5000px",document.body.appendChild(L);var S=T.extendFlat({},g);M?S.width=M:o.width===null&&m(f.width)&&(S.width=f.width),_?S.height=_:o.height===null&&m(f.height)&&(S.height=f.height);var E=T.extendFlat({},d,{_exportedPlot:!0,staticPlot:!0,setBackground:w}),P=e.getRedrawFunc(L);function F(){return new Promise(function(R){setTimeout(R,e.getDelay(L._fullLayout))})}function I(){return new Promise(function(R,N){var z=a(L,u,p),G=L._fullLayout.width,Y=L._fullLayout.height;function ee(){c.purge(L),document.body.removeChild(L)}if(u==="full-json"){var Z=A.graphJson(L,!1,"keepdata","object",!0,!0);return Z.version=n,Z=JSON.stringify(Z),ee(),R(h?Z:e.encodeJSON(Z))}if(ee(),u==="svg")return R(h?z:e.encodeSVG(z));var X=document.createElement("canvas");X.id=T.randstr(),i({format:u,width:G,height:Y,scale:p,canvas:X,svg:z,promise:!0}).then(R).catch(N)})}function D(R){return h?R.replace(e.IMAGE_URL_PREFIX,""):R}return new Promise(function(R,N){c.newPlot(L,b,S,E).then(P).then(F).then(I).then(function(z){R(D(z))}).catch(function(z){N(z)})})}B.exports=v},{"../lib":515,"../plots/plots":628,"../snapshot/helpers":651,"../snapshot/svgtoimg":653,"../snapshot/tosvg":655,"../version":1132,"./plot_api":552,"fast-isnumeric":190}],559:[function(t,B,V){var m=t("../lib"),c=t("../plots/plots"),A=t("./plot_schema"),T=t("./plot_config").dfltConfig,e=m.isPlainObject,a=Array.isArray,i=m.isArrayOrTypedArray;B.exports=function(x,u){x===void 0&&(x=[]),u===void 0&&(u={});var M=A.get(),_=[],p={_context:m.extendFlat({},T)},w,h;a(x)?(p.data=m.extendDeep([],x),w=x):(p.data=[],w=[],_.push(o("array","data"))),e(u)?(p.layout=m.extendDeep({},u),h=u):(p.layout={},h={},arguments.length>1&&_.push(o("object","layout"))),c.supplyDefaults(p);for(var L=p._fullData,S=w.length,E=0;E<S;E++){var P=w[E],F=["data",E];if(!e(P)){_.push(o("object",F));continue}var I=L[E],D=I.type,R=M.traces[D].attributes;R.type={valType:"enumerated",values:[D]},I.visible===!1&&P.visible!==!1&&_.push(o("invisible",F)),n(P,I,R,_,F);var N=P.transforms,z=I.transforms;if(N){a(N)||_.push(o("array",F,["transforms"])),F.push("transforms");for(var G=0;G<N.length;G++){var Y=["transforms",G],ee=N[G].type;if(!e(N[G])){_.push(o("object",F,Y));continue}var Z=M.transforms[ee]?M.transforms[ee].attributes:{};Z.type={valType:"enumerated",values:Object.keys(M.transforms)},n(N[G],z[G],Z,_,F,Y)}}}var X=p._fullLayout,ne=r(M,L);return n(h,X,ne,_,"layout"),_.length===0?void 0:_};function n(l,x,u,M,_,p){p=p||[];for(var w=Object.keys(l),h=0;h<w.length;h++){var L=w[h];if(L!=="transforms"){var S=p.slice();S.push(L);var E=l[L],P=x[L],F=g(u,L),I=(F||{}).valType,D=I==="info_array",R=I==="colorscale",N=(F||{}).items;if(!b(u,L))M.push(o("schema",_,S));else if(e(E)&&e(P)&&I!=="any")n(E,P,F,M,_,S);else if(D&&a(E)){E.length>P.length&&M.push(o("unused",_,S.concat(P.length)));var z=P.length,G=Array.isArray(N);G&&(z=Math.min(z,N.length));var Y,ee,Z,X,ne;if(F.dimensions===2)for(ee=0;ee<z;ee++)if(a(E[ee])){E[ee].length>P[ee].length&&M.push(o("unused",_,S.concat(ee,P[ee].length)));var ce=P[ee].length;for(Y=0;Y<(G?Math.min(ce,N[ee].length):ce);Y++)Z=G?N[ee][Y]:N,X=E[ee][Y],ne=P[ee][Y],m.validate(X,Z)?ne!==X&&ne!==+X&&M.push(o("dynamic",_,S.concat(ee,Y),X,ne)):M.push(o("value",_,S.concat(ee,Y),X))}else M.push(o("array",_,S.concat(ee),E[ee]));else for(ee=0;ee<z;ee++)Z=G?N[ee]:N,X=E[ee],ne=P[ee],m.validate(X,Z)?ne!==X&&ne!==+X&&M.push(o("dynamic",_,S.concat(ee),X,ne)):M.push(o("value",_,S.concat(ee),X))}else if(F.items&&!D&&a(E)){var Q=N[Object.keys(N)[0]],K=[],U,H;for(U=0;U<P.length;U++){var q=P[U]._index||U;if(H=S.slice(),H.push(q),e(E[q])&&e(P[U])){K.push(q);var re=E[q],j=P[U];e(re)&&re.visible!==!1&&j.visible===!1?M.push(o("invisible",_,H)):n(re,j,Q,M,_,H)}}for(U=0;U<E.length;U++)H=S.slice(),H.push(U),e(E[U])?K.indexOf(U)===-1&&M.push(o("unused",_,H)):M.push(o("object",_,H,E[U]))}else!e(E)&&e(P)?M.push(o("object",_,S,E)):!i(E)&&i(P)&&!D&&!R?M.push(o("array",_,S,E)):L in x?m.validate(E,F)?F.valType==="enumerated"&&(F.coerceNumber&&E!==+P||E!==P)&&M.push(o("dynamic",_,S,E,P)):M.push(o("value",_,S,E)):M.push(o("unused",_,S,E))}}return M}function r(l,x){for(var u=l.layout.layoutAttributes,M=0;M<x.length;M++){var _=x[M],p=l.traces[_.type],w=p.layoutAttributes;w&&(_.subplot?m.extendFlat(u[p.attributes.subplot.dflt],w):m.extendFlat(u,w))}return u}var v={object:function(l,x){var u;return l==="layout"&&x===""?u="The layout argument":l[0]==="data"&&x===""?u="Trace "+l[1]+" in the data argument":u=s(l)+"key "+x,u+" must be linked to an object container"},array:function(l,x){var u;return l==="data"?u="The data argument":u=s(l)+"key "+x,u+" must be linked to an array container"},schema:function(l,x){return s(l)+"key "+x+" is not part of the schema"},unused:function(l,x,u){var M=e(u)?"container":"key";return s(l)+M+" "+x+" did not get coerced"},dynamic:function(l,x,u,M){return[s(l)+"key",x,"(set to '"+u+"')","got reset to","'"+M+"'","during defaults."].join(" ")},invisible:function(l,x){return(x?s(l)+"item "+x:"Trace "+l[1])+" got defaulted to be not visible"},value:function(l,x,u){return[s(l)+"key "+x,"is set to an invalid value ("+u+")"].join(" ")}};function s(l){return a(l)?"In data trace "+l[1]+", ":"In "+l+", "}function o(l,x,u,M,_){u=u||"";var p,w;a(x)?(p=x[0],w=x[1]):(p=x,w=null);var h=y(u),L=v[l](x,h,M,_);return m.log(L),{code:l,container:p,trace:w,path:u,astr:h,msg:L}}function b(l,x){var u=f(x),M=u.keyMinusId,_=u.id;return M in l&&l[M]._isSubplotObj&&_?!0:x in l}function g(l,x){if(x in l)return l[x];var u=f(x);return l[u.keyMinusId]}var d=m.counterRegex("([a-z]+)");function f(l){var x=l.match(d);return{keyMinusId:x&&x[1],id:x&&x[2]}}function y(l){if(!a(l))return String(l);for(var x="",u=0;u<l.length;u++){var M=l[u];typeof M=="number"?x=x.substr(0,x.length-1)+"["+M+"]":x+=M,u<l.length-1&&(x+=".")}return x}},{"../lib":515,"../plots/plots":628,"./plot_config":553,"./plot_schema":554}],560:[function(t,B,V){B.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},{}],561:[function(t,B,V){var m=t("../lib"),c=t("../plot_api/plot_template");B.exports=function(T,e,a){var i=a.name,n=a.inclusionAttr||"visible",r=e[i],v=m.isArrayOrTypedArray(T[i])?T[i]:[],s=e[i]=[],o=c.arrayTemplater(e,i,n),b,g;for(b=0;b<v.length;b++){var d=v[b];m.isPlainObject(d)?g=o.newItem(d):(g=o.newItem({}),g[n]=!1),g._index=b,g[n]!==!1&&a.handleItemDefaults(d,g,e,a),s.push(g)}var f=o.defaultItems();for(b=0;b<f.length;b++)g=f[b],g._index=s.length,a.handleItemDefaults({},g,e,a,{}),s.push(g);if(m.isArrayOrTypedArray(r)){var y=Math.min(r.length,s.length);for(b=0;b<y;b++)m.relinkPrivateKeys(s[b],r[b])}return s}},{"../lib":515,"../plot_api/plot_template":555}],562:[function(t,B,V){var m=t("./font_attributes"),c=t("../components/fx/attributes");B.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:m({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},legendwidth:{valType:"number",min:0,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:c.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},{"../components/fx/attributes":398,"./font_attributes":594}],563:[function(t,B,V){var m=t("fast-isnumeric"),c=t("../../lib"),A=c.dateTime2ms,T=c.incrementMonth,e=t("../../constants/numerical"),a=e.ONEAVGMONTH;B.exports=function(n,r,v,s){if(r.type!=="date")return{vals:s};var o=n[v+"periodalignment"];if(!o)return{vals:s};var b=n[v+"period"],g;if(m(b)){if(b=+b,b<=0)return{vals:s}}else if(typeof b=="string"&&b.charAt(0)==="M"){var d=+b.substring(1);if(d>0&&Math.round(d)===d)g=d;else return{vals:s}}for(var f=r.calendar,y=o==="start",l=o==="end",x=n[v+"period0"],u=A(x,f)||0,M=[],_=[],p=[],w=s.length,h=0;h<w;h++){var L=s[h],S,E,P;if(g){for(S=Math.round((L-u)/(g*a)),P=T(u,g*S,f);P>L;)P=T(P,-g,f);for(;P<=L;)P=T(P,g,f);E=T(P,-g,f)}else{for(S=Math.round((L-u)/b),P=u+S*b;P>L;)P-=b;for(;P<=L;)P+=b;E=P-b}M[h]=y?E:l?P:(E+P)/2,_[h]=E,p[h]=P}return{vals:M,starts:_,ends:p}}},{"../../constants/numerical":491,"../../lib":515,"fast-isnumeric":190}],564:[function(t,B,V){B.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],565:[function(t,B,V){var m=t("@plotly/d3"),c=t("fast-isnumeric"),A=t("../../lib"),T=t("../../constants/numerical").FP_SAFE,e=t("../../registry"),a=t("../../components/drawing"),i=t("./axis_ids"),n=i.getFromId,r=i.isLinked;B.exports={getAutoRange:v,makePadFn:o,doAutoRange:f,findExtremes:y,concatExtremes:d};function v(w,h){var L,S,E=[],P=w._fullLayout,F=o(P,h,0),I=o(P,h,1),D=d(w,h),R=D.min,N=D.max;if(R.length===0||N.length===0)return A.simpleMap(h.range,h.r2l);var z=R[0].val,G=N[0].val;for(L=1;L<R.length&&z===G;L++)z=Math.min(z,R[L].val);for(L=1;L<N.length&&z===G;L++)G=Math.max(G,N[L].val);var Y=!1;if(h.range){var ee=A.simpleMap(h.range,h.r2l);Y=ee[1]<ee[0]}h.autorange==="reversed"&&(Y=!0,h.autorange=!0);var Z=h.rangemode,X=Z==="tozero",ne=Z==="nonnegative",ce=h._length,Q=ce/10,K=0,U,H,q,re,j,$;for(L=0;L<R.length;L++)for(U=R[L],S=0;S<N.length;S++)H=N[S],$=H.val-U.val-s(h,U.val,H.val),$>0&&(j=ce-F(U)-I(H),j>Q?$/j>K&&(q=U,re=H,K=$/j):$/ce>K&&(q={val:U.val,nopad:1},re={val:H.val,nopad:1},K=$/ce));function ie(ue,ye){return Math.max(ue,I(ye))}if(z===G){var oe=z-1,ae=z+1;if(X)if(z===0)E=[0,1];else{var se=(z>0?N:R).reduce(ie,0),_e=z/(1-Math.min(.5,se/ce));E=z>0?[0,_e]:[_e,0]}else ne?E=[Math.max(0,oe),Math.max(1,ae)]:E=[oe,ae]}else X?(q.val>=0&&(q={val:0,nopad:1}),re.val<=0&&(re={val:0,nopad:1})):ne&&(q.val-K*F(q)<0&&(q={val:0,nopad:1}),re.val<=0&&(re={val:1,nopad:1})),K=(re.val-q.val-s(h,U.val,H.val))/(ce-F(q)-I(re)),E=[q.val-K*F(q),re.val+K*I(re)];return Y&&E.reverse(),A.simpleMap(E,h.l2r||Number)}function s(w,h,L){var S=0;if(w.rangebreaks)for(var E=w.locateBreaks(h,L),P=0;P<E.length;P++){var F=E[P];S+=F.max-F.min}return S}function o(w,h,L){var S=.05*h._length,E=h._anchorAxis||{};if((h.ticklabelposition||"").indexOf("inside")!==-1||(E.ticklabelposition||"").indexOf("inside")!==-1){var P=h.autorange==="reversed";if(!P){var F=A.simpleMap(h.range,h.r2l);P=F[1]<F[0]}P&&(L=!L)}var I=0;return r(w,h._id)||(I=g(w,h,L)),S=Math.max(I,S),h.constrain==="domain"&&h._inputDomain&&(S*=(h._inputDomain[1]-h._inputDomain[0])/(h.domain[1]-h.domain[0])),function(R){return R.nopad?0:R.pad+(R.extrapad?S:I)}}var b=3;function g(w,h,L){var S=0,E=h._id.charAt(0)==="x";for(var P in w._plots){var F=w._plots[P];if(!(h._id!==F.xaxis._id&&h._id!==F.yaxis._id)){var I=(E?F.yaxis:F.xaxis)||{};if((I.ticklabelposition||"").indexOf("inside")!==-1&&(!L&&(I.side==="left"||I.side==="bottom")||L&&(I.side==="top"||I.side==="right"))){if(I._vals){var D=A.deg2rad(I._tickAngles[I._id+"tick"]||0),R=Math.abs(Math.cos(D)),N=Math.abs(Math.sin(D));if(!I._vals[0].bb){var z=I._id+"tick",G=I._selections[z];G.each(function(ce){var Q=m.select(this),K=Q.select(".text-math-group");K.empty()&&(ce.bb=a.bBox(Q.node()))})}for(var Y=0;Y<I._vals.length;Y++){var ee=I._vals[Y],Z=ee.bb;if(Z){var X=2*b+Z.width,ne=2*b+Z.height;S=Math.max(S,E?Math.max(X*R,ne*N):Math.max(ne*R,X*N))}}}I.ticks==="inside"&&I.ticklabelposition==="inside"&&(S+=I.ticklen||0)}}}return S}function d(w,h,L){var S=h._id,E=w._fullData,P=w._fullLayout,F=[],I=[],D,R,N;function z(X,ne){for(D=0;D<ne.length;D++){var ce=X[ne[D]],Q=(ce._extremes||{})[S];if(ce.visible===!0&&Q){for(R=0;R<Q.min.length;R++)N=Q.min[R],l(F,N.val,N.pad,{extrapad:N.extrapad});for(R=0;R<Q.max.length;R++)N=Q.max[R],x(I,N.val,N.pad,{extrapad:N.extrapad})}}}if(z(E,h._traceIndices),z(P.annotations||[],h._annIndices||[]),z(P.shapes||[],h._shapeIndices||[]),h._matchGroup&&!L){for(var G in h._matchGroup)if(G!==h._id){var Y=n(w,G),ee=d(w,Y,!0),Z=h._length/Y._length;for(R=0;R<ee.min.length;R++)N=ee.min[R],l(F,N.val,N.pad*Z,{extrapad:N.extrapad});for(R=0;R<ee.max.length;R++)N=ee.max[R],x(I,N.val,N.pad*Z,{extrapad:N.extrapad})}}return{min:F,max:I}}function f(w,h,L){if(h.setScale(),h.autorange){h.range=L?L.slice():v(w,h),h._r=h.range.slice(),h._rl=A.simpleMap(h._r,h.r2l);var S=h._input,E={};E[h._attr+".range"]=h.range,E[h._attr+".autorange"]=h.autorange,e.call("_storeDirectGUIEdit",w.layout,w._fullLayout._preGUI,E),S.range=h.range.slice(),S.autorange=h.autorange}var P=h._anchorAxis;if(P&&P.rangeslider){var F=P.rangeslider[h._name];F&&F.rangemode==="auto"&&(F.range=v(w,h)),P._input.rangeslider[h._name]=A.extendFlat({},F)}}function y(w,h,L){L||(L={}),w._m||w.setScale();var S=[],E=[],P=h.length,F=L.padded||!1,I=L.tozero&&(w.type==="linear"||w.type==="-"),D=w.type==="log",R=!1,N=L.vpadLinearized||!1,z,G,Y,ee,Z,X,ne,ce,Q;function K(oe){if(Array.isArray(oe))return R=!0,function(se){return Math.max(Number(oe[se]||0),0)};var ae=Math.max(Number(oe||0),0);return function(){return ae}}var U=K((w._m>0?L.ppadplus:L.ppadminus)||L.ppad||0),H=K((w._m>0?L.ppadminus:L.ppadplus)||L.ppad||0),q=K(L.vpadplus||L.vpad),re=K(L.vpadminus||L.vpad);if(!R){if(ce=1/0,Q=-1/0,D)for(z=0;z<P;z++)G=h[z],G<ce&&G>0&&(ce=G),G>Q&&G<T&&(Q=G);else for(z=0;z<P;z++)G=h[z],G<ce&&G>-T&&(ce=G),G>Q&&G<T&&(Q=G);h=[ce,Q],P=2}var j={tozero:I,extrapad:F};function $(oe){Y=h[oe],c(Y)&&(X=U(oe),ne=H(oe),N?(ee=w.c2l(Y)-re(oe),Z=w.c2l(Y)+q(oe)):(ce=Y-re(oe),Q=Y+q(oe),D&&ce<Q/10&&(ce=Q/10),ee=w.c2l(ce),Z=w.c2l(Q)),I&&(ee=Math.min(0,ee),Z=Math.max(0,Z)),M(ee)&&l(S,ee,ne,j),M(Z)&&x(E,Z,X,j))}var ie=Math.min(6,P);for(z=0;z<ie;z++)$(z);for(z=P-1;z>=ie;z--)$(z);return{min:S,max:E,opts:L}}function l(w,h,L,S){u(w,h,L,S,_)}function x(w,h,L,S){u(w,h,L,S,p)}function u(w,h,L,S,E){for(var P=S.tozero,F=S.extrapad,I=!0,D=0;D<w.length&&I;D++){var R=w[D];if(E(R.val,h)&&R.pad>=L&&(R.extrapad||!F)){I=!1;break}else E(h,R.val)&&R.pad<=L&&(F||!R.extrapad)&&(w.splice(D,1),D--)}if(I){var N=P&&h===0;w.push({val:h,pad:N?0:L,extrapad:N?!1:F})}}function M(w){return c(w)&&Math.abs(w)<T}function _(w,h){return w<=h}function p(w,h){return w>=h}},{"../../components/drawing":389,"../../constants/numerical":491,"../../lib":515,"../../registry":647,"./axis_ids":570,"@plotly/d3":58,"fast-isnumeric":190}],566:[function(t,B,V){var m=t("@plotly/d3"),c=t("fast-isnumeric"),A=t("../../plots/plots"),T=t("../../registry"),e=t("../../lib"),a=e.strTranslate,i=t("../../lib/svg_text_utils"),n=t("../../components/titles"),r=t("../../components/color"),v=t("../../components/drawing"),s=t("./layout_attributes"),o=t("./clean_ticks"),b=t("../../constants/numerical"),g=b.ONEMAXYEAR,d=b.ONEAVGYEAR,f=b.ONEMINYEAR,y=b.ONEMAXQUARTER,l=b.ONEAVGQUARTER,x=b.ONEMINQUARTER,u=b.ONEMAXMONTH,M=b.ONEAVGMONTH,_=b.ONEMINMONTH,p=b.ONEWEEK,w=b.ONEDAY,h=w/2,L=b.ONEHOUR,S=b.ONEMIN,E=b.ONESEC,P=b.MINUS_SIGN,F=b.BADNUM,I={K:"zeroline"},D={K:"gridline",L:"path"},R={K:"minor-gridline",L:"path"},N={K:"tick",L:"path"},z={K:"tick",L:"text"},G={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},Y=t("../../constants/alignment"),ee=Y.MID_SHIFT,Z=Y.CAP_SHIFT,X=Y.LINE_SPACING,ne=Y.OPPOSITE_SIDE,ce=3,Q=B.exports={};Q.setConvert=t("./set_convert");var K=t("./axis_autotype"),U=t("./axis_ids"),H=U.idSort,q=U.isLinked;Q.id2name=U.id2name,Q.name2id=U.name2id,Q.cleanId=U.cleanId,Q.list=U.list,Q.listIds=U.listIds,Q.getFromId=U.getFromId,Q.getFromTrace=U.getFromTrace;var re=t("./autorange");Q.getAutoRange=re.getAutoRange,Q.findExtremes=re.findExtremes;var j=1e-4;function $(Pe){var Ee=(Pe[1]-Pe[0])*j;return[Pe[0]-Ee,Pe[1]+Ee]}Q.coerceRef=function(Pe,Ee,it,ut,vt,St){var yt=ut.charAt(ut.length-1),Pt=it._fullLayout._subplots[yt+"axis"],Wt=ut+"ref",ar={};return vt||(vt=Pt[0]||(typeof St=="string"?St:St[0])),St||(St=vt),Pt=Pt.concat(Pt.map(function(kr){return kr+" domain"})),ar[Wt]={valType:"enumerated",values:Pt.concat(St?typeof St=="string"?[St]:St:[]),dflt:vt},e.coerce(Pe,Ee,ar,Wt)},Q.getRefType=function(Pe){return Pe===void 0?Pe:Pe==="paper"?"paper":Pe==="pixel"?"pixel":/( domain)$/.test(Pe)?"domain":"range"},Q.coercePosition=function(Pe,Ee,it,ut,vt,St){var yt,Pt,Wt=Q.getRefType(ut);if(Wt!=="range")yt=e.ensureNumber,Pt=it(vt,St);else{var ar=Q.getFromId(Ee,ut);St=ar.fraction2r(St),Pt=it(vt,St),yt=ar.cleanPos}Pe[vt]=yt(Pt)},Q.cleanPosition=function(Pe,Ee,it){var ut=it==="paper"||it==="pixel"?e.ensureNumber:Q.getFromId(Ee,it).cleanPos;return ut(Pe)},Q.redrawComponents=function(Pe,Ee){Ee=Ee||Q.listIds(Pe);var it=Pe._fullLayout;function ut(vt,St,yt,Pt){for(var Wt=T.getComponentMethod(vt,St),ar={},kr=0;kr<Ee.length;kr++)for(var wr=it[Q.id2name(Ee[kr])],Sr=wr[yt],Zr=0;Zr<Sr.length;Zr++){var ir=Sr[Zr];if(!ar[ir]&&(Wt(Pe,ir),ar[ir]=1,Pt))return}}ut("annotations","drawOne","_annIndices"),ut("shapes","drawOne","_shapeIndices"),ut("images","draw","_imgIndices",!0),ut("selections","drawOne","_selectionIndices")};var ie=Q.getDataConversions=function(Pe,Ee,it,ut){var vt,St=it==="x"||it==="y"||it==="z"?it:ut;if(Array.isArray(St)){if(vt={type:K(ut,void 0,{autotypenumbers:Pe._fullLayout.autotypenumbers}),_categories:[]},Q.setConvert(vt),vt.type==="category")for(var yt=0;yt<ut.length;yt++)vt.d2c(ut[yt])}else vt=Q.getFromTrace(Pe,Ee,St);return vt?{d2c:vt.d2c,c2d:vt.c2d}:St==="ids"?{d2c:ae,c2d:ae}:{d2c:oe,c2d:oe}};function oe(Pe){return+Pe}function ae(Pe){return String(Pe)}Q.getDataToCoordFunc=function(Pe,Ee,it,ut){return ie(Pe,Ee,it,ut).d2c},Q.counterLetter=function(Pe){var Ee=Pe.charAt(0);if(Ee==="x")return"y";if(Ee==="y")return"x"},Q.minDtick=function(Pe,Ee,it,ut){["log","category","multicategory"].indexOf(Pe.type)!==-1||!ut?Pe._minDtick=0:Pe._minDtick===void 0?(Pe._minDtick=Ee,Pe._forceTick0=it):Pe._minDtick&&((Pe._minDtick/Ee+1e-6)%1<2e-6&&((it-Pe._forceTick0)/Ee%1+1.000001)%1<2e-6?(Pe._minDtick=Ee,Pe._forceTick0=it):((Ee/Pe._minDtick+1e-6)%1>2e-6||((it-Pe._forceTick0)/Pe._minDtick%1+1.000001)%1>2e-6)&&(Pe._minDtick=0))},Q.saveRangeInitial=function(Pe,Ee){for(var it=Q.list(Pe,"",!0),ut=!1,vt=0;vt<it.length;vt++){var St=it[vt],yt=St._rangeInitial===void 0,Pt=yt||!(St.range[0]===St._rangeInitial[0]&&St.range[1]===St._rangeInitial[1]);(yt&&St.autorange===!1||Ee&&Pt)&&(St._rangeInitial=St.range.slice(),ut=!0)}return ut},Q.saveShowSpikeInitial=function(Pe,Ee){for(var it=Q.list(Pe,"",!0),ut=!1,vt="on",St=0;St<it.length;St++){var yt=it[St],Pt=yt._showSpikeInitial===void 0,Wt=Pt||yt.showspikes!==yt._showspikes;(Pt||Ee&&Wt)&&(yt._showSpikeInitial=yt.showspikes,ut=!0),vt==="on"&&!yt.showspikes&&(vt="off")}return Pe._fullLayout._cartesianSpikesEnabled=vt,ut},Q.autoBin=function(Pe,Ee,it,ut,vt,St){var yt=e.aggNums(Math.min,null,Pe),Pt=e.aggNums(Math.max,null,Pe);if(Ee.type==="category"||Ee.type==="multicategory")return{start:yt-.5,end:Pt+.5,size:Math.max(1,Math.round(St)||1),_dataSpan:Pt-yt};vt||(vt=Ee.calendar);var Wt;if(Ee.type==="log"?Wt={type:"linear",range:[yt,Pt]}:Wt={type:Ee.type,range:e.simpleMap([yt,Pt],Ee.c2r,0,vt),calendar:vt},Q.setConvert(Wt),St=St&&o.dtick(St,Wt.type),St)Wt.dtick=St,Wt.tick0=o.tick0(void 0,Wt.type,vt);else{var ar;if(it)ar=(Pt-yt)/it;else{var kr=e.distinctVals(Pe),wr=Math.pow(10,Math.floor(Math.log(kr.minDiff)/Math.LN10)),Sr=wr*e.roundUp(kr.minDiff/wr,[.9,1.9,4.9,9.9],!0);ar=Math.max(Sr,2*e.stdev(Pe)/Math.pow(Pe.length,ut?.25:.4)),c(ar)||(ar=1)}Q.autoTicks(Wt,ar)}var Zr=Wt.dtick,ir=Q.tickIncrement(Q.tickFirst(Wt),Zr,"reverse",vt),xr,Rr;if(typeof Zr=="number")ir=se(ir,Pe,Wt,yt,Pt),Rr=1+Math.floor((Pt-ir)/Zr),xr=ir+Rr*Zr;else for(Wt.dtick.charAt(0)==="M"&&(ir=_e(ir,Pe,Zr,yt,vt)),xr=ir,Rr=0;xr<=Pt;)xr=Q.tickIncrement(xr,Zr,!1,vt),Rr++;return{start:Ee.c2r(ir,0,vt),end:Ee.c2r(xr,0,vt),size:Zr,_dataSpan:Pt-yt}};function se(Pe,Ee,it,ut,vt){var St=0,yt=0,Pt=0,Wt=0;function ar(Zr){return(1+(Zr-Pe)*100/it.dtick)%100<2}for(var kr=0;kr<Ee.length;kr++)Ee[kr]%1===0?Pt++:c(Ee[kr])||Wt++,ar(Ee[kr])&&St++,ar(Ee[kr]+it.dtick/2)&&yt++;var wr=Ee.length-Wt;if(Pt===wr&&it.type!=="date")it.dtick<1?Pe=ut-.5*it.dtick:(Pe-=.5,Pe+it.dtick<ut&&(Pe+=it.dtick));else if(yt<wr*.1&&(St>wr*.3||ar(ut)||ar(vt))){var Sr=it.dtick/2;Pe+=Pe+Sr<ut?Sr:-Sr}return Pe}function _e(Pe,Ee,it,ut,vt){var St=e.findExactDates(Ee,vt),yt=.8;if(St.exactDays>yt){var Pt=Number(it.substr(1));St.exactYears>yt&&Pt%12===0?Pe=Q.tickIncrement(Pe,"M6","reverse")+w*1.5:St.exactMonths>yt?Pe=Q.tickIncrement(Pe,"M1","reverse")+w*15.5:Pe-=h;var Wt=Q.tickIncrement(Pe,it);if(Wt<=ut)return Wt}return Pe}Q.prepMinorTicks=function(Pe,Ee,it){if(!Ee.minor.dtick){delete Pe.dtick;var ut=Ee.dtick&&c(Ee._tmin),vt;if(ut){var St=Q.tickIncrement(Ee._tmin,Ee.dtick,!0);vt=[Ee._tmin,St*.99+Ee._tmin*.01]}else{var yt=e.simpleMap(Ee.range,Ee.r2l);vt=[yt[0],.8*yt[0]+.2*yt[1]]}if(Pe.range=e.simpleMap(vt,Ee.l2r),Pe._isMinor=!0,Q.prepTicks(Pe,it),ut){var Pt=c(Ee.dtick),Wt=c(Pe.dtick),ar=Pt?Ee.dtick:+Ee.dtick.substring(1),kr=Wt?Pe.dtick:+Pe.dtick.substring(1);Pt&&Wt?ue(ar,kr)?ar===2*p&&kr===2*w&&(Pe.dtick=p):ar===2*p&&kr===3*w?Pe.dtick=p:ar===p&&!(Ee._input.minor||{}).nticks?Pe.dtick=w:ye(ar/kr,2.5)?Pe.dtick=ar/2:Pe.dtick=ar:String(Ee.dtick).charAt(0)==="M"?Wt?Pe.dtick="M1":ue(ar,kr)?ar>=12&&kr===2&&(Pe.dtick="M3"):Pe.dtick=Ee.dtick:String(Pe.dtick).charAt(0)==="L"?String(Ee.dtick).charAt(0)==="L"?ue(ar,kr)||(Pe.dtick=ye(ar/kr,2.5)?Ee.dtick/2:Ee.dtick):Pe.dtick="D1":Pe.dtick==="D2"&&+Ee.dtick>1&&(Pe.dtick=1)}Pe.range=Ee.range}Ee.minor._tick0Init===void 0&&(Pe.tick0=Ee.tick0)};function ue(Pe,Ee){return Math.abs((Pe/Ee+.5)%1-.5)<.001}function ye(Pe,Ee){return Math.abs(Pe/Ee-1)<.001}Q.prepTicks=function(Pe,Ee){var it=e.simpleMap(Pe.range,Pe.r2l,void 0,void 0,Ee);if(Pe.tickmode==="auto"||!Pe.dtick){var ut=Pe.nticks,vt;ut||(Pe.type==="category"||Pe.type==="multicategory"?(vt=Pe.tickfont?e.bigFont(Pe.tickfont.size||12):15,ut=Pe._length/vt):(vt=Pe._id.charAt(0)==="y"?40:80,ut=e.constrain(Pe._length/vt,4,9)+1),Pe._name==="radialaxis"&&(ut*=2)),Pe.minor&&Pe.minor.tickmode!=="array"||Pe.tickmode==="array"&&(ut*=100),Pe._roughDTick=Math.abs(it[1]-it[0])/ut,Q.autoTicks(Pe,Pe._roughDTick),Pe._minDtick>0&&Pe.dtick<Pe._minDtick*2&&(Pe.dtick=Pe._minDtick,Pe.tick0=Pe.l2r(Pe._forceTick0))}Pe.ticklabelmode==="period"&&me(Pe),Pe.tick0||(Pe.tick0=Pe.type==="date"?"2000-01-01":0),Pe.type==="date"&&Pe.dtick<.1&&(Pe.dtick=.1),We(Pe)};function xe(Pe){return+Pe.substring(1)}function me(Pe){var Ee;function it(){return!(c(Pe.dtick)||Pe.dtick.charAt(0)!=="M")}var ut=it(),vt=Q.getTickFormat(Pe);if(vt){var St=Pe._dtickInit!==Pe.dtick;/%[fLQsSMX]/.test(vt)||(/%[HI]/.test(vt)?(Ee=L,St&&!ut&&Pe.dtick<L&&(Pe.dtick=L)):/%p/.test(vt)?(Ee=h,St&&!ut&&Pe.dtick<h&&(Pe.dtick=h)):/%[Aadejuwx]/.test(vt)?(Ee=w,St&&!ut&&Pe.dtick<w&&(Pe.dtick=w)):/%[UVW]/.test(vt)?(Ee=p,St&&!ut&&Pe.dtick<p&&(Pe.dtick=p)):/%[Bbm]/.test(vt)?(Ee=M,St&&(ut?xe(Pe.dtick)<1:Pe.dtick<_)&&(Pe.dtick="M1")):/%[q]/.test(vt)?(Ee=l,St&&(ut?xe(Pe.dtick)<3:Pe.dtick<x)&&(Pe.dtick="M3")):/%[Yy]/.test(vt)&&(Ee=d,St&&(ut?xe(Pe.dtick)<12:Pe.dtick<f)&&(Pe.dtick="M12")))}ut=it(),ut&&Pe.tick0===Pe._dowTick0&&(Pe.tick0=Pe._rawTick0),Pe._definedDelta=Ee}function be(Pe,Ee,it){for(var ut=0;ut<Pe.length;ut++){var vt=Pe[ut].value,St=ut,yt=ut+1;ut<Pe.length-1?(St=ut,yt=ut+1):ut>0?(St=ut-1,yt=ut):(St=ut,yt=ut);var Pt=Pe[St].value,Wt=Pe[yt].value,ar=Math.abs(Wt-Pt),kr=it||ar,wr=0;kr>=f?ar>=f&&ar<=g?wr=ar:wr=d:it===l&&kr>=x?ar>=x&&ar<=y?wr=ar:wr=l:kr>=_?ar>=_&&ar<=u?wr=ar:wr=M:it===p&&kr>=p?wr=p:kr>=w?wr=w:it===h&&kr>=h?wr=h:it===L&&kr>=L&&(wr=L);var Sr;wr>=ar&&(wr=ar,Sr=!0);var Zr=vt+wr;if(Ee.rangebreaks&&wr>0){for(var ir=84,xr=0,Rr=0;Rr<ir;Rr++){var Br=(Rr+.5)/ir;Ee.maskBreaks(vt*(1-Br)+Br*Zr)!==F&&xr++}wr*=xr/ir,wr||(Pe[ut].drop=!0),Sr&&ar>p&&(wr=ar)}(wr>0||ut===0)&&(Pe[ut].periodX=vt+wr/2)}}Q.calcTicks=function(Ee,it){for(var ut=Ee.type,vt=Ee.calendar,St=Ee.ticklabelstep,yt=Ee.ticklabelmode==="period",Pt=e.simpleMap(Ee.range,Ee.r2l,void 0,void 0,it),Wt=Pt[1]<Pt[0],ar=Math.min(Pt[0],Pt[1]),kr=Math.max(Pt[0],Pt[1]),wr=Math.max(1e3,Ee._length||0),Sr=[],Zr=[],ir=[],xr=[],Rr=Ee.minor&&(Ee.minor.ticks||Ee.minor.showgrid),Br=1;Br>=(Rr?0:1);Br--){var Cr=!Br;Br?(Ee._dtickInit=Ee.dtick,Ee._tick0Init=Ee.tick0):(Ee.minor._dtickInit=Ee.minor.dtick,Ee.minor._tick0Init=Ee.minor.tick0);var nt=Br?Ee:e.extendFlat({},Ee,Ee.minor);if(Cr?Q.prepMinorTicks(nt,Ee,it):Q.prepTicks(nt,it),nt.tickmode==="array"){Br?(ir=[],Sr=ke(Ee)):(xr=[],Zr=ke(Ee));continue}var Dt=$(Pt),Zt=Dt[0],sr=Dt[1],zr=c(nt.dtick),Ur=ut==="log"&&!(zr||nt.dtick.charAt(0)==="L"),Lr=Q.tickFirst(nt,it);if(Br){if(Ee._tmin=Lr,Lr<Zt!==Wt)break;(ut==="category"||ut==="multicategory")&&(sr=Wt?Math.max(-.5,sr):Math.min(Ee._categories.length-.5,sr))}var Tr=null,Wr=Lr,An;if(Br){var vn;zr?vn=Ee.dtick:ut==="date"?typeof Ee.dtick=="string"&&Ee.dtick.charAt(0)==="M"&&(vn=M*Ee.dtick.substring(1)):vn=Ee._roughDTick,An=Math.round((Ee.r2l(Wr)-Ee.r2l(Ee.tick0))/vn)-1}var Un=nt.dtick;for(nt.rangebreaks&&nt._tick0Init!==nt.tick0&&(Wr=ct(Wr,Ee),Wt||(Wr=Q.tickIncrement(Wr,Un,!Wt,vt))),Br&&yt&&(Wr=Q.tickIncrement(Wr,Un,!Wt,vt),An--);Wt?Wr>=sr:Wr<=sr;Wr=Q.tickIncrement(Wr,Un,Wt,vt)){if(Br&&An++,nt.rangebreaks&&!Wt){if(Wr<Zt)continue;if(nt.maskBreaks(Wr)===F&&ct(Wr,nt)>=kr)break}if(ir.length>wr||Wr===Tr)break;Tr=Wr;var Ln={value:Wr};Br?(Ur&&Wr!==(Wr|0)&&(Ln.simpleLabel=!0),St>1&&An%St&&(Ln.skipLabel=!0),ir.push(Ln)):(Ln.minor=!0,xr.push(Ln))}}if(Rr){var Zn=Ee.minor.ticks==="inside"&&Ee.ticks==="outside"||Ee.minor.ticks==="outside"&&Ee.ticks==="inside";if(!Zn){for(var Wn=ir.map(function(Gt){return Gt.value}),ya=[],ka=0;ka<xr.length;ka++){var di=xr[ka],Xa=di.value;if(Wn.indexOf(Xa)===-1){for(var $a=!1,Ka=0;!$a&&Ka<ir.length;Ka++)1e7+ir[Ka].value===1e7+Xa&&($a=!0);$a||ya.push(di)}}xr=ya}}yt&&be(ir,Ee,Ee._definedDelta);var Mr;if(Ee.rangebreaks){var gn=Ee._id.charAt(0)==="y",hn=1;Ee.tickmode==="auto"&&(hn=Ee.tickfont?Ee.tickfont.size:12);var Sn=NaN;for(Mr=ir.length-1;Mr>-1;Mr--){if(ir[Mr].drop){ir.splice(Mr,1);continue}ir[Mr].value=ct(ir[Mr].value,Ee);var Jn=Ee.c2p(ir[Mr].value);(gn?Sn>Jn-hn:Sn<Jn+hn)?ir.splice(Wt?Mr+1:Mr,1):Sn=Jn}}st(Ee)&&Math.abs(Pt[1]-Pt[0])===360&&ir.pop(),Ee._tmax=(ir[ir.length-1]||{}).value,Ee._prevDateHead="",Ee._inCalcTicks=!0;var ha,na=function(Gt){Gt.text="",Ee._prevDateHead=ha};ir=ir.concat(xr);var Fn,Kn;for(Mr=0;Mr<ir.length;Mr++){var Ya=ir[Mr].minor,hi=ir[Mr].value;Ya?Zr.push({x:hi,minor:!0}):(ha=Ee._prevDateHead,Fn=Q.tickText(Ee,hi,!1,ir[Mr].simpleLabel),Kn=ir[Mr].periodX,Kn!==void 0&&(Fn.periodX=Kn,(Kn>kr||Kn<ar)&&(Kn>kr&&(Fn.periodX=kr),Kn<ar&&(Fn.periodX=ar),na(Fn))),ir[Mr].skipLabel&&na(Fn),Sr.push(Fn))}return Sr=Sr.concat(Zr),Ee._inCalcTicks=!1,yt&&Sr.length&&(Sr[0].noTick=!0),Sr};function ke(Pe){var Ee=e.simpleMap(Pe.range,Pe.r2l),it=$(Ee),ut=Math.min(it[0],it[1]),vt=Math.max(it[0],it[1]),St=Pe.type==="category"?Pe.d2l_noadd:Pe.d2l;Pe.type==="log"&&String(Pe.dtick).charAt(0)!=="L"&&(Pe.dtick="L"+Math.pow(10,Math.floor(Math.min(Pe.range[0],Pe.range[1]))-1));for(var yt=[],Pt=0;Pt<=1;Pt++)if(!(Pt&&!Pe.minor)){var Wt=Pt?Pe.minor.tickvals:Pe.tickvals,ar=Pt?[]:Pe.ticktext;if(!!Wt){Array.isArray(ar)||(ar=[]);for(var kr=0;kr<Wt.length;kr++){var wr=St(Wt[kr]);if(wr>ut&&wr<vt){var Sr=ar[kr]===void 0?Q.tickText(Pe,wr):pt(Pe,wr,String(ar[kr]));Pt&&(Sr.minor=!0,Sr.text=""),yt.push(Sr)}}}}return Pe.rangebreaks&&(yt=yt.filter(function(Zr){return Pe.maskBreaks(Zr.x)!==F})),yt}var De=[2,5,10],Ve=[1,2,3,6,12],Ae=[1,2,5,10,15,30],Le=[1,2,3,7,14],je=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],Ye=[-.301,0,.301,.699,1],ze=[15,30,45,90,180];function Ie(Pe,Ee,it){return Ee*e.roundUp(Pe/Ee,it)}Q.autoTicks=function(Pe,Ee,it){var ut;function vt(wr){return Math.pow(wr,Math.floor(Math.log(Ee)/Math.LN10))}if(Pe.type==="date"){Pe.tick0=e.dateTick0(Pe.calendar,0);var St=2*Ee;if(St>d)Ee/=d,ut=vt(10),Pe.dtick="M"+12*Ie(Ee,ut,De);else if(St>M)Ee/=M,Pe.dtick="M"+Ie(Ee,1,Ve);else if(St>w){if(Pe.dtick=Ie(Ee,w,Pe._hasDayOfWeekBreaks?[1,2,7,14]:Le),!it){var yt=Q.getTickFormat(Pe),Pt=Pe.ticklabelmode==="period";Pt&&(Pe._rawTick0=Pe.tick0),/%[uVW]/.test(yt)?Pe.tick0=e.dateTick0(Pe.calendar,2):Pe.tick0=e.dateTick0(Pe.calendar,1),Pt&&(Pe._dowTick0=Pe.tick0)}}else St>L?Pe.dtick=Ie(Ee,L,Ve):St>S?Pe.dtick=Ie(Ee,S,Ae):St>E?Pe.dtick=Ie(Ee,E,Ae):(ut=vt(10),Pe.dtick=Ie(Ee,ut,De))}else if(Pe.type==="log"){Pe.tick0=0;var Wt=e.simpleMap(Pe.range,Pe.r2l);if(Pe._isMinor&&(Ee*=1.5),Ee>.7)Pe.dtick=Math.ceil(Ee);else if(Math.abs(Wt[1]-Wt[0])<1){var ar=1.5*Math.abs((Wt[1]-Wt[0])/Ee);Ee=Math.abs(Math.pow(10,Wt[1])-Math.pow(10,Wt[0]))/ar,ut=vt(10),Pe.dtick="L"+Ie(Ee,ut,De)}else Pe.dtick=Ee>.3?"D2":"D1"}else Pe.type==="category"||Pe.type==="multicategory"?(Pe.tick0=0,Pe.dtick=Math.ceil(Math.max(Ee,1))):st(Pe)?(Pe.tick0=0,ut=1,Pe.dtick=Ie(Ee,ut,ze)):(Pe.tick0=0,ut=vt(10),Pe.dtick=Ie(Ee,ut,De));if(Pe.dtick===0&&(Pe.dtick=1),!c(Pe.dtick)&&typeof Pe.dtick!="string"){var kr=Pe.dtick;throw Pe.dtick=1,"ax.dtick error: "+String(kr)}};function We(Pe){var Ee=Pe.dtick;if(Pe._tickexponent=0,!c(Ee)&&typeof Ee!="string"&&(Ee=1),(Pe.type==="category"||Pe.type==="multicategory")&&(Pe._tickround=null),Pe.type==="date"){var it=Pe.r2l(Pe.tick0),ut=Pe.l2r(it).replace(/(^-|i)/g,""),vt=ut.length;if(String(Ee).charAt(0)==="M")vt>10||ut.substr(5)!=="01-01"?Pe._tickround="d":Pe._tickround=+Ee.substr(1)%12===0?"y":"m";else if(Ee>=w&&vt<=10||Ee>=w*15)Pe._tickround="d";else if(Ee>=S&&vt<=16||Ee>=L)Pe._tickround="M";else if(Ee>=E&&vt<=19||Ee>=S)Pe._tickround="S";else{var St=Pe.l2r(it+Ee).replace(/^-/,"").length;Pe._tickround=Math.max(vt,St)-20,Pe._tickround<0&&(Pe._tickround=4)}}else if(c(Ee)||Ee.charAt(0)==="L"){var yt=Pe.range.map(Pe.r2d||Number);c(Ee)||(Ee=Number(Ee.substr(1))),Pe._tickround=2-Math.floor(Math.log(Ee)/Math.LN10+.01);var Pt=Math.max(Math.abs(yt[0]),Math.abs(yt[1])),Wt=Math.floor(Math.log(Pt)/Math.LN10+.01),ar=Pe.minexponent===void 0?3:Pe.minexponent;Math.abs(Wt)>ar&&(at(Pe.exponentformat)&&!Ge(Wt)?Pe._tickexponent=3*Math.round((Wt-1)/3):Pe._tickexponent=Wt)}else Pe._tickround=null}Q.tickIncrement=function(Pe,Ee,it,ut){var vt=it?-1:1;if(c(Ee))return e.increment(Pe,vt*Ee);var St=Ee.charAt(0),yt=vt*Number(Ee.substr(1));if(St==="M")return e.incrementMonth(Pe,yt,ut);if(St==="L")return Math.log(Math.pow(10,Pe)+yt)/Math.LN10;if(St==="D"){var Pt=Ee==="D2"?Ye:je,Wt=Pe+vt*.01,ar=e.roundUp(e.mod(Wt,1),Pt,it);return Math.floor(Wt)+Math.log(m.round(Math.pow(10,ar),1))/Math.LN10}throw"unrecognized dtick "+String(Ee)},Q.tickFirst=function(Pe,Ee){var it=Pe.r2l||Number,ut=e.simpleMap(Pe.range,it,void 0,void 0,Ee),vt=ut[1]<ut[0],St=vt?Math.floor:Math.ceil,yt=$(ut)[0],Pt=Pe.dtick,Wt=it(Pe.tick0);if(c(Pt)){var ar=St((yt-Wt)/Pt)*Pt+Wt;return(Pe.type==="category"||Pe.type==="multicategory")&&(ar=e.constrain(ar,0,Pe._categories.length-1)),ar}var kr=Pt.charAt(0),wr=Number(Pt.substr(1));if(kr==="M"){for(var Sr=0,Zr=Wt,ir,xr,Rr;Sr<10;){if(ir=Q.tickIncrement(Zr,Pt,vt,Pe.calendar),(ir-yt)*(Zr-yt)<=0)return vt?Math.min(Zr,ir):Math.max(Zr,ir);xr=(yt-(Zr+ir)/2)/(ir-Zr),Rr=kr+(Math.abs(Math.round(xr))||1)*wr,Zr=Q.tickIncrement(Zr,Rr,xr<0?!vt:vt,Pe.calendar),Sr++}return e.error("tickFirst did not converge",Pe),Zr}else{if(kr==="L")return Math.log(St((Math.pow(10,yt)-Wt)/wr)*wr+Wt)/Math.LN10;if(kr==="D"){var Br=Pt==="D2"?Ye:je,Cr=e.roundUp(e.mod(yt,1),Br,vt);return Math.floor(yt)+Math.log(m.round(Math.pow(10,Cr),1))/Math.LN10}else throw"unrecognized dtick "+String(Pt)}},Q.tickText=function(Pe,Ee,it,ut){var vt=pt(Pe,Ee),St=Pe.tickmode==="array",yt=it||St,Pt=Pe.type,Wt=Pt==="category"?Pe.d2l_noadd:Pe.d2l,ar;if(St&&Array.isArray(Pe.ticktext)){var kr=e.simpleMap(Pe.range,Pe.r2l),wr=(Math.abs(kr[1]-kr[0])-(Pe._lBreaks||0))/1e4;for(ar=0;ar<Pe.ticktext.length&&!(Math.abs(Ee-Wt(Pe.tickvals[ar]))<wr);ar++);if(ar<Pe.ticktext.length)return vt.text=String(Pe.ticktext[ar]),vt}function Sr(xr){if(xr===void 0)return!0;if(it)return xr==="none";var Rr={first:Pe._tmin,last:Pe._tmax}[xr];return xr!=="all"&&Ee!==Rr}var Zr=it?"never":Pe.exponentformat!=="none"&&Sr(Pe.showexponent)?"hide":"";if(Pt==="date"?Ft(Pe,vt,it,yt):Pt==="log"?Qt(Pe,vt,it,yt,Zr):Pt==="category"?zt(Pe,vt):Pt==="multicategory"?Et(Pe,vt,it):st(Pe)?Nt(Pe,vt,it,yt,Zr):Xt(Pe,vt,it,yt,Zr),ut||(Pe.tickprefix&&!Sr(Pe.showtickprefix)&&(vt.text=Pe.tickprefix+vt.text),Pe.ticksuffix&&!Sr(Pe.showticksuffix)&&(vt.text+=Pe.ticksuffix)),Pe.tickson==="boundaries"||Pe.showdividers){var ir=function(xr){var Rr=Pe.l2p(xr);return Rr>=0&&Rr<=Pe._length?xr:null};vt.xbnd=[ir(vt.x-.5),ir(vt.x+Pe.dtick-.5)]}return vt},Q.hoverLabelText=function(Pe,Ee,it){it&&(Pe=e.extendFlat({},Pe,{hoverformat:it}));var ut=Array.isArray(Ee)?Ee[0]:Ee,vt=Array.isArray(Ee)?Ee[1]:void 0;if(vt!==void 0&&vt!==ut)return Q.hoverLabelText(Pe,ut,it)+" - "+Q.hoverLabelText(Pe,vt,it);var St=Pe.type==="log"&&ut<=0,yt=Q.tickText(Pe,Pe.c2l(St?-ut:ut),"hover").text;return St?ut===0?"0":P+yt:yt};function pt(Pe,Ee,it){var ut=Pe.tickfont||{};return{x:Ee,dx:0,dy:0,text:it||"",fontSize:ut.size,font:ut.family,fontColor:ut.color}}function Ft(Pe,Ee,it,ut){var vt=Pe._tickround,St=it&&Pe.hoverformat||Q.getTickFormat(Pe);ut&&(c(vt)?vt=4:vt={y:"m",m:"d",d:"M",M:"S",S:4}[vt]);var yt=e.formatDate(Ee.x,St,vt,Pe._dateFormat,Pe.calendar,Pe._extraFormat),Pt,Wt=yt.indexOf(`
`);if(Wt!==-1&&(Pt=yt.substr(Wt+1),yt=yt.substr(0,Wt)),ut&&(yt==="00:00:00"||yt==="00:00"?(yt=Pt,Pt=""):yt.length===8&&(yt=yt.replace(/:00$/,""))),Pt)if(it)vt==="d"?yt+=", "+Pt:yt=Pt+(yt?", "+yt:"");else if(!Pe._inCalcTicks||Pe._prevDateHead!==Pt)Pe._prevDateHead=Pt,yt+="<br>"+Pt;else{var ar=Mt(Pe),kr=Pe._trueSide||Pe.side;(!ar&&kr==="top"||ar&&kr==="bottom")&&(yt+="<br> ")}Ee.text=yt}function Qt(Pe,Ee,it,ut,vt){var St=Pe.dtick,yt=Ee.x,Pt=Pe.tickformat,Wt=typeof St=="string"&&St.charAt(0);if(vt==="never"&&(vt=""),ut&&Wt!=="L"&&(St="L3",Wt="L"),Pt||Wt==="L")Ee.text=Se(Math.pow(10,yt),Pe,vt,ut);else if(c(St)||Wt==="D"&&e.mod(yt+.01,1)<.1){var ar=Math.round(yt),kr=Math.abs(ar),wr=Pe.exponentformat;wr==="power"||at(wr)&&Ge(ar)?(ar===0?Ee.text=1:ar===1?Ee.text="10":Ee.text="10<sup>"+(ar>1?"":P)+kr+"</sup>",Ee.fontSize*=1.25):(wr==="e"||wr==="E")&&kr>2?Ee.text="1"+wr+(ar>0?"+":P)+kr:(Ee.text=Se(Math.pow(10,yt),Pe,"","fakehover"),St==="D1"&&Pe._id.charAt(0)==="y"&&(Ee.dy-=Ee.fontSize/6))}else if(Wt==="D")Ee.text=String(Math.round(Math.pow(10,e.mod(yt,1)))),Ee.fontSize*=.75;else throw"unrecognized dtick "+String(St);if(Pe.dtick==="D1"){var Sr=String(Ee.text).charAt(0);(Sr==="0"||Sr==="1")&&(Pe._id.charAt(0)==="y"?Ee.dx-=Ee.fontSize/4:(Ee.dy+=Ee.fontSize/2,Ee.dx+=(Pe.range[1]>Pe.range[0]?1:-1)*Ee.fontSize*(yt<0?.5:.25)))}}function zt(Pe,Ee){var it=Pe._categories[Math.round(Ee.x)];it===void 0&&(it=""),Ee.text=String(it)}function Et(Pe,Ee,it){var ut=Math.round(Ee.x),vt=Pe._categories[ut]||[],St=vt[1]===void 0?"":String(vt[1]),yt=vt[0]===void 0?"":String(vt[0]);it?Ee.text=yt+" - "+St:(Ee.text=St,Ee.text2=yt)}function Xt(Pe,Ee,it,ut,vt){vt==="never"?vt="":Pe.showexponent==="all"&&Math.abs(Ee.x/Pe.dtick)<1e-6&&(vt="hide"),Ee.text=Se(Ee.x,Pe,vt,ut)}function Nt(Pe,Ee,it,ut,vt){if(Pe.thetaunit==="radians"&&!it){var St=Ee.x/180;if(St===0)Ee.text="0";else{var yt=Ct(St);if(yt[1]>=100)Ee.text=Se(e.deg2rad(Ee.x),Pe,vt,ut);else{var Pt=Ee.x<0;yt[1]===1?yt[0]===1?Ee.text="\u03C0":Ee.text=yt[0]+"\u03C0":Ee.text=["<sup>",yt[0],"</sup>","\u2044","<sub>",yt[1],"</sub>","\u03C0"].join(""),Pt&&(Ee.text=P+Ee.text)}}}else Ee.text=Se(Ee.x,Pe,vt,ut)}function Ct(Pe){function Ee(Pt,Wt){return Math.abs(Pt-Wt)<=1e-6}function it(Pt,Wt){return Ee(Wt,0)?Pt:it(Wt,Pt%Wt)}function ut(Pt){for(var Wt=1;!Ee(Math.round(Pt*Wt)/Wt,Pt);)Wt*=10;return Wt}var vt=ut(Pe),St=Pe*vt,yt=Math.abs(it(St,vt));return[Math.round(St/yt),Math.round(vt/yt)]}var Xe=["f","p","n","\u03BC","m","","k","M","G","T"];function at(Pe){return Pe==="SI"||Pe==="B"}function Ge(Pe){return Pe>14||Pe<-15}function Se(Pe,Ee,it,ut){var vt=Pe<0,St=Ee._tickround,yt=it||Ee.exponentformat||"B",Pt=Ee._tickexponent,Wt=Q.getTickFormat(Ee),ar=Ee.separatethousands;if(ut){var kr={exponentformat:yt,minexponent:Ee.minexponent,dtick:Ee.showexponent==="none"?Ee.dtick:c(Pe)&&Math.abs(Pe)||1,range:Ee.showexponent==="none"?Ee.range.map(Ee.r2d):[0,Pe||1]};We(kr),St=(Number(kr._tickround)||0)+4,Pt=kr._tickexponent,Ee.hoverformat&&(Wt=Ee.hoverformat)}if(Wt)return Ee._numFormat(Wt)(Pe).replace(/-/g,P);var wr=Math.pow(10,-St)/2;if(yt==="none"&&(Pt=0),Pe=Math.abs(Pe),Pe<wr)Pe="0",vt=!1;else{if(Pe+=wr,Pt&&(Pe*=Math.pow(10,-Pt),St+=Pt),St===0)Pe=String(Math.floor(Pe));else if(St<0){Pe=String(Math.round(Pe)),Pe=Pe.substr(0,Pe.length+St);for(var Sr=St;Sr<0;Sr++)Pe+="0"}else{Pe=String(Pe);var Zr=Pe.indexOf(".")+1;Zr&&(Pe=Pe.substr(0,Zr+St).replace(/\.?0+$/,""))}Pe=e.numSeparate(Pe,Ee._separators,ar)}if(Pt&&yt!=="hide"){at(yt)&&Ge(Pt)&&(yt="power");var ir;Pt<0?ir=P+-Pt:yt!=="power"?ir="+"+Pt:ir=String(Pt),yt==="e"||yt==="E"?Pe+=yt+ir:yt==="power"?Pe+="\xD710<sup>"+ir+"</sup>":yt==="B"&&Pt===9?Pe+="B":at(yt)&&(Pe+=Xe[Pt/3+5])}return vt?P+Pe:Pe}Q.getTickFormat=function(Pe){var Ee;function it(Wt){return typeof Wt!="string"?Wt:Number(Wt.replace("M",""))*M}function ut(Wt,ar){var kr=["L","D"];if(typeof Wt==typeof ar){if(typeof Wt=="number")return Wt-ar;var wr=kr.indexOf(Wt.charAt(0)),Sr=kr.indexOf(ar.charAt(0));return wr===Sr?Number(Wt.replace(/(L|D)/g,""))-Number(ar.replace(/(L|D)/g,"")):wr-Sr}else return typeof Wt=="number"?1:-1}function vt(Wt,ar,kr){var wr=kr||function(ir){return ir},Sr=ar[0],Zr=ar[1];return(!Sr&&typeof Sr!="number"||wr(Sr)<=wr(Wt))&&(!Zr&&typeof Zr!="number"||wr(Zr)>=wr(Wt))}function St(Wt,ar){var kr=ar[0]===null,wr=ar[1]===null,Sr=ut(Wt,ar[0])>=0,Zr=ut(Wt,ar[1])<=0;return(kr||Sr)&&(wr||Zr)}var yt,Pt;if(Pe.tickformatstops&&Pe.tickformatstops.length>0)switch(Pe.type){case"date":case"linear":{for(Ee=0;Ee<Pe.tickformatstops.length;Ee++)if(Pt=Pe.tickformatstops[Ee],Pt.enabled&&vt(Pe.dtick,Pt.dtickrange,it)){yt=Pt;break}break}case"log":{for(Ee=0;Ee<Pe.tickformatstops.length;Ee++)if(Pt=Pe.tickformatstops[Ee],Pt.enabled&&St(Pe.dtick,Pt.dtickrange)){yt=Pt;break}break}}return yt?yt.value:Pe.tickformat},Q.getSubplots=function(Pe,Ee){var it=Pe._fullLayout._subplots,ut=it.cartesian.concat(it.gl2d||[]),vt=Ee?Q.findSubplotsWithAxis(ut,Ee):ut;return vt.sort(function(St,yt){var Pt=St.substr(1).split("y"),Wt=yt.substr(1).split("y");return Pt[0]===Wt[0]?+Pt[1]-+Wt[1]:+Pt[0]-+Wt[0]}),vt},Q.findSubplotsWithAxis=function(Pe,Ee){for(var it=new RegExp(Ee._id.charAt(0)==="x"?"^"+Ee._id+"y":Ee._id+"$"),ut=[],vt=0;vt<Pe.length;vt++){var St=Pe[vt];it.test(St)&&ut.push(St)}return ut},Q.makeClipPaths=function(Pe){var Ee=Pe._fullLayout;if(!Ee._hasOnlyLargeSploms){var it={_offset:0,_length:Ee.width,_id:""},ut={_offset:0,_length:Ee.height,_id:""},vt=Q.list(Pe,"x",!0),St=Q.list(Pe,"y",!0),yt=[],Pt,Wt;for(Pt=0;Pt<vt.length;Pt++)for(yt.push({x:vt[Pt],y:ut}),Wt=0;Wt<St.length;Wt++)Pt===0&&yt.push({x:it,y:St[Wt]}),yt.push({x:vt[Pt],y:St[Wt]});var ar=Ee._clips.selectAll(".axesclip").data(yt,function(kr){return kr.x._id+kr.y._id});ar.enter().append("clipPath").classed("axesclip",!0).attr("id",function(kr){return"clip"+Ee._uid+kr.x._id+kr.y._id}).append("rect"),ar.exit().remove(),ar.each(function(kr){m.select(this).select("rect").attr({x:kr.x._offset||0,y:kr.y._offset||0,width:kr.x._length||1,height:kr.y._length||1})})}},Q.draw=function(Pe,Ee,it){var ut=Pe._fullLayout;Ee==="redraw"&&ut._paper.selectAll("g.subplot").each(function(St){var yt=St[0],Pt=ut._plots[yt];if(Pt){var Wt=Pt.xaxis,ar=Pt.yaxis;Pt.xaxislayer.selectAll("."+Wt._id+"tick").remove(),Pt.yaxislayer.selectAll("."+ar._id+"tick").remove(),Pt.xaxislayer.selectAll("."+Wt._id+"tick2").remove(),Pt.yaxislayer.selectAll("."+ar._id+"tick2").remove(),Pt.xaxislayer.selectAll("."+Wt._id+"divider").remove(),Pt.yaxislayer.selectAll("."+ar._id+"divider").remove(),Pt.minorGridlayer&&Pt.minorGridlayer.selectAll("path").remove(),Pt.gridlayer&&Pt.gridlayer.selectAll("path").remove(),Pt.zerolinelayer&&Pt.zerolinelayer.selectAll("path").remove(),ut._infolayer.select(".g-"+Wt._id+"title").remove(),ut._infolayer.select(".g-"+ar._id+"title").remove()}});var vt=!Ee||Ee==="redraw"?Q.listIds(Pe):Ee;return e.syncOrAsync(vt.map(function(St){return function(){if(!!St){var yt=Q.getFromId(Pe,St),Pt=Q.drawOne(Pe,yt,it);return yt._r=yt.range.slice(),yt._rl=e.simpleMap(yt._r,yt.r2l),Pt}}}))},Q.drawOne=function(Pe,Ee,it){it=it||{};var ut,vt,St;Ee.setScale();var yt=Pe._fullLayout,Pt=Ee._id,Wt=Pt.charAt(0),ar=Q.counterLetter(Pt),kr=yt._plots[Ee._mainSubplot];if(!kr)return;var wr=kr[Wt+"axislayer"],Sr=Ee._mainLinePosition,Zr=Ee._mainMirrorPosition,ir=Ee._vals=Q.calcTicks(Ee),xr=[Ee.mirror,Sr,Zr].join("_");for(ut=0;ut<ir.length;ut++)ir[ut].axInfo=xr;Ee._selections={},Ee._tickAngles&&(Ee._prevTickAngles=Ee._tickAngles),Ee._tickAngles={},Ee._depth=null;var Rr={};function Br(Gt){var pr=Pt+(Gt||"tick");return Rr[pr]||(Rr[pr]=mt(Ee,pr)),Rr[pr]}if(!!Ee.visible){var Cr=Q.makeTransTickFn(Ee),nt=Q.makeTransTickLabelFn(Ee),Dt,Zt,sr=Ee.ticks==="inside",zr=Ee.ticks==="outside";if(Ee.tickson==="boundaries"){var Ur=Ke(Ee,ir);Zt=Q.clipEnds(Ee,Ur),Dt=sr?Zt:Ur}else Zt=Q.clipEnds(Ee,ir),Dt=sr&&Ee.ticklabelmode!=="period"?Zt:ir;var Lr=Ee._gridVals=Zt,Tr=Tt(Ee,ir);if(!yt._hasOnlyLargeSploms){var Wr=Ee._subplotsWith,An={};for(ut=0;ut<Wr.length;ut++){vt=Wr[ut],St=yt._plots[vt];var vn=St[ar+"axis"],Un=vn._mainAxis._id;if(!An[Un]){An[Un]=1;var Ln=Wt==="x"?"M0,"+vn._offset+"v"+vn._length:"M"+vn._offset+",0h"+vn._length;Q.drawGrid(Pe,Ee,{vals:Lr,counterAxis:vn,layer:St.gridlayer.select("."+Pt),minorLayer:St.minorGridlayer.select("."+Pt),path:Ln,transFn:Cr}),Q.drawZeroLine(Pe,Ee,{counterAxis:vn,layer:St.zerolinelayer,path:Ln,transFn:Cr})}}}var Zn,Wn=Q.getTickSigns(Ee),ya=Q.getTickSigns(Ee,"minor");if(Ee.ticks||Ee.minor&&Ee.minor.ticks){var ka=Q.makeTickPath(Ee,Sr,Wn[2]),di=Q.makeTickPath(Ee,Sr,ya[2],{minor:!0}),Xa,$a,Ka,Mr;if(Ee._anchorAxis&&Ee.mirror&&Ee.mirror!==!0?(Xa=Q.makeTickPath(Ee,Zr,Wn[3]),$a=Q.makeTickPath(Ee,Zr,ya[3],{minor:!0}),Ka=ka+Xa,Mr=di+$a):(Xa="",$a="",Ka=ka,Mr=di),Ee.showdividers&&zr&&Ee.tickson==="boundaries"){var gn={};for(ut=0;ut<Tr.length;ut++)gn[Tr[ut].x]=1;Zn=function(Gt){return gn[Gt.x]?Xa:Ka}}else Zn=function(Gt){return Gt.minor?Mr:Ka}}if(Q.drawTicks(Pe,Ee,{vals:Dt,layer:wr,path:Zn,transFn:Cr}),Ee.mirror==="allticks"){var hn=Object.keys(Ee._linepositions||{});for(ut=0;ut<hn.length;ut++){vt=hn[ut],St=yt._plots[vt];var Sn=Ee._linepositions[vt]||[],Jn=Sn[0],ha=Sn[1],na=Sn[2],Fn=Q.makeTickPath(Ee,Jn,na?Wn[0]:ya[0],{minor:na})+Q.makeTickPath(Ee,ha,na?Wn[1]:ya[1],{minor:na});Q.drawTicks(Pe,Ee,{vals:Dt,layer:St[Wt+"axislayer"],path:Fn,transFn:Cr})}}var Kn=[];if(Kn.push(function(){return Q.drawLabels(Pe,Ee,{vals:ir,layer:wr,plotinfo:St,transFn:nt,labelFns:Q.makeLabelFns(Ee,Sr)})}),Ee.type==="multicategory"){var Ya={x:2,y:10}[Wt];Kn.push(function(){var Gt={x:"height",y:"width"}[Wt],pr=Br()[Gt]+Ya+(Ee._tickAngles[Pt+"tick"]?Ee.tickfont.size*X:0);return Q.drawLabels(Pe,Ee,{vals:qe(Ee,ir),layer:wr,cls:Pt+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:Cr,labelFns:Q.makeLabelFns(Ee,Sr+pr*Wn[4])})}),Kn.push(function(){return Ee._depth=Wn[4]*(Br("tick2")[Ee.side]-Sr),Vt(Pe,Ee,{vals:Tr,layer:wr,path:Q.makeTickPath(Ee,Sr,Wn[4],{len:Ee._depth}),transFn:Cr})})}else Ee.title.hasOwnProperty("standoff")&&Kn.push(function(){Ee._depth=Wn[4]*(Br()[Ee.side]-Sr)});var hi=T.getComponentMethod("rangeslider","isVisible")(Ee);return Kn.push(function(){var Gt=Ee.side.charAt(0),pr=ne[Ee.side].charAt(0),an=Q.getPxPosition(Pe,Ee),dn=zr?Ee.ticklen:0,rn,Mn,_n,fn;if((Ee.automargin||hi)&&(Ee.type==="multicategory"?rn=Br("tick2"):(rn=Br(),Wt==="x"&&Gt==="b"&&(Ee._depth=Math.max(rn.width>0?rn.bottom-an:0,dn)))),Ee.automargin){Mn={x:0,y:0,r:0,l:0,t:0,b:0};var mr=[0,1];if(Wt==="x"){if(Gt==="b"?Mn[Gt]=Ee._depth:(Mn[Gt]=Ee._depth=Math.max(rn.width>0?an-rn.top:0,dn),mr.reverse()),rn.width>0){var br=rn.right-(Ee._offset+Ee._length);br>0&&(Mn.xr=1,Mn.r=br);var Nr=Ee._offset-rn.left;Nr>0&&(Mn.xl=0,Mn.l=Nr)}}else if(Gt==="l"?Mn[Gt]=Ee._depth=Math.max(rn.height>0?an-rn.left:0,dn):(Mn[Gt]=Ee._depth=Math.max(rn.height>0?rn.right-an:0,dn),mr.reverse()),rn.height>0){var mn=rn.bottom-(Ee._offset+Ee._length);mn>0&&(Mn.yb=0,Mn.b=mn);var Bn=Ee._offset-rn.top;Bn>0&&(Mn.yt=1,Mn.t=Bn)}Mn[ar]=Ee.anchor==="free"?Ee.position:Ee._anchorAxis.domain[mr[0]],Ee.title.text!==yt._dfltTitle[Wt]&&(Mn[Gt]+=jt(Ee)+(Ee.title.standoff||0)),Ee.mirror&&Ee.anchor!=="free"&&(_n={x:0,y:0,r:0,l:0,t:0,b:0},_n[pr]=Ee.linewidth,Ee.mirror&&Ee.mirror!==!0&&(_n[pr]+=dn),Ee.mirror===!0||Ee.mirror==="ticks"?_n[ar]=Ee._anchorAxis.domain[mr[1]]:(Ee.mirror==="all"||Ee.mirror==="allticks")&&(_n[ar]=[Ee._counterDomainMin,Ee._counterDomainMax][mr[1]]))}hi&&(fn=T.getComponentMethod("rangeslider","autoMarginOpts")(Pe,Ee)),typeof Ee.automargin=="string"&&(He(Mn,Ee.automargin),He(_n,Ee.automargin)),A.autoMargin(Pe,ot(Ee),Mn),A.autoMargin(Pe,er(Ee),_n),A.autoMargin(Pe,Kt(Ee),fn)}),!it.skipTitle&&!(hi&&Ee.side==="bottom")&&Kn.push(function(){return Yt(Pe,Ee)}),e.syncOrAsync(Kn)}};function He(Pe,Ee){if(!!Pe){var it=Object.keys(G).reduce(function(ut,vt){return Ee.indexOf(vt)!==-1&&G[vt].forEach(function(St){ut[St]=1}),ut},{});Object.keys(Pe).forEach(function(ut){it[ut]||(ut.length===1?Pe[ut]=0:delete Pe[ut])})}}function Ke(Pe,Ee){var it=[],ut,vt=function(St,yt){var Pt=St.xbnd[yt];Pt!==null&&it.push(e.extendFlat({},St,{x:Pt}))};if(Ee.length){for(ut=0;ut<Ee.length;ut++)vt(Ee[ut],0);vt(Ee[ut-1],1)}return it}function qe(Pe,Ee){for(var it=[],ut={},vt=0;vt<Ee.length;vt++){var St=Ee[vt];ut[St.text2]?ut[St.text2].push(St.x):ut[St.text2]=[St.x]}for(var yt in ut)it.push(pt(Pe,e.interp(ut[yt],.5),yt));return it}function Tt(Pe,Ee){var it=[],ut,vt,St=Ee.length&&Ee[Ee.length-1].x<Ee[0].x,yt=function(Wt,ar){var kr=Wt.xbnd[ar];kr!==null&&it.push(e.extendFlat({},Wt,{x:kr}))};if(Pe.showdividers&&Ee.length){for(ut=0;ut<Ee.length;ut++){var Pt=Ee[ut];Pt.text2!==vt&&yt(Pt,St?1:0),vt=Pt.text2}yt(Ee[ut-1],St?0:1)}return it}function mt(Pe,Ee){var it,ut,vt,St;return Pe._selections[Ee].size()?(it=1/0,ut=-1/0,vt=1/0,St=-1/0,Pe._selections[Ee].each(function(){var yt=Jr(this),Pt=v.bBox(yt.node().parentNode);it=Math.min(it,Pt.top),ut=Math.max(ut,Pt.bottom),vt=Math.min(vt,Pt.left),St=Math.max(St,Pt.right)})):(it=0,ut=0,vt=0,St=0),{top:it,bottom:ut,left:vt,right:St,height:ut-it,width:St-vt}}Q.getTickSigns=function(Pe,Ee){var it=Pe._id.charAt(0),ut={x:"top",y:"right"}[it],vt=Pe.side===ut?1:-1,St=[-1,1,vt,-vt],yt=Ee?(Pe.minor||{}).ticks:Pe.ticks;return yt!=="inside"==(it==="x")&&(St=St.map(function(Pt){return-Pt})),Pe.side&&St.push({l:-1,t:-1,r:1,b:1}[Pe.side.charAt(0)]),St},Q.makeTransTickFn=function(Pe){return Pe._id.charAt(0)==="x"?function(Ee){return a(Pe._offset+Pe.l2p(Ee.x),0)}:function(Ee){return a(0,Pe._offset+Pe.l2p(Ee.x))}},Q.makeTransTickLabelFn=function(Pe){var Ee=Ht(Pe),it=Ee[0],ut=Ee[1];return Pe._id.charAt(0)==="x"?function(vt){return a(it+Pe._offset+Pe.l2p(At(vt)),ut)}:function(vt){return a(ut,it+Pe._offset+Pe.l2p(At(vt)))}};function At(Pe){return Pe.periodX!==void 0?Pe.periodX:Pe.x}function Ht(Pe){var Ee=Pe.ticklabelposition||"",it=function(Zr){return Ee.indexOf(Zr)!==-1},ut=it("top"),vt=it("left"),St=it("right"),yt=it("bottom"),Pt=it("inside"),Wt=yt||vt||ut||St;if(!Wt&&!Pt)return[0,0];var ar=Pe.side,kr=Wt?(Pe.tickwidth||0)/2:0,wr=ce,Sr=Pe.tickfont?Pe.tickfont.size:12;return(yt||ut)&&(kr+=Sr*Z,wr+=(Pe.linewidth||0)/2),(vt||St)&&(kr+=(Pe.linewidth||0)/2,wr+=ce),Pt&&ar==="top"&&(wr-=Sr*(1-Z)),(vt||ut)&&(kr=-kr),(ar==="bottom"||ar==="right")&&(wr=-wr),[Wt?kr:0,Pt?wr:0]}Q.makeTickPath=function(Pe,Ee,it,ut){ut||(ut={});var vt=ut.minor;if(vt&&!Pe.minor)return"";var St=ut.len!==void 0?ut.len:vt?Pe.minor.ticklen:Pe.ticklen,yt=Pe._id.charAt(0),Pt=(Pe.linewidth||1)/2;return yt==="x"?"M0,"+(Ee+Pt*it)+"v"+St*it:"M"+(Ee+Pt*it)+",0h"+St*it},Q.makeLabelFns=function(Pe,Ee,it){var ut=Pe.ticklabelposition||"",vt=function(An){return ut.indexOf(An)!==-1},St=vt("top"),yt=vt("left"),Pt=vt("right"),Wt=vt("bottom"),ar=Wt||yt||St||Pt,kr=vt("inside"),wr=ut==="inside"&&Pe.ticks==="inside"||!kr&&Pe.ticks==="outside"&&Pe.tickson!=="boundaries",Sr=0,Zr=0,ir=wr?Pe.ticklen:0;if(kr?ir*=-1:ar&&(ir=0),wr&&(Sr+=ir,it)){var xr=e.deg2rad(it);Sr=ir*Math.cos(xr)+1,Zr=ir*Math.sin(xr)}Pe.showticklabels&&(wr||Pe.showline)&&(Sr+=.2*Pe.tickfont.size),Sr+=(Pe.linewidth||1)/2*(kr?-1:1);var Rr={labelStandoff:Sr,labelShift:Zr},Br,Cr,nt,Dt,Zt=0,sr=Pe.side,zr=Pe._id.charAt(0),Ur=Pe.tickangle,Lr;if(zr==="x")Lr=!kr&&sr==="bottom"||kr&&sr==="top",Dt=Lr?1:-1,kr&&(Dt*=-1),Br=Zr*Dt,Cr=Ee+Sr*Dt,nt=Lr?1:-.2,Math.abs(Ur)===90&&(kr?nt+=ee:Ur===-90&&sr==="bottom"?nt=Z:Ur===90&&sr==="top"?nt=ee:nt=.5,Zt=ee/2*(Ur/90)),Rr.xFn=function(An){return An.dx+Br+Zt*An.fontSize},Rr.yFn=function(An){return An.dy+Cr+An.fontSize*nt},Rr.anchorFn=function(An,vn){if(ar){if(yt)return"end";if(Pt)return"start"}return!c(vn)||vn===0||vn===180?"middle":vn*Dt<0!==kr?"end":"start"},Rr.heightFn=function(An,vn,Un){return vn<-60||vn>60?-.5*Un:Pe.side==="top"!==kr?-Un:0};else if(zr==="y"){if(Lr=!kr&&sr==="left"||kr&&sr==="right",Dt=Lr?1:-1,kr&&(Dt*=-1),Br=Sr,Cr=Zr*Dt,nt=0,!kr&&Math.abs(Ur)===90&&(Ur===-90&&sr==="left"||Ur===90&&sr==="right"?nt=Z:nt=.5),kr){var Tr=c(Ur)?+Ur:0;if(Tr!==0){var Wr=e.deg2rad(Tr);Zt=Math.abs(Math.sin(Wr))*Z*Dt,nt=0}}Rr.xFn=function(An){return An.dx+Ee-(Br+An.fontSize*nt)*Dt+Zt*An.fontSize},Rr.yFn=function(An){return An.dy+Cr+An.fontSize*ee},Rr.anchorFn=function(An,vn){return c(vn)&&Math.abs(vn)===90?"middle":Lr?"end":"start"},Rr.heightFn=function(An,vn,Un){return Pe.side==="right"&&(vn*=-1),vn<-30?-Un:vn<30?-.5*Un:0}}return Rr};function It(Pe){return[Pe.text,Pe.x,Pe.axInfo,Pe.font,Pe.fontSize,Pe.fontColor].join("_")}Q.drawTicks=function(Pe,Ee,it){it=it||{};var ut=Ee._id+"tick",vt=[].concat(Ee.minor&&Ee.minor.ticks?it.vals.filter(function(yt){return yt.minor&&!yt.noTick}):[]).concat(Ee.ticks?it.vals.filter(function(yt){return!yt.minor&&!yt.noTick}):[]),St=it.layer.selectAll("path."+ut).data(vt,It);St.exit().remove(),St.enter().append("path").classed(ut,1).classed("ticks",1).classed("crisp",it.crisp!==!1).each(function(yt){return r.stroke(m.select(this),yt.minor?Ee.minor.tickcolor:Ee.tickcolor)}).style("stroke-width",function(yt){return v.crispRound(Pe,yt.minor?Ee.minor.tickwidth:Ee.tickwidth,1)+"px"}).attr("d",it.path).style("display",null),Ut(Ee,[N]),St.attr("transform",it.transFn)},Q.drawGrid=function(Pe,Ee,it){it=it||{};var ut=Ee._id+"grid",vt=Ee.minor&&Ee.minor.showgrid,St=vt?it.vals.filter(function(Br){return Br.minor}):[],yt=Ee.showgrid?it.vals.filter(function(Br){return!Br.minor}):[],Pt=it.counterAxis;if(Pt&&Q.shouldShowZeroLine(Pe,Ee,Pt))for(var Wt=Ee.tickmode==="array",ar=0;ar<yt.length;ar++){var kr=yt[ar].x;if(Wt?!kr:Math.abs(kr)<Ee.dtick/100)if(yt=yt.slice(0,ar).concat(yt.slice(ar+1)),Wt)ar--;else break}Ee._gw=v.crispRound(Pe,Ee.gridwidth,1);for(var wr=vt?v.crispRound(Pe,Ee.minor.gridwidth,1):0,Sr=it.layer,Zr=it.minorLayer,ir=1;ir>=0;ir--){var xr=ir?Sr:Zr;if(!!xr){var Rr=xr.selectAll("path."+ut).data(ir?yt:St,It);Rr.exit().remove(),Rr.enter().append("path").classed(ut,1).classed("crisp",it.crisp!==!1),Rr.attr("transform",it.transFn).attr("d",it.path).each(function(Br){return r.stroke(m.select(this),Br.minor?Ee.minor.gridcolor:Ee.gridcolor||"#ddd")}).style("stroke-dasharray",function(Br){return v.dashStyle(Br.minor?Ee.minor.griddash:Ee.griddash,Br.minor?Ee.minor.gridwidth:Ee.gridwidth)}).style("stroke-width",function(Br){return(Br.minor?wr:Ee._gw)+"px"}).style("display",null),typeof it.path=="function"&&Rr.attr("d",it.path)}}Ut(Ee,[D,R])},Q.drawZeroLine=function(Pe,Ee,it){it=it||it;var ut=Ee._id+"zl",vt=Q.shouldShowZeroLine(Pe,Ee,it.counterAxis),St=it.layer.selectAll("path."+ut).data(vt?[{x:0,id:Ee._id}]:[]);St.exit().remove(),St.enter().append("path").classed(ut,1).classed("zl",1).classed("crisp",it.crisp!==!1).each(function(){it.layer.selectAll("path").sort(function(yt,Pt){return H(yt.id,Pt.id)})}),St.attr("transform",it.transFn).attr("d",it.path).call(r.stroke,Ee.zerolinecolor||r.defaultLine).style("stroke-width",v.crispRound(Pe,Ee.zerolinewidth,Ee._gw||1)+"px").style("display",null),Ut(Ee,[I])},Q.drawLabels=function(Pe,Ee,it){it=it||{};var ut=Pe._fullLayout,vt=Ee._id,St=vt.charAt(0),yt=it.cls||vt+"tick",Pt=it.vals.filter(function(Dt){return Dt.text}),Wt=it.labelFns,ar=it.secondary?0:Ee.tickangle,kr=(Ee._prevTickAngles||{})[yt],wr=it.layer.selectAll("g."+yt).data(Ee.showticklabels?Pt:[],It),Sr=[];wr.enter().append("g").classed(yt,1).append("text").attr("text-anchor","middle").each(function(Dt){var Zt=m.select(this),sr=Pe._promises.length;Zt.call(i.positionText,Wt.xFn(Dt),Wt.yFn(Dt)).call(v.font,Dt.font,Dt.fontSize,Dt.fontColor).text(Dt.text).call(i.convertToTspans,Pe),Pe._promises[sr]?Sr.push(Pe._promises.pop().then(function(){Zr(Zt,ar)})):Zr(Zt,ar)}),Ut(Ee,[z]),wr.exit().remove(),it.repositionOnUpdate&&wr.each(function(Dt){m.select(this).select("text").call(i.positionText,Wt.xFn(Dt),Wt.yFn(Dt))});function Zr(Dt,Zt){Dt.each(function(sr){var zr=m.select(this),Ur=zr.select(".text-math-group"),Lr=Wt.anchorFn(sr,Zt),Tr=it.transFn.call(zr.node(),sr)+(c(Zt)&&+Zt!=0?" rotate("+Zt+","+Wt.xFn(sr)+","+(Wt.yFn(sr)-sr.fontSize/2)+")":""),Wr=i.lineCount(zr),An=X*sr.fontSize,vn=Wt.heightFn(sr,c(Zt)?+Zt:0,(Wr-1)*An);if(vn&&(Tr+=a(0,vn)),Ur.empty()){var Un=zr.select("text");Un.attr({transform:Tr,"text-anchor":Lr}),Un.style("opacity",1),Ee._adjustTickLabelsOverflow&&Ee._adjustTickLabelsOverflow()}else{var Ln=v.bBox(Ur.node()).width,Zn=Ln*{end:-.5,start:.5}[Lr];Ur.attr("transform",Tr+a(Zn,0))}})}Ee._adjustTickLabelsOverflow=function(){var Dt=Ee.ticklabeloverflow;if(!(!Dt||Dt==="allow")){var Zt=Dt.indexOf("hide")!==-1,sr=Ee._id.charAt(0)==="x",zr=0,Ur=sr?Pe._fullLayout.width:Pe._fullLayout.height;if(Dt.indexOf("domain")!==-1){var Lr=e.simpleMap(Ee.range,Ee.r2l);zr=Ee.l2p(Lr[0])+Ee._offset,Ur=Ee.l2p(Lr[1])+Ee._offset}var Tr=Math.min(zr,Ur),Wr=Math.max(zr,Ur),An=Ee.side,vn=1/0,Un=-1/0;wr.each(function(ya){var ka=m.select(this),di=ka.select(".text-math-group");if(di.empty()){var Xa=v.bBox(ka.node()),$a=0;sr?(Xa.right>Wr||Xa.left<Tr)&&($a=1):(Xa.bottom>Wr||Xa.top+(Ee.tickangle?0:ya.fontSize/4)<Tr)&&($a=1);var Ka=ka.select("text");$a?Zt&&Ka.style("opacity",0):(Ka.style("opacity",1),An==="bottom"||An==="right"?vn=Math.min(vn,sr?Xa.top:Xa.left):vn=-1/0,An==="top"||An==="left"?Un=Math.max(Un,sr?Xa.bottom:Xa.right):Un=1/0)}});for(var Ln in ut._plots){var Zn=ut._plots[Ln];if(!(Ee._id!==Zn.xaxis._id&&Ee._id!==Zn.yaxis._id)){var Wn=sr?Zn.yaxis:Zn.xaxis;Wn&&(Wn["_visibleLabelMin_"+Ee._id]=vn,Wn["_visibleLabelMax_"+Ee._id]=Un)}}}},Ee._hideCounterAxisInsideTickLabels=function(Dt){var Zt=Ee._id.charAt(0)==="x",sr=[];for(var zr in ut._plots){var Ur=ut._plots[zr];Ee._id!==Ur.xaxis._id&&Ee._id!==Ur.yaxis._id||sr.push(Zt?Ur.yaxis:Ur.xaxis)}sr.forEach(function(Lr,Tr){Lr&&Mt(Lr)&&(Dt||[I,R,D,N,z]).forEach(function(Wr){var An=Wr.K==="tick"&&Wr.L==="text"&&Ee.ticklabelmode==="period",vn=ut._plots[Ee._mainSubplot],Un;Wr.K===I.K?Un=vn.zerolinelayer.selectAll("."+Ee._id+"zl"):Wr.K===R.K?Un=vn.minorGridlayer.selectAll("."+Ee._id):Wr.K===D.K?Un=vn.gridlayer.selectAll("."+Ee._id):Un=vn[Ee._id.charAt(0)+"axislayer"],Un.each(function(){var Ln=m.select(this);Wr.L&&(Ln=Ln.selectAll(Wr.L)),Ln.each(function(Zn){var Wn=Ee.l2p(An?At(Zn):Zn.x)+Ee._offset,ya=m.select(this);Wn<Ee["_visibleLabelMax_"+Lr._id]&&Wn>Ee["_visibleLabelMin_"+Lr._id]?ya.style("display","none"):Wr.K==="tick"&&!Tr&&ya.style("display",null)})})})})},Zr(wr,kr+1?kr:ar);function ir(){return Sr.length&&Promise.all(Sr)}var xr=null;function Rr(){if(Zr(wr,ar),Pt.length&&St==="x"&&!c(ar)&&(Ee.type!=="log"||String(Ee.dtick).charAt(0)!=="D")){xr=0;var Dt=0,Zt=[],sr;if(wr.each(function(Xa){Dt=Math.max(Dt,Xa.fontSize);var $a=Ee.l2p(Xa.x),Ka=Jr(this),Mr=v.bBox(Ka.node());Zt.push({top:0,bottom:10,height:10,left:$a-Mr.width/2,right:$a+Mr.width/2+2,width:Mr.width+2})}),(Ee.tickson==="boundaries"||Ee.showdividers)&&!it.secondary){var zr=2;for(Ee.ticks&&(zr+=Ee.tickwidth/2),sr=0;sr<Zt.length;sr++){var Ur=Pt[sr].xbnd,Lr=Zt[sr];if(Ur[0]!==null&&Lr.left-Ee.l2p(Ur[0])<zr||Ur[1]!==null&&Ee.l2p(Ur[1])-Lr.right<zr){xr=90;break}}}else{var Tr=Pt.length,Wr=Math.abs((Pt[Tr-1].x-Pt[0].x)*Ee._m)/(Tr-1),An=Ee.ticklabelposition||"",vn=function(Xa){return An.indexOf(Xa)!==-1},Un=vn("top"),Ln=vn("left"),Zn=vn("right"),Wn=vn("bottom"),ya=Wn||Ln||Un||Zn,ka=ya?(Ee.tickwidth||0)+2*ce:0,di=Wr<Dt*2.5||Ee.type==="multicategory"||Ee._name==="realaxis";for(sr=0;sr<Zt.length-1;sr++)if(e.bBoxIntersect(Zt[sr],Zt[sr+1],ka)){xr=di?90:30;break}}xr&&Zr(wr,xr)}}Ee._selections&&(Ee._selections[yt]=wr);var Br=[ir];Ee.automargin&&ut._redrawFromAutoMarginCount&&kr===90?(xr=90,Br.push(function(){Zr(wr,kr)})):Br.push(Rr),Ee._tickAngles&&Br.push(function(){Ee._tickAngles[yt]=xr===null?c(ar)?ar:0:xr});var Cr=Ee._anchorAxis;Cr&&Cr.autorange&&Mt(Ee)&&!q(ut,Ee._id)&&(ut._insideTickLabelsAutorange||(ut._insideTickLabelsAutorange={}),ut._insideTickLabelsAutorange[Cr._name+".autorange"]=Cr.autorange,Br.push(function(){wr.each(function(Zt,sr){var zr=Jr(this),Ur=zr.select(".text-math-group");Ur.empty()&&(Ee._vals[sr].bb=v.bBox(zr.node()))})}));var nt=e.syncOrAsync(Br);return nt&&nt.then&&Pe._promises.push(nt),nt};function Vt(Pe,Ee,it){var ut=Ee._id+"divider",vt=it.vals,St=it.layer.selectAll("path."+ut).data(vt,It);St.exit().remove(),St.enter().insert("path",":first-child").classed(ut,1).classed("crisp",1).call(r.stroke,Ee.dividercolor).style("stroke-width",v.crispRound(Pe,Ee.dividerwidth,1)+"px"),St.attr("transform",it.transFn).attr("d",it.path)}Q.getPxPosition=function(Pe,Ee){var it=Pe._fullLayout._size,ut=Ee._id.charAt(0),vt=Ee.side,St;if(Ee.anchor!=="free"?St=Ee._anchorAxis:ut==="x"?St={_offset:it.t+(1-(Ee.position||0))*it.h,_length:0}:ut==="y"&&(St={_offset:it.l+(Ee.position||0)*it.w,_length:0}),vt==="top"||vt==="left")return St._offset;if(vt==="bottom"||vt==="right")return St._offset+St._length};function jt(Pe){var Ee=Pe.title.font.size,it=(Pe.title.text.match(i.BR_TAG_ALL)||[]).length;return Pe.title.hasOwnProperty("standoff")?it?Ee*(Z+it*X):Ee*Z:it?Ee*(it+1)*X:Ee}function Yt(Pe,Ee){var it=Pe._fullLayout,ut=Ee._id,vt=ut.charAt(0),St=Ee.title.font.size,yt;if(Ee.title.hasOwnProperty("standoff"))yt=Ee._depth+Ee.title.standoff+jt(Ee);else{var Pt=Mt(Ee);if(Ee.type==="multicategory")yt=Ee._depth;else{var Wt=1.5*St;Pt&&(Wt=.5*St,Ee.ticks==="outside"&&(Wt+=Ee.ticklen)),yt=10+Wt+(Ee.linewidth?Ee.linewidth-1:0)}Pt||(vt==="x"?yt+=Ee.side==="top"?St*(Ee.showticklabels?1:0):St*(Ee.showticklabels?1.5:.5):yt+=Ee.side==="right"?St*(Ee.showticklabels?1:.5):St*(Ee.showticklabels?.5:0))}var ar=Q.getPxPosition(Pe,Ee),kr,wr,Sr;vt==="x"?(wr=Ee._offset+Ee._length/2,Sr=Ee.side==="top"?ar-yt:ar+yt):(Sr=Ee._offset+Ee._length/2,wr=Ee.side==="right"?ar+yt:ar-yt,kr={rotate:"-90",offset:0});var Zr;if(Ee.type!=="multicategory"){var ir=Ee._selections[Ee._id+"tick"];if(Zr={selection:ir,side:Ee.side},ir&&ir.node()&&ir.node().parentNode){var xr=v.getTranslate(ir.node().parentNode);Zr.offsetLeft=xr.x,Zr.offsetTop=xr.y}Ee.title.hasOwnProperty("standoff")&&(Zr.pad=0)}return n.draw(Pe,ut+"title",{propContainer:Ee,propName:Ee._name+".title.text",placeholder:it._dfltTitle[vt],avoid:Zr,transform:kr,attributes:{x:wr,y:Sr,"text-anchor":"middle"}})}Q.shouldShowZeroLine=function(Pe,Ee,it){var ut=e.simpleMap(Ee.range,Ee.r2l);return ut[0]*ut[1]<=0&&Ee.zeroline&&(Ee.type==="linear"||Ee.type==="-")&&!(Ee.rangebreaks&&Ee.maskBreaks(0)===F)&&(or(Ee,0)||!Gr(Pe,Ee,it,ut)||on(Pe,Ee))},Q.clipEnds=function(Pe,Ee){return Ee.filter(function(it){return or(Pe,it.x)})};function or(Pe,Ee){var it=Pe.l2p(Ee);return it>1&&it<Pe._length-1}function Gr(Pe,Ee,it,ut){var vt=it._mainAxis;if(!vt)return;var St=Pe._fullLayout,yt=Ee._id.charAt(0),Pt=Q.counterLetter(Ee._id),Wt=Ee._offset+(Math.abs(ut[0])<Math.abs(ut[1])==(yt==="x")?0:Ee._length);function ar(ir){if(!ir.showline||!ir.linewidth)return!1;var xr=Math.max((ir.linewidth+Ee.zerolinewidth)/2,1);function Rr(nt){return typeof nt=="number"&&Math.abs(nt-Wt)<xr}if(Rr(ir._mainLinePosition)||Rr(ir._mainMirrorPosition))return!0;var Br=ir._linepositions||{};for(var Cr in Br)if(Rr(Br[Cr][0])||Rr(Br[Cr][1]))return!0}var kr=St._plots[it._mainSubplot];if(!(kr.mainplotinfo||kr).overlays.length)return ar(it);for(var wr=Q.list(Pe,Pt),Sr=0;Sr<wr.length;Sr++){var Zr=wr[Sr];if(Zr._mainAxis===vt&&ar(Zr))return!0}}function on(Pe,Ee){for(var it=Pe._fullData,ut=Ee._mainSubplot,vt=Ee._id.charAt(0),St=0;St<it.length;St++){var yt=it[St];if(yt.visible===!0&&yt.xaxis+yt.yaxis===ut&&(T.traceIs(yt,"bar-like")&&yt.orientation==={x:"h",y:"v"}[vt]||yt.fill&&yt.fill.charAt(yt.fill.length-1)===vt))return!0}return!1}function Jr(Pe){var Ee=m.select(Pe),it=Ee.select(".text-math-group");return it.empty()?Ee.select("text"):it}Q.allowAutoMargin=function(Pe){for(var Ee=Q.list(Pe,"",!0),it=0;it<Ee.length;it++){var ut=Ee[it];ut.automargin&&(A.allowAutoMargin(Pe,ot(ut)),ut.mirror&&A.allowAutoMargin(Pe,er(ut))),T.getComponentMethod("rangeslider","isVisible")(ut)&&A.allowAutoMargin(Pe,Kt(ut))}};function ot(Pe){return Pe._id+".automargin"}function er(Pe){return ot(Pe)+".mirror"}function Kt(Pe){return Pe._id+".rangeslider"}Q.swap=function(Pe,Ee){for(var it=fr(Pe,Ee),ut=0;ut<it.length;ut++)et(Pe,it[ut].x,it[ut].y)};function fr(Pe,Ee){var it=[],ut,vt;for(ut=0;ut<Ee.length;ut++){var St=[],yt=Pe._fullData[Ee[ut]].xaxis,Pt=Pe._fullData[Ee[ut]].yaxis;if(!(!yt||!Pt)){for(vt=0;vt<it.length;vt++)(it[vt].x.indexOf(yt)!==-1||it[vt].y.indexOf(Pt)!==-1)&&St.push(vt);if(!St.length){it.push({x:[yt],y:[Pt]});continue}var Wt=it[St[0]],ar;if(St.length>1)for(vt=1;vt<St.length;vt++)ar=it[St[vt]],Ar(Wt.x,ar.x),Ar(Wt.y,ar.y);Ar(Wt.x,[yt]),Ar(Wt.y,[Pt])}}return it}function Ar(Pe,Ee){for(var it=0;it<Ee.length;it++)Pe.indexOf(Ee[it])===-1&&Pe.push(Ee[it])}function et(Pe,Ee,it){var ut=[],vt=[],St=Pe.layout,yt,Pt;for(yt=0;yt<Ee.length;yt++)ut.push(Q.getFromId(Pe,Ee[yt]));for(yt=0;yt<it.length;yt++)vt.push(Q.getFromId(Pe,it[yt]));var Wt=Object.keys(s),ar=["anchor","domain","overlaying","position","side","tickangle","editType"],kr=["linear","log"];for(yt=0;yt<Wt.length;yt++){var wr=Wt[yt],Sr=ut[0][wr],Zr=vt[0][wr],ir=!0,xr=!1,Rr=!1;if(!(wr.charAt(0)==="_"||typeof Sr=="function"||ar.indexOf(wr)!==-1)){for(Pt=1;Pt<ut.length&&ir;Pt++){var Br=ut[Pt][wr];wr==="type"&&kr.indexOf(Sr)!==-1&&kr.indexOf(Br)!==-1&&Sr!==Br?xr=!0:Br!==Sr&&(ir=!1)}for(Pt=1;Pt<vt.length&&ir;Pt++){var Cr=vt[Pt][wr];wr==="type"&&kr.indexOf(Zr)!==-1&&kr.indexOf(Cr)!==-1&&Zr!==Cr?Rr=!0:vt[Pt][wr]!==Zr&&(ir=!1)}ir&&(xr&&(St[ut[0]._name].type="linear"),Rr&&(St[vt[0]._name].type="linear"),$e(St,wr,ut,vt,Pe._fullLayout._dfltTitle))}}for(yt=0;yt<Pe._fullLayout.annotations.length;yt++){var nt=Pe._fullLayout.annotations[yt];Ee.indexOf(nt.xref)!==-1&&it.indexOf(nt.yref)!==-1&&e.swapAttrs(St.annotations[yt],["?"])}}function $e(Pe,Ee,it,ut,vt){var St=e.nestedProperty,yt=St(Pe[it[0]._name],Ee).get(),Pt=St(Pe[ut[0]._name],Ee).get(),Wt;for(Ee==="title"&&(yt&&yt.text===vt.x&&(yt.text=vt.y),Pt&&Pt.text===vt.y&&(Pt.text=vt.x)),Wt=0;Wt<it.length;Wt++)St(Pe,it[Wt]._name+"."+Ee).set(Pt);for(Wt=0;Wt<ut.length;Wt++)St(Pe,ut[Wt]._name+"."+Ee).set(yt)}function st(Pe){return Pe._id==="angularaxis"}function ct(Pe,Ee){for(var it=Ee._rangebreaks.length,ut=0;ut<it;ut++){var vt=Ee._rangebreaks[ut];if(Pe>=vt.min&&Pe<vt.max)return vt.max}return Pe}function Mt(Pe){return(Pe.ticklabelposition||"").indexOf("inside")!==-1}function Ut(Pe,Ee){Mt(Pe._anchorAxis||{})&&Pe._hideCounterAxisInsideTickLabels&&Pe._hideCounterAxisInsideTickLabels(Ee)}},{"../../components/color":367,"../../components/drawing":389,"../../components/titles":476,"../../constants/alignment":483,"../../constants/numerical":491,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/plots":628,"../../registry":647,"./autorange":565,"./axis_autotype":567,"./axis_ids":570,"./clean_ticks":572,"./layout_attributes":579,"./set_convert":585,"@plotly/d3":58,"fast-isnumeric":190}],567:[function(t,B,V){var m=t("fast-isnumeric"),c=t("../../lib"),A=t("../../constants/numerical").BADNUM,T=c.isArrayOrTypedArray,e=c.isDateTime,a=c.cleanNumber,i=Math.round;B.exports=function(d,f,y){var l=d,x=y.noMultiCategory;if(T(l)&&!l.length)return"-";if(!x&&b(l))return"multicategory";if(x&&Array.isArray(l[0])){for(var u=[],M=0;M<l.length;M++)if(T(l[M]))for(var _=0;_<l[M].length;_++)u.push(l[M][_]);l=u}if(v(l,f))return"date";var p=y.autotypenumbers!=="strict";return o(l,p)?"category":r(l,p)?"linear":"-"};function n(g,d){return d?m(g):typeof g=="number"}function r(g,d){for(var f=g.length,y=0;y<f;y++)if(n(g[y],d))return!0;return!1}function v(g,d){for(var f=g.length,y=s(f),l=0,x=0,u={},M=0;M<f;M+=y){var _=i(M),p=g[_],w=String(p);u[w]||(u[w]=1,e(p,d)&&l++,m(p)&&x++)}return l>x*2}function s(g){return Math.max(1,(g-1)/1e3)}function o(g,d){for(var f=g.length,y=s(f),l=0,x=0,u={},M=0;M<f;M+=y){var _=i(M),p=g[_],w=String(p);if(!u[w]){u[w]=1;var h=typeof p;h==="boolean"?x++:(d?a(p)!==A:h==="number")?l++:h==="string"&&x++}}return x>l*2}function b(g){return T(g[0])&&T(g[1])}},{"../../constants/numerical":491,"../../lib":515,"fast-isnumeric":190}],568:[function(t,B,V){var m=t("fast-isnumeric"),c=t("../../registry"),A=t("../../lib"),T=t("../../plot_api/plot_template"),e=t("../array_container_defaults"),a=t("./layout_attributes"),i=t("./tick_value_defaults"),n=t("./tick_mark_defaults"),r=t("./tick_label_defaults"),v=t("./prefix_suffix_defaults"),s=t("./category_order_defaults"),o=t("./line_grid_defaults"),b=t("./set_convert"),g=t("./constants").WEEKDAY_PATTERN,d=t("./constants").HOUR_PATTERN;B.exports=function(u,M,_,p,w){var h=p.letter,L=p.font||{},S=p.splomStash||{},E=_("visible",!p.visibleDflt),P=M._template||{},F=M.type||P.type||"-",I;if(F==="date"){var D=c.getComponentMethod("calendars","handleDefaults");D(u,M,"calendar",p.calendar),p.noTicklabelmode||(I=_("ticklabelmode"))}var R="";(!p.noTicklabelposition||F==="multicategory")&&(R=A.coerce(u,M,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:I==="period"?["outside","inside"]:h==="x"?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),p.noTicklabeloverflow||_("ticklabeloverflow",R.indexOf("inside")!==-1?"hide past domain":F==="category"||F==="multicategory"?"allow":"hide past div"),b(M,w);var N=!M.isValidRange(u.range);N&&p.reverseDflt&&(N="reversed");var z=_("autorange",N);z&&(F==="linear"||F==="-")&&_("rangemode"),_("range"),M.cleanRange(),s(u,M,_,p),F!=="category"&&!p.noHover&&_("hoverformat");var G=_("color"),Y=G!==a.color.dflt?G:L.color,ee=S.label||w._dfltTitle[h];if(v(u,M,_,F,p),!E)return M;_("title.text",ee),A.coerceFont(_,"title.font",{family:L.family,size:A.bigFont(L.size),color:Y}),i(u,M,_,F);var Z=p.hasMinor;if(Z&&(T.newContainer(M,"minor"),i(u,M,_,F,{isMinor:!0})),r(u,M,_,F,p),n(u,M,_,p),Z){var X=p.isMinor;p.isMinor=!0,n(u,M,_,p),p.isMinor=X}o(u,M,_,{dfltColor:G,bgColor:p.bgColor,showGrid:p.showGrid,hasMinor:Z,attributes:a}),Z&&!M.minor.ticks&&!M.minor.showgrid&&delete M.minor,(M.showline||M.ticks)&&_("mirror"),p.automargin&&_("automargin");var ne=F==="multicategory";if(!p.noTickson&&(F==="category"||ne)&&(M.ticks||M.showgrid)){var ce;ne&&(ce="boundaries");var Q=_("tickson",ce);Q==="boundaries"&&delete M.ticklabelposition}if(ne){var K=_("showdividers");K&&(_("dividercolor"),_("dividerwidth"))}if(F==="date")if(e(u,M,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:f}),!M.rangebreaks.length)delete M.rangebreaks;else{for(var U=0;U<M.rangebreaks.length;U++)if(M.rangebreaks[U].pattern===g){M._hasDayOfWeekBreaks=!0;break}if(b(M,w),w._has("scattergl")||w._has("splom"))for(var H=0;H<p.data.length;H++){var q=p.data[H];(q.type==="scattergl"||q.type==="splom")&&(q.visible=!1,A.warn(q.type+" traces do not work on axes with rangebreaks. Setting trace "+q.index+" to `visible: false`."))}}return M};function f(x,u,M){function _(I,D){return A.coerce(x,u,a.rangebreaks,I,D)}var p=_("enabled");if(p){var w=_("bounds");if(w&&w.length>=2){var h="",L,S;if(w.length===2){for(L=0;L<2;L++)if(S=l(w[L]),S){h=g;break}}var E=_("pattern",h);if(E===g)for(L=0;L<2;L++)S=l(w[L]),S&&(u.bounds[L]=w[L]=S-1);if(E)for(L=0;L<2;L++)switch(S=w[L],E){case g:if(!m(S)){u.enabled=!1;return}if(S=+S,S!==Math.floor(S)||S<0||S>=7){u.enabled=!1;return}u.bounds[L]=w[L]=S;break;case d:if(!m(S)){u.enabled=!1;return}if(S=+S,S<0||S>24){u.enabled=!1;return}u.bounds[L]=w[L]=S;break}if(M.autorange===!1){var P=M.range;if(P[0]<P[1]){if(w[0]<P[0]&&w[1]>P[1]){u.enabled=!1;return}}else if(w[0]>P[0]&&w[1]<P[1]){u.enabled=!1;return}}}else{var F=_("values");if(F&&F.length)_("dvalue");else{u.enabled=!1;return}}}}var y={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function l(x){if(typeof x=="string")return y[x.substr(0,3).toLowerCase()]}},{"../../lib":515,"../../plot_api/plot_template":555,"../../registry":647,"../array_container_defaults":561,"./category_order_defaults":571,"./constants":573,"./layout_attributes":579,"./line_grid_defaults":581,"./prefix_suffix_defaults":583,"./set_convert":585,"./tick_label_defaults":587,"./tick_mark_defaults":588,"./tick_value_defaults":589,"fast-isnumeric":190}],569:[function(t,B,V){var m=t("../../constants/docs"),c=m.FORMAT_LINK,A=m.DATE_FORMAT_LINK;function T(i,n){return{valType:"string",dflt:"",editType:"none",description:(n?e:a)("hover text",i)+["By default the values are formatted using "+(n?"generic number format":"`"+i+"axis.hoverformat`")+"."].join(" ")}}function e(i,n){return["Sets the "+i+" formatting rule"+(n?"for `"+n+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+c+"."].join(" ")}function a(i,n){return e(i,n)+[" And for dates see: "+A+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}B.exports={axisHoverFormat:T,descriptionOnlyNumbers:e,descriptionWithDates:a}},{"../../constants/docs":486}],570:[function(t,B,V){var m=t("../../registry"),c=t("./constants");V.id2name=function(e){if(!(typeof e!="string"||!e.match(c.AX_ID_PATTERN))){var a=e.split(" ")[0].substr(1);return a==="1"&&(a=""),e.charAt(0)+"axis"+a}},V.name2id=function(e){if(!!e.match(c.AX_NAME_PATTERN)){var a=e.substr(5);return a==="1"&&(a=""),e.charAt(0)+a}},V.cleanId=function(e,a,i){var n=/( domain)$/.test(e);if(!(typeof e!="string"||!e.match(c.AX_ID_PATTERN))&&!(a&&e.charAt(0)!==a)&&!(n&&!i)){var r=e.split(" ")[0].substr(1).replace(/^0+/,"");return r==="1"&&(r=""),e.charAt(0)+r+(n&&i?" domain":"")}},V.list=function(T,e,a){var i=T._fullLayout;if(!i)return[];var n=V.listIds(T,e),r=new Array(n.length),v;for(v=0;v<n.length;v++){var s=n[v];r[v]=i[s.charAt(0)+"axis"+s.substr(1)]}if(!a){var o=i._subplots.gl3d||[];for(v=0;v<o.length;v++){var b=i[o[v]];e?r.push(b[e+"axis"]):r.push(b.xaxis,b.yaxis,b.zaxis)}}return r},V.listIds=function(T,e){var a=T._fullLayout;if(!a)return[];var i=a._subplots;return e?i[e+"axis"]:i.xaxis.concat(i.yaxis)},V.getFromId=function(T,e,a){var i=T._fullLayout;return e=e===void 0||typeof e!="string"?e:e.replace(" domain",""),a==="x"?e=e.replace(/y[0-9]*/,""):a==="y"&&(e=e.replace(/x[0-9]*/,"")),i[V.id2name(e)]},V.getFromTrace=function(T,e,a){var i=T._fullLayout,n=null;if(m.traceIs(e,"gl3d")){var r=e.scene;r.substr(0,5)==="scene"&&(n=i[r][a+"axis"])}else n=V.getFromId(T,e[a+"axis"]||a);return n},V.idSort=function(T,e){var a=T.charAt(0),i=e.charAt(0);return a!==i?a>i?1:-1:+(T.substr(1)||1)-+(e.substr(1)||1)},V.ref2id=function(T){return/^[xyz]/.test(T)?T.split(" ")[0]:!1};function A(T,e){if(e&&e.length){for(var a=0;a<e.length;a++)if(e[a][T])return!0}return!1}V.isLinked=function(T,e){return A(e,T._axisMatchGroups)||A(e,T._axisConstraintGroups)}},{"../../registry":647,"./constants":573}],571:[function(t,B,V){function m(c,A){var T=A.dataAttr||c._id.charAt(0),e={},a,i,n;if(A.axData)a=A.axData;else for(a=[],i=0;i<A.data.length;i++){var r=A.data[i];r[T+"axis"]===c._id&&a.push(r)}for(i=0;i<a.length;i++){var v=a[i][T];for(n=0;n<v.length;n++){var s=v[n];s!=null&&(e[s]=1)}}return Object.keys(e)}B.exports=function(A,T,e,a){if(T.type==="category"){var i=A.categoryarray,n=Array.isArray(i)&&i.length>0,r;n&&(r="array");var v=e("categoryorder",r),s;v==="array"&&(s=e("categoryarray")),!n&&v==="array"&&(v=T.categoryorder="trace"),v==="trace"?T._initialCategories=[]:v==="array"?T._initialCategories=s.slice():(s=m(T,a).sort(),v==="category ascending"?T._initialCategories=s:v==="category descending"&&(T._initialCategories=s.reverse()))}}},{}],572:[function(t,B,V){var m=t("fast-isnumeric"),c=t("../../lib"),A=t("../../constants/numerical"),T=A.ONEDAY,e=A.ONEWEEK;V.dtick=function(a,i){var n=i==="log",r=i==="date",v=i==="category",s=r?T:1;if(!a)return s;if(m(a))return a=Number(a),a<=0?s:v?Math.max(1,Math.round(a)):r?Math.max(.1,a):a;if(typeof a!="string"||!(r||n))return s;var o=a.charAt(0),b=a.substr(1);return b=m(b)?Number(b):0,b<=0||!(r&&o==="M"&&b===Math.round(b)||n&&o==="L"||n&&o==="D"&&(b===1||b===2))?s:a},V.tick0=function(a,i,n,r){if(i==="date")return c.cleanDate(a,c.dateTick0(n,r%e===0?1:0));if(!(r==="D1"||r==="D2"))return m(a)?Number(a):0}},{"../../constants/numerical":491,"../../lib":515,"fast-isnumeric":190}],573:[function(t,B,V){var m=t("../../lib/regex").counter;B.exports={idRegex:{x:m("x","( domain)?"),y:m("y","( domain)?")},attrRegex:m("[xy]axis"),xAxisMatch:m("xaxis"),yAxisMatch:m("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib/regex":532}],574:[function(t,B,V){var m=t("../../lib"),c=t("./autorange"),A=t("./axis_ids").id2name,T=t("./layout_attributes"),e=t("./scale_zoom"),a=t("./set_convert"),i=t("../../constants/numerical").ALMOST_EQUAL,n=t("../../constants/alignment").FROM_BL;V.handleDefaults=function(f,y,l){var x=l.axIds,u=l.axHasImage,M=y._axisConstraintGroups=[],_=y._axisMatchGroups=[],p,w,h,L,S,E,P,F;for(p=0;p<x.length;p++)L=A(x[p]),S=f[L],E=y[L],r(S,E,{axIds:x,layoutOut:y,hasImage:u[L]});function I(X,ne){for(p=0;p<X.length;p++){w=X[p];for(h in w)y[A(h)][ne]=w}}for(I(_,"_matchGroup"),p=0;p<M.length;p++){w=M[p];for(h in w)if(E=y[A(h)],E.fixedrange){for(var D in w){var R=A(D);(f[R]||{}).fixedrange===!1&&m.warn("fixedrange was specified as false for axis "+R+" but was overridden because another axis in its constraint group has fixedrange true"),y[R].fixedrange=!0}break}}for(p=0;p<M.length;){w=M[p];for(h in w){E=y[A(h)],E._matchGroup&&Object.keys(E._matchGroup).length===Object.keys(w).length&&(M.splice(p,1),p--);break}p++}I(M,"_constraintGroup");var N=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],z=!1,G=!1;function Y(){F=E[P],P==="rangebreaks"&&(G=E._hasDayOfWeekBreaks)}for(p=0;p<_.length;p++){w=_[p];for(var ee=0;ee<N.length;ee++){P=N[ee],F=null;var Z;for(h in w)if(L=A(h),S=f[L],E=y[L],P in E){if(!E.matches&&(Z=E,P in S)){Y();break}F===null&&P in S&&Y()}if(P==="range"&&F&&(z=!0),P==="autorange"&&F===null&&z&&(F=!1),F===null&&P in Z&&(F=Z[P]),F!==null)for(h in w)E=y[A(h)],E[P]=P==="range"?F.slice():F,P==="rangebreaks"&&(E._hasDayOfWeekBreaks=G,a(E,y))}}};function r(f,y,l){var x=l.axIds,u=l.layoutOut,M=l.hasImage,_=u._axisConstraintGroups,p=u._axisMatchGroups,w=y._id,h=w.charAt(0),L=((u._splomAxes||{})[h]||{})[w]||{},S=y._id,E=S.charAt(0)==="x";y._matchGroup=null,y._constraintGroup=null;function P(K,U){return m.coerce(f,y,T,K,U)}P("constrain",M?"domain":"range"),m.coerce(f,y,{constraintoward:{valType:"enumerated",values:E?["left","center","right"]:["bottom","middle","top"],dflt:E?"center":"middle"}},"constraintoward");var F=y.type,I,D,R=[];for(I=0;I<x.length;I++)if(D=x[I],D!==S){var N=u[A(D)];N.type===F&&R.push(D)}var z=s(_,S);if(z){var G=[];for(I=0;I<R.length;I++)D=R[I],z[D]||G.push(D);R=G}var Y=R.length,ee,Z;Y&&(f.matches||L.matches)&&(ee=m.coerce(f,y,{matches:{valType:"enumerated",values:R,dflt:R.indexOf(L.matches)!==-1?L.matches:void 0}},"matches"));var X=M&&!E?y.anchor:void 0;if(Y&&!ee&&(f.scaleanchor||X)&&(Z=m.coerce(f,y,{scaleanchor:{valType:"enumerated",values:R}},"scaleanchor",X)),ee){y._matchGroup=o(p,S,ee,1);var ne=u[A(ee)],ce=v(u,y)/v(u,ne);E!==(ee.charAt(0)==="x")&&(ce=(E?"x":"y")+ce),o(_,S,ee,ce)}else f.matches&&x.indexOf(f.matches)!==-1&&m.warn("ignored "+y._name+'.matches: "'+f.matches+'" to avoid an infinite loop');if(Z){var Q=P("scaleratio");Q||(Q=y.scaleratio=1),o(_,S,Z,Q)}else f.scaleanchor&&x.indexOf(f.scaleanchor)!==-1&&m.warn("ignored "+y._name+'.scaleanchor: "'+f.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function v(f,y){var l=y.domain;return l||(l=f[A(y.overlaying)].domain),l[1]-l[0]}function s(f,y){for(var l=0;l<f.length;l++)if(f[l][y])return f[l];return null}function o(f,y,l,x){var u,M,_,p,w,h=s(f,y);h===null?(h={},h[y]=1,w=f.length,f.push(h)):w=f.indexOf(h);var L=Object.keys(h);for(u=0;u<f.length;u++)if(_=f[u],u!==w&&_[l]){var S=_[l];for(M=0;M<L.length;M++)p=L[M],_[p]=b(S,b(x,h[p]));f.splice(w,1);return}if(x!==1)for(M=0;M<L.length;M++){var E=L[M];h[E]=b(x,h[E])}h[l]=1}function b(f,y){var l="",x="",u,M;typeof f=="string"&&(l=f.match(/^[xy]*/)[0],u=l.length,f=+f.substr(u)),typeof y=="string"&&(x=y.match(/^[xy]*/)[0],M=x.length,y=+y.substr(M));var _=f*y;return!u&&!M?_:!u||!M||l.charAt(0)===x.charAt(0)?l+x+f*y:u===M?_:(u>M?l.substr(M):x.substr(u))+_}function g(f,y){for(var l=y._size,x=l.h/l.w,u={},M=Object.keys(f),_=0;_<M.length;_++){var p=M[_],w=f[p];if(typeof w=="string"){var h=w.match(/^[xy]*/)[0],L=h.length;w=+w.substr(L);for(var S=h.charAt(0)==="y"?x:1/x,E=0;E<L;E++)w*=S}u[p]=w}return u}V.enforce=function(y){var l=y._fullLayout,x=l._axisConstraintGroups||[],u,M,_,p,w,h,L,S;for(u=0;u<x.length;u++){_=g(x[u],l);var E=Object.keys(_),P=1/0,F=0,I=1/0,D={},R={},N=!1;for(M=0;M<E.length;M++)p=E[M],R[p]=w=l[A(p)],w._inputDomain?w.domain=w._inputDomain.slice():w._inputDomain=w.domain.slice(),w._inputRange||(w._inputRange=w.range.slice()),w.setScale(),D[p]=h=Math.abs(w._m)/_[p],P=Math.min(P,h),(w.constrain==="domain"||!w._constraintShrinkable)&&(I=Math.min(I,h)),delete w._constraintShrinkable,F=Math.max(F,h),w.constrain==="domain"&&(N=!0);if(!(P>i*F&&!N)){for(M=0;M<E.length;M++)if(p=E[M],h=D[p],w=R[p],L=w.constrain,h!==I||L==="domain")if(S=h/I,L==="range")e(w,S);else{var z=w._inputDomain,G=(w.domain[1]-w.domain[0])/(z[1]-z[0]),Y=(w.r2l(w.range[1])-w.r2l(w.range[0]))/(w.r2l(w._inputRange[1])-w.r2l(w._inputRange[0]));if(S/=G,S*Y<1){w.domain=w._input.domain=z.slice(),e(w,S);continue}if(Y<1&&(w.range=w._input.range=w._inputRange.slice(),S*=Y),w.autorange){var ee=w.r2l(w.range[0]),Z=w.r2l(w.range[1]),X=(ee+Z)/2,ne=X,ce=X,Q=Math.abs(Z-X),K=X-Q*S*1.0001,U=X+Q*S*1.0001,H=c.makePadFn(l,w,0),q=c.makePadFn(l,w,1);d(w,S);var re=Math.abs(w._m),j=c.concatExtremes(y,w),$=j.min,ie=j.max,oe,ae;for(ae=0;ae<$.length;ae++)oe=$[ae].val-H($[ae])/re,oe>K&&oe<ne&&(ne=oe);for(ae=0;ae<ie.length;ae++)oe=ie[ae].val+q(ie[ae])/re,oe<U&&oe>ce&&(ce=oe);var se=(ce-ne)/(2*Q);S/=se,ne=w.l2r(ne),ce=w.l2r(ce),w.range=w._input.range=ee<Z?[ne,ce]:[ce,ne]}d(w,S)}}}},V.getAxisGroup=function(y,l){for(var x=y._axisMatchGroups,u=0;u<x.length;u++){var M=x[u];if(M[l])return"g"+u}return l},V.clean=function(y,l){if(l._inputDomain){for(var x=!1,u=l._id,M=y._fullLayout._axisConstraintGroups,_=0;_<M.length;_++)if(M[_][u]){x=!0;break}(!x||l.constrain!=="domain")&&(l._input.domain=l.domain=l._inputDomain,delete l._inputDomain)}};function d(f,y){var l=f._inputDomain,x=n[f.constraintoward],u=l[0]+(l[1]-l[0])*x;f.domain=f._input.domain=[u+(l[0]-u)/y,u+(l[1]-u)/y],f.setScale()}},{"../../constants/alignment":483,"../../constants/numerical":491,"../../lib":515,"./autorange":565,"./axis_ids":570,"./layout_attributes":579,"./scale_zoom":584,"./set_convert":585}],575:[function(t,B,V){var m=t("@plotly/d3"),c=t("../../lib"),A=c.numberFormat,T=t("tinycolor2"),e=t("has-passive-events"),a=t("../../registry"),i=c.strTranslate,n=t("../../lib/svg_text_utils"),r=t("../../components/color"),v=t("../../components/drawing"),s=t("../../components/fx"),o=t("./axes"),b=t("../../lib/setcursor"),g=t("../../components/dragelement"),d=t("../../components/dragelement/helpers"),f=d.selectingOrDrawing,y=d.freeMode,l=t("../../constants/alignment").FROM_TL,x=t("../../lib/clear_gl_canvases"),u=t("../../plot_api/subroutines").redrawReglTraces,M=t("../plots"),_=t("./axis_ids").getFromId,p=t("../../components/selections").prepSelect,w=t("../../components/selections").clearOutline,h=t("../../components/selections").selectOnClick,L=t("./scale_zoom"),S=t("./constants"),E=S.MINDRAG,P=S.MINZOOM,F=!0;function I(oe,ae,se,_e,ue,ye,xe,me){var be=oe._fullLayout._zoomlayer,ke=xe+me==="nsew",De=(xe+me).length===1,Ve,Ae,Le,je,Ye,ze,Ie,We,pt,Ft,Qt,zt,Et,Xt,Nt,Ct,Xe,at,Ge,Se,He,Ke,qe;function Tt(){if(Ve=ae.xaxis,Ae=ae.yaxis,pt=Ve._length,Ft=Ae._length,Ie=Ve._offset,We=Ae._offset,Le={},Le[Ve._id]=Ve,je={},je[Ae._id]=Ae,xe&&me)for(var wr=ae.overlays,Sr=0;Sr<wr.length;Sr++){var Zr=wr[Sr].xaxis;Le[Zr._id]=Zr;var ir=wr[Sr].yaxis;je[ir._id]=ir}Ye=ie(Le),ze=ie(je),Et=N(Ye,me),Xt=N(ze,xe),Nt=!Xt&&!Et,zt=j(oe,oe._fullLayout._axisMatchGroups,Le,je),Qt=j(oe,oe._fullLayout._axisConstraintGroups,Le,je,zt);var xr=Qt.isSubplotConstrained||zt.isSubplotConstrained;Ct=me||xr,Xe=xe||xr;var Rr=oe._fullLayout;at=Rr._has("scattergl"),Ge=Rr._has("splom"),Se=Rr._has("svg")}Tt();var mt=Z(Xt+Et,oe._fullLayout.dragmode,ke),At=R(ae,xe+me+"drag",mt,se,_e,ue,ye);if(Nt&&!ke)return At.onmousedown=null,At.style.pointerEvents="none",At;var Ht={element:At,gd:oe,plotinfo:ae};Ht.prepFn=function(wr,Sr,Zr){var ir=Ht.dragmode,xr=oe._fullLayout.dragmode;xr!==ir&&(Ht.dragmode=xr),Tt(),Ke=oe._fullLayout._invScaleX,qe=oe._fullLayout._invScaleY,Nt||(ke?wr.shiftKey?xr==="pan"?xr="zoom":f(xr)||(xr="pan"):wr.ctrlKey&&(xr="pan"):xr="pan"),y(xr)?Ht.minDrag=1:Ht.minDrag=void 0,f(xr)?(Ht.xaxes=Ye,Ht.yaxes=ze,p(wr,Sr,Zr,Ht,xr)):(Ht.clickFn=Vt,f(ir)&&It(),Nt||(xr==="zoom"?(Ht.moveFn=et,Ht.doneFn=st,Ht.minDrag=1,Ar(wr,Sr,Zr)):xr==="pan"&&(Ht.moveFn=it,Ht.doneFn=yt))),oe._fullLayout._redrag=function(){var Rr=oe._dragdata;if(Rr&&Rr.element===At){var Br=oe._fullLayout.dragmode;f(Br)||(Tt(),Pt([0,0,pt,Ft]),Ht.moveFn(Rr.dx,Rr.dy))}}};function It(){Ht.plotinfo.selection=!1,w(oe)}function Vt(wr,Sr){var Zr=Ht.gd;if(Zr._fullLayout._activeShapeIndex>=0){Zr._fullLayout._deactivateShape(Zr);return}var ir=Zr._fullLayout.clickmode;if(K(Zr),wr===2&&!De&&St(),ke)ir.indexOf("select")>-1&&h(Sr,Zr,Ye,ze,ae.id,Ht),ir.indexOf("event")>-1&&s.click(Zr,Sr,ae.id);else if(wr===1&&De){var xr=xe?Ae:Ve,Rr=xe==="s"||me==="w"?0:1,Br=xr._name+".range["+Rr+"]",Cr=z(xr,Rr),nt="left",Dt="middle";if(xr.fixedrange)return;xe?(Dt=xe==="n"?"top":"bottom",xr.side==="right"&&(nt="right")):me==="e"&&(nt="right"),Zr._context.showAxisRangeEntryBoxes&&m.select(At).call(n.makeEditable,{gd:Zr,immediate:!0,background:Zr._fullLayout.paper_bgcolor,text:String(Cr),fill:xr.tickfont?xr.tickfont.color:"#444",horizontalAlign:nt,verticalAlign:Dt}).on("edit",function(Zt){var sr=xr.d2r(Zt);sr!==void 0&&a.call("_guiRelayout",Zr,Br,sr)})}}g.init(Ht);var jt,Yt,or,Gr,on,Jr,ot,er,Kt,fr;function Ar(wr,Sr,Zr){var ir=At.getBoundingClientRect();jt=Sr-ir.left,Yt=Zr-ir.top,oe._fullLayout._calcInverseTransform(oe);var xr=c.apply3DTransform(oe._fullLayout._invTransform)(jt,Yt);jt=xr[0],Yt=xr[1],or={l:jt,r:jt,w:0,t:Yt,b:Yt,h:0},Gr=oe._hmpixcount?oe._hmlumcount/oe._hmpixcount:T(oe._fullLayout.plot_bgcolor).getLuminance(),on="M0,0H"+pt+"V"+Ft+"H0V0",Jr=!1,ot="xy",fr=!1,er=X(be,Gr,Ie,We,on),Kt=ne(be,Ie,We)}function et(wr,Sr){if(oe._transitioningWithDuration)return!1;var Zr=Math.max(0,Math.min(pt,Ke*wr+jt)),ir=Math.max(0,Math.min(Ft,qe*Sr+Yt)),xr=Math.abs(Zr-jt),Rr=Math.abs(ir-Yt);or.l=Math.min(jt,Zr),or.r=Math.max(jt,Zr),or.t=Math.min(Yt,ir),or.b=Math.max(Yt,ir);function Br(){ot="",or.r=or.l,or.t=or.b,Kt.attr("d","M0,0Z")}if(Qt.isSubplotConstrained)xr>P||Rr>P?(ot="xy",xr/pt>Rr/Ft?(Rr=xr*Ft/pt,Yt>ir?or.t=Yt-Rr:or.b=Yt+Rr):(xr=Rr*pt/Ft,jt>Zr?or.l=jt-xr:or.r=jt+xr),Kt.attr("d",re(or))):Br();else if(zt.isSubplotConstrained)if(xr>P||Rr>P){ot="xy";var Cr=Math.min(or.l/pt,(Ft-or.b)/Ft),nt=Math.max(or.r/pt,(Ft-or.t)/Ft);or.l=Cr*pt,or.r=nt*pt,or.b=(1-Cr)*Ft,or.t=(1-nt)*Ft,Kt.attr("d",re(or))}else Br();else!Xt||Rr<Math.min(Math.max(xr*.6,E),P)?xr<E||!Et?Br():(or.t=0,or.b=Ft,ot="x",Kt.attr("d",H(or,Yt))):!Et||xr<Math.min(Rr*.6,P)?(or.l=0,or.r=pt,ot="y",Kt.attr("d",q(or,jt))):(ot="xy",Kt.attr("d",re(or)));or.w=or.r-or.l,or.h=or.b-or.t,ot&&(fr=!0),oe._dragged=fr,ce(er,Kt,or,on,Jr,Gr),$e(),oe.emit("plotly_relayouting",He),Jr=!0}function $e(){He={},(ot==="xy"||ot==="x")&&(G(Ye,or.l/pt,or.r/pt,He,Qt.xaxes),ut("x",He)),(ot==="xy"||ot==="y")&&(G(ze,(Ft-or.b)/Ft,(Ft-or.t)/Ft,He,Qt.yaxes),ut("y",He))}function st(){$e(),K(oe),yt(),U(oe)}var ct=[0,0,pt,Ft],Mt=null,Ut=S.REDRAWDELAY,Pe=ae.mainplot?oe._fullLayout._plots[ae.mainplot]:ae;function Ee(wr){if(!oe._context._scrollZoom.cartesian&&!oe._fullLayout._enablescrollzoom)return;if(It(),oe._transitioningWithDuration){wr.preventDefault(),wr.stopPropagation();return}Tt(),clearTimeout(Mt);var Sr=-wr.deltaY;if(isFinite(Sr)||(Sr=wr.wheelDelta/10),!isFinite(Sr)){c.log("Did not find wheel motion attributes: ",wr);return}var Zr=Math.exp(-Math.min(Math.max(Sr,-20),20)/200),ir=Pe.draglayer.select(".nsewdrag").node().getBoundingClientRect(),xr=(wr.clientX-ir.left)/ir.width,Rr=(ir.bottom-wr.clientY)/ir.height,Br;function Cr(nt,Dt,Zt){if(nt.fixedrange)return;var sr=c.simpleMap(nt.range,nt.r2l),zr=sr[0]+(sr[1]-sr[0])*Dt;function Ur(Lr){return nt.l2r(zr+(Lr-zr)*Zt)}nt.range=sr.map(Ur)}if(Ct){for(me||(xr=.5),Br=0;Br<Ye.length;Br++)Cr(Ye[Br],xr,Zr);ut("x"),ct[2]*=Zr,ct[0]+=ct[2]*xr*(1/Zr-1)}if(Xe){for(xe||(Rr=.5),Br=0;Br<ze.length;Br++)Cr(ze[Br],Rr,Zr);ut("y"),ct[3]*=Zr,ct[1]+=ct[3]*(1-Rr)*(1/Zr-1)}Pt(ct),vt(),oe.emit("plotly_relayouting",He),Mt=setTimeout(function(){!oe._fullLayout||(ct=[0,0,pt,Ft],yt())},Ut),wr.preventDefault()}xe.length*me.length!==1&&$(At,Ee);function it(wr,Sr){if(wr=wr*Ke,Sr=Sr*qe,oe._transitioningWithDuration)return;if(oe._fullLayout._replotting=!0,Et==="ew"||Xt==="ns"){var Zr=Et?-wr:0,ir=Xt?-Sr:0;if(zt.isSubplotConstrained){if(Et&&Xt){var xr=(wr/pt-Sr/Ft)/2;wr=xr*pt,Sr=-xr*Ft,Zr=-wr,ir=-Sr}Xt?Zr=-ir*pt/Ft:ir=-Zr*Ft/pt}Et&&(Y(Ye,wr),ut("x")),Xt&&(Y(ze,Sr),ut("y")),Pt([Zr,ir,pt,Ft]),vt(),oe.emit("plotly_relayouting",He);return}function Rr(Ur,Lr,Tr){for(var Wr=1-Lr,An,vn,Un=0;Un<Ur.length;Un++){var Ln=Ur[Un];if(!Ln.fixedrange){An=Ln,vn=Ln._rl[Wr]+(Ln._rl[Lr]-Ln._rl[Wr])/ee(Tr/Ln._length);var Zn=Ln.l2r(vn);Zn!==!1&&Zn!==void 0&&(Ln.range[Lr]=Zn)}}return An._length*(An._rl[Lr]-vn)/(An._rl[Lr]-An._rl[Wr])}var Br=Et==="w"==(Xt==="n")?1:-1;if(Et&&Xt&&(Qt.isSubplotConstrained||zt.isSubplotConstrained)){var Cr=(wr/pt+Br*Sr/Ft)/2;wr=Cr*pt,Sr=Br*Cr*Ft}var nt,Dt;if(Et==="w"?wr=Rr(Ye,0,wr):Et==="e"?wr=Rr(Ye,1,-wr):Et||(wr=0),Xt==="n"?Sr=Rr(ze,1,Sr):Xt==="s"?Sr=Rr(ze,0,-Sr):Xt||(Sr=0),nt=Et==="w"?wr:0,Dt=Xt==="n"?Sr:0,Qt.isSubplotConstrained&&!zt.isSubplotConstrained||zt.isSubplotConstrained&&Et&&Xt&&Br>0){var Zt;if(zt.isSubplotConstrained||!Et&&Xt.length===1){for(Zt=0;Zt<Ye.length;Zt++)Ye[Zt].range=Ye[Zt]._r.slice(),L(Ye[Zt],1-Sr/Ft);wr=Sr*pt/Ft,nt=wr/2}if(zt.isSubplotConstrained||!Xt&&Et.length===1){for(Zt=0;Zt<ze.length;Zt++)ze[Zt].range=ze[Zt]._r.slice(),L(ze[Zt],1-wr/pt);Sr=wr*Ft/pt,Dt=Sr/2}}(!zt.isSubplotConstrained||!Xt)&&ut("x"),(!zt.isSubplotConstrained||!Et)&&ut("y");var sr=pt-wr,zr=Ft-Sr;zt.isSubplotConstrained&&!(Et&&Xt)&&(Et?(Dt=nt?0:wr*Ft/pt,zr=sr*Ft/pt):(nt=Dt?0:Sr*pt/Ft,sr=zr*pt/Ft)),Pt([nt,Dt,sr,zr]),vt(),oe.emit("plotly_relayouting",He)}function ut(wr,Sr){for(var Zr=zt.isSubplotConstrained?{x:ze,y:Ye}[wr]:zt[wr+"axes"],ir=zt.isSubplotConstrained?{x:Ye,y:ze}[wr]:[],xr=0;xr<Zr.length;xr++){var Rr=Zr[xr],Br=Rr._id,Cr=zt.xLinks[Br]||zt.yLinks[Br],nt=ir[0]||Le[Cr]||je[Cr];nt&&(Sr?(Sr[Rr._name+".range[0]"]=Sr[nt._name+".range[0]"],Sr[Rr._name+".range[1]"]=Sr[nt._name+".range[1]"]):Rr.range=nt.range.slice())}}function vt(){var wr=[],Sr;function Zr(Rr){for(Sr=0;Sr<Rr.length;Sr++)Rr[Sr].fixedrange||wr.push(Rr[Sr]._id)}for(Ct&&(Zr(Ye),Zr(Qt.xaxes),Zr(zt.xaxes)),Xe&&(Zr(ze),Zr(Qt.yaxes),Zr(zt.yaxes)),He={},Sr=0;Sr<wr.length;Sr++){var ir=wr[Sr],xr=_(oe,ir);o.drawOne(oe,xr,{skipTitle:!0}),He[xr._name+".range[0]"]=xr.range[0],He[xr._name+".range[1]"]=xr.range[1]}o.redrawComponents(oe,wr)}function St(){if(!oe._transitioningWithDuration){var wr=oe._context.doubleClick,Sr=[];Et&&(Sr=Sr.concat(Ye)),Xt&&(Sr=Sr.concat(ze)),zt.xaxes&&(Sr=Sr.concat(zt.xaxes)),zt.yaxes&&(Sr=Sr.concat(zt.yaxes));var Zr={},ir,xr,Rr;if(wr==="reset+autosize"){for(wr="autosize",xr=0;xr<Sr.length;xr++)if(ir=Sr[xr],ir._rangeInitial&&(ir.range[0]!==ir._rangeInitial[0]||ir.range[1]!==ir._rangeInitial[1])||!ir._rangeInitial&&!ir.autorange){wr="reset";break}}if(wr==="autosize")for(xr=0;xr<Sr.length;xr++)ir=Sr[xr],ir.fixedrange||(Zr[ir._name+".autorange"]=!0);else if(wr==="reset")for((Et||Qt.isSubplotConstrained)&&(Sr=Sr.concat(Qt.xaxes)),Xt&&!Qt.isSubplotConstrained&&(Sr=Sr.concat(Qt.yaxes)),Qt.isSubplotConstrained&&(Et?Xt||(Sr=Sr.concat(ze)):Sr=Sr.concat(Ye)),xr=0;xr<Sr.length;xr++)ir=Sr[xr],ir.fixedrange||(ir._rangeInitial?(Rr=ir._rangeInitial,Zr[ir._name+".range[0]"]=Rr[0],Zr[ir._name+".range[1]"]=Rr[1]):Zr[ir._name+".autorange"]=!0);oe.emit("plotly_doubleclick",null),a.call("_guiRelayout",oe,Zr)}}function yt(){Pt([0,0,pt,Ft]),c.syncOrAsync([M.previousPromises,function(){oe._fullLayout._replotting=!1,a.call("_guiRelayout",oe,He)}],oe)}function Pt(wr){var Sr=oe._fullLayout,Zr=Sr._plots,ir=Sr._subplots.cartesian,xr,Rr,Br,Cr;if(Ge&&a.subplotsRegistry.splom.drag(oe),at){for(xr=0;xr<ir.length;xr++)if(Rr=Zr[ir[xr]],Br=Rr.xaxis,Cr=Rr.yaxis,Rr._scene){var nt=c.simpleMap(Br.range,Br.r2l),Dt=c.simpleMap(Cr.range,Cr.r2l);Rr._scene.update({range:[nt[0],Dt[0],nt[1],Dt[1]]})}}if((Ge||at)&&(x(oe),u(oe)),Se){var Zt=wr[2]/Ve._length,sr=wr[3]/Ae._length;for(xr=0;xr<ir.length;xr++){Rr=Zr[ir[xr]],Br=Rr.xaxis,Cr=Rr.yaxis;var zr=(Ct||zt.isSubplotConstrained)&&!Br.fixedrange&&Le[Br._id],Ur=(Xe||zt.isSubplotConstrained)&&!Cr.fixedrange&&je[Cr._id],Lr,Tr,Wr,An;if(zr?(Lr=Zt,Wr=me||zt.isSubplotConstrained?wr[0]:kr(Br,Lr)):zt.xaHash[Br._id]?(Lr=Zt,Wr=wr[0]*Br._length/Ve._length):zt.yaHash[Br._id]?(Lr=sr,Wr=Xt==="ns"?-wr[1]*Br._length/Ae._length:kr(Br,Lr,{n:"top",s:"bottom"}[Xt])):(Lr=Wt(Br,Zt,sr),Wr=ar(Br,Lr)),Ur?(Tr=sr,An=xe||zt.isSubplotConstrained?wr[1]:kr(Cr,Tr)):zt.yaHash[Cr._id]?(Tr=sr,An=wr[1]*Cr._length/Ae._length):zt.xaHash[Cr._id]?(Tr=Zt,An=Et==="ew"?-wr[0]*Cr._length/Ve._length:kr(Cr,Tr,{e:"right",w:"left"}[Et])):(Tr=Wt(Cr,Zt,sr),An=ar(Cr,Tr)),!(!Lr&&!Tr)){Lr||(Lr=1),Tr||(Tr=1);var vn=Br._offset-Wr/Lr,Un=Cr._offset-An/Tr;Rr.clipRect.call(v.setTranslate,Wr,An).call(v.setScale,Lr,Tr),Rr.plot.call(v.setTranslate,vn,Un).call(v.setScale,1/Lr,1/Tr),(Lr!==Rr.xScaleFactor||Tr!==Rr.yScaleFactor)&&(v.setPointGroupScale(Rr.zoomScalePts,Lr,Tr),v.setTextPointsScale(Rr.zoomScaleTxt,Lr,Tr)),v.hideOutsideRangePoints(Rr.clipOnAxisFalseTraces,Rr),Rr.xScaleFactor=Lr,Rr.yScaleFactor=Tr}}}}function Wt(wr,Sr,Zr){return wr.fixedrange?0:Ct&&Qt.xaHash[wr._id]?Sr:Xe&&(Qt.isSubplotConstrained?Qt.xaHash:Qt.yaHash)[wr._id]?Zr:0}function ar(wr,Sr){return Sr?(wr.range=wr._r.slice(),L(wr,Sr),kr(wr,Sr)):0}function kr(wr,Sr,Zr){return wr._length*(1-Sr)*l[Zr||wr.constraintoward||"middle"]}return At}function D(oe,ae,se,_e){var ue=c.ensureSingle(oe.draglayer,ae,se,function(ye){ye.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",oe.id)});return ue.call(b,_e),ue.node()}function R(oe,ae,se,_e,ue,ye,xe){var me=D(oe,"rect",ae,se);return m.select(me).call(v.setRect,_e,ue,ye,xe),me}function N(oe,ae){for(var se=0;se<oe.length;se++)if(!oe[se].fixedrange)return ae;return""}function z(oe,ae){var se=oe.range[ae],_e=Math.abs(se-oe.range[1-ae]),ue;return oe.type==="date"?se:oe.type==="log"?(ue=Math.ceil(Math.max(0,-Math.log(_e)/Math.LN10))+3,A("."+ue+"g")(Math.pow(10,se))):(ue=Math.floor(Math.log(Math.abs(se))/Math.LN10)-Math.floor(Math.log(_e)/Math.LN10)+4,A("."+String(ue)+"g")(se))}function G(oe,ae,se,_e,ue){for(var ye=0;ye<oe.length;ye++){var xe=oe[ye];if(!xe.fixedrange)if(xe.rangebreaks){var me=xe._id.charAt(0)==="y",be=me?1-ae:ae,ke=me?1-se:se;_e[xe._name+".range[0]"]=xe.l2r(xe.p2l(be*xe._length)),_e[xe._name+".range[1]"]=xe.l2r(xe.p2l(ke*xe._length))}else{var De=xe._rl[0],Ve=xe._rl[1]-De;_e[xe._name+".range[0]"]=xe.l2r(De+Ve*ae),_e[xe._name+".range[1]"]=xe.l2r(De+Ve*se)}}if(ue&&ue.length){var Ae=(ae+(1-se))/2;G(ue,Ae,1-Ae,_e,[])}}function Y(oe,ae){for(var se=0;se<oe.length;se++){var _e=oe[se];if(!_e.fixedrange)if(_e.rangebreaks){var ue=0,ye=_e._length,xe=_e.p2l(ue+ae)-_e.p2l(ue),me=_e.p2l(ye+ae)-_e.p2l(ye),be=(xe+me)/2;_e.range=[_e.l2r(_e._rl[0]-be),_e.l2r(_e._rl[1]-be)]}else _e.range=[_e.l2r(_e._rl[0]-ae/_e._m),_e.l2r(_e._rl[1]-ae/_e._m)]}}function ee(oe){return 1-(oe>=0?Math.min(oe,.9):1/(1/Math.max(oe,-.3)+3.222))}function Z(oe,ae,se){return oe?oe==="nsew"?se?"":ae==="pan"?"move":"crosshair":oe.toLowerCase()+"-resize":"pointer"}function X(oe,ae,se,_e,ue){return oe.append("path").attr("class","zoombox").style({fill:ae>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",i(se,_e)).attr("d",ue+"Z")}function ne(oe,ae,se){return oe.append("path").attr("class","zoombox-corners").style({fill:r.background,stroke:r.defaultLine,"stroke-width":1,opacity:0}).attr("transform",i(ae,se)).attr("d","M0,0Z")}function ce(oe,ae,se,_e,ue,ye){oe.attr("d",_e+"M"+se.l+","+se.t+"v"+se.h+"h"+se.w+"v-"+se.h+"h-"+se.w+"Z"),Q(oe,ae,ue,ye)}function Q(oe,ae,se,_e){se||(oe.transition().style("fill",_e>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),ae.transition().style("opacity",1).duration(200))}function K(oe){m.select(oe).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function U(oe){F&&oe.data&&oe._context.showTips&&(c.notifier(c._(oe,"Double-click to zoom back out"),"long"),F=!1)}function H(oe,ae){return"M"+(oe.l-.5)+","+(ae-P-.5)+"h-3v"+(2*P+1)+"h3ZM"+(oe.r+.5)+","+(ae-P-.5)+"h3v"+(2*P+1)+"h-3Z"}function q(oe,ae){return"M"+(ae-P-.5)+","+(oe.t-.5)+"v-3h"+(2*P+1)+"v3ZM"+(ae-P-.5)+","+(oe.b+.5)+"v3h"+(2*P+1)+"v-3Z"}function re(oe){var ae=Math.floor(Math.min(oe.b-oe.t,oe.r-oe.l,P)/2);return"M"+(oe.l-3.5)+","+(oe.t-.5+ae)+"h3v"+-ae+"h"+ae+"v-3h-"+(ae+3)+"ZM"+(oe.r+3.5)+","+(oe.t-.5+ae)+"h-3v"+-ae+"h"+-ae+"v-3h"+(ae+3)+"ZM"+(oe.r+3.5)+","+(oe.b+.5-ae)+"h-3v"+ae+"h"+-ae+"v3h"+(ae+3)+"ZM"+(oe.l-3.5)+","+(oe.b+.5-ae)+"h3v"+ae+"h"+ae+"v3h-"+(ae+3)+"Z"}function j(oe,ae,se,_e,ue){for(var ye=!1,xe={},me={},be,ke,De,Ve,Ae=(ue||{}).xaHash,Le=(ue||{}).yaHash,je=0;je<ae.length;je++){var Ye=ae[je];for(be in se)if(Ye[be]){for(De in Ye)!(ue&&(Ae[De]||Le[De]))&&!(De.charAt(0)==="x"?se:_e)[De]&&(xe[De]=be);for(ke in _e)!(ue&&(Ae[ke]||Le[ke]))&&Ye[ke]&&(ye=!0)}for(ke in _e)if(Ye[ke])for(Ve in Ye)!(ue&&(Ae[Ve]||Le[Ve]))&&!(Ve.charAt(0)==="x"?se:_e)[Ve]&&(me[Ve]=ke)}ye&&(c.extendFlat(xe,me),me={});var ze={},Ie=[];for(De in xe){var We=_(oe,De);Ie.push(We),ze[We._id]=We}var pt={},Ft=[];for(Ve in me){var Qt=_(oe,Ve);Ft.push(Qt),pt[Qt._id]=Qt}return{xaHash:ze,yaHash:pt,xaxes:Ie,yaxes:Ft,xLinks:xe,yLinks:me,isSubplotConstrained:ye}}function $(oe,ae){if(!e)oe.onwheel!==void 0?oe.onwheel=ae:oe.onmousewheel!==void 0?oe.onmousewheel=ae:oe.isAddedWheelEvent||(oe.isAddedWheelEvent=!0,oe.addEventListener("wheel",ae,{passive:!1}));else{var se=oe.onwheel!==void 0?"wheel":"mousewheel";oe._onwheel&&oe.removeEventListener(se,oe._onwheel),oe._onwheel=ae,oe.addEventListener(se,ae,{passive:!1})}}function ie(oe){var ae=[];for(var se in oe)ae.push(oe[se]);return ae}B.exports={makeDragBox:I,makeDragger:D,makeRectDragger:R,makeZoombox:X,makeCorners:ne,updateZoombox:ce,xyCorners:re,transitionZoombox:Q,removeZoombox:K,showDoubleClickNotifier:U,attachWheelEventHandler:$}},{"../../components/color":367,"../../components/dragelement":386,"../../components/dragelement/helpers":385,"../../components/drawing":389,"../../components/fx":407,"../../components/selections":455,"../../constants/alignment":483,"../../lib":515,"../../lib/clear_gl_canvases":499,"../../lib/setcursor":536,"../../lib/svg_text_utils":541,"../../plot_api/subroutines":556,"../../registry":647,"../plots":628,"./axes":566,"./axis_ids":570,"./constants":573,"./scale_zoom":584,"@plotly/d3":58,"has-passive-events":229,tinycolor2:313}],576:[function(t,B,V){var m=t("@plotly/d3"),c=t("../../components/fx"),A=t("../../components/dragelement"),T=t("../../lib/setcursor"),e=t("./dragbox").makeDragBox,a=t("./constants").DRAGGERSIZE;V.initInteractions=function(n){var r=n._fullLayout;if(n._context.staticPlot){m.select(n).selectAll(".drag").remove();return}if(!(!r._has("cartesian")&&!r._has("splom"))){var v=Object.keys(r._plots||{}).sort(function(o,b){if((r._plots[o].mainplot&&!0)===(r._plots[b].mainplot&&!0)){var g=o.split("y"),d=b.split("y");return g[0]===d[0]?Number(g[1]||1)-Number(d[1]||1):Number(g[0]||1)-Number(d[0]||1)}return r._plots[o].mainplot?1:-1});v.forEach(function(o){var b=r._plots[o],g=b.xaxis,d=b.yaxis;if(!b.mainplot){var f=e(n,b,g._offset,d._offset,g._length,d._length,"ns","ew");f.onmousemove=function(x){n._fullLayout._rehover=function(){n._fullLayout._hoversubplot===o&&n._fullLayout._plots[o]&&c.hover(n,x,o)},c.hover(n,x,o),n._fullLayout._lasthover=f,n._fullLayout._hoversubplot=o},f.onmouseout=function(x){n._dragging||(n._fullLayout._hoversubplot=null,A.unhover(n,x))},n._context.showAxisDragHandles&&(e(n,b,g._offset-a,d._offset-a,a,a,"n","w"),e(n,b,g._offset+g._length,d._offset-a,a,a,"n","e"),e(n,b,g._offset-a,d._offset+d._length,a,a,"s","w"),e(n,b,g._offset+g._length,d._offset+d._length,a,a,"s","e"))}if(n._context.showAxisDragHandles){if(o===g._mainSubplot){var y=g._mainLinePosition;g.side==="top"&&(y-=a),e(n,b,g._offset+g._length*.1,y,g._length*.8,a,"","ew"),e(n,b,g._offset,y,g._length*.1,a,"","w"),e(n,b,g._offset+g._length*.9,y,g._length*.1,a,"","e")}if(o===d._mainSubplot){var l=d._mainLinePosition;d.side!=="right"&&(l-=a),e(n,b,l,d._offset+d._length*.1,a,d._length*.8,"ns",""),e(n,b,l,d._offset+d._length*.9,a,d._length*.1,"s",""),e(n,b,l,d._offset,a,d._length*.1,"n","")}}});var s=r._hoverlayer.node();s.onmousemove=function(o){o.target=n._fullLayout._lasthover,c.hover(n,o,r._hoversubplot)},s.onclick=function(o){o.target=n._fullLayout._lasthover,c.click(n,o)},s.onmousedown=function(o){n._fullLayout._lasthover.onmousedown(o)},V.updateFx(n)}},V.updateFx=function(i){var n=i._fullLayout,r=n.dragmode==="pan"?"move":"crosshair";T(n._draggers,r)}},{"../../components/dragelement":386,"../../components/fx":407,"../../lib/setcursor":536,"./constants":573,"./dragbox":575,"@plotly/d3":58}],577:[function(t,B,V){var m=t("../../registry"),c=t("../../lib"),A=t("./axis_ids");B.exports=function(e){return function(i,n){var r=i[e];if(!!Array.isArray(r))for(var v=m.subplotsRegistry.cartesian,s=v.idRegex,o=n._subplots,b=o.xaxis,g=o.yaxis,d=o.cartesian,f=n._has("cartesian")||n._has("gl2d"),y=0;y<r.length;y++){var l=r[y];if(!!c.isPlainObject(l)){var x=A.cleanId(l.xref,"x",!1),u=A.cleanId(l.yref,"y",!1),M=s.x.test(x),_=s.y.test(u);if(M||_){f||c.pushUnique(n._basePlotModules,v);var p=!1;M&&b.indexOf(x)===-1&&(b.push(x),p=!0),_&&g.indexOf(u)===-1&&(g.push(u),p=!0),p&&M&&_&&d.push(x+u)}}}}}},{"../../lib":515,"../../registry":647,"./axis_ids":570}],578:[function(t,B,V){var m=t("@plotly/d3"),c=t("../../registry"),A=t("../../lib"),T=t("../plots"),e=t("../../components/drawing"),a=t("../get_data").getModuleCalcData,i=t("./axis_ids"),n=t("./constants"),r=t("../../constants/xmlns_namespaces"),v=A.ensureSingle;function s(y,l,x){return A.ensureSingle(y,l,x,function(u){u.datum(x)})}V.name="cartesian",V.attr=["xaxis","yaxis"],V.idRoot=["x","y"],V.idRegex=n.idRegex,V.attrRegex=n.attrRegex,V.attributes=t("./attributes"),V.layoutAttributes=t("./layout_attributes"),V.supplyLayoutDefaults=t("./layout_defaults"),V.transitionAxes=t("./transition_axes"),V.finalizeSubplots=function(y,l){var x=l._subplots,u=x.xaxis,M=x.yaxis,_=x.cartesian,p=_.concat(x.gl2d||[]),w={},h={},L,S,E;for(L=0;L<p.length;L++){var P=p[L].split("y");w[P[0]]=1,h["y"+P[1]]=1}for(L=0;L<u.length;L++)S=u[L],w[S]||(E=(y[i.id2name(S)]||{}).anchor,n.idRegex.y.test(E)||(E="y"),_.push(S+E),p.push(S+E),h[E]||(h[E]=1,A.pushUnique(M,E)));for(L=0;L<M.length;L++)E=M[L],h[E]||(S=(y[i.id2name(E)]||{}).anchor,n.idRegex.x.test(S)||(S="x"),_.push(S+E),p.push(S+E),w[S]||(w[S]=1,A.pushUnique(u,S)));if(!p.length){S="",E="";for(var F in y)if(n.attrRegex.test(F)){var I=F.charAt(0);I==="x"?(!S||+F.substr(5)<+S.substr(5))&&(S=F):(!E||+F.substr(5)<+E.substr(5))&&(E=F)}S=S?i.name2id(S):"x",E=E?i.name2id(E):"y",u.push(S),M.push(E),_.push(S+E)}},V.plot=function(y,l,x,u){var M=y._fullLayout,_=M._subplots.cartesian,p=y.calcdata,w;if(!Array.isArray(l))for(l=[],w=0;w<p.length;w++)l.push(w);for(w=0;w<_.length;w++){for(var h=_[w],L=M._plots[h],S=[],E,P=0;P<p.length;P++){var F=p[P],I=F[0].trace;I.xaxis+I.yaxis===h&&((l.indexOf(I.index)!==-1||I.carpet)&&(E&&E[0].trace.xaxis+E[0].trace.yaxis===h&&["tonextx","tonexty","tonext"].indexOf(I.fill)!==-1&&S.indexOf(E)===-1&&S.push(E),S.push(F)),E=F)}o(y,L,S,x,u)}};function o(y,l,x,u,M){for(var _=n.traceLayerClasses,p=y._fullLayout,w=p._modules,h,L,S,E=[],P=[],F=0;F<w.length;F++){h=w[F];var I=h.name,D=c.modules[I].categories;if(D.svg){var R=h.layerName||I+"layer",N=h.plot;L=a(x,N),S=L[0],x=L[1],S.length&&E.push({i:_.indexOf(R),className:R,plotMethod:N,cdModule:S}),D.zoomScale&&P.push("."+R)}}E.sort(function(Y,ee){return Y.i-ee.i});var z=l.plot.selectAll("g.mlayer").data(E,function(Y){return Y.className});if(z.enter().append("g").attr("class",function(Y){return Y.className}).classed("mlayer",!0).classed("rangeplot",l.isRangePlot),z.exit().remove(),z.order(),z.each(function(Y){var ee=m.select(this),Z=Y.className;Y.plotMethod(y,l,Y.cdModule,ee,u,M),n.clipOnAxisFalseQuery.indexOf("."+Z)===-1&&e.setClipUrl(ee,l.layerClipId,y)}),p._has("scattergl")&&(h=c.getModule("scattergl"),S=a(x,h)[0],h.plot(y,l,S)),!y._context.staticPlot&&(l._hasClipOnAxisFalse&&(l.clipOnAxisFalseTraces=l.plot.selectAll(n.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),P.length)){var G=l.plot.selectAll(P.join(",")).selectAll(".trace");l.zoomScalePts=G.selectAll("path.point"),l.zoomScaleTxt=G.selectAll(".textpoint")}}V.clean=function(y,l,x,u){var M=u._plots||{},_=l._plots||{},p=u._subplots||{},w,h,L;if(u._hasOnlyLargeSploms&&!l._hasOnlyLargeSploms)for(L in M)w=M[L],w.plotgroup&&w.plotgroup.remove();var S=u._has&&u._has("gl"),E=l._has&&l._has("gl");if(S&&!E)for(L in M)w=M[L],w._scene&&w._scene.destroy();if(p.xaxis&&p.yaxis){var P=i.listIds({_fullLayout:u});for(h=0;h<P.length;h++){var F=P[h];l[i.id2name(F)]||u._infolayer.selectAll(".g-"+F+"title").remove()}}var I=u._has&&u._has("cartesian"),D=l._has&&l._has("cartesian");if(I&&!D)d(u._cartesianlayer.selectAll(".subplot"),u),u._defs.selectAll(".axesclip").remove(),delete u._axisConstraintGroups,delete u._axisMatchGroups;else if(p.cartesian)for(h=0;h<p.cartesian.length;h++){var R=p.cartesian[h];if(!_[R]){var N="."+R+",."+R+"-x,."+R+"-y";u._cartesianlayer.selectAll(N).remove(),f(R,u)}}},V.drawFramework=function(y){var l=y._fullLayout,x=b(y),u=l._cartesianlayer.selectAll(".subplot").data(x,String);u.enter().append("g").attr("class",function(M){return"subplot "+M[0]}),u.order(),u.exit().call(d,l),u.each(function(M){var _=M[0],p=l._plots[_];p.plotgroup=m.select(this),g(y,p),p.draglayer=v(l._draggers,"g",_)})},V.rangePlot=function(y,l,x){g(y,l),o(y,l,x),T.style(y)};function b(y){var l=y._fullLayout,x=l._subplots.cartesian,u=x.length,M,_,p,w,h,L,S=[],E=[];for(M=0;M<u;M++){p=x[M],w=l._plots[p],h=w.xaxis,L=w.yaxis;var P=h._mainAxis,F=L._mainAxis,I=P._id+F._id,D=l._plots[I];w.overlays=[],I!==p&&D?(w.mainplot=I,w.mainplotinfo=D,E.push(p)):(w.mainplot=void 0,w.mainplotinfo=void 0,S.push(p))}for(M=0;M<E.length;M++)p=E[M],w=l._plots[p],w.mainplotinfo.overlays.push(w);var R=S.concat(E),N=new Array(u);for(M=0;M<u;M++){p=R[M],w=l._plots[p],h=w.xaxis,L=w.yaxis;var z=[p,h.layer,L.layer,h.overlaying||"",L.overlaying||""];for(_=0;_<w.overlays.length;_++)z.push(w.overlays[_].id);N[M]=z}return N}function g(y,l){var x=l.plotgroup,u=l.id,M=n.layerValue2layerClass[l.xaxis.layer],_=n.layerValue2layerClass[l.yaxis.layer],p=y._fullLayout._hasOnlyLargeSploms;if(l.mainplot){var h=l.mainplotinfo,L=h.plotgroup,S=u+"-x",E=u+"-y";l.minorGridlayer=h.minorGridlayer,l.gridlayer=h.gridlayer,l.zerolinelayer=h.zerolinelayer,v(h.overlinesBelow,"path",S),v(h.overlinesBelow,"path",E),v(h.overaxesBelow,"g",S),v(h.overaxesBelow,"g",E),l.plot=v(h.overplot,"g",u),v(h.overlinesAbove,"path",S),v(h.overlinesAbove,"path",E),v(h.overaxesAbove,"g",S),v(h.overaxesAbove,"g",E),l.xlines=L.select(".overlines-"+M).select("."+S),l.ylines=L.select(".overlines-"+_).select("."+E),l.xaxislayer=L.select(".overaxes-"+M).select("."+S),l.yaxislayer=L.select(".overaxes-"+_).select("."+E)}else if(p)l.xlines=v(x,"path","xlines-above"),l.ylines=v(x,"path","ylines-above"),l.xaxislayer=v(x,"g","xaxislayer-above"),l.yaxislayer=v(x,"g","yaxislayer-above");else{var w=v(x,"g","layer-subplot");l.shapelayer=v(w,"g","shapelayer"),l.imagelayer=v(w,"g","imagelayer"),l.minorGridlayer=v(x,"g","minor-gridlayer"),l.gridlayer=v(x,"g","gridlayer"),l.zerolinelayer=v(x,"g","zerolinelayer"),v(x,"path","xlines-below"),v(x,"path","ylines-below"),l.overlinesBelow=v(x,"g","overlines-below"),v(x,"g","xaxislayer-below"),v(x,"g","yaxislayer-below"),l.overaxesBelow=v(x,"g","overaxes-below"),l.plot=v(x,"g","plot"),l.overplot=v(x,"g","overplot"),l.xlines=v(x,"path","xlines-above"),l.ylines=v(x,"path","ylines-above"),l.overlinesAbove=v(x,"g","overlines-above"),v(x,"g","xaxislayer-above"),v(x,"g","yaxislayer-above"),l.overaxesAbove=v(x,"g","overaxes-above"),l.xlines=x.select(".xlines-"+M),l.ylines=x.select(".ylines-"+_),l.xaxislayer=x.select(".xaxislayer-"+M),l.yaxislayer=x.select(".yaxislayer-"+_)}p||(s(l.minorGridlayer,"g",l.xaxis._id),s(l.minorGridlayer,"g",l.yaxis._id),l.minorGridlayer.selectAll("g").map(function(P){return P[0]}).sort(i.idSort),s(l.gridlayer,"g",l.xaxis._id),s(l.gridlayer,"g",l.yaxis._id),l.gridlayer.selectAll("g").map(function(P){return P[0]}).sort(i.idSort)),l.xlines.style("fill","none").classed("crisp",!0),l.ylines.style("fill","none").classed("crisp",!0)}function d(y,l){if(!!y){var x={};y.each(function(h){var L=h[0],S=m.select(this);S.remove(),f(L,l),x[L]=!0});for(var u in l._plots)for(var M=l._plots[u],_=M.overlays||[],p=0;p<_.length;p++){var w=_[p];x[w.id]&&w.plot.selectAll(".trace").remove()}}}function f(y,l){l._draggers.selectAll("g."+y).remove(),l._defs.select("#clip"+l._uid+y+"plot").remove()}V.toSVG=function(y){var l=y._fullLayout._glimages,x=m.select(y).selectAll(".svg-container"),u=x.filter(function(_,p){return p===x.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function M(){var _=this,p=_.toDataURL("image/png"),w=l.append("svg:image");w.attr({xmlns:r.svg,"xlink:href":p,preserveAspectRatio:"none",x:0,y:0,width:_.style.width,height:_.style.height})}u.each(M)},V.updateFx=t("./graph_interact").updateFx},{"../../components/drawing":389,"../../constants/xmlns_namespaces":492,"../../lib":515,"../../registry":647,"../get_data":602,"../plots":628,"./attributes":564,"./axis_ids":570,"./constants":573,"./graph_interact":576,"./layout_attributes":579,"./layout_defaults":580,"./transition_axes":590,"@plotly/d3":58}],579:[function(t,B,V){var m=t("../font_attributes"),c=t("../../components/color/attributes"),A=t("../../components/drawing/attributes").dash,T=t("../../lib/extend").extendFlat,e=t("../../plot_api/plot_template").templatedArray,a=t("../../plots/cartesian/axis_format_attributes").descriptionWithDates,i=t("../../constants/numerical").ONEDAY,n=t("./constants"),r=n.HOUR_PATTERN,v=n.WEEKDAY_PATTERN,s={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}};function o(w){return{valType:"integer",min:0,dflt:w?5:0,editType:"ticks"}}var b={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},g={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},d={valType:"data_array",editType:"ticks"},f={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function y(w){var h={valType:"number",min:0,editType:"ticks"};return w||(h.dflt=5),h}function l(w){var h={valType:"number",min:0,editType:"ticks"};return w||(h.dflt=1),h}var x={valType:"color",dflt:c.defaultLine,editType:"ticks"},u={valType:"color",dflt:c.lightLine,editType:"ticks"};function M(w){var h={valType:"number",min:0,editType:"ticks"};return w||(h.dflt=1),h}var _=T({},A,{editType:"ticks"}),p={valType:"boolean",editType:"ticks"};B.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:c.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:m({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[n.idRegex.x.toString(),n.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[n.idRegex.x.toString(),n.idRegex.y.toString()],editType:"calc"},rangebreaks:e("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[v,r,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:i},editType:"calc"}),tickmode:s,nticks:o(),tick0:b,dtick:g,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:d,ticktext:{valType:"data_array",editType:"ticks"},ticks:f,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:y(),tickwidth:l(),tickcolor:x,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[!0,!1],dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:T({},A,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:m({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:a("tick label")},tickformatstops:e("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:a("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:c.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:p,gridcolor:u,gridwidth:M(),griddash:_,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:c.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:c.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",n.idRegex.x.toString(),n.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",n.idRegex.x.toString(),n.idRegex.y.toString()],editType:"plot"},minor:{tickmode:s,nticks:o("minor"),tick0:b,dtick:g,tickvals:d,ticks:f,ticklen:y("minor"),tickwidth:l("minor"),tickcolor:x,gridcolor:u,gridwidth:M("minor"),griddash:_,showgrid:p,editType:"ticks"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:m({editType:"ticks"})}}},{"../../components/color/attributes":366,"../../components/drawing/attributes":388,"../../constants/numerical":491,"../../lib/extend":505,"../../plot_api/plot_template":555,"../../plots/cartesian/axis_format_attributes":569,"../font_attributes":594,"./constants":573}],580:[function(t,B,V){var m=t("../../lib"),c=t("../../components/color"),A=t("../../components/fx/helpers").isUnifiedHover,T=t("../../components/fx/hovermode_defaults"),e=t("../../plot_api/plot_template"),a=t("../layout_attributes"),i=t("./layout_attributes"),n=t("./type_defaults"),r=t("./axis_defaults"),v=t("./constraints"),s=t("./position_defaults"),o=t("./axis_ids"),b=o.id2name,g=o.name2id,d=t("./constants").AX_ID_PATTERN,f=t("../../registry"),y=f.traceIs,l=f.getComponentMethod;function x(u,M,_){Array.isArray(u[M])?u[M].push(_):u[M]=[_]}B.exports=function(M,_,p){var w=_.autotypenumbers,h={},L={},S={},E={},P={},F={},I={},D={},R={},N={},z,G;for(z=0;z<p.length;z++){var Y=p[z];if(!(!y(Y,"cartesian")&&!y(Y,"gl2d"))){var ee;if(Y.xaxis)ee=b(Y.xaxis),x(h,ee,Y);else if(Y.xaxes)for(G=0;G<Y.xaxes.length;G++)x(h,b(Y.xaxes[G]),Y);var Z;if(Y.yaxis)Z=b(Y.yaxis),x(h,Z,Y);else if(Y.yaxes)for(G=0;G<Y.yaxes.length;G++)x(h,b(Y.yaxes[G]),Y);if(Y.type==="funnel"?Y.orientation==="h"?(ee&&(L[ee]=!0),Z&&(I[Z]=!0)):Z&&(S[Z]=!0):Y.type==="image"?(Z&&(D[Z]=!0),ee&&(D[ee]=!0)):(Z&&(P[Z]=!0,F[Z]=!0),(!y(Y,"carpet")||Y.type==="carpet"&&!Y._cheater)&&ee&&(E[ee]=!0)),Y.type==="carpet"&&Y._cheater&&ee&&(L[ee]=!0),y(Y,"2dMap")&&(R[ee]=!0,R[Z]=!0),y(Y,"oriented")){var X=Y.orientation==="h"?Z:ee;N[X]=!0}}}var ne=_._subplots,ce=ne.xaxis,Q=ne.yaxis,K=m.simpleMap(ce,b),U=m.simpleMap(Q,b),H=K.concat(U),q=c.background;ce.length&&Q.length&&(q=m.coerce(M,_,a,"plot_bgcolor"));var re=c.combine(q,_.paper_bgcolor),j,$,ie,oe,ae;function se(){var Ge=h[j]||[];ae._traceIndices=Ge.map(function(Se){return Se._expandedIndex}),ae._annIndices=[],ae._shapeIndices=[],ae._selectionIndices=[],ae._imgIndices=[],ae._subplotsWith=[],ae._counterAxes=[],ae._name=ae._attr=j,ae._id=$}function _e(Ge,Se){return m.coerce(oe,ae,i,Ge,Se)}function ue(Ge,Se){return m.coerce2(oe,ae,i,Ge,Se)}function ye(Ge){return Ge==="x"?Q:ce}function xe(Ge,Se){for(var He=Ge==="x"?K:U,Ke=[],qe=0;qe<He.length;qe++){var Tt=He[qe];Tt!==Se&&!(M[Tt]||{}).overlaying&&Ke.push(g(Tt))}return Ke}var me={x:ye("x"),y:ye("y")},be=me.x.concat(me.y),ke={},De=[];function Ve(){var Ge=oe.matches;d.test(Ge)&&be.indexOf(Ge)===-1&&(ke[Ge]=oe.type,De=Object.keys(ke))}var Ae=T(M,_),Le=A(Ae);for(z=0;z<H.length;z++){j=H[z],$=g(j),ie=j.charAt(0),m.isPlainObject(M[j])||(M[j]={}),oe=M[j],ae=e.newContainer(_,j,ie+"axis"),se();var je=ie==="x"&&!E[j]&&L[j]||ie==="y"&&!P[j]&&S[j],Ye=ie==="y"&&(!F[j]&&I[j]||D[j]),ze={hasMinor:!0,letter:ie,font:_.font,outerTicks:R[j],showGrid:!N[j],data:h[j]||[],bgColor:re,calendar:_.calendar,automargin:!0,visibleDflt:je,reverseDflt:Ye,autotypenumbersDflt:w,splomStash:((_._splomAxes||{})[ie]||{})[$]};_e("uirevision",_.uirevision),n(oe,ae,_e,ze),r(oe,ae,_e,ze,_);var Ie=Le&&ie===Ae.charAt(0),We=ue("spikecolor",Le?ae.color:void 0),pt=ue("spikethickness",Le?1.5:void 0),Ft=ue("spikedash",Le?"dot":void 0),Qt=ue("spikemode",Le?"across":void 0),zt=ue("spikesnap"),Et=_e("showspikes",!!Ie||!!We||!!pt||!!Ft||!!Qt||!!zt);Et||(delete ae.spikecolor,delete ae.spikethickness,delete ae.spikedash,delete ae.spikemode,delete ae.spikesnap),s(oe,ae,_e,{letter:ie,counterAxes:me[ie],overlayableAxes:xe(ie,j),grid:_.grid}),_e("title.standoff"),Ve(),ae._input=oe}for(z=0;z<De.length;){$=De[z++],j=b($),ie=j.charAt(0),m.isPlainObject(M[j])||(M[j]={}),oe=M[j],ae=e.newContainer(_,j,ie+"axis"),se();var Xt={letter:ie,font:_.font,outerTicks:R[j],showGrid:!N[j],data:[],bgColor:re,calendar:_.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:w,splomStash:((_._splomAxes||{})[ie]||{})[$]};_e("uirevision",_.uirevision),ae.type=ke[$]||"linear",r(oe,ae,_e,Xt,_),s(oe,ae,_e,{letter:ie,counterAxes:me[ie],overlayableAxes:xe(ie,j),grid:_.grid}),_e("fixedrange"),Ve(),ae._input=oe}var Nt=l("rangeslider","handleDefaults"),Ct=l("rangeselector","handleDefaults");for(z=0;z<K.length;z++)j=K[z],oe=M[j],ae=_[j],Nt(M,_,j),ae.type==="date"&&Ct(oe,ae,_,U,ae.calendar),_e("fixedrange");for(z=0;z<U.length;z++){j=U[z],oe=M[j],ae=_[j];var Xe=_[b(ae.anchor)],at=l("rangeslider","isVisible")(Xe);_e("fixedrange",at)}v.handleDefaults(M,_,{axIds:be.concat(De).sort(o.idSort),axHasImage:D})}},{"../../components/color":367,"../../components/fx/helpers":403,"../../components/fx/hovermode_defaults":406,"../../lib":515,"../../plot_api/plot_template":555,"../../registry":647,"../layout_attributes":619,"./axis_defaults":568,"./axis_ids":570,"./constants":573,"./constraints":574,"./layout_attributes":579,"./position_defaults":582,"./type_defaults":591}],581:[function(t,B,V){var m=t("tinycolor2").mix,c=t("../../components/color/attributes"),A=t("../../lib");B.exports=function(e,a,i,n){n=n||{};var r=n.dfltColor;function v(S,E){return A.coerce2(e,a,n.attributes,S,E)}var s=v("linecolor",r),o=v("linewidth"),b=i("showline",n.showLine||!!s||!!o);b||(delete a.linecolor,delete a.linewidth);var g=m(r,n.bgColor,n.blend||c.lightFraction).toRgbString(),d=v("gridcolor",g),f=v("gridwidth"),y=v("griddash"),l=i("showgrid",n.showGrid||!!d||!!f||!!y);if(l||(delete a.gridcolor,delete a.gridwidth,delete a.griddash),n.hasMinor){var x=m(a.gridcolor,n.bgColor,67).toRgbString(),u=v("minor.gridcolor",x),M=v("minor.gridwidth",a.gridwidth||1),_=v("minor.griddash",a.griddash||"solid"),p=i("minor.showgrid",!!u||!!M||!!_);p||(delete a.minor.gridcolor,delete a.minor.gridwidth,delete a.minor.griddash)}if(!n.noZeroLine){var w=v("zerolinecolor",r),h=v("zerolinewidth"),L=i("zeroline",n.showGrid||!!w||!!h);L||(delete a.zerolinecolor,delete a.zerolinewidth)}}},{"../../components/color/attributes":366,"../../lib":515,tinycolor2:313}],582:[function(t,B,V){var m=t("fast-isnumeric"),c=t("../../lib");B.exports=function(T,e,a,i){var n=i.counterAxes||[],r=i.overlayableAxes||[],v=i.letter,s=i.grid,o,b,g,d;s&&(b=s._domains[v][s._axisMap[e._id]],o=s._anchors[e._id],b&&(g=s[v+"side"].split(" ")[0],d=s.domain[v][g==="right"||g==="top"?1:0])),b=b||[0,1],o=o||(m(T.position)?"free":n[0]||"free"),g=g||(v==="x"?"bottom":"left"),d=d||0;var f=c.coerce(T,e,{anchor:{valType:"enumerated",values:["free"].concat(n),dflt:o}},"anchor");f==="free"&&a("position",d),c.coerce(T,e,{side:{valType:"enumerated",values:v==="x"?["bottom","top"]:["left","right"],dflt:g}},"side");var y=!1;if(r.length&&(y=c.coerce(T,e,{overlaying:{valType:"enumerated",values:[!1].concat(r),dflt:!1}},"overlaying")),!y){var l=a("domain",b);l[0]>l[1]-1/4096&&(e.domain=b),c.noneOrAll(T.domain,e.domain,b)}return a("layer"),e}},{"../../lib":515,"fast-isnumeric":190}],583:[function(t,B,V){var m=t("./show_dflt");B.exports=function(A,T,e,a,i){i||(i={});var n=i.tickSuffixDflt,r=m(A),v=e("tickprefix");v&&e("showtickprefix",r);var s=e("ticksuffix",n);s&&e("showticksuffix",r)}},{"./show_dflt":586}],584:[function(t,B,V){var m=t("../../constants/alignment").FROM_BL;B.exports=function(A,T,e){e===void 0&&(e=m[A.constraintoward||"center"]);var a=[A.r2l(A.range[0]),A.r2l(A.range[1])],i=a[0]+(a[1]-a[0])*e;A.range=A._input.range=[A.l2r(i+(a[0]-i)*T),A.l2r(i+(a[1]-i)*T)],A.setScale()}},{"../../constants/alignment":483}],585:[function(t,B,V){var m=t("@plotly/d3"),c=t("d3-time-format").utcFormat,A=t("../../lib"),T=A.numberFormat,e=t("fast-isnumeric"),a=A.cleanNumber,i=A.ms2DateTime,n=A.dateTime2ms,r=A.ensureNumber,v=A.isArrayOrTypedArray,s=t("../../constants/numerical"),o=s.FP_SAFE,b=s.BADNUM,g=s.LOG_CLIP,d=s.ONEWEEK,f=s.ONEDAY,y=s.ONEHOUR,l=s.ONEMIN,x=s.ONESEC,u=t("./axis_ids"),M=t("./constants"),_=M.HOUR_PATTERN,p=M.WEEKDAY_PATTERN;function w(L){return Math.pow(10,L)}function h(L){return L!=null}B.exports=function(S,E){E=E||{};var P=S._id||"x",F=P.charAt(0);function I(H,q){if(H>0)return Math.log(H)/Math.LN10;if(H<=0&&q&&S.range&&S.range.length===2){var re=S.range[0],j=S.range[1];return .5*(re+j-2*g*Math.abs(re-j))}else return b}function D(H,q,re,j){if((j||{}).msUTC&&e(H))return+H;var $=n(H,re||S.calendar);if($===b)if(e(H)){H=+H;var ie=Math.floor(A.mod(H+.05,1)*10),oe=Math.round(H-ie/10);$=n(new Date(oe))+ie/10}else return b;return $}function R(H,q,re){return i(H,q,re||S.calendar)}function N(H){return S._categories[Math.round(H)]}function z(H){if(h(H)){if(S._categoriesMap===void 0&&(S._categoriesMap={}),S._categoriesMap[H]!==void 0)return S._categoriesMap[H];S._categories.push(typeof H=="number"?String(H):H);var q=S._categories.length-1;return S._categoriesMap[H]=q,q}return b}function G(H,q){for(var re=new Array(q),j=0;j<q;j++){var $=(H[0]||[])[j],ie=(H[1]||[])[j];re[j]=Y([$,ie])}return re}function Y(H){if(S._categoriesMap)return S._categoriesMap[H]}function ee(H){var q=Y(H);if(q!==void 0)return q;if(e(H))return+H}function Z(H){return e(H)?+H:Y(H)}function X(H,q,re){return m.round(re+q*H,2)}function ne(H,q,re){return(H-re)/q}var ce=function(q){return e(q)?X(q,S._m,S._b):b},Q=function(H){return ne(H,S._m,S._b)};if(S.rangebreaks){var K=F==="y";ce=function(H){if(!e(H))return b;var q=S._rangebreaks.length;if(!q)return X(H,S._m,S._b);var re=K;S.range[0]>S.range[1]&&(re=!re);for(var j=re?-1:1,$=j*H,ie=0,oe=0;oe<q;oe++){var ae=j*S._rangebreaks[oe].min,se=j*S._rangebreaks[oe].max;if($<ae)break;if($>se)ie=oe+1;else{ie=$<(ae+se)/2?oe:oe+1;break}}var _e=S._B[ie]||0;return isFinite(_e)?X(H,S._m2,_e):0},Q=function(H){var q=S._rangebreaks.length;if(!q)return ne(H,S._m,S._b);for(var re=0,j=0;j<q&&!(H<S._rangebreaks[j].pmin);j++)H>S._rangebreaks[j].pmax&&(re=j+1);return ne(H,S._m2,S._B[re])}}S.c2l=S.type==="log"?I:r,S.l2c=S.type==="log"?w:r,S.l2p=ce,S.p2l=Q,S.c2p=S.type==="log"?function(H,q){return ce(I(H,q))}:ce,S.p2c=S.type==="log"?function(H){return w(Q(H))}:Q,["linear","-"].indexOf(S.type)!==-1?(S.d2r=S.r2d=S.d2c=S.r2c=S.d2l=S.r2l=a,S.c2d=S.c2r=S.l2d=S.l2r=r,S.d2p=S.r2p=function(H){return S.l2p(a(H))},S.p2d=S.p2r=Q,S.cleanPos=r):S.type==="log"?(S.d2r=S.d2l=function(H,q){return I(a(H),q)},S.r2d=S.r2c=function(H){return w(a(H))},S.d2c=S.r2l=a,S.c2d=S.l2r=r,S.c2r=I,S.l2d=w,S.d2p=function(H,q){return S.l2p(S.d2r(H,q))},S.p2d=function(H){return w(Q(H))},S.r2p=function(H){return S.l2p(a(H))},S.p2r=Q,S.cleanPos=r):S.type==="date"?(S.d2r=S.r2d=A.identity,S.d2c=S.r2c=S.d2l=S.r2l=D,S.c2d=S.c2r=S.l2d=S.l2r=R,S.d2p=S.r2p=function(H,q,re){return S.l2p(D(H,0,re))},S.p2d=S.p2r=function(H,q,re){return R(Q(H),q,re)},S.cleanPos=function(H){return A.cleanDate(H,b,S.calendar)}):S.type==="category"?(S.d2c=S.d2l=z,S.r2d=S.c2d=S.l2d=N,S.d2r=S.d2l_noadd=ee,S.r2c=function(H){var q=Z(H);return q!==void 0?q:S.fraction2r(.5)},S.l2r=S.c2r=r,S.r2l=Z,S.d2p=function(H){return S.l2p(S.r2c(H))},S.p2d=function(H){return N(Q(H))},S.r2p=S.d2p,S.p2r=Q,S.cleanPos=function(H){return typeof H=="string"&&H!==""?H:r(H)}):S.type==="multicategory"&&(S.r2d=S.c2d=S.l2d=N,S.d2r=S.d2l_noadd=ee,S.r2c=function(H){var q=ee(H);return q!==void 0?q:S.fraction2r(.5)},S.r2c_just_indices=Y,S.l2r=S.c2r=r,S.r2l=ee,S.d2p=function(H){return S.l2p(S.r2c(H))},S.p2d=function(H){return N(Q(H))},S.r2p=S.d2p,S.p2r=Q,S.cleanPos=function(H){return Array.isArray(H)||typeof H=="string"&&H!==""?H:r(H)},S.setupMultiCategory=function(H){var q=S._traceIndices,re,j,$=S._matchGroup;if($&&S._categories.length===0){for(var ie in $)if(ie!==P){var oe=E[u.id2name(ie)];q=q.concat(oe._traceIndices)}}var ae=[[0,{}],[0,{}]],se=[];for(re=0;re<q.length;re++){var _e=H[q[re]];if(F in _e){var ue=_e[F],ye=_e._length||A.minRowLength(ue);if(v(ue[0])&&v(ue[1]))for(j=0;j<ye;j++){var xe=ue[0][j],me=ue[1][j];h(xe)&&h(me)&&(se.push([xe,me]),xe in ae[0][1]||(ae[0][1][xe]=ae[0][0]++),me in ae[1][1]||(ae[1][1][me]=ae[1][0]++))}}}for(se.sort(function(be,ke){var De=ae[0][1],Ve=De[be[0]]-De[ke[0]];if(Ve)return Ve;var Ae=ae[1][1];return Ae[be[1]]-Ae[ke[1]]}),re=0;re<se.length;re++)z(se[re])}),S.fraction2r=function(H){var q=S.r2l(S.range[0]),re=S.r2l(S.range[1]);return S.l2r(q+H*(re-q))},S.r2fraction=function(H){var q=S.r2l(S.range[0]),re=S.r2l(S.range[1]);return(S.r2l(H)-q)/(re-q)},S.cleanRange=function(H,q){q||(q={}),H||(H="range");var re=A.nestedProperty(S,H).get(),j,$;if(S.type==="date"?$=A.dfltRange(S.calendar):F==="y"?$=M.DFLTRANGEY:S._name==="realaxis"?$=[0,1]:$=q.dfltRange||M.DFLTRANGEX,$=$.slice(),(S.rangemode==="tozero"||S.rangemode==="nonnegative")&&($[0]=0),!re||re.length!==2){A.nestedProperty(S,H).set($);return}for(S.type==="date"&&!S.autorange&&(re[0]=A.cleanDate(re[0],b,S.calendar),re[1]=A.cleanDate(re[1],b,S.calendar)),j=0;j<2;j++)if(S.type==="date"){if(!A.isDateTime(re[j],S.calendar)){S[H]=$;break}if(S.r2l(re[0])===S.r2l(re[1])){var ie=A.constrain(S.r2l(re[0]),A.MIN_MS+1e3,A.MAX_MS-1e3);re[0]=S.l2r(ie-1e3),re[1]=S.l2r(ie+1e3);break}}else{if(!e(re[j]))if(e(re[1-j]))re[j]=re[1-j]*(j?10:.1);else{S[H]=$;break}if(re[j]<-o?re[j]=-o:re[j]>o&&(re[j]=o),re[0]===re[1]){var oe=Math.max(1,Math.abs(re[0]*1e-6));re[0]-=oe,re[1]+=oe}}},S.setScale=function(H){var q=E._size;if(S.overlaying){var re=u.getFromId({_fullLayout:E},S.overlaying);S.domain=re.domain}var j=H&&S._r?"_r":"range",$=S.calendar;S.cleanRange(j);var ie=S.r2l(S[j][0],$),oe=S.r2l(S[j][1],$),ae=F==="y";if(ae?(S._offset=q.t+(1-S.domain[1])*q.h,S._length=q.h*(S.domain[1]-S.domain[0]),S._m=S._length/(ie-oe),S._b=-S._m*oe):(S._offset=q.l+S.domain[0]*q.w,S._length=q.w*(S.domain[1]-S.domain[0]),S._m=S._length/(oe-ie),S._b=-S._m*ie),S._rangebreaks=[],S._lBreaks=0,S._m2=0,S._B=[],S.rangebreaks){var se,_e;if(S._rangebreaks=S.locateBreaks(Math.min(ie,oe),Math.max(ie,oe)),S._rangebreaks.length){for(se=0;se<S._rangebreaks.length;se++)_e=S._rangebreaks[se],S._lBreaks+=Math.abs(_e.max-_e.min);var ue=ae;ie>oe&&(ue=!ue),ue&&S._rangebreaks.reverse();var ye=ue?-1:1;for(S._m2=ye*S._length/(Math.abs(oe-ie)-S._lBreaks),S._B.push(-S._m2*(ae?oe:ie)),se=0;se<S._rangebreaks.length;se++)_e=S._rangebreaks[se],S._B.push(S._B[S._B.length-1]-ye*S._m2*(_e.max-_e.min));for(se=0;se<S._rangebreaks.length;se++)_e=S._rangebreaks[se],_e.pmin=ce(_e.min),_e.pmax=ce(_e.max)}}if(!isFinite(S._m)||!isFinite(S._b)||S._length<0)throw E._replotting=!1,new Error("Something went wrong with axis scaling")},S.maskBreaks=function(H){var q=S.rangebreaks||[],re,j,$,ie,oe;q._cachedPatterns||(q._cachedPatterns=q.map(function(De){return De.enabled&&De.bounds?A.simpleMap(De.bounds,De.pattern?a:S.d2c):null})),q._cachedValues||(q._cachedValues=q.map(function(De){return De.enabled&&De.values?A.simpleMap(De.values,S.d2c).sort(A.sorterAsc):null}));for(var ae=0;ae<q.length;ae++){var se=q[ae];if(se.enabled){if(se.bounds){var _e=se.pattern;switch(re=q._cachedPatterns[ae],j=re[0],$=re[1],_e){case p:oe=new Date(H),ie=oe.getUTCDay(),j>$&&($+=7,ie<j&&(ie+=7));break;case _:oe=new Date(H);var ue=oe.getUTCHours(),ye=oe.getUTCMinutes(),xe=oe.getUTCSeconds(),me=oe.getUTCMilliseconds();ie=ue+(ye/60+xe/3600+me/36e5),j>$&&($+=24,ie<j&&(ie+=24));break;case"":ie=H;break}if(ie>=j&&ie<$)return b}else for(var be=q._cachedValues[ae],ke=0;ke<be.length;ke++)if(j=be[ke],$=j+se.dvalue,H>=j&&H<$)return b}}return H},S.locateBreaks=function(H,q){var re,j,$,ie,oe=[];if(!S.rangebreaks)return oe;var ae=S.rangebreaks.slice().sort(function(Ae,Le){return Ae.pattern===p&&Le.pattern===_?-1:Le.pattern===p&&Ae.pattern===_?1:0}),se=function(Ae,Le){if(Ae=A.constrain(Ae,H,q),Le=A.constrain(Le,H,q),Ae!==Le){for(var je=!0,Ye=0;Ye<oe.length;Ye++){var ze=oe[Ye];Ae<ze.max&&Le>=ze.min&&(Ae<ze.min&&(ze.min=Ae),Le>ze.max&&(ze.max=Le),je=!1)}je&&oe.push({min:Ae,max:Le})}};for(re=0;re<ae.length;re++){var _e=ae[re];if(_e.enabled)if(_e.bounds){var ue=H,ye=q;_e.pattern&&(ue=Math.floor(ue)),j=A.simpleMap(_e.bounds,_e.pattern?a:S.r2l),$=j[0],ie=j[1];var xe=new Date(ue),me,be;switch(_e.pattern){case p:be=d,me=((ie<$?7:0)+(ie-$))*f,ue+=$*f-(xe.getUTCDay()*f+xe.getUTCHours()*y+xe.getUTCMinutes()*l+xe.getUTCSeconds()*x+xe.getUTCMilliseconds());break;case _:be=f,me=((ie<$?24:0)+(ie-$))*y,ue+=$*y-(xe.getUTCHours()*y+xe.getUTCMinutes()*l+xe.getUTCSeconds()*x+xe.getUTCMilliseconds());break;default:ue=Math.min(j[0],j[1]),ye=Math.max(j[0],j[1]),be=ye-ue,me=be}for(var ke=ue;ke<ye;ke+=be)se(ke,ke+me)}else for(var De=A.simpleMap(_e.values,S.d2c),Ve=0;Ve<De.length;Ve++)$=De[Ve],ie=$+_e.dvalue,se($,ie)}return oe.sort(function(Ae,Le){return Ae.min-Le.min}),oe},S.makeCalcdata=function(H,q,re){var j,$,ie,oe,ae=S.type,se=ae==="date"&&H[q+"calendar"];if(q in H){if(j=H[q],oe=H._length||A.minRowLength(j),A.isTypedArray(j)&&(ae==="linear"||ae==="log")){if(oe===j.length)return j;if(j.subarray)return j.subarray(0,oe)}if(ae==="multicategory")return G(j,oe);for($=new Array(oe),ie=0;ie<oe;ie++)$[ie]=S.d2c(j[ie],0,se,re)}else{var _e=q+"0"in H?S.d2c(H[q+"0"],0,se):0,ue=H["d"+q]?Number(H["d"+q]):1;for(j=H[{x:"y",y:"x"}[q]],oe=H._length||j.length,$=new Array(oe),ie=0;ie<oe;ie++)$[ie]=_e+ie*ue}if(S.rangebreaks)for(ie=0;ie<oe;ie++)$[ie]=S.maskBreaks($[ie]);return $},S.isValidRange=function(H){return Array.isArray(H)&&H.length===2&&e(S.r2l(H[0]))&&e(S.r2l(H[1]))},S.isPtWithinRange=function(H,q){var re=S.c2l(H[F],null,q),j=S.r2l(S.range[0]),$=S.r2l(S.range[1]);return j<$?j<=re&&re<=$:$<=re&&re<=j},S._emptyCategories=function(){S._categories=[],S._categoriesMap={}},S.clearCalc=function(){var H=S._matchGroup;if(H){var q=null,re=null;for(var j in H){var $=E[u.id2name(j)];if($._categories){q=$._categories,re=$._categoriesMap;break}}q&&re?(S._categories=q,S._categoriesMap=re):S._emptyCategories()}else S._emptyCategories();if(S._initialCategories)for(var ie=0;ie<S._initialCategories.length;ie++)z(S._initialCategories[ie])},S.sortByInitialCategories=function(){var H=[];if(S._emptyCategories(),S._initialCategories)for(var q=0;q<S._initialCategories.length;q++)z(S._initialCategories[q]);H=H.concat(S._traceIndices);var re=S._matchGroup;for(var j in re)if(P!==j){var $=E[u.id2name(j)];$._categories=S._categories,$._categoriesMap=S._categoriesMap,H=H.concat($._traceIndices)}return H};var U=E._d3locale;S.type==="date"&&(S._dateFormat=U?U.timeFormat:c,S._extraFormat=E._extraFormat),S._separators=E.separators,S._numFormat=U?U.numberFormat:T,delete S._minDtick,delete S._forceTick0}},{"../../constants/numerical":491,"../../lib":515,"./axis_ids":570,"./constants":573,"@plotly/d3":58,"d3-time-format":120,"fast-isnumeric":190}],586:[function(t,B,V){B.exports=function(c){var A=["showexponent","showtickprefix","showticksuffix"],T=A.filter(function(a){return c[a]!==void 0}),e=function(a){return c[a]===c[T[0]]};if(T.every(e)||T.length===1)return c[T[0]]}},{}],587:[function(t,B,V){var m=t("../../lib"),c=t("../../components/color").contrast,A=t("./layout_attributes"),T=t("./show_dflt"),e=t("../array_container_defaults");B.exports=function(n,r,v,s,o){o||(o={});var b=T(n),g=v("showticklabels");if(g){var d=o.font||{},f=r.color,y=r.ticklabelposition||"",l=y.indexOf("inside")!==-1?c(o.bgColor):f&&f!==A.color.dflt?f:d.color;if(m.coerceFont(v,"tickfont",{family:d.family,size:d.size,color:l}),!o.noTicklabelstep&&s!=="multicategory"&&s!=="log"&&v("ticklabelstep"),o.noAng||v("tickangle"),s!=="category"){var x=v("tickformat");e(n,r,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:a}),r.tickformatstops.length||delete r.tickformatstops,!o.noExp&&!x&&s!=="date"&&(v("showexponent",b),v("exponentformat"),v("minexponent"),v("separatethousands"))}}};function a(i,n){function r(s,o){return m.coerce(i,n,A.tickformatstops,s,o)}var v=r("enabled");v&&(r("dtickrange"),r("value"))}},{"../../components/color":367,"../../lib":515,"../array_container_defaults":561,"./layout_attributes":579,"./show_dflt":586}],588:[function(t,B,V){var m=t("../../lib"),c=t("./layout_attributes");B.exports=function(T,e,a,i){var n=i.isMinor,r=n?T.minor||{}:T,v=n?e.minor:e,s=n?c.minor:c,o=n?"minor.":"",b=m.coerce2(r,v,s,"ticklen",n?(e.ticklen||5)*.6:void 0),g=m.coerce2(r,v,s,"tickwidth",n?e.tickwidth||1:void 0),d=m.coerce2(r,v,s,"tickcolor",(n?e.tickcolor:void 0)||v.color),f=a(o+"ticks",!n&&i.outerTicks||b||g||d?"outside":"");f||(delete v.ticklen,delete v.tickwidth,delete v.tickcolor)}},{"../../lib":515,"./layout_attributes":579}],589:[function(t,B,V){var m=t("./clean_ticks"),c=t("../../lib").isArrayOrTypedArray;B.exports=function(T,e,a,i,n){n||(n={});var r=n.isMinor,v=r?T.minor||{}:T,s=r?e.minor:e,o=r?"minor.":"";function b(M){var _=v[M];return _!==void 0?_:(s._template||{})[M]}var g=b("tick0"),d=b("dtick"),f=b("tickvals"),y=c(f)?"array":d?"linear":"auto",l=a(o+"tickmode",y);if(l==="auto")a(o+"nticks");else if(l==="linear"){var x=s.dtick=m.dtick(d,i);s.tick0=m.tick0(g,i,e.calendar,x)}else if(i!=="multicategory"){var u=a(o+"tickvals");u===void 0?s.tickmode="auto":r||a("ticktext")}}},{"../../lib":515,"./clean_ticks":572}],590:[function(t,B,V){var m=t("@plotly/d3"),c=t("../../registry"),A=t("../../lib"),T=t("../../components/drawing"),e=t("./axes");B.exports=function(i,n,r,v){var s=i._fullLayout;if(n.length===0){e.redrawComponents(i);return}function o(_){var p=_.xaxis,w=_.yaxis;s._defs.select("#"+_.clipId+"> rect").call(T.setTranslate,0,0).call(T.setScale,1,1),_.plot.call(T.setTranslate,p._offset,w._offset).call(T.setScale,1,1);var h=_.plot.selectAll(".scatterlayer .trace");h.selectAll(".point").call(T.setPointGroupScale,1,1),h.selectAll(".textpoint").call(T.setTextPointsScale,1,1),h.call(T.hideOutsideRangePoints,_)}function b(_,p){var w=_.plotinfo,h=w.xaxis,L=w.yaxis,S=h._length,E=L._length,P=!!_.xr1,F=!!_.yr1,I=[];if(P){var D=A.simpleMap(_.xr0,h.r2l),R=A.simpleMap(_.xr1,h.r2l),N=D[1]-D[0],z=R[1]-R[0];I[0]=(D[0]*(1-p)+p*R[0]-D[0])/(D[1]-D[0])*S,I[2]=S*(1-p+p*z/N),h.range[0]=h.l2r(D[0]*(1-p)+p*R[0]),h.range[1]=h.l2r(D[1]*(1-p)+p*R[1])}else I[0]=0,I[2]=S;if(F){var G=A.simpleMap(_.yr0,L.r2l),Y=A.simpleMap(_.yr1,L.r2l),ee=G[1]-G[0],Z=Y[1]-Y[0];I[1]=(G[1]*(1-p)+p*Y[1]-G[1])/(G[0]-G[1])*E,I[3]=E*(1-p+p*Z/ee),L.range[0]=h.l2r(G[0]*(1-p)+p*Y[0]),L.range[1]=L.l2r(G[1]*(1-p)+p*Y[1])}else I[1]=0,I[3]=E;e.drawOne(i,h,{skipTitle:!0}),e.drawOne(i,L,{skipTitle:!0}),e.redrawComponents(i,[h._id,L._id]);var X=P?S/I[2]:1,ne=F?E/I[3]:1,ce=P?I[0]:0,Q=F?I[1]:0,K=P?I[0]/I[2]*S:0,U=F?I[1]/I[3]*E:0,H=h._offset-K,q=L._offset-U;w.clipRect.call(T.setTranslate,ce,Q).call(T.setScale,1/X,1/ne),w.plot.call(T.setTranslate,H,q).call(T.setScale,X,ne),T.setPointGroupScale(w.zoomScalePts,1/X,1/ne),T.setTextPointsScale(w.zoomScaleTxt,1/X,1/ne)}var g;v&&(g=v());function d(){for(var _={},p=0;p<n.length;p++){var w=n[p],h=w.plotinfo.xaxis,L=w.plotinfo.yaxis;w.xr1&&(_[h._name+".range"]=w.xr1.slice()),w.yr1&&(_[L._name+".range"]=w.yr1.slice())}return g&&g(),c.call("relayout",i,_).then(function(){for(var S=0;S<n.length;S++)o(n[S].plotinfo)})}function f(){for(var _={},p=0;p<n.length;p++){var w=n[p],h=w.plotinfo.xaxis,L=w.plotinfo.yaxis;w.xr0&&(_[h._name+".range"]=w.xr0.slice()),w.yr0&&(_[L._name+".range"]=w.yr0.slice())}return c.call("relayout",i,_).then(function(){for(var S=0;S<n.length;S++)o(n[S].plotinfo)})}var y,l,x,u=m.ease(r.easing);i._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(x),x=null,f()});function M(){l=Date.now();for(var _=Math.min(1,(l-y)/r.duration),p=u(_),w=0;w<n.length;w++)b(n[w],p);l-y>r.duration?(d(),x=window.cancelAnimationFrame(M)):x=window.requestAnimationFrame(M)}return y=Date.now(),x=window.requestAnimationFrame(M),Promise.resolve()}},{"../../components/drawing":389,"../../lib":515,"../../registry":647,"./axes":566,"@plotly/d3":58}],591:[function(t,B,V){var m=t("../../registry").traceIs,c=t("./axis_autotype");B.exports=function(n,r,v,s){v("autotypenumbers",s.autotypenumbersDflt);var o=v("type",(s.splomStash||{}).type);o==="-"&&(A(r,s.data),r.type==="-"?r.type="linear":n.type=r.type)};function A(i,n){if(i.type==="-"){var r=i._id,v=r.charAt(0),s;r.indexOf("scene")!==-1&&(r=v);var o=T(n,r,v);if(!!o){if(o.type==="histogram"&&v==={v:"y",h:"x"}[o.orientation||"v"]){i.type="linear";return}var b=v+"calendar",g=o[b],d={noMultiCategory:!m(o,"cartesian")||m(o,"noMultiCategory")};if(o.type==="box"&&o._hasPreCompStats&&v==={h:"x",v:"y"}[o.orientation||"v"]&&(d.noMultiCategory=!0),d.autotypenumbers=i.autotypenumbers,a(o,v)){var f=e(o),y=[];for(s=0;s<n.length;s++){var l=n[s];!m(l,"box-violin")||(l[v+"axis"]||v)!==r||(l[f]!==void 0?y.push(l[f][0]):l.name!==void 0?y.push(l.name):y.push("text"),l[b]!==g&&(g=void 0))}i.type=c(y,g,d)}else if(o.type==="splom"){var x=o.dimensions,u=x[o._axesDim[r]];u.visible&&(i.type=c(u.values,g,d))}else i.type=c(o[v]||[o[v+"0"]],g,d)}}}function T(i,n,r){for(var v=0;v<i.length;v++){var s=i[v];if(s.type==="splom"&&s._length>0&&(s["_"+r+"axes"]||{})[n])return s;if((s[r+"axis"]||r)===n){if(a(s,r))return s;if((s[r]||[]).length||s[r+"0"])return s}}}function e(i){return{v:"x",h:"y"}[i.orientation||"v"]}function a(i,n){var r=e(i),v=m(i,"box-violin"),s=m(i._fullInput||{},"candlestick");return v&&!s&&n===r&&i[r]===void 0&&i[r+"0"]===void 0}},{"../../registry":647,"./axis_autotype":567}],592:[function(t,B,V){var m=t("../registry"),c=t("../lib");V.manageCommandObserver=function(n,r,v,s){var o={},b=!0;r&&r._commandObserver&&(o=r._commandObserver),o.cache||(o.cache={}),o.lookupTable={};var g=V.hasSimpleAPICommandBindings(n,v,o.lookupTable);if(r&&r._commandObserver){if(g)return o;if(r._commandObserver.remove)return r._commandObserver.remove(),r._commandObserver=null,o}if(g){A(n,g,o.cache),o.check=function(){if(!!b){var l=A(n,g,o.cache);return l.changed&&s&&o.lookupTable[l.value]!==void 0&&(o.disable(),Promise.resolve(s({value:l.value,type:g.type,prop:g.prop,traces:g.traces,index:o.lookupTable[l.value]})).then(o.enable,o.enable)),l.changed}};for(var d=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],f=0;f<d.length;f++)n._internalOn(d[f],o.check);o.remove=function(){for(var y=0;y<d.length;y++)n._removeInternalListener(d[y],o.check)}}else c.log("Unable to automatically bind plot updates to API command"),o.lookupTable={},o.remove=function(){};return o.disable=function(){b=!1},o.enable=function(){b=!0},r&&(r._commandObserver=o),o},V.hasSimpleAPICommandBindings=function(n,r,v){var s,o=r.length,b;for(s=0;s<o;s++){var g,d=r[s],f=d.method,y=d.args;if(Array.isArray(y)||(y=[]),!f)return!1;var l=V.computeAPICommandBindings(n,f,y);if(l.length!==1)return!1;if(!b)b=l[0],Array.isArray(b.traces)&&b.traces.sort();else{if(g=l[0],g.type!==b.type||g.prop!==b.prop)return!1;if(Array.isArray(b.traces))if(Array.isArray(g.traces)){g.traces.sort();for(var x=0;x<b.traces.length;x++)if(b.traces[x]!==g.traces[x])return!1}else return!1;else if(g.prop!==b.prop)return!1}g=l[0];var u=g.value;if(Array.isArray(u))if(u.length===1)u=u[0];else return!1;v&&(v[u]=s)}return b};function A(n,r,v){var s,o,b,g=!1;if(r.type==="data")s=n._fullData[r.traces!==null?r.traces[0]:0];else if(r.type==="layout")s=n._fullLayout;else return!1;return o=c.nestedProperty(s,r.prop).get(),b=v[r.type]=v[r.type]||{},b.hasOwnProperty(r.prop)&&b[r.prop]!==o&&(g=!0),b[r.prop]=o,{changed:g,value:o}}V.executeAPICommand=function(n,r,v){if(r==="skip")return Promise.resolve();var s=m.apiMethodRegistry[r],o=[n];Array.isArray(v)||(v=[]);for(var b=0;b<v.length;b++)o.push(v[b]);return s.apply(null,o).catch(function(g){return c.warn("API call to Plotly."+r+" rejected.",g),Promise.reject(g)})},V.computeAPICommandBindings=function(n,r,v){var s;switch(Array.isArray(v)||(v=[]),r){case"restyle":s=a(n,v);break;case"relayout":s=e(n,v);break;case"update":s=a(n,[v[0],v[2]]).concat(e(n,[v[1]]));break;case"animate":s=T(n,v);break;default:s=[]}return s};function T(n,r){return Array.isArray(r[0])&&r[0].length===1&&["string","number"].indexOf(typeof r[0][0])!==-1?[{type:"layout",prop:"_currentFrame",value:r[0][0].toString()}]:[]}function e(n,r){var v=[],s=r[0],o={};if(typeof s=="string")o[s]=r[1];else if(c.isPlainObject(s))o=s;else return v;return i(o,function(b,g,d){v.push({type:"layout",prop:b,value:d})},"",0),v}function a(n,r){var v,s,o,b,g=[];if(s=r[0],o=r[1],v=r[2],b={},typeof s=="string")b[s]=o;else if(c.isPlainObject(s))b=s,v===void 0&&(v=o);else return g;return v===void 0&&(v=null),i(b,function(d,f,y){var l,x;if(Array.isArray(y)){x=y.slice();var u=Math.min(x.length,n.data.length);v&&(u=Math.min(u,v.length)),l=[];for(var M=0;M<u;M++)l[M]=v?v[M]:M}else x=y,l=v?v.slice():null;if(l===null)Array.isArray(x)&&(x=x[0]);else if(Array.isArray(l)){if(!Array.isArray(x)){var _=x;x=[];for(var p=0;p<l.length;p++)x[p]=_}x.length=Math.min(l.length,x.length)}g.push({type:"data",prop:d,traces:l,value:x})},"",0),g}function i(n,r,v,s){Object.keys(n).forEach(function(o){var b=n[o];if(o[0]!=="_"){var g=v+(s>0?".":"")+o;c.isPlainObject(b)?i(b,r,g,s+1):r(g,o,b)}})}},{"../lib":515,"../registry":647}],593:[function(t,B,V){var m=t("../lib/extend").extendFlat;V.attributes=function(c,A){c=c||{},A=A||{};var T={valType:"info_array",editType:c.editType,items:[{valType:"number",min:0,max:1,editType:c.editType},{valType:"number",min:0,max:1,editType:c.editType}],dflt:[0,1]};c.name&&c.name+"",c.trace,A.description&&""+A.description;var e={x:m({},T,{}),y:m({},T,{}),editType:c.editType};return c.noGridCell||(e.row={valType:"integer",min:0,dflt:0,editType:c.editType},e.column={valType:"integer",min:0,dflt:0,editType:c.editType}),e},V.defaults=function(c,A,T,e){var a=e&&e.x||[0,1],i=e&&e.y||[0,1],n=A.grid;if(n){var r=T("domain.column");r!==void 0&&(r<n.columns?a=n._domains.x[r]:delete c.domain.column);var v=T("domain.row");v!==void 0&&(v<n.rows?i=n._domains.y[v]:delete c.domain.row)}var s=T("domain.x",a),o=T("domain.y",i);s[0]<s[1]||(c.domain.x=a.slice()),o[0]<o[1]||(c.domain.y=i.slice())}},{"../lib/extend":505}],594:[function(t,B,V){B.exports=function(m){var c=m.editType,A=m.colorEditType;A===void 0&&(A=c);var T={family:{valType:"string",noBlank:!0,strict:!0,editType:c},size:{valType:"number",min:1,editType:c},color:{valType:"color",editType:A},editType:c};return m.autoSize&&(T.size.dflt="auto"),m.autoColor&&(T.color.dflt="auto"),m.arrayOk&&(T.family.arrayOk=!0,T.size.arrayOk=!0,T.color.arrayOk=!0),T}},{}],595:[function(t,B,V){B.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],596:[function(t,B,V){V.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"},V.axesNames=["lonaxis","lataxis"],V.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},V.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},V.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},V.clipPad=.001,V.precision=.1,V.landColor="#F0DC82",V.waterColor="#3399FF",V.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},V.sphereSVG={type:"Sphere"},V.fillLayers={ocean:1,land:1,lakes:1},V.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},V.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],V.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],V.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},{}],597:[function(t,B,V){var m=t("@plotly/d3"),c=t("d3-geo"),A=c.geoPath,T=c.geoDistance,e=t("d3-geo-projection"),a=t("../../registry"),i=t("../../lib"),n=i.strTranslate,r=t("../../components/color"),v=t("../../components/drawing"),s=t("../../components/fx"),o=t("../plots"),b=t("../cartesian/axes"),g=t("../cartesian/autorange").getAutoRange,d=t("../../components/dragelement"),f=t("../../components/selections").prepSelect,y=t("../../components/selections").clearOutline,l=t("../../components/selections").selectOnClick,x=t("./zoom"),u=t("./constants"),M=t("../../lib/geo_location_utils"),_=t("../../lib/topojson_utils"),p=t("topojson-client").feature;function w(P){this.id=P.id,this.graphDiv=P.graphDiv,this.container=P.container,this.topojsonURL=P.topojsonURL,this.isStatic=P.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var h=w.prototype;B.exports=function(F){return new w(F)},h.plot=function(P,F,I,D){var R=this;if(D)return R.update(P,F,!0);R._geoCalcData=P,R._fullLayout=F;var N=F[this.id],z=[],G=!1;for(var Y in u.layerNameToAdjective)if(Y!=="frame"&&N["show"+Y]){G=!0;break}for(var ee=!1,Z=0;Z<P.length;Z++){var X=P[0][0].trace;X._geo=R,X.locationmode&&(G=!0);var ne=X.marker;if(ne){var ce=ne.angle,Q=ne.angleref;(ce||Q==="north"||Q==="previous")&&(ee=!0)}}if(this._hasMarkerAngles=ee,G){var K=_.getTopojsonName(N);(R.topojson===null||K!==R.topojsonName)&&(R.topojsonName=K,PlotlyGeoAssets.topojson[R.topojsonName]===void 0&&z.push(R.fetchTopojson()))}z=z.concat(M.fetchTraceGeoData(P)),I.push(new Promise(function(U,H){Promise.all(z).then(function(){R.topojson=PlotlyGeoAssets.topojson[R.topojsonName],R.update(P,F),U()}).catch(H)}))},h.fetchTopojson=function(){var P=this,F=_.getTopojsonPath(P.topojsonURL,P.topojsonName);return new Promise(function(I,D){m.json(F,function(R,N){if(R)return R.status===404?D(new Error(["plotly.js could not find topojson file at",F+".","Make sure the *topojsonURL* plot config option","is set properly."].join(" "))):D(new Error(["unexpected error while fetching topojson file at",F].join(" ")));PlotlyGeoAssets.topojson[P.topojsonName]=N,I()})})},h.update=function(P,F,I){var D=F[this.id];this.hasChoropleth=!1;for(var R=0;R<P.length;R++){var N=P[R],z=N[0].trace;z.type==="choropleth"&&(this.hasChoropleth=!0),z.visible===!0&&z._length>0&&z._module.calcGeoJSON(N,F)}if(!I){var G=this.updateProjection(P,F);if(G)return;(!this.viewInitial||this.scope!==D.scope)&&this.saveViewInitial(D)}this.scope=D.scope,this.updateBaseLayers(F,D),this.updateDims(F,D),this.updateFx(F,D),o.generalUpdatePerTraceModule(this.graphDiv,this,P,D);var Y=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=Y.selectAll(".point"),this.dataPoints.text=Y.selectAll("text"),this.dataPaths.line=Y.selectAll(".js-line");var ee=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=ee.selectAll("path"),this._render()},h.updateProjection=function(P,F){var I=this.graphDiv,D=F[this.id],R=F._size,N=D.domain,z=D.projection,G=D.lonaxis,Y=D.lataxis,ee=G._ax,Z=Y._ax,X=this.projection=L(D),ne=[[R.l+R.w*N.x[0],R.t+R.h*(1-N.y[1])],[R.l+R.w*N.x[1],R.t+R.h*(1-N.y[0])]],ce=D.center||{},Q=z.rotation||{},K=G.range||[],U=Y.range||[];if(D.fitbounds){ee._length=ne[1][0]-ne[0][0],Z._length=ne[1][1]-ne[0][1],ee.range=g(I,ee),Z.range=g(I,Z);var H=(ee.range[0]+ee.range[1])/2,q=(Z.range[0]+Z.range[1])/2;if(D._isScoped)ce={lon:H,lat:q};else if(D._isClipped){ce={lon:H,lat:q},Q={lon:H,lat:q,roll:Q.roll};var re=z.type,j=u.lonaxisSpan[re]/2||180,$=u.lataxisSpan[re]/2||90;K=[H-j,H+j],U=[q-$,q+$]}else ce={lon:H,lat:q},Q={lon:H,lat:Q.lat,roll:Q.roll}}X.center([ce.lon-Q.lon,ce.lat-Q.lat]).rotate([-Q.lon,-Q.lat,Q.roll]).parallels(z.parallels);var ie=E(K,U);X.fitExtent(ne,ie);var oe=this.bounds=X.getBounds(ie),ae=this.fitScale=X.scale(),se=X.translate();if(D.fitbounds){var _e=X.getBounds(E(ee.range,Z.range)),ue=Math.min((oe[1][0]-oe[0][0])/(_e[1][0]-_e[0][0]),(oe[1][1]-oe[0][1])/(_e[1][1]-_e[0][1]));isFinite(ue)?X.scale(ue*ae):i.warn("Something went wrong during"+this.id+"fitbounds computations.")}else X.scale(z.scale*ae);var ye=this.midPt=[(oe[0][0]+oe[1][0])/2,(oe[0][1]+oe[1][1])/2];if(X.translate([se[0]+(ye[0]-se[0]),se[1]+(ye[1]-se[1])]).clipExtent(oe),D._isAlbersUsa){var xe=X([ce.lon,ce.lat]),me=X.translate();X.translate([me[0]-(xe[0]-me[0]),me[1]-(xe[1]-me[1])])}},h.updateBaseLayers=function(P,F){var I=this,D=I.topojson,R=I.layers,N=I.basePaths;function z(ne){return ne==="lonaxis"||ne==="lataxis"}function G(ne){return Boolean(u.lineLayers[ne])}function Y(ne){return Boolean(u.fillLayers[ne])}var ee=this.hasChoropleth?u.layersForChoropleth:u.layers,Z=ee.filter(function(ne){return G(ne)||Y(ne)?F["show"+ne]:z(ne)?F[ne].showgrid:!0}),X=I.framework.selectAll(".layer").data(Z,String);X.exit().each(function(ne){delete R[ne],delete N[ne],m.select(this).remove()}),X.enter().append("g").attr("class",function(ne){return"layer "+ne}).each(function(ne){var ce=R[ne]=m.select(this);ne==="bg"?I.bgRect=ce.append("rect").style("pointer-events","all"):z(ne)?N[ne]=ce.append("path").style("fill","none"):ne==="backplot"?ce.append("g").classed("choroplethlayer",!0):ne==="frontplot"?ce.append("g").classed("scatterlayer",!0):G(ne)?N[ne]=ce.append("path").style("fill","none").style("stroke-miterlimit",2):Y(ne)&&(N[ne]=ce.append("path").style("stroke","none"))}),X.order(),X.each(function(ne){var ce=N[ne],Q=u.layerNameToAdjective[ne];ne==="frame"?ce.datum(u.sphereSVG):G(ne)||Y(ne)?ce.datum(p(D,D.objects[ne])):z(ne)&&ce.datum(S(ne,F,P)).call(r.stroke,F[ne].gridcolor).call(v.dashLine,F[ne].griddash,F[ne].gridwidth),G(ne)?ce.call(r.stroke,F[Q+"color"]).call(v.dashLine,"",F[Q+"width"]):Y(ne)&&ce.call(r.fill,F[Q+"color"])})},h.updateDims=function(P,F){var I=this.bounds,D=(F.framewidth||0)/2,R=I[0][0]-D,N=I[0][1]-D,z=I[1][0]-R+D,G=I[1][1]-N+D;v.setRect(this.clipRect,R,N,z,G),this.bgRect.call(v.setRect,R,N,z,G).call(r.fill,F.bgcolor),this.xaxis._offset=R,this.xaxis._length=z,this.yaxis._offset=N,this.yaxis._length=G},h.updateFx=function(P,F){var I=this,D=I.graphDiv,R=I.bgRect,N=P.dragmode,z=P.clickmode;if(I.isStatic)return;function G(){var X=I.viewInitial,ne={};for(var ce in X)ne[I.id+"."+ce]=X[ce];a.call("_guiRelayout",D,ne),D.emit("plotly_doubleclick",null)}function Y(X){return I.projection.invert([X[0]+I.xaxis._offset,X[1]+I.yaxis._offset])}var ee=function(X,ne){if(ne.isRect){var ce=X.range={};ce[I.id]=[Y([ne.xmin,ne.ymin]),Y([ne.xmax,ne.ymax])]}else{var Q=X.lassoPoints={};Q[I.id]=ne.map(Y)}},Z={element:I.bgRect.node(),gd:D,plotinfo:{id:I.id,xaxis:I.xaxis,yaxis:I.yaxis,fillRangeItems:ee},xaxes:[I.xaxis],yaxes:[I.yaxis],subplot:I.id,clickFn:function(X){X===2&&y(D)}};N==="pan"?(R.node().onmousedown=null,R.call(x(I,F)),R.on("dblclick.zoom",G),D._context._scrollZoom.geo||R.on("wheel.zoom",null)):(N==="select"||N==="lasso")&&(R.on(".zoom",null),Z.prepFn=function(X,ne,ce){f(X,ne,ce,Z,N)},d.init(Z)),R.on("mousemove",function(){var X=I.projection.invert(i.getPositionFromD3Event());if(!X)return d.unhover(D,m.event);I.xaxis.p2c=function(){return X[0]},I.yaxis.p2c=function(){return X[1]},s.hover(D,m.event,I.id)}),R.on("mouseout",function(){D._dragging||d.unhover(D,m.event)}),R.on("click",function(){N!=="select"&&N!=="lasso"&&(z.indexOf("select")>-1&&l(m.event,D,[I.xaxis],[I.yaxis],I.id,Z),z.indexOf("event")>-1&&s.click(D,m.event))})},h.makeFramework=function(){var P=this,F=P.graphDiv,I=F._fullLayout,D="clip"+I._uid+P.id;P.clipDef=I._clips.append("clipPath").attr("id",D),P.clipRect=P.clipDef.append("rect"),P.framework=m.select(P.container).append("g").attr("class","geo "+P.id).call(v.setClipUrl,D,F),P.project=function(R){var N=P.projection(R);return N?[N[0]-P.xaxis._offset,N[1]-P.yaxis._offset]:[null,null]},P.xaxis={_id:"x",c2p:function(R){return P.project(R)[0]}},P.yaxis={_id:"y",c2p:function(R){return P.project(R)[1]}},P.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},b.setConvert(P.mockAxis,I)},h.saveViewInitial=function(P){var F=P.center||{},I=P.projection,D=I.rotation||{};this.viewInitial={fitbounds:P.fitbounds,"projection.scale":I.scale};var R;P._isScoped?R={"center.lon":F.lon,"center.lat":F.lat}:P._isClipped?R={"projection.rotation.lon":D.lon,"projection.rotation.lat":D.lat}:R={"center.lon":F.lon,"center.lat":F.lat,"projection.rotation.lon":D.lon},i.extendFlat(this.viewInitial,R)},h.render=function(P){this._hasMarkerAngles&&P?this.plot(this._geoCalcData,this._fullLayout,[],!0):this._render()},h._render=function(){var P=this.projection,F=P.getPath(),I;function D(N){var z=P(N.lonlat);return z?n(z[0],z[1]):null}function R(N){return P.isLonLatOverEdges(N.lonlat)?"none":null}for(I in this.basePaths)this.basePaths[I].attr("d",F);for(I in this.dataPaths)this.dataPaths[I].attr("d",function(N){return F(N.geojson)});for(I in this.dataPoints)this.dataPoints[I].attr("display",R).attr("transform",D)};function L(P){var F=P.projection,I=F.type,D=u.projNames[I];D="geo"+i.titleCase(D);for(var R=c[D]||e[D],N=R(),z=P._isSatellite?Math.acos(1/F.distance)*180/Math.PI:P._isClipped?u.lonaxisSpan[I]/2:null,G=["center","rotate","parallels","clipExtent"],Y=function(X){return X?N:[]},ee=0;ee<G.length;ee++){var Z=G[ee];typeof N[Z]!="function"&&(N[Z]=Y)}return N.isLonLatOverEdges=function(X){if(N(X)===null)return!0;if(z){var ne=N.rotate(),ce=T(X,[-ne[0],-ne[1]]),Q=z*Math.PI/180;return ce>Q}else return!1},N.getPath=function(){return A().projection(N)},N.getBounds=function(X){return N.getPath().bounds(X)},N.precision(u.precision),P._isSatellite&&N.tilt(F.tilt).distance(F.distance),z&&N.clipAngle(z-u.clipPad),N}function S(P,F,I){var D=1e-6,R=2.5,N=F[P],z=u.scopeDefaults[F.scope],G,Y,ee;P==="lonaxis"?(G=z.lonaxisRange,Y=z.lataxisRange,ee=function(q,re){return[q,re]}):P==="lataxis"&&(G=z.lataxisRange,Y=z.lonaxisRange,ee=function(q,re){return[re,q]});var Z={type:"linear",range:[G[0],G[1]-D],tick0:N.tick0,dtick:N.dtick};b.setConvert(Z,I);var X=b.calcTicks(Z);!F.isScoped&&P==="lonaxis"&&X.pop();for(var ne=X.length,ce=new Array(ne),Q=0;Q<ne;Q++)for(var K=X[Q].x,U=ce[Q]=[],H=Y[0];H<Y[1]+R;H+=R)U.push(ee(K,H));return{type:"MultiLineString",coordinates:ce}}function E(P,F){var I=u.clipPad,D=P[0]+I,R=P[1]-I,N=F[0]+I,z=F[1]-I;D>0&&R<0&&(R+=360);var G=(R-D)/4;return{type:"Polygon",coordinates:[[[D,N],[D,z],[D+G,z],[D+2*G,z],[D+3*G,z],[R,z],[R,N],[R-G,N],[R-2*G,N],[R-3*G,N],[D,N]]]}}},{"../../components/color":367,"../../components/dragelement":386,"../../components/drawing":389,"../../components/fx":407,"../../components/selections":455,"../../lib":515,"../../lib/geo_location_utils":508,"../../lib/topojson_utils":544,"../../registry":647,"../cartesian/autorange":565,"../cartesian/axes":566,"../plots":628,"./constants":596,"./zoom":601,"@plotly/d3":58,"d3-geo":114,"d3-geo-projection":113,"topojson-client":316}],598:[function(t,B,V){var m=t("../../plots/get_data").getSubplotCalcData,c=t("../../lib").counterRegex,A=t("./geo"),T="geo",e=c(T),a={};a[T]={valType:"subplotid",dflt:T,editType:"calc"};function i(v){for(var s=v._fullLayout,o=v.calcdata,b=s._subplots[T],g=0;g<b.length;g++){var d=b[g],f=m(o,T,d),y=s[d],l=y._subplot;l||(l=A({id:d,graphDiv:v,container:s._geolayer.node(),topojsonURL:v._context.topojsonURL,staticPlot:v._context.staticPlot}),s[d]._subplot=l),l.plot(f,s,v._promises)}}function n(v,s,o,b){for(var g=b._subplots[T]||[],d=0;d<g.length;d++){var f=g[d],y=b[f]._subplot;!s[f]&&!!y&&(y.framework.remove(),y.clipDef.remove())}}function r(v){for(var s=v._fullLayout,o=s._subplots[T],b=0;b<o.length;b++){var g=s[o[b]],d=g._subplot;d.updateFx(s,g)}}B.exports={attr:T,name:T,idRoot:T,idRegex:e,attrRegex:e,attributes:a,layoutAttributes:t("./layout_attributes"),supplyLayoutDefaults:t("./layout_defaults"),plot:i,updateFx:r,clean:n}},{"../../lib":515,"../../plots/get_data":602,"./geo":597,"./layout_attributes":599,"./layout_defaults":600}],599:[function(t,B,V){var m=t("../../components/color/attributes"),c=t("../domain").attributes,A=t("../../components/drawing/attributes").dash,T=t("./constants"),e=t("../../plot_api/edit_types").overrideAll,a=t("../../lib/sort_object_keys"),i={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:m.lightLine},gridwidth:{valType:"number",min:0,dflt:1},griddash:A},n=B.exports=e({domain:c({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:a(T.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:a(T.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:m.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:T.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:T.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:T.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:T.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:m.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:m.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:m.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:m.background},lonaxis:i,lataxis:i},"plot","from-root");n.uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":366,"../../components/drawing/attributes":388,"../../lib/sort_object_keys":538,"../../plot_api/edit_types":548,"../domain":593,"./constants":596}],600:[function(t,B,V){var m=t("../../lib"),c=t("../subplot_defaults"),A=t("../get_data").getSubplotData,T=t("./constants"),e=t("./layout_attributes"),a=T.axesNames;B.exports=function(r,v,s){c(r,v,s,{type:"geo",attributes:e,handleDefaults:i,fullData:s,partition:"y"})};function i(n,r,v,s){var o=A(s.fullData,"geo",s.id),b=o.map(function(U){return U._expandedIndex}),g=v("resolution"),d=v("scope"),f=T.scopeDefaults[d],y=v("projection.type",f.projType),l=r._isAlbersUsa=y==="albers usa";l&&(d=r.scope="usa");var x=r._isScoped=d!=="world",u=r._isSatellite=y==="satellite",M=r._isConic=y.indexOf("conic")!==-1||y==="albers",_=r._isClipped=!!T.lonaxisSpan[y];if(n.visible===!1){var p=m.extendDeep({},r._template);p.showcoastlines=!1,p.showcountries=!1,p.showframe=!1,p.showlakes=!1,p.showland=!1,p.showocean=!1,p.showrivers=!1,p.showsubunits=!1,p.lonaxis&&(p.lonaxis.showgrid=!1),p.lataxis&&(p.lataxis.showgrid=!1),r._template=p}for(var w=v("visible"),h,L=0;L<a.length;L++){var S=a[L],E=[30,10][L],P;if(x)P=f[S+"Range"];else{var F=T[S+"Span"],I=(F[y]||F["*"])/2,D=v("projection.rotation."+S.substr(0,3),f.projRotate[L]);P=[D-I,D+I]}var R=v(S+".range",P);v(S+".tick0"),v(S+".dtick",E),h=v(S+".showgrid",w?void 0:!1),h&&(v(S+".gridcolor"),v(S+".gridwidth"),v(S+".griddash")),r[S]._ax={type:"linear",_id:S.slice(0,3),_traceIndices:b,setScale:m.identity,c2l:m.identity,r2l:m.identity,autorange:!0,range:R.slice(),_m:1,_input:{}}}var N=r.lonaxis.range,z=r.lataxis.range,G=N[0],Y=N[1];G>0&&Y<0&&(Y+=360);var ee=(G+Y)/2,Z;if(!l){var X=x?f.projRotate:[ee,0,0];Z=v("projection.rotation.lon",X[0]),v("projection.rotation.lat",X[1]),v("projection.rotation.roll",X[2]),h=v("showcoastlines",!x&&w),h&&(v("coastlinecolor"),v("coastlinewidth")),h=v("showocean",w?void 0:!1),h&&v("oceancolor")}var ne,ce;if(l?(ne=-96.6,ce=38.7):(ne=x?ee:Z,ce=(z[0]+z[1])/2),v("center.lon",ne),v("center.lat",ce),u&&(v("projection.tilt"),v("projection.distance")),M){var Q=f.projParallels||[0,60];v("projection.parallels",Q)}v("projection.scale"),h=v("showland",w?void 0:!1),h&&v("landcolor"),h=v("showlakes",w?void 0:!1),h&&v("lakecolor"),h=v("showrivers",w?void 0:!1),h&&(v("rivercolor"),v("riverwidth")),h=v("showcountries",x&&d!=="usa"&&w),h&&(v("countrycolor"),v("countrywidth")),(d==="usa"||d==="north america"&&g===50)&&(v("showsubunits",w),v("subunitcolor"),v("subunitwidth")),x||(h=v("showframe",w),h&&(v("framecolor"),v("framewidth"))),v("bgcolor");var K=v("fitbounds");K&&(delete r.projection.scale,x?(delete r.center.lon,delete r.center.lat):_?(delete r.center.lon,delete r.center.lat,delete r.projection.rotation.lon,delete r.projection.rotation.lat,delete r.lonaxis.range,delete r.lataxis.range):(delete r.center.lon,delete r.center.lat,delete r.projection.rotation.lon))}},{"../../lib":515,"../get_data":602,"../subplot_defaults":641,"./constants":596,"./layout_attributes":599}],601:[function(t,B,V){var m=t("@plotly/d3"),c=t("../../lib"),A=t("../../registry"),T=Math.PI/180,e=180/Math.PI,a={cursor:"pointer"},i={cursor:"auto"};function n(S,E){var P=S.projection,F;return E._isScoped?F=s:E._isClipped?F=b:F=o,F(S,P)}B.exports=n;function r(S,E){return m.behavior.zoom().translate(E.translate()).scale(E.scale())}function v(S,E,P){var F=S.id,I=S.graphDiv,D=I.layout,R=D[F],N=I._fullLayout,z=N[F],G={},Y={};function ee(Z,X){G[F+"."+Z]=c.nestedProperty(R,Z).get(),A.call("_storeDirectGUIEdit",D,N._preGUI,G);var ne=c.nestedProperty(z,Z);ne.get()!==X&&(ne.set(X),c.nestedProperty(R,Z).set(X),Y[F+"."+Z]=X)}P(ee),ee("projection.scale",E.scale()/S.fitScale),ee("fitbounds",!1),I.emit("plotly_relayout",Y)}function s(S,E){var P=r(S,E);function F(){m.select(this).style(a)}function I(){E.scale(m.event.scale).translate(m.event.translate),S.render(!0);var N=E.invert(S.midPt);S.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":E.scale()/S.fitScale,"geo.center.lon":N[0],"geo.center.lat":N[1]})}function D(N){var z=E.invert(S.midPt);N("center.lon",z[0]),N("center.lat",z[1])}function R(){m.select(this).style(i),v(S,E,D)}return P.on("zoomstart",F).on("zoom",I).on("zoomend",R),P}function o(S,E){var P=r(S,E),F=2,I,D,R,N,z,G,Y,ee,Z;function X(H){return E.invert(H)}function ne(H){var q=X(H);if(!q)return!0;var re=E(q);return Math.abs(re[0]-H[0])>F||Math.abs(re[1]-H[1])>F}function ce(){m.select(this).style(a),I=m.mouse(this),D=E.rotate(),R=E.translate(),N=D,z=X(I)}function Q(){if(G=m.mouse(this),ne(I)){P.scale(E.scale()),P.translate(E.translate());return}E.scale(m.event.scale),E.translate([R[0],m.event.translate[1]]),z?X(G)&&(ee=X(G),Y=[N[0]+(ee[0]-z[0]),D[1],D[2]],E.rotate(Y),N=Y):(I=G,z=X(I)),Z=!0,S.render(!0);var H=E.rotate(),q=E.invert(S.midPt);S.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":E.scale()/S.fitScale,"geo.center.lon":q[0],"geo.center.lat":q[1],"geo.projection.rotation.lon":-H[0]})}function K(){m.select(this).style(i),Z&&v(S,E,U)}function U(H){var q=E.rotate(),re=E.invert(S.midPt);H("projection.rotation.lon",-q[0]),H("center.lon",re[0]),H("center.lat",re[1])}return P.on("zoomstart",ce).on("zoom",Q).on("zoomend",K),P}function b(S,E){E.rotate(),E.scale();var P=r(S,E),F=L(P,"zoomstart","zoom","zoomend"),I=0,D=P.on,R;P.on("zoomstart",function(){m.select(this).style(a);var ee=m.mouse(this),Z=E.rotate(),X=Z,ne=E.translate(),ce=d(Z);R=g(E,ee),D.call(P,"zoom",function(){var Q=m.mouse(this);if(E.scale(m.event.scale),!R)ee=Q,R=g(E,ee);else if(g(E,Q)){E.rotate(Z).translate(ne);var K=g(E,Q),U=y(R,K),H=_(f(ce,U)),q=l(H,R,X);(!isFinite(q[0])||!isFinite(q[1])||!isFinite(q[2]))&&(q=X),E.rotate(q),X=q}z(F.of(this,arguments))}),N(F.of(this,arguments))}).on("zoomend",function(){m.select(this).style(i),D.call(P,"zoom",null),G(F.of(this,arguments)),v(S,E,Y)}).on("zoom.redraw",function(){S.render(!0);var ee=E.rotate();S.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":E.scale()/S.fitScale,"geo.projection.rotation.lon":-ee[0],"geo.projection.rotation.lat":-ee[1]})});function N(ee){I++||ee({type:"zoomstart"})}function z(ee){ee({type:"zoom"})}function G(ee){--I||ee({type:"zoomend"})}function Y(ee){var Z=E.rotate();ee("projection.rotation.lon",-Z[0]),ee("projection.rotation.lat",-Z[1])}return m.rebind(P,F,"on")}function g(S,E){var P=S.invert(E);return P&&isFinite(P[0])&&isFinite(P[1])&&p(P)}function d(S){var E=.5*S[0]*T,P=.5*S[1]*T,F=.5*S[2]*T,I=Math.sin(E),D=Math.cos(E),R=Math.sin(P),N=Math.cos(P),z=Math.sin(F),G=Math.cos(F);return[D*N*G+I*R*z,I*N*G-D*R*z,D*R*G+I*N*z,D*N*z-I*R*G]}function f(S,E){var P=S[0],F=S[1],I=S[2],D=S[3],R=E[0],N=E[1],z=E[2],G=E[3];return[P*R-F*N-I*z-D*G,P*N+F*R+I*G-D*z,P*z-F*G+I*R+D*N,P*G+F*z-I*N+D*R]}function y(S,E){if(!(!S||!E)){var P=h(S,E),F=Math.sqrt(w(P,P)),I=.5*Math.acos(Math.max(-1,Math.min(1,w(S,E)))),D=Math.sin(I)/F;return F&&[Math.cos(I),P[2]*D,-P[1]*D,P[0]*D]}}function l(S,E,P){var F=M(E,2,S[0]);F=M(F,1,S[1]),F=M(F,0,S[2]-P[2]);var I=E[0],D=E[1],R=E[2],N=F[0],z=F[1],G=F[2],Y=Math.atan2(D,I)*e,ee=Math.sqrt(I*I+D*D),Z,X;Math.abs(z)>ee?(X=(z>0?90:-90)-Y,Z=0):(X=Math.asin(z/ee)*e-Y,Z=Math.sqrt(ee*ee-z*z));var ne=180-X-2*Y,ce=(Math.atan2(G,N)-Math.atan2(R,Z))*e,Q=(Math.atan2(G,N)-Math.atan2(R,-Z))*e,K=x(P[0],P[1],X,ce),U=x(P[0],P[1],ne,Q);return K<=U?[X,ce,P[2]]:[ne,Q,P[2]]}function x(S,E,P,F){var I=u(P-S),D=u(F-E);return Math.sqrt(I*I+D*D)}function u(S){return(S%360+540)%360-180}function M(S,E,P){var F=P*T,I=S.slice(),D=E===0?1:0,R=E===2?1:2,N=Math.cos(F),z=Math.sin(F);return I[D]=S[D]*N-S[R]*z,I[R]=S[R]*N+S[D]*z,I}function _(S){return[Math.atan2(2*(S[0]*S[1]+S[2]*S[3]),1-2*(S[1]*S[1]+S[2]*S[2]))*e,Math.asin(Math.max(-1,Math.min(1,2*(S[0]*S[2]-S[3]*S[1]))))*e,Math.atan2(2*(S[0]*S[3]+S[1]*S[2]),1-2*(S[2]*S[2]+S[3]*S[3]))*e]}function p(S){var E=S[0]*T,P=S[1]*T,F=Math.cos(P);return[F*Math.cos(E),F*Math.sin(E),Math.sin(P)]}function w(S,E){for(var P=0,F=0,I=S.length;F<I;++F)P+=S[F]*E[F];return P}function h(S,E){return[S[1]*E[2]-S[2]*E[1],S[2]*E[0]-S[0]*E[2],S[0]*E[1]-S[1]*E[0]]}function L(S){for(var E=0,P=arguments.length,F=[];++E<P;)F.push(arguments[E]);var I=m.dispatch.apply(null,F);return I.of=function(D,R){return function(N){var z;try{z=N.sourceEvent=m.event,N.target=S,m.event=N,I[N.type].apply(D,R)}finally{m.event=z}}},I}},{"../../lib":515,"../../registry":647,"@plotly/d3":58}],602:[function(t,B,V){var m=t("../registry"),c=t("./cartesian/constants").SUBPLOT_PATTERN;V.getSubplotCalcData=function(A,T,e){var a=m.subplotsRegistry[T];if(!a)return[];for(var i=a.attr,n=[],r=0;r<A.length;r++){var v=A[r],s=v[0].trace;s[i]===e&&n.push(v)}return n},V.getModuleCalcData=function(A,T){var e=[],a=[],i;if(typeof T=="string"?i=m.getModule(T).plot:typeof T=="function"?i=T:i=T.plot,!i)return[e,A];for(var n=0;n<A.length;n++){var r=A[n],v=r[0].trace;v.visible!==!0||v._length===0||(v._module.plot===i?e.push(r):a.push(r))}return[e,a]},V.getSubplotData=function(T,e,a){if(!m.subplotsRegistry[e])return[];var i=m.subplotsRegistry[e].attr,n=[],r,v,s;if(e==="gl2d"){var o=a.match(c);v="x"+o[1],s="y"+o[2]}for(var b=0;b<T.length;b++)r=T[b],e==="gl2d"&&m.traceIs(r,"gl2d")?r[i[0]]===v&&r[i[1]]===s&&n.push(r):r[i]===a&&n.push(r);return n}},{"../registry":647,"./cartesian/constants":573}],603:[function(t,B,V){var m=t("mouse-change"),c=t("mouse-wheel"),A=t("mouse-event-offset"),T=t("../cartesian/constants"),e=t("has-passive-events");B.exports=i;function a(n,r){this.element=n,this.plot=r,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}function i(n){var r=n.mouseContainer,v=n.glplot,s=new a(r,v);function o(){n.xaxis.autorange=!1,n.yaxis.autorange=!1}function b(){for(var d=n.graphDiv._fullLayout._axisConstraintGroups,f=n.xaxis._id,y=n.yaxis._id,l=0;l<d.length;l++)if(d[l][f]!==-1){if(d[l][y]!==-1)return!0;break}return!1}s.mouseListener=m(r,g),r.addEventListener("touchstart",function(d){var f=A(d.changedTouches[0],r);g(0,f[0],f[1]),g(1,f[0],f[1]),d.preventDefault()},e?{passive:!1}:!1),r.addEventListener("touchmove",function(d){d.preventDefault();var f=A(d.changedTouches[0],r);g(1,f[0],f[1]),d.preventDefault()},e?{passive:!1}:!1),r.addEventListener("touchend",function(d){g(0,s.lastPos[0],s.lastPos[1]),d.preventDefault()},e?{passive:!1}:!1);function g(d,f,y){var l=n.calcDataBox(),x=v.viewBox,u=s.lastPos[0],M=s.lastPos[1],_=T.MINDRAG*v.pixelRatio,p=T.MINZOOM*v.pixelRatio,w,h;f*=v.pixelRatio,y*=v.pixelRatio,y=x[3]-x[1]-y;function L(D,R,N){var z=Math.min(R,N),G=Math.max(R,N);z!==G?(l[D]=z,l[D+2]=G,s.dataBox=l,n.setRanges(l)):(n.selectBox.selectBox=[0,0,1,1],n.glplot.setDirty())}switch(n.fullLayout.dragmode){case"zoom":if(d){var S=f/(x[2]-x[0])*(l[2]-l[0])+l[0],E=y/(x[3]-x[1])*(l[3]-l[1])+l[1];s.boxInited||(s.boxStart[0]=S,s.boxStart[1]=E,s.dragStart[0]=f,s.dragStart[1]=y),s.boxEnd[0]=S,s.boxEnd[1]=E,s.boxInited=!0,!s.boxEnabled&&(s.boxStart[0]!==s.boxEnd[0]||s.boxStart[1]!==s.boxEnd[1])&&(s.boxEnabled=!0);var P=Math.abs(s.dragStart[0]-f)<p,F=Math.abs(s.dragStart[1]-y)<p;if(b()&&!(P&&F)){w=s.boxEnd[0]-s.boxStart[0],h=s.boxEnd[1]-s.boxStart[1];var I=(l[3]-l[1])/(l[2]-l[0]);Math.abs(w*I)>Math.abs(h)?(s.boxEnd[1]=s.boxStart[1]+Math.abs(w)*I*(h>=0?1:-1),s.boxEnd[1]<l[1]?(s.boxEnd[1]=l[1],s.boxEnd[0]=s.boxStart[0]+(l[1]-s.boxStart[1])/Math.abs(I)):s.boxEnd[1]>l[3]&&(s.boxEnd[1]=l[3],s.boxEnd[0]=s.boxStart[0]+(l[3]-s.boxStart[1])/Math.abs(I))):(s.boxEnd[0]=s.boxStart[0]+Math.abs(h)/I*(w>=0?1:-1),s.boxEnd[0]<l[0]?(s.boxEnd[0]=l[0],s.boxEnd[1]=s.boxStart[1]+(l[0]-s.boxStart[0])*Math.abs(I)):s.boxEnd[0]>l[2]&&(s.boxEnd[0]=l[2],s.boxEnd[1]=s.boxStart[1]+(l[2]-s.boxStart[0])*Math.abs(I)))}else P&&(s.boxEnd[0]=s.boxStart[0]),F&&(s.boxEnd[1]=s.boxStart[1])}else s.boxEnabled?(w=s.boxStart[0]!==s.boxEnd[0],h=s.boxStart[1]!==s.boxEnd[1],w||h?(w&&(L(0,s.boxStart[0],s.boxEnd[0]),n.xaxis.autorange=!1),h&&(L(1,s.boxStart[1],s.boxEnd[1]),n.yaxis.autorange=!1),n.relayoutCallback()):n.glplot.setDirty(),s.boxEnabled=!1,s.boxInited=!1):s.boxInited&&(s.boxInited=!1);break;case"pan":s.boxEnabled=!1,s.boxInited=!1,d?(s.panning||(s.dragStart[0]=f,s.dragStart[1]=y),Math.abs(s.dragStart[0]-f)<_&&(f=s.dragStart[0]),Math.abs(s.dragStart[1]-y)<_&&(y=s.dragStart[1]),w=(u-f)*(l[2]-l[0])/(v.viewBox[2]-v.viewBox[0]),h=(M-y)*(l[3]-l[1])/(v.viewBox[3]-v.viewBox[1]),l[0]+=w,l[2]+=w,l[1]+=h,l[3]+=h,n.setRanges(l),s.panning=!0,s.lastInputTime=Date.now(),o(),n.cameraChanged(),n.handleAnnotations()):s.panning&&(s.panning=!1,n.relayoutCallback());break}s.lastPos[0]=f,s.lastPos[1]=y}return s.wheelListener=c(r,function(d,f){if(!n.scrollZoom)return!1;var y=n.calcDataBox(),l=v.viewBox,x=s.lastPos[0],u=s.lastPos[1],M=Math.exp(5*f/(l[3]-l[1])),_=x/(l[2]-l[0])*(y[2]-y[0])+y[0],p=u/(l[3]-l[1])*(y[3]-y[1])+y[1];return y[0]=(y[0]-_)*M+_,y[2]=(y[2]-_)*M+_,y[1]=(y[1]-p)*M+p,y[3]=(y[3]-p)*M+p,n.setRanges(y),s.lastInputTime=Date.now(),o(),n.cameraChanged(),n.handleAnnotations(),n.relayoutCallback(),!0},!0),s}},{"../cartesian/constants":573,"has-passive-events":229,"mouse-change":241,"mouse-event-offset":242,"mouse-wheel":244}],604:[function(t,B,V){var m=t("../cartesian/axes"),c=t("../../lib/str2rgbarray");function A(i){this.scene=i,this.gl=i.gl,this.pixelRatio=i.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var T=A.prototype,e=["xaxis","yaxis"];T.merge=function(i){this.titleEnable=!1,this.backgroundColor=c(i.plot_bgcolor);var n,r,v,s,o,b,g,d,f,y,l;for(y=0;y<2;++y){n=e[y];var x=n.charAt(0);for(r=i[this.scene[n]._name],v=r.title.text===this.scene.fullLayout._dfltTitle[x]?"":r.title.text,l=0;l<=2;l+=2)this.labelEnable[y+l]=!1,this.labels[y+l]=v,this.labelColor[y+l]=c(r.title.font.color),this.labelFont[y+l]=r.title.font.family,this.labelSize[y+l]=r.title.font.size,this.labelPad[y+l]=this.getLabelPad(n,r),this.tickEnable[y+l]=!1,this.tickColor[y+l]=c((r.tickfont||{}).color),this.tickAngle[y+l]=r.tickangle==="auto"?0:Math.PI*-r.tickangle/180,this.tickPad[y+l]=this.getTickPad(r),this.tickMarkLength[y+l]=0,this.tickMarkWidth[y+l]=r.tickwidth||0,this.tickMarkColor[y+l]=c(r.tickcolor),this.borderLineEnable[y+l]=!1,this.borderLineColor[y+l]=c(r.linecolor),this.borderLineWidth[y+l]=r.linewidth||0;g=this.hasSharedAxis(r),o=this.hasAxisInDfltPos(n,r)&&!g,b=this.hasAxisInAltrPos(n,r)&&!g,s=r.mirror||!1,d=g?String(s).indexOf("all")!==-1:!!s,f=g?s==="allticks":String(s).indexOf("ticks")!==-1,o?this.labelEnable[y]=!0:b&&(this.labelEnable[y+2]=!0),o?this.tickEnable[y]=r.showticklabels:b&&(this.tickEnable[y+2]=r.showticklabels),(o||d)&&(this.borderLineEnable[y]=r.showline),(b||d)&&(this.borderLineEnable[y+2]=r.showline),(o||f)&&(this.tickMarkLength[y]=this.getTickMarkLength(r)),(b||f)&&(this.tickMarkLength[y+2]=this.getTickMarkLength(r)),this.gridLineEnable[y]=r.showgrid,this.gridLineColor[y]=c(r.gridcolor),this.gridLineWidth[y]=r.gridwidth,this.zeroLineEnable[y]=r.zeroline,this.zeroLineColor[y]=c(r.zerolinecolor),this.zeroLineWidth[y]=r.zerolinewidth}},T.hasSharedAxis=function(i){var n=this.scene,r=n.fullLayout._subplots.gl2d,v=m.findSubplotsWithAxis(r,i);return v.indexOf(n.id)!==0},T.hasAxisInDfltPos=function(i,n){var r=n.side;if(i==="xaxis")return r==="bottom";if(i==="yaxis")return r==="left"},T.hasAxisInAltrPos=function(i,n){var r=n.side;if(i==="xaxis")return r==="top";if(i==="yaxis")return r==="right"},T.getLabelPad=function(i,n){var r=1.5,v=n.title.font.size,s=n.showticklabels;if(i==="xaxis")return n.side==="top"?-10+v*(r+(s?1:0)):-10+v*(r+(s?.5:0));if(i==="yaxis")return n.side==="right"?10+v*(r+(s?1:.5)):10+v*(r+(s?.5:0))},T.getTickPad=function(i){return i.ticks==="outside"?10+i.ticklen:15},T.getTickMarkLength=function(i){if(!i.ticks)return 0;var n=i.ticklen;return i.ticks==="inside"?-n:n};function a(i){return new A(i)}B.exports=a},{"../../lib/str2rgbarray":540,"../cartesian/axes":566}],605:[function(t,B,V){var m=t("../../plot_api/edit_types").overrideAll,c=t("./scene2d"),A=t("../layout_attributes"),T=t("../../constants/xmlns_namespaces"),e=t("../cartesian/constants"),a=t("../cartesian"),i=t("../../components/fx/layout_attributes"),n=t("../get_data").getSubplotData;V.name="gl2d",V.attr=["xaxis","yaxis"],V.idRoot=["x","y"],V.idRegex=e.idRegex,V.attrRegex=e.attrRegex,V.attributes=t("../cartesian/attributes"),V.supplyLayoutDefaults=function(r,v,s){v._has("cartesian")||a.supplyLayoutDefaults(r,v,s)},V.layoutAttrOverrides=m(a.layoutAttributes,"plot","from-root"),V.baseLayoutAttrOverrides=m({plot_bgcolor:A.plot_bgcolor,hoverlabel:i.hoverlabel},"plot","nested"),V.plot=function(v){for(var s=v._fullLayout,o=v._fullData,b=s._subplots.gl2d,g=0;g<b.length;g++){var d=b[g],f=s._plots[d],y=n(o,"gl2d",d),l=f._scene2d;l===void 0&&(l=new c({id:d,graphDiv:v,container:v.querySelector(".gl-container"),staticPlot:v._context.staticPlot,plotGlPixelRatio:v._context.plotGlPixelRatio},s),f._scene2d=l),l.plot(y,v.calcdata,s,v.layout)}},V.clean=function(r,v,s,o){for(var b=o._subplots.gl2d||[],g=0;g<b.length;g++){var d=b[g],f=o._plots[d];if(!!f._scene2d){var y=n(r,"gl2d",d);y.length===0&&(f._scene2d.destroy(),delete o._plots[d])}}a.clean.apply(this,arguments)},V.drawFramework=function(r){r._context.staticPlot||a.drawFramework(r)},V.toSVG=function(r){for(var v=r._fullLayout,s=v._subplots.gl2d,o=0;o<s.length;o++){var b=v._plots[s[o]],g=b._scene2d,d=g.toImage("png"),f=v._glimages.append("svg:image");f.attr({xmlns:T.svg,"xlink:href":d,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),g.destroy()}},V.updateFx=function(r){for(var v=r._fullLayout,s=v._subplots.gl2d,o=0;o<s.length;o++){var b=v._plots[s[o]]._scene2d;b.updateFx(v.dragmode)}}},{"../../components/fx/layout_attributes":408,"../../constants/xmlns_namespaces":492,"../../plot_api/edit_types":548,"../cartesian":578,"../cartesian/attributes":564,"../cartesian/constants":573,"../get_data":602,"../layout_attributes":619,"./scene2d":606}],606:[function(t,B,V){var m=t("../../registry"),c=t("../../plots/cartesian/axes"),A=t("../../components/fx"),T=t("../../../stackgl_modules").gl_plot2d,e=t("../../../stackgl_modules").gl_spikes2d,a=t("../../../stackgl_modules").gl_select_box,i=t("webgl-context"),n=t("./convert"),r=t("./camera"),v=t("../../lib/show_no_webgl_msg"),s=t("../cartesian/constraints"),o=s.enforce,b=s.clean,g=t("../cartesian/autorange").doAutoRange,d=t("../../components/dragelement/helpers"),f=d.drawMode,y=d.selectMode,l=["xaxis","yaxis"],x,u,M=t("../cartesian/constants").SUBPLOT_PATTERN;function _(h,L){this.container=h.container,this.graphDiv=h.graphDiv,this.pixelRatio=h.plotGlPixelRatio||window.devicePixelRatio,this.id=h.id,this.staticPlot=!!h.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(L),this.makeFramework(),!this.stopped&&(this.glplotOptions=n(this),this.glplotOptions.merge(L),this.glplot=T(this.glplotOptions),this.camera=r(this),this.traces={},this.spikes=e(this.glplot),this.selectBox=a(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}B.exports=_;var p=_.prototype;p.makeFramework=function(){if(this.staticPlot){if(!u&&(x=document.createElement("canvas"),u=i({canvas:x,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}),!u))throw new Error("Error creating static canvas/context for image server");this.canvas=x,this.gl=u}else{var h=this.container.querySelector(".gl-canvas-focus"),L=i({canvas:h,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!L){v(this),this.stopped=!0;return}this.canvas=h,this.gl=L}var S=this.canvas;S.style.width="100%",S.style.height="100%",S.style.position="absolute",S.style.top="0px",S.style.left="0px",S.style["pointer-events"]="none",this.updateSize(S);var E=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");E.style.position="absolute",E.style.top=E.style.left="0px",E.style.width=E.style.height="100%",E.style["z-index"]=20,E.style["pointer-events"]="none";var P=this.mouseContainer=document.createElement("div");P.style.position="absolute",P.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var F=this.container;F.appendChild(E),F.appendChild(P);var I=this;P.addEventListener("mouseout",function(){I.isMouseOver=!1,I.unhover()}),P.addEventListener("mouseover",function(){I.isMouseOver=!0})},p.toImage=function(h){h||(h="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(x),this.updateSize(this.canvas);var L=this.glplot.gl,S=L.drawingBufferWidth,E=L.drawingBufferHeight;L.clearColor(1,1,1,0),L.clear(L.COLOR_BUFFER_BIT|L.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),L.bindFramebuffer(L.FRAMEBUFFER,null);var P=new Uint8Array(S*E*4);L.readPixels(0,0,S,E,L.RGBA,L.UNSIGNED_BYTE,P);for(var F=0,I=E-1;F<I;++F,--I)for(var D=0;D<S;++D)for(var R=0;R<4;++R){var N=P[4*(S*F+D)+R];P[4*(S*F+D)+R]=P[4*(S*I+D)+R],P[4*(S*I+D)+R]=N}var z=document.createElement("canvas");z.width=S,z.height=E;var G=z.getContext("2d",{willReadFrequently:!0}),Y=G.createImageData(S,E);Y.data.set(P),G.putImageData(Y,0,0);var ee;switch(h){case"jpeg":ee=z.toDataURL("image/jpeg");break;case"webp":ee=z.toDataURL("image/webp");break;default:ee=z.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(x),ee},p.updateSize=function(h){h||(h=this.canvas);var L=this.pixelRatio,S=this.fullLayout,E=S.width,P=S.height,F=Math.ceil(L*E)|0,I=Math.ceil(L*P)|0;return(h.width!==F||h.height!==I)&&(h.width=F,h.height=I),h},p.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var h=[c.calcTicks(this.xaxis),c.calcTicks(this.yaxis)],L=0;L<2;++L)for(var S=0;S<h[L].length;++S)h[L][S].text=h[L][S].text+"";return h};function w(h,L){for(var S=0;S<2;++S){var E=h[S],P=L[S];if(E.length!==P.length)return!0;for(var F=0;F<E.length;++F)if(E[F].x!==P[F].x)return!0}return!1}p.updateRefs=function(h){this.fullLayout=h;var L=this.id.match(M),S="xaxis"+L[1],E="yaxis"+L[2];this.xaxis=this.fullLayout[S],this.yaxis=this.fullLayout[E]},p.relayoutCallback=function(){var h=this.graphDiv,L=this.xaxis,S=this.yaxis,E=h.layout,P={},F=P[L._name+".range"]=L.range.slice(),I=P[S._name+".range"]=S.range.slice();P[L._name+".autorange"]=L.autorange,P[S._name+".autorange"]=S.autorange,m.call("_storeDirectGUIEdit",h.layout,h._fullLayout._preGUI,P);var D=E[L._name];D.range=F,D.autorange=L.autorange;var R=E[S._name];R.range=I,R.autorange=S.autorange,P.lastInputTime=this.camera.lastInputTime,h.emit("plotly_relayout",P)},p.cameraChanged=function(){var h=this.camera;this.glplot.setDataBox(this.calcDataBox());var L=this.computeTickMarks(),S=this.glplotOptions.ticks;w(L,S)&&(this.glplotOptions.ticks=L,this.glplotOptions.dataBox=h.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},p.handleAnnotations=function(){for(var h=this.graphDiv,L=this.fullLayout.annotations,S=0;S<L.length;S++){var E=L[S];E.xref===this.xaxis._id&&E.yref===this.yaxis._id&&m.getComponentMethod("annotations","drawOne")(h,S)}},p.destroy=function(){if(!!this.glplot){var h=this.traces;h&&Object.keys(h).map(function(L){h[L].dispose(),delete h[L]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},p.plot=function(h,L,S){var E=this.glplot;this.updateRefs(S),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(h,L),this.updateFx(S.dragmode);var P=S.width,F=S.height;this.updateSize(this.canvas);var I=this.glplotOptions;I.merge(S),I.screenBox=[0,0,P,F];var D={_fullLayout:{_axisConstraintGroups:S._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:S._size}};b(D,this.xaxis),b(D,this.yaxis);var R=S._size,N=this.xaxis.domain,z=this.yaxis.domain;I.viewBox=[R.l+N[0]*R.w,R.b+z[0]*R.h,P-R.r-(1-N[1])*R.w,F-R.t-(1-z[1])*R.h],this.mouseContainer.style.width=R.w*(N[1]-N[0])+"px",this.mouseContainer.style.height=R.h*(z[1]-z[0])+"px",this.mouseContainer.height=R.h*(z[1]-z[0]),this.mouseContainer.style.left=R.l+N[0]*R.w+"px",this.mouseContainer.style.top=R.t+(1-z[1])*R.h+"px";var G,Y;for(Y=0;Y<2;++Y)G=this[l[Y]],G._length=I.viewBox[Y+2]-I.viewBox[Y],g(this.graphDiv,G),G.setScale();o(D),I.ticks=this.computeTickMarks(),I.dataBox=this.calcDataBox(),I.merge(S),E.update(I),this.glplot.draw()},p.calcDataBox=function(){var h=this.xaxis,L=this.yaxis,S=h.range,E=L.range,P=h.r2l,F=L.r2l;return[P(S[0]),F(E[0]),P(S[1]),F(E[1])]},p.setRanges=function(h){var L=this.xaxis,S=this.yaxis,E=L.l2r,P=S.l2r;L.range=[E(h[0]),E(h[2])],S.range=[P(h[1]),P(h[3])]},p.updateTraces=function(h,L){var S=Object.keys(this.traces),E,P,F;this.fullData=h;e:for(E=0;E<S.length;E++){var I=S[E],D=this.traces[I];for(P=0;P<h.length;P++)if(F=h[P],F.uid===I&&F.type===D.type)continue e;D.dispose(),delete this.traces[I]}for(E=0;E<h.length;E++){F=h[E];var R=L[E],N=this.traces[F.uid];N?N.update(F,R):(N=F._module.plot(this,F,R),this.traces[F.uid]=N)}this.glplot.objects.sort(function(z,G){return z._trace.index-G._trace.index})},p.updateFx=function(h){y(h)||f(h)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),h==="pan"?this.mouseContainer.style.cursor="move":h==="zoom"?this.mouseContainer.style.cursor="crosshair":this.mouseContainer.style.cursor=null},p.emitPointAction=function(h,L){for(var S=h.trace.uid,E=h.pointIndex,P,F=0;F<this.fullData.length;F++)this.fullData[F].uid===S&&(P=this.fullData[F]);var I={x:h.traceCoord[0],y:h.traceCoord[1],curveNumber:P.index,pointNumber:E,data:P._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};A.appendArrayPointValue(I,P,E),this.graphDiv.emit(L,{points:[I]})},p.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var h=this.glplot,L=this.camera,S=L.mouseListener,E=this.lastButtonState===1&&S.buttons===0,P=this.fullLayout;this.lastButtonState=S.buttons,this.cameraChanged();var F=S.x*h.pixelRatio,I=this.canvas.height-h.pixelRatio*S.y,D;if(L.boxEnabled&&P.dragmode==="zoom"){this.selectBox.enabled=!0;for(var R=this.selectBox.selectBox=[Math.min(L.boxStart[0],L.boxEnd[0]),Math.min(L.boxStart[1],L.boxEnd[1]),Math.max(L.boxStart[0],L.boxEnd[0]),Math.max(L.boxStart[1],L.boxEnd[1])],N=0;N<2;N++)L.boxStart[N]===L.boxEnd[N]&&(R[N]=h.dataBox[N],R[N+2]=h.dataBox[N+2]);h.setDirty()}else if(!L.panning&&this.isMouseOver){this.selectBox.enabled=!1;var z=P._size,G=this.xaxis.domain,Y=this.yaxis.domain;D=h.pick(F/h.pixelRatio+z.l+G[0]*z.w,I/h.pixelRatio-(z.t+(1-Y[1])*z.h));var ee=D&&D.object._trace.handlePick(D);if(ee&&E&&this.emitPointAction(ee,"plotly_click"),D&&D.object._trace.hoverinfo!=="skip"&&P.hovermode&&ee&&(!this.lastPickResult||this.lastPickResult.traceUid!==ee.trace.uid||this.lastPickResult.dataCoord[0]!==ee.dataCoord[0]||this.lastPickResult.dataCoord[1]!==ee.dataCoord[1])){var Z=ee;this.lastPickResult={traceUid:ee.trace?ee.trace.uid:null,dataCoord:ee.dataCoord.slice()},this.spikes.update({center:D.dataCoord}),Z.screenCoord=[((h.viewBox[2]-h.viewBox[0])*(D.dataCoord[0]-h.dataBox[0])/(h.dataBox[2]-h.dataBox[0])+h.viewBox[0])/h.pixelRatio,(this.canvas.height-(h.viewBox[3]-h.viewBox[1])*(D.dataCoord[1]-h.dataBox[1])/(h.dataBox[3]-h.dataBox[1])-h.viewBox[1])/h.pixelRatio],this.emitPointAction(ee,"plotly_hover");var X=this.fullData[Z.trace.index]||{},ne=Z.pointIndex,ce=A.castHoverinfo(X,P,ne);if(ce&&ce!=="all"){var Q=ce.split("+");Q.indexOf("x")===-1&&(Z.traceCoord[0]=void 0),Q.indexOf("y")===-1&&(Z.traceCoord[1]=void 0),Q.indexOf("z")===-1&&(Z.traceCoord[2]=void 0),Q.indexOf("text")===-1&&(Z.textLabel=void 0),Q.indexOf("name")===-1&&(Z.name=void 0)}A.loneHover({x:Z.screenCoord[0],y:Z.screenCoord[1],xLabel:this.hoverFormatter("xaxis",Z.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",Z.traceCoord[1]),zLabel:Z.traceCoord[2],text:Z.textLabel,name:Z.name,color:A.castHoverOption(X,ne,"bgcolor")||Z.color,borderColor:A.castHoverOption(X,ne,"bordercolor"),fontFamily:A.castHoverOption(X,ne,"font.family"),fontSize:A.castHoverOption(X,ne,"font.size"),fontColor:A.castHoverOption(X,ne,"font.color"),nameLength:A.castHoverOption(X,ne,"namelength"),textAlign:A.castHoverOption(X,ne,"align")},{container:this.svgContainer,gd:this.graphDiv})}}D||this.unhover(),h.draw()}},p.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),A.loneUnhover(this.svgContainer))},p.hoverFormatter=function(h,L){if(L!==void 0){var S=this[h];return c.tickText(S,S.c2l(L),"hover").text}}},{"../../../stackgl_modules":1133,"../../components/dragelement/helpers":385,"../../components/fx":407,"../../lib/show_no_webgl_msg":537,"../../plots/cartesian/axes":566,"../../registry":647,"../cartesian/autorange":565,"../cartesian/constants":573,"../cartesian/constraints":574,"./camera":603,"./convert":604,"webgl-context":332}],607:[function(t,B,V){var m=t("../../plot_api/edit_types").overrideAll,c=t("../../components/fx/layout_attributes"),A=t("./scene"),T=t("../get_data").getSubplotData,e=t("../../lib"),a=t("../../constants/xmlns_namespaces"),i="gl3d",n="scene";V.name=i,V.attr=n,V.idRoot=n,V.idRegex=V.attrRegex=e.counterRegex("scene"),V.attributes=t("./layout/attributes"),V.layoutAttributes=t("./layout/layout_attributes"),V.baseLayoutAttrOverrides=m({hoverlabel:c.hoverlabel},"plot","nested"),V.supplyLayoutDefaults=t("./layout/defaults"),V.plot=function(v){for(var s=v._fullLayout,o=v._fullData,b=s._subplots[i],g=0;g<b.length;g++){var d=b[g],f=T(o,i,d),y=s[d],l=y.camera,x=y._scene;x||(x=new A({id:d,graphDiv:v,container:v.querySelector(".gl-container"),staticPlot:v._context.staticPlot,plotGlPixelRatio:v._context.plotGlPixelRatio,camera:l},s),y._scene=x),x.viewInitial||(x.viewInitial={up:{x:l.up.x,y:l.up.y,z:l.up.z},eye:{x:l.eye.x,y:l.eye.y,z:l.eye.z},center:{x:l.center.x,y:l.center.y,z:l.center.z}}),x.plot(f,s,v.layout)}},V.clean=function(r,v,s,o){for(var b=o._subplots[i]||[],g=0;g<b.length;g++){var d=b[g];!v[d]&&!!o[d]._scene&&(o[d]._scene.destroy(),o._infolayer&&o._infolayer.selectAll(".annotation-"+d).remove())}},V.toSVG=function(r){for(var v=r._fullLayout,s=v._subplots[i],o=v._size,b=0;b<s.length;b++){var g=v[s[b]],d=g.domain,f=g._scene,y=f.toImage("png"),l=v._glimages.append("svg:image");l.attr({xmlns:a.svg,"xlink:href":y,x:o.l+o.w*d.x[0],y:o.t+o.h*(1-d.y[1]),width:o.w*(d.x[1]-d.x[0]),height:o.h*(d.y[1]-d.y[0]),preserveAspectRatio:"none"}),f.destroy()}},V.cleanId=function(v){if(!!v.match(/^scene[0-9]*$/)){var s=v.substr(5);return s==="1"&&(s=""),n+s}},V.updateFx=function(r){for(var v=r._fullLayout,s=v._subplots[i],o=0;o<s.length;o++){var b=v[s[o]]._scene;b.updateFx(v.dragmode,v.hovermode)}}},{"../../components/fx/layout_attributes":408,"../../constants/xmlns_namespaces":492,"../../lib":515,"../../plot_api/edit_types":548,"../get_data":602,"./layout/attributes":608,"./layout/defaults":612,"./layout/layout_attributes":613,"./scene":617}],608:[function(t,B,V){B.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},{}],609:[function(t,B,V){var m=t("../../../components/color"),c=t("../../cartesian/layout_attributes"),A=t("../../../lib/extend").extendFlat,T=t("../../../plot_api/edit_types").overrideAll;B.exports=T({visible:c.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:m.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:c.color,categoryorder:c.categoryorder,categoryarray:c.categoryarray,title:{text:c.title.text,font:c.title.font},type:A({},c.type,{values:["-","linear","log","date","category"]}),autotypenumbers:c.autotypenumbers,autorange:c.autorange,rangemode:c.rangemode,range:A({},c.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:c.tickmode,nticks:c.nticks,tick0:c.tick0,dtick:c.dtick,tickvals:c.tickvals,ticktext:c.ticktext,ticks:c.ticks,mirror:c.mirror,ticklen:c.ticklen,tickwidth:c.tickwidth,tickcolor:c.tickcolor,showticklabels:c.showticklabels,tickfont:c.tickfont,tickangle:c.tickangle,tickprefix:c.tickprefix,showtickprefix:c.showtickprefix,ticksuffix:c.ticksuffix,showticksuffix:c.showticksuffix,showexponent:c.showexponent,exponentformat:c.exponentformat,minexponent:c.minexponent,separatethousands:c.separatethousands,tickformat:c.tickformat,tickformatstops:c.tickformatstops,hoverformat:c.hoverformat,showline:c.showline,linecolor:c.linecolor,linewidth:c.linewidth,showgrid:c.showgrid,gridcolor:A({},c.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:c.gridwidth,zeroline:c.zeroline,zerolinecolor:c.zerolinecolor,zerolinewidth:c.zerolinewidth,_deprecated:{title:c._deprecated.title,titlefont:c._deprecated.titlefont}},"plot","from-root")},{"../../../components/color":367,"../../../lib/extend":505,"../../../plot_api/edit_types":548,"../../cartesian/layout_attributes":579}],610:[function(t,B,V){var m=t("tinycolor2").mix,c=t("../../../lib"),A=t("../../../plot_api/plot_template"),T=t("./axis_attributes"),e=t("../../cartesian/type_defaults"),a=t("../../cartesian/axis_defaults"),i=["xaxis","yaxis","zaxis"],n=100*(204-68)/(255-68);B.exports=function(v,s,o){var b,g;function d(l,x){return c.coerce(b,g,T,l,x)}for(var f=0;f<i.length;f++){var y=i[f];b=v[y]||{},g=A.newContainer(s,y),g._id=y[0]+o.scene,g._name=y,e(b,g,d,o),a(b,g,d,{font:o.font,letter:y[0],data:o.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelstep:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,bgColor:o.bgColor,calendar:o.calendar},o.fullLayout),d("gridcolor",m(g.color,o.bgColor,n).toRgbString()),d("title.text",y[0]),g.setScale=c.noop,d("showspikes")&&(d("spikesides"),d("spikethickness"),d("spikecolor",g.color)),d("showaxeslabels"),d("showbackground")&&d("backgroundcolor")}}},{"../../../lib":515,"../../../plot_api/plot_template":555,"../../cartesian/axis_defaults":568,"../../cartesian/type_defaults":591,"./axis_attributes":609,tinycolor2:313}],611:[function(t,B,V){var m=t("../../../lib/str2rgbarray"),c=t("../../../lib"),A=["xaxis","yaxis","zaxis"];function T(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}var e=T.prototype;e.merge=function(i,n){for(var r=this,v=0;v<3;++v){var s=n[A[v]];if(!s.visible){r.tickEnable[v]=!1,r.labelEnable[v]=!1,r.lineEnable[v]=!1,r.lineTickEnable[v]=!1,r.gridEnable[v]=!1,r.zeroEnable[v]=!1,r.backgroundEnable[v]=!1;continue}r.labels[v]=i._meta?c.templateString(s.title.text,i._meta):s.title.text,"font"in s.title&&(s.title.font.color&&(r.labelColor[v]=m(s.title.font.color)),s.title.font.family&&(r.labelFont[v]=s.title.font.family),s.title.font.size&&(r.labelSize[v]=s.title.font.size)),"showline"in s&&(r.lineEnable[v]=s.showline),"linecolor"in s&&(r.lineColor[v]=m(s.linecolor)),"linewidth"in s&&(r.lineWidth[v]=s.linewidth),"showgrid"in s&&(r.gridEnable[v]=s.showgrid),"gridcolor"in s&&(r.gridColor[v]=m(s.gridcolor)),"gridwidth"in s&&(r.gridWidth[v]=s.gridwidth),s.type==="log"?r.zeroEnable[v]=!1:"zeroline"in s&&(r.zeroEnable[v]=s.zeroline),"zerolinecolor"in s&&(r.zeroLineColor[v]=m(s.zerolinecolor)),"zerolinewidth"in s&&(r.zeroLineWidth[v]=s.zerolinewidth),"ticks"in s&&!!s.ticks?r.lineTickEnable[v]=!0:r.lineTickEnable[v]=!1,"ticklen"in s&&(r.lineTickLength[v]=r._defaultLineTickLength[v]=s.ticklen),"tickcolor"in s&&(r.lineTickColor[v]=m(s.tickcolor)),"tickwidth"in s&&(r.lineTickWidth[v]=s.tickwidth),"tickangle"in s&&(r.tickAngle[v]=s.tickangle==="auto"?-3600:Math.PI*-s.tickangle/180),"showticklabels"in s&&(r.tickEnable[v]=s.showticklabels),"tickfont"in s&&(s.tickfont.color&&(r.tickColor[v]=m(s.tickfont.color)),s.tickfont.family&&(r.tickFont[v]=s.tickfont.family),s.tickfont.size&&(r.tickSize[v]=s.tickfont.size)),"mirror"in s?["ticks","all","allticks"].indexOf(s.mirror)!==-1?(r.lineTickMirror[v]=!0,r.lineMirror[v]=!0):s.mirror===!0?(r.lineTickMirror[v]=!1,r.lineMirror[v]=!0):(r.lineTickMirror[v]=!1,r.lineMirror[v]=!1):r.lineMirror[v]=!1,"showbackground"in s&&s.showbackground!==!1?(r.backgroundEnable[v]=!0,r.backgroundColor[v]=m(s.backgroundcolor)):r.backgroundEnable[v]=!1}};function a(i,n){var r=new T;return r.merge(i,n),r}B.exports=a},{"../../../lib":515,"../../../lib/str2rgbarray":540}],612:[function(t,B,V){var m=t("../../../lib"),c=t("../../../components/color"),A=t("../../../registry"),T=t("../../subplot_defaults"),e=t("./axis_defaults"),a=t("./layout_attributes"),i=t("../../get_data").getSubplotData,n="gl3d";B.exports=function(s,o,b){var g=o._basePlotModules.length>1;function d(f){if(!g){var y=m.validate(s[f],a[f]);if(y)return s[f]}}T(s,o,b,{type:n,attributes:a,handleDefaults:r,fullLayout:o,font:o.font,fullData:b,getDfltFromLayout:d,autotypenumbersDflt:o.autotypenumbers,paper_bgcolor:o.paper_bgcolor,calendar:o.calendar})};function r(v,s,o,b){for(var g=o("bgcolor"),d=c.combine(g,b.paper_bgcolor),f=["up","center","eye"],y=0;y<f.length;y++)o("camera."+f[y]+".x"),o("camera."+f[y]+".y"),o("camera."+f[y]+".z");o("camera.projection.type");var l=!!o("aspectratio.x")&&!!o("aspectratio.y")&&!!o("aspectratio.z"),x=l?"manual":"auto",u=o("aspectmode",x);l||(v.aspectratio=s.aspectratio={x:1,y:1,z:1},u==="manual"&&(s.aspectmode="auto"),v.aspectmode=s.aspectmode);var M=i(b.fullData,n,b.id);e(v,s,{font:b.font,scene:b.id,data:M,bgColor:d,calendar:b.calendar,autotypenumbersDflt:b.autotypenumbersDflt,fullLayout:b.fullLayout}),A.getComponentMethod("annotations3d","handleDefaults")(v,s,b);var _=b.getDfltFromLayout("dragmode");if(_!==!1&&!_)if(_="orbit",v.camera&&v.camera.up){var p=v.camera.up.x,w=v.camera.up.y,h=v.camera.up.z;h!==0&&(!p||!w||!h||h/Math.sqrt(p*p+w*w+h*h)>.999)&&(_="turntable")}else _="turntable";o("dragmode",_),o("hovermode",b.getDfltFromLayout("hovermode"))}},{"../../../components/color":367,"../../../lib":515,"../../../registry":647,"../../get_data":602,"../../subplot_defaults":641,"./axis_defaults":610,"./layout_attributes":613}],613:[function(t,B,V){var m=t("./axis_attributes"),c=t("../../domain").attributes,A=t("../../../lib/extend").extendFlat,T=t("../../../lib").counterRegex;function e(a,i,n){return{x:{valType:"number",dflt:a,editType:"camera"},y:{valType:"number",dflt:i,editType:"camera"},z:{valType:"number",dflt:n,editType:"camera"},editType:"camera"}}B.exports={_arrayAttrRegexps:[T("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:A(e(0,0,1),{}),center:A(e(0,0,0),{}),eye:A(e(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:c({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:m,yaxis:m,zaxis:m,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},{"../../../lib":515,"../../../lib/extend":505,"../../domain":593,"./axis_attributes":609}],614:[function(t,B,V){var m=t("../../../lib/str2rgbarray"),c=["xaxis","yaxis","zaxis"];function A(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}var T=A.prototype;T.merge=function(a){for(var i=0;i<3;++i){var n=a[c[i]];if(!n.visible){this.enabled[i]=!1,this.drawSides[i]=!1;continue}this.enabled[i]=n.showspikes,this.colors[i]=m(n.spikecolor),this.drawSides[i]=n.spikesides,this.lineWidth[i]=n.spikethickness}};function e(a){var i=new A;return i.merge(a),i}B.exports=e},{"../../../lib/str2rgbarray":540}],615:[function(t,B,V){B.exports=e;var m=t("../../cartesian/axes"),c=t("../../../lib"),A=["xaxis","yaxis","zaxis"];function T(a){for(var i=new Array(3),n=0;n<3;++n){for(var r=a[n],v=new Array(r.length),s=0;s<r.length;++s)v[s]=r[s].x;i[n]=v}return i}function e(a){for(var i=a.axesOptions,n=a.glplot.axesPixels,r=a.fullSceneLayout,v=[[],[],[]],s=0;s<3;++s){var o=r[A[s]];if(o._length=(n[s].hi-n[s].lo)*n[s].pixelsPerDataUnit/a.dataScale[s],Math.abs(o._length)===1/0||isNaN(o._length))v[s]=[];else{o._input_range=o.range.slice(),o.range[0]=n[s].lo/a.dataScale[s],o.range[1]=n[s].hi/a.dataScale[s],o._m=1/(a.dataScale[s]*n[s].pixelsPerDataUnit),o.range[0]===o.range[1]&&(o.range[0]-=1,o.range[1]+=1);var b=o.tickmode;if(o.tickmode==="auto"){o.tickmode="linear";var g=o.nticks||c.constrain(o._length/40,4,9);m.autoTicks(o,Math.abs(o.range[1]-o.range[0])/g)}for(var d=m.calcTicks(o,{msUTC:!0}),f=0;f<d.length;++f)d[f].x=d[f].x*a.dataScale[s],o.type==="date"&&(d[f].text=d[f].text.replace(/\<br\>/g," "));v[s]=d,o.tickmode=b}}i.ticks=v;for(var s=0;s<3;++s){.5*(a.glplot.bounds[0][s]+a.glplot.bounds[1][s]);for(var f=0;f<2;++f)i.bounds[f][s]=a.glplot.bounds[f][s]}a.contourLevels=T(v)}},{"../../../lib":515,"../../cartesian/axes":566}],616:[function(t,B,V){function m(A,T){var e=[0,0,0,0],a,i;for(a=0;a<4;++a)for(i=0;i<4;++i)e[i]+=A[4*a+i]*T[a];return e}function c(A,T){var e=m(A.projection,m(A.view,m(A.model,[T[0],T[1],T[2],1])));return e}B.exports=c},{}],617:[function(t,B,V){var m=t("../../../stackgl_modules").gl_plot3d,c=m.createCamera,A=m.createScene,T=t("webgl-context"),e=t("has-passive-events"),a=t("../../registry"),i=t("../../lib"),n=i.preserveDrawingBuffer(),r=t("../../plots/cartesian/axes"),v=t("../../components/fx"),s=t("../../lib/str2rgbarray"),o=t("../../lib/show_no_webgl_msg"),b=t("./project"),g=t("./layout/convert"),d=t("./layout/spikes"),f=t("./layout/tick_marks"),y,l;function x(P,F){var I=document.createElement("div"),D=P.container;this.graphDiv=P.graphDiv;var R=document.createElementNS("http://www.w3.org/2000/svg","svg");R.style.position="absolute",R.style.top=R.style.left="0px",R.style.width=R.style.height="100%",R.style["z-index"]=20,R.style["pointer-events"]="none",I.appendChild(R),this.svgContainer=R,I.id=P.id,I.style.position="absolute",I.style.top=I.style.left="0px",I.style.width=I.style.height="100%",D.appendChild(I),this.fullLayout=F,this.id=P.id||"scene",this.fullSceneLayout=F[this.id],this.plotArgs=[[],{},{}],this.axesOptions=g(F,F[this.id]),this.spikeOptions=d(F[this.id]),this.container=I,this.staticMode=!!P.staticPlot,this.pixelRatio=this.pixelRatio||P.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=a.getComponentMethod("annotations3d","convert"),this.drawAnnotations=a.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var u=x.prototype;u.prepareOptions=function(){var P=this,F={canvas:P.canvas,gl:P.gl,glOptions:{preserveDrawingBuffer:n,premultipliedAlpha:!0,antialias:!0},container:P.container,axes:P.axesOptions,spikes:P.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:P.camera,pixelRatio:P.pixelRatio};if(P.staticMode){if(!l&&(y=document.createElement("canvas"),l=T({canvas:y,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}),!l))throw new Error("error creating static canvas/context for image server");F.gl=l,F.canvas=y}return F};var M=!0;u.tryCreatePlot=function(){var P=this,F=P.prepareOptions(),I=!0;try{P.glplot=A(F)}catch{if(P.staticMode||!M||n)I=!1;else{i.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{n=F.glOptions.preserveDrawingBuffer=!0,P.glplot=A(F)}catch{n=F.glOptions.preserveDrawingBuffer=!1,I=!1}}}return M=!1,I},u.initializeGLCamera=function(){var P=this,F=P.fullSceneLayout.camera,I=F.projection.type==="orthographic";P.camera=c(P.container,{center:[F.center.x,F.center.y,F.center.z],eye:[F.eye.x,F.eye.y,F.eye.z],up:[F.up.x,F.up.y,F.up.z],_ortho:I,zoomMin:.01,zoomMax:100,mode:"orbit"})},u.initializeGLPlot=function(){var P=this;P.initializeGLCamera();var F=P.tryCreatePlot();if(!F)return o(P);P.traces={},P.make4thDimension();var I=P.graphDiv,D=I.layout,R=function(){var z={};return P.isCameraChanged(D)&&(z[P.id+".camera"]=P.getCamera()),P.isAspectChanged(D)&&(z[P.id+".aspectratio"]=P.glplot.getAspectratio(),D[P.id].aspectmode!=="manual"&&(P.fullSceneLayout.aspectmode=D[P.id].aspectmode=z[P.id+".aspectmode"]="manual")),z},N=function(z){if(z.fullSceneLayout.dragmode!==!1){var G=R();z.saveLayout(D),z.graphDiv.emit("plotly_relayout",G)}};return P.glplot.canvas&&(P.glplot.canvas.addEventListener("mouseup",function(){N(P)}),P.glplot.canvas.addEventListener("wheel",function(z){if(I._context._scrollZoom.gl3d){if(P.camera._ortho){var G=z.deltaX>z.deltaY?1.1:.9090909090909091,Y=P.glplot.getAspectratio();P.glplot.setAspectratio({x:G*Y.x,y:G*Y.y,z:G*Y.z})}N(P)}},e?{passive:!1}:!1),P.glplot.canvas.addEventListener("mousemove",function(){if(P.fullSceneLayout.dragmode!==!1&&P.camera.mouseListener.buttons!==0){var z=R();P.graphDiv.emit("plotly_relayouting",z)}}),P.staticMode||P.glplot.canvas.addEventListener("webglcontextlost",function(z){I&&I.emit&&I.emit("plotly_webglcontextlost",{event:z,layer:P.id})},!1)),P.glplot.oncontextloss=function(){P.recoverContext()},P.glplot.onrender=function(){P.render()},!0},u.render=function(){var P=this,F=P.graphDiv,I,D=P.svgContainer,R=P.container.getBoundingClientRect();F._fullLayout._calcInverseTransform(F);var N=F._fullLayout._invScaleX,z=F._fullLayout._invScaleY,G=R.width*N,Y=R.height*z;D.setAttributeNS(null,"viewBox","0 0 "+G+" "+Y),D.setAttributeNS(null,"width",G),D.setAttributeNS(null,"height",Y),f(P),P.glplot.axes.update(P.axesOptions);for(var ee=Object.keys(P.traces),Z=null,X=P.glplot.selection,ne=0;ne<ee.length;++ne)I=P.traces[ee[ne]],I.data.hoverinfo!=="skip"&&I.handlePick(X)&&(Z=I),I.setContourLevels&&I.setContourLevels();function ce(_e,ue,ye){var xe=P.fullSceneLayout[_e+"axis"];return xe.type!=="log"&&(ue=xe.d2l(ue)),r.hoverLabelText(xe,ue,ye)}if(Z!==null){var Q=b(P.glplot.cameraParams,X.dataCoordinate);I=Z.data;var K=F._fullData[I.index],U=X.index,H={xLabel:ce("x",X.traceCoordinate[0],I.xhoverformat),yLabel:ce("y",X.traceCoordinate[1],I.yhoverformat),zLabel:ce("z",X.traceCoordinate[2],I.zhoverformat)},q=v.castHoverinfo(K,P.fullLayout,U),re=(q||"").split("+"),j=q&&q==="all";!K.hovertemplate&&!j&&(re.indexOf("x")===-1&&(H.xLabel=void 0),re.indexOf("y")===-1&&(H.yLabel=void 0),re.indexOf("z")===-1&&(H.zLabel=void 0),re.indexOf("text")===-1&&(X.textLabel=void 0),re.indexOf("name")===-1&&(Z.name=void 0));var $,ie=[];I.type==="cone"||I.type==="streamtube"?(H.uLabel=ce("x",X.traceCoordinate[3],I.uhoverformat),(j||re.indexOf("u")!==-1)&&ie.push("u: "+H.uLabel),H.vLabel=ce("y",X.traceCoordinate[4],I.vhoverformat),(j||re.indexOf("v")!==-1)&&ie.push("v: "+H.vLabel),H.wLabel=ce("z",X.traceCoordinate[5],I.whoverformat),(j||re.indexOf("w")!==-1)&&ie.push("w: "+H.wLabel),H.normLabel=X.traceCoordinate[6].toPrecision(3),(j||re.indexOf("norm")!==-1)&&ie.push("norm: "+H.normLabel),I.type==="streamtube"&&(H.divergenceLabel=X.traceCoordinate[7].toPrecision(3),(j||re.indexOf("divergence")!==-1)&&ie.push("divergence: "+H.divergenceLabel)),X.textLabel&&ie.push(X.textLabel),$=ie.join("<br>")):I.type==="isosurface"||I.type==="volume"?(H.valueLabel=r.hoverLabelText(P._mockAxis,P._mockAxis.d2l(X.traceCoordinate[3]),I.valuehoverformat),ie.push("value: "+H.valueLabel),X.textLabel&&ie.push(X.textLabel),$=ie.join("<br>")):$=X.textLabel;var oe={x:X.traceCoordinate[0],y:X.traceCoordinate[1],z:X.traceCoordinate[2],data:K._input,fullData:K,curveNumber:K.index,pointNumber:U};v.appendArrayPointValue(oe,K,U),I._module.eventData&&(oe=K._module.eventData(oe,X,K,{},U));var ae={points:[oe]};if(P.fullSceneLayout.hovermode){var se=[];v.loneHover({trace:K,x:(.5+.5*Q[0]/Q[3])*G,y:(.5-.5*Q[1]/Q[3])*Y,xLabel:H.xLabel,yLabel:H.yLabel,zLabel:H.zLabel,text:$,name:Z.name,color:v.castHoverOption(K,U,"bgcolor")||Z.color,borderColor:v.castHoverOption(K,U,"bordercolor"),fontFamily:v.castHoverOption(K,U,"font.family"),fontSize:v.castHoverOption(K,U,"font.size"),fontColor:v.castHoverOption(K,U,"font.color"),nameLength:v.castHoverOption(K,U,"namelength"),textAlign:v.castHoverOption(K,U,"align"),hovertemplate:i.castOption(K,U,"hovertemplate"),hovertemplateLabels:i.extendFlat({},oe,H),eventData:[oe]},{container:D,gd:F,inOut_bbox:se}),oe.bbox=se[0]}X.buttons&&X.distance<5?F.emit("plotly_click",ae):F.emit("plotly_hover",ae),this.oldEventData=ae}else v.loneUnhover(D),this.oldEventData&&F.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;P.drawAnnotations(P)},u.recoverContext=function(){var P=this;P.glplot.dispose();var F=function(){if(P.glplot.gl.isContextLost()){requestAnimationFrame(F);return}if(!P.initializeGLPlot()){i.error("Catastrophic and unrecoverable WebGL error. Context lost.");return}P.plot.apply(P,P.plotArgs)};requestAnimationFrame(F)};var _=["xaxis","yaxis","zaxis"];function p(P,F,I){for(var D=P.fullSceneLayout,R=0;R<3;R++){var N=_[R],z=N.charAt(0),G=D[N],Y=F[z],ee=F[z+"calendar"],Z=F["_"+z+"length"];if(!i.isArrayOrTypedArray(Y))I[0][R]=Math.min(I[0][R],0),I[1][R]=Math.max(I[1][R],Z-1);else for(var X,ne=0;ne<(Z||Y.length);ne++)if(i.isArrayOrTypedArray(Y[ne]))for(var ce=0;ce<Y[ne].length;++ce)X=G.d2l(Y[ne][ce],0,ee),!isNaN(X)&&isFinite(X)&&(I[0][R]=Math.min(I[0][R],X),I[1][R]=Math.max(I[1][R],X));else X=G.d2l(Y[ne],0,ee),!isNaN(X)&&isFinite(X)&&(I[0][R]=Math.min(I[0][R],X),I[1][R]=Math.max(I[1][R],X))}}function w(P,F){for(var I=P.fullSceneLayout,D=I.annotations||[],R=0;R<3;R++)for(var N=_[R],z=N.charAt(0),G=I[N],Y=0;Y<D.length;Y++){var ee=D[Y];if(ee.visible){var Z=G.r2l(ee[z]);!isNaN(Z)&&isFinite(Z)&&(F[0][R]=Math.min(F[0][R],Z),F[1][R]=Math.max(F[1][R],Z))}}}u.plot=function(P,F,I){var D=this;if(D.plotArgs=[P,F,I],D.glplot.contextLost)return;var R,N,z,G,Y,ee,Z=F[D.id],X=I[D.id];D.fullLayout=F,D.fullSceneLayout=Z,D.axesOptions.merge(F,Z),D.spikeOptions.merge(Z),D.setViewport(Z),D.updateFx(Z.dragmode,Z.hovermode),D.camera.enableWheel=D.graphDiv._context._scrollZoom.gl3d,D.glplot.setClearColor(s(Z.bgcolor)),D.setConvert(Y),P?Array.isArray(P)||(P=[P]):P=[];var ne=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(z=0;z<P.length;++z)R=P[z],!(R.visible!==!0||R._length===0)&&p(this,R,ne);w(this,ne);var ce=[1,1,1];for(G=0;G<3;++G)ne[1][G]===ne[0][G]?ce[G]=1:ce[G]=1/(ne[1][G]-ne[0][G]);for(D.dataScale=ce,D.convertAnnotations(this),z=0;z<P.length;++z)R=P[z],!(R.visible!==!0||R._length===0)&&(N=D.traces[R.uid],N?N.data.type===R.type?N.update(R):(N.dispose(),N=R._module.plot(this,R),D.traces[R.uid]=N):(N=R._module.plot(this,R),D.traces[R.uid]=N),N.name=R.name);var Q=Object.keys(D.traces);e:for(z=0;z<Q.length;++z){for(G=0;G<P.length;++G)if(P[G].uid===Q[z]&&P[G].visible===!0&&P[G]._length!==0)continue e;N=D.traces[Q[z]],N.dispose(),delete D.traces[Q[z]]}D.glplot.objects.sort(function(Le,je){return Le._trace.data.index-je._trace.data.index});var K=[[0,0,0],[0,0,0]],U={};for(z=0;z<3;++z){if(Y=Z[_[z]],ee=Y.type,ee in U?(U[ee].acc*=ce[z],U[ee].count+=1):U[ee]={acc:ce[z],count:1},Y.autorange){K[0][z]=1/0,K[1][z]=-1/0;var H=D.glplot.objects,q=D.fullSceneLayout.annotations||[],re=Y._name.charAt(0);for(G=0;G<H.length;G++){var j=H[G],$=j.bounds,ie=j._trace.data._pad||0;j.constructor.name==="ErrorBars"&&Y._lowerLogErrorBound?K[0][z]=Math.min(K[0][z],Y._lowerLogErrorBound):K[0][z]=Math.min(K[0][z],$[0][z]/ce[z]-ie),K[1][z]=Math.max(K[1][z],$[1][z]/ce[z]+ie)}for(G=0;G<q.length;G++){var oe=q[G];if(oe.visible){var ae=Y.r2l(oe[re]);K[0][z]=Math.min(K[0][z],ae),K[1][z]=Math.max(K[1][z],ae)}}if("rangemode"in Y&&Y.rangemode==="tozero"&&(K[0][z]=Math.min(K[0][z],0),K[1][z]=Math.max(K[1][z],0)),K[0][z]>K[1][z])K[0][z]=-1,K[1][z]=1;else{var se=K[1][z]-K[0][z];K[0][z]-=se/32,K[1][z]+=se/32}if(Y.autorange==="reversed"){var _e=K[0][z];K[0][z]=K[1][z],K[1][z]=_e}}else{var ue=Y.range;K[0][z]=Y.r2l(ue[0]),K[1][z]=Y.r2l(ue[1])}K[0][z]===K[1][z]&&(K[0][z]-=1,K[1][z]+=1),D.glplot.setBounds(z,{min:K[0][z]*ce[z],max:K[1][z]*ce[z]})}var ye,xe=Z.aspectmode;if(xe==="cube")ye=[1,1,1];else if(xe==="manual"){var me=Z.aspectratio;ye=[me.x,me.y,me.z]}else if(xe==="auto"||xe==="data"){var be=[1,1,1];for(z=0;z<3;++z){Y=Z[_[z]],ee=Y.type;var ke=U[ee];be[z]=Math.pow(ke.acc,1/ke.count)/ce[z]}xe==="data"||Math.max.apply(null,be)/Math.min.apply(null,be)<=4?ye=be:ye=[1,1,1]}else throw new Error("scene.js aspectRatio was not one of the enumerated types");Z.aspectratio.x=X.aspectratio.x=ye[0],Z.aspectratio.y=X.aspectratio.y=ye[1],Z.aspectratio.z=X.aspectratio.z=ye[2],D.glplot.setAspectratio(Z.aspectratio),D.viewInitial.aspectratio||(D.viewInitial.aspectratio={x:Z.aspectratio.x,y:Z.aspectratio.y,z:Z.aspectratio.z}),D.viewInitial.aspectmode||(D.viewInitial.aspectmode=Z.aspectmode);var De=Z.domain||null,Ve=F._size||null;if(De&&Ve){var Ae=D.container.style;Ae.position="absolute",Ae.left=Ve.l+De.x[0]*Ve.w+"px",Ae.top=Ve.t+(1-De.y[1])*Ve.h+"px",Ae.width=Ve.w*(De.x[1]-De.x[0])+"px",Ae.height=Ve.h*(De.y[1]-De.y[0])+"px"}D.glplot.redraw()},u.destroy=function(){var P=this;!P.glplot||(P.camera.mouseListener.enabled=!1,P.container.removeEventListener("wheel",P.camera.wheelListener),P.camera=null,P.glplot.dispose(),P.container.parentNode.removeChild(P.container),P.glplot=null)};function h(P){return[[P.eye.x,P.eye.y,P.eye.z],[P.center.x,P.center.y,P.center.z],[P.up.x,P.up.y,P.up.z]]}function L(P){return{up:{x:P.up[0],y:P.up[1],z:P.up[2]},center:{x:P.center[0],y:P.center[1],z:P.center[2]},eye:{x:P.eye[0],y:P.eye[1],z:P.eye[2]},projection:{type:P._ortho===!0?"orthographic":"perspective"}}}u.getCamera=function(){var P=this;return P.camera.view.recalcMatrix(P.camera.view.lastT()),L(P.camera)},u.setViewport=function(P){var F=this,I=P.camera;F.camera.lookAt.apply(this,h(I)),F.glplot.setAspectratio(P.aspectratio);var D=I.projection.type==="orthographic",R=F.camera._ortho;D!==R&&(F.glplot.redraw(),F.glplot.clearRGBA(),F.glplot.dispose(),F.initializeGLPlot())},u.isCameraChanged=function(P){var F=this,I=F.getCamera(),D=i.nestedProperty(P,F.id+".camera"),R=D.get();function N(ee,Z,X,ne){var ce=["up","center","eye"],Q=["x","y","z"];return Z[ce[X]]&&ee[ce[X]][Q[ne]]===Z[ce[X]][Q[ne]]}var z=!1;if(R===void 0)z=!0;else{for(var G=0;G<3;G++)for(var Y=0;Y<3;Y++)if(!N(I,R,G,Y)){z=!0;break}(!R.projection||I.projection&&I.projection.type!==R.projection.type)&&(z=!0)}return z},u.isAspectChanged=function(P){var F=this,I=F.glplot.getAspectratio(),D=i.nestedProperty(P,F.id+".aspectratio"),R=D.get();return R===void 0||R.x!==I.x||R.y!==I.y||R.z!==I.z},u.saveLayout=function(P){var F=this,I=F.fullLayout,D,R,N,z,G,Y,ee=F.isCameraChanged(P),Z=F.isAspectChanged(P),X=ee||Z;if(X){var ne={};if(ee&&(D=F.getCamera(),R=i.nestedProperty(P,F.id+".camera"),N=R.get(),ne[F.id+".camera"]=N),Z&&(z=F.glplot.getAspectratio(),G=i.nestedProperty(P,F.id+".aspectratio"),Y=G.get(),ne[F.id+".aspectratio"]=Y),a.call("_storeDirectGUIEdit",P,I._preGUI,ne),ee){R.set(D);var ce=i.nestedProperty(I,F.id+".camera");ce.set(D)}if(Z){G.set(z);var Q=i.nestedProperty(I,F.id+".aspectratio");Q.set(z),F.glplot.redraw()}}return X},u.updateFx=function(P,F){var I=this,D=I.camera;if(D)if(P==="orbit")D.mode="orbit",D.keyBindingMode="rotate";else if(P==="turntable"){D.up=[0,0,1],D.mode="turntable",D.keyBindingMode="rotate";var R=I.graphDiv,N=R._fullLayout,z=I.fullSceneLayout.camera,G=z.up.x,Y=z.up.y,ee=z.up.z;if(ee/Math.sqrt(G*G+Y*Y+ee*ee)<.999){var Z=I.id+".camera.up",X={x:0,y:0,z:1},ne={};ne[Z]=X;var ce=R.layout;a.call("_storeDirectGUIEdit",ce,N._preGUI,ne),z.up=X,i.nestedProperty(ce,Z).set(X)}}else D.keyBindingMode=P;I.fullSceneLayout.hovermode=F};function S(P,F,I){for(var D=0,R=I-1;D<R;++D,--R)for(var N=0;N<F;++N)for(var z=0;z<4;++z){var G=4*(F*D+N)+z,Y=4*(F*R+N)+z,ee=P[G];P[G]=P[Y],P[Y]=ee}}function E(P,F,I){for(var D=0;D<I;++D)for(var R=0;R<F;++R){var N=4*(F*D+R),z=P[N+3];if(z>0)for(var G=255/z,Y=0;Y<3;++Y)P[N+Y]=Math.min(G*P[N+Y],255)}}u.toImage=function(P){var F=this;P||(P="png"),F.staticMode&&F.container.appendChild(y),F.glplot.redraw();var I=F.glplot.gl,D=I.drawingBufferWidth,R=I.drawingBufferHeight;I.bindFramebuffer(I.FRAMEBUFFER,null);var N=new Uint8Array(D*R*4);I.readPixels(0,0,D,R,I.RGBA,I.UNSIGNED_BYTE,N),S(N,D,R),E(N,D,R);var z=document.createElement("canvas");z.width=D,z.height=R;var G=z.getContext("2d",{willReadFrequently:!0}),Y=G.createImageData(D,R);Y.data.set(N),G.putImageData(Y,0,0);var ee;switch(P){case"jpeg":ee=z.toDataURL("image/jpeg");break;case"webp":ee=z.toDataURL("image/webp");break;default:ee=z.toDataURL("image/png")}return F.staticMode&&F.container.removeChild(y),ee},u.setConvert=function(){for(var P=this,F=0;F<3;F++){var I=P.fullSceneLayout[_[F]];r.setConvert(I,P.fullLayout),I.setScale=i.noop}},u.make4thDimension=function(){var P=this,F=P.graphDiv,I=F._fullLayout;P._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},r.setConvert(P._mockAxis,I)},B.exports=x},{"../../../stackgl_modules":1133,"../../components/fx":407,"../../lib":515,"../../lib/show_no_webgl_msg":537,"../../lib/str2rgbarray":540,"../../plots/cartesian/axes":566,"../../registry":647,"./layout/convert":611,"./layout/spikes":614,"./layout/tick_marks":615,"./project":616,"has-passive-events":229,"webgl-context":332}],618:[function(t,B,V){B.exports=function(c,A,T,e){e=e||c.length;for(var a=new Array(e),i=0;i<e;i++)a[i]=[c[i],A[i],T[i]];return a}},{}],619:[function(t,B,V){var m=t("./font_attributes"),c=t("./animation_attributes"),A=t("../components/color/attributes"),T=t("../components/shapes/draw_newshape/attributes"),e=t("../components/selections/draw_newselection/attributes"),a=t("./pad_attributes"),i=t("../lib/extend").extendFlat,n=m({editType:"calc"});n.family.dflt='"Open Sans", verdana, arial, sans-serif',n.size.dflt=12,n.color.dflt=A.defaultLine,B.exports={font:n,title:{text:{valType:"string",editType:"layoutstyle"},font:m({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:i(a({editType:"layoutstyle"}),{}),editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},minreducedwidth:{valType:"number",min:2,dflt:64,editType:"plot"},minreducedheight:{valType:"number",min:2,dflt:64,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:A.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:A.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:A.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:T.newshape,activeshape:T.activeshape,newselection:e.newselection,activeselection:e.activeselection,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:i({},c.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:m({editType:"layoutstyle"})}}},{"../components/color/attributes":366,"../components/selections/draw_newselection/attributes":451,"../components/shapes/draw_newshape/attributes":463,"../lib/extend":505,"./animation_attributes":560,"./font_attributes":594,"./pad_attributes":627}],620:[function(t,B,V){var m=t("../../lib/sort_object_keys"),c="1.10.1",A='\xA9 <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',T=['\xA9 <a target="_blank" href="https://carto.com/">Carto</a>',A].join(" "),e=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),a=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),i={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:A,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}]},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}]},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:T,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}]},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:T,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}]},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:e,tiles:["https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}]},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:e,tiles:["https://stamen-tiles.a.ssl.fastly.net/toner/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}]},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:a,tiles:["https://stamen-tiles.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}]}},n=m(i);B.exports={requiredVersion:c,styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:i,styleValuesNonMapbox:n,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install mapbox-gl@"+c+"."].join(`
`),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join(`
`),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",n.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join(`
`),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join(`
`),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":`content: ""; cursor: pointer; position: absolute; background-image: url('data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;`,"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":`display:block; width: 21px; height: 21px; background-image: url('data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E')`}}},{"../../lib/sort_object_keys":538}],621:[function(t,B,V){var m=t("../../lib");B.exports=function(A,T){var e=A.split(" "),a=e[0],i=e[1],n=m.isArrayOrTypedArray(T)?m.mean(T):T,r=.5+n/100,v=1.5+n/100,s=["",""],o=[0,0];switch(a){case"top":s[0]="top",o[1]=-v;break;case"bottom":s[0]="bottom",o[1]=v;break}switch(i){case"left":s[1]="right",o[0]=-r;break;case"right":s[1]="left",o[0]=r;break}var b;return s[0]&&s[1]?b=s.join("-"):s[0]?b=s[0]:s[1]?b=s[1]:b="center",{anchor:b,offset:o}}},{"../../lib":515}],622:[function(t,B,V){var m=t("mapbox-gl/dist/mapbox-gl-unminified"),c=t("../../lib"),A=c.strTranslate,T=c.strScale,e=t("../../plots/get_data").getSubplotCalcData,a=t("../../constants/xmlns_namespaces"),i=t("@plotly/d3"),n=t("../../components/drawing"),r=t("../../lib/svg_text_utils"),v=t("./mapbox"),s="mapbox",o=V.constants=t("./constants");V.name=s,V.attr="subplot",V.idRoot=s,V.idRegex=V.attrRegex=c.counterRegex(s),V.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},V.layoutAttributes=t("./layout_attributes"),V.supplyLayoutDefaults=t("./layout_defaults"),V.plot=function(f){var y=f._fullLayout,l=f.calcdata,x=y._subplots[s];if(m.version!==o.requiredVersion)throw new Error(o.wrongVersionErrorMsg);var u=b(f,x);m.accessToken=u;for(var M=0;M<x.length;M++){var _=x[M],p=e(l,s,_),w=y[_],h=w._subplot;h||(h=new v(f,_),y[_]._subplot=h),h.viewInitial||(h.viewInitial={center:c.extendFlat({},w.center),zoom:w.zoom,bearing:w.bearing,pitch:w.pitch}),h.plot(p,y,f._promises)}},V.clean=function(d,f,y,l){for(var x=l._subplots[s]||[],u=0;u<x.length;u++){var M=x[u];!f[M]&&!!l[M]._subplot&&l[M]._subplot.destroy()}},V.toSVG=function(d){for(var f=d._fullLayout,y=f._subplots[s],l=f._size,x=0;x<y.length;x++){var u=f[y[x]],M=u.domain,_=u._subplot,p=_.toImage("png"),w=f._glimages.append("svg:image");w.attr({xmlns:a.svg,"xlink:href":p,x:l.l+l.w*M.x[0],y:l.t+l.h*(1-M.y[1]),width:l.w*(M.x[1]-M.x[0]),height:l.h*(M.y[1]-M.y[0]),preserveAspectRatio:"none"});var h=i.select(u._subplot.div),L=h.select(".mapboxgl-ctrl-logo").node().offsetParent===null;if(!L){var S=f._glimages.append("g");S.attr("transform",A(l.l+l.w*M.x[0]+10,l.t+l.h*(1-M.y[0])-31)),S.append("path").attr("d",o.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),S.append("path").attr("d",o.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),S.append("path").attr("d",o.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),S.append("polygon").attr("points",o.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var E=h.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),P=f._glimages.append("g"),F=P.append("text");F.text(E).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":E});var I=n.bBox(F.node()),D=l.w*(M.x[1]-M.x[0]);if(I.width>D/2){var R=E.split("|").join("<br>");F.text(R).attr("data-unformatted",R).call(r.convertToTspans,d),I=n.bBox(F.node())}F.attr("transform",A(-3,-I.height+8)),P.insert("rect",".static-attribution").attr({x:-I.width-6,y:-I.height-3,width:I.width+6,height:I.height+3,fill:"rgba(255, 255, 255, 0.75)"});var N=1;I.width+6>D&&(N=D/(I.width+6));var z=[l.l+l.w*M.x[1],l.t+l.h*(1-M.y[0])];P.attr("transform",A(z[0],z[1])+T(N))}};function b(d,f){var y=d._fullLayout,l=d._context;if(l.mapboxAccessToken==="")return"";for(var x=[],u=[],M=!1,_=!1,p=0;p<f.length;p++){var w=y[f[p]],h=w.accesstoken;g(w.style)&&(h?c.pushUnique(x,h):(g(w._input.style)&&(c.error("Uses Mapbox map style, but did not set an access token."),M=!0),_=!0)),h&&c.pushUnique(u,h)}if(_){var L=M?o.noAccessTokenErrorMsg:o.missingStyleErrorMsg;throw c.error(L),new Error(L)}return x.length?(x.length>1&&c.warn(o.multipleTokensErrorMsg),x[0]):(u.length&&c.log(["Listed mapbox access token(s)",u.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}function g(d){return typeof d=="string"&&(o.styleValuesMapbox.indexOf(d)!==-1||d.indexOf("mapbox://")===0)}V.updateFx=function(d){for(var f=d._fullLayout,y=f._subplots[s],l=0;l<y.length;l++){var x=f[y[l]]._subplot;x.updateFx(f)}}},{"../../components/drawing":389,"../../constants/xmlns_namespaces":492,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/get_data":602,"./constants":620,"./layout_attributes":624,"./layout_defaults":625,"./mapbox":626,"@plotly/d3":58,"mapbox-gl/dist/mapbox-gl-unminified":239}],623:[function(t,B,V){var m=t("../../lib"),c=t("../../lib/svg_text_utils").sanitizeHTML,A=t("./convert_text_opts"),T=t("./constants");function e(v,s){this.subplot=v,this.uid=v.uid+"-"+s,this.index=s,this.idSource="source-"+this.uid,this.idLayer=T.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var a=e.prototype;a.update=function(s){this.visible?this.needsNewImage(s)?this.updateImage(s):this.needsNewSource(s)?(this.removeLayer(),this.updateSource(s),this.updateLayer(s)):this.needsNewLayer(s)?this.updateLayer(s):this.updateStyle(s):(this.updateSource(s),this.updateLayer(s)),this.visible=i(s)},a.needsNewImage=function(v){var s=this.subplot.map;return s.getSource(this.idSource)&&this.sourceType==="image"&&v.sourcetype==="image"&&(this.source!==v.source||JSON.stringify(this.coordinates)!==JSON.stringify(v.coordinates))},a.needsNewSource=function(v){return this.sourceType!==v.sourcetype||JSON.stringify(this.source)!==JSON.stringify(v.source)||this.layerType!==v.type},a.needsNewLayer=function(v){return this.layerType!==v.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},a.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},a.updateImage=function(v){var s=this.subplot.map;s.getSource(this.idSource).updateImage({url:v.source,coordinates:v.coordinates});var o=this.findFollowingMapboxLayerId(this.lookupBelow());o!==null&&this.subplot.map.moveLayer(this.idLayer,o)},a.updateSource=function(v){var s=this.subplot.map;if(s.getSource(this.idSource)&&s.removeSource(this.idSource),this.sourceType=v.sourcetype,this.source=v.source,!!i(v)){var o=r(v);s.addSource(this.idSource,o)}},a.findFollowingMapboxLayerId=function(v){if(v==="traces")for(var s=this.subplot.getMapLayers(),o=0;o<s.length;o++){var b=s[o].id;if(typeof b=="string"&&b.indexOf(T.traceLayerPrefix)===0){v=b;break}}return v},a.updateLayer=function(v){var s=this.subplot,o=n(v),b=this.lookupBelow(),g=this.findFollowingMapboxLayerId(b);this.removeLayer(),i(v)&&s.addLayer({id:this.idLayer,source:this.idSource,"source-layer":v.sourcelayer||"",type:v.type,minzoom:v.minzoom,maxzoom:v.maxzoom,layout:o.layout,paint:o.paint},g),this.layerType=v.type,this.below=b},a.updateStyle=function(v){if(i(v)){var s=n(v);this.subplot.setOptions(this.idLayer,"setLayoutProperty",s.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",s.paint)}},a.removeLayer=function(){var v=this.subplot.map;v.getLayer(this.idLayer)&&v.removeLayer(this.idLayer)},a.dispose=function(){var v=this.subplot.map;v.getLayer(this.idLayer)&&v.removeLayer(this.idLayer),v.getSource(this.idSource)&&v.removeSource(this.idSource)};function i(v){if(!v.visible)return!1;var s=v.source;if(Array.isArray(s)&&s.length>0){for(var o=0;o<s.length;o++)if(typeof s[o]!="string"||s[o].length===0)return!1;return!0}return m.isPlainObject(s)||typeof s=="string"&&s.length>0}function n(v){var s={},o={};switch(v.type){case"circle":m.extendFlat(o,{"circle-radius":v.circle.radius,"circle-color":v.color,"circle-opacity":v.opacity});break;case"line":m.extendFlat(o,{"line-width":v.line.width,"line-color":v.color,"line-opacity":v.opacity,"line-dasharray":v.line.dash});break;case"fill":m.extendFlat(o,{"fill-color":v.color,"fill-outline-color":v.fill.outlinecolor,"fill-opacity":v.opacity});break;case"symbol":var b=v.symbol,g=A(b.textposition,b.iconsize);m.extendFlat(s,{"icon-image":b.icon+"-15","icon-size":b.iconsize/10,"text-field":b.text,"text-size":b.textfont.size,"text-anchor":g.anchor,"text-offset":g.offset,"symbol-placement":b.placement}),m.extendFlat(o,{"icon-color":v.color,"text-color":b.textfont.color,"text-opacity":v.opacity});break;case"raster":m.extendFlat(o,{"raster-fade-duration":0,"raster-opacity":v.opacity});break}return{layout:s,paint:o}}function r(v){var s=v.sourcetype,o=v.source,b={type:s},g;return s==="geojson"?g="data":s==="vector"?g=typeof o=="string"?"url":"tiles":s==="raster"?(g="tiles",b.tileSize=256):s==="image"&&(g="url",b.coordinates=v.coordinates),b[g]=o,v.sourceattribution&&(b.attribution=c(v.sourceattribution)),b}B.exports=function(s,o,b){var g=new e(s,o);return g.update(b),g}},{"../../lib":515,"../../lib/svg_text_utils":541,"./constants":620,"./convert_text_opts":621}],624:[function(t,B,V){var m=t("../../lib"),c=t("../../components/color").defaultLine,A=t("../domain").attributes,T=t("../font_attributes"),e=t("../../traces/scatter/attributes").textposition,a=t("../../plot_api/edit_types").overrideAll,i=t("../../plot_api/plot_template").templatedArray,n=t("./constants"),r=T({});r.family.dflt="Open Sans Regular, Arial Unicode MS Regular";var v=B.exports=a({_arrayAttrRegexps:[m.counterRegex("mapbox",".layers",!0)],domain:A({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:n.styleValuesMapbox.concat(n.styleValuesNonMapbox),dflt:n.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},bounds:{west:{valType:"number"},east:{valType:"number"},south:{valType:"number"},north:{valType:"number"}},layers:i("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:c},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:c}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:r,textposition:m.extendFlat({},e,{arrayOk:!1})}})},"plot","from-root");v.uirevision={valType:"any",editType:"none"}},{"../../components/color":367,"../../lib":515,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../traces/scatter/attributes":936,"../domain":593,"../font_attributes":594,"./constants":620}],625:[function(t,B,V){var m=t("../../lib"),c=t("../subplot_defaults"),A=t("../array_container_defaults"),T=t("./layout_attributes");B.exports=function(n,r,v){c(n,r,v,{type:"mapbox",attributes:T,handleDefaults:e,partition:"y",accessToken:r._mapboxAccessToken})};function e(i,n,r,v){r("accesstoken",v.accessToken),r("style"),r("center.lon"),r("center.lat"),r("zoom"),r("bearing"),r("pitch");var s=r("bounds.west"),o=r("bounds.east"),b=r("bounds.south"),g=r("bounds.north");(s===void 0||o===void 0||b===void 0||g===void 0)&&delete n.bounds,A(i,n,{name:"layers",handleItemDefaults:a}),n._input=i}function a(i,n){function r(d,f){return m.coerce(i,n,T.layers,d,f)}var v=r("visible");if(v){var s=r("sourcetype"),o=s==="raster"||s==="image";r("source"),r("sourceattribution"),s==="vector"&&r("sourcelayer"),s==="image"&&r("coordinates");var b;o&&(b="raster");var g=r("type",b);o&&g!=="raster"&&(g=n.type="raster",m.log("Source types *raster* and *image* must drawn *raster* layer type.")),r("below"),r("color"),r("opacity"),r("minzoom"),r("maxzoom"),g==="circle"&&r("circle.radius"),g==="line"&&(r("line.width"),r("line.dash")),g==="fill"&&r("fill.outlinecolor"),g==="symbol"&&(r("symbol.icon"),r("symbol.iconsize"),r("symbol.text"),m.coerceFont(r,"symbol.textfont"),r("symbol.textposition"),r("symbol.placement"))}}},{"../../lib":515,"../array_container_defaults":561,"../subplot_defaults":641,"./layout_attributes":624}],626:[function(t,B,V){var m=t("mapbox-gl/dist/mapbox-gl-unminified"),c=t("../../lib"),A=t("../../lib/geo_location_utils"),T=t("../../registry"),e=t("../cartesian/axes"),a=t("../../components/dragelement"),i=t("../../components/fx"),n=t("../../components/dragelement/helpers"),r=n.drawMode,v=n.selectMode,s=t("../../components/selections").prepSelect,o=t("../../components/selections").clearOutline,b=t("../../components/selections").clearSelectionsCache,g=t("../../components/selections").selectOnClick,d=t("./constants"),f=t("./layers");function y(p,w){this.id=w,this.gd=p;var h=p._fullLayout,L=p._context;this.container=h._glcontainer.node(),this.isStatic=L.staticPlot,this.uid=h._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(h),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var l=y.prototype;l.plot=function(p,w,h){var L=this,S=w[L.id];L.map&&S.accesstoken!==L.accessToken&&(L.map.remove(),L.map=null,L.styleObj=null,L.traceHash={},L.layerList=[]);var E;L.map?E=new Promise(function(P,F){L.updateMap(p,w,P,F)}):E=new Promise(function(P,F){L.createMap(p,w,P,F)}),h.push(E)},l.createMap=function(p,w,h,L){var S=this,E=w[S.id],P=S.styleObj=u(E.style);S.accessToken=E.accesstoken;var F=E.bounds,I=F?[[F.west,F.south],[F.east,F.north]]:null,D=S.map=new m.Map({container:S.div,style:P.style,center:_(E.center),zoom:E.zoom,bearing:E.bearing,pitch:E.pitch,maxBounds:I,interactive:!S.isStatic,preserveDrawingBuffer:S.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new m.AttributionControl({compact:!0}));D._canvas.style.left="0px",D._canvas.style.top="0px",S.rejectOnError(L),S.isStatic||S.initFx(p,w);var R=[];R.push(new Promise(function(N){D.once("load",N)})),R=R.concat(A.fetchTraceGeoData(p)),Promise.all(R).then(function(){S.fillBelowLookup(p,w),S.updateData(p),S.updateLayout(w),S.resolveOnRender(h)}).catch(L)},l.updateMap=function(p,w,h,L){var S=this,E=S.map,P=w[this.id];S.rejectOnError(L);var F=[],I=u(P.style);JSON.stringify(S.styleObj)!==JSON.stringify(I)&&(S.styleObj=I,E.setStyle(I.style),S.traceHash={},F.push(new Promise(function(D){E.once("styledata",D)}))),F=F.concat(A.fetchTraceGeoData(p)),Promise.all(F).then(function(){S.fillBelowLookup(p,w),S.updateData(p),S.updateLayout(w),S.resolveOnRender(h)}).catch(L)},l.fillBelowLookup=function(p,w){var h=w[this.id],L=h.layers,S,E,P=this.belowLookup={},F=!1;for(S=0;S<p.length;S++){var I=p[S][0].trace,D=I._module;typeof I.below=="string"?E=I.below:D.getBelow&&(E=D.getBelow(I,this)),E===""&&(F=!0),P["trace-"+I.uid]=E||""}for(S=0;S<L.length;S++){var R=L[S];typeof R.below=="string"?E=R.below:F?E="traces":E="",P["layout-"+S]=E}var N={},z,G;for(z in P)E=P[z],N[E]?N[E].push(z):N[E]=[z];for(E in N){var Y=N[E];if(Y.length>1)for(S=0;S<Y.length;S++)z=Y[S],z.indexOf("trace-")===0?(G=z.split("trace-")[1],this.traceHash[G]&&(this.traceHash[G].below=null)):z.indexOf("layout-")===0&&(G=z.split("layout-")[1],this.layerList[G]&&(this.layerList[G].below=null))}};var x={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};l.updateData=function(p){var w=this.traceHash,h,L,S,E,P=p.slice().sort(function(N,z){return x[N[0].trace.type]-x[z[0].trace.type]});for(S=0;S<P.length;S++){var F=P[S];L=F[0].trace,h=w[L.uid];var I=!1;h&&(h.type===L.type?(h.update(F),I=!0):h.dispose()),!I&&L._module&&(w[L.uid]=L._module.plot(this,F))}var D=Object.keys(w);e:for(S=0;S<D.length;S++){var R=D[S];for(E=0;E<p.length;E++)if(L=p[E][0].trace,R===L.uid)continue e;h=w[R],h.dispose(),delete w[R]}},l.updateLayout=function(p){var w=this.map,h=p[this.id];!this.dragging&&!this.wheeling&&(w.setCenter(_(h.center)),w.setZoom(h.zoom),w.setBearing(h.bearing),w.setPitch(h.pitch)),this.updateLayers(p),this.updateFramework(p),this.updateFx(p),this.map.resize(),this.gd._context._scrollZoom.mapbox?w.scrollZoom.enable():w.scrollZoom.disable()},l.resolveOnRender=function(p){var w=this.map;w.on("render",function h(){w.loaded()&&(w.off("render",h),setTimeout(p,10))})},l.rejectOnError=function(p){var w=this.map;function h(){p(new Error(d.mapOnErrorMsg))}w.once("error",h),w.once("style.error",h),w.once("source.error",h),w.once("tile.error",h),w.once("layer.error",h)},l.createFramework=function(p){var w=this,h=w.div=document.createElement("div");h.id=w.uid,h.style.position="absolute",w.container.appendChild(h),w.xaxis={_id:"x",c2p:function(L){return w.project(L).x}},w.yaxis={_id:"y",c2p:function(L){return w.project(L).y}},w.updateFramework(p),w.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},e.setConvert(w.mockAxis,p)},l.initFx=function(p,w){var h=this,L=h.gd,S=h.map;S.on("moveend",function(F){if(!!h.map){var I=L._fullLayout;if(F.originalEvent||h.wheeling){var D=I[h.id];T.call("_storeDirectGUIEdit",L.layout,I._preGUI,h.getViewEdits(D));var R=h.getView();D._input.center=D.center=R.center,D._input.zoom=D.zoom=R.zoom,D._input.bearing=D.bearing=R.bearing,D._input.pitch=D.pitch=R.pitch,L.emit("plotly_relayout",h.getViewEditsWithDerived(R))}F.originalEvent&&F.originalEvent.type==="mouseup"?h.dragging=!1:h.wheeling&&(h.wheeling=!1),I._rehover&&I._rehover()}}),S.on("wheel",function(){h.wheeling=!0}),S.on("mousemove",function(F){var I=h.div.getBoundingClientRect(),D=[F.originalEvent.offsetX,F.originalEvent.offsetY];F.target.getBoundingClientRect=function(){return I},h.xaxis.p2c=function(){return S.unproject(D).lng},h.yaxis.p2c=function(){return S.unproject(D).lat},L._fullLayout._rehover=function(){L._fullLayout._hoversubplot===h.id&&L._fullLayout[h.id]&&i.hover(L,F,h.id)},i.hover(L,F,h.id),L._fullLayout._hoversubplot=h.id});function E(){i.loneUnhover(w._hoverlayer)}S.on("dragstart",function(){h.dragging=!0,E()}),S.on("zoomstart",E),S.on("mouseout",function(){L._fullLayout._hoversubplot=null});function P(){var F=h.getView();L.emit("plotly_relayouting",h.getViewEditsWithDerived(F))}S.on("drag",P),S.on("zoom",P),S.on("dblclick",function(){var F=L._fullLayout[h.id];T.call("_storeDirectGUIEdit",L.layout,L._fullLayout._preGUI,h.getViewEdits(F));var I=h.viewInitial;S.setCenter(_(I.center)),S.setZoom(I.zoom),S.setBearing(I.bearing),S.setPitch(I.pitch);var D=h.getView();F._input.center=F.center=D.center,F._input.zoom=F.zoom=D.zoom,F._input.bearing=F.bearing=D.bearing,F._input.pitch=F.pitch=D.pitch,L.emit("plotly_doubleclick",null),L.emit("plotly_relayout",h.getViewEditsWithDerived(D))}),h.clearOutline=function(){b(h.dragOptions),o(h.dragOptions.gd)},h.onClickInPanFn=function(F){return function(I){var D=L._fullLayout.clickmode;D.indexOf("select")>-1&&g(I.originalEvent,L,[h.xaxis],[h.yaxis],h.id,F),D.indexOf("event")>-1&&i.click(L,I.originalEvent)}}},l.updateFx=function(p){var w=this,h=w.map,L=w.gd;if(w.isStatic)return;function S(I){var D=w.map.unproject(I);return[D.lng,D.lat]}var E=p.dragmode,P;P=function(I,D){if(D.isRect){var R=I.range={};R[w.id]=[S([D.xmin,D.ymin]),S([D.xmax,D.ymax])]}else{var N=I.lassoPoints={};N[w.id]=D.map(S)}};var F=w.dragOptions;w.dragOptions=c.extendDeep(F||{},{dragmode:p.dragmode,element:w.div,gd:L,plotinfo:{id:w.id,domain:p[w.id].domain,xaxis:w.xaxis,yaxis:w.yaxis,fillRangeItems:P},xaxes:[w.xaxis],yaxes:[w.yaxis],subplot:w.id}),h.off("click",w.onClickInPanHandler),v(E)||r(E)?(h.dragPan.disable(),h.on("zoomstart",w.clearOutline),w.dragOptions.prepFn=function(I,D,R){s(I,D,R,w.dragOptions,E)},a.init(w.dragOptions)):(h.dragPan.enable(),h.off("zoomstart",w.clearOutline),w.div.onmousedown=null,w.div.ontouchstart=null,w.div.removeEventListener("touchstart",w.div._ontouchstart),w.onClickInPanHandler=w.onClickInPanFn(w.dragOptions),h.on("click",w.onClickInPanHandler))},l.updateFramework=function(p){var w=p[this.id].domain,h=p._size,L=this.div.style;L.width=h.w*(w.x[1]-w.x[0])+"px",L.height=h.h*(w.y[1]-w.y[0])+"px",L.left=h.l+w.x[0]*h.w+"px",L.top=h.t+(1-w.y[1])*h.h+"px",this.xaxis._offset=h.l+w.x[0]*h.w,this.xaxis._length=h.w*(w.x[1]-w.x[0]),this.yaxis._offset=h.t+(1-w.y[1])*h.h,this.yaxis._length=h.h*(w.y[1]-w.y[0])},l.updateLayers=function(p){var w=p[this.id],h=w.layers,L=this.layerList,S;if(h.length!==L.length){for(S=0;S<L.length;S++)L[S].dispose();for(L=this.layerList=[],S=0;S<h.length;S++)L.push(f(this,S,h[S]))}else for(S=0;S<h.length;S++)L[S].update(h[S])},l.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},l.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},l.setOptions=function(p,w,h){for(var L in h)this.map[w](p,L,h[L])},l.getMapLayers=function(){return this.map.getStyle().layers},l.addLayer=function(p,w){var h=this.map;if(typeof w=="string"){if(w===""){h.addLayer(p,w);return}for(var L=this.getMapLayers(),S=0;S<L.length;S++)if(w===L[S].id){h.addLayer(p,w);return}c.warn(["Trying to add layer with *below* value",w,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}h.addLayer(p)},l.project=function(p){return this.map.project(new m.LngLat(p[0],p[1]))},l.getView=function(){var p=this.map,w=p.getCenter(),h=w.lng,L=w.lat,S={lon:h,lat:L},E=p.getCanvas(),P=parseInt(E.style.width),F=parseInt(E.style.height);return{center:S,zoom:p.getZoom(),bearing:p.getBearing(),pitch:p.getPitch(),_derived:{coordinates:[p.unproject([0,0]).toArray(),p.unproject([P,0]).toArray(),p.unproject([P,F]).toArray(),p.unproject([0,F]).toArray()]}}},l.getViewEdits=function(p){for(var w=this.id,h=["center","zoom","bearing","pitch"],L={},S=0;S<h.length;S++){var E=h[S];L[w+"."+E]=p[E]}return L},l.getViewEditsWithDerived=function(p){var w=this.id,h=this.getViewEdits(p);return h[w+"._derived"]=p._derived,h};function u(p){var w={};return c.isPlainObject(p)?(w.id=p.id,w.style=p):typeof p=="string"?(w.id=p,d.styleValuesMapbox.indexOf(p)!==-1?w.style=M(p):d.stylesNonMapbox[p]?w.style=d.stylesNonMapbox[p]:w.style=p):(w.id=d.styleValueDflt,w.style=M(d.styleValueDflt)),w.transition={duration:0,delay:0},w}function M(p){return d.styleUrlPrefix+p+"-"+d.styleUrlSuffix}function _(p){return[p.lon,p.lat]}B.exports=y},{"../../components/dragelement":386,"../../components/dragelement/helpers":385,"../../components/fx":407,"../../components/selections":455,"../../lib":515,"../../lib/geo_location_utils":508,"../../registry":647,"../cartesian/axes":566,"./constants":620,"./layers":623,"mapbox-gl/dist/mapbox-gl-unminified":239}],627:[function(t,B,V){B.exports=function(m){var c=m.editType;return{t:{valType:"number",dflt:0,editType:c},r:{valType:"number",dflt:0,editType:c},b:{valType:"number",dflt:0,editType:c},l:{valType:"number",dflt:0,editType:c},editType:c}}},{}],628:[function(t,B,V){var m=t("@plotly/d3"),c=t("d3-time-format").timeFormatLocale,A=t("d3-format").formatLocale,T=t("fast-isnumeric"),e=t("../registry"),a=t("../plot_api/plot_schema"),i=t("../plot_api/plot_template"),n=t("../lib"),r=t("../components/color"),v=t("../constants/numerical").BADNUM,s=t("./cartesian/axis_ids"),o=t("../components/shapes/handle_outline").clearOutline,b=t("./animation_attributes"),g=t("./frame_attributes"),d=t("../plots/get_data").getModuleCalcData,f=n.relinkPrivateKeys,y=n._,l=B.exports={};n.extendFlat(l,e),l.attributes=t("./attributes"),l.attributes.type.values=l.allTypes,l.fontAttrs=t("./font_attributes"),l.layoutAttributes=t("./layout_attributes"),l.fontWeight="normal";var x=l.transformsRegistry,u=t("./command");l.executeAPICommand=u.executeAPICommand,l.computeAPICommandBindings=u.computeAPICommandBindings,l.manageCommandObserver=u.manageCommandObserver,l.hasSimpleAPICommandBindings=u.hasSimpleAPICommandBindings,l.redrawText=function(Q){return Q=n.getGraphDiv(Q),new Promise(function(K){setTimeout(function(){!Q._fullLayout||(e.getComponentMethod("annotations","draw")(Q),e.getComponentMethod("legend","draw")(Q),e.getComponentMethod("colorbar","draw")(Q),K(l.previousPromises(Q)))},300)})},l.resize=function(Q){Q=n.getGraphDiv(Q);var K,U=new Promise(function(H,q){(!Q||n.isHidden(Q))&&q(new Error("Resize must be passed a displayed plot div element.")),Q._redrawTimer&&clearTimeout(Q._redrawTimer),Q._resolveResize&&(K=Q._resolveResize),Q._resolveResize=H,Q._redrawTimer=setTimeout(function(){if(!Q.layout||Q.layout.width&&Q.layout.height||n.isHidden(Q)){H(Q);return}delete Q.layout.width,delete Q.layout.height;var re=Q.changed;Q.autoplay=!0,e.call("relayout",Q,{autosize:!0}).then(function(){Q.changed=re,Q._resolveResize===H&&(delete Q._resolveResize,H(Q))})},100)});return K&&K(U),U},l.previousPromises=function(Q){if((Q._promises||[]).length)return Promise.all(Q._promises).then(function(){Q._promises=[]})},l.addLinks=function(Q){if(!(!Q._context.showLink&&!Q._context.showSources)){var K=Q._fullLayout,U=n.ensureSingle(K._paper,"text","js-plot-link-container",function(ie){ie.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:r.defaultLine,"pointer-events":"all"}).each(function(){var oe=m.select(this);oe.append("tspan").classed("js-link-to-tool",!0),oe.append("tspan").classed("js-link-spacer",!0),oe.append("tspan").classed("js-sourcelinks",!0)})}),H=U.node(),q={y:K._paper.attr("height")-9};document.body.contains(H)&&H.getComputedTextLength()>=K.width-20?(q["text-anchor"]="start",q.x=5):(q["text-anchor"]="end",q.x=K._paper.attr("width")-7),U.attr(q);var re=U.select(".js-link-to-tool"),j=U.select(".js-link-spacer"),$=U.select(".js-sourcelinks");Q._context.showSources&&Q._context.showSources(Q),Q._context.showLink&&M(Q,re),j.text(re.text()&&$.text()?" - ":"")}};function M(Q,K){K.text("");var U=K.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(Q._context.linkText+" "+String.fromCharCode(187));if(Q._context.sendData)U.on("click",function(){l.sendDataToCloud(Q)});else{var H=window.location.pathname.split("/"),q=window.location.search;U.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+H[2].split(".")[0]+"/"+H[1]+q})}}l.sendDataToCloud=function(Q){var K=(window.PLOTLYENV||{}).BASE_URL||Q._context.plotlyServerURL;if(!!K){Q.emit("plotly_beforeexport");var U=m.select(Q).append("div").attr("id","hiddenform").style("display","none"),H=U.append("form").attr({action:K+"/external",method:"post",target:"_blank"}),q=H.append("input").attr({type:"text",name:"data"});return q.node().value=l.graphJson(Q,!1,"keepdata"),H.node().submit(),U.remove(),Q.emit("plotly_afterexport"),!1}};var _=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],p=["year","month","dayMonth","dayMonthYear"];l.supplyDefaults=function(Q,K){var U=K&&K.skipUpdateCalc,H=Q._fullLayout||{};if(H._skipDefaults){delete H._skipDefaults;return}var q=Q._fullLayout={},re=Q.layout||{},j=Q._fullData||[],$=Q._fullData=[],ie=Q.data||[],oe=Q.calcdata||[],ae=Q._context||{},se;Q._transitionData||l.createTransitionData(Q),q._dfltTitle={plot:y(Q,"Click to enter Plot title"),x:y(Q,"Click to enter X axis title"),y:y(Q,"Click to enter Y axis title"),colorbar:y(Q,"Click to enter Colorscale title"),annotation:y(Q,"new text")},q._traceWord=y(Q,"trace");var _e=L(Q,_);if(q._mapboxAccessToken=ae.mapboxAccessToken,H._initialAutoSizeIsDone){var ue=H.width,ye=H.height;l.supplyLayoutGlobalDefaults(re,q,_e),re.width||(q.width=ue),re.height||(q.height=ye),l.sanitizeMargins(q)}else{l.supplyLayoutGlobalDefaults(re,q,_e);var xe=!re.width||!re.height,me=q.autosize,be=ae.autosizable,ke=xe&&(me||be);ke?l.plotAutoSize(Q,re,q):xe&&l.sanitizeMargins(q),!me&&xe&&(re.width=q.width,re.height=q.height)}q._d3locale=S(_e,q.separators),q._extraFormat=L(Q,p),q._initialAutoSizeIsDone=!0,q._dataLength=ie.length,q._modules=[],q._visibleModules=[],q._basePlotModules=[];var De=q._subplots=h(),Ve=q._splomAxes={x:{},y:{}},Ae=q._splomSubplots={};q._splomGridDflt={},q._scatterStackOpts={},q._firstScatter={},q._alignmentOpts={},q._colorAxes={},q._requestRangeslider={},q._traceUids=w(j,ie),q._globalTransforms=(Q._context||{}).globalTransforms,l.supplyDataDefaults(ie,$,re,q);var Le=Object.keys(Ve.x),je=Object.keys(Ve.y);if(Le.length>1&&je.length>1){for(e.getComponentMethod("grid","sizeDefaults")(re,q),se=0;se<Le.length;se++)n.pushUnique(De.xaxis,Le[se]);for(se=0;se<je.length;se++)n.pushUnique(De.yaxis,je[se]);for(var Ye in Ae)n.pushUnique(De.cartesian,Ye)}if(q._has=l._hasPlotType.bind(q),j.length===$.length)for(se=0;se<$.length;se++)f($[se],j[se]);l.supplyLayoutModuleDefaults(re,q,$,Q._transitionData);var ze=q._visibleModules,Ie=[];for(se=0;se<ze.length;se++){var We=ze[se].crossTraceDefaults;We&&n.pushUnique(Ie,We)}for(se=0;se<Ie.length;se++)Ie[se]($,q);q._hasOnlyLargeSploms=q._basePlotModules.length===1&&q._basePlotModules[0].name==="splom"&&Le.length>15&&je.length>15&&q.shapes.length===0&&q.images.length===0,l.linkSubplots($,q,j,H),l.cleanPlot($,q,j,H);var pt=!!(H._has&&H._has("gl2d")),Ft=!!(q._has&&q._has("gl2d")),Qt=!!(H._has&&H._has("cartesian")),zt=!!(q._has&&q._has("cartesian")),Et=Qt||pt,Xt=zt||Ft;Et&&!Xt?H._bgLayer.remove():Xt&&!Et&&(q._shouldCreateBgLayer=!0),H._zoomlayer&&!Q._dragging&&o({_fullLayout:H}),E($,q),f(q,H),e.getComponentMethod("colorscale","crossTraceDefaults")($,q),q._preGUI||(q._preGUI={}),q._tracePreGUI||(q._tracePreGUI={});var Nt=q._tracePreGUI,Ct={},Xe;for(Xe in Nt)Ct[Xe]="old";for(se=0;se<$.length;se++)Xe=$[se]._fullInput.uid,Ct[Xe]||(Nt[Xe]={}),Ct[Xe]="new";for(Xe in Ct)Ct[Xe]==="old"&&delete Nt[Xe];R(q),e.getComponentMethod("rangeslider","makeData")(q),!U&&oe.length===$.length&&l.supplyDefaultsUpdateCalc(oe,$)},l.supplyDefaultsUpdateCalc=function(Q,K){for(var U=0;U<K.length;U++){var H=K[U],q=(Q[U]||[])[0];if(q&&q.trace){var re=q.trace;if(re._hasCalcTransform){var j=re._arrayAttrs,$,ie,oe;for($=0;$<j.length;$++)ie=j[$],oe=n.nestedProperty(re,ie).get().slice(),n.nestedProperty(H,ie).set(oe)}q.trace=H}}};function w(Q,K){var U=K.length,H=[],q,re;for(q=0;q<Q.length;q++){var j=Q[q]._fullInput;j!==re&&H.push(j),re=j}var $=H.length,ie=new Array(U),oe={};function ae(ue,ye){ie[ye]=ue,oe[ue]=1}function se(ue,ye){if(ue&&typeof ue=="string"&&!oe[ue])return ae(ue,ye),!0}for(q=0;q<U;q++){var _e=K[q].uid;typeof _e=="number"&&(_e=String(_e)),!se(_e,q)&&(q<$&&se(H[q].uid,q)||ae(n.randstr(oe),q))}return ie}function h(){var Q=e.collectableSubplotTypes,K={},U,H;if(!Q){Q=[];var q=e.subplotsRegistry;for(var re in q){var j=q[re],$=j.attr;if($&&(Q.push(re),Array.isArray($)))for(H=0;H<$.length;H++)n.pushUnique(Q,$[H])}}for(U=0;U<Q.length;U++)K[Q[U]]=[];return K}function L(Q,K){var U=Q._context.locale;U||(U="en-US");var H=!1,q={};function re(se){for(var _e=!0,ue=0;ue<K.length;ue++){var ye=K[ue];q[ye]||(se[ye]?q[ye]=se[ye]:_e=!1)}_e&&(H=!0)}for(var j=0;j<2;j++){for(var $=Q._context.locales,ie=0;ie<2;ie++){var oe=($[U]||{}).format;if(oe&&(re(oe),H))break;$=e.localeRegistry}var ae=U.split("-")[0];if(H||ae===U)break;U=ae}return H||re(e.localeRegistry.en.format),q}function S(Q,K){return Q.decimal=K.charAt(0),Q.thousands=K.charAt(1),{numberFormat:function(U){try{U=A(Q).format(n.adjustFormat(U))}catch{return n.warnBadFormat(U),n.noFormat}return U},timeFormat:c(Q).utcFormat}}function E(Q,K){var U,H=[];K.meta&&(U=K._meta={meta:K.meta,layout:{meta:K.meta}});for(var q=0;q<Q.length;q++){var re=Q[q];re.meta?H[re.index]=re._meta={meta:re.meta}:K.meta&&(re._meta={meta:K.meta}),K.meta&&(re._meta.layout={meta:K.meta})}H.length&&(U||(U=K._meta={}),U.data=H)}l.createTransitionData=function(Q){Q._transitionData||(Q._transitionData={}),Q._transitionData._frames||(Q._transitionData._frames=[]),Q._transitionData._frameHash||(Q._transitionData._frameHash={}),Q._transitionData._counter||(Q._transitionData._counter=0),Q._transitionData._interruptCallbacks||(Q._transitionData._interruptCallbacks=[])},l._hasPlotType=function(Q){var K,U=this._basePlotModules||[];for(K=0;K<U.length;K++)if(U[K].name===Q)return!0;var H=this._modules||[];for(K=0;K<H.length;K++){var q=H[K].name;if(q===Q)return!0;var re=e.modules[q];if(re&&re.categories[Q])return!0}return!1},l.cleanPlot=function(Q,K,U,H){var q,re,j=H._basePlotModules||[];for(q=0;q<j.length;q++){var $=j[q];$.clean&&$.clean(Q,K,U,H)}var ie=H._has&&H._has("gl"),oe=K._has&&K._has("gl");ie&&!oe&&H._glcontainer!==void 0&&(H._glcontainer.selectAll(".gl-canvas").remove(),H._glcontainer.selectAll(".no-webgl").remove(),H._glcanvas=null);var ae=!!H._infolayer;e:for(q=0;q<U.length;q++){var se=U[q],_e=se.uid;for(re=0;re<Q.length;re++){var ue=Q[re];if(_e===ue.uid)continue e}ae&&H._infolayer.select(".cb"+_e).remove()}},l.linkSubplots=function(Q,K,U,H){var q,re,j=H._plots||{},$=K._plots={},ie=K._subplots,oe={_fullData:Q,_fullLayout:K},ae=ie.cartesian.concat(ie.gl2d||[]);for(q=0;q<ae.length;q++){var se=ae[q],_e=j[se],ue=s.getFromId(oe,se,"x"),ye=s.getFromId(oe,se,"y"),xe;for(_e?xe=$[se]=_e:(xe=$[se]={},xe.id=se),ue._counterAxes.push(ye._id),ye._counterAxes.push(ue._id),ue._subplotsWith.push(se),ye._subplotsWith.push(se),xe.xaxis=ue,xe.yaxis=ye,xe._hasClipOnAxisFalse=!1,re=0;re<Q.length;re++){var me=Q[re];if(me.xaxis===xe.xaxis._id&&me.yaxis===xe.yaxis._id&&me.cliponaxis===!1){xe._hasClipOnAxisFalse=!0;break}}}var be=s.list(oe,null,!0),ke;for(q=0;q<be.length;q++){ke=be[q];var De=null;ke.overlaying&&(De=s.getFromId(oe,ke.overlaying),De&&De.overlaying&&(ke.overlaying=!1,De=null)),ke._mainAxis=De||ke,De&&(ke.domain=De.domain.slice()),ke._anchorAxis=ke.anchor==="free"?null:s.getFromId(oe,ke.anchor)}for(q=0;q<be.length;q++)if(ke=be[q],ke._counterAxes.sort(s.idSort),ke._subplotsWith.sort(n.subplotSort),ke._mainSubplot=P(ke,K),ke._counterAxes.length&&(ke.spikemode&&ke.spikemode.indexOf("across")!==-1||ke.automargin&&ke.mirror&&ke.anchor!=="free"||e.getComponentMethod("rangeslider","isVisible")(ke))){var Ve=1,Ae=0;for(re=0;re<ke._counterAxes.length;re++){var Le=s.getFromId(oe,ke._counterAxes[re]);Ve=Math.min(Ve,Le.domain[0]),Ae=Math.max(Ae,Le.domain[1])}Ve<Ae&&(ke._counterDomainMin=Ve,ke._counterDomainMax=Ae)}};function P(Q,K){var U={_fullLayout:K},H=Q._id.charAt(0)==="x",q=Q._mainAxis._anchorAxis,re="",j="",$="";if(q&&($=q._mainAxis._id,re=H?Q._id+$:$+Q._id),!re||!K._plots[re]){re="";for(var ie=Q._counterAxes,oe=0;oe<ie.length;oe++){var ae=ie[oe],se=H?Q._id+ae:ae+Q._id;j||(j=se);var _e=s.getFromId(U,ae);if($&&_e.overlaying===$){re=se;break}}}return re||j}l.clearExpandedTraceDefaultColors=function(Q){var K,U,H;function q(j,$,ie,oe){U[oe]=$,U.length=oe+1,j.valType==="color"&&j.dflt===void 0&&K.push(U.join("."))}for(U=[],K=Q._module._colorAttrs,K||(Q._module._colorAttrs=K=[],a.crawl(Q._module.attributes,q)),H=0;H<K.length;H++){var re=n.nestedProperty(Q,"_input."+K[H]);re.get()||n.nestedProperty(Q,K[H]).set(null)}},l.supplyDataDefaults=function(Q,K,U,H){var q=H._modules,re=H._visibleModules,j=H._basePlotModules,$=0,ie=0,oe,ae,se;H._transformModules=[];function _e(je){K.push(je);var Ye=je._module;!Ye||(n.pushUnique(q,Ye),je.visible===!0&&n.pushUnique(re,Ye),n.pushUnique(j,je._module.basePlotModule),$++,je._input.visible!==!1&&ie++)}var ue={},ye=[],xe=(U.template||{}).data||{},me=i.traceTemplater(xe);for(oe=0;oe<Q.length;oe++){if(se=Q[oe],ae=me.newTrace(se),ae.uid=H._traceUids[oe],l.supplyTraceDefaults(se,ae,ie,H,oe),ae.index=oe,ae._input=se,ae._expandedIndex=$,ae.transforms&&ae.transforms.length)for(var be=se.visible!==!1&&ae.visible===!1,ke=I(ae,K,U,H),De=0;De<ke.length;De++){var Ve=ke[De],Ae={_template:ae._template,type:ae.type,uid:ae.uid+De};be&&Ve.visible===!1&&delete Ve.visible,l.supplyTraceDefaults(Ve,Ae,$,H,oe),f(Ae,Ve),Ae.index=oe,Ae._input=se,Ae._fullInput=ae,Ae._expandedIndex=$,Ae._expandedInput=Ve,_e(Ae)}else ae._fullInput=ae,ae._expandedInput=ae,_e(ae);e.traceIs(ae,"carpetAxis")&&(ue[ae.carpet]=ae),e.traceIs(ae,"carpetDependent")&&ye.push(oe)}for(oe=0;oe<ye.length;oe++)if(ae=K[ye[oe]],!!ae.visible){var Le=ue[ae.carpet];if(ae._carpet=Le,!Le||!Le.visible){ae.visible=!1;continue}ae.xaxis=Le.xaxis,ae.yaxis=Le.yaxis}},l.supplyAnimationDefaults=function(Q){Q=Q||{};var K,U={};function H(q,re){return n.coerce(Q||{},U,b,q,re)}if(H("mode"),H("direction"),H("fromcurrent"),Array.isArray(Q.frame))for(U.frame=[],K=0;K<Q.frame.length;K++)U.frame[K]=l.supplyAnimationFrameDefaults(Q.frame[K]||{});else U.frame=l.supplyAnimationFrameDefaults(Q.frame||{});if(Array.isArray(Q.transition))for(U.transition=[],K=0;K<Q.transition.length;K++)U.transition[K]=l.supplyAnimationTransitionDefaults(Q.transition[K]||{});else U.transition=l.supplyAnimationTransitionDefaults(Q.transition||{});return U},l.supplyAnimationFrameDefaults=function(Q){var K={};function U(H,q){return n.coerce(Q||{},K,b.frame,H,q)}return U("duration"),U("redraw"),K},l.supplyAnimationTransitionDefaults=function(Q){var K={};function U(H,q){return n.coerce(Q||{},K,b.transition,H,q)}return U("duration"),U("easing"),K},l.supplyFrameDefaults=function(Q){var K={};function U(H,q){return n.coerce(Q,K,g,H,q)}return U("group"),U("name"),U("traces"),U("baseframe"),U("data"),U("layout"),K},l.supplyTraceDefaults=function(Q,K,U,H,q){var re=H.colorway||r.defaults,j=re[U%re.length],$;function ie(ke,De){return n.coerce(Q,K,l.attributes,ke,De)}var oe=ie("visible");ie("type"),ie("name",H._traceWord+" "+q),ie("uirevision",H.uirevision);var ae=l.getModule(K);if(K._module=ae,ae){var se=ae.basePlotModule,_e=se.attr,ue=se.attributes;if(_e&&ue){var ye=H._subplots,xe="";if(oe||se.name!=="gl2d"){if(Array.isArray(_e))for($=0;$<_e.length;$++){var me=_e[$],be=n.coerce(Q,K,ue,me);ye[me]&&n.pushUnique(ye[me],be),xe+=be}else xe=n.coerce(Q,K,ue,_e);ye[se.name]&&n.pushUnique(ye[se.name],xe)}}}return oe&&(ie("customdata"),ie("ids"),ie("meta"),e.traceIs(K,"showLegend")?(n.coerce(Q,K,ae.attributes.showlegend?ae.attributes:l.attributes,"showlegend"),ie("legendwidth"),ie("legendgroup"),ie("legendgrouptitle.text"),ie("legendrank"),K._dfltShowLegend=!0):K._dfltShowLegend=!1,ae&&ae.supplyDefaults(Q,K,j,H),e.traceIs(K,"noOpacity")||ie("opacity"),e.traceIs(K,"notLegendIsolatable")&&(K.visible=!!K.visible),e.traceIs(K,"noHover")||(K.hovertemplate||n.coerceHoverinfo(Q,K,H),K.type!=="parcats"&&e.getComponentMethod("fx","supplyDefaults")(Q,K,j,H)),ae&&ae.selectPoints&&ie("selectedpoints"),l.supplyTransformDefaults(Q,K,H)),K};function F(Q){var K=Q.transforms;if(Array.isArray(K)&&K.length)for(var U=0;U<K.length;U++){var H=K[U],q=H._module||x[H.type];if(q&&q.makesData)return!0}return!1}l.hasMakesDataTransform=F,l.supplyTransformDefaults=function(Q,K,U){if(!!(K._length||F(Q))){var H=U._globalTransforms||[],q=U._transformModules||[];if(!(!Array.isArray(Q.transforms)&&H.length===0))for(var re=Q.transforms||[],j=H.concat(re),$=K.transforms=[],ie=0;ie<j.length;ie++){var oe=j[ie],ae=oe.type,se=x[ae],_e,ue=!(oe._module&&oe._module===se),ye=se&&typeof se.transform=="function";se||n.warn("Unrecognized transform type "+ae+"."),se&&se.supplyDefaults&&(ue||ye)?(_e=se.supplyDefaults(oe,K,U,Q),_e.type=ae,_e._module=se,n.pushUnique(q,se)):_e=n.extendFlat({},oe),$.push(_e)}}};function I(Q,K,U,H){for(var q=Q.transforms,re=[Q],j=0;j<q.length;j++){var $=q[j],ie=x[$.type];ie&&ie.transform&&(re=ie.transform(re,{transform:$,fullTrace:Q,fullData:K,layout:U,fullLayout:H,transformIndex:j}))}return re}l.supplyLayoutGlobalDefaults=function(Q,K,U){function H(oe,ae){return n.coerce(Q,K,l.layoutAttributes,oe,ae)}var q=Q.template;n.isPlainObject(q)&&(K.template=q,K._template=q.layout,K._dataTemplate=q.data),H("autotypenumbers");var re=n.coerceFont(H,"font"),j=re.size;n.coerceFont(H,"title.font",n.extendFlat({},re,{size:Math.round(j*1.4)})),H("title.text",K._dfltTitle.plot),H("title.xref"),H("title.yref"),H("title.x"),H("title.y"),H("title.xanchor"),H("title.yanchor"),H("title.pad.t"),H("title.pad.r"),H("title.pad.b"),H("title.pad.l");var $=H("uniformtext.mode");$&&H("uniformtext.minsize"),H("autosize",!(Q.width&&Q.height)),H("width"),H("height"),H("minreducedwidth"),H("minreducedheight"),H("margin.l"),H("margin.r"),H("margin.t"),H("margin.b"),H("margin.pad"),H("margin.autoexpand"),Q.width&&Q.height&&l.sanitizeMargins(K),e.getComponentMethod("grid","sizeDefaults")(Q,K),H("paper_bgcolor"),H("separators",U.decimal+U.thousands),H("hidesources"),H("colorway"),H("datarevision");var ie=H("uirevision");H("editrevision",ie),H("selectionrevision",ie),e.getComponentMethod("modebar","supplyLayoutDefaults")(Q,K),e.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(Q,K,H),e.getComponentMethod("selections","supplyDrawNewSelectionDefaults")(Q,K,H),H("meta"),n.isPlainObject(Q.transition)&&(H("transition.duration"),H("transition.easing"),H("transition.ordering")),e.getComponentMethod("calendars","handleDefaults")(Q,K,"calendar"),e.getComponentMethod("fx","supplyLayoutGlobalDefaults")(Q,K,H)};function D(Q){return typeof Q=="string"&&Q.substr(Q.length-2)==="px"&&parseFloat(Q)}l.plotAutoSize=function(K,U,H){var q=K._context||{},re=q.frameMargins,j,$,ie=n.isPlotDiv(K);if(ie&&K.emit("plotly_autosize"),q.fillFrame)j=window.innerWidth,$=window.innerHeight,document.body.style.overflow="hidden";else{var oe=ie?window.getComputedStyle(K):{};if(j=D(oe.width)||D(oe.maxWidth)||H.width,$=D(oe.height)||D(oe.maxHeight)||H.height,T(re)&&re>0){var ae=1-2*re;j=Math.round(ae*j),$=Math.round(ae*$)}}var se=l.layoutAttributes.width.min,_e=l.layoutAttributes.height.min;j<se&&(j=se),$<_e&&($=_e);var ue=!U.width&&Math.abs(H.width-j)>1,ye=!U.height&&Math.abs(H.height-$)>1;(ye||ue)&&(ue&&(H.width=j),ye&&(H.height=$)),K._initialAutoSize||(K._initialAutoSize={width:j,height:$}),l.sanitizeMargins(H)},l.supplyLayoutModuleDefaults=function(Q,K,U,H){var q=e.componentsRegistry,re=K._basePlotModules,j,$,ie,oe=e.subplotsRegistry.cartesian;for(j in q)ie=q[j],ie.includeBasePlot&&ie.includeBasePlot(Q,K);re.length||re.push(oe),K._has("cartesian")&&(e.getComponentMethod("grid","contentDefaults")(Q,K),oe.finalizeSubplots(Q,K));for(var ae in K._subplots)K._subplots[ae].sort(n.subplotSort);for($=0;$<re.length;$++)ie=re[$],ie.supplyLayoutDefaults&&ie.supplyLayoutDefaults(Q,K,U);var se=K._modules;for($=0;$<se.length;$++)ie=se[$],ie.supplyLayoutDefaults&&ie.supplyLayoutDefaults(Q,K,U);var _e=K._transformModules;for($=0;$<_e.length;$++)ie=_e[$],ie.supplyLayoutDefaults&&ie.supplyLayoutDefaults(Q,K,U,H);for(j in q)ie=q[j],ie.supplyLayoutDefaults&&ie.supplyLayoutDefaults(Q,K,U)},l.purge=function(Q){var K=Q._fullLayout||{};K._glcontainer!==void 0&&(K._glcontainer.selectAll(".gl-canvas").remove(),K._glcontainer.remove(),K._glcanvas=null),K._modeBar&&K._modeBar.destroy(),Q._transitionData&&(Q._transitionData._interruptCallbacks&&(Q._transitionData._interruptCallbacks.length=0),Q._transitionData._animationRaf&&window.cancelAnimationFrame(Q._transitionData._animationRaf)),n.clearThrottle(),n.clearResponsive(Q),delete Q.data,delete Q.layout,delete Q._fullData,delete Q._fullLayout,delete Q.calcdata,delete Q.empty,delete Q.fid,delete Q.undoqueue,delete Q.undonum,delete Q.autoplay,delete Q.changed,delete Q._promises,delete Q._redrawTimer,delete Q._hmlumcount,delete Q._hmpixcount,delete Q._transitionData,delete Q._transitioning,delete Q._initialAutoSize,delete Q._transitioningWithDuration,delete Q._dragging,delete Q._dragged,delete Q._dragdata,delete Q._hoverdata,delete Q._snapshotInProgress,delete Q._editing,delete Q._mouseDownTime,delete Q._legendMouseDownTime,Q.removeAllListeners&&Q.removeAllListeners()},l.style=function(Q){var K=Q._fullLayout._visibleModules,U=[],H;for(H=0;H<K.length;H++){var q=K[H];q.style&&n.pushUnique(U,q.style)}for(H=0;H<U.length;H++)U[H](Q)},l.sanitizeMargins=function(Q){if(!(!Q||!Q.margin)){var K=Q.width,U=Q.height,H=Q.margin,q=K-(H.l+H.r),re=U-(H.t+H.b),j;q<0&&(j=(K-1)/(H.l+H.r),H.l=Math.floor(j*H.l),H.r=Math.floor(j*H.r)),re<0&&(j=(U-1)/(H.t+H.b),H.t=Math.floor(j*H.t),H.b=Math.floor(j*H.b))}},l.clearAutoMarginIds=function(Q){Q._fullLayout._pushmarginIds={}},l.allowAutoMargin=function(Q,K){Q._fullLayout._pushmarginIds[K]=1};function R(Q){var K=Q.margin;if(!Q._size){var U=Q._size={l:Math.round(K.l),r:Math.round(K.r),t:Math.round(K.t),b:Math.round(K.b),p:Math.round(K.pad)};U.w=Math.round(Q.width)-U.l-U.r,U.h=Math.round(Q.height)-U.t-U.b}Q._pushmargin||(Q._pushmargin={}),Q._pushmarginIds||(Q._pushmarginIds={})}var N=2,z=2;l.autoMargin=function(Q,K,U){var H=Q._fullLayout,q=H.width,re=H.height,j=H.margin,$=H.minreducedwidth,ie=H.minreducedheight,oe=n.constrain(q-j.l-j.r,N,$),ae=n.constrain(re-j.t-j.b,z,ie),se=Math.max(0,q-oe),_e=Math.max(0,re-ae),ue=H._pushmargin,ye=H._pushmarginIds;if(j.autoexpand!==!1){if(!U)delete ue[K],delete ye[K];else{var xe=U.pad;if(xe===void 0&&(xe=Math.min(12,j.l,j.r,j.t,j.b)),se){var me=(U.l+U.r)/se;me>1&&(U.l/=me,U.r/=me)}if(_e){var be=(U.t+U.b)/_e;be>1&&(U.t/=be,U.b/=be)}var ke=U.xl!==void 0?U.xl:U.x,De=U.xr!==void 0?U.xr:U.x,Ve=U.yt!==void 0?U.yt:U.y,Ae=U.yb!==void 0?U.yb:U.y;ue[K]={l:{val:ke,size:U.l+xe},r:{val:De,size:U.r+xe},b:{val:Ae,size:U.b+xe},t:{val:Ve,size:U.t+xe}},ye[K]=1}if(!H._replotting)return l.doAutoMargin(Q)}},l.doAutoMargin=function(Q){var K=Q._fullLayout,U=K.width,H=K.height;K._size||(K._size={}),R(K);var q=K._size,re=K.margin,j=n.extendFlat({},q),$=re.l,ie=re.r,oe=re.t,ae=re.b,se=K._pushmargin,_e=K._pushmarginIds,ue=K.minreducedwidth,ye=K.minreducedheight;if(K.margin.autoexpand!==!1){for(var xe in se)_e[xe]||delete se[xe];se.base={l:{val:0,size:$},r:{val:1,size:ie},t:{val:1,size:oe},b:{val:0,size:ae}};for(var me in se){var be=se[me].l||{},ke=se[me].b||{},De=be.val,Ve=be.size,Ae=ke.val,Le=ke.size;for(var je in se){if(T(Ve)&&se[je].r){var Ye=se[je].r.val,ze=se[je].r.size;if(Ye>De){var Ie=(Ve*Ye+(ze-U)*De)/(Ye-De),We=(ze*(1-De)+(Ve-U)*(1-Ye))/(Ye-De);Ie+We>$+ie&&($=Ie,ie=We)}}if(T(Le)&&se[je].t){var pt=se[je].t.val,Ft=se[je].t.size;if(pt>Ae){var Qt=(Le*pt+(Ft-H)*Ae)/(pt-Ae),zt=(Ft*(1-Ae)+(Le-H)*(1-pt))/(pt-Ae);Qt+zt>ae+oe&&(ae=Qt,oe=zt)}}}}}var Et=n.constrain(U-re.l-re.r,N,ue),Xt=n.constrain(H-re.t-re.b,z,ye),Nt=Math.max(0,U-Et),Ct=Math.max(0,H-Xt);if(Nt){var Xe=($+ie)/Nt;Xe>1&&($/=Xe,ie/=Xe)}if(Ct){var at=(ae+oe)/Ct;at>1&&(ae/=at,oe/=at)}if(q.l=Math.round($),q.r=Math.round(ie),q.t=Math.round(oe),q.b=Math.round(ae),q.p=Math.round(re.pad),q.w=Math.round(U)-q.l-q.r,q.h=Math.round(H)-q.t-q.b,!K._replotting&&l.didMarginChange(j,q)){"_redrawFromAutoMarginCount"in K?K._redrawFromAutoMarginCount++:K._redrawFromAutoMarginCount=1;var Ge=3*(1+Object.keys(_e).length);if(K._redrawFromAutoMarginCount<Ge)return e.call("_doPlot",Q);K._size=j,n.warn("Too many auto-margin redraws.")}G(Q)};function G(Q){var K=s.list(Q,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(U){for(var H=0;H<K.length;H++){var q=K[H][U];q&&q()}})}var Y=["l","r","t","b","p","w","h"];l.didMarginChange=function(Q,K){for(var U=0;U<Y.length;U++){var H=Y[U],q=Q[H],re=K[H];if(!T(q)||Math.abs(re-q)>1)return!0}return!1},l.graphJson=function(Q,K,U,H,q,re){(q&&K&&!Q._fullData||q&&!K&&!Q._fullLayout)&&l.supplyDefaults(Q);var j=q?Q._fullData:Q.data,$=q?Q._fullLayout:Q.layout,ie=(Q._transitionData||{})._frames;function oe(_e,ue){if(typeof _e=="function")return ue?"_function_":null;if(n.isPlainObject(_e)){var ye={},xe;return Object.keys(_e).sort().forEach(function(me){if(["_","["].indexOf(me.charAt(0))===-1){if(typeof _e[me]=="function"){ue&&(ye[me]="_function");return}if(U==="keepdata"){if(me.substr(me.length-3)==="src")return}else if(U==="keepstream"){if(xe=_e[me+"src"],typeof xe=="string"&&xe.indexOf(":")>0&&!n.isPlainObject(_e.stream))return}else if(U!=="keepall"&&(xe=_e[me+"src"],typeof xe=="string"&&xe.indexOf(":")>0))return;ye[me]=oe(_e[me],ue)}}),ye}return Array.isArray(_e)?_e.map(function(me){return oe(me,ue)}):n.isTypedArray(_e)?n.simpleMap(_e,n.identity):n.isJSDate(_e)?n.ms2DateTimeLocal(+_e):_e}var ae={data:(j||[]).map(function(_e){var ue=oe(_e);return K&&delete ue.fit,ue})};if(!K&&(ae.layout=oe($),q)){var se=$._size;ae.layout.computed={margin:{b:se.b,l:se.l,r:se.r,t:se.t}}}return ie&&(ae.frames=oe(ie)),re&&(ae.config=oe(Q._context,!0)),H==="object"?ae:JSON.stringify(ae)},l.modifyFrames=function(Q,K){var U,H,q,re=Q._transitionData._frames,j=Q._transitionData._frameHash;for(U=0;U<K.length;U++)switch(H=K[U],H.type){case"replace":q=H.value;var $=(re[H.index]||{}).name,ie=q.name;re[H.index]=j[ie]=q,ie!==$&&(delete j[$],j[ie]=q);break;case"insert":q=H.value,j[q.name]=q,re.splice(H.index,0,q);break;case"delete":q=re[H.index],delete j[q.name],re.splice(H.index,1);break}return Promise.resolve()},l.computeFrame=function(Q,K){var U=Q._transitionData._frameHash,H,q,re,j;if(!K)throw new Error("computeFrame must be given a string frame name");var $=U[K.toString()];if(!$)return!1;for(var ie=[$],oe=[$.name];$.baseframe&&($=U[$.baseframe.toString()])&&oe.indexOf($.name)===-1;)ie.push($),oe.push($.name);for(var ae={};$=ie.pop();)if($.layout&&(ae.layout=l.extendLayout(ae.layout,$.layout)),$.data){if(ae.data||(ae.data=[]),q=$.traces,!q)for(q=[],H=0;H<$.data.length;H++)q[H]=H;for(ae.traces||(ae.traces=[]),H=0;H<$.data.length;H++)re=q[H],re!=null&&(j=ae.traces.indexOf(re),j===-1&&(j=ae.data.length,ae.traces[j]=re),ae.data[j]=l.extendTrace(ae.data[j],$.data[H]))}return ae},l.recomputeFrameHash=function(Q){for(var K=Q._transitionData._frameHash={},U=Q._transitionData._frames,H=0;H<U.length;H++){var q=U[H];q&&q.name&&(K[q.name]=q)}},l.extendObjectWithContainers=function(Q,K,U){var H,q,re,j,$,ie,oe,ae,se=n.extendDeepNoArrays({},K||{}),_e=n.expandObjectPaths(se),ue={};if(U&&U.length)for(re=0;re<U.length;re++)H=n.nestedProperty(_e,U[re]),q=H.get(),q===void 0?n.nestedProperty(ue,U[re]).set(null):(H.set(null),n.nestedProperty(ue,U[re]).set(q));if(Q=n.extendDeepNoArrays(Q||{},_e),U&&U.length){for(re=0;re<U.length;re++)if($=n.nestedProperty(ue,U[re]),oe=$.get(),!!oe){for(ie=n.nestedProperty(Q,U[re]),ae=ie.get(),Array.isArray(ae)||(ae=[],ie.set(ae)),j=0;j<oe.length;j++){var ye=oe[j];ye===null?ae[j]=null:ae[j]=l.extendObjectWithContainers(ae[j],ye)}ie.set(ae)}}return Q},l.dataArrayContainers=["transforms","dimensions"],l.layoutArrayContainers=e.layoutArrayContainers,l.extendTrace=function(Q,K){return l.extendObjectWithContainers(Q,K,l.dataArrayContainers)},l.extendLayout=function(Q,K){return l.extendObjectWithContainers(Q,K,l.layoutArrayContainers)},l.transition=function(Q,K,U,H,q,re){var j={redraw:q.redraw},$={},ie=[];return j.prepareFn=function(){for(var oe=Array.isArray(K)?K.length:0,ae=H.slice(0,oe),se=0;se<ae.length;se++){var _e=ae[se],ue=Q._fullData[_e],ye=ue._module;if(!!ye){if(ye.animatable){var xe=ye.basePlotModule.name;$[xe]||($[xe]=[]),$[xe].push(_e)}Q.data[ae[se]]=l.extendTrace(Q.data[ae[se]],K[se])}}var me=n.expandObjectPaths(n.extendDeepNoArrays({},U)),be=/^[xy]axis[0-9]*$/;for(var ke in me)!be.test(ke)||delete me[ke].range;l.extendLayout(Q.layout,me),delete Q.calcdata,l.supplyDefaults(Q),l.doCalcdata(Q);var De=n.expandObjectPaths(U);if(De){var Ve=Q._fullLayout._plots;for(var Ae in Ve){var Le=Ve[Ae],je=Le.xaxis,Ye=Le.yaxis,ze=je.range.slice(),Ie=Ye.range.slice(),We=null,pt=null,Ft=null,Qt=null;Array.isArray(De[je._name+".range"])?We=De[je._name+".range"].slice():Array.isArray((De[je._name]||{}).range)&&(We=De[je._name].range.slice()),Array.isArray(De[Ye._name+".range"])?pt=De[Ye._name+".range"].slice():Array.isArray((De[Ye._name]||{}).range)&&(pt=De[Ye._name].range.slice()),ze&&We&&(je.r2l(ze[0])!==je.r2l(We[0])||je.r2l(ze[1])!==je.r2l(We[1]))&&(Ft={xr0:ze,xr1:We}),Ie&&pt&&(Ye.r2l(Ie[0])!==Ye.r2l(pt[0])||Ye.r2l(Ie[1])!==Ye.r2l(pt[1]))&&(Qt={yr0:Ie,yr1:pt}),(Ft||Qt)&&ie.push(n.extendFlat({plotinfo:Le},Ft,Qt))}}return Promise.resolve()},j.runFn=function(oe){var ae,se=Q._fullLayout._basePlotModules,_e=ie.length,ue;if(U)for(ue=0;ue<se.length;ue++)se[ue].transitionAxes&&se[ue].transitionAxes(Q,ie,re,oe);_e?(ae=n.extendFlat({},re),ae.duration=0,delete $.cartesian):ae=re;for(var ye in $){var xe=$[ye],me=Q._fullData[xe[0]]._module;me.basePlotModule.plot(Q,xe,ae,oe)}},ee(Q,re,j)},l.transitionFromReact=function(Q,K,U,H){var q=Q._fullLayout,re=q.transition,j={},$=[];return j.prepareFn=function(){var ie=q._plots;j.redraw=!1,K.anim==="some"&&(j.redraw=!0),U.anim==="some"&&(j.redraw=!0);for(var oe in ie){var ae=ie[oe],se=ae.xaxis,_e=ae.yaxis,ue=H[se._name].range.slice(),ye=H[_e._name].range.slice(),xe=se.range.slice(),me=_e.range.slice();se.setScale(),_e.setScale();var be=null,ke=null;(se.r2l(ue[0])!==se.r2l(xe[0])||se.r2l(ue[1])!==se.r2l(xe[1]))&&(be={xr0:ue,xr1:xe}),(_e.r2l(ye[0])!==_e.r2l(me[0])||_e.r2l(ye[1])!==_e.r2l(me[1]))&&(ke={yr0:ye,yr1:me}),(be||ke)&&$.push(n.extendFlat({plotinfo:ae},be,ke))}return Promise.resolve()},j.runFn=function(ie){for(var oe=Q._fullData,ae=Q._fullLayout,se=ae._basePlotModules,_e,ue,ye,xe=[],me=0;me<oe.length;me++)xe.push(me);function be(){if(!!Q._fullLayout)for(var De=0;De<se.length;De++)se[De].transitionAxes&&se[De].transitionAxes(Q,$,_e,ie)}function ke(){if(!!Q._fullLayout)for(var De=0;De<se.length;De++)se[De].plot(Q,ye,ue,ie)}$.length&&K.anim?re.ordering==="traces first"?(_e=n.extendFlat({},re,{duration:0}),ye=xe,ue=re,setTimeout(be,re.duration),ke()):(_e=re,ye=null,ue=n.extendFlat({},re,{duration:0}),setTimeout(ke,_e.duration),be()):$.length?(_e=re,be()):K.anim&&(ye=xe,ue=re,ke())},ee(Q,re,j)};function ee(Q,K,U){var H=!1;function q(se){var _e=Promise.resolve();if(!se)return _e;for(;se.length;)_e=_e.then(se.shift());return _e}function re(se){if(!!se)for(;se.length;)se.shift()}function j(){return Q.emit("plotly_transitioning",[]),new Promise(function(se){Q._transitioning=!0,K.duration>0&&(Q._transitioningWithDuration=!0),Q._transitionData._interruptCallbacks.push(function(){H=!0}),U.redraw&&Q._transitionData._interruptCallbacks.push(function(){return e.call("redraw",Q)}),Q._transitionData._interruptCallbacks.push(function(){Q.emit("plotly_transitioninterrupted",[])});var _e=0,ue=0;function ye(){return _e++,function(){ue++,!H&&ue===_e&&$(se)}}U.runFn(ye),setTimeout(ye())})}function $(se){if(!!Q._transitionData)return re(Q._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(U.redraw)return e.call("redraw",Q)}).then(function(){Q._transitioning=!1,Q._transitioningWithDuration=!1,Q.emit("plotly_transitioned",[])}).then(se)}function ie(){if(!!Q._transitionData)return Q._transitioning=!1,q(Q._transitionData._interruptCallbacks)}var oe=[l.previousPromises,ie,U.prepareFn,l.rehover,l.reselect,j],ae=n.syncOrAsync(oe,Q);return(!ae||!ae.then)&&(ae=Promise.resolve()),ae.then(function(){return Q})}l.doCalcdata=function(Q,K){var U=s.list(Q),H=Q._fullData,q=Q._fullLayout,re,j,$,ie,oe=new Array(H.length),ae=(Q.calcdata||[]).slice();for(Q.calcdata=oe,q._numBoxes=0,q._numViolins=0,q._violinScaleGroupStats={},Q._hmpixcount=0,Q._hmlumcount=0,q._piecolormap={},q._sunburstcolormap={},q._treemapcolormap={},q._iciclecolormap={},q._funnelareacolormap={},$=0;$<H.length;$++)if(Array.isArray(K)&&K.indexOf($)===-1){oe[$]=ae[$];continue}for($=0;$<H.length;$++)re=H[$],re._arrayAttrs=a.findArrayAttributes(re),re._extremes={};var se=q._subplots.polar||[];for($=0;$<se.length;$++)U.push(q[se[$]].radialaxis,q[se[$]].angularaxis);for(var _e in q._colorAxes){var ue=q[_e];ue.cauto!==!1&&(delete ue.cmin,delete ue.cmax)}var ye=!1;function xe(ke){if(re=H[ke],j=re._module,re.visible===!0&&re.transforms){if(j&&j.calc){var De=j.calc(Q,re);De[0]&&De[0].t&&De[0].t._scene&&delete De[0].t._scene.dirty}for(ie=0;ie<re.transforms.length;ie++){var Ve=re.transforms[ie];j=x[Ve.type],j&&j.calcTransform&&(re._hasCalcTransform=!0,ye=!0,j.calcTransform(Q,re,Ve))}}}function me(ke,De){if(re=H[ke],j=re._module,!!j.isContainer===De){var Ve=[];if(re.visible===!0&&re._length!==0){delete re._indexToPoints;var Ae=re.transforms||[];for(ie=Ae.length-1;ie>=0;ie--)if(Ae[ie].enabled){re._indexToPoints=Ae[ie]._indexToPoints;break}j&&j.calc&&(Ve=j.calc(Q,re))}(!Array.isArray(Ve)||!Ve[0])&&(Ve=[{x:v,y:v}]),Ve[0].t||(Ve[0].t={}),Ve[0].trace=re,oe[ke]=Ve}}for(ne(U,H,q),$=0;$<H.length;$++)me($,!0);for($=0;$<H.length;$++)xe($);for(ye&&ne(U,H,q),$=0;$<H.length;$++)me($,!0);for($=0;$<H.length;$++)me($,!1);ce(Q);var be=X(U,Q);if(be.length){for(q._numBoxes=0,q._numViolins=0,$=0;$<be.length;$++)me(be[$],!0);for($=0;$<be.length;$++)me(be[$],!1);ce(Q)}e.getComponentMethod("fx","calc")(Q),e.getComponentMethod("errorbars","calc")(Q)};var Z=/(total|sum|min|max|mean|median) (ascending|descending)/;function X(Q,K){var U=[],H,q,re,j,$;function ie(Et,Xt,Nt){var Ct=Xt._id.charAt(0);if(Et==="histogram2dcontour"){var Xe=Xt._counterAxes[0],at=s.getFromId(K,Xe),Ge=Ct==="x"||Xe==="x"&&at.type==="category",Se=Ct==="y"||Xe==="y"&&at.type==="category";return function(He,Ke){return He===0||Ke===0||Ge&&He===Nt[Ke].length-1||Se&&Ke===Nt.length-1?-1:(Ct==="y"?Ke:He)-1}}else return function(He,Ke){return Ct==="y"?Ke:He}}var oe={min:function(Et){return n.aggNums(Math.min,null,Et)},max:function(Et){return n.aggNums(Math.max,null,Et)},sum:function(Et){return n.aggNums(function(Xt,Nt){return Xt+Nt},null,Et)},total:function(Et){return n.aggNums(function(Xt,Nt){return Xt+Nt},null,Et)},mean:function(Et){return n.mean(Et)},median:function(Et){return n.median(Et)}};for(H=0;H<Q.length;H++){var ae=Q[H];if(ae.type==="category"){var se=ae.categoryorder.match(Z);if(se){var _e=se[1],ue=se[2],ye=ae._id.charAt(0),xe=ye==="x",me=[];for(q=0;q<ae._categories.length;q++)me.push([ae._categories[q],[]]);for(q=0;q<ae._traceIndices.length;q++){var be=ae._traceIndices[q],ke=K._fullData[be];if(ke.visible===!0){var De=ke.type;e.traceIs(ke,"histogram")&&(delete ke._xautoBinFinished,delete ke._yautoBinFinished);var Ve=De==="splom",Ae=De==="scattergl",Le=K.calcdata[be];for(re=0;re<Le.length;re++){var je=Le[re],Ye,ze;if(Ve){var Ie=ke._axesDim[ae._id];if(!xe){var We=ke._diag[Ie][0];We&&(ae=K._fullLayout[s.id2name(We)])}var pt=je.trace.dimensions[Ie].values;for(j=0;j<pt.length;j++)for(Ye=ae._categoriesMap[pt[j]],$=0;$<je.trace.dimensions.length;$++)if($!==Ie){var Ft=je.trace.dimensions[$];me[Ye][1].push(Ft.values[j])}}else if(Ae){for(j=0;j<je.t.x.length;j++)xe?(Ye=je.t.x[j],ze=je.t.y[j]):(Ye=je.t.y[j],ze=je.t.x[j]),me[Ye][1].push(ze);je.t&&je.t._scene&&delete je.t._scene.dirty}else if(je.hasOwnProperty("z")){ze=je.z;var Qt=ie(ke.type,ae,ze);for(j=0;j<ze.length;j++)for($=0;$<ze[j].length;$++)Ye=Qt($,j),Ye+1&&me[Ye][1].push(ze[j][$])}else for(Ye=je.p,Ye===void 0&&(Ye=je[ye]),ze=je.s,ze===void 0&&(ze=je.v),ze===void 0&&(ze=xe?je.y:je.x),Array.isArray(ze)||(ze===void 0?ze=[]:ze=[ze]),j=0;j<ze.length;j++)me[Ye][1].push(ze[j])}}}ae._categoriesValue=me;var zt=[];for(q=0;q<me.length;q++)zt.push([me[q][0],oe[_e](me[q][1])]);zt.sort(function(Et,Xt){return Et[1]-Xt[1]}),ae._categoriesAggregatedValue=zt,ae._initialCategories=zt.map(function(Et){return Et[0]}),ue==="descending"&&ae._initialCategories.reverse(),U=U.concat(ae.sortByInitialCategories())}}}return U}function ne(Q,K,U){var H={};function q(ie){ie.clearCalc(),ie.type==="multicategory"&&ie.setupMultiCategory(K),H[ie._id]=1}n.simpleMap(Q,q);for(var re=U._axisMatchGroups||[],j=0;j<re.length;j++)for(var $ in re[j])H[$]||q(U[s.id2name($)])}function ce(Q){var K=Q._fullLayout,U=K._visibleModules,H={},q,re,j;for(re=0;re<U.length;re++){var $=U[re],ie=$.crossTraceCalc;if(ie){var oe=$.basePlotModule.name;H[oe]?n.pushUnique(H[oe],ie):H[oe]=[ie]}}for(j in H){var ae=H[j],se=K._subplots[j];if(Array.isArray(se))for(q=0;q<se.length;q++){var _e=se[q],ue=j==="cartesian"?K._plots[_e]:K[_e];for(re=0;re<ae.length;re++)ae[re](Q,ue,_e)}else for(re=0;re<ae.length;re++)ae[re](Q)}}l.rehover=function(Q){Q._fullLayout._rehover&&Q._fullLayout._rehover()},l.redrag=function(Q){Q._fullLayout._redrag&&Q._fullLayout._redrag()},l.reselect=function(Q){var K=Q._fullLayout,U=(Q.layout||{}).selections,H=K._previousSelections;K._previousSelections=U;var q=K._reselect||JSON.stringify(U)!==JSON.stringify(H);e.getComponentMethod("selections","reselect")(Q,q)},l.generalUpdatePerTraceModule=function(Q,K,U,H){var q=K.traceHash,re={},j;for(j=0;j<U.length;j++){var $=U[j],ie=$[0].trace;ie.visible&&(re[ie.type]=re[ie.type]||[],re[ie.type].push($))}for(var oe in q)if(!re[oe]){var ae=q[oe][0],se=ae[0].trace;se.visible=!1,re[oe]=[ae]}for(var _e in re){var ue=re[_e],ye=ue[0][0].trace._module;ye.plot(Q,K,n.filterVisible(ue),H)}K.traceHash=re},l.plotBasePlot=function(Q,K,U,H,q){var re=e.getModule(Q),j=d(K.calcdata,re)[0];re.plot(K,j,H,q)},l.cleanBasePlot=function(Q,K,U,H,q){var re=q._has&&q._has(Q),j=U._has&&U._has(Q);re&&!j&&q["_"+Q+"layer"].selectAll("g.trace").remove()}},{"../components/color":367,"../components/shapes/handle_outline":468,"../constants/numerical":491,"../lib":515,"../plot_api/plot_schema":554,"../plot_api/plot_template":555,"../plots/get_data":602,"../registry":647,"./animation_attributes":560,"./attributes":562,"./cartesian/axis_ids":570,"./command":592,"./font_attributes":594,"./frame_attributes":595,"./layout_attributes":619,"@plotly/d3":58,"d3-format":112,"d3-time-format":120,"fast-isnumeric":190}],629:[function(t,B,V){B.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},{}],630:[function(t,B,V){var m=t("../../lib"),c=t("../../lib/polygon").tester,A=m.findIndexOfMin,T=m.isAngleInsideSector,e=m.angleDelta,a=m.angleDist;function i(x,u,M,_,p){if(!T(u,_))return!1;var w,h;M[0]<M[1]?(w=M[0],h=M[1]):(w=M[1],h=M[0]);var L=c(o(w,_[0],_[1],p)),S=c(o(h,_[0],_[1],p)),E=[x*Math.cos(u),x*Math.sin(u)];return S.contains(E)&&!L.contains(E)}function n(x,u,M,_){var p,w,h=_[0],L=_[1],S=d(Math.sin(u)-Math.sin(x)),E=d(Math.cos(u)-Math.cos(x)),P=Math.tan(M),F=d(1/P),I=S/E,D=L-I*h;return F?S&&E?(p=D/(P-I),w=P*p):E?(p=L*F,w=L):(p=h,w=h*P):S&&E?(p=0,w=D):E?(p=0,w=L):p=w=NaN,[p,w]}function r(x,u,M,_){var p=-u*M,w=u*u+1,h=2*(u*p-M),L=p*p+M*M-x*x,S=Math.sqrt(h*h-4*w*L),E=(-h+S)/(2*w),P=(-h-S)/(2*w);return[[E,u*E+p+_],[P,u*P+p+_]]}function v(x,u){var M=u.length,_=new Array(M+1),p;for(p=0;p<M;p++){var w=u[p];_[p]=[x*Math.cos(w),x*Math.sin(w)]}return _[p]=_[0].slice(),_}function s(x,u,M,_){var p=_.length,w=[],h,L;function S(G){return[x*Math.cos(G),x*Math.sin(G)]}function E(G,Y,ee){return n(G,Y,ee,S(G))}function P(G){return m.mod(G,p)}function F(G){return T(G,[u,M])}var I=A(_,function(G){return F(G)?a(G,u):1/0}),D=E(_[I],_[P(I-1)],u);for(w.push(D),h=I,L=0;L<p;h++,L++){var R=_[P(h)];if(!F(R))break;w.push(S(R))}var N=A(_,function(G){return F(G)?a(G,M):1/0}),z=E(_[N],_[P(N+1)],M);return w.push(z),w.push([0,0]),w.push(w[0].slice()),w}function o(x,u,M,_){return m.isFullCircle([u,M])?v(x,_):s(x,u,M,_)}function b(x,u,M,_){for(var p=1/0,w=1/0,h=o(x,u,M,_),L=0;L<h.length;L++){var S=h[L];p=Math.min(p,S[0]),w=Math.min(w,-S[1])}return[p,w]}function g(x,u){var M=function(w){var h=e(w,x);return h>0?h:1/0},_=A(u,M),p=m.mod(_+1,u.length);return[u[_],u[p]]}function d(x){return Math.abs(x)>1e-10?x:0}function f(x,u,M){u=u||0,M=M||0;for(var _=x.length,p=new Array(_),w=0;w<_;w++){var h=x[w];p[w]=[u+h[0],M-h[1]]}return p}function y(x,u,M,_,p,w){var h=o(x,u,M,_);return"M"+f(h,p,w).join("L")}function l(x,u,M,_,p,w,h){var L,S;x<u?(L=x,S=u):(L=u,S=x);var E=f(o(L,M,_,p),w,h),P=f(o(S,M,_,p),w,h);return"M"+P.reverse().join("L")+"M"+E.join("L")}B.exports={isPtInsidePolygon:i,findPolygonOffset:b,findEnclosingVertexAngles:g,findIntersectionXY:n,findXYatLength:r,clampTiny:d,pathPolygon:y,pathPolygonAnnulus:l}},{"../../lib":515,"../../lib/polygon":527}],631:[function(t,B,V){var m=t("../get_data").getSubplotCalcData,c=t("../../lib").counterRegex,A=t("./polar"),T=t("./constants"),e=T.attr,a=T.name,i=c(a),n={};n[e]={valType:"subplotid",dflt:a,editType:"calc"};function r(s){for(var o=s._fullLayout,b=s.calcdata,g=o._subplots[a],d=0;d<g.length;d++){var f=g[d],y=m(b,a,f),l=o[f]._subplot;l||(l=A(s,f),o[f]._subplot=l),l.plot(y,o,s._promises)}}function v(s,o,b,g){for(var d=g._subplots[a]||[],f=g._has&&g._has("gl"),y=o._has&&o._has("gl"),l=f&&!y,x=0;x<d.length;x++){var u=d[x],M=g[u]._subplot;if(!o[u]&&!!M){M.framework.remove(),M.layers["radial-axis-title"].remove();for(var _ in M.clipPaths)M.clipPaths[_].remove()}l&&M._scene&&(M._scene.destroy(),M._scene=null)}}B.exports={attr:e,name:a,idRoot:a,idRegex:i,attrRegex:i,attributes:n,layoutAttributes:t("./layout_attributes"),supplyLayoutDefaults:t("./layout_defaults"),plot:r,clean:v,toSVG:t("../cartesian").toSVG}},{"../../lib":515,"../cartesian":578,"../get_data":602,"./constants":629,"./layout_attributes":632,"./layout_defaults":633,"./polar":634}],632:[function(t,B,V){var m=t("../../components/color/attributes"),c=t("../cartesian/layout_attributes"),A=t("../domain").attributes,T=t("../../lib").extendFlat,e=t("../../plot_api/edit_types").overrideAll,a=e({color:c.color,showline:T({},c.showline,{dflt:!0}),linecolor:c.linecolor,linewidth:c.linewidth,showgrid:T({},c.showgrid,{dflt:!0}),gridcolor:c.gridcolor,gridwidth:c.gridwidth,griddash:c.griddash},"plot","from-root"),i=e({tickmode:c.tickmode,nticks:c.nticks,tick0:c.tick0,dtick:c.dtick,tickvals:c.tickvals,ticktext:c.ticktext,ticks:c.ticks,ticklen:c.ticklen,tickwidth:c.tickwidth,tickcolor:c.tickcolor,ticklabelstep:c.ticklabelstep,showticklabels:c.showticklabels,showtickprefix:c.showtickprefix,tickprefix:c.tickprefix,showticksuffix:c.showticksuffix,ticksuffix:c.ticksuffix,showexponent:c.showexponent,exponentformat:c.exponentformat,minexponent:c.minexponent,separatethousands:c.separatethousands,tickfont:c.tickfont,tickangle:c.tickangle,tickformat:c.tickformat,tickformatstops:c.tickformatstops,layer:c.layer},"plot","from-root"),n={visible:T({},c.visible,{dflt:!0}),type:T({},c.type,{values:["-","linear","log","date","category"]}),autotypenumbers:c.autotypenumbers,autorange:T({},c.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},range:T({},c.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:c.categoryorder,categoryarray:c.categoryarray,angle:{valType:"angle",editType:"plot"},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:T({},c.title.text,{editType:"plot",dflt:""}),font:T({},c.title.font,{editType:"plot"}),editType:"plot"},hoverformat:c.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:c._deprecated.title,titlefont:c._deprecated.titlefont}};T(n,a,i);var r={visible:T({},c.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:c.autotypenumbers,categoryorder:c.categoryorder,categoryarray:c.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:c.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};T(r,a,i),B.exports={domain:A({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:m.background},radialaxis:n,angularaxis:r,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},{"../../components/color/attributes":366,"../../lib":515,"../../plot_api/edit_types":548,"../cartesian/layout_attributes":579,"../domain":593}],633:[function(t,B,V){var m=t("../../lib"),c=t("../../components/color"),A=t("../../plot_api/plot_template"),T=t("../subplot_defaults"),e=t("../get_data").getSubplotData,a=t("../cartesian/tick_value_defaults"),i=t("../cartesian/tick_mark_defaults"),n=t("../cartesian/tick_label_defaults"),r=t("../cartesian/prefix_suffix_defaults"),v=t("../cartesian/category_order_defaults"),s=t("../cartesian/line_grid_defaults"),o=t("../cartesian/axis_autotype"),b=t("./layout_attributes"),g=t("./set_convert"),d=t("./constants"),f=d.axisNames;function y(x,u,M,_){var p=M("bgcolor");_.bgColor=c.combine(p,_.paper_bgcolor);var w=M("sector");M("hole");var h=e(_.fullData,d.name,_.id),L=_.layoutOut,S;function E(Q,K){return M(S+"."+Q,K)}for(var P=0;P<f.length;P++){S=f[P],m.isPlainObject(x[S])||(x[S]={});var F=x[S],I=A.newContainer(u,S);I._id=I._name=S,I._attr=_.id+"."+S,I._traceIndices=h.map(function(Q){return Q._expandedIndex});var D=d.axisName2dataArray[S],R=l(F,I,E,h,D,_);v(F,I,E,{axData:h,dataAttr:D});var N=E("visible");switch(g(I,u,L),E("uirevision",u.uirevision),I._m=1,S){case"radialaxis":var z=E("autorange",!I.isValidRange(F.range));F.autorange=z,z&&(R==="linear"||R==="-")&&E("rangemode"),z==="reversed"&&(I._m=-1),E("range"),I.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if(R==="date"){m.log("Polar plots do not support date angular axes yet.");for(var G=0;G<h.length;G++)h[G].visible=!1;R=F.type=I.type="linear"}E(R==="linear"?"thetaunit":"period");var Y=E("direction");E("rotation",{counterclockwise:0,clockwise:90}[Y]);break}if(r(F,I,E,I.type,{tickSuffixDflt:I.thetaunit==="degrees"?"\xB0":void 0}),N){var ee,Z,X,ne,ce=_.font||{};ee=E("color"),Z=ee===F.color?ee:ce.color,X=ce.size,ne=ce.family,a(F,I,E,I.type),n(F,I,E,I.type,{font:{color:Z,size:X,family:ne}}),i(F,I,E,{outerTicks:!0}),s(F,I,E,{dfltColor:ee,bgColor:_.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:b[S]}),E("layer"),S==="radialaxis"&&(E("side"),E("angle",w[0]),E("title.text"),m.coerceFont(E,"title.font",{color:Z,size:m.bigFont(X),family:ne}))}R!=="category"&&E("hoverformat"),I._input=F}u.angularaxis.type==="category"&&M("gridshape")}function l(x,u,M,_,p,w){var h=M("autotypenumbers",w.autotypenumbersDflt),L=M("type");if(L==="-"){for(var S,E=0;E<_.length;E++)if(_[E].visible){S=_[E];break}S&&S[p]&&(u.type=o(S[p],"gregorian",{noMultiCategory:!0,autotypenumbers:h})),u.type==="-"?u.type="linear":x.type=u.type}return u.type}B.exports=function(u,M,_){T(u,M,_,{type:d.name,attributes:b,handleDefaults:y,font:M.font,autotypenumbersDflt:M.autotypenumbers,paper_bgcolor:M.paper_bgcolor,fullData:_,layoutOut:M})}},{"../../components/color":367,"../../lib":515,"../../plot_api/plot_template":555,"../cartesian/axis_autotype":567,"../cartesian/category_order_defaults":571,"../cartesian/line_grid_defaults":581,"../cartesian/prefix_suffix_defaults":583,"../cartesian/tick_label_defaults":587,"../cartesian/tick_mark_defaults":588,"../cartesian/tick_value_defaults":589,"../get_data":602,"../subplot_defaults":641,"./constants":629,"./layout_attributes":632,"./set_convert":635}],634:[function(t,B,V){var m=t("@plotly/d3"),c=t("tinycolor2"),A=t("../../registry"),T=t("../../lib"),e=T.strRotate,a=T.strTranslate,i=t("../../components/color"),n=t("../../components/drawing"),r=t("../plots"),v=t("../../plots/cartesian/axes"),s=t("../cartesian/set_convert"),o=t("./set_convert"),b=t("../cartesian/autorange").doAutoRange,g=t("../cartesian/dragbox"),d=t("../../components/dragelement"),f=t("../../components/fx"),y=t("../../components/titles"),l=t("../../components/selections").prepSelect,x=t("../../components/selections").selectOnClick,u=t("../../components/selections").clearOutline,M=t("../../lib/setcursor"),_=t("../../lib/clear_gl_canvases"),p=t("../../plot_api/subroutines").redrawReglTraces,w=t("../../constants/alignment").MID_SHIFT,h=t("./constants"),L=t("./helpers"),S=t("../smith/helpers"),E=S.smith,P=S.reactanceArc,F=S.resistanceArc,I=S.smithTransform,D=T._,R=T.mod,N=T.deg2rad,z=T.rad2deg;function G(ce,Q,K){this.isSmith=K||!1,this.id=Q,this.gd=ce,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var U=ce._fullLayout,H="clip"+U._uid+Q;this.clipIds.forTraces=H+"-for-traces",this.clipPaths.forTraces=U._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=U["_"+(K?"smith":"polar")+"layer"].append("g").attr("class",Q),this.getHole=function(q){return this.isSmith?0:q.hole},this.getSector=function(q){return this.isSmith?[0,360]:q.sector},this.getRadial=function(q){return this.isSmith?q.realaxis:q.radialaxis},this.getAngular=function(q){return this.isSmith?q.imaginaryaxis:q.angularaxis},K||(this.radialTickLayout=null,this.angularTickLayout=null)}var Y=G.prototype;B.exports=function(Q,K,U){return new G(Q,K,U)},Y.plot=function(ce,Q){for(var K=this,U=Q[K.id],H=!1,q=0;q<ce.length;q++){var re=ce[q][0].trace;if(re.cliponaxis===!1){H=!0;break}}K._hasClipOnAxisFalse=H,K.updateLayers(Q,U),K.updateLayout(Q,U),r.generalUpdatePerTraceModule(K.gd,K,ce,U),K.updateFx(Q,U),K.isSmith&&(delete U.realaxis.range,delete U.imaginaryaxis.range)},Y.updateLayers=function(ce,Q){var K=this,U=K.isSmith,H=K.layers,q=K.getRadial(Q),re=K.getAngular(Q),j=h.layerNames,$=j.indexOf("frontplot"),ie=j.slice(0,$),oe=re.layer==="below traces",ae=q.layer==="below traces";oe&&ie.push("angular-line"),ae&&ie.push("radial-line"),oe&&ie.push("angular-axis"),ae&&ie.push("radial-axis"),ie.push("frontplot"),oe||ie.push("angular-line"),ae||ie.push("radial-line"),oe||ie.push("angular-axis"),ae||ie.push("radial-axis");var se=(U?"smith":"polar")+"sublayer",_e=K.framework.selectAll("."+se).data(ie,String);_e.enter().append("g").attr("class",function(ue){return se+" "+ue}).each(function(ue){var ye=H[ue]=m.select(this);switch(ue){case"frontplot":U||ye.append("g").classed("barlayer",!0),ye.append("g").classed("scatterlayer",!0);break;case"backplot":ye.append("g").classed("maplayer",!0);break;case"plotbg":H.bg=ye.append("path");break;case"radial-grid":ye.style("fill","none");break;case"angular-grid":ye.style("fill","none");break;case"radial-line":ye.append("line").style("fill","none");break;case"angular-line":ye.append("path").style("fill","none");break}}),_e.order()},Y.updateLayout=function(ce,Q){var K=this,U=K.layers,H=ce._size,q=K.getRadial(Q),re=K.getAngular(Q),j=Q.domain.x,$=Q.domain.y;K.xOffset=H.l+H.w*j[0],K.yOffset=H.t+H.h*(1-$[1]);var ie=K.xLength=H.w*(j[1]-j[0]),oe=K.yLength=H.h*($[1]-$[0]),ae=K.getSector(Q);K.sectorInRad=ae.map(N);var se=K.sectorBBox=Z(ae),_e=se[2]-se[0],ue=se[3]-se[1],ye=oe/ie,xe=Math.abs(ue/_e),me,be,ke,De,Ve;ye>xe?(me=ie,be=ie*xe,Ve=(oe-be)/H.h/2,ke=[j[0],j[1]],De=[$[0]+Ve,$[1]-Ve]):(me=oe/xe,be=oe,Ve=(ie-me)/H.w/2,ke=[j[0]+Ve,j[1]-Ve],De=[$[0],$[1]]),K.xLength2=me,K.yLength2=be,K.xDomain2=ke,K.yDomain2=De;var Ae=K.xOffset2=H.l+H.w*ke[0],Le=K.yOffset2=H.t+H.h*(1-De[1]),je=K.radius=me/_e,Ye=K.innerRadius=K.getHole(Q)*je,ze=K.cx=Ae-je*se[0],Ie=K.cy=Le+je*se[3],We=K.cxx=ze-Ae,pt=K.cyy=Ie-Le,Ft=q.side,Qt;Ft==="counterclockwise"?(Qt=Ft,Ft="top"):Ft==="clockwise"&&(Qt=Ft,Ft="bottom"),K.radialAxis=K.mockAxis(ce,Q,q,{_id:"x",side:Ft,_trueSide:Qt,domain:[Ye/H.w,je/H.w]}),K.angularAxis=K.mockAxis(ce,Q,re,{side:"right",domain:[0,Math.PI],autorange:!1}),K.doAutoRange(ce,Q),K.updateAngularAxis(ce,Q),K.updateRadialAxis(ce,Q),K.updateRadialAxisTitle(ce,Q),K.xaxis=K.mockCartesianAxis(ce,Q,{_id:"x",domain:ke}),K.yaxis=K.mockCartesianAxis(ce,Q,{_id:"y",domain:De});var zt=K.pathSubplot();K.clipPaths.forTraces.select("path").attr("d",zt).attr("transform",a(We,pt)),U.frontplot.attr("transform",a(Ae,Le)).call(n.setClipUrl,K._hasClipOnAxisFalse?null:K.clipIds.forTraces,K.gd),U.bg.attr("d",zt).attr("transform",a(ze,Ie)).call(i.fill,Q.bgcolor)},Y.mockAxis=function(ce,Q,K,U){var H=T.extendFlat({},K,U);return o(H,Q,ce),H},Y.mockCartesianAxis=function(ce,Q,K){var U=this,H=U.isSmith,q=K._id,re=T.extendFlat({type:"linear"},K);s(re,ce);var j={x:[0,2],y:[1,3]};return re.setRange=function(){var $=U.sectorBBox,ie=j[q],oe=U.radialAxis._rl,ae=(oe[1]-oe[0])/(1-U.getHole(Q));re.range=[$[ie[0]]*ae,$[ie[1]]*ae]},re.isPtWithinRange=q==="x"&&!H?function($){return U.isPtInside($)}:function(){return!0},re.setRange(),re.setScale(),re},Y.doAutoRange=function(ce,Q){var K=this,U=K.gd,H=K.radialAxis,q=K.getRadial(Q);b(U,H);var re=H.range;q.range=re.slice(),q._input.range=re.slice(),H._rl=[H.r2l(re[0],null,"gregorian"),H.r2l(re[1],null,"gregorian")]},Y.updateRadialAxis=function(ce,Q){var K=this,U=K.gd,H=K.layers,q=K.radius,re=K.innerRadius,j=K.cx,$=K.cy,ie=K.getRadial(Q),oe=R(K.getSector(Q)[0],360),ae=K.radialAxis,se=re<q,_e=K.isSmith;_e||(K.fillViewInitialKey("radialaxis.angle",ie.angle),K.fillViewInitialKey("radialaxis.range",ae.range.slice()),ae.setGeometry()),ae.tickangle==="auto"&&oe>90&&oe<=270&&(ae.tickangle=180);var ue=_e?function(je){var Ye=I(K,E([je.x,0]));return a(Ye[0]-j,Ye[1]-$)}:function(je){return a(ae.l2p(je.x)+re,0)},ye=_e?function(je){return F(K,je.x,-1/0,1/0)}:function(je){return K.pathArc(ae.r2p(je.x)+re)},xe=ee(ie);if(K.radialTickLayout!==xe&&(H["radial-axis"].selectAll(".xtick").remove(),K.radialTickLayout=xe),se){ae.setScale();var me=0,be=_e?(ae.tickvals||[]).filter(function(je){return je>=0}).map(function(je){return v.tickText(ae,je,!0,!1)}):v.calcTicks(ae),ke=_e?be:v.clipEnds(ae,be),De=v.getTickSigns(ae)[2];_e&&((ae.ticks==="top"&&ae.side==="bottom"||ae.ticks==="bottom"&&ae.side==="top")&&(De=-De),ae.ticks==="top"&&ae.side==="top"&&(me=-ae.ticklen),ae.ticks==="bottom"&&ae.side==="bottom"&&(me=ae.ticklen)),v.drawTicks(U,ae,{vals:be,layer:H["radial-axis"],path:v.makeTickPath(ae,0,De),transFn:ue,crisp:!1}),v.drawGrid(U,ae,{vals:ke,layer:H["radial-grid"],path:ye,transFn:T.noop,crisp:!1}),v.drawLabels(U,ae,{vals:be,layer:H["radial-axis"],transFn:ue,labelFns:v.makeLabelFns(ae,me)})}var Ve=K.radialAxisAngle=K.vangles?z(X(N(ie.angle),K.vangles)):ie.angle,Ae=a(j,$),Le=Ae+e(-Ve);ne(H["radial-axis"],se&&(ie.showticklabels||ie.ticks),{transform:Le}),ne(H["radial-grid"],se&&ie.showgrid,{transform:_e?"":Ae}),ne(H["radial-line"].select("line"),se&&ie.showline,{x1:_e?-q:re,y1:0,x2:q,y2:0,transform:Le}).attr("stroke-width",ie.linewidth).call(i.stroke,ie.linecolor)},Y.updateRadialAxisTitle=function(ce,Q,K){if(!this.isSmith){var U=this,H=U.gd,q=U.radius,re=U.cx,j=U.cy,$=U.getRadial(Q),ie=U.id+"title",oe=0;if($.title){var ae=n.bBox(U.layers["radial-axis"].node()).height,se=$.title.font.size,_e=$.side;oe=_e==="top"?se:_e==="counterclockwise"?-(ae+se*.4):ae+se*.8}var ue=K!==void 0?K:U.radialAxisAngle,ye=N(ue),xe=Math.cos(ye),me=Math.sin(ye),be=re+q/2*xe+oe*me,ke=j-q/2*me+oe*xe;U.layers["radial-axis-title"]=y.draw(H,ie,{propContainer:$,propName:U.id+".radialaxis.title",placeholder:D(H,"Click to enter radial axis title"),attributes:{x:be,y:ke,"text-anchor":"middle"},transform:{rotate:-ue}})}},Y.updateAngularAxis=function(ce,Q){var K=this,U=K.gd,H=K.layers,q=K.radius,re=K.innerRadius,j=K.cx,$=K.cy,ie=K.getAngular(Q),oe=K.angularAxis,ae=K.isSmith;ae||(K.fillViewInitialKey("angularaxis.rotation",ie.rotation),oe.setGeometry(),oe.setScale());var se=ae?function(Ye){var ze=I(K,E([0,Ye.x]));return Math.atan2(ze[0]-j,ze[1]-$)-Math.PI/2}:function(Ye){return oe.t2g(Ye.x)};oe.type==="linear"&&oe.thetaunit==="radians"&&(oe.tick0=z(oe.tick0),oe.dtick=z(oe.dtick));var _e=function(Ye){return a(j+q*Math.cos(Ye),$-q*Math.sin(Ye))},ue=ae?function(Ye){var ze=I(K,E([0,Ye.x]));return a(ze[0],ze[1])}:function(Ye){return _e(se(Ye))},ye=ae?function(Ye){var ze=I(K,E([0,Ye.x])),Ie=Math.atan2(ze[0]-j,ze[1]-$)-Math.PI/2;return a(ze[0],ze[1])+e(-z(Ie))}:function(Ye){var ze=se(Ye);return _e(ze)+e(-z(ze))},xe=ae?function(Ye){return P(K,Ye.x,0,1/0)}:function(Ye){var ze=se(Ye),Ie=Math.cos(ze),We=Math.sin(ze);return"M"+[j+re*Ie,$-re*We]+"L"+[j+q*Ie,$-q*We]},me=v.makeLabelFns(oe,0),be=me.labelStandoff,ke={};ke.xFn=function(Ye){var ze=se(Ye);return Math.cos(ze)*be},ke.yFn=function(Ye){var ze=se(Ye),Ie=Math.sin(ze)>0?.2:1;return-Math.sin(ze)*(be+Ye.fontSize*Ie)+Math.abs(Math.cos(ze))*(Ye.fontSize*w)},ke.anchorFn=function(Ye){var ze=se(Ye),Ie=Math.cos(ze);return Math.abs(Ie)<.1?"middle":Ie>0?"start":"end"},ke.heightFn=function(Ye,ze,Ie){var We=se(Ye);return-.5*(1+Math.sin(We))*Ie};var De=ee(ie);K.angularTickLayout!==De&&(H["angular-axis"].selectAll("."+oe._id+"tick").remove(),K.angularTickLayout=De);var Ve=ae?[1/0].concat(oe.tickvals||[]).map(function(Ye){return v.tickText(oe,Ye,!0,!1)}):v.calcTicks(oe);ae&&(Ve[0].text="\u221E",Ve[0].fontSize*=1.75);var Ae;if(Q.gridshape==="linear"?(Ae=Ve.map(se),T.angleDelta(Ae[0],Ae[1])<0&&(Ae=Ae.slice().reverse())):Ae=null,K.vangles=Ae,oe.type==="category"&&(Ve=Ve.filter(function(Ye){return T.isAngleInsideSector(se(Ye),K.sectorInRad)})),oe.visible){var Le=oe.ticks==="inside"?-1:1,je=(oe.linewidth||1)/2;v.drawTicks(U,oe,{vals:Ve,layer:H["angular-axis"],path:"M"+Le*je+",0h"+Le*oe.ticklen,transFn:ye,crisp:!1}),v.drawGrid(U,oe,{vals:Ve,layer:H["angular-grid"],path:xe,transFn:T.noop,crisp:!1}),v.drawLabels(U,oe,{vals:Ve,layer:H["angular-axis"],repositionOnUpdate:!0,transFn:ue,labelFns:ke})}ne(H["angular-line"].select("path"),ie.showline,{d:K.pathSubplot(),transform:a(j,$)}).attr("stroke-width",ie.linewidth).call(i.stroke,ie.linecolor)},Y.updateFx=function(ce,Q){if(!this.gd._context.staticPlot){var K=!this.isSmith;K&&(this.updateAngularDrag(ce),this.updateRadialDrag(ce,Q,0),this.updateRadialDrag(ce,Q,1)),this.updateHoverAndMainDrag(ce)}},Y.updateHoverAndMainDrag=function(ce){var Q=this,K=Q.isSmith,U=Q.gd,H=Q.layers,q=ce._zoomlayer,re=h.MINZOOM,j=h.OFFEDGE,$=Q.radius,ie=Q.innerRadius,oe=Q.cx,ae=Q.cy,se=Q.cxx,_e=Q.cyy,ue=Q.sectorInRad,ye=Q.vangles,xe=Q.radialAxis,me=L.clampTiny,be=L.findXYatLength,ke=L.findEnclosingVertexAngles,De=h.cornerHalfWidth,Ve=h.cornerLen/2,Ae,Le,je=g.makeDragger(H,"path","maindrag",ce.dragmode===!1?"none":"crosshair");m.select(je).attr("d",Q.pathSubplot()).attr("transform",a(oe,ae)),je.onmousemove=function(jt){f.hover(U,jt,Q.id),U._fullLayout._lasthover=je,U._fullLayout._hoversubplot=Q.id},je.onmouseout=function(jt){U._dragging||d.unhover(U,jt)};var Ye={element:je,gd:U,subplot:Q.id,plotinfo:{id:Q.id,xaxis:Q.xaxis,yaxis:Q.yaxis},xaxes:[Q.xaxis],yaxes:[Q.yaxis]},ze,Ie,We,pt,Ft,Qt,zt,Et,Xt;function Nt(jt,Yt){return Math.sqrt(jt*jt+Yt*Yt)}function Ct(jt,Yt){return Nt(jt-se,Yt-_e)}function Xe(jt,Yt){return Math.atan2(_e-Yt,jt-se)}function at(jt,Yt){return[jt*Math.cos(Yt),jt*Math.sin(-Yt)]}function Ge(jt,Yt){if(jt===0)return Q.pathSector(2*De);var or=Ve/jt,Gr=Yt-or,on=Yt+or,Jr=Math.max(0,Math.min(jt,$)),ot=Jr-De,er=Jr+De;return"M"+at(ot,Gr)+"A"+[ot,ot]+" 0,0,0 "+at(ot,on)+"L"+at(er,on)+"A"+[er,er]+" 0,0,1 "+at(er,Gr)+"Z"}function Se(jt,Yt,or){if(jt===0)return Q.pathSector(2*De);var Gr=at(jt,Yt),on=at(jt,or),Jr=me((Gr[0]+on[0])/2),ot=me((Gr[1]+on[1])/2),er,Kt;if(Jr&&ot){var fr=ot/Jr,Ar=-1/fr,et=be(De,fr,Jr,ot);er=be(Ve,Ar,et[0][0],et[0][1]),Kt=be(Ve,Ar,et[1][0],et[1][1])}else{var $e,st;ot?($e=Ve,st=De):($e=De,st=Ve),er=[[Jr-$e,ot-st],[Jr+$e,ot-st]],Kt=[[Jr-$e,ot+st],[Jr+$e,ot+st]]}return"M"+er.join("L")+"L"+Kt.reverse().join("L")+"Z"}function He(){We=null,pt=null,Ft=Q.pathSubplot(),Qt=!1;var jt=U._fullLayout[Q.id];zt=c(jt.bgcolor).getLuminance(),Et=g.makeZoombox(q,zt,oe,ae,Ft),Et.attr("fill-rule","evenodd"),Xt=g.makeCorners(q,oe,ae),u(U)}function Ke(jt,Yt){return Yt=Math.max(Math.min(Yt,$),ie),jt<j?jt=0:$-jt<j?jt=$:Yt<j?Yt=0:$-Yt<j&&(Yt=$),Math.abs(Yt-jt)>re?(jt<Yt?(We=jt,pt=Yt):(We=Yt,pt=jt),!0):(We=null,pt=null,!1)}function qe(jt,Yt){jt=jt||Ft,Yt=Yt||"M0,0Z",Et.attr("d",jt),Xt.attr("d",Yt),g.transitionZoombox(Et,Xt,Qt,zt),Qt=!0;var or={};It(or),U.emit("plotly_relayouting",or)}function Tt(jt,Yt){jt=jt*Ae,Yt=Yt*Le;var or=ze+jt,Gr=Ie+Yt,on=Ct(ze,Ie),Jr=Math.min(Ct(or,Gr),$),ot=Xe(ze,Ie),er,Kt;Ke(on,Jr)&&(er=Ft+Q.pathSector(pt),We&&(er+=Q.pathSector(We)),Kt=Ge(We,ot)+Ge(pt,ot)),qe(er,Kt)}function mt(jt,Yt,or,Gr){var on=L.findIntersectionXY(or,Gr,or,[jt-se,_e-Yt]);return Nt(on[0],on[1])}function At(jt,Yt){var or=ze+jt,Gr=Ie+Yt,on=Xe(ze,Ie),Jr=Xe(or,Gr),ot=ke(on,ye),er=ke(Jr,ye),Kt=mt(ze,Ie,ot[0],ot[1]),fr=Math.min(mt(or,Gr,er[0],er[1]),$),Ar,et;Ke(Kt,fr)&&(Ar=Ft+Q.pathSector(pt),We&&(Ar+=Q.pathSector(We)),et=[Se(We,ot[0],ot[1]),Se(pt,ot[0],ot[1])].join(" ")),qe(Ar,et)}function Ht(){if(g.removeZoombox(U),!(We===null||pt===null)){var jt={};It(jt),g.showDoubleClickNotifier(U),A.call("_guiRelayout",U,jt)}}function It(jt){var Yt=xe._rl,or=(Yt[1]-Yt[0])/(1-ie/$)/$,Gr=[Yt[0]+(We-ie)*or,Yt[0]+(pt-ie)*or];jt[Q.id+".radialaxis.range"]=Gr}function Vt(jt,Yt){var or=U._fullLayout.clickmode;if(g.removeZoombox(U),jt===2){var Gr={};for(var on in Q.viewInitial)Gr[Q.id+"."+on]=Q.viewInitial[on];U.emit("plotly_doubleclick",null),A.call("_guiRelayout",U,Gr)}or.indexOf("select")>-1&&jt===1&&x(Yt,U,[Q.xaxis],[Q.yaxis],Q.id,Ye),or.indexOf("event")>-1&&f.click(U,Yt,Q.id)}Ye.prepFn=function(jt,Yt,or){var Gr=U._fullLayout.dragmode,on=je.getBoundingClientRect();U._fullLayout._calcInverseTransform(U);var Jr=U._fullLayout._invTransform;Ae=U._fullLayout._invScaleX,Le=U._fullLayout._invScaleY;var ot=T.apply3DTransform(Jr)(Yt-on.left,or-on.top);if(ze=ot[0],Ie=ot[1],ye){var er=L.findPolygonOffset($,ue[0],ue[1],ye);ze+=se+er[0],Ie+=_e+er[1]}switch(Gr){case"zoom":Ye.clickFn=Vt,K||(ye?Ye.moveFn=At:Ye.moveFn=Tt,Ye.doneFn=Ht,He());break;case"select":case"lasso":l(jt,Yt,or,Ye,Gr);break}},d.init(Ye)},Y.updateRadialDrag=function(ce,Q,K){var U=this,H=U.gd,q=U.layers,re=U.radius,j=U.innerRadius,$=U.cx,ie=U.cy,oe=U.radialAxis,ae=h.radialDragBoxSize,se=ae/2;if(!oe.visible)return;var _e=N(U.radialAxisAngle),ue=oe._rl,ye=ue[0],xe=ue[1],me=ue[K],be=.75*(ue[1]-ue[0])/(1-U.getHole(Q))/re,ke,De,Ve;K?(ke=$+(re+se)*Math.cos(_e),De=ie-(re+se)*Math.sin(_e),Ve="radialdrag"):(ke=$+(j-se)*Math.cos(_e),De=ie-(j-se)*Math.sin(_e),Ve="radialdrag-inner");var Ae=g.makeRectDragger(q,Ve,"crosshair",-se,-se,ae,ae),Le={element:Ae,gd:H};ce.dragmode===!1&&(Le.dragmode=!1),ne(m.select(Ae),oe.visible&&j<re,{transform:a(ke,De)});var je,Ye,ze;function Ie(zt,Et){if(je)je(zt,Et);else{var Xt=[zt,-Et],Nt=[Math.cos(_e),Math.sin(_e)],Ct=Math.abs(T.dot(Xt,Nt)/Math.sqrt(T.dot(Xt,Xt)));isNaN(Ct)||(je=Ct<.5?Ft:Qt)}var Xe={};We(Xe),H.emit("plotly_relayouting",Xe)}function We(zt){Ye!==null?zt[U.id+".radialaxis.angle"]=Ye:ze!==null&&(zt[U.id+".radialaxis.range["+K+"]"]=ze)}function pt(){Ye!==null?A.call("_guiRelayout",H,U.id+".radialaxis.angle",Ye):ze!==null&&A.call("_guiRelayout",H,U.id+".radialaxis.range["+K+"]",ze)}function Ft(zt,Et){if(K!==0){var Xt=ke+zt,Nt=De+Et;Ye=Math.atan2(ie-Nt,Xt-$),U.vangles&&(Ye=X(Ye,U.vangles)),Ye=z(Ye);var Ct=a($,ie)+e(-Ye);q["radial-axis"].attr("transform",Ct),q["radial-line"].select("line").attr("transform",Ct);var Xe=U.gd._fullLayout,at=Xe[U.id];U.updateRadialAxisTitle(Xe,at,Ye)}}function Qt(zt,Et){var Xt=T.dot([zt,-Et],[Math.cos(_e),Math.sin(_e)]);if(ze=me-be*Xt,be>0!=(K?ze>ye:ze<xe)){ze=null;return}var Nt=H._fullLayout,Ct=Nt[U.id];oe.range[K]=ze,oe._rl[K]=ze,U.updateRadialAxis(Nt,Ct),U.xaxis.setRange(),U.xaxis.setScale(),U.yaxis.setRange(),U.yaxis.setScale();var Xe=!1;for(var at in U.traceHash){var Ge=U.traceHash[at],Se=T.filterVisible(Ge),He=Ge[0][0].trace._module;He.plot(H,U,Se,Ct),A.traceIs(at,"gl")&&Se.length&&(Xe=!0)}Xe&&(_(H),p(H))}Le.prepFn=function(){je=null,Ye=null,ze=null,Le.moveFn=Ie,Le.doneFn=pt,u(H)},Le.clampFn=function(zt,Et){return Math.sqrt(zt*zt+Et*Et)<h.MINDRAG&&(zt=0,Et=0),[zt,Et]},d.init(Le)},Y.updateAngularDrag=function(ce){var Q=this,K=Q.gd,U=Q.layers,H=Q.radius,q=Q.angularAxis,re=Q.cx,j=Q.cy,$=Q.cxx,ie=Q.cyy,oe=h.angularDragBoxSize,ae=g.makeDragger(U,"path","angulardrag",ce.dragmode===!1?"none":"move"),se={element:ae,gd:K};ce.dragmode===!1?se.dragmode=!1:m.select(ae).attr("d",Q.pathAnnulus(H,H+oe)).attr("transform",a(re,j)).call(M,"move");function _e(ze,Ie){return Math.atan2(ie+oe-Ie,ze-$-oe)}var ue=U.frontplot.select(".scatterlayer").selectAll(".trace"),ye=ue.selectAll(".point"),xe=ue.selectAll(".textpoint"),me,be,ke,De,Ve,Ae;function Le(ze,Ie){var We=Q.gd._fullLayout,pt=We[Q.id],Ft=me+ze*ce._invScaleX,Qt=be+Ie*ce._invScaleY,zt=_e(Ft,Qt),Et=z(zt-Ae);if(De=ke+Et,U.frontplot.attr("transform",a(Q.xOffset2,Q.yOffset2)+e([-Et,$,ie])),Q.vangles){Ve=Q.radialAxisAngle+Et;var Xt=a(re,j)+e(-Et),Nt=a(re,j)+e(-Ve);U.bg.attr("transform",Xt),U["radial-grid"].attr("transform",Xt),U["radial-axis"].attr("transform",Nt),U["radial-line"].select("line").attr("transform",Nt),Q.updateRadialAxisTitle(We,pt,Ve)}else Q.clipPaths.forTraces.select("path").attr("transform",a($,ie)+e(Et));ye.each(function(){var Ke=m.select(this),qe=n.getTranslate(Ke);Ke.attr("transform",a(qe.x,qe.y)+e([Et]))}),xe.each(function(){var Ke=m.select(this),qe=Ke.select("text"),Tt=n.getTranslate(Ke);Ke.attr("transform",e([Et,qe.attr("x"),qe.attr("y")])+a(Tt.x,Tt.y))}),q.rotation=T.modHalf(De,360),Q.updateAngularAxis(We,pt),Q._hasClipOnAxisFalse&&!T.isFullCircle(Q.sectorInRad)&&ue.call(n.hideOutsideRangePoints,Q);var Ct=!1;for(var Xe in Q.traceHash)if(A.traceIs(Xe,"gl")){var at=Q.traceHash[Xe],Ge=T.filterVisible(at),Se=at[0][0].trace._module;Se.plot(K,Q,Ge,pt),Ge.length&&(Ct=!0)}Ct&&(_(K),p(K));var He={};je(He),K.emit("plotly_relayouting",He)}function je(ze){ze[Q.id+".angularaxis.rotation"]=De,Q.vangles&&(ze[Q.id+".radialaxis.angle"]=Ve)}function Ye(){xe.select("text").attr("transform",null);var ze={};je(ze),A.call("_guiRelayout",K,ze)}se.prepFn=function(ze,Ie,We){var pt=ce[Q.id];ke=pt.angularaxis.rotation;var Ft=ae.getBoundingClientRect();me=Ie-Ft.left,be=We-Ft.top,K._fullLayout._calcInverseTransform(K);var Qt=T.apply3DTransform(ce._invTransform)(me,be);me=Qt[0],be=Qt[1],Ae=_e(me,be),se.moveFn=Le,se.doneFn=Ye,u(K)},Q.vangles&&!T.isFullCircle(Q.sectorInRad)&&(se.prepFn=T.noop,M(m.select(ae),null)),d.init(se)},Y.isPtInside=function(ce){if(this.isSmith)return!0;var Q=this.sectorInRad,K=this.vangles,U=this.angularAxis.c2g(ce.theta),H=this.radialAxis,q=H.c2l(ce.r),re=H._rl,j=K?L.isPtInsidePolygon:T.isPtInsideSector;return j(q,U,re,Q,K)},Y.pathArc=function(ce){var Q=this.sectorInRad,K=this.vangles,U=K?L.pathPolygon:T.pathArc;return U(ce,Q[0],Q[1],K)},Y.pathSector=function(ce){var Q=this.sectorInRad,K=this.vangles,U=K?L.pathPolygon:T.pathSector;return U(ce,Q[0],Q[1],K)},Y.pathAnnulus=function(ce,Q){var K=this.sectorInRad,U=this.vangles,H=U?L.pathPolygonAnnulus:T.pathAnnulus;return H(ce,Q,K[0],K[1],U)},Y.pathSubplot=function(){var ce=this.innerRadius,Q=this.radius;return ce?this.pathAnnulus(ce,Q):this.pathSector(Q)},Y.fillViewInitialKey=function(ce,Q){ce in this.viewInitial||(this.viewInitial[ce]=Q)};function ee(ce){var Q=ce.ticks+String(ce.ticklen)+String(ce.showticklabels);return"side"in ce&&(Q+=ce.side),Q}function Z(ce){var Q=ce[0],K=ce[1],U=K-Q,H=R(Q,360),q=H+U,re=Math.cos(N(H)),j=Math.sin(N(H)),$=Math.cos(N(q)),ie=Math.sin(N(q)),oe,ae,se,_e;return H<=90&&q>=90||H>90&&q>=450?_e=1:j<=0&&ie<=0?_e=0:_e=Math.max(j,ie),H<=180&&q>=180||H>180&&q>=540?oe=-1:re>=0&&$>=0?oe=0:oe=Math.min(re,$),H<=270&&q>=270||H>270&&q>=630?ae=-1:j>=0&&ie>=0?ae=0:ae=Math.min(j,ie),q>=360?se=1:re<=0&&$<=0?se=0:se=Math.max(re,$),[oe,ae,se,_e]}function X(ce,Q){var K=function(H){return T.angleDist(ce,H)},U=T.findIndexOfMin(Q,K);return Q[U]}function ne(ce,Q,K){return Q?(ce.attr("display",null),ce.attr(K)):ce&&ce.attr("display","none"),ce}},{"../../components/color":367,"../../components/dragelement":386,"../../components/drawing":389,"../../components/fx":407,"../../components/selections":455,"../../components/titles":476,"../../constants/alignment":483,"../../lib":515,"../../lib/clear_gl_canvases":499,"../../lib/setcursor":536,"../../plot_api/subroutines":556,"../../plots/cartesian/axes":566,"../../registry":647,"../cartesian/autorange":565,"../cartesian/dragbox":575,"../cartesian/set_convert":585,"../plots":628,"../smith/helpers":637,"./constants":629,"./helpers":630,"./set_convert":635,"@plotly/d3":58,tinycolor2:313}],635:[function(t,B,V){var m=t("../../lib"),c=t("../cartesian/set_convert"),A=m.deg2rad,T=m.rad2deg;B.exports=function(v,s,o){switch(c(v,o),v._id){case"x":case"radialaxis":e(v,s);break;case"angularaxis":n(v,s);break}};function e(r,v){var s=v._subplot;r.setGeometry=function(){var o=r._rl[0],b=r._rl[1],g=s.innerRadius,d=(s.radius-g)/(b-o),f=g/d,y=o>b?function(l){return l<=0}:function(l){return l>=0};r.c2g=function(l){var x=r.c2l(l)-o;return(y(x)?x:0)+f},r.g2c=function(l){return r.l2c(l+o-f)},r.g2p=function(l){return l*d},r.c2p=function(l){return r.g2p(r.c2g(l))}}}function a(r,v){return v==="degrees"?A(r):r}function i(r,v){return v==="degrees"?T(r):r}function n(r,v){var s=r.type;if(s==="linear"){var o=r.d2c,b=r.c2d;r.d2c=function(g,d){return a(o(g),d)},r.c2d=function(g,d){return b(i(g,d))}}r.makeCalcdata=function(g,d){var f=g[d],y=g._length,l,x,u=function(h){return r.d2c(h,g.thetaunit)};if(f){if(m.isTypedArray(f)&&s==="linear"){if(y===f.length)return f;if(f.subarray)return f.subarray(0,y)}for(l=new Array(y),x=0;x<y;x++)l[x]=u(f[x])}else{var M=d+"0",_="d"+d,p=M in g?u(g[M]):0,w=g[_]?u(g[_]):(r.period||2*Math.PI)/y;for(l=new Array(y),x=0;x<y;x++)l[x]=p+x*w}return l},r.setGeometry=function(){var g=v.sector,d=g.map(A),f={clockwise:-1,counterclockwise:1}[r.direction],y=A(r.rotation),l=function(L){return f*L+y},x=function(L){return(L-y)/f},u,M,_,p;switch(s){case"linear":M=u=m.identity,p=A,_=T,r.range=m.isFullCircle(d)?[g[0],g[0]+360]:d.map(x).map(T);break;case"category":var w=r._categories.length,h=r.period?Math.max(r.period,w):w;h===0&&(h=1),M=p=function(L){return L*2*Math.PI/h},u=_=function(L){return L*h/Math.PI/2},r.range=[0,h];break}r.c2g=function(L){return l(M(L))},r.g2c=function(L){return u(x(L))},r.t2g=function(L){return l(p(L))},r.g2t=function(L){return _(x(L))}}}},{"../../lib":515,"../cartesian/set_convert":585}],636:[function(t,B,V){B.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}},{}],637:[function(t,B,V){function m(i){return i<0?-1:i>0?1:0}function c(i){var n=i[0],r=i[1];if(!isFinite(n)||!isFinite(r))return[1,0];var v=(n+1)*(n+1)+r*r;return[(n*n+r*r-1)/v,2*r/v]}function A(i,n){var r=n[0],v=n[1];return[r*i.radius+i.cx,-v*i.radius+i.cy]}function T(i,n){return n*i.radius}function e(i,n,r,v){var s=A(i,c([r,n])),o=s[0],b=s[1],g=A(i,c([v,n])),d=g[0],f=g[1];if(n===0)return["M"+o+","+b,"L"+d+","+f].join(" ");var y=T(i,1/Math.abs(n));return["M"+o+","+b,"A"+y+","+y+" 0 0,"+(n<0?1:0)+" "+d+","+f].join(" ")}function a(i,n,r,v){var s=T(i,1/(n+1)),o=A(i,c([n,r])),b=o[0],g=o[1],d=A(i,c([n,v])),f=d[0],y=d[1];if(m(r)!==m(v)){var l=A(i,c([n,0])),x=l[0],u=l[1];return["M"+b+","+g,"A"+s+","+s+" 0 0,"+(0<r?0:1)+" "+x+","+u,"A"+s+","+s+" 0 0,"+(v<0?0:1)+f+","+y].join(" ")}return["M"+b+","+g,"A"+s+","+s+" 0 0,"+(v<r?0:1)+" "+f+","+y].join(" ")}B.exports={smith:c,reactanceArc:e,resistanceArc:a,smithTransform:A}},{}],638:[function(t,B,V){var m=t("../get_data").getSubplotCalcData,c=t("../../lib").counterRegex,A=t("../polar/polar"),T=t("./constants"),e=T.attr,a=T.name,i=c(a),n={};n[e]={valType:"subplotid",dflt:a,editType:"calc"};function r(s){for(var o=s._fullLayout,b=s.calcdata,g=o._subplots[a],d=0;d<g.length;d++){var f=g[d],y=m(b,a,f),l=o[f]._subplot;l||(l=A(s,f,!0),o[f]._subplot=l),l.plot(y,o,s._promises)}}function v(s,o,b,g){for(var d=g._subplots[a]||[],f=0;f<d.length;f++){var y=d[f],l=g[y]._subplot;if(!o[y]&&!!l){l.framework.remove();for(var x in l.clipPaths)l.clipPaths[x].remove()}}}B.exports={attr:e,name:a,idRoot:a,idRegex:i,attrRegex:i,attributes:n,layoutAttributes:t("./layout_attributes"),supplyLayoutDefaults:t("./layout_defaults"),plot:r,clean:v,toSVG:t("../cartesian").toSVG}},{"../../lib":515,"../cartesian":578,"../get_data":602,"../polar/polar":634,"./constants":636,"./layout_attributes":639,"./layout_defaults":640}],639:[function(t,B,V){var m=t("../../components/color/attributes"),c=t("../cartesian/layout_attributes"),A=t("../domain").attributes,T=t("../../lib").extendFlat,e=t("../../plot_api/edit_types").overrideAll,a=e({color:c.color,showline:T({},c.showline,{dflt:!0}),linecolor:c.linecolor,linewidth:c.linewidth,showgrid:T({},c.showgrid,{dflt:!0}),gridcolor:c.gridcolor,gridwidth:c.gridwidth,griddash:c.griddash},"plot","from-root"),i=e({ticklen:c.ticklen,tickwidth:T({},c.tickwidth,{dflt:2}),tickcolor:c.tickcolor,showticklabels:c.showticklabels,showtickprefix:c.showtickprefix,tickprefix:c.tickprefix,showticksuffix:c.showticksuffix,ticksuffix:c.ticksuffix,tickfont:c.tickfont,tickformat:c.tickformat,hoverformat:c.hoverformat,layer:c.layer},"plot","from-root"),n=T({visible:T({},c.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot"},tickangle:T({},c.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},editType:"calc"},a,i),r=T({visible:T({},c.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot"},ticks:c.ticks,editType:"calc"},a,i);B.exports={domain:A({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:m.background},realaxis:n,imaginaryaxis:r,editType:"calc"}},{"../../components/color/attributes":366,"../../lib":515,"../../plot_api/edit_types":548,"../cartesian/layout_attributes":579,"../domain":593}],640:[function(t,B,V){var m=t("../../lib"),c=t("../../components/color"),A=t("../../plot_api/plot_template"),T=t("../subplot_defaults"),e=t("../get_data").getSubplotData,a=t("../cartesian/prefix_suffix_defaults"),i=t("../cartesian/tick_label_defaults"),n=t("../cartesian/line_grid_defaults"),r=t("../cartesian/set_convert"),v=t("./layout_attributes"),s=t("./constants"),o=s.axisNames,b=d(function(f){return f.slice().reverse().map(function(y){return-y}).concat([0]).concat(f)},String);function g(f,y,l,x){var u=l("bgcolor");x.bgColor=c.combine(u,x.paper_bgcolor);var M=e(x.fullData,s.name,x.id),_=x.layoutOut,p;function w(Y,ee){return l(p+"."+Y,ee)}for(var h=0;h<o.length;h++){p=o[h],m.isPlainObject(f[p])||(f[p]={});var L=f[p],S=A.newContainer(y,p);S._id=S._name=p,S._attr=x.id+"."+p,S._traceIndices=M.map(function(Y){return Y._expandedIndex});var E=w("visible");if(S.type="linear",r(S,_),a(L,S,w,S.type),E){var P=p==="realaxis";if(P&&w("side"),P)w("tickvals");else{var F=b(y.realaxis.tickvals||v.realaxis.tickvals.dflt);w("tickvals",F)}var I,D,R,N,z=x.font||{};E&&(I=w("color"),D=I===L.color?I:z.color,R=z.size,N=z.family),i(L,S,w,S.type,{noTicklabelstep:!0,noAng:!P,noExp:!0,font:{color:D,size:R,family:N}}),m.coerce2(f,y,v,p+".ticklen"),m.coerce2(f,y,v,p+".tickwidth"),m.coerce2(f,y,v,p+".tickcolor",y.color);var G=w("ticks");G||(delete y[p].ticklen,delete y[p].tickwidth,delete y[p].tickcolor),n(L,S,w,{dfltColor:I,bgColor:x.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:v[p]}),w("layer")}w("hoverformat"),delete S.type,S._input=L}}B.exports=function(y,l,x){T(y,l,x,{noUirevision:!0,type:s.name,attributes:v,handleDefaults:g,font:l.font,paper_bgcolor:l.paper_bgcolor,fullData:x,layoutOut:l})};function d(f,y){var l={};return function(x){var u=y?y(x):x;if(u in l)return l[u];var M=f(x);return l[u]=M,M}}},{"../../components/color":367,"../../lib":515,"../../plot_api/plot_template":555,"../cartesian/line_grid_defaults":581,"../cartesian/prefix_suffix_defaults":583,"../cartesian/set_convert":585,"../cartesian/tick_label_defaults":587,"../get_data":602,"../subplot_defaults":641,"./constants":636,"./layout_attributes":639}],641:[function(t,B,V){var m=t("../lib"),c=t("../plot_api/plot_template"),A=t("./domain").defaults;B.exports=function(e,a,i,n){var r=n.type,v=n.attributes,s=n.handleDefaults,o=n.partition||"x",b=a._subplots[r],g=b.length,d=g&&b[0].replace(/\d+$/,""),f,y;function l(_,p){return m.coerce(f,y,v,_,p)}for(var x=0;x<g;x++){var u=b[x];e[u]?f=e[u]:f=e[u]={},y=c.newContainer(a,u,d),n.noUirevision||l("uirevision",a.uirevision);var M={};M[o]=[x/g,(x+1)/g],A(y,a,l,M),n.id=u,s(f,y,l,n)}}},{"../lib":515,"../plot_api/plot_template":555,"./domain":593}],642:[function(t,B,V){var m=t("../constants/docs");m.FORMAT_LINK,m.DATE_FORMAT_LINK;function c(A){var T=A.description?" "+A.description:"",e=A.keys||[];if(e.length>0){for(var a=[],i=0;i<e.length;i++)a[i]="`"+e[i]+"`";T=T+"Finally, the template string has access to ",e.length===1?T="variable "+a[0]:T="variables "+a.slice(0,-1).join(", ")+" and "+a.slice(-1)+"."}return T}V.hovertemplateAttrs=function(A,T){A=A||{},T=T||{},c(T);var e={valType:"string",dflt:"",editType:A.editType||"none"};return A.arrayOk!==!1&&(e.arrayOk=!0),e},V.texttemplateAttrs=function(A,T){A=A||{},T=T||{},c(T);var e={valType:"string",dflt:"",editType:A.editType||"calc"};return A.arrayOk!==!1&&(e.arrayOk=!0),e}},{"../constants/docs":486}],643:[function(t,B,V){var m=t("./ternary"),c=t("../../plots/get_data").getSubplotCalcData,A=t("../../lib").counterRegex,T="ternary";V.name=T;var e=V.attr="subplot";V.idRoot=T,V.idRegex=V.attrRegex=A(T);var a=V.attributes={};a[e]={valType:"subplotid",dflt:"ternary",editType:"calc"},V.layoutAttributes=t("./layout_attributes"),V.supplyLayoutDefaults=t("./layout_defaults"),V.plot=function(n){for(var r=n._fullLayout,v=n.calcdata,s=r._subplots[T],o=0;o<s.length;o++){var b=s[o],g=c(v,T,b),d=r[b]._subplot;d||(d=new m({id:b,graphDiv:n,container:r._ternarylayer.node()},r),r[b]._subplot=d),d.plot(g,r,n._promises)}},V.clean=function(i,n,r,v){for(var s=v._subplots[T]||[],o=0;o<s.length;o++){var b=s[o],g=v[b]._subplot;!n[b]&&!!g&&(g.plotContainer.remove(),g.clipDef.remove(),g.clipDefRelative.remove(),g.layers["a-title"].remove(),g.layers["b-title"].remove(),g.layers["c-title"].remove())}}},{"../../lib":515,"../../plots/get_data":602,"./layout_attributes":644,"./layout_defaults":645,"./ternary":646}],644:[function(t,B,V){var m=t("../../components/color/attributes"),c=t("../domain").attributes,A=t("../cartesian/layout_attributes"),T=t("../../plot_api/edit_types").overrideAll,e=t("../../lib/extend").extendFlat,a={title:{text:A.title.text,font:A.title.font},color:A.color,tickmode:A.tickmode,nticks:e({},A.nticks,{dflt:6,min:1}),tick0:A.tick0,dtick:A.dtick,tickvals:A.tickvals,ticktext:A.ticktext,ticks:A.ticks,ticklen:A.ticklen,tickwidth:A.tickwidth,tickcolor:A.tickcolor,ticklabelstep:A.ticklabelstep,showticklabels:A.showticklabels,showtickprefix:A.showtickprefix,tickprefix:A.tickprefix,showticksuffix:A.showticksuffix,ticksuffix:A.ticksuffix,showexponent:A.showexponent,exponentformat:A.exponentformat,minexponent:A.minexponent,separatethousands:A.separatethousands,tickfont:A.tickfont,tickangle:A.tickangle,tickformat:A.tickformat,tickformatstops:A.tickformatstops,hoverformat:A.hoverformat,showline:e({},A.showline,{dflt:!0}),linecolor:A.linecolor,linewidth:A.linewidth,showgrid:e({},A.showgrid,{dflt:!0}),gridcolor:A.gridcolor,gridwidth:A.gridwidth,griddash:A.griddash,layer:A.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:A._deprecated.title,titlefont:A._deprecated.titlefont}},i=B.exports=T({domain:c({name:"ternary"}),bgcolor:{valType:"color",dflt:m.background},sum:{valType:"number",dflt:1,min:0},aaxis:a,baxis:a,caxis:a},"plot","from-root");i.uirevision={valType:"any",editType:"none"},i.aaxis.uirevision=i.baxis.uirevision=i.caxis.uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":366,"../../lib/extend":505,"../../plot_api/edit_types":548,"../cartesian/layout_attributes":579,"../domain":593}],645:[function(t,B,V){var m=t("../../components/color"),c=t("../../plot_api/plot_template"),A=t("../../lib"),T=t("../subplot_defaults"),e=t("../cartesian/tick_label_defaults"),a=t("../cartesian/prefix_suffix_defaults"),i=t("../cartesian/tick_mark_defaults"),n=t("../cartesian/tick_value_defaults"),r=t("../cartesian/line_grid_defaults"),v=t("./layout_attributes"),s=["aaxis","baxis","caxis"];B.exports=function(d,f,y){T(d,f,y,{type:"ternary",attributes:v,handleDefaults:o,font:f.font,paper_bgcolor:f.paper_bgcolor})};function o(g,d,f,y){var l=f("bgcolor"),x=f("sum");y.bgColor=m.combine(l,y.paper_bgcolor);for(var u,M,_,p=0;p<s.length;p++)u=s[p],M=g[u]||{},_=c.newContainer(d,u),_._name=u,b(M,_,y,d);var w=d.aaxis,h=d.baxis,L=d.caxis;w.min+h.min+L.min>=x&&(w.min=0,h.min=0,L.min=0,g.aaxis&&delete g.aaxis.min,g.baxis&&delete g.baxis.min,g.caxis&&delete g.caxis.min)}function b(g,d,f,y){var l=v[d._name];function x(S,E){return A.coerce(g,d,l,S,E)}x("uirevision",y.uirevision),d.type="linear";var u=x("color"),M=u!==l.color.dflt?u:f.font.color,_=d._name,p=_.charAt(0).toUpperCase(),w="Component "+p,h=x("title.text",w);d._hovertitle=h===w?h:p,A.coerceFont(x,"title.font",{family:f.font.family,size:A.bigFont(f.font.size),color:M}),x("min"),n(g,d,x,"linear"),a(g,d,x,"linear"),e(g,d,x,"linear"),i(g,d,x,{outerTicks:!0});var L=x("showticklabels");L&&(A.coerceFont(x,"tickfont",{family:f.font.family,size:f.font.size,color:M}),x("tickangle"),x("tickformat")),r(g,d,x,{dfltColor:u,bgColor:f.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:l}),x("hoverformat"),x("layer")}},{"../../components/color":367,"../../lib":515,"../../plot_api/plot_template":555,"../cartesian/line_grid_defaults":581,"../cartesian/prefix_suffix_defaults":583,"../cartesian/tick_label_defaults":587,"../cartesian/tick_mark_defaults":588,"../cartesian/tick_value_defaults":589,"../subplot_defaults":641,"./layout_attributes":644}],646:[function(t,B,V){var m=t("@plotly/d3"),c=t("tinycolor2"),A=t("../../registry"),T=t("../../lib"),e=T.strTranslate,a=T._,i=t("../../components/color"),n=t("../../components/drawing"),r=t("../cartesian/set_convert"),v=t("../../lib/extend").extendFlat,s=t("../plots"),o=t("../cartesian/axes"),b=t("../../components/dragelement"),g=t("../../components/fx"),d=t("../../components/dragelement/helpers"),f=d.freeMode,y=d.rectMode,l=t("../../components/titles"),x=t("../../components/selections").prepSelect,u=t("../../components/selections").selectOnClick,M=t("../../components/selections").clearOutline,_=t("../../components/selections").clearSelectionsCache,p=t("../cartesian/constants");function w(z,G){this.id=z.id,this.graphDiv=z.graphDiv,this.init(G),this.makeFramework(G),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}B.exports=w;var h=w.prototype;h.init=function(z){this.container=z._ternarylayer,this.defs=z._defs,this.layoutId=z._uid,this.traceHash={},this.layers={}},h.plot=function(z,G){var Y=this,ee=G[Y.id],Z=G._size;Y._hasClipOnAxisFalse=!1;for(var X=0;X<z.length;X++){var ne=z[X][0].trace;if(ne.cliponaxis===!1){Y._hasClipOnAxisFalse=!0;break}}Y.updateLayers(ee),Y.adjustLayout(ee,Z),s.generalUpdatePerTraceModule(Y.graphDiv,Y,z,ee),Y.layers.plotbg.select("path").call(i.fill,ee.bgcolor)},h.makeFramework=function(z){var G=this,Y=G.graphDiv,ee=z[G.id],Z=G.clipId="clip"+G.layoutId+G.id,X=G.clipIdRelative="clip-relative"+G.layoutId+G.id;G.clipDef=T.ensureSingleById(z._clips,"clipPath",Z,function(ne){ne.append("path").attr("d","M0,0Z")}),G.clipDefRelative=T.ensureSingleById(z._clips,"clipPath",X,function(ne){ne.append("path").attr("d","M0,0Z")}),G.plotContainer=T.ensureSingle(G.container,"g",G.id),G.updateLayers(ee),n.setClipUrl(G.layers.backplot,Z,Y),n.setClipUrl(G.layers.grids,Z,Y)},h.updateLayers=function(z){var G=this,Y=G.layers,ee=["draglayer","plotbg","backplot","grids"];z.aaxis.layer==="below traces"&&ee.push("aaxis","aline"),z.baxis.layer==="below traces"&&ee.push("baxis","bline"),z.caxis.layer==="below traces"&&ee.push("caxis","cline"),ee.push("frontplot"),z.aaxis.layer==="above traces"&&ee.push("aaxis","aline"),z.baxis.layer==="above traces"&&ee.push("baxis","bline"),z.caxis.layer==="above traces"&&ee.push("caxis","cline");var Z=G.plotContainer.selectAll("g.toplevel").data(ee,String),X=["agrid","bgrid","cgrid"];Z.enter().append("g").attr("class",function(ne){return"toplevel "+ne}).each(function(ne){var ce=m.select(this);Y[ne]=ce,ne==="frontplot"?ce.append("g").classed("scatterlayer",!0):ne==="backplot"?ce.append("g").classed("maplayer",!0):ne==="plotbg"?ce.append("path").attr("d","M0,0Z"):ne==="aline"||ne==="bline"||ne==="cline"?ce.append("path"):ne==="grids"&&X.forEach(function(Q){Y[Q]=ce.append("g").classed("grid "+Q,!0)})}),Z.order()};var L=Math.sqrt(4/3);h.adjustLayout=function(z,G){var Y=this,ee=z.domain,Z=(ee.x[0]+ee.x[1])/2,X=(ee.y[0]+ee.y[1])/2,ne=ee.x[1]-ee.x[0],ce=ee.y[1]-ee.y[0],Q=ne*G.w,K=ce*G.h,U=z.sum,H=z.aaxis.min,q=z.baxis.min,re=z.caxis.min,j,$,ie,oe,ae,se;Q>L*K?(oe=K,ie=oe*L):(ie=Q,oe=ie/L),ae=ne*ie/Q,se=ce*oe/K,j=G.l+G.w*Z-ie/2,$=G.t+G.h*(1-X)-oe/2,Y.x0=j,Y.y0=$,Y.w=ie,Y.h=oe,Y.sum=U,Y.xaxis={type:"linear",range:[H+2*re-U,U-H-2*q],domain:[Z-ae/2,Z+ae/2],_id:"x"},r(Y.xaxis,Y.graphDiv._fullLayout),Y.xaxis.setScale(),Y.xaxis.isPtWithinRange=function(Le){return Le.a>=Y.aaxis.range[0]&&Le.a<=Y.aaxis.range[1]&&Le.b>=Y.baxis.range[1]&&Le.b<=Y.baxis.range[0]&&Le.c>=Y.caxis.range[1]&&Le.c<=Y.caxis.range[0]},Y.yaxis={type:"linear",range:[H,U-q-re],domain:[X-se/2,X+se/2],_id:"y"},r(Y.yaxis,Y.graphDiv._fullLayout),Y.yaxis.setScale(),Y.yaxis.isPtWithinRange=function(){return!0};var _e=Y.yaxis.domain[0],ue=Y.aaxis=v({},z.aaxis,{range:[H,U-q-re],side:"left",tickangle:(+z.aaxis.tickangle||0)-30,domain:[_e,_e+se*L],anchor:"free",position:0,_id:"y",_length:ie});r(ue,Y.graphDiv._fullLayout),ue.setScale();var ye=Y.baxis=v({},z.baxis,{range:[U-H-re,q],side:"bottom",domain:Y.xaxis.domain,anchor:"free",position:0,_id:"x",_length:ie});r(ye,Y.graphDiv._fullLayout),ye.setScale();var xe=Y.caxis=v({},z.caxis,{range:[U-H-q,re],side:"right",tickangle:(+z.caxis.tickangle||0)+30,domain:[_e,_e+se*L],anchor:"free",position:0,_id:"y",_length:ie});r(xe,Y.graphDiv._fullLayout),xe.setScale();var me="M"+j+","+($+oe)+"h"+ie+"l-"+ie/2+",-"+oe+"Z";Y.clipDef.select("path").attr("d",me),Y.layers.plotbg.select("path").attr("d",me);var be="M0,"+oe+"h"+ie+"l-"+ie/2+",-"+oe+"Z";Y.clipDefRelative.select("path").attr("d",be);var ke=e(j,$);Y.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",ke),Y.clipDefRelative.select("path").attr("transform",null);var De=e(j-ye._offset,$+oe);Y.layers.baxis.attr("transform",De),Y.layers.bgrid.attr("transform",De);var Ve=e(j+ie/2,$)+"rotate(30)"+e(0,-ue._offset);Y.layers.aaxis.attr("transform",Ve),Y.layers.agrid.attr("transform",Ve);var Ae=e(j+ie/2,$)+"rotate(-30)"+e(0,-xe._offset);Y.layers.caxis.attr("transform",Ae),Y.layers.cgrid.attr("transform",Ae),Y.drawAxes(!0),Y.layers.aline.select("path").attr("d",ue.showline?"M"+j+","+($+oe)+"l"+ie/2+",-"+oe:"M0,0").call(i.stroke,ue.linecolor||"#000").style("stroke-width",(ue.linewidth||0)+"px"),Y.layers.bline.select("path").attr("d",ye.showline?"M"+j+","+($+oe)+"h"+ie:"M0,0").call(i.stroke,ye.linecolor||"#000").style("stroke-width",(ye.linewidth||0)+"px"),Y.layers.cline.select("path").attr("d",xe.showline?"M"+(j+ie/2)+","+$+"l"+ie/2+","+oe:"M0,0").call(i.stroke,xe.linecolor||"#000").style("stroke-width",(xe.linewidth||0)+"px"),Y.graphDiv._context.staticPlot||Y.initInteractions(),n.setClipUrl(Y.layers.frontplot,Y._hasClipOnAxisFalse?null:Y.clipId,Y.graphDiv)},h.drawAxes=function(z){var G=this,Y=G.graphDiv,ee=G.id.substr(7)+"title",Z=G.layers,X=G.aaxis,ne=G.baxis,ce=G.caxis;if(G.drawAx(X),G.drawAx(ne),G.drawAx(ce),z){var Q=Math.max(X.showticklabels?X.tickfont.size/2:0,(ce.showticklabels?ce.tickfont.size*.75:0)+(ce.ticks==="outside"?ce.ticklen*.87:0)),K=(ne.showticklabels?ne.tickfont.size:0)+(ne.ticks==="outside"?ne.ticklen:0)+3;Z["a-title"]=l.draw(Y,"a"+ee,{propContainer:X,propName:G.id+".aaxis.title",placeholder:a(Y,"Click to enter Component A title"),attributes:{x:G.x0+G.w/2,y:G.y0-X.title.font.size/3-Q,"text-anchor":"middle"}}),Z["b-title"]=l.draw(Y,"b"+ee,{propContainer:ne,propName:G.id+".baxis.title",placeholder:a(Y,"Click to enter Component B title"),attributes:{x:G.x0-K,y:G.y0+G.h+ne.title.font.size*.83+K,"text-anchor":"middle"}}),Z["c-title"]=l.draw(Y,"c"+ee,{propContainer:ce,propName:G.id+".caxis.title",placeholder:a(Y,"Click to enter Component C title"),attributes:{x:G.x0+G.w+K,y:G.y0+G.h+ce.title.font.size*.83+K,"text-anchor":"middle"}})}},h.drawAx=function(z){var G=this,Y=G.graphDiv,ee=z._name,Z=ee.charAt(0),X=z._id,ne=G.layers[ee],ce=30,Q=Z+"tickLayout",K=S(z);G[Q]!==K&&(ne.selectAll("."+X+"tick").remove(),G[Q]=K),z.setScale();var U=o.calcTicks(z),H=o.clipEnds(z,U),q=o.makeTransTickFn(z),re=o.getTickSigns(z)[2],j=T.deg2rad(ce),$=re*(z.linewidth||1)/2,ie=re*z.ticklen,oe=G.w,ae=G.h,se=Z==="b"?"M0,"+$+"l"+Math.sin(j)*ie+","+Math.cos(j)*ie:"M"+$+",0l"+Math.cos(j)*ie+","+-Math.sin(j)*ie,_e={a:"M0,0l"+ae+",-"+oe/2,b:"M0,0l-"+oe/2+",-"+ae,c:"M0,0l-"+ae+","+oe/2}[Z];o.drawTicks(Y,z,{vals:z.ticks==="inside"?H:U,layer:ne,path:se,transFn:q,crisp:!1}),o.drawGrid(Y,z,{vals:H,layer:G.layers[Z+"grid"],path:_e,transFn:q,crisp:!1}),o.drawLabels(Y,z,{vals:U,layer:ne,transFn:q,labelFns:o.makeLabelFns(z,0,ce)})};function S(z){return z.ticks+String(z.ticklen)+String(z.showticklabels)}var E=p.MINZOOM/2+.87,P="m-0.87,.5h"+E+"v3h-"+(E+5.2)+"l"+(E/2+2.6)+",-"+(E*.87+4.5)+"l2.6,1.5l-"+E/2+","+E*.87+"Z",F="m0.87,.5h-"+E+"v3h"+(E+5.2)+"l-"+(E/2+2.6)+",-"+(E*.87+4.5)+"l-2.6,1.5l"+E/2+","+E*.87+"Z",I="m0,1l"+E/2+","+E*.87+"l2.6,-1.5l-"+(E/2+2.6)+",-"+(E*.87+4.5)+"l-"+(E/2+2.6)+","+(E*.87+4.5)+"l2.6,1.5l"+E/2+",-"+E*.87+"Z",D="m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2Z",R=!0;h.clearOutline=function(){_(this.dragOptions),M(this.dragOptions.gd)},h.initInteractions=function(){var z=this,G=z.layers.plotbg.select("path").node(),Y=z.graphDiv,ee=Y._fullLayout._zoomlayer,Z,X;this.dragOptions={element:G,gd:Y,plotinfo:{id:z.id,domain:Y._fullLayout[z.id].domain,xaxis:z.xaxis,yaxis:z.yaxis},subplot:z.id,prepFn:function(De,Ve,Ae){z.dragOptions.xaxes=[z.xaxis],z.dragOptions.yaxes=[z.yaxis],Z=Y._fullLayout._invScaleX,X=Y._fullLayout._invScaleY;var Le=z.dragOptions.dragmode=Y._fullLayout.dragmode;f(Le)?z.dragOptions.minDrag=1:z.dragOptions.minDrag=void 0,Le==="zoom"?(z.dragOptions.moveFn=ye,z.dragOptions.clickFn=oe,z.dragOptions.doneFn=xe,ae(De,Ve,Ae)):Le==="pan"?(z.dragOptions.moveFn=be,z.dragOptions.clickFn=oe,z.dragOptions.doneFn=ke,me(),z.clearOutline(Y)):(y(Le)||f(Le))&&x(De,Ve,Ae,z.dragOptions,Le)}};var ne,ce,Q,K,U,H,q,re,j,$;function ie(De){var Ve={};return Ve[z.id+".aaxis.min"]=De.a,Ve[z.id+".baxis.min"]=De.b,Ve[z.id+".caxis.min"]=De.c,Ve}function oe(De,Ve){var Ae=Y._fullLayout.clickmode;N(Y),De===2&&(Y.emit("plotly_doubleclick",null),A.call("_guiRelayout",Y,ie({a:0,b:0,c:0}))),Ae.indexOf("select")>-1&&De===1&&u(Ve,Y,[z.xaxis],[z.yaxis],z.id,z.dragOptions),Ae.indexOf("event")>-1&&g.click(Y,Ve,z.id)}function ae(De,Ve,Ae){var Le=G.getBoundingClientRect();ne=Ve-Le.left,ce=Ae-Le.top,Y._fullLayout._calcInverseTransform(Y);var je=Y._fullLayout._invTransform,Ye=T.apply3DTransform(je)(ne,ce);ne=Ye[0],ce=Ye[1],Q={a:z.aaxis.range[0],b:z.baxis.range[1],c:z.caxis.range[1]},U=Q,K=z.aaxis.range[1]-Q.a,H=c(z.graphDiv._fullLayout[z.id].bgcolor).getLuminance(),q="M0,"+z.h+"L"+z.w/2+", 0L"+z.w+","+z.h+"Z",re=!1,j=ee.append("path").attr("class","zoombox").attr("transform",e(z.x0,z.y0)).style({fill:H>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",q),$=ee.append("path").attr("class","zoombox-corners").attr("transform",e(z.x0,z.y0)).style({fill:i.background,stroke:i.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),z.clearOutline(Y)}function se(De,Ve){return 1-Ve/z.h}function _e(De,Ve){return 1-(De+(z.h-Ve)/Math.sqrt(3))/z.w}function ue(De,Ve){return(De-(z.h-Ve)/Math.sqrt(3))/z.w}function ye(De,Ve){var Ae=ne+De*Z,Le=ce+Ve*X,je=Math.max(0,Math.min(1,se(ne,ce),se(Ae,Le))),Ye=Math.max(0,Math.min(1,_e(ne,ce),_e(Ae,Le))),ze=Math.max(0,Math.min(1,ue(ne,ce),ue(Ae,Le))),Ie=(je/2+ze)*z.w,We=(1-je/2-Ye)*z.w,pt=(Ie+We)/2,Ft=We-Ie,Qt=(1-je)*z.h,zt=Qt-Ft/L;Ft<p.MINZOOM?(U=Q,j.attr("d",q),$.attr("d","M0,0Z")):(U={a:Q.a+je*K,b:Q.b+Ye*K,c:Q.c+ze*K},j.attr("d",q+"M"+Ie+","+Qt+"H"+We+"L"+pt+","+zt+"L"+Ie+","+Qt+"Z"),$.attr("d","M"+ne+","+ce+D+"M"+Ie+","+Qt+P+"M"+We+","+Qt+F+"M"+pt+","+zt+I)),re||(j.transition().style("fill",H>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),$.transition().style("opacity",1).duration(200),re=!0),Y.emit("plotly_relayouting",ie(U))}function xe(){N(Y),U!==Q&&(A.call("_guiRelayout",Y,ie(U)),R&&Y.data&&Y._context.showTips&&(T.notifier(a(Y,"Double-click to zoom back out"),"long"),R=!1))}function me(){Q={a:z.aaxis.range[0],b:z.baxis.range[1],c:z.caxis.range[1]},U=Q}function be(De,Ve){var Ae=De/z.xaxis._m,Le=Ve/z.yaxis._m;U={a:Q.a-Le,b:Q.b+(Ae+Le)/2,c:Q.c-(Ae-Le)/2};var je=[U.a,U.b,U.c].sort(T.sorterAsc),Ye={a:je.indexOf(U.a),b:je.indexOf(U.b),c:je.indexOf(U.c)};je[0]<0&&(je[1]+je[0]/2<0?(je[2]+=je[0]+je[1],je[0]=je[1]=0):(je[2]+=je[0]/2,je[1]+=je[0]/2,je[0]=0),U={a:je[Ye.a],b:je[Ye.b],c:je[Ye.c]},Ve=(Q.a-U.a)*z.yaxis._m,De=(Q.c-U.c-Q.b+U.b)*z.xaxis._m);var ze=e(z.x0+De,z.y0+Ve);z.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",ze);var Ie=e(-De,-Ve);z.clipDefRelative.select("path").attr("transform",Ie),z.aaxis.range=[U.a,z.sum-U.b-U.c],z.baxis.range=[z.sum-U.a-U.c,U.b],z.caxis.range=[z.sum-U.a-U.b,U.c],z.drawAxes(!1),z._hasClipOnAxisFalse&&z.plotContainer.select(".scatterlayer").selectAll(".trace").call(n.hideOutsideRangePoints,z),Y.emit("plotly_relayouting",ie(U))}function ke(){A.call("_guiRelayout",Y,ie(U))}G.onmousemove=function(De){g.hover(Y,De,z.id),Y._fullLayout._lasthover=G,Y._fullLayout._hoversubplot=z.id},G.onmouseout=function(De){Y._dragging||b.unhover(Y,De)},b.init(this.dragOptions)};function N(z){m.select(z).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}},{"../../components/color":367,"../../components/dragelement":386,"../../components/dragelement/helpers":385,"../../components/drawing":389,"../../components/fx":407,"../../components/selections":455,"../../components/titles":476,"../../lib":515,"../../lib/extend":505,"../../registry":647,"../cartesian/axes":566,"../cartesian/constants":573,"../cartesian/set_convert":585,"../plots":628,"@plotly/d3":58,tinycolor2:313}],647:[function(t,B,V){var m=t("./lib/loggers"),c=t("./lib/noop"),A=t("./lib/push_unique"),T=t("./lib/is_plain_object"),e=t("./lib/dom").addStyleRule,a=t("./lib/extend"),i=t("./plots/attributes"),n=t("./plots/layout_attributes"),r=a.extendFlat,v=a.extendDeepAll;V.modules={},V.allCategories={},V.allTypes=[],V.subplotsRegistry={},V.transformsRegistry={},V.componentsRegistry={},V.layoutArrayContainers=[],V.layoutArrayRegexes=[],V.traceLayoutAttributes={},V.localeRegistry={},V.apiMethodRegistry={},V.collectableSubplotTypes=null,V.register=function(_){if(V.collectableSubplotTypes=null,_)_&&!Array.isArray(_)&&(_=[_]);else throw new Error("No argument passed to Plotly.register.");for(var p=0;p<_.length;p++){var w=_[p];if(!w)throw new Error("Invalid module was attempted to be registered!");switch(w.moduleType){case"trace":s(w);break;case"transform":g(w);break;case"component":b(w);break;case"locale":d(w);break;case"apiMethod":var h=w.name;V.apiMethodRegistry[h]=w.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},V.getModule=function(M){var _=V.modules[u(M)];return _?_._module:!1},V.traceIs=function(M,_){if(M=u(M),M==="various")return!1;var p=V.modules[M];return p||(M&&m.log("Unrecognized trace type "+M+"."),p=V.modules[i.type.dflt]),!!p.categories[_]},V.getTransformIndices=function(M,_){for(var p=[],w=M.transforms||[],h=0;h<w.length;h++)w[h].type===_&&p.push(h);return p},V.hasTransform=function(M,_){for(var p=M.transforms||[],w=0;w<p.length;w++)if(p[w].type===_)return!0;return!1},V.getComponentMethod=function(M,_){var p=V.componentsRegistry[M];return p&&p[_]||c},V.call=function(){var M=arguments[0],_=[].slice.call(arguments,1);return V.apiMethodRegistry[M].apply(null,_)};function s(M){var _=M.name,p=M.categories,w=M.meta;if(V.modules[_]){m.log("Type "+_+" already registered");return}V.subplotsRegistry[M.basePlotModule.name]||o(M.basePlotModule);for(var h={},L=0;L<p.length;L++)h[p[L]]=!0,V.allCategories[p[L]]=!0;V.modules[_]={_module:M,categories:h},w&&Object.keys(w).length&&(V.modules[_].meta=w),V.allTypes.push(_);for(var S in V.componentsRegistry)y(S,_);M.layoutAttributes&&r(V.traceLayoutAttributes,M.layoutAttributes);var E=M.basePlotModule,P=E.name;if(P==="mapbox"){var F=E.constants.styleRules;for(var I in F)e(".js-plotly-plot .plotly .mapboxgl-"+I,F[I])}(P==="geo"||P==="mapbox")&&window.PlotlyGeoAssets===void 0&&(window.PlotlyGeoAssets={topojson:{}})}function o(M){var _=M.name;if(V.subplotsRegistry[_]){m.log("Plot type "+_+" already registered.");return}f(M),V.subplotsRegistry[_]=M;for(var p in V.componentsRegistry)x(p,M.name)}function b(M){if(typeof M.name!="string")throw new Error("Component module *name* must be a string.");var _=M.name;V.componentsRegistry[_]=M,M.layoutAttributes&&(M.layoutAttributes._isLinkedToArray&&A(V.layoutArrayContainers,_),f(M));for(var p in V.modules)y(_,p);for(var w in V.subplotsRegistry)x(_,w);for(var h in V.transformsRegistry)l(_,h);M.schema&&M.schema.layout&&v(n,M.schema.layout)}function g(M){if(typeof M.name!="string")throw new Error("Transform module *name* must be a string.");var _="Transform module "+M.name,p=typeof M.transform=="function",w=typeof M.calcTransform=="function";if(!p&&!w)throw new Error(_+" is missing a *transform* or *calcTransform* method.");p&&w&&m.log([_+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),T(M.attributes)||m.log(_+" registered without an *attributes* object."),typeof M.supplyDefaults!="function"&&m.log(_+" registered without a *supplyDefaults* method."),V.transformsRegistry[M.name]=M;for(var h in V.componentsRegistry)l(h,M.name)}function d(M){var _=M.name,p=_.split("-")[0],w=M.dictionary,h=M.format,L=w&&Object.keys(w).length,S=h&&Object.keys(h).length,E=V.localeRegistry,P=E[_];if(P||(E[_]=P={}),p!==_){var F=E[p];F||(E[p]=F={}),L&&F.dictionary===P.dictionary&&(F.dictionary=w),S&&F.format===P.format&&(F.format=h)}L&&(P.dictionary=w),S&&(P.format=h)}function f(M){if(M.layoutAttributes){var _=M.layoutAttributes._arrayAttrRegexps;if(_)for(var p=0;p<_.length;p++)A(V.layoutArrayRegexes,_[p])}}function y(M,_){var p=V.componentsRegistry[M].schema;if(!(!p||!p.traces)){var w=p.traces[_];w&&v(V.modules[_]._module.attributes,w)}}function l(M,_){var p=V.componentsRegistry[M].schema;if(!(!p||!p.transforms)){var w=p.transforms[_];w&&v(V.transformsRegistry[_].attributes,w)}}function x(M,_){var p=V.componentsRegistry[M].schema;if(!(!p||!p.subplots)){var w=V.subplotsRegistry[_],h=w.layoutAttributes,L=w.attr==="subplot"?w.name:w.attr;Array.isArray(L)&&(L=L[0]);var S=p.subplots[L];h&&S&&v(h,S)}}function u(M){return typeof M=="object"&&(M=M.type),M}},{"./lib/dom":503,"./lib/extend":505,"./lib/is_plain_object":516,"./lib/loggers":519,"./lib/noop":524,"./lib/push_unique":530,"./plots/attributes":562,"./plots/layout_attributes":619}],648:[function(t,B,V){var m=t("../registry"),c=t("../lib"),A=c.extendFlat,T=c.extendDeep;function e(i){var n;switch(i){case"themes__thumb":n={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":n={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:n={}}return n}function a(i){var n=["xaxis","yaxis","zaxis"];return n.indexOf(i.slice(0,5))>-1}B.exports=function(n,r){var v,s=n.data,o=n.layout,b=T([],s),g=T({},o,e(r.tileClass)),d=n._context||{};if(r.width&&(g.width=r.width),r.height&&(g.height=r.height),r.tileClass==="thumbnail"||r.tileClass==="themes__thumb"){g.annotations=[];var f=Object.keys(g);for(v=0;v<f.length;v++)a(f[v])&&(g[f[v]].title={text:""});for(v=0;v<b.length;v++){var y=b[v];y.showscale=!1,y.marker&&(y.marker.showscale=!1),m.traceIs(y,"pie-like")&&(y.textposition="none")}}if(Array.isArray(r.annotations))for(v=0;v<r.annotations.length;v++)g.annotations.push(r.annotations[v]);var l=Object.keys(g).filter(function(p){return p.match(/^scene\d*$/)});if(l.length){var x={};for(r.tileClass==="thumbnail"&&(x={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),v=0;v<l.length;v++){var u=g[l[v]];u.xaxis||(u.xaxis={}),u.yaxis||(u.yaxis={}),u.zaxis||(u.zaxis={}),A(u.xaxis,x),A(u.yaxis,x),A(u.zaxis,x),u._scene=null}}var M=document.createElement("div");r.tileClass&&(M.className=r.tileClass);var _={gd:M,td:M,layout:g,data:b,config:{staticPlot:r.staticPlot===void 0?!0:r.staticPlot,plotGlPixelRatio:r.plotGlPixelRatio===void 0?2:r.plotGlPixelRatio,displaylogo:r.displaylogo||!1,showLink:r.showLink||!1,showTips:r.showTips||!1,mapboxAccessToken:d.mapboxAccessToken}};return r.setBackground!=="transparent"&&(_.config.setBackground=r.setBackground||"opaque"),_.gd.defaultLayout=e(r.tileClass),_}},{"../lib":515,"../registry":647}],649:[function(t,B,V){var m=t("../lib"),c=t("../plot_api/to_image"),A=t("./filesaver"),T=t("./helpers");function e(a,i){var n;return m.isPlainObject(a)||(n=m.getGraphDiv(a)),i=i||{},i.format=i.format||"png",i.width=i.width||null,i.height=i.height||null,i.imageDataOnly=!0,new Promise(function(r,v){n&&n._snapshotInProgress&&v(new Error("Snapshotting already in progress.")),m.isIE()&&i.format!=="svg"&&v(new Error(T.MSG_IE_BAD_FORMAT)),n&&(n._snapshotInProgress=!0);var s=c(a,i),o=i.filename||a.fn||"newplot";o+="."+i.format.replace("-","."),s.then(function(b){return n&&(n._snapshotInProgress=!1),A(b,o,i.format)}).then(function(b){r(b)}).catch(function(b){n&&(n._snapshotInProgress=!1),v(b)})})}B.exports=e},{"../lib":515,"../plot_api/to_image":558,"./filesaver":650,"./helpers":651}],650:[function(t,B,V){var m=t("../lib"),c=t("./helpers");function A(T,e,a){var i=document.createElement("a"),n="download"in i,r=new Promise(function(v,s){var o,b;if(m.isIE())return o=c.createBlob(T,"svg"),window.navigator.msSaveBlob(o,e),o=null,v(e);if(n)return o=c.createBlob(T,a),b=c.createObjectURL(o),i.href=b,i.download=e,document.body.appendChild(i),i.click(),document.body.removeChild(i),c.revokeObjectURL(b),o=null,v(e);if(m.isSafari()){var g=a==="svg"?",":";base64,";return c.octetStream(g+encodeURIComponent(T)),v(e)}s(new Error("download error"))});return r}B.exports=A},{"../lib":515,"./helpers":651}],651:[function(t,B,V){var m=t("../registry");V.getDelay=function(T){return T._has&&(T._has("gl3d")||T._has("gl2d")||T._has("mapbox"))?500:0},V.getRedrawFunc=function(T){return function(){m.getComponentMethod("colorbar","draw")(T)}},V.encodeSVG=function(T){return"data:image/svg+xml,"+encodeURIComponent(T)},V.encodeJSON=function(T){return"data:application/json,"+encodeURIComponent(T)};var c=window.URL||window.webkitURL;V.createObjectURL=function(T){return c.createObjectURL(T)},V.revokeObjectURL=function(T){return c.revokeObjectURL(T)},V.createBlob=function(T,e){if(e==="svg")return new window.Blob([T],{type:"image/svg+xml;charset=utf-8"});if(e==="full-json")return new window.Blob([T],{type:"application/json;charset=utf-8"});var a=A(window.atob(T));return new window.Blob([a],{type:"image/"+e})},V.octetStream=function(T){document.location.href="data:application/octet-stream"+T};function A(T){for(var e=T.length,a=new ArrayBuffer(e),i=new Uint8Array(a),n=0;n<e;n++)i[n]=T.charCodeAt(n);return a}V.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,V.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},{"../registry":647}],652:[function(t,B,V){var m=t("./helpers"),c={getDelay:m.getDelay,getRedrawFunc:m.getRedrawFunc,clone:t("./cloneplot"),toSVG:t("./tosvg"),svgToImg:t("./svgtoimg"),toImage:t("./toimage"),downloadImage:t("./download")};B.exports=c},{"./cloneplot":648,"./download":649,"./helpers":651,"./svgtoimg":653,"./toimage":654,"./tosvg":655}],653:[function(t,B,V){var m=t("../lib"),c=t("events").EventEmitter,A=t("./helpers");function T(e){var a=e.emitter||new c,i=new Promise(function(n,r){var v=window.Image,s=e.svg,o=e.format||"png";if(m.isIE()&&o!=="svg"){var b=new Error(A.MSG_IE_BAD_FORMAT);return r(b),e.promise?i:a.emit("error",b)}var g=e.canvas,d=e.scale||1,f=e.width||300,y=e.height||150,l=d*f,x=d*y,u=g.getContext("2d",{willReadFrequently:!0}),M=new v,_,p;o==="svg"||m.isSafari()?p=A.encodeSVG(s):(_=A.createBlob(s,"svg"),p=A.createObjectURL(_)),g.width=l,g.height=x,M.onload=function(){var w;switch(_=null,A.revokeObjectURL(p),o!=="svg"&&u.drawImage(M,0,0,l,x),o){case"jpeg":w=g.toDataURL("image/jpeg");break;case"png":w=g.toDataURL("image/png");break;case"webp":w=g.toDataURL("image/webp");break;case"svg":w=p;break;default:var h="Image format is not jpeg, png, svg or webp.";if(r(new Error(h)),!e.promise)return a.emit("error",h)}n(w),e.promise||a.emit("success",w)},M.onerror=function(w){if(_=null,A.revokeObjectURL(p),r(w),!e.promise)return a.emit("error",w)},M.src=p});return e.promise?i:a}B.exports=T},{"../lib":515,"./helpers":651,events:84}],654:[function(t,B,V){var m=t("events").EventEmitter,c=t("../registry"),A=t("../lib"),T=t("./helpers"),e=t("./cloneplot"),a=t("./tosvg"),i=t("./svgtoimg");function n(r,v){var s=new m,o=e(r,{format:"png"}),b=o.gd;b.style.position="absolute",b.style.left="-5000px",document.body.appendChild(b);function g(){var f=T.getDelay(b._fullLayout);setTimeout(function(){var y=a(b),l=document.createElement("canvas");l.id=A.randstr(),s=i({format:v.format,width:b._fullLayout.width,height:b._fullLayout.height,canvas:l,emitter:s,svg:y}),s.clean=function(){b&&document.body.removeChild(b)}},f)}var d=T.getRedrawFunc(b);return c.call("_doPlot",b,o.data,o.layout,o.config).then(d).then(g).catch(function(f){s.emit("error",f)}),s}B.exports=n},{"../lib":515,"../registry":647,"./cloneplot":648,"./helpers":651,"./svgtoimg":653,"./tosvg":655,events:84}],655:[function(t,B,V){var m=t("@plotly/d3"),c=t("../lib"),A=t("../components/drawing"),T=t("../components/color"),e=t("../constants/xmlns_namespaces"),a=/"/g,i="TOBESTRIPPED",n=new RegExp('("'+i+")|("+i+'")',"g");function r(s){var o=m.select("body").append("div").style({display:"none"}).html(""),b=s.replace(/(&[^;]*;)/gi,function(g){return g==="&lt;"?"&#60;":g==="&rt;"?"&#62;":g.indexOf("<")!==-1||g.indexOf(">")!==-1?"":o.html(g).text()});return o.remove(),b}function v(s){return s.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")}B.exports=function(o,b,g){var d=o._fullLayout,f=d._paper,y=d._toppaper,l=d.width,x=d.height,u;f.insert("rect",":first-child").call(A.setRect,0,0,l,x).call(T.fill,d.paper_bgcolor);var M=d._basePlotModules||[];for(u=0;u<M.length;u++){var _=M[u];_.toSVG&&_.toSVG(o)}if(y){var p=y.node().childNodes,w=Array.prototype.slice.call(p);for(u=0;u<w.length;u++){var h=w[u];h.childNodes.length&&f.node().appendChild(h)}}d._draggers&&d._draggers.remove(),f.node().style.background="",f.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var S=m.select(this);if(this.style.visibility==="hidden"||this.style.display==="none"){S.remove();return}else S.style({visibility:null,display:null});var E=this.style.fontFamily;E&&E.indexOf('"')!==-1&&S.style("font-family",E.replace(a,i))}),f.selectAll(".gradient_filled,.pattern_filled").each(function(){var S=m.select(this),E=this.style.fill;E&&E.indexOf("url(")!==-1&&S.style("fill",E.replace(a,i));var P=this.style.stroke;P&&P.indexOf("url(")!==-1&&S.style("stroke",P.replace(a,i))}),(b==="pdf"||b==="eps")&&f.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),f.node().setAttributeNS(e.xmlns,"xmlns",e.svg),f.node().setAttributeNS(e.xmlns,"xmlns:xlink",e.xlink),b==="svg"&&g&&(f.attr("width",g*l),f.attr("height",g*x),f.attr("viewBox","0 0 "+l+" "+x));var L=new window.XMLSerializer().serializeToString(f.node());return L=r(L),L=v(L),L=L.replace(n,"'"),c.isIE()&&(L=L.replace(/"/gi,"'"),L=L.replace(/(\('#)([^']*)('\))/gi,'("#$2")'),L=L.replace(/(\\')/gi,'"')),L}},{"../components/color":367,"../components/drawing":389,"../constants/xmlns_namespaces":492,"../lib":515,"@plotly/d3":58}],656:[function(t,B,V){var m=t("../../lib");B.exports=function(A,T){for(var e=0;e<A.length;e++)A[e].i=e;m.mergeArray(T.text,A,"tx"),m.mergeArray(T.hovertext,A,"htx");var a=T.marker;if(a){m.mergeArray(a.opacity,A,"mo",!0),m.mergeArray(a.color,A,"mc");var i=a.line;i&&(m.mergeArray(i.color,A,"mlc"),m.mergeArrayCastPositive(i.width,A,"mlw"))}}},{"../../lib":515}],657:[function(t,B,V){var m=t("../scatter/attributes"),c=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,A=t("../../plots/template_attributes").hovertemplateAttrs,T=t("../../plots/template_attributes").texttemplateAttrs,e=t("../../components/colorscale/attributes"),a=t("../../plots/font_attributes"),i=t("./constants"),n=t("../../components/drawing/attributes").pattern,r=t("../../lib/extend").extendFlat,v=a({editType:"calc",arrayOk:!0,colorEditType:"style"}),s=m.marker,o=s.line,b=r({},o.width,{dflt:0}),g=r({width:b,editType:"calc"},e("marker.line")),d=r({line:g,editType:"calc"},e("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:n});B.exports={x:m.x,x0:m.x0,dx:m.dx,y:m.y,y0:m.y0,dy:m.dy,xperiod:m.xperiod,yperiod:m.yperiod,xperiod0:m.xperiod0,yperiod0:m.yperiod0,xperiodalignment:m.xperiodalignment,yperiodalignment:m.yperiodalignment,xhoverformat:c("x"),yhoverformat:c("y"),text:m.text,texttemplate:T({editType:"plot"},{keys:i.eventDataKeys}),hovertext:m.hovertext,hovertemplate:A({},{keys:i.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:r({},v,{}),insidetextfont:r({},v,{}),outsidetextfont:r({},v,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:r({},m.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:d,offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},selected:{marker:{opacity:m.selected.marker.opacity,color:m.selected.marker.color,editType:"style"},textfont:m.selected.textfont,editType:"style"},unselected:{marker:{opacity:m.unselected.marker.opacity,color:m.unselected.marker.color,editType:"style"},textfont:m.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},{"../../components/colorscale/attributes":374,"../../components/drawing/attributes":388,"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../../plots/font_attributes":594,"../../plots/template_attributes":642,"../scatter/attributes":936,"./constants":659}],658:[function(t,B,V){var m=t("../../plots/cartesian/axes"),c=t("../../plots/cartesian/align_period"),A=t("../../components/colorscale/helpers").hasColorscale,T=t("../../components/colorscale/calc"),e=t("./arrays_to_calcdata"),a=t("../scatter/calc_selection");B.exports=function(n,r){var v=m.getFromId(n,r.xaxis||"x"),s=m.getFromId(n,r.yaxis||"y"),o,b,g,d,f,y,l={msUTC:!!(r.base||r.base===0)};r.orientation==="h"?(o=v.makeCalcdata(r,"x",l),g=s.makeCalcdata(r,"y"),d=c(r,s,"y",g),f=!!r.yperiodalignment,y="y"):(o=s.makeCalcdata(r,"y",l),g=v.makeCalcdata(r,"x"),d=c(r,v,"x",g),f=!!r.xperiodalignment,y="x"),b=d.vals;for(var x=Math.min(b.length,o.length),u=new Array(x),M=0;M<x;M++)u[M]={p:b[M],s:o[M]},f&&(u[M].orig_p=g[M],u[M][y+"End"]=d.ends[M],u[M][y+"Start"]=d.starts[M]),r.ids&&(u[M].id=String(r.ids[M]));return A(r,"marker")&&T(n,r,{vals:r.marker.color,containerStr:"marker",cLetter:"c"}),A(r,"marker.line")&&T(n,r,{vals:r.marker.line.color,containerStr:"marker.line",cLetter:"c"}),e(u,r),a(u,r),u}},{"../../components/colorscale/calc":375,"../../components/colorscale/helpers":378,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"../scatter/calc_selection":938,"./arrays_to_calcdata":656}],659:[function(t,B,V){B.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},{}],660:[function(t,B,V){var m=t("fast-isnumeric"),c=t("../../lib").isArrayOrTypedArray,A=t("../../constants/numerical").BADNUM,T=t("../../registry"),e=t("../../plots/cartesian/axes"),a=t("../../plots/cartesian/constraints").getAxisGroup,i=t("./sieve.js");function n(L,S){for(var E=S.xaxis,P=S.yaxis,F=L._fullLayout,I=L._fullData,D=L.calcdata,R=[],N=[],z=0;z<I.length;z++){var G=I[z];if(G.visible===!0&&T.traceIs(G,"bar")&&G.xaxis===E._id&&G.yaxis===P._id&&(G.orientation==="h"?R.push(D[z]):N.push(D[z]),G._computePh))for(var Y=L.calcdata[z],ee=0;ee<Y.length;ee++)typeof Y[ee].ph0=="function"&&(Y[ee].ph0=Y[ee].ph0()),typeof Y[ee].ph1=="function"&&(Y[ee].ph1=Y[ee].ph1())}var Z={xCat:E.type==="category"||E.type==="multicategory",yCat:P.type==="category"||P.type==="multicategory",mode:F.barmode,norm:F.barnorm,gap:F.bargap,groupgap:F.bargroupgap};r(L,E,P,N,Z),r(L,P,E,R,Z)}function r(L,S,E,P,F){if(!!P.length){var I,D,R,N,z;switch(v(E,P),F.mode){case"overlay":s(S,E,P,F);break;case"group":for(I=[],D=[],R=0;R<P.length;R++)N=P[R],z=N[0].trace,z.offset===void 0?D.push(N):I.push(N);D.length&&o(L,S,E,D,F),I.length&&s(S,E,I,F);break;case"stack":case"relative":for(I=[],D=[],R=0;R<P.length;R++)N=P[R],z=N[0].trace,z.base===void 0?D.push(N):I.push(N);D.length&&b(L,S,E,D,F),I.length&&s(S,E,I,F);break}w(P,S)}}function v(L,S){var E,P;for(E=0;E<S.length;E++){var F=S[E],I=F[0].trace,D=I.type==="funnel"?I._base:I.base,R,N=I.orientation==="h"?I.xcalendar:I.ycalendar,z=L.type==="category"||L.type==="multicategory"?function(){return null}:L.d2c;if(c(D)){for(P=0;P<Math.min(D.length,F.length);P++)R=z(D[P],0,N),m(R)?(F[P].b=+R,F[P].hasB=1):F[P].b=0;for(;P<F.length;P++)F[P].b=0}else{R=z(D,0,N);var G=m(R);for(R=G?R:0,P=0;P<F.length;P++)F[P].b=R,G&&(F[P].hasB=1)}}}function s(L,S,E,P){for(var F=0;F<E.length;F++){var I=E[F],D=new i([I],{posAxis:L,sepNegVal:!1,overlapNoMerge:!P.norm});g(L,D,P),P.norm?(M(D),p(S,D,P)):x(S,D)}}function o(L,S,E,P,F){var I=new i(P,{posAxis:S,sepNegVal:!1,overlapNoMerge:!F.norm});d(L,S,I,F),_(I,S),F.norm?(M(I),p(E,I,F)):x(E,I)}function b(L,S,E,P,F){var I=new i(P,{posAxis:S,sepNegVal:F.mode==="relative",overlapNoMerge:!(F.norm||F.mode==="stack"||F.mode==="relative")});g(S,I,F),u(E,I,F);for(var D=0;D<P.length;D++)for(var R=P[D],N=0;N<R.length;N++){var z=R[N];if(z.s!==A){var G=z.b+z.s===I.get(z.p,z.s);G&&(z._outmost=!0)}}F.norm&&p(E,I,F)}function g(L,S,E){for(var P=S.minDiff,F=S.traces,I=P*(1-E.gap),D=I,R=D*(1-(E.groupgap||0)),N=-R/2,z=0;z<F.length;z++){var G=F[z],Y=G[0].t;Y.barwidth=R,Y.poffset=N,Y.bargroupwidth=I,Y.bardelta=P}S.binWidth=F[0][0].t.barwidth/100,f(S),y(L,S),l(L,S)}function d(L,S,E,P){for(var F=L._fullLayout,I=E.positions,D=E.distinctPositions,R=E.minDiff,N=E.traces,z=N.length,G=I.length!==D.length,Y=R*(1-P.gap),ee=a(F,S._id)+N[0][0].trace.orientation,Z=F._alignmentOpts[ee]||{},X=0;X<z;X++){var ne=N[X],ce=ne[0].trace,Q=Z[ce.alignmentgroup]||{},K=Object.keys(Q.offsetGroups||{}).length,U;K?U=Y/K:U=G?Y/z:Y;var H=U*(1-(P.groupgap||0)),q;K?q=((2*ce._offsetIndex+1-K)*U-H)/2:q=G?((2*X+1-z)*U-H)/2:-H/2;var re=ne[0].t;re.barwidth=H,re.poffset=q,re.bargroupwidth=Y,re.bardelta=R}E.binWidth=N[0][0].t.barwidth/100,f(E),y(S,E),l(S,E,G)}function f(L){var S=L.traces,E,P;for(E=0;E<S.length;E++){var F=S[E],I=F[0],D=I.trace,R=I.t,N=D._offset||D.offset,z=R.poffset,G;if(c(N)){for(G=Array.prototype.slice.call(N,0,F.length),P=0;P<G.length;P++)m(G[P])||(G[P]=z);for(P=G.length;P<F.length;P++)G.push(z);R.poffset=G}else N!==void 0&&(R.poffset=N);var Y=D._width||D.width,ee=R.barwidth;if(c(Y)){var Z=Array.prototype.slice.call(Y,0,F.length);for(P=0;P<Z.length;P++)m(Z[P])||(Z[P]=ee);for(P=Z.length;P<F.length;P++)Z.push(ee);if(R.barwidth=Z,N===void 0){for(G=[],P=0;P<F.length;P++)G.push(z+(ee-Z[P])/2);R.poffset=G}}else Y!==void 0&&(R.barwidth=Y,N===void 0&&(R.poffset=z+(ee-Y)/2))}}function y(L,S){for(var E=S.traces,P=h(L),F=0;F<E.length;F++)for(var I=E[F],D=I[0].t,R=D.poffset,N=Array.isArray(R),z=D.barwidth,G=Array.isArray(z),Y=0;Y<I.length;Y++){var ee=I[Y],Z=ee.w=G?z[Y]:z;ee[P]=ee.p+(N?R[Y]:R)+Z/2}}function l(L,S,E){var P=S.traces,F=S.minDiff,I=F/2;e.minDtick(L,S.minDiff,S.distinctPositions[0],E);for(var D=0;D<P.length;D++){var R=P[D],N=R[0],z=N.trace,G=[],Y,ee,Z,X;for(X=0;X<R.length;X++)Y=R[X],ee=Y.p-I,Z=Y.p+I,G.push(ee,Z);if(z.width||z.offset){var ne=N.t,ce=ne.poffset,Q=ne.barwidth,K=Array.isArray(ce),U=Array.isArray(Q);for(X=0;X<R.length;X++){Y=R[X];var H=K?ce[X]:ce,q=U?Q[X]:Q;ee=Y.p+H,Z=ee+q,G.push(ee,Z)}}z._extremes[L._id]=e.findExtremes(L,G,{padded:!1})}}function x(L,S){for(var E=S.traces,P=h(L),F=0;F<E.length;F++){for(var I=E[F],D=I[0].trace,R=[],N=!1,z=0;z<I.length;z++){var G=I[z],Y=G.b,ee=Y+G.s;G[P]=ee,R.push(ee),G.hasB&&R.push(Y),(!G.hasB||!G.b)&&(N=!0)}D._extremes[L._id]=e.findExtremes(L,R,{tozero:N,padded:!0})}}function u(L,S,E){var P=h(L),F=S.traces,I,D,R,N,z,G;for(N=0;N<F.length;N++)if(I=F[N],D=I[0].trace,D.type==="funnel")for(z=0;z<I.length;z++)G=I[z],G.s!==A&&S.put(G.p,-.5*G.s);for(N=0;N<F.length;N++){I=F[N],D=I[0].trace,R=D.type==="funnel";var Y=[];for(z=0;z<I.length;z++)if(G=I[z],G.s!==A){var ee;R?ee=G.s:ee=G.s+G.b;var Z=S.put(G.p,ee),X=Z+ee;G.b=Z,G[P]=X,E.norm||(Y.push(X),G.hasB&&Y.push(Z))}E.norm||(D._extremes[L._id]=e.findExtremes(L,Y,{tozero:!0,padded:!0}))}}function M(L){for(var S=L.traces,E=0;E<S.length;E++)for(var P=S[E],F=0;F<P.length;F++){var I=P[F];I.s!==A&&L.put(I.p,I.b+I.s)}}function _(L,S){for(var E=L.traces,P=0;P<E.length;P++){var F=E[P],I=F[0].trace;if(I.base===void 0)for(var D=new i([F],{posAxis:S,sepNegVal:!0,overlapNoMerge:!0}),R=0;R<F.length;R++){var N=F[R];if(N.p!==A){var z=D.put(N.p,N.b+N.s);z&&(N.b=z)}}}}function p(L,S,E){var P=S.traces,F=h(L),I=E.norm==="fraction"?1:100,D=I/1e9,R=L.l2c(L.c2l(0)),N=E.mode==="stack"?I:R;function z(q){return m(L.c2l(q))&&(q<R-D||q>N+D||!m(R))}for(var G=0;G<P.length;G++){for(var Y=P[G],ee=Y[0].trace,Z=[],X=!1,ne=!1,ce=0;ce<Y.length;ce++){var Q=Y[ce];if(Q.s!==A){var K=Math.abs(I/S.get(Q.p,Q.s));Q.b*=K,Q.s*=K;var U=Q.b,H=U+Q.s;Q[F]=H,Z.push(H),ne=ne||z(H),Q.hasB&&(Z.push(U),ne=ne||z(U)),(!Q.hasB||!Q.b)&&(X=!0)}}ee._extremes[L._id]=e.findExtremes(L,Z,{tozero:X,padded:ne})}}function w(L,S){var E=h(S),P={},F,I,D,R=1/0,N=-1/0;for(F=0;F<L.length;F++)for(D=L[F],I=0;I<D.length;I++){var z=D[I].p;m(z)&&(R=Math.min(R,z),N=Math.max(N,z))}var G=1e4/(N-R),Y=P.round=function(K){return String(Math.round(G*(K-R)))};for(F=0;F<L.length;F++){D=L[F],D[0].t.extents=P;var ee=D[0].t.poffset,Z=Array.isArray(ee);for(I=0;I<D.length;I++){var X=D[I],ne=X[E]-X.w/2;if(m(ne)){var ce=X[E]+X.w/2,Q=Y(X.p);P[Q]?P[Q]=[Math.min(ne,P[Q][0]),Math.max(ce,P[Q][1])]:P[Q]=[ne,ce]}X.p0=X.p+(Z?ee[I]:ee),X.p1=X.p0+X.w,X.s0=X.b,X.s1=X.s0+X.s}}}function h(L){return L._id.charAt(0)}B.exports={crossTraceCalc:n,setGroupPositions:r}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/axes":566,"../../plots/cartesian/constraints":574,"../../registry":647,"./sieve.js":670,"fast-isnumeric":190}],661:[function(t,B,V){var m=t("../../lib"),c=t("../../components/color"),A=t("../../registry"),T=t("../scatter/xy_defaults"),e=t("../scatter/period_defaults"),a=t("./style_defaults"),i=t("../../plots/cartesian/constraints").getAxisGroup,n=t("./attributes"),r=m.coerceFont;function v(g,d,f,y){function l(p,w){return m.coerce(g,d,n,p,w)}var x=T(g,d,y,l);if(!x){d.visible=!1;return}e(g,d,y,l),l("xhoverformat"),l("yhoverformat"),l("orientation",d.x&&!d.y?"h":"v"),l("base"),l("offset"),l("width"),l("text"),l("hovertext"),l("hovertemplate");var u=l("textposition");b(g,d,y,l,u,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),a(g,d,l,f,y);var M=(d.marker.line||{}).color,_=A.getComponentMethod("errorbars","supplyDefaults");_(g,d,M||c.defaultLine,{axis:"y"}),_(g,d,M||c.defaultLine,{axis:"x",inherit:"y"}),m.coerceSelectionMarkerOpacity(d,l)}function s(g,d,f,y){var l=d.orientation,x=d[{v:"x",h:"y"}[l]+"axis"],u=i(f,x)+l,M=f._alignmentOpts||{},_=y("alignmentgroup"),p=M[u];p||(p=M[u]={});var w=p[_];w?w.traces.push(d):w=p[_]={traces:[d],alignmentIndex:Object.keys(p).length,offsetGroups:{}};var h=y("offsetgroup"),L=w.offsetGroups,S=L[h];h&&(S||(S=L[h]={offsetIndex:Object.keys(L).length}),d._offsetIndex=S.offsetIndex)}function o(g,d){var f,y;function l(u){return m.coerce(y._input,y,n,u)}if(d.barmode==="group")for(var x=0;x<g.length;x++)y=g[x],y.type==="bar"&&(f=y._input,s(f,y,d,l))}function b(g,d,f,y,l,x){x=x||{};var u=x.moduleHasSelected!==!1,M=x.moduleHasUnselected!==!1,_=x.moduleHasConstrain!==!1,p=x.moduleHasCliponaxis!==!1,w=x.moduleHasTextangle!==!1,h=x.moduleHasInsideanchor!==!1,L=!!x.hasPathbar,S=Array.isArray(l)||l==="auto",E=S||l==="inside",P=S||l==="outside";if(E||P){var F=r(y,"textfont",f.font),I=m.extendFlat({},F),D=g.textfont&&g.textfont.color,R=!D;if(R&&delete I.color,r(y,"insidetextfont",I),L){var N=m.extendFlat({},F);R&&delete N.color,r(y,"pathbar.textfont",N)}P&&r(y,"outsidetextfont",F),u&&y("selected.textfont.color"),M&&y("unselected.textfont.color"),_&&y("constraintext"),p&&y("cliponaxis"),w&&y("textangle"),y("texttemplate")}E&&h&&y("insidetextanchor")}B.exports={supplyDefaults:v,crossTraceDefaults:o,handleGroupingDefaults:s,handleText:b}},{"../../components/color":367,"../../lib":515,"../../plots/cartesian/constraints":574,"../../registry":647,"../scatter/period_defaults":956,"../scatter/xy_defaults":963,"./attributes":657,"./style_defaults":672}],662:[function(t,B,V){B.exports=function(c,A,T){return c.x="xVal"in A?A.xVal:A.x,c.y="yVal"in A?A.yVal:A.y,A.xa&&(c.xaxis=A.xa),A.ya&&(c.yaxis=A.ya),T.orientation==="h"?(c.label=c.y,c.value=c.x):(c.label=c.x,c.value=c.y),c}},{}],663:[function(t,B,V){var m=t("fast-isnumeric"),c=t("tinycolor2"),A=t("../../lib").isArrayOrTypedArray;V.coerceString=function(T,e,a){if(typeof e=="string"){if(e||!T.noBlank)return e}else if((typeof e=="number"||e===!0)&&!T.strict)return String(e);return a!==void 0?a:T.dflt},V.coerceNumber=function(T,e,a){if(m(e)){e=+e;var i=T.min,n=T.max,r=i!==void 0&&e<i||n!==void 0&&e>n;if(!r)return e}return a!==void 0?a:T.dflt},V.coerceColor=function(T,e,a){return c(e).isValid()?e:a!==void 0?a:T.dflt},V.coerceEnumerated=function(T,e,a){return T.coerceNumber&&(e=+e),T.values.indexOf(e)!==-1?e:a!==void 0?a:T.dflt},V.getValue=function(T,e){var a;return Array.isArray(T)?e<T.length&&(a=T[e]):a=T,a},V.getLineWidth=function(T,e){var a=0<e.mlw?e.mlw:A(T.marker.line.width)?0:T.marker.line.width;return a}},{"../../lib":515,"fast-isnumeric":190,tinycolor2:313}],664:[function(t,B,V){var m=t("../../components/fx"),c=t("../../registry"),A=t("../../components/color"),T=t("../../lib").fillText,e=t("./helpers").getLineWidth,a=t("../../plots/cartesian/axes").hoverLabelText,i=t("../../constants/numerical").BADNUM;function n(s,o,b,g,d){var f=r(s,o,b,g,d);if(f){var y=f.cd,l=y[0].trace,x=y[f.index];return f.color=v(l,x),c.getComponentMethod("errorbars","hoverInfo")(x,l,f),[f]}}function r(s,o,b,g,d){var f=s.cd,y=f[0].trace,l=f[0].t,x=g==="closest",u=y.type==="waterfall",M=s.maxHoverDistance,_=s.maxSpikeDistance,p,w,h,L,S,E,P;y.orientation==="h"?(p=b,w=o,h="y",L="x",S=ce,E=Z):(p=o,w=b,h="x",L="y",E=ce,S=Z);var F=y[h+"period"],I=x||F;function D(ae){return N(ae,-1)}function R(ae){return N(ae,1)}function N(ae,se){var _e=ae.w;return ae[h]+se*_e/2}function z(ae){return ae[h+"End"]-ae[h+"Start"]}var G=x?D:F?function(ae){return ae.p-z(ae)/2}:function(ae){return Math.min(D(ae),ae.p-l.bardelta/2)},Y=x?R:F?function(ae){return ae.p+z(ae)/2}:function(ae){return Math.max(R(ae),ae.p+l.bardelta/2)};function ee(ae,se,_e){return d.finiteRange&&(_e=0),m.inbox(ae-p,se-p,_e+Math.min(1,Math.abs(se-ae)/P)-1)}function Z(ae){return ee(G(ae),Y(ae),M)}function X(ae){return ee(D(ae),R(ae),_)}function ne(ae){var se=ae[L];if(u){var _e=Math.abs(ae.rawS)||0;w>0?se+=_e:w<0&&(se-=_e)}return se}function ce(ae){var se=w,_e=ae.b,ue=ne(ae);return m.inbox(_e-se,ue-se,M+(ue-se)/(ue-_e)-1)}function Q(ae){var se=w,_e=ae.b,ue=ne(ae);return m.inbox(_e-se,ue-se,_+(ue-se)/(ue-_e)-1)}var K=s[h+"a"],U=s[L+"a"];P=Math.abs(K.r2c(K.range[1])-K.r2c(K.range[0]));function H(ae){return(S(ae)+E(ae))/2}var q=m.getDistanceFunction(g,S,E,H);if(m.getClosest(f,q,s),s.index!==!1&&f[s.index].p!==i){I||(G=function(ae){return Math.min(D(ae),ae.p-l.bargroupwidth/2)},Y=function(ae){return Math.max(R(ae),ae.p+l.bargroupwidth/2)});var re=s.index,j=f[re],$=y.base?j.b+j.s:j.s;s[L+"0"]=s[L+"1"]=U.c2p(j[L],!0),s[L+"LabelVal"]=$;var ie=l.extents[l.extents.round(j.p)];s[h+"0"]=K.c2p(x?G(j):ie[0],!0),s[h+"1"]=K.c2p(x?Y(j):ie[1],!0);var oe=j.orig_p!==void 0;return s[h+"LabelVal"]=oe?j.orig_p:j.p,s.labelLabel=a(K,s[h+"LabelVal"],y[h+"hoverformat"]),s.valueLabel=a(U,s[L+"LabelVal"],y[L+"hoverformat"]),s.baseLabel=a(U,j.b,y[L+"hoverformat"]),s.spikeDistance=(Q(j)+X(j))/2,s[h+"Spike"]=K.c2p(j.p,!0),T(j,y,s),s.hovertemplate=y.hovertemplate,s}}function v(s,o){var b=o.mcc||s.marker.color,g=o.mlcc||s.marker.line.color,d=e(s,o);if(A.opacity(b))return b;if(A.opacity(g)&&d)return g}B.exports={hoverPoints:n,hoverOnBars:r,getTraceColor:v}},{"../../components/color":367,"../../components/fx":407,"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/axes":566,"../../registry":647,"./helpers":663}],665:[function(t,B,V){B.exports={attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyDefaults:t("./defaults").supplyDefaults,crossTraceDefaults:t("./defaults").crossTraceDefaults,supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc"),crossTraceCalc:t("./cross_trace_calc").crossTraceCalc,colorbar:t("../scatter/marker_colorbar"),arraysToCalcdata:t("./arrays_to_calcdata"),plot:t("./plot").plot,style:t("./style").style,styleOnSelect:t("./style").styleOnSelect,hoverPoints:t("./hover").hoverPoints,eventData:t("./event_data"),selectPoints:t("./select"),moduleType:"trace",name:"bar",basePlotModule:t("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},{"../../plots/cartesian":578,"../scatter/marker_colorbar":954,"./arrays_to_calcdata":656,"./attributes":657,"./calc":658,"./cross_trace_calc":660,"./defaults":661,"./event_data":662,"./hover":664,"./layout_attributes":666,"./layout_defaults":667,"./plot":668,"./select":669,"./style":671}],666:[function(t,B,V){B.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],667:[function(t,B,V){var m=t("../../registry"),c=t("../../plots/cartesian/axes"),A=t("../../lib"),T=t("./layout_attributes");B.exports=function(e,a,i){function n(l,x){return A.coerce(e,a,T,l,x)}for(var r=!1,v=!1,s=!1,o={},b=n("barmode"),g=0;g<i.length;g++){var d=i[g];if(m.traceIs(d,"bar")&&d.visible)r=!0;else continue;if(b==="group"){var f=d.xaxis+d.yaxis;o[f]&&(s=!0),o[f]=!0}if(d.visible&&d.type==="histogram"){var y=c.getFromId({_fullLayout:a},d[d.orientation==="v"?"xaxis":"yaxis"]);y.type!=="category"&&(v=!0)}}if(!r){delete a.barmode;return}b!=="overlay"&&n("barnorm"),n("bargap",v&&!s?0:.2),n("bargroupgap")}},{"../../lib":515,"../../plots/cartesian/axes":566,"../../registry":647,"./layout_attributes":666}],668:[function(t,B,V){var m=t("@plotly/d3"),c=t("fast-isnumeric"),A=t("../../lib"),T=t("../../lib/svg_text_utils"),e=t("../../components/color"),a=t("../../components/drawing"),i=t("../../registry"),n=t("../../plots/cartesian/axes").tickText,r=t("./uniform_text"),v=r.recordMinTextSize,s=r.clearMinTextSize,o=t("./style"),b=t("./helpers"),g=t("./constants"),d=t("./attributes"),f=d.text,y=d.textposition,l=t("../../components/fx/helpers").appendArrayPointValue,x=g.TEXTPAD;function u(G){return G.id}function M(G){if(G.ids)return u}function _(G,Y){return G<Y?1:-1}function p(G,Y,ee,Z){var X=[],ne=[],ce=Z?Y:ee,Q=Z?ee:Y;return X[0]=ce.c2p(G.s0,!0),ne[0]=Q.c2p(G.p0,!0),X[1]=ce.c2p(G.s1,!0),ne[1]=Q.c2p(G.p1,!0),Z?[X,ne]:[ne,X]}function w(G,Y,ee,Z){if(!Y.uniformtext.mode&&h(ee)){var X;return Z&&(X=Z()),G.transition().duration(ee.duration).ease(ee.easing).each("end",function(){X&&X()}).each("interrupt",function(){X&&X()})}else return G}function h(G){return G&&G.duration>0}function L(G,Y,ee,Z,X,ne){var ce=Y.xaxis,Q=Y.yaxis,K=G._fullLayout;X||(X={mode:K.barmode,norm:K.barmode,gap:K.bargap,groupgap:K.bargroupgap},s("bar",K));var U=A.makeTraceGroups(Z,ee,"trace bars").each(function(H){var q=m.select(this),re=H[0].trace,j=re.type==="waterfall",$=re.type==="funnel",ie=re.type==="bar",oe=ie||$,ae=0;j&&re.connector.visible&&re.connector.mode==="between"&&(ae=re.connector.line.width/2);var se=re.orientation==="h",_e=h(X),ue=A.ensureSingle(q,"g","points"),ye=M(re),xe=ue.selectAll("g.point").data(A.identity,ye);xe.enter().append("g").classed("point",!0),xe.exit().remove(),xe.each(function(be,ke){var De=m.select(this),Ve=p(be,ce,Q,se),Ae=Ve[0][0],Le=Ve[0][1],je=Ve[1][0],Ye=Ve[1][1],ze=(se?Le-Ae:Ye-je)===0;ze&&oe&&b.getLineWidth(re,be)&&(ze=!1),ze||(ze=!c(Ae)||!c(Le)||!c(je)||!c(Ye)),be.isBlank=ze,ze&&(se?Le=Ae:Ye=je),ae&&!ze&&(se?(Ae-=_(Ae,Le)*ae,Le+=_(Ae,Le)*ae):(je-=_(je,Ye)*ae,Ye+=_(je,Ye)*ae));var Ie,We;if(re.type==="waterfall"){if(!ze){var pt=re[be.dir].marker;Ie=pt.line.width,We=pt.color}}else Ie=b.getLineWidth(re,be),We=be.mc||re.marker.color;function Ft(Ct){var Xe=m.round(Ie/2%1,2);return X.gap===0&&X.groupgap===0?m.round(Math.round(Ct)-Xe,2):Ct}function Qt(Ct,Xe,at){return at&&Ct===Xe?Ct:Math.abs(Ct-Xe)>=2?Ft(Ct):Ct>Xe?Math.ceil(Ct):Math.floor(Ct)}if(!G._context.staticPlot){var zt=e.opacity(We),Et=zt<1||Ie>.01?Ft:Qt;Ae=Et(Ae,Le,se),Le=Et(Le,Ae,se),je=Et(je,Ye,!se),Ye=Et(Ye,je,!se)}var Xt=w(A.ensureSingle(De,"path"),K,X,ne);if(Xt.style("vector-effect","non-scaling-stroke").attr("d",isNaN((Le-Ae)*(Ye-je))||ze&&G._context.staticPlot?"M0,0Z":"M"+Ae+","+je+"V"+Ye+"H"+Le+"V"+je+"Z").call(a.setClipUrl,Y.layerClipId,G),!K.uniformtext.mode&&_e){var Nt=a.makePointStyleFns(re);a.singlePointStyle(be,Xt,re,Nt,G)}S(G,Y,De,H,ke,Ae,Le,je,Ye,X,ne),Y.layerClipId&&a.hideOutsideRangePoint(be,De.select("text"),ce,Q,re.xcalendar,re.ycalendar)});var me=re.cliponaxis===!1;a.setClipUrl(q,me?null:Y.layerClipId,G)});i.getComponentMethod("errorbars","plot")(G,U,Y,X)}function S(G,Y,ee,Z,X,ne,ce,Q,K,U,H){var q=Y.xaxis,re=Y.yaxis,j=G._fullLayout,$;function ie(Xe,at,Ge){var Se=A.ensureSingle(Xe,"text").text(at).attr({class:"bartext bartext-"+$,"text-anchor":"middle","data-notex":1}).call(a.font,Ge).call(T.convertToTspans,G);return Se}var oe=Z[0].trace,ae=oe.orientation==="h",se=D(j,Z,X,q,re);$=R(oe,X);var _e=U.mode==="stack"||U.mode==="relative",ue=Z[X],ye=!_e||ue._outmost;if(!se||$==="none"||(ue.isBlank||ne===ce||Q===K)&&($==="auto"||$==="inside")){ee.select("text").remove();return}var xe=j.font,me=o.getBarColor(Z[X],oe),be=o.getInsideTextFont(oe,X,xe,me),ke=o.getOutsideTextFont(oe,X,xe),De=ee.datum();ae?q.type==="log"&&De.s0<=0&&(q.range[0]<q.range[1]?ne=0:ne=q._length):re.type==="log"&&De.s0<=0&&(re.range[0]<re.range[1]?Q=re._length:Q=0);var Ve=Math.abs(ce-ne)-2*x,Ae=Math.abs(K-Q)-2*x,Le,je,Ye,ze,Ie;if($==="outside"&&!ye&&!ue.hasB&&($="inside"),$==="auto")if(ye){$="inside",Ie=A.ensureUniformFontSize(G,be),Le=ie(ee,se,Ie),je=a.bBox(Le.node()),Ye=je.width,ze=je.height;var We=Ye>0&&ze>0,pt=Ye<=Ve&&ze<=Ae,Ft=Ye<=Ae&&ze<=Ve,Qt=ae?Ve>=Ye*(Ae/ze):Ae>=ze*(Ve/Ye);We&&(pt||Ft||Qt)?$="inside":($="outside",Le.remove(),Le=null)}else $="inside";if(!Le){Ie=A.ensureUniformFontSize(G,$==="outside"?ke:be),Le=ie(ee,se,Ie);var zt=Le.attr("transform");if(Le.attr("transform",""),je=a.bBox(Le.node()),Ye=je.width,ze=je.height,Le.attr("transform",zt),Ye<=0||ze<=0){Le.remove();return}}var Et=oe.textangle,Xt,Nt;$==="outside"?(Nt=oe.constraintext==="both"||oe.constraintext==="outside",Xt=I(ne,ce,Q,K,je,{isHorizontal:ae,constrained:Nt,angle:Et})):(Nt=oe.constraintext==="both"||oe.constraintext==="inside",Xt=F(ne,ce,Q,K,je,{isHorizontal:ae,constrained:Nt,angle:Et,anchor:oe.insidetextanchor})),Xt.fontSize=Ie.size,v(oe.type==="histogram"?"bar":oe.type,Xt,j),ue.transform=Xt;var Ct=w(Le,j,U,H);A.setTransormAndDisplay(Ct,Xt)}function E(G){return G==="auto"?0:G}function P(G,Y){var ee=Math.PI/180*Y,Z=Math.abs(Math.sin(ee)),X=Math.abs(Math.cos(ee));return{x:G.width*X+G.height*Z,y:G.width*Z+G.height*X}}function F(G,Y,ee,Z,X,ne){var ce=!!ne.isHorizontal,Q=!!ne.constrained,K=ne.angle||0,U=ne.anchor||"end",H=U==="end",q=U==="start",re=ne.leftToRight||0,j=(re+1)/2,$=1-j,ie=X.width,oe=X.height,ae=Math.abs(Y-G),se=Math.abs(Z-ee),_e=ae>2*x&&se>2*x?x:0;ae-=2*_e,se-=2*_e;var ue=E(K);K==="auto"&&!(ie<=ae&&oe<=se)&&(ie>ae||oe>se)&&(!(ie>se||oe>ae)||ie<oe!=ae<se)&&(ue+=90);var ye=P(X,ue),xe=1;Q&&(xe=Math.min(1,ae/ye.x,se/ye.y));var me=X.left*$+X.right*j,be=(X.top+X.bottom)/2,ke=(G+x)*$+(Y-x)*j,De=(ee+Z)/2,Ve=0,Ae=0;if(q||H){var Le=(ce?ye.x:ye.y)/2,je=ce?_(G,Y):_(ee,Z);ce?q?(ke=G+je*_e,Ve=-je*Le):(ke=Y-je*_e,Ve=je*Le):q?(De=ee+je*_e,Ae=-je*Le):(De=Z-je*_e,Ae=je*Le)}return{textX:me,textY:be,targetX:ke,targetY:De,anchorX:Ve,anchorY:Ae,scale:xe,rotate:ue}}function I(G,Y,ee,Z,X,ne){var ce=!!ne.isHorizontal,Q=!!ne.constrained,K=ne.angle||0,U=X.width,H=X.height,q=Math.abs(Y-G),re=Math.abs(Z-ee),j;ce?j=re>2*x?x:0:j=q>2*x?x:0;var $=1;Q&&($=ce?Math.min(1,re/H):Math.min(1,q/U));var ie=E(K),oe=P(X,ie),ae=(ce?oe.x:oe.y)/2,se=(X.left+X.right)/2,_e=(X.top+X.bottom)/2,ue=(G+Y)/2,ye=(ee+Z)/2,xe=0,me=0,be=ce?_(Y,G):_(ee,Z);return ce?(ue=Y-be*j,xe=be*ae):(ye=Z+be*j,me=-be*ae),{textX:se,textY:_e,targetX:ue,targetY:ye,anchorX:xe,anchorY:me,scale:$,rotate:ie}}function D(G,Y,ee,Z,X){var ne=Y[0].trace,ce=ne.texttemplate,Q;return ce?Q=N(G,Y,ee,Z,X):ne.textinfo?Q=z(Y,ee,Z,X):Q=b.getValue(ne.text,ee),b.coerceString(f,Q)}function R(G,Y){var ee=b.getValue(G.textposition,Y);return b.coerceEnumerated(y,ee)}function N(G,Y,ee,Z,X){var ne=Y[0].trace,ce=A.castOption(ne,ee,"texttemplate");if(!ce)return"";var Q=ne.type==="histogram",K=ne.type==="waterfall",U=ne.type==="funnel",H=ne.orientation==="h",q,re,j,$;H?(q="y",re=X,j="x",$=Z):(q="x",re=Z,j="y",$=X);function ie(xe){return n(re,re.c2l(xe),!0).text}function oe(xe){return n($,$.c2l(xe),!0).text}var ae=Y[ee],se={};se.label=ae.p,se.labelLabel=se[q+"Label"]=ie(ae.p);var _e=A.castOption(ne,ae.i,"text");(_e===0||_e)&&(se.text=_e),se.value=ae.s,se.valueLabel=se[j+"Label"]=oe(ae.s);var ue={};l(ue,ne,ae.i),(Q||ue.x===void 0)&&(ue.x=H?se.value:se.label),(Q||ue.y===void 0)&&(ue.y=H?se.label:se.value),(Q||ue.xLabel===void 0)&&(ue.xLabel=H?se.valueLabel:se.labelLabel),(Q||ue.yLabel===void 0)&&(ue.yLabel=H?se.labelLabel:se.valueLabel),K&&(se.delta=+ae.rawS||ae.s,se.deltaLabel=oe(se.delta),se.final=ae.v,se.finalLabel=oe(se.final),se.initial=se.final-se.delta,se.initialLabel=oe(se.initial)),U&&(se.value=ae.s,se.valueLabel=oe(se.value),se.percentInitial=ae.begR,se.percentInitialLabel=A.formatPercent(ae.begR),se.percentPrevious=ae.difR,se.percentPreviousLabel=A.formatPercent(ae.difR),se.percentTotal=ae.sumR,se.percenTotalLabel=A.formatPercent(ae.sumR));var ye=A.castOption(ne,ae.i,"customdata");return ye&&(se.customdata=ye),A.texttemplateString(ce,se,G._d3locale,ue,se,ne._meta||{})}function z(G,Y,ee,Z){var X=G[0].trace,ne=X.orientation==="h",ce=X.type==="waterfall",Q=X.type==="funnel";function K(ye){var xe=ne?Z:ee;return n(xe,ye,!0).text}function U(ye){var xe=ne?ee:Z;return n(xe,+ye,!0).text}var H=X.textinfo,q=G[Y],re=H.split("+"),j=[],$,ie=function(ye){return re.indexOf(ye)!==-1};if(ie("label")&&j.push(K(G[Y].p)),ie("text")&&($=A.castOption(X,q.i,"text"),($===0||$)&&j.push($)),ce){var oe=+q.rawS||q.s,ae=q.v,se=ae-oe;ie("initial")&&j.push(U(se)),ie("delta")&&j.push(U(oe)),ie("final")&&j.push(U(ae))}if(Q){ie("value")&&j.push(U(q.s));var _e=0;ie("percent initial")&&_e++,ie("percent previous")&&_e++,ie("percent total")&&_e++;var ue=_e>1;ie("percent initial")&&($=A.formatPercent(q.begR),ue&&($+=" of initial"),j.push($)),ie("percent previous")&&($=A.formatPercent(q.difR),ue&&($+=" of previous"),j.push($)),ie("percent total")&&($=A.formatPercent(q.sumR),ue&&($+=" of total"),j.push($))}return j.join("<br>")}B.exports={plot:L,toMoveInsideBar:F}},{"../../components/color":367,"../../components/drawing":389,"../../components/fx/helpers":403,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../registry":647,"./attributes":657,"./constants":659,"./helpers":663,"./style":671,"./uniform_text":673,"@plotly/d3":58,"fast-isnumeric":190}],669:[function(t,B,V){B.exports=function(A,T){var e=A.cd,a=A.xaxis,i=A.yaxis,n=e[0].trace,r=n.type==="funnel",v=n.orientation==="h",s=[],o;if(T===!1)for(o=0;o<e.length;o++)e[o].selected=0;else for(o=0;o<e.length;o++){var b=e[o],g="ct"in b?b.ct:m(b,a,i,v,r);T.contains(g,!1,o,A)?(s.push({pointNumber:o,x:a.c2d(b.x),y:i.c2d(b.y)}),b.selected=1):b.selected=0}return s};function m(c,A,T,e,a){var i=A.c2p(e?c.s0:c.p0,!0),n=A.c2p(e?c.s1:c.p1,!0),r=T.c2p(e?c.p0:c.s0,!0),v=T.c2p(e?c.p1:c.s1,!0);return a?[(i+n)/2,(r+v)/2]:e?[n,(r+v)/2]:[(i+n)/2,v]}},{}],670:[function(t,B,V){B.exports=A;var m=t("../../lib").distinctVals,c=t("../../constants/numerical").BADNUM;function A(T,e){this.traces=T,this.sepNegVal=e.sepNegVal,this.overlapNoMerge=e.overlapNoMerge;for(var a=1/0,i=[],n=0;n<T.length;n++){for(var r=T[n],v=0;v<r.length;v++){var s=r[v];s.p!==c&&i.push(s.p)}r[0]&&r[0].width1&&(a=Math.min(r[0].width1,a))}this.positions=i;var o=m(i);this.distinctPositions=o.vals,o.vals.length===1&&a!==1/0?this.minDiff=a:this.minDiff=Math.min(o.minDiff,a);var b=(e.posAxis||{}).type;(b==="category"||b==="multicategory")&&(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}A.prototype.put=function(e,a){var i=this.getLabel(e,a),n=this.bins[i]||0;return this.bins[i]=n+a,n},A.prototype.get=function(e,a){var i=this.getLabel(e,a);return this.bins[i]||0},A.prototype.getLabel=function(e,a){var i=a<0&&this.sepNegVal?"v":"^",n=this.overlapNoMerge?e:Math.round(e/this.binWidth);return i+n}},{"../../constants/numerical":491,"../../lib":515}],671:[function(t,B,V){var m=t("@plotly/d3"),c=t("../../components/color"),A=t("../../components/drawing"),T=t("../../lib"),e=t("../../registry"),a=t("./uniform_text").resizeText,i=t("./attributes"),n=i.textfont,r=i.insidetextfont,v=i.outsidetextfont,s=t("./helpers");function o(w){var h=m.select(w).selectAll("g.barlayer").selectAll("g.trace");a(w,h,"bar");var L=h.size(),S=w._fullLayout;h.style("opacity",function(E){return E[0].trace.opacity}).each(function(E){(S.barmode==="stack"&&L>1||S.bargap===0&&S.bargroupgap===0&&!E[0].trace.marker.line.width)&&m.select(this).attr("shape-rendering","crispEdges")}),h.selectAll("g.points").each(function(E){var P=m.select(this),F=E[0].trace;b(P,F,w)}),e.getComponentMethod("errorbars","style")(h)}function b(w,h,L){A.pointStyle(w.selectAll("path"),h,L),g(w,h,L)}function g(w,h,L){w.selectAll("text").each(function(S){var E=m.select(this),P=T.ensureUniformFontSize(L,l(E,S,h,L));A.font(E,P)})}function d(w,h,L){var S=h[0].trace;S.selectedpoints?f(L,S,w):(b(L,S,w),e.getComponentMethod("errorbars","style")(L))}function f(w,h,L){A.selectedPointStyle(w.selectAll("path"),h),y(w.selectAll("text"),h,L)}function y(w,h,L){w.each(function(S){var E=m.select(this),P;if(S.selected){P=T.ensureUniformFontSize(L,l(E,S,h,L));var F=h.selected.textfont&&h.selected.textfont.color;F&&(P.color=F),A.font(E,P)}else A.selectedTextStyle(E,h)})}function l(w,h,L,S){var E=S._fullLayout.font,P=L.textfont;if(w.classed("bartext-inside")){var F=p(h,L);P=u(L,h.i,E,F)}else w.classed("bartext-outside")&&(P=M(L,h.i,E));return P}function x(w,h,L){return _(n,w.textfont,h,L)}function u(w,h,L,S){var E=x(w,h,L),P=w._input.textfont===void 0||w._input.textfont.color===void 0||Array.isArray(w.textfont.color)&&w.textfont.color[h]===void 0;return P&&(E={color:c.contrast(S),family:E.family,size:E.size}),_(r,w.insidetextfont,h,E)}function M(w,h,L){var S=x(w,h,L);return _(v,w.outsidetextfont,h,S)}function _(w,h,L,S){h=h||{};var E=s.getValue(h.family,L),P=s.getValue(h.size,L),F=s.getValue(h.color,L);return{family:s.coerceString(w.family,E,S.family),size:s.coerceNumber(w.size,P,S.size),color:s.coerceColor(w.color,F,S.color)}}function p(w,h){return h.type==="waterfall"?h[w.dir].marker.color:w.mcc||w.mc||h.marker.color}B.exports={style:o,styleTextPoints:g,styleOnSelect:d,getInsideTextFont:u,getOutsideTextFont:M,getBarColor:p,resizeText:a}},{"../../components/color":367,"../../components/drawing":389,"../../lib":515,"../../registry":647,"./attributes":657,"./helpers":663,"./uniform_text":673,"@plotly/d3":58}],672:[function(t,B,V){var m=t("../../components/color"),c=t("../../components/colorscale/helpers").hasColorscale,A=t("../../components/colorscale/defaults"),T=t("../../lib").coercePattern;B.exports=function(a,i,n,r,v){var s=n("marker.color",r),o=c(a,"marker");o&&A(a,i,v,n,{prefix:"marker.",cLetter:"c"}),n("marker.line.color",m.defaultLine),c(a,"marker.line")&&A(a,i,v,n,{prefix:"marker.line.",cLetter:"c"}),n("marker.line.width"),n("marker.opacity"),T(n,"marker.pattern",s,o),n("selected.marker.color"),n("unselected.marker.color")}},{"../../components/color":367,"../../components/colorscale/defaults":377,"../../components/colorscale/helpers":378,"../../lib":515}],673:[function(t,B,V){var m=t("@plotly/d3"),c=t("../../lib");function A(i,n,r){var v=i._fullLayout,s=v["_"+r+"Text_minsize"];if(s){var o=v.uniformtext.mode==="hide",b;switch(r){case"funnelarea":case"pie":case"sunburst":b="g.slice";break;case"treemap":case"icicle":b="g.slice, g.pathbar";break;default:b="g.points > g.point"}n.selectAll(b).each(function(g){var d=g.transform;if(d){d.scale=o&&d.hide?0:s/d.fontSize;var f=m.select(this).select("text");c.setTransormAndDisplay(f,d)}})}}function T(i,n,r){if(r.uniformtext.mode){var v=a(i),s=r.uniformtext.minsize,o=n.scale*n.fontSize;n.hide=o<s,r[v]=r[v]||1/0,n.hide||(r[v]=Math.min(r[v],Math.max(o,s)))}}function e(i,n){var r=a(i);n[r]=void 0}function a(i){return"_"+i+"Text_minsize"}B.exports={recordMinTextSize:T,clearMinTextSize:e,resizeText:A}},{"../../lib":515,"@plotly/d3":58}],674:[function(t,B,V){var m=t("../../plots/template_attributes").hovertemplateAttrs,c=t("../../lib/extend").extendFlat,A=t("../scatterpolar/attributes"),T=t("../bar/attributes");B.exports={r:A.r,theta:A.theta,r0:A.r0,dr:A.dr,theta0:A.theta0,dtheta:A.dtheta,thetaunit:A.thetaunit,base:c({},T.base,{}),offset:c({},T.offset,{}),width:c({},T.width,{}),text:c({},T.text,{}),hovertext:c({},T.hovertext,{}),marker:T.marker,hoverinfo:A.hoverinfo,hovertemplate:m(),selected:T.selected,unselected:T.unselected}},{"../../lib/extend":505,"../../plots/template_attributes":642,"../bar/attributes":657,"../scatterpolar/attributes":1011}],675:[function(t,B,V){var m=t("../../components/colorscale/helpers").hasColorscale,c=t("../../components/colorscale/calc"),A=t("../bar/arrays_to_calcdata"),T=t("../bar/cross_trace_calc").setGroupPositions,e=t("../scatter/calc_selection"),a=t("../../registry").traceIs,i=t("../../lib").extendFlat;function n(v,s){for(var o=v._fullLayout,b=s.subplot,g=o[b].radialaxis,d=o[b].angularaxis,f=g.makeCalcdata(s,"r"),y=d.makeCalcdata(s,"theta"),l=s._length,x=new Array(l),u=f,M=y,_=0;_<l;_++)x[_]={p:M[_],s:u[_]};function p(w){var h=s[w];h!==void 0&&(s["_"+w]=Array.isArray(h)?d.makeCalcdata(s,w):d.d2c(h,s.thetaunit))}return d.type==="linear"&&(p("width"),p("offset")),m(s,"marker")&&c(v,s,{vals:s.marker.color,containerStr:"marker",cLetter:"c"}),m(s,"marker.line")&&c(v,s,{vals:s.marker.line.color,containerStr:"marker.line",cLetter:"c"}),A(x,s),e(x,s),x}function r(v,s,o){for(var b=v.calcdata,g=[],d=0;d<b.length;d++){var f=b[d],y=f[0].trace;y.visible===!0&&a(y,"bar")&&y.subplot===o&&g.push(f)}var l=i({},s.radialaxis,{_id:"x"}),x=s.angularaxis;T(v,x,l,g,{mode:s.barmode,norm:s.barnorm,gap:s.bargap,groupgap:s.bargroupgap})}B.exports={calc:n,crossTraceCalc:r}},{"../../components/colorscale/calc":375,"../../components/colorscale/helpers":378,"../../lib":515,"../../registry":647,"../bar/arrays_to_calcdata":656,"../bar/cross_trace_calc":660,"../scatter/calc_selection":938}],676:[function(t,B,V){var m=t("../../lib"),c=t("../scatterpolar/defaults").handleRThetaDefaults,A=t("../bar/style_defaults"),T=t("./attributes");B.exports=function(a,i,n,r){function v(o,b){return m.coerce(a,i,T,o,b)}var s=c(a,i,r,v);if(!s){i.visible=!1;return}v("thetaunit"),v("base"),v("offset"),v("width"),v("text"),v("hovertext"),v("hovertemplate"),A(a,i,v,n,r),m.coerceSelectionMarkerOpacity(i,v)}},{"../../lib":515,"../bar/style_defaults":672,"../scatterpolar/defaults":1013,"./attributes":674}],677:[function(t,B,V){var m=t("../../components/fx"),c=t("../../lib"),A=t("../bar/hover").getTraceColor,T=c.fillText,e=t("../scatterpolar/hover").makeHoverPointText,a=t("../../plots/polar/helpers").isPtInsidePolygon;B.exports=function(n,r,v){var s=n.cd,o=s[0].trace,b=n.subplot,g=b.radialAxis,d=b.angularAxis,f=b.vangles,y=f?a:c.isPtInsideSector,l=n.maxHoverDistance,x=d._period||2*Math.PI,u=Math.abs(g.g2p(Math.sqrt(r*r+v*v))),M=Math.atan2(v,r);g.range[0]>g.range[1]&&(M+=Math.PI);var _=function(L){return y(u,M,[L.rp0,L.rp1],[L.thetag0,L.thetag1],f)?l+Math.min(1,Math.abs(L.thetag1-L.thetag0)/x)-1+(L.rp1-u)/(L.rp1-L.rp0)-1:1/0};if(m.getClosest(s,_,n),n.index!==!1){var p=n.index,w=s[p];n.x0=n.x1=w.ct[0],n.y0=n.y1=w.ct[1];var h=c.extendFlat({},w,{r:w.s,theta:w.p});return T(w,o,n),e(h,o,b,n),n.hovertemplate=o.hovertemplate,n.color=A(o,w),n.xLabelVal=n.yLabelVal=void 0,w.s<0&&(n.idealAlign="left"),[n]}}},{"../../components/fx":407,"../../lib":515,"../../plots/polar/helpers":630,"../bar/hover":664,"../scatterpolar/hover":1015}],678:[function(t,B,V){B.exports={moduleType:"trace",name:"barpolar",basePlotModule:t("../../plots/polar"),categories:["polar","bar","showLegend"],attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyDefaults:t("./defaults"),supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc").calc,crossTraceCalc:t("./calc").crossTraceCalc,plot:t("./plot"),colorbar:t("../scatter/marker_colorbar"),formatLabels:t("../scatterpolar/format_labels"),style:t("../bar/style").style,styleOnSelect:t("../bar/style").styleOnSelect,hoverPoints:t("./hover"),selectPoints:t("../bar/select"),meta:{}}},{"../../plots/polar":631,"../bar/select":669,"../bar/style":671,"../scatter/marker_colorbar":954,"../scatterpolar/format_labels":1014,"./attributes":674,"./calc":675,"./defaults":676,"./hover":677,"./layout_attributes":679,"./layout_defaults":680,"./plot":681}],679:[function(t,B,V){B.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},{}],680:[function(t,B,V){var m=t("../../lib"),c=t("./layout_attributes");B.exports=function(A,T,e){var a={},i;function n(s,o){return m.coerce(A[i]||{},T[i],c,s,o)}for(var r=0;r<e.length;r++){var v=e[r];v.type==="barpolar"&&v.visible===!0&&(i=v.subplot,a[i]||(n("barmode"),n("bargap"),a[i]=1))}}},{"../../lib":515,"./layout_attributes":679}],681:[function(t,B,V){var m=t("@plotly/d3"),c=t("fast-isnumeric"),A=t("../../lib"),T=t("../../components/drawing"),e=t("../../plots/polar/helpers");B.exports=function(n,r,v){var s=r.xaxis,o=r.yaxis,b=r.radialAxis,g=r.angularAxis,d=a(r),f=r.layers.frontplot.select("g.barlayer");A.makeTraceGroups(f,v,"trace bars").each(function(){var y=m.select(this),l=A.ensureSingle(y,"g","points"),x=l.selectAll("g.point").data(A.identity);x.enter().append("g").style("vector-effect","non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),x.exit().remove(),x.each(function(u){var M=m.select(this),_=u.rp0=b.c2p(u.s0),p=u.rp1=b.c2p(u.s1),w=u.thetag0=g.c2g(u.p0),h=u.thetag1=g.c2g(u.p1),L;if(!c(_)||!c(p)||!c(w)||!c(h)||_===p||w===h)L="M0,0Z";else{var S=b.c2g(u.s1),E=(w+h)/2;u.ct=[s.c2p(S*Math.cos(E)),o.c2p(S*Math.sin(E))],L=d(_,p,w,h)}A.ensureSingle(M,"path").attr("d",L)}),T.setClipUrl(y,r._hasClipOnAxisFalse?r.clipIds.forTraces:null,n)})};function a(i){var n=i.cxx,r=i.cyy;return i.vangles?function(v,s,o,b){var g,d;A.angleDelta(o,b)>0?(g=o,d=b):(g=b,d=o);var f=e.findEnclosingVertexAngles(g,i.vangles)[0],y=e.findEnclosingVertexAngles(d,i.vangles)[1],l=[f,(g+d)/2,y];return e.pathPolygonAnnulus(v,s,g,d,l,n,r)}:function(v,s,o,b){return A.pathAnnulus(v,s,o,b,n,r)}}},{"../../components/drawing":389,"../../lib":515,"../../plots/polar/helpers":630,"@plotly/d3":58,"fast-isnumeric":190}],682:[function(t,B,V){var m=t("../scatter/attributes"),c=t("../bar/attributes"),A=t("../../components/color/attributes"),T=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=t("../../plots/template_attributes").hovertemplateAttrs,a=t("../../lib/extend").extendFlat,i=m.marker,n=i.line;B.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:m.xperiod,yperiod:m.yperiod,xperiod0:m.xperiod0,yperiod0:m.yperiod0,xperiodalignment:m.xperiodalignment,yperiodalignment:m.yperiodalignment,xhoverformat:T("x"),yhoverformat:T("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:a({},i.symbol,{arrayOk:!1,editType:"plot"}),opacity:a({},i.opacity,{arrayOk:!1,dflt:1,editType:"style"}),angle:a({},i.angle,{arrayOk:!1,editType:"calc"}),size:a({},i.size,{arrayOk:!1,editType:"calc"}),color:a({},i.color,{arrayOk:!1,editType:"style"}),line:{color:a({},n.color,{arrayOk:!1,dflt:A.defaultLine,editType:"style"}),width:a({},n.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:m.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},offsetgroup:c.offsetgroup,alignmentgroup:c.alignmentgroup,selected:{marker:m.selected.marker,editType:"style"},unselected:{marker:m.unselected.marker,editType:"style"},text:a({},m.text,{}),hovertext:a({},m.hovertext,{}),hovertemplate:e({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},{"../../components/color/attributes":366,"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../bar/attributes":657,"../scatter/attributes":936}],683:[function(t,B,V){var m=t("fast-isnumeric"),c=t("../../plots/cartesian/axes"),A=t("../../plots/cartesian/align_period"),T=t("../../lib"),e=t("../../constants/numerical").BADNUM,a=T._;B.exports=function(M,_){var p=M._fullLayout,w=c.getFromId(M,_.xaxis||"x"),h=c.getFromId(M,_.yaxis||"y"),L=[],S=_.type==="violin"?"_numViolins":"_numBoxes",E,P,F,I,D,R,N;_.orientation==="h"?(F=w,I="x",D=h,R="y",N=!!_.yperiodalignment):(F=h,I="y",D=w,R="x",N=!!_.xperiodalignment);var z=i(_,R,D,p[S]),G=z[0],Y=z[1],ee=T.distinctVals(G,D),Z=ee.vals,X=ee.minDiff/2,ne,ce,Q,K,U,H,q=(_.boxpoints||_.points)==="all"?T.identity:function(zt){return zt.v<ne.lf||zt.v>ne.uf};if(_._hasPreCompStats){var re=_[I],j=function(zt){return F.d2c((_[zt]||[])[E])},$=1/0,ie=-1/0;for(E=0;E<_._length;E++){var oe=G[E];if(!!m(oe)){if(ne={},ne.pos=ne[R]=oe,N&&Y&&(ne.orig_p=Y[E]),ne.q1=j("q1"),ne.med=j("median"),ne.q3=j("q3"),ce=[],re&&T.isArrayOrTypedArray(re[E]))for(P=0;P<re[E].length;P++)H=F.d2c(re[E][P]),H!==e&&(U={v:H,i:[E,P]},s(U,_,[E,P]),ce.push(U));if(ne.pts=ce.sort(b),Q=ne[I]=ce.map(g),K=Q.length,ne.med!==e&&ne.q1!==e&&ne.q3!==e&&ne.med>=ne.q1&&ne.q3>=ne.med){var ae=j("lowerfence");ne.lf=ae!==e&&ae<=ne.q1?ae:d(ne,Q,K);var se=j("upperfence");ne.uf=se!==e&&se>=ne.q3?se:f(ne,Q,K);var _e=j("mean");ne.mean=_e!==e?_e:K?T.mean(Q,K):(ne.q1+ne.q3)/2;var ue=j("sd");ne.sd=_e!==e&&ue>=0?ue:K?T.stdev(Q,K,ne.mean):ne.q3-ne.q1,ne.lo=y(ne),ne.uo=l(ne);var ye=j("notchspan");ye=ye!==e&&ye>0?ye:x(ne,K),ne.ln=ne.med-ye,ne.un=ne.med+ye;var xe=ne.lf,me=ne.uf;_.boxpoints&&Q.length&&(xe=Math.min(xe,Q[0]),me=Math.max(me,Q[K-1])),_.notched&&(xe=Math.min(xe,ne.ln),me=Math.max(me,ne.un)),ne.min=xe,ne.max=me}else{T.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+ne.q1,"median = "+ne.med,"q3 = "+ne.q3].join(`
`));var be;ne.med!==e?be=ne.med:ne.q1!==e?ne.q3!==e?be=(ne.q1+ne.q3)/2:be=ne.q1:ne.q3!==e?be=ne.q3:be=0,ne.med=be,ne.q1=ne.q3=be,ne.lf=ne.uf=be,ne.mean=ne.sd=be,ne.ln=ne.un=be,ne.min=ne.max=be}$=Math.min($,ne.min),ie=Math.max(ie,ne.max),ne.pts2=ce.filter(q),L.push(ne)}}_._extremes[F._id]=c.findExtremes(F,[$,ie],{padded:!0})}else{var ke=F.makeCalcdata(_,I),De=n(Z,X),Ve=Z.length,Ae=r(Ve);for(E=0;E<_._length;E++)if(H=ke[E],!!m(H)){var Le=T.findBin(G[E],De);Le>=0&&Le<Ve&&(U={v:H,i:E},s(U,_,E),Ae[Le].push(U))}var je=1/0,Ye=-1/0,ze=_.quartilemethod,Ie=ze==="exclusive",We=ze==="inclusive";for(E=0;E<Ve;E++)if(Ae[E].length>0){if(ne={},ne.pos=ne[R]=Z[E],ce=ne.pts=Ae[E].sort(b),Q=ne[I]=ce.map(g),K=Q.length,ne.min=Q[0],ne.max=Q[K-1],ne.mean=T.mean(Q,K),ne.sd=T.stdev(Q,K,ne.mean),ne.med=T.interp(Q,.5),K%2&&(Ie||We)){var pt,Ft;Ie?(pt=Q.slice(0,K/2),Ft=Q.slice(K/2+1)):We&&(pt=Q.slice(0,K/2+1),Ft=Q.slice(K/2)),ne.q1=T.interp(pt,.5),ne.q3=T.interp(Ft,.5)}else ne.q1=T.interp(Q,.25),ne.q3=T.interp(Q,.75);ne.lf=d(ne,Q,K),ne.uf=f(ne,Q,K),ne.lo=y(ne),ne.uo=l(ne);var Qt=x(ne,K);ne.ln=ne.med-Qt,ne.un=ne.med+Qt,je=Math.min(je,ne.ln),Ye=Math.max(Ye,ne.un),ne.pts2=ce.filter(q),L.push(ne)}_._extremes[F._id]=c.findExtremes(F,_.notched?ke.concat([je,Ye]):ke,{padded:!0})}return o(L,_),L.length>0?(L[0].t={num:p[S],dPos:X,posLetter:R,valLetter:I,labels:{med:a(M,"median:"),min:a(M,"min:"),q1:a(M,"q1:"),q3:a(M,"q3:"),max:a(M,"max:"),mean:_.boxmean==="sd"?a(M,"mean \xB1 \u03C3:"):a(M,"mean:"),lf:a(M,"lower fence:"),uf:a(M,"upper fence:")}},p[S]++,L):[{t:{empty:!0}}]};function i(u,M,_,p){var w=M in u,h=M+"0"in u,L="d"+M in u;if(w||h&&L){var S=_.makeCalcdata(u,M),E=A(u,_,M,S).vals;return[E,S]}var P;h?P=u[M+"0"]:"name"in u&&(_.type==="category"||m(u.name)&&["linear","log"].indexOf(_.type)!==-1||T.isDateTime(u.name)&&_.type==="date")?P=u.name:P=p;for(var F=_.type==="multicategory"?_.r2c_just_indices(P):_.d2c(P,0,u[M+"calendar"]),I=u._length,D=new Array(I),R=0;R<I;R++)D[R]=F;return[D]}function n(u,M){for(var _=u.length,p=new Array(_+1),w=0;w<_;w++)p[w]=u[w]-M;return p[_]=u[_-1]+M,p}function r(u){for(var M=new Array(u),_=0;_<u;_++)M[_]=[];return M}var v={text:"tx",hovertext:"htx"};function s(u,M,_){for(var p in v)T.isArrayOrTypedArray(M[p])&&(Array.isArray(_)?T.isArrayOrTypedArray(M[p][_[0]])&&(u[v[p]]=M[p][_[0]][_[1]]):u[v[p]]=M[p][_])}function o(u,M){if(T.isArrayOrTypedArray(M.selectedpoints))for(var _=0;_<u.length;_++){for(var p=u[_].pts||[],w={},h=0;h<p.length;h++)w[p[h].i]=h;T.tagSelected(p,M,w)}}function b(u,M){return u.v-M.v}function g(u){return u.v}function d(u,M,_){return _===0?u.q1:Math.min(u.q1,M[Math.min(T.findBin(2.5*u.q1-1.5*u.q3,M,!0)+1,_-1)])}function f(u,M,_){return _===0?u.q3:Math.max(u.q3,M[Math.max(T.findBin(2.5*u.q3-1.5*u.q1,M),0)])}function y(u){return 4*u.q1-3*u.q3}function l(u){return 4*u.q3-3*u.q1}function x(u,M){return M===0?0:1.57*(u.q3-u.q1)/Math.sqrt(M)}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"fast-isnumeric":190}],684:[function(t,B,V){var m=t("../../plots/cartesian/axes"),c=t("../../lib"),A=t("../../plots/cartesian/constraints").getAxisGroup,T=["v","h"];function e(i,n){for(var r=i.calcdata,v=n.xaxis,s=n.yaxis,o=0;o<T.length;o++){for(var b=T[o],g=b==="h"?s:v,d=[],f=0;f<r.length;f++){var y=r[f],l=y[0].t,x=y[0].trace;x.visible===!0&&(x.type==="box"||x.type==="candlestick")&&!l.empty&&(x.orientation||"v")===b&&x.xaxis===v._id&&x.yaxis===s._id&&d.push(f)}a("box",i,d,g)}}function a(i,n,r,v){var s=n.calcdata,o=n._fullLayout,b=v._id,g=b.charAt(0),d,f,y,l=[],x=0;for(d=0;d<r.length;d++)for(y=s[r[d]],f=0;f<y.length;f++)l.push(v.c2l(y[f].pos,!0)),x+=(y[f].pts2||[]).length;if(!!l.length){var u=c.distinctVals(l);(v.type==="category"||v.type==="multicategory")&&(u.minDiff=1);var M=u.minDiff/2;m.minDtick(v,u.minDiff,u.vals[0],!0);var _=i==="violin"?"_numViolins":"_numBoxes",p=o[_],w=o[i+"mode"]==="group"&&p>1,h=1-o[i+"gap"],L=1-o[i+"groupgap"];for(d=0;d<r.length;d++){y=s[r[d]];var S=y[0].trace,E=y[0].t,P=S.width,F=S.side,I,D,R,N;if(P)I=D=N=P/2,R=0;else if(I=M,w){var z=A(o,v._id)+S.orientation,G=o._alignmentOpts[z]||{},Y=G[S.alignmentgroup]||{},ee=Object.keys(Y.offsetGroups||{}).length,Z=ee||p,X=ee?S._offsetIndex:E.num;D=I*h*L/Z,R=2*I*(-.5+(X+.5)/Z)*h,N=I*h/Z}else D=I*h*L,R=0,N=I;E.dPos=I,E.bPos=R,E.bdPos=D,E.wHover=N;var ne,ce,Q=R+D,K,U,H,q,re,j,$=Boolean(P),ie=(S.boxpoints||S.points)&&x>0;if(F==="positive"?(ne=I*(P?1:.5),K=Q,ce=K=R):F==="negative"?(ne=K=R,ce=I*(P?1:.5),U=Q):(ne=ce=I,K=U=Q),ie){var oe=S.pointpos,ae=S.jitter,se=S.marker.size/2,_e=0;oe+ae>=0&&(_e=Q*(oe+ae),_e>ne?($=!0,re=se,H=_e):_e>K&&(re=se,H=ne)),_e<=ne&&(H=ne);var ue=0;oe-ae<=0&&(ue=-Q*(oe-ae),ue>ce?($=!0,j=se,q=ue):ue>U&&(j=se,q=ce)),ue<=ce&&(q=ce)}else H=ne,q=ce;var ye=new Array(y.length);for(f=0;f<y.length;f++)ye[f]=y[f].pos;S._extremes[b]=m.findExtremes(v,ye,{padded:$,vpadminus:q,vpadplus:H,vpadLinearized:!0,ppadminus:{x:j,y:re}[g],ppadplus:{x:re,y:j}[g]})}}}B.exports={crossTraceCalc:e,setPositionOffset:a}},{"../../lib":515,"../../plots/cartesian/axes":566,"../../plots/cartesian/constraints":574}],685:[function(t,B,V){var m=t("../../lib"),c=t("../../registry"),A=t("../../components/color"),T=t("../scatter/period_defaults"),e=t("../bar/defaults").handleGroupingDefaults,a=t("../../plots/cartesian/axis_autotype"),i=t("./attributes");function n(o,b,g,d){function f(w,h){return m.coerce(o,b,i,w,h)}if(r(o,b,f,d),b.visible!==!1){T(o,b,d,f),f("xhoverformat"),f("yhoverformat");var y=b._hasPreCompStats;y&&(f("lowerfence"),f("upperfence")),f("line.color",(o.marker||{}).color||g),f("line.width"),f("fillcolor",A.addOpacity(b.line.color,.5));var l=!1;if(y){var x=f("mean"),u=f("sd");x&&x.length&&(l=!0,u&&u.length&&(l="sd"))}f("boxmean",l),f("whiskerwidth"),f("width"),f("quartilemethod");var M=!1;if(y){var _=f("notchspan");_&&_.length&&(M=!0)}else m.validate(o.notchwidth,i.notchwidth)&&(M=!0);var p=f("notched",M);p&&f("notchwidth"),v(o,b,f,{prefix:"box"})}}function r(o,b,g,d){function f(ee){var Z=0;return ee&&ee.length&&(Z+=1,m.isArrayOrTypedArray(ee[0])&&ee[0].length&&(Z+=1)),Z}function y(ee){return m.validate(o[ee],i[ee])}var l=g("y"),x=g("x"),u;if(b.type==="box"){var M=g("q1"),_=g("median"),p=g("q3");b._hasPreCompStats=M&&M.length&&_&&_.length&&p&&p.length,u=Math.min(m.minRowLength(M),m.minRowLength(_),m.minRowLength(p))}var w=f(l),h=f(x),L=w&&m.minRowLength(l),S=h&&m.minRowLength(x),E=d.calendar,P={autotypenumbers:d.autotypenumbers},F,I;if(b._hasPreCompStats)switch(String(h)+String(w)){case"00":var D=y("x0")||y("dx"),R=y("y0")||y("dy");R&&!D?F="h":F="v",I=u;break;case"10":F="v",I=Math.min(u,S);break;case"20":F="h",I=Math.min(u,x.length);break;case"01":F="h",I=Math.min(u,L);break;case"02":F="v",I=Math.min(u,l.length);break;case"12":F="v",I=Math.min(u,S,l.length);break;case"21":F="h",I=Math.min(u,x.length,L);break;case"11":I=0;break;case"22":var N=!1,z;for(z=0;z<x.length;z++)if(a(x[z],E,P)==="category"){N=!0;break}if(N)F="v",I=Math.min(u,S,l.length);else{for(z=0;z<l.length;z++)if(a(l[z],E,P)==="category"){N=!0;break}N?(F="h",I=Math.min(u,x.length,L)):(F="v",I=Math.min(u,S,l.length))}break}else w>0?(F="v",h>0?I=Math.min(S,L):I=Math.min(L)):h>0?(F="h",I=Math.min(S)):I=0;if(!I){b.visible=!1;return}b._length=I;var G=g("orientation",F);b._hasPreCompStats?G==="v"&&h===0?(g("x0",0),g("dx",1)):G==="h"&&w===0&&(g("y0",0),g("dy",1)):G==="v"&&h===0?g("x0"):G==="h"&&w===0&&g("y0");var Y=c.getComponentMethod("calendars","handleTraceDefaults");Y(o,b,["x","y"],d)}function v(o,b,g,d){var f=d.prefix,y=m.coerce2(o,b,i,"marker.outliercolor"),l=g("marker.line.outliercolor"),x="outliers";b._hasPreCompStats?x="all":(y||l)&&(x="suspectedoutliers");var u=g(f+"points",x);u?(g("jitter",u==="all"?.3:0),g("pointpos",u==="all"?-1.5:0),g("marker.symbol"),g("marker.opacity"),g("marker.size"),g("marker.angle"),g("marker.color",b.line.color),g("marker.line.color"),g("marker.line.width"),u==="suspectedoutliers"&&(g("marker.line.outliercolor",b.marker.color),g("marker.line.outlierwidth")),g("selected.marker.color"),g("unselected.marker.color"),g("selected.marker.size"),g("unselected.marker.size"),g("text"),g("hovertext")):delete b.marker;var M=g("hoveron");(M==="all"||M.indexOf("points")!==-1)&&g("hovertemplate"),m.coerceSelectionMarkerOpacity(b,g)}function s(o,b){var g,d;function f(x){return m.coerce(d._input,d,i,x)}for(var y=0;y<o.length;y++){d=o[y];var l=d.type;(l==="box"||l==="violin")&&(g=d._input,b[l+"mode"]==="group"&&e(g,d,b,f))}}B.exports={supplyDefaults:n,crossTraceDefaults:s,handleSampleDefaults:r,handlePointsDefaults:v}},{"../../components/color":367,"../../lib":515,"../../plots/cartesian/axis_autotype":567,"../../registry":647,"../bar/defaults":661,"../scatter/period_defaults":956,"./attributes":682}],686:[function(t,B,V){B.exports=function(c,A){return A.hoverOnBox&&(c.hoverOnBox=A.hoverOnBox),"xVal"in A&&(c.x=A.xVal),"yVal"in A&&(c.y=A.yVal),A.xa&&(c.xaxis=A.xa),A.ya&&(c.yaxis=A.ya),c}},{}],687:[function(t,B,V){var m=t("../../plots/cartesian/axes"),c=t("../../lib"),A=t("../../components/fx"),T=t("../../components/color"),e=c.fillText;function a(r,v,s,o){var b=r.cd,g=b[0].trace,d=g.hoveron,f=[],y;return d.indexOf("boxes")!==-1&&(f=f.concat(i(r,v,s,o))),d.indexOf("points")!==-1&&(y=n(r,v,s)),o==="closest"?y?[y]:f:(y&&f.push(y),f)}function i(r,v,s,o){var b=r.cd,g=r.xa,d=r.ya,f=b[0].trace,y=b[0].t,l=f.type==="violin",x,u,M,_,p,w,h,L,S,E,P,F=y.bdPos,I,D,R=y.wHover,N=function(ue){return M.c2l(ue.pos)+y.bPos-M.c2l(w)};l&&f.side!=="both"?(f.side==="positive"&&(S=function(ue){var ye=N(ue);return A.inbox(ye,ye+R,E)},I=F,D=0),f.side==="negative"&&(S=function(ue){var ye=N(ue);return A.inbox(ye-R,ye,E)},I=0,D=F)):(S=function(ue){var ye=N(ue);return A.inbox(ye-R,ye+R,E)},I=D=F);var z;l?z=function(ue){return A.inbox(ue.span[0]-p,ue.span[1]-p,E)}:z=function(ue){return A.inbox(ue.min-p,ue.max-p,E)},f.orientation==="h"?(p=v,w=s,h=z,L=S,x="y",M=d,u="x",_=g):(p=s,w=v,h=S,L=z,x="x",M=g,u="y",_=d);var G=Math.min(1,F/Math.abs(M.r2c(M.range[1])-M.r2c(M.range[0])));E=r.maxHoverDistance-G,P=r.maxSpikeDistance-G;function Y(ue){return(h(ue)+L(ue))/2}var ee=A.getDistanceFunction(o,h,L,Y);if(A.getClosest(b,ee,r),r.index===!1)return[];var Z=b[r.index],X=f.line.color,ne=(f.marker||{}).color;T.opacity(X)&&f.line.width?r.color=X:T.opacity(ne)&&f.boxpoints?r.color=ne:r.color=f.fillcolor,r[x+"0"]=M.c2p(Z.pos+y.bPos-D,!0),r[x+"1"]=M.c2p(Z.pos+y.bPos+I,!0),r[x+"LabelVal"]=Z.orig_p!==void 0?Z.orig_p:Z.pos;var ce=x+"Spike";r.spikeDistance=Y(Z)*P/E,r[ce]=M.c2p(Z.pos,!0);var Q=f.boxmean||(f.meanline||{}).visible,K=f.boxpoints||f.points,U=K&&Q?["max","uf","q3","med","mean","q1","lf","min"]:K&&!Q?["max","uf","q3","med","q1","lf","min"]:!K&&Q?["max","q3","med","mean","q1","min"]:["max","q3","med","q1","min"],H=_.range[1]<_.range[0];f.orientation===(H?"v":"h")&&U.reverse();for(var q=r.spikeDistance,re=r[ce],j=[],$=0;$<U.length;$++){var ie=U[$];if(ie in Z){var oe=Z[ie],ae=_.c2p(oe,!0),se=c.extendFlat({},r);se.attr=ie,se[u+"0"]=se[u+"1"]=ae,se[u+"LabelVal"]=oe,se[u+"Label"]=(y.labels?y.labels[ie]+" ":"")+m.hoverLabelText(_,oe,f[u+"hoverformat"]),se.hoverOnBox=!0,ie==="mean"&&"sd"in Z&&f.boxmean==="sd"&&(se[u+"err"]=Z.sd),se.hovertemplate=!1,j.push(se)}}r.name="",r.spikeDistance=void 0,r[ce]=void 0;for(var _e=0;_e<j.length;_e++)j[_e].attr!=="med"?(j[_e].name="",j[_e].spikeDistance=void 0,j[_e][ce]=void 0):(j[_e].spikeDistance=q,j[_e][ce]=re);return j}function n(r,v,s){for(var o=r.cd,b=r.xa,g=r.ya,d=o[0].trace,f=b.c2p(v),y=g.c2p(s),l,x=function(z){var G=Math.max(3,z.mrc||0);return Math.max(Math.abs(b.c2p(z.x)-f)-G,1-3/G)},u=function(z){var G=Math.max(3,z.mrc||0);return Math.max(Math.abs(g.c2p(z.y)-y)-G,1-3/G)},M=A.quadrature(x,u),_=!1,p,w,h=0;h<o.length;h++){p=o[h];for(var L=0;L<(p.pts||[]).length;L++){w=p.pts[L];var S=M(w);S<=r.distance&&(r.distance=S,_=[h,L])}}if(!_)return!1;p=o[_[0]],w=p.pts[_[1]];var E=b.c2p(w.x,!0),P=g.c2p(w.y,!0),F=w.mrc||1;l=c.extendFlat({},r,{index:w.i,color:(d.marker||{}).color,name:d.name,x0:E-F,x1:E+F,y0:P-F,y1:P+F,spikeDistance:r.distance,hovertemplate:d.hovertemplate});var I=p.orig_p,D=I!==void 0?I:p.pos,R;d.orientation==="h"?(R=g,l.xLabelVal=w.x,l.yLabelVal=D):(R=b,l.xLabelVal=D,l.yLabelVal=w.y);var N=R._id.charAt(0);return l[N+"Spike"]=R.c2p(p.pos,!0),e(w,d,l),l}B.exports={hoverPoints:a,hoverOnBoxes:i,hoverOnPoints:n}},{"../../components/color":367,"../../components/fx":407,"../../lib":515,"../../plots/cartesian/axes":566}],688:[function(t,B,V){B.exports={attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyDefaults:t("./defaults").supplyDefaults,crossTraceDefaults:t("./defaults").crossTraceDefaults,supplyLayoutDefaults:t("./layout_defaults").supplyLayoutDefaults,calc:t("./calc"),crossTraceCalc:t("./cross_trace_calc").crossTraceCalc,plot:t("./plot").plot,style:t("./style").style,styleOnSelect:t("./style").styleOnSelect,hoverPoints:t("./hover").hoverPoints,eventData:t("./event_data"),selectPoints:t("./select"),moduleType:"trace",name:"box",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"./attributes":682,"./calc":683,"./cross_trace_calc":684,"./defaults":685,"./event_data":686,"./hover":687,"./layout_attributes":689,"./layout_defaults":690,"./plot":691,"./select":692,"./style":693}],689:[function(t,B,V){B.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},{}],690:[function(t,B,V){var m=t("../../registry"),c=t("../../lib"),A=t("./layout_attributes");function T(a,i,n,r,v){for(var s=v+"Layout",o=!1,b=0;b<n.length;b++){var g=n[b];if(m.traceIs(g,s)){o=!0;break}}!o||(r(v+"mode"),r(v+"gap"),r(v+"groupgap"))}function e(a,i,n){function r(v,s){return c.coerce(a,i,A,v,s)}T(a,i,n,r,"box")}B.exports={supplyLayoutDefaults:e,_supply:T}},{"../../lib":515,"../../registry":647,"./layout_attributes":689}],691:[function(t,B,V){var m=t("@plotly/d3"),c=t("../../lib"),A=t("../../components/drawing"),T=5,e=.01;function a(v,s,o,b){var g=s.xaxis,d=s.yaxis;c.makeTraceGroups(b,o,"trace boxes").each(function(f){var y=m.select(this),l=f[0],x=l.t,u=l.trace;if(x.wdPos=x.bdPos*u.whiskerwidth,u.visible!==!0||x.empty){y.remove();return}var M,_;u.orientation==="h"?(M=d,_=g):(M=g,_=d),i(y,{pos:M,val:_},u,x),n(y,{x:g,y:d},u,x),r(y,{pos:M,val:_},u,x)})}function i(v,s,o,b){var g=o.orientation==="h",d=s.val,f=s.pos,y=!!f.rangebreaks,l=b.bPos,x=b.wdPos||0,u=b.bPosPxOffset||0,M=o.whiskerwidth||0,_=o.notched||!1,p=_?1-2*o.notchwidth:1,w,h;Array.isArray(b.bdPos)?(w=b.bdPos[0],h=b.bdPos[1]):(w=b.bdPos,h=b.bdPos);var L=v.selectAll("path.box").data(o.type!=="violin"||o.box.visible?c.identity:[]);L.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","box"),L.exit().remove(),L.each(function(S){if(S.empty)return"M0,0Z";var E=f.c2l(S.pos+l,!0),P=f.l2p(E-w)+u,F=f.l2p(E+h)+u,I=y?(P+F)/2:f.l2p(E)+u,D=o.whiskerwidth,R=y?P*D+(1-D)*I:f.l2p(E-x)+u,N=y?F*D+(1-D)*I:f.l2p(E+x)+u,z=f.l2p(E-w*p)+u,G=f.l2p(E+h*p)+u,Y=d.c2p(S.q1,!0),ee=d.c2p(S.q3,!0),Z=c.constrain(d.c2p(S.med,!0),Math.min(Y,ee)+1,Math.max(Y,ee)-1),X=S.lf===void 0||o.boxpoints===!1,ne=d.c2p(X?S.min:S.lf,!0),ce=d.c2p(X?S.max:S.uf,!0),Q=d.c2p(S.ln,!0),K=d.c2p(S.un,!0);g?m.select(this).attr("d","M"+Z+","+z+"V"+G+"M"+Y+","+P+"V"+F+(_?"H"+Q+"L"+Z+","+G+"L"+K+","+F:"")+"H"+ee+"V"+P+(_?"H"+K+"L"+Z+","+z+"L"+Q+","+P:"")+"ZM"+Y+","+I+"H"+ne+"M"+ee+","+I+"H"+ce+(M===0?"":"M"+ne+","+R+"V"+N+"M"+ce+","+R+"V"+N)):m.select(this).attr("d","M"+z+","+Z+"H"+G+"M"+P+","+Y+"H"+F+(_?"V"+Q+"L"+G+","+Z+"L"+F+","+K:"")+"V"+ee+"H"+P+(_?"V"+K+"L"+z+","+Z+"L"+P+","+Q:"")+"ZM"+I+","+Y+"V"+ne+"M"+I+","+ee+"V"+ce+(M===0?"":"M"+R+","+ne+"H"+N+"M"+R+","+ce+"H"+N))})}function n(v,s,o,b){var g=s.x,d=s.y,f=b.bdPos,y=b.bPos,l=o.boxpoints||o.points;c.seedPseudoRandom();var x=function(_){return _.forEach(function(p){p.t=b,p.trace=o}),_},u=v.selectAll("g.points").data(l?x:[]);u.enter().append("g").attr("class","points"),u.exit().remove();var M=u.selectAll("path").data(function(_){var p,w=_.pts2,h=Math.max((_.max-_.min)/10,_.q3-_.q1),L=h*1e-9,S=h*e,E=[],P=0,F;if(o.jitter){if(h===0)for(P=1,E=new Array(w.length),p=0;p<w.length;p++)E[p]=1;else for(p=0;p<w.length;p++){var I=Math.max(0,p-T),D=w[I].v,R=Math.min(w.length-1,p+T),N=w[R].v;l!=="all"&&(w[p].v<_.lf?N=Math.min(N,_.lf):D=Math.max(D,_.uf));var z=Math.sqrt(S*(R-I)/(N-D+L))||0;z=c.constrain(Math.abs(z),0,1),E.push(z),P=Math.max(z,P)}F=o.jitter*2/(P||1)}for(p=0;p<w.length;p++){var G=w[p],Y=G.v,ee=o.jitter?F*E[p]*(c.pseudoRandom()-.5):0,Z=_.pos+y+f*(o.pointpos+ee);o.orientation==="h"?(G.y=Z,G.x=Y):(G.x=Z,G.y=Y),l==="suspectedoutliers"&&Y<_.uo&&Y>_.lo&&(G.so=!0)}return w});M.enter().append("path").classed("point",!0),M.exit().remove(),M.call(A.translatePoints,g,d)}function r(v,s,o,b){var g=s.val,d=s.pos,f=!!d.rangebreaks,y=b.bPos,l=b.bPosPxOffset||0,x=o.boxmean||(o.meanline||{}).visible,u,M;Array.isArray(b.bdPos)?(u=b.bdPos[0],M=b.bdPos[1]):(u=b.bdPos,M=b.bdPos);var _=v.selectAll("path.mean").data(o.type==="box"&&o.boxmean||o.type==="violin"&&o.box.visible&&o.meanline.visible?c.identity:[]);_.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),_.exit().remove(),_.each(function(p){var w=d.c2l(p.pos+y,!0),h=d.l2p(w-u)+l,L=d.l2p(w+M)+l,S=f?(h+L)/2:d.l2p(w)+l,E=g.c2p(p.mean,!0),P=g.c2p(p.mean-p.sd,!0),F=g.c2p(p.mean+p.sd,!0);o.orientation==="h"?m.select(this).attr("d","M"+E+","+h+"V"+L+(x==="sd"?"m0,0L"+P+","+S+"L"+E+","+h+"L"+F+","+S+"Z":"")):m.select(this).attr("d","M"+h+","+E+"H"+L+(x==="sd"?"m0,0L"+S+","+P+"L"+h+","+E+"L"+S+","+F+"Z":""))})}B.exports={plot:a,plotBoxAndWhiskers:i,plotPoints:n,plotBoxMean:r}},{"../../components/drawing":389,"../../lib":515,"@plotly/d3":58}],692:[function(t,B,V){B.exports=function(c,A){var T=c.cd,e=c.xaxis,a=c.yaxis,i=[],n,r;if(A===!1)for(n=0;n<T.length;n++)for(r=0;r<(T[n].pts||[]).length;r++)T[n].pts[r].selected=0;else for(n=0;n<T.length;n++)for(r=0;r<(T[n].pts||[]).length;r++){var v=T[n].pts[r],s=e.c2p(v.x),o=a.c2p(v.y);A.contains([s,o],null,v.i,c)?(i.push({pointNumber:v.i,x:e.c2d(v.x),y:a.c2d(v.y)}),v.selected=1):v.selected=0}return i}},{}],693:[function(t,B,V){var m=t("@plotly/d3"),c=t("../../components/color"),A=t("../../components/drawing");function T(a,i,n){var r=n||m.select(a).selectAll("g.trace.boxes");r.style("opacity",function(v){return v[0].trace.opacity}),r.each(function(v){var s=m.select(this),o=v[0].trace,b=o.line.width;function g(y,l,x,u){y.style("stroke-width",l+"px").call(c.stroke,x).call(c.fill,u)}var d=s.selectAll("path.box");if(o.type==="candlestick")d.each(function(y){if(!y.empty){var l=m.select(this),x=o[y.dir];g(l,x.line.width,x.line.color,x.fillcolor),l.style("opacity",o.selectedpoints&&!y.selected?.3:1)}});else{g(d,b,o.line.color,o.fillcolor),s.selectAll("path.mean").style({"stroke-width":b,"stroke-dasharray":2*b+"px,"+b+"px"}).call(c.stroke,o.line.color);var f=s.selectAll("path.point");A.pointStyle(f,o,a)}})}function e(a,i,n){var r=i[0].trace,v=n.selectAll("path.point");r.selectedpoints?A.selectedPointStyle(v,r):A.pointStyle(v,r,a)}B.exports={style:T,styleOnSelect:e}},{"../../components/color":367,"../../components/drawing":389,"@plotly/d3":58}],694:[function(t,B,V){var m=t("../../lib").extendFlat,c=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,A=t("../ohlc/attributes"),T=t("../box/attributes");function e(a){return{line:{color:m({},T.line.color,{dflt:a}),width:T.line.width,editType:"style"},fillcolor:T.fillcolor,editType:"style"}}B.exports={xperiod:A.xperiod,xperiod0:A.xperiod0,xperiodalignment:A.xperiodalignment,xhoverformat:c("x"),yhoverformat:c("y"),x:A.x,open:A.open,high:A.high,low:A.low,close:A.close,line:{width:m({},T.line.width,{}),editType:"style"},increasing:e(A.increasing.line.color.dflt),decreasing:e(A.decreasing.line.color.dflt),text:A.text,hovertext:A.hovertext,whiskerwidth:m({},T.whiskerwidth,{dflt:0}),hoverlabel:A.hoverlabel}},{"../../lib":515,"../../plots/cartesian/axis_format_attributes":569,"../box/attributes":682,"../ohlc/attributes":881}],695:[function(t,B,V){var m=t("../../lib"),c=t("../../plots/cartesian/axes"),A=t("../../plots/cartesian/align_period"),T=t("../ohlc/calc").calcCommon;B.exports=function(a,i){var n=a._fullLayout,r=c.getFromId(a,i.xaxis),v=c.getFromId(a,i.yaxis),s=r.makeCalcdata(i,"x"),o=A(i,r,"x",s).vals,b=T(a,i,s,o,v,e);return b.length?(m.extendFlat(b[0].t,{num:n._numBoxes,dPos:m.distinctVals(o).minDiff/2,posLetter:"x",valLetter:"y"}),n._numBoxes++,b):[{t:{empty:!0}}]};function e(a,i,n,r){return{min:n,q1:Math.min(a,r),med:r,q3:Math.max(a,r),max:i}}},{"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"../ohlc/calc":882}],696:[function(t,B,V){var m=t("../../lib"),c=t("../../components/color"),A=t("../ohlc/ohlc_defaults"),T=t("../scatter/period_defaults"),e=t("./attributes");B.exports=function(n,r,v,s){function o(g,d){return m.coerce(n,r,e,g,d)}var b=A(n,r,o,s);if(!b){r.visible=!1;return}T(n,r,s,o,{x:!0}),o("xhoverformat"),o("yhoverformat"),o("line.width"),a(n,r,o,"increasing"),a(n,r,o,"decreasing"),o("text"),o("hovertext"),o("whiskerwidth"),s._requestRangeslider[r.xaxis]=!0};function a(i,n,r,v){var s=r(v+".line.color");r(v+".line.width",n.line.width),r(v+".fillcolor",c.addOpacity(s,.5))}},{"../../components/color":367,"../../lib":515,"../ohlc/ohlc_defaults":886,"../scatter/period_defaults":956,"./attributes":694}],697:[function(t,B,V){B.exports={moduleType:"trace",name:"candlestick",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:t("./attributes"),layoutAttributes:t("../box/layout_attributes"),supplyLayoutDefaults:t("../box/layout_defaults").supplyLayoutDefaults,crossTraceCalc:t("../box/cross_trace_calc").crossTraceCalc,supplyDefaults:t("./defaults"),calc:t("./calc"),plot:t("../box/plot").plot,layerName:"boxlayer",style:t("../box/style").style,hoverPoints:t("../ohlc/hover").hoverPoints,selectPoints:t("../ohlc/select")}},{"../../plots/cartesian":578,"../box/cross_trace_calc":684,"../box/layout_attributes":689,"../box/layout_defaults":690,"../box/plot":691,"../box/style":693,"../ohlc/hover":884,"../ohlc/select":888,"./attributes":694,"./calc":695,"./defaults":696}],698:[function(t,B,V){var m=t("./axis_defaults"),c=t("../../plot_api/plot_template");B.exports=function(e,a,i,n,r){var v=n("a");v||(n("da"),n("a0"));var s=n("b");s||(n("db"),n("b0")),A(e,a,i,r)};function A(T,e,a,i){var n=["aaxis","baxis"];n.forEach(function(r){var v=r.charAt(0),s=T[r]||{},o=c.newContainer(e,r),b={noTicklabelstep:!0,tickfont:"x",id:v+"axis",letter:v,font:e.font,name:r,data:T[v],calendar:e.calendar,dfltColor:i,bgColor:a.paper_bgcolor,autotypenumbersDflt:a.autotypenumbers,fullLayout:a};m(s,o,b),o._categories=o._categories||[],!T[r]&&s.type!=="-"&&(T[r]={type:s.type})})}},{"../../plot_api/plot_template":555,"./axis_defaults":703}],699:[function(t,B,V){var m=t("../../lib").isArrayOrTypedArray;B.exports=function(A){return c(A,0)};function c(A,T){if(!m(A)||T>=10)return null;for(var e=1/0,a=-1/0,i=A.length,n=0;n<i;n++){var r=A[n];if(m(r)){var v=c(r,T+1);v&&(e=Math.min(v[0],e),a=Math.max(v[1],a))}else e=Math.min(r,e),a=Math.max(r,a)}return[e,a]}},{"../../lib":515}],700:[function(t,B,V){var m=t("../../plots/font_attributes"),c=t("./axis_attributes"),A=t("../../components/color/attributes"),T=m({editType:"calc"});T.family.dflt='"Open Sans", verdana, arial, sans-serif',T.size.dflt=12,T.color.dflt=A.defaultLine,B.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:c,baxis:c,font:T,color:{valType:"color",dflt:A.defaultLine,editType:"plot"},transforms:void 0}},{"../../components/color/attributes":366,"../../plots/font_attributes":594,"./axis_attributes":702}],701:[function(t,B,V){var m=t("../../lib").isArrayOrTypedArray;B.exports=function(c,A,T,e){var a,i,n,r,v,s,o,b,g,d,f,y,l,x=m(T)?"a":"b",u=x==="a"?c.aaxis:c.baxis,M=u.smoothing,_=x==="a"?c.a2i:c.b2j,p=x==="a"?T:e,w=x==="a"?e:T,h=x==="a"?A.a.length:A.b.length,L=x==="a"?A.b.length:A.a.length,S=Math.floor(x==="a"?c.b2j(w):c.a2i(w)),E=x==="a"?function(X){return c.evalxy([],X,S)}:function(X){return c.evalxy([],S,X)};M&&(n=Math.max(0,Math.min(L-2,S)),r=S-n,i=x==="a"?function(X,ne){return c.dxydi([],X,n,ne,r)}:function(X,ne){return c.dxydj([],n,X,r,ne)});var P=_(p[0]),F=_(p[1]),I=P<F?1:-1,D=(F-P)*1e-8,R=I>0?Math.floor:Math.ceil,N=I>0?Math.ceil:Math.floor,z=I>0?Math.min:Math.max,G=I>0?Math.max:Math.min,Y=R(P+D),ee=N(F-D);o=E(P);var Z=[[o]];for(a=Y;a*I<ee*I;a+=I)v=[],f=G(P,a),y=z(F,a+I),l=y-f,s=Math.max(0,Math.min(h-2,Math.floor(.5*(f+y)))),b=E(y),M&&(g=i(s,f-s),d=i(s,y-s),v.push([o[0]+g[0]/3*l,o[1]+g[1]/3*l]),v.push([b[0]-d[0]/3*l,b[1]-d[1]/3*l])),v.push(b),Z.push(v),o=b;return Z}},{"../../lib":515}],702:[function(t,B,V){var m=t("../../plots/font_attributes"),c=t("../../components/color/attributes"),A=t("../../plots/cartesian/layout_attributes"),T=t("../../plots/cartesian/axis_format_attributes").descriptionWithDates,e=t("../../plot_api/edit_types").overrideAll,a=t("../../components/drawing/attributes").dash,i=t("../../lib/extend").extendFlat;B.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:m({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:A.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},tickfont:m({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:T("tick label")},tickformatstops:e(A.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:c.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},griddash:i({},a,{editType:"calc"}),showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgriddash:i({},a,{editType:"calc"}),minorgridcolor:{valType:"color",dflt:c.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:m({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},{"../../components/color/attributes":366,"../../components/drawing/attributes":388,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/cartesian/axis_format_attributes":569,"../../plots/cartesian/layout_attributes":579,"../../plots/font_attributes":594}],703:[function(t,B,V){var m=t("./attributes"),c=t("../../components/color").addOpacity,A=t("../../registry"),T=t("../../lib"),e=t("../../plots/cartesian/tick_value_defaults"),a=t("../../plots/cartesian/tick_label_defaults"),i=t("../../plots/cartesian/prefix_suffix_defaults"),n=t("../../plots/cartesian/category_order_defaults"),r=t("../../plots/cartesian/set_convert"),v=t("../../plots/cartesian/axis_autotype");B.exports=function(b,g,d){var f=d.letter,y=d.font||{},l=m[f+"axis"];function x(Y,ee){return T.coerce(b,g,l,Y,ee)}function u(Y,ee){return T.coerce2(b,g,l,Y,ee)}d.name&&(g._name=d.name,g._id=d.name),x("autotypenumbers",d.autotypenumbersDflt);var M=x("type");if(M==="-"&&(d.data&&s(g,d.data),g.type==="-"?g.type="linear":M=b.type=g.type),x("smoothing"),x("cheatertype"),x("showticklabels"),x("labelprefix",f+" = "),x("labelsuffix"),x("showtickprefix"),x("showticksuffix"),x("separatethousands"),x("tickformat"),x("exponentformat"),x("minexponent"),x("showexponent"),x("categoryorder"),x("tickmode"),x("tickvals"),x("ticktext"),x("tick0"),x("dtick"),g.tickmode==="array"&&(x("arraytick0"),x("arraydtick")),x("labelpadding"),g._hovertitle=f,M==="date"){var _=A.getComponentMethod("calendars","handleDefaults");_(b,g,"calendar",d.calendar)}r(g,d.fullLayout),g.c2p=T.identity;var p=x("color",d.dfltColor),w=p===b.color?p:y.color,h=x("title.text");h&&(T.coerceFont(x,"title.font",{family:y.family,size:T.bigFont(y.size),color:w}),x("title.offset")),x("tickangle");var L=x("autorange",!g.isValidRange(b.range));L&&x("rangemode"),x("range"),g.cleanRange(),x("fixedrange"),e(b,g,x,M),i(b,g,x,M,d),a(b,g,x,M,d),n(b,g,x,{data:d.data,dataAttr:f});var S=u("gridcolor",c(p,.3)),E=u("gridwidth"),P=u("griddash"),F=x("showgrid");F||(delete g.gridcolor,delete g.gridwidth,delete g.griddash);var I=u("startlinecolor",p),D=u("startlinewidth",E),R=x("startline",g.showgrid||!!I||!!D);R||(delete g.startlinecolor,delete g.startlinewidth);var N=u("endlinecolor",p),z=u("endlinewidth",E),G=x("endline",g.showgrid||!!N||!!z);return G||(delete g.endlinecolor,delete g.endlinewidth),F?(x("minorgridcount"),x("minorgridwidth",E),x("minorgriddash",P),x("minorgridcolor",c(S,.06)),g.minorgridcount||(delete g.minorgridwidth,delete g.minorgriddash,delete g.minorgridcolor)):(delete g.gridcolor,delete g.gridwidth,delete g.griddash),g.showticklabels==="none"&&(delete g.tickfont,delete g.tickangle,delete g.showexponent,delete g.exponentformat,delete g.minexponent,delete g.tickformat,delete g.showticksuffix,delete g.showtickprefix),g.showticksuffix||delete g.ticksuffix,g.showtickprefix||delete g.tickprefix,x("tickmode"),g};function s(o,b){if(o.type==="-"){var g=o._id,d=g.charAt(0),f=d+"calendar",y=o[f];o.type=v(b,y,{autotypenumbers:o.autotypenumbers})}}},{"../../components/color":367,"../../lib":515,"../../plots/cartesian/axis_autotype":567,"../../plots/cartesian/category_order_defaults":571,"../../plots/cartesian/prefix_suffix_defaults":583,"../../plots/cartesian/set_convert":585,"../../plots/cartesian/tick_label_defaults":587,"../../plots/cartesian/tick_value_defaults":589,"../../registry":647,"./attributes":700}],704:[function(t,B,V){var m=t("../../plots/cartesian/axes"),c=t("../../lib").isArray1D,A=t("./cheater_basis"),T=t("./array_minmax"),e=t("./calc_gridlines"),a=t("./calc_labels"),i=t("./calc_clippath"),n=t("../heatmap/clean_2d_array"),r=t("./smooth_fill_2d_array"),v=t("../heatmap/convert_column_xyz"),s=t("./set_convert");B.exports=function(b,g){var d=m.getFromId(b,g.xaxis),f=m.getFromId(b,g.yaxis),y=g.aaxis,l=g.baxis,x=g.x,u=g.y,M=[];x&&c(x)&&M.push("x"),u&&c(u)&&M.push("y"),M.length&&v(g,y,l,"a","b",M);var _=g._a=g._a||g.a,p=g._b=g._b||g.b;x=g._x||g.x,u=g._y||g.y;var w={};if(g._cheater){var h=y.cheatertype==="index"?_.length:_,L=l.cheatertype==="index"?p.length:p;x=A(h,L,g.cheaterslope)}g._x=x=n(x),g._y=u=n(u),r(x,_,p),r(u,_,p),s(g),g.setScale();var S=T(x),E=T(u),P=.5*(S[1]-S[0]),F=.5*(S[1]+S[0]),I=.5*(E[1]-E[0]),D=.5*(E[1]+E[0]),R=1.3;return S=[F-P*R,F+P*R],E=[D-I*R,D+I*R],g._extremes[d._id]=m.findExtremes(d,S,{padded:!0}),g._extremes[f._id]=m.findExtremes(f,E,{padded:!0}),e(g,"a","b"),e(g,"b","a"),a(g,y),a(g,l),w.clipsegments=i(g._xctrl,g._yctrl,y,l),w.x=x,w.y=u,w.a=_,w.b=p,[w]}},{"../../lib":515,"../../plots/cartesian/axes":566,"../heatmap/clean_2d_array":803,"../heatmap/convert_column_xyz":805,"./array_minmax":699,"./calc_clippath":705,"./calc_gridlines":706,"./calc_labels":707,"./cheater_basis":709,"./set_convert":722,"./smooth_fill_2d_array":723}],705:[function(t,B,V){B.exports=function(c,A,T,e){var a,i,n,r=[],v=!!T.smoothing,s=!!e.smoothing,o=c[0].length-1,b=c.length-1;for(a=0,i=[],n=[];a<=o;a++)i[a]=c[0][a],n[a]=A[0][a];for(r.push({x:i,y:n,bicubic:v}),a=0,i=[],n=[];a<=b;a++)i[a]=c[a][o],n[a]=A[a][o];for(r.push({x:i,y:n,bicubic:s}),a=o,i=[],n=[];a>=0;a--)i[o-a]=c[b][a],n[o-a]=A[b][a];for(r.push({x:i,y:n,bicubic:v}),a=b,i=[],n=[];a>=0;a--)i[b-a]=c[a][0],n[b-a]=A[a][0];return r.push({x:i,y:n,bicubic:s}),r}},{}],706:[function(t,B,V){var m=t("../../plots/cartesian/axes"),c=t("../../lib/extend").extendFlat;B.exports=function(T,e,a){var i,n,r,v,s,o,b,g,d,f,y,l,x,u,M=T["_"+e],_=T[e+"axis"],p=_._gridlines=[],w=_._minorgridlines=[],h=_._boundarylines=[],L=T["_"+a],S=T[a+"axis"];_.tickmode==="array"&&(_.tickvals=M.slice());var E=T._xctrl,P=T._yctrl,F=E[0].length,I=E.length,D=T._a.length,R=T._b.length;m.prepTicks(_),_.tickmode==="array"&&delete _.tickvals;var N=_.smoothing?3:1;function z(Y){var ee,Z,X,ne,ce,Q,K,U,H,q,re,j,$=[],ie=[],oe={};if(e==="b")for(Z=T.b2j(Y),X=Math.floor(Math.max(0,Math.min(R-2,Z))),ne=Z-X,oe.length=R,oe.crossLength=D,oe.xy=function(ae){return T.evalxy([],ae,Z)},oe.dxy=function(ae,se){return T.dxydi([],ae,X,se,ne)},ee=0;ee<D;ee++)Q=Math.min(D-2,ee),K=ee-Q,U=T.evalxy([],ee,Z),S.smoothing&&ee>0&&(H=T.dxydi([],ee-1,X,0,ne),$.push(ce[0]+H[0]/3),ie.push(ce[1]+H[1]/3),q=T.dxydi([],ee-1,X,1,ne),$.push(U[0]-q[0]/3),ie.push(U[1]-q[1]/3)),$.push(U[0]),ie.push(U[1]),ce=U;else for(ee=T.a2i(Y),Q=Math.floor(Math.max(0,Math.min(D-2,ee))),K=ee-Q,oe.length=D,oe.crossLength=R,oe.xy=function(ae){return T.evalxy([],ee,ae)},oe.dxy=function(ae,se){return T.dxydj([],Q,ae,K,se)},Z=0;Z<R;Z++)X=Math.min(R-2,Z),ne=Z-X,U=T.evalxy([],ee,Z),S.smoothing&&Z>0&&(re=T.dxydj([],Q,Z-1,K,0),$.push(ce[0]+re[0]/3),ie.push(ce[1]+re[1]/3),j=T.dxydj([],Q,Z-1,K,1),$.push(U[0]-j[0]/3),ie.push(U[1]-j[1]/3)),$.push(U[0]),ie.push(U[1]),ce=U;return oe.axisLetter=e,oe.axis=_,oe.crossAxis=S,oe.value=Y,oe.constvar=a,oe.index=g,oe.x=$,oe.y=ie,oe.smoothing=S.smoothing,oe}function G(Y){var ee,Z,X,ne,ce,Q=[],K=[],U={};if(U.length=M.length,U.crossLength=L.length,e==="b")for(X=Math.max(0,Math.min(R-2,Y)),ce=Math.min(1,Math.max(0,Y-X)),U.xy=function(H){return T.evalxy([],H,Y)},U.dxy=function(H,q){return T.dxydi([],H,X,q,ce)},ee=0;ee<F;ee++)Q[ee]=E[Y*N][ee],K[ee]=P[Y*N][ee];else for(Z=Math.max(0,Math.min(D-2,Y)),ne=Math.min(1,Math.max(0,Y-Z)),U.xy=function(H){return T.evalxy([],Y,H)},U.dxy=function(H,q){return T.dxydj([],Z,H,ne,q)},ee=0;ee<I;ee++)Q[ee]=E[ee][Y*N],K[ee]=P[ee][Y*N];return U.axisLetter=e,U.axis=_,U.crossAxis=S,U.value=M[Y],U.constvar=a,U.index=Y,U.x=Q,U.y=K,U.smoothing=S.smoothing,U}if(_.tickmode==="array"){for(v=5e-15,s=[Math.floor((M.length-1-_.arraytick0)/_.arraydtick*(1+v)),Math.ceil(-_.arraytick0/_.arraydtick/(1+v))].sort(function(Y,ee){return Y-ee}),o=s[0]-1,b=s[1]+1,g=o;g<b;g++)n=_.arraytick0+_.arraydtick*g,!(n<0||n>M.length-1)&&p.push(c(G(n),{color:_.gridcolor,width:_.gridwidth,dash:_.griddash}));for(g=o;g<b;g++)if(r=_.arraytick0+_.arraydtick*g,y=Math.min(r+_.arraydtick,M.length-1),!(r<0||r>M.length-1)&&!(y<0||y>M.length-1))for(l=M[r],x=M[y],i=0;i<_.minorgridcount;i++)u=y-r,!(u<=0)&&(f=l+(x-l)*(i+1)/(_.minorgridcount+1)*(_.arraydtick/u),!(f<M[0]||f>M[M.length-1])&&w.push(c(z(f),{color:_.minorgridcolor,width:_.minorgridwidth,dash:_.minorgriddash})));_.startline&&h.push(c(G(0),{color:_.startlinecolor,width:_.startlinewidth})),_.endline&&h.push(c(G(M.length-1),{color:_.endlinecolor,width:_.endlinewidth}))}else{for(v=5e-15,s=[Math.floor((M[M.length-1]-_.tick0)/_.dtick*(1+v)),Math.ceil((M[0]-_.tick0)/_.dtick/(1+v))].sort(function(Y,ee){return Y-ee}),o=s[0],b=s[1],g=o;g<=b;g++)d=_.tick0+_.dtick*g,p.push(c(z(d),{color:_.gridcolor,width:_.gridwidth,dash:_.griddash}));for(g=o-1;g<b+1;g++)for(d=_.tick0+_.dtick*g,i=0;i<_.minorgridcount;i++)f=d+_.dtick*(i+1)/(_.minorgridcount+1),!(f<M[0]||f>M[M.length-1])&&w.push(c(z(f),{color:_.minorgridcolor,width:_.minorgridwidth,dash:_.minorgriddash}));_.startline&&h.push(c(z(M[0]),{color:_.startlinecolor,width:_.startlinewidth})),_.endline&&h.push(c(z(M[M.length-1]),{color:_.endlinecolor,width:_.endlinewidth}))}}},{"../../lib/extend":505,"../../plots/cartesian/axes":566}],707:[function(t,B,V){var m=t("../../plots/cartesian/axes"),c=t("../../lib/extend").extendFlat;B.exports=function(T,e){var a,i,n,r,v,s=e._labels=[],o=e._gridlines;for(a=0;a<o.length;a++)v=o[a],["start","both"].indexOf(e.showticklabels)!==-1&&(i=m.tickText(e,v.value),c(i,{prefix:n,suffix:r,endAnchor:!0,xy:v.xy(0),dxy:v.dxy(0,0),axis:v.axis,length:v.crossAxis.length,font:v.axis.tickfont,isFirst:a===0,isLast:a===o.length-1}),s.push(i)),["end","both"].indexOf(e.showticklabels)!==-1&&(i=m.tickText(e,v.value),c(i,{endAnchor:!1,xy:v.xy(v.crossLength-1),dxy:v.dxy(v.crossLength-2,1),axis:v.axis,length:v.crossAxis.length,font:v.axis.tickfont,isFirst:a===0,isLast:a===o.length-1}),s.push(i))}},{"../../lib/extend":505,"../../plots/cartesian/axes":566}],708:[function(t,B,V){var m=.5;B.exports=function(A,T,e,a){var i=A[0]-T[0],n=A[1]-T[1],r=e[0]-T[0],v=e[1]-T[1],s=Math.pow(i*i+n*n,m/2),o=Math.pow(r*r+v*v,m/2),b=(o*o*i-s*s*r)*a,g=(o*o*n-s*s*v)*a,d=o*(s+o)*3,f=s*(s+o)*3;return[[T[0]+(d&&b/d),T[1]+(d&&g/d)],[T[0]-(f&&b/f),T[1]-(f&&g/f)]]}},{}],709:[function(t,B,V){var m=t("../../lib").isArrayOrTypedArray;B.exports=function(c,A,T){var e,a,i,n,r,v,s=[],o=m(c)?c.length:c,b=m(A)?A.length:A,g=m(c)?c:null,d=m(A)?A:null;g&&(i=(g.length-1)/(g[g.length-1]-g[0])/(o-1)),d&&(n=(d.length-1)/(d[d.length-1]-d[0])/(b-1));var f,y=1/0,l=-1/0;for(a=0;a<b;a++)for(s[a]=[],v=d?(d[a]-d[0])*n:a/(b-1),e=0;e<o;e++)r=g?(g[e]-g[0])*i:e/(o-1),f=r-v*T,y=Math.min(f,y),l=Math.max(f,l),s[a][e]=f;var x=1/(l-y),u=-y*x;for(a=0;a<b;a++)for(e=0;e<o;e++)s[a][e]=x*s[a][e]+u;return s}},{"../../lib":515}],710:[function(t,B,V){var m=t("./catmull_rom"),c=t("../../lib").ensureArray;function A(T,e,a){var i=-.5*a[0]+1.5*e[0],n=-.5*a[1]+1.5*e[1];return[(2*i+T[0])/3,(2*n+T[1])/3]}B.exports=function(e,a,i,n,r,v){var s,o,b,g,d,f,y,l,x,u,M=i[0].length,_=i.length,p=r?3*M-2:M,w=v?3*_-2:_;for(e=c(e,w),a=c(a,w),b=0;b<w;b++)e[b]=c(e[b],p),a[b]=c(a[b],p);for(o=0,g=0;o<_;o++,g+=v?3:1)for(d=e[g],f=a[g],y=i[o],l=n[o],s=0,b=0;s<M;s++,b+=r?3:1)d[b]=y[s],f[b]=l[s];if(r)for(o=0,g=0;o<_;o++,g+=v?3:1){for(s=1,b=3;s<M-1;s++,b+=3)x=m([i[o][s-1],n[o][s-1]],[i[o][s],n[o][s]],[i[o][s+1],n[o][s+1]],r),e[g][b-1]=x[0][0],a[g][b-1]=x[0][1],e[g][b+1]=x[1][0],a[g][b+1]=x[1][1];u=A([e[g][0],a[g][0]],[e[g][2],a[g][2]],[e[g][3],a[g][3]]),e[g][1]=u[0],a[g][1]=u[1],u=A([e[g][p-1],a[g][p-1]],[e[g][p-3],a[g][p-3]],[e[g][p-4],a[g][p-4]]),e[g][p-2]=u[0],a[g][p-2]=u[1]}if(v)for(b=0;b<p;b++){for(g=3;g<w-3;g+=3)x=m([e[g-3][b],a[g-3][b]],[e[g][b],a[g][b]],[e[g+3][b],a[g+3][b]],v),e[g-1][b]=x[0][0],a[g-1][b]=x[0][1],e[g+1][b]=x[1][0],a[g+1][b]=x[1][1];u=A([e[0][b],a[0][b]],[e[2][b],a[2][b]],[e[3][b],a[3][b]]),e[1][b]=u[0],a[1][b]=u[1],u=A([e[w-1][b],a[w-1][b]],[e[w-3][b],a[w-3][b]],[e[w-4][b],a[w-4][b]]),e[w-2][b]=u[0],a[w-2][b]=u[1]}if(r&&v)for(g=1;g<w;g+=(g+1)%3===0?2:1){for(b=3;b<p-3;b+=3)x=m([e[g][b-3],a[g][b-3]],[e[g][b],a[g][b]],[e[g][b+3],a[g][b+3]],r),e[g][b-1]=.5*(e[g][b-1]+x[0][0]),a[g][b-1]=.5*(a[g][b-1]+x[0][1]),e[g][b+1]=.5*(e[g][b+1]+x[1][0]),a[g][b+1]=.5*(a[g][b+1]+x[1][1]);u=A([e[g][0],a[g][0]],[e[g][2],a[g][2]],[e[g][3],a[g][3]]),e[g][1]=.5*(e[g][1]+u[0]),a[g][1]=.5*(a[g][1]+u[1]),u=A([e[g][p-1],a[g][p-1]],[e[g][p-3],a[g][p-3]],[e[g][p-4],a[g][p-4]]),e[g][p-2]=.5*(e[g][p-2]+u[0]),a[g][p-2]=.5*(a[g][p-2]+u[1])}return[e,a]}},{"../../lib":515,"./catmull_rom":708}],711:[function(t,B,V){B.exports={RELATIVE_CULL_TOLERANCE:1e-6}},{}],712:[function(t,B,V){B.exports=function(m,c,A){return c&&A?function(T,e,a,i,n){T||(T=[]);var r,v,s,o,b,g;e*=3,a*=3;var d=i*i,f=1-i,y=f*f,l=f*i*2,x=-3*y,u=3*(y-l),M=3*(l-d),_=3*d,p=n*n,w=p*n,h=1-n,L=h*h,S=L*h;for(g=0;g<m.length;g++)b=m[g],r=x*b[a][e]+u*b[a][e+1]+M*b[a][e+2]+_*b[a][e+3],v=x*b[a+1][e]+u*b[a+1][e+1]+M*b[a+1][e+2]+_*b[a+1][e+3],s=x*b[a+2][e]+u*b[a+2][e+1]+M*b[a+2][e+2]+_*b[a+2][e+3],o=x*b[a+3][e]+u*b[a+3][e+1]+M*b[a+3][e+2]+_*b[a+3][e+3],T[g]=S*r+3*(L*n*v+h*p*s)+w*o;return T}:c?function(T,e,a,i,n){T||(T=[]);var r,v,s,o;e*=3;var b=i*i,g=1-i,d=g*g,f=g*i*2,y=-3*d,l=3*(d-f),x=3*(f-b),u=3*b,M=1-n;for(s=0;s<m.length;s++)o=m[s],r=y*o[a][e]+l*o[a][e+1]+x*o[a][e+2]+u*o[a][e+3],v=y*o[a+1][e]+l*o[a+1][e+1]+x*o[a+1][e+2]+u*o[a+1][e+3],T[s]=M*r+n*v;return T}:A?function(T,e,a,i,n){T||(T=[]);var r,v,s,o,b,g;a*=3;var d=n*n,f=d*n,y=1-n,l=y*y,x=l*y;for(b=0;b<m.length;b++)g=m[b],r=g[a][e+1]-g[a][e],v=g[a+1][e+1]-g[a+1][e],s=g[a+2][e+1]-g[a+2][e],o=g[a+3][e+1]-g[a+3][e],T[b]=x*r+3*(l*n*v+y*d*s)+f*o;return T}:function(T,e,a,i,n){T||(T=[]);var r,v,s,o,b=1-n;for(s=0;s<m.length;s++)o=m[s],r=o[a][e+1]-o[a][e],v=o[a+1][e+1]-o[a+1][e],T[s]=b*r+n*v;return T}}},{}],713:[function(t,B,V){B.exports=function(m,c,A){return c&&A?function(T,e,a,i,n){T||(T=[]);var r,v,s,o,b,g;e*=3,a*=3;var d=i*i,f=d*i,y=1-i,l=y*y,x=l*y,u=n*n,M=1-n,_=M*M,p=M*n*2,w=-3*_,h=3*(_-p),L=3*(p-u),S=3*u;for(g=0;g<m.length;g++)b=m[g],r=w*b[a][e]+h*b[a+1][e]+L*b[a+2][e]+S*b[a+3][e],v=w*b[a][e+1]+h*b[a+1][e+1]+L*b[a+2][e+1]+S*b[a+3][e+1],s=w*b[a][e+2]+h*b[a+1][e+2]+L*b[a+2][e+2]+S*b[a+3][e+2],o=w*b[a][e+3]+h*b[a+1][e+3]+L*b[a+2][e+3]+S*b[a+3][e+3],T[g]=x*r+3*(l*i*v+y*d*s)+f*o;return T}:c?function(T,e,a,i,n){T||(T=[]);var r,v,s,o,b,g;e*=3;var d=n*n,f=d*n,y=1-n,l=y*y,x=l*y;for(b=0;b<m.length;b++)g=m[b],r=g[a+1][e]-g[a][e],v=g[a+1][e+1]-g[a][e+1],s=g[a+1][e+2]-g[a][e+2],o=g[a+1][e+3]-g[a][e+3],T[b]=x*r+3*(l*n*v+y*d*s)+f*o;return T}:A?function(T,e,a,i,n){T||(T=[]);var r,v,s,o;a*=3;var b=1-i,g=n*n,d=1-n,f=d*d,y=d*n*2,l=-3*f,x=3*(f-y),u=3*(y-g),M=3*g;for(s=0;s<m.length;s++)o=m[s],r=l*o[a][e]+x*o[a+1][e]+u*o[a+2][e]+M*o[a+3][e],v=l*o[a][e+1]+x*o[a+1][e+1]+u*o[a+2][e+1]+M*o[a+3][e+1],T[s]=b*r+i*v;return T}:function(T,e,a,i,n){T||(T=[]);var r,v,s,o,b=1-i;for(s=0;s<m.length;s++)o=m[s],r=o[a+1][e]-o[a][e],v=o[a+1][e+1]-o[a][e+1],T[s]=b*r+i*v;return T}}},{}],714:[function(t,B,V){B.exports=function(m,c,A,T,e){var a=c-2,i=A-2;return T&&e?function(n,r,v){n||(n=[]);var s,o,b,g,d,f,y=Math.max(0,Math.min(Math.floor(r),a)),l=Math.max(0,Math.min(Math.floor(v),i)),x=Math.max(0,Math.min(1,r-y)),u=Math.max(0,Math.min(1,v-l));y*=3,l*=3;var M=x*x,_=M*x,p=1-x,w=p*p,h=w*p,L=u*u,S=L*u,E=1-u,P=E*E,F=P*E;for(f=0;f<m.length;f++)d=m[f],s=h*d[l][y]+3*(w*x*d[l][y+1]+p*M*d[l][y+2])+_*d[l][y+3],o=h*d[l+1][y]+3*(w*x*d[l+1][y+1]+p*M*d[l+1][y+2])+_*d[l+1][y+3],b=h*d[l+2][y]+3*(w*x*d[l+2][y+1]+p*M*d[l+2][y+2])+_*d[l+2][y+3],g=h*d[l+3][y]+3*(w*x*d[l+3][y+1]+p*M*d[l+3][y+2])+_*d[l+3][y+3],n[f]=F*s+3*(P*u*o+E*L*b)+S*g;return n}:T?function(n,r,v){n||(n=[]);var s=Math.max(0,Math.min(Math.floor(r),a)),o=Math.max(0,Math.min(Math.floor(v),i)),b=Math.max(0,Math.min(1,r-s)),g=Math.max(0,Math.min(1,v-o)),d,f,y,l,x,u;s*=3;var M=b*b,_=M*b,p=1-b,w=p*p,h=w*p,L=1-g;for(x=0;x<m.length;x++)u=m[x],d=L*u[o][s]+g*u[o+1][s],f=L*u[o][s+1]+g*u[o+1][s+1],y=L*u[o][s+2]+g*u[o+1][s+1],l=L*u[o][s+3]+g*u[o+1][s+1],n[x]=h*d+3*(w*b*f+p*M*y)+_*l;return n}:e?function(n,r,v){n||(n=[]);var s=Math.max(0,Math.min(Math.floor(r),a)),o=Math.max(0,Math.min(Math.floor(v),i)),b=Math.max(0,Math.min(1,r-s)),g=Math.max(0,Math.min(1,v-o)),d,f,y,l,x,u;o*=3;var M=g*g,_=M*g,p=1-g,w=p*p,h=w*p,L=1-b;for(x=0;x<m.length;x++)u=m[x],d=L*u[o][s]+b*u[o][s+1],f=L*u[o+1][s]+b*u[o+1][s+1],y=L*u[o+2][s]+b*u[o+2][s+1],l=L*u[o+3][s]+b*u[o+3][s+1],n[x]=h*d+3*(w*g*f+p*M*y)+_*l;return n}:function(n,r,v){n||(n=[]);var s=Math.max(0,Math.min(Math.floor(r),a)),o=Math.max(0,Math.min(Math.floor(v),i)),b=Math.max(0,Math.min(1,r-s)),g=Math.max(0,Math.min(1,v-o)),d,f,y,l,x=1-g,u=1-b;for(y=0;y<m.length;y++)l=m[y],d=u*l[o][s]+b*l[o][s+1],f=u*l[o+1][s]+b*l[o+1][s+1],n[y]=x*d+g*f;return n}}},{}],715:[function(t,B,V){var m=t("../../lib"),c=t("./xy_defaults"),A=t("./ab_defaults"),T=t("./attributes"),e=t("../../components/color/attributes");B.exports=function(i,n,r,v){function s(g,d){return m.coerce(i,n,T,g,d)}n._clipPathId="clip"+n.uid+"carpet";var o=s("color",e.defaultLine);if(m.coerceFont(s,"font"),s("carpet"),A(i,n,v,s,o),!n.a||!n.b){n.visible=!1;return}n.a.length<3&&(n.aaxis.smoothing=0),n.b.length<3&&(n.baxis.smoothing=0);var b=c(i,n,s);b||(n.visible=!1),n._cheater&&s("cheaterslope")}},{"../../components/color/attributes":366,"../../lib":515,"./ab_defaults":698,"./attributes":700,"./xy_defaults":724}],716:[function(t,B,V){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),plot:t("./plot"),calc:t("./calc"),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":578,"./attributes":700,"./calc":704,"./defaults":715,"./plot":721}],717:[function(t,B,V){B.exports=function(m,c){for(var A=m._fullData.length,T,e=0;e<A;e++){var a=m._fullData[e];if(a.index!==c.index&&a.type==="carpet"&&(T||(T=a),a.carpet===c.carpet))return a}return T}},{}],718:[function(t,B,V){B.exports=function(c,A,T){if(c.length===0)return"";var e,a=[],i=T?3:1;for(e=0;e<c.length;e+=i)a.push(c[e]+","+A[e]),T&&e<c.length-i&&(a.push("C"),a.push([c[e+1]+","+A[e+1],c[e+2]+","+A[e+2]+" "].join(" ")));return a.join(T?"":"L")}},{}],719:[function(t,B,V){var m=t("../../lib").isArrayOrTypedArray;B.exports=function(A,T,e){var a;for(m(A)?A.length>T.length&&(A=A.slice(0,T.length)):A=[],a=0;a<T.length;a++)A[a]=e(T[a]);return A}},{"../../lib":515}],720:[function(t,B,V){B.exports=function(c,A,T,e,a,i){var n=a[0]*c.dpdx(A),r=a[1]*c.dpdy(T),v=1,s=1;if(i){var o=Math.sqrt(a[0]*a[0]+a[1]*a[1]),b=Math.sqrt(i[0]*i[0]+i[1]*i[1]),g=(a[0]*i[0]+a[1]*i[1])/o/b;s=Math.max(0,g)}var d=Math.atan2(r,n)*180/Math.PI;return d<-90?(d+=180,v=-v):d>90&&(d-=180,v=-v),{angle:d,flip:v,p:c.c2p(e,A,T),offsetMultplier:s}}},{}],721:[function(t,B,V){var m=t("@plotly/d3"),c=t("../../components/drawing"),A=t("./map_1d_array"),T=t("./makepath"),e=t("./orient_text"),a=t("../../lib/svg_text_utils"),i=t("../../lib"),n=i.strRotate,r=i.strTranslate,v=t("../../constants/alignment");B.exports=function(x,u,M,_){var p=u.xaxis,w=u.yaxis,h=x._fullLayout,L=h._clips;i.makeTraceGroups(_,M,"trace").each(function(S){var E=m.select(this),P=S[0],F=P.trace,I=F.aaxis,D=F.baxis,R=i.ensureSingle(E,"g","minorlayer"),N=i.ensureSingle(E,"g","majorlayer"),z=i.ensureSingle(E,"g","boundarylayer"),G=i.ensureSingle(E,"g","labellayer");E.style("opacity",F.opacity),o(p,w,N,I,"a",I._gridlines),o(p,w,N,D,"b",D._gridlines),o(p,w,R,I,"a",I._minorgridlines),o(p,w,R,D,"b",D._minorgridlines),o(p,w,z,I,"a-boundary",I._boundarylines),o(p,w,z,D,"b-boundary",D._boundarylines);var Y=b(x,p,w,F,P,G,I._labels,"a-label"),ee=b(x,p,w,F,P,G,D._labels,"b-label");g(x,G,F,P,p,w,Y,ee),s(F,P,L,p,w)})};function s(l,x,u,M,_){var p,w,h,L,S=u.select("#"+l._clipPathId);S.size()||(S=u.append("clipPath").classed("carpetclip",!0));var E=i.ensureSingle(S,"path","carpetboundary"),P=x.clipsegments,F=[];for(L=0;L<P.length;L++)p=P[L],w=A([],p.x,M.c2p),h=A([],p.y,_.c2p),F.push(T(w,h,p.bicubic));var I="M"+F.join("L")+"Z";S.attr("id",l._clipPathId),E.attr("d",I)}function o(l,x,u,M,_,p){var w="const-"+_+"-lines",h=u.selectAll("."+w).data(p);h.enter().append("path").classed(w,!0).style("vector-effect","non-scaling-stroke"),h.each(function(L){var S=L,E=S.x,P=S.y,F=A([],E,l.c2p),I=A([],P,x.c2p),D="M"+T(F,I,S.smoothing),R=m.select(this);R.attr("d",D).style("stroke-width",S.width).style("stroke",S.color).style("stroke-dasharray",c.dashStyle(S.dash,S.width)).style("fill","none")}),h.exit().remove()}function b(l,x,u,M,_,p,w,h){var L=p.selectAll("text."+h).data(w);L.enter().append("text").classed(h,!0);var S=0,E={};return L.each(function(P,F){var I;if(P.axis.tickangle==="auto")I=e(M,x,u,P.xy,P.dxy);else{var D=(P.axis.tickangle+180)*Math.PI/180;I=e(M,x,u,P.xy,[Math.cos(D),Math.sin(D)])}F||(E={angle:I.angle,flip:I.flip});var R=(P.endAnchor?-1:1)*I.flip,N=m.select(this).attr({"text-anchor":R>0?"start":"end","data-notex":1}).call(c.font,P.font).text(P.text).call(a.convertToTspans,l),z=c.bBox(this);N.attr("transform",r(I.p[0],I.p[1])+n(I.angle)+r(P.axis.labelpadding*R,z.height*.3)),S=Math.max(S,z.width+P.axis.labelpadding)}),L.exit().remove(),E.maxExtent=S,E}function g(l,x,u,M,_,p,w,h){var L,S,E,P,F=i.aggNums(Math.min,null,u.a),I=i.aggNums(Math.max,null,u.a),D=i.aggNums(Math.min,null,u.b),R=i.aggNums(Math.max,null,u.b);L=.5*(F+I),S=D,E=u.ab2xy(L,S,!0),P=u.dxyda_rough(L,S),w.angle===void 0&&i.extendFlat(w,e(u,_,p,E,u.dxydb_rough(L,S))),y(l,x,u,M,E,P,u.aaxis,_,p,w,"a-title"),L=F,S=.5*(D+R),E=u.ab2xy(L,S,!0),P=u.dxydb_rough(L,S),h.angle===void 0&&i.extendFlat(h,e(u,_,p,E,u.dxyda_rough(L,S))),y(l,x,u,M,E,P,u.baxis,_,p,h,"b-title")}var d=v.LINE_SPACING,f=(1-v.MID_SHIFT)/d+1;function y(l,x,u,M,_,p,w,h,L,S,E){var P=[];w.title.text&&P.push(w.title.text);var F=x.selectAll("text."+E).data(P),I=S.maxExtent;F.enter().append("text").classed(E,!0),F.each(function(){var D=e(u,h,L,_,p);["start","both"].indexOf(w.showticklabels)===-1&&(I=0);var R=w.title.font.size;I+=R+w.title.offset;var N=S.angle+(S.flip<0?180:0),z=(N-D.angle+450)%360,G=z>90&&z<270,Y=m.select(this);Y.text(w.title.text).call(a.convertToTspans,l),G&&(I=(-a.lineCount(Y)+f)*d*R-I),Y.attr("transform",r(D.p[0],D.p[1])+n(D.angle)+r(0,I)).attr("text-anchor","middle").call(c.font,w.title.font)}),F.exit().remove()}},{"../../components/drawing":389,"../../constants/alignment":483,"../../lib":515,"../../lib/svg_text_utils":541,"./makepath":718,"./map_1d_array":719,"./orient_text":720,"@plotly/d3":58}],722:[function(t,B,V){var m=t("./constants"),c=t("../../lib/search").findBin,A=t("./compute_control_points"),T=t("./create_spline_evaluator"),e=t("./create_i_derivative_evaluator"),a=t("./create_j_derivative_evaluator");B.exports=function(n){var r=n._a,v=n._b,s=r.length,o=v.length,b=n.aaxis,g=n.baxis,d=r[0],f=r[s-1],y=v[0],l=v[o-1],x=r[r.length-1]-r[0],u=v[v.length-1]-v[0],M=x*m.RELATIVE_CULL_TOLERANCE,_=u*m.RELATIVE_CULL_TOLERANCE;d-=M,f+=M,y-=_,l+=_,n.isVisible=function(p,w){return p>d&&p<f&&w>y&&w<l},n.isOccluded=function(p,w){return p<d||p>f||w<y||w>l},n.setScale=function(){var p=n._x,w=n._y,h=A(n._xctrl,n._yctrl,p,w,b.smoothing,g.smoothing);n._xctrl=h[0],n._yctrl=h[1],n.evalxy=T([n._xctrl,n._yctrl],s,o,b.smoothing,g.smoothing),n.dxydi=e([n._xctrl,n._yctrl],b.smoothing,g.smoothing),n.dxydj=a([n._xctrl,n._yctrl],b.smoothing,g.smoothing)},n.i2a=function(p){var w=Math.max(0,Math.floor(p[0]),s-2),h=p[0]-w;return(1-h)*r[w]+h*r[w+1]},n.j2b=function(p){var w=Math.max(0,Math.floor(p[1]),s-2),h=p[1]-w;return(1-h)*v[w]+h*v[w+1]},n.ij2ab=function(p){return[n.i2a(p[0]),n.j2b(p[1])]},n.a2i=function(p){var w=Math.max(0,Math.min(c(p,r),s-2)),h=r[w],L=r[w+1];return Math.max(0,Math.min(s-1,w+(p-h)/(L-h)))},n.b2j=function(p){var w=Math.max(0,Math.min(c(p,v),o-2)),h=v[w],L=v[w+1];return Math.max(0,Math.min(o-1,w+(p-h)/(L-h)))},n.ab2ij=function(p){return[n.a2i(p[0]),n.b2j(p[1])]},n.i2c=function(p,w){return n.evalxy([],p,w)},n.ab2xy=function(p,w,h){if(!h&&(p<r[0]||p>r[s-1]|w<v[0]||w>v[o-1]))return[!1,!1];var L=n.a2i(p),S=n.b2j(w),E=n.evalxy([],L,S);if(h){var P=0,F=0,I=[],D,R,N,z;p<r[0]?(D=0,R=0,P=(p-r[0])/(r[1]-r[0])):p>r[s-1]?(D=s-2,R=1,P=(p-r[s-1])/(r[s-1]-r[s-2])):(D=Math.max(0,Math.min(s-2,Math.floor(L))),R=L-D),w<v[0]?(N=0,z=0,F=(w-v[0])/(v[1]-v[0])):w>v[o-1]?(N=o-2,z=1,F=(w-v[o-1])/(v[o-1]-v[o-2])):(N=Math.max(0,Math.min(o-2,Math.floor(S))),z=S-N),P&&(n.dxydi(I,D,N,R,z),E[0]+=I[0]*P,E[1]+=I[1]*P),F&&(n.dxydj(I,D,N,R,z),E[0]+=I[0]*F,E[1]+=I[1]*F)}return E},n.c2p=function(p,w,h){return[w.c2p(p[0]),h.c2p(p[1])]},n.p2x=function(p,w,h){return[w.p2c(p[0]),h.p2c(p[1])]},n.dadi=function(p){var w=Math.max(0,Math.min(r.length-2,p));return r[w+1]-r[w]},n.dbdj=function(p){var w=Math.max(0,Math.min(v.length-2,p));return v[w+1]-v[w]},n.dxyda=function(p,w,h,L){var S=n.dxydi(null,p,w,h,L),E=n.dadi(p,h);return[S[0]/E,S[1]/E]},n.dxydb=function(p,w,h,L){var S=n.dxydj(null,p,w,h,L),E=n.dbdj(w,L);return[S[0]/E,S[1]/E]},n.dxyda_rough=function(p,w,h){var L=x*(h||.1),S=n.ab2xy(p+L,w,!0),E=n.ab2xy(p-L,w,!0);return[(S[0]-E[0])*.5/L,(S[1]-E[1])*.5/L]},n.dxydb_rough=function(p,w,h){var L=u*(h||.1),S=n.ab2xy(p,w+L,!0),E=n.ab2xy(p,w-L,!0);return[(S[0]-E[0])*.5/L,(S[1]-E[1])*.5/L]},n.dpdx=function(p){return p._m},n.dpdy=function(p){return p._m}}},{"../../lib/search":535,"./compute_control_points":710,"./constants":711,"./create_i_derivative_evaluator":712,"./create_j_derivative_evaluator":713,"./create_spline_evaluator":714}],723:[function(t,B,V){var m=t("../../lib");B.exports=function(A,T,e){var a,i,n,r=[],v=[],s=A[0].length,o=A.length;function b(Z,X){var ne=0,ce,Q=0;return Z>0&&(ce=A[X][Z-1])!==void 0&&(Q++,ne+=ce),Z<s-1&&(ce=A[X][Z+1])!==void 0&&(Q++,ne+=ce),X>0&&(ce=A[X-1][Z])!==void 0&&(Q++,ne+=ce),X<o-1&&(ce=A[X+1][Z])!==void 0&&(Q++,ne+=ce),ne/Math.max(1,Q)}var g=0;for(a=0;a<s;a++)for(i=0;i<o;i++)A[i][a]===void 0&&(r.push(a),v.push(i),A[i][a]=b(a,i)),g=Math.max(g,Math.abs(A[i][a]));if(!r.length)return A;var d,f,y,l,x,u,M,_,p,w,h,L=1e-5,S=0,E=100,P=0,F=r.length;do{for(S=0,n=0;n<F;n++){a=r[n],i=v[n];var I=0,D=0,R,N,z,G,Y,ee;a===0?(Y=Math.min(s-1,2),z=T[Y],G=T[1],R=A[i][Y],N=A[i][1],D+=N+(N-R)*(T[0]-G)/(G-z),I++):a===s-1&&(Y=Math.max(0,s-3),z=T[Y],G=T[s-2],R=A[i][Y],N=A[i][s-2],D+=N+(N-R)*(T[s-1]-G)/(G-z),I++),(a===0||a===s-1)&&i>0&&i<o-1&&(d=e[i+1]-e[i],f=e[i]-e[i-1],D+=(f*A[i+1][a]+d*A[i-1][a])/(f+d),I++),i===0?(ee=Math.min(o-1,2),z=e[ee],G=e[1],R=A[ee][a],N=A[1][a],D+=N+(N-R)*(e[0]-G)/(G-z),I++):i===o-1&&(ee=Math.max(0,o-3),z=e[ee],G=e[o-2],R=A[ee][a],N=A[o-2][a],D+=N+(N-R)*(e[o-1]-G)/(G-z),I++),(i===0||i===o-1)&&a>0&&a<s-1&&(d=T[a+1]-T[a],f=T[a]-T[a-1],D+=(f*A[i][a+1]+d*A[i][a-1])/(f+d),I++),I?D/=I:(y=T[a+1]-T[a],l=T[a]-T[a-1],x=e[i+1]-e[i],u=e[i]-e[i-1],M=y*l*(y+l),_=x*u*(x+u),D=(M*(u*A[i+1][a]+x*A[i-1][a])+_*(l*A[i][a+1]+y*A[i][a-1]))/(_*(l+y)+M*(u+x))),p=D-A[i][a],w=p/g,S+=w*w,h=I?0:.85,A[i][a]+=p*(1+h)}S=Math.sqrt(S)}while(P++<E&&S>L);return m.log("Smoother converged to",S,"after",P,"iterations"),A}},{"../../lib":515}],724:[function(t,B,V){var m=t("../../lib").isArray1D;B.exports=function(A,T,e){var a=e("x"),i=a&&a.length,n=e("y"),r=n&&n.length;if(!i&&!r)return!1;if(T._cheater=!a,(!i||m(a))&&(!r||m(n))){var v=i?a.length:1/0;r&&(v=Math.min(v,n.length)),T.a&&T.a.length&&(v=Math.min(v,T.a.length)),T.b&&T.b.length&&(v=Math.min(v,T.b.length)),T._length=v}else T._length=null;return!0}},{"../../lib":515}],725:[function(t,B,V){var m=t("../../plots/template_attributes").hovertemplateAttrs,c=t("../scattergeo/attributes"),A=t("../../components/colorscale/attributes"),T=t("../../plots/attributes"),e=t("../../components/color/attributes").defaultLine,a=t("../../lib/extend").extendFlat,i=c.marker.line;B.exports=a({locations:{valType:"data_array",editType:"calc"},locationmode:c.locationmode,z:{valType:"data_array",editType:"calc"},geojson:a({},c.geojson,{}),featureidkey:c.featureidkey,text:a({},c.text,{}),hovertext:a({},c.hovertext,{}),marker:{line:{color:a({},i.color,{dflt:e}),width:a({},i.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:c.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:c.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:a({},T.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:m(),showlegend:a({},T.showlegend,{dflt:!1})},A("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/color/attributes":366,"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scattergeo/attributes":978}],726:[function(t,B,V){var m=t("fast-isnumeric"),c=t("../../constants/numerical").BADNUM,A=t("../../components/colorscale/calc"),T=t("../scatter/arrays_to_calcdata"),e=t("../scatter/calc_selection");function a(i){return i&&typeof i=="string"}B.exports=function(n,r){var v=r._length,s=new Array(v),o;r.geojson?o=function(y){return a(y)||m(y)}:o=a;for(var b=0;b<v;b++){var g=s[b]={},d=r.locations[b],f=r.z[b];o(d)&&m(f)?(g.loc=d,g.z=f):(g.loc=null,g.z=c),g.index=b}return T(s,r),A(n,r,{vals:r.z,containerStr:"",cLetter:"z"}),e(s,r),s}},{"../../components/colorscale/calc":375,"../../constants/numerical":491,"../scatter/arrays_to_calcdata":935,"../scatter/calc_selection":938,"fast-isnumeric":190}],727:[function(t,B,V){var m=t("../../lib"),c=t("../../components/colorscale/defaults"),A=t("./attributes");B.exports=function(e,a,i,n){function r(f,y){return m.coerce(e,a,A,f,y)}var v=r("locations"),s=r("z");if(!(v&&v.length&&m.isArrayOrTypedArray(s)&&s.length)){a.visible=!1;return}a._length=Math.min(v.length,s.length);var o=r("geojson"),b;(typeof o=="string"&&o!==""||m.isPlainObject(o))&&(b="geojson-id");var g=r("locationmode",b);g==="geojson-id"&&r("featureidkey"),r("text"),r("hovertext"),r("hovertemplate");var d=r("marker.line.width");d&&r("marker.line.color"),r("marker.opacity"),c(e,a,n,r,{prefix:"",cLetter:"z"}),m.coerceSelectionMarkerOpacity(a,r)}},{"../../components/colorscale/defaults":377,"../../lib":515,"./attributes":725}],728:[function(t,B,V){B.exports=function(c,A,T,e,a){c.location=A.location,c.z=A.z;var i=e[a];return i.fIn&&i.fIn.properties&&(c.properties=i.fIn.properties),c.ct=i.ct,c}},{}],729:[function(t,B,V){var m=t("../../plots/cartesian/axes"),c=t("./attributes"),A=t("../../lib").fillText;B.exports=function(a,i,n){var r=a.cd,v=r[0].trace,s=a.subplot,o,b,g,d,f=[i,n],y=[i+360,n];for(b=0;b<r.length;b++)if(o=r[b],d=!1,o._polygons){for(g=0;g<o._polygons.length;g++)o._polygons[g].contains(f)&&(d=!d),o._polygons[g].contains(y)&&(d=!d);if(d)break}if(!(!d||!o))return a.x0=a.x1=a.xa.c2p(o.ct),a.y0=a.y1=a.ya.c2p(o.ct),a.index=o.index,a.location=o.loc,a.z=o.z,a.zLabel=m.tickText(s.mockAxis,s.mockAxis.c2l(o.z),"hover").text,a.hovertemplate=o.hovertemplate,T(a,v,o),[a]};function T(e,a,i){if(!a.hovertemplate){var n=i.hi||a.hoverinfo,r=String(i.loc),v=n==="all"?c.hoverinfo.flags:n.split("+"),s=v.indexOf("name")!==-1,o=v.indexOf("location")!==-1,b=v.indexOf("z")!==-1,g=v.indexOf("text")!==-1,d=!s&&o,f=[];d?e.nameOverride=r:(s&&(e.nameOverride=a.name),o&&f.push(r)),b&&f.push(e.zLabel),g&&A(i,a,f),e.extraText=f.join("<br>")}}},{"../../lib":515,"../../plots/cartesian/axes":566,"./attributes":725}],730:[function(t,B,V){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../heatmap/colorbar"),calc:t("./calc"),calcGeoJSON:t("./plot").calcGeoJSON,plot:t("./plot").plot,style:t("./style").style,styleOnSelect:t("./style").styleOnSelect,hoverPoints:t("./hover"),eventData:t("./event_data"),selectPoints:t("./select"),moduleType:"trace",name:"choropleth",basePlotModule:t("../../plots/geo"),categories:["geo","noOpacity","showLegend"],meta:{}}},{"../../plots/geo":598,"../heatmap/colorbar":804,"./attributes":725,"./calc":726,"./defaults":727,"./event_data":728,"./hover":729,"./plot":731,"./select":732,"./style":733}],731:[function(t,B,V){var m=t("@plotly/d3"),c=t("../../lib"),A=t("../../lib/geo_location_utils"),T=t("../../lib/topojson_utils").getTopojsonFeatures,e=t("../../plots/cartesian/autorange").findExtremes,a=t("./style").style;function i(r,v,s){var o=v.layers.backplot.select(".choroplethlayer");c.makeTraceGroups(o,s,"trace choropleth").each(function(b){var g=m.select(this),d=g.selectAll("path.choroplethlocation").data(c.identity);d.enter().append("path").classed("choroplethlocation",!0),d.exit().remove(),a(r,b)})}function n(r,v){for(var s=r[0].trace,o=v[s.geo],b=o._subplot,g=s.locationmode,d=s._length,f=g==="geojson-id"?A.extractTraceFeature(r):T(s,b.topojson),y=[],l=[],x=0;x<d;x++){var u=r[x],M=g==="geojson-id"?u.fOut:A.locationToFeature(g,u.loc,f);if(M){u.geojson=M,u.ct=M.properties.ct,u._polygons=A.feature2polygons(M);var _=A.computeBbox(M);y.push(_[0],_[2]),l.push(_[1],_[3])}else u.geojson=null}if(o.fitbounds==="geojson"&&g==="geojson-id"){var p=A.computeBbox(A.getTraceGeojson(s));y=[p[0],p[2]],l=[p[1],p[3]]}var w={padded:!0};s._extremes.lon=e(o.lonaxis._ax,y,w),s._extremes.lat=e(o.lataxis._ax,l,w)}B.exports={calcGeoJSON:n,plot:i}},{"../../lib":515,"../../lib/geo_location_utils":508,"../../lib/topojson_utils":544,"../../plots/cartesian/autorange":565,"./style":733,"@plotly/d3":58}],732:[function(t,B,V){B.exports=function(c,A){var T=c.cd,e=c.xaxis,a=c.yaxis,i=[],n,r,v,s,o;if(A===!1)for(n=0;n<T.length;n++)T[n].selected=0;else for(n=0;n<T.length;n++)r=T[n],v=r.ct,v&&(s=e.c2p(v),o=a.c2p(v),A.contains([s,o],null,n,c)?(i.push({pointNumber:n,lon:v[0],lat:v[1]}),r.selected=1):r.selected=0);return i}},{}],733:[function(t,B,V){var m=t("@plotly/d3"),c=t("../../components/color"),A=t("../../components/drawing"),T=t("../../components/colorscale");function e(n,r){r&&a(n,r)}function a(n,r){var v=r[0].trace,s=r[0].node3,o=s.selectAll(".choroplethlocation"),b=v.marker||{},g=b.line||{},d=T.makeColorScaleFuncFromTrace(v);o.each(function(f){m.select(this).attr("fill",d(f.z)).call(c.stroke,f.mlc||g.color).call(A.dashLine,"",f.mlw||g.width||0).style("opacity",b.opacity)}),A.selectedPointStyle(o,v)}function i(n,r){var v=r[0].node3,s=r[0].trace;s.selectedpoints?A.selectedPointStyle(v.selectAll(".choroplethlocation"),s):a(n,r)}B.exports={style:e,styleOnSelect:i}},{"../../components/color":367,"../../components/colorscale":379,"../../components/drawing":389,"@plotly/d3":58}],734:[function(t,B,V){var m=t("../choropleth/attributes"),c=t("../../components/colorscale/attributes"),A=t("../../plots/template_attributes").hovertemplateAttrs,T=t("../../plots/attributes"),e=t("../../lib/extend").extendFlat;B.exports=e({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:e({},m.featureidkey,{}),below:{valType:"string",editType:"plot"},text:m.text,hovertext:m.hovertext,marker:{line:{color:e({},m.marker.line.color,{editType:"plot"}),width:e({},m.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:e({},m.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:e({},m.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:e({},m.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:m.hoverinfo,hovertemplate:A({},{keys:["properties"]}),showlegend:e({},T.showlegend,{dflt:!1})},c("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../choropleth/attributes":725}],735:[function(t,B,V){var m=t("fast-isnumeric"),c=t("../../lib"),A=t("../../components/colorscale"),T=t("../../components/drawing"),e=t("../../lib/geojson_utils").makeBlank,a=t("../../lib/geo_location_utils");function i(r){var v=r[0].trace,s=v.visible===!0&&v._length!==0,o={layout:{visibility:"none"},paint:{}},b={layout:{visibility:"none"},paint:{}},g=v._opts={fill:o,line:b,geojson:e()};if(!s)return g;var d=a.extractTraceFeature(r);if(!d)return g;var f=A.makeColorScaleFuncFromTrace(v),y=v.marker,l=y.line||{},x;c.isArrayOrTypedArray(y.opacity)&&(x=function(S){var E=S.mo;return m(E)?+c.constrain(E,0,1):0});var u;c.isArrayOrTypedArray(l.color)&&(u=function(S){return S.mlc});var M;c.isArrayOrTypedArray(l.width)&&(M=function(S){return S.mlw});for(var _=0;_<r.length;_++){var p=r[_],w=p.fOut;if(w){var h=w.properties;h.fc=f(p.z),x&&(h.mo=x(p)),u&&(h.mlc=u(p)),M&&(h.mlw=M(p)),p.ct=h.ct,p._polygons=a.feature2polygons(w)}}var L=x?{type:"identity",property:"mo"}:y.opacity;return c.extendFlat(o.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":L}),c.extendFlat(b.paint,{"line-color":u?{type:"identity",property:"mlc"}:l.color,"line-width":M?{type:"identity",property:"mlw"}:l.width,"line-opacity":L}),o.layout.visibility="visible",b.layout.visibility="visible",g.geojson={type:"FeatureCollection",features:d},n(r),g}function n(r){var v=r[0].trace,s=v._opts,o;if(v.selectedpoints){for(var b=T.makeSelectedPointStyleFns(v),g=0;g<r.length;g++){var d=r[g];d.fOut&&(d.fOut.properties.mo2=b.selectedOpacityFn(d))}o={type:"identity",property:"mo2"}}else o=c.isArrayOrTypedArray(v.marker.opacity)?{type:"identity",property:"mo"}:v.marker.opacity;return c.extendFlat(s.fill.paint,{"fill-opacity":o}),c.extendFlat(s.line.paint,{"line-opacity":o}),s}B.exports={convert:i,convertOnSelect:n}},{"../../components/colorscale":379,"../../components/drawing":389,"../../lib":515,"../../lib/geo_location_utils":508,"../../lib/geojson_utils":509,"fast-isnumeric":190}],736:[function(t,B,V){var m=t("../../lib"),c=t("../../components/colorscale/defaults"),A=t("./attributes");B.exports=function(e,a,i,n){function r(g,d){return m.coerce(e,a,A,g,d)}var v=r("locations"),s=r("z"),o=r("geojson");if(!m.isArrayOrTypedArray(v)||!v.length||!m.isArrayOrTypedArray(s)||!s.length||!(typeof o=="string"&&o!==""||m.isPlainObject(o))){a.visible=!1;return}r("featureidkey"),a._length=Math.min(v.length,s.length),r("below"),r("text"),r("hovertext"),r("hovertemplate");var b=r("marker.line.width");b&&r("marker.line.color"),r("marker.opacity"),c(e,a,n,r,{prefix:"",cLetter:"z"}),m.coerceSelectionMarkerOpacity(a,r)}},{"../../components/colorscale/defaults":377,"../../lib":515,"./attributes":734}],737:[function(t,B,V){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../heatmap/colorbar"),calc:t("../choropleth/calc"),plot:t("./plot"),hoverPoints:t("../choropleth/hover"),eventData:t("../choropleth/event_data"),selectPoints:t("../choropleth/select"),styleOnSelect:function(m,c){if(c){var A=c[0].trace;A._glTrace.updateOnSelect(c)}},getBelow:function(m,c){for(var A=c.getMapLayers(),T=A.length-2;T>=0;T--){var e=A[T].id;if(typeof e=="string"&&e.indexOf("water")===0){for(var a=T+1;a<A.length;a++)if(e=A[a].id,typeof e=="string"&&e.indexOf("plotly-")===-1)return e}}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:t("../../plots/mapbox"),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},{"../../plots/mapbox":622,"../choropleth/calc":726,"../choropleth/event_data":728,"../choropleth/hover":729,"../choropleth/select":732,"../heatmap/colorbar":804,"./attributes":734,"./defaults":736,"./plot":738}],738:[function(t,B,V){var m=t("./convert").convert,c=t("./convert").convertOnSelect,A=t("../../plots/mapbox/constants").traceLayerPrefix;function T(a,i){this.type="choroplethmapbox",this.subplot=a,this.uid=i,this.sourceId="source-"+i,this.layerList=[["fill",A+i+"-fill"],["line",A+i+"-line"]],this.below=null}var e=T.prototype;e.update=function(a){this._update(m(a)),a[0].trace._glTrace=this},e.updateOnSelect=function(a){this._update(c(a))},e._update=function(a){var i=this.subplot,n=this.layerList,r=i.belowLookup["trace-"+this.uid];i.map.getSource(this.sourceId).setData(a.geojson),r!==this.below&&(this._removeLayers(),this._addLayers(a,r),this.below=r);for(var v=0;v<n.length;v++){var s=n[v],o=s[0],b=s[1],g=a[o];i.setOptions(b,"setLayoutProperty",g.layout),g.layout.visibility==="visible"&&i.setOptions(b,"setPaintProperty",g.paint)}},e._addLayers=function(a,i){for(var n=this.subplot,r=this.layerList,v=this.sourceId,s=0;s<r.length;s++){var o=r[s],b=o[0],g=a[b];n.addLayer({type:b,id:o[1],source:v,layout:g.layout,paint:g.paint},i)}},e._removeLayers=function(){for(var a=this.subplot.map,i=this.layerList,n=i.length-1;n>=0;n--)a.removeLayer(i[n][1])},e.dispose=function(){var a=this.subplot.map;this._removeLayers(),a.removeSource(this.sourceId)},B.exports=function(i,n){var r=n[0].trace,v=new T(i,r.uid),s=v.sourceId,o=m(n),b=v.below=i.belowLookup["trace-"+r.uid];return i.map.addSource(s,{type:"geojson",data:o.geojson}),v._addLayers(o,b),n[0].trace._glTrace=v,v}},{"../../plots/mapbox/constants":620,"./convert":735}],739:[function(t,B,V){var m=t("../../components/colorscale/attributes"),c=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,A=t("../../plots/template_attributes").hovertemplateAttrs,T=t("../mesh3d/attributes"),e=t("../../plots/attributes"),a=t("../../lib/extend").extendFlat,i={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:A({editType:"calc"},{keys:["norm"]}),uhoverformat:c("u",1),vhoverformat:c("v",1),whoverformat:c("w",1),xhoverformat:c("x"),yhoverformat:c("y"),zhoverformat:c("z"),showlegend:a({},e.showlegend,{dflt:!1})};a(i,m("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));var n=["opacity","lightposition","lighting"];n.forEach(function(r){i[r]=T[r]}),i.hoverinfo=a({},e.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),i.transforms=void 0,B.exports=i},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../mesh3d/attributes":876}],740:[function(t,B,V){var m=t("../../components/colorscale/calc");B.exports=function(A,T){for(var e=T.u,a=T.v,i=T.w,n=Math.min(T.x.length,T.y.length,T.z.length,e.length,a.length,i.length),r=-1/0,v=1/0,s=0;s<n;s++){var o=e[s],b=a[s],g=i[s],d=Math.sqrt(o*o+b*b+g*g);r=Math.max(r,d),v=Math.min(v,d)}T._len=n,T._normMax=r,m(A,T,{vals:[v,r],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":375}],741:[function(t,B,V){var m=t("../../../stackgl_modules").gl_cone3d,c=t("../../../stackgl_modules").gl_cone3d.createConeMesh,A=t("../../lib").simpleMap,T=t("../../lib/gl_format_color").parseColorScale,e=t("../../components/colorscale").extractOpts,a=t("../../plots/gl3d/zip3");function i(g,d){this.scene=g,this.uid=d,this.mesh=null,this.data=null}var n=i.prototype;n.handlePick=function(g){if(g.object===this.mesh){var d=g.index=g.data.index,f=this.data.x[d],y=this.data.y[d],l=this.data.z[d],x=this.data.u[d],u=this.data.v[d],M=this.data.w[d];g.traceCoordinate=[f,y,l,x,u,M,Math.sqrt(x*x+u*u+M*M)];var _=this.data.hovertext||this.data.text;return Array.isArray(_)&&_[d]!==void 0?g.textLabel=_[d]:_&&(g.textLabel=_),!0}};var r={xaxis:0,yaxis:1,zaxis:2},v={tip:1,tail:0,cm:.25,center:.5},s={tip:1,tail:1,cm:.75,center:.5};function o(g,d){var f=g.fullSceneLayout,y=g.dataScale,l={};function x(p,w){var h=f[w],L=y[r[w]];return A(p,function(S){return h.d2l(S)*L})}l.vectors=a(x(d.u,"xaxis"),x(d.v,"yaxis"),x(d.w,"zaxis"),d._len),l.positions=a(x(d.x,"xaxis"),x(d.y,"yaxis"),x(d.z,"zaxis"),d._len);var u=e(d);l.colormap=T(d),l.vertexIntensityBounds=[u.min/d._normMax,u.max/d._normMax],l.coneOffset=v[d.anchor],d.sizemode==="scaled"?l.coneSize=d.sizeref||.5:l.coneSize=d.sizeref&&d._normMax?d.sizeref/d._normMax:.5;var M=m(l),_=d.lightposition;return M.lightPosition=[_.x,_.y,_.z],M.ambient=d.lighting.ambient,M.diffuse=d.lighting.diffuse,M.specular=d.lighting.specular,M.roughness=d.lighting.roughness,M.fresnel=d.lighting.fresnel,M.opacity=d.opacity,d._pad=s[d.anchor]*M.vectorScale*M.coneScale*d._normMax,M}n.update=function(g){this.data=g;var d=o(this.scene,g);this.mesh.update(d)},n.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function b(g,d){var f=g.glplot.gl,y=o(g,d),l=c(f,y),x=new i(g,d.uid);return x.mesh=l,x.data=d,l._trace=x,g.glplot.add(l),x}B.exports=b},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib":515,"../../lib/gl_format_color":511,"../../plots/gl3d/zip3":618}],742:[function(t,B,V){var m=t("../../lib"),c=t("../../components/colorscale/defaults"),A=t("./attributes");B.exports=function(e,a,i,n){function r(f,y){return m.coerce(e,a,A,f,y)}var v=r("u"),s=r("v"),o=r("w"),b=r("x"),g=r("y"),d=r("z");if(!v||!v.length||!s||!s.length||!o||!o.length||!b||!b.length||!g||!g.length||!d||!d.length){a.visible=!1;return}r("sizeref"),r("sizemode"),r("anchor"),r("lighting.ambient"),r("lighting.diffuse"),r("lighting.specular"),r("lighting.roughness"),r("lighting.fresnel"),r("lightposition.x"),r("lightposition.y"),r("lightposition.z"),c(e,a,n,r,{prefix:"",cLetter:"c"}),r("text"),r("hovertext"),r("hovertemplate"),r("uhoverformat"),r("vhoverformat"),r("whoverformat"),r("xhoverformat"),r("yhoverformat"),r("zhoverformat"),a._length=null}},{"../../components/colorscale/defaults":377,"../../lib":515,"./attributes":739}],743:[function(t,B,V){B.exports={moduleType:"trace",name:"cone",basePlotModule:t("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:t("./calc"),plot:t("./convert"),eventData:function(m,c){return m.norm=c.traceCoordinate[6],m},meta:{}}},{"../../plots/gl3d":607,"./attributes":739,"./calc":740,"./convert":741,"./defaults":742}],744:[function(t,B,V){var m=t("../heatmap/attributes"),c=t("../scatter/attributes"),A=t("../../plots/cartesian/axis_format_attributes"),T=A.axisHoverFormat,e=A.descriptionOnlyNumbers,a=t("../../components/colorscale/attributes"),i=t("../../components/drawing/attributes").dash,n=t("../../plots/font_attributes"),r=t("../../lib/extend").extendFlat,v=t("../../constants/filter_ops"),s=v.COMPARISON_OPS2,o=v.INTERVAL_OPS,b=c.line;B.exports=r({z:m.z,x:m.x,x0:m.x0,dx:m.dx,y:m.y,y0:m.y0,dy:m.dy,xperiod:m.xperiod,yperiod:m.yperiod,xperiod0:c.xperiod0,yperiod0:c.yperiod0,xperiodalignment:m.xperiodalignment,yperiodalignment:m.yperiodalignment,text:m.text,hovertext:m.hovertext,transpose:m.transpose,xtype:m.xtype,ytype:m.ytype,xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:m.hovertemplate,texttemplate:r({},m.texttemplate,{}),textfont:r({},m.textfont,{}),hoverongaps:m.hoverongaps,connectgaps:r({},m.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:n({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:e("contour label")},operation:{valType:"enumerated",values:[].concat(s).concat(o),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:r({},b.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:i,smoothing:r({},b.smoothing,{}),editType:"plot"}},a("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":374,"../../components/drawing/attributes":388,"../../constants/filter_ops":487,"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../../plots/font_attributes":594,"../heatmap/attributes":801,"../scatter/attributes":936}],745:[function(t,B,V){var m=t("../../components/colorscale"),c=t("../heatmap/calc"),A=t("./set_contours"),T=t("./end_plus");B.exports=function(a,i){var n=c(a,i),r=n[0].z;A(i,r);var v=i.contours,s=m.extractOpts(i),o;if(v.coloring==="heatmap"&&s.auto&&i.autocontour===!1){var b=v.start,g=T(v),d=v.size||1,f=Math.floor((g-b)/d)+1;isFinite(d)||(d=1,f=1);var y=b-d/2,l=y+f*d;o=[y,l]}else o=r;return m.calc(a,i,{vals:o,cLetter:"z"}),n}},{"../../components/colorscale":379,"../heatmap/calc":802,"./end_plus":755,"./set_contours":763}],746:[function(t,B,V){B.exports=function(m,c){var A=m[0],T=A.z,e;switch(c.type){case"levels":var a=Math.min(T[0][0],T[0][1]);for(e=0;e<m.length;e++){var i=m[e];i.prefixBoundary=!i.edgepaths.length&&(a>i.level||i.starts.length&&a===i.level)}break;case"constraint":if(A.prefixBoundary=!1,A.edgepaths.length)return;var n=A.x.length,r=A.y.length,v=-1/0,s=1/0;for(e=0;e<r;e++)s=Math.min(s,T[e][0]),s=Math.min(s,T[e][n-1]),v=Math.max(v,T[e][0]),v=Math.max(v,T[e][n-1]);for(e=1;e<n-1;e++)s=Math.min(s,T[0][e]),s=Math.min(s,T[r-1][e]),v=Math.max(v,T[0][e]),v=Math.max(v,T[r-1][e]);var o=c.value,b,g;switch(c._operation){case">":o>v&&(A.prefixBoundary=!0);break;case"<":(o<s||A.starts.length&&o===s)&&(A.prefixBoundary=!0);break;case"[]":b=Math.min(o[0],o[1]),g=Math.max(o[0],o[1]),(g<s||b>v||A.starts.length&&g===s)&&(A.prefixBoundary=!0);break;case"][":b=Math.min(o[0],o[1]),g=Math.max(o[0],o[1]),b<s&&g>v&&(A.prefixBoundary=!0);break}break}}},{}],747:[function(t,B,V){var m=t("../../components/colorscale"),c=t("./make_color_map"),A=t("./end_plus");function T(e,a,i){var n=a.contours,r=a.line,v=n.size||1,s=n.coloring,o=c(a,{isColorbar:!0});if(s==="heatmap"){var b=m.extractOpts(a);i._fillgradient=b.reversescale?m.flipScale(b.colorscale):b.colorscale,i._zrange=[b.min,b.max]}else s==="fill"&&(i._fillcolor=o);i._line={color:s==="lines"?o:r.color,width:n.showlines!==!1?r.width:0,dash:r.dash},i._levels={start:n.start,end:A(n),size:v}}B.exports={min:"zmin",max:"zmax",calc:T}},{"../../components/colorscale":379,"./end_plus":755,"./make_color_map":760}],748:[function(t,B,V){B.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},{}],749:[function(t,B,V){var m=t("fast-isnumeric"),c=t("./label_defaults"),A=t("../../components/color"),T=A.addOpacity,e=A.opacity,a=t("../../constants/filter_ops"),i=a.CONSTRAINT_REDUCTION,n=a.COMPARISON_OPS2;B.exports=function(s,o,b,g,d,f){var y=o.contours,l,x,u,M=b("contours.operation");if(y._operation=i[M],r(b,y),M==="="?l=y.showlines=!0:(l=b("contours.showlines"),u=b("fillcolor",T((s.line||{}).color||d,.5))),l){var _=u&&e(u)?T(o.fillcolor,1):d;x=b("line.color",_),b("line.width",2),b("line.dash")}b("line.smoothing"),c(b,g,x,f)};function r(v,s){var o;n.indexOf(s.operation)===-1?(v("contours.value",[0,1]),Array.isArray(s.value)?s.value.length>2?s.value=s.value.slice(2):s.length===0?s.value=[0,1]:s.length<2?(o=parseFloat(s.value[0]),s.value=[o,o+1]):s.value=[parseFloat(s.value[0]),parseFloat(s.value[1])]:m(s.value)&&(o=parseFloat(s.value),s.value=[o,o+1])):(v("contours.value",0),m(s.value)||(Array.isArray(s.value)?s.value=parseFloat(s.value[0]):s.value=0))}},{"../../components/color":367,"../../constants/filter_ops":487,"./label_defaults":759,"fast-isnumeric":190}],750:[function(t,B,V){var m=t("../../constants/filter_ops"),c=t("fast-isnumeric");B.exports={"[]":T("[]"),"][":T("]["),">":e(">"),"<":e("<"),"=":e("=")};function A(a,i){var n=Array.isArray(i),r;function v(s){return c(s)?+s:null}return m.COMPARISON_OPS2.indexOf(a)!==-1?r=v(n?i[0]:i):m.INTERVAL_OPS.indexOf(a)!==-1?r=n?[v(i[0]),v(i[1])]:[v(i),v(i)]:m.SET_OPS.indexOf(a)!==-1&&(r=n?i.map(v):[v(i)]),r}function T(a){return function(i){i=A(a,i);var n=Math.min(i[0],i[1]),r=Math.max(i[0],i[1]);return{start:n,end:r,size:r-n}}}function e(a){return function(i){return i=A(a,i),{start:i,end:1/0,size:1/0}}}},{"../../constants/filter_ops":487,"fast-isnumeric":190}],751:[function(t,B,V){B.exports=function(c,A,T,e){var a=e("contours.start"),i=e("contours.end"),n=a===!1||i===!1,r=T("contours.size"),v;n?v=A.autocontour=!0:v=T("autocontour",!1),(v||!r)&&T("ncontours")}},{}],752:[function(t,B,V){var m=t("../../lib");B.exports=function(A,T){var e,a,i,n=function(s){return s.reverse()},r=function(s){return s};switch(T){case"=":case"<":return A;case">":for(A.length!==1&&m.warn("Contour data invalid for the specified inequality operation."),a=A[0],e=0;e<a.edgepaths.length;e++)a.edgepaths[e]=n(a.edgepaths[e]);for(e=0;e<a.paths.length;e++)a.paths[e]=n(a.paths[e]);for(e=0;e<a.starts.length;e++)a.starts[e]=n(a.starts[e]);return A;case"][":var v=n;n=r,r=v;case"[]":for(A.length!==2&&m.warn("Contour data invalid for the specified inequality range operation."),a=c(A[0]),i=c(A[1]),e=0;e<a.edgepaths.length;e++)a.edgepaths[e]=n(a.edgepaths[e]);for(e=0;e<a.paths.length;e++)a.paths[e]=n(a.paths[e]);for(e=0;e<a.starts.length;e++)a.starts[e]=n(a.starts[e]);for(;i.edgepaths.length;)a.edgepaths.push(r(i.edgepaths.shift()));for(;i.paths.length;)a.paths.push(r(i.paths.shift()));for(;i.starts.length;)a.starts.push(r(i.starts.shift()));return[a]}};function c(A){return m.extendFlat({},A,{edgepaths:m.extendDeep([],A.edgepaths),paths:m.extendDeep([],A.paths),starts:m.extendDeep([],A.starts)})}},{"../../lib":515}],753:[function(t,B,V){var m=t("../../lib"),c=t("../heatmap/xyz_defaults"),A=t("../scatter/period_defaults"),T=t("./constraint_defaults"),e=t("./contours_defaults"),a=t("./style_defaults"),i=t("../heatmap/label_defaults"),n=t("./attributes");B.exports=function(v,s,o,b){function g(l,x){return m.coerce(v,s,n,l,x)}function d(l){return m.coerce2(v,s,n,l)}var f=c(v,s,g,b);if(!f){s.visible=!1;return}A(v,s,b,g),g("xhoverformat"),g("yhoverformat"),g("text"),g("hovertext"),g("hoverongaps"),g("hovertemplate");var y=g("contours.type")==="constraint";g("connectgaps",m.isArray1D(s.z)),y?T(v,s,g,b,o):(e(v,s,g,d),a(v,s,g,b)),s.contours&&s.contours.coloring==="heatmap"&&i(g,b)}},{"../../lib":515,"../heatmap/label_defaults":811,"../heatmap/xyz_defaults":816,"../scatter/period_defaults":956,"./attributes":744,"./constraint_defaults":749,"./contours_defaults":751,"./style_defaults":765}],754:[function(t,B,V){var m=t("../../lib"),c=t("./constraint_mapping"),A=t("./end_plus");B.exports=function(e,a,i){for(var n=e.type==="constraint"?c[e._operation](e.value):e,r=n.size,v=[],s=A(n),o=i.trace._carpetTrace,b=o?{xaxis:o.aaxis,yaxis:o.baxis,x:i.a,y:i.b}:{xaxis:a.xaxis,yaxis:a.yaxis,x:i.x,y:i.y},g=n.start;g<s;g+=r)if(v.push(m.extendFlat({level:g,crossings:{},starts:[],edgepaths:[],paths:[],z:i.z,smoothing:i.trace.line.smoothing},b)),v.length>1e3){m.warn("Too many contours, clipping at 1000",e);break}return v}},{"../../lib":515,"./constraint_mapping":750,"./end_plus":755}],755:[function(t,B,V){B.exports=function(c){return c.end+c.size/1e6}},{}],756:[function(t,B,V){var m=t("../../lib"),c=t("./constants");B.exports=function(r,v,s){var o,b,g,d,f;for(v=v||.01,s=s||.01,g=0;g<r.length;g++){for(d=r[g],f=0;f<d.starts.length;f++)b=d.starts[f],e(d,b,"edge",v,s);for(o=0;Object.keys(d.crossings).length&&o<1e4;)o++,b=Object.keys(d.crossings)[0].split(",").map(Number),e(d,b,void 0,v,s);o===1e4&&m.log("Infinite loop in contour?")}};function A(n,r,v,s){return Math.abs(n[0]-r[0])<v&&Math.abs(n[1]-r[1])<s}function T(n,r){var v=n[2]-r[2],s=n[3]-r[3];return Math.sqrt(v*v+s*s)}function e(n,r,v,s,o){var b=r.join(","),g=n.crossings[b],d=a(g,v,r),f=[i(n,r,[-d[0],-d[1]])],y=n.z.length,l=n.z[0].length,x=r.slice(),u=d.slice(),M;for(M=0;M<1e4;M++){if(g>20?(g=c.CHOOSESADDLE[g][(d[0]||d[1])<0?0:1],n.crossings[b]=c.SADDLEREMAINDER[g]):delete n.crossings[b],d=c.NEWDELTA[g],!d){m.log("Found bad marching index:",g,r,n.level);break}f.push(i(n,r,d)),r[0]+=d[0],r[1]+=d[1],b=r.join(","),A(f[f.length-1],f[f.length-2],s,o)&&f.pop();var _=d[0]&&(r[0]<0||r[0]>l-2)||d[1]&&(r[1]<0||r[1]>y-2),p=r[0]===x[0]&&r[1]===x[1]&&d[0]===u[0]&&d[1]===u[1];if(p||v&&_)break;g=n.crossings[b]}M===1e4&&m.log("Infinite loop in contour?");var w=A(f[0],f[f.length-1],s,o),h=0,L=.2*n.smoothing,S=[],E=0,P,F,I,D,R,N,z,G,Y,ee,Z;for(M=1;M<f.length;M++)z=T(f[M],f[M-1]),h+=z,S.push(z);var X=h/S.length*L;function ne(K){return f[K%f.length]}for(M=f.length-2;M>=E;M--)if(P=S[M],P<X){for(I=0,F=M-1;F>=E&&P+S[F]<X;F--)P+=S[F];if(w&&M===f.length-2)for(I=0;I<F&&P+S[I]<X;I++)P+=S[I];R=M-F+I+1,N=Math.floor((M+F+I+2)/2),!w&&M===f.length-2?D=f[f.length-1]:!w&&F===-1?D=f[0]:R%2?D=ne(N):D=[(ne(N)[0]+ne(N+1)[0])/2,(ne(N)[1]+ne(N+1)[1])/2],f.splice(F+1,M-F+1,D),M=F+1,I&&(E=I),w&&(M===f.length-2?f[I]=f[f.length-1]:M===0&&(f[f.length-1]=f[0]))}for(f.splice(0,E),M=0;M<f.length;M++)f[M].length=2;if(!(f.length<2))if(w)f.pop(),n.paths.push(f);else{v||m.log("Unclosed interior contour?",n.level,x.join(","),f.join("L"));var ce=!1;for(G=0;G<n.edgepaths.length;G++)if(ee=n.edgepaths[G],!ce&&A(ee[0],f[f.length-1],s,o)){f.pop(),ce=!0;var Q=!1;for(Y=0;Y<n.edgepaths.length;Y++)if(Z=n.edgepaths[Y],A(Z[Z.length-1],f[0],s,o)){Q=!0,f.shift(),n.edgepaths.splice(G,1),Y===G?n.paths.push(f.concat(Z)):(Y>G&&Y--,n.edgepaths[Y]=Z.concat(f,ee));break}Q||(n.edgepaths[G]=f.concat(ee))}for(G=0;G<n.edgepaths.length&&!ce;G++)ee=n.edgepaths[G],A(ee[ee.length-1],f[0],s,o)&&(f.shift(),n.edgepaths[G]=ee.concat(f),ce=!0);ce||n.edgepaths.push(f)}}function a(n,r,v){var s=0,o=0;return n>20&&r?n===208||n===1114?s=v[0]===0?1:-1:o=v[1]===0?1:-1:c.BOTTOMSTART.indexOf(n)!==-1?o=1:c.LEFTSTART.indexOf(n)!==-1?s=1:c.TOPSTART.indexOf(n)!==-1?o=-1:s=-1,[s,o]}function i(n,r,v){var s=r[0]+Math.max(v[0],0),o=r[1]+Math.max(v[1],0),b=n.z[o][s],g=n.xaxis,d=n.yaxis;if(v[1]){var f=(n.level-b)/(n.z[o][s+1]-b),y=(f!==1?(1-f)*g.c2l(n.x[s]):0)+(f!==0?f*g.c2l(n.x[s+1]):0);return[g.c2p(g.l2c(y),!0),d.c2p(n.y[o],!0),s+f,o]}else{var l=(n.level-b)/(n.z[o+1][s]-b),x=(l!==1?(1-l)*d.c2l(n.y[o]):0)+(l!==0?l*d.c2l(n.y[o+1]):0);return[g.c2p(n.x[s],!0),d.c2p(d.l2c(x),!0),s,o+l]}}},{"../../lib":515,"./constants":748}],757:[function(t,B,V){var m=t("../../components/color"),c=t("../heatmap/hover");B.exports=function(T,e,a,i,n){n||(n={}),n.isContour=!0;var r=c(T,e,a,i,n);return r&&r.forEach(function(v){var s=v.trace;s.contours.type==="constraint"&&(s.fillcolor&&m.opacity(s.fillcolor)?v.color=m.addOpacity(s.fillcolor,1):s.contours.showlines&&m.opacity(s.line.color)&&(v.color=m.addOpacity(s.line.color,1)))}),r}},{"../../components/color":367,"../heatmap/hover":808}],758:[function(t,B,V){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),calc:t("./calc"),plot:t("./plot").plot,style:t("./style"),colorbar:t("./colorbar"),hoverPoints:t("./hover"),moduleType:"trace",name:"contour",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},{"../../plots/cartesian":578,"./attributes":744,"./calc":745,"./colorbar":747,"./defaults":753,"./hover":757,"./plot":762,"./style":764}],759:[function(t,B,V){var m=t("../../lib");B.exports=function(A,T,e,a){a||(a={});var i=A("contours.showlabels");if(i){var n=T.font;m.coerceFont(A,"contours.labelfont",{family:n.family,size:n.size,color:e}),A("contours.labelformat")}a.hasHover!==!1&&A("zhoverformat")}},{"../../lib":515}],760:[function(t,B,V){var m=t("@plotly/d3"),c=t("../../components/colorscale"),A=t("./end_plus");B.exports=function(e){var a=e.contours,i=a.start,n=A(a),r=a.size||1,v=Math.floor((n-i)/r)+1,s=a.coloring==="lines"?0:1,o=c.extractOpts(e);isFinite(r)||(r=1,v=1);var b=o.reversescale?c.flipScale(o.colorscale):o.colorscale,g=b.length,d=new Array(g),f=new Array(g),y,l;if(a.coloring==="heatmap"){var x=o.min,u=o.max;for(l=0;l<g;l++)y=b[l],d[l]=y[0]*(u-x)+x,f[l]=y[1];var M=m.extent([x,u,a.start,a.start+r*(v-1)]),_=M[x<u?0:1],p=M[x<u?1:0];_!==x&&(d.splice(0,0,_),f.splice(0,0,f[0])),p!==u&&(d.push(p),f.push(f[f.length-1]))}else for(l=0;l<g;l++)y=b[l],d[l]=(y[0]*(v+s-1)-s/2)*r+i,f[l]=y[1];return c.makeColorScaleFunc({domain:d,range:f},{noNumericCheck:!0})}},{"../../components/colorscale":379,"./end_plus":755,"@plotly/d3":58}],761:[function(t,B,V){var m=t("./constants");B.exports=function(T){var e=T[0].z,a=e.length,i=e[0].length,n=a===2||i===2,r,v,s,o,b,g,d,f,y;for(v=0;v<a-1;v++)for(o=[],v===0&&(o=o.concat(m.BOTTOMSTART)),v===a-2&&(o=o.concat(m.TOPSTART)),r=0;r<i-1;r++)for(s=o.slice(),r===0&&(s=s.concat(m.LEFTSTART)),r===i-2&&(s=s.concat(m.RIGHTSTART)),b=r+","+v,g=[[e[v][r],e[v][r+1]],[e[v+1][r],e[v+1][r+1]]],y=0;y<T.length;y++)f=T[y],d=c(f.level,g),d&&(f.crossings[b]=d,s.indexOf(d)!==-1&&(f.starts.push([r,v]),n&&s.indexOf(d,s.indexOf(d)+1)!==-1&&f.starts.push([r,v])))};function c(A,T){var e=(T[0][0]>A?0:1)+(T[0][1]>A?0:2)+(T[1][1]>A?0:4)+(T[1][0]>A?0:8);if(e===5||e===10){var a=(T[0][0]+T[0][1]+T[1][0]+T[1][1])/4;return A>a?e===5?713:1114:e===5?104:208}return e===15?0:e}},{"./constants":748}],762:[function(t,B,V){var m=t("@plotly/d3"),c=t("../../lib"),A=t("../../components/drawing"),T=t("../../components/colorscale"),e=t("../../lib/svg_text_utils"),a=t("../../plots/cartesian/axes"),i=t("../../plots/cartesian/set_convert"),n=t("../heatmap/plot"),r=t("./make_crossings"),v=t("./find_all_paths"),s=t("./empty_pathinfo"),o=t("./convert_to_constraints"),b=t("./close_boundaries"),g=t("./constants"),d=g.LABELOPTIMIZER;V.plot=function(w,h,L,S){var E=h.xaxis,P=h.yaxis;c.makeTraceGroups(S,L,"contour").each(function(F){var I=m.select(this),D=F[0],R=D.trace,N=D.x,z=D.y,G=R.contours,Y=s(G,h,D),ee=c.ensureSingle(I,"g","heatmapcoloring"),Z=[];G.coloring==="heatmap"&&(Z=[F]),n(w,h,Z,ee),r(Y),v(Y);var X=E.c2p(N[0],!0),ne=E.c2p(N[N.length-1],!0),ce=P.c2p(z[0],!0),Q=P.c2p(z[z.length-1],!0),K=[[X,Q],[ne,Q],[ne,ce],[X,ce]],U=Y;G.type==="constraint"&&(U=o(Y,G._operation)),f(I,K,G),y(I,U,K,G),x(I,Y,w,D,G),M(I,h,w,D,K)})};function f(p,w,h){var L=c.ensureSingle(p,"g","contourbg"),S=L.selectAll("path").data(h.coloring==="fill"?[0]:[]);S.enter().append("path"),S.exit().remove(),S.attr("d","M"+w.join("L")+"Z").style("stroke","none")}function y(p,w,h,L){var S=L.coloring==="fill"||L.type==="constraint"&&L._operation!=="=",E="M"+h.join("L")+"Z";S&&b(w,L);var P=c.ensureSingle(p,"g","contourfill"),F=P.selectAll("path").data(S?w:[]);F.enter().append("path"),F.exit().remove(),F.each(function(I){var D=(I.prefixBoundary?E:"")+l(I,h);D?m.select(this).attr("d",D).style("stroke","none"):m.select(this).remove()})}function l(p,w){var h="",L=0,S=p.edgepaths.map(function(X,ne){return ne}),E=!0,P,F,I,D,R,N;function z(X){return Math.abs(X[1]-w[0][1])<.01}function G(X){return Math.abs(X[1]-w[2][1])<.01}function Y(X){return Math.abs(X[0]-w[0][0])<.01}function ee(X){return Math.abs(X[0]-w[2][0])<.01}for(;S.length;){for(N=A.smoothopen(p.edgepaths[L],p.smoothing),h+=E?N:N.replace(/^M/,"L"),S.splice(S.indexOf(L),1),P=p.edgepaths[L][p.edgepaths[L].length-1],D=-1,I=0;I<4;I++){if(!P){c.log("Missing end?",L,p);break}for(z(P)&&!ee(P)?F=w[1]:Y(P)?F=w[0]:G(P)?F=w[3]:ee(P)&&(F=w[2]),R=0;R<p.edgepaths.length;R++){var Z=p.edgepaths[R][0];Math.abs(P[0]-F[0])<.01?Math.abs(P[0]-Z[0])<.01&&(Z[1]-P[1])*(F[1]-Z[1])>=0&&(F=Z,D=R):Math.abs(P[1]-F[1])<.01?Math.abs(P[1]-Z[1])<.01&&(Z[0]-P[0])*(F[0]-Z[0])>=0&&(F=Z,D=R):c.log("endpt to newendpt is not vert. or horz.",P,F,Z)}if(P=F,D>=0)break;h+="L"+F}if(D===p.edgepaths.length){c.log("unclosed perimeter path");break}L=D,E=S.indexOf(L)===-1,E&&(L=S[0],h+="Z")}for(L=0;L<p.paths.length;L++)h+=A.smoothclosed(p.paths[L],p.smoothing);return h}function x(p,w,h,L,S){var E=c.ensureSingle(p,"g","contourlines"),P=S.showlines!==!1,F=S.showlabels,I=P&&F,D=V.createLines(E,P||F,w),R=V.createLineClip(E,I,h,L.trace.uid),N=p.selectAll("g.contourlabels").data(F?[0]:[]);if(N.exit().remove(),N.enter().append("g").classed("contourlabels",!0),F){var z=[],G=[];c.clearLocationCache();var Y=V.labelFormatter(h,L),ee=A.tester.append("text").attr("data-notex",1).call(A.font,S.labelfont),Z=w[0].xaxis,X=w[0].yaxis,ne=Z._length,ce=X._length,Q=Z.range,K=X.range,U=c.aggNums(Math.min,null,L.x),H=c.aggNums(Math.max,null,L.x),q=c.aggNums(Math.min,null,L.y),re=c.aggNums(Math.max,null,L.y),j=Math.max(Z.c2p(U,!0),0),$=Math.min(Z.c2p(H,!0),ne),ie=Math.max(X.c2p(re,!0),0),oe=Math.min(X.c2p(q,!0),ce),ae={};Q[0]<Q[1]?(ae.left=j,ae.right=$):(ae.left=$,ae.right=j),K[0]<K[1]?(ae.top=ie,ae.bottom=oe):(ae.top=oe,ae.bottom=ie),ae.middle=(ae.top+ae.bottom)/2,ae.center=(ae.left+ae.right)/2,z.push([[ae.left,ae.top],[ae.right,ae.top],[ae.right,ae.bottom],[ae.left,ae.bottom]]);var se=Math.sqrt(ne*ne+ce*ce),_e=g.LABELDISTANCE*se/Math.max(1,w.length/g.LABELINCREASE);D.each(function(ue){var ye=V.calcTextOpts(ue.level,Y,ee,h);m.select(this).selectAll("path").each(function(){var xe=this,me=c.getVisibleSegment(xe,ae,ye.height/2);if(!!me&&!(me.len<(ye.width+ye.height)*g.LABELMIN))for(var be=Math.min(Math.ceil(me.len/_e),g.LABELMAX),ke=0;ke<be;ke++){var De=V.findBestTextLocation(xe,me,ye,G,ae);if(!De)break;V.addLabelData(De,ye,G,z)}})}),ee.remove(),V.drawLabels(N,G,h,R,I?z:null)}F&&!P&&D.remove()}V.createLines=function(p,w,h){var L=h[0].smoothing,S=p.selectAll("g.contourlevel").data(w?h:[]);if(S.exit().remove(),S.enter().append("g").classed("contourlevel",!0),w){var E=S.selectAll("path.openline").data(function(F){return F.pedgepaths||F.edgepaths});E.exit().remove(),E.enter().append("path").classed("openline",!0),E.attr("d",function(F){return A.smoothopen(F,L)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke");var P=S.selectAll("path.closedline").data(function(F){return F.ppaths||F.paths});P.exit().remove(),P.enter().append("path").classed("closedline",!0),P.attr("d",function(F){return A.smoothclosed(F,L)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke")}return S},V.createLineClip=function(p,w,h,L){var S=h._fullLayout._clips,E=w?"clipline"+L:null,P=S.selectAll("#"+E).data(w?[0]:[]);return P.exit().remove(),P.enter().append("clipPath").classed("contourlineclip",!0).attr("id",E),A.setClipUrl(p,E,h),P},V.labelFormatter=function(p,w){var h=p._fullLayout,L=w.trace,S=L.contours,E={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(S.labelformat)E.tickformat=S.labelformat,i(E,h);else{var P=T.extractOpts(L);if(P&&P.colorbar&&P.colorbar._axis)E=P.colorbar._axis;else{if(S.type==="constraint"){var F=S.value;Array.isArray(F)?E.range=[F[0],F[F.length-1]]:E.range=[F,F]}else E.range=[S.start,S.end],E.nticks=(S.end-S.start)/S.size;E.range[0]===E.range[1]&&(E.range[1]+=E.range[0]||1),E.nticks||(E.nticks=1e3),i(E,h),a.prepTicks(E),E._tmin=null,E._tmax=null}}return function(I){return a.tickText(E,I).text}},V.calcTextOpts=function(p,w,h,L){var S=w(p);h.text(S).call(e.convertToTspans,L);var E=h.node(),P=A.bBox(E,!0);return{text:S,width:P.width,height:P.height,fontSize:+E.style["font-size"].replace("px",""),level:p,dy:(P.top+P.bottom)/2}},V.findBestTextLocation=function(p,w,h,L,S){var E=h.width,P,F,I,D,R;w.isClosed?(F=w.len/d.INITIALSEARCHPOINTS,P=w.min+F/2,I=w.max):(F=(w.len-E)/(d.INITIALSEARCHPOINTS+1),P=w.min+F+E/2,I=w.max-(F+E)/2);for(var N=1/0,z=0;z<d.ITERATIONS;z++){for(var G=P;G<I;G+=F){var Y=c.getTextLocation(p,w.total,G,E),ee=u(Y,h,L,S);ee<N&&(N=ee,R=Y,D=G)}if(N>d.MAXCOST*2)break;z&&(F/=2),P=D-F/2,I=P+F*1.5}if(N<=d.MAXCOST)return R};function u(p,w,h,L){var S=w.width/2,E=w.height/2,P=p.x,F=p.y,I=p.theta,D=Math.cos(I)*S,R=Math.sin(I)*S,N=(P>L.center?L.right-P:P-L.left)/(D+Math.abs(Math.sin(I)*E)),z=(F>L.middle?L.bottom-F:F-L.top)/(Math.abs(R)+Math.cos(I)*E);if(N<1||z<1)return 1/0;var G=d.EDGECOST*(1/(N-1)+1/(z-1));G+=d.ANGLECOST*I*I;for(var Y=P-D,ee=F-R,Z=P+D,X=F+R,ne=0;ne<h.length;ne++){var ce=h[ne],Q=Math.cos(ce.theta)*ce.width/2,K=Math.sin(ce.theta)*ce.width/2,U=c.segmentDistance(Y,ee,Z,X,ce.x-Q,ce.y-K,ce.x+Q,ce.y+K)*2/(w.height+ce.height),H=ce.level===w.level,q=H?d.SAMELEVELDISTANCE:1;if(U<=q)return 1/0;var re=d.NEIGHBORCOST*(H?d.SAMELEVELFACTOR:1);G+=re/(U-q)}return G}V.addLabelData=function(p,w,h,L){var S=w.fontSize,E=w.width+S/3,P=Math.max(0,w.height-S/3),F=p.x,I=p.y,D=p.theta,R=Math.sin(D),N=Math.cos(D),z=function(Y,ee){return[F+Y*N-ee*R,I+Y*R+ee*N]},G=[z(-E/2,-P/2),z(-E/2,P/2),z(E/2,P/2),z(E/2,-P/2)];h.push({text:w.text,x:F,y:I,dy:w.dy,theta:D,level:w.level,width:E,height:P}),L.push(G)},V.drawLabels=function(p,w,h,L,S){var E=p.selectAll("text").data(w,function(D){return D.text+","+D.x+","+D.y+","+D.theta});if(E.exit().remove(),E.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(D){var R=D.x+Math.sin(D.theta)*D.dy,N=D.y-Math.cos(D.theta)*D.dy;m.select(this).text(D.text).attr({x:R,y:N,transform:"rotate("+180*D.theta/Math.PI+" "+R+" "+N+")"}).call(e.convertToTspans,h)}),S){for(var P="",F=0;F<S.length;F++)P+="M"+S[F].join("L")+"Z";var I=c.ensureSingle(L,"path","");I.attr("d",P)}};function M(p,w,h,L,S){var E=L.trace,P=h._fullLayout._clips,F="clip"+E.uid,I=P.selectAll("#"+F).data(E.connectgaps?[]:[0]);if(I.enter().append("clipPath").classed("contourclip",!0).attr("id",F),I.exit().remove(),E.connectgaps===!1){var D={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:w.xaxis,yaxis:w.yaxis,x:L.x,y:L.y,z:_(L),smoothing:0};r([D]),v([D]),b([D],{type:"levels"});var R=c.ensureSingle(I,"path","");R.attr("d",(D.prefixBoundary?"M"+S.join("L")+"Z":"")+l(D,S))}else F=null;A.setClipUrl(p,F,h)}function _(p){var w=p.trace._emptypoints,h=[],L=p.z.length,S=p.z[0].length,E,P=[],F;for(E=0;E<S;E++)P.push(1);for(E=0;E<L;E++)h.push(P.slice());for(E=0;E<w.length;E++)F=w[E],h[F[0]][F[1]]=0;return p.zmask=h,h}},{"../../components/colorscale":379,"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../plots/cartesian/set_convert":585,"../heatmap/plot":813,"./close_boundaries":746,"./constants":748,"./convert_to_constraints":752,"./empty_pathinfo":754,"./find_all_paths":756,"./make_crossings":761,"@plotly/d3":58}],763:[function(t,B,V){var m=t("../../plots/cartesian/axes"),c=t("../../lib");B.exports=function(e,a){var i=e.contours;if(e.autocontour){var n=e.zmin,r=e.zmax;(e.zauto||n===void 0)&&(n=c.aggNums(Math.min,null,a)),(e.zauto||r===void 0)&&(r=c.aggNums(Math.max,null,a));var v=A(n,r,e.ncontours);i.size=v.dtick,i.start=m.tickFirst(v),v.range.reverse(),i.end=m.tickFirst(v),i.start===n&&(i.start+=i.size),i.end===r&&(i.end-=i.size),i.start>i.end&&(i.start=i.end=(i.start+i.end)/2),e._input.contours||(e._input.contours={}),c.extendFlat(e._input.contours,{start:i.start,end:i.end,size:i.size}),e._input.autocontour=!0}else if(i.type!=="constraint"){var s=i.start,o=i.end,b=e._input.contours;if(s>o&&(i.start=b.start=o,o=i.end=b.end=s,s=i.start),!(i.size>0)){var g;s===o?g=1:g=A(s,o,e.ncontours).dtick,b.size=i.size=g}}};function A(T,e,a){var i={type:"linear",range:[T,e]};return m.autoTicks(i,(e-T)/(a||15)),i}},{"../../lib":515,"../../plots/cartesian/axes":566}],764:[function(t,B,V){var m=t("@plotly/d3"),c=t("../../components/drawing"),A=t("../heatmap/style"),T=t("./make_color_map");B.exports=function(a){var i=m.select(a).selectAll("g.contour");i.style("opacity",function(n){return n[0].trace.opacity}),i.each(function(n){var r=m.select(this),v=n[0].trace,s=v.contours,o=v.line,b=s.size||1,g=s.start,d=s.type==="constraint",f=!d&&s.coloring==="lines",y=!d&&s.coloring==="fill",l=f||y?T(v):null;r.selectAll("g.contourlevel").each(function(M){m.select(this).selectAll("path").call(c.lineGroupStyle,o.width,f?l(M.level):o.color,o.dash)});var x=s.labelfont;if(r.selectAll("g.contourlabels text").each(function(M){c.font(m.select(this),{family:x.family,size:x.size,color:x.color||(f?l(M.level):o.color)})}),d)r.selectAll("g.contourfill path").style("fill",v.fillcolor);else if(y){var u;r.selectAll("g.contourfill path").style("fill",function(M){return u===void 0&&(u=M.level),l(M.level+.5*b)}),u===void 0&&(u=g),r.selectAll("g.contourbg path").style("fill",l(u-.5*b))}}),A(a)}},{"../../components/drawing":389,"../heatmap/style":814,"./make_color_map":760,"@plotly/d3":58}],765:[function(t,B,V){var m=t("../../components/colorscale/defaults"),c=t("./label_defaults");B.exports=function(T,e,a,i,n){var r=a("contours.coloring"),v,s="";r==="fill"&&(v=a("contours.showlines")),v!==!1&&(r!=="lines"&&(s=a("line.color","#000")),a("line.width",.5),a("line.dash")),r!=="none"&&(T.showlegend!==!0&&(e.showlegend=!1),e._dfltShowLegend=!1,m(T,e,i,a,{prefix:"",cLetter:"z"})),a("line.smoothing"),c(a,i,s,n)}},{"../../components/colorscale/defaults":377,"./label_defaults":759}],766:[function(t,B,V){var m=t("../heatmap/attributes"),c=t("../contour/attributes"),A=t("../../components/colorscale/attributes"),T=t("../../lib/extend").extendFlat,e=c.contours;B.exports=T({carpet:{valType:"string",editType:"calc"},z:m.z,a:m.x,a0:m.x0,da:m.dx,b:m.y,b0:m.y0,db:m.dy,text:m.text,hovertext:m.hovertext,transpose:m.transpose,atype:m.xtype,btype:m.ytype,fillcolor:c.fillcolor,autocontour:c.autocontour,ncontours:c.ncontours,contours:{type:e.type,start:e.start,end:e.end,size:e.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:e.showlines,showlabels:e.showlabels,labelfont:e.labelfont,labelformat:e.labelformat,operation:e.operation,value:e.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:c.line.color,width:c.line.width,dash:c.line.dash,smoothing:c.line.smoothing,editType:"plot"},transforms:void 0},A("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../contour/attributes":744,"../heatmap/attributes":801}],767:[function(t,B,V){var m=t("../../components/colorscale/calc"),c=t("../../lib"),A=t("../heatmap/convert_column_xyz"),T=t("../heatmap/clean_2d_array"),e=t("../heatmap/interp2d"),a=t("../heatmap/find_empties"),i=t("../heatmap/make_bound_array"),n=t("./defaults"),r=t("../carpet/lookup_carpetid"),v=t("../contour/set_contours");B.exports=function(b,g){var d=g._carpetTrace=r(b,g);if(!(!d||!d.visible||d.visible==="legendonly")){if(!g.a||!g.b){var f=b.data[d.index],y=b.data[g.index];y.a||(y.a=f.a),y.b||(y.b=f.b),n(y,g,g._defaultColor,b._fullLayout)}var l=s(b,g);return v(g,g._z),l}};function s(o,b){var g=b._carpetTrace,d=g.aaxis,f=g.baxis,y,l,x,u,M,_,p;d._minDtick=0,f._minDtick=0,c.isArray1D(b.z)&&A(b,d,f,"a","b",["z"]),y=b._a=b._a||b.a,u=b._b=b._b||b.b,y=y?d.makeCalcdata(b,"_a"):[],u=u?f.makeCalcdata(b,"_b"):[],l=b.a0||0,x=b.da||1,M=b.b0||0,_=b.db||1,p=b._z=T(b._z||b.z,b.transpose),b._emptypoints=a(p),e(p,b._emptypoints);var w=c.maxRowLength(p),h=b.xtype==="scaled"?"":y,L=i(b,h,l,x,w,d),S=b.ytype==="scaled"?"":u,E=i(b,S,M,_,p.length,f),P={a:L,b:E,z:p};return b.contours.type==="levels"&&b.contours.coloring!=="none"&&m(o,b,{vals:p,containerStr:"",cLetter:"z"}),[P]}},{"../../components/colorscale/calc":375,"../../lib":515,"../carpet/lookup_carpetid":717,"../contour/set_contours":763,"../heatmap/clean_2d_array":803,"../heatmap/convert_column_xyz":805,"../heatmap/find_empties":807,"../heatmap/interp2d":810,"../heatmap/make_bound_array":812,"./defaults":768}],768:[function(t,B,V){var m=t("../../lib"),c=t("../heatmap/xyz_defaults"),A=t("./attributes"),T=t("../contour/constraint_defaults"),e=t("../contour/contours_defaults"),a=t("../contour/style_defaults");B.exports=function(n,r,v,s){function o(f,y){return m.coerce(n,r,A,f,y)}function b(f){return m.coerce2(n,r,A,f)}if(o("carpet"),n.a&&n.b){var g=c(n,r,o,s,"a","b");if(!g){r.visible=!1;return}o("text");var d=o("contours.type")==="constraint";d?T(n,r,o,s,v,{hasHover:!1}):(e(n,r,o,b),a(n,r,o,s,{hasHover:!1}))}else r._defaultColor=v,r._length=null}},{"../../lib":515,"../contour/constraint_defaults":749,"../contour/contours_defaults":751,"../contour/style_defaults":765,"../heatmap/xyz_defaults":816,"./attributes":766}],769:[function(t,B,V){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../contour/colorbar"),calc:t("./calc"),plot:t("./plot"),style:t("../contour/style"),moduleType:"trace",name:"contourcarpet",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":578,"../contour/colorbar":747,"../contour/style":764,"./attributes":766,"./calc":767,"./defaults":768,"./plot":770}],770:[function(t,B,V){var m=t("@plotly/d3"),c=t("../carpet/map_1d_array"),A=t("../carpet/makepath"),T=t("../../components/drawing"),e=t("../../lib"),a=t("../contour/make_crossings"),i=t("../contour/find_all_paths"),n=t("../contour/plot"),r=t("../contour/constants"),v=t("../contour/convert_to_constraints"),s=t("../contour/empty_pathinfo"),o=t("../contour/close_boundaries"),b=t("../carpet/lookup_carpetid"),g=t("../carpet/axis_aligned_line");B.exports=function(h,L,S,E){var P=L.xaxis,F=L.yaxis;e.makeTraceGroups(E,S,"contour").each(function(I){var D=m.select(this),R=I[0],N=R.trace,z=N._carpetTrace=b(h,N),G=h.calcdata[z.index][0];if(!z.visible||z.visible==="legendonly")return;var Y=R.a,ee=R.b,Z=N.contours,X=s(Z,L,R),ne=Z.type==="constraint",ce=Z._operation,Q=ne?ce==="="?"lines":"fill":Z.coloring;function K(_e){var ue=z.ab2xy(_e[0],_e[1],!0);return[P.c2p(ue[0]),F.c2p(ue[1])]}var U=[[Y[0],ee[ee.length-1]],[Y[Y.length-1],ee[ee.length-1]],[Y[Y.length-1],ee[0]],[Y[0],ee[0]]];a(X);var H=(Y[Y.length-1]-Y[0])*1e-8,q=(ee[ee.length-1]-ee[0])*1e-8;i(X,H,q);var re=X;Z.type==="constraint"&&(re=v(X,ce)),d(X,K);var j,$,ie,oe,ae=[];for(oe=G.clipsegments.length-1;oe>=0;oe--)j=G.clipsegments[oe],$=c([],j.x,P.c2p),ie=c([],j.y,F.c2p),$.reverse(),ie.reverse(),ae.push(A($,ie,j.bicubic));var se="M"+ae.join("L")+"Z";M(D,G.clipsegments,P,F,ne,Q),_(N,D,P,F,re,U,K,z,G,Q,se),f(D,X,h,R,Z,L,z),T.setClipUrl(D,z._clipPathId,h)})};function d(w,h){var L,S,E,P,F,I,D,R,N;for(L=0;L<w.length;L++){for(P=w[L],F=P.pedgepaths=[],I=P.ppaths=[],S=0;S<P.edgepaths.length;S++){for(N=P.edgepaths[S],D=[],E=0;E<N.length;E++)D[E]=h(N[E]);F.push(D)}for(S=0;S<P.paths.length;S++){for(N=P.paths[S],R=[],E=0;E<N.length;E++)R[E]=h(N[E]);I.push(R)}}}function f(w,h,L,S,E,P,F){var I=e.ensureSingle(w,"g","contourlines"),D=E.showlines!==!1,R=E.showlabels,N=D&&R,z=n.createLines(I,D||R,h),G=n.createLineClip(I,N,L,S.trace.uid),Y=w.selectAll("g.contourlabels").data(R?[0]:[]);if(Y.exit().remove(),Y.enter().append("g").classed("contourlabels",!0),R){var ee=P.xaxis,Z=P.yaxis,X=ee._length,ne=Z._length,ce=[[[0,0],[X,0],[X,ne],[0,ne]]],Q=[];e.clearLocationCache();var K=n.labelFormatter(L,S),U=T.tester.append("text").attr("data-notex",1).call(T.font,E.labelfont),H={left:0,right:X,center:X/2,top:0,bottom:ne,middle:ne/2},q=Math.sqrt(X*X+ne*ne),re=r.LABELDISTANCE*q/Math.max(1,h.length/r.LABELINCREASE);z.each(function(j){var $=n.calcTextOpts(j.level,K,U,L);m.select(this).selectAll("path").each(function(ie){var oe=this,ae=e.getVisibleSegment(oe,H,$.height/2);if(!!ae&&(y(oe,ie,j,ae,F,$.height),!(ae.len<($.width+$.height)*r.LABELMIN)))for(var se=Math.min(Math.ceil(ae.len/re),r.LABELMAX),_e=0;_e<se;_e++){var ue=n.findBestTextLocation(oe,ae,$,Q,H);if(!ue)break;n.addLabelData(ue,$,Q,ce)}})}),U.remove(),n.drawLabels(Y,Q,L,G,N?ce:null)}R&&!D&&z.remove()}function y(w,h,L,S,E,P){for(var F,I=0;I<L.pedgepaths.length;I++)h===L.pedgepaths[I]&&(F=L.edgepaths[I]);if(!F)return;var D=E.a[0],R=E.a[E.a.length-1],N=E.b[0],z=E.b[E.b.length-1];function G(ne,ce){var Q=0,K,U=.1;return(Math.abs(ne[0]-D)<U||Math.abs(ne[0]-R)<U)&&(K=x(E.dxydb_rough(ne[0],ne[1],U)),Q=Math.max(Q,P*u(ce,K)/2)),(Math.abs(ne[1]-N)<U||Math.abs(ne[1]-z)<U)&&(K=x(E.dxyda_rough(ne[0],ne[1],U)),Q=Math.max(Q,P*u(ce,K)/2)),Q}var Y=l(w,0,1),ee=l(w,S.total,S.total-1),Z=G(F[0],Y),X=S.total-G(F[F.length-1],ee);S.min<Z&&(S.min=Z),S.max>X&&(S.max=X),S.len=S.max-S.min}function l(w,h,L){var S=w.getPointAtLength(h),E=w.getPointAtLength(L),P=E.x-S.x,F=E.y-S.y,I=Math.sqrt(P*P+F*F);return[P/I,F/I]}function x(w){var h=Math.sqrt(w[0]*w[0]+w[1]*w[1]);return[w[0]/h,w[1]/h]}function u(w,h){var L=Math.abs(w[0]*h[0]+w[1]*h[1]),S=Math.sqrt(1-L*L);return S/L}function M(w,h,L,S,E,P){var F,I,D,R,N=e.ensureSingle(w,"g","contourbg"),z=N.selectAll("path").data(P==="fill"&&!E?[0]:[]);z.enter().append("path"),z.exit().remove();var G=[];for(R=0;R<h.length;R++)F=h[R],I=c([],F.x,L.c2p),D=c([],F.y,S.c2p),G.push(A(I,D,F.bicubic));z.attr("d","M"+G.join("L")+"Z").style("stroke","none")}function _(w,h,L,S,E,P,F,I,D,R,N){var z=R==="fill";z&&o(E,w.contours);var G=e.ensureSingle(h,"g","contourfill"),Y=G.selectAll("path").data(z?E:[]);Y.enter().append("path"),Y.exit().remove(),Y.each(function(ee){var Z=(ee.prefixBoundary?N:"")+p(w,ee,P,F,I,D,L,S);Z?m.select(this).attr("d",Z).style("stroke","none"):m.select(this).remove()})}function p(w,h,L,S,E,P,F,I){var D,R="",N=h.edgepaths.map(function(ie,oe){return oe}),z=!0,G,Y,ee,Z,X,ne,ce=Math.abs(L[0][0]-L[2][0])*1e-4,Q=Math.abs(L[0][1]-L[2][1])*1e-4;function K(ie){return Math.abs(ie[1]-L[0][1])<Q}function U(ie){return Math.abs(ie[1]-L[2][1])<Q}function H(ie){return Math.abs(ie[0]-L[0][0])<ce}function q(ie){return Math.abs(ie[0]-L[2][0])<ce}function re(ie,oe){var ae,se,_e,ue,ye="";for(K(ie)&&!q(ie)||U(ie)&&!H(ie)?(ue=E.aaxis,_e=g(E,P,[ie[0],oe[0]],.5*(ie[1]+oe[1]))):(ue=E.baxis,_e=g(E,P,.5*(ie[0]+oe[0]),[ie[1],oe[1]])),ae=1;ae<_e.length;ae++)for(ye+=ue.smoothing?"C":"L",se=0;se<_e[ae].length;se++){var xe=_e[ae][se];ye+=[F.c2p(xe[0]),I.c2p(xe[1])]+" "}return ye}for(D=0,G=null;N.length;){var j=h.edgepaths[D][0];for(G&&(R+=re(G,j)),ne=T.smoothopen(h.edgepaths[D].map(S),h.smoothing),R+=z?ne:ne.replace(/^M/,"L"),N.splice(N.indexOf(D),1),G=h.edgepaths[D][h.edgepaths[D].length-1],Z=-1,ee=0;ee<4;ee++){if(!G){e.log("Missing end?",D,h);break}for(K(G)&&!q(G)?Y=L[1]:H(G)?Y=L[0]:U(G)?Y=L[3]:q(G)&&(Y=L[2]),X=0;X<h.edgepaths.length;X++){var $=h.edgepaths[X][0];Math.abs(G[0]-Y[0])<ce?Math.abs(G[0]-$[0])<ce&&($[1]-G[1])*(Y[1]-$[1])>=0&&(Y=$,Z=X):Math.abs(G[1]-Y[1])<Q?Math.abs(G[1]-$[1])<Q&&($[0]-G[0])*(Y[0]-$[0])>=0&&(Y=$,Z=X):e.log("endpt to newendpt is not vert. or horz.",G,Y,$)}if(Z>=0)break;R+=re(G,Y),G=Y}if(Z===h.edgepaths.length){e.log("unclosed perimeter path");break}D=Z,z=N.indexOf(D)===-1,z&&(D=N[0],R+=re(G,Y)+"Z",G=null)}for(D=0;D<h.paths.length;D++)R+=T.smoothclosed(h.paths[D].map(S),h.smoothing);return R}},{"../../components/drawing":389,"../../lib":515,"../carpet/axis_aligned_line":701,"../carpet/lookup_carpetid":717,"../carpet/makepath":718,"../carpet/map_1d_array":719,"../contour/close_boundaries":746,"../contour/constants":748,"../contour/convert_to_constraints":752,"../contour/empty_pathinfo":754,"../contour/find_all_paths":756,"../contour/make_crossings":761,"../contour/plot":762,"@plotly/d3":58}],771:[function(t,B,V){var m=t("../../components/colorscale/attributes"),c=t("../../plots/template_attributes").hovertemplateAttrs,A=t("../../plots/attributes"),T=t("../scattermapbox/attributes"),e=t("../../lib/extend").extendFlat;B.exports=e({lon:T.lon,lat:T.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:T.text,hovertext:T.hovertext,hoverinfo:e({},A.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:c(),showlegend:e({},A.showlegend,{dflt:!1})},m("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scattermapbox/attributes":1002}],772:[function(t,B,V){var m=t("fast-isnumeric"),c=t("../../lib").isArrayOrTypedArray,A=t("../../constants/numerical").BADNUM,T=t("../../components/colorscale/calc"),e=t("../../lib")._;B.exports=function(i,n){for(var r=n._length,v=new Array(r),s=n.z,o=c(s)&&s.length,b=0;b<r;b++){var g=v[b]={},d=n.lon[b],f=n.lat[b];if(g.lonlat=m(d)&&m(f)?[+d,+f]:[A,A],o){var y=s[b];g.z=m(y)?y:A}}return T(i,n,{vals:o?s:[0,1],containerStr:"",cLetter:"z"}),r&&(v[0].t={labels:{lat:e(i,"lat:")+" ",lon:e(i,"lon:")+" "}}),v}},{"../../components/colorscale/calc":375,"../../constants/numerical":491,"../../lib":515,"fast-isnumeric":190}],773:[function(t,B,V){var m=t("fast-isnumeric"),c=t("../../lib"),A=t("../../components/color"),T=t("../../components/colorscale"),e=t("../../constants/numerical").BADNUM,a=t("../../lib/geojson_utils").makeBlank;B.exports=function(n){var r=n[0].trace,v=r.visible===!0&&r._length!==0,s={layout:{visibility:"none"},paint:{}},o=r._opts={heatmap:s,geojson:a()};if(!v)return o;var b=[],g,d=r.z,f=r.radius,y=c.isArrayOrTypedArray(d)&&d.length,l=c.isArrayOrTypedArray(f);for(g=0;g<n.length;g++){var x=n[g],u=x.lonlat;if(u[0]!==e){var M={};if(y){var _=x.z;M.z=_!==e?_:0}l&&(M.r=m(f[g])&&f[g]>0?+f[g]:0),b.push({type:"Feature",geometry:{type:"Point",coordinates:u},properties:M})}}var p=T.extractOpts(r),w=p.reversescale?T.flipScale(p.colorscale):p.colorscale,h=w[0][1],L=A.opacity(h)<1?h:A.addOpacity(h,0),S=["interpolate",["linear"],["heatmap-density"],0,L];for(g=1;g<w.length;g++)S.push(w[g][0],w[g][1]);var E=["interpolate",["linear"],["get","z"],p.min,0,p.max,1];return c.extendFlat(o.heatmap.paint,{"heatmap-weight":y?E:1/(p.max-p.min),"heatmap-color":S,"heatmap-radius":l?{type:"identity",property:"r"}:r.radius,"heatmap-opacity":r.opacity}),o.geojson={type:"FeatureCollection",features:b},o.heatmap.layout.visibility="visible",o}},{"../../components/color":367,"../../components/colorscale":379,"../../constants/numerical":491,"../../lib":515,"../../lib/geojson_utils":509,"fast-isnumeric":190}],774:[function(t,B,V){var m=t("../../lib"),c=t("../../components/colorscale/defaults"),A=t("./attributes");B.exports=function(e,a,i,n){function r(b,g){return m.coerce(e,a,A,b,g)}var v=r("lon")||[],s=r("lat")||[],o=Math.min(v.length,s.length);if(!o){a.visible=!1;return}a._length=o,r("z"),r("radius"),r("below"),r("text"),r("hovertext"),r("hovertemplate"),c(e,a,n,r,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":377,"../../lib":515,"./attributes":771}],775:[function(t,B,V){B.exports=function(c,A){return c.lon=A.lon,c.lat=A.lat,c.z=A.z,c}},{}],776:[function(t,B,V){var m=t("../../plots/cartesian/axes"),c=t("../scattermapbox/hover").hoverPoints,A=t("../scattermapbox/hover").getExtraText;B.exports=function(e,a,i){var n=c(e,a,i);if(!!n){var r=n[0],v=r.cd,s=v[0].trace,o=v[r.index];if(delete r.color,"z"in o){var b=r.subplot.mockAxis;r.z=o.z,r.zLabel=m.tickText(b,b.c2l(o.z),"hover").text}return r.extraText=A(s,o,v[0].t.labels),[r]}}},{"../../plots/cartesian/axes":566,"../scattermapbox/hover":1007}],777:[function(t,B,V){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../heatmap/colorbar"),formatLabels:t("../scattermapbox/format_labels"),calc:t("./calc"),plot:t("./plot"),hoverPoints:t("./hover"),eventData:t("./event_data"),getBelow:function(m,c){for(var A=c.getMapLayers(),T=0;T<A.length;T++){var e=A[T],a=e.id;if(e.type==="symbol"&&typeof a=="string"&&a.indexOf("plotly-")===-1)return a}},moduleType:"trace",name:"densitymapbox",basePlotModule:t("../../plots/mapbox"),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},{"../../plots/mapbox":622,"../heatmap/colorbar":804,"../scattermapbox/format_labels":1006,"./attributes":771,"./calc":772,"./defaults":774,"./event_data":775,"./hover":776,"./plot":778}],778:[function(t,B,V){var m=t("./convert"),c=t("../../plots/mapbox/constants").traceLayerPrefix;function A(e,a){this.type="densitymapbox",this.subplot=e,this.uid=a,this.sourceId="source-"+a,this.layerList=[["heatmap",c+a+"-heatmap"]],this.below=null}var T=A.prototype;T.update=function(e){var a=this.subplot,i=this.layerList,n=m(e),r=a.belowLookup["trace-"+this.uid];a.map.getSource(this.sourceId).setData(n.geojson),r!==this.below&&(this._removeLayers(),this._addLayers(n,r),this.below=r);for(var v=0;v<i.length;v++){var s=i[v],o=s[0],b=s[1],g=n[o];a.setOptions(b,"setLayoutProperty",g.layout),g.layout.visibility==="visible"&&a.setOptions(b,"setPaintProperty",g.paint)}},T._addLayers=function(e,a){for(var i=this.subplot,n=this.layerList,r=this.sourceId,v=0;v<n.length;v++){var s=n[v],o=s[0],b=e[o];i.addLayer({type:o,id:s[1],source:r,layout:b.layout,paint:b.paint},a)}},T._removeLayers=function(){for(var e=this.subplot.map,a=this.layerList,i=a.length-1;i>=0;i--)e.removeLayer(a[i][1])},T.dispose=function(){var e=this.subplot.map;this._removeLayers(),e.removeSource(this.sourceId)},B.exports=function(a,i){var n=i[0].trace,r=new A(a,n.uid),v=r.sourceId,s=m(i),o=r.below=a.belowLookup["trace-"+n.uid];return a.map.addSource(v,{type:"geojson",data:s.geojson}),r._addLayers(s,o),r}},{"../../plots/mapbox/constants":620,"./convert":773}],779:[function(t,B,V){var m=t("../../lib");B.exports=function(A,T){for(var e=0;e<A.length;e++)A[e].i=e;m.mergeArray(T.text,A,"tx"),m.mergeArray(T.hovertext,A,"htx");var a=T.marker;if(a){m.mergeArray(a.opacity,A,"mo"),m.mergeArray(a.color,A,"mc");var i=a.line;i&&(m.mergeArray(i.color,A,"mlc"),m.mergeArrayCastPositive(i.width,A,"mlw"))}}},{"../../lib":515}],780:[function(t,B,V){var m=t("../bar/attributes"),c=t("../scatter/attributes").line,A=t("../../plots/attributes"),T=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=t("../../plots/template_attributes").hovertemplateAttrs,a=t("../../plots/template_attributes").texttemplateAttrs,i=t("./constants"),n=t("../../lib/extend").extendFlat,r=t("../../components/color");B.exports={x:m.x,x0:m.x0,dx:m.dx,y:m.y,y0:m.y0,dy:m.dy,xperiod:m.xperiod,yperiod:m.yperiod,xperiod0:m.xperiod0,yperiod0:m.yperiod0,xperiodalignment:m.xperiodalignment,yperiodalignment:m.yperiodalignment,xhoverformat:T("x"),yhoverformat:T("y"),hovertext:m.hovertext,hovertemplate:e({},{keys:i.eventDataKeys}),hoverinfo:n({},A.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:a({editType:"plot"},{keys:i.eventDataKeys.concat(["label","value"])}),text:m.text,textposition:m.textposition,insidetextanchor:n({},m.insidetextanchor,{dflt:"middle"}),textangle:n({},m.textangle,{dflt:0}),textfont:m.textfont,insidetextfont:m.insidetextfont,outsidetextfont:m.outsidetextfont,constraintext:m.constraintext,cliponaxis:m.cliponaxis,orientation:n({},m.orientation,{}),offset:n({},m.offset,{arrayOk:!1}),width:n({},m.width,{arrayOk:!1}),marker:v(),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:n({},c.color,{dflt:r.defaultLine}),width:n({},c.width,{dflt:0,editType:"plot"}),dash:c.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:m.offsetgroup,alignmentgroup:m.alignmentgroup};function v(){var s=n({},m.marker);return delete s.pattern,s}},{"../../components/color":367,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../bar/attributes":657,"../scatter/attributes":936,"./constants":782}],781:[function(t,B,V){var m=t("../../plots/cartesian/axes"),c=t("../../plots/cartesian/align_period"),A=t("./arrays_to_calcdata"),T=t("../scatter/calc_selection"),e=t("../../constants/numerical").BADNUM;B.exports=function(n,r){var v=m.getFromId(n,r.xaxis||"x"),s=m.getFromId(n,r.yaxis||"y"),o,b,g,d,f,y,l,x;r.orientation==="h"?(o=v.makeCalcdata(r,"x"),g=s.makeCalcdata(r,"y"),d=c(r,s,"y",g),f=!!r.yperiodalignment,y="y"):(o=s.makeCalcdata(r,"y"),g=v.makeCalcdata(r,"x"),d=c(r,v,"x",g),f=!!r.xperiodalignment,y="x"),b=d.vals;var u=Math.min(b.length,o.length),M=new Array(u);for(r._base=[],l=0;l<u;l++){o[l]<0&&(o[l]=e);var _=!1;o[l]!==e&&l+1<u&&o[l+1]!==e&&(_=!0),x=M[l]={p:b[l],s:o[l],cNext:_},r._base[l]=-.5*x.s,f&&(M[l].orig_p=g[l],M[l][y+"End"]=d.ends[l],M[l][y+"Start"]=d.starts[l]),r.ids&&(x.id=String(r.ids[l])),l===0&&(M[0].vTotal=0),M[0].vTotal+=a(x.s),x.begR=a(x.s)/a(M[0].s)}var p;for(l=0;l<u;l++)x=M[l],x.s!==e&&(x.sumR=x.s/M[0].vTotal,x.difR=p!==void 0?x.s/p:1,p=x.s);return A(M,r),T(M,r),M};function a(i){return i===e?0:i}},{"../../constants/numerical":491,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"../scatter/calc_selection":938,"./arrays_to_calcdata":779}],782:[function(t,B,V){B.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},{}],783:[function(t,B,V){var m=t("../bar/cross_trace_calc").setGroupPositions;B.exports=function(A,T){var e=A._fullLayout,a=A._fullData,i=A.calcdata,n=T.xaxis,r=T.yaxis,v=[],s=[],o=[],b,g;for(g=0;g<a.length;g++){var d=a[g],f=d.orientation==="h";d.visible===!0&&d.xaxis===n._id&&d.yaxis===r._id&&d.type==="funnel"&&(b=i[g],f?o.push(b):s.push(b),v.push(b))}var y={mode:e.funnelmode,norm:e.funnelnorm,gap:e.funnelgap,groupgap:e.funnelgroupgap};for(m(A,n,r,s,y),m(A,r,n,o,y),g=0;g<v.length;g++){b=v[g];for(var l=0;l<b.length;l++)l+1<b.length&&(b[l].nextP0=b[l+1].p0,b[l].nextS0=b[l+1].s0,b[l].nextP1=b[l+1].p1,b[l].nextS1=b[l+1].s1)}}},{"../bar/cross_trace_calc":660}],784:[function(t,B,V){var m=t("../../lib"),c=t("../bar/defaults").handleGroupingDefaults,A=t("../bar/defaults").handleText,T=t("../scatter/xy_defaults"),e=t("../scatter/period_defaults"),a=t("./attributes"),i=t("../../components/color");function n(s,o,b,g){function d(_,p){return m.coerce(s,o,a,_,p)}var f=T(s,o,g,d);if(!f){o.visible=!1;return}e(s,o,g,d),d("xhoverformat"),d("yhoverformat"),d("orientation",o.y&&!o.x?"v":"h"),d("offset"),d("width");var y=d("text");d("hovertext"),d("hovertemplate");var l=d("textposition");A(s,o,g,d,l,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),o.textposition!=="none"&&!o.texttemplate&&d("textinfo",Array.isArray(y)?"text+value":"value");var x=d("marker.color",b);d("marker.line.color",i.defaultLine),d("marker.line.width");var u=d("connector.visible");if(u){d("connector.fillcolor",r(x));var M=d("connector.line.width");M&&(d("connector.line.color"),d("connector.line.dash"))}}function r(s){var o=m.isArrayOrTypedArray(s)?"#000":s;return i.addOpacity(o,.5*i.opacity(o))}function v(s,o){var b,g;function d(y){return m.coerce(g._input,g,a,y)}if(o.funnelmode==="group")for(var f=0;f<s.length;f++)g=s[f],b=g._input,c(b,g,o,d)}B.exports={supplyDefaults:n,crossTraceDefaults:v}},{"../../components/color":367,"../../lib":515,"../bar/defaults":661,"../scatter/period_defaults":956,"../scatter/xy_defaults":963,"./attributes":780}],785:[function(t,B,V){B.exports=function(c,A){return c.x="xVal"in A?A.xVal:A.x,c.y="yVal"in A?A.yVal:A.y,"percentInitial"in A&&(c.percentInitial=A.percentInitial),"percentPrevious"in A&&(c.percentPrevious=A.percentPrevious),"percentTotal"in A&&(c.percentTotal=A.percentTotal),A.xa&&(c.xaxis=A.xa),A.ya&&(c.yaxis=A.ya),c}},{}],786:[function(t,B,V){var m=t("../../components/color").opacity,c=t("../bar/hover").hoverOnBars,A=t("../../lib").formatPercent;B.exports=function(a,i,n,r,v){var s=c(a,i,n,r,v);if(!!s){var o=s.cd,b=o[0].trace,g=b.orientation==="h",d=s.index,f=o[d],y=g?"x":"y";s[y+"LabelVal"]=f.s,s.percentInitial=f.begR,s.percentInitialLabel=A(f.begR,1),s.percentPrevious=f.difR,s.percentPreviousLabel=A(f.difR,1),s.percentTotal=f.sumR,s.percentTotalLabel=A(f.sumR,1);var l=f.hi||b.hoverinfo,x=[];if(l&&l!=="none"&&l!=="skip"){var u=l==="all",M=l.split("+"),_=function(p){return u||M.indexOf(p)!==-1};_("percent initial")&&x.push(s.percentInitialLabel+" of initial"),_("percent previous")&&x.push(s.percentPreviousLabel+" of previous"),_("percent total")&&x.push(s.percentTotalLabel+" of total")}return s.extraText=x.join("<br>"),s.color=T(b,f),[s]}};function T(e,a){var i=e.marker,n=a.mc||i.color,r=a.mlc||i.line.color,v=a.mlw||i.line.width;if(m(n))return n;if(m(r)&&v)return r}},{"../../components/color":367,"../../lib":515,"../bar/hover":664}],787:[function(t,B,V){B.exports={attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyDefaults:t("./defaults").supplyDefaults,crossTraceDefaults:t("./defaults").crossTraceDefaults,supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc"),crossTraceCalc:t("./cross_trace_calc"),plot:t("./plot"),style:t("./style").style,hoverPoints:t("./hover"),eventData:t("./event_data"),selectPoints:t("../bar/select"),moduleType:"trace",name:"funnel",basePlotModule:t("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"../bar/select":669,"./attributes":780,"./calc":781,"./cross_trace_calc":783,"./defaults":784,"./event_data":785,"./hover":786,"./layout_attributes":788,"./layout_defaults":789,"./plot":790,"./style":791}],788:[function(t,B,V){B.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],789:[function(t,B,V){var m=t("../../lib"),c=t("./layout_attributes");B.exports=function(A,T,e){var a=!1;function i(v,s){return m.coerce(A,T,c,v,s)}for(var n=0;n<e.length;n++){var r=e[n];if(r.visible&&r.type==="funnel"){a=!0;break}}a&&(i("funnelmode"),i("funnelgap",.2),i("funnelgroupgap"))}},{"../../lib":515,"./layout_attributes":788}],790:[function(t,B,V){var m=t("@plotly/d3"),c=t("../../lib"),A=t("../../components/drawing"),T=t("../../constants/numerical").BADNUM,e=t("../bar/plot"),a=t("../bar/uniform_text").clearMinTextSize;B.exports=function(s,o,b,g){var d=s._fullLayout;a("funnel",d),i(s,o,b,g),n(s,o,b,g),e.plot(s,o,b,g,{mode:d.funnelmode,norm:d.funnelmode,gap:d.funnelgap,groupgap:d.funnelgroupgap})};function i(v,s,o,b){var g=s.xaxis,d=s.yaxis;c.makeTraceGroups(b,o,"trace bars").each(function(f){var y=m.select(this),l=f[0].trace,x=c.ensureSingle(y,"g","regions");if(!l.connector||!l.connector.visible){x.remove();return}var u=l.orientation==="h",M=x.selectAll("g.region").data(c.identity);M.enter().append("g").classed("region",!0),M.exit().remove();var _=M.size();M.each(function(p,w){if(!(w!==_-1&&!p.cNext)){var h=r(p,g,d,u),L=h[0],S=h[1],E="";L[0]!==T&&S[0]!==T&&L[1]!==T&&S[1]!==T&&L[2]!==T&&S[2]!==T&&L[3]!==T&&S[3]!==T&&(u?E+="M"+L[0]+","+S[1]+"L"+L[2]+","+S[2]+"H"+L[3]+"L"+L[1]+","+S[1]+"Z":E+="M"+L[1]+","+S[1]+"L"+L[2]+","+S[3]+"V"+S[2]+"L"+L[1]+","+S[0]+"Z"),E===""&&(E="M0,0Z"),c.ensureSingle(m.select(this),"path").attr("d",E).call(A.setClipUrl,s.layerClipId,v)}})})}function n(v,s,o,b){var g=s.xaxis,d=s.yaxis;c.makeTraceGroups(b,o,"trace bars").each(function(f){var y=m.select(this),l=f[0].trace,x=c.ensureSingle(y,"g","lines");if(!l.connector||!l.connector.visible||!l.connector.line.width){x.remove();return}var u=l.orientation==="h",M=x.selectAll("g.line").data(c.identity);M.enter().append("g").classed("line",!0),M.exit().remove();var _=M.size();M.each(function(p,w){if(!(w!==_-1&&!p.cNext)){var h=r(p,g,d,u),L=h[0],S=h[1],E="";L[3]!==void 0&&S[3]!==void 0&&(u?(E+="M"+L[0]+","+S[1]+"L"+L[2]+","+S[2],E+="M"+L[1]+","+S[1]+"L"+L[3]+","+S[2]):(E+="M"+L[1]+","+S[1]+"L"+L[2]+","+S[3],E+="M"+L[1]+","+S[0]+"L"+L[2]+","+S[2])),E===""&&(E="M0,0Z"),c.ensureSingle(m.select(this),"path").attr("d",E).call(A.setClipUrl,s.layerClipId,v)}})})}function r(v,s,o,b){var g=[],d=[],f=b?s:o,y=b?o:s;return g[0]=f.c2p(v.s0,!0),d[0]=y.c2p(v.p0,!0),g[1]=f.c2p(v.s1,!0),d[1]=y.c2p(v.p1,!0),g[2]=f.c2p(v.nextS0,!0),d[2]=y.c2p(v.nextP0,!0),g[3]=f.c2p(v.nextS1,!0),d[3]=y.c2p(v.nextP1,!0),b?[g,d]:[d,g]}},{"../../components/drawing":389,"../../constants/numerical":491,"../../lib":515,"../bar/plot":668,"../bar/uniform_text":673,"@plotly/d3":58}],791:[function(t,B,V){var m=t("@plotly/d3"),c=t("../../components/drawing"),A=t("../../components/color"),T=t("../../constants/interactions").DESELECTDIM,e=t("../bar/style"),a=t("../bar/uniform_text").resizeText,i=e.styleTextPoints;function n(r,v,s){var o=s||m.select(r).selectAll("g.funnellayer").selectAll("g.trace");a(r,o,"funnel"),o.style("opacity",function(b){return b[0].trace.opacity}),o.each(function(b){var g=m.select(this),d=b[0].trace;g.selectAll(".point > path").each(function(f){if(!f.isBlank){var y=d.marker;m.select(this).call(A.fill,f.mc||y.color).call(A.stroke,f.mlc||y.line.color).call(c.dashLine,y.line.dash,f.mlw||y.line.width).style("opacity",d.selectedpoints&&!f.selected?T:1)}}),i(g,d,r),g.selectAll(".regions").each(function(){m.select(this).selectAll("path").style("stroke-width",0).call(A.fill,d.connector.fillcolor)}),g.selectAll(".lines").each(function(){var f=d.connector.line;c.lineGroupStyle(m.select(this).selectAll("path"),f.width,f.color,f.dash)})})}B.exports={style:n}},{"../../components/color":367,"../../components/drawing":389,"../../constants/interactions":490,"../bar/style":671,"../bar/uniform_text":673,"@plotly/d3":58}],792:[function(t,B,V){var m=t("../pie/attributes"),c=t("../../plots/attributes"),A=t("../../plots/domain").attributes,T=t("../../plots/template_attributes").hovertemplateAttrs,e=t("../../plots/template_attributes").texttemplateAttrs,a=t("../../lib/extend").extendFlat;B.exports={labels:m.labels,label0:m.label0,dlabel:m.dlabel,values:m.values,marker:{colors:m.marker.colors,line:{color:a({},m.marker.line.color,{dflt:null}),width:a({},m.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},text:m.text,hovertext:m.hovertext,scalegroup:a({},m.scalegroup,{}),textinfo:a({},m.textinfo,{flags:["label","text","value","percent"]}),texttemplate:e({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:a({},c.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:T({},{keys:["label","color","value","text","percent"]}),textposition:a({},m.textposition,{values:["inside","none"],dflt:"inside"}),textfont:m.textfont,insidetextfont:m.insidetextfont,title:{text:m.title.text,font:m.title.font,position:a({},m.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:A({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},{"../../lib/extend":505,"../../plots/attributes":562,"../../plots/domain":593,"../../plots/template_attributes":642,"../pie/attributes":910}],793:[function(t,B,V){var m=t("../../plots/plots");V.name="funnelarea",V.plot=function(c,A,T,e){m.plotBasePlot(V.name,c,A,T,e)},V.clean=function(c,A,T,e){m.cleanBasePlot(V.name,c,A,T,e)}},{"../../plots/plots":628}],794:[function(t,B,V){var m=t("../pie/calc");function c(T,e){return m.calc(T,e)}function A(T){m.crossTraceCalc(T,{type:"funnelarea"})}B.exports={calc:c,crossTraceCalc:A}},{"../pie/calc":912}],795:[function(t,B,V){var m=t("../../lib"),c=t("./attributes"),A=t("../../plots/domain").defaults,T=t("../bar/defaults").handleText,e=t("../pie/defaults").handleLabelsAndValues;B.exports=function(i,n,r,v){function s(_,p){return m.coerce(i,n,c,_,p)}var o=s("labels"),b=s("values"),g=e(o,b),d=g.len;if(n._hasLabels=g.hasLabels,n._hasValues=g.hasValues,!n._hasLabels&&n._hasValues&&(s("label0"),s("dlabel")),!d){n.visible=!1;return}n._length=d;var f=s("marker.line.width");f&&s("marker.line.color",v.paper_bgcolor),s("marker.colors"),s("scalegroup");var y=s("text"),l=s("texttemplate"),x;if(l||(x=s("textinfo",Array.isArray(y)?"text+percent":"percent")),s("hovertext"),s("hovertemplate"),l||x&&x!=="none"){var u=s("textposition");T(i,n,v,s,u,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}A(n,v,s);var M=s("title.text");M&&(s("title.position"),m.coerceFont(s,"title.font",v.font)),s("aspectratio"),s("baseratio")}},{"../../lib":515,"../../plots/domain":593,"../bar/defaults":661,"../pie/defaults":913,"./attributes":792}],796:[function(t,B,V){B.exports={moduleType:"trace",name:"funnelarea",basePlotModule:t("./base_plot"),categories:["pie-like","funnelarea","showLegend"],attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyDefaults:t("./defaults"),supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc").calc,crossTraceCalc:t("./calc").crossTraceCalc,plot:t("./plot"),style:t("./style"),styleOne:t("../pie/style_one"),meta:{}}},{"../pie/style_one":921,"./attributes":792,"./base_plot":793,"./calc":794,"./defaults":795,"./layout_attributes":797,"./layout_defaults":798,"./plot":799,"./style":800}],797:[function(t,B,V){var m=t("../pie/layout_attributes").hiddenlabels;B.exports={hiddenlabels:m,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{"../pie/layout_attributes":917}],798:[function(t,B,V){var m=t("../../lib"),c=t("./layout_attributes");B.exports=function(T,e){function a(i,n){return m.coerce(T,e,c,i,n)}a("hiddenlabels"),a("funnelareacolorway",e.colorway),a("extendfunnelareacolors")}},{"../../lib":515,"./layout_attributes":797}],799:[function(t,B,V){var m=t("@plotly/d3"),c=t("../../components/drawing"),A=t("../../lib"),T=A.strScale,e=A.strTranslate,a=t("../../lib/svg_text_utils"),i=t("../bar/plot"),n=i.toMoveInsideBar,r=t("../bar/uniform_text"),v=r.recordMinTextSize,s=r.clearMinTextSize,o=t("../pie/helpers"),b=t("../pie/plot"),g=b.attachFxHandlers,d=b.determineInsideTextFont,f=b.layoutAreas,y=b.prerenderTitles,l=b.positionTitleOutside,x=b.formatSliceLabel;B.exports=function(w,h){var L=w._context.staticPlot,S=w._fullLayout;s("funnelarea",S),y(h,w),f(h,S._size),A.makeTraceGroups(S._funnelarealayer,h,"trace").each(function(E){var P=m.select(this),F=E[0],I=F.trace;_(E),P.each(function(){var D=m.select(this).selectAll("g.slice").data(E);D.enter().append("g").classed("slice",!0),D.exit().remove(),D.each(function(N,z){if(N.hidden){m.select(this).selectAll("path,g").remove();return}N.pointNumber=N.i,N.curveNumber=I.index;var G=F.cx,Y=F.cy,ee=m.select(this),Z=ee.selectAll("path.surface").data([N]);Z.enter().append("path").classed("surface",!0).style({"pointer-events":L?"none":"all"}),ee.call(g,w,E);var X="M"+(G+N.TR[0])+","+(Y+N.TR[1])+u(N.TR,N.BR)+u(N.BR,N.BL)+u(N.BL,N.TL)+"Z";Z.attr("d",X),x(w,N,F);var ne=o.castOption(I.textposition,N.pts),ce=ee.selectAll("g.slicetext").data(N.text&&ne!=="none"?[0]:[]);ce.enter().append("g").classed("slicetext",!0),ce.exit().remove(),ce.each(function(){var Q=A.ensureSingle(m.select(this),"text","",function(ie){ie.attr("data-notex",1)}),K=A.ensureUniformFontSize(w,d(I,N,S.font));Q.text(N.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(c.font,K).call(a.convertToTspans,w);var U=c.bBox(Q.node()),H,q,re,j=Math.min(N.BL[1],N.BR[1])+Y,$=Math.max(N.TL[1],N.TR[1])+Y;q=Math.max(N.TL[0],N.BL[0])+G,re=Math.min(N.TR[0],N.BR[0])+G,H=n(q,re,j,$,U,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"}),H.fontSize=K.size,v(I.type,H,S),E[z].transform=H,A.setTransormAndDisplay(Q,H)})});var R=m.select(this).selectAll("g.titletext").data(I.title.text?[0]:[]);R.enter().append("g").classed("titletext",!0),R.exit().remove(),R.each(function(){var N=A.ensureSingle(m.select(this),"text","",function(Y){Y.attr("data-notex",1)}),z=I.title.text;I._meta&&(z=A.templateString(z,I._meta)),N.text(z).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(c.font,I.title.font).call(a.convertToTspans,w);var G=l(F,S._size);N.attr("transform",e(G.x,G.y)+T(Math.min(1,G.scale))+e(G.tx,G.ty))})})})};function u(p,w){var h=w[0]-p[0],L=w[1]-p[1];return"l"+h+","+L}function M(p,w){return[.5*(p[0]+w[0]),.5*(p[1]+w[1])]}function _(p){if(!p.length)return;var w=p[0],h=w.trace,L=h.aspectratio,S=h.baseratio;S>.999&&(S=.999);var E=Math.pow(S,2),P=w.vTotal,F=P*E/(1-E),I=P,D=F/P;function R(){var oe=Math.sqrt(D);return{x:oe,y:-oe}}function N(){var oe=R();return[oe.x,oe.y]}var z,G=[];G.push(N());var Y,ee;for(Y=p.length-1;Y>-1;Y--)if(ee=p[Y],!ee.hidden){var Z=ee.v/I;D+=Z,G.push(N())}var X=1/0,ne=-1/0;for(Y=0;Y<G.length;Y++)z=G[Y],X=Math.min(X,z[1]),ne=Math.max(ne,z[1]);for(Y=0;Y<G.length;Y++)G[Y][1]-=(ne+X)/2;var ce=G[G.length-1][0],Q=w.r,K=(ne-X)/2,U=Q/ce,H=Q/K*L;for(w.r=H*K,Y=0;Y<G.length;Y++)G[Y][0]*=U,G[Y][1]*=H;z=G[0];var q=[-z[0],z[1]],re=[z[0],z[1]],j=0;for(Y=p.length-1;Y>-1;Y--)if(ee=p[Y],!ee.hidden){j+=1;var $=G[j][0],ie=G[j][1];ee.TL=[-$,ie],ee.TR=[$,ie],ee.BL=q,ee.BR=re,ee.pxmid=M(ee.TR,ee.BR),q=ee.TL,re=ee.TR}}},{"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../bar/plot":668,"../bar/uniform_text":673,"../pie/helpers":915,"../pie/plot":919,"@plotly/d3":58}],800:[function(t,B,V){var m=t("@plotly/d3"),c=t("../pie/style_one"),A=t("../bar/uniform_text").resizeText;B.exports=function(e){var a=e._fullLayout._funnelarealayer.selectAll(".trace");A(e,a,"funnelarea"),a.each(function(i){var n=i[0],r=n.trace,v=m.select(this);v.style({opacity:r.opacity}),v.selectAll("path.surface").each(function(s){m.select(this).call(c,s,r)})})}},{"../bar/uniform_text":673,"../pie/style_one":921,"@plotly/d3":58}],801:[function(t,B,V){var m=t("../scatter/attributes"),c=t("../../plots/attributes"),A=t("../../plots/font_attributes"),T=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=t("../../plots/template_attributes").hovertemplateAttrs,a=t("../../plots/template_attributes").texttemplateAttrs,i=t("../../components/colorscale/attributes"),n=t("../../lib/extend").extendFlat;B.exports=n({z:{valType:"data_array",editType:"calc"},x:n({},m.x,{impliedEdits:{xtype:"array"}}),x0:n({},m.x0,{impliedEdits:{xtype:"scaled"}}),dx:n({},m.dx,{impliedEdits:{xtype:"scaled"}}),y:n({},m.y,{impliedEdits:{ytype:"array"}}),y0:n({},m.y0,{impliedEdits:{ytype:"scaled"}}),dy:n({},m.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:n({},m.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:n({},m.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:n({},m.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:n({},m.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:n({},m.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:n({},m.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:e(),texttemplate:a({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:A({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style"}),showlegend:n({},c.showlegend,{dflt:!1})},{transforms:void 0},i("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/font_attributes":594,"../../plots/template_attributes":642,"../scatter/attributes":936}],802:[function(t,B,V){var m=t("../../registry"),c=t("../../lib"),A=t("../../plots/cartesian/axes"),T=t("../../plots/cartesian/align_period"),e=t("../histogram2d/calc"),a=t("../../components/colorscale/calc"),i=t("./convert_column_xyz"),n=t("./clean_2d_array"),r=t("./interp2d"),v=t("./find_empties"),s=t("./make_bound_array"),o=t("../../constants/numerical").BADNUM;B.exports=function(f,y){var l=A.getFromId(f,y.xaxis||"x"),x=A.getFromId(f,y.yaxis||"y"),u=m.traceIs(y,"contour"),M=m.traceIs(y,"histogram"),_=m.traceIs(y,"gl2d"),p=u?"best":y.zsmooth,w,h,L,S,E,P,F,I,D,R,N;if(l._minDtick=0,x._minDtick=0,M)N=e(f,y),S=N.orig_x,w=N.x,h=N.x0,L=N.dx,I=N.orig_y,E=N.y,P=N.y0,F=N.dy,D=N.z;else{var z=y.z;c.isArray1D(z)?(i(y,l,x,"x","y",["z"]),w=y._x,E=y._y,z=y._z):(S=y.x?l.makeCalcdata(y,"x"):[],I=y.y?x.makeCalcdata(y,"y"):[],w=T(y,l,"x",S).vals,E=T(y,x,"y",I).vals,y._x=w,y._y=E),h=y.x0,L=y.dx,P=y.y0,F=y.dy,D=n(z,y,l,x)}(l.rangebreaks||x.rangebreaks)&&(D=g(w,E,D),M||(w=b(w),E=b(E),y._x=w,y._y=E)),!M&&(u||y.connectgaps)&&(y._emptypoints=v(D),r(D,y._emptypoints));function G(re){p=y._input.zsmooth=y.zsmooth=!1,c.warn('cannot use zsmooth: "fast": '+re)}if(p==="fast"){if(l.type==="log"||x.type==="log")G("log axis found");else if(!M){if(w.length){var Y=(w[w.length-1]-w[0])/(w.length-1),ee=Math.abs(Y/100);for(R=0;R<w.length-1;R++)if(Math.abs(w[R+1]-w[R]-Y)>ee){G("x scale is not linear");break}}if(E.length&&p==="fast"){var Z=(E[E.length-1]-E[0])/(E.length-1),X=Math.abs(Z/100);for(R=0;R<E.length-1;R++)if(Math.abs(E[R+1]-E[R]-Z)>X){G("y scale is not linear");break}}}}var ne=c.maxRowLength(D),ce=y.xtype==="scaled"?"":w,Q=s(y,ce,h,L,ne,l),K=y.ytype==="scaled"?"":E,U=s(y,K,P,F,D.length,x);_||(y._extremes[l._id]=A.findExtremes(l,Q),y._extremes[x._id]=A.findExtremes(x,U));var H={x:Q,y:U,z:D,text:y._text||y.text,hovertext:y._hovertext||y.hovertext};if(y.xperiodalignment&&S&&(H.orig_x=S),y.yperiodalignment&&I&&(H.orig_y=I),ce&&ce.length===Q.length-1&&(H.xCenter=ce),K&&K.length===U.length-1&&(H.yCenter=K),M&&(H.xRanges=N.xRanges,H.yRanges=N.yRanges,H.pts=N.pts),u||a(f,y,{vals:D,cLetter:"z"}),u&&y.contours&&y.contours.coloring==="heatmap"){var q={type:y.type==="contour"?"heatmap":"histogram2d",xcalendar:y.xcalendar,ycalendar:y.ycalendar};H.xfill=s(q,ce,h,L,ne,l),H.yfill=s(q,K,P,F,D.length,x)}return[H]};function b(d){for(var f=[],y=d.length,l=0;l<y;l++){var x=d[l];x!==o&&f.push(x)}return f}function g(d,f,y){for(var l=[],x=-1,u=0;u<y.length;u++)if(f[u]!==o){x++,l[x]=[];for(var M=0;M<y[u].length;M++)d[M]!==o&&l[x].push(y[u][M])}return l}},{"../../components/colorscale/calc":375,"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"../../registry":647,"../histogram2d/calc":835,"./clean_2d_array":803,"./convert_column_xyz":805,"./find_empties":807,"./interp2d":810,"./make_bound_array":812}],803:[function(t,B,V){var m=t("fast-isnumeric"),c=t("../../lib"),A=t("../../constants/numerical").BADNUM;B.exports=function(e,a,i,n){var r,v,s,o,b,g;function d(M){if(!!m(M))return+M}if(a&&a.transpose){for(r=0,b=0;b<e.length;b++)r=Math.max(r,e[b].length);if(r===0)return!1;s=function(M){return M.length},o=function(M,_,p){return(M[p]||[])[_]}}else r=e.length,s=function(M,_){return M[_].length},o=function(M,_,p){return(M[_]||[])[p]};var f=function(M,_,p){return _===A||p===A?A:o(M,_,p)};function y(M){if(a&&a.type!=="carpet"&&a.type!=="contourcarpet"&&M&&M.type==="category"&&a["_"+M._id.charAt(0)].length){var _=M._id.charAt(0),p={},w=a["_"+_+"CategoryMap"]||a[_];for(b=0;b<w.length;b++)p[w[b]]=b;return function(h){var L=p[M._categories[h]];return L+1?L:A}}else return c.identity}var l=y(i),x=y(n);n&&n.type==="category"&&(r=n._categories.length);var u=new Array(r);for(b=0;b<r;b++)for(i&&i.type==="category"?v=i._categories.length:v=s(e,b),u[b]=new Array(v),g=0;g<v;g++)u[b][g]=d(f(e,x(b),l(g)));return u}},{"../../constants/numerical":491,"../../lib":515,"fast-isnumeric":190}],804:[function(t,B,V){B.exports={min:"zmin",max:"zmax"}},{}],805:[function(t,B,V){var m=t("../../lib"),c=t("../../constants/numerical").BADNUM,A=t("../../plots/cartesian/align_period");B.exports=function(e,a,i,n,r,v){var s=e._length,o=a.makeCalcdata(e,n),b=i.makeCalcdata(e,r);o=A(e,a,n,o).vals,b=A(e,i,r,b).vals;var g=e.text,d=g!==void 0&&m.isArray1D(g),f=e.hovertext,y=f!==void 0&&m.isArray1D(f),l,x,u=m.distinctVals(o),M=u.vals,_=m.distinctVals(b),p=_.vals,w=[],h,L,S=p.length,E=M.length;for(l=0;l<v.length;l++)w[l]=m.init2dArray(S,E);d&&(h=m.init2dArray(S,E)),y&&(L=m.init2dArray(S,E));var P=m.init2dArray(S,E);for(l=0;l<s;l++)if(o[l]!==c&&b[l]!==c){var F=m.findBin(o[l]+u.minDiff/2,M),I=m.findBin(b[l]+_.minDiff/2,p);for(x=0;x<v.length;x++){var D=v[x],R=e[D],N=w[x];N[I][F]=R[l],P[I][F]=l}d&&(h[I][F]=g[l]),y&&(L[I][F]=f[l])}for(e["_"+n]=M,e["_"+r]=p,x=0;x<v.length;x++)e["_"+v[x]]=w[x];d&&(e._text=h),y&&(e._hovertext=L),a&&a.type==="category"&&(e["_"+n+"CategoryMap"]=M.map(function(z){return a._categories[z]})),i&&i.type==="category"&&(e["_"+r+"CategoryMap"]=p.map(function(z){return i._categories[z]})),e._after2before=P}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563}],806:[function(t,B,V){var m=t("../../lib"),c=t("./xyz_defaults"),A=t("./label_defaults"),T=t("../scatter/period_defaults"),e=t("./style_defaults"),a=t("../../components/colorscale/defaults"),i=t("./attributes");B.exports=function(r,v,s,o){function b(d,f){return m.coerce(r,v,i,d,f)}var g=c(r,v,b,o);if(!g){v.visible=!1;return}T(r,v,o,b),b("xhoverformat"),b("yhoverformat"),b("text"),b("hovertext"),b("hovertemplate"),A(b,o),e(r,v,b,o),b("hoverongaps"),b("connectgaps",m.isArray1D(v.z)&&v.zsmooth!==!1),a(r,v,o,b,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":377,"../../lib":515,"../scatter/period_defaults":956,"./attributes":801,"./label_defaults":811,"./style_defaults":815,"./xyz_defaults":816}],807:[function(t,B,V){var m=t("../../lib").maxRowLength;B.exports=function(A){var T=[],e={},a=[],i=A[0],n=[],r=[0,0,0],v=m(A),s,o,b,g,d,f,y,l;for(o=0;o<A.length;o++)for(s=n,n=i,i=A[o+1]||[],b=0;b<v;b++)n[b]===void 0&&(f=(n[b-1]!==void 0?1:0)+(n[b+1]!==void 0?1:0)+(s[b]!==void 0?1:0)+(i[b]!==void 0?1:0),f?(o===0&&f++,b===0&&f++,o===A.length-1&&f++,b===n.length-1&&f++,f<4&&(e[[o,b]]=[o,b,f]),T.push([o,b,f])):a.push([o,b]));for(;a.length;){for(y={},l=!1,d=a.length-1;d>=0;d--)g=a[d],o=g[0],b=g[1],f=((e[[o-1,b]]||r)[2]+(e[[o+1,b]]||r)[2]+(e[[o,b-1]]||r)[2]+(e[[o,b+1]]||r)[2])/20,f&&(y[g]=[o,b,f],a.splice(d,1),l=!0);if(!l)throw"findEmpties iterated with no new neighbors";for(g in y)e[g]=y[g],T.push(y[g])}return T.sort(function(x,u){return u[2]-x[2]})}},{"../../lib":515}],808:[function(t,B,V){var m=t("../../components/fx"),c=t("../../lib"),A=t("../../plots/cartesian/axes"),T=t("../../components/colorscale").extractOpts;B.exports=function(a,i,n,r,v){v||(v={});var s=v.isContour,o=a.cd[0],b=o.trace,g=a.xa,d=a.ya,f=o.x,y=o.y,l=o.z,x=o.xCenter,u=o.yCenter,M=o.zmask,_=b.zhoverformat,p=f,w=y,h,L,S,E;if(a.index!==!1){try{S=Math.round(a.index[1]),E=Math.round(a.index[0])}catch{c.error("Error hovering on heatmap, pointNumber must be [row,col], found:",a.index);return}if(S<0||S>=l[0].length||E<0||E>l.length)return}else{if(m.inbox(i-f[0],i-f[f.length-1],0)>0||m.inbox(n-y[0],n-y[y.length-1],0)>0)return;if(s){var P;for(p=[2*f[0]-f[1]],P=1;P<f.length;P++)p.push((f[P]+f[P-1])/2);for(p.push([2*f[f.length-1]-f[f.length-2]]),w=[2*y[0]-y[1]],P=1;P<y.length;P++)w.push((y[P]+y[P-1])/2);w.push([2*y[y.length-1]-y[y.length-2]])}S=Math.max(0,Math.min(p.length-2,c.findBin(i,p))),E=Math.max(0,Math.min(w.length-2,c.findBin(n,w)))}var F=g.c2p(f[S]),I=g.c2p(f[S+1]),D=d.c2p(y[E]),R=d.c2p(y[E+1]),N,z;s?(N=o.orig_x||f,z=o.orig_y||y,I=F,h=N[S],R=D,L=z[E]):(N=o.orig_x||x||f,z=o.orig_y||u||y,h=x?N[S]:(N[S]+N[S+1])/2,L=u?z[E]:(z[E]+z[E+1])/2,g&&g.type==="category"&&(h=f[S]),d&&d.type==="category"&&(L=y[E]),b.zsmooth&&(F=I=g.c2p(h),D=R=d.c2p(L)));var G=l[E][S];if(M&&!M[E][S]&&(G=void 0),!(G===void 0&&!b.hoverongaps)){var Y;Array.isArray(o.hovertext)&&Array.isArray(o.hovertext[E])?Y=o.hovertext[E][S]:Array.isArray(o.text)&&Array.isArray(o.text[E])&&(Y=o.text[E][S]);var ee=T(b),Z={type:"linear",range:[ee.min,ee.max],hoverformat:_,_separators:g._separators,_numFormat:g._numFormat},X=A.tickText(Z,G,"hover").text;return[c.extendFlat(a,{index:b._after2before?b._after2before[E][S]:[E,S],distance:a.maxHoverDistance,spikeDistance:a.maxSpikeDistance,x0:F,x1:I,y0:D,y1:R,xLabelVal:h,yLabelVal:L,zLabelVal:G,zLabel:X,text:Y})]}}},{"../../components/colorscale":379,"../../components/fx":407,"../../lib":515,"../../plots/cartesian/axes":566}],809:[function(t,B,V){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),calc:t("./calc"),plot:t("./plot"),colorbar:t("./colorbar"),style:t("./style"),hoverPoints:t("./hover"),moduleType:"trace",name:"heatmap",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},{"../../plots/cartesian":578,"./attributes":801,"./calc":802,"./colorbar":804,"./defaults":806,"./hover":808,"./plot":813,"./style":814}],810:[function(t,B,V){var m=t("../../lib"),c=.01,A=[[-1,0],[1,0],[0,-1],[0,1]];function T(a){return .5-.25*Math.min(1,a*.5)}B.exports=function(i,n){var r=1,v;for(e(i,n),v=0;v<n.length&&!(n[v][2]<4);v++);for(n=n.slice(v),v=0;v<100&&r>c;v++)r=e(i,n,T(r));return r>c&&m.log("interp2d didn't converge quickly",r),i};function e(a,i,n){var r=0,v,s,o,b,g,d,f,y,l,x,u,M,_;for(b=0;b<i.length;b++){for(v=i[b],s=v[0],o=v[1],u=a[s][o],x=0,l=0,g=0;g<4;g++)d=A[g],f=a[s+d[0]],f&&(y=f[o+d[1]],y!==void 0&&(x===0?M=_=y:(M=Math.min(M,y),_=Math.max(_,y)),l++,x+=y));if(l===0)throw"iterateInterp2d order is wrong: no defined neighbors";a[s][o]=x/l,u===void 0?l<4&&(r=1):(a[s][o]=(1+n)*a[s][o]-n*u,_>M&&(r=Math.max(r,Math.abs(a[s][o]-u)/(_-M))))}return r}},{"../../lib":515}],811:[function(t,B,V){var m=t("../../lib");B.exports=function(A,T){A("texttemplate");var e=m.extendFlat({},T.font,{color:"auto",size:"auto"});m.coerceFont(A,"textfont",e)}},{"../../lib":515}],812:[function(t,B,V){var m=t("../../registry"),c=t("../../lib").isArrayOrTypedArray;B.exports=function(T,e,a,i,n,r){var v=[],s=m.traceIs(T,"contour"),o=m.traceIs(T,"histogram"),b=m.traceIs(T,"gl2d"),g,d,f,y=c(e)&&e.length>1;if(y&&!o&&r.type!=="category"){var l=e.length;if(l<=n){if(s||b)v=e.slice(0,n);else if(n===1)v=[e[0]-.5,e[0]+.5];else{for(v=[1.5*e[0]-.5*e[1]],f=1;f<l;f++)v.push((e[f-1]+e[f])*.5);v.push(1.5*e[l-1]-.5*e[l-2])}if(l<n){var x=v[v.length-1],u=x-v[v.length-2];for(f=l;f<n;f++)x+=u,v.push(x)}}else return s?e.slice(0,n):e.slice(0,n+1)}else{var M=T[r._id.charAt(0)+"calendar"];if(o)g=r.r2c(a,0,M);else if(c(e)&&e.length===1)g=e[0];else if(a===void 0)g=0;else{var _=r.type==="log"?r.d2c:r.r2c;g=_(a,0,M)}for(d=i||1,f=s||b?0:-.5;f<n;f++)v.push(g+d*f)}return v}},{"../../lib":515,"../../registry":647}],813:[function(t,B,V){var m=t("@plotly/d3"),c=t("tinycolor2"),A=t("../../registry"),T=t("../../components/drawing"),e=t("../../plots/cartesian/axes"),a=t("../../lib"),i=t("../../lib/svg_text_utils"),n=t("../scatter/format_labels"),r=t("../../components/color"),v=t("../../components/colorscale").extractOpts,s=t("../../components/colorscale").makeColorScaleFuncFromTrace,o=t("../../constants/xmlns_namespaces"),b=t("../../constants/alignment"),g=b.LINE_SPACING,d="heatmap-label";function f(M){return M.selectAll("g."+d)}function y(M){f(M).remove()}B.exports=function(M,_,p,w){var h=_.xaxis,L=_.yaxis;a.makeTraceGroups(w,p,"hm").each(function(S){var E=m.select(this),P=S[0],F=P.trace,I=F.xgap||0,D=F.ygap||0,R=P.z,N=P.x,z=P.y,G=P.xCenter,Y=P.yCenter,ee=A.traceIs(F,"contour"),Z=ee?"best":F.zsmooth,X=R.length,ne=a.maxRowLength(R),ce=!1,Q=!1,K,U,H,q,re,j,$,ie;for(j=0;K===void 0&&j<N.length-1;)K=h.c2p(N[j]),j++;for(j=N.length-1;U===void 0&&j>0;)U=h.c2p(N[j]),j--;for(U<K&&(H=U,U=K,K=H,ce=!0),j=0;q===void 0&&j<z.length-1;)q=L.c2p(z[j]),j++;for(j=z.length-1;re===void 0&&j>0;)re=L.c2p(z[j]),j--;if(re<q&&(H=q,q=re,re=H,Q=!0),ee&&(G=N,Y=z,N=P.xfill,z=P.yfill),Z!=="fast"){var oe=Z==="best"?0:.5;K=Math.max(-oe*h._length,K),U=Math.min((1+oe)*h._length,U),q=Math.max(-oe*L._length,q),re=Math.min((1+oe)*L._length,re)}var ae=Math.round(U-K),se=Math.round(re-q),_e=ae<=0||se<=0;if(_e){var ue=E.selectAll("image").data([]);ue.exit().remove(),y(E);return}var ye,xe;Z==="fast"?(ye=ne,xe=X):(ye=ae,xe=se);var me=document.createElement("canvas");me.width=ye,me.height=xe;var be=me.getContext("2d"),ke=s(F,{noNumericCheck:!0,returnArray:!0}),De,Ve;Z==="fast"?(De=ce?function(Lr){return ne-1-Lr}:a.identity,Ve=Q?function(Lr){return X-1-Lr}:a.identity):(De=function(Lr){return a.constrain(Math.round(h.c2p(N[Lr])-K),0,ae)},Ve=function(Lr){return a.constrain(Math.round(L.c2p(z[Lr])-q),0,se)});var Ae=Ve(0),Le=[Ae,Ae],je=ce?0:1,Ye=Q?0:1,ze=0,Ie=0,We=0,pt=0,Ft,Qt,zt,Et,Xt;function Nt(Lr,Tr){if(Lr!==void 0){var Wr=ke(Lr);return Wr[0]=Math.round(Wr[0]),Wr[1]=Math.round(Wr[1]),Wr[2]=Math.round(Wr[2]),ze+=Tr,Ie+=Wr[0]*Tr,We+=Wr[1]*Tr,pt+=Wr[2]*Tr,Wr}return[0,0,0,0]}function Ct(Lr,Tr,Wr,An){var vn=Lr[Wr.bin0];if(vn===void 0)return Nt(void 0,1);var Un=Lr[Wr.bin1],Ln=Tr[Wr.bin0],Zn=Tr[Wr.bin1],Wn=Un-vn||0,ya=Ln-vn||0,ka;return Un===void 0?Zn===void 0?ka=0:Ln===void 0?ka=2*(Zn-vn):ka=(2*Zn-Ln-vn)*2/3:Zn===void 0?Ln===void 0?ka=0:ka=(2*vn-Un-Ln)*2/3:Ln===void 0?ka=(2*Zn-Un-vn)*2/3:ka=Zn+vn-Un-Ln,Nt(vn+Wr.frac*Wn+An.frac*(ya+Wr.frac*ka))}if(Z){var Xe=0,at;try{at=new Uint8Array(ae*se*4)}catch{at=new Array(ae*se*4)}if(Z==="best"){var Ge=G||N,Se=Y||z,He=new Array(Ge.length),Ke=new Array(Se.length),qe=new Array(ae),Tt=G?x:l,mt=Y?x:l,At,Ht,It;for(j=0;j<Ge.length;j++)He[j]=Math.round(h.c2p(Ge[j])-K);for(j=0;j<Se.length;j++)Ke[j]=Math.round(L.c2p(Se[j])-q);for(j=0;j<ae;j++)qe[j]=Tt(j,He);for($=0;$<se;$++)for(At=mt($,Ke),Ht=R[At.bin0],It=R[At.bin1],j=0;j<ae;j++,Xe+=4)Xt=Ct(Ht,It,qe[j],At),u(at,Xe,Xt)}else for($=0;$<X;$++)for(Et=R[$],Le=Ve($),j=0;j<ae;j++)Xt=Nt(Et[j],1),Xe=(Le*ae+De(j))*4,u(at,Xe,Xt);var Vt=be.createImageData(ae,se);try{Vt.data.set(at)}catch{var jt=Vt.data,Yt=jt.length;for($=0;$<Yt;$++)jt[$]=at[$]}be.putImageData(Vt,0,0)}else{var or=Math.floor(I/2),Gr=Math.floor(D/2);for($=0;$<X;$++)if(Et=R[$],Le.reverse(),Le[Ye]=Ve($+1),!(Le[0]===Le[1]||Le[0]===void 0||Le[1]===void 0))for(Qt=De(0),Ft=[Qt,Qt],j=0;j<ne;j++)Ft.reverse(),Ft[je]=De(j+1),!(Ft[0]===Ft[1]||Ft[0]===void 0||Ft[1]===void 0)&&(zt=Et[j],Xt=Nt(zt,(Ft[1]-Ft[0])*(Le[1]-Le[0])),be.fillStyle="rgba("+Xt.join(",")+")",be.fillRect(Ft[0]+or,Le[0]+Gr,Ft[1]-Ft[0]-I,Le[1]-Le[0]-D))}Ie=Math.round(Ie/ze),We=Math.round(We/ze),pt=Math.round(pt/ze);var on=c("rgb("+Ie+","+We+","+pt+")");M._hmpixcount=(M._hmpixcount||0)+ze,M._hmlumcount=(M._hmlumcount||0)+ze*on.getLuminance();var Jr=E.selectAll("image").data(S);Jr.enter().append("svg:image").attr({xmlns:o.svg,preserveAspectRatio:"none"}),Jr.attr({height:se,width:ae,x:K,y:q,"xlink:href":me.toDataURL("image/png")}),y(E);var ot=F.texttemplate;if(ot){var er=v(F),Kt={type:"linear",range:[er.min,er.max],_separators:h._separators,_numFormat:h._numFormat},fr=F.type==="histogram2dcontour",Ar=F.type==="contour",et=Ar?1:0,$e=Ar?X-1:X,st=Ar?1:0,ct=Ar?ne-1:ne,Mt=[];for(j=et;j<$e;j++){var Ut;if(Ar)Ut=P.y[j];else if(fr){if(j===0||j===X-1)continue;Ut=P.y[j]}else if(P.yCenter)Ut=P.yCenter[j];else{if(j+1===X&&P.y[j+1]===void 0)continue;Ut=(P.y[j]+P.y[j+1])/2}var Pe=Math.round(L.c2p(Ut));if(!(0>Pe||Pe>L._length))for($=st;$<ct;$++){var Ee;if(Ar)Ee=P.x[$];else if(fr){if($===0||$===ne-1)continue;Ee=P.x[$]}else if(P.xCenter)Ee=P.xCenter[$];else{if($+1===ne&&P.x[$+1]===void 0)continue;Ee=(P.x[$]+P.x[$+1])/2}var it=Math.round(h.c2p(Ee));if(!(0>it||it>h._length)){var ut=n({x:Ee,y:Ut},F,M._fullLayout);ut.x=Ee,ut.y=Ut;var vt=P.z[j][$];vt===void 0?(ut.z="",ut.zLabel=""):(ut.z=vt,ut.zLabel=e.tickText(Kt,vt,"hover").text);var St=P.text&&P.text[j]&&P.text[j][$];(St===void 0||St===!1)&&(St=""),ut.text=St;var yt=a.texttemplateString(ot,ut,M._fullLayout._d3locale,ut,F._meta||{});if(!!yt){var Pt=yt.split("<br>"),Wt=Pt.length,ar=0;for(ie=0;ie<Wt;ie++)ar=Math.max(ar,Pt[ie].length);Mt.push({l:Wt,c:ar,t:yt,x:it,y:Pe,z:vt})}}}}var kr=F.textfont,wr=kr.family,Sr=kr.size,Zr=M._fullLayout.font.size;if(!Sr||Sr==="auto"){var ir=1/0,xr=1/0,Rr=0,Br=0;for(ie=0;ie<Mt.length;ie++){var Cr=Mt[ie];if(Rr=Math.max(Rr,Cr.l),Br=Math.max(Br,Cr.c),ie<Mt.length-1){var nt=Mt[ie+1],Dt=Math.abs(nt.x-Cr.x),Zt=Math.abs(nt.y-Cr.y);Dt&&(ir=Math.min(ir,Dt)),Zt&&(xr=Math.min(xr,Zt))}}!isFinite(ir)||!isFinite(xr)?Sr=Zr:(ir-=I,xr-=D,ir/=Br,xr/=Rr,ir/=g/2,xr/=g,Sr=Math.min(Math.floor(ir),Math.floor(xr),Zr))}if(Sr<=0||!isFinite(Sr))return;var sr=function(Lr){return Lr.x},zr=function(Lr){return Lr.y-Sr*(Lr.l*g/2-1)},Ur=f(E).data(Mt);Ur.enter().append("g").classed(d,1).append("text").attr("text-anchor","middle").each(function(Lr){var Tr=m.select(this),Wr=kr.color;(!Wr||Wr==="auto")&&(Wr=r.contrast("rgba("+ke(Lr.z).join()+")")),Tr.attr("data-notex",1).call(i.positionText,sr(Lr),zr(Lr)).call(T.font,wr,Sr,Wr).text(Lr.t).call(i.convertToTspans,M)})}})};function l(M,_){var p=_.length-2,w=a.constrain(a.findBin(M,_),0,p),h=_[w],L=_[w+1],S=a.constrain(w+(M-h)/(L-h)-.5,0,p),E=Math.round(S),P=Math.abs(S-E);return!S||S===p||!P?{bin0:E,bin1:E,frac:0}:{bin0:E,frac:P,bin1:Math.round(E+P/(S-E))}}function x(M,_){var p=_.length-1,w=a.constrain(a.findBin(M,_),0,p),h=_[w],L=_[w+1],S=(M-h)/(L-h)||0;return S<=0?{bin0:w,bin1:w,frac:0}:S<.5?{bin0:w,bin1:w+1,frac:S}:{bin0:w+1,bin1:w,frac:1-S}}function u(M,_,p){M[_]=p[0],M[_+1]=p[1],M[_+2]=p[2],M[_+3]=Math.round(p[3]*255)}},{"../../components/color":367,"../../components/colorscale":379,"../../components/drawing":389,"../../constants/alignment":483,"../../constants/xmlns_namespaces":492,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../registry":647,"../scatter/format_labels":945,"@plotly/d3":58,tinycolor2:313}],814:[function(t,B,V){var m=t("@plotly/d3");B.exports=function(A){m.select(A).selectAll(".hm image").style("opacity",function(T){return T.trace.opacity})}},{"@plotly/d3":58}],815:[function(t,B,V){B.exports=function(c,A,T){var e=T("zsmooth");e===!1&&(T("xgap"),T("ygap")),T("zhoverformat")}},{}],816:[function(t,B,V){var m=t("fast-isnumeric"),c=t("../../lib"),A=t("../../registry");B.exports=function(i,n,r,v,s,o){var b=r("z");s=s||"x",o=o||"y";var g,d;if(b===void 0||!b.length)return 0;if(c.isArray1D(i.z)){g=r(s),d=r(o);var f=c.minRowLength(g),y=c.minRowLength(d);if(f===0||y===0)return 0;n._length=Math.min(f,y,b.length)}else{if(g=T(s,r),d=T(o,r),!e(b))return 0;r("transpose"),n._length=null}if(i.type==="heatmapgl")return!0;var l=A.getComponentMethod("calendars","handleTraceDefaults");return l(i,n,[s,o],v),!0};function T(a,i){var n=i(a),r=n?i(a+"type","array"):"scaled";return r==="scaled"&&(i(a+"0"),i("d"+a)),n}function e(a){for(var i=!0,n=!1,r=!1,v,s=0;s<a.length;s++){if(v=a[s],!c.isArrayOrTypedArray(v)){i=!1;break}v.length>0&&(n=!0);for(var o=0;o<v.length;o++)if(m(v[o])){r=!0;break}}return i&&n&&r}},{"../../lib":515,"../../registry":647,"fast-isnumeric":190}],817:[function(t,B,V){for(var m=t("../heatmap/attributes"),c=t("../../components/colorscale/attributes"),A=t("../../lib/extend").extendFlat,T=t("../../plot_api/edit_types").overrideAll,e=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],a={},i=0;i<e.length;i++){var n=e[i];a[n]=m[n]}a.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"},A(a,c("",{cLetter:"z",autoColorDflt:!1})),B.exports=T(a,"calc","nested")},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/edit_types":548,"../heatmap/attributes":801}],818:[function(t,B,V){var m=t("../../../stackgl_modules").gl_heatmap2d,c=t("../../plots/cartesian/axes"),A=t("../../lib/str2rgbarray");function T(n,r){this.scene=n,this.uid=r,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=m(n.glplot,this.options),this.heatmap._trace=this}var e=T.prototype;e.handlePick=function(n){var r=this.options,v=r.shape,s=n.pointId,o=s%v[0],b=Math.floor(s/v[0]),g=s;return{trace:this,dataCoord:n.dataCoord,traceCoord:[r.x[o],r.y[b],r.z[g]],textLabel:this.textLabels[s],name:this.name,pointIndex:[b,o],hoverinfo:this.hoverinfo}},e.update=function(n,r){var v=r[0];this.index=n.index,this.name=n.name,this.hoverinfo=n.hoverinfo;var s=v.z;this.options.z=[].concat.apply([],s);var o=s[0].length,b=s.length;this.options.shape=[o,b],this.options.x=v.x,this.options.y=v.y,this.options.zsmooth=n.zsmooth;var g=a(n);this.options.colorLevels=g.colorLevels,this.options.colorValues=g.colorValues,this.textLabels=[].concat.apply([],n.text),this.heatmap.update(this.options);var d=this.scene.xaxis,f=this.scene.yaxis,y,l;n.zsmooth===!1&&(y={ppad:v.x[1]-v.x[0]},l={ppad:v.y[1]-v.y[0]}),n._extremes[d._id]=c.findExtremes(d,v.x,y),n._extremes[f._id]=c.findExtremes(f,v.y,l)},e.dispose=function(){this.heatmap.dispose()};function a(n){for(var r=n.colorscale,v=n.zmin,s=n.zmax,o=r.length,b=new Array(o),g=new Array(4*o),d=0;d<o;d++){var f=r[d],y=A(f[1]);b[d]=v+f[0]*(s-v);for(var l=0;l<4;l++)g[4*d+l]=y[l]}return{colorLevels:b,colorValues:g}}function i(n,r,v){var s=new T(n,r.uid);return s.update(r,v),s}B.exports=i},{"../../../stackgl_modules":1133,"../../lib/str2rgbarray":540,"../../plots/cartesian/axes":566}],819:[function(t,B,V){var m=t("../../lib"),c=t("../heatmap/xyz_defaults"),A=t("../../components/colorscale/defaults"),T=t("./attributes");B.exports=function(a,i,n,r){function v(o,b){return m.coerce(a,i,T,o,b)}var s=c(a,i,v,r);if(!s){i.visible=!1;return}v("text"),v("zsmooth"),A(a,i,r,v,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":377,"../../lib":515,"../heatmap/xyz_defaults":816,"./attributes":817}],820:[function(t,B,V){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../heatmap/colorbar"),calc:t("../heatmap/calc"),plot:t("./convert"),moduleType:"trace",name:"heatmapgl",basePlotModule:t("../../plots/gl2d"),categories:["gl","gl2d","2dMap"],meta:{}}},{"../../plots/gl2d":605,"../heatmap/calc":802,"../heatmap/colorbar":804,"./attributes":817,"./convert":818,"./defaults":819}],821:[function(t,B,V){var m=t("../bar/attributes"),c=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,A=t("../../plots/template_attributes").hovertemplateAttrs,T=t("../../plots/template_attributes").texttemplateAttrs,e=t("../../plots/font_attributes"),a=t("./bin_attributes"),i=t("./constants"),n=t("../../lib/extend").extendFlat;B.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:c("x"),yhoverformat:c("y"),text:n({},m.text,{}),hovertext:n({},m.hovertext,{}),orientation:m.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:a("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:a("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:A({},{keys:i.eventDataKeys}),texttemplate:T({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:n({},m.textposition,{arrayOk:!1}),textfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),outsidetextfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextanchor:m.insidetextanchor,textangle:m.textangle,cliponaxis:m.cliponaxis,constraintext:m.constraintext,marker:m.marker,offsetgroup:m.offsetgroup,alignmentgroup:m.alignmentgroup,selected:m.selected,unselected:m.unselected,_deprecated:{bardir:m._deprecated.bardir}}},{"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../../plots/font_attributes":594,"../../plots/template_attributes":642,"../bar/attributes":657,"./bin_attributes":823,"./constants":827}],822:[function(t,B,V){B.exports=function(c,A){for(var T=c.length,e=0,a=0;a<T;a++)A[a]?(c[a]/=A[a],e+=c[a]):c[a]=null;return e}},{}],823:[function(t,B,V){B.exports=function(c,A){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},{}],824:[function(t,B,V){var m=t("fast-isnumeric");B.exports={count:function(c,A,T){return T[c]++,1},sum:function(c,A,T,e){var a=e[A];return m(a)?(a=Number(a),T[c]+=a,a):0},avg:function(c,A,T,e,a){var i=e[A];return m(i)&&(i=Number(i),T[c]+=i,a[c]++),0},min:function(c,A,T,e){var a=e[A];if(m(a))if(a=Number(a),m(T[c])){if(T[c]>a){var i=a-T[c];return T[c]=a,i}}else return T[c]=a,a;return 0},max:function(c,A,T,e){var a=e[A];if(m(a))if(a=Number(a),m(T[c])){if(T[c]<a){var i=a-T[c];return T[c]=a,i}}else return T[c]=a,a;return 0}}},{"fast-isnumeric":190}],825:[function(t,B,V){var m=t("../../constants/numerical"),c=m.ONEAVGYEAR,A=m.ONEAVGMONTH,T=m.ONEDAY,e=m.ONEHOUR,a=m.ONEMIN,i=m.ONESEC,n=t("../../plots/cartesian/axes").tickIncrement;B.exports=function(g,d,f,y,l){var x=-1.1*d,u=-.1*d,M=g-u,_=f[0],p=f[1],w=Math.min(r(_+u,_+M,y,l),r(p+u,p+M,y,l)),h=Math.min(r(_+x,_+u,y,l),r(p+x,p+u,y,l)),L,S;if(w>h&&h<Math.abs(p-_)/4e3?(L=w,S=!1):(L=Math.min(w,h),S=!0),y.type==="date"&&L>T){var E=L===c?1:6,P=L===c?"M12":"M1";return function(F,I){var D=y.c2d(F,c,l),R=D.indexOf("-",E);R>0&&(D=D.substr(0,R));var N=y.d2c(D,0,l);if(N<F){var z=n(N,P,!1,l);(N+z)/2<F+g&&(N=z)}return I&&S?n(N,P,!0,l):N}}return function(F,I){var D=L*Math.round(F/L);return D+L/10<F&&D+L*.9<F+g&&(D+=L),I&&S&&(D-=L),D}};function r(b,g,d,f){if(b*g<=0)return 1/0;for(var y=Math.abs(g-b),l=d.type==="date",x=v(y,l),u=0;u<10;u++){var M=v(x*80,l);if(x===M)break;if(s(M,b,g,l,d,f))x=M;else break}return x}function v(b,g){return g&&b>i?b>T?b>c*1.1?c:b>A*1.1?A:T:b>e?e:b>a?a:i:Math.pow(10,Math.floor(Math.log(b)/Math.LN10))}function s(b,g,d,f,y,l){if(f&&b>T){var x=o(g,y,l),u=o(d,y,l),M=b===c?0:1;return x[M]!==u[M]}return Math.floor(d/b)-Math.floor(g/b)>.1}function o(b,g,d){var f=g.c2d(b,c,d).split("-");return f[0]===""&&(f.unshift(),f[0]="-"+f[0]),f}},{"../../constants/numerical":491,"../../plots/cartesian/axes":566}],826:[function(t,B,V){var m=t("fast-isnumeric"),c=t("../../lib"),A=t("../../registry"),T=t("../../plots/cartesian/axes"),e=t("../bar/arrays_to_calcdata"),a=t("./bin_functions"),i=t("./norm_functions"),n=t("./average"),r=t("./bin_label_vals");function v(d,f){var y=[],l=[],x=f.orientation==="h",u=T.getFromId(d,x?f.yaxis:f.xaxis),M=x?"y":"x",_={x:"y",y:"x"}[M],p=f[M+"calendar"],w=f.cumulative,h,L=s(d,f,u,M),S=L[0],E=L[1],P=typeof S.size=="string",F=[],I=P?F:S,D=[],R=[],N=[],z=0,G=f.histnorm,Y=f.histfunc,ee=G.indexOf("density")!==-1,Z,X,ne;w.enabled&&ee&&(G=G.replace(/ ?density$/,""),ee=!1);var ce=Y==="max"||Y==="min",Q=ce?null:0,K=a.count,U=i[G],H=!1,q=function(Ve){return u.r2c(Ve,0,p)},re;for(c.isArrayOrTypedArray(f[_])&&Y!=="count"&&(re=f[_],H=Y==="avg",K=a[Y]),h=q(S.start),X=q(S.end)+(h-T.tickIncrement(h,S.size,!1,p))/1e6;h<X&&y.length<1e6&&(Z=T.tickIncrement(h,S.size,!1,p),y.push((h+Z)/2),l.push(Q),N.push([]),F.push(h),ee&&D.push(1/(Z-h)),H&&R.push(0),!(Z<=h));)h=Z;F.push(h),!P&&u.type==="date"&&(I={start:q(I.start),end:q(I.end),size:I.size}),d._fullLayout._roundFnOpts||(d._fullLayout._roundFnOpts={});var j=f["_"+M+"bingroup"],$={leftGap:1/0,rightGap:1/0};j&&(d._fullLayout._roundFnOpts[j]||(d._fullLayout._roundFnOpts[j]=$),$=d._fullLayout._roundFnOpts[j]);var ie=l.length,oe=!0,ae=$.leftGap,se=$.rightGap,_e={};for(h=0;h<E.length;h++){var ue=E[h];ne=c.findBin(ue,I),ne>=0&&ne<ie&&(z+=K(ne,h,l,re,R),oe&&N[ne].length&&ue!==E[N[ne][0]]&&(oe=!1),N[ne].push(h),_e[h]=ne,ae=Math.min(ae,ue-F[ne]),se=Math.min(se,F[ne+1]-ue))}$.leftGap=ae,$.rightGap=se;var ye;oe||(ye=function(Ve,Ae){return function(){var Le=d._fullLayout._roundFnOpts[j];return r(Le.leftGap,Le.rightGap,F,u,p)(Ve,Ae)}}),H&&(z=n(l,R)),U&&U(l,z,D),w.enabled&&g(l,w.direction,w.currentbin);var xe=Math.min(y.length,l.length),me=[],be=0,ke=xe-1;for(h=0;h<xe;h++)if(l[h]){be=h;break}for(h=xe-1;h>=be;h--)if(l[h]){ke=h;break}for(h=be;h<=ke;h++)if(m(y[h])&&m(l[h])){var De={p:y[h],s:l[h],b:0};w.enabled||(De.pts=N[h],oe?De.ph0=De.ph1=N[h].length?E[N[h][0]]:y[h]:(f._computePh=!0,De.ph0=ye(F[h]),De.ph1=ye(F[h+1],!0))),me.push(De)}return me.length===1&&(me[0].width1=T.tickIncrement(me[0].p,S.size,!1,p)-me[0].p),e(me,f),c.isArrayOrTypedArray(f.selectedpoints)&&c.tagSelected(me,f,_e),me}function s(d,f,y,l,x){var u=l+"bins",M=d._fullLayout,_=f["_"+l+"bingroup"],p=M._histogramBinOpts[_],w=M.barmode==="overlay",h,L,S,E,P,F,I,D=function(ue){return y.r2c(ue,0,E)},R=function(ue){return y.c2r(ue,0,E)},N=y.type==="date"?function(ue){return ue||ue===0?c.cleanDate(ue,null,E):null}:function(ue){return m(ue)?Number(ue):null};function z(ue,ye,xe){ye[ue+"Found"]?(ye[ue]=N(ye[ue]),ye[ue]===null&&(ye[ue]=xe[ue])):(F[ue]=ye[ue]=xe[ue],c.nestedProperty(L[0],u+"."+ue).set(xe[ue]))}if(f["_"+l+"autoBinFinished"])delete f["_"+l+"autoBinFinished"];else{L=p.traces;var G=[],Y=!0,ee=!1,Z=!1;for(h=0;h<L.length;h++)if(S=L[h],S.visible){var X=p.dirs[h];P=S["_"+X+"pos0"]=y.makeCalcdata(S,X),G=c.concat(G,P),delete S["_"+l+"autoBinFinished"],f.visible===!0&&(Y?Y=!1:(delete S._autoBin,S["_"+l+"autoBinFinished"]=1),A.traceIs(S,"2dMap")&&(ee=!0),S.type==="histogram2dcontour"&&(Z=!0))}E=L[0][l+"calendar"];var ne=T.autoBin(G,y,p.nbins,ee,E,p.sizeFound&&p.size),ce=L[0]._autoBin={};if(F=ce[p.dirs[0]]={},Z&&(p.size||(ne.start=R(T.tickIncrement(D(ne.start),ne.size,!0,E))),p.end===void 0&&(ne.end=R(T.tickIncrement(D(ne.end),ne.size,!1,E)))),w&&!A.traceIs(f,"2dMap")&&ne._dataSpan===0&&y.type!=="category"&&y.type!=="multicategory"){if(x)return[ne,P,!0];ne=o(d,f,y,l,u)}I=S.cumulative||{},I.enabled&&I.currentbin!=="include"&&(I.direction==="decreasing"?ne.start=R(T.tickIncrement(D(ne.start),ne.size,!0,E)):ne.end=R(T.tickIncrement(D(ne.end),ne.size,!1,E))),p.size=ne.size,p.sizeFound||(F.size=ne.size,c.nestedProperty(L[0],u+".size").set(ne.size)),z("start",p,ne),z("end",p,ne)}P=f["_"+l+"pos0"],delete f["_"+l+"pos0"];var Q=f._input[u]||{},K=c.extendFlat({},p),U=p.start,H=y.r2l(Q.start),q=H!==void 0;if((p.startFound||q)&&H!==y.r2l(U)){var re=q?H:c.aggNums(Math.min,null,P),j={type:y.type==="category"||y.type==="multicategory"?"linear":y.type,r2l:y.r2l,dtick:p.size,tick0:U,calendar:E,range:[re,T.tickIncrement(re,p.size,!1,E)].map(y.l2r)},$=T.tickFirst(j);$>y.r2l(re)&&($=T.tickIncrement($,p.size,!0,E)),K.start=y.l2r($),q||c.nestedProperty(f,u+".start").set(K.start)}var ie=p.end,oe=y.r2l(Q.end),ae=oe!==void 0;if((p.endFound||ae)&&oe!==y.r2l(ie)){var se=ae?oe:c.aggNums(Math.max,null,P);K.end=y.l2r(se),ae||c.nestedProperty(f,u+".start").set(K.end)}var _e="autobin"+l;return f._input[_e]===!1&&(f._input[u]=c.extendFlat({},f[u]||{}),delete f._input[_e],delete f[_e]),[K,P]}function o(d,f,y,l,x){var u=d._fullLayout,M=b(d,f),_=!1,p=1/0,w=[f],h,L,S;for(h=0;h<M.length;h++)if(L=M[h],L===f)_=!0;else if(!_)S=u._histogramBinOpts[L["_"+l+"bingroup"]],p=Math.min(p,S.size||L[x].size);else{var E=s(d,L,y,l,!0),P=E[0],F=E[2];L["_"+l+"autoBinFinished"]=1,L["_"+l+"pos0"]=E[1],F?w.push(L):p=Math.min(p,P.size)}var I=new Array(w.length);for(h=0;h<w.length;h++)for(var D=w[h]["_"+l+"pos0"],R=0;R<D.length;R++)if(D[R]!==void 0){I[h]=D[R];break}for(isFinite(p)||(p=c.distinctVals(I).minDiff),h=0;h<w.length;h++){L=w[h];var N=L[l+"calendar"],z={start:y.c2r(I[h]-p/2,0,N),end:y.c2r(I[h]+p/2,0,N),size:p};L._input[x]=L[x]=z,S=u._histogramBinOpts[L["_"+l+"bingroup"]],S&&c.extendFlat(S,z)}return f[x]}function b(d,f){for(var y=f.xaxis,l=f.yaxis,x=f.orientation,u=[],M=d._fullData,_=0;_<M.length;_++){var p=M[_];p.type==="histogram"&&p.visible===!0&&p.orientation===x&&p.xaxis===y&&p.yaxis===l&&u.push(p)}return u}function g(d,f,y){var l,x,u;function M(p){u=d[p],d[p]/=2}function _(p){x=d[p],d[p]=u+x/2,u+=x}if(y==="half")if(f==="increasing")for(M(0),l=1;l<d.length;l++)_(l);else for(M(d.length-1),l=d.length-2;l>=0;l--)_(l);else if(f==="increasing"){for(l=1;l<d.length;l++)d[l]+=d[l-1];y==="exclude"&&(d.unshift(0),d.pop())}else{for(l=d.length-2;l>=0;l--)d[l]+=d[l+1];y==="exclude"&&(d.push(0),d.shift())}}B.exports={calc:v,calcAllAutoBins:s}},{"../../lib":515,"../../plots/cartesian/axes":566,"../../registry":647,"../bar/arrays_to_calcdata":656,"./average":822,"./bin_functions":824,"./bin_label_vals":825,"./norm_functions":833,"fast-isnumeric":190}],827:[function(t,B,V){B.exports={eventDataKeys:["binNumber"]}},{}],828:[function(t,B,V){var m=t("../../lib"),c=t("../../plots/cartesian/axis_ids"),A=t("../../registry").traceIs,T=t("../bar/defaults").handleGroupingDefaults,e=m.nestedProperty,a=t("../../plots/cartesian/constraints").getAxisGroup,i=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],n=["x","y"];B.exports=function(v,s){var o=s._histogramBinOpts={},b=[],g={},d=[],f,y,l,x,u,M,_;function p(Z,X){return m.coerce(f._input,f,f._module.attributes,Z,X)}function w(Z){return Z.orientation==="v"?"x":"y"}function h(Z,X){var ne=c.getFromTrace({_fullLayout:s},Z,X);return ne.type}function L(Z,X,ne){var ce=Z.uid+"__"+ne;X||(X=ce);var Q=h(Z,ne),K=Z[ne+"calendar"]||"",U=o[X],H=!0;U&&(Q===U.axType&&K===U.calendar?(H=!1,U.traces.push(Z),U.dirs.push(ne)):(X=ce,Q!==U.axType&&m.warn(["Attempted to group the bins of trace",Z.index,"set on a","type:"+Q,"axis","with bins on","type:"+U.axType,"axis."].join(" ")),K!==U.calendar&&m.warn(["Attempted to group the bins of trace",Z.index,"set with a",K,"calendar","with bins",U.calendar?"on a "+U.calendar+" calendar":"w/o a set calendar"].join(" ")))),H&&(o[X]={traces:[Z],dirs:[ne],axType:Q,calendar:Z[ne+"calendar"]||""}),Z["_"+ne+"bingroup"]=X}for(u=0;u<v.length;u++)f=v[u],A(f,"histogram")&&(b.push(f),delete f._xautoBinFinished,delete f._yautoBinFinished,A(f,"2dMap")||T(f._input,f,s,p));var S=s._alignmentOpts||{};for(u=0;u<b.length;u++){if(f=b[u],l="",!A(f,"2dMap")){if(x=w(f),s.barmode==="group"&&f.alignmentgroup){var E=f[x+"axis"],P=a(s,E)+f.orientation;(S[P]||{})[f.alignmentgroup]&&(l=P)}!l&&s.barmode!=="overlay"&&(l=a(s,f.xaxis)+a(s,f.yaxis)+w(f))}l?(g[l]||(g[l]=[]),g[l].push(f)):d.push(f)}for(l in g){if(y=g[l],y.length===1){d.push(y[0]);continue}var F=!1;for(y.length&&(f=y[0],F=p("bingroup")),l=F||l,u=0;u<y.length;u++){f=y[u];var I=f._input.bingroup;I&&I!==l&&m.warn(["Trace",f.index,"must match","within bingroup",l+".","Ignoring its bingroup:",I,"setting."].join(" ")),f.bingroup=l,L(f,l,w(f))}}for(u=0;u<d.length;u++){f=d[u];var D=p("bingroup");if(A(f,"2dMap"))for(_=0;_<2;_++){x=n[_];var R=p(x+"bingroup",D?D+"__"+x:null);L(f,R,x)}else L(f,D,w(f))}for(l in o){var N=o[l];for(y=N.traces,M=0;M<i.length;M++){var z=i[M],G=z.name,Y,ee;if(!(G==="nbins"&&N.sizeFound)){for(u=0;u<y.length;u++){if(f=y[u],x=N.dirs[u],Y=z.aStr[x],e(f._input,Y).get()!==void 0){N[G]=p(Y),N[G+"Found"]=!0;break}ee=(f._autoBin||{})[x]||{},ee[G]&&e(f,Y).set(ee[G])}if(G==="start"||G==="end")for(;u<y.length;u++)f=y[u],f["_"+x+"bingroup"]&&(ee=(f._autoBin||{})[x]||{},p(Y,ee[G]));G==="nbins"&&!N.sizeFound&&!N.nbinsFound&&(f=y[0],N[G]=p(Y))}}}}},{"../../lib":515,"../../plots/cartesian/axis_ids":570,"../../plots/cartesian/constraints":574,"../../registry":647,"../bar/defaults":661}],829:[function(t,B,V){var m=t("../../registry"),c=t("../../lib"),A=t("../../components/color"),T=t("../bar/defaults").handleText,e=t("../bar/style_defaults"),a=t("./attributes");B.exports=function(n,r,v,s){function o(h,L){return c.coerce(n,r,a,h,L)}var b=o("x"),g=o("y"),d=o("cumulative.enabled");d&&(o("cumulative.direction"),o("cumulative.currentbin")),o("text");var f=o("textposition");T(n,r,s,o,f,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),o("hovertext"),o("hovertemplate"),o("xhoverformat"),o("yhoverformat");var y=o("orientation",g&&!b?"h":"v"),l=y==="v"?"x":"y",x=y==="v"?"y":"x",u=b&&g?Math.min(c.minRowLength(b)&&c.minRowLength(g)):c.minRowLength(r[l]||[]);if(!u){r.visible=!1;return}r._length=u;var M=m.getComponentMethod("calendars","handleTraceDefaults");M(n,r,["x","y"],s);var _=r[x];_&&o("histfunc"),o("histnorm"),o("autobin"+l),e(n,r,o,v,s),c.coerceSelectionMarkerOpacity(r,o);var p=(r.marker.line||{}).color,w=m.getComponentMethod("errorbars","supplyDefaults");w(n,r,p||A.defaultLine,{axis:"y"}),w(n,r,p||A.defaultLine,{axis:"x",inherit:"y"})}},{"../../components/color":367,"../../lib":515,"../../registry":647,"../bar/defaults":661,"../bar/style_defaults":672,"./attributes":821}],830:[function(t,B,V){B.exports=function(c,A,T,e,a){if(c.x="xVal"in A?A.xVal:A.x,c.y="yVal"in A?A.yVal:A.y,"zLabelVal"in A&&(c.z=A.zLabelVal),A.xa&&(c.xaxis=A.xa),A.ya&&(c.yaxis=A.ya),!(T.cumulative||{}).enabled){var i=Array.isArray(a)?e[0].pts[a[0]][a[1]]:e[a].pts;c.pointNumbers=i,c.binNumber=c.pointNumber,delete c.pointNumber,delete c.pointIndex;var n;if(T._indexToPoints){n=[];for(var r=0;r<i.length;r++)n=n.concat(T._indexToPoints[i[r]])}else n=i;c.pointIndices=n}return c}},{}],831:[function(t,B,V){var m=t("../bar/hover").hoverPoints,c=t("../../plots/cartesian/axes").hoverLabelText;B.exports=function(T,e,a,i,n){var r=m(T,e,a,i,n);if(!!r){T=r[0];var v=T.cd[T.index],s=T.cd[0].trace;if(!s.cumulative.enabled){var o=s.orientation==="h"?"y":"x";T[o+"Label"]=c(T[o+"a"],[v.ph0,v.ph1],s[o+"hoverformat"])}return r}}},{"../../plots/cartesian/axes":566,"../bar/hover":664}],832:[function(t,B,V){B.exports={attributes:t("./attributes"),layoutAttributes:t("../bar/layout_attributes"),supplyDefaults:t("./defaults"),crossTraceDefaults:t("./cross_trace_defaults"),supplyLayoutDefaults:t("../bar/layout_defaults"),calc:t("./calc").calc,crossTraceCalc:t("../bar/cross_trace_calc").crossTraceCalc,plot:t("../bar/plot").plot,layerName:"barlayer",style:t("../bar/style").style,styleOnSelect:t("../bar/style").styleOnSelect,colorbar:t("../scatter/marker_colorbar"),hoverPoints:t("./hover"),selectPoints:t("../bar/select"),eventData:t("./event_data"),moduleType:"trace",name:"histogram",basePlotModule:t("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},{"../../plots/cartesian":578,"../bar/cross_trace_calc":660,"../bar/layout_attributes":666,"../bar/layout_defaults":667,"../bar/plot":668,"../bar/select":669,"../bar/style":671,"../scatter/marker_colorbar":954,"./attributes":821,"./calc":826,"./cross_trace_defaults":828,"./defaults":829,"./event_data":830,"./hover":831}],833:[function(t,B,V){B.exports={percent:function(m,c){for(var A=m.length,T=100/c,e=0;e<A;e++)m[e]*=T},probability:function(m,c){for(var A=m.length,T=0;T<A;T++)m[T]/=c},density:function(m,c,A,T){var e=m.length;T=T||1;for(var a=0;a<e;a++)m[a]*=A[a]*T},"probability density":function(m,c,A,T){var e=m.length;T&&(c/=T);for(var a=0;a<e;a++)m[a]*=A[a]/c}}},{}],834:[function(t,B,V){var m=t("../histogram/attributes"),c=t("../histogram/bin_attributes"),A=t("../heatmap/attributes"),T=t("../../plots/attributes"),e=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,a=t("../../plots/template_attributes").hovertemplateAttrs,i=t("../../plots/template_attributes").texttemplateAttrs,n=t("../../components/colorscale/attributes"),r=t("../../lib/extend").extendFlat;B.exports=r({x:m.x,y:m.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:m.histnorm,histfunc:m.histfunc,nbinsx:m.nbinsx,xbins:c("x"),nbinsy:m.nbinsy,ybins:c("y"),autobinx:m.autobinx,autobiny:m.autobiny,bingroup:r({},m.bingroup,{}),xbingroup:r({},m.bingroup,{}),ybingroup:r({},m.bingroup,{}),xgap:A.xgap,ygap:A.ygap,zsmooth:A.zsmooth,xhoverformat:e("x"),yhoverformat:e("y"),zhoverformat:e("z",1),hovertemplate:a({},{keys:"z"}),texttemplate:i({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:A.textfont,showlegend:r({},T.showlegend,{dflt:!1})},n("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../heatmap/attributes":801,"../histogram/attributes":821,"../histogram/bin_attributes":823}],835:[function(t,B,V){var m=t("../../lib"),c=t("../../plots/cartesian/axes"),A=t("../histogram/bin_functions"),T=t("../histogram/norm_functions"),e=t("../histogram/average"),a=t("../histogram/bin_label_vals"),i=t("../histogram/calc").calcAllAutoBins;B.exports=function(o,b){var g=c.getFromId(o,b.xaxis),d=c.getFromId(o,b.yaxis),f=b.xcalendar,y=b.ycalendar,l=function(Xe){return g.r2c(Xe,0,f)},x=function(Xe){return d.r2c(Xe,0,y)},u=function(Xe){return g.c2r(Xe,0,f)},M=function(Xe){return d.c2r(Xe,0,y)},_,p,w,h,L=i(o,b,g,"x"),S=L[0],E=L[1],P=i(o,b,d,"y"),F=P[0],I=P[1],D=b._length;E.length>D&&E.splice(D,E.length-D),I.length>D&&I.splice(D,I.length-D);var R=[],N=[],z=[],G=typeof S.size=="string",Y=typeof F.size=="string",ee=[],Z=[],X=G?ee:S,ne=Y?Z:F,ce=0,Q=[],K=[],U=b.histnorm,H=b.histfunc,q=U.indexOf("density")!==-1,re=H==="max"||H==="min",j=re?null:0,$=A.count,ie=T[U],oe=!1,ae=[],se=[],_e="z"in b?b.z:"marker"in b&&Array.isArray(b.marker.color)?b.marker.color:"";_e&&H!=="count"&&(oe=H==="avg",$=A[H]);var ue=S.size,ye=l(S.start),xe=l(S.end)+(ye-c.tickIncrement(ye,ue,!1,f))/1e6;for(_=ye;_<xe;_=c.tickIncrement(_,ue,!1,f))N.push(j),ee.push(_),oe&&z.push(0);ee.push(_);var me=N.length,be=(_-ye)/me,ke=u(ye+be/2),De=F.size,Ve=x(F.start),Ae=x(F.end)+(Ve-c.tickIncrement(Ve,De,!1,y))/1e6;for(_=Ve;_<Ae;_=c.tickIncrement(_,De,!1,y)){R.push(N.slice()),Z.push(_);var Le=new Array(me);for(p=0;p<me;p++)Le[p]=[];K.push(Le),oe&&Q.push(z.slice())}Z.push(_);var je=R.length,Ye=(_-Ve)/je,ze=M(Ve+Ye/2);q&&(ae=n(N.length,X,be,G),se=n(R.length,ne,Ye,Y)),!G&&g.type==="date"&&(X=r(l,X)),!Y&&d.type==="date"&&(ne=r(x,ne));var Ie=!0,We=!0,pt=new Array(me),Ft=new Array(je),Qt=1/0,zt=1/0,Et=1/0,Xt=1/0;for(_=0;_<D;_++){var Nt=E[_],Ct=I[_];w=m.findBin(Nt,X),h=m.findBin(Ct,ne),w>=0&&w<me&&h>=0&&h<je&&(ce+=$(w,_,R[h],_e,Q[h]),K[h][w].push(_),Ie&&(pt[w]===void 0?pt[w]=Nt:pt[w]!==Nt&&(Ie=!1)),We&&(Ft[h]===void 0?Ft[h]=Ct:Ft[h]!==Ct&&(We=!1)),Qt=Math.min(Qt,Nt-ee[w]),zt=Math.min(zt,ee[w+1]-Nt),Et=Math.min(Et,Ct-Z[h]),Xt=Math.min(Xt,Z[h+1]-Ct))}if(oe)for(h=0;h<je;h++)ce+=e(R[h],Q[h]);if(ie)for(h=0;h<je;h++)ie(R[h],ce,ae,se[h]);return{x:E,xRanges:v(ee,Ie&&pt,Qt,zt,g,f),x0:ke,dx:be,y:I,yRanges:v(Z,We&&Ft,Et,Xt,d,y),y0:ze,dy:Ye,z:R,pts:K}};function n(s,o,b,g){var d=new Array(s),f;if(g)for(f=0;f<s;f++)d[f]=1/(o[f+1]-o[f]);else{var y=1/b;for(f=0;f<s;f++)d[f]=y}return d}function r(s,o){return{start:s(o.start),end:s(o.end),size:o.size}}function v(s,o,b,g,d,f){var y,l=s.length-1,x=new Array(l),u=a(b,g,s,d,f);for(y=0;y<l;y++){var M=(o||[])[y];x[y]=M===void 0?[u(s[y]),u(s[y+1],!0)]:[M,M]}return x}},{"../../lib":515,"../../plots/cartesian/axes":566,"../histogram/average":822,"../histogram/bin_functions":824,"../histogram/bin_label_vals":825,"../histogram/calc":826,"../histogram/norm_functions":833}],836:[function(t,B,V){var m=t("../../lib"),c=t("./sample_defaults"),A=t("../heatmap/style_defaults"),T=t("../../components/colorscale/defaults"),e=t("../heatmap/label_defaults"),a=t("./attributes");B.exports=function(n,r,v,s){function o(b,g){return m.coerce(n,r,a,b,g)}c(n,r,o,s),r.visible!==!1&&(A(n,r,o,s),T(n,r,s,o,{prefix:"",cLetter:"z"}),o("hovertemplate"),e(o,s),o("xhoverformat"),o("yhoverformat"))}},{"../../components/colorscale/defaults":377,"../../lib":515,"../heatmap/label_defaults":811,"../heatmap/style_defaults":815,"./attributes":834,"./sample_defaults":839}],837:[function(t,B,V){var m=t("../heatmap/hover"),c=t("../../plots/cartesian/axes").hoverLabelText;B.exports=function(T,e,a,i,n){var r=m(T,e,a,i,n);if(!!r){T=r[0];var v=T.index,s=v[0],o=v[1],b=T.cd[0],g=b.trace,d=b.xRanges[o],f=b.yRanges[s];return T.xLabel=c(T.xa,[d[0],d[1]],g.xhoverformat),T.yLabel=c(T.ya,[f[0],f[1]],g.yhoverformat),r}}},{"../../plots/cartesian/axes":566,"../heatmap/hover":808}],838:[function(t,B,V){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),crossTraceDefaults:t("../histogram/cross_trace_defaults"),calc:t("../heatmap/calc"),plot:t("../heatmap/plot"),layerName:"heatmaplayer",colorbar:t("../heatmap/colorbar"),style:t("../heatmap/style"),hoverPoints:t("./hover"),eventData:t("../histogram/event_data"),moduleType:"trace",name:"histogram2d",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":578,"../heatmap/calc":802,"../heatmap/colorbar":804,"../heatmap/plot":813,"../heatmap/style":814,"../histogram/cross_trace_defaults":828,"../histogram/event_data":830,"./attributes":834,"./defaults":836,"./hover":837}],839:[function(t,B,V){var m=t("../../registry"),c=t("../../lib");B.exports=function(T,e,a,i){var n=a("x"),r=a("y"),v=c.minRowLength(n),s=c.minRowLength(r);if(!v||!s){e.visible=!1;return}e._length=Math.min(v,s);var o=m.getComponentMethod("calendars","handleTraceDefaults");o(T,e,["x","y"],i);var b=a("z")||a("marker.color");b&&a("histfunc"),a("histnorm"),a("autobinx"),a("autobiny")}},{"../../lib":515,"../../registry":647}],840:[function(t,B,V){var m=t("../histogram2d/attributes"),c=t("../contour/attributes"),A=t("../../components/colorscale/attributes"),T=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=t("../../lib/extend").extendFlat;B.exports=e({x:m.x,y:m.y,z:m.z,marker:m.marker,histnorm:m.histnorm,histfunc:m.histfunc,nbinsx:m.nbinsx,xbins:m.xbins,nbinsy:m.nbinsy,ybins:m.ybins,autobinx:m.autobinx,autobiny:m.autobiny,bingroup:m.bingroup,xbingroup:m.xbingroup,ybingroup:m.ybingroup,autocontour:c.autocontour,ncontours:c.ncontours,contours:c.contours,line:{color:c.line.color,width:e({},c.line.width,{dflt:.5}),dash:c.line.dash,smoothing:c.line.smoothing,editType:"plot"},xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:m.hovertemplate,texttemplate:c.texttemplate,textfont:c.textfont},A("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../contour/attributes":744,"../histogram2d/attributes":834}],841:[function(t,B,V){var m=t("../../lib"),c=t("../histogram2d/sample_defaults"),A=t("../contour/contours_defaults"),T=t("../contour/style_defaults"),e=t("../heatmap/label_defaults"),a=t("./attributes");B.exports=function(n,r,v,s){function o(g,d){return m.coerce(n,r,a,g,d)}function b(g){return m.coerce2(n,r,a,g)}c(n,r,o,s),r.visible!==!1&&(A(n,r,o,b),T(n,r,o,s),o("xhoverformat"),o("yhoverformat"),o("hovertemplate"),r.contours&&r.contours.coloring==="heatmap"&&e(o,s))}},{"../../lib":515,"../contour/contours_defaults":751,"../contour/style_defaults":765,"../heatmap/label_defaults":811,"../histogram2d/sample_defaults":839,"./attributes":840}],842:[function(t,B,V){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),crossTraceDefaults:t("../histogram/cross_trace_defaults"),calc:t("../contour/calc"),plot:t("../contour/plot").plot,layerName:"contourlayer",style:t("../contour/style"),colorbar:t("../contour/colorbar"),hoverPoints:t("../contour/hover"),moduleType:"trace",name:"histogram2dcontour",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":578,"../contour/calc":745,"../contour/colorbar":747,"../contour/hover":757,"../contour/plot":762,"../contour/style":764,"../histogram/cross_trace_defaults":828,"./attributes":840,"./defaults":841}],843:[function(t,B,V){var m=t("../../plots/template_attributes").hovertemplateAttrs,c=t("../../plots/template_attributes").texttemplateAttrs,A=t("../../components/colorscale/attributes"),T=t("../../plots/domain").attributes,e=t("../pie/attributes"),a=t("../sunburst/attributes"),i=t("../treemap/attributes"),n=t("../treemap/constants"),r=t("../../lib/extend").extendFlat;B.exports={labels:a.labels,parents:a.parents,values:a.values,branchvalues:a.branchvalues,count:a.count,level:a.level,maxdepth:a.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:i.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:r({colors:a.marker.colors,line:a.marker.line,editType:"calc"},A("marker",{colorAttr:"colors",anim:!1})),leaf:a.leaf,pathbar:i.pathbar,text:e.text,textinfo:a.textinfo,texttemplate:c({editType:"plot"},{keys:n.eventDataKeys.concat(["label","value"])}),hovertext:e.hovertext,hoverinfo:a.hoverinfo,hovertemplate:m({},{keys:n.eventDataKeys}),textfont:e.textfont,insidetextfont:e.insidetextfont,outsidetextfont:i.outsidetextfont,textposition:i.textposition,sort:e.sort,root:a.root,domain:T({name:"icicle",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/domain":593,"../../plots/template_attributes":642,"../pie/attributes":910,"../sunburst/attributes":1058,"../treemap/attributes":1084,"../treemap/constants":1087}],844:[function(t,B,V){var m=t("../../plots/plots");V.name="icicle",V.plot=function(c,A,T,e){m.plotBasePlot(V.name,c,A,T,e)},V.clean=function(c,A,T,e){m.cleanBasePlot(V.name,c,A,T,e)}},{"../../plots/plots":628}],845:[function(t,B,V){var m=t("../sunburst/calc");V.calc=function(c,A){return m.calc(c,A)},V.crossTraceCalc=function(c){return m._runCrossTraceCalc("icicle",c)}},{"../sunburst/calc":1060}],846:[function(t,B,V){var m=t("../../lib"),c=t("./attributes"),A=t("../../components/color"),T=t("../../plots/domain").defaults,e=t("../bar/defaults").handleText,a=t("../bar/constants").TEXTPAD,i=t("../../components/colorscale"),n=i.hasColorscale,r=i.handleDefaults;B.exports=function(s,o,b,g){function d(w,h){return m.coerce(s,o,c,w,h)}var f=d("labels"),y=d("parents");if(!f||!f.length||!y||!y.length){o.visible=!1;return}var l=d("values");l&&l.length?d("branchvalues"):d("count"),d("level"),d("maxdepth"),d("tiling.orientation"),d("tiling.flip"),d("tiling.pad");var x=d("text");d("texttemplate"),o.texttemplate||d("textinfo",Array.isArray(x)?"text+label":"label"),d("hovertext"),d("hovertemplate");var u=d("pathbar.visible"),M="auto";e(s,o,g,d,M,{hasPathbar:u,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),d("textposition");var _=d("marker.line.width");_&&d("marker.line.color",g.paper_bgcolor),d("marker.colors");var p=o._hasColorscale=n(s,"marker","colors")||(s.marker||{}).coloraxis;p&&r(s,o,g,d,{prefix:"marker.",cLetter:"c"}),d("leaf.opacity",p?1:.7),o._hovered={marker:{line:{width:2,color:A.contrast(g.paper_bgcolor)}}},u&&(d("pathbar.thickness",o.pathbar.textfont.size+2*a),d("pathbar.side"),d("pathbar.edgeshape")),d("sort"),d("root.color"),T(o,g,d),o._length=null}},{"../../components/color":367,"../../components/colorscale":379,"../../lib":515,"../../plots/domain":593,"../bar/constants":659,"../bar/defaults":661,"./attributes":843}],847:[function(t,B,V){var m=t("@plotly/d3"),c=t("../../lib"),A=t("../../components/drawing"),T=t("../../lib/svg_text_utils"),e=t("./partition"),a=t("./style").styleOne,i=t("../treemap/constants"),n=t("../sunburst/helpers"),r=t("../sunburst/fx"),v=t("../sunburst/plot").formatSliceLabel,s=!1;B.exports=function(b,g,d,f,y){var l=y.width,x=y.height,u=y.viewX,M=y.viewY,_=y.pathSlice,p=y.toMoveInsideSlice,w=y.strTransform,h=y.hasTransition,L=y.handleSlicesExit,S=y.makeUpdateSliceInterpolator,E=y.makeUpdateTextInterpolator,P=y.prevEntry,F={},I=b._context.staticPlot,D=b._fullLayout,R=g[0],N=R.trace,z=N.textposition.indexOf("left")!==-1,G=N.textposition.indexOf("right")!==-1,Y=N.textposition.indexOf("bottom")!==-1,ee=e(d,[l,x],{flipX:N.tiling.flip.indexOf("x")>-1,flipY:N.tiling.flip.indexOf("y")>-1,orientation:N.tiling.orientation,pad:{inner:N.tiling.pad},maxDepth:N._maxDepth}),Z=ee.descendants(),X=1/0,ne=-1/0;Z.forEach(function(H){var q=H.depth;q>=N._maxDepth?(H.x0=H.x1=(H.x0+H.x1)/2,H.y0=H.y1=(H.y0+H.y1)/2):(X=Math.min(X,q),ne=Math.max(ne,q))}),f=f.data(Z,n.getPtId),N._maxVisibleLayers=isFinite(ne)?ne-X+1:0,f.enter().append("g").classed("slice",!0),L(f,s,F,[l,x],_),f.order();var ce=null;if(h&&P){var Q=n.getPtId(P);f.each(function(H){ce===null&&n.getPtId(H)===Q&&(ce={x0:H.x0,x1:H.x1,y0:H.y0,y1:H.y1})})}var K=function(){return ce||{x0:0,x1:l,y0:0,y1:x}},U=f;return h&&(U=U.transition().each("end",function(){var H=m.select(this);n.setSliceCursor(H,b,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),U.each(function(H){H._x0=u(H.x0),H._x1=u(H.x1),H._y0=M(H.y0),H._y1=M(H.y1),H._hoverX=u(H.x1-N.tiling.pad),H._hoverY=M(Y?H.y1-N.tiling.pad/2:H.y0+N.tiling.pad/2);var q=m.select(this),re=c.ensureSingle(q,"path","surface",function(oe){oe.style("pointer-events",I?"none":"all")});h?re.transition().attrTween("d",function(oe){var ae=S(oe,s,K(),[l,x],{orientation:N.tiling.orientation,flipX:N.tiling.flip.indexOf("x")>-1,flipY:N.tiling.flip.indexOf("y")>-1});return function(se){return _(ae(se))}}):re.attr("d",_),q.call(r,d,b,g,{styleOne:a,eventDataKeys:i.eventDataKeys,transitionTime:i.CLICK_TRANSITION_TIME,transitionEasing:i.CLICK_TRANSITION_EASING}).call(n.setSliceCursor,b,{isTransitioning:b._transitioning}),re.call(a,H,N,{hovered:!1}),H.x0===H.x1||H.y0===H.y1?H._text="":H._text=v(H,d,N,g,D)||"";var j=c.ensureSingle(q,"g","slicetext"),$=c.ensureSingle(j,"text","",function(oe){oe.attr("data-notex",1)}),ie=c.ensureUniformFontSize(b,n.determineTextFont(N,H,D.font));$.text(H._text||" ").classed("slicetext",!0).attr("text-anchor",G?"end":z?"start":"middle").call(A.font,ie).call(T.convertToTspans,b),H.textBB=A.bBox($.node()),H.transform=p(H,{fontSize:ie.size}),H.transform.fontSize=ie.size,h?$.transition().attrTween("transform",function(oe){var ae=E(oe,s,K(),[l,x]);return function(se){return w(ae(se))}}):$.attr("transform",w(H))}),ce}},{"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../sunburst/fx":1063,"../sunburst/helpers":1064,"../sunburst/plot":1068,"../treemap/constants":1087,"./partition":851,"./style":853,"@plotly/d3":58}],848:[function(t,B,V){B.exports={moduleType:"trace",name:"icicle",basePlotModule:t("./base_plot"),categories:[],animatable:!0,attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyDefaults:t("./defaults"),supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc").calc,crossTraceCalc:t("./calc").crossTraceCalc,plot:t("./plot"),style:t("./style").style,colorbar:t("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":954,"./attributes":843,"./base_plot":844,"./calc":845,"./defaults":846,"./layout_attributes":849,"./layout_defaults":850,"./plot":852,"./style":853}],849:[function(t,B,V){B.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],850:[function(t,B,V){var m=t("../../lib"),c=t("./layout_attributes");B.exports=function(T,e){function a(i,n){return m.coerce(T,e,c,i,n)}a("iciclecolorway",e.colorway),a("extendiciclecolors")}},{"../../lib":515,"./layout_attributes":849}],851:[function(t,B,V){var m=t("d3-hierarchy"),c=t("../treemap/flip_tree");B.exports=function(T,e,a){var i=a.flipX,n=a.flipY,r=a.orientation==="h",v=a.maxDepth,s=e[0],o=e[1];v&&(s=(T.height+1)*e[0]/Math.min(T.height+1,v),o=(T.height+1)*e[1]/Math.min(T.height+1,v));var b=m.partition().padding(a.pad.inner).size(r?[e[1],s]:[e[0],o])(T);return(r||i||n)&&c(b,e,{swapXY:r,flipX:i,flipY:n}),b}},{"../treemap/flip_tree":1092,"d3-hierarchy":115}],852:[function(t,B,V){var m=t("../treemap/draw"),c=t("./draw_descendants");B.exports=function(T,e,a,i){return m(T,e,a,i,{type:"icicle",drawDescendants:c})}},{"../treemap/draw":1089,"./draw_descendants":847}],853:[function(t,B,V){var m=t("@plotly/d3"),c=t("../../components/color"),A=t("../../lib"),T=t("../bar/uniform_text").resizeText;function e(i){var n=i._fullLayout._iciclelayer.selectAll(".trace");T(i,n,"icicle"),n.each(function(r){var v=m.select(this),s=r[0],o=s.trace;v.style("opacity",o.opacity),v.selectAll("path.surface").each(function(b){m.select(this).call(a,b,o)})})}function a(i,n,r){var v=n.data.data,s=!n.children,o=v.i,b=A.castOption(r,o,"marker.line.color")||c.defaultLine,g=A.castOption(r,o,"marker.line.width")||0;i.style("stroke-width",g).call(c.fill,v.color).call(c.stroke,b).style("opacity",s?r.leaf.opacity:null)}B.exports={style:e,styleOne:a}},{"../../components/color":367,"../../lib":515,"../bar/uniform_text":673,"@plotly/d3":58}],854:[function(t,B,V){for(var m=t("../../plots/attributes"),c=t("../../plots/template_attributes").hovertemplateAttrs,A=t("../../lib/extend").extendFlat,T=t("./constants").colormodel,e=["rgb","rgba","rgba256","hsl","hsla"],a=[],i=[],n=0;n<e.length;n++){var r=T[e[n]];a.push("For the `"+e[n]+"` colormodel, it is ["+(r.zminDflt||r.min).join(", ")+"]."),i.push("For the `"+e[n]+"` colormodel, it is ["+(r.zmaxDflt||r.max).join(", ")+"].")}B.exports=A({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:e,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:A({},m.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:c({},{keys:["z","color","colormodel"]}),transforms:void 0})},{"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"./constants":856}],855:[function(t,B,V){var m=t("../../lib"),c=t("./constants"),A=t("fast-isnumeric"),T=t("../../plots/cartesian/axes"),e=t("../../lib").maxRowLength,a=t("./helpers").getImageSize;B.exports=function(s,o){var b,g;if(o._hasZ)b=o.z.length,g=e(o.z);else if(o._hasSource){var d=a(o.source);b=d.height,g=d.width}var f=T.getFromId(s,o.xaxis||"x"),y=T.getFromId(s,o.yaxis||"y"),l=f.d2c(o.x0)-o.dx/2,x=y.d2c(o.y0)-o.dy/2,u,M=[l,l+g*o.dx],_=[x,x+b*o.dy];if(f&&f.type==="log")for(u=0;u<g;u++)M.push(l+u*o.dx);if(y&&y.type==="log")for(u=0;u<b;u++)_.push(x+u*o.dy);o._extremes[f._id]=T.findExtremes(f,M),o._extremes[y._id]=T.findExtremes(y,_),o._scaler=r(o);var p={x0:l,y0:x,z:o.z,w:g,h:b};return[p]};function i(v,s,o,b){return function(g){return m.constrain((g-v)*s,o,b)}}function n(v,s){return function(o){return m.constrain(o,v,s)}}function r(v){var s=c.colormodel[v.colormodel],o=s.colormodel||v.colormodel,b=o.length;v._sArray=[];for(var g=0;g<b;g++)s.min[g]!==v.zmin[g]||s.max[g]!==v.zmax[g]?v._sArray.push(i(v.zmin[g],(s.max[g]-s.min[g])/(v.zmax[g]-v.zmin[g]),s.min[g],s.max[g])):v._sArray.push(n(s.min[g],s.max[g]));return function(d){for(var f=d.slice(0,b),y=0;y<b;y++){var l=f[y];if(!A(l))return!1;f[y]=v._sArray[y](l)}return f}}},{"../../lib":515,"../../plots/cartesian/axes":566,"./constants":856,"./helpers":859,"fast-isnumeric":190}],856:[function(t,B,V){B.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(m){return m.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(m){return m.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(m){return m.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(m){var c=m.slice(0,3);return c[1]=c[1]+"%",c[2]=c[2]+"%",c},suffix:["\xB0","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(m){var c=m.slice(0,4);return c[1]=c[1]+"%",c[2]=c[2]+"%",c},suffix:["\xB0","%","%",""]}},pixelatedStyle:["image-rendering: optimizeSpeed","image-rendering: -moz-crisp-edges","image-rendering: -o-crisp-edges","image-rendering: -webkit-optimize-contrast","image-rendering: optimize-contrast","image-rendering: crisp-edges","image-rendering: pixelated",""].join("; ")}},{}],857:[function(t,B,V){var m=t("../../lib"),c=t("./attributes"),A=t("./constants"),T=t("../../snapshot/helpers").IMAGE_URL_PREFIX;B.exports=function(a,i){function n(s,o){return m.coerce(a,i,c,s,o)}n("source"),i.source&&!i.source.match(T)&&delete i.source,i._hasSource=!!i.source;var r=n("z");if(i._hasZ=!(r===void 0||!r.length||!r[0]||!r[0].length),!i._hasZ&&!i._hasSource){i.visible=!1;return}n("x0"),n("y0"),n("dx"),n("dy");var v;i._hasZ?(n("colormodel","rgb"),v=A.colormodel[i.colormodel],n("zmin",v.zminDflt||v.min),n("zmax",v.zmaxDflt||v.max)):i._hasSource&&(i.colormodel="rgba256",v=A.colormodel[i.colormodel],i.zmin=v.zminDflt,i.zmax=v.zmaxDflt),n("zsmooth"),n("text"),n("hovertext"),n("hovertemplate"),i._length=null}},{"../../lib":515,"../../snapshot/helpers":651,"./attributes":854,"./constants":856}],858:[function(t,B,V){B.exports=function(c,A){return"xVal"in A&&(c.x=A.xVal),"yVal"in A&&(c.y=A.yVal),A.xa&&(c.xaxis=A.xa),A.ya&&(c.yaxis=A.ya),c.color=A.color,c.colormodel=A.trace.colormodel,c.z||(c.z=A.color),c}},{}],859:[function(t,B,V){var m=t("probe-image-size/sync"),c=t("../../snapshot/helpers").IMAGE_URL_PREFIX,A=t("buffer/").Buffer;V.getImageSize=function(T){var e=T.replace(c,""),a=new A(e,"base64");return m(a)}},{"../../snapshot/helpers":651,"buffer/":85,"probe-image-size/sync":277}],860:[function(t,B,V){var m=t("../../components/fx"),c=t("../../lib"),A=t("./constants");B.exports=function(e,a,i){var n=e.cd[0],r=n.trace,v=e.xa,s=e.ya;if(!(m.inbox(a-n.x0,a-(n.x0+n.w*r.dx),0)>0||m.inbox(i-n.y0,i-(n.y0+n.h*r.dy),0)>0)){var o=Math.floor((a-n.x0)/r.dx),b=Math.floor(Math.abs(i-n.y0)/r.dy),g;if(r._hasZ?g=n.z[b][o]:r._hasSource&&(g=r._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(o,b,1,1).data),!!g){var d=n.hi||r.hoverinfo,f;if(d){var y=d.split("+");y.indexOf("all")!==-1&&(y=["color"]),y.indexOf("color")!==-1&&(f=!0)}var l=A.colormodel[r.colormodel],x=l.colormodel||r.colormodel,u=x.length,M=r._scaler(g),_=l.suffix,p=[];(r.hovertemplate||f)&&(p.push("["+[M[0]+_[0],M[1]+_[1],M[2]+_[2]].join(", ")),u===4&&p.push(", "+M[3]+_[3]),p.push("]"),p=p.join(""),e.extraText=x.toUpperCase()+": "+p);var w;Array.isArray(r.hovertext)&&Array.isArray(r.hovertext[b])?w=r.hovertext[b][o]:Array.isArray(r.text)&&Array.isArray(r.text[b])&&(w=r.text[b][o]);var h=s.c2p(n.y0+(b+.5)*r.dy),L=n.x0+(o+.5)*r.dx,S=n.y0+(b+.5)*r.dy,E="["+g.slice(0,r.colormodel.length).join(", ")+"]";return[c.extendFlat(e,{index:[b,o],x0:v.c2p(n.x0+o*r.dx),x1:v.c2p(n.x0+(o+1)*r.dx),y0:h,y1:h,color:M,xVal:L,xLabelVal:L,yVal:S,yLabelVal:S,zLabelVal:E,text:w,hovertemplateLabels:{zLabel:E,colorLabel:p,"color[0]Label":M[0]+_[0],"color[1]Label":M[1]+_[1],"color[2]Label":M[2]+_[2],"color[3]Label":M[3]+_[3]}})]}}}},{"../../components/fx":407,"../../lib":515,"./constants":856}],861:[function(t,B,V){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),calc:t("./calc"),plot:t("./plot"),style:t("./style"),hoverPoints:t("./hover"),eventData:t("./event_data"),moduleType:"trace",name:"image",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},{"../../plots/cartesian":578,"./attributes":854,"./calc":855,"./defaults":857,"./event_data":858,"./hover":860,"./plot":862,"./style":863}],862:[function(t,B,V){var m=t("@plotly/d3"),c=t("../../lib"),A=c.strTranslate,T=t("../../constants/xmlns_namespaces"),e=t("./constants"),a=c.isIOS()||c.isSafari()||c.isIE();B.exports=function(n,r,v,s){var o=r.xaxis,b=r.yaxis,g=!(a||n._context._exportedPlot);c.makeTraceGroups(s,v,"im").each(function(d){var f=m.select(this),y=d[0],l=y.trace,x=(l.zsmooth==="fast"||l.zsmooth===!1&&g)&&!l._hasZ&&l._hasSource&&o.type==="linear"&&b.type==="linear";l._realImage=x;var u=y.z,M=y.x0,_=y.y0,p=y.w,w=y.h,h=l.dx,L=l.dy,S,E,P,F,I,D;for(D=0;S===void 0&&D<p;)S=o.c2p(M+D*h),D++;for(D=p;E===void 0&&D>0;)E=o.c2p(M+D*h),D--;for(D=0;F===void 0&&D<w;)F=b.c2p(_+D*L),D++;for(D=w;I===void 0&&D>0;)I=b.c2p(_+D*L),D--;if(E<S&&(P=E,E=S,S=P),I<F&&(P=F,F=I,I=P),!x){var R=.5;S=Math.max(-R*o._length,S),E=Math.min((1+R)*o._length,E),F=Math.max(-R*b._length,F),I=Math.min((1+R)*b._length,I)}var N=Math.round(E-S),z=Math.round(I-F),G=N<=0||z<=0;if(G){var Y=f.selectAll("image").data([]);Y.exit().remove();return}function ee(re){var j=document.createElement("canvas");j.width=N,j.height=z;var $=j.getContext("2d",{willReadFrequently:!0}),ie=function(De){return c.constrain(Math.round(o.c2p(M+De*h)-S),0,N)},oe=function(De){return c.constrain(Math.round(b.c2p(_+De*L)-F),0,z)},ae=e.colormodel[l.colormodel],se=ae.colormodel||l.colormodel,_e=ae.fmt,ue;for(D=0;D<y.w;D++){var ye=ie(D),xe=ie(D+1);if(!(xe===ye||isNaN(xe)||isNaN(ye)))for(var me=0;me<y.h;me++){var be=oe(me),ke=oe(me+1);ke===be||isNaN(ke)||isNaN(be)||!re(D,me)||(ue=l._scaler(re(D,me)),ue?$.fillStyle=se+"("+_e(ue).join(",")+")":$.fillStyle="rgba(0,0,0,0)",$.fillRect(ye,be,xe-ye,ke-be))}}return j}var Z=f.selectAll("image").data([d]);Z.enter().append("svg:image").attr({xmlns:T.svg,preserveAspectRatio:"none"}),Z.exit().remove();var X=l.zsmooth===!1?e.pixelatedStyle:"";if(x){var ne=c.simpleMap(o.range,o.r2l),ce=c.simpleMap(b.range,b.r2l),Q=ne[1]<ne[0],K=ce[1]>ce[0];if(Q||K){var U=S+N/2,H=F+z/2;X+="transform:"+A(U+"px",H+"px")+"scale("+(Q?-1:1)+","+(K?-1:1)+")"+A(-U+"px",-H+"px")+";"}}Z.attr("style",X);var q=new Promise(function(re){if(l._hasZ)re();else if(l._hasSource)if(l._canvas&&l._canvas.el.width===p&&l._canvas.el.height===w&&l._canvas.source===l.source)re();else{var j=document.createElement("canvas");j.width=p,j.height=w;var $=j.getContext("2d",{willReadFrequently:!0});l._image=l._image||new Image;var ie=l._image;ie.onload=function(){$.drawImage(ie,0,0),l._canvas={el:j,source:l.source},re()},ie.setAttribute("src",l.source)}}).then(function(){var re,j;if(l._hasZ)j=ee(function(oe,ae){return u[ae][oe]}),re=j.toDataURL("image/png");else if(l._hasSource)if(x)re=l.source;else{var $=l._canvas.el.getContext("2d",{willReadFrequently:!0}),ie=$.getImageData(0,0,p,w).data;j=ee(function(oe,ae){var se=4*(ae*p+oe);return[ie[se],ie[se+1],ie[se+2],ie[se+3]]}),re=j.toDataURL("image/png")}Z.attr({"xlink:href":re,height:z,width:N,x:S,y:F})});n._promises.push(q)})}},{"../../constants/xmlns_namespaces":492,"../../lib":515,"./constants":856,"@plotly/d3":58}],863:[function(t,B,V){var m=t("@plotly/d3");B.exports=function(A){m.select(A).selectAll(".im image").style("opacity",function(T){return T[0].trace.opacity})}},{"@plotly/d3":58}],864:[function(t,B,V){var m=t("../../lib/extend").extendFlat,c=t("../../lib/extend").extendDeep,A=t("../../plot_api/edit_types").overrideAll,T=t("../../plots/font_attributes"),e=t("../../components/color/attributes"),a=t("../../plots/domain").attributes,i=t("../../plots/cartesian/layout_attributes"),n=t("../../plot_api/plot_template").templatedArray,r=t("../../constants/delta.js"),v=t("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,s=T({editType:"plot",colorEditType:"plot"}),o={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:e.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},b={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},g=n("step",c({},o,{range:b}));B.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:a({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:m({},s,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:v("value")},font:m({},s,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:v("value")},increasing:{symbol:{valType:"string",dflt:r.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:r.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:r.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:r.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:m({},s,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:c({},o,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:e.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:A({range:b,visible:m({},i.visible,{dflt:!0}),tickmode:i.tickmode,nticks:i.nticks,tick0:i.tick0,dtick:i.dtick,tickvals:i.tickvals,ticktext:i.ticktext,ticks:m({},i.ticks,{dflt:"outside"}),ticklen:i.ticklen,tickwidth:i.tickwidth,tickcolor:i.tickcolor,ticklabelstep:i.ticklabelstep,showticklabels:i.showticklabels,tickfont:T({}),tickangle:i.tickangle,tickformat:i.tickformat,tickformatstops:i.tickformatstops,tickprefix:i.tickprefix,showtickprefix:i.showtickprefix,ticksuffix:i.ticksuffix,showticksuffix:i.showticksuffix,separatethousands:i.separatethousands,exponentformat:i.exponentformat,minexponent:i.minexponent,showexponent:i.showexponent,editType:"plot"},"plot"),steps:g,threshold:{line:{color:m({},o.line.color,{}),width:m({},o.line.width,{dflt:1}),editType:"plot"},thickness:m({},o.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},{"../../components/color/attributes":366,"../../constants/delta.js":485,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../plots/cartesian/axis_format_attributes":569,"../../plots/cartesian/layout_attributes":579,"../../plots/domain":593,"../../plots/font_attributes":594}],865:[function(t,B,V){var m=t("../../plots/plots");V.name="indicator",V.plot=function(c,A,T,e){m.plotBasePlot(V.name,c,A,T,e)},V.clean=function(c,A,T,e){m.cleanBasePlot(V.name,c,A,T,e)}},{"../../plots/plots":628}],866:[function(t,B,V){function m(c,A){var T=[],e=A.value;typeof A._lastValue!="number"&&(A._lastValue=A.value);var a=A._lastValue,i=a;return A._hasDelta&&typeof A.delta.reference=="number"&&(i=A.delta.reference),T[0]={y:e,lastY:a,delta:e-i,relativeDelta:(e-i)/i},T}B.exports={calc:m}},{}],867:[function(t,B,V){B.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},{}],868:[function(t,B,V){var m=t("../../lib"),c=t("./attributes"),A=t("../../plots/domain").defaults,T=t("../../plot_api/plot_template"),e=t("../../plots/array_container_defaults"),a=t("./constants.js"),i=t("../../plots/cartesian/tick_value_defaults"),n=t("../../plots/cartesian/tick_mark_defaults"),r=t("../../plots/cartesian/tick_label_defaults"),v=t("../../plots/cartesian/prefix_suffix_defaults");function s(b,g,d,f){function y(D,R){return m.coerce(b,g,c,D,R)}A(g,f,y),y("mode"),g._hasNumber=g.mode.indexOf("number")!==-1,g._hasDelta=g.mode.indexOf("delta")!==-1,g._hasGauge=g.mode.indexOf("gauge")!==-1;var l=y("value");g._range=[0,typeof l=="number"?1.5*l:1];var x=new Array(2),u;g._hasNumber&&(y("number.valueformat"),y("number.font.color",f.font.color),y("number.font.family",f.font.family),y("number.font.size"),g.number.font.size===void 0&&(g.number.font.size=a.defaultNumberFontSize,x[0]=!0),y("number.prefix"),y("number.suffix"),u=g.number.font.size);var M;g._hasDelta&&(y("delta.font.color",f.font.color),y("delta.font.family",f.font.family),y("delta.font.size"),g.delta.font.size===void 0&&(g.delta.font.size=(g._hasNumber?.5:1)*(u||a.defaultNumberFontSize),x[1]=!0),y("delta.reference",g.value),y("delta.relative"),y("delta.valueformat",g.delta.relative?"2%":""),y("delta.increasing.symbol"),y("delta.increasing.color"),y("delta.decreasing.symbol"),y("delta.decreasing.color"),y("delta.position"),y("delta.prefix"),y("delta.suffix"),M=g.delta.font.size),g._scaleNumbers=(!g._hasNumber||x[0])&&(!g._hasDelta||x[1])||!1,y("title.font.color",f.font.color),y("title.font.family",f.font.family),y("title.font.size",.25*(u||M||a.defaultNumberFontSize)),y("title.text");var _,p,w,h;function L(D,R){return m.coerce(_,p,c.gauge,D,R)}function S(D,R){return m.coerce(w,h,c.gauge.axis,D,R)}if(g._hasGauge){_=b.gauge,_||(_={}),p=T.newContainer(g,"gauge"),L("shape");var E=g._isBullet=g.gauge.shape==="bullet";E||y("title.align","center");var P=g._isAngular=g.gauge.shape==="angular";P||y("align","center"),L("bgcolor",f.paper_bgcolor),L("borderwidth"),L("bordercolor"),L("bar.color"),L("bar.line.color"),L("bar.line.width");var F=a.valueThickness*(g.gauge.shape==="bullet"?.5:1);L("bar.thickness",F),e(_,p,{name:"steps",handleItemDefaults:o}),L("threshold.value"),L("threshold.thickness"),L("threshold.line.width"),L("threshold.line.color"),w={},_&&(w=_.axis||{}),h=T.newContainer(p,"axis"),S("visible"),g._range=S("range",g._range);var I={outerTicks:!0};i(w,h,S,"linear"),v(w,h,S,"linear",I),r(w,h,S,"linear",I),n(w,h,S,I)}else y("title.align","center"),y("align","center"),g._isAngular=g._isBullet=!1;g._length=null}function o(b,g){function d(f,y){return m.coerce(b,g,c.gauge.steps,f,y)}d("color"),d("line.color"),d("line.width"),d("range"),d("thickness")}B.exports={supplyDefaults:s}},{"../../lib":515,"../../plot_api/plot_template":555,"../../plots/array_container_defaults":561,"../../plots/cartesian/prefix_suffix_defaults":583,"../../plots/cartesian/tick_label_defaults":587,"../../plots/cartesian/tick_mark_defaults":588,"../../plots/cartesian/tick_value_defaults":589,"../../plots/domain":593,"./attributes":864,"./constants.js":867}],869:[function(t,B,V){B.exports={moduleType:"trace",name:"indicator",basePlotModule:t("./base_plot"),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:t("./attributes"),supplyDefaults:t("./defaults").supplyDefaults,calc:t("./calc").calc,plot:t("./plot"),meta:{}}},{"./attributes":864,"./base_plot":865,"./calc":866,"./defaults":868,"./plot":870}],870:[function(t,B,V){var m=t("@plotly/d3"),c=t("d3-interpolate").interpolate,A=t("d3-interpolate").interpolateNumber,T=t("../../lib"),e=T.strScale,a=T.strTranslate,i=T.rad2deg,n=t("../../constants/alignment").MID_SHIFT,r=t("../../components/drawing"),v=t("./constants"),s=t("../../lib/svg_text_utils"),o=t("../../plots/cartesian/axes"),b=t("../../plots/cartesian/axis_defaults"),g=t("../../plots/cartesian/position_defaults"),d=t("../../plots/cartesian/layout_attributes"),f=t("../../components/color"),y={left:"start",center:"middle",right:"end"},l={left:0,center:.5,right:1},x=/[yzafpnµmkMGTPEZY]/;function u(I){return I&&I.duration>0}B.exports=function(D,R,N,z){var G=D._fullLayout,Y;u(N)&&z&&(Y=z()),T.makeTraceGroups(G._indicatorlayer,R,"trace").each(function(ee){var Z=ee[0],X=Z.trace,ne=m.select(this),ce=X._hasGauge,Q=X._isAngular,K=X._isBullet,U=X.domain,H={w:G._size.w*(U.x[1]-U.x[0]),h:G._size.h*(U.y[1]-U.y[0]),l:G._size.l+G._size.w*U.x[0],r:G._size.r+G._size.w*(1-U.x[1]),t:G._size.t+G._size.h*(1-U.y[1]),b:G._size.b+G._size.h*U.y[0]},q=H.l+H.w/2,re=H.t+H.h/2,j=Math.min(H.w/2,H.h),$=v.innerRadius*j,ie,oe,ae,se=X.align||"center";if(oe=re,!ce)ie=H.l+l[se]*H.w,ae=function(Ae){return S(Ae,H.w,H.h)};else if(Q&&(ie=q,oe=re+j/2,ae=function(Ae){return E(Ae,.9*$)}),K){var _e=v.bulletPadding,ue=1-v.bulletNumberDomainSize+_e;ie=H.l+(ue+(1-ue)*l[se])*H.w,ae=function(Ae){return S(Ae,(v.bulletNumberDomainSize-_e)*H.w,H.h)}}p(D,ne,ee,{numbersX:ie,numbersY:oe,numbersScaler:ae,transitionOpts:N,onComplete:Y});var ye,xe;ce&&(ye={range:X.gauge.axis.range,color:X.gauge.bgcolor,line:{color:X.gauge.bordercolor,width:0},thickness:1},xe={range:X.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:X.gauge.bordercolor,width:X.gauge.borderwidth},thickness:1});var me=ne.selectAll("g.angular").data(Q?ee:[]);me.exit().remove();var be=ne.selectAll("g.angularaxis").data(Q?ee:[]);be.exit().remove(),Q&&_(D,ne,ee,{radius:j,innerRadius:$,gauge:me,layer:be,size:H,gaugeBg:ye,gaugeOutline:xe,transitionOpts:N,onComplete:Y});var ke=ne.selectAll("g.bullet").data(K?ee:[]);ke.exit().remove();var De=ne.selectAll("g.bulletaxis").data(K?ee:[]);De.exit().remove(),K&&M(D,ne,ee,{gauge:ke,layer:De,size:H,gaugeBg:ye,gaugeOutline:xe,transitionOpts:N,onComplete:Y});var Ve=ne.selectAll("text.title").data(ee);Ve.exit().remove(),Ve.enter().append("text").classed("title",!0),Ve.attr("text-anchor",function(){return K?y.right:y[X.title.align]}).text(X.title.text).call(r.font,X.title.font).call(s.convertToTspans,D),Ve.attr("transform",function(){var Ae=H.l+H.w*l[X.title.align],Le,je=v.titlePadding,Ye=r.bBox(Ve.node());if(ce){if(Q)if(X.gauge.axis.visible){var ze=r.bBox(be.node());Le=ze.top-je-Ye.bottom}else Le=H.t+H.h/2-j/2-Ye.bottom-je;K&&(Le=oe-(Ye.top+Ye.bottom)/2,Ae=H.l-v.bulletPadding*H.w)}else Le=X._numbersTop-je-Ye.bottom;return a(Ae,Le)})})};function M(I,D,R,N){var z=R[0].trace,G=N.gauge,Y=N.layer,ee=N.gaugeBg,Z=N.gaugeOutline,X=N.size,ne=z.domain,ce=N.transitionOpts,Q=N.onComplete,K,U,H,q,re;G.enter().append("g").classed("bullet",!0),G.attr("transform",a(X.l,X.t)),Y.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),Y.selectAll("g.xbulletaxistick,path,text").remove();var j=X.h,$=z.gauge.bar.thickness*j,ie=ne.x[0],oe=ne.x[0]+(ne.x[1]-ne.x[0])*(z._hasNumber||z._hasDelta?1-v.bulletNumberDomainSize:1);K=L(I,z.gauge.axis),K._id="xbulletaxis",K.domain=[ie,oe],K.setScale(),U=o.calcTicks(K),H=o.makeTransTickFn(K),q=o.getTickSigns(K)[2],re=X.t+X.h,K.visible&&(o.drawTicks(I,K,{vals:K.ticks==="inside"?o.clipEnds(K,U):U,layer:Y,path:o.makeTickPath(K,re,q),transFn:H}),o.drawLabels(I,K,{vals:U,layer:Y,transFn:H,labelFns:o.makeLabelFns(K,re)}));function ae(be){be.attr("width",function(ke){return Math.max(0,K.c2p(ke.range[1])-K.c2p(ke.range[0]))}).attr("x",function(ke){return K.c2p(ke.range[0])}).attr("y",function(ke){return .5*(1-ke.thickness)*j}).attr("height",function(ke){return ke.thickness*j})}var se=[ee].concat(z.gauge.steps),_e=G.selectAll("g.bg-bullet").data(se);_e.enter().append("g").classed("bg-bullet",!0).append("rect"),_e.select("rect").call(ae).call(w),_e.exit().remove();var ue=G.selectAll("g.value-bullet").data([z.gauge.bar]);ue.enter().append("g").classed("value-bullet",!0).append("rect"),ue.select("rect").attr("height",$).attr("y",(j-$)/2).call(w),u(ce)?ue.select("rect").transition().duration(ce.duration).ease(ce.easing).each("end",function(){Q&&Q()}).each("interrupt",function(){Q&&Q()}).attr("width",Math.max(0,K.c2p(Math.min(z.gauge.axis.range[1],R[0].y)))):ue.select("rect").attr("width",typeof R[0].y=="number"?Math.max(0,K.c2p(Math.min(z.gauge.axis.range[1],R[0].y))):0),ue.exit().remove();var ye=R.filter(function(){return z.gauge.threshold.value||z.gauge.threshold.value===0}),xe=G.selectAll("g.threshold-bullet").data(ye);xe.enter().append("g").classed("threshold-bullet",!0).append("line"),xe.select("line").attr("x1",K.c2p(z.gauge.threshold.value)).attr("x2",K.c2p(z.gauge.threshold.value)).attr("y1",(1-z.gauge.threshold.thickness)/2*j).attr("y2",(1-(1-z.gauge.threshold.thickness)/2)*j).call(f.stroke,z.gauge.threshold.line.color).style("stroke-width",z.gauge.threshold.line.width),xe.exit().remove();var me=G.selectAll("g.gauge-outline").data([Z]);me.enter().append("g").classed("gauge-outline",!0).append("rect"),me.select("rect").call(ae).call(w),me.exit().remove()}function _(I,D,R,N){var z=R[0].trace,G=N.size,Y=N.radius,ee=N.innerRadius,Z=N.gaugeBg,X=N.gaugeOutline,ne=[G.l+G.w/2,G.t+G.h/2+Y/2],ce=N.gauge,Q=N.layer,K=N.transitionOpts,U=N.onComplete,H=Math.PI/2;function q(Ie){var We=z.gauge.axis.range[0],pt=z.gauge.axis.range[1],Ft=(Ie-We)/(pt-We)*Math.PI-H;return Ft<-H?-H:Ft>H?H:Ft}function re(Ie){return m.svg.arc().innerRadius((ee+Y)/2-Ie/2*(Y-ee)).outerRadius((ee+Y)/2+Ie/2*(Y-ee)).startAngle(-H)}function j(Ie){Ie.attr("d",function(We){return re(We.thickness).startAngle(q(We.range[0])).endAngle(q(We.range[1]))()})}var $,ie,oe,ae;ce.enter().append("g").classed("angular",!0),ce.attr("transform",a(ne[0],ne[1])),Q.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),Q.selectAll("g.xangularaxistick,path,text").remove(),$=L(I,z.gauge.axis),$.type="linear",$.range=z.gauge.axis.range,$._id="xangularaxis",$.ticklabeloverflow="allow",$.setScale();var se=function(Ie){return($.range[0]-Ie.x)/($.range[1]-$.range[0])*Math.PI+Math.PI},_e={},ue=o.makeLabelFns($,0),ye=ue.labelStandoff;_e.xFn=function(Ie){var We=se(Ie);return Math.cos(We)*ye},_e.yFn=function(Ie){var We=se(Ie),pt=Math.sin(We)>0?.2:1;return-Math.sin(We)*(ye+Ie.fontSize*pt)+Math.abs(Math.cos(We))*(Ie.fontSize*n)},_e.anchorFn=function(Ie){var We=se(Ie),pt=Math.cos(We);return Math.abs(pt)<.1?"middle":pt>0?"start":"end"},_e.heightFn=function(Ie,We,pt){var Ft=se(Ie);return-.5*(1+Math.sin(Ft))*pt};var xe=function(Ie){return a(ne[0]+Y*Math.cos(Ie),ne[1]-Y*Math.sin(Ie))};oe=function(Ie){return xe(se(Ie))};var me=function(Ie){var We=se(Ie);return xe(We)+"rotate("+-i(We)+")"};if(ie=o.calcTicks($),ae=o.getTickSigns($)[2],$.visible){ae=$.ticks==="inside"?-1:1;var be=($.linewidth||1)/2;o.drawTicks(I,$,{vals:ie,layer:Q,path:"M"+ae*be+",0h"+ae*$.ticklen,transFn:me}),o.drawLabels(I,$,{vals:ie,layer:Q,transFn:oe,labelFns:_e})}var ke=[Z].concat(z.gauge.steps),De=ce.selectAll("g.bg-arc").data(ke);De.enter().append("g").classed("bg-arc",!0).append("path"),De.select("path").call(j).call(w),De.exit().remove();var Ve=re(z.gauge.bar.thickness),Ae=ce.selectAll("g.value-arc").data([z.gauge.bar]);Ae.enter().append("g").classed("value-arc",!0).append("path");var Le=Ae.select("path");u(K)?(Le.transition().duration(K.duration).ease(K.easing).each("end",function(){U&&U()}).each("interrupt",function(){U&&U()}).attrTween("d",h(Ve,q(R[0].lastY),q(R[0].y))),z._lastValue=R[0].y):Le.attr("d",typeof R[0].y=="number"?Ve.endAngle(q(R[0].y)):"M0,0Z"),Le.call(w),Ae.exit().remove(),ke=[];var je=z.gauge.threshold.value;(je||je===0)&&ke.push({range:[je,je],color:z.gauge.threshold.color,line:{color:z.gauge.threshold.line.color,width:z.gauge.threshold.line.width},thickness:z.gauge.threshold.thickness});var Ye=ce.selectAll("g.threshold-arc").data(ke);Ye.enter().append("g").classed("threshold-arc",!0).append("path"),Ye.select("path").call(j).call(w),Ye.exit().remove();var ze=ce.selectAll("g.gauge-outline").data([X]);ze.enter().append("g").classed("gauge-outline",!0).append("path"),ze.select("path").call(j).call(w),ze.exit().remove()}function p(I,D,R,N){var z=R[0].trace,G=N.numbersX,Y=N.numbersY,ee=z.align||"center",Z=y[ee],X=N.transitionOpts,ne=N.onComplete,ce=T.ensureSingle(D,"g","numbers"),Q,K,U,H=[];z._hasNumber&&H.push("number"),z._hasDelta&&(H.push("delta"),z.delta.position==="left"&&H.reverse());var q=ce.selectAll("text").data(H);q.enter().append("text"),q.attr("text-anchor",function(){return Z}).attr("class",function(xe){return xe}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),q.exit().remove();function re(xe,me,be,ke){if(xe.match("s")&&be>=0!=ke>=0&&!me(be).slice(-1).match(x)&&!me(ke).slice(-1).match(x)){var De=xe.slice().replace("s","f").replace(/\d+/,function(Ae){return parseInt(Ae)-1}),Ve=L(I,{tickformat:De});return function(Ae){return Math.abs(Ae)<1?o.tickText(Ve,Ae).text:me(Ae)}}else return me}function j(){var xe=L(I,{tickformat:z.number.valueformat},z._range);xe.setScale(),o.prepTicks(xe);var me=function(Ae){return o.tickText(xe,Ae).text},be=z.number.suffix,ke=z.number.prefix,De=ce.select("text.number");function Ve(){var Ae=typeof R[0].y=="number"?ke+me(R[0].y)+be:"-";De.text(Ae).call(r.font,z.number.font).call(s.convertToTspans,I)}return u(X)?De.transition().duration(X.duration).ease(X.easing).each("end",function(){Ve(),ne&&ne()}).each("interrupt",function(){Ve(),ne&&ne()}).attrTween("text",function(){var Ae=m.select(this),Le=A(R[0].lastY,R[0].y);z._lastValue=R[0].y;var je=re(z.number.valueformat,me,R[0].lastY,R[0].y);return function(Ye){Ae.text(ke+je(Le(Ye))+be)}}):Ve(),Q=P(ke+me(R[0].y)+be,z.number.font,Z,I),De}function $(){var xe=L(I,{tickformat:z.delta.valueformat},z._range);xe.setScale(),o.prepTicks(xe);var me=function(Ye){return o.tickText(xe,Ye).text},be=z.delta.suffix,ke=z.delta.prefix,De=function(Ye){var ze=z.delta.relative?Ye.relativeDelta:Ye.delta;return ze},Ve=function(Ye,ze){return Ye===0||typeof Ye!="number"||isNaN(Ye)?"-":(Ye>0?z.delta.increasing.symbol:z.delta.decreasing.symbol)+ke+ze(Ye)+be},Ae=function(Ye){return Ye.delta>=0?z.delta.increasing.color:z.delta.decreasing.color};z._deltaLastValue===void 0&&(z._deltaLastValue=De(R[0]));var Le=ce.select("text.delta");Le.call(r.font,z.delta.font).call(f.fill,Ae({delta:z._deltaLastValue}));function je(){Le.text(Ve(De(R[0]),me)).call(f.fill,Ae(R[0])).call(s.convertToTspans,I)}return u(X)?Le.transition().duration(X.duration).ease(X.easing).tween("text",function(){var Ye=m.select(this),ze=De(R[0]),Ie=z._deltaLastValue,We=re(z.delta.valueformat,me,Ie,ze),pt=A(Ie,ze);return z._deltaLastValue=ze,function(Ft){Ye.text(Ve(pt(Ft),We)),Ye.call(f.fill,Ae({delta:pt(Ft)}))}}).each("end",function(){je(),ne&&ne()}).each("interrupt",function(){je(),ne&&ne()}):je(),K=P(Ve(De(R[0]),me),z.delta.font,Z,I),Le}var ie=z.mode+z.align,oe;if(z._hasDelta&&(oe=$(),ie+=z.delta.position+z.delta.font.size+z.delta.font.family+z.delta.valueformat,ie+=z.delta.increasing.symbol+z.delta.decreasing.symbol,U=K),z._hasNumber&&(j(),ie+=z.number.font.size+z.number.font.family+z.number.valueformat+z.number.suffix+z.number.prefix,U=Q),z._hasDelta&&z._hasNumber){var ae=[(Q.left+Q.right)/2,(Q.top+Q.bottom)/2],se=[(K.left+K.right)/2,(K.top+K.bottom)/2],_e,ue,ye=.75*z.delta.font.size;z.delta.position==="left"&&(_e=F(z,"deltaPos",0,-1*(Q.width*l[z.align]+K.width*(1-l[z.align])+ye),ie,Math.min),ue=ae[1]-se[1],U={width:Q.width+K.width+ye,height:Math.max(Q.height,K.height),left:K.left+_e,right:Q.right,top:Math.min(Q.top,K.top+ue),bottom:Math.max(Q.bottom,K.bottom+ue)}),z.delta.position==="right"&&(_e=F(z,"deltaPos",0,Q.width*(1-l[z.align])+K.width*l[z.align]+ye,ie,Math.max),ue=ae[1]-se[1],U={width:Q.width+K.width+ye,height:Math.max(Q.height,K.height),left:Q.left,right:K.right+_e,top:Math.min(Q.top,K.top+ue),bottom:Math.max(Q.bottom,K.bottom+ue)}),z.delta.position==="bottom"&&(_e=null,ue=K.height,U={width:Math.max(Q.width,K.width),height:Q.height+K.height,left:Math.min(Q.left,K.left),right:Math.max(Q.right,K.right),top:Q.bottom-Q.height,bottom:Q.bottom+K.height}),z.delta.position==="top"&&(_e=null,ue=Q.top,U={width:Math.max(Q.width,K.width),height:Q.height+K.height,left:Math.min(Q.left,K.left),right:Math.max(Q.right,K.right),top:Q.bottom-Q.height-K.height,bottom:Q.bottom}),oe.attr({dx:_e,dy:ue})}(z._hasNumber||z._hasDelta)&&ce.attr("transform",function(){var xe=N.numbersScaler(U);ie+=xe[2];var me=F(z,"numbersScale",1,xe[0],ie,Math.min),be;z._scaleNumbers||(me=1),z._isAngular?be=Y-me*U.bottom:be=Y-me*(U.top+U.bottom)/2,z._numbersTop=me*U.top+be;var ke=U[ee];ee==="center"&&(ke=(U.left+U.right)/2);var De=G-me*ke;return De=F(z,"numbersTranslate",0,De,ie,Math.max),a(De,be)+e(me)})}function w(I){I.each(function(D){f.stroke(m.select(this),D.line.color)}).each(function(D){f.fill(m.select(this),D.color)}).style("stroke-width",function(D){return D.line.width})}function h(I,D,R){return function(){var N=c(D,R);return function(z){return I.endAngle(N(z))()}}}function L(I,D,R){var N=I._fullLayout,z=T.extendFlat({type:"linear",ticks:"outside",range:R,showline:!0},D),G={type:"linear",_id:"x"+D._id},Y={letter:"x",font:N.font,noHover:!0,noTickson:!0};function ee(Z,X){return T.coerce(z,G,d,Z,X)}return b(z,G,ee,Y,N),g(z,G,ee,Y),G}function S(I,D,R){var N=Math.min(D/I.width,R/I.height);return[N,I,D+"x"+R]}function E(I,D){var R=Math.sqrt(I.width/2*(I.width/2)+I.height*I.height),N=D/R;return[N,I,D]}function P(I,D,R,N){var z=document.createElementNS("http://www.w3.org/2000/svg","text"),G=m.select(z);return G.text(I).attr("x",0).attr("y",0).attr("text-anchor",R).attr("data-unformatted",I).call(s.convertToTspans,N).call(r.font,D),r.bBox(G.node())}function F(I,D,R,N,z,G){var Y="_cache"+D;I[Y]&&I[Y].key===z||(I[Y]={key:z,value:R});var ee=T.aggNums(G,null,[I[Y].value,N],2);return I[Y].value=ee,ee}},{"../../components/color":367,"../../components/drawing":389,"../../constants/alignment":483,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../plots/cartesian/axis_defaults":568,"../../plots/cartesian/layout_attributes":579,"../../plots/cartesian/position_defaults":582,"./constants":867,"@plotly/d3":58,"d3-interpolate":116}],871:[function(t,B,V){var m=t("../../components/colorscale/attributes"),c=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,A=t("../../plots/template_attributes").hovertemplateAttrs,T=t("../mesh3d/attributes"),e=t("../../plots/attributes"),a=t("../../lib/extend").extendFlat,i=t("../../plot_api/edit_types").overrideAll;function n(s){return{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}}function r(s){return{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}}var v=B.exports=i(a({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:n(),y:n(),z:n()},caps:{x:r(),y:r(),z:r()},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:A(),xhoverformat:c("x"),yhoverformat:c("y"),zhoverformat:c("z"),valuehoverformat:c("value",1),showlegend:a({},e.showlegend,{dflt:!1})},m("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:T.opacity,lightposition:T.lightposition,lighting:T.lighting,flatshading:T.flatshading,contour:T.contour,hoverinfo:a({},e.hoverinfo)}),"calc","nested");v.flatshading.dflt=!0,v.lighting.facenormalsepsilon.dflt=0,v.x.editType=v.y.editType=v.z.editType=v.value.editType="calc+clearAxisTypes",v.transforms=void 0},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../mesh3d/attributes":876}],872:[function(t,B,V){var m=t("../../components/colorscale/calc"),c=t("../streamtube/calc").processGrid,A=t("../streamtube/calc").filter;B.exports=function(e,a){a._len=Math.min(a.x.length,a.y.length,a.z.length,a.value.length),a._x=A(a.x,a._len),a._y=A(a.y,a._len),a._z=A(a.z,a._len),a._value=A(a.value,a._len);var i=c(a);a._gridFill=i.fill,a._Xs=i.Xs,a._Ys=i.Ys,a._Zs=i.Zs,a._len=i.len;for(var n=1/0,r=-1/0,v=0;v<a._len;v++){var s=a._value[v];n=Math.min(n,s),r=Math.max(r,s)}a._minValues=n,a._maxValues=r,a._vMin=a.isomin===void 0||a.isomin===null?n:a.isomin,a._vMax=a.isomax===void 0||a.isomin===null?r:a.isomax,m(e,a,{vals:[a._vMin,a._vMax],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":375,"../streamtube/calc":1054}],873:[function(t,B,V){var m=t("../../../stackgl_modules").gl_mesh3d,c=t("../../lib/gl_format_color").parseColorScale,A=t("../../lib/str2rgbarray"),T=t("../../components/colorscale").extractOpts,e=t("../../plots/gl3d/zip3"),a=function(o,b){for(var g=b.length-1;g>0;g--){var d=Math.min(b[g],b[g-1]),f=Math.max(b[g],b[g-1]);if(f>d&&d<o&&o<=f)return{id:g,distRatio:(f-o)/(f-d)}}return{id:0,distRatio:0}};function i(o,b,g){this.scene=o,this.uid=g,this.mesh=b,this.name="",this.data=null,this.showContour=!1}var n=i.prototype;n.handlePick=function(o){if(o.object===this.mesh){var b=o.data.index,g=this.data._meshX[b],d=this.data._meshY[b],f=this.data._meshZ[b],y=this.data._Ys.length,l=this.data._Zs.length,x=a(g,this.data._Xs).id,u=a(d,this.data._Ys).id,M=a(f,this.data._Zs).id,_=o.index=M+l*u+l*y*x;o.traceCoordinate=[this.data._meshX[_],this.data._meshY[_],this.data._meshZ[_],this.data._value[_]];var p=this.data.hovertext||this.data.text;return Array.isArray(p)&&p[_]!==void 0?o.textLabel=p[_]:p&&(o.textLabel=p),!0}},n.update=function(o){var b=this.scene,g=b.fullSceneLayout;this.data=v(o);function d(u,M,_,p){return M.map(function(w){return u.d2l(w,0,p)*_})}var f=e(d(g.xaxis,o._meshX,b.dataScale[0],o.xcalendar),d(g.yaxis,o._meshY,b.dataScale[1],o.ycalendar),d(g.zaxis,o._meshZ,b.dataScale[2],o.zcalendar)),y=e(o._meshI,o._meshJ,o._meshK),l={positions:f,cells:y,lightPosition:[o.lightposition.x,o.lightposition.y,o.lightposition.z],ambient:o.lighting.ambient,diffuse:o.lighting.diffuse,specular:o.lighting.specular,roughness:o.lighting.roughness,fresnel:o.lighting.fresnel,vertexNormalsEpsilon:o.lighting.vertexnormalsepsilon,faceNormalsEpsilon:o.lighting.facenormalsepsilon,opacity:o.opacity,contourEnable:o.contour.show,contourColor:A(o.contour.color).slice(0,3),contourWidth:o.contour.width,useFacetNormals:o.flatshading},x=T(o);l.vertexIntensity=o._meshIntensity,l.vertexIntensityBounds=[x.min,x.max],l.colormap=c(o),this.mesh.update(l)},n.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var r=["xyz","xzy","yxz","yzx","zxy","zyx"];function v(o){o._meshI=[],o._meshJ=[],o._meshK=[];var b=o.surface.show,g=o.spaceframe.show,d=o.surface.fill,f=o.spaceframe.fill,y=!1,l=!1,x=0,u,M,_=o._Xs,p=o._Ys,w=o._Zs,h=_.length,L=p.length,S=w.length,E=r.indexOf(o._gridFill.replace(/-/g,"").replace(/\+/g,"")),P=function(Nt,Ct,Xe){switch(E){case 5:return Xe+S*Ct+S*L*Nt;case 4:return Xe+S*Nt+S*h*Ct;case 3:return Ct+L*Xe+L*S*Nt;case 2:return Ct+L*Nt+L*h*Xe;case 1:return Nt+h*Xe+h*S*Ct;default:return Nt+h*Ct+h*L*Xe}},F=o._minValues,I=o._maxValues,D=o._vMin,R=o._vMax,N,z,G,Y;function ee(Nt,Ct,Xe){for(var at=Y.length,Ge=M;Ge<at;Ge++)if(Nt===N[Ge]&&Ct===z[Ge]&&Xe===G[Ge])return Ge;return-1}function Z(){M=u}function X(){N=[],z=[],G=[],Y=[],u=0,Z()}function ne(Nt,Ct,Xe,at){return N.push(Nt),z.push(Ct),G.push(Xe),Y.push(at),u++,u-1}function ce(Nt,Ct,Xe){return o._meshI.push(Nt),o._meshJ.push(Ct),o._meshK.push(Xe),x++,x-1}function Q(Nt,Ct,Xe){for(var at=[],Ge=0;Ge<Nt.length;Ge++)at[Ge]=(Nt[Ge]+Ct[Ge]+Xe[Ge])/3;return at}function K(Nt,Ct,Xe){for(var at=[],Ge=0;Ge<Nt.length;Ge++)at[Ge]=Nt[Ge]*(1-Xe)+Xe*Ct[Ge];return at}var U;function H(Nt){U=Nt}function q(Nt,Ct){var Xe=Nt[0],at=Nt[1],Ge=Nt[2],Se=Q(Xe,at,Ge),He=Math.sqrt(1-U),Ke=K(Se,Xe,He),qe=K(Se,at,He),Tt=K(Se,Ge,He),mt=Ct[0],At=Ct[1],Ht=Ct[2];return{xyzv:[[Xe,at,qe],[qe,Ke,Xe],[at,Ge,Tt],[Tt,qe,at],[Ge,Xe,Ke],[Ke,Tt,Ge]],abc:[[mt,At,-1],[-1,-1,mt],[At,Ht,-1],[-1,-1,At],[Ht,mt,-1],[-1,-1,Ht]]}}function re(Nt,Ct){return Nt==="all"||Nt===null?!0:Nt.indexOf(Ct)>-1}function j(Nt,Ct){return Nt===null?Ct:Nt}function $(Nt,Ct,Xe){Z();var at=[Ct],Ge=[Xe];if(U>=1)at=[Ct],Ge=[Xe];else if(U>0){var Se=q(Ct,Xe);at=Se.xyzv,Ge=Se.abc}for(var He=0;He<at.length;He++){Ct=at[He],Xe=Ge[He];for(var Ke=[],qe=0;qe<3;qe++){var Tt=Ct[qe][0],mt=Ct[qe][1],At=Ct[qe][2],Ht=Ct[qe][3],It=Xe[qe]>-1?Xe[qe]:ee(Tt,mt,At);It>-1?Ke[qe]=It:Ke[qe]=ne(Tt,mt,At,j(Nt,Ht))}ce(Ke[0],Ke[1],Ke[2])}}function ie(Nt,Ct,Xe){var at=function(Ge,Se,He){$(Nt,[Ct[Ge],Ct[Se],Ct[He]],[Xe[Ge],Xe[Se],Xe[He]])};at(0,1,2),at(2,3,0)}function oe(Nt,Ct,Xe){var at=function(Ge,Se,He){$(Nt,[Ct[Ge],Ct[Se],Ct[He]],[Xe[Ge],Xe[Se],Xe[He]])};at(0,1,2),at(3,0,1),at(2,3,0),at(1,2,3)}function ae(Nt,Ct,Xe,at){var Ge=Nt[3];Ge<Xe&&(Ge=Xe),Ge>at&&(Ge=at);for(var Se=(Nt[3]-Ge)/(Nt[3]-Ct[3]+1e-9),He=[],Ke=0;Ke<4;Ke++)He[Ke]=(1-Se)*Nt[Ke]+Se*Ct[Ke];return He}function se(Nt,Ct,Xe){return Nt>=Ct&&Nt<=Xe}function _e(Nt){var Ct=.001*(R-D);return Nt>=D-Ct&&Nt<=R+Ct}function ue(Nt){for(var Ct=[],Xe=0;Xe<4;Xe++){var at=Nt[Xe];Ct.push([o._x[at],o._y[at],o._z[at],o._value[at]])}return Ct}var ye=3;function xe(Nt,Ct,Xe,at,Ge,Se){Se||(Se=1),Xe=[-1,-1,-1];var He=!1,Ke=[se(Ct[0][3],at,Ge),se(Ct[1][3],at,Ge),se(Ct[2][3],at,Ge)];if(!Ke[0]&&!Ke[1]&&!Ke[2])return!1;var qe=function(mt,At,Ht){return _e(At[0][3])&&_e(At[1][3])&&_e(At[2][3])?($(mt,At,Ht),!0):Se<ye?xe(mt,At,Ht,D,R,++Se):!1};if(Ke[0]&&Ke[1]&&Ke[2])return qe(Nt,Ct,Xe)||He;var Tt=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(mt){if(Ke[mt[0]]&&Ke[mt[1]]&&!Ke[mt[2]]){var At=Ct[mt[0]],Ht=Ct[mt[1]],It=Ct[mt[2]],Vt=ae(It,At,at,Ge),jt=ae(It,Ht,at,Ge);He=qe(Nt,[jt,Vt,At],[-1,-1,Xe[mt[0]]])||He,He=qe(Nt,[At,Ht,jt],[Xe[mt[0]],Xe[mt[1]],-1])||He,Tt=!0}}),Tt||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(mt){if(Ke[mt[0]]&&!Ke[mt[1]]&&!Ke[mt[2]]){var At=Ct[mt[0]],Ht=Ct[mt[1]],It=Ct[mt[2]],Vt=ae(Ht,At,at,Ge),jt=ae(It,At,at,Ge);He=qe(Nt,[jt,Vt,At],[-1,-1,Xe[mt[0]]])||He,Tt=!0}}),He}function me(Nt,Ct,Xe,at){var Ge=!1,Se=ue(Ct),He=[se(Se[0][3],Xe,at),se(Se[1][3],Xe,at),se(Se[2][3],Xe,at),se(Se[3][3],Xe,at)];if(!He[0]&&!He[1]&&!He[2]&&!He[3])return Ge;if(He[0]&&He[1]&&He[2]&&He[3])return l&&(Ge=oe(Nt,Se,Ct)||Ge),Ge;var Ke=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(qe){if(He[qe[0]]&&He[qe[1]]&&He[qe[2]]&&!He[qe[3]]){var Tt=Se[qe[0]],mt=Se[qe[1]],At=Se[qe[2]],Ht=Se[qe[3]];if(l)Ge=$(Nt,[Tt,mt,At],[Ct[qe[0]],Ct[qe[1]],Ct[qe[2]]])||Ge;else{var It=ae(Ht,Tt,Xe,at),Vt=ae(Ht,mt,Xe,at),jt=ae(Ht,At,Xe,at);Ge=$(null,[It,Vt,jt],[-1,-1,-1])||Ge}Ke=!0}}),Ke||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(qe){if(He[qe[0]]&&He[qe[1]]&&!He[qe[2]]&&!He[qe[3]]){var Tt=Se[qe[0]],mt=Se[qe[1]],At=Se[qe[2]],Ht=Se[qe[3]],It=ae(At,Tt,Xe,at),Vt=ae(At,mt,Xe,at),jt=ae(Ht,mt,Xe,at),Yt=ae(Ht,Tt,Xe,at);l?(Ge=$(Nt,[Tt,Yt,It],[Ct[qe[0]],-1,-1])||Ge,Ge=$(Nt,[mt,Vt,jt],[Ct[qe[1]],-1,-1])||Ge):Ge=ie(null,[It,Vt,jt,Yt],[-1,-1,-1,-1])||Ge,Ke=!0}}),Ke)||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(qe){if(He[qe[0]]&&!He[qe[1]]&&!He[qe[2]]&&!He[qe[3]]){var Tt=Se[qe[0]],mt=Se[qe[1]],At=Se[qe[2]],Ht=Se[qe[3]],It=ae(mt,Tt,Xe,at),Vt=ae(At,Tt,Xe,at),jt=ae(Ht,Tt,Xe,at);l?(Ge=$(Nt,[Tt,It,Vt],[Ct[qe[0]],-1,-1])||Ge,Ge=$(Nt,[Tt,Vt,jt],[Ct[qe[0]],-1,-1])||Ge,Ge=$(Nt,[Tt,jt,It],[Ct[qe[0]],-1,-1])||Ge):Ge=$(null,[It,Vt,jt],[-1,-1,-1])||Ge,Ke=!0}}),Ge}function be(Nt,Ct,Xe,at,Ge,Se,He,Ke,qe,Tt,mt){var At=!1;return y&&(re(Nt,"A")&&(At=me(null,[Ct,Xe,at,Se],Tt,mt)||At),re(Nt,"B")&&(At=me(null,[Xe,at,Ge,qe],Tt,mt)||At),re(Nt,"C")&&(At=me(null,[Xe,Se,He,qe],Tt,mt)||At),re(Nt,"D")&&(At=me(null,[at,Se,Ke,qe],Tt,mt)||At),re(Nt,"E")&&(At=me(null,[Xe,at,Se,qe],Tt,mt)||At)),l&&(At=me(Nt,[Xe,at,Se,qe],Tt,mt)||At),At}function ke(Nt,Ct,Xe,at,Ge,Se,He,Ke){return[Ke[0]===!0?!0:xe(Nt,ue([Ct,Xe,at]),[Ct,Xe,at],Se,He),Ke[1]===!0?!0:xe(Nt,ue([at,Ge,Ct]),[at,Ge,Ct],Se,He)]}function De(Nt,Ct,Xe,at,Ge,Se,He,Ke,qe){return Ke?ke(Nt,Ct,Xe,Ge,at,Se,He,qe):ke(Nt,Xe,Ge,at,Ct,Se,He,qe)}function Ve(Nt,Ct,Xe,at,Ge,Se,He){var Ke=!1,qe,Tt,mt,At,Ht=function(){Ke=xe(Nt,[qe,Tt,mt],[-1,-1,-1],Ge,Se)||Ke,Ke=xe(Nt,[mt,At,qe],[-1,-1,-1],Ge,Se)||Ke},It=He[0],Vt=He[1],jt=He[2];return It&&(qe=K(ue([P(Ct,Xe-0,at-0)])[0],ue([P(Ct-1,Xe-0,at-0)])[0],It),Tt=K(ue([P(Ct,Xe-0,at-1)])[0],ue([P(Ct-1,Xe-0,at-1)])[0],It),mt=K(ue([P(Ct,Xe-1,at-1)])[0],ue([P(Ct-1,Xe-1,at-1)])[0],It),At=K(ue([P(Ct,Xe-1,at-0)])[0],ue([P(Ct-1,Xe-1,at-0)])[0],It),Ht()),Vt&&(qe=K(ue([P(Ct-0,Xe,at-0)])[0],ue([P(Ct-0,Xe-1,at-0)])[0],Vt),Tt=K(ue([P(Ct-0,Xe,at-1)])[0],ue([P(Ct-0,Xe-1,at-1)])[0],Vt),mt=K(ue([P(Ct-1,Xe,at-1)])[0],ue([P(Ct-1,Xe-1,at-1)])[0],Vt),At=K(ue([P(Ct-1,Xe,at-0)])[0],ue([P(Ct-1,Xe-1,at-0)])[0],Vt),Ht()),jt&&(qe=K(ue([P(Ct-0,Xe-0,at)])[0],ue([P(Ct-0,Xe-0,at-1)])[0],jt),Tt=K(ue([P(Ct-0,Xe-1,at)])[0],ue([P(Ct-0,Xe-1,at-1)])[0],jt),mt=K(ue([P(Ct-1,Xe-1,at)])[0],ue([P(Ct-1,Xe-1,at-1)])[0],jt),At=K(ue([P(Ct-1,Xe-0,at)])[0],ue([P(Ct-1,Xe-0,at-1)])[0],jt),Ht()),Ke}function Ae(Nt,Ct,Xe,at,Ge,Se,He,Ke,qe,Tt,mt,At){var Ht=Nt;return At?(y&&Nt==="even"&&(Ht=null),be(Ht,Ct,Xe,at,Ge,Se,He,Ke,qe,Tt,mt)):(y&&Nt==="odd"&&(Ht=null),be(Ht,qe,Ke,He,Se,Ge,at,Xe,Ct,Tt,mt))}function Le(Nt,Ct,Xe,at,Ge){for(var Se=[],He=0,Ke=0;Ke<Ct.length;Ke++)for(var qe=Ct[Ke],Tt=1;Tt<S;Tt++)for(var mt=1;mt<L;mt++)Se.push(De(Nt,P(qe,mt-1,Tt-1),P(qe,mt-1,Tt),P(qe,mt,Tt-1),P(qe,mt,Tt),Xe,at,(qe+mt+Tt)%2,Ge&&Ge[He]?Ge[He]:[])),He++;return Se}function je(Nt,Ct,Xe,at,Ge){for(var Se=[],He=0,Ke=0;Ke<Ct.length;Ke++)for(var qe=Ct[Ke],Tt=1;Tt<h;Tt++)for(var mt=1;mt<S;mt++)Se.push(De(Nt,P(Tt-1,qe,mt-1),P(Tt,qe,mt-1),P(Tt-1,qe,mt),P(Tt,qe,mt),Xe,at,(Tt+qe+mt)%2,Ge&&Ge[He]?Ge[He]:[])),He++;return Se}function Ye(Nt,Ct,Xe,at,Ge){for(var Se=[],He=0,Ke=0;Ke<Ct.length;Ke++)for(var qe=Ct[Ke],Tt=1;Tt<L;Tt++)for(var mt=1;mt<h;mt++)Se.push(De(Nt,P(mt-1,Tt-1,qe),P(mt-1,Tt,qe),P(mt,Tt-1,qe),P(mt,Tt,qe),Xe,at,(mt+Tt+qe)%2,Ge&&Ge[He]?Ge[He]:[])),He++;return Se}function ze(Nt,Ct,Xe){for(var at=1;at<S;at++)for(var Ge=1;Ge<L;Ge++)for(var Se=1;Se<h;Se++)Ae(Nt,P(Se-1,Ge-1,at-1),P(Se-1,Ge-1,at),P(Se-1,Ge,at-1),P(Se-1,Ge,at),P(Se,Ge-1,at-1),P(Se,Ge-1,at),P(Se,Ge,at-1),P(Se,Ge,at),Ct,Xe,(Se+Ge+at)%2)}function Ie(Nt,Ct,Xe){l=!0,ze(Nt,Ct,Xe),l=!1}function We(Nt,Ct,Xe){y=!0,ze(Nt,Ct,Xe),y=!1}function pt(Nt,Ct,Xe,at,Ge,Se){for(var He=[],Ke=0,qe=0;qe<Ct.length;qe++)for(var Tt=Ct[qe],mt=1;mt<S;mt++)for(var At=1;At<L;At++)He.push(Ve(Nt,Tt,At,mt,Xe,at,Ge[qe],Se&&Se[Ke]?Se[Ke]:[])),Ke++;return He}function Ft(Nt,Ct,Xe,at,Ge,Se){for(var He=[],Ke=0,qe=0;qe<Ct.length;qe++)for(var Tt=Ct[qe],mt=1;mt<h;mt++)for(var At=1;At<S;At++)He.push(Ve(Nt,mt,Tt,At,Xe,at,Ge[qe],Se&&Se[Ke]?Se[Ke]:[])),Ke++;return He}function Qt(Nt,Ct,Xe,at,Ge,Se){for(var He=[],Ke=0,qe=0;qe<Ct.length;qe++)for(var Tt=Ct[qe],mt=1;mt<L;mt++)for(var At=1;At<h;At++)He.push(Ve(Nt,At,mt,Tt,Xe,at,Ge[qe],Se&&Se[Ke]?Se[Ke]:[])),Ke++;return He}function zt(Nt,Ct){for(var Xe=[],at=Nt;at<Ct;at++)Xe.push(at);return Xe}function Et(){for(var Nt=0;Nt<h;Nt++)for(var Ct=0;Ct<L;Ct++)for(var Xe=0;Xe<S;Xe++){var at=P(Nt,Ct,Xe);ne(o._x[at],o._y[at],o._z[at],o._value[at])}}function Xt(){X(),Et();var Nt=null;if(g&&f&&(H(f),Ie(Nt,D,R)),b&&d){H(d);for(var Ct=o.surface.pattern,Xe=o.surface.count,at=0;at<Xe;at++){var Ge=Xe===1?.5:at/(Xe-1),Se=(1-Ge)*D+Ge*R,He=Math.abs(Se-F),Ke=Math.abs(Se-I),qe=He>Ke?[F,Se]:[Se,I];We(Ct,qe[0],qe[1])}}var Tt=[[Math.min(D,I),Math.max(D,I)],[Math.min(F,R),Math.max(F,R)]];["x","y","z"].forEach(function(mt){for(var At=[],Ht=0;Ht<Tt.length;Ht++){var It=0,Vt=Tt[Ht][0],jt=Tt[Ht][1],Yt=o.slices[mt];if(Yt.show&&Yt.fill){H(Yt.fill);var or=[],Gr=[],on=[];if(Yt.locations.length)for(var Jr=0;Jr<Yt.locations.length;Jr++){var ot=a(Yt.locations[Jr],mt==="x"?_:mt==="y"?p:w);ot.distRatio===0?or.push(ot.id):ot.id>0&&(Gr.push(ot.id),mt==="x"?on.push([ot.distRatio,0,0]):mt==="y"?on.push([0,ot.distRatio,0]):on.push([0,0,ot.distRatio]))}else mt==="x"?or=zt(1,h-1):mt==="y"?or=zt(1,L-1):or=zt(1,S-1);Gr.length>0&&(mt==="x"?At[It]=pt(Nt,Gr,Vt,jt,on,At[It]):mt==="y"?At[It]=Ft(Nt,Gr,Vt,jt,on,At[It]):At[It]=Qt(Nt,Gr,Vt,jt,on,At[It]),It++),or.length>0&&(mt==="x"?At[It]=Le(Nt,or,Vt,jt,At[It]):mt==="y"?At[It]=je(Nt,or,Vt,jt,At[It]):At[It]=Ye(Nt,or,Vt,jt,At[It]),It++)}var er=o.caps[mt];er.show&&er.fill&&(H(er.fill),mt==="x"?At[It]=Le(Nt,[0,h-1],Vt,jt,At[It]):mt==="y"?At[It]=je(Nt,[0,L-1],Vt,jt,At[It]):At[It]=Ye(Nt,[0,S-1],Vt,jt,At[It]),It++)}}),x===0&&X(),o._meshX=N,o._meshY=z,o._meshZ=G,o._meshIntensity=Y,o._Xs=_,o._Ys=p,o._Zs=w}return Xt(),o}function s(o,b){var g=o.glplot.gl,d=m({gl:g}),f=new i(o,d,b.uid);return d._trace=f,f.update(b),o.glplot.add(d),f}B.exports={findNearestOnAxis:a,generateIsoMeshes:v,createIsosurfaceTrace:s}},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib/gl_format_color":511,"../../lib/str2rgbarray":540,"../../plots/gl3d/zip3":618}],874:[function(t,B,V){var m=t("../../lib"),c=t("../../registry"),A=t("./attributes"),T=t("../../components/colorscale/defaults");function e(i,n,r,v){function s(o,b){return m.coerce(i,n,A,o,b)}a(i,n,r,v,s)}function a(i,n,r,v,s){var o=s("isomin"),b=s("isomax");b!=null&&o!==void 0&&o!==null&&o>b&&(n.isomin=null,n.isomax=null);var g=s("x"),d=s("y"),f=s("z"),y=s("value");if(!g||!g.length||!d||!d.length||!f||!f.length||!y||!y.length){n.visible=!1;return}var l=c.getComponentMethod("calendars","handleTraceDefaults");l(i,n,["x","y","z"],v),s("valuehoverformat"),["x","y","z"].forEach(function(_){s(_+"hoverformat");var p="caps."+_,w=s(p+".show");w&&s(p+".fill");var h="slices."+_,L=s(h+".show");L&&(s(h+".fill"),s(h+".locations"))});var x=s("spaceframe.show");x&&s("spaceframe.fill");var u=s("surface.show");u&&(s("surface.count"),s("surface.fill"),s("surface.pattern"));var M=s("contour.show");M&&(s("contour.color"),s("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(_){s(_)}),T(i,n,v,s,{prefix:"",cLetter:"c"}),n._length=null}B.exports={supplyDefaults:e,supplyIsoDefaults:a}},{"../../components/colorscale/defaults":377,"../../lib":515,"../../registry":647,"./attributes":871}],875:[function(t,B,V){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults").supplyDefaults,calc:t("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:t("./convert").createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:t("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":607,"./attributes":871,"./calc":872,"./convert":873,"./defaults":874}],876:[function(t,B,V){var m=t("../../components/colorscale/attributes"),c=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,A=t("../../plots/template_attributes").hovertemplateAttrs,T=t("../surface/attributes"),e=t("../../plots/attributes"),a=t("../../lib/extend").extendFlat;B.exports=a({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:A({editType:"calc"}),xhoverformat:c("x"),yhoverformat:c("y"),zhoverformat:c("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},m("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:T.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:a({},T.contours.x.show,{}),color:T.contours.x.color,width:T.contours.x.width,editType:"calc"},lightposition:{x:a({},T.lightposition.x,{dflt:1e5}),y:a({},T.lightposition.y,{dflt:1e5}),z:a({},T.lightposition.z,{dflt:0}),editType:"calc"},lighting:a({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},T.lighting),hoverinfo:a({},e.hoverinfo,{editType:"calc"}),showlegend:a({},e.showlegend,{dflt:!1})})},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../surface/attributes":1070}],877:[function(t,B,V){var m=t("../../components/colorscale/calc");B.exports=function(A,T){T.intensity&&m(A,T,{vals:T.intensity,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":375}],878:[function(t,B,V){var m=t("../../../stackgl_modules").gl_mesh3d,c=t("../../../stackgl_modules").delaunay_triangulate,A=t("../../../stackgl_modules").alpha_shape,T=t("../../../stackgl_modules").convex_hull,e=t("../../lib/gl_format_color").parseColorScale,a=t("../../lib/str2rgbarray"),i=t("../../components/colorscale").extractOpts,n=t("../../plots/gl3d/zip3");function r(y,l,x){this.scene=y,this.uid=x,this.mesh=l,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var v=r.prototype;v.handlePick=function(y){if(y.object===this.mesh){var l=y.index=y.data.index;y.data._cellCenter?y.traceCoordinate=y.data.dataCoordinate:y.traceCoordinate=[this.data.x[l],this.data.y[l],this.data.z[l]];var x=this.data.hovertext||this.data.text;return Array.isArray(x)&&x[l]!==void 0?y.textLabel=x[l]:x&&(y.textLabel=x),!0}};function s(y){for(var l=[],x=y.length,u=0;u<x;u++)l[u]=a(y[u]);return l}function o(y,l,x,u){for(var M=[],_=l.length,p=0;p<_;p++)M[p]=y.d2l(l[p],0,u)*x;return M}function b(y){for(var l=[],x=y.length,u=0;u<x;u++)l[u]=Math.round(y[u]);return l}function g(y,l){for(var x=["x","y","z"].indexOf(y),u=[],M=l.length,_=0;_<M;_++)u[_]=[l[_][(x+1)%3],l[_][(x+2)%3]];return c(u)}function d(y,l){for(var x=y.length,u=0;u<x;u++)if(y[u]<=-.5||y[u]>=l-.5)return!1;return!0}v.update=function(y){var l=this.scene,x=l.fullSceneLayout;this.data=y;var u=y.x.length,M=n(o(x.xaxis,y.x,l.dataScale[0],y.xcalendar),o(x.yaxis,y.y,l.dataScale[1],y.ycalendar),o(x.zaxis,y.z,l.dataScale[2],y.zcalendar)),_;if(y.i&&y.j&&y.k){if(y.i.length!==y.j.length||y.j.length!==y.k.length||!d(y.i,u)||!d(y.j,u)||!d(y.k,u))return;_=n(b(y.i),b(y.j),b(y.k))}else y.alphahull===0?_=T(M):y.alphahull>0?_=A(y.alphahull,M):_=g(y.delaunayaxis,M);var p={positions:M,cells:_,lightPosition:[y.lightposition.x,y.lightposition.y,y.lightposition.z],ambient:y.lighting.ambient,diffuse:y.lighting.diffuse,specular:y.lighting.specular,roughness:y.lighting.roughness,fresnel:y.lighting.fresnel,vertexNormalsEpsilon:y.lighting.vertexnormalsepsilon,faceNormalsEpsilon:y.lighting.facenormalsepsilon,opacity:y.opacity,contourEnable:y.contour.show,contourColor:a(y.contour.color).slice(0,3),contourWidth:y.contour.width,useFacetNormals:y.flatshading};if(y.intensity){var w=i(y);this.color="#fff";var h=y.intensitymode;p[h+"Intensity"]=y.intensity,p[h+"IntensityBounds"]=[w.min,w.max],p.colormap=e(y)}else y.vertexcolor?(this.color=y.vertexcolor[0],p.vertexColors=s(y.vertexcolor)):y.facecolor?(this.color=y.facecolor[0],p.cellColors=s(y.facecolor)):(this.color=y.color,p.meshColor=a(y.color));this.mesh.update(p)},v.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function f(y,l){var x=y.glplot.gl,u=m({gl:x}),M=new r(y,u,l.uid);return u._trace=M,M.update(l),y.glplot.add(u),M}B.exports=f},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib/gl_format_color":511,"../../lib/str2rgbarray":540,"../../plots/gl3d/zip3":618}],879:[function(t,B,V){var m=t("../../registry"),c=t("../../lib"),A=t("../../components/colorscale/defaults"),T=t("./attributes");B.exports=function(a,i,n,r){function v(d,f){return c.coerce(a,i,T,d,f)}function s(d){var f=d.map(function(y){var l=v(y);return l&&c.isArrayOrTypedArray(l)?l:null});return f.every(function(y){return y&&y.length===f[0].length})&&f}var o=s(["x","y","z"]);if(!o){i.visible=!1;return}if(s(["i","j","k"]),i.i&&(!i.j||!i.k)||i.j&&(!i.k||!i.i)||i.k&&(!i.i||!i.j)){i.visible=!1;return}var b=m.getComponentMethod("calendars","handleTraceDefaults");b(a,i,["x","y","z"],r),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(d){v(d)});var g=v("contour.show");g&&(v("contour.color"),v("contour.width")),"intensity"in a?(v("intensity"),v("intensitymode"),A(a,i,r,v,{prefix:"",cLetter:"c"})):(i.showscale=!1,"facecolor"in a?v("facecolor"):"vertexcolor"in a?v("vertexcolor"):v("color",n)),v("text"),v("hovertext"),v("hovertemplate"),v("xhoverformat"),v("yhoverformat"),v("zhoverformat"),i._length=null}},{"../../components/colorscale/defaults":377,"../../lib":515,"../../registry":647,"./attributes":876}],880:[function(t,B,V){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),calc:t("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:t("./convert"),moduleType:"trace",name:"mesh3d",basePlotModule:t("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":607,"./attributes":876,"./calc":877,"./convert":878,"./defaults":879}],881:[function(t,B,V){var m=t("../../lib").extendFlat,c=t("../scatter/attributes"),A=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,T=t("../../components/drawing/attributes").dash,e=t("../../components/fx/attributes"),a=t("../../constants/delta.js"),i=a.INCREASING.COLOR,n=a.DECREASING.COLOR,r=c.line;function v(s){return{line:{color:m({},r.color,{dflt:s}),width:r.width,dash:T,editType:"style"},editType:"style"}}B.exports={xperiod:c.xperiod,xperiod0:c.xperiod0,xperiodalignment:c.xperiodalignment,xhoverformat:A("x"),yhoverformat:A("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:m({},r.width,{}),dash:m({},T,{}),editType:"style"},increasing:v(i),decreasing:v(n),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:m({},e.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}})}},{"../../components/drawing/attributes":388,"../../components/fx/attributes":398,"../../constants/delta.js":485,"../../lib":515,"../../plots/cartesian/axis_format_attributes":569,"../scatter/attributes":936}],882:[function(t,B,V){var m=t("../../lib"),c=m._,A=t("../../plots/cartesian/axes"),T=t("../../plots/cartesian/align_period"),e=t("../../constants/numerical").BADNUM;function a(v,s){var o=A.getFromId(v,s.xaxis),b=A.getFromId(v,s.yaxis),g=r(v,o,s),d=s._minDiff;s._minDiff=null;var f=s._origX;s._origX=null;var y=s._xcalc;s._xcalc=null;var l=n(v,s,f,y,b,i);return s._extremes[o._id]=A.findExtremes(o,y,{vpad:d/2}),l.length?(m.extendFlat(l[0].t,{wHover:d/2,tickLen:g}),l):[{t:{empty:!0}}]}function i(v,s,o,b){return{o:v,h:s,l:o,c:b}}function n(v,s,o,b,g,d){for(var f=g.makeCalcdata(s,"open"),y=g.makeCalcdata(s,"high"),l=g.makeCalcdata(s,"low"),x=g.makeCalcdata(s,"close"),u=Array.isArray(s.text),M=Array.isArray(s.hovertext),_=!0,p=null,w=!!s.xperiodalignment,h=[],L=0;L<b.length;L++){var S=b[L],E=f[L],P=y[L],F=l[L],I=x[L];if(S!==e&&E!==e&&P!==e&&F!==e&&I!==e){I===E?p!==null&&I!==p&&(_=I>p):_=I>E,p=I;var D=d(E,P,F,I);D.pos=S,D.yc=(E+I)/2,D.i=L,D.dir=_?"increasing":"decreasing",D.x=D.pos,D.y=[F,P],w&&(D.orig_p=o[L]),u&&(D.tx=s.text[L]),M&&(D.htx=s.hovertext[L]),h.push(D)}else h.push({pos:S,empty:!0})}return s._extremes[g._id]=A.findExtremes(g,m.concat(l,y),{padded:!0}),h.length&&(h[0].t={labels:{open:c(v,"open:")+" ",high:c(v,"high:")+" ",low:c(v,"low:")+" ",close:c(v,"close:")+" "}}),h}function r(v,s,o){var b=o._minDiff;if(!b){var g=v._fullData,d=[];b=1/0;var f;for(f=0;f<g.length;f++){var y=g[f];if(y.type==="ohlc"&&y.visible===!0&&y.xaxis===s._id){d.push(y);var l=s.makeCalcdata(y,"x");y._origX=l;var x=T(o,s,"x",l).vals;y._xcalc=x;var u=m.distinctVals(x).minDiff;u&&isFinite(u)&&(b=Math.min(b,u))}}for(b===1/0&&(b=1),f=0;f<d.length;f++)d[f]._minDiff=b}return b*o.tickwidth}B.exports={calc:a,calcCommon:n}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566}],883:[function(t,B,V){var m=t("../../lib"),c=t("./ohlc_defaults"),A=t("../scatter/period_defaults"),T=t("./attributes");B.exports=function(i,n,r,v){function s(b,g){return m.coerce(i,n,T,b,g)}var o=c(i,n,s,v);if(!o){n.visible=!1;return}A(i,n,v,s,{x:!0}),s("xhoverformat"),s("yhoverformat"),s("line.width"),s("line.dash"),e(i,n,s,"increasing"),e(i,n,s,"decreasing"),s("text"),s("hovertext"),s("tickwidth"),v._requestRangeslider[n.xaxis]=!0};function e(a,i,n,r){n(r+".line.color"),n(r+".line.width",i.line.width),n(r+".line.dash",i.line.dash)}},{"../../lib":515,"../scatter/period_defaults":956,"./attributes":881,"./ohlc_defaults":886}],884:[function(t,B,V){var m=t("../../plots/cartesian/axes"),c=t("../../lib"),A=t("../../components/fx"),T=t("../../components/color"),e=t("../../lib").fillText,a=t("../../constants/delta.js"),i={increasing:a.INCREASING.SYMBOL,decreasing:a.DECREASING.SYMBOL};function n(o,b,g,d){var f=o.cd,y=f[0].trace;return y.hoverlabel.split?v(o,b,g,d):s(o,b,g,d)}function r(o,b,g,d){var f=o.cd,y=o.xa,l=f[0].trace,x=f[0].t,u=l.type,M=u==="ohlc"?"l":"min",_=u==="ohlc"?"h":"max",p,w,h=x.bPos||0,L=function(ee){return ee.pos+h-b},S=x.bdPos||x.tickLen,E=x.wHover,P=Math.min(1,S/Math.abs(y.r2c(y.range[1])-y.r2c(y.range[0])));p=o.maxHoverDistance-P,w=o.maxSpikeDistance-P;function F(ee){var Z=L(ee);return A.inbox(Z-E,Z+E,p)}function I(ee){var Z=ee[M],X=ee[_];return Z===X||A.inbox(Z-g,X-g,p)}function D(ee){return(F(ee)+I(ee))/2}var R=A.getDistanceFunction(d,F,I,D);if(A.getClosest(f,R,o),o.index===!1)return null;var N=f[o.index];if(N.empty)return null;var z=N.dir,G=l[z],Y=G.line.color;return T.opacity(Y)&&G.line.width?o.color=Y:o.color=G.fillcolor,o.x0=y.c2p(N.pos+h-S,!0),o.x1=y.c2p(N.pos+h+S,!0),o.xLabelVal=N.orig_p!==void 0?N.orig_p:N.pos,o.spikeDistance=D(N)*w/p,o.xSpike=y.c2p(N.pos,!0),o}function v(o,b,g,d){var f=o.cd,y=o.ya,l=f[0].trace,x=f[0].t,u=[],M=r(o,b,g,d);if(!M)return[];var _=M.index,p=f[_],w=p.hi||l.hoverinfo,h=w.split("+"),L=w==="all",S=L||h.indexOf("y")!==-1;if(!S)return[];for(var E=["high","open","close","low"],P={},F=0;F<E.length;F++){var I=E[F],D=l[I][M.index],R=y.c2p(D,!0),N;D in P?(N=P[D],N.yLabel+="<br>"+x.labels[I]+m.hoverLabelText(y,D,l.yhoverformat)):(N=c.extendFlat({},M),N.y0=N.y1=R,N.yLabelVal=D,N.yLabel=x.labels[I]+m.hoverLabelText(y,D,l.yhoverformat),N.name="",u.push(N),P[D]=N)}return u}function s(o,b,g,d){var f=o.cd,y=o.ya,l=f[0].trace,x=f[0].t,u=r(o,b,g,d);if(!u)return[];var M=u.index,_=f[M],p=u.index=_.i,w=_.dir;function h(D){return x.labels[D]+m.hoverLabelText(y,l[D][p],l.yhoverformat)}var L=_.hi||l.hoverinfo,S=L.split("+"),E=L==="all",P=E||S.indexOf("y")!==-1,F=E||S.indexOf("text")!==-1,I=P?[h("open"),h("high"),h("low"),h("close")+"  "+i[w]]:[];return F&&e(_,l,I),u.extraText=I.join("<br>"),u.y0=u.y1=y.c2p(_.yc,!0),[u]}B.exports={hoverPoints:n,hoverSplit:v,hoverOnPoints:s}},{"../../components/color":367,"../../components/fx":407,"../../constants/delta.js":485,"../../lib":515,"../../plots/cartesian/axes":566}],885:[function(t,B,V){B.exports={moduleType:"trace",name:"ohlc",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","showLegend"],meta:{},attributes:t("./attributes"),supplyDefaults:t("./defaults"),calc:t("./calc").calc,plot:t("./plot"),style:t("./style"),hoverPoints:t("./hover").hoverPoints,selectPoints:t("./select")}},{"../../plots/cartesian":578,"./attributes":881,"./calc":882,"./defaults":883,"./hover":884,"./plot":887,"./select":888,"./style":889}],886:[function(t,B,V){var m=t("../../registry"),c=t("../../lib");B.exports=function(T,e,a,i){var n=a("x"),r=a("open"),v=a("high"),s=a("low"),o=a("close");a("hoverlabel.split");var b=m.getComponentMethod("calendars","handleTraceDefaults");if(b(T,e,["x"],i),!!(r&&v&&s&&o)){var g=Math.min(r.length,v.length,s.length,o.length);return n&&(g=Math.min(g,c.minRowLength(n))),e._length=g,g}}},{"../../lib":515,"../../registry":647}],887:[function(t,B,V){var m=t("@plotly/d3"),c=t("../../lib");B.exports=function(T,e,a,i){var n=e.yaxis,r=e.xaxis,v=!!r.rangebreaks;c.makeTraceGroups(i,a,"trace ohlc").each(function(s){var o=m.select(this),b=s[0],g=b.t,d=b.trace;if(d.visible!==!0||g.empty){o.remove();return}var f=g.tickLen,y=o.selectAll("path").data(c.identity);y.enter().append("path"),y.exit().remove(),y.attr("d",function(l){if(l.empty)return"M0,0Z";var x=r.c2p(l.pos-f,!0),u=r.c2p(l.pos+f,!0),M=v?(x+u)/2:r.c2p(l.pos,!0),_=n.c2p(l.o,!0),p=n.c2p(l.h,!0),w=n.c2p(l.l,!0),h=n.c2p(l.c,!0);return"M"+x+","+_+"H"+M+"M"+M+","+p+"V"+w+"M"+u+","+h+"H"+M})})}},{"../../lib":515,"@plotly/d3":58}],888:[function(t,B,V){B.exports=function(c,A){var T=c.cd,e=c.xaxis,a=c.yaxis,i=[],n,r=T[0].t.bPos||0;if(A===!1)for(n=0;n<T.length;n++)T[n].selected=0;else for(n=0;n<T.length;n++){var v=T[n];A.contains([e.c2p(v.pos+r),a.c2p(v.yc)],null,v.i,c)?(i.push({pointNumber:v.i,x:e.c2d(v.pos),y:a.c2d(v.yc)}),v.selected=1):v.selected=0}return i}},{}],889:[function(t,B,V){var m=t("@plotly/d3"),c=t("../../components/drawing"),A=t("../../components/color");B.exports=function(e,a,i){var n=i||m.select(e).selectAll("g.ohlclayer").selectAll("g.trace");n.style("opacity",function(r){return r[0].trace.opacity}),n.each(function(r){var v=r[0].trace;m.select(this).selectAll("path").each(function(s){if(!s.empty){var o=v[s.dir].line;m.select(this).style("fill","none").call(A.stroke,o.color).call(c.dashLine,o.dash,o.width).style("opacity",v.selectedpoints&&!s.selected?.3:1)}})})}},{"../../components/color":367,"../../components/drawing":389,"@plotly/d3":58}],890:[function(t,B,V){var m=t("../../lib/extend").extendFlat,c=t("../../plots/attributes"),A=t("../../plots/font_attributes"),T=t("../../components/colorscale/attributes"),e=t("../../plots/template_attributes").hovertemplateAttrs,a=t("../../plots/domain").attributes,i=m({editType:"calc"},T("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:e({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});B.exports={domain:a({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:m({},c.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:e({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:A({editType:"calc"}),tickfont:A({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:i,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/domain":593,"../../plots/font_attributes":594,"../../plots/template_attributes":642}],891:[function(t,B,V){var m=t("../../plots/get_data").getModuleCalcData,c=t("./plot"),A="parcats";V.name=A,V.plot=function(T,e,a,i){var n=m(T.calcdata,A);if(n.length){var r=n[0];c(T,r,a,i)}},V.clean=function(T,e,a,i){var n=i._has&&i._has("parcats"),r=e._has&&e._has("parcats");n&&!r&&i._paperdiv.selectAll(".parcats").remove()}},{"../../plots/get_data":602,"./plot":896}],892:[function(t,B,V){var m=t("../../lib/gup").wrap,c=t("../../components/colorscale/helpers").hasColorscale,A=t("../../components/colorscale/calc"),T=t("../../lib/filter_unique.js"),e=t("../../components/drawing"),a=t("../../lib"),i=t("fast-isnumeric");B.exports=function(x,u){var M=a.filterVisible(u.dimensions);if(M.length===0)return[];var _=M.map(function(Q){var K;if(Q.categoryorder==="trace")K=null;else if(Q.categoryorder==="array")K=Q.categoryarray;else{K=T(Q.values);for(var U=!0,H=0;H<K.length;H++)if(!i(K[H])){U=!1;break}K.sort(U?a.sorterAsc:void 0),Q.categoryorder==="category descending"&&(K=K.reverse())}return g(Q.values,K)}),p,w,h;a.isArrayOrTypedArray(u.counts)?p=u.counts:p=[u.counts],d(M),M.forEach(function(Q,K){f(Q,_[K])});var L=u.line,S;L?(c(u,"line")&&A(x,u,{vals:u.line.color,containerStr:"line",cLetter:"c"}),S=e.tryColorscale(L)):S=a.identity;function E(Q){var K,U;return a.isArrayOrTypedArray(L.color)?(K=L.color[Q%L.color.length],U=K):K=L.color,{color:S(K),rawColor:U}}var P=M[0].values.length,F={},I=_.map(function(Q){return Q.inds});h=0;var D,R;for(D=0;D<P;D++){var N=[];for(R=0;R<I.length;R++)N.push(I[R][D]);w=p[D%p.length],h+=w;var z=E(D),G=N+"-"+z.rawColor;F[G]===void 0&&(F[G]=o(N,z.color,z.rawColor)),b(F[G],D,w)}var Y=M.map(function(Q,K){return r(K,Q._index,Q._displayindex,Q.label,h)});for(D=0;D<P;D++)for(w=p[D%p.length],R=0;R<Y.length;R++){var ee=Y[R].containerInd,Z=_[R].inds[D],X=Y[R].categories;if(X[Z]===void 0){var ne=u.dimensions[ee]._categoryarray[Z],ce=u.dimensions[ee]._ticktext[Z];X[Z]=v(R,Z,ne,ce)}s(X[Z],D,w)}return m(n(Y,F,h))};function n(l,x,u){var M=l.map(function(_){return _.categories.length}).reduce(function(_,p){return Math.max(_,p)});return{dimensions:l,paths:x,trace:void 0,maxCats:M,count:u}}function r(l,x,u,M,_){return{dimensionInd:l,containerInd:x,displayInd:u,dimensionLabel:M,count:_,categories:[],dragX:null}}function v(l,x,u,M){return{dimensionInd:l,categoryInd:x,categoryValue:u,displayInd:x,categoryLabel:M,valueInds:[],count:0,dragY:null}}function s(l,x,u){l.valueInds.push(x),l.count+=u}function o(l,x,u){return{categoryInds:l,color:x,rawColor:u,valueInds:[],count:0}}function b(l,x,u){l.valueInds.push(x),l.count+=u}function g(l,x){x==null?x=[]:x=x.map(function(S){return S});var u={},M={},_=[];x.forEach(function(S,E){u[S]=0,M[S]=E});for(var p=0;p<l.length;p++){var w=l[p],h;u[w]===void 0?(u[w]=1,h=x.push(w)-1,M[w]=h):(u[w]++,h=M[w]),_.push(h)}var L=x.map(function(S){return u[S]});return{uniqueValues:x,uniqueCounts:L,inds:_}}function d(l){var x=l.map(function(M){return M.displayindex}),u;if(y(x))for(u=0;u<l.length;u++)l[u]._displayindex=l[u].displayindex;else for(u=0;u<l.length;u++)l[u]._displayindex=u}function f(l,x){l._categoryarray=x.uniqueValues,l.ticktext===null||l.ticktext===void 0?l._ticktext=[]:l._ticktext=l.ticktext.slice();for(var u=l._ticktext.length;u<x.uniqueValues.length;u++)l._ticktext.push(x.uniqueValues[u])}function y(l){for(var x=new Array(l.length),u=0;u<l.length;u++){if(l[u]<0||l[u]>=l.length||x[l[u]]!==void 0)return!1;x[l[u]]=!0}return!0}},{"../../components/colorscale/calc":375,"../../components/colorscale/helpers":378,"../../components/drawing":389,"../../lib":515,"../../lib/filter_unique.js":506,"../../lib/gup":512,"fast-isnumeric":190}],893:[function(t,B,V){var m=t("../../lib"),c=t("../../components/colorscale/helpers").hasColorscale,A=t("../../components/colorscale/defaults"),T=t("../../plots/domain").defaults,e=t("../../plots/array_container_defaults"),a=t("./attributes"),i=t("../parcoords/merge_length");function n(v,s,o,b,g){g("line.shape"),g("line.hovertemplate");var d=g("line.color",b.colorway[0]);if(c(v,"line")&&m.isArrayOrTypedArray(d)){if(d.length)return g("line.colorscale"),A(v,s,b,g,{prefix:"line.",cLetter:"c"}),d.length;s.line.color=o}return 1/0}function r(v,s){function o(x,u){return m.coerce(v,s,a.dimensions,x,u)}var b=o("values"),g=o("visible");if(b&&b.length||(g=s.visible=!1),g){o("label"),o("displayindex",s._index);var d=v.categoryarray,f=Array.isArray(d)&&d.length>0,y;f&&(y="array");var l=o("categoryorder",y);l==="array"?(o("categoryarray"),o("ticktext")):(delete v.categoryarray,delete v.ticktext),!f&&l==="array"&&(s.categoryorder="trace")}}B.exports=function(s,o,b,g){function d(u,M){return m.coerce(s,o,a,u,M)}var f=e(s,o,{name:"dimensions",handleItemDefaults:r}),y=n(s,o,b,g,d);T(o,g,d),(!Array.isArray(f)||!f.length)&&(o.visible=!1),i(o,f,"values",y),d("hoveron"),d("hovertemplate"),d("arrangement"),d("bundlecolors"),d("sortpaths"),d("counts");var l={family:g.font.family,size:Math.round(g.font.size),color:g.font.color};m.coerceFont(d,"labelfont",l);var x={family:g.font.family,size:Math.round(g.font.size/1.2),color:g.font.color};m.coerceFont(d,"tickfont",x)}},{"../../components/colorscale/defaults":377,"../../components/colorscale/helpers":378,"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/domain":593,"../parcoords/merge_length":907,"./attributes":890}],894:[function(t,B,V){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),calc:t("./calc"),plot:t("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:t("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":890,"./base_plot":891,"./calc":892,"./defaults":893,"./plot":896}],895:[function(t,B,V){var m=t("@plotly/d3"),c=t("d3-interpolate").interpolateNumber,A=t("../../plot_api/plot_api"),T=t("../../components/fx"),e=t("../../lib"),a=e.strTranslate,i=t("../../components/drawing"),n=t("tinycolor2"),r=t("../../lib/svg_text_utils");function v(H,q,re,j){var $=q._context.staticPlot,ie=H.map(ne.bind(0,q,re)),oe=j.selectAll("g.parcatslayer").data([null]);oe.enter().append("g").attr("class","parcatslayer").style("pointer-events",$?"none":"all");var ae=oe.selectAll("g.trace.parcats").data(ie,s),se=ae.enter().append("g").attr("class","trace parcats");ae.attr("transform",function(Le){return a(Le.x,Le.y)}),se.append("g").attr("class","paths");var _e=ae.select("g.paths"),ue=_e.selectAll("path.path").data(function(Le){return Le.paths},s);ue.attr("fill",function(Le){return Le.model.color});var ye=ue.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(Le){return Le.model.color}).attr("fill-opacity",0);x(ye),ue.attr("d",function(Le){return Le.svgD}),ye.empty()||ue.sort(b),ue.exit().remove(),ue.on("mouseover",g).on("mouseout",d).on("click",l),se.append("g").attr("class","dimensions");var xe=ae.select("g.dimensions"),me=xe.selectAll("g.dimension").data(function(Le){return Le.dimensions},s);me.enter().append("g").attr("class","dimension"),me.attr("transform",function(Le){return a(Le.x,0)}),me.exit().remove();var be=me.selectAll("g.category").data(function(Le){return Le.categories},s),ke=be.enter().append("g").attr("class","category");be.attr("transform",function(Le){return a(0,Le.y)}),ke.append("rect").attr("class","catrect").attr("pointer-events","none"),be.select("rect.catrect").attr("fill","none").attr("width",function(Le){return Le.width}).attr("height",function(Le){return Le.height}),_(ke);var De=be.selectAll("rect.bandrect").data(function(Le){return Le.bands},s);De.each(function(){e.raiseToTop(this)}),De.attr("fill",function(Le){return Le.color});var Ve=De.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(Le){return Le.color}).attr("fill-opacity",0);De.attr("fill",function(Le){return Le.color}).attr("width",function(Le){return Le.width}).attr("height",function(Le){return Le.height}).attr("y",function(Le){return Le.y}).attr("cursor",function(Le){return Le.parcatsViewModel.arrangement==="fixed"?"default":Le.parcatsViewModel.arrangement==="perpendicular"?"ns-resize":"move"}),w(Ve),De.exit().remove(),ke.append("text").attr("class","catlabel").attr("pointer-events","none");var Ae=q._fullLayout.paper_bgcolor;be.select("text.catlabel").attr("text-anchor",function(Le){return o(Le)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",r.makeTextShadow(Ae)).style("fill","rgb(0, 0, 0)").attr("x",function(Le){return o(Le)?Le.width+5:-5}).attr("y",function(Le){return Le.height/2}).text(function(Le){return Le.model.categoryLabel}).each(function(Le){i.font(m.select(this),Le.parcatsViewModel.categorylabelfont),r.convertToTspans(m.select(this),q)}),ke.append("text").attr("class","dimlabel"),be.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(Le){return Le.parcatsViewModel.arrangement==="fixed"?"default":"ew-resize"}).attr("x",function(Le){return Le.width/2}).attr("y",-5).text(function(Le,je){return je===0?Le.parcatsViewModel.model.dimensions[Le.model.dimensionInd].dimensionLabel:null}).each(function(Le){i.font(m.select(this),Le.parcatsViewModel.labelfont)}),be.selectAll("rect.bandrect").on("mouseover",R).on("mouseout",N),be.exit().remove(),me.call(m.behavior.drag().origin(function(Le){return{x:Le.x,y:0}}).on("dragstart",z).on("drag",G).on("dragend",Y)),ae.each(function(Le){Le.traceSelection=m.select(this),Le.pathSelection=m.select(this).selectAll("g.paths").selectAll("path.path"),Le.dimensionSelection=m.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),ae.exit().remove()}B.exports=function(H,q,re,j){v(re,H,j,q)};function s(H){return H.key}function o(H){var q=H.parcatsViewModel.dimensions.length,re=H.parcatsViewModel.dimensions[q-1].model.dimensionInd;return H.model.dimensionInd===re}function b(H,q){return H.model.rawColor>q.model.rawColor?1:H.model.rawColor<q.model.rawColor?-1:0}function g(H){if(!H.parcatsViewModel.dragDimension&&H.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){e.raiseToTop(this),u(m.select(this));var q=f(H),re=y(H);if(H.parcatsViewModel.graphDiv.emit("plotly_hover",{points:q,event:m.event,constraints:re}),H.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var j=m.mouse(this)[0],$=H.parcatsViewModel.graphDiv,ie=H.parcatsViewModel.trace,oe=$._fullLayout,ae=oe._paperdiv.node().getBoundingClientRect(),se=H.parcatsViewModel.graphDiv.getBoundingClientRect(),_e,ue,ye;for(ye=0;ye<H.leftXs.length-1;ye++)if(H.leftXs[ye]+H.dimWidths[ye]-2<=j&&j<=H.leftXs[ye+1]+2){var xe=H.parcatsViewModel.dimensions[ye],me=H.parcatsViewModel.dimensions[ye+1];_e=(xe.x+xe.width+me.x)/2,ue=(H.topYs[ye]+H.topYs[ye+1]+H.height)/2;break}var be=H.parcatsViewModel.x+_e,ke=H.parcatsViewModel.y+ue,De=n.mostReadable(H.model.color,["black","white"]),Ve=H.model.count,Ae=Ve/H.parcatsViewModel.model.count,Le={countLabel:Ve,probabilityLabel:Ae.toFixed(3)},je=[];H.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&je.push(["Count:",Le.countLabel].join(" ")),H.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&je.push(["P:",Le.probabilityLabel].join(" "));var Ye=je.join("<br>"),ze=m.mouse($)[0];T.loneHover({trace:ie,x:be-ae.left+se.left,y:ke-ae.top+se.top,text:Ye,color:H.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:De,idealAlign:ze<be?"right":"left",hovertemplate:(ie.line||{}).hovertemplate,hovertemplateLabels:Le,eventData:[{data:ie._input,fullData:ie,count:Ve,probability:Ae}]},{container:oe._hoverlayer.node(),outerContainer:oe._paper.node(),gd:$})}}}function d(H){if(!H.parcatsViewModel.dragDimension&&(x(m.select(this)),T.loneUnhover(H.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),H.parcatsViewModel.pathSelection.sort(b),H.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1)){var q=f(H),re=y(H);H.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:q,event:m.event,constraints:re})}}function f(H){for(var q=[],re=ee(H.parcatsViewModel),j=0;j<H.model.valueInds.length;j++){var $=H.model.valueInds[j];q.push({curveNumber:re,pointNumber:$})}return q}function y(H){for(var q={},re=H.parcatsViewModel.model.dimensions,j=0;j<re.length;j++){var $=re[j],ie=$.categories[H.model.categoryInds[j]];q[$.containerInd]=ie.categoryValue}return H.model.rawColor!==void 0&&(q.color=H.model.rawColor),q}function l(H){if(H.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var q=f(H),re=y(H);H.parcatsViewModel.graphDiv.emit("plotly_click",{points:q,event:m.event,constraints:re})}}function x(H){H.attr("fill",function(q){return q.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function u(H){H.attr("fill-opacity",.8).attr("stroke",function(q){return n.mostReadable(q.model.color,["black","white"])}).attr("stroke-width",.3)}function M(H){H.select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}function _(H){H.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function p(H){H.attr("stroke","black").attr("stroke-width",1.5)}function w(H){H.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function h(H){var q=H.parcatsViewModel.pathSelection,re=H.categoryViewModel.model.dimensionInd,j=H.categoryViewModel.model.categoryInd;return q.filter(function($){return $.model.categoryInds[re]===j&&$.model.color===H.color})}function L(H){var q=m.select(H.parentNode).selectAll("rect.bandrect");q.each(function(re){var j=h(re);u(j),j.each(function(){e.raiseToTop(this)})}),M(m.select(H.parentNode))}function S(H){var q=m.select(H).datum(),re=h(q);u(re),re.each(function(){e.raiseToTop(this)}),m.select(H.parentNode).selectAll("rect.bandrect").filter(function(j){return j.color===q.color}).each(function(){e.raiseToTop(this),p(m.select(this))})}function E(H,q,re){var j=m.select(H).datum(),$=j.categoryViewModel.model,ie=j.parcatsViewModel.graphDiv,oe=m.select(H.parentNode).selectAll("rect.bandrect"),ae=[];oe.each(function(_e){var ue=h(_e);ue.each(function(ye){Array.prototype.push.apply(ae,f(ye))})});var se={};se[$.dimensionInd]=$.categoryValue,ie.emit(q,{points:ae,event:re,constraints:se})}function P(H,q,re){var j=m.select(H).datum(),$=j.categoryViewModel.model,ie=j.parcatsViewModel.graphDiv,oe=h(j),ae=[];oe.each(function(_e){Array.prototype.push.apply(ae,f(_e))});var se={};se[$.dimensionInd]=$.categoryValue,j.rawColor!==void 0&&(se.color=j.rawColor),ie.emit(q,{points:ae,event:re,constraints:se})}function F(H,q,re){H._fullLayout._calcInverseTransform(H);var j=H._fullLayout._invScaleX,$=H._fullLayout._invScaleY,ie=m.select(re.parentNode).select("rect.catrect"),oe=ie.node().getBoundingClientRect(),ae=ie.datum(),se=ae.parcatsViewModel,_e=se.model.dimensions[ae.model.dimensionInd],ue=se.trace,ye=oe.top+oe.height/2,xe,me;se.dimensions.length>1&&_e.displayInd===se.dimensions.length-1?(xe=oe.left,me="left"):(xe=oe.left+oe.width,me="right");var be=ae.model.count,ke=ae.model.categoryLabel,De=be/ae.parcatsViewModel.model.count,Ve={countLabel:be,categoryLabel:ke,probabilityLabel:De.toFixed(3)},Ae=[];ae.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Ae.push(["Count:",Ve.countLabel].join(" ")),ae.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&Ae.push(["P("+Ve.categoryLabel+"):",Ve.probabilityLabel].join(" "));var Le=Ae.join("<br>");return{trace:ue,x:j*(xe-q.left),y:$*(ye-q.top),text:Le,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:me,hovertemplate:ue.hovertemplate,hovertemplateLabels:Ve,eventData:[{data:ue._input,fullData:ue,count:be,category:ke,probability:De}]}}function I(H,q,re){var j=[];return m.select(re.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){var $=this;j.push(F(H,q,$))}),j}function D(H,q,re){H._fullLayout._calcInverseTransform(H);var j=H._fullLayout._invScaleX,$=H._fullLayout._invScaleY,ie=re.getBoundingClientRect(),oe=m.select(re).datum(),ae=oe.categoryViewModel,se=ae.parcatsViewModel,_e=se.model.dimensions[ae.model.dimensionInd],ue=se.trace,ye=ie.y+ie.height/2,xe,me;se.dimensions.length>1&&_e.displayInd===se.dimensions.length-1?(xe=ie.left,me="left"):(xe=ie.left+ie.width,me="right");var be=ae.model.categoryLabel,ke=oe.parcatsViewModel.model.count,De=0;oe.categoryViewModel.bands.forEach(function(Ft){Ft.color===oe.color&&(De+=Ft.count)});var Ve=ae.model.count,Ae=0;se.pathSelection.each(function(Ft){Ft.model.color===oe.color&&(Ae+=Ft.model.count)});var Le=De/ke,je=De/Ae,Ye=De/Ve,ze={countLabel:ke,categoryLabel:be,probabilityLabel:Le.toFixed(3)},Ie=[];ae.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Ie.push(["Count:",ze.countLabel].join(" ")),ae.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&(Ie.push("P(color \u2229 "+be+"): "+ze.probabilityLabel),Ie.push("P("+be+" | color): "+je.toFixed(3)),Ie.push("P(color | "+be+"): "+Ye.toFixed(3)));var We=Ie.join("<br>"),pt=n.mostReadable(oe.color,["black","white"]);return{trace:ue,x:j*(xe-q.left),y:$*(ye-q.top),text:We,color:oe.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:pt,fontSize:10,idealAlign:me,hovertemplate:ue.hovertemplate,hovertemplateLabels:ze,eventData:[{data:ue._input,fullData:ue,category:be,count:ke,probability:Le,categorycount:Ve,colorcount:Ae,bandcolorcount:De}]}}function R(H){if(!H.parcatsViewModel.dragDimension&&H.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var q=m.mouse(this)[1];if(q<-1)return;var re=H.parcatsViewModel.graphDiv,j=re._fullLayout,$=j._paperdiv.node().getBoundingClientRect(),ie=H.parcatsViewModel.hoveron,oe=this;if(ie==="color"?(S(oe),P(oe,"plotly_hover",m.event)):(L(oe),E(oe,"plotly_hover",m.event)),H.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var ae;ie==="category"?ae=F(re,$,oe):ie==="color"?ae=D(re,$,oe):ie==="dimension"&&(ae=I(re,$,oe)),ae&&T.loneHover(ae,{container:j._hoverlayer.node(),outerContainer:j._paper.node(),gd:re})}}}function N(H){var q=H.parcatsViewModel;if(!q.dragDimension&&(x(q.pathSelection),_(q.dimensionSelection.selectAll("g.category")),w(q.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),T.loneUnhover(q.graphDiv._fullLayout._hoverlayer.node()),q.pathSelection.sort(b),q.hoverinfoItems.indexOf("skip")===-1)){var re=H.parcatsViewModel.hoveron,j=this;re==="color"?P(j,"plotly_unhover",m.event):E(j,"plotly_unhover",m.event)}}function z(H){H.parcatsViewModel.arrangement!=="fixed"&&(H.dragDimensionDisplayInd=H.model.displayInd,H.initialDragDimensionDisplayInds=H.parcatsViewModel.model.dimensions.map(function(q){return q.displayInd}),H.dragHasMoved=!1,H.dragCategoryDisplayInd=null,m.select(this).selectAll("g.category").select("rect.catrect").each(function(q){var re=m.mouse(this)[0],j=m.mouse(this)[1];-2<=re&&re<=q.width+2&&-2<=j&&j<=q.height+2&&(H.dragCategoryDisplayInd=q.model.displayInd,H.initialDragCategoryDisplayInds=H.model.categories.map(function($){return $.displayInd}),q.model.dragY=q.y,e.raiseToTop(this.parentNode),m.select(this.parentNode).selectAll("rect.bandrect").each(function($){$.y<j&&j<=$.y+$.height&&(H.potentialClickBand=this)}))}),H.parcatsViewModel.dragDimension=H,T.loneUnhover(H.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function G(H){if(H.parcatsViewModel.arrangement!=="fixed"&&(H.dragHasMoved=!0,H.dragDimensionDisplayInd!==null)){var q=H.dragDimensionDisplayInd,re=q-1,j=q+1,$=H.parcatsViewModel.dimensions[q];if(H.dragCategoryDisplayInd!==null){var ie=$.categories[H.dragCategoryDisplayInd];ie.model.dragY+=m.event.dy;var oe=ie.model.dragY,ae=ie.model.displayInd,se=$.categories,_e=se[ae-1],ue=se[ae+1];_e!==void 0&&oe<_e.y+_e.height/2&&(ie.model.displayInd=_e.model.displayInd,_e.model.displayInd=ae),ue!==void 0&&oe+ie.height>ue.y+ue.height/2&&(ie.model.displayInd=ue.model.displayInd,ue.model.displayInd=ae),H.dragCategoryDisplayInd=ie.model.displayInd}if(H.dragCategoryDisplayInd===null||H.parcatsViewModel.arrangement==="freeform"){$.model.dragX=m.event.x;var ye=H.parcatsViewModel.dimensions[re],xe=H.parcatsViewModel.dimensions[j];ye!==void 0&&$.model.dragX<ye.x+ye.width&&($.model.displayInd=ye.model.displayInd,ye.model.displayInd=q),xe!==void 0&&$.model.dragX+$.width>xe.x&&($.model.displayInd=xe.model.displayInd,xe.model.displayInd=H.dragDimensionDisplayInd),H.dragDimensionDisplayInd=$.model.displayInd}K(H.parcatsViewModel),Q(H.parcatsViewModel),X(H.parcatsViewModel),Z(H.parcatsViewModel)}}function Y(H){if(H.parcatsViewModel.arrangement!=="fixed"&&H.dragDimensionDisplayInd!==null){m.select(this).selectAll("text").attr("font-weight","normal");var q={},re=ee(H.parcatsViewModel),j=H.parcatsViewModel.model.dimensions.map(function(xe){return xe.displayInd}),$=H.initialDragDimensionDisplayInds.some(function(xe,me){return xe!==j[me]});$&&j.forEach(function(xe,me){var be=H.parcatsViewModel.model.dimensions[me].containerInd;q["dimensions["+be+"].displayindex"]=xe});var ie=!1;if(H.dragCategoryDisplayInd!==null){var oe=H.model.categories.map(function(xe){return xe.displayInd});if(ie=H.initialDragCategoryDisplayInds.some(function(xe,me){return xe!==oe[me]}),ie){var ae=H.model.categories.slice().sort(function(xe,me){return xe.displayInd-me.displayInd}),se=ae.map(function(xe){return xe.categoryValue}),_e=ae.map(function(xe){return xe.categoryLabel});q["dimensions["+H.model.containerInd+"].categoryarray"]=[se],q["dimensions["+H.model.containerInd+"].ticktext"]=[_e],q["dimensions["+H.model.containerInd+"].categoryorder"]="array"}}if(H.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1&&!H.dragHasMoved&&H.potentialClickBand&&(H.parcatsViewModel.hoveron==="color"?P(H.potentialClickBand,"plotly_click",m.event.sourceEvent):E(H.potentialClickBand,"plotly_click",m.event.sourceEvent)),H.model.dragX=null,H.dragCategoryDisplayInd!==null){var ue=H.parcatsViewModel.dimensions[H.dragDimensionDisplayInd].categories[H.dragCategoryDisplayInd];ue.model.dragY=null,H.dragCategoryDisplayInd=null}H.dragDimensionDisplayInd=null,H.parcatsViewModel.dragDimension=null,H.dragHasMoved=null,H.potentialClickBand=null,K(H.parcatsViewModel),Q(H.parcatsViewModel);var ye=m.transition().duration(300).ease("cubic-in-out");ye.each(function(){X(H.parcatsViewModel,!0),Z(H.parcatsViewModel,!0)}).each("end",function(){($||ie)&&A.restyle(H.parcatsViewModel.graphDiv,q,[re])})}}function ee(H){for(var q,re=H.graphDiv._fullData,j=0;j<re.length;j++)if(H.key===re[j].uid){q=j;break}return q}function Z(H,q){q===void 0&&(q=!1);function re(j){return q?j.transition():j}H.pathSelection.data(function(j){return j.paths},s),re(H.pathSelection).attr("d",function(j){return j.svgD})}function X(H,q){q===void 0&&(q=!1);function re(se){return q?se.transition():se}H.dimensionSelection.data(function(se){return se.dimensions},s);var j=H.dimensionSelection.selectAll("g.category").data(function(se){return se.categories},s);re(H.dimensionSelection).attr("transform",function(se){return a(se.x,0)}),re(j).attr("transform",function(se){return a(0,se.y)});var $=j.select(".dimlabel");$.text(function(se,_e){return _e===0?se.parcatsViewModel.model.dimensions[se.model.dimensionInd].dimensionLabel:null});var ie=j.select(".catlabel");ie.attr("text-anchor",function(se){return o(se)?"start":"end"}).attr("x",function(se){return o(se)?se.width+5:-5}).each(function(se){var _e,ue;o(se)?(_e=se.width+5,ue="start"):(_e=-5,ue="end"),m.select(this).selectAll("tspan").attr("x",_e).attr("text-anchor",ue)});var oe=j.selectAll("rect.bandrect").data(function(se){return se.bands},s),ae=oe.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(se){return se.color}).attr("fill-opacity",0);oe.attr("fill",function(se){return se.color}).attr("width",function(se){return se.width}).attr("height",function(se){return se.height}).attr("y",function(se){return se.y}),w(ae),oe.each(function(){e.raiseToTop(this)}),oe.exit().remove()}function ne(H,q,re){var j=re[0],$=q.margin||{l:80,r:80,t:100,b:80},ie=j.trace,oe=ie.domain,ae=q.width,se=q.height,_e=Math.floor(ae*(oe.x[1]-oe.x[0])),ue=Math.floor(se*(oe.y[1]-oe.y[0])),ye=oe.x[0]*ae+$.l,xe=q.height-oe.y[1]*q.height+$.t,me=ie.line.shape,be;ie.hoverinfo==="all"?be=["count","probability"]:be=(ie.hoverinfo||"").split("+");var ke={trace:ie,key:ie.uid,model:j,x:ye,y:xe,width:_e,height:ue,hoveron:ie.hoveron,hoverinfoItems:be,arrangement:ie.arrangement,bundlecolors:ie.bundlecolors,sortpaths:ie.sortpaths,labelfont:ie.labelfont,categorylabelfont:ie.tickfont,pathShape:me,dragDimension:null,margin:$,paths:[],dimensions:[],graphDiv:H,traceSelection:null,pathSelection:null,dimensionSelection:null};return j.dimensions&&(K(ke),Q(ke)),ke}function ce(H,q,re,j,$){var ie=[],oe=[],ae,se;for(se=0;se<re.length-1;se++)ae=c(re[se]+H[se],H[se+1]),ie.push(ae($)),oe.push(ae(1-$));var _e="M "+H[0]+","+q[0];for(_e+="l"+re[0]+",0 ",se=1;se<re.length;se++)_e+="C"+ie[se-1]+","+q[se-1]+" "+oe[se-1]+","+q[se]+" "+H[se]+","+q[se],_e+="l"+re[se]+",0 ";for(_e+="l0,"+j+" ",_e+="l -"+re[re.length-1]+",0 ",se=re.length-2;se>=0;se--)_e+="C"+oe[se]+","+(q[se+1]+j)+" "+ie[se]+","+(q[se]+j)+" "+(H[se]+re[se])+","+(q[se]+j),_e+="l-"+re[se]+",0 ";return _e+="Z",_e}function Q(H){var q=H.dimensions,re=H.model,j=q.map(function(Et){return Et.categories.map(function(Xt){return Xt.y})}),$=H.model.dimensions.map(function(Et){return Et.categories.map(function(Xt){return Xt.displayInd})}),ie=H.model.dimensions.map(function(Et){return Et.displayInd}),oe=H.dimensions.map(function(Et){return Et.model.dimensionInd}),ae=q.map(function(Et){return Et.x}),se=q.map(function(Et){return Et.width}),_e=[];for(var ue in re.paths)re.paths.hasOwnProperty(ue)&&_e.push(re.paths[ue]);function ye(Et){var Xt=Et.categoryInds.map(function(Ct,Xe){return $[Xe][Ct]}),Nt=oe.map(function(Ct){return Xt[Ct]});return Nt}_e.sort(function(Et,Xt){var Nt=ye(Et),Ct=ye(Xt);return H.sortpaths==="backward"&&(Nt.reverse(),Ct.reverse()),Nt.push(Et.valueInds[0]),Ct.push(Xt.valueInds[0]),H.bundlecolors&&(Nt.unshift(Et.rawColor),Ct.unshift(Xt.rawColor)),Nt<Ct?-1:Nt>Ct?1:0});for(var xe=new Array(_e.length),me=q[0].model.count,be=q[0].categories.map(function(Et){return Et.height}).reduce(function(Et,Xt){return Et+Xt}),ke=0;ke<_e.length;ke++){var De=_e[ke],Ve;me>0?Ve=be*(De.count/me):Ve=0;for(var Ae=new Array(j.length),Le=0;Le<De.categoryInds.length;Le++){var je=De.categoryInds[Le],Ye=$[Le][je],ze=ie[Le];Ae[ze]=j[ze][Ye],j[ze][Ye]+=Ve;var Ie=H.dimensions[ze].categories[Ye],We=Ie.bands.length,pt=Ie.bands[We-1];if(pt===void 0||De.rawColor!==pt.rawColor){var Ft=pt===void 0?0:pt.y+pt.height;Ie.bands.push({key:Ft,color:De.color,rawColor:De.rawColor,height:Ve,width:Ie.width,count:De.count,y:Ft,categoryViewModel:Ie,parcatsViewModel:H})}else{var Qt=Ie.bands[We-1];Qt.height+=Ve,Qt.count+=De.count}}var zt;H.pathShape==="hspline"?zt=ce(ae,Ae,se,Ve,.5):zt=ce(ae,Ae,se,Ve,0),xe[ke]={key:De.valueInds[0],model:De,height:Ve,leftXs:ae,topYs:Ae,dimWidths:se,svgD:zt,parcatsViewModel:H}}H.paths=xe}function K(H){var q=H.model.dimensions.map(function(oe){return{displayInd:oe.displayInd,dimensionInd:oe.dimensionInd}});q.sort(function(oe,ae){return oe.displayInd-ae.displayInd});var re=[];for(var j in q){var $=q[j].dimensionInd,ie=H.model.dimensions[$];re.push(U(H,ie))}H.dimensions=re}function U(H,q){var re=40,j=16,$=H.model.dimensions.length,ie=q.displayInd,oe,ae,se;$>1?oe=(H.width-2*re-j)/($-1):oe=0,ae=re,se=ae+oe*ie;var _e=[],ue=H.model.maxCats,ye=q.categories.length,xe=8,me=q.count,be=H.height-xe*(ue-1),ke,De,Ve,Ae,Le,je=(ue-ye)*xe/2,Ye=q.categories.map(function(ze){return{displayInd:ze.displayInd,categoryInd:ze.categoryInd}});for(Ye.sort(function(ze,Ie){return ze.displayInd-Ie.displayInd}),Le=0;Le<ye;Le++)Ae=Ye[Le].categoryInd,De=q.categories[Ae],me>0?ke=De.count/me*be:ke=0,Ve={key:De.valueInds[0],model:De,width:j,height:ke,y:De.dragY!==null?De.dragY:je,bands:[],parcatsViewModel:H},je=je+ke+xe,_e.push(Ve);return{key:q.dimensionInd,x:q.dragX!==null?q.dragX:se,y:0,width:j,model:q,categories:_e,parcatsViewModel:H,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}},{"../../components/drawing":389,"../../components/fx":407,"../../lib":515,"../../lib/svg_text_utils":541,"../../plot_api/plot_api":552,"@plotly/d3":58,"d3-interpolate":116,tinycolor2:313}],896:[function(t,B,V){var m=t("./parcats");B.exports=function(A,T,e,a){var i=A._fullLayout,n=i._paper,r=i._size;m(A,n,T,{width:r.w,height:r.h,margin:{t:r.t,r:r.r,b:r.b,l:r.l}},e,a)}},{"./parcats":895}],897:[function(t,B,V){var m=t("../../components/colorscale/attributes"),c=t("../../plots/cartesian/layout_attributes"),A=t("../../plots/font_attributes"),T=t("../../plots/domain").attributes,e=t("../../lib/extend").extendFlat,a=t("../../plot_api/plot_template").templatedArray;B.exports={domain:T({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:A({editType:"plot"}),tickfont:A({editType:"plot"}),rangefont:A({editType:"plot"}),dimensions:a("dimension",{label:{valType:"string",editType:"plot"},tickvals:e({},c.tickvals,{editType:"plot"}),ticktext:e({},c.ticktext,{editType:"plot"}),tickformat:e({},c.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:e({editType:"calc"},m("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"})),unselected:{line:{color:{valType:"color",dflt:"#7f7f7f",editType:"plot"},opacity:{valType:"number",min:0,max:1,dflt:"auto",editType:"plot"},editType:"plot"},editType:"plot"}}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/plot_template":555,"../../plots/cartesian/layout_attributes":579,"../../plots/domain":593,"../../plots/font_attributes":594}],898:[function(t,B,V){var m=t("./constants"),c=t("@plotly/d3"),A=t("../../lib/gup").keyFun,T=t("../../lib/gup").repeat,e=t("../../lib").sorterAsc,a=t("../../lib").strTranslate,i=m.bar.snapRatio;function n(Y,ee){return Y*(1-i)+ee*i}var r=m.bar.snapClose;function v(Y,ee){return Y*(1-r)+ee*r}function s(Y,ee,Z,X){if(o(Z,X))return Z;var ne=Y?-1:1,ce=0,Q=ee.length-1;if(ne<0){var K=ce;ce=Q,Q=K}for(var U=ee[ce],H=U,q=ce;ne*q<ne*Q;q+=ne){var re=q+ne,j=ee[re];if(ne*Z<ne*v(U,j))return n(U,H);if(ne*Z<ne*j||re===Q)return n(j,U);H=U,U=j}}function o(Y,ee){for(var Z=0;Z<ee.length;Z++)if(Y>=ee[Z][0]&&Y<=ee[Z][1])return!0;return!1}function b(Y){Y.attr("x",-m.bar.captureWidth/2).attr("width",m.bar.captureWidth)}function g(Y){Y.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function d(Y){if(!Y.brush.filterSpecified)return"0,"+Y.height;for(var ee=f(Y.brush.filter.getConsolidated(),Y.height),Z=[0],X,ne,ce,Q=ee.length?ee[0][0]:null,K=0;K<ee.length;K++)X=ee[K],ne=X[1]-X[0],Z.push(Q),Z.push(ne),ce=K+1,ce<ee.length&&(Q=ee[ce][0]-X[1]);return Z.push(Y.height),Z}function f(Y,ee){return Y.map(function(Z){return Z.map(function(X){return Math.max(0,X*ee)}).sort(e)})}function y(Y,ee){var Z=m.bar.handleHeight;if(!(ee>Y[1]+Z||ee<Y[0]-Z))return ee>=.9*Y[1]+.1*Y[0]?"n":ee<=.9*Y[0]+.1*Y[1]?"s":"ns"}function l(){c.select(document.body).style("cursor",null)}function x(Y){Y.attr("stroke-dasharray",d)}function u(Y,ee){var Z=c.select(Y).selectAll(".highlight, .highlight-shadow"),X=ee?Z.transition().duration(m.bar.snapDuration).each("end",ee):Z;x(X)}function M(Y,ee){var Z=Y.brush,X=Z.filterSpecified,ne=NaN,ce={},Q;if(X){var K=Y.height,U=Z.filter.getConsolidated(),H=f(U,K),q=NaN,re=NaN,j=NaN;for(Q=0;Q<=H.length;Q++){var $=H[Q];if($&&$[0]<=ee&&ee<=$[1]){q=Q;break}else if(re=Q?Q-1:NaN,$&&$[0]>ee){j=Q;break}}if(ne=q,isNaN(ne)&&(isNaN(re)||isNaN(j)?ne=isNaN(re)?j:re:ne=ee-H[re][1]<H[j][0]-ee?re:j),!isNaN(ne)){var ie=H[ne],oe=y(ie,ee);oe&&(ce.interval=U[ne],ce.intervalPix=ie,ce.region=oe)}}if(Y.ordinal&&!ce.region){var ae=Y.unitTickvals,se=Y.unitToPaddedPx.invert(ee);for(Q=0;Q<ae.length;Q++){var _e=[ae[Math.max(Q-1,0)]*.25+ae[Q]*.75,ae[Math.min(Q+1,ae.length-1)]*.25+ae[Q]*.75];if(se>=_e[0]&&se<=_e[1]){ce.clickableOrdinalRange=_e;break}}}return ce}function _(Y,ee){c.event.sourceEvent.stopPropagation();var Z=ee.height-c.mouse(Y)[1]-2*m.verticalPadding,X=ee.unitToPaddedPx.invert(Z),ne=ee.brush,ce=M(ee,Z),Q=ce.interval,K=ne.svgBrush;if(K.wasDragged=!1,K.grabbingBar=ce.region==="ns",K.grabbingBar){var U=Q.map(ee.unitToPaddedPx);K.grabPoint=Z-U[0]-m.verticalPadding,K.barLength=U[1]-U[0]}K.clickableOrdinalRange=ce.clickableOrdinalRange,K.stayingIntervals=ee.multiselect&&ne.filterSpecified?ne.filter.getConsolidated():[],Q&&(K.stayingIntervals=K.stayingIntervals.filter(function(H){return H[0]!==Q[0]&&H[1]!==Q[1]})),K.startExtent=ce.region?Q[ce.region==="s"?1:0]:X,ee.parent.inBrushDrag=!0,K.brushStartCallback()}function p(Y,ee){c.event.sourceEvent.stopPropagation();var Z=ee.height-c.mouse(Y)[1]-2*m.verticalPadding,X=ee.brush.svgBrush;X.wasDragged=!0,X._dragging=!0,X.grabbingBar?X.newExtent=[Z-X.grabPoint,Z+X.barLength-X.grabPoint].map(ee.unitToPaddedPx.invert):X.newExtent=[X.startExtent,ee.unitToPaddedPx.invert(Z)].sort(e),ee.brush.filterSpecified=!0,X.extent=X.stayingIntervals.concat([X.newExtent]),X.brushCallback(ee),u(Y.parentNode)}function w(Y,ee){var Z=ee.brush,X=Z.filter,ne=Z.svgBrush;ne._dragging||(h(Y,ee),p(Y,ee),ee.brush.svgBrush.wasDragged=!1),ne._dragging=!1;var ce=c.event;ce.sourceEvent.stopPropagation();var Q=ne.grabbingBar;if(ne.grabbingBar=!1,ne.grabLocation=void 0,ee.parent.inBrushDrag=!1,l(),!ne.wasDragged){ne.wasDragged=void 0,ne.clickableOrdinalRange?Z.filterSpecified&&ee.multiselect?ne.extent.push(ne.clickableOrdinalRange):(ne.extent=[ne.clickableOrdinalRange],Z.filterSpecified=!0):Q?(ne.extent=ne.stayingIntervals,ne.extent.length===0&&I(Z)):I(Z),ne.brushCallback(ee),u(Y.parentNode),ne.brushEndCallback(Z.filterSpecified?X.getConsolidated():[]);return}var K=function(){X.set(X.getConsolidated())};if(ee.ordinal){var U=ee.unitTickvals;U[U.length-1]<U[0]&&U.reverse(),ne.newExtent=[s(0,U,ne.newExtent[0],ne.stayingIntervals),s(1,U,ne.newExtent[1],ne.stayingIntervals)];var H=ne.newExtent[1]>ne.newExtent[0];ne.extent=ne.stayingIntervals.concat(H?[ne.newExtent]:[]),ne.extent.length||I(Z),ne.brushCallback(ee),H?u(Y.parentNode,K):(K(),u(Y.parentNode))}else K();ne.brushEndCallback(Z.filterSpecified?X.getConsolidated():[])}function h(Y,ee){var Z=ee.height-c.mouse(Y)[1]-2*m.verticalPadding,X=M(ee,Z),ne="crosshair";X.clickableOrdinalRange?ne="pointer":X.region&&(ne=X.region+"-resize"),c.select(document.body).style("cursor",ne)}function L(Y){Y.on("mousemove",function(ee){c.event.preventDefault(),ee.parent.inBrushDrag||h(this,ee)}).on("mouseleave",function(ee){ee.parent.inBrushDrag||l()}).call(c.behavior.drag().on("dragstart",function(ee){_(this,ee)}).on("drag",function(ee){p(this,ee)}).on("dragend",function(ee){w(this,ee)}))}function S(Y,ee){return Y[0]-ee[0]}function E(Y,ee,Z){var X=Z._context.staticPlot,ne=Y.selectAll(".background").data(T);ne.enter().append("rect").classed("background",!0).call(b).call(g).style("pointer-events",X?"none":"auto").attr("transform",a(0,m.verticalPadding)),ne.call(L).attr("height",function(K){return K.height-m.verticalPadding});var ce=Y.selectAll(".highlight-shadow").data(T);ce.enter().append("line").classed("highlight-shadow",!0).attr("x",-m.bar.width/2).attr("stroke-width",m.bar.width+m.bar.strokeWidth).attr("stroke",ee).attr("opacity",m.bar.strokeOpacity).attr("stroke-linecap","butt"),ce.attr("y1",function(K){return K.height}).call(x);var Q=Y.selectAll(".highlight").data(T);Q.enter().append("line").classed("highlight",!0).attr("x",-m.bar.width/2).attr("stroke-width",m.bar.width-m.bar.strokeWidth).attr("stroke",m.bar.fillColor).attr("opacity",m.bar.fillOpacity).attr("stroke-linecap","butt"),Q.attr("y1",function(K){return K.height}).call(x)}function P(Y,ee,Z){var X=Y.selectAll("."+m.cn.axisBrush).data(T,A);X.enter().append("g").classed(m.cn.axisBrush,!0),E(X,ee,Z)}function F(Y){return Y.svgBrush.extent.map(function(ee){return ee.slice()})}function I(Y){Y.filterSpecified=!1,Y.svgBrush.extent=[[-1/0,1/0]]}function D(Y){return function(Z){var X=Z.brush,ne=F(X),ce=ne.slice();X.filter.set(ce),Y()}}function R(Y){for(var ee=Y.slice(),Z=[],X,ne=ee.shift();ne;){for(X=ne.slice();(ne=ee.shift())&&ne[0]<=X[1];)X[1]=Math.max(X[1],ne[1]);Z.push(X)}return Z.length===1&&Z[0][0]>Z[0][1]&&(Z=[]),Z}function N(){var Y=[],ee,Z;return{set:function(X){Y=X.map(function(ne){return ne.slice().sort(e)}).sort(S),Y.length===1&&Y[0][0]===-1/0&&Y[0][1]===1/0&&(Y=[[0,-1]]),ee=R(Y),Z=Y.reduce(function(ne,ce){return[Math.min(ne[0],ce[0]),Math.max(ne[1],ce[1])]},[1/0,-1/0])},get:function(){return Y.slice()},getConsolidated:function(){return ee},getBounds:function(){return Z}}}function z(Y,ee,Z,X,ne,ce){var Q=N();return Q.set(Z),{filter:Q,filterSpecified:ee,svgBrush:{extent:[],brushStartCallback:X,brushCallback:D(ne),brushEndCallback:ce}}}function G(Y,ee){if(Array.isArray(Y[0])?(Y=Y.map(function(X){return X.sort(e)}),ee.multiselect?Y=R(Y.sort(S)):Y=[Y[0]]):Y=[Y.sort(e)],ee.tickvals){var Z=ee.tickvals.slice().sort(e);if(Y=Y.map(function(X){var ne=[s(0,Z,X[0],[]),s(1,Z,X[1],[])];if(ne[1]>ne[0])return ne}).filter(function(X){return X}),!Y.length)return}return Y.length>1?Y:Y[0]}B.exports={makeBrush:z,ensureAxisBrush:P,cleanRanges:G}},{"../../lib":515,"../../lib/gup":512,"./constants":902,"@plotly/d3":58}],899:[function(t,B,V){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),calc:t("./calc"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:t("./base_plot"),categories:["gl","regl","noOpacity","noHover"],meta:{}}},{"./attributes":897,"./base_plot":900,"./calc":901,"./defaults":903}],900:[function(t,B,V){var m=t("@plotly/d3"),c=t("../../plots/get_data").getModuleCalcData,A=t("./plot"),T=t("../../constants/xmlns_namespaces");V.name="parcoords",V.plot=function(e){var a=c(e.calcdata,"parcoords")[0];a.length&&A(e,a)},V.clean=function(e,a,i,n){var r=n._has&&n._has("parcoords"),v=a._has&&a._has("parcoords");r&&!v&&(n._paperdiv.selectAll(".parcoords").remove(),n._glimages.selectAll("*").remove())},V.toSVG=function(e){var a=e._fullLayout._glimages,i=m.select(e).selectAll(".svg-container"),n=i.filter(function(v,s){return s===i.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function r(){var v=this,s=v.toDataURL("image/png"),o=a.append("svg:image");o.attr({xmlns:T.svg,"xlink:href":s,preserveAspectRatio:"none",x:0,y:0,width:v.style.width,height:v.style.height})}n.each(r),window.setTimeout(function(){m.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},{"../../constants/xmlns_namespaces":492,"../../plots/get_data":602,"./plot":909,"@plotly/d3":58}],901:[function(t,B,V){var m=t("../../lib").isArrayOrTypedArray,c=t("../../components/colorscale"),A=t("../../lib/gup").wrap;B.exports=function(a,i){var n,r;return c.hasColorscale(i,"line")&&m(i.line.color)?(n=i.line.color,r=c.extractOpts(i.line).colorscale,c.calc(a,i,{vals:n,containerStr:"line",cLetter:"c"})):(n=T(i._length),r=[[0,i.line.color],[1,i.line.color]]),A({lineColor:n,cscale:r})};function T(e){for(var a=new Array(e),i=0;i<e;i++)a[i]=.5;return a}},{"../../components/colorscale":379,"../../lib":515,"../../lib/gup":512}],902:[function(t,B,V){B.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},{}],903:[function(t,B,V){var m=t("../../lib"),c=t("../../components/colorscale/helpers").hasColorscale,A=t("../../components/colorscale/defaults"),T=t("../../plots/domain").defaults,e=t("../../plots/array_container_defaults"),a=t("../../plots/cartesian/axes"),i=t("./attributes"),n=t("./axisbrush"),r=t("./constants").maxDimensionCount,v=t("./merge_length");function s(b,g,d,f,y){var l=y("line.color",d);if(c(b,"line")&&m.isArrayOrTypedArray(l)){if(l.length)return y("line.colorscale"),A(b,g,f,y,{prefix:"line.",cLetter:"c"}),l.length;g.line.color=d}return 1/0}function o(b,g,d,f){function y(_,p){return m.coerce(b,g,i.dimensions,_,p)}var l=y("values"),x=y("visible");if(l&&l.length||(x=g.visible=!1),x){y("label"),y("tickvals"),y("ticktext"),y("tickformat");var u=y("range");g._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:u},a.setConvert(g._ax,f.layout),y("multiselect");var M=y("constraintrange");M&&(g.constraintrange=n.cleanRanges(M,g))}}B.exports=function(g,d,f,y){function l(p,w){return m.coerce(g,d,i,p,w)}var x=g.dimensions;Array.isArray(x)&&x.length>r&&(m.log("parcoords traces support up to "+r+" dimensions at the moment"),x.splice(r));var u=e(g,d,{name:"dimensions",layout:y,handleItemDefaults:o}),M=s(g,d,f,y,l);T(d,y,l),(!Array.isArray(u)||!u.length)&&(d.visible=!1),v(d,u,"values",M);var _={family:y.font.family,size:Math.round(y.font.size/1.2),color:y.font.color};m.coerceFont(l,"labelfont",_),m.coerceFont(l,"tickfont",_),m.coerceFont(l,"rangefont",_),l("labelangle"),l("labelside"),l("unselected.line.color"),l("unselected.line.opacity")}},{"../../components/colorscale/defaults":377,"../../components/colorscale/helpers":378,"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"../../plots/domain":593,"./attributes":897,"./axisbrush":898,"./constants":902,"./merge_length":907}],904:[function(t,B,V){var m=t("../../lib").isTypedArray;V.convertTypedArray=function(c){return m(c)?Array.prototype.slice.call(c):c},V.isOrdinal=function(c){return!!c.tickvals},V.isVisible=function(c){return c.visible||!("visible"in c)}},{"../../lib":515}],905:[function(t,B,V){var m=t("./base_index");m.plot=t("./plot"),B.exports=m},{"./base_index":899,"./plot":909}],906:[function(t,B,V){var m=t("glslify"),c=m([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

attribute vec4 p01_04, p05_08, p09_12, p13_16,
               p17_20, p21_24, p25_28, p29_32,
               p33_36, p37_40, p41_44, p45_48,
               p49_52, p53_56, p57_60, colors;

uniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,
             loA, hiA, loB, hiB, loC, hiC, loD, hiD;

uniform vec2 resolution, viewBoxPos, viewBoxSize;
uniform float maskHeight;
uniform float drwLayer; // 0: context, 1: focus, 2: pick
uniform vec4 contextColor;
uniform sampler2D maskTexture, palette;

bool isPick    = (drwLayer > 1.5);
bool isContext = (drwLayer < 0.5);

const vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);
const vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);

float val(mat4 p, mat4 v) {
    return dot(matrixCompMult(p, v) * UNITS, UNITS);
}

float axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {
    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);
    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);
    return y1 * (1.0 - ratio) + y2 * ratio;
}

int iMod(int a, int b) {
    return a - b * (a / b);
}

bool fOutside(float p, float lo, float hi) {
    return (lo < hi) && (lo > p || p > hi);
}

bool vOutside(vec4 p, vec4 lo, vec4 hi) {
    return (
        fOutside(p[0], lo[0], hi[0]) ||
        fOutside(p[1], lo[1], hi[1]) ||
        fOutside(p[2], lo[2], hi[2]) ||
        fOutside(p[3], lo[3], hi[3])
    );
}

bool mOutside(mat4 p, mat4 lo, mat4 hi) {
    return (
        vOutside(p[0], lo[0], hi[0]) ||
        vOutside(p[1], lo[1], hi[1]) ||
        vOutside(p[2], lo[2], hi[2]) ||
        vOutside(p[3], lo[3], hi[3])
    );
}

bool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {
    return mOutside(A, loA, hiA) ||
           mOutside(B, loB, hiB) ||
           mOutside(C, loC, hiC) ||
           mOutside(D, loD, hiD);
}

bool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {
    mat4 pnts[4];
    pnts[0] = A;
    pnts[1] = B;
    pnts[2] = C;
    pnts[3] = D;

    for(int i = 0; i < 4; ++i) {
        for(int j = 0; j < 4; ++j) {
            for(int k = 0; k < 4; ++k) {
                if(0 == iMod(
                    int(255.0 * texture2D(maskTexture,
                        vec2(
                            (float(i * 2 + j / 2) + 0.5) / 8.0,
                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight
                        ))[3]
                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),
                    2
                )) return true;
            }
        }
    }
    return false;
}

vec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {
    float x = 0.5 * sign(v) + 0.5;
    float y = axisY(x, A, B, C, D);
    float z = 1.0 - abs(v);

    z += isContext ? 0.0 : 2.0 * float(
        outsideBoundingBox(A, B, C, D) ||
        outsideRasterMask(A, B, C, D)
    );

    return vec4(
        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,
        z,
        1.0
    );
}

void main() {
    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);
    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);
    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);
    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);

    float v = colors[3];

    gl_Position = position(isContext, v, A, B, C, D);

    fragColor =
        isContext ? vec4(contextColor) :
        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));
}
`]),A=m([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
    gl_FragColor = fragColor;
}
`]),T=t("./constants").maxDimensionCount,e=t("../../lib"),a=1e-6,i=2048,n=new Uint8Array(4),r=new Uint8Array(4),v={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function s(h){h.read({x:0,y:0,width:1,height:1,data:n})}function o(h,L,S,E,P){var F=h._gl;F.enable(F.SCISSOR_TEST),F.scissor(L,S,E,P),h.clear({color:[0,0,0,0],depth:1})}function b(h,L,S,E,P,F){var I=F.key;function D(R){var N=Math.min(E,P-R*E);R===0&&(window.cancelAnimationFrame(S.currentRafs[I]),delete S.currentRafs[I],o(h,F.scissorX,F.scissorY,F.scissorWidth,F.viewBoxSize[1])),!S.clearOnly&&(F.count=2*N,F.offset=2*R*E,L(F),R*E+N<P&&(S.currentRafs[I]=window.requestAnimationFrame(function(){D(R+1)})),S.drawCompleted=!1)}S.drawCompleted||(s(h),S.drawCompleted=!0),D(0)}function g(h){return Math.max(a,Math.min(1-a,h))}function d(h,L){for(var S=new Array(256),E=0;E<256;E++)S[E]=h(E/255).concat(L);return S}function f(h,L){return(h>>>8*L)%256/255}function y(h,L,S){for(var E=new Array(h*(T+4)),P=0,F=0;F<h;F++){for(var I=0;I<T;I++)E[P++]=I<L.length?L[I].paddedUnitValues[F]:.5;E[P++]=f(F,2),E[P++]=f(F,1),E[P++]=f(F,0),E[P++]=g(S[F])}return E}function l(h,L,S){for(var E=new Array(L*8),P=0,F=0;F<L;F++)for(var I=0;I<2;I++)for(var D=0;D<4;D++){var R=h*4+D,N=S[F*64+R];R===63&&I===0&&(N*=-1),E[P++]=N}return E}function x(h){var L="0"+h;return L.substr(L.length-2)}function u(h){return h<T?"p"+x(h+1)+"_"+x(h+4):"colors"}function M(h,L,S){for(var E=0;E<=T;E+=4)h[u(E)](l(E/4,L,S))}function _(h){for(var L={},S=0;S<=T;S+=4)L[u(S)]=h.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return L}function p(h,L,S,E,P,F,I,D,R,N,z,G,Y,ee){for(var Z=[[],[]],X=0;X<64;X++)Z[0][X]=X===P?1:0,Z[1][X]=X===F?1:0;I*=ee,D*=ee,R*=ee,N*=ee;var ne=h.lines.canvasOverdrag*ee,ce=h.domain,Q=h.canvasWidth*ee,K=h.canvasHeight*ee,U=h.pad.l*ee,H=h.pad.b*ee,q=h.layoutHeight*ee,re=h.layoutWidth*ee,j=h.deselectedLines.color,$=h.deselectedLines.opacity,ie=e.extendFlat({key:z,resolution:[Q,K],viewBoxPos:[I+ne,D],viewBoxSize:[R,N],i0:P,i1:F,dim0A:Z[0].slice(0,16),dim0B:Z[0].slice(16,32),dim0C:Z[0].slice(32,48),dim0D:Z[0].slice(48,64),dim1A:Z[1].slice(0,16),dim1B:Z[1].slice(16,32),dim1C:Z[1].slice(32,48),dim1D:Z[1].slice(48,64),drwLayer:G,contextColor:[j[0]/255,j[1]/255,j[2]/255,$!=="auto"?j[3]*$:Math.max(1/255,Math.pow(1/h.lines.color.length,1/3))],scissorX:(E===L?0:I+ne)+(U-ne)+re*ce.x[0],scissorWidth:(E===S?Q-I+ne:R+.5)+(E===L?I+ne:0),scissorY:D+H+q*ce.y[0],scissorHeight:N,viewportX:U-ne+re*ce.x[0],viewportY:H+q*ce.y[0],viewportWidth:Q,viewportHeight:K},Y);return ie}function w(h){var L=i-1,S=Math.max(0,Math.floor(h[0]*L),0),E=Math.min(L,Math.ceil(h[1]*L),L);return[Math.min(S,E),Math.max(S,E)]}B.exports=function(h,L){var S=L.context,E=L.pick,P=L.regl,F=P._gl,I=F.getParameter(F.ALIASED_LINE_WIDTH_RANGE),D=Math.max(I[0],Math.min(I[1],L.viewModel.plotGlPixelRatio)),R={currentRafs:{},drawCompleted:!0,clearOnly:!1},N,z,G,Y,ee=_(P),Z,X=P.texture(v),ne=[];Q(L);var ce=P({profile:!1,blend:{enable:S,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!S,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:P.prop("scissorX"),y:P.prop("scissorY"),width:P.prop("scissorWidth"),height:P.prop("scissorHeight")}},viewport:{x:P.prop("viewportX"),y:P.prop("viewportY"),width:P.prop("viewportWidth"),height:P.prop("viewportHeight")},dither:!1,vert:c,frag:A,primitive:"lines",lineWidth:D,attributes:ee,uniforms:{resolution:P.prop("resolution"),viewBoxPos:P.prop("viewBoxPos"),viewBoxSize:P.prop("viewBoxSize"),dim0A:P.prop("dim0A"),dim1A:P.prop("dim1A"),dim0B:P.prop("dim0B"),dim1B:P.prop("dim1B"),dim0C:P.prop("dim0C"),dim1C:P.prop("dim1C"),dim0D:P.prop("dim0D"),dim1D:P.prop("dim1D"),loA:P.prop("loA"),hiA:P.prop("hiA"),loB:P.prop("loB"),hiB:P.prop("hiB"),loC:P.prop("loC"),hiC:P.prop("hiC"),loD:P.prop("loD"),hiD:P.prop("hiD"),palette:X,contextColor:P.prop("contextColor"),maskTexture:P.prop("maskTexture"),drwLayer:P.prop("drwLayer"),maskHeight:P.prop("maskHeight")},offset:P.prop("offset"),count:P.prop("count")});function Q(j){N=j.model,z=j.viewModel,G=z.dimensions.slice(),Y=G[0]?G[0].values.length:0;var $=N.lines,ie=E?$.color.map(function(ae,se){return se/$.color.length}):$.color,oe=y(Y,G,ie);M(ee,Y,oe),!S&&!E&&(X=P.texture(e.extendFlat({data:d(N.unitToColor,255)},v)))}function K(j){var $,ie,oe,ae=[[],[]];for(oe=0;oe<64;oe++){var se=!j&&oe<G.length?G[oe].brush.filter.getBounds():[-1/0,1/0];ae[0][oe]=se[0],ae[1][oe]=se[1]}var _e=i*8,ue=new Array(_e);for($=0;$<_e;$++)ue[$]=255;if(!j)for($=0;$<G.length;$++){var ye=$%8,xe=($-ye)/8,me=Math.pow(2,ye),be=G[$],ke=be.brush.filter.get();if(!(ke.length<2)){var De=w(ke[0])[1];for(ie=1;ie<ke.length;ie++){var Ve=w(ke[ie]);for(oe=De+1;oe<Ve[0];oe++)ue[oe*8+xe]&=~me;De=Math.max(De,Ve[1])}}}var Ae={shape:[8,i],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:ue};return Z?Z(Ae):Z=P.texture(Ae),{maskTexture:Z,maskHeight:i,loA:ae[0].slice(0,16),loB:ae[0].slice(16,32),loC:ae[0].slice(32,48),loD:ae[0].slice(48,64),hiA:ae[1].slice(0,16),hiB:ae[1].slice(16,32),hiC:ae[1].slice(32,48),hiD:ae[1].slice(48,64)}}function U(j,$,ie){var oe=j.length,ae,se,_e,ue=1/0,ye=-1/0;for(ae=0;ae<oe;ae++)j[ae].dim0.canvasX<ue&&(ue=j[ae].dim0.canvasX,se=ae),j[ae].dim1.canvasX>ye&&(ye=j[ae].dim1.canvasX,_e=ae);oe===0&&o(P,0,0,N.canvasWidth,N.canvasHeight);var xe=K(S);for(ae=0;ae<oe;ae++){var me=j[ae],be=me.dim0.crossfilterDimensionIndex,ke=me.dim1.crossfilterDimensionIndex,De=me.canvasX,Ve=me.canvasY,Ae=De+me.panelSizeX,Le=me.plotGlPixelRatio;if($||!ne[be]||ne[be][0]!==De||ne[be][1]!==Ae){ne[be]=[De,Ae];var je=p(N,se,_e,ae,be,ke,De,Ve,me.panelSizeX,me.panelSizeY,me.dim0.crossfilterDimensionIndex,S?0:E?2:1,xe,Le);R.clearOnly=ie;var Ye=$?N.lines.blockLineCount:Y;b(P,ce,R,Ye,Y,je)}}}function H(j,$){return P.read({x:j,y:$,width:1,height:1,data:r}),r}function q(j,$,ie,oe){var ae=new Uint8Array(4*ie*oe);return P.read({x:j,y:$,width:ie,height:oe,data:ae}),ae}function re(){h.style["pointer-events"]="none",X.destroy(),Z&&Z.destroy();for(var j in ee)ee[j].destroy()}return{render:U,readPixel:H,readPixels:q,destroy:re,update:Q}}},{"../../lib":515,"./constants":902,glslify:227}],907:[function(t,B,V){B.exports=function(m,c,A,T){T||(T=1/0);var e,a;for(e=0;e<c.length;e++)a=c[e],a.visible&&(T=Math.min(T,a[A].length));for(T===1/0&&(T=0),m._length=T,e=0;e<c.length;e++)a=c[e],a.visible&&(a._length=T);return T}},{}],908:[function(t,B,V){var m=t("@plotly/d3"),c=t("../../lib"),A=c.numberFormat,T=t("color-rgba"),e=t("../../plots/cartesian/axes"),a=c.strRotate,i=c.strTranslate,n=t("../../lib/svg_text_utils"),r=t("../../components/drawing"),v=t("../../components/colorscale"),s=t("../../lib/gup"),o=s.keyFun,b=s.repeat,g=s.unwrap,d=t("./helpers"),f=t("./constants"),y=t("./axisbrush"),l=t("./lines");function x(Z,X,ne){return c.aggNums(Z,null,X,ne)}function u(Z,X){return _(x(Math.min,Z,X),x(Math.max,Z,X))}function M(Z){var X=Z.range;return X?_(X[0],X[1]):u(Z.values,Z._length)}function _(Z,X){return(isNaN(Z)||!isFinite(Z))&&(Z=0),(isNaN(X)||!isFinite(X))&&(X=0),Z===X&&(Z===0?(Z-=1,X+=1):(Z*=.9,X*=1.1)),[Z,X]}function p(Z,X){return X?function(ne,ce){var Q=X[ce];return Q==null?Z(ne):Q}:Z}function w(Z,X,ne,ce,Q){var K=M(ne);return ce?m.scale.ordinal().domain(ce.map(p(A(ne.tickformat),Q))).range(ce.map(function(U){var H=(U-K[0])/(K[1]-K[0]);return Z-X+H*(2*X-Z)})):m.scale.linear().domain(K).range([Z-X,X])}function h(Z,X){return m.scale.linear().range([X,Z-X])}function L(Z,X){return m.scale.linear().domain(M(Z)).range([X,1-X])}function S(Z){if(!!Z.tickvals){var X=M(Z);return m.scale.ordinal().domain(Z.tickvals).range(Z.tickvals.map(function(ne){return(ne-X[0])/(X[1]-X[0])}))}}function E(Z){var X=Z.map(function(K){return K[0]}),ne=Z.map(function(K){var U=T(K[1]);return m.rgb("rgb("+U[0]+","+U[1]+","+U[2]+")")}),ce=function(K){return function(U){return U[K]}},Q="rgb".split("").map(function(K){return m.scale.linear().clamp(!0).domain(X).range(ne.map(ce(K)))});return function(K){return Q.map(function(U){return U(K)})}}function P(Z){return Z.dimensions.some(function(X){return X.brush.filterSpecified})}function F(Z,X,ne){var ce=g(X),Q=ce.trace,K=d.convertTypedArray(ce.lineColor),U=Q.line,H={color:T(Q.unselected.line.color),opacity:Q.unselected.line.opacity},q=v.extractOpts(U),re=q.reversescale?v.flipScale(ce.cscale):ce.cscale,j=Q.domain,$=Q.dimensions,ie=Z.width,oe=Q.labelangle,ae=Q.labelside,se=Q.labelfont,_e=Q.tickfont,ue=Q.rangefont,ye=c.extendDeepNoArrays({},U,{color:K.map(m.scale.linear().domain(M({values:K,range:[q.min,q.max],_length:Q._length}))),blockLineCount:f.blockLineCount,canvasOverdrag:f.overdrag*f.canvasPixelRatio}),xe=Math.floor(ie*(j.x[1]-j.x[0])),me=Math.floor(Z.height*(j.y[1]-j.y[0])),be=Z.margin||{l:80,r:80,t:100,b:80},ke=xe,De=me;return{key:ne,colCount:$.filter(d.isVisible).length,dimensions:$,tickDistance:f.tickDistance,unitToColor:E(re),lines:ye,deselectedLines:H,labelAngle:oe,labelSide:ae,labelFont:se,tickFont:_e,rangeFont:ue,layoutWidth:ie,layoutHeight:Z.height,domain:j,translateX:j.x[0]*ie,translateY:Z.height-j.y[1]*Z.height,pad:be,canvasWidth:ke*f.canvasPixelRatio+2*ye.canvasOverdrag,canvasHeight:De*f.canvasPixelRatio,width:ke,height:De,canvasPixelRatio:f.canvasPixelRatio}}function I(Z,X,ne){var ce=ne.width,Q=ne.height,K=ne.dimensions,U=ne.canvasPixelRatio,H=function(ie){return ce*ie/Math.max(1,ne.colCount-1)},q=f.verticalPadding/Q,re=h(Q,f.verticalPadding),j={key:ne.key,xScale:H,model:ne,inBrushDrag:!1},$={};return j.dimensions=K.filter(d.isVisible).map(function(ie,oe){var ae=L(ie,q),se=$[ie.label];$[ie.label]=(se||0)+1;var _e=ie.label+(se?"__"+se:""),ue=ie.constraintrange,ye=ue&&ue.length;ye&&!Array.isArray(ue[0])&&(ue=[ue]);var xe=ye?ue.map(function(ze){return ze.map(ae)}):[[-1/0,1/0]],me=function(){var ze=j;ze.focusLayer&&ze.focusLayer.render(ze.panels,!0);var Ie=P(ze);!Z.contextShown()&&Ie?(ze.contextLayer&&ze.contextLayer.render(ze.panels,!0),Z.contextShown(!0)):Z.contextShown()&&!Ie&&(ze.contextLayer&&ze.contextLayer.render(ze.panels,!0,!0),Z.contextShown(!1))},be=ie.values;be.length>ie._length&&(be=be.slice(0,ie._length));var ke=ie.tickvals,De;function Ve(ze,Ie){return{val:ze,text:De[Ie]}}function Ae(ze,Ie){return ze.val-Ie.val}if(Array.isArray(ke)&&ke.length){De=ie.ticktext,!Array.isArray(De)||!De.length?De=ke.map(A(ie.tickformat)):De.length>ke.length?De=De.slice(0,ke.length):ke.length>De.length&&(ke=ke.slice(0,De.length));for(var Le=1;Le<ke.length;Le++)if(ke[Le]<ke[Le-1]){for(var je=ke.map(Ve).sort(Ae),Ye=0;Ye<ke.length;Ye++)ke[Ye]=je[Ye].val,De[Ye]=je[Ye].text;break}}else ke=void 0;return be=d.convertTypedArray(be),{key:_e,label:ie.label,tickFormat:ie.tickformat,tickvals:ke,ticktext:De,ordinal:d.isOrdinal(ie),multiselect:ie.multiselect,xIndex:oe,crossfilterDimensionIndex:oe,visibleIndex:ie._index,height:Q,values:be,paddedUnitValues:be.map(ae),unitTickvals:ke&&ke.map(ae),xScale:H,x:H(oe),canvasX:H(oe)*U,unitToPaddedPx:re,domainScale:w(Q,f.verticalPadding,ie,ke,De),ordinalScale:S(ie),parent:j,model:ne,brush:y.makeBrush(Z,ye,xe,function(){Z.linePickActive(!1)},me,function(ze){if(j.focusLayer.render(j.panels,!0),j.pickLayer&&j.pickLayer.render(j.panels,!0),Z.linePickActive(!0),X&&X.filterChanged){var Ie=ae.invert,We=ze.map(function(pt){return pt.map(Ie).sort(c.sorterAsc)}).sort(function(pt,Ft){return pt[0]-Ft[0]});X.filterChanged(j.key,ie._index,We)}})}}),j}function D(Z){Z.classed(f.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function R(){var Z=!0,X=!1;return{linePickActive:function(ne){return arguments.length?Z=!!ne:Z},contextShown:function(ne){return arguments.length?X=!!ne:X}}}function N(Z,X){var ne=X==="top"?1:-1,ce=Z*Math.PI/180,Q=Math.sin(ce),K=Math.cos(ce);return{dir:ne,dx:Q,dy:K,degrees:Z}}function z(Z,X,ne){for(var ce=X.panels||(X.panels=[]),Q=Z.data(),K=0;K<Q.length-1;K++){var U=ce[K]||(ce[K]={}),H=Q[K],q=Q[K+1];U.dim0=H,U.dim1=q,U.canvasX=H.canvasX,U.panelSizeX=q.canvasX-H.canvasX,U.panelSizeY=X.model.canvasHeight,U.y=0,U.canvasY=0,U.plotGlPixelRatio=ne}}function G(Z){for(var X=0;X<Z.length;X++)for(var ne=0;ne<Z[X].length;ne++)for(var ce=Z[X][ne].trace,Q=ce.dimensions,K=0;K<Q.length;K++){var U=Q[K].values,H=Q[K]._ax;H&&(H.range?H.range=_(H.range[0],H.range[1]):H.range=u(U,ce._length),H.dtick||(H.dtick=.01*(Math.abs(H.range[1]-H.range[0])||1)),H.tickformat=Q[K].tickformat,e.calcTicks(H),H.cleanRange())}}function Y(Z,X){return e.tickText(Z._ax,X,!1).text}function ee(Z,X){if(Z.ordinal)return"";var ne=Z.domainScale.domain(),ce=ne[X?ne.length-1:0];return Y(Z.model.dimensions[Z.visibleIndex],ce)}B.exports=function(X,ne,ce,Q){var K=X._context.staticPlot,U=X._fullLayout,H=U._toppaper,q=U._glcontainer,re=X._context.plotGlPixelRatio,j=X._fullLayout.paper_bgcolor;G(ne);var $=R(),ie=ne.filter(function(Ye){return g(Ye).trace.visible}).map(F.bind(0,ce)).map(I.bind(0,$,Q));q.each(function(Ye,ze){return c.extendFlat(Ye,ie[ze])});var oe=q.selectAll(".gl-canvas").each(function(Ye){Ye.viewModel=ie[0],Ye.viewModel.plotGlPixelRatio=re,Ye.viewModel.paperColor=j,Ye.model=Ye.viewModel?Ye.viewModel.model:null}),ae=null,se=oe.filter(function(Ye){return Ye.pick});se.style("pointer-events",K?"none":"auto").on("mousemove",function(Ye){if($.linePickActive()&&Ye.lineLayer&&Q&&Q.hover){var ze=m.event,Ie=this.width,We=this.height,pt=m.mouse(this),Ft=pt[0],Qt=pt[1];if(Ft<0||Qt<0||Ft>=Ie||Qt>=We)return;var zt=Ye.lineLayer.readPixel(Ft,We-1-Qt),Et=zt[3]!==0,Xt=Et?zt[2]+256*(zt[1]+256*zt[0]):null,Nt={x:Ft,y:Qt,clientX:ze.clientX,clientY:ze.clientY,dataIndex:Ye.model.key,curveNumber:Xt};Xt!==ae&&(Et?Q.hover(Nt):Q.unhover&&Q.unhover(Nt),ae=Xt)}}),oe.style("opacity",function(Ye){return Ye.pick?0:1}),H.style("background","rgba(255, 255, 255, 0)");var _e=H.selectAll("."+f.cn.parcoords).data(ie,o);_e.exit().remove(),_e.enter().append("g").classed(f.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),_e.attr("transform",function(Ye){return i(Ye.model.translateX,Ye.model.translateY)});var ue=_e.selectAll("."+f.cn.parcoordsControlView).data(b,o);ue.enter().append("g").classed(f.cn.parcoordsControlView,!0),ue.attr("transform",function(Ye){return i(Ye.model.pad.l,Ye.model.pad.t)});var ye=ue.selectAll("."+f.cn.yAxis).data(function(Ye){return Ye.dimensions},o);ye.enter().append("g").classed(f.cn.yAxis,!0),ue.each(function(Ye){z(ye,Ye,re)}),oe.each(function(Ye){if(Ye.viewModel){!Ye.lineLayer||Q?Ye.lineLayer=l(this,Ye):Ye.lineLayer.update(Ye),(Ye.key||Ye.key===0)&&(Ye.viewModel[Ye.key]=Ye.lineLayer);var ze=!Ye.context||Q;Ye.lineLayer.render(Ye.viewModel.panels,ze)}}),ye.attr("transform",function(Ye){return i(Ye.xScale(Ye.xIndex),0)}),ye.call(m.behavior.drag().origin(function(Ye){return Ye}).on("drag",function(Ye){var ze=Ye.parent;$.linePickActive(!1),Ye.x=Math.max(-f.overdrag,Math.min(Ye.model.width+f.overdrag,m.event.x)),Ye.canvasX=Ye.x*Ye.model.canvasPixelRatio,ye.sort(function(Ie,We){return Ie.x-We.x}).each(function(Ie,We){Ie.xIndex=We,Ie.x=Ye===Ie?Ie.x:Ie.xScale(Ie.xIndex),Ie.canvasX=Ie.x*Ie.model.canvasPixelRatio}),z(ye,ze,re),ye.filter(function(Ie){return Math.abs(Ye.xIndex-Ie.xIndex)!==0}).attr("transform",function(Ie){return i(Ie.xScale(Ie.xIndex),0)}),m.select(this).attr("transform",i(Ye.x,0)),ye.each(function(Ie,We,pt){pt===Ye.parent.key&&(ze.dimensions[We]=Ie)}),ze.contextLayer&&ze.contextLayer.render(ze.panels,!1,!P(ze)),ze.focusLayer.render&&ze.focusLayer.render(ze.panels)}).on("dragend",function(Ye){var ze=Ye.parent;Ye.x=Ye.xScale(Ye.xIndex),Ye.canvasX=Ye.x*Ye.model.canvasPixelRatio,z(ye,ze,re),m.select(this).attr("transform",function(Ie){return i(Ie.x,0)}),ze.contextLayer&&ze.contextLayer.render(ze.panels,!1,!P(ze)),ze.focusLayer&&ze.focusLayer.render(ze.panels),ze.pickLayer&&ze.pickLayer.render(ze.panels,!0),$.linePickActive(!0),Q&&Q.axesMoved&&Q.axesMoved(ze.key,ze.dimensions.map(function(Ie){return Ie.crossfilterDimensionIndex}))})),ye.exit().remove();var xe=ye.selectAll("."+f.cn.axisOverlays).data(b,o);xe.enter().append("g").classed(f.cn.axisOverlays,!0),xe.selectAll("."+f.cn.axis).remove();var me=xe.selectAll("."+f.cn.axis).data(b,o);me.enter().append("g").classed(f.cn.axis,!0),me.each(function(Ye){var ze=Ye.model.height/Ye.model.tickDistance,Ie=Ye.domainScale,We=Ie.domain();m.select(this).call(m.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(ze,Ye.tickFormat).tickValues(Ye.ordinal?We:null).tickFormat(function(pt){return d.isOrdinal(Ye)?pt:Y(Ye.model.dimensions[Ye.visibleIndex],pt)}).scale(Ie)),r.font(me.selectAll("text"),Ye.model.tickFont)}),me.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),me.selectAll("text").style("text-shadow",n.makeTextShadow(j)).style("cursor","default");var be=xe.selectAll("."+f.cn.axisHeading).data(b,o);be.enter().append("g").classed(f.cn.axisHeading,!0);var ke=be.selectAll("."+f.cn.axisTitle).data(b,o);ke.enter().append("text").classed(f.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events",K?"none":"auto"),ke.text(function(Ye){return Ye.label}).each(function(Ye){var ze=m.select(this);r.font(ze,Ye.model.labelFont),n.convertToTspans(ze,X)}).attr("transform",function(Ye){var ze=N(Ye.model.labelAngle,Ye.model.labelSide),Ie=f.axisTitleOffset;return(ze.dir>0?"":i(0,2*Ie+Ye.model.height))+a(ze.degrees)+i(-Ie*ze.dx,-Ie*ze.dy)}).attr("text-anchor",function(Ye){var ze=N(Ye.model.labelAngle,Ye.model.labelSide),Ie=Math.abs(ze.dx),We=Math.abs(ze.dy);return 2*Ie>We?ze.dir*ze.dx<0?"start":"end":"middle"});var De=xe.selectAll("."+f.cn.axisExtent).data(b,o);De.enter().append("g").classed(f.cn.axisExtent,!0);var Ve=De.selectAll("."+f.cn.axisExtentTop).data(b,o);Ve.enter().append("g").classed(f.cn.axisExtentTop,!0),Ve.attr("transform",i(0,-f.axisExtentOffset));var Ae=Ve.selectAll("."+f.cn.axisExtentTopText).data(b,o);Ae.enter().append("text").classed(f.cn.axisExtentTopText,!0).call(D),Ae.text(function(Ye){return ee(Ye,!0)}).each(function(Ye){r.font(m.select(this),Ye.model.rangeFont)});var Le=De.selectAll("."+f.cn.axisExtentBottom).data(b,o);Le.enter().append("g").classed(f.cn.axisExtentBottom,!0),Le.attr("transform",function(Ye){return i(0,Ye.model.height+f.axisExtentOffset)});var je=Le.selectAll("."+f.cn.axisExtentBottomText).data(b,o);je.enter().append("text").classed(f.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(D),je.text(function(Ye){return ee(Ye,!1)}).each(function(Ye){r.font(m.select(this),Ye.model.rangeFont)}),y.ensureAxisBrush(xe,j,X)}},{"../../components/colorscale":379,"../../components/drawing":389,"../../lib":515,"../../lib/gup":512,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"./axisbrush":898,"./constants":902,"./helpers":904,"./lines":906,"@plotly/d3":58,"color-rgba":91}],909:[function(t,B,i){var m=t("./parcoords"),c=t("../../lib/prepare_regl"),A=t("./helpers").isVisible,T={};function e(n,r,v){var s=r.indexOf(v),o=n.indexOf(s);return o===-1&&(o+=r.length),o}function a(n,r){return function(s,o){return e(n,r,s)-e(n,r,o)}}var i=B.exports=function(r,v){var s=r._fullLayout,o=c(r,[],T);if(!!o){var b={},g={},d={},f={},y=s._size;v.forEach(function(_,p){var w=_[0].trace;d[p]=w.index;var h=f[p]=w._fullInput.index;b[p]=r.data[h].dimensions,g[p]=r.data[h].dimensions.slice()});var l=function(_,p,w){var h=g[_][p],L=w.map(function(D){return D.slice()}),S="dimensions["+p+"].constraintrange",E=s._tracePreGUI[r._fullData[d[_]]._fullInput.uid];if(E[S]===void 0){var P=h.constraintrange;E[S]=P||null}var F=r._fullData[d[_]].dimensions[p];L.length?(L.length===1&&(L=L[0]),h.constraintrange=L,F.constraintrange=L.slice(),L=[L]):(delete h.constraintrange,delete F.constraintrange,L=null);var I={};I[S]=L,r.emit("plotly_restyle",[I,[f[_]]])},x=function(_){r.emit("plotly_hover",_)},u=function(_){r.emit("plotly_unhover",_)},M=function(_,p){var w=a(p,g[_].filter(A));b[_].sort(w),g[_].filter(function(h){return!A(h)}).sort(function(h){return g[_].indexOf(h)}).forEach(function(h){b[_].splice(b[_].indexOf(h),1),b[_].splice(g[_].indexOf(h),0,h)}),r.emit("plotly_restyle",[{dimensions:[b[_]]},[f[_]]])};m(r,v,{width:y.w,height:y.h,margin:{t:y.t,r:y.r,b:y.b,l:y.l}},{filterChanged:l,hover:x,unhover:u,axesMoved:M})}};i.reglPrecompiled=T},{"../../lib/prepare_regl":528,"./helpers":904,"./parcoords":908}],910:[function(t,B,V){var m=t("../../plots/attributes"),c=t("../../plots/domain").attributes,A=t("../../plots/font_attributes"),T=t("../../components/color/attributes"),e=t("../../plots/template_attributes").hovertemplateAttrs,a=t("../../plots/template_attributes").texttemplateAttrs,i=t("../../lib/extend").extendFlat,n=A({editType:"plot",arrayOk:!0,colorEditType:"plot"});B.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:T.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:i({},m.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:e({},{keys:["label","color","value","percent","text"]}),texttemplate:a({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:i({},n,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:i({},n,{}),outsidetextfont:i({},n,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:i({},n,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:c({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:i({},n,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},{"../../components/color/attributes":366,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/domain":593,"../../plots/font_attributes":594,"../../plots/template_attributes":642}],911:[function(t,B,V){var m=t("../../plots/plots");V.name="pie",V.plot=function(c,A,T,e){m.plotBasePlot(V.name,c,A,T,e)},V.clean=function(c,A,T,e){m.cleanBasePlot(V.name,c,A,T,e)}},{"../../plots/plots":628}],912:[function(t,B,V){var m=t("fast-isnumeric"),c=t("tinycolor2"),A=t("../../components/color"),T={};function e(r,v){var s=[],o=r._fullLayout,b=o.hiddenlabels||[],g=v.labels,d=v.marker.colors||[],f=v.values,y=v._length,l=v._hasValues&&y,x,u;if(v.dlabel)for(g=new Array(y),x=0;x<y;x++)g[x]=String(v.label0+x*v.dlabel);var M={},_=a(o["_"+v.type+"colormap"]),p=0,w=!1;for(x=0;x<y;x++){var h,L,S;if(l){if(h=f[x],!m(h))continue;h=+h}else h=1;L=g[x],(L===void 0||L==="")&&(L=x),L=String(L);var E=M[L];E===void 0?(M[L]=s.length,S=b.indexOf(L)!==-1,S||(p+=h),s.push({v:h,label:L,color:_(d[x],L),i:x,pts:[x],hidden:S})):(w=!0,u=s[E],u.v+=h,u.pts.push(x),u.hidden||(p+=h),u.color===!1&&d[x]&&(u.color=_(d[x],L)))}s=s.filter(function(F){return F.v>=0});var P=v.type==="funnelarea"?w:v.sort;return P&&s.sort(function(F,I){return I.v-F.v}),s[0]&&(s[0].vTotal=p),s}function a(r){return function(s,o){return!s||(s=c(s),!s.isValid())?!1:(s=A.addOpacity(s,s.getAlpha()),r[o]||(r[o]=s),s)}}function i(r,v){var s=(v||{}).type;s||(s="pie");var o=r._fullLayout,b=r.calcdata,g=o[s+"colorway"],d=o["_"+s+"colormap"];o["extend"+s+"colors"]&&(g=n(g,T));for(var f=0,y=0;y<b.length;y++){var l=b[y],x=l[0].trace.type;if(x===s)for(var u=0;u<l.length;u++){var M=l[u];M.color===!1&&(d[M.label]?M.color=d[M.label]:(d[M.label]=M.color=g[f%g.length],f++))}}}function n(r,v){var s,o=JSON.stringify(r),b=v[o];if(!b){for(b=r.slice(),s=0;s<r.length;s++)b.push(c(r[s]).lighten(20).toHexString());for(s=0;s<r.length;s++)b.push(c(r[s]).darken(20).toHexString());v[o]=b}return b}B.exports={calc:e,crossTraceCalc:i,makePullColorFn:a,generateExtendedColors:n}},{"../../components/color":367,"fast-isnumeric":190,tinycolor2:313}],913:[function(t,B,V){var m=t("fast-isnumeric"),c=t("../../lib"),A=t("./attributes"),T=t("../../plots/domain").defaults,e=t("../bar/defaults").handleText;function a(n,r){var v=Array.isArray(n),s=c.isArrayOrTypedArray(r),o=Math.min(v?n.length:1/0,s?r.length:1/0);if(isFinite(o)||(o=0),o&&s){for(var b,g=0;g<o;g++){var d=r[g];if(m(d)&&d>0){b=!0;break}}b||(o=0)}return{hasLabels:v,hasValues:s,len:o}}function i(n,r,v,s){function o(S,E){return c.coerce(n,r,A,S,E)}var b=o("labels"),g=o("values"),d=a(b,g),f=d.len;if(r._hasLabels=d.hasLabels,r._hasValues=d.hasValues,!r._hasLabels&&r._hasValues&&(o("label0"),o("dlabel")),!f){r.visible=!1;return}r._length=f;var y=o("marker.line.width");y&&o("marker.line.color"),o("marker.colors"),o("scalegroup");var l=o("text"),x=o("texttemplate"),u;if(x||(u=o("textinfo",Array.isArray(l)?"text+percent":"percent")),o("hovertext"),o("hovertemplate"),x||u&&u!=="none"){var M=o("textposition");e(n,r,s,o,M,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1});var _=Array.isArray(M)||M==="auto",p=_||M==="outside";p&&o("automargin"),(M==="inside"||M==="auto"||Array.isArray(M))&&o("insidetextorientation")}T(r,s,o);var w=o("hole"),h=o("title.text");if(h){var L=o("title.position",w?"middle center":"top center");!w&&L==="middle center"&&(r.title.position="top center"),c.coerceFont(o,"title.font",s.font)}o("sort"),o("direction"),o("rotation"),o("pull")}B.exports={handleLabelsAndValues:a,supplyDefaults:i}},{"../../lib":515,"../../plots/domain":593,"../bar/defaults":661,"./attributes":910,"fast-isnumeric":190}],914:[function(t,B,V){var m=t("../../components/fx/helpers").appendArrayMultiPointValues;B.exports=function(A,T){var e={curveNumber:T.index,pointNumbers:A.pts,data:T._input,fullData:T,label:A.label,color:A.color,value:A.v,percent:A.percent,text:A.text,bbox:A.bbox,v:A.v};return A.pts.length===1&&(e.pointNumber=e.i=A.pts[0]),m(e,T,A.pts),T.type==="funnelarea"&&(delete e.v,delete e.i),e}},{"../../components/fx/helpers":403}],915:[function(t,B,V){var m=t("../../lib");function c(A){return A.indexOf("e")!==-1?A.replace(/[.]?0+e/,"e"):A.indexOf(".")!==-1?A.replace(/[.]?0+$/,""):A}V.formatPiePercent=function(T,e){var a=c((T*100).toPrecision(3));return m.numSeparate(a,e)+"%"},V.formatPieValue=function(T,e){var a=c(T.toPrecision(10));return m.numSeparate(a,e)},V.getFirstFilled=function(T,e){if(!!Array.isArray(T))for(var a=0;a<e.length;a++){var i=T[e[a]];if(i||i===0||i==="")return i}},V.castOption=function(T,e){if(Array.isArray(T))return V.getFirstFilled(T,e);if(T)return T},V.getRotationAngle=function(A){return(A==="auto"?0:A)*Math.PI/180}},{"../../lib":515}],916:[function(t,B,V){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults").supplyDefaults,supplyLayoutDefaults:t("./layout_defaults"),layoutAttributes:t("./layout_attributes"),calc:t("./calc").calc,crossTraceCalc:t("./calc").crossTraceCalc,plot:t("./plot").plot,style:t("./style"),styleOne:t("./style_one"),moduleType:"trace",name:"pie",basePlotModule:t("./base_plot"),categories:["pie-like","pie","showLegend"],meta:{}}},{"./attributes":910,"./base_plot":911,"./calc":912,"./defaults":913,"./layout_attributes":917,"./layout_defaults":918,"./plot":919,"./style":920,"./style_one":921}],917:[function(t,B,V){B.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],918:[function(t,B,V){var m=t("../../lib"),c=t("./layout_attributes");B.exports=function(T,e){function a(i,n){return m.coerce(T,e,c,i,n)}a("hiddenlabels"),a("piecolorway",e.colorway),a("extendpiecolors")}},{"../../lib":515,"./layout_attributes":917}],919:[function(t,B,V){var m=t("@plotly/d3"),c=t("../../plots/plots"),A=t("../../components/fx"),T=t("../../components/color"),e=t("../../components/drawing"),a=t("../../lib"),i=a.strScale,n=a.strTranslate,r=t("../../lib/svg_text_utils"),v=t("../bar/uniform_text"),s=v.recordMinTextSize,o=v.clearMinTextSize,b=t("../bar/constants").TEXTPAD,g=t("./helpers"),d=t("./event_data"),f=t("../../lib").isValidTextValue;function y(K,U){var H=K._context.staticPlot,q=K._fullLayout,re=q._size;o("pie",q),_(U,K),ee(U,re);var j=a.makeTraceGroups(q._pielayer,U,"trace").each(function($){var ie=m.select(this),oe=$[0],ae=oe.trace;X($),ie.attr("stroke-linejoin","round"),ie.each(function(){var se=m.select(this).selectAll("g.slice").data($);se.enter().append("g").classed("slice",!0),se.exit().remove();var _e=[[[],[]],[[],[]]],ue=!1;se.each(function(Ae,Le){if(Ae.hidden){m.select(this).selectAll("path,g").remove();return}Ae.pointNumber=Ae.i,Ae.curveNumber=ae.index,_e[Ae.pxmid[1]<0?0:1][Ae.pxmid[0]<0?0:1].push(Ae);var je=oe.cx,Ye=oe.cy,ze=m.select(this),Ie=ze.selectAll("path.surface").data([Ae]);if(Ie.enter().append("path").classed("surface",!0).style({"pointer-events":H?"none":"all"}),ze.call(x,K,$),ae.pull){var We=+g.castOption(ae.pull,Ae.pts)||0;We>0&&(je+=We*Ae.pxmid[0],Ye+=We*Ae.pxmid[1])}Ae.cxFinal=je,Ae.cyFinal=Ye;function pt(Ct,Xe,at,Ge){var Se=Ge*(Xe[0]-Ct[0]),He=Ge*(Xe[1]-Ct[1]);return"a"+Ge*oe.r+","+Ge*oe.r+" 0 "+Ae.largeArc+(at?" 1 ":" 0 ")+Se+","+He}var Ft=ae.hole;if(Ae.v===oe.vTotal){var Qt="M"+(je+Ae.px0[0])+","+(Ye+Ae.px0[1])+pt(Ae.px0,Ae.pxmid,!0,1)+pt(Ae.pxmid,Ae.px0,!0,1)+"Z";Ft?Ie.attr("d","M"+(je+Ft*Ae.px0[0])+","+(Ye+Ft*Ae.px0[1])+pt(Ae.px0,Ae.pxmid,!1,Ft)+pt(Ae.pxmid,Ae.px0,!1,Ft)+"Z"+Qt):Ie.attr("d",Qt)}else{var zt=pt(Ae.px0,Ae.px1,!0,1);if(Ft){var Et=1-Ft;Ie.attr("d","M"+(je+Ft*Ae.px1[0])+","+(Ye+Ft*Ae.px1[1])+pt(Ae.px1,Ae.px0,!1,Ft)+"l"+Et*Ae.px0[0]+","+Et*Ae.px0[1]+zt+"Z")}else Ie.attr("d","M"+je+","+Ye+"l"+Ae.px0[0]+","+Ae.px0[1]+zt+"Z")}ce(K,Ae,oe);var Xt=g.castOption(ae.textposition,Ae.pts),Nt=ze.selectAll("g.slicetext").data(Ae.text&&Xt!=="none"?[0]:[]);Nt.enter().append("g").classed("slicetext",!0),Nt.exit().remove(),Nt.each(function(){var Ct=a.ensureSingle(m.select(this),"text","",function(Tt){Tt.attr("data-notex",1)}),Xe=a.ensureUniformFontSize(K,Xt==="outside"?u(ae,Ae,q.font):M(ae,Ae,q.font));Ct.text(Ae.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(e.font,Xe).call(r.convertToTspans,K);var at=e.bBox(Ct.node()),Ge;if(Xt==="outside")Ge=I(at,Ae);else if(Ge=p(at,Ae,oe),Xt==="auto"&&Ge.scale<1){var Se=a.ensureUniformFontSize(K,ae.outsidetextfont);Ct.call(e.font,Se),at=e.bBox(Ct.node()),Ge=I(at,Ae)}var He=Ge.textPosAngle,Ke=He===void 0?Ae.pxmid:ne(oe.r,He);if(Ge.targetX=je+Ke[0]*Ge.rCenter+(Ge.x||0),Ge.targetY=Ye+Ke[1]*Ge.rCenter+(Ge.y||0),Q(Ge,at),Ge.outside){var qe=Ge.targetY;Ae.yLabelMin=qe-at.height/2,Ae.yLabelMid=qe,Ae.yLabelMax=qe+at.height/2,Ae.labelExtraX=0,Ae.labelExtraY=0,ue=!0}Ge.fontSize=Xe.size,s(ae.type,Ge,q),$[Le].transform=Ge,a.setTransormAndDisplay(Ct,Ge)})});var ye=m.select(this).selectAll("g.titletext").data(ae.title.text?[0]:[]);if(ye.enter().append("g").classed("titletext",!0),ye.exit().remove(),ye.each(function(){var Ae=a.ensureSingle(m.select(this),"text","",function(Ye){Ye.attr("data-notex",1)}),Le=ae.title.text;ae._meta&&(Le=a.templateString(Le,ae._meta)),Ae.text(Le).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(e.font,ae.title.font).call(r.convertToTspans,K);var je;ae.title.position==="middle center"?je=D(oe):je=R(oe,re),Ae.attr("transform",n(je.x,je.y)+i(Math.min(1,je.scale))+n(je.tx,je.ty))}),ue&&Y(_e,ae),l(se,ae),ue&&ae.automargin){var xe=e.bBox(ie.node()),me=ae.domain,be=re.w*(me.x[1]-me.x[0]),ke=re.h*(me.y[1]-me.y[0]),De=(.5*be-oe.r)/re.w,Ve=(.5*ke-oe.r)/re.h;c.autoMargin(K,"pie."+ae.uid+".automargin",{xl:me.x[0]-De,xr:me.x[1]+De,yb:me.y[0]-Ve,yt:me.y[1]+Ve,l:Math.max(oe.cx-oe.r-xe.left,0),r:Math.max(xe.right-(oe.cx+oe.r),0),b:Math.max(xe.bottom-(oe.cy+oe.r),0),t:Math.max(oe.cy-oe.r-xe.top,0),pad:5})}})});setTimeout(function(){j.selectAll("tspan").each(function(){var $=m.select(this);$.attr("dy")&&$.attr("dy",$.attr("dy"))})},0)}function l(K,U){K.each(function(H){var q=m.select(this);if(!H.labelExtraX&&!H.labelExtraY){q.select("path.textline").remove();return}var re=q.select("g.slicetext text");H.transform.targetX+=H.labelExtraX,H.transform.targetY+=H.labelExtraY,a.setTransormAndDisplay(re,H.transform);var j=H.cxFinal+H.pxmid[0],$=H.cyFinal+H.pxmid[1],ie="M"+j+","+$,oe=(H.yLabelMax-H.yLabelMin)*(H.pxmid[0]<0?-1:1)/4;if(H.labelExtraX){var ae=H.labelExtraX*H.pxmid[1]/H.pxmid[0],se=H.yLabelMid+H.labelExtraY-(H.cyFinal+H.pxmid[1]);Math.abs(ae)>Math.abs(se)?ie+="l"+se*H.pxmid[0]/H.pxmid[1]+","+se+"H"+(j+H.labelExtraX+oe):ie+="l"+H.labelExtraX+","+ae+"v"+(se-ae)+"h"+oe}else ie+="V"+(H.yLabelMid+H.labelExtraY)+"h"+oe;a.ensureSingle(q,"path","textline").call(T.stroke,U.outsidetextfont.color).attr({"stroke-width":Math.min(2,U.outsidetextfont.size/8),d:ie,fill:"none"})})}function x(K,U,H){var q=H[0],re=q.cx,j=q.cy,$=q.trace,ie=$.type==="funnelarea";"_hasHoverLabel"in $||($._hasHoverLabel=!1),"_hasHoverEvent"in $||($._hasHoverEvent=!1),K.on("mouseover",function(oe){var ae=U._fullLayout,se=U._fullData[$.index];if(!(U._dragging||ae.hovermode===!1)){var _e=se.hoverinfo;if(Array.isArray(_e)&&(_e=A.castHoverinfo({hoverinfo:[g.castOption(_e,oe.pts)],_module:$._module},ae,0)),_e==="all"&&(_e="label+text+value+percent+name"),se.hovertemplate||_e!=="none"&&_e!=="skip"&&_e){var ue=oe.rInscribed||0,ye=re+oe.pxmid[0]*(1-ue),xe=j+oe.pxmid[1]*(1-ue),me=ae.separators,be=[];if(_e&&_e.indexOf("label")!==-1&&be.push(oe.label),oe.text=g.castOption(se.hovertext||se.text,oe.pts),_e&&_e.indexOf("text")!==-1){var ke=oe.text;a.isValidTextValue(ke)&&be.push(ke)}oe.value=oe.v,oe.valueLabel=g.formatPieValue(oe.v,me),_e&&_e.indexOf("value")!==-1&&be.push(oe.valueLabel),oe.percent=oe.v/q.vTotal,oe.percentLabel=g.formatPiePercent(oe.percent,me),_e&&_e.indexOf("percent")!==-1&&be.push(oe.percentLabel);var De=se.hoverlabel,Ve=De.font,Ae=[];A.loneHover({trace:$,x0:ye-ue*q.r,x1:ye+ue*q.r,y:xe,_x0:ie?re+oe.TL[0]:ye-ue*q.r,_x1:ie?re+oe.TR[0]:ye+ue*q.r,_y0:ie?j+oe.TL[1]:xe-ue*q.r,_y1:ie?j+oe.BL[1]:xe+ue*q.r,text:be.join("<br>"),name:se.hovertemplate||_e.indexOf("name")!==-1?se.name:void 0,idealAlign:oe.pxmid[0]<0?"left":"right",color:g.castOption(De.bgcolor,oe.pts)||oe.color,borderColor:g.castOption(De.bordercolor,oe.pts),fontFamily:g.castOption(Ve.family,oe.pts),fontSize:g.castOption(Ve.size,oe.pts),fontColor:g.castOption(Ve.color,oe.pts),nameLength:g.castOption(De.namelength,oe.pts),textAlign:g.castOption(De.align,oe.pts),hovertemplate:g.castOption(se.hovertemplate,oe.pts),hovertemplateLabels:oe,eventData:[d(oe,se)]},{container:ae._hoverlayer.node(),outerContainer:ae._paper.node(),gd:U,inOut_bbox:Ae}),oe.bbox=Ae[0],$._hasHoverLabel=!0}$._hasHoverEvent=!0,U.emit("plotly_hover",{points:[d(oe,se)],event:m.event})}}),K.on("mouseout",function(oe){var ae=U._fullLayout,se=U._fullData[$.index],_e=m.select(this).datum();$._hasHoverEvent&&(oe.originalEvent=m.event,U.emit("plotly_unhover",{points:[d(_e,se)],event:m.event}),$._hasHoverEvent=!1),$._hasHoverLabel&&(A.loneUnhover(ae._hoverlayer.node()),$._hasHoverLabel=!1)}),K.on("click",function(oe){var ae=U._fullLayout,se=U._fullData[$.index];U._dragging||ae.hovermode===!1||(U._hoverdata=[d(oe,se)],A.click(U,m.event))})}function u(K,U,H){var q=g.castOption(K.outsidetextfont.color,U.pts)||g.castOption(K.textfont.color,U.pts)||H.color,re=g.castOption(K.outsidetextfont.family,U.pts)||g.castOption(K.textfont.family,U.pts)||H.family,j=g.castOption(K.outsidetextfont.size,U.pts)||g.castOption(K.textfont.size,U.pts)||H.size;return{color:q,family:re,size:j}}function M(K,U,H){var q=g.castOption(K.insidetextfont.color,U.pts);!q&&K._input.textfont&&(q=g.castOption(K._input.textfont.color,U.pts));var re=g.castOption(K.insidetextfont.family,U.pts)||g.castOption(K.textfont.family,U.pts)||H.family,j=g.castOption(K.insidetextfont.size,U.pts)||g.castOption(K.textfont.size,U.pts)||H.size;return{color:q||T.contrast(U.color),family:re,size:j}}function _(K,U){for(var H,q,re=0;re<K.length;re++)if(H=K[re][0],q=H.trace,q.title.text){var j=q.title.text;q._meta&&(j=a.templateString(j,q._meta));var $=e.tester.append("text").attr("data-notex",1).text(j).call(e.font,q.title.font).call(r.convertToTspans,U),ie=e.bBox($.node(),!0);H.titleBox={width:ie.width,height:ie.height},$.remove()}}function p(K,U,H){var q=H.r||U.rpx1,re=U.rInscribed,j=U.startangle===U.stopangle;if(j)return{rCenter:1-re,scale:0,rotate:0,textPosAngle:0};var $=U.ring,ie=$===1&&Math.abs(U.startangle-U.stopangle)===Math.PI*2,oe=U.halfangle,ae=U.midangle,se=H.trace.insidetextorientation,_e=se==="horizontal",ue=se==="tangential",ye=se==="radial",xe=se==="auto",me=[],be;if(!xe){var ke=function(ze,Ie){if(w(U,ze)){var We=Math.abs(ze-U.startangle),pt=Math.abs(ze-U.stopangle),Ft=We<pt?We:pt;Ie==="tan"?be=L(K,q,$,Ft,0):be=h(K,q,$,Ft,Math.PI/2),be.textPosAngle=ze,me.push(be)}},De;if(_e||ue){for(De=4;De>=-4;De-=2)ke(Math.PI*De,"tan");for(De=4;De>=-4;De-=2)ke(Math.PI*(De+1),"tan")}if(_e||ye){for(De=4;De>=-4;De-=2)ke(Math.PI*(De+1.5),"rad");for(De=4;De>=-4;De-=2)ke(Math.PI*(De+.5),"rad")}}if(ie||xe||_e){var Ve=Math.sqrt(K.width*K.width+K.height*K.height);if(be={scale:re*q*2/Ve,rCenter:1-re,rotate:0},be.textPosAngle=(U.startangle+U.stopangle)/2,be.scale>=1)return be;me.push(be)}(xe||ye)&&(be=h(K,q,$,oe,ae),be.textPosAngle=(U.startangle+U.stopangle)/2,me.push(be)),(xe||ue)&&(be=L(K,q,$,oe,ae),be.textPosAngle=(U.startangle+U.stopangle)/2,me.push(be));for(var Ae=0,Le=0,je=0;je<me.length;je++){var Ye=me[je].scale;if(Le<Ye&&(Le=Ye,Ae=je),!xe&&Le>=1)break}return me[Ae]}function w(K,U){var H=K.startangle,q=K.stopangle;return H>U&&U>q||H<U&&U<q}function h(K,U,H,q,re){U=Math.max(0,U-2*b);var j=K.width/K.height,$=P(j,q,U,H);return{scale:$*2/K.height,rCenter:S(j,$/U),rotate:E(re)}}function L(K,U,H,q,re){U=Math.max(0,U-2*b);var j=K.height/K.width,$=P(j,q,U,H);return{scale:$*2/K.width,rCenter:S(j,$/U),rotate:E(re+Math.PI/2)}}function S(K,U){return Math.cos(U)-K*U}function E(K){return(180/Math.PI*K+720)%180-90}function P(K,U,H,q){var re=K+1/(2*Math.tan(U));return H*Math.min(1/(Math.sqrt(re*re+.5)+re),q/(Math.sqrt(K*K+q/2)+K))}function F(K,U){return K.v===U.vTotal&&!U.trace.hole?1:Math.min(1/(1+1/Math.sin(K.halfangle)),K.ring/2)}function I(K,U){var H=U.pxmid[0],q=U.pxmid[1],re=K.width/2,j=K.height/2;return H<0&&(re*=-1),q<0&&(j*=-1),{scale:1,rCenter:1,rotate:0,x:re+Math.abs(j)*(re>0?1:-1)/2,y:j/(1+H*H/(q*q)),outside:!0}}function D(K){var U=Math.sqrt(K.titleBox.width*K.titleBox.width+K.titleBox.height*K.titleBox.height);return{x:K.cx,y:K.cy,scale:K.trace.hole*K.r*2/U,tx:0,ty:-K.titleBox.height/2+K.trace.title.font.size}}function R(K,U){var H=1,q=1,re,j=K.trace,$={x:K.cx,y:K.cy},ie={tx:0,ty:0};ie.ty+=j.title.font.size,re=G(j),j.title.position.indexOf("top")!==-1?($.y-=(1+re)*K.r,ie.ty-=K.titleBox.height):j.title.position.indexOf("bottom")!==-1&&($.y+=(1+re)*K.r);var oe=N(K.r,K.trace.aspectratio),ae=U.w*(j.domain.x[1]-j.domain.x[0])/2;return j.title.position.indexOf("left")!==-1?(ae=ae+oe,$.x-=(1+re)*oe,ie.tx+=K.titleBox.width/2):j.title.position.indexOf("center")!==-1?ae*=2:j.title.position.indexOf("right")!==-1&&(ae=ae+oe,$.x+=(1+re)*oe,ie.tx-=K.titleBox.width/2),H=ae/K.titleBox.width,q=z(K,U)/K.titleBox.height,{x:$.x,y:$.y,scale:Math.min(H,q),tx:ie.tx,ty:ie.ty}}function N(K,U){return K/(U===void 0?1:U)}function z(K,U){var H=K.trace,q=U.h*(H.domain.y[1]-H.domain.y[0]);return Math.min(K.titleBox.height,q/2)}function G(K){var U=K.pull;if(!U)return 0;var H;if(Array.isArray(U))for(U=0,H=0;H<K.pull.length;H++)K.pull[H]>U&&(U=K.pull[H]);return U}function Y(K,U){var H,q,re,j,$,ie,oe,ae,se,_e,ue,ye,xe;function me(Ve,Ae){return Ve.pxmid[1]-Ae.pxmid[1]}function be(Ve,Ae){return Ae.pxmid[1]-Ve.pxmid[1]}function ke(Ve,Ae){Ae||(Ae={});var Le=Ae.labelExtraY+(q?Ae.yLabelMax:Ae.yLabelMin),je=q?Ve.yLabelMin:Ve.yLabelMax,Ye=q?Ve.yLabelMax:Ve.yLabelMin,ze=Ve.cyFinal+$(Ve.px0[1],Ve.px1[1]),Ie=Le-je,We,pt,Ft,Qt,zt,Et;if(Ie*oe>0&&(Ve.labelExtraY=Ie),!!Array.isArray(U.pull))for(pt=0;pt<_e.length;pt++)Ft=_e[pt],!(Ft===Ve||(g.castOption(U.pull,Ve.pts)||0)>=(g.castOption(U.pull,Ft.pts)||0))&&((Ve.pxmid[1]-Ft.pxmid[1])*oe>0?(Qt=Ft.cyFinal+$(Ft.px0[1],Ft.px1[1]),Ie=Qt-je-Ve.labelExtraY,Ie*oe>0&&(Ve.labelExtraY+=Ie)):(Ye+Ve.labelExtraY-ze)*oe>0&&(We=3*ie*Math.abs(pt-_e.indexOf(Ve)),zt=Ft.cxFinal+j(Ft.px0[0],Ft.px1[0]),Et=zt+We-(Ve.cxFinal+Ve.pxmid[0])-Ve.labelExtraX,Et*ie>0&&(Ve.labelExtraX+=Et)))}for(q=0;q<2;q++)for(re=q?me:be,$=q?Math.max:Math.min,oe=q?1:-1,H=0;H<2;H++){for(j=H?Math.max:Math.min,ie=H?1:-1,ae=K[q][H],ae.sort(re),se=K[1-q][H],_e=se.concat(ae),ye=[],ue=0;ue<ae.length;ue++)ae[ue].yLabelMid!==void 0&&ye.push(ae[ue]);for(xe=!1,ue=0;q&&ue<se.length;ue++)if(se[ue].yLabelMid!==void 0){xe=se[ue];break}for(ue=0;ue<ye.length;ue++){var De=ue&&ye[ue-1];xe&&!ue&&(De=xe),ke(ye[ue],De)}}}function ee(K,U){for(var H=[],q=0;q<K.length;q++){var re=K[q][0],j=re.trace,$=j.domain,ie=U.w*($.x[1]-$.x[0]),oe=U.h*($.y[1]-$.y[0]);j.title.text&&j.title.position!=="middle center"&&(oe-=z(re,U));var ae=ie/2,se=oe/2;j.type==="funnelarea"&&!j.scalegroup&&(se/=j.aspectratio),re.r=Math.min(ae,se)/(1+G(j)),re.cx=U.l+U.w*(j.domain.x[1]+j.domain.x[0])/2,re.cy=U.t+U.h*(1-j.domain.y[0])-oe/2,j.title.text&&j.title.position.indexOf("bottom")!==-1&&(re.cy-=z(re,U)),j.scalegroup&&H.indexOf(j.scalegroup)===-1&&H.push(j.scalegroup)}Z(K,H)}function Z(K,U){for(var H,q,re,j=0;j<U.length;j++){var $=1/0,ie=U[j];for(q=0;q<K.length;q++)if(H=K[q][0],re=H.trace,re.scalegroup===ie){var oe;if(re.type==="pie")oe=H.r*H.r;else if(re.type==="funnelarea"){var ae,se;re.aspectratio>1?(ae=H.r,se=ae/re.aspectratio):(se=H.r,ae=se*re.aspectratio),ae*=(1+re.baseratio)/2,oe=ae*se}$=Math.min($,oe/H.vTotal)}for(q=0;q<K.length;q++)if(H=K[q][0],re=H.trace,re.scalegroup===ie){var _e=$*H.vTotal;re.type==="funnelarea"&&(_e/=(1+re.baseratio)/2,_e/=re.aspectratio),H.r=Math.sqrt(_e)}}}function X(K){var U=K[0],H=U.r,q=U.trace,re=g.getRotationAngle(q.rotation),j=2*Math.PI/U.vTotal,$="px0",ie="px1",oe,ae,se;if(q.direction==="counterclockwise"){for(oe=0;oe<K.length&&K[oe].hidden;oe++);if(oe===K.length)return;re+=j*K[oe].v,j*=-1,$="px1",ie="px0"}for(se=ne(H,re),oe=0;oe<K.length;oe++)ae=K[oe],!ae.hidden&&(ae[$]=se,ae.startangle=re,re+=j*ae.v/2,ae.pxmid=ne(H,re),ae.midangle=re,re+=j*ae.v/2,se=ne(H,re),ae.stopangle=re,ae[ie]=se,ae.largeArc=ae.v>U.vTotal/2?1:0,ae.halfangle=Math.PI*Math.min(ae.v/U.vTotal,.5),ae.ring=1-q.hole,ae.rInscribed=F(ae,U))}function ne(K,U){return[K*Math.sin(U),-K*Math.cos(U)]}function ce(K,U,H){var q=K._fullLayout,re=H.trace,j=re.texttemplate,$=re.textinfo;if(!j&&$&&$!=="none"){var ie=$.split("+"),oe=function(Ae){return ie.indexOf(Ae)!==-1},ae=oe("label"),se=oe("text"),_e=oe("value"),ue=oe("percent"),ye=q.separators,xe;if(xe=ae?[U.label]:[],se){var me=g.getFirstFilled(re.text,U.pts);f(me)&&xe.push(me)}_e&&xe.push(g.formatPieValue(U.v,ye)),ue&&xe.push(g.formatPiePercent(U.v/H.vTotal,ye)),U.text=xe.join("<br>")}function be(Ae){return{label:Ae.label,value:Ae.v,valueLabel:g.formatPieValue(Ae.v,q.separators),percent:Ae.v/H.vTotal,percentLabel:g.formatPiePercent(Ae.v/H.vTotal,q.separators),color:Ae.color,text:Ae.text,customdata:a.castOption(re,Ae.i,"customdata")}}if(j){var ke=a.castOption(re,U.i,"texttemplate");if(!ke)U.text="";else{var De=be(U),Ve=g.getFirstFilled(re.text,U.pts);(f(Ve)||Ve==="")&&(De.text=Ve),U.text=a.texttemplateString(ke,De,K._fullLayout._d3locale,De,re._meta||{})}}}function Q(K,U){var H=K.rotate*Math.PI/180,q=Math.cos(H),re=Math.sin(H),j=(U.left+U.right)/2,$=(U.top+U.bottom)/2;K.textX=j*q-$*re,K.textY=j*re+$*q,K.noCenter=!0}B.exports={plot:y,formatSliceLabel:ce,transformInsideText:p,determineInsideTextFont:M,positionTitleOutside:R,prerenderTitles:_,layoutAreas:ee,attachFxHandlers:x,computeTransform:Q}},{"../../components/color":367,"../../components/drawing":389,"../../components/fx":407,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/plots":628,"../bar/constants":659,"../bar/uniform_text":673,"./event_data":914,"./helpers":915,"@plotly/d3":58}],920:[function(t,B,V){var m=t("@plotly/d3"),c=t("./style_one"),A=t("../bar/uniform_text").resizeText;B.exports=function(e){var a=e._fullLayout._pielayer.selectAll(".trace");A(e,a,"pie"),a.each(function(i){var n=i[0],r=n.trace,v=m.select(this);v.style({opacity:r.opacity}),v.selectAll("path.surface").each(function(s){m.select(this).call(c,s,r)})})}},{"../bar/uniform_text":673,"./style_one":921,"@plotly/d3":58}],921:[function(t,B,V){var m=t("../../components/color"),c=t("./helpers").castOption;B.exports=function(T,e,a){var i=a.marker.line,n=c(i.color,e.pts)||m.defaultLine,r=c(i.width,e.pts)||0;T.style("stroke-width",r).call(m.fill,e.color).call(m.stroke,n)}},{"../../components/color":367,"./helpers":915}],922:[function(t,B,V){var m=t("../scatter/attributes");B.exports={x:m.x,y:m.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:m.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},{"../scatter/attributes":936}],923:[function(t,B,V){var m=t("../../../stackgl_modules").gl_pointcloud2d,c=t("../../lib/str2rgbarray"),A=t("../../plots/cartesian/autorange").findExtremes,T=t("../scatter/get_trace_color");function e(n,r){this.scene=n,this.uid=r,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=m(n.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var a=e.prototype;a.handlePick=function(n){var r=this.idToIndex[n.pointId];return{trace:this,dataCoord:n.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[r*2],this.pickXYData[r*2+1]]:[this.pickXData[r],this.pickYData[r]],textLabel:Array.isArray(this.textLabels)?this.textLabels[r]:this.textLabels,color:this.color,name:this.name,pointIndex:r,hoverinfo:this.hoverinfo}},a.update=function(n){this.index=n.index,this.textLabels=n.text,this.name=n.name,this.hoverinfo=n.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(n),this.color=T(n,{})},a.updateFast=function(n){var r=this.xData=this.pickXData=n.x,v=this.yData=this.pickYData=n.y,s=this.pickXYData=n.xy,o=n.xbounds&&n.ybounds,b=n.indices,g,d,f,y=this.bounds,l,x,u;if(s){if(f=s,g=s.length>>>1,o)y[0]=n.xbounds[0],y[2]=n.xbounds[1],y[1]=n.ybounds[0],y[3]=n.ybounds[1];else for(u=0;u<g;u++)l=f[u*2],x=f[u*2+1],l<y[0]&&(y[0]=l),l>y[2]&&(y[2]=l),x<y[1]&&(y[1]=x),x>y[3]&&(y[3]=x);if(b)d=b;else for(d=new Int32Array(g),u=0;u<g;u++)d[u]=u}else for(g=r.length,f=new Float32Array(2*g),d=new Int32Array(g),u=0;u<g;u++)l=r[u],x=v[u],d[u]=u,f[u*2]=l,f[u*2+1]=x,l<y[0]&&(y[0]=l),l>y[2]&&(y[2]=l),x<y[1]&&(y[1]=x),x>y[3]&&(y[3]=x);this.idToIndex=d,this.pointcloudOptions.idToIndex=d,this.pointcloudOptions.positions=f;var M=c(n.marker.color),_=c(n.marker.border.color),p=n.opacity*n.marker.opacity;M[3]*=p,this.pointcloudOptions.color=M;var w=n.marker.blend;if(w===null){var h=100;w=r.length<h||v.length<h}this.pointcloudOptions.blend=w,_[3]*=p,this.pointcloudOptions.borderColor=_;var L=n.marker.sizemin,S=Math.max(n.marker.sizemax,n.marker.sizemin);this.pointcloudOptions.sizeMin=L,this.pointcloudOptions.sizeMax=S,this.pointcloudOptions.areaRatio=n.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var E=this.scene.xaxis,P=this.scene.yaxis,F=S/2||.5;n._extremes[E._id]=A(E,[y[0],y[2]],{ppad:F}),n._extremes[P._id]=A(P,[y[1],y[3]],{ppad:F})},a.dispose=function(){this.pointcloud.dispose()};function i(n,r){var v=new e(n,r.uid);return v.update(r),v}B.exports=i},{"../../../stackgl_modules":1133,"../../lib/str2rgbarray":540,"../../plots/cartesian/autorange":565,"../scatter/get_trace_color":946}],924:[function(t,B,V){var m=t("../../lib"),c=t("./attributes");B.exports=function(T,e,a){function i(n,r){return m.coerce(T,e,c,n,r)}i("x"),i("y"),i("xbounds"),i("ybounds"),T.xy&&T.xy instanceof Float32Array&&(e.xy=T.xy),T.indices&&T.indices instanceof Int32Array&&(e.indices=T.indices),i("text"),i("marker.color",a),i("marker.opacity"),i("marker.blend"),i("marker.sizemin"),i("marker.sizemax"),i("marker.border.color",a),i("marker.border.arearatio"),e._length=null}},{"../../lib":515,"./attributes":922}],925:[function(t,B,V){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),calc:t("../scatter3d/calc"),plot:t("./convert"),moduleType:"trace",name:"pointcloud",basePlotModule:t("../../plots/gl2d"),categories:["gl","gl2d","showLegend"],meta:{}}},{"../../plots/gl2d":605,"../scatter3d/calc":965,"./attributes":922,"./convert":923,"./defaults":924}],926:[function(t,B,V){var m=t("../../plots/font_attributes"),c=t("../../plots/attributes"),A=t("../../components/color/attributes"),T=t("../../components/fx/attributes"),e=t("../../plots/domain").attributes,a=t("../../plots/template_attributes").hovertemplateAttrs,i=t("../../components/colorscale/attributes"),n=t("../../plot_api/plot_template").templatedArray,r=t("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,v=t("../../lib/extend").extendFlat,s=t("../../plot_api/edit_types").overrideAll,o=B.exports=s({hoverinfo:v({},c.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:T.hoverlabel,domain:e({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:r("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:m({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:A.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:T.hoverlabel,hovertemplate:a({},{keys:["value","label"]})},link:{arrowlen:{valType:"number",min:0,dflt:0},label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:A.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:T.hoverlabel,hovertemplate:a({},{keys:["value","label"]}),colorscales:n("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:v(i().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested");o.transforms=void 0},{"../../components/color/attributes":366,"../../components/colorscale/attributes":374,"../../components/fx/attributes":398,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/domain":593,"../../plots/font_attributes":594,"../../plots/template_attributes":642}],927:[function(t,B,V){var m=t("../../plot_api/edit_types").overrideAll,c=t("../../plots/get_data").getModuleCalcData,A=t("./plot"),T=t("../../components/fx/layout_attributes"),e=t("../../lib/setcursor"),a=t("../../components/dragelement"),i=t("../../components/selections").prepSelect,n=t("../../lib"),r=t("../../registry"),v="sankey";V.name=v,V.baseLayoutAttrOverrides=m({hoverlabel:T.hoverlabel},"plot","nested"),V.plot=function(o){var b=c(o.calcdata,v)[0];A(o,b),V.updateFx(o)},V.clean=function(o,b,g,d){var f=d._has&&d._has(v),y=b._has&&b._has(v);f&&!y&&(d._paperdiv.selectAll(".sankey").remove(),d._paperdiv.selectAll(".bgsankey").remove())},V.updateFx=function(o){for(var b=0;b<o._fullData.length;b++)s(o,b)};function s(o,b){var g=o._fullData[b],d=o._fullLayout,f=d.dragmode,y=d.dragmode==="pan"?"move":"crosshair",l=g._bgRect;if(!!l&&!(f==="pan"||f==="zoom")){e(l,y);var x={_id:"x",c2p:n.identity,_offset:g._sankey.translateX,_length:g._sankey.width},u={_id:"y",c2p:n.identity,_offset:g._sankey.translateY,_length:g._sankey.height},M={gd:o,element:l.node(),plotinfo:{id:b,xaxis:x,yaxis:u,fillRangeItems:n.noop},subplot:b,xaxes:[x],yaxes:[u],doneFnCompleted:function(_){var p=o._fullData[b],w,h=p.node.groups.slice(),L=[];function S(I){for(var D=p._sankey.graph.nodes,R=0;R<D.length;R++)if(D[R].pointNumber===I)return D[R]}for(var E=0;E<_.length;E++){var P=S(_[E].pointNumber);if(!!P)if(P.group){for(var F=0;F<P.childrenNodes.length;F++)L.push(P.childrenNodes[F].pointNumber);h[P.pointNumber-p.node._count]=!1}else L.push(P.pointNumber)}w=h.filter(Boolean).concat([L]),r.call("_guiRestyle",o,{"node.groups":[w]},b)}};M.prepFn=function(_,p,w){i(_,p,w,M,f)},a.init(M)}}},{"../../components/dragelement":386,"../../components/fx/layout_attributes":408,"../../components/selections":455,"../../lib":515,"../../lib/setcursor":536,"../../plot_api/edit_types":548,"../../plots/get_data":602,"../../registry":647,"./plot":932}],928:[function(t,B,V){var m=t("strongly-connected-components"),c=t("../../lib"),A=t("../../lib/gup").wrap,T=c.isArrayOrTypedArray,e=c.isIndex,a=t("../../components/colorscale");function i(r){var v=r.node,s=r.link,o=[],b=T(s.color),g=T(s.customdata),d={},f={},y=s.colorscales.length,l;for(l=0;l<y;l++){var x=s.colorscales[l],u=a.extractScale(x,{cLetter:"c"}),M=a.makeColorScaleFunc(u);f[x.label]=M}var _=0;for(l=0;l<s.value.length;l++)s.source[l]>_&&(_=s.source[l]),s.target[l]>_&&(_=s.target[l]);var p=_+1;r.node._count=p;var w,h=r.node.groups,L={};for(l=0;l<h.length;l++){var S=h[l];for(w=0;w<S.length;w++){var E=S[w],P=p+l;L.hasOwnProperty(E)?c.warn("Node "+E+" is already part of a group."):L[E]=P}}var F={source:[],target:[]};for(l=0;l<s.value.length;l++){var I=s.value[l],D=s.source[l],R=s.target[l];if(!!(I>0&&e(D,p)&&e(R,p))&&!(L.hasOwnProperty(D)&&L.hasOwnProperty(R)&&L[D]===L[R])){L.hasOwnProperty(R)&&(R=L[R]),L.hasOwnProperty(D)&&(D=L[D]),D=+D,R=+R,d[D]=d[R]=!0;var N="";s.label&&s.label[l]&&(N=s.label[l]);var z=null;N&&f.hasOwnProperty(N)&&(z=f[N]),o.push({pointNumber:l,label:N,color:b?s.color[l]:s.color,customdata:g?s.customdata[l]:s.customdata,concentrationscale:z,source:D,target:R,value:+I}),F.source.push(D),F.target.push(R)}}var G=p+h.length,Y=T(v.color),ee=T(v.customdata),Z=[];for(l=0;l<G;l++)if(!!d[l]){var X=v.label[l];Z.push({group:l>p-1,childrenNodes:[],pointNumber:l,label:X,color:Y?v.color[l]:v.color,customdata:ee?v.customdata[l]:v.customdata})}var ne=!1;return n(G,F.source,F.target)&&(ne=!0),{circular:ne,links:o,nodes:Z,groups:h,groupLookup:L}}function n(r,v,s){for(var o=c.init2dArray(r,0),b=0;b<Math.min(v.length,s.length);b++)if(c.isIndex(v[b],r)&&c.isIndex(s[b],r)){if(v[b]===s[b])return!0;o[v[b]].push(s[b])}var g=m(o);return g.components.some(function(d){return d.length>1})}B.exports=function(v,s){var o=i(s);return A({circular:o.circular,_nodes:o.nodes,_links:o.links,_groups:o.groups,_groupLookup:o.groupLookup})}},{"../../components/colorscale":379,"../../lib":515,"../../lib/gup":512,"strongly-connected-components":307}],929:[function(t,B,V){B.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},{}],930:[function(t,B,V){var m=t("../../lib"),c=t("./attributes"),A=t("../../components/color"),T=t("tinycolor2"),e=t("../../plots/domain").defaults,a=t("../../components/fx/hoverlabel_defaults"),i=t("../../plot_api/plot_template"),n=t("../../plots/array_container_defaults");B.exports=function(s,o,b,g){function d(S,E){return m.coerce(s,o,c,S,E)}var f=m.extendDeep(g.hoverlabel,s.hoverlabel),y=s.node,l=i.newContainer(o,"node");function x(S,E){return m.coerce(y,l,c.node,S,E)}x("label"),x("groups"),x("x"),x("y"),x("pad"),x("thickness"),x("line.color"),x("line.width"),x("hoverinfo",s.hoverinfo),a(y,l,x,f),x("hovertemplate");var u=g.colorway,M=function(S){return u[S%u.length]};x("color",l.label.map(function(S,E){return A.addOpacity(M(E),.8)})),x("customdata");var _=s.link||{},p=i.newContainer(o,"link");function w(S,E){return m.coerce(_,p,c.link,S,E)}w("label"),w("arrowlen"),w("source"),w("target"),w("value"),w("line.color"),w("line.width"),w("hoverinfo",s.hoverinfo),a(_,p,w,f),w("hovertemplate");var h=T(g.paper_bgcolor).getLuminance()<.333?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";w("color",m.repeat(h,p.value.length)),w("customdata"),n(_,p,{name:"colorscales",handleItemDefaults:r}),e(o,g,d),d("orientation"),d("valueformat"),d("valuesuffix");var L;l.x.length&&l.y.length&&(L="freeform"),d("arrangement",L),m.coerceFont(d,"textfont",m.extendFlat({},g.font)),o._length=null};function r(v,s){function o(b,g){return m.coerce(v,s,c.link.colorscales,b,g)}o("label"),o("cmin"),o("cmax"),o("colorscale")}},{"../../components/color":367,"../../components/fx/hoverlabel_defaults":405,"../../lib":515,"../../plot_api/plot_template":555,"../../plots/array_container_defaults":561,"../../plots/domain":593,"./attributes":926,tinycolor2:313}],931:[function(t,B,V){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),calc:t("./calc"),plot:t("./plot"),moduleType:"trace",name:"sankey",basePlotModule:t("./base_plot"),selectPoints:t("./select.js"),categories:["noOpacity"],meta:{}}},{"./attributes":926,"./base_plot":927,"./calc":928,"./defaults":930,"./plot":932,"./select.js":934}],932:[function(t,B,V){var m=t("@plotly/d3"),c=t("../../lib"),A=c.numberFormat,T=t("./render"),e=t("../../components/fx"),a=t("../../components/color"),i=t("./constants").cn,n=c._;function r(u){return u!==""}function v(u,M){return u.filter(function(_){return _.key===M.traceId})}function s(u,M){m.select(u).select("path").style("fill-opacity",M),m.select(u).select("rect").style("fill-opacity",M)}function o(u){m.select(u).select("text.name").style("fill","black")}function b(u){return function(M){return u.node.sourceLinks.indexOf(M.link)!==-1||u.node.targetLinks.indexOf(M.link)!==-1}}function g(u){return function(M){return M.node.sourceLinks.indexOf(u.link)!==-1||M.node.targetLinks.indexOf(u.link)!==-1}}function d(u,M,_){M&&_&&v(_,M).selectAll("."+i.sankeyLink).filter(b(M)).call(y.bind(0,M,_,!1))}function f(u,M,_){M&&_&&v(_,M).selectAll("."+i.sankeyLink).filter(b(M)).call(l.bind(0,M,_,!1))}function y(u,M,_,p){var w=p.datum().link.label;p.style("fill-opacity",function(h){if(!h.link.concentrationscale)return .4}),w&&v(M,u).selectAll("."+i.sankeyLink).filter(function(h){return h.link.label===w}).style("fill-opacity",function(h){if(!h.link.concentrationscale)return .4}),_&&v(M,u).selectAll("."+i.sankeyNode).filter(g(u)).call(d)}function l(u,M,_,p){var w=p.datum().link.label;p.style("fill-opacity",function(h){return h.tinyColorAlpha}),w&&v(M,u).selectAll("."+i.sankeyLink).filter(function(h){return h.link.label===w}).style("fill-opacity",function(h){return h.tinyColorAlpha}),_&&v(M,u).selectAll(i.sankeyNode).filter(g(u)).call(f)}function x(u,M){var _=u.hoverlabel||{},p=c.nestedProperty(_,M).get();return Array.isArray(p)?!1:p}B.exports=function(M,_){for(var p=M._fullLayout,w=p._paper,h=p._size,L=0;L<M._fullData.length;L++)if(!!M._fullData[L].visible&&M._fullData[L].type===i.sankey&&!M._fullData[L]._viewInitial){var S=M._fullData[L].node;M._fullData[L]._viewInitial={node:{groups:S.groups.slice(),x:S.x.slice(),y:S.y.slice()}}}var E=function(ne,ce){var Q=ce.link;Q.originalEvent=m.event,M._hoverdata=[Q],e.click(M,{target:!0})},P=function(ne,ce,Q){M._fullLayout.hovermode!==!1&&(m.select(ne).call(y.bind(0,ce,Q,!0)),ce.link.trace.link.hoverinfo!=="skip"&&(ce.link.fullData=ce.link.trace,M.emit("plotly_hover",{event:m.event,points:[ce.link]})))},F=n(M,"source:")+" ",I=n(M,"target:")+" ",D=n(M,"concentration:")+" ",R=n(M,"incoming flow count:")+" ",N=n(M,"outgoing flow count:")+" ",z=function(ne,ce){if(M._fullLayout.hovermode===!1)return;var Q=ce.link.trace.link;if(Q.hoverinfo==="none"||Q.hoverinfo==="skip")return;var K=[];function U(oe){var ae,se;oe.circular?(ae=(oe.circularPathData.leftInnerExtent+oe.circularPathData.rightInnerExtent)/2,se=oe.circularPathData.verticalFullExtent):(ae=(oe.source.x1+oe.target.x0)/2,se=(oe.y0+oe.y1)/2);var _e=[ae,se];return oe.trace.orientation==="v"&&_e.reverse(),_e[0]+=ce.parent.translateX,_e[1]+=ce.parent.translateY,_e}for(var H=0,q=0;q<ce.flow.links.length;q++){var re=ce.flow.links[q];if(!(M._fullLayout.hovermode==="closest"&&ce.link.pointNumber!==re.pointNumber)){ce.link.pointNumber===re.pointNumber&&(H=q),re.fullData=re.trace,Q=ce.link.trace.link;var j=U(re),$={valueLabel:A(ce.valueFormat)(re.value)+ce.valueSuffix};K.push({x:j[0],y:j[1],name:$.valueLabel,text:[re.label||"",F+re.source.label,I+re.target.label,re.concentrationscale?D+A("%0.2f")(re.flow.labelConcentration):""].filter(r).join("<br>"),color:x(Q,"bgcolor")||a.addOpacity(re.color,1),borderColor:x(Q,"bordercolor"),fontFamily:x(Q,"font.family"),fontSize:x(Q,"font.size"),fontColor:x(Q,"font.color"),nameLength:x(Q,"namelength"),textAlign:x(Q,"align"),idealAlign:m.event.x<j[0]?"right":"left",hovertemplate:Q.hovertemplate,hovertemplateLabels:$,eventData:[re]})}}var ie=e.loneHover(K,{container:p._hoverlayer.node(),outerContainer:p._paper.node(),gd:M,anchorIndex:H});ie.each(function(){var oe=this;ce.link.concentrationscale||s(oe,.65),o(oe)})},G=function(ne,ce,Q){M._fullLayout.hovermode!==!1&&(m.select(ne).call(l.bind(0,ce,Q,!0)),ce.link.trace.link.hoverinfo!=="skip"&&(ce.link.fullData=ce.link.trace,M.emit("plotly_unhover",{event:m.event,points:[ce.link]})),e.loneUnhover(p._hoverlayer.node()))},Y=function(ne,ce,Q){var K=ce.node;K.originalEvent=m.event,M._hoverdata=[K],m.select(ne).call(f,ce,Q),e.click(M,{target:!0})},ee=function(ne,ce,Q){M._fullLayout.hovermode!==!1&&(m.select(ne).call(d,ce,Q),ce.node.trace.node.hoverinfo!=="skip"&&(ce.node.fullData=ce.node.trace,M.emit("plotly_hover",{event:m.event,points:[ce.node]})))},Z=function(ne,ce){if(M._fullLayout.hovermode!==!1){var Q=ce.node.trace.node;if(!(Q.hoverinfo==="none"||Q.hoverinfo==="skip")){var K=m.select(ne).select("."+i.nodeRect),U=M._fullLayout._paperdiv.node().getBoundingClientRect(),H=K.node().getBoundingClientRect(),q=H.left-2-U.left,re=H.right+2-U.left,j=H.top+H.height/4-U.top,$={valueLabel:A(ce.valueFormat)(ce.node.value)+ce.valueSuffix};ce.node.fullData=ce.node.trace,M._fullLayout._calcInverseTransform(M);var ie=M._fullLayout._invScaleX,oe=M._fullLayout._invScaleY,ae=e.loneHover({x0:ie*q,x1:ie*re,y:oe*j,name:A(ce.valueFormat)(ce.node.value)+ce.valueSuffix,text:[ce.node.label,R+ce.node.targetLinks.length,N+ce.node.sourceLinks.length].filter(r).join("<br>"),color:x(Q,"bgcolor")||ce.tinyColorHue,borderColor:x(Q,"bordercolor"),fontFamily:x(Q,"font.family"),fontSize:x(Q,"font.size"),fontColor:x(Q,"font.color"),nameLength:x(Q,"namelength"),textAlign:x(Q,"align"),idealAlign:"left",hovertemplate:Q.hovertemplate,hovertemplateLabels:$,eventData:[ce.node]},{container:p._hoverlayer.node(),outerContainer:p._paper.node(),gd:M});s(ae,.85),o(ae)}}},X=function(ne,ce,Q){M._fullLayout.hovermode!==!1&&(m.select(ne).call(f,ce,Q),ce.node.trace.node.hoverinfo!=="skip"&&(ce.node.fullData=ce.node.trace,M.emit("plotly_unhover",{event:m.event,points:[ce.node]})),e.loneUnhover(p._hoverlayer.node()))};T(M,w,_,{width:h.w,height:h.h,margin:{t:h.t,r:h.r,b:h.b,l:h.l}},{linkEvents:{hover:P,follow:z,unhover:G,select:E},nodeEvents:{hover:ee,follow:Z,unhover:X,select:Y}})}},{"../../components/color":367,"../../components/fx":407,"../../lib":515,"./constants":929,"./render":933,"@plotly/d3":58}],933:[function(t,B,V){var m=t("d3-force"),c=t("d3-interpolate").interpolateNumber,A=t("@plotly/d3"),T=t("@plotly/d3-sankey"),e=t("@plotly/d3-sankey-circular"),a=t("./constants"),i=t("tinycolor2"),n=t("../../components/color"),r=t("../../components/drawing"),v=t("../../lib"),s=v.strTranslate,o=v.strRotate,b=t("../../lib/gup"),g=b.keyFun,d=b.repeat,f=b.unwrap,y=t("../../lib/svg_text_utils"),l=t("../../registry"),x=t("../../constants/alignment"),u=x.CAP_SHIFT,M=x.LINE_SPACING,_=3;function p(U,H,q){var re=f(H),j=re.trace,$=j.domain,ie=j.orientation==="h",oe=j.node.pad,ae=j.node.thickness,se=U.width*($.x[1]-$.x[0]),_e=U.height*($.y[1]-$.y[0]),ue=re._nodes,ye=re._links,xe=re.circular,me;xe?me=e.sankeyCircular().circularLinkGap(0):me=T.sankey(),me.iterations(a.sankeyIterations).size(ie?[se,_e]:[_e,se]).nodeWidth(ae).nodePadding(oe).nodeId(function(zt){return zt.pointNumber}).nodes(ue).links(ye);var be=me();me.nodePadding()<oe&&v.warn("node.pad was reduced to ",me.nodePadding()," to fit within the figure.");var ke,De,Ve;for(var Ae in re._groupLookup){var Le=parseInt(re._groupLookup[Ae]),je;for(ke=0;ke<be.nodes.length;ke++)if(be.nodes[ke].pointNumber===Le){je=be.nodes[ke];break}if(!!je){var Ye={pointNumber:parseInt(Ae),x0:je.x0,x1:je.x1,y0:je.y0,y1:je.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};be.nodes.unshift(Ye),je.childrenNodes.unshift(Ye)}}function ze(){for(ke=0;ke<be.nodes.length;ke++){var zt=be.nodes[ke],Et={},Xt,Nt;for(De=0;De<zt.targetLinks.length;De++)Nt=zt.targetLinks[De],Xt=Nt.source.pointNumber+":"+Nt.target.pointNumber,Et.hasOwnProperty(Xt)||(Et[Xt]=[]),Et[Xt].push(Nt);var Ct=Object.keys(Et);for(De=0;De<Ct.length;De++){Xt=Ct[De];var Xe=Et[Xt],at=0,Ge={};for(Ve=0;Ve<Xe.length;Ve++)Nt=Xe[Ve],Ge[Nt.label]||(Ge[Nt.label]=0),Ge[Nt.label]+=Nt.value,at+=Nt.value;for(Ve=0;Ve<Xe.length;Ve++)Nt=Xe[Ve],Nt.flow={value:at,labelConcentration:Ge[Nt.label]/at,concentration:Nt.value/at,links:Xe},Nt.concentrationscale&&(Nt.color=i(Nt.concentrationscale(Nt.flow.labelConcentration)))}var Se=0;for(De=0;De<zt.sourceLinks.length;De++)Se+=zt.sourceLinks[De].value;for(De=0;De<zt.sourceLinks.length;De++)Nt=zt.sourceLinks[De],Nt.concentrationOut=Nt.value/Se;var He=0;for(De=0;De<zt.targetLinks.length;De++)He+=zt.targetLinks[De].value;for(De=0;De<zt.targetLinks.length;De++)Nt=zt.targetLinks[De],Nt.concenrationIn=Nt.value/He}}ze();function Ie(zt){zt.forEach(function(Et){var Xt,Nt,Ct=0,Xe=Et.length,at;for(Et.sort(function(Ge,Se){return Ge.y0-Se.y0}),at=0;at<Xe;++at)Xt=Et[at],Xt.y0>=Ct||(Nt=Ct-Xt.y0,Nt>1e-6&&(Xt.y0+=Nt,Xt.y1+=Nt)),Ct=Xt.y1+oe})}function We(zt){var Et=zt.map(function(Se,He){return{x0:Se.x0,index:He}}).sort(function(Se,He){return Se.x0-He.x0}),Xt=[],Nt=-1,Ct,Xe=-1/0,at;for(ke=0;ke<Et.length;ke++){var Ge=zt[Et[ke].index];Ge.x0>Xe+ae&&(Nt+=1,Ct=Ge.x0),Xe=Ge.x0,Xt[Nt]||(Xt[Nt]=[]),Xt[Nt].push(Ge),at=Ct-Ge.x0,Ge.x0+=at,Ge.x1+=at}return Xt}if(j.node.x.length&&j.node.y.length){for(ke=0;ke<Math.min(j.node.x.length,j.node.y.length,be.nodes.length);ke++)if(j.node.x[ke]&&j.node.y[ke]){var pt=[j.node.x[ke]*se,j.node.y[ke]*_e];be.nodes[ke].x0=pt[0]-ae/2,be.nodes[ke].x1=pt[0]+ae/2;var Ft=be.nodes[ke].y1-be.nodes[ke].y0;be.nodes[ke].y0=pt[1]-Ft/2,be.nodes[ke].y1=pt[1]+Ft/2}if(j.arrangement==="snap"){ue=be.nodes;var Qt=We(ue);Ie(Qt)}me.update(be)}return{circular:xe,key:q,trace:j,guid:v.randstr(),horizontal:ie,width:se,height:_e,nodePad:j.node.pad,nodeLineColor:j.node.line.color,nodeLineWidth:j.node.line.width,linkLineColor:j.link.line.color,linkLineWidth:j.link.line.width,linkArrowLength:j.link.arrowlen,valueFormat:j.valueformat,valueSuffix:j.valuesuffix,textFont:j.textfont,translateX:$.x[0]*U.width+U.margin.l,translateY:U.height-$.y[1]*U.height+U.margin.t,dragParallel:ie?_e:se,dragPerpendicular:ie?se:_e,arrangement:j.arrangement,sankey:me,graph:be,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function w(U,H,q){var re=i(H.color),j=H.source.label+"|"+H.target.label,$=j+"__"+q;return H.trace=U.trace,H.curveNumber=U.trace.index,{circular:U.circular,key:$,traceId:U.key,pointNumber:H.pointNumber,link:H,tinyColorHue:n.tinyRGB(re),tinyColorAlpha:re.getAlpha(),linkPath:L,linkLineColor:U.linkLineColor,linkLineWidth:U.linkLineWidth,linkArrowLength:U.linkArrowLength,valueFormat:U.valueFormat,valueSuffix:U.valueSuffix,sankey:U.sankey,parent:U,interactionState:U.interactionState,flow:H.flow}}function h(U,H){var q="",re=U.width/2,j=U.circularPathData;return U.circularLinkType==="top"?q="M "+(j.targetX-H)+" "+(j.targetY+re)+" L"+(j.rightInnerExtent-H)+" "+(j.targetY+re)+"A"+(j.rightLargeArcRadius+re)+" "+(j.rightSmallArcRadius+re)+" 0 0 1 "+(j.rightFullExtent-re-H)+" "+(j.targetY-j.rightSmallArcRadius)+"L"+(j.rightFullExtent-re-H)+" "+j.verticalRightInnerExtent+"A"+(j.rightLargeArcRadius+re)+" "+(j.rightLargeArcRadius+re)+" 0 0 1 "+(j.rightInnerExtent-H)+" "+(j.verticalFullExtent-re)+"L"+j.leftInnerExtent+" "+(j.verticalFullExtent-re)+"A"+(j.leftLargeArcRadius+re)+" "+(j.leftLargeArcRadius+re)+" 0 0 1 "+(j.leftFullExtent+re)+" "+j.verticalLeftInnerExtent+"L"+(j.leftFullExtent+re)+" "+(j.sourceY-j.leftSmallArcRadius)+"A"+(j.leftLargeArcRadius+re)+" "+(j.leftSmallArcRadius+re)+" 0 0 1 "+j.leftInnerExtent+" "+(j.sourceY+re)+"L"+j.sourceX+" "+(j.sourceY+re)+"L"+j.sourceX+" "+(j.sourceY-re)+"L"+j.leftInnerExtent+" "+(j.sourceY-re)+"A"+(j.leftLargeArcRadius-re)+" "+(j.leftSmallArcRadius-re)+" 0 0 0 "+(j.leftFullExtent-re)+" "+(j.sourceY-j.leftSmallArcRadius)+"L"+(j.leftFullExtent-re)+" "+j.verticalLeftInnerExtent+"A"+(j.leftLargeArcRadius-re)+" "+(j.leftLargeArcRadius-re)+" 0 0 0 "+j.leftInnerExtent+" "+(j.verticalFullExtent+re)+"L"+(j.rightInnerExtent-H)+" "+(j.verticalFullExtent+re)+"A"+(j.rightLargeArcRadius-re)+" "+(j.rightLargeArcRadius-re)+" 0 0 0 "+(j.rightFullExtent+re-H)+" "+j.verticalRightInnerExtent+"L"+(j.rightFullExtent+re-H)+" "+(j.targetY-j.rightSmallArcRadius)+"A"+(j.rightLargeArcRadius-re)+" "+(j.rightSmallArcRadius-re)+" 0 0 0 "+(j.rightInnerExtent-H)+" "+(j.targetY-re)+"L"+(j.targetX-H)+" "+(j.targetY-re)+(H>0?"L"+j.targetX+" "+j.targetY:"")+"Z":q="M "+(j.targetX-H)+" "+(j.targetY-re)+" L"+(j.rightInnerExtent-H)+" "+(j.targetY-re)+"A"+(j.rightLargeArcRadius+re)+" "+(j.rightSmallArcRadius+re)+" 0 0 0 "+(j.rightFullExtent-re-H)+" "+(j.targetY+j.rightSmallArcRadius)+"L"+(j.rightFullExtent-re-H)+" "+j.verticalRightInnerExtent+"A"+(j.rightLargeArcRadius+re)+" "+(j.rightLargeArcRadius+re)+" 0 0 0 "+(j.rightInnerExtent-H)+" "+(j.verticalFullExtent+re)+"L"+j.leftInnerExtent+" "+(j.verticalFullExtent+re)+"A"+(j.leftLargeArcRadius+re)+" "+(j.leftLargeArcRadius+re)+" 0 0 0 "+(j.leftFullExtent+re)+" "+j.verticalLeftInnerExtent+"L"+(j.leftFullExtent+re)+" "+(j.sourceY+j.leftSmallArcRadius)+"A"+(j.leftLargeArcRadius+re)+" "+(j.leftSmallArcRadius+re)+" 0 0 0 "+j.leftInnerExtent+" "+(j.sourceY-re)+"L"+j.sourceX+" "+(j.sourceY-re)+"L"+j.sourceX+" "+(j.sourceY+re)+"L"+j.leftInnerExtent+" "+(j.sourceY+re)+"A"+(j.leftLargeArcRadius-re)+" "+(j.leftSmallArcRadius-re)+" 0 0 1 "+(j.leftFullExtent-re)+" "+(j.sourceY+j.leftSmallArcRadius)+"L"+(j.leftFullExtent-re)+" "+j.verticalLeftInnerExtent+"A"+(j.leftLargeArcRadius-re)+" "+(j.leftLargeArcRadius-re)+" 0 0 1 "+j.leftInnerExtent+" "+(j.verticalFullExtent-re)+"L"+(j.rightInnerExtent-H)+" "+(j.verticalFullExtent-re)+"A"+(j.rightLargeArcRadius-re)+" "+(j.rightLargeArcRadius-re)+" 0 0 1 "+(j.rightFullExtent+re-H)+" "+j.verticalRightInnerExtent+"L"+(j.rightFullExtent+re-H)+" "+(j.targetY+j.rightSmallArcRadius)+"A"+(j.rightLargeArcRadius-re)+" "+(j.rightSmallArcRadius-re)+" 0 0 1 "+(j.rightInnerExtent-H)+" "+(j.targetY+re)+"L"+(j.targetX-H)+" "+(j.targetY+re)+(H>0?"L"+j.targetX+" "+j.targetY:"")+"Z",q}function L(){var U=.5;function H(q){var re=q.linkArrowLength;if(q.link.circular)return h(q.link,re);var j=Math.abs((q.link.target.x0-q.link.source.x1)/2);re>j&&(re=j);var $=q.link.source.x1,ie=q.link.target.x0-re,oe=c($,ie),ae=oe(U),se=oe(1-U),_e=q.link.y0-q.link.width/2,ue=q.link.y0+q.link.width/2,ye=q.link.y1-q.link.width/2,xe=q.link.y1+q.link.width/2,me="M"+$+","+_e,be="C"+ae+","+_e+" "+se+","+ye+" "+ie+","+ye,ke="C"+se+","+xe+" "+ae+","+ue+" "+$+","+ue,De=re>0?"L"+(ie+re)+","+(ye+q.link.width/2):"";return De+="L"+ie+","+xe,me+be+De+ke+"Z"}return H}function S(U,H){var q=i(H.color),re=a.nodePadAcross,j=U.nodePad/2;H.dx=H.x1-H.x0,H.dy=H.y1-H.y0;var $=H.dx,ie=Math.max(.5,H.dy),oe="node_"+H.pointNumber;return H.group&&(oe=v.randstr()),H.trace=U.trace,H.curveNumber=U.trace.index,{index:H.pointNumber,key:oe,partOfGroup:H.partOfGroup||!1,group:H.group,traceId:U.key,trace:U.trace,node:H,nodePad:U.nodePad,nodeLineColor:U.nodeLineColor,nodeLineWidth:U.nodeLineWidth,textFont:U.textFont,size:U.horizontal?U.height:U.width,visibleWidth:Math.ceil($),visibleHeight:ie,zoneX:-re,zoneY:-j,zoneWidth:$+2*re,zoneHeight:ie+2*j,labelY:U.horizontal?H.dy/2+1:H.dx/2+1,left:H.originalLayer===1,sizeAcross:U.width,forceLayouts:U.forceLayouts,horizontal:U.horizontal,darkBackground:q.getBrightness()<=128,tinyColorHue:n.tinyRGB(q),tinyColorAlpha:q.getAlpha(),valueFormat:U.valueFormat,valueSuffix:U.valueSuffix,sankey:U.sankey,graph:U.graph,arrangement:U.arrangement,uniqueNodeLabelPathId:[U.guid,U.key,oe].join("_"),interactionState:U.interactionState,figure:U}}function E(U){U.attr("transform",function(H){return s(H.node.x0.toFixed(3),H.node.y0.toFixed(3))})}function P(U){U.call(E)}function F(U,H){U.call(P),H.attr("d",L())}function I(U){U.attr("width",function(H){return H.node.x1-H.node.x0}).attr("height",function(H){return H.visibleHeight})}function D(U){return U.link.width>1||U.linkLineWidth>0}function R(U){var H=s(U.translateX,U.translateY);return H+(U.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function N(U,H,q){U.on(".basic",null).on("mouseover.basic",function(re){!re.interactionState.dragInProgress&&!re.partOfGroup&&(q.hover(this,re,H),re.interactionState.hovered=[this,re])}).on("mousemove.basic",function(re){!re.interactionState.dragInProgress&&!re.partOfGroup&&(q.follow(this,re),re.interactionState.hovered=[this,re])}).on("mouseout.basic",function(re){!re.interactionState.dragInProgress&&!re.partOfGroup&&(q.unhover(this,re,H),re.interactionState.hovered=!1)}).on("click.basic",function(re){re.interactionState.hovered&&(q.unhover(this,re,H),re.interactionState.hovered=!1),!re.interactionState.dragInProgress&&!re.partOfGroup&&q.select(this,re,H)})}function z(U,H,q,re){var j=A.behavior.drag().origin(function($){return{x:$.node.x0+$.visibleWidth/2,y:$.node.y0+$.visibleHeight/2}}).on("dragstart",function($){if($.arrangement!=="fixed"&&(v.ensureSingle(re._fullLayout._infolayer,"g","dragcover",function(oe){re._fullLayout._dragCover=oe}),v.raiseToTop(this),$.interactionState.dragInProgress=$.node,ne($.node),$.interactionState.hovered&&(q.nodeEvents.unhover.apply(0,$.interactionState.hovered),$.interactionState.hovered=!1),$.arrangement==="snap")){var ie=$.traceId+"|"+$.key;$.forceLayouts[ie]?$.forceLayouts[ie].alpha(1):G(U,ie,$),Y(U,H,$,ie,re)}}).on("drag",function($){if($.arrangement!=="fixed"){var ie=A.event.x,oe=A.event.y;$.arrangement==="snap"?($.node.x0=ie-$.visibleWidth/2,$.node.x1=ie+$.visibleWidth/2,$.node.y0=oe-$.visibleHeight/2,$.node.y1=oe+$.visibleHeight/2):($.arrangement==="freeform"&&($.node.x0=ie-$.visibleWidth/2,$.node.x1=ie+$.visibleWidth/2),oe=Math.max(0,Math.min($.size-$.visibleHeight/2,oe)),$.node.y0=oe-$.visibleHeight/2,$.node.y1=oe+$.visibleHeight/2),ne($.node),$.arrangement!=="snap"&&($.sankey.update($.graph),F(U.filter(ce($)),H))}}).on("dragend",function($){if($.arrangement!=="fixed"){$.interactionState.dragInProgress=!1;for(var ie=0;ie<$.node.childrenNodes.length;ie++)$.node.childrenNodes[ie].x=$.node.x,$.node.childrenNodes[ie].y=$.node.y;$.arrangement!=="snap"&&Z($,re)}});U.on(".drag",null).call(j)}function G(U,H,q,re){Q(q.graph.nodes);var j=q.graph.nodes.filter(function($){return $.originalX===q.node.originalX}).filter(function($){return!$.partOfGroup});q.forceLayouts[H]=m.forceSimulation(j).alphaDecay(0).force("collide",m.forceCollide().radius(function($){return $.dy/2+q.nodePad/2}).strength(1).iterations(a.forceIterations)).force("constrain",ee(U,H,j,q)).stop()}function Y(U,H,q,re,j){window.requestAnimationFrame(function $(){var ie;for(ie=0;ie<a.forceTicksPerFrame;ie++)q.forceLayouts[re].tick();var oe=q.graph.nodes;if(K(oe),q.sankey.update(q.graph),F(U.filter(ce(q)),H),q.forceLayouts[re].alpha()>0)window.requestAnimationFrame($);else{var ae=q.node.originalX;q.node.x0=ae-q.visibleWidth/2,q.node.x1=ae+q.visibleWidth/2,Z(q,j)}})}function ee(U,H,q,re){return function(){for(var $=0,ie=0;ie<q.length;ie++){var oe=q[ie];oe===re.interactionState.dragInProgress?(oe.x=oe.lastDraggedX,oe.y=oe.lastDraggedY):(oe.vx=(oe.originalX-oe.x)/a.forceTicksPerFrame,oe.y=Math.min(re.size-oe.dy/2,Math.max(oe.dy/2,oe.y))),$=Math.max($,Math.abs(oe.vx),Math.abs(oe.vy))}!re.interactionState.dragInProgress&&$<.1&&re.forceLayouts[H].alpha()>0&&re.forceLayouts[H].alpha(0)}}function Z(U,H){for(var q=[],re=[],j=0;j<U.graph.nodes.length;j++){var $=(U.graph.nodes[j].x0+U.graph.nodes[j].x1)/2,ie=(U.graph.nodes[j].y0+U.graph.nodes[j].y1)/2;q.push($/U.figure.width),re.push(ie/U.figure.height)}l.call("_guiRestyle",H,{"node.x":[q],"node.y":[re]},U.trace.index).then(function(){H._fullLayout._dragCover&&H._fullLayout._dragCover.remove()})}function X(U){var H=[],q;for(q=0;q<U.length;q++)U[q].originalX=(U[q].x0+U[q].x1)/2,U[q].originalY=(U[q].y0+U[q].y1)/2,H.indexOf(U[q].originalX)===-1&&H.push(U[q].originalX);for(H.sort(function(re,j){return re-j}),q=0;q<U.length;q++)U[q].originalLayerIndex=H.indexOf(U[q].originalX),U[q].originalLayer=U[q].originalLayerIndex/(H.length-1)}function ne(U){U.lastDraggedX=U.x0+U.dx/2,U.lastDraggedY=U.y0+U.dy/2}function ce(U){return function(H){return H.node.originalX===U.node.originalX}}function Q(U){for(var H=0;H<U.length;H++)U[H].y=(U[H].y0+U[H].y1)/2,U[H].x=(U[H].x0+U[H].x1)/2}function K(U){for(var H=0;H<U.length;H++)U[H].y0=U[H].y-U[H].dy/2,U[H].y1=U[H].y0+U[H].dy,U[H].x0=U[H].x-U[H].dx/2,U[H].x1=U[H].x0+U[H].dx}B.exports=function(U,H,q,re,j){var $=U._context.staticPlot,ie=!1;v.ensureSingle(U._fullLayout._infolayer,"g","first-render",function(){ie=!0});var oe=U._fullLayout._dragCover,ae=q.filter(function(ke){return f(ke).trace.visible}).map(p.bind(null,re)),se=H.selectAll("."+a.cn.sankey).data(ae,g);se.exit().remove(),se.enter().append("g").classed(a.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events",$?"none":"auto").attr("transform",R),se.each(function(ke,De){U._fullData[De]._sankey=ke;var Ve="bgsankey-"+ke.trace.uid+"-"+De;v.ensureSingle(U._fullLayout._draggers,"rect",Ve),U._fullData[De]._bgRect=A.select("."+Ve),U._fullData[De]._bgRect.style("pointer-events",$?"none":"all").attr("width",ke.width).attr("height",ke.height).attr("x",ke.translateX).attr("y",ke.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),se.transition().ease(a.ease).duration(a.duration).attr("transform",R);var _e=se.selectAll("."+a.cn.sankeyLinks).data(d,g);_e.enter().append("g").classed(a.cn.sankeyLinks,!0).style("fill","none");var ue=_e.selectAll("."+a.cn.sankeyLink).data(function(ke){var De=ke.graph.links;return De.filter(function(Ve){return Ve.value}).map(w.bind(null,ke))},g);ue.enter().append("path").classed(a.cn.sankeyLink,!0).call(N,se,j.linkEvents),ue.style("stroke",function(ke){return D(ke)?n.tinyRGB(i(ke.linkLineColor)):ke.tinyColorHue}).style("stroke-opacity",function(ke){return D(ke)?n.opacity(ke.linkLineColor):ke.tinyColorAlpha}).style("fill",function(ke){return ke.tinyColorHue}).style("fill-opacity",function(ke){return ke.tinyColorAlpha}).style("stroke-width",function(ke){return D(ke)?ke.linkLineWidth:1}).attr("d",L()),ue.style("opacity",function(){return U._context.staticPlot||ie||oe?1:0}).transition().ease(a.ease).duration(a.duration).style("opacity",1),ue.exit().transition().ease(a.ease).duration(a.duration).style("opacity",0).remove();var ye=se.selectAll("."+a.cn.sankeyNodeSet).data(d,g);ye.enter().append("g").classed(a.cn.sankeyNodeSet,!0),ye.style("cursor",function(ke){switch(ke.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var xe=ye.selectAll("."+a.cn.sankeyNode).data(function(ke){var De=ke.graph.nodes;return X(De),De.map(S.bind(null,ke))},g);xe.enter().append("g").classed(a.cn.sankeyNode,!0).call(E).style("opacity",function(ke){return(U._context.staticPlot||ie)&&!ke.partOfGroup?1:0}),xe.call(N,se,j.nodeEvents).call(z,ue,j,U),xe.transition().ease(a.ease).duration(a.duration).call(E).style("opacity",function(ke){return ke.partOfGroup?0:1}),xe.exit().transition().ease(a.ease).duration(a.duration).style("opacity",0).remove();var me=xe.selectAll("."+a.cn.nodeRect).data(d);me.enter().append("rect").classed(a.cn.nodeRect,!0).call(I),me.style("stroke-width",function(ke){return ke.nodeLineWidth}).style("stroke",function(ke){return n.tinyRGB(i(ke.nodeLineColor))}).style("stroke-opacity",function(ke){return n.opacity(ke.nodeLineColor)}).style("fill",function(ke){return ke.tinyColorHue}).style("fill-opacity",function(ke){return ke.tinyColorAlpha}),me.transition().ease(a.ease).duration(a.duration).call(I);var be=xe.selectAll("."+a.cn.nodeLabel).data(d);be.enter().append("text").classed(a.cn.nodeLabel,!0).style("cursor","default"),be.attr("data-notex",1).text(function(ke){return ke.node.label}).each(function(ke){var De=A.select(this);r.font(De,ke.textFont),y.convertToTspans(De,U)}).style("text-shadow",y.makeTextShadow(U._fullLayout.paper_bgcolor)).attr("text-anchor",function(ke){return ke.horizontal&&ke.left?"end":"start"}).attr("transform",function(ke){var De=A.select(this),Ve=y.lineCount(De),Ae=ke.textFont.size*((Ve-1)*M-u),Le=ke.nodeLineWidth/2+_,je=((ke.horizontal?ke.visibleHeight:ke.visibleWidth)-Ae)/2;ke.horizontal&&(ke.left?Le=-Le:Le+=ke.visibleWidth);var Ye=ke.horizontal?"":"scale(-1,1)"+o(90);return s(ke.horizontal?Le:je,ke.horizontal?je:Le)+Ye}),be.transition().ease(a.ease).duration(a.duration)}},{"../../components/color":367,"../../components/drawing":389,"../../constants/alignment":483,"../../lib":515,"../../lib/gup":512,"../../lib/svg_text_utils":541,"../../registry":647,"./constants":929,"@plotly/d3":58,"@plotly/d3-sankey":57,"@plotly/d3-sankey-circular":56,"d3-force":111,"d3-interpolate":116,tinycolor2:313}],934:[function(t,B,V){B.exports=function(c,A){for(var T=c.cd,e=[],a=T[0].trace,i=a._sankey.graph.nodes,n=0;n<i.length;n++){var r=i[n];if(!r.partOfGroup){var v=[(r.x0+r.x1)/2,(r.y0+r.y1)/2];a.orientation==="v"&&v.reverse(),A&&A.contains(v,!1,n,c)&&e.push({pointNumber:r.pointNumber})}}return e}},{}],935:[function(t,B,V){var m=t("../../lib");B.exports=function(A,T){for(var e=0;e<A.length;e++)A[e].i=e;m.mergeArray(T.text,A,"tx"),m.mergeArray(T.texttemplate,A,"txt"),m.mergeArray(T.hovertext,A,"htx"),m.mergeArray(T.customdata,A,"data"),m.mergeArray(T.textposition,A,"tp"),T.textfont&&(m.mergeArrayCastPositive(T.textfont.size,A,"ts"),m.mergeArray(T.textfont.color,A,"tc"),m.mergeArray(T.textfont.family,A,"tf"));var a=T.marker;if(a){m.mergeArrayCastPositive(a.size,A,"ms"),m.mergeArrayCastPositive(a.opacity,A,"mo"),m.mergeArray(a.symbol,A,"mx"),m.mergeArray(a.angle,A,"ma"),m.mergeArray(a.standoff,A,"mf"),m.mergeArray(a.color,A,"mc");var i=a.line;a.line&&(m.mergeArray(i.color,A,"mlc"),m.mergeArrayCastPositive(i.width,A,"mlw"));var n=a.gradient;n&&n.type!=="none"&&(m.mergeArray(n.type,A,"mgt"),m.mergeArray(n.color,A,"mgc"))}}},{"../../lib":515}],936:[function(t,B,V){var m=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,c=t("../../plots/template_attributes").texttemplateAttrs,A=t("../../plots/template_attributes").hovertemplateAttrs,T=t("../../components/colorscale/attributes"),e=t("../../plots/font_attributes"),a=t("../../components/drawing/attributes").dash,i=t("../../components/drawing/attributes").pattern,n=t("../../components/drawing"),r=t("./constants"),v=t("../../lib/extend").extendFlat;function s(g){return{valType:"any",dflt:0,editType:"calc"}}function o(g){return{valType:"any",editType:"calc"}}function b(g){return{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"}}B.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:s(),yperiod:s(),xperiod0:o(),yperiod0:o(),xperiodalignment:b(),yperiodalignment:b(),xhoverformat:m("x"),yhoverformat:m("y"),stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:c({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:A({},{keys:r.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:v({},a,{editType:"style"}),backoff:{valType:"number",min:0,dflt:"auto",arrayOk:!0,editType:"plot"},simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},fillpattern:i,marker:v({symbol:{valType:"enumerated",values:n.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},angle:{valType:"angle",dflt:0,arrayOk:!0,editType:"plot",anim:!1},angleref:{valType:"enumerated",values:["previous","up"],dflt:"up",editType:"plot",anim:!1},standoff:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"plot",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:v({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},T("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},T("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:e({editType:"calc",colorEditType:"style",arrayOk:!0})}},{"../../components/colorscale/attributes":374,"../../components/drawing":389,"../../components/drawing/attributes":388,"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../../plots/font_attributes":594,"../../plots/template_attributes":642,"./constants":940}],937:[function(t,B,V){var m=t("fast-isnumeric"),c=t("../../lib"),A=t("../../plots/cartesian/axes"),T=t("../../plots/cartesian/align_period"),e=t("../../constants/numerical").BADNUM,a=t("./subtypes"),i=t("./colorscale_calc"),n=t("./arrays_to_calcdata"),r=t("./calc_selection");function v(f,y){var l=f._fullLayout,x=y._xA=A.getFromId(f,y.xaxis||"x","x"),u=y._yA=A.getFromId(f,y.yaxis||"y","y"),M=x.makeCalcdata(y,"x"),_=u.makeCalcdata(y,"y"),p=T(y,x,"x",M),w=T(y,u,"y",_),h=p.vals,L=w.vals,S=y._length,E=new Array(S),P=y.ids,F=d(y,l,x,u),I=!1,D,R,N,z,G,Y;b(l,y);var ee="x",Z="y",X;if(F)c.pushUnique(F.traceIndices,y._expandedIndex),D=F.orientation==="v",D?(Z="s",X="x"):(ee="s",X="y"),G=F.stackgaps==="interpolate";else{var ne=o(y,S);s(f,y,x,u,h,L,ne)}var ce=!!y.xperiodalignment,Q=!!y.yperiodalignment;for(R=0;R<S;R++){var K=E[R]={},U=m(h[R]),H=m(L[R]);U&&H?(K[ee]=h[R],K[Z]=L[R],ce&&(K.orig_x=M[R],K.xEnd=p.ends[R],K.xStart=p.starts[R]),Q&&(K.orig_y=_[R],K.yEnd=w.ends[R],K.yStart=w.starts[R])):F&&(D?U:H)?(K[X]=D?h[R]:L[R],K.gap=!0,G?(K.s=e,I=!0):K.s=0):K[ee]=K[Z]=e,P&&(K.id=String(P[R]))}if(n(E,y),i(f,y),r(E,y),F){for(R=0;R<E.length;)E[R][X]===e?E.splice(R,1):R++;if(c.sort(E,function($,ie){return $[X]-ie[X]||$.i-ie.i}),I){for(R=0;R<E.length-1&&E[R].gap;)R++;for(Y=E[R].s,Y||(Y=E[R].s=0),N=0;N<R;N++)E[N].s=Y;for(z=E.length-1;z>R&&E[z].gap;)z--;for(Y=E[z].s,N=E.length-1;N>z;N--)E[N].s=Y;for(;R<z;)if(R++,E[R].gap){for(N=R+1;E[N].gap;)N++;for(var q=E[R-1][X],re=E[R-1].s,j=(E[N].s-re)/(E[N][X]-q);R<N;)E[R].s=re+(E[R][X]-q)*j,R++}}}return E}function s(f,y,l,x,u,M,_){var p=y._length,w=f._fullLayout,h=l._id,L=x._id,S=w._firstScatter[g(y)]===y.uid,E=(d(y,w,l,x)||{}).orientation,P=y.fill;l._minDtick=0,x._minDtick=0;var F={padded:!0},I={padded:!0};_&&(F.ppad=I.ppad=_);var D=p<2||u[0]!==u[p-1]||M[0]!==M[p-1];D&&(P==="tozerox"||P==="tonextx"&&(S||E==="h"))?F.tozero=!0:!(y.error_y||{}).visible&&(P==="tonexty"||P==="tozeroy"||!a.hasMarkers(y)&&!a.hasText(y))&&(F.padded=!1,F.ppad=0),D&&(P==="tozeroy"||P==="tonexty"&&(S||E==="v"))?I.tozero=!0:(P==="tonextx"||P==="tozerox")&&(I.padded=!1),h&&(y._extremes[h]=A.findExtremes(l,u,F)),L&&(y._extremes[L]=A.findExtremes(x,M,I))}function o(f,y){if(!!a.hasMarkers(f)){var l=f.marker,x=1.6*(f.marker.sizeref||1),u;if(f.marker.sizemode==="area"?u=function(h){return Math.max(Math.sqrt((h||0)/x),3)}:u=function(h){return Math.max((h||0)/x,3)},c.isArrayOrTypedArray(l.size)){var M={type:"linear"};A.setConvert(M);for(var _=M.makeCalcdata(f.marker,"size"),p=new Array(y),w=0;w<y;w++)p[w]=u(_[w]);return p}else return u(l.size)}}function b(f,y){var l=g(y),x=f._firstScatter;x[l]||(x[l]=y.uid)}function g(f){var y=f.stackgroup;return f.xaxis+f.yaxis+f.type+(y?"-"+y:"")}function d(f,y,l,x){var u=f.stackgroup;if(!!u){var M=y._scatterStackOpts[l._id+x._id][u],_=M.orientation==="v"?x:l;if(_.type==="linear"||_.type==="log")return M}}B.exports={calc:v,calcMarkerSize:o,calcAxisExpansion:s,setFirstScatter:b,getStackOpts:d}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"./arrays_to_calcdata":935,"./calc_selection":938,"./colorscale_calc":939,"./subtypes":961,"fast-isnumeric":190}],938:[function(t,B,V){var m=t("../../lib");B.exports=function(A,T){m.isArrayOrTypedArray(T.selectedpoints)&&m.tagSelected(A,T)}},{"../../lib":515}],939:[function(t,B,V){var m=t("../../components/colorscale/helpers").hasColorscale,c=t("../../components/colorscale/calc"),A=t("./subtypes");B.exports=function(e,a){A.hasLines(a)&&m(a,"line")&&c(e,a,{vals:a.line.color,containerStr:"line",cLetter:"c"}),A.hasMarkers(a)&&(m(a,"marker")&&c(e,a,{vals:a.marker.color,containerStr:"marker",cLetter:"c"}),m(a,"marker.line")&&c(e,a,{vals:a.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},{"../../components/colorscale/calc":375,"../../components/colorscale/helpers":378,"./subtypes":961}],940:[function(t,B,V){B.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},{}],941:[function(t,B,V){var m=t("./calc");B.exports=function(e,a){var i=a.xaxis,n=a.yaxis,r=i._id+n._id,v=e._fullLayout._scatterStackOpts[r];if(!!v){var s=e.calcdata,o,b,g,d,f,y,l,x,u,M,_,p,w,h,L;for(var S in v){M=v[S];var E=M.traceIndices;if(!!E.length){for(_=M.stackgaps==="interpolate",p=M.groupnorm,M.orientation==="v"?(w="x",h="y"):(w="y",h="x"),L=new Array(E.length),o=0;o<L.length;o++)L[o]=!1;y=s[E[0]];var P=new Array(y.length);for(o=0;o<y.length;o++)P[o]=y[o][w];for(o=1;o<E.length;o++){for(f=s[E[o]],b=g=0;b<f.length;b++){for(l=f[b][w];l>P[g]&&g<P.length;g++)c(f,b,P[g],o,L,_,w),b++;if(l!==P[g]){for(d=0;d<o;d++)c(s[E[d]],g,l,d,L,_,w);P.splice(g,0,l)}g++}for(;g<P.length;g++)c(f,b,P[g],o,L,_,w),b++}var F=P.length;for(b=0;b<y.length;b++){for(x=y[b][h]=y[b].s,o=1;o<E.length;o++)f=s[E[o]],f[0].trace._rawLength=f[0].trace._length,f[0].trace._length=F,x+=f[b].s,f[b][h]=x;if(p)for(u=(p==="fraction"?x:x/100)||1,o=0;o<E.length;o++){var I=s[E[o]][b];I[h]/=u,I.sNorm=I.s/u}}for(o=0;o<E.length;o++){f=s[E[o]];var D=f[0].trace,R=m.calcMarkerSize(D,D._rawLength),N=Array.isArray(R);if(R&&L[o]||N){var z=R;for(R=new Array(F),b=0;b<F;b++)R[b]=f[b].gap?0:N?z[f[b].i]:z}var G=new Array(F),Y=new Array(F);for(b=0;b<F;b++)G[b]=f[b].x,Y[b]=f[b].y;m.calcAxisExpansion(e,D,i,n,G,Y,R),f[0].t.orientation=M.orientation}}}}};function c(T,e,a,i,n,r,v){n[i]=!0;var s={i:null,gap:!0,s:0};if(s[v]=a,T.splice(e,0,s),e&&a===T[e-1][v]){var o=T[e-1];s.s=o.s,s.i=o.i,s.gap=o.gap}else r&&(s.s=A(T,e,a,v));e||(T[0].t=T[1].t,T[0].trace=T[1].trace,delete T[1].t,delete T[1].trace)}function A(T,e,a,i){var n=T[e-1],r=T[e+1];return r?n?n.s+(r.s-n.s)*(a-n[i])/(r[i]-n[i]):r.s:n.s}},{"./calc":937}],942:[function(t,B,V){B.exports=function(c){for(var A=0;A<c.length;A++){var T=c[A];if(T.type==="scatter"){var e=T.fill;if(!(e==="none"||e==="toself")&&(T.opacity=void 0,e==="tonexty"||e==="tonextx"))for(var a=A-1;a>=0;a--){var i=c[a];if(i.type==="scatter"&&i.xaxis===T.xaxis&&i.yaxis===T.yaxis){i.opacity=void 0;break}}}}}},{}],943:[function(t,B,V){var m=t("../../lib"),c=t("../../registry"),A=t("./attributes"),T=t("./constants"),e=t("./subtypes"),a=t("./xy_defaults"),i=t("./period_defaults"),n=t("./stack_defaults"),r=t("./marker_defaults"),v=t("./line_defaults"),s=t("./line_shape_defaults"),o=t("./text_defaults"),b=t("./fillcolor_defaults"),g=t("../../lib").coercePattern;B.exports=function(f,y,l,x){function u(E,P){return m.coerce(f,y,A,E,P)}var M=a(f,y,x,u);if(M||(y.visible=!1),!!y.visible){i(f,y,x,u),u("xhoverformat"),u("yhoverformat");var _=n(f,y,x,u),p=!_&&M<T.PTS_LINESONLY?"lines+markers":"lines";u("text"),u("hovertext"),u("mode",p),e.hasLines(y)&&(v(f,y,l,x,u,{backoff:!0}),s(f,y,u),u("connectgaps"),u("line.simplify")),e.hasMarkers(y)&&r(f,y,l,x,u,{gradient:!0}),e.hasText(y)&&(u("texttemplate"),o(f,y,x,u));var w=[];(e.hasMarkers(y)||e.hasText(y))&&(u("cliponaxis"),u("marker.maxdisplayed"),w.push("points")),u("fill",_?_.fillDflt:"none"),y.fill!=="none"&&(b(f,y,l,u),e.hasLines(y)||s(f,y,u),g(u,"fillpattern",y.fillcolor,!1));var h=(y.line||{}).color,L=(y.marker||{}).color;(y.fill==="tonext"||y.fill==="toself")&&w.push("fills"),u("hoveron",w.join("+")||"points"),y.hoveron!=="fills"&&u("hovertemplate");var S=c.getComponentMethod("errorbars","supplyDefaults");S(f,y,h||L||l,{axis:"y"}),S(f,y,h||L||l,{axis:"x",inherit:"y"}),m.coerceSelectionMarkerOpacity(y,u)}}},{"../../lib":515,"../../registry":647,"./attributes":936,"./constants":940,"./fillcolor_defaults":944,"./line_defaults":949,"./line_shape_defaults":951,"./marker_defaults":955,"./period_defaults":956,"./stack_defaults":959,"./subtypes":961,"./text_defaults":962,"./xy_defaults":963}],944:[function(t,B,V){var m=t("../../components/color"),c=t("../../lib").isArrayOrTypedArray;B.exports=function(T,e,a,i){var n=!1;if(e.marker){var r=e.marker.color,v=(e.marker.line||{}).color;r&&!c(r)?n=r:v&&!c(v)&&(n=v)}i("fillcolor",m.addOpacity((e.line||{}).color||n||a,.5))}},{"../../components/color":367,"../../lib":515}],945:[function(t,B,V){var m=t("../../plots/cartesian/axes");B.exports=function(A,T,e){var a={},i={_fullLayout:e},n=m.getFromTrace(i,T,"x"),r=m.getFromTrace(i,T,"y");return a.xLabel=m.tickText(n,n.c2l(A.x),!0).text,a.yLabel=m.tickText(r,r.c2l(A.y),!0).text,a}},{"../../plots/cartesian/axes":566}],946:[function(t,B,V){var m=t("../../components/color"),c=t("./subtypes");B.exports=function(T,e){var a,i;if(T.mode==="lines")return a=T.line.color,a&&m.opacity(a)?a:T.fillcolor;if(T.mode==="none")return T.fill?T.fillcolor:"";var n=e.mcc||(T.marker||{}).color,r=e.mlcc||((T.marker||{}).line||{}).color;return i=n&&m.opacity(n)?n:r&&m.opacity(r)&&(e.mlw||((T.marker||{}).line||{}).width)?r:"",i?m.opacity(i)<.3?m.addOpacity(i,.3):i:(a=(T.line||{}).color,a&&m.opacity(a)&&c.hasLines(T)&&T.line.width?a:T.fillcolor)}},{"../../components/color":367,"./subtypes":961}],947:[function(t,B,V){var m=t("../../lib"),c=t("../../components/fx"),A=t("../../registry"),T=t("./get_trace_color"),e=t("../../components/color"),a=m.fillText;B.exports=function(n,r,v,s){var o=n.cd,b=o[0].trace,g=n.xa,d=n.ya,f=g.c2p(r),y=d.c2p(v),l=[f,y],x=b.hoveron||"",u=b.mode.indexOf("markers")!==-1?3:.5,M=!!b.xperiodalignment,_=!!b.yperiodalignment;if(x.indexOf("points")!==-1){var p=function(ae){if(M){var se=g.c2p(ae.xStart),_e=g.c2p(ae.xEnd);return f>=Math.min(se,_e)&&f<=Math.max(se,_e)?0:1/0}var ue=Math.max(3,ae.mrc||0),ye=1-1/ue,xe=Math.abs(g.c2p(ae.x)-f);return xe<ue?ye*xe/ue:xe-ue+ye},w=function(ae){if(_){var se=d.c2p(ae.yStart),_e=d.c2p(ae.yEnd);return y>=Math.min(se,_e)&&y<=Math.max(se,_e)?0:1/0}var ue=Math.max(3,ae.mrc||0),ye=1-1/ue,xe=Math.abs(d.c2p(ae.y)-y);return xe<ue?ye*xe/ue:xe-ue+ye},h=function(ae){var se=Math.max(u,ae.mrc||0),_e=g.c2p(ae.x)-f,ue=d.c2p(ae.y)-y;return Math.max(Math.sqrt(_e*_e+ue*ue)-se,1-u/se)},L=c.getDistanceFunction(s,p,w,h);if(c.getClosest(o,L,n),n.index!==!1){var S=o[n.index],E=g.c2p(S.x,!0),P=d.c2p(S.y,!0),F=S.mrc||1;n.index=S.i;var I=o[0].t.orientation,D=I&&(S.sNorm||S.s),R=I==="h"?D:S.orig_x!==void 0?S.orig_x:S.x,N=I==="v"?D:S.orig_y!==void 0?S.orig_y:S.y;return m.extendFlat(n,{color:T(b,S),x0:E-F,x1:E+F,xLabelVal:R,y0:P-F,y1:P+F,yLabelVal:N,spikeDistance:h(S),hovertemplate:b.hovertemplate}),a(S,b,n),A.getComponentMethod("errorbars","hoverInfo")(S,b,n),[n]}}if(x.indexOf("fills")!==-1&&b._polygons){var z=b._polygons,G=[],Y=!1,ee=1/0,Z=-1/0,X=1/0,ne=-1/0,ce,Q,K,U,H,q,re,j,$;for(ce=0;ce<z.length;ce++)K=z[ce],K.contains(l)&&(Y=!Y,G.push(K),X=Math.min(X,K.ymin),ne=Math.max(ne,K.ymax));if(Y){X=Math.max(X,0),ne=Math.min(ne,d._length);var ie=(X+ne)/2;for(ce=0;ce<G.length;ce++)for(U=G[ce].pts,Q=1;Q<U.length;Q++)j=U[Q-1][1],$=U[Q][1],j>ie!=$>=ie&&(q=U[Q-1][0],re=U[Q][0],$-j&&(H=q+(re-q)*(ie-j)/($-j),ee=Math.min(ee,H),Z=Math.max(Z,H)));ee=Math.max(ee,0),Z=Math.min(Z,g._length);var oe=e.defaultLine;return e.opacity(b.fillcolor)?oe=b.fillcolor:e.opacity((b.line||{}).color)&&(oe=b.line.color),m.extendFlat(n,{distance:n.maxHoverDistance,x0:ee,x1:Z,y0:ie,y1:ie,color:oe,hovertemplate:!1}),delete n.index,b.text&&!Array.isArray(b.text)?n.text=String(b.text):n.text=b.name,[n]}}}},{"../../components/color":367,"../../components/fx":407,"../../lib":515,"../../registry":647,"./get_trace_color":946}],948:[function(t,B,V){var m=t("./subtypes");B.exports={hasLines:m.hasLines,hasMarkers:m.hasMarkers,hasText:m.hasText,isBubble:m.isBubble,attributes:t("./attributes"),supplyDefaults:t("./defaults"),crossTraceDefaults:t("./cross_trace_defaults"),calc:t("./calc").calc,crossTraceCalc:t("./cross_trace_calc"),arraysToCalcdata:t("./arrays_to_calcdata"),plot:t("./plot"),colorbar:t("./marker_colorbar"),formatLabels:t("./format_labels"),style:t("./style").style,styleOnSelect:t("./style").styleOnSelect,hoverPoints:t("./hover"),selectPoints:t("./select"),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"./arrays_to_calcdata":935,"./attributes":936,"./calc":937,"./cross_trace_calc":941,"./cross_trace_defaults":942,"./defaults":943,"./format_labels":945,"./hover":947,"./marker_colorbar":954,"./plot":957,"./select":958,"./style":960,"./subtypes":961}],949:[function(t,B,V){var m=t("../../lib").isArrayOrTypedArray,c=t("../../components/colorscale/helpers").hasColorscale,A=t("../../components/colorscale/defaults");B.exports=function(e,a,i,n,r,v){v||(v={});var s=(e.marker||{}).color;if(r("line.color",i),c(e,"line"))A(e,a,n,r,{prefix:"line.",cLetter:"c"});else{var o=(m(s)?!1:s)||i;r("line.color",o)}r("line.width"),v.noDash||r("line.dash"),v.backoff&&r("line.backoff")}},{"../../components/colorscale/defaults":377,"../../components/colorscale/helpers":378,"../../lib":515}],950:[function(t,B,V){var m=t("../../components/drawing"),c=t("../../constants/numerical"),A=c.BADNUM,T=c.LOG_CLIP,e=T+.5,a=T-.5,i=t("../../lib"),n=i.segmentsIntersect,r=i.constrain,v=t("./constants");B.exports=function(o,b){var g=b.trace||{},d=b.xaxis,f=b.yaxis,y=d.type==="log",l=f.type==="log",x=d._length,u=f._length,M=b.backoff,_=g.marker,p=b.connectGaps,w=b.baseTolerance,h=b.shape,L=h==="linear",S=g.fill&&g.fill!=="none",E=[],P=v.minTolerance,F=o.length,I=new Array(F),D=0,R,N,z,G,Y,ee,Z,X,ne,ce,Q,K,U,H,q,re;function j(At){var Ht=o[At];if(!Ht)return!1;var It=b.linearized?d.l2p(Ht.x):d.c2p(Ht.x),Vt=b.linearized?f.l2p(Ht.y):f.c2p(Ht.y);if(It===A){if(y&&(It=d.c2p(Ht.x,!0)),It===A)return!1;l&&Vt===A&&(It*=Math.abs(d._m*u*(d._m>0?e:a)/(f._m*x*(f._m>0?e:a)))),It*=1e3}if(Vt===A){if(l&&(Vt=f.c2p(Ht.y,!0)),Vt===A)return!1;Vt*=1e3}return[It,Vt]}function $(At,Ht,It,Vt){var jt=It-At,Yt=Vt-Ht,or=.5-At,Gr=.5-Ht,on=jt*jt+Yt*Yt,Jr=jt*or+Yt*Gr;if(Jr>0&&Jr<on){var ot=or*Yt-Gr*jt;if(ot*ot<on)return!0}}var ie,oe;function ae(At,Ht){var It=At[0]/x,Vt=At[1]/u,jt=Math.max(0,-It,It-1,-Vt,Vt-1);return jt&&ie!==void 0&&$(It,Vt,ie,oe)&&(jt=0),jt&&Ht&&$(It,Vt,Ht[0]/x,Ht[1]/u)&&(jt=0),(1+v.toleranceGrowth*jt)*w}function se(At,Ht){var It=At[0]-Ht[0],Vt=At[1]-Ht[1];return Math.sqrt(It*It+Vt*Vt)}var _e=v.maxScreensAway,ue=-x*_e,ye=x*(1+_e),xe=-u*_e,me=u*(1+_e),be=[[ue,xe,ye,xe],[ye,xe,ye,me],[ye,me,ue,me],[ue,me,ue,xe]],ke,De,Ve,Ae,Le,je;function Ye(At,Ht){for(var It=[],Vt=0,jt=0;jt<4;jt++){var Yt=be[jt],or=n(At[0],At[1],Ht[0],Ht[1],Yt[0],Yt[1],Yt[2],Yt[3]);or&&(!Vt||Math.abs(or.x-It[0][0])>1||Math.abs(or.y-It[0][1])>1)&&(or=[or.x,or.y],Vt&&se(or,At)<se(It[0],At)?It.unshift(or):It.push(or),Vt++)}return It}function ze(At){if(At[0]<ue||At[0]>ye||At[1]<xe||At[1]>me)return[r(At[0],ue,ye),r(At[1],xe,me)]}function Ie(At,Ht){if(At[0]===Ht[0]&&(At[0]===ue||At[0]===ye)||At[1]===Ht[1]&&(At[1]===xe||At[1]===me))return!0}function We(At,Ht){var It=[],Vt=ze(At),jt=ze(Ht);return Vt&&jt&&Ie(Vt,jt)||(Vt&&It.push(Vt),jt&&It.push(jt)),It}function pt(At,Ht,It){return function(Vt,jt){var Yt=ze(Vt),or=ze(jt),Gr=[];if(Yt&&or&&Ie(Yt,or))return Gr;Yt&&Gr.push(Yt),or&&Gr.push(or);var on=2*i.constrain((Vt[At]+jt[At])/2,Ht,It)-((Yt||Vt)[At]+(or||jt)[At]);if(on){var Jr;Yt&&or?Jr=on>0==Yt[At]>or[At]?Yt:or:Jr=Yt||or,Jr[At]+=on}return Gr}}var Ft;h==="linear"||h==="spline"?Ft=Ye:h==="hv"||h==="vh"?Ft=We:h==="hvh"?Ft=pt(0,ue,ye):h==="vhv"&&(Ft=pt(1,xe,me));function Qt(At,Ht){var It=Ht[0]-At[0],Vt=(Ht[1]-At[1])/It,jt=(At[1]*Ht[0]-Ht[1]*At[0])/It;return jt>0?[Vt>0?ue:ye,me]:[Vt>0?ye:ue,xe]}function zt(At){var Ht=At[0],It=At[1],Vt=Ht===I[D-1][0],jt=It===I[D-1][1];if(!(Vt&&jt))if(D>1){var Yt=Ht===I[D-2][0],or=It===I[D-2][1];Vt&&(Ht===ue||Ht===ye)&&Yt?or?D--:I[D-1]=At:jt&&(It===xe||It===me)&&or?Yt?D--:I[D-1]=At:I[D++]=At}else I[D++]=At}function Et(At){I[D-1][0]!==At[0]&&I[D-1][1]!==At[1]&&zt([Ve,Ae]),zt(At),Le=null,Ve=Ae=0}var Xt=i.isArrayOrTypedArray(_);function Nt(At){if(At&&M&&(At.i=R,At.d=o,At.trace=g,At.marker=Xt?_[At.i]:_,At.backoff=M),ie=At[0]/x,oe=At[1]/u,ke=At[0]<ue?ue:At[0]>ye?ye:0,De=At[1]<xe?xe:At[1]>me?me:0,ke||De){if(!D)I[D++]=[ke||At[0],De||At[1]];else if(Le){var Ht=Ft(Le,At);Ht.length>1&&(Et(Ht[0]),I[D++]=Ht[1])}else je=Ft(I[D-1],At)[0],I[D++]=je;var It=I[D-1];ke&&De&&(It[0]!==ke||It[1]!==De)?(Le&&(Ve!==ke&&Ae!==De?zt(Ve&&Ae?Qt(Le,At):[Ve||ke,Ae||De]):Ve&&Ae&&zt([Ve,Ae])),zt([ke,De])):Ve-ke&&Ae-De&&zt([ke||Ve,De||Ae]),Le=At,Ve=ke,Ae=De}else Le&&Et(Ft(Le,At)[0]),I[D++]=At}for(R=0;R<F;R++)if(N=j(R),!!N){for(D=0,Le=null,Nt(N),R++;R<F;R++){if(G=j(R),!G){if(p)continue;break}if(!L||!b.simplify){Nt(G);continue}var Ct=j(R+1);if(ce=se(G,N),!(!(S&&(D===0||D===F-1))&&ce<ae(G,Ct)*P)){for(X=[(G[0]-N[0])/ce,(G[1]-N[1])/ce],Y=N,Q=ce,K=H=q=0,Z=!1,z=G,R++;R<o.length;R++){if(ee=Ct,Ct=j(R+1),!ee){if(p)continue;break}if(ne=[ee[0]-N[0],ee[1]-N[1]],re=ne[0]*X[1]-ne[1]*X[0],H=Math.min(H,re),q=Math.max(q,re),q-H>ae(ee,Ct))break;z=ee,U=ne[0]*X[0]+ne[1]*X[1],U>Q?(Q=U,G=ee,Z=!1):U<K&&(K=U,Y=ee,Z=!0)}if(Z?(Nt(G),z!==Y&&Nt(Y)):(Y!==N&&Nt(Y),z!==G&&Nt(G)),Nt(z),R>=o.length||!ee)break;Nt(ee),N=ee}}Le&&zt([Ve||Le[0],Ae||Le[1]]),E.push(I.slice(0,D))}var Xe=h.slice(h.length-1);if(M&&Xe!=="h"&&Xe!=="v"){for(var at=!1,Ge=-1,Se=[],He=0;He<E.length;He++)for(var Ke=0;Ke<E[He].length-1;Ke++){var qe=E[He][Ke],Tt=E[He][Ke+1],mt=m.applyBackoff(Tt,qe);(mt[0]!==Tt[0]||mt[1]!==Tt[1])&&(at=!0),Se[Ge+1]||(Ge++,Se[Ge]=[qe,[mt[0],mt[1]]])}return at?Se:E}return E}},{"../../components/drawing":389,"../../constants/numerical":491,"../../lib":515,"./constants":940}],951:[function(t,B,V){B.exports=function(c,A,T){var e=T("line.shape");e==="spline"&&T("line.smoothing")}},{}],952:[function(t,B,V){var m={tonextx:1,tonexty:1,tonext:1};B.exports=function(A,T,e){var a,i,n,r,v,s={},o=!1,b=-1,g=0,d=-1;for(i=0;i<e.length;i++)a=e[i][0].trace,n=a.stackgroup||"",n?n in s?v=s[n]:(v=s[n]=g,g++):a.fill in m&&d>=0?v=d:(v=d=g,g++),v<b&&(o=!0),a._groupIndex=b=v;var f=e.slice();o&&f.sort(function(l,x){var u=l[0].trace,M=x[0].trace;return u._groupIndex-M._groupIndex||u.index-M.index});var y={};for(i=0;i<f.length;i++)a=f[i][0].trace,n=a.stackgroup||"",a.visible===!0?(a._nexttrace=null,a.fill in m&&(r=y[n],a._prevtrace=r||null,r&&(r._nexttrace=a)),a._ownfill=a.fill&&(a.fill.substr(0,6)==="tozero"||a.fill==="toself"||a.fill.substr(0,2)==="to"&&!a._prevtrace),y[n]=a):a._prevtrace=a._nexttrace=a._ownfill=null;return f}},{}],953:[function(t,B,V){var m=t("fast-isnumeric");B.exports=function(A,T){T||(T=2);var e=A.marker,a=e.sizeref||1,i=e.sizemin||0,n=e.sizemode==="area"?function(r){return Math.sqrt(r/a)}:function(r){return r/a};return function(r){var v=n(r/T);return m(v)&&v>0?Math.max(v,i):0}}},{"fast-isnumeric":190}],954:[function(t,B,V){B.exports={container:"marker",min:"cmin",max:"cmax"}},{}],955:[function(t,B,V){var m=t("../../components/color"),c=t("../../components/colorscale/helpers").hasColorscale,A=t("../../components/colorscale/defaults"),T=t("./subtypes");B.exports=function(a,i,n,r,v,s){var o=T.isBubble(a),b=(a.line||{}).color,g;if(s=s||{},b&&(n=b),v("marker.symbol"),v("marker.opacity",o?.7:1),v("marker.size"),s.noAngle||(v("marker.angle"),s.noAngleRef||v("marker.angleref"),s.noStandOff||v("marker.standoff")),v("marker.color",n),c(a,"marker")&&A(a,i,r,v,{prefix:"marker.",cLetter:"c"}),s.noSelect||(v("selected.marker.color"),v("unselected.marker.color"),v("selected.marker.size"),v("unselected.marker.size")),s.noLine||(b&&!Array.isArray(b)&&i.marker.color!==b?g=b:o?g=m.background:g=m.defaultLine,v("marker.line.color",g),c(a,"marker.line")&&A(a,i,r,v,{prefix:"marker.line.",cLetter:"c"}),v("marker.line.width",o?1:0)),o&&(v("marker.sizeref"),v("marker.sizemin"),v("marker.sizemode")),s.gradient){var d=v("marker.gradient.type");d!=="none"&&v("marker.gradient.color")}}},{"../../components/color":367,"../../components/colorscale/defaults":377,"../../components/colorscale/helpers":378,"./subtypes":961}],956:[function(t,B,V){var m=t("../../lib").dateTick0,c=t("../../constants/numerical"),A=c.ONEWEEK;function T(e,a){return e%A===0?m(a,1):m(a,0)}B.exports=function(a,i,n,r,v){if(v||(v={x:!0,y:!0}),v.x){var s=r("xperiod");s&&(r("xperiod0",T(s,i.xcalendar)),r("xperiodalignment"))}if(v.y){var o=r("yperiod");o&&(r("yperiod0",T(o,i.ycalendar)),r("yperiodalignment"))}}},{"../../constants/numerical":491,"../../lib":515}],957:[function(t,B,V){var m=t("@plotly/d3"),c=t("../../registry"),A=t("../../lib"),T=A.ensureSingle,e=A.identity,a=t("../../components/drawing"),i=t("./subtypes"),n=t("./line_points"),r=t("./link_traces"),v=t("../../lib/polygon").tester;B.exports=function(d,f,y,l,x,u){var M,_,p=!x,w=!!x&&x.duration>0,h=r(d,f,y);if(M=l.selectAll("g.trace").data(h,function(S){return S[0].trace.uid}),M.enter().append("g").attr("class",function(S){return"trace scatter trace"+S[0].trace.uid}).style("stroke-miterlimit",2),M.order(),s(d,M,f),w){u&&(_=u());var L=m.transition().duration(x.duration).ease(x.easing).each("end",function(){_&&_()}).each("interrupt",function(){_&&_()});L.each(function(){l.selectAll("g.trace").each(function(S,E){o(d,E,f,S,h,this,x)})})}else M.each(function(S,E){o(d,E,f,S,h,this,x)});p&&M.exit().remove(),l.selectAll("path:not([d])").remove()};function s(g,d,f){d.each(function(y){var l=T(m.select(this),"g","fills");a.setClipUrl(l,f.layerClipId,g);var x=y[0].trace,u=[];x._ownfill&&u.push("_ownFill"),x._nexttrace&&u.push("_nextFill");var M=l.selectAll("g").data(u,e);M.enter().append("g"),M.exit().each(function(_){x[_]=null}).remove(),M.order().each(function(_){x[_]=T(m.select(this),"path","js-fill")})})}function o(g,d,f,y,l,x,u){var M;b(g,d,f,y,l);var _=!!u&&u.duration>0;function p(Ve){return _?Ve.transition():Ve}var w=f.xaxis,h=f.yaxis,L=y[0].trace,S=L.line,E=m.select(x),P=T(E,"g","errorbars"),F=T(E,"g","lines"),I=T(E,"g","points"),D=T(E,"g","text");if(c.getComponentMethod("errorbars","plot")(g,P,f,u),L.visible!==!0)return;p(E).style("opacity",L.opacity);var R,N,z=L.fill.charAt(L.fill.length-1);z!=="x"&&z!=="y"&&(z=""),y[0][f.isRangePlot?"nodeRangePlot3":"node3"]=E;var G="",Y=[],ee=L._prevtrace;ee&&(G=ee._prevRevpath||"",N=ee._nextFill,Y=ee._polygons);var Z,X,ne="",ce="",Q,K,U,H,q,re,j,$=[],ie=A.noop;if(R=L._ownFill,i.hasLines(L)||L.fill!=="none"){for(N&&N.datum(y),["hv","vh","hvh","vhv"].indexOf(S.shape)!==-1?(Q=a.steps(S.shape),K=a.steps(S.shape.split("").reverse().join(""))):S.shape==="spline"?Q=K=function(Ve){var Ae=Ve[Ve.length-1];return Ve.length>1&&Ve[0][0]===Ae[0]&&Ve[0][1]===Ae[1]?a.smoothclosed(Ve.slice(1),S.smoothing):a.smoothopen(Ve,S.smoothing)}:Q=K=function(Ve){return"M"+Ve.join("L")},U=function(Ve){return K(Ve.reverse())},$=n(y,{xaxis:w,yaxis:h,trace:L,connectGaps:L.connectgaps,baseTolerance:Math.max(S.width||1,3)/4,shape:S.shape,backoff:S.backoff,simplify:S.simplify,fill:L.fill}),j=L._polygons=new Array($.length),M=0;M<$.length;M++)L._polygons[M]=v($[M]);$.length&&(H=$[0][0],q=$[$.length-1],re=q[q.length-1]),ie=function(Ve){return function(Ae){if(Z=Q(Ae),X=U(Ae),ne?z?(ne+="L"+Z.substr(1),ce=X+("L"+ce.substr(1))):(ne+="Z"+Z,ce=X+"Z"+ce):(ne=Z,ce=X),i.hasLines(L)&&Ae.length>1){var Le=m.select(this);if(Le.datum(y),Ve)p(Le.style("opacity",0).attr("d",Z).call(a.lineGroupStyle)).style("opacity",1);else{var je=p(Le);je.attr("d",Z),a.singleLineStyle(y,je)}}}}}var oe=F.selectAll(".js-line").data($);p(oe.exit()).style("opacity",0).remove(),oe.each(ie(!1)),oe.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(a.lineGroupStyle).each(ie(!0)),a.setClipUrl(oe,f.layerClipId,g);function ae(Ve){p(Ve).attr("d","M0,0Z")}$.length?(R?(R.datum(y),H&&re&&(z?(z==="y"?H[1]=re[1]=h.c2p(0,!0):z==="x"&&(H[0]=re[0]=w.c2p(0,!0)),p(R).attr("d","M"+re+"L"+H+"L"+ne.substr(1)).call(a.singleFillStyle,g)):p(R).attr("d",ne+"Z").call(a.singleFillStyle,g))):N&&(L.fill.substr(0,6)==="tonext"&&ne&&G?(L.fill==="tonext"?p(N).attr("d",ne+"Z"+G+"Z").call(a.singleFillStyle,g):p(N).attr("d",ne+"L"+G.substr(1)+"Z").call(a.singleFillStyle,g),L._polygons=L._polygons.concat(Y)):(ae(N),L._polygons=null)),L._prevRevpath=ce,L._prevPolygons=j):(R?ae(R):N&&ae(N),L._polygons=L._prevRevpath=L._prevPolygons=null);function se(Ve){return Ve.filter(function(Ae){return!Ae.gap&&Ae.vis})}function _e(Ve){return Ve.filter(function(Ae){return Ae.vis})}function ue(Ve){return Ve.filter(function(Ae){return!Ae.gap})}function ye(Ve){return Ve.id}function xe(Ve){if(Ve.ids)return ye}function me(){return!1}function be(Ve,Ae,Le){var je,Ye,ze,Ie=Le[0].trace,We=i.hasMarkers(Ie),pt=i.hasText(Ie),Ft=xe(Ie),Qt=me,zt=me;if(We||pt){var Et=e,Xt=Ie.stackgroup,Nt=Xt&&g._fullLayout._scatterStackOpts[w._id+h._id][Xt].stackgaps==="infer zero";Ie.marker.maxdisplayed||Ie._needsCull?Et=Nt?_e:se:Xt&&!Nt&&(Et=ue),We&&(Qt=Et),pt&&(zt=Et)}Ye=Ve.selectAll("path.point"),je=Ye.data(Qt,Ft);var Ct=je.enter().append("path").classed("point",!0);_&&Ct.call(a.pointStyle,Ie,g).call(a.translatePoints,w,h).style("opacity",0).transition().style("opacity",1),je.order();var Xe;We&&(Xe=a.makePointStyleFns(Ie)),je.each(function(at){var Ge=m.select(this),Se=p(Ge);ze=a.translatePoint(at,Se,w,h),ze?(a.singlePointStyle(at,Se,Ie,Xe,g),f.layerClipId&&a.hideOutsideRangePoint(at,Se,w,h,Ie.xcalendar,Ie.ycalendar),Ie.customdata&&Ge.classed("plotly-customdata",at.data!==null&&at.data!==void 0)):Se.remove()}),_?je.exit().transition().style("opacity",0).remove():je.exit().remove(),Ye=Ae.selectAll("g"),je=Ye.data(zt,Ft),je.enter().append("g").classed("textpoint",!0).append("text"),je.order(),je.each(function(at){var Ge=m.select(this),Se=p(Ge.select("text"));ze=a.translatePoint(at,Se,w,h),ze?f.layerClipId&&a.hideOutsideRangePoint(at,Ge,w,h,Ie.xcalendar,Ie.ycalendar):Ge.remove()}),je.selectAll("text").call(a.textPointStyle,Ie,g).each(function(at){var Ge=w.c2p(at.x),Se=h.c2p(at.y);m.select(this).selectAll("tspan.line").each(function(){p(m.select(this)).attr({x:Ge,y:Se})})}),je.exit().remove()}I.datum(y),D.datum(y),be(I,D,y);var ke=L.cliponaxis===!1,De=ke?null:f.layerClipId;a.setClipUrl(I,De,g),a.setClipUrl(D,De,g)}function b(g,d,f,y,l){var x=f.xaxis,u=f.yaxis,M=m.extent(A.simpleMap(x.range,x.r2c)),_=m.extent(A.simpleMap(u.range,u.r2c)),p=y[0].trace;if(!!i.hasMarkers(p)){var w=p.marker.maxdisplayed;if(w!==0){var h=y.filter(function(P){return P.x>=M[0]&&P.x<=M[1]&&P.y>=_[0]&&P.y<=_[1]}),L=Math.ceil(h.length/w),S=0;l.forEach(function(P,F){var I=P[0].trace;i.hasMarkers(I)&&I.marker.maxdisplayed>0&&F<d&&S++});var E=Math.round(S*L/3+Math.floor(S/3)*L/7.1);y.forEach(function(P){delete P.vis}),h.forEach(function(P,F){Math.round((F+E)%L)===0&&(P.vis=!0)})}}}},{"../../components/drawing":389,"../../lib":515,"../../lib/polygon":527,"../../registry":647,"./line_points":950,"./link_traces":952,"./subtypes":961,"@plotly/d3":58}],958:[function(t,B,V){var m=t("./subtypes");B.exports=function(A,T){var e=A.cd,a=A.xaxis,i=A.yaxis,n=[],r=e[0].trace,v,s,o,b,g=!m.hasMarkers(r)&&!m.hasText(r);if(g)return[];if(T===!1)for(v=0;v<e.length;v++)e[v].selected=0;else for(v=0;v<e.length;v++)s=e[v],o=a.c2p(s.x),b=i.c2p(s.y),s.i!==null&&T.contains([o,b],!1,v,A)?(n.push({pointNumber:s.i,x:a.c2d(s.x),y:i.c2d(s.y)}),s.selected=1):s.selected=0;return n}},{"./subtypes":961}],959:[function(t,B,V){var m=["orientation","groupnorm","stackgaps"];B.exports=function(A,T,e,a){var i=e._scatterStackOpts,n=a("stackgroup");if(n){var r=T.xaxis+T.yaxis,v=i[r];v||(v=i[r]={});var s=v[n],o=!1;s?s.traces.push(T):(s=v[n]={traceIndices:[],traces:[T]},o=!0);for(var b={orientation:T.x&&!T.y?"h":"v"},g=0;g<m.length;g++){var d=m[g],f=d+"Found";if(!s[f]){var y=A[d]!==void 0,l=d==="orientation";if((y||o)&&(s[d]=a(d,b[d]),l&&(s.fillDflt=s[d]==="h"?"tonextx":"tonexty"),y&&(s[f]=!0,!o&&(delete s.traces[0][d],l))))for(var x=0;x<s.traces.length-1;x++){var u=s.traces[x];u._input.fill!==u.fill&&(u.fill=s.fillDflt)}}}return s}}},{}],960:[function(t,B,V){var m=t("@plotly/d3"),c=t("../../components/drawing"),A=t("../../registry");function T(n){var r=m.select(n).selectAll("g.trace.scatter");r.style("opacity",function(v){return v[0].trace.opacity}),r.selectAll("g.points").each(function(v){var s=m.select(this),o=v.trace||v[0].trace;e(s,o,n)}),r.selectAll("g.text").each(function(v){var s=m.select(this),o=v.trace||v[0].trace;a(s,o,n)}),r.selectAll("g.trace path.js-line").call(c.lineGroupStyle),r.selectAll("g.trace path.js-fill").call(c.fillGroupStyle,n),A.getComponentMethod("errorbars","style")(r)}function e(n,r,v){c.pointStyle(n.selectAll("path.point"),r,v)}function a(n,r,v){c.textPointStyle(n.selectAll("text"),r,v)}function i(n,r,v){var s=r[0].trace;s.selectedpoints?(c.selectedPointStyle(v.selectAll("path.point"),s),c.selectedTextStyle(v.selectAll("text"),s)):(e(v,s,n),a(v,s,n))}B.exports={style:T,stylePoints:e,styleText:a,styleOnSelect:i}},{"../../components/drawing":389,"../../registry":647,"@plotly/d3":58}],961:[function(t,B,V){var m=t("../../lib");B.exports={hasLines:function(c){return c.visible&&c.mode&&c.mode.indexOf("lines")!==-1},hasMarkers:function(c){return c.visible&&(c.mode&&c.mode.indexOf("markers")!==-1||c.type==="splom")},hasText:function(c){return c.visible&&c.mode&&c.mode.indexOf("text")!==-1},isBubble:function(c){return m.isPlainObject(c.marker)&&m.isArrayOrTypedArray(c.marker.size)}}},{"../../lib":515}],962:[function(t,B,V){var m=t("../../lib");B.exports=function(c,A,T,e,a){a=a||{},e("textposition"),m.coerceFont(e,"textfont",T.font),a.noSelect||(e("selected.textfont.color"),e("unselected.textfont.color"))}},{"../../lib":515}],963:[function(t,B,V){var m=t("../../lib"),c=t("../../registry");B.exports=function(T,e,a,i){var n=i("x"),r=i("y"),v,s=c.getComponentMethod("calendars","handleTraceDefaults");if(s(T,e,["x","y"],a),n){var o=m.minRowLength(n);r?v=Math.min(o,m.minRowLength(r)):(v=o,i("y0"),i("dy"))}else{if(!r)return 0;v=m.minRowLength(r),i("x0"),i("dx")}return e._length=v,v}},{"../../lib":515,"../../registry":647}],964:[function(t,B,V){var m=t("../scatter/attributes"),c=t("../../components/colorscale/attributes"),A=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,T=t("../../plots/template_attributes").hovertemplateAttrs,e=t("../../plots/template_attributes").texttemplateAttrs,a=t("../../plots/attributes"),i=t("../../constants/gl3d_dashes"),n=t("../../constants/gl3d_markers"),r=t("../../lib/extend").extendFlat,v=t("../../plot_api/edit_types").overrideAll,s=t("../../lib/sort_object_keys"),o=m.line,b=m.marker,g=b.line,d=r({width:o.width,dash:{valType:"enumerated",values:s(i),dflt:"solid"}},c("line"));function f(l){return{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}}var y=B.exports=v({x:m.x,y:m.y,z:{valType:"data_array"},text:r({},m.text,{}),texttemplate:e({},{}),hovertext:r({},m.hovertext,{}),hovertemplate:T(),xhoverformat:A("x"),yhoverformat:A("y"),zhoverformat:A("z"),mode:r({},m.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:f(),y:f(),z:f()},connectgaps:m.connectgaps,line:d,marker:r({symbol:{valType:"enumerated",values:s(n),dflt:"circle",arrayOk:!0},size:r({},b.size,{dflt:8}),sizeref:b.sizeref,sizemin:b.sizemin,sizemode:b.sizemode,opacity:r({},b.opacity,{arrayOk:!1}),colorbar:b.colorbar,line:r({width:r({},g.width,{arrayOk:!1})},c("marker.line"))},c("marker")),textposition:r({},m.textposition,{dflt:"top center"}),textfont:{color:m.textfont.color,size:m.textfont.size,family:r({},m.textfont.family,{arrayOk:!1})},opacity:a.opacity,hoverinfo:r({},a.hoverinfo)},"calc","nested");y.x.editType=y.y.editType=y.z.editType="calc+clearAxisTypes"},{"../../components/colorscale/attributes":374,"../../constants/gl3d_dashes":488,"../../constants/gl3d_markers":489,"../../lib/extend":505,"../../lib/sort_object_keys":538,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../scatter/attributes":936}],965:[function(t,B,V){var m=t("../scatter/arrays_to_calcdata"),c=t("../scatter/colorscale_calc");B.exports=function(T,e){var a=[{x:!1,y:!1,trace:e,t:{}}];return m(a,e),c(T,e),a}},{"../scatter/arrays_to_calcdata":935,"../scatter/colorscale_calc":939}],966:[function(t,B,V){var m=t("../../registry");function c(e,a,i,n){if(!a||!a.visible)return null;for(var r=m.getComponentMethod("errorbars","makeComputeError")(a),v=new Array(e.length),s=0;s<e.length;s++){var o=r(+e[s],s);if(n.type==="log"){var b=n.c2l(e[s]),g=e[s]-o[0],d=e[s]+o[1];if(v[s]=[(n.c2l(g,!0)-b)*i,(n.c2l(d,!0)-b)*i],g>0){var f=n.c2l(g);n._lowerLogErrorBound||(n._lowerLogErrorBound=f),n._lowerErrorBound=Math.min(n._lowerLogErrorBound,f)}}else v[s]=[-o[0]*i,o[1]*i]}return v}function A(e){for(var a=0;a<e.length;a++)if(e[a])return e[a].length;return 0}function T(e,a,i){var n=[c(e.x,e.error_x,a[0],i.xaxis),c(e.y,e.error_y,a[1],i.yaxis),c(e.z,e.error_z,a[2],i.zaxis)],r=A(n);if(r===0)return null;for(var v=new Array(r),s=0;s<r;s++){for(var o=[[0,0,0],[0,0,0]],b=0;b<3;b++)if(n[b])for(var g=0;g<2;g++)o[g][b]=n[b][s][g];v[s]=o}return v}B.exports=T},{"../../registry":647}],967:[function(t,B,V){var m=t("../../../stackgl_modules").gl_line3d,c=t("../../../stackgl_modules").gl_scatter3d,A=t("../../../stackgl_modules").gl_error3d,T=t("../../../stackgl_modules").gl_mesh3d,e=t("../../../stackgl_modules").delaunay_triangulate,a=t("../../lib"),i=t("../../lib/str2rgbarray"),n=t("../../lib/gl_format_color").formatColor,r=t("../scatter/make_bubble_size_func"),v=t("../../constants/gl3d_dashes"),s=t("../../constants/gl3d_markers"),o=t("../../plots/cartesian/axes"),b=t("../../components/fx/helpers").appendArrayPointValue,g=t("./calc_errors");function d(P,F){this.scene=P,this.uid=F,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var f=d.prototype;f.handlePick=function(P){if(P.object&&(P.object===this.linePlot||P.object===this.delaunayMesh||P.object===this.textMarkers||P.object===this.scatterPlot)){var F=P.index=P.data.index;return P.object.highlight&&P.object.highlight(null),this.scatterPlot&&(P.object=this.scatterPlot,this.scatterPlot.highlight(P.data)),P.textLabel="",this.textLabels&&(Array.isArray(this.textLabels)?(this.textLabels[F]||this.textLabels[F]===0)&&(P.textLabel=this.textLabels[F]):P.textLabel=this.textLabels),P.traceCoordinate=[this.data.x[F],this.data.y[F],this.data.z[F]],!0}};function y(P,F,I){var D=(I+1)%3,R=(I+2)%3,N=[],z=[],G;for(G=0;G<P.length;++G){var Y=P[G];isNaN(Y[D])||!isFinite(Y[D])||isNaN(Y[R])||!isFinite(Y[R])||(N.push([Y[D],Y[R]]),z.push(G))}var ee=e(N);for(G=0;G<ee.length;++G)for(var Z=ee[G],X=0;X<Z.length;++X)Z[X]=z[Z[X]];return{positions:P,cells:ee,meshColor:F}}function l(P){for(var F=[0,0,0],I=[[0,0,0],[0,0,0],[0,0,0]],D=[1,1,1],R=0;R<3;R++){var N=P[R];N&&N.copy_zstyle!==!1&&P[2].visible!==!1&&(N=P[2]),!(!N||!N.visible)&&(F[R]=N.width/2,I[R]=i(N.color),D[R]=N.thickness)}return{capSize:F,color:I,lineWidth:D}}function x(P){return P==null?0:P.indexOf("left")>-1?-1:P.indexOf("right")>-1?1:0}function u(P){return P==null?0:P.indexOf("top")>-1?-1:P.indexOf("bottom")>-1?1:0}function M(P){var F=0,I=0,D=[F,I];if(Array.isArray(P))for(var R=0;R<P.length;R++)D[R]=[F,I],P[R]&&(D[R][0]=x(P[R]),D[R][1]=u(P[R]));else D[0]=x(P),D[1]=u(P);return D}function _(P,F){return F(P*4)}function p(P){return s[P]}function w(P,F,I,D,R){var N=null;if(a.isArrayOrTypedArray(P)){N=[];for(var z=0;z<F;z++)P[z]===void 0?N[z]=D:N[z]=I(P[z],R)}else N=I(P,a.identity);return N}function h(P,F){var I=[],D=P.fullSceneLayout,R=P.dataScale,N=D.xaxis,z=D.yaxis,G=D.zaxis,Y=F.marker,ee=F.line,Z=F.x||[],X=F.y||[],ne=F.z||[],ce=Z.length,Q=F.xcalendar,K=F.ycalendar,U=F.zcalendar,H,q,re,j,$,ie;for($=0;$<ce;$++)H=N.d2l(Z[$],0,Q)*R[0],q=z.d2l(X[$],0,K)*R[1],re=G.d2l(ne[$],0,U)*R[2],I[$]=[H,q,re];if(Array.isArray(F.text))ie=F.text;else if(F.text!==void 0)for(ie=new Array(ce),$=0;$<ce;$++)ie[$]=F.text;function oe(Ye,ze){var Ie=D[Ye];return o.tickText(Ie,Ie.d2l(ze),!0).text}var ae=F.texttemplate;if(ae){var se=P.fullLayout,_e=se._d3locale,ue=Array.isArray(ae),ye=ue?Math.min(ae.length,ce):ce,xe=ue?function(Ye){return ae[Ye]}:function(){return ae};for(ie=new Array(ye),$=0;$<ye;$++){var me={x:Z[$],y:X[$],z:ne[$]},be={xLabel:oe("xaxis",Z[$]),yLabel:oe("yaxis",X[$]),zLabel:oe("zaxis",ne[$])},ke={};b(ke,F,$);var De=F._meta||{};ie[$]=a.texttemplateString(xe($),be,_e,ke,me,De)}}if(j={position:I,mode:F.mode,text:ie},"line"in F&&(j.lineColor=n(ee,1,ce),j.lineWidth=ee.width,j.lineDashes=ee.dash),"marker"in F){var Ve=r(F);j.scatterColor=n(Y,1,ce),j.scatterSize=w(Y.size,ce,_,20,Ve),j.scatterMarker=w(Y.symbol,ce,p,"\u25CF"),j.scatterLineWidth=Y.line.width,j.scatterLineColor=n(Y.line,1,ce),j.scatterAngle=0}"textposition"in F&&(j.textOffset=M(F.textposition),j.textColor=n(F.textfont,1,ce),j.textSize=w(F.textfont.size,ce,a.identity,12),j.textFont=F.textfont.family,j.textAngle=0);var Ae=["x","y","z"];for(j.project=[!1,!1,!1],j.projectScale=[1,1,1],j.projectOpacity=[1,1,1],$=0;$<3;++$){var Le=F.projection[Ae[$]];(j.project[$]=Le.show)&&(j.projectOpacity[$]=Le.opacity,j.projectScale[$]=Le.scale)}j.errorBounds=g(F,R,D);var je=l([F.error_x,F.error_y,F.error_z]);return j.errorColor=je.color,j.errorLineWidth=je.lineWidth,j.errorCapSize=je.capSize,j.delaunayAxis=F.surfaceaxis,j.delaunayColor=i(F.surfacecolor),j}function L(P){if(a.isArrayOrTypedArray(P)){var F=P[0];return a.isArrayOrTypedArray(F)&&(P=F),"rgb("+P.slice(0,3).map(function(I){return Math.round(I*255)})+")"}return null}function S(P){return a.isArrayOrTypedArray(P)?P.length===4&&typeof P[0]=="number"?L(P):P.map(L):null}f.update=function(P){var F=this.scene.glplot.gl,I,D,R,N,z=v.solid;this.data=P;var G=h(this.scene,P);"mode"in G&&(this.mode=G.mode),"lineDashes"in G&&G.lineDashes in v&&(z=v[G.lineDashes]),this.color=S(G.scatterColor)||S(G.lineColor),this.dataPoints=G.position,I={gl:this.scene.glplot.gl,position:G.position,color:G.lineColor,lineWidth:G.lineWidth||1,dashes:z[0],dashScale:z[1],opacity:P.opacity,connectGaps:P.connectgaps},this.mode.indexOf("lines")!==-1?this.linePlot?this.linePlot.update(I):(this.linePlot=m(I),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var Y=P.opacity;if(P.marker&&P.marker.opacity&&(Y*=P.marker.opacity),D={gl:this.scene.glplot.gl,position:G.position,color:G.scatterColor,size:G.scatterSize,glyph:G.scatterMarker,opacity:Y,orthographic:!0,lineWidth:G.scatterLineWidth,lineColor:G.scatterLineColor,project:G.project,projectScale:G.projectScale,projectOpacity:G.projectOpacity},this.mode.indexOf("markers")!==-1?this.scatterPlot?this.scatterPlot.update(D):(this.scatterPlot=c(D),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),N={gl:this.scene.glplot.gl,position:G.position,glyph:G.text,color:G.textColor,size:G.textSize,angle:G.textAngle,alignment:G.textOffset,font:G.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:P.opacity},this.textLabels=P.hovertext||P.text,this.mode.indexOf("text")!==-1?this.textMarkers?this.textMarkers.update(N):(this.textMarkers=c(N),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),R={gl:this.scene.glplot.gl,position:G.position,color:G.errorColor,error:G.errorBounds,lineWidth:G.errorLineWidth,capSize:G.errorCapSize,opacity:P.opacity},this.errorBars?G.errorBounds?this.errorBars.update(R):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):G.errorBounds&&(this.errorBars=A(R),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),G.delaunayAxis>=0){var ee=y(G.position,G.delaunayColor,G.delaunayAxis);ee.opacity=P.opacity,this.delaunayMesh?this.delaunayMesh.update(ee):(ee.gl=F,this.delaunayMesh=T(ee),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},f.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())};function E(P,F){var I=new d(P,F.uid);return I.update(F),I}B.exports=E},{"../../../stackgl_modules":1133,"../../components/fx/helpers":403,"../../constants/gl3d_dashes":488,"../../constants/gl3d_markers":489,"../../lib":515,"../../lib/gl_format_color":511,"../../lib/str2rgbarray":540,"../../plots/cartesian/axes":566,"../scatter/make_bubble_size_func":953,"./calc_errors":966}],968:[function(t,B,V){var m=t("../../registry"),c=t("../../lib"),A=t("../scatter/subtypes"),T=t("../scatter/marker_defaults"),e=t("../scatter/line_defaults"),a=t("../scatter/text_defaults"),i=t("./attributes");B.exports=function(v,s,o,b){function g(_,p){return c.coerce(v,s,i,_,p)}var d=n(v,s,g,b);if(!d){s.visible=!1;return}g("text"),g("hovertext"),g("hovertemplate"),g("xhoverformat"),g("yhoverformat"),g("zhoverformat"),g("mode"),A.hasLines(s)&&(g("connectgaps"),e(v,s,o,b,g)),A.hasMarkers(s)&&T(v,s,o,b,g,{noSelect:!0,noAngle:!0}),A.hasText(s)&&(g("texttemplate"),a(v,s,b,g,{noSelect:!0}));var f=(s.line||{}).color,y=(s.marker||{}).color;g("surfaceaxis")>=0&&g("surfacecolor",f||y);for(var l=["x","y","z"],x=0;x<3;++x){var u="projection."+l[x];g(u+".show")&&(g(u+".opacity"),g(u+".scale"))}var M=m.getComponentMethod("errorbars","supplyDefaults");M(v,s,f||y||o,{axis:"z"}),M(v,s,f||y||o,{axis:"y",inherit:"z"}),M(v,s,f||y||o,{axis:"x",inherit:"z"})};function n(r,v,s,o){var b=0,g=s("x"),d=s("y"),f=s("z"),y=m.getComponentMethod("calendars","handleTraceDefaults");return y(r,v,["x","y","z"],o),g&&d&&f&&(b=Math.min(g.length,d.length,f.length),v._length=v._xlength=v._ylength=v._zlength=b),b}},{"../../lib":515,"../../registry":647,"../scatter/line_defaults":949,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":964}],969:[function(t,B,V){B.exports={plot:t("./convert"),attributes:t("./attributes"),markerSymbols:t("../../constants/gl3d_markers"),supplyDefaults:t("./defaults"),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:t("./calc"),moduleType:"trace",name:"scatter3d",basePlotModule:t("../../plots/gl3d"),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},{"../../constants/gl3d_markers":489,"../../plots/gl3d":607,"./attributes":964,"./calc":965,"./convert":967,"./defaults":968}],970:[function(t,B,V){var m=t("../scatter/attributes"),c=t("../../plots/attributes"),A=t("../../plots/template_attributes").hovertemplateAttrs,T=t("../../plots/template_attributes").texttemplateAttrs,e=t("../../components/colorscale/attributes"),a=t("../../lib/extend").extendFlat,i=m.marker,n=m.line,r=i.line;B.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:a({},m.mode,{dflt:"markers"}),text:a({},m.text,{}),texttemplate:T({editType:"plot"},{keys:["a","b","text"]}),hovertext:a({},m.hovertext,{}),line:{color:n.color,width:n.width,dash:n.dash,backoff:n.backoff,shape:a({},n.shape,{values:["linear","spline"]}),smoothing:n.smoothing,editType:"calc"},connectgaps:m.connectgaps,fill:a({},m.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:m.fillcolor,marker:a({symbol:i.symbol,opacity:i.opacity,maxdisplayed:i.maxdisplayed,angle:i.angle,angleref:i.angleref,standoff:i.standoff,size:i.size,sizeref:i.sizeref,sizemin:i.sizemin,sizemode:i.sizemode,line:a({width:r.width,editType:"calc"},e("marker.line")),gradient:i.gradient,editType:"calc"},e("marker")),textfont:m.textfont,textposition:m.textposition,selected:m.selected,unselected:m.unselected,hoverinfo:a({},c.hoverinfo,{flags:["a","b","text","name"]}),hoveron:m.hoveron,hovertemplate:A()}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scatter/attributes":936}],971:[function(t,B,V){var m=t("fast-isnumeric"),c=t("../scatter/colorscale_calc"),A=t("../scatter/arrays_to_calcdata"),T=t("../scatter/calc_selection"),e=t("../scatter/calc").calcMarkerSize,a=t("../carpet/lookup_carpetid");B.exports=function(n,r){var v=r._carpetTrace=a(n,r);if(!(!v||!v.visible||v.visible==="legendonly")){var s;r.xaxis=v.xaxis,r.yaxis=v.yaxis;var o=r._length,b=new Array(o),g,d,f=!1;for(s=0;s<o;s++)if(g=r.a[s],d=r.b[s],m(g)&&m(d)){var y=v.ab2xy(+g,+d,!0),l=v.isVisible(+g,+d);l||(f=!0),b[s]={x:y[0],y:y[1],a:g,b:d,vis:l}}else b[s]={x:!1,y:!1};return r._needsCull=f,b[0].carpet=v,b[0].trace=r,e(r,o),c(n,r),A(b,r),T(b,r),b}}},{"../carpet/lookup_carpetid":717,"../scatter/arrays_to_calcdata":935,"../scatter/calc":937,"../scatter/calc_selection":938,"../scatter/colorscale_calc":939,"fast-isnumeric":190}],972:[function(t,B,V){var m=t("../../lib"),c=t("../scatter/constants"),A=t("../scatter/subtypes"),T=t("../scatter/marker_defaults"),e=t("../scatter/line_defaults"),a=t("../scatter/line_shape_defaults"),i=t("../scatter/text_defaults"),n=t("../scatter/fillcolor_defaults"),r=t("./attributes");B.exports=function(s,o,b,g){function d(_,p){return m.coerce(s,o,r,_,p)}d("carpet"),o.xaxis="x",o.yaxis="y";var f=d("a"),y=d("b"),l=Math.min(f.length,y.length);if(!l){o.visible=!1;return}o._length=l,d("text"),d("texttemplate"),d("hovertext");var x=l<c.PTS_LINESONLY?"lines+markers":"lines";d("mode",x),A.hasLines(o)&&(e(s,o,b,g,d,{backoff:!0}),a(s,o,d),d("connectgaps")),A.hasMarkers(o)&&T(s,o,b,g,d,{gradient:!0}),A.hasText(o)&&i(s,o,g,d);var u=[];(A.hasMarkers(o)||A.hasText(o))&&(d("marker.maxdisplayed"),u.push("points")),d("fill"),o.fill!=="none"&&(n(s,o,b,d),A.hasLines(o)||a(s,o,d)),(o.fill==="tonext"||o.fill==="toself")&&u.push("fills");var M=d("hoveron",u.join("+")||"points");M!=="fills"&&d("hovertemplate"),m.coerceSelectionMarkerOpacity(o,d)}},{"../../lib":515,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/line_shape_defaults":951,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":970}],973:[function(t,B,V){B.exports=function(c,A,T,e,a){var i=e[a];return c.a=i.a,c.b=i.b,c.y=i.y,c}},{}],974:[function(t,B,V){B.exports=function(c,A){var T={},e=A._carpet,a=e.ab2ij([c.a,c.b]),i=Math.floor(a[0]),n=a[0]-i,r=Math.floor(a[1]),v=a[1]-r,s=e.evalxy([],i,r,n,v);return T.yLabel=s[1].toFixed(3),T}},{}],975:[function(t,B,V){var m=t("../scatter/hover"),c=t("../../lib").fillText;B.exports=function(T,e,a,i){var n=m(T,e,a,i);if(!n||n[0].index===!1)return;var r=n[0];if(r.index===void 0){var v=1-r.y0/T.ya._length,s=T.xa._length,o=s*v/2,b=s-o;return r.x0=Math.max(Math.min(r.x0,b),o),r.x1=Math.max(Math.min(r.x1,b),o),n}var g=r.cd[r.index];r.a=g.a,r.b=g.b,r.xLabelVal=void 0,r.yLabelVal=void 0;var d=r.trace,f=d._carpet,y=d._module.formatLabels(g,d);r.yLabel=y.yLabel,delete r.text;var l=[];function x(_,p){var w;_.labelprefix&&_.labelprefix.length>0?w=_.labelprefix.replace(/ = $/,""):w=_._hovertitle,l.push(w+": "+p.toFixed(3)+_.labelsuffix)}if(!d.hovertemplate){var u=g.hi||d.hoverinfo,M=u.split("+");M.indexOf("all")!==-1&&(M=["a","b","text"]),M.indexOf("a")!==-1&&x(f.aaxis,g.a),M.indexOf("b")!==-1&&x(f.baxis,g.b),l.push("y: "+r.yLabel),M.indexOf("text")!==-1&&c(g,d,l),r.extraText=l.join("<br>")}return n}},{"../../lib":515,"../scatter/hover":947}],976:[function(t,B,V){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../scatter/marker_colorbar"),formatLabels:t("./format_labels"),calc:t("./calc"),plot:t("./plot"),style:t("../scatter/style").style,styleOnSelect:t("../scatter/style").styleOnSelect,hoverPoints:t("./hover"),selectPoints:t("../scatter/select"),eventData:t("./event_data"),moduleType:"trace",name:"scattercarpet",basePlotModule:t("../../plots/cartesian"),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"../scatter/marker_colorbar":954,"../scatter/select":958,"../scatter/style":960,"./attributes":970,"./calc":971,"./defaults":972,"./event_data":973,"./format_labels":974,"./hover":975,"./plot":977}],977:[function(t,B,V){var m=t("../scatter/plot"),c=t("../../plots/cartesian/axes"),A=t("../../components/drawing");B.exports=function(e,a,i,n){var r,v,s,o=i[0][0].carpet,b=c.getFromId(e,o.xaxis||"x"),g=c.getFromId(e,o.yaxis||"y"),d={xaxis:b,yaxis:g,plot:a.plot};for(r=0;r<i.length;r++)v=i[r][0].trace,v._xA=b,v._yA=g;for(m(e,d,i,n),r=0;r<i.length;r++)v=i[r][0].trace,s=n.selectAll("g.trace"+v.uid+" .js-line"),A.setClipUrl(s,i[r][0].carpet._clipPathId,e)}},{"../../components/drawing":389,"../../plots/cartesian/axes":566,"../scatter/plot":957}],978:[function(t,B,V){var m=t("../../plots/template_attributes").hovertemplateAttrs,c=t("../../plots/template_attributes").texttemplateAttrs,A=t("../scatter/attributes"),T=t("../../plots/attributes"),e=t("../../components/colorscale/attributes"),a=t("../../components/drawing/attributes").dash,i=t("../../lib/extend").extendFlat,n=t("../../plot_api/edit_types").overrideAll,r=A.marker,v=A.line,s=r.line;B.exports=n({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:i({},A.mode,{dflt:"markers"}),text:i({},A.text,{}),texttemplate:c({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:i({},A.hovertext,{}),textfont:A.textfont,textposition:A.textposition,line:{color:v.color,width:v.width,dash:a},connectgaps:A.connectgaps,marker:i({symbol:r.symbol,opacity:r.opacity,angle:r.angle,angleref:i({},r.angleref,{values:["previous","up","north"]}),standoff:r.standoff,size:r.size,sizeref:r.sizeref,sizemin:r.sizemin,sizemode:r.sizemode,colorbar:r.colorbar,line:i({width:s.width},e("marker.line")),gradient:r.gradient},e("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:A.fillcolor,selected:A.selected,unselected:A.unselected,hoverinfo:i({},T.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:m()},"calc","nested")},{"../../components/colorscale/attributes":374,"../../components/drawing/attributes":388,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scatter/attributes":936}],979:[function(t,B,V){var m=t("fast-isnumeric"),c=t("../../constants/numerical").BADNUM,A=t("../scatter/colorscale_calc"),T=t("../scatter/arrays_to_calcdata"),e=t("../scatter/calc_selection"),a=t("../../lib")._;function i(n){return n&&typeof n=="string"}B.exports=function(r,v){var s=Array.isArray(v.locations),o=s?v.locations.length:v._length,b=new Array(o),g;v.geojson?g=function(u){return i(u)||m(u)}:g=i;for(var d=0;d<o;d++){var f=b[d]={};if(s){var y=v.locations[d];f.loc=g(y)?y:null}else{var l=v.lon[d],x=v.lat[d];m(l)&&m(x)?f.lonlat=[+l,+x]:f.lonlat=[c,c]}}return T(b,v),A(r,v),e(b,v),o&&(b[0].t={labels:{lat:a(r,"lat:")+" ",lon:a(r,"lon:")+" "}}),b}},{"../../constants/numerical":491,"../../lib":515,"../scatter/arrays_to_calcdata":935,"../scatter/calc_selection":938,"../scatter/colorscale_calc":939,"fast-isnumeric":190}],980:[function(t,B,V){var m=t("../../lib"),c=t("../scatter/subtypes"),A=t("../scatter/marker_defaults"),T=t("../scatter/line_defaults"),e=t("../scatter/text_defaults"),a=t("../scatter/fillcolor_defaults"),i=t("./attributes");B.exports=function(r,v,s,o){function b(M,_){return m.coerce(r,v,i,M,_)}var g=b("locations"),d;if(g&&g.length){var f=b("geojson"),y;(typeof f=="string"&&f!==""||m.isPlainObject(f))&&(y="geojson-id");var l=b("locationmode",y);l==="geojson-id"&&b("featureidkey"),d=g.length}else{var x=b("lon")||[],u=b("lat")||[];d=Math.min(x.length,u.length)}if(!d){v.visible=!1;return}v._length=d,b("text"),b("hovertext"),b("hovertemplate"),b("mode"),c.hasLines(v)&&(T(r,v,s,o,b),b("connectgaps")),c.hasMarkers(v)&&A(r,v,s,o,b,{gradient:!0}),c.hasText(v)&&(b("texttemplate"),e(r,v,o,b)),b("fill"),v.fill!=="none"&&a(r,v,s,b),m.coerceSelectionMarkerOpacity(v,b)}},{"../../lib":515,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":978}],981:[function(t,B,V){B.exports=function(c,A,T,e,a){c.lon=A.lon,c.lat=A.lat,c.location=A.loc?A.loc:null;var i=e[a];return i.fIn&&i.fIn.properties&&(c.properties=i.fIn.properties),c}},{}],982:[function(t,B,V){var m=t("../../plots/cartesian/axes");B.exports=function(A,T,e){var a={},i=e[T.geo]._subplot,n=i.mockAxis,r=A.lonlat;return a.lonLabel=m.tickText(n,n.c2l(r[0]),!0).text,a.latLabel=m.tickText(n,n.c2l(r[1]),!0).text,a}},{"../../plots/cartesian/axes":566}],983:[function(t,B,V){var m=t("../../components/fx"),c=t("../../constants/numerical").BADNUM,A=t("../scatter/get_trace_color"),T=t("../../lib").fillText,e=t("./attributes");B.exports=function(n,r,v){var s=n.cd,o=s[0].trace,b=n.xa,g=n.ya,d=n.subplot,f=d.projection.isLonLatOverEdges,y=d.project;function l(h){var L=h.lonlat;if(L[0]===c||f(L))return 1/0;var S=y(L),E=y([r,v]),P=Math.abs(S[0]-E[0]),F=Math.abs(S[1]-E[1]),I=Math.max(3,h.mrc||0);return Math.max(Math.sqrt(P*P+F*F)-I,1-3/I)}if(m.getClosest(s,l,n),n.index!==!1){var x=s[n.index],u=x.lonlat,M=[b.c2p(u),g.c2p(u)],_=x.mrc||1;n.x0=M[0]-_,n.x1=M[0]+_,n.y0=M[1]-_,n.y1=M[1]+_,n.loc=x.loc,n.lon=u[0],n.lat=u[1];var p={};p[o.geo]={_subplot:d};var w=o._module.formatLabels(x,o,p);return n.lonLabel=w.lonLabel,n.latLabel=w.latLabel,n.color=A(o,x),n.extraText=a(o,x,n,s[0].t.labels),n.hovertemplate=o.hovertemplate,[n]}};function a(i,n,r,v){if(i.hovertemplate)return;var s=n.hi||i.hoverinfo,o=s==="all"?e.hoverinfo.flags:s.split("+"),b=o.indexOf("location")!==-1&&Array.isArray(i.locations),g=o.indexOf("lon")!==-1,d=o.indexOf("lat")!==-1,f=o.indexOf("text")!==-1,y=[];function l(x){return x+"\xB0"}return b?y.push(n.loc):g&&d?y.push("("+l(r.latLabel)+", "+l(r.lonLabel)+")"):g?y.push(v.lon+l(r.lonLabel)):d&&y.push(v.lat+l(r.latLabel)),f&&T(n,i,y),y.join("<br>")}},{"../../components/fx":407,"../../constants/numerical":491,"../../lib":515,"../scatter/get_trace_color":946,"./attributes":978}],984:[function(t,B,V){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../scatter/marker_colorbar"),formatLabels:t("./format_labels"),calc:t("./calc"),calcGeoJSON:t("./plot").calcGeoJSON,plot:t("./plot").plot,style:t("./style"),styleOnSelect:t("../scatter/style").styleOnSelect,hoverPoints:t("./hover"),eventData:t("./event_data"),selectPoints:t("./select"),moduleType:"trace",name:"scattergeo",basePlotModule:t("../../plots/geo"),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/geo":598,"../scatter/marker_colorbar":954,"../scatter/style":960,"./attributes":978,"./calc":979,"./defaults":980,"./event_data":981,"./format_labels":982,"./hover":983,"./plot":985,"./select":986,"./style":987}],985:[function(t,B,V){var m=t("@plotly/d3"),c=t("../../lib"),A=t("../../lib/topojson_utils").getTopojsonFeatures,T=t("../../lib/geojson_utils"),e=t("../../lib/geo_location_utils"),a=t("../../plots/cartesian/autorange").findExtremes,i=t("../../constants/numerical").BADNUM,n=t("../scatter/calc").calcMarkerSize,r=t("../scatter/subtypes"),v=t("./style");function s(b,g,d){var f=g.layers.frontplot.select(".scatterlayer"),y=c.makeTraceGroups(f,d,"trace scattergeo");function l(x,u){x.lonlat[0]===i&&m.select(u).remove()}y.selectAll("*").remove(),y.each(function(x){var u=m.select(this),M=x[0].trace;if(r.hasLines(M)||M.fill!=="none"){var _=T.calcTraceToLineCoords(x),p=M.fill!=="none"?T.makePolygon(_):T.makeLine(_);u.selectAll("path.js-line").data([{geojson:p,trace:M}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}r.hasMarkers(M)&&u.selectAll("path.point").data(c.identity).enter().append("path").classed("point",!0).each(function(w){l(w,this)}),r.hasText(M)&&u.selectAll("g").data(c.identity).enter().append("g").append("text").each(function(w){l(w,this)}),v(b,x)})}function o(b,g){var d=b[0].trace,f=g[d.geo],y=f._subplot,l=d._length,x,u;if(Array.isArray(d.locations)){var M=d.locationmode,_=M==="geojson-id"?e.extractTraceFeature(b):A(d,y.topojson);for(x=0;x<l;x++){u=b[x];var p=M==="geojson-id"?u.fOut:e.locationToFeature(M,u.loc,_);u.lonlat=p?p.properties.ct:[i,i]}}var w={padded:!0},h,L;if(f.fitbounds==="geojson"&&d.locationmode==="geojson-id"){var S=e.computeBbox(e.getTraceGeojson(d));h=[S[0],S[2]],L=[S[1],S[3]]}else{for(h=new Array(l),L=new Array(l),x=0;x<l;x++)u=b[x],h[x]=u.lonlat[0],L[x]=u.lonlat[1];w.ppad=n(d,l)}d._extremes.lon=a(f.lonaxis._ax,h,w),d._extremes.lat=a(f.lataxis._ax,L,w)}B.exports={calcGeoJSON:o,plot:s}},{"../../constants/numerical":491,"../../lib":515,"../../lib/geo_location_utils":508,"../../lib/geojson_utils":509,"../../lib/topojson_utils":544,"../../plots/cartesian/autorange":565,"../scatter/calc":937,"../scatter/subtypes":961,"./style":987,"@plotly/d3":58}],986:[function(t,B,V){var m=t("../scatter/subtypes"),c=t("../../constants/numerical").BADNUM;B.exports=function(T,e){var a=T.cd,i=T.xaxis,n=T.yaxis,r=[],v=a[0].trace,s,o,b,g,d,f=!m.hasMarkers(v)&&!m.hasText(v);if(f)return[];if(e===!1)for(d=0;d<a.length;d++)a[d].selected=0;else for(d=0;d<a.length;d++)s=a[d],o=s.lonlat,o[0]!==c&&(b=i.c2p(o),g=n.c2p(o),e.contains([b,g],null,d,T)?(r.push({pointNumber:d,lon:o[0],lat:o[1]}),s.selected=1):s.selected=0);return r}},{"../../constants/numerical":491,"../scatter/subtypes":961}],987:[function(t,B,V){var m=t("@plotly/d3"),c=t("../../components/drawing"),A=t("../../components/color"),T=t("../scatter/style"),e=T.stylePoints,a=T.styleText;B.exports=function(r,v){v&&i(r,v)};function i(n,r){var v=r[0].trace,s=r[0].node3;s.style("opacity",r[0].trace.opacity),e(s,v,n),a(s,v,n),s.selectAll("path.js-line").style("fill","none").each(function(o){var b=m.select(this),g=o.trace,d=g.line||{};b.call(A.stroke,d.color).call(c.dashLine,d.dash||"",d.width||0),g.fill!=="none"&&b.call(A.fill,g.fillcolor)})}},{"../../components/color":367,"../../components/drawing":389,"../scatter/style":960,"@plotly/d3":58}],988:[function(t,B,V){var m=t("../../plots/attributes"),c=t("../scatter/attributes"),A=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,T=t("../../components/colorscale/attributes"),e=t("../../lib/sort_object_keys"),a=t("../../lib/extend").extendFlat,i=t("../../plot_api/edit_types").overrideAll,n=t("./constants").DASHES,r=c.line,v=c.marker,s=v.line,o=B.exports=i({x:c.x,x0:c.x0,dx:c.dx,y:c.y,y0:c.y0,dy:c.dy,xperiod:c.xperiod,yperiod:c.yperiod,xperiod0:c.xperiod0,yperiod0:c.yperiod0,xperiodalignment:c.xperiodalignment,yperiodalignment:c.yperiodalignment,xhoverformat:A("x"),yhoverformat:A("y"),text:c.text,hovertext:c.hovertext,textposition:c.textposition,textfont:c.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:r.color,width:r.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:e(n),dflt:"solid"}},marker:a({},T("marker"),{symbol:v.symbol,angle:v.angle,size:v.size,sizeref:v.sizeref,sizemin:v.sizemin,sizemode:v.sizemode,opacity:v.opacity,colorbar:v.colorbar,line:a({},T("marker.line"),{width:s.width})}),connectgaps:c.connectgaps,fill:a({},c.fill,{dflt:"none"}),fillcolor:c.fillcolor,selected:{marker:c.selected.marker,textfont:c.selected.textfont},unselected:{marker:c.unselected.marker,textfont:c.unselected.textfont},opacity:m.opacity},"calc","nested");o.x.editType=o.y.editType=o.x0.editType=o.y0.editType="calc+clearAxisTypes",o.hovertemplate=c.hovertemplate,o.texttemplate=c.texttemplate},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../lib/sort_object_keys":538,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../scatter/attributes":936,"./constants":991}],989:[function(t,B,V){var m=t("./hover");B.exports={moduleType:"trace",name:"scattergl",basePlotModule:t("../../plots/cartesian"),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:t("./attributes"),supplyDefaults:t("./defaults"),crossTraceDefaults:t("../scatter/cross_trace_defaults"),colorbar:t("../scatter/marker_colorbar"),formatLabels:t("./format_labels"),calc:t("./calc"),hoverPoints:m.hoverPoints,selectPoints:t("./select"),meta:{}}},{"../../plots/cartesian":578,"../scatter/cross_trace_defaults":942,"../scatter/marker_colorbar":954,"./attributes":988,"./calc":990,"./defaults":993,"./format_labels":995,"./hover":997,"./select":1001}],990:[function(t,B,V){var m=t("@plotly/point-cluster"),c=t("../../lib"),A=t("../../plots/cartesian/axis_ids"),T=t("../../plots/cartesian/autorange").findExtremes,e=t("../../plots/cartesian/align_period"),a=t("../scatter/calc"),i=a.calcMarkerSize,n=a.calcAxisExpansion,r=a.setFirstScatter,v=t("../scatter/colorscale_calc"),s=t("./convert"),o=t("./scene_update"),b=t("../../constants/numerical").BADNUM,g=t("./constants").TOO_MANY_POINTS;B.exports=function(l,x){var u=l._fullLayout,M=x._xA=A.getFromId(l,x.xaxis,"x"),_=x._yA=A.getFromId(l,x.yaxis,"y"),p=u._plots[x.xaxis+x.yaxis],w=x._length,h=w>=g,L=w*2,S={},E,P=M.makeCalcdata(x,"x"),F=_.makeCalcdata(x,"y"),I=e(x,M,"x",P),D=e(x,_,"y",F),R=I.vals,N=D.vals;x._x=R,x._y=N,x.xperiodalignment&&(x._origX=P,x._xStarts=I.starts,x._xEnds=I.ends),x.yperiodalignment&&(x._origY=F,x._yStarts=D.starts,x._yEnds=D.ends);var z=new Array(L),G=new Array(w);for(E=0;E<w;E++)z[E*2]=R[E]===b?NaN:R[E],z[E*2+1]=N[E]===b?NaN:N[E],G[E]=E;if(M.type==="log")for(E=0;E<L;E+=2)z[E]=M.c2l(z[E]);if(_.type==="log")for(E=1;E<L;E+=2)z[E]=_.c2l(z[E]);h&&M.type!=="log"&&_.type!=="log"?S.tree=m(z):S.ids=G,v(l,x);var Y=f(l,p,x,z,R,N),ee=o(l,p);r(u,x);var Z;return h?Y.marker&&(Z=Y.marker.sizeAvg||Math.max(Y.marker.size,3)):Z=i(x,w),n(l,x,M,_,R,N,Z),Y.errorX&&d(x,M,Y.errorX),Y.errorY&&d(x,_,Y.errorY),Y.fill&&!ee.fill2d&&(ee.fill2d=!0),Y.marker&&!ee.scatter2d&&(ee.scatter2d=!0),Y.line&&!ee.line2d&&(ee.line2d=!0),(Y.errorX||Y.errorY)&&!ee.error2d&&(ee.error2d=!0),Y.text&&!ee.glText&&(ee.glText=!0),Y.marker&&(Y.marker.snap=w),ee.lineOptions.push(Y.line),ee.errorXOptions.push(Y.errorX),ee.errorYOptions.push(Y.errorY),ee.fillOptions.push(Y.fill),ee.markerOptions.push(Y.marker),ee.markerSelectedOptions.push(Y.markerSel),ee.markerUnselectedOptions.push(Y.markerUnsel),ee.textOptions.push(Y.text),ee.textSelectedOptions.push(Y.textSel),ee.textUnselectedOptions.push(Y.textUnsel),ee.selectBatch.push([]),ee.unselectBatch.push([]),S._scene=ee,S.index=ee.count,S.x=R,S.y=N,S.positions=z,ee.count++,[{x:!1,y:!1,t:S,trace:x}]};function d(y,l,x){var u=y._extremes[l._id],M=T(l,x._bnds,{padded:!0});u.min=u.min.concat(M.min),u.max=u.max.concat(M.max)}function f(y,l,x,u,M,_){var p=s.style(y,x);if(p.marker&&(p.marker.positions=u),p.line&&u.length>1&&c.extendFlat(p.line,s.linePositions(y,x,u)),p.errorX||p.errorY){var w=s.errorBarPositions(y,x,u,M,_);p.errorX&&c.extendFlat(p.errorX,w.x),p.errorY&&c.extendFlat(p.errorY,w.y)}return p.text&&(c.extendFlat(p.text,{positions:u},s.textPosition(y,x,p.text,p.marker)),c.extendFlat(p.textSel,{positions:u},s.textPosition(y,x,p.text,p.markerSel)),c.extendFlat(p.textUnsel,{positions:u},s.textPosition(y,x,p.text,p.markerUnsel))),p}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/autorange":565,"../../plots/cartesian/axis_ids":570,"../scatter/calc":937,"../scatter/colorscale_calc":939,"./constants":991,"./convert":992,"./scene_update":1e3,"@plotly/point-cluster":59}],991:[function(t,B,V){var m=20;B.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:m,SYMBOL_STROKE:m/20,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},{}],992:[function(t,B,V){var m=t("fast-isnumeric"),c=t("svg-path-sdf"),A=t("color-normalize"),T=t("../../registry"),e=t("../../lib"),a=t("../../components/drawing"),i=t("../../plots/cartesian/axis_ids"),n=t("../../lib/gl_format_color").formatColor,r=t("../scatter/subtypes"),v=t("../scatter/make_bubble_size_func"),s=t("./helpers"),o=t("./constants"),b=t("../../constants/interactions").DESELECTDIM,g={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},d=t("../../components/fx/helpers").appendArrayPointValue;function f(I,D){var R,N={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},z=I._context.plotGlPixelRatio;if(D.visible!==!0)return N;if(r.hasText(D)&&(N.text=y(I,D),N.textSel=u(I,D,D.selected),N.textUnsel=u(I,D,D.unselected)),r.hasMarkers(D)&&(N.marker=l(I,D),N.markerSel=x(I,D,D.selected),N.markerUnsel=x(I,D,D.unselected),!D.unselected&&e.isArrayOrTypedArray(D.marker.opacity))){var G=D.marker.opacity;for(N.markerUnsel.opacity=new Array(G.length),R=0;R<G.length;R++)N.markerUnsel.opacity[R]=b*G[R]}if(r.hasLines(D)){N.line={overlay:!0,thickness:D.line.width*z,color:D.line.color,opacity:D.opacity};var Y=(o.DASHES[D.line.dash]||[1]).slice();for(R=0;R<Y.length;++R)Y[R]*=D.line.width*z;N.line.dashes=Y}return D.error_x&&D.error_x.visible&&(N.errorX=M(D,D.error_x,z)),D.error_y&&D.error_y.visible&&(N.errorY=M(D,D.error_y,z)),!!D.fill&&D.fill!=="none"&&(N.fill={closed:!0,fill:D.fillcolor,thickness:0}),N}function y(I,D){var R=I._fullLayout,N=D._length,z=D.textfont,G=D.textposition,Y=Array.isArray(G)?G:[G],ee=z.color,Z=z.size,X=z.family,ne={},ce,Q=I._context.plotGlPixelRatio,K=D.texttemplate;if(K){ne.text=[];var U=R._d3locale,H=Array.isArray(K),q=H?Math.min(K.length,N):N,re=H?function(_e){return K[_e]}:function(){return K};for(ce=0;ce<q;ce++){var j={i:ce},$=D._module.formatLabels(j,D,R),ie={};d(ie,D,ce);var oe=D._meta||{};ne.text.push(e.texttemplateString(re(ce),$,U,ie,j,oe))}}else Array.isArray(D.text)&&D.text.length<N?ne.text=D.text.slice():ne.text=D.text;if(Array.isArray(ne.text))for(ce=ne.text.length;ce<N;ce++)ne.text[ce]="";for(ne.opacity=D.opacity,ne.font={},ne.align=[],ne.baseline=[],ce=0;ce<Y.length;ce++){var ae=Y[ce].split(/\s+/);switch(ae[1]){case"left":ne.align.push("right");break;case"right":ne.align.push("left");break;default:ne.align.push(ae[1])}switch(ae[0]){case"top":ne.baseline.push("bottom");break;case"bottom":ne.baseline.push("top");break;default:ne.baseline.push(ae[0])}}if(Array.isArray(ee))for(ne.color=new Array(N),ce=0;ce<N;ce++)ne.color[ce]=ee[ce];else ne.color=ee;if(e.isArrayOrTypedArray(Z)||Array.isArray(X))for(ne.font=new Array(N),ce=0;ce<N;ce++){var se=ne.font[ce]={};se.size=(e.isTypedArray(Z)?Z[ce]:Array.isArray(Z)?m(Z[ce])?Z[ce]:0:Z)*Q,se.family=Array.isArray(X)?X[ce]:X}else ne.font={size:Z*Q,family:X};return ne}function l(I,D){var R=D._length,N=D.marker,z={},G,Y=e.isArrayOrTypedArray(N.symbol),ee=e.isArrayOrTypedArray(N.angle),Z=e.isArrayOrTypedArray(N.color),X=e.isArrayOrTypedArray(N.line.color),ne=e.isArrayOrTypedArray(N.opacity),ce=e.isArrayOrTypedArray(N.size),Q=e.isArrayOrTypedArray(N.line.width),K;if(Y||(K=s.isOpenSymbol(N.symbol)),Y||Z||X||ne||ee){z.symbols=new Array(R),z.angles=new Array(R),z.colors=new Array(R),z.borderColors=new Array(R);var U=N.symbol,H=N.angle,q=n(N,N.opacity,R),re=n(N.line,N.opacity,R);if(!Array.isArray(re[0])){var j=re;for(re=Array(R),G=0;G<R;G++)re[G]=j}if(!Array.isArray(q[0])){var $=q;for(q=Array(R),G=0;G<R;G++)q[G]=$}if(!Array.isArray(U)){var ie=U;for(U=Array(R),G=0;G<R;G++)U[G]=ie}if(!Array.isArray(H)){var oe=H;for(H=Array(R),G=0;G<R;G++)H[G]=oe}for(z.symbols=U,z.angles=H,z.colors=q,z.borderColors=re,G=0;G<R;G++)Y&&(K=s.isOpenSymbol(N.symbol[G])),K&&(re[G]=q[G].slice(),q[G]=q[G].slice(),q[G][3]=0);for(z.opacity=D.opacity,z.markers=new Array(R),G=0;G<R;G++)z.markers[G]=S({mx:z.symbols[G],ma:z.angles[G]},D)}else K?(z.color=A(N.color,"uint8"),z.color[3]=0,z.borderColor=A(N.color,"uint8")):(z.color=A(N.color,"uint8"),z.borderColor=A(N.line.color,"uint8")),z.opacity=D.opacity*N.opacity,z.marker=S({mx:N.symbol,ma:N.angle},D);var ae=1,se=v(D,ae),_e;if(ce||Q){var ue=z.sizes=new Array(R),ye=z.borderSizes=new Array(R),xe=0,me;if(ce){for(G=0;G<R;G++)ue[G]=se(N.size[G]),xe+=ue[G];me=xe/R}else for(_e=se(N.size),G=0;G<R;G++)ue[G]=_e;if(Q)for(G=0;G<R;G++)ye[G]=N.line.width[G];else for(_e=N.line.width,G=0;G<R;G++)ye[G]=_e;z.sizeAvg=me}else z.size=se(N&&N.size||10),z.borderSizes=se(N.line.width);return z}function x(I,D,R){var N=D.marker,z={};return R&&(R.marker&&R.marker.symbol?z=l(I,e.extendFlat({},N,R.marker)):R.marker&&(R.marker.size&&(z.size=R.marker.size),R.marker.color&&(z.colors=R.marker.color),R.marker.opacity!==void 0&&(z.opacity=R.marker.opacity))),z}function u(I,D,R){var N={};if(!R)return N;if(R.textfont){var z={opacity:1,text:D.text,texttemplate:D.texttemplate,textposition:D.textposition,textfont:e.extendFlat({},D.textfont)};R.textfont&&e.extendFlat(z.textfont,R.textfont),N=y(I,z)}return N}function M(I,D,R){var N={capSize:D.width*2*R,lineWidth:D.thickness*R,color:D.color};return D.copy_ystyle&&(N=I.error_y),N}var _=o.SYMBOL_SDF_SIZE,p=o.SYMBOL_SIZE,w=o.SYMBOL_STROKE,h={},L=a.symbolFuncs[0](p*.05);function S(I,D){var R=I.mx;if(R==="circle")return null;var N,z,G=a.symbolNumber(R),Y=a.symbolFuncs[G%100],ee=!!a.symbolNoDot[G%100],Z=!!a.symbolNoFill[G%100],X=s.isDotSymbol(R);if(I.ma&&(R+="_"+I.ma),h[R])return h[R];var ne=a.getMarkerAngle(I,D);return X&&!ee?N=Y(p*1.1,ne)+L:N=Y(p,ne),z=c(N,{w:_,h:_,viewBox:[-p,-p,p,p],stroke:Z?w:-w}),h[R]=z,z||null}function E(I,D,R){var N=R.length,z=N/2,G,Y;if(r.hasLines(D)&&z)if(D.line.shape==="hv"){for(G=[],Y=0;Y<z-1;Y++)isNaN(R[Y*2])||isNaN(R[Y*2+1])?G.push(NaN,NaN,NaN,NaN):(G.push(R[Y*2],R[Y*2+1]),!isNaN(R[Y*2+2])&&!isNaN(R[Y*2+3])?G.push(R[Y*2+2],R[Y*2+1]):G.push(NaN,NaN));G.push(R[N-2],R[N-1])}else if(D.line.shape==="hvh"){for(G=[],Y=0;Y<z-1;Y++)if(isNaN(R[Y*2])||isNaN(R[Y*2+1])||isNaN(R[Y*2+2])||isNaN(R[Y*2+3]))!isNaN(R[Y*2])&&!isNaN(R[Y*2+1])?G.push(R[Y*2],R[Y*2+1]):G.push(NaN,NaN),G.push(NaN,NaN);else{var ee=(R[Y*2]+R[Y*2+2])/2;G.push(R[Y*2],R[Y*2+1],ee,R[Y*2+1],ee,R[Y*2+3])}G.push(R[N-2],R[N-1])}else if(D.line.shape==="vhv"){for(G=[],Y=0;Y<z-1;Y++)if(isNaN(R[Y*2])||isNaN(R[Y*2+1])||isNaN(R[Y*2+2])||isNaN(R[Y*2+3]))!isNaN(R[Y*2])&&!isNaN(R[Y*2+1])?G.push(R[Y*2],R[Y*2+1]):G.push(NaN,NaN),G.push(NaN,NaN);else{var Z=(R[Y*2+1]+R[Y*2+3])/2;G.push(R[Y*2],R[Y*2+1],R[Y*2],Z,R[Y*2+2],Z)}G.push(R[N-2],R[N-1])}else if(D.line.shape==="vh"){for(G=[],Y=0;Y<z-1;Y++)isNaN(R[Y*2])||isNaN(R[Y*2+1])?G.push(NaN,NaN,NaN,NaN):(G.push(R[Y*2],R[Y*2+1]),!isNaN(R[Y*2+2])&&!isNaN(R[Y*2+3])?G.push(R[Y*2],R[Y*2+3]):G.push(NaN,NaN));G.push(R[N-2],R[N-1])}else G=R;var X=!1;for(Y=0;Y<G.length;Y++)if(isNaN(G[Y])){X=!0;break}var ne=X||G.length>o.TOO_MANY_POINTS||r.hasMarkers(D)?"rect":"round";if(X&&D.connectgaps){var ce=G[0],Q=G[1];for(Y=0;Y<G.length;Y+=2)isNaN(G[Y])||isNaN(G[Y+1])?(G[Y]=ce,G[Y+1]=Q):(ce=G[Y],Q=G[Y+1])}return{join:ne,positions:G}}function P(I,D,R,N,z){var G=T.getComponentMethod("errorbars","makeComputeError"),Y=i.getFromId(I,D.xaxis,"x"),ee=i.getFromId(I,D.yaxis,"y"),Z=R.length/2,X={};function ne(ce,Q){var K=Q._id.charAt(0),U=D["error_"+K];if(U&&U.visible&&(Q.type==="linear"||Q.type==="log")){for(var H=G(U),q={x:0,y:1}[K],re={x:[0,1,2,3],y:[2,3,0,1]}[K],j=new Float64Array(4*Z),$=1/0,ie=-1/0,oe=0,ae=0;oe<Z;oe++,ae+=4){var se=ce[oe];if(m(se)){var _e=R[oe*2+q],ue=H(se,oe),ye=ue[0],xe=ue[1];if(m(ye)&&m(xe)){var me=se-ye,be=se+xe;j[ae+re[0]]=_e-Q.c2l(me),j[ae+re[1]]=Q.c2l(be)-_e,j[ae+re[2]]=0,j[ae+re[3]]=0,$=Math.min($,se-ye),ie=Math.max(ie,se+xe)}}}X[K]={positions:R,errors:j,_bnds:[$,ie]}}}return ne(N,Y),ne(z,ee),X}function F(I,D,R,N){var z=D._length,G={},Y;if(r.hasMarkers(D)){var ee=R.font,Z=R.align,X=R.baseline;for(G.offset=new Array(z),Y=0;Y<z;Y++){var ne=N.sizes?N.sizes[Y]:N.size,ce=Array.isArray(ee)?ee[Y].size:ee.size,Q=Array.isArray(Z)?Z.length>1?Z[Y]:Z[0]:Z,K=Array.isArray(X)?X.length>1?X[Y]:X[0]:X,U=g[Q],H=g[K],q=ne?ne/.8+1:0,re=-H*q-H*.5;G.offset[Y]=[U*q/ce,re/ce]}}return G}B.exports={style:f,markerStyle:l,markerSelection:x,linePositions:E,errorBarPositions:P,textPosition:F}},{"../../components/drawing":389,"../../components/fx/helpers":403,"../../constants/interactions":490,"../../lib":515,"../../lib/gl_format_color":511,"../../plots/cartesian/axis_ids":570,"../../registry":647,"../scatter/make_bubble_size_func":953,"../scatter/subtypes":961,"./constants":991,"./helpers":996,"color-normalize":89,"fast-isnumeric":190,"svg-path-sdf":311}],993:[function(t,B,V){var m=t("../../lib"),c=t("../../registry"),A=t("./helpers"),T=t("./attributes"),e=t("../scatter/constants"),a=t("../scatter/subtypes"),i=t("../scatter/xy_defaults"),n=t("../scatter/period_defaults"),r=t("../scatter/marker_defaults"),v=t("../scatter/line_defaults"),s=t("../scatter/fillcolor_defaults"),o=t("../scatter/text_defaults");B.exports=function(g,d,f,y){function l(L,S){return m.coerce(g,d,T,L,S)}var x=g.marker?A.isOpenSymbol(g.marker.symbol):!1,u=a.isBubble(g),M=i(g,d,y,l);if(!M){d.visible=!1;return}n(g,d,y,l),l("xhoverformat"),l("yhoverformat");var _=M<e.PTS_LINESONLY?"lines+markers":"lines";l("text"),l("hovertext"),l("hovertemplate"),l("mode",_),a.hasLines(d)&&(l("connectgaps"),v(g,d,f,y,l),l("line.shape")),a.hasMarkers(d)&&(r(g,d,f,y,l,{noAngleRef:!0,noStandOff:!0}),l("marker.line.width",x||u?1:0)),a.hasText(d)&&(l("texttemplate"),o(g,d,y,l));var p=(d.line||{}).color,w=(d.marker||{}).color;l("fill"),d.fill!=="none"&&s(g,d,f,l);var h=c.getComponentMethod("errorbars","supplyDefaults");h(g,d,p||w||f,{axis:"y"}),h(g,d,p||w||f,{axis:"x",inherit:"y"}),m.coerceSelectionMarkerOpacity(d,l)}},{"../../lib":515,"../../registry":647,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/marker_defaults":955,"../scatter/period_defaults":956,"../scatter/subtypes":961,"../scatter/text_defaults":962,"../scatter/xy_defaults":963,"./attributes":988,"./helpers":996}],994:[function(t,B,V){var m=t("../../lib"),c=t("../../components/color"),A=t("../../constants/interactions").DESELECTDIM;function T(e){var a=e[0],i=a.trace,n=a.t,r=n._scene,v=n.index,s=r.selectBatch[v],o=r.unselectBatch[v],b=r.textOptions[v],g=r.textSelectedOptions[v]||{},d=r.textUnselectedOptions[v]||{},f=m.extendFlat({},b),y,l;if(s.length||o.length){var x=g.color,u=d.color,M=b.color,_=Array.isArray(M);for(f.color=new Array(i._length),y=0;y<s.length;y++)l=s[y],f.color[l]=x||(_?M[l]:M);for(y=0;y<o.length;y++){l=o[y];var p=_?M[l]:M;f.color[l]=u||(x?p:c.addOpacity(p,A))}}r.glText[v].update(f)}B.exports={styleTextSelection:T}},{"../../components/color":367,"../../constants/interactions":490,"../../lib":515}],995:[function(t,B,V){var m=t("../scatter/format_labels");B.exports=function(A,T,e){var a=A.i;return"x"in A||(A.x=T._x[a]),"y"in A||(A.y=T._y[a]),m(A,T,e)}},{"../scatter/format_labels":945}],996:[function(t,B,V){var m=t("./constants");V.isOpenSymbol=function(c){return typeof c=="string"?m.OPEN_RE.test(c):c%200>100},V.isDotSymbol=function(c){return typeof c=="string"?m.DOT_RE.test(c):c>200}},{"./constants":991}],997:[function(t,B,V){var m=t("../../registry"),c=t("../../lib"),A=t("../scatter/get_trace_color");function T(a,i,n,r){var v=a.cd,s=v[0].t,o=v[0].trace,b=a.xa,g=a.ya,d=s.x,f=s.y,y=b.c2p(i),l=g.c2p(n),x=a.distance,u;if(s.tree){var M=b.p2c(y-x),_=b.p2c(y+x),p=g.p2c(l-x),w=g.p2c(l+x);r==="x"?u=s.tree.range(Math.min(M,_),Math.min(g._rl[0],g._rl[1]),Math.max(M,_),Math.max(g._rl[0],g._rl[1])):u=s.tree.range(Math.min(M,_),Math.min(p,w),Math.max(M,_),Math.max(p,w))}else u=s.ids;var h,L,S,E,P,F,I,D,R,N=x;if(r==="x"){var z=!!o.xperiodalignment,G=!!o.yperiodalignment;for(P=0;P<u.length;P++){if(h=u[P],S=d[h],F=Math.abs(b.c2p(S)-y),z){var Y=b.c2p(o._xStarts[h]),ee=b.c2p(o._xEnds[h]);F=y>=Math.min(Y,ee)&&y<=Math.max(Y,ee)?0:1/0}if(F<N){if(N=F,E=f[h],I=g.c2p(E)-l,G){var Z=g.c2p(o._yStarts[h]),X=g.c2p(o._yEnds[h]);I=l>=Math.min(Z,X)&&l<=Math.max(Z,X)?0:1/0}R=Math.sqrt(F*F+I*I),L=u[P]}}}else for(P=u.length-1;P>-1;P--)h=u[P],S=d[h],E=f[h],F=b.c2p(S)-y,I=g.c2p(E)-l,D=Math.sqrt(F*F+I*I),D<N&&(N=R=D,L=h);return a.index=L,a.distance=N,a.dxy=R,L===void 0?[a]:[e(a,d,f,o)]}function e(a,i,n,r){var v=a.xa,s=a.ya,o=a.distance,b=a.dxy,g=a.index,d={pointNumber:g,x:i[g],y:n[g]};d.tx=Array.isArray(r.text)?r.text[g]:r.text,d.htx=Array.isArray(r.hovertext)?r.hovertext[g]:r.hovertext,d.data=Array.isArray(r.customdata)?r.customdata[g]:r.customdata,d.tp=Array.isArray(r.textposition)?r.textposition[g]:r.textposition;var f=r.textfont;f&&(d.ts=c.isArrayOrTypedArray(f.size)?f.size[g]:f.size,d.tc=Array.isArray(f.color)?f.color[g]:f.color,d.tf=Array.isArray(f.family)?f.family[g]:f.family);var y=r.marker;y&&(d.ms=c.isArrayOrTypedArray(y.size)?y.size[g]:y.size,d.mo=c.isArrayOrTypedArray(y.opacity)?y.opacity[g]:y.opacity,d.mx=c.isArrayOrTypedArray(y.symbol)?y.symbol[g]:y.symbol,d.ma=c.isArrayOrTypedArray(y.angle)?y.angle[g]:y.angle,d.mc=c.isArrayOrTypedArray(y.color)?y.color[g]:y.color);var l=y&&y.line;l&&(d.mlc=Array.isArray(l.color)?l.color[g]:l.color,d.mlw=c.isArrayOrTypedArray(l.width)?l.width[g]:l.width);var x=y&&y.gradient;x&&x.type!=="none"&&(d.mgt=Array.isArray(x.type)?x.type[g]:x.type,d.mgc=Array.isArray(x.color)?x.color[g]:x.color);var u=v.c2p(d.x,!0),M=s.c2p(d.y,!0),_=d.mrc||1,p=r.hoverlabel;p&&(d.hbg=Array.isArray(p.bgcolor)?p.bgcolor[g]:p.bgcolor,d.hbc=Array.isArray(p.bordercolor)?p.bordercolor[g]:p.bordercolor,d.hts=c.isArrayOrTypedArray(p.font.size)?p.font.size[g]:p.font.size,d.htc=Array.isArray(p.font.color)?p.font.color[g]:p.font.color,d.htf=Array.isArray(p.font.family)?p.font.family[g]:p.font.family,d.hnl=c.isArrayOrTypedArray(p.namelength)?p.namelength[g]:p.namelength);var w=r.hoverinfo;w&&(d.hi=Array.isArray(w)?w[g]:w);var h=r.hovertemplate;h&&(d.ht=Array.isArray(h)?h[g]:h);var L={};L[a.index]=d;var S=r._origX,E=r._origY,P=c.extendFlat({},a,{color:A(r,d),x0:u-_,x1:u+_,xLabelVal:S?S[g]:d.x,y0:M-_,y1:M+_,yLabelVal:E?E[g]:d.y,cd:L,distance:o,spikeDistance:b,hovertemplate:d.ht});return d.htx?P.text=d.htx:d.tx?P.text=d.tx:r.text&&(P.text=r.text),c.fillText(d,r,P),m.getComponentMethod("errorbars","hoverInfo")(d,r,P),P}B.exports={hoverPoints:T,calcHover:e}},{"../../lib":515,"../../registry":647,"../scatter/get_trace_color":946}],998:[function(t,B,V){arguments[4][905][0].apply(V,arguments)},{"./base_index":989,"./plot":999,dup:905}],999:[function(t,B,b){var m=t("regl-scatter2d"),c=t("regl-line2d"),A=t("regl-error2d"),T=t("gl-text"),e=t("../../lib"),a=t("../../components/dragelement/helpers").selectMode,i=t("../../lib/prepare_regl"),n=t("../scatter/subtypes"),r=t("../scatter/link_traces"),v=t("./edit_style").styleTextSelection,s={};function o(g,d,f,y){var l=g._size,x=g.width*y,u=g.height*y,M=l.l*y,_=l.b*y,p=l.r*y,w=l.t*y,h=l.w*y,L=l.h*y;return[M+d.domain[0]*h,_+f.domain[0]*L,x-p-(1-d.domain[1])*h,u-w-(1-f.domain[1])*L]}var b=B.exports=function(d,f,y){if(!!y.length){var l=d._fullLayout,x=f._scene,u=f.xaxis,M=f.yaxis,_,p;if(!!x){var w=i(d,["ANGLE_instanced_arrays","OES_element_index_uint"],s);if(!w){x.init();return}var h=x.count,L=l._glcanvas.data()[0].regl;if(r(d,f,y),x.dirty){if(x.error2d===!0&&(x.error2d=A(L)),x.line2d===!0&&(x.line2d=c(L)),x.scatter2d===!0&&(x.scatter2d=m(L)),x.fill2d===!0&&(x.fill2d=c(L)),x.glText===!0)for(x.glText=new Array(h),_=0;_<h;_++)x.glText[_]=new T(L);if(x.glText){if(h>x.glText.length){var S=h-x.glText.length;for(_=0;_<S;_++)x.glText.push(new T(L))}else if(h<x.glText.length){var E=x.glText.length-h,P=x.glText.splice(h,E);P.forEach(function(j){j.destroy()})}for(_=0;_<h;_++)x.glText[_].update(x.textOptions[_])}if(x.line2d&&(x.line2d.update(x.lineOptions),x.lineOptions=x.lineOptions.map(function(j){if(j&&j.positions){for(var $=j.positions,ie=0;ie<$.length&&(isNaN($[ie])||isNaN($[ie+1]));)ie+=2;for(var oe=$.length-2;oe>ie&&(isNaN($[oe])||isNaN($[oe+1]));)oe-=2;j.positions=$.slice(ie,oe+2)}return j}),x.line2d.update(x.lineOptions)),x.error2d){var F=(x.errorXOptions||[]).concat(x.errorYOptions||[]);x.error2d.update(F)}x.scatter2d&&x.scatter2d.update(x.markerOptions),x.fillOrder=e.repeat(null,h),x.fill2d&&(x.fillOptions=x.fillOptions.map(function(j,$){var ie=y[$];if(!(!j||!ie||!ie[0]||!ie[0].trace)){var oe=ie[0],ae=oe.trace,se=oe.t,_e=x.lineOptions[$],ue,ye,xe=[];ae._ownfill&&xe.push($),ae._nexttrace&&xe.push($+1),xe.length&&(x.fillOrder[$]=xe);var me=[],be=_e&&_e.positions||se.positions,ke,De;if(ae.fill==="tozeroy"){for(ke=0;ke<be.length&&isNaN(be[ke+1]);)ke+=2;for(De=be.length-2;De>ke&&isNaN(be[De+1]);)De-=2;be[ke+1]!==0&&(me=[be[ke],0]),me=me.concat(be.slice(ke,De+2)),be[De+1]!==0&&(me=me.concat([be[De],0]))}else if(ae.fill==="tozerox"){for(ke=0;ke<be.length&&isNaN(be[ke]);)ke+=2;for(De=be.length-2;De>ke&&isNaN(be[De]);)De-=2;be[ke]!==0&&(me=[0,be[ke+1]]),me=me.concat(be.slice(ke,De+2)),be[De]!==0&&(me=me.concat([0,be[De+1]]))}else if(ae.fill==="toself"||ae.fill==="tonext"){for(me=[],ue=0,j.splitNull=!0,ye=0;ye<be.length;ye+=2)(isNaN(be[ye])||isNaN(be[ye+1]))&&(me=me.concat(be.slice(ue,ye)),me.push(be[ue],be[ue+1]),me.push(null,null),ue=ye+2);me=me.concat(be.slice(ue)),ue&&me.push(be[ue],be[ue+1])}else{var Ve=ae._nexttrace;if(Ve){var Ae=x.lineOptions[$+1];if(Ae){var Le=Ae.positions;if(ae.fill==="tonexty"){for(me=be.slice(),$=Math.floor(Le.length/2);$--;){var je=Le[$*2],Ye=Le[$*2+1];isNaN(je)||isNaN(Ye)||me.push(je,Ye)}j.fill=Ve.fillcolor}}}}if(ae._prevtrace&&ae._prevtrace.fill==="tonext"){var ze=x.lineOptions[$-1].positions,Ie=me.length/2;ue=Ie;var We=[ue];for(ye=0;ye<ze.length;ye+=2)(isNaN(ze[ye])||isNaN(ze[ye+1]))&&(We.push(ye/2+Ie+1),ue=ye+2);me=me.concat(ze),j.hole=We}return j.fillmode=ae.fill,j.opacity=ae.opacity,j.positions=me,j}}),x.fill2d.update(x.fillOptions))}var I=l.dragmode,D=a(I),R=l.clickmode.indexOf("select")>-1;for(_=0;_<h;_++){var N=y[_][0],z=N.trace,G=N.t,Y=G.index,ee=z._length,Z=G.x,X=G.y;if(z.selectedpoints||D||R){if(D||(D=!0),z.selectedpoints){var ne=x.selectBatch[Y]=e.selIndices2selPoints(z),ce={};for(p=0;p<ne.length;p++)ce[ne[p]]=1;var Q=[];for(p=0;p<ee;p++)ce[p]||Q.push(p);x.unselectBatch[Y]=Q}var K=G.xpx=new Array(ee),U=G.ypx=new Array(ee);for(p=0;p<ee;p++)K[p]=u.c2p(Z[p]),U[p]=M.c2p(X[p])}else G.xpx=G.ypx=null}if(D){if(x.select2d||(x.select2d=m(l._glcanvas.data()[1].regl)),x.scatter2d){var H=new Array(h);for(_=0;_<h;_++)H[_]=x.selectBatch[_].length||x.unselectBatch[_].length?x.markerUnselectedOptions[_]:{};x.scatter2d.update(H)}x.select2d&&(x.select2d.update(x.markerOptions),x.select2d.update(x.markerSelectedOptions)),x.glText&&y.forEach(function(j){var $=((j||[])[0]||{}).trace||{};n.hasText($)&&v(j)})}else x.scatter2d&&x.scatter2d.update(x.markerOptions);var q={viewport:o(l,u,M,d._context.plotGlPixelRatio),range:[(u._rl||u.range)[0],(M._rl||M.range)[0],(u._rl||u.range)[1],(M._rl||M.range)[1]]},re=e.repeat(q,x.count);x.fill2d&&x.fill2d.update(re),x.line2d&&x.line2d.update(re),x.error2d&&x.error2d.update(re.concat(re)),x.scatter2d&&x.scatter2d.update(re),x.select2d&&x.select2d.update(re),x.glText&&x.glText.forEach(function(j){j.update(q)})}}};b.reglPrecompiled=s},{"../../components/dragelement/helpers":385,"../../lib":515,"../../lib/prepare_regl":528,"../scatter/link_traces":952,"../scatter/subtypes":961,"./edit_style":994,"gl-text":225,"regl-error2d":280,"regl-line2d":281,"regl-scatter2d":282}],1e3:[function(t,B,V){var m=t("../../lib");B.exports=function(A,T){var e=T._scene,a={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},i={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return T._scene||(e=T._scene={},e.init=function(){m.extendFlat(e,i,a)},e.init(),e.update=function(r){var v=m.repeat(r,e.count);if(e.fill2d&&e.fill2d.update(v),e.scatter2d&&e.scatter2d.update(v),e.line2d&&e.line2d.update(v),e.error2d&&e.error2d.update(v.concat(v)),e.select2d&&e.select2d.update(v),e.glText)for(var s=0;s<e.count;s++)e.glText[s].update(r)},e.draw=function(){for(var r=e.count,v=e.fill2d,s=e.error2d,o=e.line2d,b=e.scatter2d,g=e.glText,d=e.select2d,f=e.selectBatch,y=e.unselectBatch,l=0;l<r;l++){if(v&&e.fillOrder[l]&&v.draw(e.fillOrder[l]),o&&e.lineOptions[l]&&o.draw(l),s&&(e.errorXOptions[l]&&s.draw(l),e.errorYOptions[l]&&s.draw(l+r)),b&&e.markerOptions[l])if(y[l].length){var x=m.repeat([],e.count);x[l]=y[l],b.draw(x)}else f[l].length||b.draw(l);g[l]&&e.textOptions[l]&&g[l].render()}d&&d.draw(f),e.dirty=!1},e.destroy=function(){e.fill2d&&e.fill2d.destroy&&e.fill2d.destroy(),e.scatter2d&&e.scatter2d.destroy&&e.scatter2d.destroy(),e.error2d&&e.error2d.destroy&&e.error2d.destroy(),e.line2d&&e.line2d.destroy&&e.line2d.destroy(),e.select2d&&e.select2d.destroy&&e.select2d.destroy(),e.glText&&e.glText.forEach(function(r){r.destroy&&r.destroy()}),e.lineOptions=null,e.fillOptions=null,e.markerOptions=null,e.markerSelectedOptions=null,e.markerUnselectedOptions=null,e.errorXOptions=null,e.errorYOptions=null,e.textOptions=null,e.textSelectedOptions=null,e.textUnselectedOptions=null,e.selectBatch=null,e.unselectBatch=null,T._scene=null}),e.dirty||m.extendFlat(e,a),e}},{"../../lib":515}],1001:[function(t,B,V){var m=t("../scatter/subtypes"),c=t("./edit_style").styleTextSelection;B.exports=function(T,e){var a=T.cd,i=T.xaxis,n=T.yaxis,r=[],v=a[0].trace,s=a[0].t,o=v._length,b=s.x,g=s.y,d=s._scene,f=s.index;if(!d)return r;var y=m.hasText(v),l=m.hasMarkers(v),x=!l&&!y;if(v.visible!==!0||x)return r;var u=[],M=[];if(e!==!1&&!e.degenerate)for(var _=0;_<o;_++)e.contains([s.xpx[_],s.ypx[_]],!1,_,T)?(u.push(_),r.push({pointNumber:_,x:i.c2d(b[_]),y:n.c2d(g[_])})):M.push(_);if(l){var p=d.scatter2d;if(!u.length&&!M.length){var w=new Array(d.count);w[f]=d.markerOptions[f],p.update.apply(p,w)}else if(!d.selectBatch[f].length&&!d.unselectBatch[f].length){var h=new Array(d.count);h[f]=d.markerUnselectedOptions[f],p.update.apply(p,h)}}return d.selectBatch[f]=u,d.unselectBatch[f]=M,y&&c(a),r}},{"../scatter/subtypes":961,"./edit_style":994}],1002:[function(t,B,V){var m=t("../../plots/template_attributes").hovertemplateAttrs,c=t("../../plots/template_attributes").texttemplateAttrs,A=t("../scattergeo/attributes"),T=t("../scatter/attributes"),e=t("../../plots/mapbox/layout_attributes"),a=t("../../plots/attributes"),i=t("../../components/colorscale/attributes"),n=t("../../lib/extend").extendFlat,r=t("../../plot_api/edit_types").overrideAll,v=t("../../plots/mapbox/layout_attributes"),s=A.line,o=A.marker;B.exports=r({lon:A.lon,lat:A.lat,cluster:{enabled:{valType:"boolean"},maxzoom:n({},v.layers.maxzoom,{}),step:{valType:"number",arrayOk:!0,dflt:-1,min:-1},size:{valType:"number",arrayOk:!0,dflt:20,min:0},color:{valType:"color",arrayOk:!0},opacity:n({},o.opacity,{dflt:1})},mode:n({},T.mode,{dflt:"markers"}),text:n({},T.text,{}),texttemplate:c({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:n({},T.hovertext,{}),line:{color:s.color,width:s.width},connectgaps:T.connectgaps,marker:n({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:o.opacity,size:o.size,sizeref:o.sizeref,sizemin:o.sizemin,sizemode:o.sizemode},i("marker")),fill:A.fill,fillcolor:T.fillcolor,textfont:e.layers.symbol.textfont,textposition:e.layers.symbol.textposition,below:{valType:"string"},selected:{marker:T.selected.marker},unselected:{marker:T.unselected.marker},hoverinfo:n({},a.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:m()},"calc","nested")},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/mapbox/layout_attributes":624,"../../plots/template_attributes":642,"../scatter/attributes":936,"../scattergeo/attributes":978}],1003:[function(t,B,V){var m=t("fast-isnumeric"),c=t("../../lib"),A=t("../../constants/numerical").BADNUM,T=t("../../lib/geojson_utils"),e=t("../../components/colorscale"),a=t("../../components/drawing"),i=t("../scatter/make_bubble_size_func"),n=t("../scatter/subtypes"),r=t("../../plots/mapbox/convert_text_opts"),v=t("../../components/fx/helpers").appendArrayPointValue,s=t("../../lib/svg_text_utils").NEWLINES,o=t("../../lib/svg_text_utils").BR_TAG_ALL;B.exports=function(M,_){var p=_[0].trace,w=p.visible===!0&&p._length!==0,h=p.fill!=="none",L=n.hasLines(p),S=n.hasMarkers(p),E=n.hasText(p),P=S&&p.marker.symbol==="circle",F=S&&p.marker.symbol!=="circle",I=p.cluster&&p.cluster.enabled,D=b("fill"),R=b("line"),N=b("circle"),z=b("symbol"),G={fill:D,line:R,circle:N,symbol:z};if(!w)return G;var Y;if((h||L)&&(Y=T.calcTraceToLineCoords(_)),h&&(D.geojson=T.makePolygon(Y),D.layout.visibility="visible",c.extendFlat(D.paint,{"fill-color":p.fillcolor})),L&&(R.geojson=T.makeLine(Y),R.layout.visibility="visible",c.extendFlat(R.paint,{"line-width":p.line.width,"line-color":p.line.color,"line-opacity":p.opacity})),P){var ee=g(_);N.geojson=ee.geojson,N.layout.visibility="visible",I&&(N.filter=["!",["has","point_count"]],G.cluster={type:"circle",filter:["has","point_count"],layout:{visibility:"visible"},paint:{"circle-color":x(p.cluster.color,p.cluster.step),"circle-radius":x(p.cluster.size,p.cluster.step),"circle-opacity":x(p.cluster.opacity,p.cluster.step)}},G.clusterCount={type:"symbol",filter:["has","point_count"],paint:{},layout:{"text-field":"{point_count_abbreviated}","text-font":["Open Sans Regular","Arial Unicode MS Regular"],"text-size":12}}),c.extendFlat(N.paint,{"circle-color":ee.mcc,"circle-radius":ee.mrc,"circle-opacity":ee.mo})}if(P&&I&&(N.filter=["!",["has","point_count"]]),(F||E)&&(z.geojson=d(_,M),c.extendFlat(z.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),F&&(c.extendFlat(z.layout,{"icon-size":p.marker.size/10}),"angle"in p.marker&&p.marker.angle!=="auto"&&c.extendFlat(z.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),z.layout["icon-allow-overlap"]=p.marker.allowoverlap,c.extendFlat(z.paint,{"icon-opacity":p.opacity*p.marker.opacity,"icon-color":p.marker.color})),E)){var Z=(p.marker||{}).size,X=r(p.textposition,Z);c.extendFlat(z.layout,{"text-size":p.textfont.size,"text-anchor":X.anchor,"text-offset":X.offset}),c.extendFlat(z.paint,{"text-color":p.textfont.color,"text-opacity":p.opacity})}return G};function b(u){return{type:u,geojson:T.makeBlank(),layout:{visibility:"none"},filter:null,paint:{}}}function g(u){var M=u[0].trace,_=M.marker,p=M.selectedpoints,w=c.isArrayOrTypedArray(_.color),h=c.isArrayOrTypedArray(_.size),L=c.isArrayOrTypedArray(_.opacity),S;function E(Z){return M.opacity*Z}function P(Z){return Z/2}var F;w&&(e.hasColorscale(M,"marker")?F=e.makeColorScaleFuncFromTrace(_):F=c.identity);var I;h&&(I=i(M));var D;L&&(D=function(Z){var X=m(Z)?+c.constrain(Z,0,1):0;return E(X)});var R=[];for(S=0;S<u.length;S++){var N=u[S],z=N.lonlat;if(!l(z)){var G={};F&&(G.mcc=N.mcc=F(N.mc)),I&&(G.mrc=N.mrc=I(N.ms)),D&&(G.mo=D(N.mo)),p&&(G.selected=N.selected||0),R.push({type:"Feature",id:S+1,geometry:{type:"Point",coordinates:z},properties:G})}}var Y;if(p)for(Y=a.makeSelectedPointStyleFns(M),S=0;S<R.length;S++){var ee=R[S].properties;Y.selectedOpacityFn&&(ee.mo=E(Y.selectedOpacityFn(ee))),Y.selectedColorFn&&(ee.mcc=Y.selectedColorFn(ee)),Y.selectedSizeFn&&(ee.mrc=Y.selectedSizeFn(ee))}return{geojson:{type:"FeatureCollection",features:R},mcc:w||Y&&Y.selectedColorFn?{type:"identity",property:"mcc"}:_.color,mrc:h||Y&&Y.selectedSizeFn?{type:"identity",property:"mrc"}:P(_.size),mo:L||Y&&Y.selectedOpacityFn?{type:"identity",property:"mo"}:E(_.opacity)}}function d(u,M){for(var _=M._fullLayout,p=u[0].trace,w=p.marker||{},h=w.symbol,L=w.angle,S=h!=="circle"?f(h):y,E=L!=="auto"?f(L,!0):y,P=n.hasText(p)?f(p.text):y,F=[],I=0;I<u.length;I++){var D=u[I];if(!l(D.lonlat)){var R=p.texttemplate,N;if(R){var z=Array.isArray(R)?R[I]||"":R,G=p._module.formatLabels(D,p,_),Y={};v(Y,p,D.i);var ee=p._meta||{};N=c.texttemplateString(z,G,_._d3locale,Y,D,ee)}else N=P(I);N&&(N=N.replace(s,"").replace(o,`
`)),F.push({type:"Feature",geometry:{type:"Point",coordinates:D.lonlat},properties:{symbol:S(I),angle:E(I),text:N}})}}return{type:"FeatureCollection",features:F}}function f(u,M){return c.isArrayOrTypedArray(u)?M?function(_){return m(u[_])?+u[_]:0}:function(_){return u[_]}:u?function(){return u}:y}function y(){return""}function l(u){return u[0]===A}function x(u,M){var _;if(c.isArrayOrTypedArray(u)&&c.isArrayOrTypedArray(M)){_=["step",["get","point_count"],u[0]];for(var p=1;p<u.length;p++)_.push(M[p-1],u[p])}else _=u;return _}},{"../../components/colorscale":379,"../../components/drawing":389,"../../components/fx/helpers":403,"../../constants/numerical":491,"../../lib":515,"../../lib/geojson_utils":509,"../../lib/svg_text_utils":541,"../../plots/mapbox/convert_text_opts":621,"../scatter/make_bubble_size_func":953,"../scatter/subtypes":961,"fast-isnumeric":190}],1004:[function(t,B,V){var m=t("../../lib"),c=t("../scatter/subtypes"),A=t("../scatter/marker_defaults"),T=t("../scatter/line_defaults"),e=t("../scatter/text_defaults"),a=t("../scatter/fillcolor_defaults"),i=t("./attributes");B.exports=function(v,s,o,b){function g(w,h){return m.coerce(v,s,i,w,h)}function d(w,h){return m.coerce2(v,s,i,w,h)}var f=n(v,s,g);if(!f){s.visible=!1;return}if(g("text"),g("texttemplate"),g("hovertext"),g("hovertemplate"),g("mode"),g("below"),c.hasLines(s)&&(T(v,s,o,b,g,{noDash:!0}),g("connectgaps")),c.hasMarkers(s)){A(v,s,o,b,g,{noLine:!0,noAngle:!0}),g("marker.allowoverlap"),g("marker.angle");var y=s.marker;y.symbol!=="circle"&&(m.isArrayOrTypedArray(y.size)&&(y.size=y.size[0]),m.isArrayOrTypedArray(y.color)&&(y.color=y.color[0]))}var l=d("cluster.maxzoom"),x=d("cluster.step"),u=d("cluster.color",s.marker&&s.marker.color||o),M=d("cluster.size"),_=d("cluster.opacity"),p=l!==!1||x!==!1||u!==!1||M!==!1||_!==!1;g("cluster.enabled",p),c.hasText(s)&&e(v,s,b,g,{noSelect:!0}),g("fill"),s.fill!=="none"&&a(v,s,o,g),m.coerceSelectionMarkerOpacity(s,g)};function n(r,v,s){var o=s("lon")||[],b=s("lat")||[],g=Math.min(o.length,b.length);return v._length=g,g}},{"../../lib":515,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":1002}],1005:[function(t,B,V){B.exports=function(c,A){return c.lon=A.lon,c.lat=A.lat,c}},{}],1006:[function(t,B,V){var m=t("../../plots/cartesian/axes");B.exports=function(A,T,e){var a={},i=e[T.subplot]._subplot,n=i.mockAxis,r=A.lonlat;return a.lonLabel=m.tickText(n,n.c2l(r[0]),!0).text,a.latLabel=m.tickText(n,n.c2l(r[1]),!0).text,a}},{"../../plots/cartesian/axes":566}],1007:[function(t,B,V){var m=t("../../components/fx"),c=t("../../lib"),A=t("../scatter/get_trace_color"),T=c.fillText,e=t("../../constants/numerical").BADNUM,a=t("../../plots/mapbox/constants").traceLayerPrefix;function i(r,v,s){var o=r.cd,b=o[0].trace,g=r.xa,d=r.ya,f=r.subplot,y=[],l=a+b.uid+"-circle",x=b.cluster&&b.cluster.enabled;if(x){var u=f.map.queryRenderedFeatures(null,{layers:[l]});y=u.map(function(R){return R.id})}var M=v>=0?Math.floor((v+180)/360):Math.ceil((v-180)/360),_=M*360,p=v-_;function w(R){var N=R.lonlat;if(N[0]===e||x&&y.indexOf(R.i+1)===-1)return 1/0;var z=c.modHalf(N[0],360),G=N[1],Y=f.project([z,G]),ee=Y.x-g.c2p([p,G]),Z=Y.y-d.c2p([z,s]),X=Math.max(3,R.mrc||0);return Math.max(Math.sqrt(ee*ee+Z*Z)-X,1-3/X)}if(m.getClosest(o,w,r),r.index!==!1){var h=o[r.index],L=h.lonlat,S=[c.modHalf(L[0],360)+_,L[1]],E=g.c2p(S),P=d.c2p(S),F=h.mrc||1;r.x0=E-F,r.x1=E+F,r.y0=P-F,r.y1=P+F;var I={};I[b.subplot]={_subplot:f};var D=b._module.formatLabels(h,b,I);return r.lonLabel=D.lonLabel,r.latLabel=D.latLabel,r.color=A(b,h),r.extraText=n(b,h,o[0].t.labels),r.hovertemplate=b.hovertemplate,[r]}}function n(r,v,s){if(r.hovertemplate)return;var o=v.hi||r.hoverinfo,b=o.split("+"),g=b.indexOf("all")!==-1,d=b.indexOf("lon")!==-1,f=b.indexOf("lat")!==-1,y=v.lonlat,l=[];function x(u){return u+"\xB0"}return g||d&&f?l.push("("+x(y[1])+", "+x(y[0])+")"):d?l.push(s.lon+x(y[0])):f&&l.push(s.lat+x(y[1])),(g||b.indexOf("text")!==-1)&&T(v,r,l),l.join("<br>")}B.exports={hoverPoints:i,getExtraText:n}},{"../../components/fx":407,"../../constants/numerical":491,"../../lib":515,"../../plots/mapbox/constants":620,"../scatter/get_trace_color":946}],1008:[function(t,B,V){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../scatter/marker_colorbar"),formatLabels:t("./format_labels"),calc:t("../scattergeo/calc"),plot:t("./plot"),hoverPoints:t("./hover").hoverPoints,eventData:t("./event_data"),selectPoints:t("./select"),styleOnSelect:function(m,c){if(c){var A=c[0].trace;A._glTrace.update(c)}},moduleType:"trace",name:"scattermapbox",basePlotModule:t("../../plots/mapbox"),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/mapbox":622,"../scatter/marker_colorbar":954,"../scattergeo/calc":979,"./attributes":1002,"./defaults":1004,"./event_data":1005,"./format_labels":1006,"./hover":1007,"./plot":1009,"./select":1010}],1009:[function(t,B,V){var m=t("../../lib"),c=t("./convert"),A=t("../../plots/mapbox/constants").traceLayerPrefix,T={cluster:["cluster","clusterCount","circle"],nonCluster:["fill","line","circle","symbol"]};function e(i,n,r,v){this.type="scattermapbox",this.subplot=i,this.uid=n,this.clusterEnabled=r,this.isHidden=v,this.sourceIds={fill:"source-"+n+"-fill",line:"source-"+n+"-line",circle:"source-"+n+"-circle",symbol:"source-"+n+"-symbol",cluster:"source-"+n+"-circle",clusterCount:"source-"+n+"-circle"},this.layerIds={fill:A+n+"-fill",line:A+n+"-line",circle:A+n+"-circle",symbol:A+n+"-symbol",cluster:A+n+"-cluster",clusterCount:A+n+"-cluster-count"},this.below=null}var a=e.prototype;a.addSource=function(i,n,r){var v={type:"geojson",data:n.geojson};r&&r.enabled&&m.extendFlat(v,{cluster:!0,clusterMaxZoom:r.maxzoom}),this.subplot.map.addSource(this.sourceIds[i],v)},a.setSourceData=function(i,n){this.subplot.map.getSource(this.sourceIds[i]).setData(n.geojson)},a.addLayer=function(i,n,r){var v={type:n.type,id:this.layerIds[i],source:this.sourceIds[i],layout:n.layout,paint:n.paint};n.filter&&(v.filter=n.filter),this.subplot.addLayer(v,r)},a.update=function(n){var r=n[0].trace,v=this.subplot,s=v.map,o=c(v.gd,n),b=v.belowLookup["trace-"+this.uid],g=!!(r.cluster&&r.cluster.enabled),d=!!this.clusterEnabled,f=this;function y(L){L||f.addSource("circle",o.circle,r.cluster);for(var S=T.cluster,E=0;E<S.length;E++){var P=S[E],F=o[P];f.addLayer(P,F,b)}}function l(L){for(var S=T.cluster,E=S.length-1;E>=0;E--){var P=S[E];s.removeLayer(f.layerIds[P])}L||s.removeSource(f.sourceIds.circle)}function x(L){for(var S=T.nonCluster,E=0;E<S.length;E++){var P=S[E],F=o[P];L||f.addSource(P,F),f.addLayer(P,F,b)}}function u(L){for(var S=T.nonCluster,E=S.length-1;E>=0;E--){var P=S[E];s.removeLayer(f.layerIds[P]),L||s.removeSource(f.sourceIds[P])}}function M(L){d?l(L):u(L)}function _(L){g?y(L):x(L)}function p(){for(var L=g?T.cluster:T.nonCluster,S=0;S<L.length;S++){var E=L[S],P=o[E];!P||(v.setOptions(f.layerIds[E],"setLayoutProperty",P.layout),P.layout.visibility==="visible"&&(E!=="cluster"&&f.setSourceData(E,P),v.setOptions(f.layerIds[E],"setPaintProperty",P.paint)))}}var w=this.isHidden,h=r.visible!==!0;h?w||M():w?h||_():d!==g?(M(),_()):(this.below!==b&&(M(!0),_(!0)),p()),this.clusterEnabled=g,this.isHidden=h,this.below=b,n[0].trace._glTrace=this},a.dispose=function(){for(var n=this.subplot.map,r=this.clusterEnabled?T.cluster:T.nonCluster,v=r.length-1;v>=0;v--){var s=r[v];n.removeLayer(this.layerIds[s]),n.removeSource(this.sourceIds[s])}},B.exports=function(n,r){var v=r[0].trace,s=v.cluster&&v.cluster.enabled,o=v.visible!==!0,b=new e(n,v.uid,s,o),g=c(n.gd,r),d=b.below=n.belowLookup["trace-"+v.uid],f,y,l;if(s)for(b.addSource("circle",g.circle,v.cluster),f=0;f<T.cluster.length;f++)y=T.cluster[f],l=g[y],b.addLayer(y,l,d);else for(f=0;f<T.nonCluster.length;f++)y=T.nonCluster[f],l=g[y],b.addSource(y,l,v.cluster),b.addLayer(y,l,d);return r[0].trace._glTrace=b,b}},{"../../lib":515,"../../plots/mapbox/constants":620,"./convert":1003}],1010:[function(t,B,V){var m=t("../../lib"),c=t("../scatter/subtypes"),A=t("../../constants/numerical").BADNUM;B.exports=function(e,a){var i=e.cd,n=e.xaxis,r=e.yaxis,v=[],s=i[0].trace,o;if(!c.hasMarkers(s))return[];if(a===!1)for(o=0;o<i.length;o++)i[o].selected=0;else for(o=0;o<i.length;o++){var b=i[o],g=b.lonlat;if(g[0]!==A){var d=[m.modHalf(g[0],360),g[1]],f=[n.c2p(d),r.c2p(d)];a.contains(f,null,o,e)?(v.push({pointNumber:o,lon:g[0],lat:g[1]}),b.selected=1):b.selected=0}}return v}},{"../../constants/numerical":491,"../../lib":515,"../scatter/subtypes":961}],1011:[function(t,B,V){var m=t("../../plots/template_attributes").hovertemplateAttrs,c=t("../../plots/template_attributes").texttemplateAttrs,A=t("../../lib/extend").extendFlat,T=t("../scatter/attributes"),e=t("../../plots/attributes"),a=T.line;B.exports={mode:T.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:T.text,texttemplate:c({editType:"plot"},{keys:["r","theta","text"]}),hovertext:T.hovertext,line:{color:a.color,width:a.width,dash:a.dash,backoff:a.backoff,shape:A({},a.shape,{values:["linear","spline"]}),smoothing:a.smoothing,editType:"calc"},connectgaps:T.connectgaps,marker:T.marker,cliponaxis:A({},T.cliponaxis,{dflt:!1}),textposition:T.textposition,textfont:T.textfont,fill:A({},T.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:T.fillcolor,hoverinfo:A({},e.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:T.hoveron,hovertemplate:m(),selected:T.selected,unselected:T.unselected}},{"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scatter/attributes":936}],1012:[function(t,B,V){var m=t("fast-isnumeric"),c=t("../../constants/numerical").BADNUM,A=t("../../plots/cartesian/axes"),T=t("../scatter/colorscale_calc"),e=t("../scatter/arrays_to_calcdata"),a=t("../scatter/calc_selection"),i=t("../scatter/calc").calcMarkerSize;B.exports=function(r,v){for(var s=r._fullLayout,o=v.subplot,b=s[o].radialaxis,g=s[o].angularaxis,d=b.makeCalcdata(v,"r"),f=g.makeCalcdata(v,"theta"),y=v._length,l=new Array(y),x=0;x<y;x++){var u=d[x],M=f[x],_=l[x]={};m(u)&&m(M)?(_.r=u,_.theta=M):_.r=c}var p=i(v,y);return v._extremes.x=A.findExtremes(b,d,{ppad:p}),T(r,v),e(l,v),a(l,v),l}},{"../../constants/numerical":491,"../../plots/cartesian/axes":566,"../scatter/arrays_to_calcdata":935,"../scatter/calc":937,"../scatter/calc_selection":938,"../scatter/colorscale_calc":939,"fast-isnumeric":190}],1013:[function(t,B,V){var m=t("../../lib"),c=t("../scatter/subtypes"),A=t("../scatter/marker_defaults"),T=t("../scatter/line_defaults"),e=t("../scatter/line_shape_defaults"),a=t("../scatter/text_defaults"),i=t("../scatter/fillcolor_defaults"),n=t("../scatter/constants").PTS_LINESONLY,r=t("./attributes");function v(o,b,g,d){function f(x,u){return m.coerce(o,b,r,x,u)}var y=s(o,b,d,f);if(!y){b.visible=!1;return}f("thetaunit"),f("mode",y<n?"lines+markers":"lines"),f("text"),f("hovertext"),b.hoveron!=="fills"&&f("hovertemplate"),c.hasLines(b)&&(T(o,b,g,d,f,{backoff:!0}),e(o,b,f),f("connectgaps")),c.hasMarkers(b)&&A(o,b,g,d,f,{gradient:!0}),c.hasText(b)&&(f("texttemplate"),a(o,b,d,f));var l=[];(c.hasMarkers(b)||c.hasText(b))&&(f("cliponaxis"),f("marker.maxdisplayed"),l.push("points")),f("fill"),b.fill!=="none"&&(i(o,b,g,f),c.hasLines(b)||e(o,b,f)),(b.fill==="tonext"||b.fill==="toself")&&l.push("fills"),f("hoveron",l.join("+")||"points"),m.coerceSelectionMarkerOpacity(b,f)}function s(o,b,g,d){var f=d("r"),y=d("theta"),l;if(f)y?l=Math.min(f.length,y.length):(l=f.length,d("theta0"),d("dtheta"));else{if(!y)return 0;l=b.theta.length,d("r0"),d("dr")}return b._length=l,l}B.exports={handleRThetaDefaults:s,supplyDefaults:v}},{"../../lib":515,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/line_shape_defaults":951,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":1011}],1014:[function(t,B,V){var m=t("../../lib"),c=t("../../plots/cartesian/axes");B.exports=function(T,e,a){var i={},n=a[e.subplot]._subplot,r,v;n?(r=n.radialAxis,v=n.angularAxis):(n=a[e.subplot],r=n.radialaxis,v=n.angularaxis);var s=r.c2l(T.r);i.rLabel=c.tickText(r,s,!0).text;var o=v.thetaunit==="degrees"?m.rad2deg(T.theta):T.theta;return i.thetaLabel=c.tickText(v,o,!0).text,i}},{"../../lib":515,"../../plots/cartesian/axes":566}],1015:[function(t,B,V){var m=t("../scatter/hover");function c(T,e,a,i){var n=m(T,e,a,i);if(!(!n||n[0].index===!1)){var r=n[0];if(r.index===void 0)return n;var v=T.subplot,s=r.cd[r.index],o=r.trace;if(!!v.isPtInside(s))return r.xLabelVal=void 0,r.yLabelVal=void 0,A(s,o,v,r),r.hovertemplate=o.hovertemplate,n}}function A(T,e,a,i){var n=a.radialAxis,r=a.angularAxis;n._hovertitle="r",r._hovertitle="\u03B8";var v={};v[e.subplot]={_subplot:a};var s=e._module.formatLabels(T,e,v);i.rLabel=s.rLabel,i.thetaLabel=s.thetaLabel;var o=T.hi||e.hoverinfo,b=[];function g(f,y){b.push(f._hovertitle+": "+y)}if(!e.hovertemplate){var d=o.split("+");d.indexOf("all")!==-1&&(d=["r","theta","text"]),d.indexOf("r")!==-1&&g(n,i.rLabel),d.indexOf("theta")!==-1&&g(r,i.thetaLabel),d.indexOf("text")!==-1&&i.text&&(b.push(i.text),delete i.text),i.extraText=b.join("<br>")}}B.exports={hoverPoints:c,makeHoverPointText:A}},{"../scatter/hover":947}],1016:[function(t,B,V){B.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:t("../../plots/polar"),categories:["polar","symbols","showLegend","scatter-like"],attributes:t("./attributes"),supplyDefaults:t("./defaults").supplyDefaults,colorbar:t("../scatter/marker_colorbar"),formatLabels:t("./format_labels"),calc:t("./calc"),plot:t("./plot"),style:t("../scatter/style").style,styleOnSelect:t("../scatter/style").styleOnSelect,hoverPoints:t("./hover").hoverPoints,selectPoints:t("../scatter/select"),meta:{}}},{"../../plots/polar":631,"../scatter/marker_colorbar":954,"../scatter/select":958,"../scatter/style":960,"./attributes":1011,"./calc":1012,"./defaults":1013,"./format_labels":1014,"./hover":1015,"./plot":1017}],1017:[function(t,B,V){var m=t("../scatter/plot"),c=t("../../constants/numerical").BADNUM;B.exports=function(T,e,a){for(var i=e.layers.frontplot.select("g.scatterlayer"),n=e.xaxis,r=e.yaxis,v={xaxis:n,yaxis:r,plot:e.framework,layerClipId:e._hasClipOnAxisFalse?e.clipIds.forTraces:null},s=e.radialAxis,o=e.angularAxis,b=0;b<a.length;b++)for(var g=a[b],d=0;d<g.length;d++){d===0&&(g[0].trace._xA=n,g[0].trace._yA=r);var f=g[d],y=f.r;if(y===c)f.x=f.y=c;else{var l=s.c2g(y),x=o.c2g(f.theta);f.x=l*Math.cos(x),f.y=l*Math.sin(x)}}m(T,v,a,i)}},{"../../constants/numerical":491,"../scatter/plot":957}],1018:[function(t,B,V){var m=t("../scatterpolar/attributes"),c=t("../scattergl/attributes"),A=t("../../plots/template_attributes").texttemplateAttrs;B.exports={mode:m.mode,r:m.r,theta:m.theta,r0:m.r0,dr:m.dr,theta0:m.theta0,dtheta:m.dtheta,thetaunit:m.thetaunit,text:m.text,texttemplate:A({editType:"plot"},{keys:["r","theta","text"]}),hovertext:m.hovertext,hovertemplate:m.hovertemplate,line:c.line,connectgaps:c.connectgaps,marker:c.marker,fill:c.fill,fillcolor:c.fillcolor,textposition:c.textposition,textfont:c.textfont,hoverinfo:m.hoverinfo,selected:m.selected,unselected:m.unselected}},{"../../plots/template_attributes":642,"../scattergl/attributes":988,"../scatterpolar/attributes":1011}],1019:[function(t,B,V){B.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:t("../../plots/polar"),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../scatter/marker_colorbar"),formatLabels:t("./format_labels"),calc:t("./calc"),hoverPoints:t("./hover").hoverPoints,selectPoints:t("../scattergl/select"),meta:{}}},{"../../plots/polar":631,"../scatter/marker_colorbar":954,"../scattergl/select":1001,"./attributes":1018,"./calc":1020,"./defaults":1021,"./format_labels":1022,"./hover":1023}],1020:[function(t,B,V){var m=t("../scatter/colorscale_calc"),c=t("../scatter/calc").calcMarkerSize,A=t("../scattergl/convert"),T=t("../../plots/cartesian/axes"),e=t("../scattergl/constants").TOO_MANY_POINTS;B.exports=function(i,n){var r=i._fullLayout,v=n.subplot,s=r[v].radialaxis,o=r[v].angularaxis,b=n._r=s.makeCalcdata(n,"r"),g=n._theta=o.makeCalcdata(n,"theta"),d=n._length,f={};d<b.length&&(b=b.slice(0,d)),d<g.length&&(g=g.slice(0,d)),f.r=b,f.theta=g,m(i,n);var y=f.opts=A.style(i,n),l;return d<e?l=c(n,d):y.marker&&(l=2*(y.marker.sizeAvg||Math.max(y.marker.size,3))),n._extremes.x=T.findExtremes(s,b,{ppad:l}),[{x:!1,y:!1,t:f,trace:n}]}},{"../../plots/cartesian/axes":566,"../scatter/calc":937,"../scatter/colorscale_calc":939,"../scattergl/constants":991,"../scattergl/convert":992}],1021:[function(t,B,V){var m=t("../../lib"),c=t("../scatter/subtypes"),A=t("../scatterpolar/defaults").handleRThetaDefaults,T=t("../scatter/marker_defaults"),e=t("../scatter/line_defaults"),a=t("../scatter/text_defaults"),i=t("../scatter/fillcolor_defaults"),n=t("../scatter/constants").PTS_LINESONLY,r=t("./attributes");B.exports=function(s,o,b,g){function d(y,l){return m.coerce(s,o,r,y,l)}var f=A(s,o,g,d);if(!f){o.visible=!1;return}d("thetaunit"),d("mode",f<n?"lines+markers":"lines"),d("text"),d("hovertext"),o.hoveron!=="fills"&&d("hovertemplate"),c.hasLines(o)&&(e(s,o,b,g,d),d("connectgaps")),c.hasMarkers(o)&&T(s,o,b,g,d,{noAngleRef:!0,noStandOff:!0}),c.hasText(o)&&(d("texttemplate"),a(s,o,g,d)),d("fill"),o.fill!=="none"&&i(s,o,b,d),m.coerceSelectionMarkerOpacity(o,d)}},{"../../lib":515,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"../scatterpolar/defaults":1013,"./attributes":1018}],1022:[function(t,B,V){var m=t("../scatterpolar/format_labels");B.exports=function(A,T,e){var a=A.i;return"r"in A||(A.r=T._r[a]),"theta"in A||(A.theta=T._theta[a]),m(A,T,e)}},{"../scatterpolar/format_labels":1014}],1023:[function(t,B,V){var m=t("../scattergl/hover"),c=t("../scatterpolar/hover").makeHoverPointText;function A(T,e,a,i){var n=T.cd,r=n[0].t,v=r.r,s=r.theta,o=m.hoverPoints(T,e,a,i);if(!(!o||o[0].index===!1)){var b=o[0];if(b.index===void 0)return o;var g=T.subplot,d=b.cd[b.index],f=b.trace;if(d.r=v[b.index],d.theta=s[b.index],!!g.isPtInside(d))return b.xLabelVal=void 0,b.yLabelVal=void 0,c(d,f,g,b),o}}B.exports={hoverPoints:A}},{"../scattergl/hover":997,"../scatterpolar/hover":1015}],1024:[function(t,B,V){arguments[4][905][0].apply(V,arguments)},{"./base_index":1019,"./plot":1025,dup:905}],1025:[function(t,B,V){var m=t("@plotly/point-cluster"),c=t("fast-isnumeric"),A=t("../scattergl/plot"),T=t("../scattergl/scene_update"),e=t("../scattergl/convert"),a=t("../../lib"),i=t("../scattergl/constants").TOO_MANY_POINTS,n={};B.exports=function(v,s,o){if(!!o.length){var b=s.radialAxis,g=s.angularAxis,d=T(v,s);return o.forEach(function(f){if(!(!f||!f[0]||!f[0].trace)){var y=f[0],l=y.trace,x=y.t,u=l._length,M=x.r,_=x.theta,p=x.opts,w,h=M.slice(),L=_.slice();for(w=0;w<M.length;w++)s.isPtInside({r:M[w],theta:_[w]})||(h[w]=NaN,L[w]=NaN);var S=new Array(u*2),E=Array(u),P=Array(u);for(w=0;w<u;w++){var F=h[w],I,D;if(c(F)){var R=b.c2g(F),N=g.c2g(L[w],l.thetaunit);I=R*Math.cos(N),D=R*Math.sin(N)}else I=D=NaN;E[w]=S[w*2]=I,P[w]=S[w*2+1]=D}x.tree=m(S),p.marker&&u>=i&&(p.marker.cluster=x.tree),p.marker&&(p.markerSel.positions=p.markerUnsel.positions=p.marker.positions=S),p.line&&S.length>1&&a.extendFlat(p.line,e.linePositions(v,l,S)),p.text&&(a.extendFlat(p.text,{positions:S},e.textPosition(v,l,p.text,p.marker)),a.extendFlat(p.textSel,{positions:S},e.textPosition(v,l,p.text,p.markerSel)),a.extendFlat(p.textUnsel,{positions:S},e.textPosition(v,l,p.text,p.markerUnsel))),p.fill&&!d.fill2d&&(d.fill2d=!0),p.marker&&!d.scatter2d&&(d.scatter2d=!0),p.line&&!d.line2d&&(d.line2d=!0),p.text&&!d.glText&&(d.glText=!0),d.lineOptions.push(p.line),d.fillOptions.push(p.fill),d.markerOptions.push(p.marker),d.markerSelectedOptions.push(p.markerSel),d.markerUnselectedOptions.push(p.markerUnsel),d.textOptions.push(p.text),d.textSelectedOptions.push(p.textSel),d.textUnselectedOptions.push(p.textUnsel),d.selectBatch.push([]),d.unselectBatch.push([]),x.x=E,x.y=P,x.rawx=E,x.rawy=P,x.r=M,x.theta=_,x.positions=S,x._scene=d,x.index=d.count,d.count++}}),A(v,s,o)}},B.exports.reglPrecompiled=n},{"../../lib":515,"../scattergl/constants":991,"../scattergl/convert":992,"../scattergl/plot":999,"../scattergl/scene_update":1e3,"@plotly/point-cluster":59,"fast-isnumeric":190}],1026:[function(t,B,V){var m=t("../../plots/template_attributes").hovertemplateAttrs,c=t("../../plots/template_attributes").texttemplateAttrs,A=t("../../lib/extend").extendFlat,T=t("../scatter/attributes"),e=t("../../plots/attributes"),a=T.line;B.exports={mode:T.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes"},imag:{valType:"data_array",editType:"calc+clearAxisTypes"},text:T.text,texttemplate:c({editType:"plot"},{keys:["real","imag","text"]}),hovertext:T.hovertext,line:{color:a.color,width:a.width,dash:a.dash,backoff:a.backoff,shape:A({},a.shape,{values:["linear","spline"]}),smoothing:a.smoothing,editType:"calc"},connectgaps:T.connectgaps,marker:T.marker,cliponaxis:A({},T.cliponaxis,{dflt:!1}),textposition:T.textposition,textfont:T.textfont,fill:A({},T.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:T.fillcolor,hoverinfo:A({},e.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:T.hoveron,hovertemplate:m(),selected:T.selected,unselected:T.unselected}},{"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scatter/attributes":936}],1027:[function(t,B,V){var m=t("fast-isnumeric"),c=t("../../constants/numerical").BADNUM,A=t("../scatter/colorscale_calc"),T=t("../scatter/arrays_to_calcdata"),e=t("../scatter/calc_selection"),a=t("../scatter/calc").calcMarkerSize;B.exports=function(n,r){for(var v=n._fullLayout,s=r.subplot,o=v[s].realaxis,b=v[s].imaginaryaxis,g=o.makeCalcdata(r,"real"),d=b.makeCalcdata(r,"imag"),f=r._length,y=new Array(f),l=0;l<f;l++){var x=g[l],u=d[l],M=y[l]={};m(x)&&m(u)?(M.real=x,M.imag=u):M.real=c}return a(r,f),A(n,r),T(y,r),e(y,r),y}},{"../../constants/numerical":491,"../scatter/arrays_to_calcdata":935,"../scatter/calc":937,"../scatter/calc_selection":938,"../scatter/colorscale_calc":939,"fast-isnumeric":190}],1028:[function(t,B,V){var m=t("../../lib"),c=t("../scatter/subtypes"),A=t("../scatter/marker_defaults"),T=t("../scatter/line_defaults"),e=t("../scatter/line_shape_defaults"),a=t("../scatter/text_defaults"),i=t("../scatter/fillcolor_defaults"),n=t("../scatter/constants").PTS_LINESONLY,r=t("./attributes");B.exports=function(o,b,g,d){function f(x,u){return m.coerce(o,b,r,x,u)}var y=v(o,b,d,f);if(!y){b.visible=!1;return}f("mode",y<n?"lines+markers":"lines"),f("text"),f("hovertext"),b.hoveron!=="fills"&&f("hovertemplate"),c.hasLines(b)&&(T(o,b,g,d,f,{backoff:!0}),e(o,b,f),f("connectgaps")),c.hasMarkers(b)&&A(o,b,g,d,f,{gradient:!0}),c.hasText(b)&&(f("texttemplate"),a(o,b,d,f));var l=[];(c.hasMarkers(b)||c.hasText(b))&&(f("cliponaxis"),f("marker.maxdisplayed"),l.push("points")),f("fill"),b.fill!=="none"&&(i(o,b,g,f),c.hasLines(b)||e(o,b,f)),(b.fill==="tonext"||b.fill==="toself")&&l.push("fills"),f("hoveron",l.join("+")||"points"),m.coerceSelectionMarkerOpacity(b,f)};function v(s,o,b,g){var d=g("real"),f=g("imag"),y;return d&&f&&(y=Math.min(d.length,f.length)),o._length=y,y}},{"../../lib":515,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/line_shape_defaults":951,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":1026}],1029:[function(t,B,V){var m=t("../../plots/cartesian/axes");B.exports=function(A,T,e){var a={},i=e[T.subplot]._subplot;return a.realLabel=m.tickText(i.radialAxis,A.real,!0).text,a.imagLabel=m.tickText(i.angularAxis,A.imag,!0).text,a}},{"../../plots/cartesian/axes":566}],1030:[function(t,B,V){var m=t("../scatter/hover");function c(T,e,a,i){var n=m(T,e,a,i);if(!(!n||n[0].index===!1)){var r=n[0];if(r.index===void 0)return n;var v=T.subplot,s=r.cd[r.index],o=r.trace;if(!!v.isPtInside(s))return r.xLabelVal=void 0,r.yLabelVal=void 0,A(s,o,v,r),r.hovertemplate=o.hovertemplate,n}}function A(T,e,a,i){var n=a.radialAxis,r=a.angularAxis;n._hovertitle="real",r._hovertitle="imag";var v={};v[e.subplot]={_subplot:a};var s=e._module.formatLabels(T,e,v);i.realLabel=s.realLabel,i.imagLabel=s.imagLabel;var o=T.hi||e.hoverinfo,b=[];function g(f,y){b.push(f._hovertitle+": "+y)}if(!e.hovertemplate){var d=o.split("+");d.indexOf("all")!==-1&&(d=["real","imag","text"]),d.indexOf("real")!==-1&&g(n,i.realLabel),d.indexOf("imag")!==-1&&g(r,i.imagLabel),d.indexOf("text")!==-1&&i.text&&(b.push(i.text),delete i.text),i.extraText=b.join("<br>")}}B.exports={hoverPoints:c,makeHoverPointText:A}},{"../scatter/hover":947}],1031:[function(t,B,V){B.exports={moduleType:"trace",name:"scattersmith",basePlotModule:t("../../plots/smith"),categories:["smith","symbols","showLegend","scatter-like"],attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../scatter/marker_colorbar"),formatLabels:t("./format_labels"),calc:t("./calc"),plot:t("./plot"),style:t("../scatter/style").style,styleOnSelect:t("../scatter/style").styleOnSelect,hoverPoints:t("./hover").hoverPoints,selectPoints:t("../scatter/select"),meta:{}}},{"../../plots/smith":638,"../scatter/marker_colorbar":954,"../scatter/select":958,"../scatter/style":960,"./attributes":1026,"./calc":1027,"./defaults":1028,"./format_labels":1029,"./hover":1030,"./plot":1032}],1032:[function(t,B,V){var m=t("../scatter/plot"),c=t("../../constants/numerical").BADNUM,A=t("../../plots/smith/helpers"),T=A.smith;B.exports=function(a,i,n){for(var r=i.layers.frontplot.select("g.scatterlayer"),v=i.xaxis,s=i.yaxis,o={xaxis:v,yaxis:s,plot:i.framework,layerClipId:i._hasClipOnAxisFalse?i.clipIds.forTraces:null},b=0;b<n.length;b++)for(var g=n[b],d=0;d<g.length;d++){d===0&&(g[0].trace._xA=v,g[0].trace._yA=s);var f=g[d],y=f.real;if(y===c)f.x=f.y=c;else{var l=T([y,f.imag]);f.x=l[0],f.y=l[1]}}m(a,o,n,r)}},{"../../constants/numerical":491,"../../plots/smith/helpers":637,"../scatter/plot":957}],1033:[function(t,B,V){var m=t("../../plots/template_attributes").hovertemplateAttrs,c=t("../../plots/template_attributes").texttemplateAttrs,A=t("../scatter/attributes"),T=t("../../plots/attributes"),e=t("../../components/colorscale/attributes"),a=t("../../components/drawing/attributes").dash,i=t("../../lib/extend").extendFlat,n=A.marker,r=A.line,v=n.line;B.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:i({},A.mode,{dflt:"markers"}),text:i({},A.text,{}),texttemplate:c({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:i({},A.hovertext,{}),line:{color:r.color,width:r.width,dash:a,backoff:r.backoff,shape:i({},r.shape,{values:["linear","spline"]}),smoothing:r.smoothing,editType:"calc"},connectgaps:A.connectgaps,cliponaxis:A.cliponaxis,fill:i({},A.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:A.fillcolor,marker:i({symbol:n.symbol,opacity:n.opacity,angle:n.angle,angleref:n.angleref,standoff:n.standoff,maxdisplayed:n.maxdisplayed,size:n.size,sizeref:n.sizeref,sizemin:n.sizemin,sizemode:n.sizemode,line:i({width:v.width,editType:"calc"},e("marker.line")),gradient:n.gradient,editType:"calc"},e("marker")),textfont:A.textfont,textposition:A.textposition,selected:A.selected,unselected:A.unselected,hoverinfo:i({},T.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:A.hoveron,hovertemplate:m()}},{"../../components/colorscale/attributes":374,"../../components/drawing/attributes":388,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scatter/attributes":936}],1034:[function(t,B,V){var m=t("fast-isnumeric"),c=t("../scatter/colorscale_calc"),A=t("../scatter/arrays_to_calcdata"),T=t("../scatter/calc_selection"),e=t("../scatter/calc").calcMarkerSize,a=["a","b","c"],i={a:["b","c"],b:["a","c"],c:["a","b"]};B.exports=function(r,v){var s=r._fullLayout[v.subplot],o=s.sum,b=v.sum||o,g={a:v.a,b:v.b,c:v.c},d,f,y,l,x,u;for(d=0;d<a.length;d++)if(y=a[d],!g[y]){for(x=g[i[y][0]],u=g[i[y][1]],l=new Array(x.length),f=0;f<x.length;f++)l[f]=b-x[f]-u[f];g[y]=l}var M=v._length,_=new Array(M),p,w,h,L,S,E;for(d=0;d<M;d++)p=g.a[d],w=g.b[d],h=g.c[d],m(p)&&m(w)&&m(h)?(p=+p,w=+w,h=+h,L=o/(p+w+h),L!==1&&(p*=L,w*=L,h*=L),E=p,S=h-w,_[d]={x:S,y:E,a:p,b:w,c:h}):_[d]={x:!1,y:!1};return e(v,M),c(r,v),A(_,v),T(_,v),_}},{"../scatter/arrays_to_calcdata":935,"../scatter/calc":937,"../scatter/calc_selection":938,"../scatter/colorscale_calc":939,"fast-isnumeric":190}],1035:[function(t,B,V){var m=t("../../lib"),c=t("../scatter/constants"),A=t("../scatter/subtypes"),T=t("../scatter/marker_defaults"),e=t("../scatter/line_defaults"),a=t("../scatter/line_shape_defaults"),i=t("../scatter/text_defaults"),n=t("../scatter/fillcolor_defaults"),r=t("./attributes");B.exports=function(s,o,b,g){function d(_,p){return m.coerce(s,o,r,_,p)}var f=d("a"),y=d("b"),l=d("c"),x;if(f?(x=f.length,y?(x=Math.min(x,y.length),l&&(x=Math.min(x,l.length))):l?x=Math.min(x,l.length):x=0):y&&l&&(x=Math.min(y.length,l.length)),!x){o.visible=!1;return}o._length=x,d("sum"),d("text"),d("hovertext"),o.hoveron!=="fills"&&d("hovertemplate");var u=x<c.PTS_LINESONLY?"lines+markers":"lines";d("mode",u),A.hasLines(o)&&(e(s,o,b,g,d,{backoff:!0}),a(s,o,d),d("connectgaps")),A.hasMarkers(o)&&T(s,o,b,g,d,{gradient:!0}),A.hasText(o)&&(d("texttemplate"),i(s,o,g,d));var M=[];(A.hasMarkers(o)||A.hasText(o))&&(d("cliponaxis"),d("marker.maxdisplayed"),M.push("points")),d("fill"),o.fill!=="none"&&(n(s,o,b,d),A.hasLines(o)||a(s,o,d)),(o.fill==="tonext"||o.fill==="toself")&&M.push("fills"),d("hoveron",M.join("+")||"points"),m.coerceSelectionMarkerOpacity(o,d)}},{"../../lib":515,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/line_shape_defaults":951,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":1033}],1036:[function(t,B,V){B.exports=function(c,A,T,e,a){if(A.xa&&(c.xaxis=A.xa),A.ya&&(c.yaxis=A.ya),e[a]){var i=e[a];c.a=i.a,c.b=i.b,c.c=i.c}else c.a=A.a,c.b=A.b,c.c=A.c;return c}},{}],1037:[function(t,B,V){var m=t("../../plots/cartesian/axes");B.exports=function(A,T,e){var a={},i=e[T.subplot]._subplot;return a.aLabel=m.tickText(i.aaxis,A.a,!0).text,a.bLabel=m.tickText(i.baxis,A.b,!0).text,a.cLabel=m.tickText(i.caxis,A.c,!0).text,a}},{"../../plots/cartesian/axes":566}],1038:[function(t,B,V){var m=t("../scatter/hover");B.exports=function(A,T,e,a){var i=m(A,T,e,a);if(!i||i[0].index===!1)return;var n=i[0];if(n.index===void 0){var r=1-n.y0/A.ya._length,v=A.xa._length,s=v*r/2,o=v-s;return n.x0=Math.max(Math.min(n.x0,o),s),n.x1=Math.max(Math.min(n.x1,o),s),i}var b=n.cd[n.index],g=n.trace,d=n.subplot;n.a=b.a,n.b=b.b,n.c=b.c,n.xLabelVal=void 0,n.yLabelVal=void 0;var f={};f[g.subplot]={_subplot:d};var y=g._module.formatLabels(b,g,f);n.aLabel=y.aLabel,n.bLabel=y.bLabel,n.cLabel=y.cLabel;var l=b.hi||g.hoverinfo,x=[];function u(_,p){x.push(_._hovertitle+": "+p)}if(!g.hovertemplate){var M=l.split("+");M.indexOf("all")!==-1&&(M=["a","b","c"]),M.indexOf("a")!==-1&&u(d.aaxis,n.aLabel),M.indexOf("b")!==-1&&u(d.baxis,n.bLabel),M.indexOf("c")!==-1&&u(d.caxis,n.cLabel)}return n.extraText=x.join("<br>"),n.hovertemplate=g.hovertemplate,i}},{"../scatter/hover":947}],1039:[function(t,B,V){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../scatter/marker_colorbar"),formatLabels:t("./format_labels"),calc:t("./calc"),plot:t("./plot"),style:t("../scatter/style").style,styleOnSelect:t("../scatter/style").styleOnSelect,hoverPoints:t("./hover"),selectPoints:t("../scatter/select"),eventData:t("./event_data"),moduleType:"trace",name:"scatterternary",basePlotModule:t("../../plots/ternary"),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/ternary":643,"../scatter/marker_colorbar":954,"../scatter/select":958,"../scatter/style":960,"./attributes":1033,"./calc":1034,"./defaults":1035,"./event_data":1036,"./format_labels":1037,"./hover":1038,"./plot":1040}],1040:[function(t,B,V){var m=t("../scatter/plot");B.exports=function(A,T,e){var a=T.plotContainer;a.select(".scatterlayer").selectAll("*").remove();for(var i=T.xaxis,n=T.yaxis,r={xaxis:i,yaxis:n,plot:a,layerClipId:T._hasClipOnAxisFalse?T.clipIdRelative:null},v=T.layers.frontplot.select("g.scatterlayer"),s=0;s<e.length;s++){var o=e[s];o.length&&(o[0].trace._xA=i,o[0].trace._yA=n)}m(A,r,e,v)}},{"../scatter/plot":957}],1041:[function(t,B,V){var m=t("../scatter/attributes"),c=t("../../components/colorscale/attributes"),A=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,T=t("../../plots/template_attributes").hovertemplateAttrs,e=t("../scattergl/attributes"),a=t("../../plots/cartesian/constants").idRegex,i=t("../../plot_api/plot_template").templatedArray,n=t("../../lib/extend").extendFlat,r=m.marker,v=r.line,s=n(c("marker.line",{editTypeOverride:"calc"}),{width:n({},v.width,{editType:"calc"}),editType:"calc"}),o=n(c("marker"),{symbol:r.symbol,angle:r.angle,size:n({},r.size,{editType:"markerSize"}),sizeref:r.sizeref,sizemin:r.sizemin,sizemode:r.sizemode,opacity:r.opacity,colorbar:r.colorbar,line:s,editType:"calc"});o.color.editType=o.cmin.editType=o.cmax.editType="style";function b(g){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:a[g],editType:"plot"}}}B.exports={dimensions:i("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:n({},e.text,{}),hovertext:n({},e.hovertext,{}),hovertemplate:T(),xhoverformat:A("x"),yhoverformat:A("y"),marker:o,xaxes:b("x"),yaxes:b("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:e.selected.marker,editType:"calc"},unselected:{marker:e.unselected.marker,editType:"calc"},opacity:e.opacity}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/plot_template":555,"../../plots/cartesian/axis_format_attributes":569,"../../plots/cartesian/constants":573,"../../plots/template_attributes":642,"../scatter/attributes":936,"../scattergl/attributes":988}],1042:[function(t,B,V){var m=t("../../registry"),c=t("../../components/grid");B.exports={moduleType:"trace",name:"splom",categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../scatter/marker_colorbar"),calc:t("./calc"),plot:t("./plot"),hoverPoints:t("./hover").hoverPoints,selectPoints:t("./select"),editStyle:t("./edit_style"),meta:{}},m.register(c)},{"../../components/grid":411,"../../registry":647,"../scatter/marker_colorbar":954,"./attributes":1041,"./calc":1044,"./defaults":1045,"./edit_style":1046,"./hover":1048,"./plot":1050,"./select":1052}],1043:[function(t,B,V){var m=t("regl-line2d"),c=t("../../registry"),A=t("../../lib/prepare_regl"),T=t("../../plots/get_data").getModuleCalcData,e=t("../../plots/cartesian"),a=t("../../plots/cartesian/axis_ids").getFromId,i=t("../../plots/cartesian/axes").shouldShowZeroLine,n="splom",r={};function v(f){var y=f._fullLayout,l=c.getModule(n),x=T(f.calcdata,l)[0],u=A(f,["ANGLE_instanced_arrays","OES_element_index_uint"],r);!u||(y._hasOnlyLargeSploms&&b(f),l.plot(f,{},x))}function s(f){var y=f.calcdata,l=f._fullLayout;l._hasOnlyLargeSploms&&b(f);for(var x=0;x<y.length;x++){var u=y[x][0],M=u.trace,_=l._splomScenes[M.uid];M.type==="splom"&&_&&_.matrix&&o(f,M,_)}}function o(f,y,l){for(var x=l.matrixOptions.data.length,u=y._visibleDims,M=l.viewOpts.ranges=new Array(x),_=0;_<u.length;_++){var p=u[_],w=M[_]=new Array(4),h=a(f,y._diag[p][0]);h&&(w[0]=h.r2l(h.range[0]),w[2]=h.r2l(h.range[1]));var L=a(f,y._diag[p][1]);L&&(w[1]=L.r2l(L.range[0]),w[3]=L.r2l(L.range[1]))}l.selectBatch.length||l.unselectBatch.length?l.matrix.update({ranges:M},{ranges:M}):l.matrix.update({ranges:M})}function b(f){var y=f._fullLayout,l=y._glcanvas.data()[0].regl,x=y._splomGrid;x||(x=y._splomGrid=m(l)),x.update(g(f))}function g(f){var y=f._context.plotGlPixelRatio,l=f._fullLayout,x=l._size,u=[0,0,l.width*y,l.height*y],M={},_;function p(ee,Z,X,ne,ce,Q){X*=y,ne*=y,ce*=y,Q*=y;var K=Z[ee+"color"],U=Z[ee+"width"],H=String(K+U);H in M?M[H].data.push(NaN,NaN,X,ne,ce,Q):M[H]={data:[X,ne,ce,Q],join:"rect",thickness:U*y,color:K,viewport:u,range:u,overlay:!1}}for(_ in l._splomSubplots){var w=l._plots[_],h=w.xaxis,L=w.yaxis,S=h._gridVals,E=L._gridVals,P=h._offset,F=h._length,I=L._length,D=x.b+L.domain[0]*x.h,R=-L._m,N=-R*L.r2l(L.range[0],L.calendar),z,G;if(h.showgrid)for(_=0;_<S.length;_++)z=P+h.l2p(S[_].x),p("grid",h,z,D,z,D+I);if(L.showgrid)for(_=0;_<E.length;_++)G=D+N+R*E[_].x,p("grid",L,P,G,P+F,G);i(f,h,L)&&(z=P+h.l2p(0),p("zeroline",h,z,D,z,D+I)),i(f,L,h)&&(G=D+N+0,p("zeroline",L,P,G,P+F,G))}var Y=[];for(_ in M)Y.push(M[_]);return Y}function d(f,y,l,x){var u={},M;if(x._splomScenes){for(M=0;M<f.length;M++){var _=f[M];_.type==="splom"&&(u[_.uid]=1)}for(M=0;M<l.length;M++){var p=l[M];if(!u[p.uid]){var w=x._splomScenes[p.uid];w&&w.destroy&&w.destroy(),x._splomScenes[p.uid]=null,delete x._splomScenes[p.uid]}}}Object.keys(x._splomScenes||{}).length===0&&delete x._splomScenes,x._splomGrid&&!y._hasOnlyLargeSploms&&x._hasOnlyLargeSploms&&(x._splomGrid.destroy(),x._splomGrid=null,delete x._splomGrid),e.clean(f,y,l,x)}B.exports={name:n,attr:e.attr,attrRegex:e.attrRegex,layoutAttributes:e.layoutAttributes,supplyLayoutDefaults:e.supplyLayoutDefaults,drawFramework:e.drawFramework,plot:v,drag:s,updateGrid:b,clean:d,updateFx:e.updateFx,toSVG:e.toSVG,reglPrecompiled:r}},{"../../lib/prepare_regl":528,"../../plots/cartesian":578,"../../plots/cartesian/axes":566,"../../plots/cartesian/axis_ids":570,"../../plots/get_data":602,"../../registry":647,"regl-line2d":281}],1044:[function(t,B,V){var m=t("../../lib"),c=t("../../plots/cartesian/axis_ids"),A=t("../scatter/calc").calcMarkerSize,T=t("../scatter/calc").calcAxisExpansion,e=t("../scatter/colorscale_calc"),a=t("../scattergl/convert").markerSelection,i=t("../scattergl/convert").markerStyle,n=t("./scene_update"),r=t("../../constants/numerical").BADNUM,v=t("../scattergl/constants").TOO_MANY_POINTS;B.exports=function(o,b){var g=b.dimensions,d=b._length,f={},y=f.cdata=[],l=f.data=[],x=b._visibleDims=[],u,M,_,p,w;function h(F,I){for(var D=F.makeCalcdata({v:I.values,vcalendar:b.calendar},"v"),R=0;R<D.length;R++)D[R]=D[R]===r?NaN:D[R];y.push(D),l.push(F.type==="log"?m.simpleMap(D,F.c2l):D)}for(u=0;u<g.length;u++)if(_=g[u],_.visible){if(p=c.getFromId(o,b._diag[u][0]),w=c.getFromId(o,b._diag[u][1]),p&&w&&p.type!==w.type){m.log("Skipping splom dimension "+u+" with conflicting axis types");continue}p?(h(p,_),w&&w.type==="category"&&(w._categories=p._categories.slice())):h(w,_),x.push(u)}e(o,b),m.extendFlat(f,i(o,b));var L=y.length,S=L*d>v,E;for(S?E=f.sizeAvg||Math.max(f.size,3):E=A(b,d),M=0;M<x.length;M++)u=x[M],_=g[u],p=c.getFromId(o,b._diag[u][0])||{},w=c.getFromId(o,b._diag[u][1])||{},T(o,b,p,w,y[M],y[M],E);var P=n(o,b);return P.matrix||(P.matrix=!0),P.matrixOptions=f,P.selectedOptions=a(o,b,b.selected),P.unselectedOptions=a(o,b,b.unselected),[{x:!1,y:!1,t:{},trace:b}]}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/axis_ids":570,"../scatter/calc":937,"../scatter/colorscale_calc":939,"../scattergl/constants":991,"../scattergl/convert":992,"./scene_update":1051}],1045:[function(t,B,V){var m=t("../../lib"),c=t("../../plots/array_container_defaults"),A=t("./attributes"),T=t("../scatter/subtypes"),e=t("../scatter/marker_defaults"),a=t("../parcoords/merge_length"),i=t("../scattergl/helpers").isOpenSymbol;B.exports=function(s,o,b,g){function d(p,w){return m.coerce(s,o,A,p,w)}var f=c(s,o,{name:"dimensions",handleItemDefaults:n}),y=d("diagonal.visible"),l=d("showupperhalf"),x=d("showlowerhalf"),u=a(o,f,"values");if(!u||!y&&!l&&!x){o.visible=!1;return}d("text"),d("hovertext"),d("hovertemplate"),d("xhoverformat"),d("yhoverformat"),e(s,o,b,g,d,{noAngleRef:!0,noStandOff:!0});var M=i(o.marker.symbol),_=T.isBubble(o);d("marker.line.width",M||_?1:0),r(s,o,g,d),m.coerceSelectionMarkerOpacity(o,d)};function n(v,s){function o(g,d){return m.coerce(v,s,A.dimensions,g,d)}o("label");var b=o("values");b&&b.length?o("visible"):s.visible=!1,o("axis.type"),o("axis.matches")}function r(v,s,o,b){var g=s.dimensions,d=g.length,f=s.showupperhalf,y=s.showlowerhalf,l=s.diagonal.visible,x,u,M=new Array(d),_=new Array(d);for(x=0;x<d;x++){var p=x?x+1:"";M[x]="x"+p,_[x]="y"+p}var w=b("xaxes",M),h=b("yaxes",_),L=s._diag=new Array(d);s._xaxes={},s._yaxes={};var S=[],E=[];function P(ee,Z,X,ne){if(!!ee){var ce=ee.charAt(0),Q=o._splomAxes[ce];if(s["_"+ce+"axes"][ee]=1,ne.push(ee),!(ee in Q)){var K=Q[ee]={};X&&(K.label=X.label||"",X.visible&&X.axis&&(X.axis.type&&(K.type=X.axis.type),X.axis.matches&&(K.matches=Z)))}}}var F=!l&&!y,I=!l&&!f;for(s._axesDim={},x=0;x<d;x++){var D=g[x],R=x===0,N=x===d-1,z=R&&F||N&&I?void 0:w[x],G=R&&I||N&&F?void 0:h[x];P(z,G,D,S),P(G,z,D,E),L[x]=[z,G],s._axesDim[z]=x,s._axesDim[G]=x}for(x=0;x<S.length;x++)for(u=0;u<E.length;u++){var Y=S[x]+E[u];(x>u&&f||x<u&&y||x===u&&(l||!y||!f))&&(o._splomSubplots[Y]=1)}(!y||!l&&f&&y)&&(o._splomGridDflt.xside="bottom",o._splomGridDflt.yside="left")}},{"../../lib":515,"../../plots/array_container_defaults":561,"../parcoords/merge_length":907,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scattergl/helpers":996,"./attributes":1041}],1046:[function(t,B,V){var m=t("../../lib"),c=t("../scatter/colorscale_calc"),A=t("../scattergl/convert").markerStyle;B.exports=function(e,a){var i=a.trace,n=e._fullLayout._splomScenes[i.uid];if(n){c(e,i),m.extendFlat(n.matrixOptions,A(e,i));var r=m.extendFlat({},n.matrixOptions,n.viewOpts);n.matrix.update(r,null)}}},{"../../lib":515,"../scatter/colorscale_calc":939,"../scattergl/convert":992}],1047:[function(t,B,V){V.getDimIndex=function(c,A){for(var T=A._id,e=T.charAt(0),a={x:0,y:1}[e],i=c._visibleDims,n=0;n<i.length;n++){var r=i[n];if(c._diag[r][a]===T)return n}return!1}},{}],1048:[function(t,B,V){var m=t("./helpers"),c=t("../scattergl/hover").calcHover;function A(T,e,a){var i=T.cd,n=i[0].trace,r=T.scene,v=r.matrixOptions.cdata,s=T.xa,o=T.ya,b=s.c2p(e),g=o.c2p(a),d=T.distance,f=m.getDimIndex(n,s),y=m.getDimIndex(n,o);if(f===!1||y===!1)return[T];for(var l=v[f],x=v[y],u,M,_=d,p=0;p<l.length;p++){var w=l[p],h=x[p],L=s.c2p(w)-b,S=o.c2p(h)-g,E=Math.sqrt(L*L+S*S);E<_&&(_=M=E,u=p)}return T.index=u,T.distance=_,T.dxy=M,u===void 0?[T]:[c(T,l,x,n)]}B.exports={hoverPoints:A}},{"../scattergl/hover":997,"./helpers":1047}],1049:[function(t,B,V){var m=t("./base_index");m.basePlotModule=t("./base_plot"),B.exports=m},{"./base_index":1042,"./base_plot":1043}],1050:[function(t,B,V){var m=t("regl-splom"),c=t("../../lib"),A=t("../../plots/cartesian/axis_ids"),T=t("../../components/dragelement/helpers").selectMode;B.exports=function(i,n,r){if(!!r.length)for(var v=0;v<r.length;v++)e(i,r[v][0])};function e(a,i){var n=a._fullLayout,r=n._size,v=i.trace,s=i.t,o=n._splomScenes[v.uid],b=o.matrixOptions,g=b.cdata,d=n._glcanvas.data()[0].regl,f=n.dragmode,y,l,x,u,M;if(g.length!==0){b.lower=v.showupperhalf,b.upper=v.showlowerhalf,b.diagonal=v.diagonal.visible;var _=v._visibleDims,p=g.length,w=o.viewOpts={};for(w.ranges=new Array(p),w.domains=new Array(p),M=0;M<_.length;M++){x=_[M];var h=w.ranges[M]=new Array(4),L=w.domains[M]=new Array(4);y=A.getFromId(a,v._diag[x][0]),y&&(h[0]=y._rl[0],h[2]=y._rl[1],L[0]=y.domain[0],L[2]=y.domain[1]),l=A.getFromId(a,v._diag[x][1]),l&&(h[1]=l._rl[0],h[3]=l._rl[1],L[1]=l.domain[0],L[3]=l.domain[1])}var S=a._context.plotGlPixelRatio,E=r.l*S,P=r.b*S,F=r.w*S,I=r.h*S;w.viewport=[E,P,F+E,I+P],o.matrix===!0&&(o.matrix=m(d));var D=n.clickmode.indexOf("select")>-1,R=T(f)||!!v.selectedpoints||D,N=!0;if(R){var z=v._length;if(v.selectedpoints){o.selectBatch=v.selectedpoints;var G=v.selectedpoints,Y={};for(x=0;x<G.length;x++)Y[G[x]]=!0;var ee=[];for(x=0;x<z;x++)Y[x]||ee.push(x);o.unselectBatch=ee}var Z=s.xpx=new Array(p),X=s.ypx=new Array(p);for(M=0;M<_.length;M++){if(x=_[M],y=A.getFromId(a,v._diag[x][0]),y)for(Z[M]=new Array(z),u=0;u<z;u++)Z[M][u]=y.c2p(g[M][u]);if(l=A.getFromId(a,v._diag[x][1]),l)for(X[M]=new Array(z),u=0;u<z;u++)X[M][u]=l.c2p(g[M][u])}if(o.selectBatch.length||o.unselectBatch.length){var ne=c.extendFlat({},b,o.unselectedOptions,w),ce=c.extendFlat({},b,o.selectedOptions,w);o.matrix.update(ne,ce),N=!1}}else s.xpx=s.ypx=null;if(N){var Q=c.extendFlat({},b,w);o.matrix.update(Q,null)}}}},{"../../components/dragelement/helpers":385,"../../lib":515,"../../plots/cartesian/axis_ids":570,"regl-splom":283}],1051:[function(t,B,V){var m=t("../../lib");B.exports=function(A,T){var e=A._fullLayout,a=T.uid,i=e._splomScenes;i||(i=e._splomScenes={});var n={dirty:!0,selectBatch:[],unselectBatch:[]},r={matrix:!1,selectBatch:[],unselectBatch:[]},v=i[T.uid];return v||(v=i[a]=m.extendFlat({},n,r),v.draw=function(){v.matrix&&v.matrix.draw&&(v.selectBatch.length||v.unselectBatch.length?v.matrix.draw(v.unselectBatch,v.selectBatch):v.matrix.draw()),v.dirty=!1},v.destroy=function(){v.matrix&&v.matrix.destroy&&v.matrix.destroy(),v.matrixOptions=null,v.selectBatch=null,v.unselectBatch=null,v=null}),v.dirty||m.extendFlat(v,n),v}},{"../../lib":515}],1052:[function(t,B,V){var m=t("../../lib"),c=m.pushUnique,A=t("../scatter/subtypes"),T=t("./helpers");B.exports=function(a,i){var n=a.cd,r=n[0].trace,v=n[0].t,s=a.scene,o=s.matrixOptions.cdata,b=a.xaxis,g=a.yaxis,d=[];if(!s)return d;var f=!A.hasMarkers(r)&&!A.hasText(r);if(r.visible!==!0||f)return d;var y=T.getDimIndex(r,b),l=T.getDimIndex(r,g);if(y===!1||l===!1)return d;var x=v.xpx[y],u=v.ypx[l],M=o[y],_=o[l],p=(a.scene.selectBatch||[]).slice(),w=[];if(i!==!1&&!i.degenerate)for(var h=0;h<M.length;h++)i.contains([x[h],u[h]],null,h,a)?(d.push({pointNumber:h,x:M[h],y:_[h]}),c(p,h)):p.indexOf(h)!==-1?c(p,h):w.push(h);var L=s.matrixOptions;return!p.length&&!w.length?s.matrix.update(L,null):!s.selectBatch.length&&!s.unselectBatch.length&&s.matrix.update(s.unselectedOptions,m.extendFlat({},L,s.selectedOptions,s.viewOpts)),s.selectBatch=p,s.unselectBatch=w,d}},{"../../lib":515,"../scatter/subtypes":961,"./helpers":1047}],1053:[function(t,B,V){var m=t("../../components/colorscale/attributes"),c=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,A=t("../../plots/template_attributes").hovertemplateAttrs,T=t("../mesh3d/attributes"),e=t("../../plots/attributes"),a=t("../../lib/extend").extendFlat,i={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:A({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:c("u",1),vhoverformat:c("v",1),whoverformat:c("w",1),xhoverformat:c("x"),yhoverformat:c("y"),zhoverformat:c("z"),showlegend:a({},e.showlegend,{dflt:!1})};a(i,m("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));var n=["opacity","lightposition","lighting"];n.forEach(function(r){i[r]=T[r]}),i.hoverinfo=a({},e.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),i.transforms=void 0,B.exports=i},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../mesh3d/attributes":876}],1054:[function(t,B,V){var m=t("../../lib"),c=t("../../components/colorscale/calc");function A(i,n){n._len=Math.min(n.u.length,n.v.length,n.w.length,n.x.length,n.y.length,n.z.length),n._u=a(n.u,n._len),n._v=a(n.v,n._len),n._w=a(n.w,n._len),n._x=a(n.x,n._len),n._y=a(n.y,n._len),n._z=a(n.z,n._len);var r=T(n);n._gridFill=r.fill,n._Xs=r.Xs,n._Ys=r.Ys,n._Zs=r.Zs,n._len=r.len;var v=0,s,o,b;n.starts&&(s=a(n.starts.x||[]),o=a(n.starts.y||[]),b=a(n.starts.z||[]),v=Math.min(s.length,o.length,b.length)),n._startsX=s||[],n._startsY=o||[],n._startsZ=b||[];var g=0,d=1/0,f;for(f=0;f<n._len;f++){var y=n._u[f],l=n._v[f],x=n._w[f],u=Math.sqrt(y*y+l*l+x*x);g=Math.max(g,u),d=Math.min(d,u)}for(c(i,n,{vals:[d,g],containerStr:"",cLetter:"c"}),f=0;f<v;f++){var M=s[f];r.xMax=Math.max(r.xMax,M),r.xMin=Math.min(r.xMin,M);var _=o[f];r.yMax=Math.max(r.yMax,_),r.yMin=Math.min(r.yMin,_);var p=b[f];r.zMax=Math.max(r.zMax,p),r.zMin=Math.min(r.zMin,p)}n._slen=v,n._normMax=g,n._xbnds=[r.xMin,r.xMax],n._ybnds=[r.yMin,r.yMax],n._zbnds=[r.zMin,r.zMax]}function T(i){var n=i._x,r=i._y,v=i._z,s=i._len,o,b,g,d=-1/0,f=1/0,y=-1/0,l=1/0,x=-1/0,u=1/0,M="",_,p,w,h,L,S,E,P,F;for(s&&(h=n[0],S=r[0],P=v[0]),s>1&&(L=n[s-1],E=r[s-1],F=v[s-1]),o=0;o<s;o++)d=Math.max(d,n[o]),f=Math.min(f,n[o]),y=Math.max(y,r[o]),l=Math.min(l,r[o]),x=Math.max(x,v[o]),u=Math.min(u,v[o]),!_&&n[o]!==h&&(_=!0,M+="x"),!p&&r[o]!==S&&(p=!0,M+="y"),!w&&v[o]!==P&&(w=!0,M+="z");_||(M+="x"),p||(M+="y"),w||(M+="z");var I=e(i._x),D=e(i._y),R=e(i._z);M=M.replace("x",(h>L?"-":"+")+"x"),M=M.replace("y",(S>E?"-":"+")+"y"),M=M.replace("z",(P>F?"-":"+")+"z");var N=function(){s=0,I=[],D=[],R=[]};(!s||s<I.length*D.length*R.length)&&N();var z=function(ae){return ae==="x"?n:ae==="y"?r:v},G=function(ae){return ae==="x"?I:ae==="y"?D:R},Y=function(ae){return ae[s-1]<ae[0]?-1:1},ee=z(M[1]),Z=z(M[3]),X=z(M[5]),ne=G(M[1]).length,ce=G(M[3]).length,Q=G(M[5]).length,K=!1,U=function(ae,se,_e){return ne*(ce*ae+se)+_e},H=Y(z(M[1])),q=Y(z(M[3])),re=Y(z(M[5]));for(o=0;o<Q-1;o++){for(b=0;b<ce-1;b++){for(g=0;g<ne-1;g++){var j=U(o,b,g),$=U(o,b,g+1),ie=U(o,b+1,g),oe=U(o+1,b,g);if((!(ee[j]*H<ee[$]*H)||!(Z[j]*q<Z[ie]*q)||!(X[j]*re<X[oe]*re))&&(K=!0),K)break}if(K)break}if(K)break}return K&&(m.warn("Encountered arbitrary coordinates! Unable to input data grid."),N()),{xMin:f,yMin:l,zMin:u,xMax:d,yMax:y,zMax:x,Xs:I,Ys:D,Zs:R,len:s,fill:M}}function e(i){return m.distinctVals(i).vals}function a(i,n){if(n===void 0&&(n=i.length),m.isTypedArray(i))return i.subarray(0,n);for(var r=[],v=0;v<n;v++)r[v]=+i[v];return r}B.exports={calc:A,filter:a,processGrid:T}},{"../../components/colorscale/calc":375,"../../lib":515}],1055:[function(t,B,V){var m=t("../../../stackgl_modules").gl_streamtube3d,c=m.createTubeMesh,A=t("../../lib"),T=t("../../lib/gl_format_color").parseColorScale,e=t("../../components/colorscale").extractOpts,a=t("../../plots/gl3d/zip3"),i={xaxis:0,yaxis:1,zaxis:2};function n(g,d){this.scene=g,this.uid=d,this.mesh=null,this.data=null}var r=n.prototype;r.handlePick=function(g){var d=this.scene.fullSceneLayout,f=this.scene.dataScale;function y(u,M){var _=d[M],p=f[i[M]];return _.l2c(u)/p}if(g.object===this.mesh){var l=g.data.position,x=g.data.velocity;return g.traceCoordinate=[y(l[0],"xaxis"),y(l[1],"yaxis"),y(l[2],"zaxis"),y(x[0],"xaxis"),y(x[1],"yaxis"),y(x[2],"zaxis"),g.data.intensity*this.data._normMax,g.data.divergence],g.textLabel=this.data.hovertext||this.data.text,!0}};function v(g){var d=g.length,f;return d>2?f=g.slice(1,d-1):d===2?f=[(g[0]+g[1])/2]:f=g,f}function s(g){var d=g.length;return d===1?[.5,.5]:[g[1]-g[0],g[d-1]-g[d-2]]}function o(g,d){var f=g.fullSceneLayout,y=g.dataScale,l=d._len,x={};function u(ce,Q){var K=f[Q],U=y[i[Q]];return A.simpleMap(ce,function(H){return K.d2l(H)*U})}if(x.vectors=a(u(d._u,"xaxis"),u(d._v,"yaxis"),u(d._w,"zaxis"),l),!l)return{positions:[],cells:[]};var M=u(d._Xs,"xaxis"),_=u(d._Ys,"yaxis"),p=u(d._Zs,"zaxis");x.meshgrid=[M,_,p],x.gridFill=d._gridFill;var w=d._slen;if(w)x.startingPositions=a(u(d._startsX,"xaxis"),u(d._startsY,"yaxis"),u(d._startsZ,"zaxis"));else{for(var h=_[0],L=v(M),S=v(p),E=new Array(L.length*S.length),P=0,F=0;F<L.length;F++)for(var I=0;I<S.length;I++)E[P++]=[L[F],h,S[I]];x.startingPositions=E}x.colormap=T(d),x.tubeSize=d.sizeref,x.maxLength=d.maxdisplayed;var D=u(d._xbnds,"xaxis"),R=u(d._ybnds,"yaxis"),N=u(d._zbnds,"zaxis"),z=s(M),G=s(_),Y=s(p),ee=[[D[0]-z[0],R[0]-G[0],N[0]-Y[0]],[D[1]+z[1],R[1]+G[1],N[1]+Y[1]]],Z=m(x,ee),X=e(d);Z.vertexIntensityBounds=[X.min/d._normMax,X.max/d._normMax];var ne=d.lightposition;return Z.lightPosition=[ne.x,ne.y,ne.z],Z.ambient=d.lighting.ambient,Z.diffuse=d.lighting.diffuse,Z.specular=d.lighting.specular,Z.roughness=d.lighting.roughness,Z.fresnel=d.lighting.fresnel,Z.opacity=d.opacity,d._pad=Z.tubeScale*d.sizeref*2,Z}r.update=function(g){this.data=g;var d=o(this.scene,g);this.mesh.update(d)},r.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function b(g,d){var f=g.glplot.gl,y=o(g,d),l=c(f,y),x=new n(g,d.uid);return x.mesh=l,x.data=d,l._trace=x,g.glplot.add(l),x}B.exports=b},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib":515,"../../lib/gl_format_color":511,"../../plots/gl3d/zip3":618}],1056:[function(t,B,V){var m=t("../../lib"),c=t("../../components/colorscale/defaults"),A=t("./attributes");B.exports=function(e,a,i,n){function r(f,y){return m.coerce(e,a,A,f,y)}var v=r("u"),s=r("v"),o=r("w"),b=r("x"),g=r("y"),d=r("z");if(!v||!v.length||!s||!s.length||!o||!o.length||!b||!b.length||!g||!g.length||!d||!d.length){a.visible=!1;return}r("starts.x"),r("starts.y"),r("starts.z"),r("maxdisplayed"),r("sizeref"),r("lighting.ambient"),r("lighting.diffuse"),r("lighting.specular"),r("lighting.roughness"),r("lighting.fresnel"),r("lightposition.x"),r("lightposition.y"),r("lightposition.z"),c(e,a,n,r,{prefix:"",cLetter:"c"}),r("text"),r("hovertext"),r("hovertemplate"),r("uhoverformat"),r("vhoverformat"),r("whoverformat"),r("xhoverformat"),r("yhoverformat"),r("zhoverformat"),a._length=null}},{"../../components/colorscale/defaults":377,"../../lib":515,"./attributes":1053}],1057:[function(t,B,V){B.exports={moduleType:"trace",name:"streamtube",basePlotModule:t("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:t("./calc").calc,plot:t("./convert"),eventData:function(m,c){return m.tubex=m.x,m.tubey=m.y,m.tubez=m.z,m.tubeu=c.traceCoordinate[3],m.tubev=c.traceCoordinate[4],m.tubew=c.traceCoordinate[5],m.norm=c.traceCoordinate[6],m.divergence=c.traceCoordinate[7],delete m.x,delete m.y,delete m.z,m},meta:{}}},{"../../plots/gl3d":607,"./attributes":1053,"./calc":1054,"./convert":1055,"./defaults":1056}],1058:[function(t,B,V){var m=t("../../plots/attributes"),c=t("../../plots/template_attributes").hovertemplateAttrs,A=t("../../plots/template_attributes").texttemplateAttrs,T=t("../../components/colorscale/attributes"),e=t("../../plots/domain").attributes,a=t("../pie/attributes"),i=t("./constants"),n=t("../../lib/extend").extendFlat;B.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:n({colors:{valType:"data_array",editType:"calc"},line:{color:n({},a.marker.line.color,{dflt:null}),width:n({},a.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},T("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:a.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:A({editType:"plot"},{keys:i.eventDataKeys.concat(["label","value"])}),hovertext:a.hovertext,hoverinfo:n({},m.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:c({},{keys:i.eventDataKeys}),textfont:a.textfont,insidetextorientation:a.insidetextorientation,insidetextfont:a.insidetextfont,outsidetextfont:n({},a.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:a.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:e({name:"sunburst",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/domain":593,"../../plots/template_attributes":642,"../pie/attributes":910,"./constants":1061}],1059:[function(t,B,V){var m=t("../../plots/plots");V.name="sunburst",V.plot=function(c,A,T,e){m.plotBasePlot(V.name,c,A,T,e)},V.clean=function(c,A,T,e){m.cleanBasePlot(V.name,c,A,T,e)}},{"../../plots/plots":628}],1060:[function(t,B,V){var m=t("d3-hierarchy"),c=t("fast-isnumeric"),A=t("../../lib"),T=t("../../components/colorscale").makeColorScaleFuncFromTrace,e=t("../pie/calc").makePullColorFn,a=t("../pie/calc").generateExtendedColors,i=t("../../components/colorscale").calc,n=t("../../constants/numerical").ALMOST_EQUAL,r={},v={},s={};V.calc=function(b,g){var d=b._fullLayout,f=g.ids,y=A.isArrayOrTypedArray(f),l=g.labels,x=g.parents,u=g.values,M=A.isArrayOrTypedArray(u),_=[],p={},w={},h=function(H,q){p[H]?p[H].push(q):p[H]=[q],w[q]=1},L=function(H){return H||typeof H=="number"},S=function(H){return!M||c(u[H])&&u[H]>=0},E,P,F;y?(E=Math.min(f.length,x.length),P=function(H){return L(f[H])&&S(H)},F=function(H){return String(f[H])}):(E=Math.min(l.length,x.length),P=function(H){return L(l[H])&&S(H)},F=function(H){return String(l[H])}),M&&(E=Math.min(E,u.length));for(var I=0;I<E;I++)if(P(I)){var D=F(I),R=L(x[I])?String(x[I]):"",N={i:I,id:D,pid:R,label:L(l[I])?String(l[I]):""};M&&(N.v=+u[I]),_.push(N),h(R,D)}if(p[""]){if(p[""].length>1){for(var Y=A.randstr(),ee=0;ee<_.length;ee++)_[ee].pid===""&&(_[ee].pid=Y);_.unshift({hasMultipleRoots:!0,id:Y,pid:"",label:""})}}else{var z=[],G;for(G in p)w[G]||z.push(G);if(z.length===1)G=z[0],_.unshift({hasImpliedRoot:!0,id:G,pid:"",label:G});else return A.warn(["Multiple implied roots, cannot build",g.type,"hierarchy of",g.name+".","These roots include:",z.join(", ")].join(" "))}var Z;try{Z=m.stratify().id(function(H){return H.id}).parentId(function(H){return H.pid})(_)}catch(H){return A.warn(["Failed to build",g.type,"hierarchy of",g.name+".","Error:",H.message].join(" "))}var X=m.hierarchy(Z),ne=!1;if(M)switch(g.branchvalues){case"remainder":X.sum(function(H){return H.data.v});break;case"total":X.each(function(H){var q=H.data.data,re=q.v;if(H.children){var j=H.children.reduce(function($,ie){return $+ie.data.data.v},0);if((q.hasImpliedRoot||q.hasMultipleRoots)&&(re=j),re<j*n)return ne=!0,A.warn(["Total value for node",H.data.data.id,"of",g.name,"is smaller than the sum of its children.",`
parent value =`,re,`
children sum =`,j].join(" "))}H.value=re});break}else o(X,g,{branches:g.count.indexOf("branches")!==-1,leaves:g.count.indexOf("leaves")!==-1});if(!ne){g.sort&&X.sort(function(H,q){return q.value-H.value});var ce,Q,K=g.marker.colors||[],U=!!K.length;return g._hasColorscale?(U||(K=M?g.values:g._values),i(b,g,{vals:K,containerStr:"marker",cLetter:"c"}),Q=T(g.marker)):ce=e(d["_"+g.type+"colormap"]),X.each(function(H){var q=H.data.data;q.color=g._hasColorscale?Q(K[q.i]):ce(K[q.i],q.id)}),_[0].hierarchy=X,_}},V._runCrossTraceCalc=function(b,g){var d=g._fullLayout,f=g.calcdata,y=d[b+"colorway"],l=d["_"+b+"colormap"];d["extend"+b+"colors"]&&(y=a(y,b==="icicle"?s:b==="treemap"?v:r));var x=0,u;function M(h){var L=h.data.data,S=L.id;L.color===!1&&(l[S]?L.color=l[S]:h.parent?h.parent.parent?L.color=h.parent.data.data.color:(l[S]=L.color=y[x%y.length],x++):L.color=u)}for(var _=0;_<f.length;_++){var p=f[_],w=p[0];w.trace.type===b&&w.hierarchy&&(u=w.trace.root.color,w.hierarchy.each(M))}},V.crossTraceCalc=function(b){return V._runCrossTraceCalc("sunburst",b)};function o(b,g,d){var f=0,y=b.children;if(y){for(var l=y.length,x=0;x<l;x++)f+=o(y[x],g,d);d.branches&&f++}else d.leaves&&f++;return b.value=b.data.data.value=f,g._values||(g._values=[]),g._values[b.data.data.i]=f,f}},{"../../components/colorscale":379,"../../constants/numerical":491,"../../lib":515,"../pie/calc":912,"d3-hierarchy":115,"fast-isnumeric":190}],1061:[function(t,B,V){B.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},{}],1062:[function(t,B,V){var m=t("../../lib"),c=t("./attributes"),A=t("../../plots/domain").defaults,T=t("../bar/defaults").handleText,e=t("../../components/colorscale"),a=e.hasColorscale,i=e.handleDefaults;B.exports=function(r,v,s,o){function b(M,_){return m.coerce(r,v,c,M,_)}var g=b("labels"),d=b("parents");if(!g||!g.length||!d||!d.length){v.visible=!1;return}var f=b("values");f&&f.length?b("branchvalues"):b("count"),b("level"),b("maxdepth");var y=b("marker.line.width");y&&b("marker.line.color",o.paper_bgcolor),b("marker.colors");var l=v._hasColorscale=a(r,"marker","colors")||(r.marker||{}).coloraxis;l&&i(r,v,o,b,{prefix:"marker.",cLetter:"c"}),b("leaf.opacity",l?1:.7);var x=b("text");b("texttemplate"),v.texttemplate||b("textinfo",Array.isArray(x)?"text+label":"label"),b("hovertext"),b("hovertemplate");var u="auto";T(r,v,o,b,u,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),b("insidetextorientation"),b("sort"),b("rotation"),b("root.color"),A(v,o,b),v._length=null}},{"../../components/colorscale":379,"../../lib":515,"../../plots/domain":593,"../bar/defaults":661,"./attributes":1058}],1063:[function(t,B,V){var m=t("@plotly/d3"),c=t("../../registry"),A=t("../../components/fx/helpers").appendArrayPointValue,T=t("../../components/fx"),e=t("../../lib"),a=t("../../lib/events"),i=t("./helpers"),n=t("../pie/helpers"),r=n.formatPieValue;B.exports=function(o,b,g,d,f){var y=d[0],l=y.trace,x=y.hierarchy,u=l.type==="sunburst",M=l.type==="treemap"||l.type==="icicle";"_hasHoverLabel"in l||(l._hasHoverLabel=!1),"_hasHoverEvent"in l||(l._hasHoverEvent=!1);var _=function(h){var L=g._fullLayout;if(!(g._dragging||L.hovermode===!1)){var S=g._fullData[l.index],E=h.data.data,P=E.i,F=i.isHierarchyRoot(h),I=i.getParent(x,h),D=i.getValue(h),R=function($){return e.castOption(S,P,$)},N=R("hovertemplate"),z=T.castHoverinfo(S,L,P),G=L.separators,Y;if(N||z&&z!=="none"&&z!=="skip"){var ee,Z;u&&(ee=y.cx+h.pxmid[0]*(1-h.rInscribed),Z=y.cy+h.pxmid[1]*(1-h.rInscribed)),M&&(ee=h._hoverX,Z=h._hoverY);var X={},ne=[],ce=[],Q=function($){return ne.indexOf($)!==-1};z&&(ne=z==="all"?S._module.attributes.hoverinfo.flags:z.split("+")),X.label=E.label,Q("label")&&X.label&&ce.push(X.label),E.hasOwnProperty("v")&&(X.value=E.v,X.valueLabel=r(X.value,G),Q("value")&&ce.push(X.valueLabel)),X.currentPath=h.currentPath=i.getPath(h.data),Q("current path")&&!F&&ce.push(X.currentPath);var K,U=[],H=function(){U.indexOf(K)===-1&&(ce.push(K),U.push(K))};X.percentParent=h.percentParent=D/i.getValue(I),X.parent=h.parentString=i.getPtLabel(I),Q("percent parent")&&(K=i.formatPercent(X.percentParent,G)+" of "+X.parent,H()),X.percentEntry=h.percentEntry=D/i.getValue(b),X.entry=h.entry=i.getPtLabel(b),Q("percent entry")&&!F&&!h.onPathbar&&(K=i.formatPercent(X.percentEntry,G)+" of "+X.entry,H()),X.percentRoot=h.percentRoot=D/i.getValue(x),X.root=h.root=i.getPtLabel(x),Q("percent root")&&!F&&(K=i.formatPercent(X.percentRoot,G)+" of "+X.root,H()),X.text=R("hovertext")||R("text"),Q("text")&&(K=X.text,e.isValidTextValue(K)&&ce.push(K)),Y=[v(h,S,f.eventDataKeys)];var q={trace:S,y:Z,_x0:h._x0,_x1:h._x1,_y0:h._y0,_y1:h._y1,text:ce.join("<br>"),name:N||Q("name")?S.name:void 0,color:R("hoverlabel.bgcolor")||E.color,borderColor:R("hoverlabel.bordercolor"),fontFamily:R("hoverlabel.font.family"),fontSize:R("hoverlabel.font.size"),fontColor:R("hoverlabel.font.color"),nameLength:R("hoverlabel.namelength"),textAlign:R("hoverlabel.align"),hovertemplate:N,hovertemplateLabels:X,eventData:Y};u&&(q.x0=ee-h.rInscribed*h.rpx1,q.x1=ee+h.rInscribed*h.rpx1,q.idealAlign=h.pxmid[0]<0?"left":"right"),M&&(q.x=ee,q.idealAlign=ee<0?"left":"right");var re=[];T.loneHover(q,{container:L._hoverlayer.node(),outerContainer:L._paper.node(),gd:g,inOut_bbox:re}),Y[0].bbox=re[0],l._hasHoverLabel=!0}if(M){var j=o.select("path.surface");f.styleOne(j,h,S,{hovered:!0})}l._hasHoverEvent=!0,g.emit("plotly_hover",{points:Y||[v(h,S,f.eventDataKeys)],event:m.event})}},p=function(h){var L=g._fullLayout,S=g._fullData[l.index],E=m.select(this).datum();if(l._hasHoverEvent&&(h.originalEvent=m.event,g.emit("plotly_unhover",{points:[v(E,S,f.eventDataKeys)],event:m.event}),l._hasHoverEvent=!1),l._hasHoverLabel&&(T.loneUnhover(L._hoverlayer.node()),l._hasHoverLabel=!1),M){var P=o.select("path.surface");f.styleOne(P,E,S,{hovered:!1})}},w=function(h){var L=g._fullLayout,S=g._fullData[l.index],E=u&&(i.isHierarchyRoot(h)||i.isLeaf(h)),P=i.getPtId(h),F=i.isEntry(h)?i.findEntryWithChild(x,P):i.findEntryWithLevel(x,P),I=i.getPtId(F),D={points:[v(h,S,f.eventDataKeys)],event:m.event};E||(D.nextLevel=I);var R=a.triggerHandler(g,"plotly_"+l.type+"click",D);if(R!==!1&&L.hovermode&&(g._hoverdata=[v(h,S,f.eventDataKeys)],T.click(g,m.event)),!E&&R!==!1&&!g._dragging&&!g._transitioning){c.call("_storeDirectGUIEdit",S,L._tracePreGUI[S.uid],{level:S.level});var N={data:[{level:I}],traces:[l.index]},z={frame:{redraw:!1,duration:f.transitionTime},transition:{duration:f.transitionTime,easing:f.transitionEasing},mode:"immediate",fromcurrent:!0};T.loneUnhover(L._hoverlayer.node()),c.call("animate",g,N,z)}};o.on("mouseover",_),o.on("mouseout",p),o.on("click",w)};function v(s,o,b){for(var g=s.data.data,d={curveNumber:o.index,pointNumber:g.i,data:o._input,fullData:o},f=0;f<b.length;f++){var y=b[f];y in s&&(d[y]=s[y])}return"parentString"in s&&!i.isHierarchyRoot(s)&&(d.parent=s.parentString),A(d,o,g.i),d}},{"../../components/fx":407,"../../components/fx/helpers":403,"../../lib":515,"../../lib/events":504,"../../registry":647,"../pie/helpers":915,"./helpers":1064,"@plotly/d3":58}],1064:[function(t,B,V){var m=t("../../lib"),c=t("../../components/color"),A=t("../../lib/setcursor"),T=t("../pie/helpers");V.findEntryWithLevel=function(n,r){var v;return r&&n.eachAfter(function(s){if(V.getPtId(s)===r)return v=s.copy()}),v||n},V.findEntryWithChild=function(n,r){var v;return n.eachAfter(function(s){for(var o=s.children||[],b=0;b<o.length;b++){var g=o[b];if(V.getPtId(g)===r)return v=s.copy()}}),v||n},V.isEntry=function(n){return!n.parent},V.isLeaf=function(n){return!n.children},V.getPtId=function(n){return n.data.data.id},V.getPtLabel=function(n){return n.data.data.label},V.getValue=function(n){return n.value},V.isHierarchyRoot=function(n){return i(n)===""},V.setSliceCursor=function(n,r,v){var s=v.isTransitioning;if(!s){var o=n.datum();s=v.hideOnRoot&&V.isHierarchyRoot(o)||v.hideOnLeaves&&V.isLeaf(o)}A(n,s?null:"pointer")};function e(n,r,v){return{color:V.getOutsideTextFontKey("color",n,r,v),family:V.getOutsideTextFontKey("family",n,r,v),size:V.getOutsideTextFontKey("size",n,r,v)}}function a(n,r,v,s){var o=(s||{}).onPathbar,b=r.data.data,g=b.i,d=m.castOption(n,g,(o?"pathbar.textfont":"insidetextfont")+".color");return!d&&n._input.textfont&&(d=m.castOption(n._input,g,"textfont.color")),{color:d||c.contrast(b.color),family:V.getInsideTextFontKey("family",n,r,v,s),size:V.getInsideTextFontKey("size",n,r,v,s)}}V.getInsideTextFontKey=function(n,r,v,s,o){var b=(o||{}).onPathbar,g=b?"pathbar.textfont":"insidetextfont",d=v.data.data.i;return m.castOption(r,d,g+"."+n)||m.castOption(r,d,"textfont."+n)||s.size},V.getOutsideTextFontKey=function(n,r,v,s){var o=v.data.data.i;return m.castOption(r,o,"outsidetextfont."+n)||m.castOption(r,o,"textfont."+n)||s.size},V.isOutsideText=function(n,r){return!n._hasColorscale&&V.isHierarchyRoot(r)},V.determineTextFont=function(n,r,v,s){return V.isOutsideText(n,r)?e(n,r,v):a(n,r,v,s)},V.hasTransition=function(n){return!!(n&&n.duration>0)},V.getMaxDepth=function(n){return n.maxdepth>=0?n.maxdepth:1/0},V.isHeader=function(n,r){return!(V.isLeaf(n)||n.depth===r._maxDepth-1)};function i(n){return n.data.data.pid}V.getParent=function(n,r){return V.findEntryWithLevel(n,i(r))},V.listPath=function(n,r){var v=n.parent;if(!v)return[];var s=r?[v.data[r]]:[v];return V.listPath(v,r).concat(s)},V.getPath=function(n){return V.listPath(n,"label").join("/")+"/"},V.formatValue=T.formatPieValue,V.formatPercent=function(n,r){var v=m.formatPercent(n,0);return v==="0%"&&(v=T.formatPiePercent(n,r)),v}},{"../../components/color":367,"../../lib":515,"../../lib/setcursor":536,"../pie/helpers":915}],1065:[function(t,B,V){B.exports={moduleType:"trace",name:"sunburst",basePlotModule:t("./base_plot"),categories:[],animatable:!0,attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyDefaults:t("./defaults"),supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc").calc,crossTraceCalc:t("./calc").crossTraceCalc,plot:t("./plot").plot,style:t("./style").style,colorbar:t("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":954,"./attributes":1058,"./base_plot":1059,"./calc":1060,"./defaults":1062,"./layout_attributes":1066,"./layout_defaults":1067,"./plot":1068,"./style":1069}],1066:[function(t,B,V){B.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1067:[function(t,B,V){var m=t("../../lib"),c=t("./layout_attributes");B.exports=function(T,e){function a(i,n){return m.coerce(T,e,c,i,n)}a("sunburstcolorway",e.colorway),a("extendsunburstcolors")}},{"../../lib":515,"./layout_attributes":1066}],1068:[function(t,B,V){var m=t("@plotly/d3"),c=t("d3-hierarchy"),A=t("d3-interpolate").interpolate,T=t("../../components/drawing"),e=t("../../lib"),a=t("../../lib/svg_text_utils"),i=t("../bar/uniform_text"),n=i.recordMinTextSize,r=i.clearMinTextSize,v=t("../pie/plot"),s=t("../pie/helpers").getRotationAngle,o=v.computeTransform,b=v.transformInsideText,g=t("./style").styleOne,d=t("../bar/style").resizeText,f=t("./fx"),y=t("./constants"),l=t("./helpers");V.plot=function(w,h,L,S){var E=w._fullLayout,P=E._sunburstlayer,F,I,D=!L,R=!E.uniformtext.mode&&l.hasTransition(L);if(r("sunburst",E),F=P.selectAll("g.trace.sunburst").data(h,function(z){return z[0].trace.uid}),F.enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),F.order(),R){S&&(I=S());var N=m.transition().duration(L.duration).ease(L.easing).each("end",function(){I&&I()}).each("interrupt",function(){I&&I()});N.each(function(){P.selectAll("g.trace").each(function(z){x(w,z,this,L)})})}else F.each(function(z){x(w,z,this,L)}),E.uniformtext.mode&&d(w,E._sunburstlayer.selectAll(".trace"),"sunburst");D&&F.exit().remove()};function x(w,h,L,S){var E=w._context.staticPlot,P=w._fullLayout,F=!P.uniformtext.mode&&l.hasTransition(S),I=m.select(L),D=I.selectAll("g.slice"),R=h[0],N=R.trace,z=R.hierarchy,G=l.findEntryWithLevel(z,N.level),Y=l.getMaxDepth(N),ee=P._size,Z=N.domain,X=ee.w*(Z.x[1]-Z.x[0]),ne=ee.h*(Z.y[1]-Z.y[0]),ce=.5*Math.min(X,ne),Q=R.cx=ee.l+ee.w*(Z.x[1]+Z.x[0])/2,K=R.cy=ee.t+ee.h*(1-Z.y[0])-ne/2;if(!G)return D.remove();var U=null,H={};F&&D.each(function(Le){H[l.getPtId(Le)]={rpx0:Le.rpx0,rpx1:Le.rpx1,x0:Le.x0,x1:Le.x1,transform:Le.transform},!U&&l.isEntry(Le)&&(U=Le)});var q=u(G).descendants(),re=G.height+1,j=0,$=Y;R.hasMultipleRoots&&l.isHierarchyRoot(G)&&(q=q.slice(1),re-=1,j=1,$+=1),q=q.filter(function(Le){return Le.y1<=$});var ie=s(N.rotation);ie&&q.forEach(function(Le){Le.x0+=ie,Le.x1+=ie});var oe=Math.min(re,Y),ae=function(Le){return(Le-j)/oe*ce},se=function(Le,je){return[Le*Math.cos(je),-Le*Math.sin(je)]},_e=function(Le){return e.pathAnnulus(Le.rpx0,Le.rpx1,Le.x0,Le.x1,Q,K)},ue=function(Le){return Q+_(Le)[0]*(Le.transform.rCenter||0)+(Le.transform.x||0)},ye=function(Le){return K+_(Le)[1]*(Le.transform.rCenter||0)+(Le.transform.y||0)};D=D.data(q,l.getPtId),D.enter().append("g").classed("slice",!0),F?D.exit().transition().each(function(){var Le=m.select(this),je=Le.select("path.surface");je.transition().attrTween("d",function(ze){var Ie=ke(ze);return function(We){return _e(Ie(We))}});var Ye=Le.select("g.slicetext");Ye.attr("opacity",0)}).remove():D.exit().remove(),D.order();var xe=null;if(F&&U){var me=l.getPtId(U);D.each(function(Le){xe===null&&l.getPtId(Le)===me&&(xe=Le.x1)})}var be=D;F&&(be=be.transition().each("end",function(){var Le=m.select(this);l.setSliceCursor(Le,w,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),be.each(function(Le){var je=m.select(this),Ye=e.ensureSingle(je,"path","surface",function(Qt){Qt.style("pointer-events",E?"none":"all")});Le.rpx0=ae(Le.y0),Le.rpx1=ae(Le.y1),Le.xmid=(Le.x0+Le.x1)/2,Le.pxmid=se(Le.rpx1,Le.xmid),Le.midangle=-(Le.xmid-Math.PI/2),Le.startangle=-(Le.x0-Math.PI/2),Le.stopangle=-(Le.x1-Math.PI/2),Le.halfangle=.5*Math.min(e.angleDelta(Le.x0,Le.x1)||Math.PI,Math.PI),Le.ring=1-Le.rpx0/Le.rpx1,Le.rInscribed=M(Le),F?Ye.transition().attrTween("d",function(Qt){var zt=De(Qt);return function(Et){return _e(zt(Et))}}):Ye.attr("d",_e),je.call(f,G,w,h,{eventDataKeys:y.eventDataKeys,transitionTime:y.CLICK_TRANSITION_TIME,transitionEasing:y.CLICK_TRANSITION_EASING}).call(l.setSliceCursor,w,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:w._transitioning}),Ye.call(g,Le,N);var ze=e.ensureSingle(je,"g","slicetext"),Ie=e.ensureSingle(ze,"text","",function(Qt){Qt.attr("data-notex",1)}),We=e.ensureUniformFontSize(w,l.determineTextFont(N,Le,P.font));Ie.text(V.formatSliceLabel(Le,G,N,h,P)).classed("slicetext",!0).attr("text-anchor","middle").call(T.font,We).call(a.convertToTspans,w);var pt=T.bBox(Ie.node());Le.transform=b(pt,Le,R),Le.transform.targetX=ue(Le),Le.transform.targetY=ye(Le);var Ft=function(Qt,zt){var Et=Qt.transform;return o(Et,zt),Et.fontSize=We.size,n(N.type,Et,P),e.getTextTransform(Et)};F?Ie.transition().attrTween("transform",function(Qt){var zt=Ve(Qt);return function(Et){return Ft(zt(Et),pt)}}):Ie.attr("transform",Ft(Le,pt))});function ke(Le){var je=l.getPtId(Le),Ye=H[je],ze=H[l.getPtId(G)],Ie;if(ze){var We=(Le.x1>ze.x1?2*Math.PI:0)+ie;Ie=Le.rpx1<ze.rpx1?{x0:Le.x0,x1:Le.x1,rpx0:0,rpx1:0}:{x0:We,x1:We,rpx0:Le.rpx0,rpx1:Le.rpx1}}else{var pt,Ft=l.getPtId(Le.parent);D.each(function(Nt){if(l.getPtId(Nt)===Ft)return pt=Nt});var Qt=pt.children,zt;Qt.forEach(function(Nt,Ct){if(l.getPtId(Nt)===je)return zt=Ct});var Et=Qt.length,Xt=A(pt.x0,pt.x1);Ie={rpx0:ce,rpx1:ce,x0:Xt(zt/Et),x1:Xt((zt+1)/Et)}}return A(Ye,Ie)}function De(Le){var je=H[l.getPtId(Le)],Ye,ze={x0:Le.x0,x1:Le.x1,rpx0:Le.rpx0,rpx1:Le.rpx1};if(je)Ye=je;else if(U)if(Le.parent)if(xe){var Ie=(Le.x1>xe?2*Math.PI:0)+ie;Ye={x0:Ie,x1:Ie}}else Ye={rpx0:ce,rpx1:ce},e.extendFlat(Ye,Ae(Le));else Ye={rpx0:0,rpx1:0};else Ye={x0:ie,x1:ie};return A(Ye,ze)}function Ve(Le){var je=H[l.getPtId(Le)],Ye,ze=Le.transform;if(je)Ye=je;else if(Ye={rpx1:Le.rpx1,transform:{textPosAngle:ze.textPosAngle,scale:0,rotate:ze.rotate,rCenter:ze.rCenter,x:ze.x,y:ze.y}},U)if(Le.parent)if(xe){var Ie=Le.x1>xe?2*Math.PI:0;Ye.x0=Ye.x1=Ie}else e.extendFlat(Ye,Ae(Le));else Ye.x0=Ye.x1=ie;else Ye.x0=Ye.x1=ie;var We=A(Ye.transform.textPosAngle,Le.transform.textPosAngle),pt=A(Ye.rpx1,Le.rpx1),Ft=A(Ye.x0,Le.x0),Qt=A(Ye.x1,Le.x1),zt=A(Ye.transform.scale,ze.scale),Et=A(Ye.transform.rotate,ze.rotate),Xt=ze.rCenter===0?3:Ye.transform.rCenter===0?1/3:1,Nt=A(Ye.transform.rCenter,ze.rCenter),Ct=function(Xe){return Nt(Math.pow(Xe,Xt))};return function(Xe){var at=pt(Xe),Ge=Ft(Xe),Se=Qt(Xe),He=Ct(Xe),Ke=se(at,(Ge+Se)/2),qe=We(Xe),Tt={pxmid:Ke,rpx1:at,transform:{textPosAngle:qe,rCenter:He,x:ze.x,y:ze.y}};return n(N.type,ze,P),{transform:{targetX:ue(Tt),targetY:ye(Tt),scale:zt(Xe),rotate:Et(Xe),rCenter:He}}}}function Ae(Le){var je=Le.parent,Ye=H[l.getPtId(je)],ze={};if(Ye){var Ie=je.children,We=Ie.indexOf(Le),pt=Ie.length,Ft=A(Ye.x0,Ye.x1);ze.x0=Ft(We/pt),ze.x1=Ft(We/pt)}else ze.x0=ze.x1=0;return ze}}function u(w){return c.partition().size([2*Math.PI,w.height+1])(w)}V.formatSliceLabel=function(w,h,L,S,E){var P=L.texttemplate,F=L.textinfo;if(!P&&(!F||F==="none"))return"";var I=E.separators,D=S[0],R=w.data.data,N=D.hierarchy,z=l.isHierarchyRoot(w),G=l.getParent(N,w),Y=l.getValue(w);if(!P){var ee=F.split("+"),Z=function(j){return ee.indexOf(j)!==-1},X=[],ne;if(Z("label")&&R.label&&X.push(R.label),R.hasOwnProperty("v")&&Z("value")&&X.push(l.formatValue(R.v,I)),!z){Z("current path")&&X.push(l.getPath(w.data));var ce=0;Z("percent parent")&&ce++,Z("percent entry")&&ce++,Z("percent root")&&ce++;var Q=ce>1;if(ce){var K,U=function(j){ne=l.formatPercent(K,I),Q&&(ne+=" of "+j),X.push(ne)};Z("percent parent")&&!z&&(K=Y/l.getValue(G),U("parent")),Z("percent entry")&&(K=Y/l.getValue(h),U("entry")),Z("percent root")&&(K=Y/l.getValue(N),U("root"))}}return Z("text")&&(ne=e.castOption(L,R.i,"text"),e.isValidTextValue(ne)&&X.push(ne)),X.join("<br>")}var H=e.castOption(L,R.i,"texttemplate");if(!H)return"";var q={};R.label&&(q.label=R.label),R.hasOwnProperty("v")&&(q.value=R.v,q.valueLabel=l.formatValue(R.v,I)),q.currentPath=l.getPath(w.data),z||(q.percentParent=Y/l.getValue(G),q.percentParentLabel=l.formatPercent(q.percentParent,I),q.parent=l.getPtLabel(G)),q.percentEntry=Y/l.getValue(h),q.percentEntryLabel=l.formatPercent(q.percentEntry,I),q.entry=l.getPtLabel(h),q.percentRoot=Y/l.getValue(N),q.percentRootLabel=l.formatPercent(q.percentRoot,I),q.root=l.getPtLabel(N),R.hasOwnProperty("color")&&(q.color=R.color);var re=e.castOption(L,R.i,"text");return(e.isValidTextValue(re)||re==="")&&(q.text=re),q.customdata=e.castOption(L,R.i,"customdata"),e.texttemplateString(H,q,E._d3locale,q,L._meta||{})};function M(w){return w.rpx0===0&&e.isFullCircle([w.x0,w.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(w.halfangle)),w.ring/2))}function _(w){return p(w.rpx1,w.transform.textPosAngle)}function p(w,h){return[w*Math.sin(h),-w*Math.cos(h)]}},{"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../bar/style":671,"../bar/uniform_text":673,"../pie/helpers":915,"../pie/plot":919,"./constants":1061,"./fx":1063,"./helpers":1064,"./style":1069,"@plotly/d3":58,"d3-hierarchy":115,"d3-interpolate":116}],1069:[function(t,B,V){var m=t("@plotly/d3"),c=t("../../components/color"),A=t("../../lib"),T=t("../bar/uniform_text").resizeText;function e(i){var n=i._fullLayout._sunburstlayer.selectAll(".trace");T(i,n,"sunburst"),n.each(function(r){var v=m.select(this),s=r[0],o=s.trace;v.style("opacity",o.opacity),v.selectAll("path.surface").each(function(b){m.select(this).call(a,b,o)})})}function a(i,n,r){var v=n.data.data,s=!n.children,o=v.i,b=A.castOption(r,o,"marker.line.color")||c.defaultLine,g=A.castOption(r,o,"marker.line.width")||0;i.style("stroke-width",g).call(c.fill,v.color).call(c.stroke,b).style("opacity",s?r.leaf.opacity:null)}B.exports={style:e,styleOne:a}},{"../../components/color":367,"../../lib":515,"../bar/uniform_text":673,"@plotly/d3":58}],1070:[function(t,B,V){var m=t("../../components/color"),c=t("../../components/colorscale/attributes"),A=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,T=t("../../plots/template_attributes").hovertemplateAttrs,e=t("../../plots/attributes"),a=t("../../lib/extend").extendFlat,i=t("../../plot_api/edit_types").overrideAll;function n(s){return{valType:"boolean",dflt:!1}}function r(s){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:n(),y:n(),z:n()},color:{valType:"color",dflt:m.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:m.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var v=B.exports=i(a({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:T(),xhoverformat:A("x"),yhoverformat:A("y"),zhoverformat:A("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},c("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:r(),y:r(),z:r()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:a({},c.zauto,{}),zmin:a({},c.zmin,{}),zmax:a({},c.zmax,{})},hoverinfo:a({},e.hoverinfo),showlegend:a({},e.showlegend,{dflt:!1})}),"calc","nested");v.x.editType=v.y.editType=v.z.editType="calc+clearAxisTypes",v.transforms=void 0},{"../../components/color":367,"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642}],1071:[function(t,B,V){var m=t("../../components/colorscale/calc");B.exports=function(A,T){T.surfacecolor?m(A,T,{vals:T.surfacecolor,containerStr:"",cLetter:"c"}):m(A,T,{vals:T.z,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":375}],1072:[function(t,B,V){var m=t("../../../stackgl_modules").gl_surface3d,c=t("../../../stackgl_modules").ndarray,A=t("../../../stackgl_modules").ndarray_linear_interpolate.d2,T=t("../heatmap/interp2d"),e=t("../heatmap/find_empties"),a=t("../../lib").isArrayOrTypedArray,i=t("../../lib/gl_format_color").parseColorScale,n=t("../../lib/str2rgbarray"),r=t("../../components/colorscale").extractOpts;function v(S,E,P){this.scene=S,this.uid=P,this.surface=E,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var s=v.prototype;s.getXat=function(S,E,P,F){var I=a(this.data.x)?a(this.data.x[0])?this.data.x[E][S]:this.data.x[S]:S;return P===void 0?I:F.d2l(I,0,P)},s.getYat=function(S,E,P,F){var I=a(this.data.y)?a(this.data.y[0])?this.data.y[E][S]:this.data.y[E]:E;return P===void 0?I:F.d2l(I,0,P)},s.getZat=function(S,E,P,F){var I=this.data.z[E][S];return I===null&&this.data.connectgaps&&this.data._interpolatedZ&&(I=this.data._interpolatedZ[E][S]),P===void 0?I:F.d2l(I,0,P)},s.handlePick=function(S){if(S.object===this.surface){var E=(S.data.index[0]-1)/this.dataScaleX-1,P=(S.data.index[1]-1)/this.dataScaleY-1,F=Math.max(Math.min(Math.round(E),this.data.z[0].length-1),0),I=Math.max(Math.min(Math.round(P),this.data._ylength-1),0);S.index=[F,I],S.traceCoordinate=[this.getXat(F,I),this.getYat(F,I),this.getZat(F,I)],S.dataCoordinate=[this.getXat(F,I,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(F,I,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(F,I,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var D=0;D<3;D++){var R=S.dataCoordinate[D];R!=null&&(S.dataCoordinate[D]*=this.scene.dataScale[D])}var N=this.data.hovertext||this.data.text;return Array.isArray(N)&&N[I]&&N[I][F]!==void 0?S.textLabel=N[I][F]:N?S.textLabel=N:S.textLabel="",S.data.dataCoordinate=S.dataCoordinate.slice(),this.surface.highlight(S.data),this.scene.glplot.spikes.position=S.dataCoordinate,!0}};function o(S){var E=S[0].rgb,P=S[S.length-1].rgb;return E[0]===P[0]&&E[1]===P[1]&&E[2]===P[2]&&E[3]===P[3]}var b=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function g(S,E){if(S<E)return 0;for(var P=0;Math.floor(S%E)===0;)S/=E,P++;return P}function d(S){for(var E=[],P=0;P<b.length;P++){var F=b[P];E.push(g(S,F))}return E}function f(S){for(var E=d(S),P=S,F=0;F<b.length;F++)if(E[F]>0){P=b[F];break}return P}function y(S,E){if(!(S<1||E<1)){for(var P=d(S),F=d(E),I=1,D=0;D<b.length;D++)I*=Math.pow(b[D],Math.max(P[D],F[D]));return I}}function l(S){if(S.length!==0){for(var E=1,P=0;P<S.length;P++)E=y(E,S[P]);return E}}s.calcXnums=function(S){var E,P=[];for(E=1;E<S;E++){var F=this.getXat(E-1,0),I=this.getXat(E,0);I!==F&&F!==void 0&&F!==null&&I!==void 0&&I!==null?P[E-1]=Math.abs(I-F):P[E-1]=0}var D=0;for(E=1;E<S;E++)D+=P[E-1];for(E=1;E<S;E++)P[E-1]===0?P[E-1]=1:P[E-1]=Math.round(D/P[E-1]);return P},s.calcYnums=function(S){var E,P=[];for(E=1;E<S;E++){var F=this.getYat(0,E-1),I=this.getYat(0,E);I!==F&&F!==void 0&&F!==null&&I!==void 0&&I!==null?P[E-1]=Math.abs(I-F):P[E-1]=0}var D=0;for(E=1;E<S;E++)D+=P[E-1];for(E=1;E<S;E++)P[E-1]===0?P[E-1]=1:P[E-1]=Math.round(D/P[E-1]);return P};var x=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],u=x[9],M=x[13];s.estimateScale=function(S,E){for(var P=E===0?this.calcXnums(S):this.calcYnums(S),F=1+l(P);F<u;)F*=2;for(;F>M;)F--,F/=f(F),F++,F<u&&(F=M);var I=Math.round(F/S);return I>1?I:1};function _(S,E,P){var F=P[8]+P[2]*E[0]+P[5]*E[1];return S[0]=(P[6]+P[0]*E[0]+P[3]*E[1])/F,S[1]=(P[7]+P[1]*E[0]+P[4]*E[1])/F,S}function p(S,E,P){return w(S,E,_,P),S}function w(S,E,P,F){for(var I=[0,0],D=S.shape[0],R=S.shape[1],N=0;N<D;N++)for(var z=0;z<R;z++)P(I,[N,z],F),S.set(N,z,A(E,I[0],I[1]));return S}s.refineCoords=function(S){for(var E=this.dataScaleX,P=this.dataScaleY,F=S[0].shape[0],I=S[0].shape[1],D=Math.floor(S[0].shape[0]*E+1)|0,R=Math.floor(S[0].shape[1]*P+1)|0,N=1+F+1,z=1+I+1,G=c(new Float32Array(N*z),[N,z]),Y=[1/E,0,0,0,1/P,0,0,0,1],ee=0;ee<S.length;++ee){this.surface.padField(G,S[ee]);var Z=c(new Float32Array(D*R),[D,R]);p(Z,G,Y),S[ee]=Z}};function h(S,E){for(var P=!1,F=0;F<S.length;F++)if(E===S[F]){P=!0;break}P===!1&&S.push(E)}s.setContourLevels=function(){var S=[[],[],[]],E=[!1,!1,!1],P=!1,F,I,D;for(F=0;F<3;++F)if(this.showContour[F]&&(P=!0,this.contourSize[F]>0&&this.contourStart[F]!==null&&this.contourEnd[F]!==null&&this.contourEnd[F]>this.contourStart[F]))for(E[F]=!0,I=this.contourStart[F];I<this.contourEnd[F];I+=this.contourSize[F])D=I*this.scene.dataScale[F],h(S[F],D);if(P){var R=[[],[],[]];for(F=0;F<3;++F)this.showContour[F]&&(R[F]=E[F]?S[F]:this.scene.contourLevels[F]);this.surface.update({levels:R})}},s.update=function(S){var E=this.scene,P=E.fullSceneLayout,F=this.surface,I=i(S),D=E.dataScale,R=S.z[0].length,N=S._ylength,z=E.contourLevels;this.data=S;var G,Y,ee,Z,X=[];for(G=0;G<3;G++)for(X[G]=[],Y=0;Y<R;Y++)X[G][Y]=[];for(Y=0;Y<R;Y++)for(ee=0;ee<N;ee++)X[0][Y][ee]=this.getXat(Y,ee,S.xcalendar,P.xaxis),X[1][Y][ee]=this.getYat(Y,ee,S.ycalendar,P.yaxis),X[2][Y][ee]=this.getZat(Y,ee,S.zcalendar,P.zaxis);if(S.connectgaps)for(S._emptypoints=e(X[2]),T(X[2],S._emptypoints),S._interpolatedZ=[],Y=0;Y<R;Y++)for(S._interpolatedZ[Y]=[],ee=0;ee<N;ee++)S._interpolatedZ[Y][ee]=X[2][Y][ee];for(G=0;G<3;G++)for(Y=0;Y<R;Y++)for(ee=0;ee<N;ee++)Z=X[G][Y][ee],Z==null?X[G][Y][ee]=NaN:Z=X[G][Y][ee]*=D[G];for(G=0;G<3;G++)for(Y=0;Y<R;Y++)for(ee=0;ee<N;ee++)Z=X[G][Y][ee],Z!=null&&(this.minValues[G]>Z&&(this.minValues[G]=Z),this.maxValues[G]<Z&&(this.maxValues[G]=Z));for(G=0;G<3;G++)this.objectOffset[G]=.5*(this.minValues[G]+this.maxValues[G]);for(G=0;G<3;G++)for(Y=0;Y<R;Y++)for(ee=0;ee<N;ee++)Z=X[G][Y][ee],Z!=null&&(X[G][Y][ee]-=this.objectOffset[G]);var ne=[c(new Float32Array(R*N),[R,N]),c(new Float32Array(R*N),[R,N]),c(new Float32Array(R*N),[R,N])];for(G=0;G<3;G++)for(Y=0;Y<R;Y++)for(ee=0;ee<N;ee++)ne[G].set(Y,ee,X[G][Y][ee]);X=[];var ce={colormap:I,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!S.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:S.opacityscale,opacity:S.opacity},Q=r(S);if(ce.intensityBounds=[Q.min,Q.max],S.surfacecolor){var K=c(new Float32Array(R*N),[R,N]);for(Y=0;Y<R;Y++)for(ee=0;ee<N;ee++)K.set(Y,ee,S.surfacecolor[ee][Y]);ne.push(K)}else ce.intensityBounds[0]*=D[2],ce.intensityBounds[1]*=D[2];(M<ne[0].shape[0]||M<ne[0].shape[1])&&(this.refineData=!1),this.refineData===!0&&(this.dataScaleX=this.estimateScale(ne[0].shape[0],0),this.dataScaleY=this.estimateScale(ne[0].shape[1],1),(this.dataScaleX!==1||this.dataScaleY!==1)&&this.refineCoords(ne)),S.surfacecolor&&(ce.intensity=ne.pop());var U=[!0,!0,!0],H=["x","y","z"];for(G=0;G<3;++G){var q=S.contours[H[G]];U[G]=q.highlight,ce.showContour[G]=q.show||q.highlight,ce.showContour[G]&&(ce.contourProject[G]=[q.project.x,q.project.y,q.project.z],q.show?(this.showContour[G]=!0,ce.levels[G]=z[G],F.highlightColor[G]=ce.contourColor[G]=n(q.color),q.usecolormap?F.highlightTint[G]=ce.contourTint[G]=0:F.highlightTint[G]=ce.contourTint[G]=1,ce.contourWidth[G]=q.width,this.contourStart[G]=q.start,this.contourEnd[G]=q.end,this.contourSize[G]=q.size):(this.showContour[G]=!1,this.contourStart[G]=null,this.contourEnd[G]=null,this.contourSize[G]=0),q.highlight&&(ce.dynamicColor[G]=n(q.highlightcolor),ce.dynamicWidth[G]=q.highlightwidth))}o(I)&&(ce.vertexColor=!0),ce.objectOffset=this.objectOffset,ce.coords=ne,F.update(ce),F.visible=S.visible,F.enableDynamic=U,F.enableHighlight=U,F.snapToData=!0,"lighting"in S&&(F.ambientLight=S.lighting.ambient,F.diffuseLight=S.lighting.diffuse,F.specularLight=S.lighting.specular,F.roughness=S.lighting.roughness,F.fresnel=S.lighting.fresnel),"lightposition"in S&&(F.lightPosition=[S.lightposition.x,S.lightposition.y,S.lightposition.z])},s.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()};function L(S,E){var P=S.glplot.gl,F=m({gl:P}),I=new v(S,F,E.uid);return F._trace=I,I.update(E),S.glplot.add(F),I}B.exports=L},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib":515,"../../lib/gl_format_color":511,"../../lib/str2rgbarray":540,"../heatmap/find_empties":807,"../heatmap/interp2d":810}],1073:[function(t,B,V){var m=t("../../registry"),c=t("../../lib"),A=t("../../components/colorscale/defaults"),T=t("./attributes"),e=.1;function a(s,o){for(var b=[],g=32,d=0;d<g;d++){var f=d/(g-1),y=o+(1-o)*(1-Math.pow(Math.sin(s*f*Math.PI),2));b.push([f,Math.max(0,Math.min(1,y))])}return b}function i(s){var o=0;if(!Array.isArray(s)||s.length<2||!s[0]||!s[s.length-1]||+s[0][0]!=0||+s[s.length-1][0]!=1)return!1;for(var b=0;b<s.length;b++){var g=s[b];if(g.length!==2||+g[0]<o)return!1;o=+g[0]}return!0}function n(s,o,b,g){var d,f;function y(S,E){return c.coerce(s,o,T,S,E)}var l=y("x"),x=y("y"),u=y("z");if(!u||!u.length||(l?l.length<1:!1)||(x?x.length<1:!1)){o.visible=!1;return}o._xlength=Array.isArray(l)&&c.isArrayOrTypedArray(l[0])?u.length:u[0].length,o._ylength=u.length;var M=m.getComponentMethod("calendars","handleTraceDefaults");M(s,o,["x","y","z"],g),y("text"),y("hovertext"),y("hovertemplate"),y("xhoverformat"),y("yhoverformat"),y("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(S){y(S)});var _=y("surfacecolor"),p=["x","y","z"];for(d=0;d<3;++d){var w="contours."+p[d],h=y(w+".show"),L=y(w+".highlight");if(h||L)for(f=0;f<3;++f)y(w+".project."+p[f]);h&&(y(w+".color"),y(w+".width"),y(w+".usecolormap")),L&&(y(w+".highlightcolor"),y(w+".highlightwidth")),y(w+".start"),y(w+".end"),y(w+".size")}_||(v(s,"zmin","cmin"),v(s,"zmax","cmax"),v(s,"zauto","cauto")),A(s,o,g,y,{prefix:"",cLetter:"c"}),r(s,o,g,y),o._length=null}function r(s,o,b,g){var d=g("opacityscale");d==="max"?o.opacityscale=[[0,e],[1,1]]:d==="min"?o.opacityscale=[[0,1],[1,e]]:d==="extremes"?o.opacityscale=a(1,e):i(d)||(o.opacityscale=void 0)}function v(s,o,b){o in s&&!(b in s)&&(s[b]=s[o])}B.exports={supplyDefaults:n,opacityscaleDefaults:r}},{"../../components/colorscale/defaults":377,"../../lib":515,"../../registry":647,"./attributes":1070}],1074:[function(t,B,V){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults").supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:t("./calc"),plot:t("./convert"),moduleType:"trace",name:"surface",basePlotModule:t("../../plots/gl3d"),categories:["gl3d","2dMap","showLegend"],meta:{}}},{"../../plots/gl3d":607,"./attributes":1070,"./calc":1071,"./convert":1072,"./defaults":1073}],1075:[function(t,B,V){var m=t("../../components/annotations/attributes"),c=t("../../lib/extend").extendFlat,A=t("../../plot_api/edit_types").overrideAll,T=t("../../plots/font_attributes"),e=t("../../plots/domain").attributes,a=t("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,i=B.exports=A({domain:e({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:a("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:c({},m.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:c({},T({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:a("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:c({},m.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:c({},T({arrayOk:!0}))}},"calc","from-root");i.transforms=void 0},{"../../components/annotations/attributes":350,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/cartesian/axis_format_attributes":569,"../../plots/domain":593,"../../plots/font_attributes":594}],1076:[function(t,B,V){var m=t("../../plots/get_data").getModuleCalcData,c=t("./plot"),A="table";V.name=A,V.plot=function(T){var e=m(T.calcdata,A)[0];e.length&&c(T,e)},V.clean=function(T,e,a,i){var n=i._has&&i._has(A),r=e._has&&e._has(A);n&&!r&&i._paperdiv.selectAll(".table").remove()}},{"../../plots/get_data":602,"./plot":1083}],1077:[function(t,B,V){var m=t("../../lib/gup").wrap;B.exports=function(){return m({})}},{"../../lib/gup":512}],1078:[function(t,B,V){B.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},{}],1079:[function(t,B,V){var m=t("./constants"),c=t("../../lib/extend").extendFlat,A=t("fast-isnumeric");B.exports=function(b,g){var d=a(g.cells.values),f=function(Y){return Y.slice(g.header.values.length,Y.length)},y=a(g.header.values);y.length&&!y[0].length&&(y[0]=[""],y=a(y));var l=y.concat(f(d).map(function(){return i((y[0]||[""]).length)})),x=g.domain,u=Math.floor(b._fullLayout._size.w*(x.x[1]-x.x[0])),M=Math.floor(b._fullLayout._size.h*(x.y[1]-x.y[0])),_=g.header.values.length?l[0].map(function(){return g.header.height}):[m.emptyHeaderHeight],p=d.length?d[0].map(function(){return g.cells.height}):[],w=_.reduce(e,0),h=M-w,L=h+m.uplift,S=v(p,L),E=v(_,w),P=r(E,[]),F=r(S,P),I={},D=g._fullInput.columnorder.concat(f(d.map(function(Y,ee){return ee}))),R=l.map(function(Y,ee){var Z=Array.isArray(g.columnwidth)?g.columnwidth[Math.min(ee,g.columnwidth.length-1)]:g.columnwidth;return A(Z)?Number(Z):1}),N=R.reduce(e,0);R=R.map(function(Y){return Y/N*u});var z=Math.max(T(g.header.line.width),T(g.cells.line.width)),G={key:g.uid+b._context.staticPlot,translateX:x.x[0]*b._fullLayout._size.w,translateY:b._fullLayout._size.h*(1-x.y[1]),size:b._fullLayout._size,width:u,maxLineWidth:z,height:M,columnOrder:D,groupHeight:M,rowBlocks:F,headerRowBlocks:P,scrollY:0,cells:c({},g.cells,{values:d}),headerCells:c({},g.header,{values:l}),gdColumns:l.map(function(Y){return Y[0]}),gdColumnsOriginalOrder:l.map(function(Y){return Y[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:l.map(function(Y,ee){var Z=I[Y];I[Y]=(Z||0)+1;var X=Y+"__"+I[Y];return{key:X,label:Y,specIndex:ee,xIndex:D[ee],xScale:n,x:void 0,calcdata:void 0,columnWidth:R[ee]}})};return G.columns.forEach(function(Y){Y.calcdata=G,Y.x=n(Y)}),G};function T(o){if(Array.isArray(o)){for(var b=0,g=0;g<o.length;g++)b=Math.max(b,T(o[g]));return b}return o}function e(o,b){return o+b}function a(o){var b=o.slice(),g=1/0,d=0,f;for(f=0;f<b.length;f++)Array.isArray(b[f])||(b[f]=[b[f]]),g=Math.min(g,b[f].length),d=Math.max(d,b[f].length);if(g!==d)for(f=0;f<b.length;f++){var y=d-b[f].length;y&&(b[f]=b[f].concat(i(y)))}return b}function i(o){for(var b=new Array(o),g=0;g<o;g++)b[g]="";return b}function n(o){return o.calcdata.columns.reduce(function(b,g){return g.xIndex<o.xIndex?b+g.columnWidth:b},0)}function r(o,b){var g=Object.keys(o);return g.map(function(d){return c({},o[d],{auxiliaryBlocks:b})})}function v(o,b){for(var g={},d,f=0,y=0,l=s(),x=0,u=0,M=0;M<o.length;M++)d=o[M],l.rows.push({rowIndex:M,rowHeight:d}),y+=d,(y>=b||M===o.length-1)&&(g[f]=l,l.key=u++,l.firstRowIndex=x,l.lastRowIndex=M,l=s(),f+=y,x=M+1,y=0);return g}function s(){return{firstRowIndex:null,lastRowIndex:null,rows:[]}}},{"../../lib/extend":505,"./constants":1078,"fast-isnumeric":190}],1080:[function(t,B,V){var m=t("../../lib/extend").extendFlat;V.splitToPanels=function(A){var T=[0,0],e=m({},A,{key:"header",type:"header",page:0,prevPages:T,currentRepaint:[null,null],dragHandle:!0,values:A.calcdata.headerCells.values[A.specIndex],rowBlocks:A.calcdata.headerRowBlocks,calcdata:m({},A.calcdata,{cells:A.calcdata.headerCells})}),a=m({},A,{key:"cells1",type:"cells",page:0,prevPages:T,currentRepaint:[null,null],dragHandle:!1,values:A.calcdata.cells.values[A.specIndex],rowBlocks:A.calcdata.rowBlocks}),i=m({},A,{key:"cells2",type:"cells",page:1,prevPages:T,currentRepaint:[null,null],dragHandle:!1,values:A.calcdata.cells.values[A.specIndex],rowBlocks:A.calcdata.rowBlocks});return[a,i,e]},V.splitToCells=function(A){var T=c(A);return(A.values||[]).slice(T[0],T[1]).map(function(e,a){var i=typeof e=="string"&&e.match(/[<$&> ]/)?"_keybuster_"+Math.random():"";return{keyWithinBlock:a+i,key:T[0]+a,column:A,calcdata:A.calcdata,page:A.page,rowBlocks:A.rowBlocks,value:e}})};function c(A){var T=A.rowBlocks[A.page],e=T?T.rows[0].rowIndex:0,a=T?e+T.rows.length:0;return[e,a]}},{"../../lib/extend":505}],1081:[function(t,B,V){var m=t("../../lib"),c=t("./attributes"),A=t("../../plots/domain").defaults;function T(e,a){for(var i=e.columnorder||[],n=e.header.values.length,r=i.slice(0,n),v=r.slice().sort(function(b,g){return b-g}),s=r.map(function(b){return v.indexOf(b)}),o=s.length;o<n;o++)s.push(o);a("columnorder",s)}B.exports=function(a,i,n,r){function v(s,o){return m.coerce(a,i,c,s,o)}A(i,r,v),v("columnwidth"),v("header.values"),v("header.format"),v("header.align"),v("header.prefix"),v("header.suffix"),v("header.height"),v("header.line.width"),v("header.line.color"),v("header.fill.color"),m.coerceFont(v,"header.font",m.extendFlat({},r.font)),T(i,v),v("cells.values"),v("cells.format"),v("cells.align"),v("cells.prefix"),v("cells.suffix"),v("cells.height"),v("cells.line.width"),v("cells.line.color"),v("cells.fill.color"),m.coerceFont(v,"cells.font",m.extendFlat({},r.font)),i._length=null}},{"../../lib":515,"../../plots/domain":593,"./attributes":1075}],1082:[function(t,B,V){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),calc:t("./calc"),plot:t("./plot"),moduleType:"trace",name:"table",basePlotModule:t("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":1075,"./base_plot":1076,"./calc":1077,"./defaults":1081,"./plot":1083}],1083:[function(t,B,V){var m=t("./constants"),c=t("@plotly/d3"),A=t("../../lib"),T=A.numberFormat,e=t("../../lib/gup"),a=t("../../components/drawing"),i=t("../../lib/svg_text_utils"),n=t("../../lib").raiseToTop,r=t("../../lib").strTranslate,v=t("../../lib").cancelTransition,s=t("./data_preparation_helper"),o=t("./data_split_helpers"),b=t("../../components/color");B.exports=function(ie,oe){var ae=!ie._context.staticPlot,se=ie._fullLayout._paper.selectAll("."+m.cn.table).data(oe.map(function(ze){var Ie=e.unwrap(ze),We=Ie.trace;return s(ie,We)}),e.keyFun);se.exit().remove(),se.enter().append("g").classed(m.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),se.attr("width",function(ze){return ze.width+ze.size.l+ze.size.r}).attr("height",function(ze){return ze.height+ze.size.t+ze.size.b}).attr("transform",function(ze){return r(ze.translateX,ze.translateY)});var _e=se.selectAll("."+m.cn.tableControlView).data(e.repeat,e.keyFun),ue=_e.enter().append("g").classed(m.cn.tableControlView,!0).style("box-sizing","content-box");if(ae){var ye="onwheel"in document?"wheel":"mousewheel";ue.on("mousemove",function(ze){_e.filter(function(Ie){return ze===Ie}).call(l,ie)}).on(ye,function(ze){if(!ze.scrollbarState.wheeling){ze.scrollbarState.wheeling=!0;var Ie=ze.scrollY+c.event.deltaY,We=Z(ie,_e,null,Ie)(ze);We||(c.event.stopPropagation(),c.event.preventDefault()),ze.scrollbarState.wheeling=!1}}).call(l,ie,!0)}_e.attr("transform",function(ze){return r(ze.size.l,ze.size.t)});var xe=_e.selectAll("."+m.cn.scrollBackground).data(e.repeat,e.keyFun);xe.enter().append("rect").classed(m.cn.scrollBackground,!0).attr("fill","none"),xe.attr("width",function(ze){return ze.width}).attr("height",function(ze){return ze.height}),_e.each(function(ze){a.setClipUrl(c.select(this),d(ie,ze),ie)});var me=_e.selectAll("."+m.cn.yColumn).data(function(ze){return ze.columns},e.keyFun);me.enter().append("g").classed(m.cn.yColumn,!0),me.exit().remove(),me.attr("transform",function(ze){return r(ze.x,0)}),ae&&me.call(c.behavior.drag().origin(function(ze){var Ie=c.select(this);return R(Ie,ze,-m.uplift),n(this),ze.calcdata.columnDragInProgress=!0,l(_e.filter(function(We){return ze.calcdata.key===We.key}),ie),ze}).on("drag",function(ze){var Ie=c.select(this),We=function(Qt){return(ze===Qt?c.event.x:Qt.x)+Qt.columnWidth/2};ze.x=Math.max(-m.overdrag,Math.min(ze.calcdata.width+m.overdrag-ze.columnWidth,c.event.x));var pt=y(me).filter(function(Qt){return Qt.calcdata.key===ze.calcdata.key}),Ft=pt.sort(function(Qt,zt){return We(Qt)-We(zt)});Ft.forEach(function(Qt,zt){Qt.xIndex=zt,Qt.x=ze===Qt?Qt.x:Qt.xScale(Qt)}),me.filter(function(Qt){return ze!==Qt}).transition().ease(m.transitionEase).duration(m.transitionDuration).attr("transform",function(Qt){return r(Qt.x,0)}),Ie.call(v).attr("transform",r(ze.x,-m.uplift))}).on("dragend",function(ze){var Ie=c.select(this),We=ze.calcdata;ze.x=ze.xScale(ze),ze.calcdata.columnDragInProgress=!1,R(Ie,ze,0),I(ie,We,We.columns.map(function(pt){return pt.xIndex}))})),me.each(function(ze){a.setClipUrl(c.select(this),f(ie,ze),ie)});var be=me.selectAll("."+m.cn.columnBlock).data(o.splitToPanels,e.keyFun);be.enter().append("g").classed(m.cn.columnBlock,!0).attr("id",function(ze){return ze.key}),be.style("cursor",function(ze){return ze.dragHandle?"ew-resize":ze.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var ke=be.filter(z),De=be.filter(N);ae&&De.call(c.behavior.drag().origin(function(ze){return c.event.stopPropagation(),ze}).on("drag",Z(ie,_e,-1)).on("dragend",function(){})),x(ie,_e,ke,be),x(ie,_e,De,be);var Ve=_e.selectAll("."+m.cn.scrollAreaClip).data(e.repeat,e.keyFun);Ve.enter().append("clipPath").classed(m.cn.scrollAreaClip,!0).attr("id",function(ze){return d(ie,ze)});var Ae=Ve.selectAll("."+m.cn.scrollAreaClipRect).data(e.repeat,e.keyFun);Ae.enter().append("rect").classed(m.cn.scrollAreaClipRect,!0).attr("x",-m.overdrag).attr("y",-m.uplift).attr("fill","none"),Ae.attr("width",function(ze){return ze.width+2*m.overdrag}).attr("height",function(ze){return ze.height+m.uplift});var Le=me.selectAll("."+m.cn.columnBoundary).data(e.repeat,e.keyFun);Le.enter().append("g").classed(m.cn.columnBoundary,!0);var je=me.selectAll("."+m.cn.columnBoundaryClippath).data(e.repeat,e.keyFun);je.enter().append("clipPath").classed(m.cn.columnBoundaryClippath,!0),je.attr("id",function(ze){return f(ie,ze)});var Ye=je.selectAll("."+m.cn.columnBoundaryRect).data(e.repeat,e.keyFun);Ye.enter().append("rect").classed(m.cn.columnBoundaryRect,!0).attr("fill","none"),Ye.attr("width",function(ze){return ze.columnWidth+2*g(ze)}).attr("height",function(ze){return ze.calcdata.height+2*g(ze)+m.uplift}).attr("x",function(ze){return-g(ze)}).attr("y",function(ze){return-g(ze)}),ee(null,De,_e)};function g($){return Math.ceil($.calcdata.maxLineWidth/2)}function d($,ie){return"clip"+$._fullLayout._uid+"_scrollAreaBottomClip_"+ie.key}function f($,ie){return"clip"+$._fullLayout._uid+"_columnBoundaryClippath_"+ie.calcdata.key+"_"+ie.specIndex}function y($){return[].concat.apply([],$.map(function(ie){return ie})).map(function(ie){return ie.__data__})}function l($,ie,oe){function ae(me){var be=me.rowBlocks;return U(be,be.length-1)+(be.length?H(be[be.length-1],1/0):1)}var se=$.selectAll("."+m.cn.scrollbarKit).data(e.repeat,e.keyFun);se.enter().append("g").classed(m.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),se.each(function(me){var be=me.scrollbarState;be.totalHeight=ae(me),be.scrollableAreaHeight=me.groupHeight-G(me),be.currentlyVisibleHeight=Math.min(be.totalHeight,be.scrollableAreaHeight),be.ratio=be.currentlyVisibleHeight/be.totalHeight,be.barLength=Math.max(be.ratio*be.currentlyVisibleHeight,m.goldenRatio*m.scrollbarWidth),be.barWiggleRoom=be.currentlyVisibleHeight-be.barLength,be.wiggleRoom=Math.max(0,be.totalHeight-be.scrollableAreaHeight),be.topY=be.barWiggleRoom===0?0:me.scrollY/be.wiggleRoom*be.barWiggleRoom,be.bottomY=be.topY+be.barLength,be.dragMultiplier=be.wiggleRoom/be.barWiggleRoom}).attr("transform",function(me){var be=me.width+m.scrollbarWidth/2+m.scrollbarOffset;return r(be,G(me))});var _e=se.selectAll("."+m.cn.scrollbar).data(e.repeat,e.keyFun);_e.enter().append("g").classed(m.cn.scrollbar,!0);var ue=_e.selectAll("."+m.cn.scrollbarSlider).data(e.repeat,e.keyFun);ue.enter().append("g").classed(m.cn.scrollbarSlider,!0),ue.attr("transform",function(me){return r(0,me.scrollbarState.topY||0)});var ye=ue.selectAll("."+m.cn.scrollbarGlyph).data(e.repeat,e.keyFun);ye.enter().append("line").classed(m.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",m.scrollbarWidth).attr("stroke-linecap","round").attr("y1",m.scrollbarWidth/2),ye.attr("y2",function(me){return me.scrollbarState.barLength-m.scrollbarWidth/2}).attr("stroke-opacity",function(me){return me.columnDragInProgress||!me.scrollbarState.barWiggleRoom||oe?0:.4}),ye.transition().delay(0).duration(0),ye.transition().delay(m.scrollbarHideDelay).duration(m.scrollbarHideDuration).attr("stroke-opacity",0);var xe=_e.selectAll("."+m.cn.scrollbarCaptureZone).data(e.repeat,e.keyFun);xe.enter().append("line").classed(m.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",m.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(me){var be=c.event.y,ke=this.getBoundingClientRect(),De=me.scrollbarState,Ve=be-ke.top,Ae=c.scale.linear().domain([0,De.scrollableAreaHeight]).range([0,De.totalHeight]).clamp(!0);De.topY<=Ve&&Ve<=De.bottomY||Z(ie,$,null,Ae(Ve-De.barLength/2))(me)}).call(c.behavior.drag().origin(function(me){return c.event.stopPropagation(),me.scrollbarState.scrollbarScrollInProgress=!0,me}).on("drag",Z(ie,$)).on("dragend",function(){})),xe.attr("y2",function(me){return me.scrollbarState.scrollableAreaHeight}),ie._context.staticPlot&&(ye.remove(),xe.remove())}function x($,ie,oe,ae){var se=u(oe),_e=M(se);h(_e);var ue=_(_e);S(ue);var ye=w(_e),xe=p(ye);L(xe),E(xe,ie,ae,$),K(_e)}function u($){var ie=$.selectAll("."+m.cn.columnCells).data(e.repeat,e.keyFun);return ie.enter().append("g").classed(m.cn.columnCells,!0),ie.exit().remove(),ie}function M($){var ie=$.selectAll("."+m.cn.columnCell).data(o.splitToCells,function(oe){return oe.keyWithinBlock});return ie.enter().append("g").classed(m.cn.columnCell,!0),ie.exit().remove(),ie}function _($){var ie=$.selectAll("."+m.cn.cellRect).data(e.repeat,function(oe){return oe.keyWithinBlock});return ie.enter().append("rect").classed(m.cn.cellRect,!0),ie}function p($){var ie=$.selectAll("."+m.cn.cellText).data(e.repeat,function(oe){return oe.keyWithinBlock});return ie.enter().append("text").classed(m.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){c.event.stopPropagation()}),ie}function w($){var ie=$.selectAll("."+m.cn.cellTextHolder).data(e.repeat,function(oe){return oe.keyWithinBlock});return ie.enter().append("g").classed(m.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),ie}function h($){$.each(function(ie,oe){var ae=ie.calcdata.cells.font,se=ie.column.specIndex,_e={size:D(ae.size,se,oe),color:D(ae.color,se,oe),family:D(ae.family,se,oe)};ie.rowNumber=ie.key,ie.align=D(ie.calcdata.cells.align,se,oe),ie.cellBorderWidth=D(ie.calcdata.cells.line.width,se,oe),ie.font=_e})}function L($){$.each(function(ie){a.font(c.select(this),ie.font)})}function S($){$.attr("width",function(ie){return ie.column.columnWidth}).attr("stroke-width",function(ie){return ie.cellBorderWidth}).each(function(ie){var oe=c.select(this);b.stroke(oe,D(ie.calcdata.cells.line.color,ie.column.specIndex,ie.rowNumber)),b.fill(oe,D(ie.calcdata.cells.fill.color,ie.column.specIndex,ie.rowNumber))})}function E($,ie,oe,ae){$.text(function(se){var _e=se.column.specIndex,ue=se.rowNumber,ye=se.value,xe=typeof ye=="string",me=xe&&ye.match(/<br>/i),be=!xe||me;se.mayHaveMarkup=xe&&ye.match(/[<&>]/);var ke=P(ye);se.latex=ke;var De=ke?"":D(se.calcdata.cells.prefix,_e,ue)||"",Ve=ke?"":D(se.calcdata.cells.suffix,_e,ue)||"",Ae=ke?null:D(se.calcdata.cells.format,_e,ue)||null,Le=De+(Ae?T(Ae)(se.value):se.value)+Ve,je;se.wrappingNeeded=!se.wrapped&&!be&&!ke&&(je=F(Le)),se.cellHeightMayIncrease=me||ke||se.mayHaveMarkup||(je===void 0?F(Le):je),se.needsConvertToTspans=se.mayHaveMarkup||se.wrappingNeeded||se.latex;var Ye;if(se.wrappingNeeded){var ze=m.wrapSplitCharacter===" "?Le.replace(/<a href=/ig,"<a_href="):Le,Ie=ze.split(m.wrapSplitCharacter),We=m.wrapSplitCharacter===" "?Ie.map(function(pt){return pt.replace(/<a_href=/ig,"<a href=")}):Ie;se.fragments=We.map(function(pt){return{text:pt,width:null}}),se.fragments.push({fragment:m.wrapSpacer,width:null}),Ye=We.join(m.lineBreaker)+m.lineBreaker+m.wrapSpacer}else delete se.fragments,Ye=Le;return Ye}).attr("dy",function(se){return se.needsConvertToTspans?0:"0.75em"}).each(function(se){var _e=this,ue=c.select(_e),ye=se.wrappingNeeded?ne:ce;se.needsConvertToTspans?i.convertToTspans(ue,ae,ye(oe,_e,ie,ae,se)):c.select(_e.parentNode).attr("transform",function(xe){return r(Q(xe),m.cellPad)}).attr("text-anchor",function(xe){return{left:"start",center:"middle",right:"end"}[xe.align]})})}function P($){return typeof $=="string"&&$.match(m.latexCheck)}function F($){return $.indexOf(m.wrapSplitCharacter)!==-1}function I($,ie,oe){var ae=ie.gdColumnsOriginalOrder;ie.gdColumns.sort(function(se,_e){return oe[ae.indexOf(se)]-oe[ae.indexOf(_e)]}),ie.columnorder=oe,$.emit("plotly_restyle")}function D($,ie,oe){if(Array.isArray($)){var ae=$[Math.min(ie,$.length-1)];return Array.isArray(ae)?ae[Math.min(oe,ae.length-1)]:ae}else return $}function R($,ie,oe){$.transition().ease(m.releaseTransitionEase).duration(m.releaseTransitionDuration).attr("transform",r(ie.x,oe))}function N($){return $.type==="cells"}function z($){return $.type==="header"}function G($){var ie=$.rowBlocks.length?$.rowBlocks[0].auxiliaryBlocks:[];return ie.reduce(function(oe,ae){return oe+H(ae,1/0)},0)}function Y($,ie,oe){for(var ae=[],se=0,_e=0;_e<$.length;_e++){for(var ue=$[_e],ye=ue.rows,xe=0,me=0;me<ye.length;me++)xe+=ye[me].rowHeight;ue.allRowsHeight=xe;var be=se+xe,ke=ie,De=ke+oe;ke<be&&De>se&&ae.push(_e),se+=xe}return ae}function ee($,ie,oe){var ae=y(ie)[0];if(ae!==void 0){var se=ae.rowBlocks,_e=ae.calcdata,ue=U(se,se.length),ye=ae.calcdata.groupHeight-G(ae),xe=_e.scrollY=Math.max(0,Math.min(ue-ye,_e.scrollY)),me=Y(se,xe,ye);me.length===1&&(me[0]===se.length-1?me.unshift(me[0]-1):me.push(me[0]+1)),me[0]%2&&me.reverse(),ie.each(function(be,ke){be.page=me[ke],be.scrollY=xe}),ie.attr("transform",function(be){var ke=U(be.rowBlocks,be.page)-be.scrollY;return r(0,ke)}),$&&(X($,oe,ie,me,ae.prevPages,ae,0),X($,oe,ie,me,ae.prevPages,ae,1),l(oe,$))}}function Z($,ie,oe,ae){return function(_e){var ue=_e.calcdata?_e.calcdata:_e,ye=ie.filter(function(ke){return ue.key===ke.key}),xe=oe||ue.scrollbarState.dragMultiplier,me=ue.scrollY;ue.scrollY=ae===void 0?ue.scrollY+xe*c.event.dy:ae;var be=ye.selectAll("."+m.cn.yColumn).selectAll("."+m.cn.columnBlock).filter(N);return ee($,be,ye),ue.scrollY===me}}function X($,ie,oe,ae,se,_e,ue){var ye=ae[ue]!==se[ue];ye&&(clearTimeout(_e.currentRepaint[ue]),_e.currentRepaint[ue]=setTimeout(function(){var xe=oe.filter(function(me,be){return be===ue&&ae[be]!==se[be]});x($,ie,xe,oe),se[ue]=ae[ue]}))}function ne($,ie,oe,ae){return function(){var _e=c.select(ie.parentNode);_e.each(function(ue){var ye=ue.fragments;_e.selectAll("tspan.line").each(function(Le,je){ye[je].width=this.getComputedTextLength()});var xe=ye[ye.length-1].width,me=ye.slice(0,-1),be=[],ke,De,Ve=0,Ae=ue.column.columnWidth-2*m.cellPad;for(ue.value="";me.length;)ke=me.shift(),De=ke.width+xe,Ve+De>Ae&&(ue.value+=be.join(m.wrapSpacer)+m.lineBreaker,be=[],Ve=0),be.push(ke.text),Ve+=De;Ve&&(ue.value+=be.join(m.wrapSpacer)),ue.wrapped=!0}),_e.selectAll("tspan.line").remove(),E(_e.select("."+m.cn.cellText),oe,$,ae),c.select(ie.parentNode.parentNode).call(K)}}function ce($,ie,oe,ae,se){return function(){if(!se.settledY){var ue=c.select(ie.parentNode),ye=re(se),xe=se.key-ye.firstRowIndex,me=ye.rows[xe].rowHeight,be=se.cellHeightMayIncrease?ie.parentNode.getBoundingClientRect().height+2*m.cellPad:me,ke=Math.max(be,me),De=ke-ye.rows[xe].rowHeight;De&&(ye.rows[xe].rowHeight=ke,$.selectAll("."+m.cn.columnCell).call(K),ee(null,$.filter(N),0),l(oe,ae,!0)),ue.attr("transform",function(){var Ve=this,Ae=Ve.parentNode,Le=Ae.getBoundingClientRect(),je=c.select(Ve.parentNode).select("."+m.cn.cellRect).node().getBoundingClientRect(),Ye=Ve.transform.baseVal.consolidate(),ze=je.top-Le.top+(Ye?Ye.matrix.f:m.cellPad);return r(Q(se,c.select(Ve.parentNode).select("."+m.cn.cellTextHolder).node().getBoundingClientRect().width),ze)}),se.settledY=!0}}}function Q($,ie){switch($.align){case"left":return m.cellPad;case"right":return $.column.columnWidth-(ie||0)-m.cellPad;case"center":return($.column.columnWidth-(ie||0))/2;default:return m.cellPad}}function K($){$.attr("transform",function(ie){var oe=ie.rowBlocks[0].auxiliaryBlocks.reduce(function(ue,ye){return ue+H(ye,1/0)},0),ae=re(ie),se=H(ae,ie.key),_e=se+oe;return r(0,_e)}).selectAll("."+m.cn.cellRect).attr("height",function(ie){return j(re(ie),ie.key).rowHeight})}function U($,ie){for(var oe=0,ae=ie-1;ae>=0;ae--)oe+=q($[ae]);return oe}function H($,ie){for(var oe=0,ae=0;ae<$.rows.length&&$.rows[ae].rowIndex<ie;ae++)oe+=$.rows[ae].rowHeight;return oe}function q($){var ie=$.allRowsHeight;if(ie!==void 0)return ie;for(var oe=0,ae=0;ae<$.rows.length;ae++)oe+=$.rows[ae].rowHeight;return $.allRowsHeight=oe,oe}function re($){return $.rowBlocks[$.page]}function j($,ie){return $.rows[ie-$.firstRowIndex]}},{"../../components/color":367,"../../components/drawing":389,"../../lib":515,"../../lib/gup":512,"../../lib/svg_text_utils":541,"./constants":1078,"./data_preparation_helper":1079,"./data_split_helpers":1080,"@plotly/d3":58}],1084:[function(t,B,V){var m=t("../../plots/template_attributes").hovertemplateAttrs,c=t("../../plots/template_attributes").texttemplateAttrs,A=t("../../components/colorscale/attributes"),T=t("../../plots/domain").attributes,e=t("../pie/attributes"),a=t("../sunburst/attributes"),i=t("./constants"),n=t("../../lib/extend").extendFlat;B.exports={labels:a.labels,parents:a.parents,values:a.values,branchvalues:a.branchvalues,count:a.count,level:a.level,maxdepth:a.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:n({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:a.marker.colors,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:a.marker.line,editType:"calc"},A("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:n({},e.textfont,{}),editType:"calc"},text:e.text,textinfo:a.textinfo,texttemplate:c({editType:"plot"},{keys:i.eventDataKeys.concat(["label","value"])}),hovertext:e.hovertext,hoverinfo:a.hoverinfo,hovertemplate:m({},{keys:i.eventDataKeys}),textfont:e.textfont,insidetextfont:e.insidetextfont,outsidetextfont:n({},e.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:e.sort,root:a.root,domain:T({name:"treemap",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/domain":593,"../../plots/template_attributes":642,"../pie/attributes":910,"../sunburst/attributes":1058,"./constants":1087}],1085:[function(t,B,V){var m=t("../../plots/plots");V.name="treemap",V.plot=function(c,A,T,e){m.plotBasePlot(V.name,c,A,T,e)},V.clean=function(c,A,T,e){m.cleanBasePlot(V.name,c,A,T,e)}},{"../../plots/plots":628}],1086:[function(t,B,V){var m=t("../sunburst/calc");V.calc=function(c,A){return m.calc(c,A)},V.crossTraceCalc=function(c){return m._runCrossTraceCalc("treemap",c)}},{"../sunburst/calc":1060}],1087:[function(t,B,V){B.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},{}],1088:[function(t,B,V){var m=t("../../lib"),c=t("./attributes"),A=t("../../components/color"),T=t("../../plots/domain").defaults,e=t("../bar/defaults").handleText,a=t("../bar/constants").TEXTPAD,i=t("../../components/colorscale"),n=i.hasColorscale,r=i.handleDefaults;B.exports=function(s,o,b,g){function d(E,P){return m.coerce(s,o,c,E,P)}var f=d("labels"),y=d("parents");if(!f||!f.length||!y||!y.length){o.visible=!1;return}var l=d("values");l&&l.length?d("branchvalues"):d("count"),d("level"),d("maxdepth");var x=d("tiling.packing");x==="squarify"&&d("tiling.squarifyratio"),d("tiling.flip"),d("tiling.pad");var u=d("text");d("texttemplate"),o.texttemplate||d("textinfo",Array.isArray(u)?"text+label":"label"),d("hovertext"),d("hovertemplate");var M=d("pathbar.visible"),_="auto";e(s,o,g,d,_,{hasPathbar:M,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),d("textposition");var p=o.textposition.indexOf("bottom")!==-1,w=d("marker.line.width");w&&d("marker.line.color",g.paper_bgcolor);var h=d("marker.colors"),L=o._hasColorscale=n(s,"marker","colors")||(s.marker||{}).coloraxis;L?r(s,o,g,d,{prefix:"marker.",cLetter:"c"}):d("marker.depthfade",!(h||[]).length);var S=o.textfont.size*2;d("marker.pad.t",p?S/4:S),d("marker.pad.l",S/4),d("marker.pad.r",S/4),d("marker.pad.b",p?S:S/4),o._hovered={marker:{line:{width:2,color:A.contrast(g.paper_bgcolor)}}},M&&(d("pathbar.thickness",o.pathbar.textfont.size+2*a),d("pathbar.side"),d("pathbar.edgeshape")),d("sort"),d("root.color"),T(o,g,d),o._length=null}},{"../../components/color":367,"../../components/colorscale":379,"../../lib":515,"../../plots/domain":593,"../bar/constants":659,"../bar/defaults":661,"./attributes":1084}],1089:[function(t,B,V){var m=t("@plotly/d3"),c=t("../sunburst/helpers"),A=t("../bar/uniform_text"),T=A.clearMinTextSize,e=t("../bar/style").resizeText,a=t("./plot_one");B.exports=function(n,r,v,s,o){var b=o.type,g=o.drawDescendants,d=n._fullLayout,f=d["_"+b+"layer"],y,l,x=!v;if(T(b,d),y=f.selectAll("g.trace."+b).data(r,function(M){return M[0].trace.uid}),y.enter().append("g").classed("trace",!0).classed(b,!0),y.order(),!d.uniformtext.mode&&c.hasTransition(v)){s&&(l=s());var u=m.transition().duration(v.duration).ease(v.easing).each("end",function(){l&&l()}).each("interrupt",function(){l&&l()});u.each(function(){f.selectAll("g.trace").each(function(M){a(n,M,this,v,g)})})}else y.each(function(M){a(n,M,this,v,g)}),d.uniformtext.mode&&e(n,f.selectAll(".trace"),b);x&&y.exit().remove()}},{"../bar/style":671,"../bar/uniform_text":673,"../sunburst/helpers":1064,"./plot_one":1098,"@plotly/d3":58}],1090:[function(t,B,V){var m=t("@plotly/d3"),c=t("../../lib"),A=t("../../components/drawing"),T=t("../../lib/svg_text_utils"),e=t("./partition"),a=t("./style").styleOne,i=t("./constants"),n=t("../sunburst/helpers"),r=t("../sunburst/fx"),v=!0;B.exports=function(o,b,g,d,f){var y=f.barDifY,l=f.width,x=f.height,u=f.viewX,M=f.viewY,_=f.pathSlice,p=f.toMoveInsideSlice,w=f.strTransform,h=f.hasTransition,L=f.handleSlicesExit,S=f.makeUpdateSliceInterpolator,E=f.makeUpdateTextInterpolator,P={},F=o._context.staticPlot,I=o._fullLayout,D=b[0],R=D.trace,N=D.hierarchy,z=l/R._entryDepth,G=n.listPath(g.data,"id"),Y=e(N.copy(),[l,x],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();Y=Y.filter(function(Z){var X=G.indexOf(Z.data.id);return X===-1?!1:(Z.x0=z*X,Z.x1=z*(X+1),Z.y0=y,Z.y1=y+x,Z.onPathbar=!0,!0)}),Y.reverse(),d=d.data(Y,n.getPtId),d.enter().append("g").classed("pathbar",!0),L(d,v,P,[l,x],_),d.order();var ee=d;h&&(ee=ee.transition().each("end",function(){var Z=m.select(this);n.setSliceCursor(Z,o,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),ee.each(function(Z){Z._x0=u(Z.x0),Z._x1=u(Z.x1),Z._y0=M(Z.y0),Z._y1=M(Z.y1),Z._hoverX=u(Z.x1-Math.min(l,x)/2),Z._hoverY=M(Z.y1-x/2);var X=m.select(this),ne=c.ensureSingle(X,"path","surface",function(U){U.style("pointer-events",F?"none":"all")});h?ne.transition().attrTween("d",function(U){var H=S(U,v,P,[l,x]);return function(q){return _(H(q))}}):ne.attr("d",_),X.call(r,g,o,b,{styleOne:a,eventDataKeys:i.eventDataKeys,transitionTime:i.CLICK_TRANSITION_TIME,transitionEasing:i.CLICK_TRANSITION_EASING}).call(n.setSliceCursor,o,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:o._transitioning}),ne.call(a,Z,R,{hovered:!1}),Z._text=(n.getPtLabel(Z)||"").split("<br>").join(" ")||"";var ce=c.ensureSingle(X,"g","slicetext"),Q=c.ensureSingle(ce,"text","",function(U){U.attr("data-notex",1)}),K=c.ensureUniformFontSize(o,n.determineTextFont(R,Z,I.font,{onPathbar:!0}));Q.text(Z._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(A.font,K).call(T.convertToTspans,o),Z.textBB=A.bBox(Q.node()),Z.transform=p(Z,{fontSize:K.size,onPathbar:!0}),Z.transform.fontSize=K.size,h?Q.transition().attrTween("transform",function(U){var H=E(U,v,P,[l,x]);return function(q){return w(H(q))}}):Q.attr("transform",w(Z))})}},{"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../sunburst/fx":1063,"../sunburst/helpers":1064,"./constants":1087,"./partition":1096,"./style":1099,"@plotly/d3":58}],1091:[function(t,B,V){var m=t("@plotly/d3"),c=t("../../lib"),A=t("../../components/drawing"),T=t("../../lib/svg_text_utils"),e=t("./partition"),a=t("./style").styleOne,i=t("./constants"),n=t("../sunburst/helpers"),r=t("../sunburst/fx"),v=t("../sunburst/plot").formatSliceLabel,s=!1;B.exports=function(b,g,d,f,y){var l=y.width,x=y.height,u=y.viewX,M=y.viewY,_=y.pathSlice,p=y.toMoveInsideSlice,w=y.strTransform,h=y.hasTransition,L=y.handleSlicesExit,S=y.makeUpdateSliceInterpolator,E=y.makeUpdateTextInterpolator,P=y.prevEntry,F={},I=b._context.staticPlot,D=b._fullLayout,R=g[0],N=R.trace,z=N.textposition.indexOf("left")!==-1,G=N.textposition.indexOf("right")!==-1,Y=N.textposition.indexOf("bottom")!==-1,ee=!Y&&!N.marker.pad.t||Y&&!N.marker.pad.b,Z=e(d,[l,x],{packing:N.tiling.packing,squarifyratio:N.tiling.squarifyratio,flipX:N.tiling.flip.indexOf("x")>-1,flipY:N.tiling.flip.indexOf("y")>-1,pad:{inner:N.tiling.pad,top:N.marker.pad.t,left:N.marker.pad.l,right:N.marker.pad.r,bottom:N.marker.pad.b}}),X=Z.descendants(),ne=1/0,ce=-1/0;X.forEach(function(q){var re=q.depth;re>=N._maxDepth?(q.x0=q.x1=(q.x0+q.x1)/2,q.y0=q.y1=(q.y0+q.y1)/2):(ne=Math.min(ne,re),ce=Math.max(ce,re))}),f=f.data(X,n.getPtId),N._maxVisibleLayers=isFinite(ce)?ce-ne+1:0,f.enter().append("g").classed("slice",!0),L(f,s,F,[l,x],_),f.order();var Q=null;if(h&&P){var K=n.getPtId(P);f.each(function(q){Q===null&&n.getPtId(q)===K&&(Q={x0:q.x0,x1:q.x1,y0:q.y0,y1:q.y1})})}var U=function(){return Q||{x0:0,x1:l,y0:0,y1:x}},H=f;return h&&(H=H.transition().each("end",function(){var q=m.select(this);n.setSliceCursor(q,b,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),H.each(function(q){var re=n.isHeader(q,N);q._x0=u(q.x0),q._x1=u(q.x1),q._y0=M(q.y0),q._y1=M(q.y1),q._hoverX=u(q.x1-N.marker.pad.r),q._hoverY=M(Y?q.y1-N.marker.pad.b/2:q.y0+N.marker.pad.t/2);var j=m.select(this),$=c.ensureSingle(j,"path","surface",function(se){se.style("pointer-events",I?"none":"all")});h?$.transition().attrTween("d",function(se){var _e=S(se,s,U(),[l,x]);return function(ue){return _(_e(ue))}}):$.attr("d",_),j.call(r,d,b,g,{styleOne:a,eventDataKeys:i.eventDataKeys,transitionTime:i.CLICK_TRANSITION_TIME,transitionEasing:i.CLICK_TRANSITION_EASING}).call(n.setSliceCursor,b,{isTransitioning:b._transitioning}),$.call(a,q,N,{hovered:!1}),q.x0===q.x1||q.y0===q.y1?q._text="":re?q._text=ee?"":n.getPtLabel(q)||"":q._text=v(q,d,N,g,D)||"";var ie=c.ensureSingle(j,"g","slicetext"),oe=c.ensureSingle(ie,"text","",function(se){se.attr("data-notex",1)}),ae=c.ensureUniformFontSize(b,n.determineTextFont(N,q,D.font));oe.text(q._text||" ").classed("slicetext",!0).attr("text-anchor",G?"end":z||re?"start":"middle").call(A.font,ae).call(T.convertToTspans,b),q.textBB=A.bBox(oe.node()),q.transform=p(q,{fontSize:ae.size,isHeader:re}),q.transform.fontSize=ae.size,h?oe.transition().attrTween("transform",function(se){var _e=E(se,s,U(),[l,x]);return function(ue){return w(_e(ue))}}):oe.attr("transform",w(q))}),Q}},{"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../sunburst/fx":1063,"../sunburst/helpers":1064,"../sunburst/plot":1068,"./constants":1087,"./partition":1096,"./style":1099,"@plotly/d3":58}],1092:[function(t,B,V){B.exports=function m(c,A,T){var e;T.swapXY&&(e=c.x0,c.x0=c.y0,c.y0=e,e=c.x1,c.x1=c.y1,c.y1=e),T.flipX&&(e=c.x0,c.x0=A[0]-c.x1,c.x1=A[0]-e),T.flipY&&(e=c.y0,c.y0=A[1]-c.y1,c.y1=A[1]-e);var a=c.children;if(a)for(var i=0;i<a.length;i++)m(a[i],A,T)}},{}],1093:[function(t,B,V){B.exports={moduleType:"trace",name:"treemap",basePlotModule:t("./base_plot"),categories:[],animatable:!0,attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyDefaults:t("./defaults"),supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc").calc,crossTraceCalc:t("./calc").crossTraceCalc,plot:t("./plot"),style:t("./style").style,colorbar:t("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":954,"./attributes":1084,"./base_plot":1085,"./calc":1086,"./defaults":1088,"./layout_attributes":1094,"./layout_defaults":1095,"./plot":1097,"./style":1099}],1094:[function(t,B,V){B.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1095:[function(t,B,V){var m=t("../../lib"),c=t("./layout_attributes");B.exports=function(T,e){function a(i,n){return m.coerce(T,e,c,i,n)}a("treemapcolorway",e.colorway),a("extendtreemapcolors")}},{"../../lib":515,"./layout_attributes":1094}],1096:[function(t,B,V){var m=t("d3-hierarchy"),c=t("./flip_tree");B.exports=function(e,a,i){var n=i.flipX,r=i.flipY,v=i.packing==="dice-slice",s=i.pad[r?"bottom":"top"],o=i.pad[n?"right":"left"],b=i.pad[n?"left":"right"],g=i.pad[r?"top":"bottom"],d;v&&(d=o,o=s,s=d,d=b,b=g,g=d);var f=m.treemap().tile(A(i.packing,i.squarifyratio)).paddingInner(i.pad.inner).paddingLeft(o).paddingRight(b).paddingTop(s).paddingBottom(g).size(v?[a[1],a[0]]:a)(e);return(v||n||r)&&c(f,a,{swapXY:v,flipX:n,flipY:r}),f};function A(T,e){switch(T){case"squarify":return m.treemapSquarify.ratio(e);case"binary":return m.treemapBinary;case"dice":return m.treemapDice;case"slice":return m.treemapSlice;default:return m.treemapSliceDice}}},{"./flip_tree":1092,"d3-hierarchy":115}],1097:[function(t,B,V){var m=t("./draw"),c=t("./draw_descendants");B.exports=function(T,e,a,i){return m(T,e,a,i,{type:"treemap",drawDescendants:c})}},{"./draw":1089,"./draw_descendants":1091}],1098:[function(t,B,V){var m=t("@plotly/d3"),c=t("d3-interpolate").interpolate,A=t("../sunburst/helpers"),T=t("../../lib"),e=t("../bar/constants").TEXTPAD,a=t("../bar/plot"),i=a.toMoveInsideBar,n=t("../bar/uniform_text"),r=n.recordMinTextSize,v=t("./constants"),s=t("./draw_ancestors");function o(b){return A.isHierarchyRoot(b)?"":A.getPtId(b)}B.exports=function(g,d,f,y,l){var x=g._fullLayout,u=d[0],M=u.trace,_=M.type,p=_==="icicle",w=u.hierarchy,h=A.findEntryWithLevel(w,M.level),L=m.select(f),S=L.selectAll("g.pathbar"),E=L.selectAll("g.slice");if(!h){S.remove(),E.remove();return}var P=A.isHierarchyRoot(h),F=!x.uniformtext.mode&&A.hasTransition(y),I=A.getMaxDepth(M),D=function(We){return We.data.depth-h.data.depth<I},R=x._size,N=M.domain,z=R.w*(N.x[1]-N.x[0]),G=R.h*(N.y[1]-N.y[0]),Y=z,ee=M.pathbar.thickness,Z=M.marker.line.width+v.gapWithPathbar,X=M.pathbar.visible?M.pathbar.side.indexOf("bottom")>-1?G+Z:-(ee+Z):0,ne={x0:Y,x1:Y,y0:X,y1:X+ee},ce=function(We,pt,Ft){var Qt=M.tiling.pad,zt=function(Ct){return Ct-Qt<=pt.x0},Et=function(Ct){return Ct+Qt>=pt.x1},Xt=function(Ct){return Ct-Qt<=pt.y0},Nt=function(Ct){return Ct+Qt>=pt.y1};return We.x0===pt.x0&&We.x1===pt.x1&&We.y0===pt.y0&&We.y1===pt.y1?{x0:We.x0,x1:We.x1,y0:We.y0,y1:We.y1}:{x0:zt(We.x0-Qt)?0:Et(We.x0-Qt)?Ft[0]:We.x0,x1:zt(We.x1+Qt)?0:Et(We.x1+Qt)?Ft[0]:We.x1,y0:Xt(We.y0-Qt)?0:Nt(We.y0-Qt)?Ft[1]:We.y0,y1:Xt(We.y1+Qt)?0:Nt(We.y1+Qt)?Ft[1]:We.y1}},Q=null,K={},U={},H=null,q=function(We,pt){return pt?K[o(We)]:U[o(We)]},re=function(We,pt,Ft,Qt){if(pt)return K[o(w)]||ne;var zt=U[M.level]||Ft;return D(We)?ce(We,zt,Qt):{}};u.hasMultipleRoots&&P&&I++,M._maxDepth=I,M._backgroundColor=x.paper_bgcolor,M._entryDepth=h.data.depth,M._atRootLevel=P;var j=-z/2+R.l+R.w*(N.x[1]+N.x[0])/2,$=-G/2+R.t+R.h*(1-(N.y[1]+N.y[0])/2),ie=function(We){return j+We},oe=function(We){return $+We},ae=oe(0),se=ie(0),_e=function(We){return se+We},ue=function(We){return ae+We};function ye(We,pt){return We+","+pt}var xe=_e(0),me=function(We){We.x=Math.max(xe,We.x)},be=M.pathbar.edgeshape,ke=function(We){var pt=_e(Math.max(Math.min(We.x0,We.x0),0)),Ft=_e(Math.min(Math.max(We.x1,We.x1),Y)),Qt=ue(We.y0),zt=ue(We.y1),Et=ee/2,Xt={},Nt={};Xt.x=pt,Nt.x=Ft,Xt.y=Nt.y=(Qt+zt)/2;var Ct={x:pt,y:Qt},Xe={x:Ft,y:Qt},at={x:Ft,y:zt},Ge={x:pt,y:zt};return be===">"?(Ct.x-=Et,Xe.x-=Et,at.x-=Et,Ge.x-=Et):be==="/"?(at.x-=Et,Ge.x-=Et,Xt.x-=Et/2,Nt.x-=Et/2):be==="\\"?(Ct.x-=Et,Xe.x-=Et,Xt.x-=Et/2,Nt.x-=Et/2):be==="<"&&(Xt.x-=Et,Nt.x-=Et),me(Ct),me(Ge),me(Xt),me(Xe),me(at),me(Nt),"M"+ye(Ct.x,Ct.y)+"L"+ye(Xe.x,Xe.y)+"L"+ye(Nt.x,Nt.y)+"L"+ye(at.x,at.y)+"L"+ye(Ge.x,Ge.y)+"L"+ye(Xt.x,Xt.y)+"Z"},De=function(We){var pt=ie(We.x0),Ft=ie(We.x1),Qt=oe(We.y0),zt=oe(We.y1),Et=Ft-pt,Xt=zt-Qt;if(!Et||!Xt)return"";var Nt=0,Ct=Et>2*Nt&&Xt>2*Nt?Nt:0,Xe=function(at,Ge){return Ct?"a"+ye(Ct,Ct)+" 0 0 1 "+ye(at,Ge):""};return"M"+ye(pt,Qt+Ct)+Xe(Ct,-Ct)+"L"+ye(Ft-Ct,Qt)+Xe(Ct,Ct)+"L"+ye(Ft,zt-Ct)+Xe(-Ct,Ct)+"L"+ye(pt+Ct,zt)+Xe(-Ct,-Ct)+"Z"},Ve=function(We,pt){var Ft=We.x0,Qt=We.x1,zt=We.y0,Et=We.y1,Xt=We.textBB,Nt=function(At){return M.textposition.indexOf(At)!==-1},Ct=Nt("bottom"),Xe=Nt("top")||pt.isHeader&&!Ct,at=Xe?"start":Ct?"end":"middle",Ge=Nt("right"),Se=Nt("left")||pt.onPathbar,He=Se?-1:Ge?1:0,Ke=M[p?"tiling":"marker"].pad;if(pt.isHeader){if(Ft+=(p?Ke:Ke.l)-e,Qt-=(p?Ke:Ke.r)-e,Ft>=Qt){var qe=(Ft+Qt)/2;Ft=qe,Qt=qe}var Tt;Ct?(Tt=Et-(p?Ke:Ke.b),zt<Tt&&Tt<Et&&(zt=Tt)):(Tt=zt+(p?Ke:Ke.t),zt<Tt&&Tt<Et&&(Et=Tt))}var mt=i(Ft,Qt,zt,Et,Xt,{isHorizontal:!1,constrained:!0,angle:0,anchor:at,leftToRight:He});return mt.fontSize=pt.fontSize,mt.targetX=ie(mt.targetX),mt.targetY=oe(mt.targetY),isNaN(mt.targetX)||isNaN(mt.targetY)?{}:(Ft!==Qt&&zt!==Et&&r(M.type,mt,x),{scale:mt.scale,rotate:mt.rotate,textX:mt.textX,textY:mt.textY,anchorX:mt.anchorX,anchorY:mt.anchorY,targetX:mt.targetX,targetY:mt.targetY})},Ae=function(We,pt){for(var Ft,Qt=0,zt=We;!Ft&&Qt<I;)Qt++,zt=zt.parent,zt?Ft=q(zt,pt):Qt=I;return Ft||{}},Le=function(We,pt,Ft,Qt){var zt=q(We,pt),Et;if(pt)Et=ne;else{var Xt=q(h,pt);Xt?Et=ce(We,Xt,Qt):Et={}}return c(zt,Et)},je=function(We,pt,Ft,Qt,zt){var Et=q(We,pt),Xt;if(Et)Xt=Et;else if(pt)Xt=ne;else if(Q)if(We.parent){var Nt=H||Ft;Nt&&!pt?Xt=ce(We,Nt,Qt):(Xt={},T.extendFlat(Xt,Ae(We,pt)))}else Xt=T.extendFlat({},We),p&&(zt.orientation==="h"?zt.flipX?Xt.x0=We.x1:Xt.x1=0:zt.flipY?Xt.y0=We.y1:Xt.y1=0);else Xt={};return c(Xt,{x0:We.x0,x1:We.x1,y0:We.y0,y1:We.y1})},Ye=function(We,pt,Ft,Qt){var zt=q(We,pt),Et={},Xt=re(We,pt,Ft,Qt);T.extendFlat(Et,{transform:Ve({x0:Xt.x0,x1:Xt.x1,y0:Xt.y0,y1:Xt.y1,textBB:We.textBB,_text:We._text},{isHeader:A.isHeader(We,M)})}),zt?Et=zt:We.parent&&T.extendFlat(Et,Ae(We,pt));var Nt=We.transform;return We.x0!==We.x1&&We.y0!==We.y1&&r(M.type,Nt,x),c(Et,{transform:{scale:Nt.scale,rotate:Nt.rotate,textX:Nt.textX,textY:Nt.textY,anchorX:Nt.anchorX,anchorY:Nt.anchorY,targetX:Nt.targetX,targetY:Nt.targetY}})},ze=function(We,pt,Ft,Qt,zt){var Et=Qt[0],Xt=Qt[1];F?We.exit().transition().each(function(){var Nt=m.select(this),Ct=Nt.select("path.surface");Ct.transition().attrTween("d",function(at){var Ge=Le(at,pt,Ft,[Et,Xt]);return function(Se){return zt(Ge(Se))}});var Xe=Nt.select("g.slicetext");Xe.attr("opacity",0)}).remove():We.exit().remove()},Ie=function(We){var pt=We.transform;return We.x0!==We.x1&&We.y0!==We.y1&&r(M.type,pt,x),T.getTextTransform({textX:pt.textX,textY:pt.textY,anchorX:pt.anchorX,anchorY:pt.anchorY,targetX:pt.targetX,targetY:pt.targetY,scale:pt.scale,rotate:pt.rotate})};F&&(S.each(function(We){K[o(We)]={x0:We.x0,x1:We.x1,y0:We.y0,y1:We.y1},We.transform&&(K[o(We)].transform={textX:We.transform.textX,textY:We.transform.textY,anchorX:We.transform.anchorX,anchorY:We.transform.anchorY,targetX:We.transform.targetX,targetY:We.transform.targetY,scale:We.transform.scale,rotate:We.transform.rotate})}),E.each(function(We){U[o(We)]={x0:We.x0,x1:We.x1,y0:We.y0,y1:We.y1},We.transform&&(U[o(We)].transform={textX:We.transform.textX,textY:We.transform.textY,anchorX:We.transform.anchorX,anchorY:We.transform.anchorY,targetX:We.transform.targetX,targetY:We.transform.targetY,scale:We.transform.scale,rotate:We.transform.rotate}),!Q&&A.isEntry(We)&&(Q=We)})),H=l(g,d,h,E,{width:z,height:G,viewX:ie,viewY:oe,pathSlice:De,toMoveInsideSlice:Ve,prevEntry:Q,makeUpdateSliceInterpolator:je,makeUpdateTextInterpolator:Ye,handleSlicesExit:ze,hasTransition:F,strTransform:Ie}),M.pathbar.visible?s(g,d,h,S,{barDifY:X,width:Y,height:ee,viewX:_e,viewY:ue,pathSlice:ke,toMoveInsideSlice:Ve,makeUpdateSliceInterpolator:je,makeUpdateTextInterpolator:Ye,handleSlicesExit:ze,hasTransition:F,strTransform:Ie}):S.remove()}},{"../../lib":515,"../bar/constants":659,"../bar/plot":668,"../bar/uniform_text":673,"../sunburst/helpers":1064,"./constants":1087,"./draw_ancestors":1090,"@plotly/d3":58,"d3-interpolate":116}],1099:[function(t,B,V){var m=t("@plotly/d3"),c=t("../../components/color"),A=t("../../lib"),T=t("../sunburst/helpers"),e=t("../bar/uniform_text").resizeText;function a(n){var r=n._fullLayout._treemaplayer.selectAll(".trace");e(n,r,"treemap"),r.each(function(v){var s=m.select(this),o=v[0],b=o.trace;s.style("opacity",b.opacity),s.selectAll("path.surface").each(function(g){m.select(this).call(i,g,b,{hovered:!1})})})}function i(n,r,v,s){var o=(s||{}).hovered,b=r.data.data,g=b.i,d,f,y=b.color,l=T.isHierarchyRoot(r),x=1;if(o)d=v._hovered.marker.line.color,f=v._hovered.marker.line.width;else if(l&&y===v.root.color)x=100,d="rgba(0,0,0,0)",f=0;else if(d=A.castOption(v,g,"marker.line.color")||c.defaultLine,f=A.castOption(v,g,"marker.line.width")||0,!v._hasColorscale&&!r.onPathbar){var u=v.marker.depthfade;if(u){var M=c.combine(c.addOpacity(v._backgroundColor,.75),y),_;if(u===!0){var p=T.getMaxDepth(v);isFinite(p)?T.isLeaf(r)?_=0:_=v._maxVisibleLayers-(r.data.depth-v._entryDepth):_=r.data.height+1}else _=r.data.depth-v._entryDepth,v._atRootLevel||_++;if(_>0)for(var w=0;w<_;w++){var h=.5*w/_;y=c.combine(c.addOpacity(M,h),y)}}}n.style("stroke-width",f).call(c.fill,y).call(c.stroke,d).style("opacity",x)}B.exports={style:a,styleOne:i}},{"../../components/color":367,"../../lib":515,"../bar/uniform_text":673,"../sunburst/helpers":1064,"@plotly/d3":58}],1100:[function(t,B,V){var m=t("../box/attributes"),c=t("../../lib/extend").extendFlat,A=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat;B.exports={y:m.y,x:m.x,x0:m.x0,y0:m.y0,xhoverformat:A("x"),yhoverformat:A("y"),name:c({},m.name,{}),orientation:c({},m.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:m.fillcolor,points:c({},m.boxpoints,{}),jitter:c({},m.jitter,{}),pointpos:c({},m.pointpos,{}),width:c({},m.width,{}),marker:m.marker,text:m.text,hovertext:m.hovertext,hovertemplate:m.hovertemplate,quartilemethod:m.quartilemethod,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:m.offsetgroup,alignmentgroup:m.alignmentgroup,selected:m.selected,unselected:m.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},{"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../box/attributes":682}],1101:[function(t,B,V){var m=t("../../lib"),c=t("../../plots/cartesian/axes"),A=t("../box/calc"),T=t("./helpers"),e=t("../../constants/numerical").BADNUM;B.exports=function(v,s){var o=A(v,s);if(o[0].t.empty)return o;for(var b=v._fullLayout,g=c.getFromId(v,s[s.orientation==="h"?"xaxis":"yaxis"]),d=1/0,f=-1/0,y=0,l=0,x=0;x<o.length;x++){var u=o[x],M=u.pts.map(T.extractVal),_=u.bandwidth=i(s,u,M),p=u.span=n(s,u,g,_);if(u.min===u.max&&_===0)p=u.span=[u.min,u.max],u.density=[{v:1,t:p[0]}],u.bandwidth=_,y=Math.max(y,1);else{var w=p[1]-p[0],h=Math.ceil(w/(_/3)),L=w/h;if(!isFinite(L)||!isFinite(h))return m.error("Something went wrong with computing the violin span"),o[0].t.empty=!0,o;var S=T.makeKDE(u,s,M);u.density=new Array(h);for(var E=0,P=p[0];P<p[1]+L/2;E++,P+=L){var F=S(P);u.density[E]={v:F,t:P},y=Math.max(y,F)}}l=Math.max(l,M.length),d=Math.min(d,p[0]),f=Math.max(f,p[1])}var I=c.findExtremes(g,[d,f],{padded:!0});if(s._extremes[g._id]=I,s.width)o[0].t.maxKDE=y;else{var D=b._violinScaleGroupStats,R=s.scalegroup,N=D[R];N?(N.maxKDE=Math.max(N.maxKDE,y),N.maxCount=Math.max(N.maxCount,l)):D[R]={maxKDE:y,maxCount:l}}return o[0].t.labels.kde=m._(v,"kde:"),o};function a(r,v,s){var o=Math.min(v,s/1.349);return 1.059*o*Math.pow(r,-.2)}function i(r,v,s){var o=v.max-v.min;if(!o)return r.bandwidth?r.bandwidth:0;if(r.bandwidth)return Math.max(r.bandwidth,o/1e4);var b=s.length,g=m.stdev(s,b-1,v.mean);return Math.max(a(b,g,v.q3-v.q1),o/100)}function n(r,v,s,o){var b=r.spanmode,g=r.span||[],d=[v.min,v.max],f=[v.min-2*o,v.max+2*o],y;function l(u){var M=g[u],_=s.type==="multicategory"?s.r2c(M):s.d2c(M,0,r[v.valLetter+"calendar"]);return _===e?f[u]:_}b==="soft"?y=f:b==="hard"?y=d:y=[l(0),l(1)];var x={type:"linear",range:y};return c.setConvert(x),x.cleanRange(),y}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/axes":566,"../box/calc":683,"./helpers":1104}],1102:[function(t,B,V){var m=t("../box/cross_trace_calc").setPositionOffset,c=["v","h"];B.exports=function(T,e){for(var a=T.calcdata,i=e.xaxis,n=e.yaxis,r=0;r<c.length;r++){for(var v=c[r],s=v==="h"?n:i,o=[],b=0;b<a.length;b++){var g=a[b],d=g[0].t,f=g[0].trace;f.visible===!0&&f.type==="violin"&&!d.empty&&f.orientation===v&&f.xaxis===i._id&&f.yaxis===n._id&&o.push(b)}m("violin",T,o,s)}}},{"../box/cross_trace_calc":684}],1103:[function(t,B,V){var m=t("../../lib"),c=t("../../components/color"),A=t("../box/defaults"),T=t("./attributes");B.exports=function(a,i,n,r){function v(L,S){return m.coerce(a,i,T,L,S)}function s(L,S){return m.coerce2(a,i,T,L,S)}if(A.handleSampleDefaults(a,i,v,r),i.visible!==!1){v("bandwidth"),v("side");var o=v("width");o||(v("scalegroup",i.name),v("scalemode"));var b=v("span"),g;Array.isArray(b)&&(g="manual"),v("spanmode",g);var d=v("line.color",(a.marker||{}).color||n),f=v("line.width"),y=v("fillcolor",c.addOpacity(i.line.color,.5));A.handlePointsDefaults(a,i,v,{prefix:""});var l=s("box.width"),x=s("box.fillcolor",y),u=s("box.line.color",d),M=s("box.line.width",f),_=v("box.visible",Boolean(l||x||u||M));_||(i.box={visible:!1});var p=s("meanline.color",d),w=s("meanline.width",f),h=v("meanline.visible",Boolean(p||w));h||(i.meanline={visible:!1}),v("quartilemethod")}}},{"../../components/color":367,"../../lib":515,"../box/defaults":685,"./attributes":1100}],1104:[function(t,B,V){var m=t("../../lib"),c={gaussian:function(A){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*A*A)}};V.makeKDE=function(A,T,e){var a=e.length,i=c.gaussian,n=A.bandwidth,r=1/(a*n);return function(v){for(var s=0,o=0;o<a;o++)s+=i((v-e[o])/n);return r*s}},V.getPositionOnKdePath=function(A,T,e){var a,i;T.orientation==="h"?(a="y",i="x"):(a="x",i="y");var n=m.findPointOnPath(A.path,e,i,{pathLength:A.pathLength}),r=A.posCenterPx,v=n[a],s=T.side==="both"?2*r-v:r;return[v,s]},V.getKdeValue=function(A,T,e){var a=A.pts.map(V.extractVal),i=V.makeKDE(A,T,a);return i(e)/A.posDensityScale},V.extractVal=function(A){return A.v}},{"../../lib":515}],1105:[function(t,B,V){var m=t("../../components/color"),c=t("../../lib"),A=t("../../plots/cartesian/axes"),T=t("../box/hover"),e=t("./helpers");B.exports=function(i,n,r,v,s){s||(s={});var o=s.hoverLayer,b=i.cd,g=b[0].trace,d=g.hoveron,f=d.indexOf("violins")!==-1,y=d.indexOf("kde")!==-1,l=[],x,u;if(f||y){var M=T.hoverOnBoxes(i,n,r,v);if(y&&M.length>0){var _=i.xa,p=i.ya,w,h,L,S,E;g.orientation==="h"?(E=n,w="y",L=p,h="x",S=_):(E=r,w="x",L=_,h="y",S=p);var P=b[i.index];if(E>=P.span[0]&&E<=P.span[1]){var F=c.extendFlat({},i),I=S.c2p(E,!0),D=e.getKdeValue(P,g,E),R=e.getPositionOnKdePath(P,g,I),N=L._offset,z=L._length;F[w+"0"]=R[0],F[w+"1"]=R[1],F[h+"0"]=F[h+"1"]=I,F[h+"Label"]=h+": "+A.hoverLabelText(S,E,g[h+"hoverformat"])+", "+b[0].t.labels.kde+" "+D.toFixed(3);for(var G=0,Y=0;Y<M.length;Y++)if(M[Y].attr==="med"){G=Y;break}F.spikeDistance=M[G].spikeDistance;var ee=w+"Spike";F[ee]=M[G][ee],M[G].spikeDistance=void 0,M[G][ee]=void 0,F.hovertemplate=!1,l.push(F),u={},u[w+"1"]=c.constrain(N+R[0],N,N+z),u[w+"2"]=c.constrain(N+R[1],N,N+z),u[h+"1"]=u[h+"2"]=S._offset+I}}f&&(l=l.concat(M))}d.indexOf("points")!==-1&&(x=T.hoverOnPoints(i,n,r));var Z=o.selectAll(".violinline-"+g.uid).data(u?[0]:[]);return Z.enter().append("line").classed("violinline-"+g.uid,!0).attr("stroke-width",1.5),Z.exit().remove(),Z.attr(u).call(m.stroke,i.color),v==="closest"?x?[x]:l:(x&&l.push(x),l)}},{"../../components/color":367,"../../lib":515,"../../plots/cartesian/axes":566,"../box/hover":687,"./helpers":1104}],1106:[function(t,B,V){B.exports={attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyDefaults:t("./defaults"),crossTraceDefaults:t("../box/defaults").crossTraceDefaults,supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc"),crossTraceCalc:t("./cross_trace_calc"),plot:t("./plot"),style:t("./style"),styleOnSelect:t("../scatter/style").styleOnSelect,hoverPoints:t("./hover"),selectPoints:t("../box/select"),moduleType:"trace",name:"violin",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"../box/defaults":685,"../box/select":692,"../scatter/style":960,"./attributes":1100,"./calc":1101,"./cross_trace_calc":1102,"./defaults":1103,"./hover":1105,"./layout_attributes":1107,"./layout_defaults":1108,"./plot":1109,"./style":1110}],1107:[function(t,B,V){var m=t("../box/layout_attributes"),c=t("../../lib").extendFlat;B.exports={violinmode:c({},m.boxmode,{}),violingap:c({},m.boxgap,{}),violingroupgap:c({},m.boxgroupgap,{})}},{"../../lib":515,"../box/layout_attributes":689}],1108:[function(t,B,V){var m=t("../../lib"),c=t("./layout_attributes"),A=t("../box/layout_defaults");B.exports=function(e,a,i){function n(r,v){return m.coerce(e,a,c,r,v)}A._supply(e,a,i,n,"violin")}},{"../../lib":515,"../box/layout_defaults":690,"./layout_attributes":1107}],1109:[function(t,B,V){var m=t("@plotly/d3"),c=t("../../lib"),A=t("../../components/drawing"),T=t("../box/plot"),e=t("../scatter/line_points"),a=t("./helpers");B.exports=function(n,r,v,s){var o=n._fullLayout,b=r.xaxis,g=r.yaxis;function d(f,y){var l=e(f,{xaxis:b,yaxis:g,trace:y,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return A.smoothopen(l[0],1)}c.makeTraceGroups(s,v,"trace violins").each(function(f){var y=m.select(this),l=f[0],x=l.t,u=l.trace;if(u.visible!==!0||x.empty){y.remove();return}var M=x.bPos,_=x.bdPos,p=r[x.valLetter+"axis"],w=r[x.posLetter+"axis"],h=u.side==="both",L=h||u.side==="positive",S=h||u.side==="negative",E=y.selectAll("path.violin").data(c.identity);E.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","violin"),E.exit().remove(),E.each(function(G){var Y=m.select(this),ee=G.density,Z=ee.length,X=w.c2l(G.pos+M,!0),ne=w.l2p(X),ce;if(u.width)ce=x.maxKDE/_;else{var Q=o._violinScaleGroupStats[u.scalegroup];ce=u.scalemode==="count"?Q.maxKDE/_*(Q.maxCount/G.pts.length):Q.maxKDE/_}var K,U,H,q,re,j,$;if(L){for(j=new Array(Z),q=0;q<Z;q++)$=j[q]={},$[x.posLetter]=X+ee[q].v/ce,$[x.valLetter]=p.c2l(ee[q].t,!0);K=d(j,u)}if(S){for(j=new Array(Z),re=0,q=Z-1;re<Z;re++,q--)$=j[re]={},$[x.posLetter]=X-ee[q].v/ce,$[x.valLetter]=p.c2l(ee[q].t,!0);U=d(j,u)}if(h)H=K+"L"+U.substr(1)+"Z";else{var ie=[ne,p.c2p(ee[0].t)],oe=[ne,p.c2p(ee[Z-1].t)];u.orientation==="h"&&(ie.reverse(),oe.reverse()),L?H="M"+ie+"L"+K.substr(1)+"L"+oe:H="M"+oe+"L"+U.substr(1)+"L"+ie}Y.attr("d",H),G.posCenterPx=ne,G.posDensityScale=ce*_,G.path=Y.node(),G.pathLength=G.path.getTotalLength()/(h?2:1)});var P=u.box,F=P.width,I=(P.line||{}).width,D,R;h?(D=_*F,R=0):L?(D=[0,_*F/2],R=I*{x:1,y:-1}[x.posLetter]):(D=[_*F/2,0],R=I*{x:-1,y:1}[x.posLetter]),T.plotBoxAndWhiskers(y,{pos:w,val:p},u,{bPos:M,bdPos:D,bPosPxOffset:R}),T.plotBoxMean(y,{pos:w,val:p},u,{bPos:M,bdPos:D,bPosPxOffset:R});var N;!u.box.visible&&u.meanline.visible&&(N=c.identity);var z=y.selectAll("path.meanline").data(N||[]);z.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect","non-scaling-stroke"),z.exit().remove(),z.each(function(G){var Y=p.c2p(G.mean,!0),ee=a.getPositionOnKdePath(G,u,Y);m.select(this).attr("d",u.orientation==="h"?"M"+Y+","+ee[0]+"V"+ee[1]:"M"+ee[0]+","+Y+"H"+ee[1])}),T.plotPoints(y,{x:b,y:g},u,x)})}},{"../../components/drawing":389,"../../lib":515,"../box/plot":691,"../scatter/line_points":950,"./helpers":1104,"@plotly/d3":58}],1110:[function(t,B,V){var m=t("@plotly/d3"),c=t("../../components/color"),A=t("../scatter/style").stylePoints;B.exports=function(e){var a=m.select(e).selectAll("g.trace.violins");a.style("opacity",function(i){return i[0].trace.opacity}),a.each(function(i){var n=i[0].trace,r=m.select(this),v=n.box||{},s=v.line||{},o=n.meanline||{},b=o.width;r.selectAll("path.violin").style("stroke-width",n.line.width+"px").call(c.stroke,n.line.color).call(c.fill,n.fillcolor),r.selectAll("path.box").style("stroke-width",s.width+"px").call(c.stroke,s.color).call(c.fill,v.fillcolor);var g={"stroke-width":b+"px","stroke-dasharray":2*b+"px,"+b+"px"};r.selectAll("path.mean").style(g).call(c.stroke,o.color),r.selectAll("path.meanline").style(g).call(c.stroke,o.color),A(r,n,e)})}},{"../../components/color":367,"../scatter/style":960,"@plotly/d3":58}],1111:[function(t,B,V){var m=t("../../components/colorscale/attributes"),c=t("../isosurface/attributes"),A=t("../surface/attributes"),T=t("../../plots/attributes"),e=t("../../lib/extend").extendFlat,a=t("../../plot_api/edit_types").overrideAll,i=B.exports=a(e({x:c.x,y:c.y,z:c.z,value:c.value,isomin:c.isomin,isomax:c.isomax,surface:c.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:c.slices,caps:c.caps,text:c.text,hovertext:c.hovertext,xhoverformat:c.xhoverformat,yhoverformat:c.yhoverformat,zhoverformat:c.zhoverformat,valuehoverformat:c.valuehoverformat,hovertemplate:c.hovertemplate},m("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:c.colorbar,opacity:c.opacity,opacityscale:A.opacityscale,lightposition:c.lightposition,lighting:c.lighting,flatshading:c.flatshading,contour:c.contour,hoverinfo:e({},T.hoverinfo),showlegend:e({},T.showlegend,{dflt:!1})}),"calc","nested");i.x.editType=i.y.editType=i.z.editType=i.value.editType="calc+clearAxisTypes",i.transforms=void 0},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../isosurface/attributes":871,"../surface/attributes":1070}],1112:[function(t,B,V){var m=t("../../../stackgl_modules").gl_mesh3d,c=t("../../lib/gl_format_color").parseColorScale,A=t("../../lib/str2rgbarray"),T=t("../../components/colorscale").extractOpts,e=t("../../plots/gl3d/zip3"),a=t("../isosurface/convert").findNearestOnAxis,i=t("../isosurface/convert").generateIsoMeshes;function n(s,o,b){this.scene=s,this.uid=b,this.mesh=o,this.name="",this.data=null,this.showContour=!1}var r=n.prototype;r.handlePick=function(s){if(s.object===this.mesh){var o=s.data.index,b=this.data._meshX[o],g=this.data._meshY[o],d=this.data._meshZ[o],f=this.data._Ys.length,y=this.data._Zs.length,l=a(b,this.data._Xs).id,x=a(g,this.data._Ys).id,u=a(d,this.data._Zs).id,M=s.index=u+y*x+y*f*l;s.traceCoordinate=[this.data._meshX[M],this.data._meshY[M],this.data._meshZ[M],this.data._value[M]];var _=this.data.hovertext||this.data.text;return Array.isArray(_)&&_[M]!==void 0?s.textLabel=_[M]:_&&(s.textLabel=_),!0}},r.update=function(s){var o=this.scene,b=o.fullSceneLayout;this.data=i(s);function g(x,u,M,_){return u.map(function(p){return x.d2l(p,0,_)*M})}var d=e(g(b.xaxis,s._meshX,o.dataScale[0],s.xcalendar),g(b.yaxis,s._meshY,o.dataScale[1],s.ycalendar),g(b.zaxis,s._meshZ,o.dataScale[2],s.zcalendar)),f=e(s._meshI,s._meshJ,s._meshK),y={positions:d,cells:f,lightPosition:[s.lightposition.x,s.lightposition.y,s.lightposition.z],ambient:s.lighting.ambient,diffuse:s.lighting.diffuse,specular:s.lighting.specular,roughness:s.lighting.roughness,fresnel:s.lighting.fresnel,vertexNormalsEpsilon:s.lighting.vertexnormalsepsilon,faceNormalsEpsilon:s.lighting.facenormalsepsilon,opacity:s.opacity,opacityscale:s.opacityscale,contourEnable:s.contour.show,contourColor:A(s.contour.color).slice(0,3),contourWidth:s.contour.width,useFacetNormals:s.flatshading},l=T(s);y.vertexIntensity=s._meshIntensity,y.vertexIntensityBounds=[l.min,l.max],y.colormap=c(s),this.mesh.update(y)},r.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function v(s,o){var b=s.glplot.gl,g=m({gl:b}),d=new n(s,g,o.uid);return g._trace=d,d.update(o),s.glplot.add(g),d}B.exports=v},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib/gl_format_color":511,"../../lib/str2rgbarray":540,"../../plots/gl3d/zip3":618,"../isosurface/convert":873}],1113:[function(t,B,V){var m=t("../../lib"),c=t("./attributes"),A=t("../isosurface/defaults").supplyIsoDefaults,T=t("../surface/defaults").opacityscaleDefaults;B.exports=function(a,i,n,r){function v(s,o){return m.coerce(a,i,c,s,o)}A(a,i,n,r,v),T(a,i,r,v)}},{"../../lib":515,"../isosurface/defaults":874,"../surface/defaults":1073,"./attributes":1111}],1114:[function(t,B,V){B.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),calc:t("../isosurface/calc"),colorbar:{min:"cmin",max:"cmax"},plot:t("./convert"),moduleType:"trace",name:"volume",basePlotModule:t("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":607,"../isosurface/calc":872,"./attributes":1111,"./convert":1112,"./defaults":1113}],1115:[function(t,B,V){var m=t("../bar/attributes"),c=t("../scatter/attributes").line,A=t("../../plots/attributes"),T=t("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=t("../../plots/template_attributes").hovertemplateAttrs,a=t("../../plots/template_attributes").texttemplateAttrs,i=t("./constants"),n=t("../../lib/extend").extendFlat,r=t("../../components/color");function v(s){return{marker:{color:n({},m.marker.color,{arrayOk:!1,editType:"style"}),line:{color:n({},m.marker.line.color,{arrayOk:!1,editType:"style"}),width:n({},m.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}B.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:m.x,x0:m.x0,dx:m.dx,y:m.y,y0:m.y0,dy:m.dy,xperiod:m.xperiod,yperiod:m.yperiod,xperiod0:m.xperiod0,yperiod0:m.yperiod0,xperiodalignment:m.xperiodalignment,yperiodalignment:m.yperiodalignment,xhoverformat:T("x"),yhoverformat:T("y"),hovertext:m.hovertext,hovertemplate:e({},{keys:i.eventDataKeys}),hoverinfo:n({},A.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:a({editType:"plot"},{keys:i.eventDataKeys.concat(["label"])}),text:m.text,textposition:m.textposition,insidetextanchor:m.insidetextanchor,textangle:m.textangle,textfont:m.textfont,insidetextfont:m.insidetextfont,outsidetextfont:m.outsidetextfont,constraintext:m.constraintext,cliponaxis:m.cliponaxis,orientation:m.orientation,offset:m.offset,width:m.width,increasing:v(),decreasing:v(),totals:v(),connector:{line:{color:n({},c.color,{dflt:r.defaultLine}),width:n({},c.width,{editType:"plot"}),dash:c.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:m.offsetgroup,alignmentgroup:m.alignmentgroup}},{"../../components/color":367,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../bar/attributes":657,"../scatter/attributes":936,"./constants":1117}],1116:[function(t,B,V){var m=t("../../plots/cartesian/axes"),c=t("../../plots/cartesian/align_period"),A=t("../../lib").mergeArray,T=t("../scatter/calc_selection"),e=t("../../constants/numerical").BADNUM;function a(n){return n==="a"||n==="absolute"}function i(n){return n==="t"||n==="total"}B.exports=function(r,v){var s=m.getFromId(r,v.xaxis||"x"),o=m.getFromId(r,v.yaxis||"y"),b,g,d,f,y,l;v.orientation==="h"?(b=s.makeCalcdata(v,"x"),d=o.makeCalcdata(v,"y"),f=c(v,o,"y",d),y=!!v.yperiodalignment,l="y"):(b=o.makeCalcdata(v,"y"),d=s.makeCalcdata(v,"x"),f=c(v,s,"x",d),y=!!v.xperiodalignment,l="x"),g=f.vals;for(var x=Math.min(g.length,b.length),u=new Array(x),M=0,_,p=!1,w=0;w<x;w++){var h=b[w]||0,L=!1;(b[w]!==e||i(v.measure[w])||a(v.measure[w]))&&w+1<x&&(b[w+1]!==e||i(v.measure[w+1])||a(v.measure[w+1]))&&(L=!0);var S=u[w]={i:w,p:g[w],s:h,rawS:h,cNext:L};a(v.measure[w])?(M=S.s,S.isSum=!0,S.dir="totals",S.s=M):i(v.measure[w])?(S.isSum=!0,S.dir="totals",S.s=M):(S.isSum=!1,S.dir=S.rawS<0?"decreasing":"increasing",_=S.s,S.s=M+_,M+=_),S.dir==="totals"&&(p=!0),y&&(u[w].orig_p=d[w],u[w][l+"End"]=f.ends[w],u[w][l+"Start"]=f.starts[w]),v.ids&&(S.id=String(v.ids[w])),S.v=(v.base||0)+M}return u.length&&(u[0].hasTotals=p),A(v.text,u,"tx"),A(v.hovertext,u,"htx"),T(u,v),u}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"../scatter/calc_selection":938}],1117:[function(t,B,V){B.exports={eventDataKeys:["initial","delta","final"]}},{}],1118:[function(t,B,V){var m=t("../bar/cross_trace_calc").setGroupPositions;B.exports=function(A,T){var e=A._fullLayout,a=A._fullData,i=A.calcdata,n=T.xaxis,r=T.yaxis,v=[],s=[],o=[],b,g;for(g=0;g<a.length;g++){var d=a[g];d.visible===!0&&d.xaxis===n._id&&d.yaxis===r._id&&d.type==="waterfall"&&(b=i[g],d.orientation==="h"?o.push(b):s.push(b),v.push(b))}var f={mode:e.waterfallmode,norm:e.waterfallnorm,gap:e.waterfallgap,groupgap:e.waterfallgroupgap};for(m(A,n,r,s,f),m(A,r,n,o,f),g=0;g<v.length;g++){b=v[g];for(var y=0;y<b.length;y++){var l=b[y];l.isSum===!1&&(l.s0+=y===0?0:b[y-1].s),y+1<b.length&&(b[y].nextP0=b[y+1].p0,b[y].nextS0=b[y+1].s0)}}}},{"../bar/cross_trace_calc":660}],1119:[function(t,B,V){var m=t("../../lib"),c=t("../bar/defaults").handleGroupingDefaults,A=t("../bar/defaults").handleText,T=t("../scatter/xy_defaults"),e=t("../scatter/period_defaults"),a=t("./attributes"),i=t("../../components/color"),n=t("../../constants/delta.js"),r=n.INCREASING.COLOR,v=n.DECREASING.COLOR,s="#4499FF";function o(d,f,y){d(f+".marker.color",y),d(f+".marker.line.color",i.defaultLine),d(f+".marker.line.width")}function b(d,f,y,l){function x(w,h){return m.coerce(d,f,a,w,h)}var u=T(d,f,l,x);if(!u){f.visible=!1;return}e(d,f,l,x),x("xhoverformat"),x("yhoverformat"),x("measure"),x("orientation",f.x&&!f.y?"h":"v"),x("base"),x("offset"),x("width"),x("text"),x("hovertext"),x("hovertemplate");var M=x("textposition");A(d,f,l,x,M,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),f.textposition!=="none"&&(x("texttemplate"),f.texttemplate||x("textinfo")),o(x,"increasing",r),o(x,"decreasing",v),o(x,"totals",s);var _=x("connector.visible");if(_){x("connector.mode");var p=x("connector.line.width");p&&(x("connector.line.color"),x("connector.line.dash"))}}function g(d,f){var y,l;function x(M){return m.coerce(l._input,l,a,M)}if(f.waterfallmode==="group")for(var u=0;u<d.length;u++)l=d[u],y=l._input,c(y,l,f,x)}B.exports={supplyDefaults:b,crossTraceDefaults:g}},{"../../components/color":367,"../../constants/delta.js":485,"../../lib":515,"../bar/defaults":661,"../scatter/period_defaults":956,"../scatter/xy_defaults":963,"./attributes":1115}],1120:[function(t,B,V){B.exports=function(c,A){return c.x="xVal"in A?A.xVal:A.x,c.y="yVal"in A?A.yVal:A.y,"initial"in A&&(c.initial=A.initial),"delta"in A&&(c.delta=A.delta),"final"in A&&(c.final=A.final),A.xa&&(c.xaxis=A.xa),A.ya&&(c.yaxis=A.ya),c}},{}],1121:[function(t,B,V){var m=t("../../plots/cartesian/axes").hoverLabelText,c=t("../../components/color").opacity,A=t("../bar/hover").hoverOnBars,T=t("../../constants/delta.js"),e={increasing:T.INCREASING.SYMBOL,decreasing:T.DECREASING.SYMBOL};B.exports=function(n,r,v,s,o){var b=A(n,r,v,s,o);if(!b)return;var g=b.cd,d=g[0].trace,f=d.orientation==="h",y=f?"x":"y",l=f?n.xa:n.ya;function x(P){return m(l,P,d[y+"hoverformat"])}var u=b.index,M=g[u],_=M.isSum?M.b+M.s:M.rawS;if(!M.isSum){b.initial=M.b+M.s-_,b.delta=_,b.final=b.initial+b.delta;var p=x(Math.abs(b.delta));b.deltaLabel=_<0?"("+p+")":p,b.finalLabel=x(b.final),b.initialLabel=x(b.initial)}var w=M.hi||d.hoverinfo,h=[];if(w&&w!=="none"&&w!=="skip"){var L=w==="all",S=w.split("+"),E=function(P){return L||S.indexOf(P)!==-1};M.isSum||(E("final")&&(f?!E("x"):!E("y"))&&h.push(b.finalLabel),E("delta")&&(_<0?h.push(b.deltaLabel+" "+e.decreasing):h.push(b.deltaLabel+" "+e.increasing)),E("initial")&&h.push("Initial: "+b.initialLabel))}return h.length&&(b.extraText=h.join("<br>")),b.color=a(d,M),[b]};function a(i,n){var r=i[n.dir].marker,v=r.color,s=r.line.color,o=r.line.width;if(c(v))return v;if(c(s)&&o)return s}},{"../../components/color":367,"../../constants/delta.js":485,"../../plots/cartesian/axes":566,"../bar/hover":664}],1122:[function(t,B,V){B.exports={attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyDefaults:t("./defaults").supplyDefaults,crossTraceDefaults:t("./defaults").crossTraceDefaults,supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc"),crossTraceCalc:t("./cross_trace_calc"),plot:t("./plot"),style:t("./style").style,hoverPoints:t("./hover"),eventData:t("./event_data"),selectPoints:t("../bar/select"),moduleType:"trace",name:"waterfall",basePlotModule:t("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"../bar/select":669,"./attributes":1115,"./calc":1116,"./cross_trace_calc":1118,"./defaults":1119,"./event_data":1120,"./hover":1121,"./layout_attributes":1123,"./layout_defaults":1124,"./plot":1125,"./style":1126}],1123:[function(t,B,V){B.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],1124:[function(t,B,V){var m=t("../../lib"),c=t("./layout_attributes");B.exports=function(A,T,e){var a=!1;function i(v,s){return m.coerce(A,T,c,v,s)}for(var n=0;n<e.length;n++){var r=e[n];if(r.visible&&r.type==="waterfall"){a=!0;break}}a&&(i("waterfallmode"),i("waterfallgap",.2),i("waterfallgroupgap"))}},{"../../lib":515,"./layout_attributes":1123}],1125:[function(t,B,V){var m=t("@plotly/d3"),c=t("../../lib"),A=t("../../components/drawing"),T=t("../../constants/numerical").BADNUM,e=t("../bar/plot"),a=t("../bar/uniform_text").clearMinTextSize;B.exports=function(v,s,o,b){var g=v._fullLayout;a("waterfall",g),e.plot(v,s,o,b,{mode:g.waterfallmode,norm:g.waterfallmode,gap:g.waterfallgap,groupgap:g.waterfallgroupgap}),i(v,s,o,b)};function i(r,v,s,o){var b=v.xaxis,g=v.yaxis;c.makeTraceGroups(o,s,"trace bars").each(function(d){var f=m.select(this),y=d[0].trace,l=c.ensureSingle(f,"g","lines");if(!y.connector||!y.connector.visible){l.remove();return}var x=y.orientation==="h",u=y.connector.mode,M=l.selectAll("g.line").data(c.identity);M.enter().append("g").classed("line",!0),M.exit().remove();var _=M.size();M.each(function(p,w){if(!(w!==_-1&&!p.cNext)){var h=n(p,b,g,x),L=h[0],S=h[1],E="";L[0]!==T&&S[0]!==T&&L[1]!==T&&S[1]!==T&&(u==="spanning"&&!p.isSum&&w>0&&(x?E+="M"+L[0]+","+S[1]+"V"+S[0]:E+="M"+L[1]+","+S[0]+"H"+L[0]),u!=="between"&&(p.isSum||w<_-1)&&(x?E+="M"+L[1]+","+S[0]+"V"+S[1]:E+="M"+L[0]+","+S[1]+"H"+L[1]),L[2]!==T&&S[2]!==T&&(x?E+="M"+L[1]+","+S[1]+"V"+S[2]:E+="M"+L[1]+","+S[1]+"H"+L[2])),E===""&&(E="M0,0Z"),c.ensureSingle(m.select(this),"path").attr("d",E).call(A.setClipUrl,v.layerClipId,r)}})})}function n(r,v,s,o){var b=[],g=[],d=o?v:s,f=o?s:v;return b[0]=d.c2p(r.s0,!0),g[0]=f.c2p(r.p0,!0),b[1]=d.c2p(r.s1,!0),g[1]=f.c2p(r.p1,!0),b[2]=d.c2p(r.nextS0,!0),g[2]=f.c2p(r.nextP0,!0),o?[b,g]:[g,b]}},{"../../components/drawing":389,"../../constants/numerical":491,"../../lib":515,"../bar/plot":668,"../bar/uniform_text":673,"@plotly/d3":58}],1126:[function(t,B,V){var m=t("@plotly/d3"),c=t("../../components/drawing"),A=t("../../components/color"),T=t("../../constants/interactions").DESELECTDIM,e=t("../bar/style"),a=t("../bar/uniform_text").resizeText,i=e.styleTextPoints;function n(r,v,s){var o=s||m.select(r).selectAll("g.waterfalllayer").selectAll("g.trace");a(r,o,"waterfall"),o.style("opacity",function(b){return b[0].trace.opacity}),o.each(function(b){var g=m.select(this),d=b[0].trace;g.selectAll(".point > path").each(function(f){if(!f.isBlank){var y=d[f.dir].marker;m.select(this).call(A.fill,y.color).call(A.stroke,y.line.color).call(c.dashLine,y.line.dash,y.line.width).style("opacity",d.selectedpoints&&!f.selected?T:1)}}),i(g,d,r),g.selectAll(".lines").each(function(){var f=d.connector.line;c.lineGroupStyle(m.select(this).selectAll("path"),f.width,f.color,f.dash)})})}B.exports={style:n}},{"../../components/color":367,"../../components/drawing":389,"../../constants/interactions":490,"../bar/style":671,"../bar/uniform_text":673,"@plotly/d3":58}],1127:[function(t,B,V){var m=t("../plots/cartesian/axes"),c=t("../lib"),A=t("../plot_api/plot_schema"),T=t("./helpers").pointsAccessorFunction,e=t("../constants/numerical").BADNUM;V.moduleType="transform",V.name="aggregate";var a=V.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},i=a.aggregations;V.supplyDefaults=function(b,g){var d={},f;function y(P,F){return c.coerce(b,d,a,P,F)}var l=y("enabled");if(!l)return d;var x=A.findArrayAttributes(g),u={};for(f=0;f<x.length;f++)u[x[f]]=1;var M=y("groups");if(!Array.isArray(M)){if(!u[M])return d.enabled=!1,d;u[M]=0}var _=b.aggregations||[],p=d.aggregations=new Array(_.length),w;function h(P,F){return c.coerce(_[f],w,i,P,F)}for(f=0;f<_.length;f++){w={_index:f};var L=h("target"),S=h("func"),E=h("enabled");E&&L&&(u[L]||S==="count"&&u[L]===void 0)?(S==="stddev"&&h("funcmode"),u[L]=0,p[f]=w):p[f]={enabled:!1,_index:f}}for(f=0;f<x.length;f++)u[x[f]]&&p.push({target:x[f],func:i.func.dflt,enabled:!0,_index:-1});return d},V.calcTransform=function(b,g,d){if(!!d.enabled){var f=d.groups,y=c.getTargetArray(g,{target:f});if(!!y){var l,x,u,M,_={},p={},w=[],h=T(g.transforms,d),L=y.length;for(g._length&&(L=Math.min(L,g._length)),l=0;l<L;l++)x=y[l],u=_[x],u===void 0?(_[x]=w.length,M=[l],w.push(M),p[_[x]]=h(l)):(w[u].push(l),p[_[x]]=(p[_[x]]||[]).concat(h(l)));d._indexToPoints=p;var S=d.aggregations;for(l=0;l<S.length;l++)n(b,g,w,S[l]);typeof f=="string"&&n(b,g,w,{target:f,func:"first",enabled:!0}),g._length=w.length}}};function n(b,g,d,f){if(!!f.enabled){for(var y=f.target,l=c.nestedProperty(g,y),x=l.get(),u=m.getDataConversions(b,g,y,x),M=r(f,u),_=new Array(d.length),p=0;p<d.length;p++)_[p]=M(x,d[p]);l.set(_),f.func==="count"&&c.pushUnique(g._arrayAttrs,y)}}function r(b,g){var d=b.func,f=g.d2c,y=g.c2d;switch(d){case"count":return v;case"first":return s;case"last":return o;case"sum":return function(l,x){for(var u=0,M=0;M<x.length;M++){var _=f(l[x[M]]);_!==e&&(u+=_)}return y(u)};case"avg":return function(l,x){for(var u=0,M=0,_=0;_<x.length;_++){var p=f(l[x[_]]);p!==e&&(u+=p,M++)}return M?y(u/M):e};case"min":return function(l,x){for(var u=1/0,M=0;M<x.length;M++){var _=f(l[x[M]]);_!==e&&(u=Math.min(u,_))}return u===1/0?e:y(u)};case"max":return function(l,x){for(var u=-1/0,M=0;M<x.length;M++){var _=f(l[x[M]]);_!==e&&(u=Math.max(u,_))}return u===-1/0?e:y(u)};case"range":return function(l,x){for(var u=1/0,M=-1/0,_=0;_<x.length;_++){var p=f(l[x[_]]);p!==e&&(u=Math.min(u,p),M=Math.max(M,p))}return M===-1/0||u===1/0?e:y(M-u)};case"change":return function(l,x){var u=f(l[x[0]]),M=f(l[x[x.length-1]]);return u===e||M===e?e:y(M-u)};case"median":return function(l,x){for(var u=[],M=0;M<x.length;M++){var _=f(l[x[M]]);_!==e&&u.push(_)}if(!u.length)return e;u.sort(c.sorterAsc);var p=(u.length-1)/2;return y((u[Math.floor(p)]+u[Math.ceil(p)])/2)};case"mode":return function(l,x){for(var u={},M=0,_=e,p=0;p<x.length;p++){var w=f(l[x[p]]);if(w!==e){var h=u[w]=(u[w]||0)+1;h>M&&(M=h,_=w)}}return M?y(_):e};case"rms":return function(l,x){for(var u=0,M=0,_=0;_<x.length;_++){var p=f(l[x[_]]);p!==e&&(u+=p*p,M++)}return M?y(Math.sqrt(u/M)):e};case"stddev":return function(l,x){var u=0,M=0,_=1,p=e,w;for(w=0;w<x.length&&p===e;w++)p=f(l[x[w]]);if(p===e)return e;for(;w<x.length;w++){var h=f(l[x[w]]);if(h!==e){var L=h-p;u+=L,M+=L*L,_++}}var S=b.funcmode==="sample"?_-1:_;return S?Math.sqrt((M-u*u/_)/S):0}}}function v(b,g){return g.length}function s(b,g){return b[g[0]]}function o(b,g){return b[g[g.length-1]]}},{"../constants/numerical":491,"../lib":515,"../plot_api/plot_schema":554,"../plots/cartesian/axes":566,"./helpers":1130}],1128:[function(t,B,V){var m=t("../lib"),c=t("../registry"),A=t("../plots/cartesian/axes"),T=t("./helpers").pointsAccessorFunction,e=t("../constants/filter_ops"),a=e.COMPARISON_OPS,i=e.INTERVAL_OPS,n=e.SET_OPS;V.moduleType="transform",V.name="filter",V.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(a).concat(i).concat(n),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},V.supplyDefaults=function(v){var s={};function o(f,y){return m.coerce(v,s,V.attributes,f,y)}var b=o("enabled");if(b){var g=o("target");if(m.isArrayOrTypedArray(g)&&g.length===0)return s.enabled=!1,s;o("preservegaps"),o("operation"),o("value");var d=c.getComponentMethod("calendars","handleDefaults");d(v,s,"valuecalendar",null),d(v,s,"targetcalendar",null)}return s},V.calcTransform=function(v,s,o){if(!o.enabled)return;var b=m.getTargetArray(s,o);if(!b)return;var g=o.target,d=b.length;s._length&&(d=Math.min(d,s._length));var f=o.targetcalendar,y=s._arrayAttrs,l=o.preservegaps;if(typeof g=="string"){var x=m.nestedProperty(s,g+"calendar").get();x&&(f=x)}var u=A.getDataToCoordFunc(v,s,g,b),M=r(o,u,f),_={},p={},w=0;function h(I,D){for(var R=0;R<y.length;R++){var N=m.nestedProperty(s,y[R]);I(N,D)}}var L,S;l?(L=function(I){_[I.astr]=m.extendDeep([],I.get()),I.set(new Array(d))},S=function(I,D){var R=_[I.astr][D];I.get()[D]=R}):(L=function(I){_[I.astr]=m.extendDeep([],I.get()),I.set([])},S=function(I,D){var R=_[I.astr][D];I.get().push(R)}),h(L);for(var E=T(s.transforms,o),P=0;P<d;P++){var F=M(b[P]);F?(h(S,P),p[w++]=E(P)):l&&w++}o._indexToPoints=p,s._length=w};function r(v,s,o){var b=v.operation,g=v.value,d=Array.isArray(g);function f(u){return u.indexOf(b)!==-1}var y=function(u){return s(u,0,v.valuecalendar)},l=function(u){return s(u,0,o)},x;switch(f(a)?x=y(d?g[0]:g):f(i)?x=d?[y(g[0]),y(g[1])]:[y(g),y(g)]:f(n)&&(x=d?g.map(y):[y(g)]),b){case"=":return function(u){return l(u)===x};case"!=":return function(u){return l(u)!==x};case"<":return function(u){return l(u)<x};case"<=":return function(u){return l(u)<=x};case">":return function(u){return l(u)>x};case">=":return function(u){return l(u)>=x};case"[]":return function(u){var M=l(u);return M>=x[0]&&M<=x[1]};case"()":return function(u){var M=l(u);return M>x[0]&&M<x[1]};case"[)":return function(u){var M=l(u);return M>=x[0]&&M<x[1]};case"(]":return function(u){var M=l(u);return M>x[0]&&M<=x[1]};case"][":return function(u){var M=l(u);return M<=x[0]||M>=x[1]};case")(":return function(u){var M=l(u);return M<x[0]||M>x[1]};case"](":return function(u){var M=l(u);return M<=x[0]||M>x[1]};case")[":return function(u){var M=l(u);return M<x[0]||M>=x[1]};case"{}":return function(u){return x.indexOf(l(u))!==-1};case"}{":return function(u){return x.indexOf(l(u))===-1}}}},{"../constants/filter_ops":487,"../lib":515,"../plots/cartesian/axes":566,"../registry":647,"./helpers":1130}],1129:[function(t,B,V){var m=t("../lib"),c=t("../plot_api/plot_schema"),A=t("../plots/plots"),T=t("./helpers").pointsAccessorFunction;V.moduleType="transform",V.name="groupby",V.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},V.supplyDefaults=function(a,i,n){var r,v={};function s(y,l){return m.coerce(a,v,V.attributes,y,l)}var o=s("enabled");if(!o)return v;s("groups"),s("nameformat",n._dataLength>1?"%{group} (%{trace})":"%{group}");var b=a.styles,g=v.styles=[];if(b)for(r=0;r<b.length;r++){var d=g[r]={};m.coerce(b[r],g[r],V.attributes.styles,"target");var f=m.coerce(b[r],g[r],V.attributes.styles,"value");m.isPlainObject(f)?d.value=m.extendDeep({},f):f&&delete d.value}return v},V.transform=function(a,i){var n,r,v,s=[];for(r=0;r<a.length;r++)for(n=e(a[r],i),v=0;v<n.length;v++)s.push(n[v]);return s};function e(a,i){var n,r,v,s,o,b,g,d,f,y,l=i.transform,x=i.transformIndex,u=a.transforms[x].groups,M=T(a.transforms,l);if(!m.isArrayOrTypedArray(u)||u.length===0)return[a];var _=m.filterUnique(u),p=new Array(_.length),w=u.length,h=c.findArrayAttributes(a),L=l.styles||[],S={};for(n=0;n<L.length;n++)S[L[n].target]=L[n].value;l.styles&&(y=m.keyedContainer(l,"styles","target","value.name"));var E={},P={};for(n=0;n<_.length;n++){b=_[n],E[b]=n,P[b]=0,g=p[n]=m.extendDeepNoArrays({},a),g._group=b,g.transforms[x]._indexToPoints={};var F=null;for(y&&(F=y.get(b)),F||F===""?g.name=F:g.name=m.templateString(l.nameformat,{trace:a.name,group:b}),d=g.transforms,g.transforms=[],r=0;r<d.length;r++)g.transforms[r]=m.extendDeepNoArrays({},d[r]);for(r=0;r<h.length;r++)m.nestedProperty(g,h[r]).set([])}for(v=0;v<h.length;v++){for(s=h[v],r=0,f=[];r<_.length;r++)f[r]=m.nestedProperty(p[r],s).get();for(o=m.nestedProperty(a,s).get(),r=0;r<w;r++)f[E[u[r]]].push(o[r])}for(r=0;r<w;r++){g=p[E[u[r]]];var I=g.transforms[x]._indexToPoints;I[P[u[r]]]=M(r),P[u[r]]++}for(n=0;n<_.length;n++)b=_[n],g=p[n],A.clearExpandedTraceDefaultColors(g),g=m.extendDeepNoArrays(g,S[b]||{});return p}},{"../lib":515,"../plot_api/plot_schema":554,"../plots/plots":628,"./helpers":1130}],1130:[function(t,B,V){V.pointsAccessorFunction=function(m,c){for(var A,T,e=0;e<m.length&&(A=m[e],A!==c);e++)!A._indexToPoints||A.enabled===!1||(T=A._indexToPoints);var a=T?function(i){return T[i]}:function(i){return[i]};return a}},{}],1131:[function(t,B,V){var m=t("../lib"),c=t("../plots/cartesian/axes"),A=t("./helpers").pointsAccessorFunction,T=t("../constants/numerical").BADNUM;V.moduleType="transform",V.name="sort",V.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},V.supplyDefaults=function(i){var n={};function r(s,o){return m.coerce(i,n,V.attributes,s,o)}var v=r("enabled");return v&&(r("target"),r("order")),n},V.calcTransform=function(i,n,r){if(!!r.enabled){var v=m.getTargetArray(n,r);if(!!v){var s=r.target,o=v.length;n._length&&(o=Math.min(o,n._length));var b=n._arrayAttrs,g=c.getDataToCoordFunc(i,n,s,v),d=e(r,v,g,o),f=A(n.transforms,r),y={},l,x;for(l=0;l<b.length;l++){var u=m.nestedProperty(n,b[l]),M=u.get(),_=new Array(o);for(x=0;x<o;x++)_[x]=M[d[x]];u.set(_)}for(x=0;x<o;x++)y[x]=f(d[x]);r._indexToPoints=y,n._length=o}}};function e(i,n,r,v){var s=new Array(v),o=new Array(v),b;for(b=0;b<v;b++)s[b]={v:n[b],i:b};for(s.sort(a(i,r)),b=0;b<v;b++)o[b]=s[b].i;return o}function a(i,n){switch(i.order){case"ascending":return function(r,v){var s=n(r.v),o=n(v.v);return s===T?1:o===T?-1:s-o};case"descending":return function(r,v){var s=n(r.v),o=n(v.v);return s===T?1:o===T?-1:o-s}}}},{"../constants/numerical":491,"../lib":515,"../plots/cartesian/axes":566,"./helpers":1130}],1132:[function(t,B,V){V.version="2.16.4"},{}],1133:[function(t,B,V){(function(m){(function(){(function(c){if(typeof V=="object"&&typeof B<"u")B.exports=c();else{var A;typeof window<"u"?A=window:typeof m<"u"?A=m:typeof self<"u"?A=self:A=this,A.stackgl=c()}})(function(){return function(){function c(A,T,e){function a(r,v){if(!T[r]){if(!A[r]){var s=typeof t=="function"&&t;if(!v&&s)return s(r,!0);if(i)return i(r,!0);var o=new Error("Cannot find module '"+r+"'");throw o.code="MODULE_NOT_FOUND",o}var b=T[r]={exports:{}};A[r][0].call(b.exports,function(g){var d=A[r][1][g];return a(d||g)},b,b.exports,c,A,T,e)}return T[r].exports}for(var i=typeof t=="function"&&t,n=0;n<e.length;n++)a(e[n]);return a}return c}()({1:[function(c,A,T){T.byteLength=o,T.toByteArray=g,T.fromByteArray=y;for(var e=[],a=[],i=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,v=n.length;r<v;++r)e[r]=n[r],a[n.charCodeAt(r)]=r;a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63;function s(l){var x=l.length;if(x%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var u=l.indexOf("=");u===-1&&(u=x);var M=u===x?0:4-u%4;return[u,M]}function o(l){var x=s(l),u=x[0],M=x[1];return(u+M)*3/4-M}function b(l,x,u){return(x+u)*3/4-u}function g(l){var x,u=s(l),M=u[0],_=u[1],p=new i(b(l,M,_)),w=0,h=_>0?M-4:M,L;for(L=0;L<h;L+=4)x=a[l.charCodeAt(L)]<<18|a[l.charCodeAt(L+1)]<<12|a[l.charCodeAt(L+2)]<<6|a[l.charCodeAt(L+3)],p[w++]=x>>16&255,p[w++]=x>>8&255,p[w++]=x&255;return _===2&&(x=a[l.charCodeAt(L)]<<2|a[l.charCodeAt(L+1)]>>4,p[w++]=x&255),_===1&&(x=a[l.charCodeAt(L)]<<10|a[l.charCodeAt(L+1)]<<4|a[l.charCodeAt(L+2)]>>2,p[w++]=x>>8&255,p[w++]=x&255),p}function d(l){return e[l>>18&63]+e[l>>12&63]+e[l>>6&63]+e[l&63]}function f(l,x,u){for(var M,_=[],p=x;p<u;p+=3)M=(l[p]<<16&16711680)+(l[p+1]<<8&65280)+(l[p+2]&255),_.push(d(M));return _.join("")}function y(l){for(var x,u=l.length,M=u%3,_=[],p=16383,w=0,h=u-M;w<h;w+=p)_.push(f(l,w,w+p>h?h:w+p));return M===1?(x=l[u-1],_.push(e[x>>2]+e[x<<4&63]+"==")):M===2&&(x=(l[u-2]<<8)+l[u-1],_.push(e[x>>10]+e[x>>4&63]+e[x<<2&63]+"=")),_.join("")}},{}],2:[function(c,A,T){},{}],3:[function(c,A,T){(function(e){(function(){var a=c("base64-js"),i=c("ieee754");T.Buffer=s,T.SlowBuffer=M,T.INSPECT_MAX_BYTES=50;var n=2147483647;T.kMaxLength=n,s.TYPED_ARRAY_SUPPORT=r(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function r(){try{var ue=new Uint8Array(1);return ue.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},ue.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(!!s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(!!s.isBuffer(this))return this.byteOffset}});function v(ue){if(ue>n)throw new RangeError('The value "'+ue+'" is invalid for option "size"');var ye=new Uint8Array(ue);return ye.__proto__=s.prototype,ye}function s(ue,ye,xe){if(typeof ue=="number"){if(typeof ye=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(ue)}return o(ue,ye,xe)}typeof Symbol<"u"&&Symbol.species!=null&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),s.poolSize=8192;function o(ue,ye,xe){if(typeof ue=="string")return f(ue,ye);if(ArrayBuffer.isView(ue))return y(ue);if(ue==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ue);if(se(ue,ArrayBuffer)||ue&&se(ue.buffer,ArrayBuffer))return l(ue,ye,xe);if(typeof ue=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var me=ue.valueOf&&ue.valueOf();if(me!=null&&me!==ue)return s.from(me,ye,xe);var be=x(ue);if(be)return be;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ue[Symbol.toPrimitive]=="function")return s.from(ue[Symbol.toPrimitive]("string"),ye,xe);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ue)}s.from=function(ue,ye,xe){return o(ue,ye,xe)},s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array;function b(ue){if(typeof ue!="number")throw new TypeError('"size" argument must be of type number');if(ue<0)throw new RangeError('The value "'+ue+'" is invalid for option "size"')}function g(ue,ye,xe){return b(ue),ue<=0?v(ue):ye!==void 0?typeof xe=="string"?v(ue).fill(ye,xe):v(ue).fill(ye):v(ue)}s.alloc=function(ue,ye,xe){return g(ue,ye,xe)};function d(ue){return b(ue),v(ue<0?0:u(ue)|0)}s.allocUnsafe=function(ue){return d(ue)},s.allocUnsafeSlow=function(ue){return d(ue)};function f(ue,ye){if((typeof ye!="string"||ye==="")&&(ye="utf8"),!s.isEncoding(ye))throw new TypeError("Unknown encoding: "+ye);var xe=_(ue,ye)|0,me=v(xe),be=me.write(ue,ye);return be!==xe&&(me=me.slice(0,be)),me}function y(ue){for(var ye=ue.length<0?0:u(ue.length)|0,xe=v(ye),me=0;me<ye;me+=1)xe[me]=ue[me]&255;return xe}function l(ue,ye,xe){if(ye<0||ue.byteLength<ye)throw new RangeError('"offset" is outside of buffer bounds');if(ue.byteLength<ye+(xe||0))throw new RangeError('"length" is outside of buffer bounds');var me;return ye===void 0&&xe===void 0?me=new Uint8Array(ue):xe===void 0?me=new Uint8Array(ue,ye):me=new Uint8Array(ue,ye,xe),me.__proto__=s.prototype,me}function x(ue){if(s.isBuffer(ue)){var ye=u(ue.length)|0,xe=v(ye);return xe.length===0||ue.copy(xe,0,0,ye),xe}if(ue.length!==void 0)return typeof ue.length!="number"||_e(ue.length)?v(0):y(ue);if(ue.type==="Buffer"&&Array.isArray(ue.data))return y(ue.data)}function u(ue){if(ue>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return ue|0}function M(ue){return+ue!=ue&&(ue=0),s.alloc(+ue)}s.isBuffer=function(ye){return ye!=null&&ye._isBuffer===!0&&ye!==s.prototype},s.compare=function(ye,xe){if(se(ye,Uint8Array)&&(ye=s.from(ye,ye.offset,ye.byteLength)),se(xe,Uint8Array)&&(xe=s.from(xe,xe.offset,xe.byteLength)),!s.isBuffer(ye)||!s.isBuffer(xe))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(ye===xe)return 0;for(var me=ye.length,be=xe.length,ke=0,De=Math.min(me,be);ke<De;++ke)if(ye[ke]!==xe[ke]){me=ye[ke],be=xe[ke];break}return me<be?-1:be<me?1:0},s.isEncoding=function(ye){switch(String(ye).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(ye,xe){if(!Array.isArray(ye))throw new TypeError('"list" argument must be an Array of Buffers');if(ye.length===0)return s.alloc(0);var me;if(xe===void 0)for(xe=0,me=0;me<ye.length;++me)xe+=ye[me].length;var be=s.allocUnsafe(xe),ke=0;for(me=0;me<ye.length;++me){var De=ye[me];if(se(De,Uint8Array)&&(De=s.from(De)),!s.isBuffer(De))throw new TypeError('"list" argument must be an Array of Buffers');De.copy(be,ke),ke+=De.length}return be};function _(ue,ye){if(s.isBuffer(ue))return ue.length;if(ArrayBuffer.isView(ue)||se(ue,ArrayBuffer))return ue.byteLength;if(typeof ue!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ue);var xe=ue.length,me=arguments.length>2&&arguments[2]===!0;if(!me&&xe===0)return 0;for(var be=!1;;)switch(ye){case"ascii":case"latin1":case"binary":return xe;case"utf8":case"utf-8":return j(ue).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return xe*2;case"hex":return xe>>>1;case"base64":return oe(ue).length;default:if(be)return me?-1:j(ue).length;ye=(""+ye).toLowerCase(),be=!0}}s.byteLength=_;function p(ue,ye,xe){var me=!1;if((ye===void 0||ye<0)&&(ye=0),ye>this.length||((xe===void 0||xe>this.length)&&(xe=this.length),xe<=0)||(xe>>>=0,ye>>>=0,xe<=ye))return"";for(ue||(ue="utf8");;)switch(ue){case"hex":return Z(this,ye,xe);case"utf8":case"utf-8":return N(this,ye,xe);case"ascii":return Y(this,ye,xe);case"latin1":case"binary":return ee(this,ye,xe);case"base64":return R(this,ye,xe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return X(this,ye,xe);default:if(me)throw new TypeError("Unknown encoding: "+ue);ue=(ue+"").toLowerCase(),me=!0}}s.prototype._isBuffer=!0;function w(ue,ye,xe){var me=ue[ye];ue[ye]=ue[xe],ue[xe]=me}s.prototype.swap16=function(){var ye=this.length;if(ye%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var xe=0;xe<ye;xe+=2)w(this,xe,xe+1);return this},s.prototype.swap32=function(){var ye=this.length;if(ye%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var xe=0;xe<ye;xe+=4)w(this,xe,xe+3),w(this,xe+1,xe+2);return this},s.prototype.swap64=function(){var ye=this.length;if(ye%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var xe=0;xe<ye;xe+=8)w(this,xe,xe+7),w(this,xe+1,xe+6),w(this,xe+2,xe+5),w(this,xe+3,xe+4);return this},s.prototype.toString=function(){var ye=this.length;return ye===0?"":arguments.length===0?N(this,0,ye):p.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(ye){if(!s.isBuffer(ye))throw new TypeError("Argument must be a Buffer");return this===ye?!0:s.compare(this,ye)===0},s.prototype.inspect=function(){var ye="",xe=T.INSPECT_MAX_BYTES;return ye=this.toString("hex",0,xe).replace(/(.{2})/g,"$1 ").trim(),this.length>xe&&(ye+=" ... "),"<Buffer "+ye+">"},s.prototype.compare=function(ye,xe,me,be,ke){if(se(ye,Uint8Array)&&(ye=s.from(ye,ye.offset,ye.byteLength)),!s.isBuffer(ye))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof ye);if(xe===void 0&&(xe=0),me===void 0&&(me=ye?ye.length:0),be===void 0&&(be=0),ke===void 0&&(ke=this.length),xe<0||me>ye.length||be<0||ke>this.length)throw new RangeError("out of range index");if(be>=ke&&xe>=me)return 0;if(be>=ke)return-1;if(xe>=me)return 1;if(xe>>>=0,me>>>=0,be>>>=0,ke>>>=0,this===ye)return 0;for(var De=ke-be,Ve=me-xe,Ae=Math.min(De,Ve),Le=this.slice(be,ke),je=ye.slice(xe,me),Ye=0;Ye<Ae;++Ye)if(Le[Ye]!==je[Ye]){De=Le[Ye],Ve=je[Ye];break}return De<Ve?-1:Ve<De?1:0};function h(ue,ye,xe,me,be){if(ue.length===0)return-1;if(typeof xe=="string"?(me=xe,xe=0):xe>2147483647?xe=2147483647:xe<-2147483648&&(xe=-2147483648),xe=+xe,_e(xe)&&(xe=be?0:ue.length-1),xe<0&&(xe=ue.length+xe),xe>=ue.length){if(be)return-1;xe=ue.length-1}else if(xe<0)if(be)xe=0;else return-1;if(typeof ye=="string"&&(ye=s.from(ye,me)),s.isBuffer(ye))return ye.length===0?-1:L(ue,ye,xe,me,be);if(typeof ye=="number")return ye=ye&255,typeof Uint8Array.prototype.indexOf=="function"?be?Uint8Array.prototype.indexOf.call(ue,ye,xe):Uint8Array.prototype.lastIndexOf.call(ue,ye,xe):L(ue,[ye],xe,me,be);throw new TypeError("val must be string, number or Buffer")}function L(ue,ye,xe,me,be){var ke=1,De=ue.length,Ve=ye.length;if(me!==void 0&&(me=String(me).toLowerCase(),me==="ucs2"||me==="ucs-2"||me==="utf16le"||me==="utf-16le")){if(ue.length<2||ye.length<2)return-1;ke=2,De/=2,Ve/=2,xe/=2}function Ae(Ie,We){return ke===1?Ie[We]:Ie.readUInt16BE(We*ke)}var Le;if(be){var je=-1;for(Le=xe;Le<De;Le++)if(Ae(ue,Le)===Ae(ye,je===-1?0:Le-je)){if(je===-1&&(je=Le),Le-je+1===Ve)return je*ke}else je!==-1&&(Le-=Le-je),je=-1}else for(xe+Ve>De&&(xe=De-Ve),Le=xe;Le>=0;Le--){for(var Ye=!0,ze=0;ze<Ve;ze++)if(Ae(ue,Le+ze)!==Ae(ye,ze)){Ye=!1;break}if(Ye)return Le}return-1}s.prototype.includes=function(ye,xe,me){return this.indexOf(ye,xe,me)!==-1},s.prototype.indexOf=function(ye,xe,me){return h(this,ye,xe,me,!0)},s.prototype.lastIndexOf=function(ye,xe,me){return h(this,ye,xe,me,!1)};function S(ue,ye,xe,me){xe=Number(xe)||0;var be=ue.length-xe;me?(me=Number(me),me>be&&(me=be)):me=be;var ke=ye.length;me>ke/2&&(me=ke/2);for(var De=0;De<me;++De){var Ve=parseInt(ye.substr(De*2,2),16);if(_e(Ve))return De;ue[xe+De]=Ve}return De}function E(ue,ye,xe,me){return ae(j(ye,ue.length-xe),ue,xe,me)}function P(ue,ye,xe,me){return ae($(ye),ue,xe,me)}function F(ue,ye,xe,me){return P(ue,ye,xe,me)}function I(ue,ye,xe,me){return ae(oe(ye),ue,xe,me)}function D(ue,ye,xe,me){return ae(ie(ye,ue.length-xe),ue,xe,me)}s.prototype.write=function(ye,xe,me,be){if(xe===void 0)be="utf8",me=this.length,xe=0;else if(me===void 0&&typeof xe=="string")be=xe,me=this.length,xe=0;else if(isFinite(xe))xe=xe>>>0,isFinite(me)?(me=me>>>0,be===void 0&&(be="utf8")):(be=me,me=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var ke=this.length-xe;if((me===void 0||me>ke)&&(me=ke),ye.length>0&&(me<0||xe<0)||xe>this.length)throw new RangeError("Attempt to write outside buffer bounds");be||(be="utf8");for(var De=!1;;)switch(be){case"hex":return S(this,ye,xe,me);case"utf8":case"utf-8":return E(this,ye,xe,me);case"ascii":return P(this,ye,xe,me);case"latin1":case"binary":return F(this,ye,xe,me);case"base64":return I(this,ye,xe,me);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,ye,xe,me);default:if(De)throw new TypeError("Unknown encoding: "+be);be=(""+be).toLowerCase(),De=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function R(ue,ye,xe){return ye===0&&xe===ue.length?a.fromByteArray(ue):a.fromByteArray(ue.slice(ye,xe))}function N(ue,ye,xe){xe=Math.min(ue.length,xe);for(var me=[],be=ye;be<xe;){var ke=ue[be],De=null,Ve=ke>239?4:ke>223?3:ke>191?2:1;if(be+Ve<=xe){var Ae,Le,je,Ye;switch(Ve){case 1:ke<128&&(De=ke);break;case 2:Ae=ue[be+1],(Ae&192)===128&&(Ye=(ke&31)<<6|Ae&63,Ye>127&&(De=Ye));break;case 3:Ae=ue[be+1],Le=ue[be+2],(Ae&192)===128&&(Le&192)===128&&(Ye=(ke&15)<<12|(Ae&63)<<6|Le&63,Ye>2047&&(Ye<55296||Ye>57343)&&(De=Ye));break;case 4:Ae=ue[be+1],Le=ue[be+2],je=ue[be+3],(Ae&192)===128&&(Le&192)===128&&(je&192)===128&&(Ye=(ke&15)<<18|(Ae&63)<<12|(Le&63)<<6|je&63,Ye>65535&&Ye<1114112&&(De=Ye))}}De===null?(De=65533,Ve=1):De>65535&&(De-=65536,me.push(De>>>10&1023|55296),De=56320|De&1023),me.push(De),be+=Ve}return G(me)}var z=4096;function G(ue){var ye=ue.length;if(ye<=z)return String.fromCharCode.apply(String,ue);for(var xe="",me=0;me<ye;)xe+=String.fromCharCode.apply(String,ue.slice(me,me+=z));return xe}function Y(ue,ye,xe){var me="";xe=Math.min(ue.length,xe);for(var be=ye;be<xe;++be)me+=String.fromCharCode(ue[be]&127);return me}function ee(ue,ye,xe){var me="";xe=Math.min(ue.length,xe);for(var be=ye;be<xe;++be)me+=String.fromCharCode(ue[be]);return me}function Z(ue,ye,xe){var me=ue.length;(!ye||ye<0)&&(ye=0),(!xe||xe<0||xe>me)&&(xe=me);for(var be="",ke=ye;ke<xe;++ke)be+=re(ue[ke]);return be}function X(ue,ye,xe){for(var me=ue.slice(ye,xe),be="",ke=0;ke<me.length;ke+=2)be+=String.fromCharCode(me[ke]+me[ke+1]*256);return be}s.prototype.slice=function(ye,xe){var me=this.length;ye=~~ye,xe=xe===void 0?me:~~xe,ye<0?(ye+=me,ye<0&&(ye=0)):ye>me&&(ye=me),xe<0?(xe+=me,xe<0&&(xe=0)):xe>me&&(xe=me),xe<ye&&(xe=ye);var be=this.subarray(ye,xe);return be.__proto__=s.prototype,be};function ne(ue,ye,xe){if(ue%1!==0||ue<0)throw new RangeError("offset is not uint");if(ue+ye>xe)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUIntLE=function(ye,xe,me){ye=ye>>>0,xe=xe>>>0,me||ne(ye,xe,this.length);for(var be=this[ye],ke=1,De=0;++De<xe&&(ke*=256);)be+=this[ye+De]*ke;return be},s.prototype.readUIntBE=function(ye,xe,me){ye=ye>>>0,xe=xe>>>0,me||ne(ye,xe,this.length);for(var be=this[ye+--xe],ke=1;xe>0&&(ke*=256);)be+=this[ye+--xe]*ke;return be},s.prototype.readUInt8=function(ye,xe){return ye=ye>>>0,xe||ne(ye,1,this.length),this[ye]},s.prototype.readUInt16LE=function(ye,xe){return ye=ye>>>0,xe||ne(ye,2,this.length),this[ye]|this[ye+1]<<8},s.prototype.readUInt16BE=function(ye,xe){return ye=ye>>>0,xe||ne(ye,2,this.length),this[ye]<<8|this[ye+1]},s.prototype.readUInt32LE=function(ye,xe){return ye=ye>>>0,xe||ne(ye,4,this.length),(this[ye]|this[ye+1]<<8|this[ye+2]<<16)+this[ye+3]*16777216},s.prototype.readUInt32BE=function(ye,xe){return ye=ye>>>0,xe||ne(ye,4,this.length),this[ye]*16777216+(this[ye+1]<<16|this[ye+2]<<8|this[ye+3])},s.prototype.readIntLE=function(ye,xe,me){ye=ye>>>0,xe=xe>>>0,me||ne(ye,xe,this.length);for(var be=this[ye],ke=1,De=0;++De<xe&&(ke*=256);)be+=this[ye+De]*ke;return ke*=128,be>=ke&&(be-=Math.pow(2,8*xe)),be},s.prototype.readIntBE=function(ye,xe,me){ye=ye>>>0,xe=xe>>>0,me||ne(ye,xe,this.length);for(var be=xe,ke=1,De=this[ye+--be];be>0&&(ke*=256);)De+=this[ye+--be]*ke;return ke*=128,De>=ke&&(De-=Math.pow(2,8*xe)),De},s.prototype.readInt8=function(ye,xe){return ye=ye>>>0,xe||ne(ye,1,this.length),this[ye]&128?(255-this[ye]+1)*-1:this[ye]},s.prototype.readInt16LE=function(ye,xe){ye=ye>>>0,xe||ne(ye,2,this.length);var me=this[ye]|this[ye+1]<<8;return me&32768?me|4294901760:me},s.prototype.readInt16BE=function(ye,xe){ye=ye>>>0,xe||ne(ye,2,this.length);var me=this[ye+1]|this[ye]<<8;return me&32768?me|4294901760:me},s.prototype.readInt32LE=function(ye,xe){return ye=ye>>>0,xe||ne(ye,4,this.length),this[ye]|this[ye+1]<<8|this[ye+2]<<16|this[ye+3]<<24},s.prototype.readInt32BE=function(ye,xe){return ye=ye>>>0,xe||ne(ye,4,this.length),this[ye]<<24|this[ye+1]<<16|this[ye+2]<<8|this[ye+3]},s.prototype.readFloatLE=function(ye,xe){return ye=ye>>>0,xe||ne(ye,4,this.length),i.read(this,ye,!0,23,4)},s.prototype.readFloatBE=function(ye,xe){return ye=ye>>>0,xe||ne(ye,4,this.length),i.read(this,ye,!1,23,4)},s.prototype.readDoubleLE=function(ye,xe){return ye=ye>>>0,xe||ne(ye,8,this.length),i.read(this,ye,!0,52,8)},s.prototype.readDoubleBE=function(ye,xe){return ye=ye>>>0,xe||ne(ye,8,this.length),i.read(this,ye,!1,52,8)};function ce(ue,ye,xe,me,be,ke){if(!s.isBuffer(ue))throw new TypeError('"buffer" argument must be a Buffer instance');if(ye>be||ye<ke)throw new RangeError('"value" argument is out of bounds');if(xe+me>ue.length)throw new RangeError("Index out of range")}s.prototype.writeUIntLE=function(ye,xe,me,be){if(ye=+ye,xe=xe>>>0,me=me>>>0,!be){var ke=Math.pow(2,8*me)-1;ce(this,ye,xe,me,ke,0)}var De=1,Ve=0;for(this[xe]=ye&255;++Ve<me&&(De*=256);)this[xe+Ve]=ye/De&255;return xe+me},s.prototype.writeUIntBE=function(ye,xe,me,be){if(ye=+ye,xe=xe>>>0,me=me>>>0,!be){var ke=Math.pow(2,8*me)-1;ce(this,ye,xe,me,ke,0)}var De=me-1,Ve=1;for(this[xe+De]=ye&255;--De>=0&&(Ve*=256);)this[xe+De]=ye/Ve&255;return xe+me},s.prototype.writeUInt8=function(ye,xe,me){return ye=+ye,xe=xe>>>0,me||ce(this,ye,xe,1,255,0),this[xe]=ye&255,xe+1},s.prototype.writeUInt16LE=function(ye,xe,me){return ye=+ye,xe=xe>>>0,me||ce(this,ye,xe,2,65535,0),this[xe]=ye&255,this[xe+1]=ye>>>8,xe+2},s.prototype.writeUInt16BE=function(ye,xe,me){return ye=+ye,xe=xe>>>0,me||ce(this,ye,xe,2,65535,0),this[xe]=ye>>>8,this[xe+1]=ye&255,xe+2},s.prototype.writeUInt32LE=function(ye,xe,me){return ye=+ye,xe=xe>>>0,me||ce(this,ye,xe,4,4294967295,0),this[xe+3]=ye>>>24,this[xe+2]=ye>>>16,this[xe+1]=ye>>>8,this[xe]=ye&255,xe+4},s.prototype.writeUInt32BE=function(ye,xe,me){return ye=+ye,xe=xe>>>0,me||ce(this,ye,xe,4,4294967295,0),this[xe]=ye>>>24,this[xe+1]=ye>>>16,this[xe+2]=ye>>>8,this[xe+3]=ye&255,xe+4},s.prototype.writeIntLE=function(ye,xe,me,be){if(ye=+ye,xe=xe>>>0,!be){var ke=Math.pow(2,8*me-1);ce(this,ye,xe,me,ke-1,-ke)}var De=0,Ve=1,Ae=0;for(this[xe]=ye&255;++De<me&&(Ve*=256);)ye<0&&Ae===0&&this[xe+De-1]!==0&&(Ae=1),this[xe+De]=(ye/Ve>>0)-Ae&255;return xe+me},s.prototype.writeIntBE=function(ye,xe,me,be){if(ye=+ye,xe=xe>>>0,!be){var ke=Math.pow(2,8*me-1);ce(this,ye,xe,me,ke-1,-ke)}var De=me-1,Ve=1,Ae=0;for(this[xe+De]=ye&255;--De>=0&&(Ve*=256);)ye<0&&Ae===0&&this[xe+De+1]!==0&&(Ae=1),this[xe+De]=(ye/Ve>>0)-Ae&255;return xe+me},s.prototype.writeInt8=function(ye,xe,me){return ye=+ye,xe=xe>>>0,me||ce(this,ye,xe,1,127,-128),ye<0&&(ye=255+ye+1),this[xe]=ye&255,xe+1},s.prototype.writeInt16LE=function(ye,xe,me){return ye=+ye,xe=xe>>>0,me||ce(this,ye,xe,2,32767,-32768),this[xe]=ye&255,this[xe+1]=ye>>>8,xe+2},s.prototype.writeInt16BE=function(ye,xe,me){return ye=+ye,xe=xe>>>0,me||ce(this,ye,xe,2,32767,-32768),this[xe]=ye>>>8,this[xe+1]=ye&255,xe+2},s.prototype.writeInt32LE=function(ye,xe,me){return ye=+ye,xe=xe>>>0,me||ce(this,ye,xe,4,2147483647,-2147483648),this[xe]=ye&255,this[xe+1]=ye>>>8,this[xe+2]=ye>>>16,this[xe+3]=ye>>>24,xe+4},s.prototype.writeInt32BE=function(ye,xe,me){return ye=+ye,xe=xe>>>0,me||ce(this,ye,xe,4,2147483647,-2147483648),ye<0&&(ye=4294967295+ye+1),this[xe]=ye>>>24,this[xe+1]=ye>>>16,this[xe+2]=ye>>>8,this[xe+3]=ye&255,xe+4};function Q(ue,ye,xe,me,be,ke){if(xe+me>ue.length)throw new RangeError("Index out of range");if(xe<0)throw new RangeError("Index out of range")}function K(ue,ye,xe,me,be){return ye=+ye,xe=xe>>>0,be||Q(ue,ye,xe,4),i.write(ue,ye,xe,me,23,4),xe+4}s.prototype.writeFloatLE=function(ye,xe,me){return K(this,ye,xe,!0,me)},s.prototype.writeFloatBE=function(ye,xe,me){return K(this,ye,xe,!1,me)};function U(ue,ye,xe,me,be){return ye=+ye,xe=xe>>>0,be||Q(ue,ye,xe,8),i.write(ue,ye,xe,me,52,8),xe+8}s.prototype.writeDoubleLE=function(ye,xe,me){return U(this,ye,xe,!0,me)},s.prototype.writeDoubleBE=function(ye,xe,me){return U(this,ye,xe,!1,me)},s.prototype.copy=function(ye,xe,me,be){if(!s.isBuffer(ye))throw new TypeError("argument should be a Buffer");if(me||(me=0),!be&&be!==0&&(be=this.length),xe>=ye.length&&(xe=ye.length),xe||(xe=0),be>0&&be<me&&(be=me),be===me||ye.length===0||this.length===0)return 0;if(xe<0)throw new RangeError("targetStart out of bounds");if(me<0||me>=this.length)throw new RangeError("Index out of range");if(be<0)throw new RangeError("sourceEnd out of bounds");be>this.length&&(be=this.length),ye.length-xe<be-me&&(be=ye.length-xe+me);var ke=be-me;if(this===ye&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(xe,me,be);else if(this===ye&&me<xe&&xe<be)for(var De=ke-1;De>=0;--De)ye[De+xe]=this[De+me];else Uint8Array.prototype.set.call(ye,this.subarray(me,be),xe);return ke},s.prototype.fill=function(ye,xe,me,be){if(typeof ye=="string"){if(typeof xe=="string"?(be=xe,xe=0,me=this.length):typeof me=="string"&&(be=me,me=this.length),be!==void 0&&typeof be!="string")throw new TypeError("encoding must be a string");if(typeof be=="string"&&!s.isEncoding(be))throw new TypeError("Unknown encoding: "+be);if(ye.length===1){var ke=ye.charCodeAt(0);(be==="utf8"&&ke<128||be==="latin1")&&(ye=ke)}}else typeof ye=="number"&&(ye=ye&255);if(xe<0||this.length<xe||this.length<me)throw new RangeError("Out of range index");if(me<=xe)return this;xe=xe>>>0,me=me===void 0?this.length:me>>>0,ye||(ye=0);var De;if(typeof ye=="number")for(De=xe;De<me;++De)this[De]=ye;else{var Ve=s.isBuffer(ye)?ye:s.from(ye,be),Ae=Ve.length;if(Ae===0)throw new TypeError('The value "'+ye+'" is invalid for argument "value"');for(De=0;De<me-xe;++De)this[De+xe]=Ve[De%Ae]}return this};var H=/[^+/0-9A-Za-z-_]/g;function q(ue){if(ue=ue.split("=")[0],ue=ue.trim().replace(H,""),ue.length<2)return"";for(;ue.length%4!==0;)ue=ue+"=";return ue}function re(ue){return ue<16?"0"+ue.toString(16):ue.toString(16)}function j(ue,ye){ye=ye||1/0;for(var xe,me=ue.length,be=null,ke=[],De=0;De<me;++De){if(xe=ue.charCodeAt(De),xe>55295&&xe<57344){if(!be){if(xe>56319){(ye-=3)>-1&&ke.push(239,191,189);continue}else if(De+1===me){(ye-=3)>-1&&ke.push(239,191,189);continue}be=xe;continue}if(xe<56320){(ye-=3)>-1&&ke.push(239,191,189),be=xe;continue}xe=(be-55296<<10|xe-56320)+65536}else be&&(ye-=3)>-1&&ke.push(239,191,189);if(be=null,xe<128){if((ye-=1)<0)break;ke.push(xe)}else if(xe<2048){if((ye-=2)<0)break;ke.push(xe>>6|192,xe&63|128)}else if(xe<65536){if((ye-=3)<0)break;ke.push(xe>>12|224,xe>>6&63|128,xe&63|128)}else if(xe<1114112){if((ye-=4)<0)break;ke.push(xe>>18|240,xe>>12&63|128,xe>>6&63|128,xe&63|128)}else throw new Error("Invalid code point")}return ke}function $(ue){for(var ye=[],xe=0;xe<ue.length;++xe)ye.push(ue.charCodeAt(xe)&255);return ye}function ie(ue,ye){for(var xe,me,be,ke=[],De=0;De<ue.length&&!((ye-=2)<0);++De)xe=ue.charCodeAt(De),me=xe>>8,be=xe%256,ke.push(be),ke.push(me);return ke}function oe(ue){return a.toByteArray(q(ue))}function ae(ue,ye,xe,me){for(var be=0;be<me&&!(be+xe>=ye.length||be>=ue.length);++be)ye[be+xe]=ue[be];return be}function se(ue,ye){return ue instanceof ye||ue!=null&&ue.constructor!=null&&ue.constructor.name!=null&&ue.constructor.name===ye.name}function _e(ue){return ue!==ue}}).call(this)}).call(this,c("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:4}],4:[function(c,A,T){T.read=function(e,a,i,n,r){var v,s,o=r*8-n-1,b=(1<<o)-1,g=b>>1,d=-7,f=i?r-1:0,y=i?-1:1,l=e[a+f];for(f+=y,v=l&(1<<-d)-1,l>>=-d,d+=o;d>0;v=v*256+e[a+f],f+=y,d-=8);for(s=v&(1<<-d)-1,v>>=-d,d+=n;d>0;s=s*256+e[a+f],f+=y,d-=8);if(v===0)v=1-g;else{if(v===b)return s?NaN:(l?-1:1)*(1/0);s=s+Math.pow(2,n),v=v-g}return(l?-1:1)*s*Math.pow(2,v-n)},T.write=function(e,a,i,n,r,v){var s,o,b,g=v*8-r-1,d=(1<<g)-1,f=d>>1,y=r===23?Math.pow(2,-24)-Math.pow(2,-77):0,l=n?0:v-1,x=n?1:-1,u=a<0||a===0&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(o=isNaN(a)?1:0,s=d):(s=Math.floor(Math.log(a)/Math.LN2),a*(b=Math.pow(2,-s))<1&&(s--,b*=2),s+f>=1?a+=y/b:a+=y*Math.pow(2,1-f),a*b>=2&&(s++,b/=2),s+f>=d?(o=0,s=d):s+f>=1?(o=(a*b-1)*Math.pow(2,r),s=s+f):(o=a*Math.pow(2,f-1)*Math.pow(2,r),s=0));r>=8;e[i+l]=o&255,l+=x,o/=256,r-=8);for(s=s<<r|o,g+=r;g>0;e[i+l]=s&255,l+=x,s/=256,g-=8);e[i+l-x]|=u*128}},{}],5:[function(c,A,T){var e=A.exports={},a,i;function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?a=setTimeout:a=n}catch{a=n}try{typeof clearTimeout=="function"?i=clearTimeout:i=r}catch{i=r}})();function v(u){if(a===setTimeout)return setTimeout(u,0);if((a===n||!a)&&setTimeout)return a=setTimeout,setTimeout(u,0);try{return a(u,0)}catch{try{return a.call(null,u,0)}catch{return a.call(this,u,0)}}}function s(u){if(i===clearTimeout)return clearTimeout(u);if((i===r||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(u);try{return i(u)}catch{try{return i.call(null,u)}catch{return i.call(this,u)}}}var o=[],b=!1,g,d=-1;function f(){!b||!g||(b=!1,g.length?o=g.concat(o):d=-1,o.length&&y())}function y(){if(!b){var u=v(f);b=!0;for(var M=o.length;M;){for(g=o,o=[];++d<M;)g&&g[d].run();d=-1,M=o.length}g=null,b=!1,s(u)}}e.nextTick=function(u){var M=new Array(arguments.length-1);if(arguments.length>1)for(var _=1;_<arguments.length;_++)M[_-1]=arguments[_];o.push(new l(u,M)),o.length===1&&!b&&v(y)};function l(u,M){this.fun=u,this.array=M}l.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={};function x(){}e.on=x,e.addListener=x,e.once=x,e.off=x,e.removeListener=x,e.removeAllListeners=x,e.emit=x,e.prependListener=x,e.prependOnceListener=x,e.listeners=function(u){return[]},e.binding=function(u){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(u){throw new Error("process.chdir is not supported")},e.umask=function(){return 0}},{}],6:[function(c,A,T){A.exports={alpha_shape:c("alpha-shape"),convex_hull:c("convex-hull"),delaunay_triangulate:c("delaunay-triangulate"),gl_cone3d:c("gl-cone3d"),gl_error3d:c("gl-error3d"),gl_heatmap2d:c("gl-heatmap2d"),gl_line3d:c("gl-line3d"),gl_mesh3d:c("gl-mesh3d"),gl_plot2d:c("gl-plot2d"),gl_plot3d:c("gl-plot3d"),gl_pointcloud2d:c("gl-pointcloud2d"),gl_scatter3d:c("gl-scatter3d"),gl_select_box:c("gl-select-box"),gl_spikes2d:c("gl-spikes2d"),gl_streamtube3d:c("gl-streamtube3d"),gl_surface3d:c("gl-surface3d"),ndarray:c("ndarray"),ndarray_linear_interpolate:c("ndarray-linear-interpolate")}},{"alpha-shape":12,"convex-hull":58,"delaunay-triangulate":63,"gl-cone3d":79,"gl-error3d":84,"gl-heatmap2d":88,"gl-line3d":91,"gl-mesh3d":112,"gl-plot2d":118,"gl-plot3d":121,"gl-pointcloud2d":123,"gl-scatter3d":128,"gl-select-box":130,"gl-spikes2d":139,"gl-streamtube3d":143,"gl-surface3d":145,ndarray:259,"ndarray-linear-interpolate":253}],7:[function(c,A,T){A.exports=v;var e=c("turntable-camera-controller"),a=c("orbit-camera-controller"),i=c("matrix-camera-controller");function n(s,o){this._controllerNames=Object.keys(s),this._controllerList=this._controllerNames.map(function(b){return s[b]}),this._mode=o,this._active=s[o],this._active||(this._mode="turntable",this._active=s.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var r=n.prototype;r.flush=function(s){for(var o=this._controllerList,b=0;b<o.length;++b)o[b].flush(s)},r.idle=function(s){for(var o=this._controllerList,b=0;b<o.length;++b)o[b].idle(s)},r.lookAt=function(s,o,b,g){for(var d=this._controllerList,f=0;f<d.length;++f)d[f].lookAt(s,o,b,g)},r.rotate=function(s,o,b,g){for(var d=this._controllerList,f=0;f<d.length;++f)d[f].rotate(s,o,b,g)},r.pan=function(s,o,b,g){for(var d=this._controllerList,f=0;f<d.length;++f)d[f].pan(s,o,b,g)},r.translate=function(s,o,b,g){for(var d=this._controllerList,f=0;f<d.length;++f)d[f].translate(s,o,b,g)},r.setMatrix=function(s,o){for(var b=this._controllerList,g=0;g<b.length;++g)b[g].setMatrix(s,o)},r.setDistanceLimits=function(s,o){for(var b=this._controllerList,g=0;g<b.length;++g)b[g].setDistanceLimits(s,o)},r.setDistance=function(s,o){for(var b=this._controllerList,g=0;g<b.length;++g)b[g].setDistance(s,o)},r.recalcMatrix=function(s){this._active.recalcMatrix(s)},r.getDistance=function(s){return this._active.getDistance(s)},r.getDistanceLimits=function(s){return this._active.getDistanceLimits(s)},r.lastT=function(){return this._active.lastT()},r.setMode=function(s){if(s!==this._mode){var o=this._controllerNames.indexOf(s);if(!(o<0)){var b=this._active,g=this._controllerList[o],d=Math.max(b.lastT(),g.lastT());b.recalcMatrix(d),g.setMatrix(d,b.computedMatrix),this._active=g,this._mode=s,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},r.getMode=function(){return this._mode};function v(s){s=s||{};var o=s.eye||[0,0,1],b=s.center||[0,0,0],g=s.up||[0,1,0],d=s.distanceLimits||[0,1/0],f=s.mode||"turntable",y=e(),l=a(),x=i();return y.setDistanceLimits(d[0],d[1]),y.lookAt(0,o,b,g),l.setDistanceLimits(d[0],d[1]),l.lookAt(0,o,b,g),x.setDistanceLimits(d[0],d[1]),x.lookAt(0,o,b,g),new n({turntable:y,orbit:l,matrix:x},f)}},{"matrix-camera-controller":245,"orbit-camera-controller":263,"turntable-camera-controller":305}],8:[function(c,A,T){var e=typeof WeakMap>"u"?c("weak-map"):WeakMap,a=c("gl-buffer"),i=c("gl-vao"),n=new e;function r(v){var s=n.get(v),o=s&&(s._triangleBuffer.handle||s._triangleBuffer.buffer);if(!o||!v.isBuffer(o)){var b=a(v,new Float32Array([-1,-1,-1,4,4,-1]));s=i(v,[{buffer:b,type:v.FLOAT,size:2}]),s._triangleBuffer=b,n.set(v,s)}s.bind(),v.drawArrays(v.TRIANGLES,0,3),s.unbind()}A.exports=r},{"gl-buffer":78,"gl-vao":150,"weak-map":313}],9:[function(c,A,T){var e=c("pad-left");A.exports=a;function a(i,n,r){n=typeof n=="number"?n:1,r=r||": ";var v=i.split(/\r?\n/),s=String(v.length+n-1).length;return v.map(function(o,b){var g=b+n,d=String(g).length,f=e(g,s-d);return f+r+o}).join(`
`)}},{"pad-left":264}],10:[function(c,A,T){A.exports=i;var e=c("robust-orientation");function a(n,r){for(var v=new Array(r+1),s=0;s<n.length;++s)v[s]=n[s];for(var s=0;s<=n.length;++s){for(var o=n.length;o<=r;++o){for(var b=new Array(r),g=0;g<r;++g)b[g]=Math.pow(o+1-s,g);v[o]=b}var d=e.apply(void 0,v);if(d)return!0}return!1}function i(n){var r=n.length;if(r===0)return[];if(r===1)return[0];for(var v=n[0].length,s=[n[0]],o=[0],b=1;b<r;++b){if(s.push(n[b]),!a(s,v)){s.pop();continue}if(o.push(b),o.length===v+1)return o}return o}},{"robust-orientation":284}],11:[function(c,A,T){A.exports=i;var e=c("delaunay-triangulate"),a=c("circumradius");function i(n,r){return e(r).filter(function(v){for(var s=new Array(v.length),o=0;o<v.length;++o)s[o]=r[v[o]];return a(s)*n<1})}},{circumradius:49,"delaunay-triangulate":63}],12:[function(c,A,T){A.exports=i;var e=c("alpha-complex"),a=c("simplicial-complex-boundary");function i(n,r){return a(e(n,r))}},{"alpha-complex":11,"simplicial-complex-boundary":290}],13:[function(c,A,T){A.exports=function(a){return atob(a)}},{}],14:[function(c,A,T){A.exports=i;var e=c("robust-linear-solve");function a(n){for(var r=0,v=0;v<n.length;++v)r+=n[v];return r}function i(n,r){for(var v=r.length,s=new Array(v+1),o=0;o<v;++o){for(var b=new Array(v+1),g=0;g<=v;++g)b[g]=n[g][o];s[o]=b}s[v]=new Array(v+1);for(var o=0;o<=v;++o)s[v][o]=1;for(var d=new Array(v+1),o=0;o<v;++o)d[o]=r[o];d[v]=1;var f=e(s,d),y=a(f[v+1]);y===0&&(y=1);for(var l=new Array(v+1),o=0;o<=v;++o)l[o]=a(f[o])/y;return l}},{"robust-linear-solve":283}],15:[function(c,A,T){var e=c("./lib/rationalize");A.exports=a;function a(i,n){return e(i[0].mul(n[1]).add(n[0].mul(i[1])),i[1].mul(n[1]))}},{"./lib/rationalize":25}],16:[function(c,A,T){A.exports=e;function e(a,i){return a[0].mul(i[1]).cmp(i[0].mul(a[1]))}},{}],17:[function(c,A,T){var e=c("./lib/rationalize");A.exports=a;function a(i,n){return e(i[0].mul(n[1]),i[1].mul(n[0]))}},{"./lib/rationalize":25}],18:[function(c,A,T){var e=c("./is-rat"),a=c("./lib/is-bn"),i=c("./lib/num-to-bn"),n=c("./lib/str-to-bn"),r=c("./lib/rationalize"),v=c("./div");A.exports=s;function s(o,b){if(e(o))return b?v(o,s(b)):[o[0].clone(),o[1].clone()];var g=0,d,f;if(a(o))d=o.clone();else if(typeof o=="string")d=n(o);else{if(o===0)return[i(0),i(1)];if(o===Math.floor(o))d=i(o);else{for(;o!==Math.floor(o);)o=o*Math.pow(2,256),g-=256;d=i(o)}}if(e(b))d.mul(b[1]),f=b[0].clone();else if(a(b))f=b.clone();else if(typeof b=="string")f=n(b);else if(!b)f=i(1);else if(b===Math.floor(b))f=i(b);else{for(;b!==Math.floor(b);)b=b*Math.pow(2,256),g+=256;f=i(b)}return g>0?d=d.ushln(g):g<0&&(f=f.ushln(-g)),r(d,f)}},{"./div":17,"./is-rat":19,"./lib/is-bn":23,"./lib/num-to-bn":24,"./lib/rationalize":25,"./lib/str-to-bn":26}],19:[function(c,A,T){var e=c("./lib/is-bn");A.exports=a;function a(i){return Array.isArray(i)&&i.length===2&&e(i[0])&&e(i[1])}},{"./lib/is-bn":23}],20:[function(c,A,T){var e=c("bn.js");A.exports=a;function a(i){return i.cmp(new e(0))}},{"bn.js":33}],21:[function(c,A,T){var e=c("./bn-sign");A.exports=a;function a(i){var n=i.length,r=i.words,v=0;if(n===1)v=r[0];else if(n===2)v=r[0]+r[1]*67108864;else for(var s=0;s<n;s++){var o=r[s];v+=o*Math.pow(67108864,s)}return e(i)*v}},{"./bn-sign":20}],22:[function(c,A,T){var e=c("double-bits"),a=c("bit-twiddle").countTrailingZeros;A.exports=i;function i(n){var r=a(e.lo(n));if(r<32)return r;var v=a(e.hi(n));return v>20?52:v+32}},{"bit-twiddle":32,"double-bits":64}],23:[function(c,A,T){c("bn.js"),A.exports=e;function e(a){return a&&typeof a=="object"&&Boolean(a.words)}},{"bn.js":33}],24:[function(c,A,T){var e=c("bn.js"),a=c("double-bits");A.exports=i;function i(n){var r=a.exponent(n);return r<52?new e(n):new e(n*Math.pow(2,52-r)).ushln(r-52)}},{"bn.js":33,"double-bits":64}],25:[function(c,A,T){var e=c("./num-to-bn"),a=c("./bn-sign");A.exports=i;function i(n,r){var v=a(n),s=a(r);if(v===0)return[e(0),e(1)];if(s===0)return[e(0),e(0)];s<0&&(n=n.neg(),r=r.neg());var o=n.gcd(r);return o.cmpn(1)?[n.div(o),r.div(o)]:[n,r]}},{"./bn-sign":20,"./num-to-bn":24}],26:[function(c,A,T){var e=c("bn.js");A.exports=a;function a(i){return new e(i)}},{"bn.js":33}],27:[function(c,A,T){var e=c("./lib/rationalize");A.exports=a;function a(i,n){return e(i[0].mul(n[0]),i[1].mul(n[1]))}},{"./lib/rationalize":25}],28:[function(c,A,T){var e=c("./lib/bn-sign");A.exports=a;function a(i){return e(i[0])*e(i[1])}},{"./lib/bn-sign":20}],29:[function(c,A,T){var e=c("./lib/rationalize");A.exports=a;function a(i,n){return e(i[0].mul(n[1]).sub(i[1].mul(n[0])),i[1].mul(n[1]))}},{"./lib/rationalize":25}],30:[function(c,A,T){var e=c("./lib/bn-to-num"),a=c("./lib/ctz");A.exports=i;function i(n){var r=n[0],v=n[1];if(r.cmpn(0)===0)return 0;var s=r.abs().divmod(v.abs()),o=s.div,b=e(o),g=s.mod,d=r.negative!==v.negative?-1:1;if(g.cmpn(0)===0)return d*b;if(b){var f=a(b)+4,y=e(g.ushln(f).divRound(v));return d*(b+y*Math.pow(2,-f))}else{var l=v.bitLength()-g.bitLength()+53,y=e(g.ushln(l).divRound(v));return l<1023?d*y*Math.pow(2,-l):(y*=Math.pow(2,-1023),d*y*Math.pow(2,1023-l))}}},{"./lib/bn-to-num":21,"./lib/ctz":22}],31:[function(c,A,T){function e(s,o,b,g,d){for(var f=d+1;g<=d;){var y=g+d>>>1,l=s[y],x=b!==void 0?b(l,o):l-o;x>=0?(f=y,d=y-1):g=y+1}return f}function a(s,o,b,g,d){for(var f=d+1;g<=d;){var y=g+d>>>1,l=s[y],x=b!==void 0?b(l,o):l-o;x>0?(f=y,d=y-1):g=y+1}return f}function i(s,o,b,g,d){for(var f=g-1;g<=d;){var y=g+d>>>1,l=s[y],x=b!==void 0?b(l,o):l-o;x<0?(f=y,g=y+1):d=y-1}return f}function n(s,o,b,g,d){for(var f=g-1;g<=d;){var y=g+d>>>1,l=s[y],x=b!==void 0?b(l,o):l-o;x<=0?(f=y,g=y+1):d=y-1}return f}function r(s,o,b,g,d){for(;g<=d;){var f=g+d>>>1,y=s[f],l=b!==void 0?b(y,o):y-o;if(l===0)return f;l<=0?g=f+1:d=f-1}return-1}function v(s,o,b,g,d,f){return typeof b=="function"?f(s,o,b,g===void 0?0:g|0,d===void 0?s.length-1:d|0):f(s,o,void 0,b===void 0?0:b|0,g===void 0?s.length-1:g|0)}A.exports={ge:function(s,o,b,g,d){return v(s,o,b,g,d,e)},gt:function(s,o,b,g,d){return v(s,o,b,g,d,a)},lt:function(s,o,b,g,d){return v(s,o,b,g,d,i)},le:function(s,o,b,g,d){return v(s,o,b,g,d,n)},eq:function(s,o,b,g,d){return v(s,o,b,g,d,r)}}},{}],32:[function(c,A,T){var e=32;T.INT_BITS=e,T.INT_MAX=2147483647,T.INT_MIN=-1<<e-1,T.sign=function(n){return(n>0)-(n<0)},T.abs=function(n){var r=n>>e-1;return(n^r)-r},T.min=function(n,r){return r^(n^r)&-(n<r)},T.max=function(n,r){return n^(n^r)&-(n<r)},T.isPow2=function(n){return!(n&n-1)&&!!n},T.log2=function(n){var r,v;return r=(n>65535)<<4,n>>>=r,v=(n>255)<<3,n>>>=v,r|=v,v=(n>15)<<2,n>>>=v,r|=v,v=(n>3)<<1,n>>>=v,r|=v,r|n>>1},T.log10=function(n){return n>=1e9?9:n>=1e8?8:n>=1e7?7:n>=1e6?6:n>=1e5?5:n>=1e4?4:n>=1e3?3:n>=100?2:n>=10?1:0},T.popCount=function(n){return n=n-(n>>>1&1431655765),n=(n&858993459)+(n>>>2&858993459),(n+(n>>>4)&252645135)*16843009>>>24};function a(n){var r=32;return n&=-n,n&&r--,n&65535&&(r-=16),n&16711935&&(r-=8),n&252645135&&(r-=4),n&858993459&&(r-=2),n&1431655765&&(r-=1),r}T.countTrailingZeros=a,T.nextPow2=function(n){return n+=n===0,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n+1},T.prevPow2=function(n){return n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n-(n>>>1)},T.parity=function(n){return n^=n>>>16,n^=n>>>8,n^=n>>>4,n&=15,27030>>>n&1};var i=new Array(256);(function(n){for(var r=0;r<256;++r){var v=r,s=r,o=7;for(v>>>=1;v;v>>>=1)s<<=1,s|=v&1,--o;n[r]=s<<o&255}})(i),T.reverse=function(n){return i[n&255]<<24|i[n>>>8&255]<<16|i[n>>>16&255]<<8|i[n>>>24&255]},T.interleave2=function(n,r){return n&=65535,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,r&=65535,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,n|r<<1},T.deinterleave2=function(n,r){return n=n>>>r&1431655765,n=(n|n>>>1)&858993459,n=(n|n>>>2)&252645135,n=(n|n>>>4)&16711935,n=(n|n>>>16)&65535,n<<16>>16},T.interleave3=function(n,r,v){return n&=1023,n=(n|n<<16)&4278190335,n=(n|n<<8)&251719695,n=(n|n<<4)&3272356035,n=(n|n<<2)&1227133513,r&=1023,r=(r|r<<16)&4278190335,r=(r|r<<8)&251719695,r=(r|r<<4)&3272356035,r=(r|r<<2)&1227133513,n|=r<<1,v&=1023,v=(v|v<<16)&4278190335,v=(v|v<<8)&251719695,v=(v|v<<4)&3272356035,v=(v|v<<2)&1227133513,n|v<<2},T.deinterleave3=function(n,r){return n=n>>>r&1227133513,n=(n|n>>>2)&3272356035,n=(n|n>>>4)&251719695,n=(n|n>>>8)&4278190335,n=(n|n>>>16)&1023,n<<22>>22},T.nextCombination=function(n){var r=n|n-1;return r+1|(~r&-~r)-1>>>a(n)+1}},{}],33:[function(c,A,T){(function(e,a){function i(I,D){if(!I)throw new Error(D||"Assertion failed")}function n(I,D){I.super_=D;var R=function(){};R.prototype=D.prototype,I.prototype=new R,I.prototype.constructor=I}function r(I,D,R){if(r.isBN(I))return I;this.negative=0,this.words=null,this.length=0,this.red=null,I!==null&&((D==="le"||D==="be")&&(R=D,D=10),this._init(I||0,D||10,R||"be"))}typeof e=="object"?e.exports=r:a.BN=r,r.BN=r,r.wordSize=26;var v;try{typeof window<"u"&&typeof window.Buffer<"u"?v=window.Buffer:v=c("buffer").Buffer}catch{}r.isBN=function(D){return D instanceof r?!0:D!==null&&typeof D=="object"&&D.constructor.wordSize===r.wordSize&&Array.isArray(D.words)},r.max=function(D,R){return D.cmp(R)>0?D:R},r.min=function(D,R){return D.cmp(R)<0?D:R},r.prototype._init=function(D,R,N){if(typeof D=="number")return this._initNumber(D,R,N);if(typeof D=="object")return this._initArray(D,R,N);R==="hex"&&(R=16),i(R===(R|0)&&R>=2&&R<=36),D=D.toString().replace(/\s+/g,"");var z=0;D[0]==="-"&&(z++,this.negative=1),z<D.length&&(R===16?this._parseHex(D,z,N):(this._parseBase(D,R,z),N==="le"&&this._initArray(this.toArray(),R,N)))},r.prototype._initNumber=function(D,R,N){D<0&&(this.negative=1,D=-D),D<67108864?(this.words=[D&67108863],this.length=1):D<4503599627370496?(this.words=[D&67108863,D/67108864&67108863],this.length=2):(i(D<9007199254740992),this.words=[D&67108863,D/67108864&67108863,1],this.length=3),N==="le"&&this._initArray(this.toArray(),R,N)},r.prototype._initArray=function(D,R,N){if(i(typeof D.length=="number"),D.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(D.length/3),this.words=new Array(this.length);for(var z=0;z<this.length;z++)this.words[z]=0;var G,Y,ee=0;if(N==="be")for(z=D.length-1,G=0;z>=0;z-=3)Y=D[z]|D[z-1]<<8|D[z-2]<<16,this.words[G]|=Y<<ee&67108863,this.words[G+1]=Y>>>26-ee&67108863,ee+=24,ee>=26&&(ee-=26,G++);else if(N==="le")for(z=0,G=0;z<D.length;z+=3)Y=D[z]|D[z+1]<<8|D[z+2]<<16,this.words[G]|=Y<<ee&67108863,this.words[G+1]=Y>>>26-ee&67108863,ee+=24,ee>=26&&(ee-=26,G++);return this.strip()};function s(I,D){var R=I.charCodeAt(D);return R>=65&&R<=70?R-55:R>=97&&R<=102?R-87:R-48&15}function o(I,D,R){var N=s(I,R);return R-1>=D&&(N|=s(I,R-1)<<4),N}r.prototype._parseHex=function(D,R,N){this.length=Math.ceil((D.length-R)/6),this.words=new Array(this.length);for(var z=0;z<this.length;z++)this.words[z]=0;var G=0,Y=0,ee;if(N==="be")for(z=D.length-1;z>=R;z-=2)ee=o(D,R,z)<<G,this.words[Y]|=ee&67108863,G>=18?(G-=18,Y+=1,this.words[Y]|=ee>>>26):G+=8;else{var Z=D.length-R;for(z=Z%2===0?R+1:R;z<D.length;z+=2)ee=o(D,R,z)<<G,this.words[Y]|=ee&67108863,G>=18?(G-=18,Y+=1,this.words[Y]|=ee>>>26):G+=8}this.strip()};function b(I,D,R,N){for(var z=0,G=Math.min(I.length,R),Y=D;Y<G;Y++){var ee=I.charCodeAt(Y)-48;z*=N,ee>=49?z+=ee-49+10:ee>=17?z+=ee-17+10:z+=ee}return z}r.prototype._parseBase=function(D,R,N){this.words=[0],this.length=1;for(var z=0,G=1;G<=67108863;G*=R)z++;z--,G=G/R|0;for(var Y=D.length-N,ee=Y%z,Z=Math.min(Y,Y-ee)+N,X=0,ne=N;ne<Z;ne+=z)X=b(D,ne,ne+z,R),this.imuln(G),this.words[0]+X<67108864?this.words[0]+=X:this._iaddn(X);if(ee!==0){var ce=1;for(X=b(D,ne,D.length,R),ne=0;ne<ee;ne++)ce*=R;this.imuln(ce),this.words[0]+X<67108864?this.words[0]+=X:this._iaddn(X)}this.strip()},r.prototype.copy=function(D){D.words=new Array(this.length);for(var R=0;R<this.length;R++)D.words[R]=this.words[R];D.length=this.length,D.negative=this.negative,D.red=this.red},r.prototype.clone=function(){var D=new r(null);return this.copy(D),D},r.prototype._expand=function(D){for(;this.length<D;)this.words[this.length++]=0;return this},r.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},r.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},r.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var g=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];r.prototype.toString=function(D,R){D=D||10,R=R|0||1;var N;if(D===16||D==="hex"){N="";for(var z=0,G=0,Y=0;Y<this.length;Y++){var ee=this.words[Y],Z=((ee<<z|G)&16777215).toString(16);G=ee>>>24-z&16777215,G!==0||Y!==this.length-1?N=g[6-Z.length]+Z+N:N=Z+N,z+=2,z>=26&&(z-=26,Y--)}for(G!==0&&(N=G.toString(16)+N);N.length%R!==0;)N="0"+N;return this.negative!==0&&(N="-"+N),N}if(D===(D|0)&&D>=2&&D<=36){var X=d[D],ne=f[D];N="";var ce=this.clone();for(ce.negative=0;!ce.isZero();){var Q=ce.modn(ne).toString(D);ce=ce.idivn(ne),ce.isZero()?N=Q+N:N=g[X-Q.length]+Q+N}for(this.isZero()&&(N="0"+N);N.length%R!==0;)N="0"+N;return this.negative!==0&&(N="-"+N),N}i(!1,"Base should be between 2 and 36")},r.prototype.toNumber=function(){var D=this.words[0];return this.length===2?D+=this.words[1]*67108864:this.length===3&&this.words[2]===1?D+=4503599627370496+this.words[1]*67108864:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-D:D},r.prototype.toJSON=function(){return this.toString(16)},r.prototype.toBuffer=function(D,R){return i(typeof v<"u"),this.toArrayLike(v,D,R)},r.prototype.toArray=function(D,R){return this.toArrayLike(Array,D,R)},r.prototype.toArrayLike=function(D,R,N){var z=this.byteLength(),G=N||Math.max(1,z);i(z<=G,"byte array longer than desired length"),i(G>0,"Requested array length <= 0"),this.strip();var Y=R==="le",ee=new D(G),Z,X,ne=this.clone();if(Y){for(X=0;!ne.isZero();X++)Z=ne.andln(255),ne.iushrn(8),ee[X]=Z;for(;X<G;X++)ee[X]=0}else{for(X=0;X<G-z;X++)ee[X]=0;for(X=0;!ne.isZero();X++)Z=ne.andln(255),ne.iushrn(8),ee[G-X-1]=Z}return ee},Math.clz32?r.prototype._countBits=function(D){return 32-Math.clz32(D)}:r.prototype._countBits=function(D){var R=D,N=0;return R>=4096&&(N+=13,R>>>=13),R>=64&&(N+=7,R>>>=7),R>=8&&(N+=4,R>>>=4),R>=2&&(N+=2,R>>>=2),N+R},r.prototype._zeroBits=function(D){if(D===0)return 26;var R=D,N=0;return(R&8191)===0&&(N+=13,R>>>=13),(R&127)===0&&(N+=7,R>>>=7),(R&15)===0&&(N+=4,R>>>=4),(R&3)===0&&(N+=2,R>>>=2),(R&1)===0&&N++,N},r.prototype.bitLength=function(){var D=this.words[this.length-1],R=this._countBits(D);return(this.length-1)*26+R};function y(I){for(var D=new Array(I.bitLength()),R=0;R<D.length;R++){var N=R/26|0,z=R%26;D[R]=(I.words[N]&1<<z)>>>z}return D}r.prototype.zeroBits=function(){if(this.isZero())return 0;for(var D=0,R=0;R<this.length;R++){var N=this._zeroBits(this.words[R]);if(D+=N,N!==26)break}return D},r.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},r.prototype.toTwos=function(D){return this.negative!==0?this.abs().inotn(D).iaddn(1):this.clone()},r.prototype.fromTwos=function(D){return this.testn(D-1)?this.notn(D).iaddn(1).ineg():this.clone()},r.prototype.isNeg=function(){return this.negative!==0},r.prototype.neg=function(){return this.clone().ineg()},r.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},r.prototype.iuor=function(D){for(;this.length<D.length;)this.words[this.length++]=0;for(var R=0;R<D.length;R++)this.words[R]=this.words[R]|D.words[R];return this.strip()},r.prototype.ior=function(D){return i((this.negative|D.negative)===0),this.iuor(D)},r.prototype.or=function(D){return this.length>D.length?this.clone().ior(D):D.clone().ior(this)},r.prototype.uor=function(D){return this.length>D.length?this.clone().iuor(D):D.clone().iuor(this)},r.prototype.iuand=function(D){var R;this.length>D.length?R=D:R=this;for(var N=0;N<R.length;N++)this.words[N]=this.words[N]&D.words[N];return this.length=R.length,this.strip()},r.prototype.iand=function(D){return i((this.negative|D.negative)===0),this.iuand(D)},r.prototype.and=function(D){return this.length>D.length?this.clone().iand(D):D.clone().iand(this)},r.prototype.uand=function(D){return this.length>D.length?this.clone().iuand(D):D.clone().iuand(this)},r.prototype.iuxor=function(D){var R,N;this.length>D.length?(R=this,N=D):(R=D,N=this);for(var z=0;z<N.length;z++)this.words[z]=R.words[z]^N.words[z];if(this!==R)for(;z<R.length;z++)this.words[z]=R.words[z];return this.length=R.length,this.strip()},r.prototype.ixor=function(D){return i((this.negative|D.negative)===0),this.iuxor(D)},r.prototype.xor=function(D){return this.length>D.length?this.clone().ixor(D):D.clone().ixor(this)},r.prototype.uxor=function(D){return this.length>D.length?this.clone().iuxor(D):D.clone().iuxor(this)},r.prototype.inotn=function(D){i(typeof D=="number"&&D>=0);var R=Math.ceil(D/26)|0,N=D%26;this._expand(R),N>0&&R--;for(var z=0;z<R;z++)this.words[z]=~this.words[z]&67108863;return N>0&&(this.words[z]=~this.words[z]&67108863>>26-N),this.strip()},r.prototype.notn=function(D){return this.clone().inotn(D)},r.prototype.setn=function(D,R){i(typeof D=="number"&&D>=0);var N=D/26|0,z=D%26;return this._expand(N+1),R?this.words[N]=this.words[N]|1<<z:this.words[N]=this.words[N]&~(1<<z),this.strip()},r.prototype.iadd=function(D){var R;if(this.negative!==0&&D.negative===0)return this.negative=0,R=this.isub(D),this.negative^=1,this._normSign();if(this.negative===0&&D.negative!==0)return D.negative=0,R=this.isub(D),D.negative=1,R._normSign();var N,z;this.length>D.length?(N=this,z=D):(N=D,z=this);for(var G=0,Y=0;Y<z.length;Y++)R=(N.words[Y]|0)+(z.words[Y]|0)+G,this.words[Y]=R&67108863,G=R>>>26;for(;G!==0&&Y<N.length;Y++)R=(N.words[Y]|0)+G,this.words[Y]=R&67108863,G=R>>>26;if(this.length=N.length,G!==0)this.words[this.length]=G,this.length++;else if(N!==this)for(;Y<N.length;Y++)this.words[Y]=N.words[Y];return this},r.prototype.add=function(D){var R;return D.negative!==0&&this.negative===0?(D.negative=0,R=this.sub(D),D.negative^=1,R):D.negative===0&&this.negative!==0?(this.negative=0,R=D.sub(this),this.negative=1,R):this.length>D.length?this.clone().iadd(D):D.clone().iadd(this)},r.prototype.isub=function(D){if(D.negative!==0){D.negative=0;var R=this.iadd(D);return D.negative=1,R._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(D),this.negative=1,this._normSign();var N=this.cmp(D);if(N===0)return this.negative=0,this.length=1,this.words[0]=0,this;var z,G;N>0?(z=this,G=D):(z=D,G=this);for(var Y=0,ee=0;ee<G.length;ee++)R=(z.words[ee]|0)-(G.words[ee]|0)+Y,Y=R>>26,this.words[ee]=R&67108863;for(;Y!==0&&ee<z.length;ee++)R=(z.words[ee]|0)+Y,Y=R>>26,this.words[ee]=R&67108863;if(Y===0&&ee<z.length&&z!==this)for(;ee<z.length;ee++)this.words[ee]=z.words[ee];return this.length=Math.max(this.length,ee),z!==this&&(this.negative=1),this.strip()},r.prototype.sub=function(D){return this.clone().isub(D)};function l(I,D,R){R.negative=D.negative^I.negative;var N=I.length+D.length|0;R.length=N,N=N-1|0;var z=I.words[0]|0,G=D.words[0]|0,Y=z*G,ee=Y&67108863,Z=Y/67108864|0;R.words[0]=ee;for(var X=1;X<N;X++){for(var ne=Z>>>26,ce=Z&67108863,Q=Math.min(X,D.length-1),K=Math.max(0,X-I.length+1);K<=Q;K++){var U=X-K|0;z=I.words[U]|0,G=D.words[K]|0,Y=z*G+ce,ne+=Y/67108864|0,ce=Y&67108863}R.words[X]=ce|0,Z=ne|0}return Z!==0?R.words[X]=Z|0:R.length--,R.strip()}var x=function(D,R,N){var z=D.words,G=R.words,Y=N.words,ee=0,Z,X,ne,ce=z[0]|0,Q=ce&8191,K=ce>>>13,U=z[1]|0,H=U&8191,q=U>>>13,re=z[2]|0,j=re&8191,$=re>>>13,ie=z[3]|0,oe=ie&8191,ae=ie>>>13,se=z[4]|0,_e=se&8191,ue=se>>>13,ye=z[5]|0,xe=ye&8191,me=ye>>>13,be=z[6]|0,ke=be&8191,De=be>>>13,Ve=z[7]|0,Ae=Ve&8191,Le=Ve>>>13,je=z[8]|0,Ye=je&8191,ze=je>>>13,Ie=z[9]|0,We=Ie&8191,pt=Ie>>>13,Ft=G[0]|0,Qt=Ft&8191,zt=Ft>>>13,Et=G[1]|0,Xt=Et&8191,Nt=Et>>>13,Ct=G[2]|0,Xe=Ct&8191,at=Ct>>>13,Ge=G[3]|0,Se=Ge&8191,He=Ge>>>13,Ke=G[4]|0,qe=Ke&8191,Tt=Ke>>>13,mt=G[5]|0,At=mt&8191,Ht=mt>>>13,It=G[6]|0,Vt=It&8191,jt=It>>>13,Yt=G[7]|0,or=Yt&8191,Gr=Yt>>>13,on=G[8]|0,Jr=on&8191,ot=on>>>13,er=G[9]|0,Kt=er&8191,fr=er>>>13;N.negative=D.negative^R.negative,N.length=19,Z=Math.imul(Q,Qt),X=Math.imul(Q,zt),X=X+Math.imul(K,Qt)|0,ne=Math.imul(K,zt);var Ar=(ee+Z|0)+((X&8191)<<13)|0;ee=(ne+(X>>>13)|0)+(Ar>>>26)|0,Ar&=67108863,Z=Math.imul(H,Qt),X=Math.imul(H,zt),X=X+Math.imul(q,Qt)|0,ne=Math.imul(q,zt),Z=Z+Math.imul(Q,Xt)|0,X=X+Math.imul(Q,Nt)|0,X=X+Math.imul(K,Xt)|0,ne=ne+Math.imul(K,Nt)|0;var et=(ee+Z|0)+((X&8191)<<13)|0;ee=(ne+(X>>>13)|0)+(et>>>26)|0,et&=67108863,Z=Math.imul(j,Qt),X=Math.imul(j,zt),X=X+Math.imul($,Qt)|0,ne=Math.imul($,zt),Z=Z+Math.imul(H,Xt)|0,X=X+Math.imul(H,Nt)|0,X=X+Math.imul(q,Xt)|0,ne=ne+Math.imul(q,Nt)|0,Z=Z+Math.imul(Q,Xe)|0,X=X+Math.imul(Q,at)|0,X=X+Math.imul(K,Xe)|0,ne=ne+Math.imul(K,at)|0;var $e=(ee+Z|0)+((X&8191)<<13)|0;ee=(ne+(X>>>13)|0)+($e>>>26)|0,$e&=67108863,Z=Math.imul(oe,Qt),X=Math.imul(oe,zt),X=X+Math.imul(ae,Qt)|0,ne=Math.imul(ae,zt),Z=Z+Math.imul(j,Xt)|0,X=X+Math.imul(j,Nt)|0,X=X+Math.imul($,Xt)|0,ne=ne+Math.imul($,Nt)|0,Z=Z+Math.imul(H,Xe)|0,X=X+Math.imul(H,at)|0,X=X+Math.imul(q,Xe)|0,ne=ne+Math.imul(q,at)|0,Z=Z+Math.imul(Q,Se)|0,X=X+Math.imul(Q,He)|0,X=X+Math.imul(K,Se)|0,ne=ne+Math.imul(K,He)|0;var st=(ee+Z|0)+((X&8191)<<13)|0;ee=(ne+(X>>>13)|0)+(st>>>26)|0,st&=67108863,Z=Math.imul(_e,Qt),X=Math.imul(_e,zt),X=X+Math.imul(ue,Qt)|0,ne=Math.imul(ue,zt),Z=Z+Math.imul(oe,Xt)|0,X=X+Math.imul(oe,Nt)|0,X=X+Math.imul(ae,Xt)|0,ne=ne+Math.imul(ae,Nt)|0,Z=Z+Math.imul(j,Xe)|0,X=X+Math.imul(j,at)|0,X=X+Math.imul($,Xe)|0,ne=ne+Math.imul($,at)|0,Z=Z+Math.imul(H,Se)|0,X=X+Math.imul(H,He)|0,X=X+Math.imul(q,Se)|0,ne=ne+Math.imul(q,He)|0,Z=Z+Math.imul(Q,qe)|0,X=X+Math.imul(Q,Tt)|0,X=X+Math.imul(K,qe)|0,ne=ne+Math.imul(K,Tt)|0;var ct=(ee+Z|0)+((X&8191)<<13)|0;ee=(ne+(X>>>13)|0)+(ct>>>26)|0,ct&=67108863,Z=Math.imul(xe,Qt),X=Math.imul(xe,zt),X=X+Math.imul(me,Qt)|0,ne=Math.imul(me,zt),Z=Z+Math.imul(_e,Xt)|0,X=X+Math.imul(_e,Nt)|0,X=X+Math.imul(ue,Xt)|0,ne=ne+Math.imul(ue,Nt)|0,Z=Z+Math.imul(oe,Xe)|0,X=X+Math.imul(oe,at)|0,X=X+Math.imul(ae,Xe)|0,ne=ne+Math.imul(ae,at)|0,Z=Z+Math.imul(j,Se)|0,X=X+Math.imul(j,He)|0,X=X+Math.imul($,Se)|0,ne=ne+Math.imul($,He)|0,Z=Z+Math.imul(H,qe)|0,X=X+Math.imul(H,Tt)|0,X=X+Math.imul(q,qe)|0,ne=ne+Math.imul(q,Tt)|0,Z=Z+Math.imul(Q,At)|0,X=X+Math.imul(Q,Ht)|0,X=X+Math.imul(K,At)|0,ne=ne+Math.imul(K,Ht)|0;var Mt=(ee+Z|0)+((X&8191)<<13)|0;ee=(ne+(X>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,Z=Math.imul(ke,Qt),X=Math.imul(ke,zt),X=X+Math.imul(De,Qt)|0,ne=Math.imul(De,zt),Z=Z+Math.imul(xe,Xt)|0,X=X+Math.imul(xe,Nt)|0,X=X+Math.imul(me,Xt)|0,ne=ne+Math.imul(me,Nt)|0,Z=Z+Math.imul(_e,Xe)|0,X=X+Math.imul(_e,at)|0,X=X+Math.imul(ue,Xe)|0,ne=ne+Math.imul(ue,at)|0,Z=Z+Math.imul(oe,Se)|0,X=X+Math.imul(oe,He)|0,X=X+Math.imul(ae,Se)|0,ne=ne+Math.imul(ae,He)|0,Z=Z+Math.imul(j,qe)|0,X=X+Math.imul(j,Tt)|0,X=X+Math.imul($,qe)|0,ne=ne+Math.imul($,Tt)|0,Z=Z+Math.imul(H,At)|0,X=X+Math.imul(H,Ht)|0,X=X+Math.imul(q,At)|0,ne=ne+Math.imul(q,Ht)|0,Z=Z+Math.imul(Q,Vt)|0,X=X+Math.imul(Q,jt)|0,X=X+Math.imul(K,Vt)|0,ne=ne+Math.imul(K,jt)|0;var Ut=(ee+Z|0)+((X&8191)<<13)|0;ee=(ne+(X>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,Z=Math.imul(Ae,Qt),X=Math.imul(Ae,zt),X=X+Math.imul(Le,Qt)|0,ne=Math.imul(Le,zt),Z=Z+Math.imul(ke,Xt)|0,X=X+Math.imul(ke,Nt)|0,X=X+Math.imul(De,Xt)|0,ne=ne+Math.imul(De,Nt)|0,Z=Z+Math.imul(xe,Xe)|0,X=X+Math.imul(xe,at)|0,X=X+Math.imul(me,Xe)|0,ne=ne+Math.imul(me,at)|0,Z=Z+Math.imul(_e,Se)|0,X=X+Math.imul(_e,He)|0,X=X+Math.imul(ue,Se)|0,ne=ne+Math.imul(ue,He)|0,Z=Z+Math.imul(oe,qe)|0,X=X+Math.imul(oe,Tt)|0,X=X+Math.imul(ae,qe)|0,ne=ne+Math.imul(ae,Tt)|0,Z=Z+Math.imul(j,At)|0,X=X+Math.imul(j,Ht)|0,X=X+Math.imul($,At)|0,ne=ne+Math.imul($,Ht)|0,Z=Z+Math.imul(H,Vt)|0,X=X+Math.imul(H,jt)|0,X=X+Math.imul(q,Vt)|0,ne=ne+Math.imul(q,jt)|0,Z=Z+Math.imul(Q,or)|0,X=X+Math.imul(Q,Gr)|0,X=X+Math.imul(K,or)|0,ne=ne+Math.imul(K,Gr)|0;var Pe=(ee+Z|0)+((X&8191)<<13)|0;ee=(ne+(X>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,Z=Math.imul(Ye,Qt),X=Math.imul(Ye,zt),X=X+Math.imul(ze,Qt)|0,ne=Math.imul(ze,zt),Z=Z+Math.imul(Ae,Xt)|0,X=X+Math.imul(Ae,Nt)|0,X=X+Math.imul(Le,Xt)|0,ne=ne+Math.imul(Le,Nt)|0,Z=Z+Math.imul(ke,Xe)|0,X=X+Math.imul(ke,at)|0,X=X+Math.imul(De,Xe)|0,ne=ne+Math.imul(De,at)|0,Z=Z+Math.imul(xe,Se)|0,X=X+Math.imul(xe,He)|0,X=X+Math.imul(me,Se)|0,ne=ne+Math.imul(me,He)|0,Z=Z+Math.imul(_e,qe)|0,X=X+Math.imul(_e,Tt)|0,X=X+Math.imul(ue,qe)|0,ne=ne+Math.imul(ue,Tt)|0,Z=Z+Math.imul(oe,At)|0,X=X+Math.imul(oe,Ht)|0,X=X+Math.imul(ae,At)|0,ne=ne+Math.imul(ae,Ht)|0,Z=Z+Math.imul(j,Vt)|0,X=X+Math.imul(j,jt)|0,X=X+Math.imul($,Vt)|0,ne=ne+Math.imul($,jt)|0,Z=Z+Math.imul(H,or)|0,X=X+Math.imul(H,Gr)|0,X=X+Math.imul(q,or)|0,ne=ne+Math.imul(q,Gr)|0,Z=Z+Math.imul(Q,Jr)|0,X=X+Math.imul(Q,ot)|0,X=X+Math.imul(K,Jr)|0,ne=ne+Math.imul(K,ot)|0;var Ee=(ee+Z|0)+((X&8191)<<13)|0;ee=(ne+(X>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,Z=Math.imul(We,Qt),X=Math.imul(We,zt),X=X+Math.imul(pt,Qt)|0,ne=Math.imul(pt,zt),Z=Z+Math.imul(Ye,Xt)|0,X=X+Math.imul(Ye,Nt)|0,X=X+Math.imul(ze,Xt)|0,ne=ne+Math.imul(ze,Nt)|0,Z=Z+Math.imul(Ae,Xe)|0,X=X+Math.imul(Ae,at)|0,X=X+Math.imul(Le,Xe)|0,ne=ne+Math.imul(Le,at)|0,Z=Z+Math.imul(ke,Se)|0,X=X+Math.imul(ke,He)|0,X=X+Math.imul(De,Se)|0,ne=ne+Math.imul(De,He)|0,Z=Z+Math.imul(xe,qe)|0,X=X+Math.imul(xe,Tt)|0,X=X+Math.imul(me,qe)|0,ne=ne+Math.imul(me,Tt)|0,Z=Z+Math.imul(_e,At)|0,X=X+Math.imul(_e,Ht)|0,X=X+Math.imul(ue,At)|0,ne=ne+Math.imul(ue,Ht)|0,Z=Z+Math.imul(oe,Vt)|0,X=X+Math.imul(oe,jt)|0,X=X+Math.imul(ae,Vt)|0,ne=ne+Math.imul(ae,jt)|0,Z=Z+Math.imul(j,or)|0,X=X+Math.imul(j,Gr)|0,X=X+Math.imul($,or)|0,ne=ne+Math.imul($,Gr)|0,Z=Z+Math.imul(H,Jr)|0,X=X+Math.imul(H,ot)|0,X=X+Math.imul(q,Jr)|0,ne=ne+Math.imul(q,ot)|0,Z=Z+Math.imul(Q,Kt)|0,X=X+Math.imul(Q,fr)|0,X=X+Math.imul(K,Kt)|0,ne=ne+Math.imul(K,fr)|0;var it=(ee+Z|0)+((X&8191)<<13)|0;ee=(ne+(X>>>13)|0)+(it>>>26)|0,it&=67108863,Z=Math.imul(We,Xt),X=Math.imul(We,Nt),X=X+Math.imul(pt,Xt)|0,ne=Math.imul(pt,Nt),Z=Z+Math.imul(Ye,Xe)|0,X=X+Math.imul(Ye,at)|0,X=X+Math.imul(ze,Xe)|0,ne=ne+Math.imul(ze,at)|0,Z=Z+Math.imul(Ae,Se)|0,X=X+Math.imul(Ae,He)|0,X=X+Math.imul(Le,Se)|0,ne=ne+Math.imul(Le,He)|0,Z=Z+Math.imul(ke,qe)|0,X=X+Math.imul(ke,Tt)|0,X=X+Math.imul(De,qe)|0,ne=ne+Math.imul(De,Tt)|0,Z=Z+Math.imul(xe,At)|0,X=X+Math.imul(xe,Ht)|0,X=X+Math.imul(me,At)|0,ne=ne+Math.imul(me,Ht)|0,Z=Z+Math.imul(_e,Vt)|0,X=X+Math.imul(_e,jt)|0,X=X+Math.imul(ue,Vt)|0,ne=ne+Math.imul(ue,jt)|0,Z=Z+Math.imul(oe,or)|0,X=X+Math.imul(oe,Gr)|0,X=X+Math.imul(ae,or)|0,ne=ne+Math.imul(ae,Gr)|0,Z=Z+Math.imul(j,Jr)|0,X=X+Math.imul(j,ot)|0,X=X+Math.imul($,Jr)|0,ne=ne+Math.imul($,ot)|0,Z=Z+Math.imul(H,Kt)|0,X=X+Math.imul(H,fr)|0,X=X+Math.imul(q,Kt)|0,ne=ne+Math.imul(q,fr)|0;var ut=(ee+Z|0)+((X&8191)<<13)|0;ee=(ne+(X>>>13)|0)+(ut>>>26)|0,ut&=67108863,Z=Math.imul(We,Xe),X=Math.imul(We,at),X=X+Math.imul(pt,Xe)|0,ne=Math.imul(pt,at),Z=Z+Math.imul(Ye,Se)|0,X=X+Math.imul(Ye,He)|0,X=X+Math.imul(ze,Se)|0,ne=ne+Math.imul(ze,He)|0,Z=Z+Math.imul(Ae,qe)|0,X=X+Math.imul(Ae,Tt)|0,X=X+Math.imul(Le,qe)|0,ne=ne+Math.imul(Le,Tt)|0,Z=Z+Math.imul(ke,At)|0,X=X+Math.imul(ke,Ht)|0,X=X+Math.imul(De,At)|0,ne=ne+Math.imul(De,Ht)|0,Z=Z+Math.imul(xe,Vt)|0,X=X+Math.imul(xe,jt)|0,X=X+Math.imul(me,Vt)|0,ne=ne+Math.imul(me,jt)|0,Z=Z+Math.imul(_e,or)|0,X=X+Math.imul(_e,Gr)|0,X=X+Math.imul(ue,or)|0,ne=ne+Math.imul(ue,Gr)|0,Z=Z+Math.imul(oe,Jr)|0,X=X+Math.imul(oe,ot)|0,X=X+Math.imul(ae,Jr)|0,ne=ne+Math.imul(ae,ot)|0,Z=Z+Math.imul(j,Kt)|0,X=X+Math.imul(j,fr)|0,X=X+Math.imul($,Kt)|0,ne=ne+Math.imul($,fr)|0;var vt=(ee+Z|0)+((X&8191)<<13)|0;ee=(ne+(X>>>13)|0)+(vt>>>26)|0,vt&=67108863,Z=Math.imul(We,Se),X=Math.imul(We,He),X=X+Math.imul(pt,Se)|0,ne=Math.imul(pt,He),Z=Z+Math.imul(Ye,qe)|0,X=X+Math.imul(Ye,Tt)|0,X=X+Math.imul(ze,qe)|0,ne=ne+Math.imul(ze,Tt)|0,Z=Z+Math.imul(Ae,At)|0,X=X+Math.imul(Ae,Ht)|0,X=X+Math.imul(Le,At)|0,ne=ne+Math.imul(Le,Ht)|0,Z=Z+Math.imul(ke,Vt)|0,X=X+Math.imul(ke,jt)|0,X=X+Math.imul(De,Vt)|0,ne=ne+Math.imul(De,jt)|0,Z=Z+Math.imul(xe,or)|0,X=X+Math.imul(xe,Gr)|0,X=X+Math.imul(me,or)|0,ne=ne+Math.imul(me,Gr)|0,Z=Z+Math.imul(_e,Jr)|0,X=X+Math.imul(_e,ot)|0,X=X+Math.imul(ue,Jr)|0,ne=ne+Math.imul(ue,ot)|0,Z=Z+Math.imul(oe,Kt)|0,X=X+Math.imul(oe,fr)|0,X=X+Math.imul(ae,Kt)|0,ne=ne+Math.imul(ae,fr)|0;var St=(ee+Z|0)+((X&8191)<<13)|0;ee=(ne+(X>>>13)|0)+(St>>>26)|0,St&=67108863,Z=Math.imul(We,qe),X=Math.imul(We,Tt),X=X+Math.imul(pt,qe)|0,ne=Math.imul(pt,Tt),Z=Z+Math.imul(Ye,At)|0,X=X+Math.imul(Ye,Ht)|0,X=X+Math.imul(ze,At)|0,ne=ne+Math.imul(ze,Ht)|0,Z=Z+Math.imul(Ae,Vt)|0,X=X+Math.imul(Ae,jt)|0,X=X+Math.imul(Le,Vt)|0,ne=ne+Math.imul(Le,jt)|0,Z=Z+Math.imul(ke,or)|0,X=X+Math.imul(ke,Gr)|0,X=X+Math.imul(De,or)|0,ne=ne+Math.imul(De,Gr)|0,Z=Z+Math.imul(xe,Jr)|0,X=X+Math.imul(xe,ot)|0,X=X+Math.imul(me,Jr)|0,ne=ne+Math.imul(me,ot)|0,Z=Z+Math.imul(_e,Kt)|0,X=X+Math.imul(_e,fr)|0,X=X+Math.imul(ue,Kt)|0,ne=ne+Math.imul(ue,fr)|0;var yt=(ee+Z|0)+((X&8191)<<13)|0;ee=(ne+(X>>>13)|0)+(yt>>>26)|0,yt&=67108863,Z=Math.imul(We,At),X=Math.imul(We,Ht),X=X+Math.imul(pt,At)|0,ne=Math.imul(pt,Ht),Z=Z+Math.imul(Ye,Vt)|0,X=X+Math.imul(Ye,jt)|0,X=X+Math.imul(ze,Vt)|0,ne=ne+Math.imul(ze,jt)|0,Z=Z+Math.imul(Ae,or)|0,X=X+Math.imul(Ae,Gr)|0,X=X+Math.imul(Le,or)|0,ne=ne+Math.imul(Le,Gr)|0,Z=Z+Math.imul(ke,Jr)|0,X=X+Math.imul(ke,ot)|0,X=X+Math.imul(De,Jr)|0,ne=ne+Math.imul(De,ot)|0,Z=Z+Math.imul(xe,Kt)|0,X=X+Math.imul(xe,fr)|0,X=X+Math.imul(me,Kt)|0,ne=ne+Math.imul(me,fr)|0;var Pt=(ee+Z|0)+((X&8191)<<13)|0;ee=(ne+(X>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,Z=Math.imul(We,Vt),X=Math.imul(We,jt),X=X+Math.imul(pt,Vt)|0,ne=Math.imul(pt,jt),Z=Z+Math.imul(Ye,or)|0,X=X+Math.imul(Ye,Gr)|0,X=X+Math.imul(ze,or)|0,ne=ne+Math.imul(ze,Gr)|0,Z=Z+Math.imul(Ae,Jr)|0,X=X+Math.imul(Ae,ot)|0,X=X+Math.imul(Le,Jr)|0,ne=ne+Math.imul(Le,ot)|0,Z=Z+Math.imul(ke,Kt)|0,X=X+Math.imul(ke,fr)|0,X=X+Math.imul(De,Kt)|0,ne=ne+Math.imul(De,fr)|0;var Wt=(ee+Z|0)+((X&8191)<<13)|0;ee=(ne+(X>>>13)|0)+(Wt>>>26)|0,Wt&=67108863,Z=Math.imul(We,or),X=Math.imul(We,Gr),X=X+Math.imul(pt,or)|0,ne=Math.imul(pt,Gr),Z=Z+Math.imul(Ye,Jr)|0,X=X+Math.imul(Ye,ot)|0,X=X+Math.imul(ze,Jr)|0,ne=ne+Math.imul(ze,ot)|0,Z=Z+Math.imul(Ae,Kt)|0,X=X+Math.imul(Ae,fr)|0,X=X+Math.imul(Le,Kt)|0,ne=ne+Math.imul(Le,fr)|0;var ar=(ee+Z|0)+((X&8191)<<13)|0;ee=(ne+(X>>>13)|0)+(ar>>>26)|0,ar&=67108863,Z=Math.imul(We,Jr),X=Math.imul(We,ot),X=X+Math.imul(pt,Jr)|0,ne=Math.imul(pt,ot),Z=Z+Math.imul(Ye,Kt)|0,X=X+Math.imul(Ye,fr)|0,X=X+Math.imul(ze,Kt)|0,ne=ne+Math.imul(ze,fr)|0;var kr=(ee+Z|0)+((X&8191)<<13)|0;ee=(ne+(X>>>13)|0)+(kr>>>26)|0,kr&=67108863,Z=Math.imul(We,Kt),X=Math.imul(We,fr),X=X+Math.imul(pt,Kt)|0,ne=Math.imul(pt,fr);var wr=(ee+Z|0)+((X&8191)<<13)|0;return ee=(ne+(X>>>13)|0)+(wr>>>26)|0,wr&=67108863,Y[0]=Ar,Y[1]=et,Y[2]=$e,Y[3]=st,Y[4]=ct,Y[5]=Mt,Y[6]=Ut,Y[7]=Pe,Y[8]=Ee,Y[9]=it,Y[10]=ut,Y[11]=vt,Y[12]=St,Y[13]=yt,Y[14]=Pt,Y[15]=Wt,Y[16]=ar,Y[17]=kr,Y[18]=wr,ee!==0&&(Y[19]=ee,N.length++),N};Math.imul||(x=l);function u(I,D,R){R.negative=D.negative^I.negative,R.length=I.length+D.length;for(var N=0,z=0,G=0;G<R.length-1;G++){var Y=z;z=0;for(var ee=N&67108863,Z=Math.min(G,D.length-1),X=Math.max(0,G-I.length+1);X<=Z;X++){var ne=G-X,ce=I.words[ne]|0,Q=D.words[X]|0,K=ce*Q,U=K&67108863;Y=Y+(K/67108864|0)|0,U=U+ee|0,ee=U&67108863,Y=Y+(U>>>26)|0,z+=Y>>>26,Y&=67108863}R.words[G]=ee,N=Y,Y=z}return N!==0?R.words[G]=N:R.length--,R.strip()}function M(I,D,R){var N=new _;return N.mulp(I,D,R)}r.prototype.mulTo=function(D,R){var N,z=this.length+D.length;return this.length===10&&D.length===10?N=x(this,D,R):z<63?N=l(this,D,R):z<1024?N=u(this,D,R):N=M(this,D,R),N};function _(I,D){this.x=I,this.y=D}_.prototype.makeRBT=function(D){for(var R=new Array(D),N=r.prototype._countBits(D)-1,z=0;z<D;z++)R[z]=this.revBin(z,N,D);return R},_.prototype.revBin=function(D,R,N){if(D===0||D===N-1)return D;for(var z=0,G=0;G<R;G++)z|=(D&1)<<R-G-1,D>>=1;return z},_.prototype.permute=function(D,R,N,z,G,Y){for(var ee=0;ee<Y;ee++)z[ee]=R[D[ee]],G[ee]=N[D[ee]]},_.prototype.transform=function(D,R,N,z,G,Y){this.permute(Y,D,R,N,z,G);for(var ee=1;ee<G;ee<<=1)for(var Z=ee<<1,X=Math.cos(2*Math.PI/Z),ne=Math.sin(2*Math.PI/Z),ce=0;ce<G;ce+=Z)for(var Q=X,K=ne,U=0;U<ee;U++){var H=N[ce+U],q=z[ce+U],re=N[ce+U+ee],j=z[ce+U+ee],$=Q*re-K*j;j=Q*j+K*re,re=$,N[ce+U]=H+re,z[ce+U]=q+j,N[ce+U+ee]=H-re,z[ce+U+ee]=q-j,U!==Z&&($=X*Q-ne*K,K=X*K+ne*Q,Q=$)}},_.prototype.guessLen13b=function(D,R){var N=Math.max(R,D)|1,z=N&1,G=0;for(N=N/2|0;N;N=N>>>1)G++;return 1<<G+1+z},_.prototype.conjugate=function(D,R,N){if(!(N<=1))for(var z=0;z<N/2;z++){var G=D[z];D[z]=D[N-z-1],D[N-z-1]=G,G=R[z],R[z]=-R[N-z-1],R[N-z-1]=-G}},_.prototype.normalize13b=function(D,R){for(var N=0,z=0;z<R/2;z++){var G=Math.round(D[2*z+1]/R)*8192+Math.round(D[2*z]/R)+N;D[z]=G&67108863,G<67108864?N=0:N=G/67108864|0}return D},_.prototype.convert13b=function(D,R,N,z){for(var G=0,Y=0;Y<R;Y++)G=G+(D[Y]|0),N[2*Y]=G&8191,G=G>>>13,N[2*Y+1]=G&8191,G=G>>>13;for(Y=2*R;Y<z;++Y)N[Y]=0;i(G===0),i((G&-8192)===0)},_.prototype.stub=function(D){for(var R=new Array(D),N=0;N<D;N++)R[N]=0;return R},_.prototype.mulp=function(D,R,N){var z=2*this.guessLen13b(D.length,R.length),G=this.makeRBT(z),Y=this.stub(z),ee=new Array(z),Z=new Array(z),X=new Array(z),ne=new Array(z),ce=new Array(z),Q=new Array(z),K=N.words;K.length=z,this.convert13b(D.words,D.length,ee,z),this.convert13b(R.words,R.length,ne,z),this.transform(ee,Y,Z,X,z,G),this.transform(ne,Y,ce,Q,z,G);for(var U=0;U<z;U++){var H=Z[U]*ce[U]-X[U]*Q[U];X[U]=Z[U]*Q[U]+X[U]*ce[U],Z[U]=H}return this.conjugate(Z,X,z),this.transform(Z,X,K,Y,z,G),this.conjugate(K,Y,z),this.normalize13b(K,z),N.negative=D.negative^R.negative,N.length=D.length+R.length,N.strip()},r.prototype.mul=function(D){var R=new r(null);return R.words=new Array(this.length+D.length),this.mulTo(D,R)},r.prototype.mulf=function(D){var R=new r(null);return R.words=new Array(this.length+D.length),M(this,D,R)},r.prototype.imul=function(D){return this.clone().mulTo(D,this)},r.prototype.imuln=function(D){i(typeof D=="number"),i(D<67108864);for(var R=0,N=0;N<this.length;N++){var z=(this.words[N]|0)*D,G=(z&67108863)+(R&67108863);R>>=26,R+=z/67108864|0,R+=G>>>26,this.words[N]=G&67108863}return R!==0&&(this.words[N]=R,this.length++),this},r.prototype.muln=function(D){return this.clone().imuln(D)},r.prototype.sqr=function(){return this.mul(this)},r.prototype.isqr=function(){return this.imul(this.clone())},r.prototype.pow=function(D){var R=y(D);if(R.length===0)return new r(1);for(var N=this,z=0;z<R.length&&R[z]===0;z++,N=N.sqr());if(++z<R.length)for(var G=N.sqr();z<R.length;z++,G=G.sqr())R[z]!==0&&(N=N.mul(G));return N},r.prototype.iushln=function(D){i(typeof D=="number"&&D>=0);var R=D%26,N=(D-R)/26,z=67108863>>>26-R<<26-R,G;if(R!==0){var Y=0;for(G=0;G<this.length;G++){var ee=this.words[G]&z,Z=(this.words[G]|0)-ee<<R;this.words[G]=Z|Y,Y=ee>>>26-R}Y&&(this.words[G]=Y,this.length++)}if(N!==0){for(G=this.length-1;G>=0;G--)this.words[G+N]=this.words[G];for(G=0;G<N;G++)this.words[G]=0;this.length+=N}return this.strip()},r.prototype.ishln=function(D){return i(this.negative===0),this.iushln(D)},r.prototype.iushrn=function(D,R,N){i(typeof D=="number"&&D>=0);var z;R?z=(R-R%26)/26:z=0;var G=D%26,Y=Math.min((D-G)/26,this.length),ee=67108863^67108863>>>G<<G,Z=N;if(z-=Y,z=Math.max(0,z),Z){for(var X=0;X<Y;X++)Z.words[X]=this.words[X];Z.length=Y}if(Y!==0)if(this.length>Y)for(this.length-=Y,X=0;X<this.length;X++)this.words[X]=this.words[X+Y];else this.words[0]=0,this.length=1;var ne=0;for(X=this.length-1;X>=0&&(ne!==0||X>=z);X--){var ce=this.words[X]|0;this.words[X]=ne<<26-G|ce>>>G,ne=ce&ee}return Z&&ne!==0&&(Z.words[Z.length++]=ne),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},r.prototype.ishrn=function(D,R,N){return i(this.negative===0),this.iushrn(D,R,N)},r.prototype.shln=function(D){return this.clone().ishln(D)},r.prototype.ushln=function(D){return this.clone().iushln(D)},r.prototype.shrn=function(D){return this.clone().ishrn(D)},r.prototype.ushrn=function(D){return this.clone().iushrn(D)},r.prototype.testn=function(D){i(typeof D=="number"&&D>=0);var R=D%26,N=(D-R)/26,z=1<<R;if(this.length<=N)return!1;var G=this.words[N];return!!(G&z)},r.prototype.imaskn=function(D){i(typeof D=="number"&&D>=0);var R=D%26,N=(D-R)/26;if(i(this.negative===0,"imaskn works only with positive numbers"),this.length<=N)return this;if(R!==0&&N++,this.length=Math.min(N,this.length),R!==0){var z=67108863^67108863>>>R<<R;this.words[this.length-1]&=z}return this.strip()},r.prototype.maskn=function(D){return this.clone().imaskn(D)},r.prototype.iaddn=function(D){return i(typeof D=="number"),i(D<67108864),D<0?this.isubn(-D):this.negative!==0?this.length===1&&(this.words[0]|0)<D?(this.words[0]=D-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(D),this.negative=1,this):this._iaddn(D)},r.prototype._iaddn=function(D){this.words[0]+=D;for(var R=0;R<this.length&&this.words[R]>=67108864;R++)this.words[R]-=67108864,R===this.length-1?this.words[R+1]=1:this.words[R+1]++;return this.length=Math.max(this.length,R+1),this},r.prototype.isubn=function(D){if(i(typeof D=="number"),i(D<67108864),D<0)return this.iaddn(-D);if(this.negative!==0)return this.negative=0,this.iaddn(D),this.negative=1,this;if(this.words[0]-=D,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var R=0;R<this.length&&this.words[R]<0;R++)this.words[R]+=67108864,this.words[R+1]-=1;return this.strip()},r.prototype.addn=function(D){return this.clone().iaddn(D)},r.prototype.subn=function(D){return this.clone().isubn(D)},r.prototype.iabs=function(){return this.negative=0,this},r.prototype.abs=function(){return this.clone().iabs()},r.prototype._ishlnsubmul=function(D,R,N){var z=D.length+N,G;this._expand(z);var Y,ee=0;for(G=0;G<D.length;G++){Y=(this.words[G+N]|0)+ee;var Z=(D.words[G]|0)*R;Y-=Z&67108863,ee=(Y>>26)-(Z/67108864|0),this.words[G+N]=Y&67108863}for(;G<this.length-N;G++)Y=(this.words[G+N]|0)+ee,ee=Y>>26,this.words[G+N]=Y&67108863;if(ee===0)return this.strip();for(i(ee===-1),ee=0,G=0;G<this.length;G++)Y=-(this.words[G]|0)+ee,ee=Y>>26,this.words[G]=Y&67108863;return this.negative=1,this.strip()},r.prototype._wordDiv=function(D,R){var N=this.length-D.length,z=this.clone(),G=D,Y=G.words[G.length-1]|0,ee=this._countBits(Y);N=26-ee,N!==0&&(G=G.ushln(N),z.iushln(N),Y=G.words[G.length-1]|0);var Z=z.length-G.length,X;if(R!=="mod"){X=new r(null),X.length=Z+1,X.words=new Array(X.length);for(var ne=0;ne<X.length;ne++)X.words[ne]=0}var ce=z.clone()._ishlnsubmul(G,1,Z);ce.negative===0&&(z=ce,X&&(X.words[Z]=1));for(var Q=Z-1;Q>=0;Q--){var K=(z.words[G.length+Q]|0)*67108864+(z.words[G.length+Q-1]|0);for(K=Math.min(K/Y|0,67108863),z._ishlnsubmul(G,K,Q);z.negative!==0;)K--,z.negative=0,z._ishlnsubmul(G,1,Q),z.isZero()||(z.negative^=1);X&&(X.words[Q]=K)}return X&&X.strip(),z.strip(),R!=="div"&&N!==0&&z.iushrn(N),{div:X||null,mod:z}},r.prototype.divmod=function(D,R,N){if(i(!D.isZero()),this.isZero())return{div:new r(0),mod:new r(0)};var z,G,Y;return this.negative!==0&&D.negative===0?(Y=this.neg().divmod(D,R),R!=="mod"&&(z=Y.div.neg()),R!=="div"&&(G=Y.mod.neg(),N&&G.negative!==0&&G.iadd(D)),{div:z,mod:G}):this.negative===0&&D.negative!==0?(Y=this.divmod(D.neg(),R),R!=="mod"&&(z=Y.div.neg()),{div:z,mod:Y.mod}):(this.negative&D.negative)!==0?(Y=this.neg().divmod(D.neg(),R),R!=="div"&&(G=Y.mod.neg(),N&&G.negative!==0&&G.isub(D)),{div:Y.div,mod:G}):D.length>this.length||this.cmp(D)<0?{div:new r(0),mod:this}:D.length===1?R==="div"?{div:this.divn(D.words[0]),mod:null}:R==="mod"?{div:null,mod:new r(this.modn(D.words[0]))}:{div:this.divn(D.words[0]),mod:new r(this.modn(D.words[0]))}:this._wordDiv(D,R)},r.prototype.div=function(D){return this.divmod(D,"div",!1).div},r.prototype.mod=function(D){return this.divmod(D,"mod",!1).mod},r.prototype.umod=function(D){return this.divmod(D,"mod",!0).mod},r.prototype.divRound=function(D){var R=this.divmod(D);if(R.mod.isZero())return R.div;var N=R.div.negative!==0?R.mod.isub(D):R.mod,z=D.ushrn(1),G=D.andln(1),Y=N.cmp(z);return Y<0||G===1&&Y===0?R.div:R.div.negative!==0?R.div.isubn(1):R.div.iaddn(1)},r.prototype.modn=function(D){i(D<=67108863);for(var R=(1<<26)%D,N=0,z=this.length-1;z>=0;z--)N=(R*N+(this.words[z]|0))%D;return N},r.prototype.idivn=function(D){i(D<=67108863);for(var R=0,N=this.length-1;N>=0;N--){var z=(this.words[N]|0)+R*67108864;this.words[N]=z/D|0,R=z%D}return this.strip()},r.prototype.divn=function(D){return this.clone().idivn(D)},r.prototype.egcd=function(D){i(D.negative===0),i(!D.isZero());var R=this,N=D.clone();R.negative!==0?R=R.umod(D):R=R.clone();for(var z=new r(1),G=new r(0),Y=new r(0),ee=new r(1),Z=0;R.isEven()&&N.isEven();)R.iushrn(1),N.iushrn(1),++Z;for(var X=N.clone(),ne=R.clone();!R.isZero();){for(var ce=0,Q=1;(R.words[0]&Q)===0&&ce<26;++ce,Q<<=1);if(ce>0)for(R.iushrn(ce);ce-- >0;)(z.isOdd()||G.isOdd())&&(z.iadd(X),G.isub(ne)),z.iushrn(1),G.iushrn(1);for(var K=0,U=1;(N.words[0]&U)===0&&K<26;++K,U<<=1);if(K>0)for(N.iushrn(K);K-- >0;)(Y.isOdd()||ee.isOdd())&&(Y.iadd(X),ee.isub(ne)),Y.iushrn(1),ee.iushrn(1);R.cmp(N)>=0?(R.isub(N),z.isub(Y),G.isub(ee)):(N.isub(R),Y.isub(z),ee.isub(G))}return{a:Y,b:ee,gcd:N.iushln(Z)}},r.prototype._invmp=function(D){i(D.negative===0),i(!D.isZero());var R=this,N=D.clone();R.negative!==0?R=R.umod(D):R=R.clone();for(var z=new r(1),G=new r(0),Y=N.clone();R.cmpn(1)>0&&N.cmpn(1)>0;){for(var ee=0,Z=1;(R.words[0]&Z)===0&&ee<26;++ee,Z<<=1);if(ee>0)for(R.iushrn(ee);ee-- >0;)z.isOdd()&&z.iadd(Y),z.iushrn(1);for(var X=0,ne=1;(N.words[0]&ne)===0&&X<26;++X,ne<<=1);if(X>0)for(N.iushrn(X);X-- >0;)G.isOdd()&&G.iadd(Y),G.iushrn(1);R.cmp(N)>=0?(R.isub(N),z.isub(G)):(N.isub(R),G.isub(z))}var ce;return R.cmpn(1)===0?ce=z:ce=G,ce.cmpn(0)<0&&ce.iadd(D),ce},r.prototype.gcd=function(D){if(this.isZero())return D.abs();if(D.isZero())return this.abs();var R=this.clone(),N=D.clone();R.negative=0,N.negative=0;for(var z=0;R.isEven()&&N.isEven();z++)R.iushrn(1),N.iushrn(1);do{for(;R.isEven();)R.iushrn(1);for(;N.isEven();)N.iushrn(1);var G=R.cmp(N);if(G<0){var Y=R;R=N,N=Y}else if(G===0||N.cmpn(1)===0)break;R.isub(N)}while(!0);return N.iushln(z)},r.prototype.invm=function(D){return this.egcd(D).a.umod(D)},r.prototype.isEven=function(){return(this.words[0]&1)===0},r.prototype.isOdd=function(){return(this.words[0]&1)===1},r.prototype.andln=function(D){return this.words[0]&D},r.prototype.bincn=function(D){i(typeof D=="number");var R=D%26,N=(D-R)/26,z=1<<R;if(this.length<=N)return this._expand(N+1),this.words[N]|=z,this;for(var G=z,Y=N;G!==0&&Y<this.length;Y++){var ee=this.words[Y]|0;ee+=G,G=ee>>>26,ee&=67108863,this.words[Y]=ee}return G!==0&&(this.words[Y]=G,this.length++),this},r.prototype.isZero=function(){return this.length===1&&this.words[0]===0},r.prototype.cmpn=function(D){var R=D<0;if(this.negative!==0&&!R)return-1;if(this.negative===0&&R)return 1;this.strip();var N;if(this.length>1)N=1;else{R&&(D=-D),i(D<=67108863,"Number is too big");var z=this.words[0]|0;N=z===D?0:z<D?-1:1}return this.negative!==0?-N|0:N},r.prototype.cmp=function(D){if(this.negative!==0&&D.negative===0)return-1;if(this.negative===0&&D.negative!==0)return 1;var R=this.ucmp(D);return this.negative!==0?-R|0:R},r.prototype.ucmp=function(D){if(this.length>D.length)return 1;if(this.length<D.length)return-1;for(var R=0,N=this.length-1;N>=0;N--){var z=this.words[N]|0,G=D.words[N]|0;if(z!==G){z<G?R=-1:z>G&&(R=1);break}}return R},r.prototype.gtn=function(D){return this.cmpn(D)===1},r.prototype.gt=function(D){return this.cmp(D)===1},r.prototype.gten=function(D){return this.cmpn(D)>=0},r.prototype.gte=function(D){return this.cmp(D)>=0},r.prototype.ltn=function(D){return this.cmpn(D)===-1},r.prototype.lt=function(D){return this.cmp(D)===-1},r.prototype.lten=function(D){return this.cmpn(D)<=0},r.prototype.lte=function(D){return this.cmp(D)<=0},r.prototype.eqn=function(D){return this.cmpn(D)===0},r.prototype.eq=function(D){return this.cmp(D)===0},r.red=function(D){return new P(D)},r.prototype.toRed=function(D){return i(!this.red,"Already a number in reduction context"),i(this.negative===0,"red works only with positives"),D.convertTo(this)._forceRed(D)},r.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},r.prototype._forceRed=function(D){return this.red=D,this},r.prototype.forceRed=function(D){return i(!this.red,"Already a number in reduction context"),this._forceRed(D)},r.prototype.redAdd=function(D){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,D)},r.prototype.redIAdd=function(D){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,D)},r.prototype.redSub=function(D){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,D)},r.prototype.redISub=function(D){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,D)},r.prototype.redShl=function(D){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,D)},r.prototype.redMul=function(D){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,D),this.red.mul(this,D)},r.prototype.redIMul=function(D){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,D),this.red.imul(this,D)},r.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},r.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},r.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},r.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},r.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},r.prototype.redPow=function(D){return i(this.red&&!D.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,D)};var p={k256:null,p224:null,p192:null,p25519:null};function w(I,D){this.name=I,this.p=new r(D,16),this.n=this.p.bitLength(),this.k=new r(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}w.prototype._tmp=function(){var D=new r(null);return D.words=new Array(Math.ceil(this.n/13)),D},w.prototype.ireduce=function(D){var R=D,N;do this.split(R,this.tmp),R=this.imulK(R),R=R.iadd(this.tmp),N=R.bitLength();while(N>this.n);var z=N<this.n?-1:R.ucmp(this.p);return z===0?(R.words[0]=0,R.length=1):z>0?R.isub(this.p):R.strip!==void 0?R.strip():R._strip(),R},w.prototype.split=function(D,R){D.iushrn(this.n,0,R)},w.prototype.imulK=function(D){return D.imul(this.k)};function h(){w.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(h,w),h.prototype.split=function(D,R){for(var N=4194303,z=Math.min(D.length,9),G=0;G<z;G++)R.words[G]=D.words[G];if(R.length=z,D.length<=9){D.words[0]=0,D.length=1;return}var Y=D.words[9];for(R.words[R.length++]=Y&N,G=10;G<D.length;G++){var ee=D.words[G]|0;D.words[G-10]=(ee&N)<<4|Y>>>22,Y=ee}Y>>>=22,D.words[G-10]=Y,Y===0&&D.length>10?D.length-=10:D.length-=9},h.prototype.imulK=function(D){D.words[D.length]=0,D.words[D.length+1]=0,D.length+=2;for(var R=0,N=0;N<D.length;N++){var z=D.words[N]|0;R+=z*977,D.words[N]=R&67108863,R=z*64+(R/67108864|0)}return D.words[D.length-1]===0&&(D.length--,D.words[D.length-1]===0&&D.length--),D};function L(){w.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(L,w);function S(){w.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(S,w);function E(){w.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(E,w),E.prototype.imulK=function(D){for(var R=0,N=0;N<D.length;N++){var z=(D.words[N]|0)*19+R,G=z&67108863;z>>>=26,D.words[N]=G,R=z}return R!==0&&(D.words[D.length++]=R),D},r._prime=function(D){if(p[D])return p[D];var R;if(D==="k256")R=new h;else if(D==="p224")R=new L;else if(D==="p192")R=new S;else if(D==="p25519")R=new E;else throw new Error("Unknown prime "+D);return p[D]=R,R};function P(I){if(typeof I=="string"){var D=r._prime(I);this.m=D.p,this.prime=D}else i(I.gtn(1),"modulus must be greater than 1"),this.m=I,this.prime=null}P.prototype._verify1=function(D){i(D.negative===0,"red works only with positives"),i(D.red,"red works only with red numbers")},P.prototype._verify2=function(D,R){i((D.negative|R.negative)===0,"red works only with positives"),i(D.red&&D.red===R.red,"red works only with red numbers")},P.prototype.imod=function(D){return this.prime?this.prime.ireduce(D)._forceRed(this):D.umod(this.m)._forceRed(this)},P.prototype.neg=function(D){return D.isZero()?D.clone():this.m.sub(D)._forceRed(this)},P.prototype.add=function(D,R){this._verify2(D,R);var N=D.add(R);return N.cmp(this.m)>=0&&N.isub(this.m),N._forceRed(this)},P.prototype.iadd=function(D,R){this._verify2(D,R);var N=D.iadd(R);return N.cmp(this.m)>=0&&N.isub(this.m),N},P.prototype.sub=function(D,R){this._verify2(D,R);var N=D.sub(R);return N.cmpn(0)<0&&N.iadd(this.m),N._forceRed(this)},P.prototype.isub=function(D,R){this._verify2(D,R);var N=D.isub(R);return N.cmpn(0)<0&&N.iadd(this.m),N},P.prototype.shl=function(D,R){return this._verify1(D),this.imod(D.ushln(R))},P.prototype.imul=function(D,R){return this._verify2(D,R),this.imod(D.imul(R))},P.prototype.mul=function(D,R){return this._verify2(D,R),this.imod(D.mul(R))},P.prototype.isqr=function(D){return this.imul(D,D.clone())},P.prototype.sqr=function(D){return this.mul(D,D)},P.prototype.sqrt=function(D){if(D.isZero())return D.clone();var R=this.m.andln(3);if(i(R%2===1),R===3){var N=this.m.add(new r(1)).iushrn(2);return this.pow(D,N)}for(var z=this.m.subn(1),G=0;!z.isZero()&&z.andln(1)===0;)G++,z.iushrn(1);i(!z.isZero());var Y=new r(1).toRed(this),ee=Y.redNeg(),Z=this.m.subn(1).iushrn(1),X=this.m.bitLength();for(X=new r(2*X*X).toRed(this);this.pow(X,Z).cmp(ee)!==0;)X.redIAdd(ee);for(var ne=this.pow(X,z),ce=this.pow(D,z.addn(1).iushrn(1)),Q=this.pow(D,z),K=G;Q.cmp(Y)!==0;){for(var U=Q,H=0;U.cmp(Y)!==0;H++)U=U.redSqr();i(H<K);var q=this.pow(ne,new r(1).iushln(K-H-1));ce=ce.redMul(q),ne=q.redSqr(),Q=Q.redMul(ne),K=H}return ce},P.prototype.invm=function(D){var R=D._invmp(this.m);return R.negative!==0?(R.negative=0,this.imod(R).redNeg()):this.imod(R)},P.prototype.pow=function(D,R){if(R.isZero())return new r(1).toRed(this);if(R.cmpn(1)===0)return D.clone();var N=4,z=new Array(1<<N);z[0]=new r(1).toRed(this),z[1]=D;for(var G=2;G<z.length;G++)z[G]=this.mul(z[G-1],D);var Y=z[0],ee=0,Z=0,X=R.bitLength()%26;for(X===0&&(X=26),G=R.length-1;G>=0;G--){for(var ne=R.words[G],ce=X-1;ce>=0;ce--){var Q=ne>>ce&1;if(Y!==z[0]&&(Y=this.sqr(Y)),Q===0&&ee===0){Z=0;continue}ee<<=1,ee|=Q,Z++,!(Z!==N&&(G!==0||ce!==0))&&(Y=this.mul(Y,z[ee]),Z=0,ee=0)}X=26}return Y},P.prototype.convertTo=function(D){var R=D.umod(this.m);return R===D?R.clone():R},P.prototype.convertFrom=function(D){var R=D.clone();return R.red=null,R},r.mont=function(D){return new F(D)};function F(I){P.call(this,I),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new r(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(F,P),F.prototype.convertTo=function(D){return this.imod(D.ushln(this.shift))},F.prototype.convertFrom=function(D){var R=this.imod(D.mul(this.rinv));return R.red=null,R},F.prototype.imul=function(D,R){if(D.isZero()||R.isZero())return D.words[0]=0,D.length=1,D;var N=D.imul(R),z=N.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),G=N.isub(z).iushrn(this.shift),Y=G;return G.cmp(this.m)>=0?Y=G.isub(this.m):G.cmpn(0)<0&&(Y=G.iadd(this.m)),Y._forceRed(this)},F.prototype.mul=function(D,R){if(D.isZero()||R.isZero())return new r(0)._forceRed(this);var N=D.mul(R),z=N.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),G=N.isub(z).iushrn(this.shift),Y=G;return G.cmp(this.m)>=0?Y=G.isub(this.m):G.cmpn(0)<0&&(Y=G.iadd(this.m)),Y._forceRed(this)},F.prototype.invm=function(D){var R=this.imod(D._invmp(this.m).mul(this.r2));return R._forceRed(this)}})(typeof A>"u"||A,this)},{buffer:2}],34:[function(c,A,T){A.exports=e;function e(a){var i,n,r,v=a.length,s=0;for(i=0;i<v;++i)s+=a[i].length;var o=new Array(s),b=0;for(i=0;i<v;++i){var g=a[i],d=g.length;for(n=0;n<d;++n){var f=o[b++]=new Array(d-1),y=0;for(r=0;r<d;++r)r!==n&&(f[y++]=g[r]);if(n&1){var l=f[1];f[1]=f[0],f[0]=l}}}return o}},{}],35:[function(c,A,T){A.exports=d;var e=c("typedarray-pool"),a=c("./lib/sweep"),i=c("./lib/intersect");function n(f,y){for(var l=0;l<f;++l)if(!(y[l]<=y[l+f]))return!0;return!1}function r(f,y,l,x){for(var u=0,M=0,_=0,p=f.length;_<p;++_){var w=f[_];if(!n(y,w)){for(var h=0;h<2*y;++h)l[u++]=w[h];x[M++]=_}}return M}function v(f,y,l,x){var u=f.length,M=y.length;if(!(u<=0||M<=0)){var _=f[0].length>>>1;if(!(_<=0)){var p,w=e.mallocDouble(2*_*u),h=e.mallocInt32(u);if(u=r(f,_,w,h),u>0){if(_===1&&x)a.init(u),p=a.sweepComplete(_,l,0,u,w,h,0,u,w,h);else{var L=e.mallocDouble(2*_*M),S=e.mallocInt32(M);M=r(y,_,L,S),M>0&&(a.init(u+M),_===1?p=a.sweepBipartite(_,l,0,u,w,h,0,M,L,S):p=i(_,l,x,u,w,h,M,L,S),e.free(L),e.free(S))}e.free(w),e.free(h)}return p}}}var s;function o(f,y){s.push([f,y])}function b(f){return s=[],v(f,f,o,!0),s}function g(f,y){return s=[],v(f,y,o,!1),s}function d(f,y,l){switch(arguments.length){case 1:return b(f);case 2:return typeof y=="function"?v(f,f,y,!0):g(f,y);case 3:return v(f,y,l,!1);default:throw new Error("box-intersect: Invalid arguments")}}},{"./lib/intersect":37,"./lib/sweep":41,"typedarray-pool":308}],36:[function(c,A,T){function e(){function n(s,o,b,g,d,f,y,l,x,u,M){for(var _=2*s,p=g,w=_*g;p<d;++p,w+=_){var h=f[o+w],L=f[o+w+s],S=y[p];e:for(var E=l,P=_*l;E<x;++E,P+=_){var F=u[o+P],I=u[o+P+s],D=M[E];if(!(I<h||L<F)){for(var R=o+1;R<s;++R){var N=f[R+w],z=f[R+s+w],G=u[R+P],Y=u[R+s+P];if(z<G||Y<N)continue e}var ee=b(S,D);if(ee!==void 0)return ee}}}}function r(s,o,b,g,d,f,y,l,x,u,M){for(var _=2*s,p=l,w=_*l;p<x;++p,w+=_){var h=u[o+w],L=u[o+w+s],S=M[p];e:for(var E=g,P=_*g;E<d;++E,P+=_){var F=f[o+P],I=f[o+P+s],D=y[E];if(!(L<F||I<h)){for(var R=o+1;R<s;++R){var N=f[R+P],z=f[R+s+P],G=u[R+w],Y=u[R+s+w];if(z<G||Y<N)continue e}var ee=b(D,S);if(ee!==void 0)return ee}}}}function v(s,o,b,g,d,f,y,l,x,u,M){return d-g>x-l?n(s,o,b,g,d,f,y,l,x,u,M):r(s,o,b,g,d,f,y,l,x,u,M)}return v}function a(){function n(b,g,d,f,y,l,x,u,M,_,p){for(var w=2*b,h=f,L=w*f;h<y;++h,L+=w){var S=l[g+L],E=l[g+L+b],P=x[h];e:for(var F=u,I=w*u;F<M;++F,I+=w){var D=_[g+I],R=p[F];if(!(D<=S||E<D)){for(var N=g+1;N<b;++N){var z=l[N+L],G=l[N+b+L],Y=_[N+I],ee=_[N+b+I];if(G<Y||ee<z)continue e}var Z=d(R,P);if(Z!==void 0)return Z}}}}function r(b,g,d,f,y,l,x,u,M,_,p){for(var w=2*b,h=f,L=w*f;h<y;++h,L+=w){var S=l[g+L],E=l[g+L+b],P=x[h];e:for(var F=u,I=w*u;F<M;++F,I+=w){var D=_[g+I],R=p[F];if(!(D<S||E<D)){for(var N=g+1;N<b;++N){var z=l[N+L],G=l[N+b+L],Y=_[N+I],ee=_[N+b+I];if(G<Y||ee<z)continue e}var Z=d(P,R);if(Z!==void 0)return Z}}}}function v(b,g,d,f,y,l,x,u,M,_,p){for(var w=2*b,h=u,L=w*u;h<M;++h,L+=w){var S=_[g+L],E=p[h];e:for(var P=f,F=w*f;P<y;++P,F+=w){var I=l[g+F],D=l[g+F+b],R=x[P];if(!(S<=I||D<S)){for(var N=g+1;N<b;++N){var z=l[N+F],G=l[N+b+F],Y=_[N+L],ee=_[N+b+L];if(G<Y||ee<z)continue e}var Z=d(E,R);if(Z!==void 0)return Z}}}}function s(b,g,d,f,y,l,x,u,M,_,p){for(var w=2*b,h=u,L=w*u;h<M;++h,L+=w){var S=_[g+L],E=p[h];e:for(var P=f,F=w*f;P<y;++P,F+=w){var I=l[g+F],D=l[g+F+b],R=x[P];if(!(S<I||D<S)){for(var N=g+1;N<b;++N){var z=l[N+F],G=l[N+b+F],Y=_[N+L],ee=_[N+b+L];if(G<Y||ee<z)continue e}var Z=d(R,E);if(Z!==void 0)return Z}}}}function o(b,g,d,f,y,l,x,u,M,_,p,w){return l-y>_-M?f?n(b,g,d,y,l,x,u,M,_,p,w):r(b,g,d,y,l,x,u,M,_,p,w):f?v(b,g,d,y,l,x,u,M,_,p,w):s(b,g,d,y,l,x,u,M,_,p,w)}return o}function i(n){return n?e():a()}T.partial=i(!1),T.full=i(!0)},{}],37:[function(c,A,T){A.exports=I;var e=c("typedarray-pool"),a=c("bit-twiddle"),i=c("./brute"),n=i.partial,r=i.full,v=c("./sweep"),s=c("./median"),o=c("./partition"),b=128,g=1<<22,d=1<<22,f=o("!(lo>=p0)&&!(p1>=hi)"),y=o("lo===p0"),l=o("lo<p0"),x=o("hi<=p0"),u=o("lo<=p0&&p0<=hi"),M=o("lo<p0&&p0<=hi"),_=6,p=2,w=1024,h=e.mallocInt32(w),L=e.mallocDouble(w);function S(D,R){var N=8*a.log2(R+1)*(D+1)|0,z=a.nextPow2(_*N);h.length<z&&(e.free(h),h=e.mallocInt32(z));var G=a.nextPow2(p*N);L.length<G&&(e.free(L),L=e.mallocDouble(G))}function E(D,R,N,z,G,Y,ee,Z,X){var ne=_*D;h[ne]=R,h[ne+1]=N,h[ne+2]=z,h[ne+3]=G,h[ne+4]=Y,h[ne+5]=ee;var ce=p*D;L[ce]=Z,L[ce+1]=X}function P(D,R,N,z,G,Y,ee,Z,X,ne,ce){var Q=2*D,K=X*Q,U=ne[K+R];e:for(var H=G,q=G*Q;H<Y;++H,q+=Q){var re=ee[q+R],j=ee[q+R+D];if(!(U<re||j<U)&&!(z&&U===re)){for(var $=Z[H],ie=R+1;ie<D;++ie){var re=ee[q+ie],j=ee[q+ie+D],oe=ne[K+ie],ae=ne[K+ie+D];if(j<oe||ae<re)continue e}var se;if(z?se=N(ce,$):se=N($,ce),se!==void 0)return se}}}function F(D,R,N,z,G,Y,ee,Z,X,ne){var ce=2*D,Q=Z*ce,K=X[Q+R];e:for(var U=z,H=z*ce;U<G;++U,H+=ce){var q=ee[U];if(q!==ne){var re=Y[H+R],j=Y[H+R+D];if(!(K<re||j<K)){for(var $=R+1;$<D;++$){var re=Y[H+$],j=Y[H+$+D],ie=X[Q+$],oe=X[Q+$+D];if(j<ie||oe<re)continue e}var ae=N(q,ne);if(ae!==void 0)return ae}}}}function I(D,R,N,z,G,Y,ee,Z,X){S(D,z+ee);var ne=0,ce=2*D,Q;for(E(ne++,0,0,z,0,ee,N?16:0,-1/0,1/0),N||E(ne++,0,0,ee,0,z,1,-1/0,1/0);ne>0;){ne-=1;var K=ne*_,U=h[K],H=h[K+1],q=h[K+2],re=h[K+3],j=h[K+4],$=h[K+5],ie=ne*p,oe=L[ie],ae=L[ie+1],se=$&1,_e=!!($&16),ue=G,ye=Y,xe=Z,me=X;if(se&&(ue=Z,ye=X,xe=G,me=Y),!($&2&&(q=l(D,U,H,q,ue,ye,ae),H>=q))&&!($&4&&(H=x(D,U,H,q,ue,ye,oe),H>=q))){var be=q-H,ke=j-re;if(_e){if(D*be*(be+ke)<d){if(Q=v.scanComplete(D,U,R,H,q,ue,ye,re,j,xe,me),Q!==void 0)return Q;continue}}else if(D*Math.min(be,ke)<b){if(Q=n(D,U,R,se,H,q,ue,ye,re,j,xe,me),Q!==void 0)return Q;continue}else if(D*be*ke<g){if(Q=v.scanBipartite(D,U,R,se,H,q,ue,ye,re,j,xe,me),Q!==void 0)return Q;continue}var De=f(D,U,H,q,ue,ye,oe,ae);if(H<De)if(D*(De-H)<b){if(Q=r(D,U+1,R,H,De,ue,ye,re,j,xe,me),Q!==void 0)return Q}else if(U===D-2){if(se?Q=v.sweepBipartite(D,R,re,j,xe,me,H,De,ue,ye):Q=v.sweepBipartite(D,R,H,De,ue,ye,re,j,xe,me),Q!==void 0)return Q}else E(ne++,U+1,H,De,re,j,se,-1/0,1/0),E(ne++,U+1,re,j,H,De,se^1,-1/0,1/0);if(De<q){var Ve=s(D,U,re,j,xe,me),Ae=xe[ce*Ve+U],Le=y(D,U,Ve,j,xe,me,Ae);if(Le<j&&E(ne++,U,De,q,Le,j,(se|4)+(_e?16:0),Ae,ae),re<Ve&&E(ne++,U,De,q,re,Ve,(se|2)+(_e?16:0),oe,Ae),Ve+1===Le){if(_e?Q=F(D,U,R,De,q,ue,ye,Ve,xe,me[Ve]):Q=P(D,U,R,se,De,q,ue,ye,Ve,xe,me[Ve]),Q!==void 0)return Q}else if(Ve<Le){var je;if(_e){if(je=u(D,U,De,q,ue,ye,Ae),De<je){var Ye=y(D,U,De,je,ue,ye,Ae);if(U===D-2){if(De<Ye&&(Q=v.sweepComplete(D,R,De,Ye,ue,ye,Ve,Le,xe,me),Q!==void 0)||Ye<je&&(Q=v.sweepBipartite(D,R,Ye,je,ue,ye,Ve,Le,xe,me),Q!==void 0))return Q}else De<Ye&&E(ne++,U+1,De,Ye,Ve,Le,16,-1/0,1/0),Ye<je&&(E(ne++,U+1,Ye,je,Ve,Le,0,-1/0,1/0),E(ne++,U+1,Ve,Le,Ye,je,1,-1/0,1/0))}}else se?je=M(D,U,De,q,ue,ye,Ae):je=u(D,U,De,q,ue,ye,Ae),De<je&&(U===D-2?se?Q=v.sweepBipartite(D,R,Ve,Le,xe,me,De,je,ue,ye):Q=v.sweepBipartite(D,R,De,je,ue,ye,Ve,Le,xe,me):(E(ne++,U+1,De,je,Ve,Le,se,-1/0,1/0),E(ne++,U+1,Ve,Le,De,je,se^1,-1/0,1/0)))}}}}}},{"./brute":36,"./median":38,"./partition":39,"./sweep":41,"bit-twiddle":32,"typedarray-pool":308}],38:[function(c,A,T){A.exports=r;var e=c("./partition"),a=e("lo<p0"),i=8;function n(v,s,o,b,g,d){for(var f=2*v,y=f*(o+1)+s,l=o+1;l<b;++l,y+=f)for(var x=g[y],u=l,M=f*(l-1);u>o&&g[M+s]>x;--u,M-=f){for(var _=M,p=M+f,w=0;w<f;++w,++_,++p){var h=g[_];g[_]=g[p],g[p]=h}var L=d[u];d[u]=d[u-1],d[u-1]=L}}function r(v,s,o,b,g,d){if(b<=o+1)return o;for(var f=o,y=b,l=b+o>>>1,x=2*v,u=l,M=g[x*l+s];f<y;){if(y-f<i){n(v,s,f,y,g,d),M=g[x*l+s];break}var _=y-f,p=Math.random()*_+f|0,w=g[x*p+s],h=Math.random()*_+f|0,L=g[x*h+s],S=Math.random()*_+f|0,E=g[x*S+s];w<=L?E>=L?(u=h,M=L):w>=E?(u=p,M=w):(u=S,M=E):L>=E?(u=h,M=L):E>=w?(u=p,M=w):(u=S,M=E);for(var I=x*(y-1),D=x*u,P=0;P<x;++P,++I,++D){var F=g[I];g[I]=g[D],g[D]=F}var R=d[y-1];d[y-1]=d[u],d[u]=R,u=a(v,s,f,y-1,g,d,M);for(var I=x*(y-1),D=x*u,P=0;P<x;++P,++I,++D){var F=g[I];g[I]=g[D],g[D]=F}var R=d[y-1];if(d[y-1]=d[u],d[u]=R,l<u){for(y=u-1;f<y&&g[x*(y-1)+s]===M;)y-=1;y+=1}else if(u<l)for(f=u+1;f<y&&g[x*f+s]===M;)f+=1;else break}return a(v,s,o,l,g,d,g[x*l+s])}},{"./partition":39}],39:[function(c,A,T){A.exports=a;var e={"lo===p0":i,"lo<p0":n,"lo<=p0":r,"hi<=p0":v,"lo<p0&&p0<=hi":o,"lo<=p0&&p0<=hi":s,"!(lo>=p0)&&!(p1>=hi)":b};function a(g){return e[g]}function i(g,d,f,y,l,x,u){for(var M=2*g,_=M*f,p=_,w=f,h=d,L=g+d,S=f;y>S;++S,_+=M){var E=l[_+h];if(E===u)if(w===S)w+=1,p+=M;else{for(var P=0;M>P;++P){var F=l[_+P];l[_+P]=l[p],l[p++]=F}var I=x[S];x[S]=x[w],x[w++]=I}}return w}function n(g,d,f,y,l,x,u){for(var M=2*g,_=M*f,p=_,w=f,h=d,L=g+d,S=f;y>S;++S,_+=M){var E=l[_+h];if(E<u)if(w===S)w+=1,p+=M;else{for(var P=0;M>P;++P){var F=l[_+P];l[_+P]=l[p],l[p++]=F}var I=x[S];x[S]=x[w],x[w++]=I}}return w}function r(g,d,f,y,l,x,u){for(var M=2*g,_=M*f,p=_,w=f,h=d,L=g+d,S=f;y>S;++S,_+=M){var E=l[_+L];if(E<=u)if(w===S)w+=1,p+=M;else{for(var P=0;M>P;++P){var F=l[_+P];l[_+P]=l[p],l[p++]=F}var I=x[S];x[S]=x[w],x[w++]=I}}return w}function v(g,d,f,y,l,x,u){for(var M=2*g,_=M*f,p=_,w=f,h=d,L=g+d,S=f;y>S;++S,_+=M){var E=l[_+L];if(E<=u)if(w===S)w+=1,p+=M;else{for(var P=0;M>P;++P){var F=l[_+P];l[_+P]=l[p],l[p++]=F}var I=x[S];x[S]=x[w],x[w++]=I}}return w}function s(g,d,f,y,l,x,u){for(var M=2*g,_=M*f,p=_,w=f,h=d,L=g+d,S=f;y>S;++S,_+=M){var E=l[_+h],P=l[_+L];if(E<=u&&u<=P)if(w===S)w+=1,p+=M;else{for(var F=0;M>F;++F){var I=l[_+F];l[_+F]=l[p],l[p++]=I}var D=x[S];x[S]=x[w],x[w++]=D}}return w}function o(g,d,f,y,l,x,u){for(var M=2*g,_=M*f,p=_,w=f,h=d,L=g+d,S=f;y>S;++S,_+=M){var E=l[_+h],P=l[_+L];if(E<u&&u<=P)if(w===S)w+=1,p+=M;else{for(var F=0;M>F;++F){var I=l[_+F];l[_+F]=l[p],l[p++]=I}var D=x[S];x[S]=x[w],x[w++]=D}}return w}function b(g,d,f,y,l,x,u,M){for(var _=2*g,p=_*f,w=p,h=f,L=d,S=g+d,E=f;y>E;++E,p+=_){var P=l[p+L],F=l[p+S];if(!(P>=u)&&!(M>=F))if(h===E)h+=1,w+=_;else{for(var I=0;_>I;++I){var D=l[p+I];l[p+I]=l[w],l[w++]=D}var R=x[E];x[E]=x[h],x[h++]=R}}return h}},{}],40:[function(c,A,T){A.exports=a;var e=32;function a(d,f){f<=4*e?i(0,f-1,d):g(0,f-1,d)}function i(d,f,y){for(var l=2*(d+1),x=d+1;x<=f;++x){for(var u=y[l++],M=y[l++],_=x,p=l-2;_-- >d;){var w=y[p-2],h=y[p-1];if(w<u)break;if(w===u&&h<M)break;y[p]=w,y[p+1]=h,p-=2}y[p]=u,y[p+1]=M}}function n(d,f,y){d*=2,f*=2;var l=y[d],x=y[d+1];y[d]=y[f],y[d+1]=y[f+1],y[f]=l,y[f+1]=x}function r(d,f,y){d*=2,f*=2,y[d]=y[f],y[d+1]=y[f+1]}function v(d,f,y,l){d*=2,f*=2,y*=2;var x=l[d],u=l[d+1];l[d]=l[f],l[d+1]=l[f+1],l[f]=l[y],l[f+1]=l[y+1],l[y]=x,l[y+1]=u}function s(d,f,y,l,x){d*=2,f*=2,x[d]=x[f],x[f]=y,x[d+1]=x[f+1],x[f+1]=l}function o(d,f,y){d*=2,f*=2;var l=y[d],x=y[f];return l<x?!1:l===x?y[d+1]>y[f+1]:!0}function b(d,f,y,l){d*=2;var x=l[d];return x<f?!0:x===f?l[d+1]<y:!1}function g(d,f,y){var l=(f-d+1)/6|0,x=d+l,u=f-l,M=d+f>>1,_=M-l,p=M+l,w=x,h=_,L=M,S=p,E=u,P=d+1,F=f-1,I=0;o(w,h,y)&&(I=w,w=h,h=I),o(S,E,y)&&(I=S,S=E,E=I),o(w,L,y)&&(I=w,w=L,L=I),o(h,L,y)&&(I=h,h=L,L=I),o(w,S,y)&&(I=w,w=S,S=I),o(L,S,y)&&(I=L,L=S,S=I),o(h,E,y)&&(I=h,h=E,E=I),o(h,L,y)&&(I=h,h=L,L=I),o(S,E,y)&&(I=S,S=E,E=I);for(var D=y[2*h],R=y[2*h+1],N=y[2*S],z=y[2*S+1],G=2*w,Y=2*L,ee=2*E,Z=2*x,X=2*M,ne=2*u,ce=0;ce<2;++ce){var Q=y[G+ce],K=y[Y+ce],U=y[ee+ce];y[Z+ce]=Q,y[X+ce]=K,y[ne+ce]=U}r(_,d,y),r(p,f,y);for(var H=P;H<=F;++H)if(b(H,D,R,y))H!==P&&n(H,P,y),++P;else if(!b(H,N,z,y))for(;;)if(b(F,N,z,y)){b(F,D,R,y)?(v(H,P,F,y),++P,--F):(n(H,F,y),--F);break}else{if(--F<H)break;continue}s(d,P-1,D,R,y),s(f,F+1,N,z,y),P-2-d<=e?i(d,P-2,y):g(d,P-2,y),f-(F+2)<=e?i(F+2,f,y):g(F+2,f,y),F-P<=e?i(P,F,y):g(P,F,y)}},{}],41:[function(c,A,T){A.exports={init:y,sweepBipartite:u,sweepComplete:M,scanBipartite:_,scanComplete:p};var e=c("typedarray-pool"),a=c("bit-twiddle"),i=c("./sort"),n=1<<28,r=1024,v=e.mallocInt32(r),s=e.mallocInt32(r),o=e.mallocInt32(r),b=e.mallocInt32(r),g=e.mallocInt32(r),d=e.mallocInt32(r),f=e.mallocDouble(r*8);function y(w){var h=a.nextPow2(w);v.length<h&&(e.free(v),v=e.mallocInt32(h)),s.length<h&&(e.free(s),s=e.mallocInt32(h)),o.length<h&&(e.free(o),o=e.mallocInt32(h)),b.length<h&&(e.free(b),b=e.mallocInt32(h)),g.length<h&&(e.free(g),g=e.mallocInt32(h)),d.length<h&&(e.free(d),d=e.mallocInt32(h));var L=8*h;f.length<L&&(e.free(f),f=e.mallocDouble(L))}function l(w,h,L,S){var E=h[S],P=w[L-1];w[E]=P,h[P]=E}function x(w,h,L,S){w[L]=S,h[S]=L}function u(w,h,L,S,E,P,F,I,D,R){for(var N=0,z=2*w,G=w-1,Y=z-1,ee=L;ee<S;++ee){var Z=P[ee],X=z*ee;f[N++]=E[X+G],f[N++]=-(Z+1),f[N++]=E[X+Y],f[N++]=Z}for(var ee=F;ee<I;++ee){var Z=R[ee]+n,ne=z*ee;f[N++]=D[ne+G],f[N++]=-Z,f[N++]=D[ne+Y],f[N++]=Z}var ce=N>>>1;i(f,ce);for(var Q=0,K=0,ee=0;ee<ce;++ee){var U=f[2*ee+1]|0;if(U>=n)U=U-n|0,l(o,b,K--,U);else if(U>=0)l(v,s,Q--,U);else if(U<=-n){U=-U-n|0;for(var H=0;H<Q;++H){var q=h(v[H],U);if(q!==void 0)return q}x(o,b,K++,U)}else{U=-U-1|0;for(var H=0;H<K;++H){var q=h(U,o[H]);if(q!==void 0)return q}x(v,s,Q++,U)}}}function M(w,h,L,S,E,P,F,I,D,R){for(var N=0,z=2*w,G=w-1,Y=z-1,ee=L;ee<S;++ee){var Z=P[ee]+1<<1,X=z*ee;f[N++]=E[X+G],f[N++]=-Z,f[N++]=E[X+Y],f[N++]=Z}for(var ee=F;ee<I;++ee){var Z=R[ee]+1<<1,ne=z*ee;f[N++]=D[ne+G],f[N++]=-Z|1,f[N++]=D[ne+Y],f[N++]=Z|1}var ce=N>>>1;i(f,ce);for(var Q=0,K=0,U=0,ee=0;ee<ce;++ee){var H=f[2*ee+1]|0,q=H&1;if(ee<ce-1&&H>>1===f[2*ee+3]>>1&&(q=2,ee+=1),H<0){for(var re=-(H>>1)-1,j=0;j<U;++j){var $=h(g[j],re);if($!==void 0)return $}if(q!==0)for(var j=0;j<Q;++j){var $=h(v[j],re);if($!==void 0)return $}if(q!==1)for(var j=0;j<K;++j){var $=h(o[j],re);if($!==void 0)return $}q===0?x(v,s,Q++,re):q===1?x(o,b,K++,re):q===2&&x(g,d,U++,re)}else{var re=(H>>1)-1;q===0?l(v,s,Q--,re):q===1?l(o,b,K--,re):q===2&&l(g,d,U--,re)}}}function _(w,h,L,S,E,P,F,I,D,R,N,z){var G=0,Y=2*w,ee=h,Z=h+w,X=1,ne=1;S?ne=n:X=n;for(var ce=E;ce<P;++ce){var Q=ce+X,K=Y*ce;f[G++]=F[K+ee],f[G++]=-Q,f[G++]=F[K+Z],f[G++]=Q}for(var ce=D;ce<R;++ce){var Q=ce+ne,U=Y*ce;f[G++]=N[U+ee],f[G++]=-Q}var H=G>>>1;i(f,H);for(var q=0,ce=0;ce<H;++ce){var re=f[2*ce+1]|0;if(re<0){var Q=-re,j=!1;if(Q>=n?(j=!S,Q-=n):(j=!!S,Q-=1),j)x(v,s,q++,Q);else{var $=z[Q],ie=Y*Q,oe=N[ie+h+1],ae=N[ie+h+1+w];e:for(var se=0;se<q;++se){var _e=v[se],ue=Y*_e;if(!(ae<F[ue+h+1]||F[ue+h+1+w]<oe)){for(var ye=h+2;ye<w;++ye)if(N[ie+ye+w]<F[ue+ye]||F[ue+ye+w]<N[ie+ye])continue e;var xe=I[_e],me;if(S?me=L($,xe):me=L(xe,$),me!==void 0)return me}}}}else l(v,s,q--,re-X)}}function p(w,h,L,S,E,P,F,I,D,R,N){for(var z=0,G=2*w,Y=h,ee=h+w,Z=S;Z<E;++Z){var X=Z+n,ne=G*Z;f[z++]=P[ne+Y],f[z++]=-X,f[z++]=P[ne+ee],f[z++]=X}for(var Z=I;Z<D;++Z){var X=Z+1,ce=G*Z;f[z++]=R[ce+Y],f[z++]=-X}var Q=z>>>1;i(f,Q);for(var K=0,Z=0;Z<Q;++Z){var U=f[2*Z+1]|0;if(U<0){var X=-U;if(X>=n)v[K++]=X-n;else{X-=1;var H=N[X],q=G*X,re=R[q+h+1],j=R[q+h+1+w];e:for(var $=0;$<K;++$){var ie=v[$],oe=F[ie];if(oe===H)break;var ae=G*ie;if(!(j<P[ae+h+1]||P[ae+h+1+w]<re)){for(var se=h+2;se<w;++se)if(R[q+se+w]<P[ae+se]||P[ae+se+w]<R[q+se])continue e;var _e=L(oe,H);if(_e!==void 0)return _e}}}}else{for(var X=U-n,$=K-1;$>=0;--$)if(v[$]===X){for(var se=$+1;se<K;++se)v[se-1]=v[se];break}--K}}}},{"./sort":40,"bit-twiddle":32,"typedarray-pool":308}],42:[function(c,A,T){var e=c("./lib/monotone"),a=c("./lib/triangulation"),i=c("./lib/delaunay"),n=c("./lib/filter");A.exports=b;function r(g){return[Math.min(g[0],g[1]),Math.max(g[0],g[1])]}function v(g,d){return g[0]-d[0]||g[1]-d[1]}function s(g){return g.map(r).sort(v)}function o(g,d,f){return d in g?g[d]:f}function b(g,d,f){Array.isArray(d)?(f=f||{},d=d||[]):(f=d||{},d=[]);var y=!!o(f,"delaunay",!0),l=!!o(f,"interior",!0),x=!!o(f,"exterior",!0),u=!!o(f,"infinity",!1);if(!l&&!x||g.length===0)return[];var M=e(g,d);if(y||l!==x||u){for(var _=a(g.length,s(d)),p=0;p<M.length;++p){var w=M[p];_.addTriangle(w[0],w[1],w[2])}return y&&i(g,_),x?l?u?n(_,0,u):_.cells():n(_,1,u):n(_,-1)}else return M}},{"./lib/delaunay":43,"./lib/filter":44,"./lib/monotone":45,"./lib/triangulation":46}],43:[function(c,A,T){var e=c("robust-in-sphere")[4];c("binary-search-bounds"),A.exports=i;function a(n,r,v,s,o,b){var g=r.opposite(s,o);if(!(g<0)){if(o<s){var d=s;s=o,o=d,d=b,b=g,g=d}r.isConstraint(s,o)||e(n[s],n[o],n[b],n[g])<0&&v.push(s,o)}}function i(n,r){for(var v=[],s=n.length,o=r.stars,b=0;b<s;++b)for(var g=o[b],d=1;d<g.length;d+=2){var f=g[d];if(!(f<b)&&!r.isConstraint(b,f)){for(var y=g[d-1],l=-1,x=1;x<g.length;x+=2)if(g[x-1]===f){l=g[x];break}l<0||e(n[b],n[f],n[y],n[l])<0&&v.push(b,f)}}for(;v.length>0;){for(var f=v.pop(),b=v.pop(),y=-1,l=-1,g=o[b],u=1;u<g.length;u+=2){var M=g[u-1],_=g[u];M===f?l=_:_===f&&(y=M)}y<0||l<0||e(n[b],n[f],n[y],n[l])>=0||(r.flip(b,f),a(n,r,v,y,b,l),a(n,r,v,b,l,y),a(n,r,v,l,f,y),a(n,r,v,f,y,l))}}},{"binary-search-bounds":31,"robust-in-sphere":282}],44:[function(c,A,T){var e=c("binary-search-bounds");A.exports=s;function a(o,b,g,d,f,y,l){this.cells=o,this.neighbor=b,this.flags=d,this.constraint=g,this.active=f,this.next=y,this.boundary=l}var i=a.prototype;function n(o,b){return o[0]-b[0]||o[1]-b[1]||o[2]-b[2]}i.locate=function(){var o=[0,0,0];return function(b,g,d){var f=b,y=g,l=d;return g<d?g<b&&(f=g,y=d,l=b):d<b&&(f=d,y=b,l=g),f<0?-1:(o[0]=f,o[1]=y,o[2]=l,e.eq(this.cells,o,n))}}();function r(o,b){for(var g=o.cells(),d=g.length,f=0;f<d;++f){var y=g[f],l=y[0],x=y[1],u=y[2];x<u?x<l&&(y[0]=x,y[1]=u,y[2]=l):u<l&&(y[0]=u,y[1]=l,y[2]=x)}g.sort(n);for(var M=new Array(d),f=0;f<M.length;++f)M[f]=0;var _=[],p=[],w=new Array(3*d),h=new Array(3*d),L=null;b&&(L=[]);for(var S=new a(g,w,h,M,_,p,L),f=0;f<d;++f)for(var y=g[f],E=0;E<3;++E){var l=y[E],x=y[(E+1)%3],P=w[3*f+E]=S.locate(x,l,o.opposite(x,l)),F=h[3*f+E]=o.isConstraint(l,x);P<0&&(F?p.push(f):(_.push(f),M[f]=1),b&&L.push([x,l,-1]))}return S}function v(o,b,g){for(var d=0,f=0;f<o.length;++f)b[f]===g&&(o[d++]=o[f]);return o.length=d,o}function s(o,b,g){var d=r(o,g);if(b===0)return g?d.cells.concat(d.boundary):d.cells;for(var f=1,y=d.active,l=d.next,x=d.flags,u=d.cells,M=d.constraint,_=d.neighbor;y.length>0||l.length>0;){for(;y.length>0;){var p=y.pop();if(x[p]!==-f){x[p]=f,u[p];for(var w=0;w<3;++w){var h=_[3*p+w];h>=0&&x[h]===0&&(M[3*p+w]?l.push(h):(y.push(h),x[h]=f))}}}var L=l;l=y,y=L,l.length=0,f=-f}var S=v(u,x,b);return g?S.concat(d.boundary):S}},{"binary-search-bounds":31}],45:[function(c,A,T){var e=c("binary-search-bounds"),a=c("robust-orientation")[3],i=0,n=1,r=2;A.exports=l;function v(x,u,M,_,p){this.a=x,this.b=u,this.idx=M,this.lowerIds=_,this.upperIds=p}function s(x,u,M,_){this.a=x,this.b=u,this.type=M,this.idx=_}function o(x,u){var M=x.a[0]-u.a[0]||x.a[1]-u.a[1]||x.type-u.type;return M||x.type!==i&&(M=a(x.a,x.b,u.b),M)?M:x.idx-u.idx}function b(x,u){return a(x.a,x.b,u)}function g(x,u,M,_,p){for(var w=e.lt(u,_,b),h=e.gt(u,_,b),L=w;L<h;++L){for(var S=u[L],E=S.lowerIds,F=E.length;F>1&&a(M[E[F-2]],M[E[F-1]],_)>0;)x.push([E[F-1],E[F-2],p]),F-=1;E.length=F,E.push(p);for(var P=S.upperIds,F=P.length;F>1&&a(M[P[F-2]],M[P[F-1]],_)<0;)x.push([P[F-2],P[F-1],p]),F-=1;P.length=F,P.push(p)}}function d(x,u){var M;return x.a[0]<u.a[0]?M=a(x.a,x.b,u.a):M=a(u.b,u.a,x.a),M||(u.b[0]<x.b[0]?M=a(x.a,x.b,u.b):M=a(u.b,u.a,x.b),M||x.idx-u.idx)}function f(x,u,M){var _=e.le(x,M,d),p=x[_],w=p.upperIds,h=w[w.length-1];p.upperIds=[h],x.splice(_+1,0,new v(M.a,M.b,M.idx,[h],w))}function y(x,u,M){var _=M.a;M.a=M.b,M.b=_;var p=e.eq(x,M,d),w=x[p],h=x[p-1];h.upperIds=w.upperIds,x.splice(p,1)}function l(x,u){for(var M=x.length,_=u.length,p=[],w=0;w<M;++w)p.push(new s(x[w],null,i,w));for(var w=0;w<_;++w){var h=u[w],L=x[h[0]],S=x[h[1]];L[0]<S[0]?p.push(new s(L,S,r,w),new s(S,L,n,w)):L[0]>S[0]&&p.push(new s(S,L,r,w),new s(L,S,n,w))}p.sort(o);for(var E=p[0].a[0]-(1+Math.abs(p[0].a[0]))*Math.pow(2,-52),P=[new v([E,1],[E,0],-1,[],[])],F=[],w=0,I=p.length;w<I;++w){var D=p[w],R=D.type;R===i?g(F,P,x,D.a,D.idx):R===r?f(P,x,D):y(P,x,D)}return F}},{"binary-search-bounds":31,"robust-orientation":284}],46:[function(c,A,T){var e=c("binary-search-bounds");A.exports=r;function a(v,s){this.stars=v,this.edges=s}var i=a.prototype;function n(v,s,o){for(var b=1,g=v.length;b<g;b+=2)if(v[b-1]===s&&v[b]===o){v[b-1]=v[g-2],v[b]=v[g-1],v.length=g-2;return}}i.isConstraint=function(){var v=[0,0];function s(o,b){return o[0]-b[0]||o[1]-b[1]}return function(o,b){return v[0]=Math.min(o,b),v[1]=Math.max(o,b),e.eq(this.edges,v,s)>=0}}(),i.removeTriangle=function(v,s,o){var b=this.stars;n(b[v],s,o),n(b[s],o,v),n(b[o],v,s)},i.addTriangle=function(v,s,o){var b=this.stars;b[v].push(s,o),b[s].push(o,v),b[o].push(v,s)},i.opposite=function(v,s){for(var o=this.stars[s],b=1,g=o.length;b<g;b+=2)if(o[b]===v)return o[b-1];return-1},i.flip=function(v,s){var o=this.opposite(v,s),b=this.opposite(s,v);this.removeTriangle(v,s,o),this.removeTriangle(s,v,b),this.addTriangle(v,b,o),this.addTriangle(s,o,b)},i.edges=function(){for(var v=this.stars,s=[],o=0,b=v.length;o<b;++o)for(var g=v[o],d=0,f=g.length;d<f;d+=2)s.push([g[d],g[d+1]]);return s},i.cells=function(){for(var v=this.stars,s=[],o=0,b=v.length;o<b;++o)for(var g=v[o],d=0,f=g.length;d<f;d+=2){var y=g[d],l=g[d+1];o<Math.min(y,l)&&s.push([o,y,l])}return s};function r(v,s){for(var o=new Array(v),b=0;b<v;++b)o[b]=[];return new a(o,s)}},{"binary-search-bounds":31}],47:[function(c,A,T){A.exports=e;function e(a){for(var i=1,n=1;n<a.length;++n)for(var r=0;r<n;++r)if(a[n]<a[r])i=-i;else if(a[r]===a[n])return 0;return i}},{}],48:[function(c,A,T){var e=c("dup"),a=c("robust-linear-solve");function i(v,s){for(var o=0,b=v.length,g=0;g<b;++g)o+=v[g]*s[g];return o}function n(v){var s=v.length;if(s===0)return[];v[0].length;var o=e([v.length+1,v.length+1],1),b=e([v.length+1],1);o[s][s]=0;for(var g=0;g<s;++g){for(var d=0;d<=g;++d)o[d][g]=o[g][d]=2*i(v[g],v[d]);b[g]=i(v[g],v[g])}for(var f=a(o,b),y=0,l=f[s+1],g=0;g<l.length;++g)y+=l[g];for(var x=new Array(s),g=0;g<s;++g){for(var l=f[g],u=0,d=0;d<l.length;++d)u+=l[d];x[g]=u/y}return x}function r(v){if(v.length===0)return[];for(var s=v[0].length,o=e([s]),b=n(v),g=0;g<v.length;++g)for(var d=0;d<s;++d)o[d]+=v[g][d]*b[g];return o}r.barycenetric=n,A.exports=r},{dup:65,"robust-linear-solve":283}],49:[function(c,A,T){A.exports=a;var e=c("circumcenter");function a(i){for(var n=e(i),r=0,v=0;v<i.length;++v)for(var s=i[v],o=0;o<n.length;++o)r+=Math.pow(s[o]-n[o],2);return Math.sqrt(r/i.length)}},{circumcenter:48}],50:[function(c,A,T){A.exports=L;var e=c("union-find"),a=c("box-intersect"),i=c("robust-segment-intersect"),n=c("big-rat"),r=c("big-rat/cmp"),v=c("big-rat/to-float"),s=c("rat-vec"),o=c("nextafter"),b=c("./lib/rat-seg-intersect");function g(S){var E=v(S);return[o(E,-1/0),o(E,1/0)]}function d(S,E){for(var P=new Array(E.length),F=0;F<E.length;++F){var I=E[F],D=S[I[0]],R=S[I[1]];P[F]=[o(Math.min(D[0],R[0]),-1/0),o(Math.min(D[1],R[1]),-1/0),o(Math.max(D[0],R[0]),1/0),o(Math.max(D[1],R[1]),1/0)]}return P}function f(S){for(var E=new Array(S.length),P=0;P<S.length;++P){var F=S[P];E[P]=[o(F[0],-1/0),o(F[1],-1/0),o(F[0],1/0),o(F[1],1/0)]}return E}function y(S,E,P){var F=[];return a(P,function(I,D){var R=E[I],N=E[D];if(!(R[0]===N[0]||R[0]===N[1]||R[1]===N[0]||R[1]===N[1])){var z=S[R[0]],G=S[R[1]],Y=S[N[0]],ee=S[N[1]];i(z,G,Y,ee)&&F.push([I,D])}}),F}function l(S,E,P,F){var I=[];return a(P,F,function(D,R){var N=E[D];if(!(N[0]===R||N[1]===R)){var z=S[R],G=S[N[0]],Y=S[N[1]];i(G,Y,z,z)&&I.push([D,R])}}),I}function x(S,E,P,F,I){var D,R,N=S.map(function(ie){return[n(ie[0]),n(ie[1])]});for(D=0;D<P.length;++D){var z=P[D];R=z[0];var G=z[1],Y=E[R],ee=E[G],Z=b(s(S[Y[0]]),s(S[Y[1]]),s(S[ee[0]]),s(S[ee[1]]));if(!!Z){var X=S.length;S.push([v(Z[0]),v(Z[1])]),N.push(Z),F.push([R,X],[G,X])}}for(F.sort(function(ie,oe){if(ie[0]!==oe[0])return ie[0]-oe[0];var ae=N[ie[1]],se=N[oe[1]];return r(ae[0],se[0])||r(ae[1],se[1])}),D=F.length-1;D>=0;--D){var ne=F[D];R=ne[0];var ce=E[R],Q=ce[0],K=ce[1],U=S[Q],H=S[K];if((U[0]-H[0]||U[1]-H[1])<0){var q=Q;Q=K,K=q}ce[0]=Q;var re=ce[1]=ne[1],j;for(I&&(j=ce[2]);D>0&&F[D-1][0]===R;){var ne=F[--D],$=ne[1];I?E.push([re,$,j]):E.push([re,$]),re=$}I?E.push([re,K,j]):E.push([re,K])}return N}function u(S,E,P){for(var F=E.length,I=new e(F),D=[],R=0;R<E.length;++R){var N=E[R],z=g(N[0]),G=g(N[1]);D.push([o(z[0],-1/0),o(G[0],-1/0),o(z[1],1/0),o(G[1],1/0)])}a(D,function(ne,ce){I.link(ne,ce)});for(var Y=!0,ee=new Array(F),R=0;R<F;++R){var Z=I.find(R);Z!==R&&(Y=!1,S[Z]=[Math.min(S[R][0],S[Z][0]),Math.min(S[R][1],S[Z][1])])}if(Y)return null;for(var X=0,R=0;R<F;++R){var Z=I.find(R);Z===R?(ee[R]=X,S[X++]=S[R]):ee[R]=-1}S.length=X;for(var R=0;R<F;++R)ee[R]<0&&(ee[R]=ee[I.find(R)]);return ee}function M(S,E){return S[0]-E[0]||S[1]-E[1]}function _(S,E){var P=S[0]-E[0]||S[1]-E[1];return P||(S[2]<E[2]?-1:S[2]>E[2]?1:0)}function p(S,E,P){if(S.length!==0){if(E)for(var F=0;F<S.length;++F){var I=S[F],D=E[I[0]],R=E[I[1]];I[0]=Math.min(D,R),I[1]=Math.max(D,R)}else for(var F=0;F<S.length;++F){var I=S[F],D=I[0],R=I[1];I[0]=Math.min(D,R),I[1]=Math.max(D,R)}P?S.sort(_):S.sort(M);for(var N=1,F=1;F<S.length;++F){var z=S[F-1],G=S[F];G[0]===z[0]&&G[1]===z[1]&&(!P||G[2]===z[2])||(S[N++]=G)}S.length=N}}function w(S,E,P){var F=u(S,[],f(S));return p(E,F,P),!!F}function h(S,E,P){var F=d(S,E),I=y(S,E,F),D=f(S),R=l(S,E,F,D),N=x(S,E,I,R,P),z=u(S,N);return p(E,z,P),z?!0:I.length>0||R.length>0}function L(S,E,P){var F;if(P){F=E;for(var I=new Array(E.length),D=0;D<E.length;++D){var R=E[D];I[D]=[R[0],R[1],P[D]]}E=I}for(var N=w(S,E,!!P);h(S,E,!!P);)N=!0;if(!!P&&N){F.length=0,P.length=0;for(var D=0;D<E.length;++D){var R=E[D];F.push([R[0],R[1]]),P.push(R[2])}}return N}},{"./lib/rat-seg-intersect":51,"big-rat":18,"big-rat/cmp":16,"big-rat/to-float":30,"box-intersect":35,nextafter:260,"rat-vec":273,"robust-segment-intersect":287,"union-find":309}],51:[function(c,A,T){A.exports=b;var e=c("big-rat/mul"),a=c("big-rat/div"),i=c("big-rat/sub"),n=c("big-rat/sign"),r=c("rat-vec/sub"),v=c("rat-vec/add"),s=c("rat-vec/muls");function o(g,d){return i(e(g[0],d[1]),e(g[1],d[0]))}function b(g,d,f,y){var l=r(d,g),x=r(y,f),u=o(l,x);if(n(u)===0)return null;var M=r(g,f),_=o(x,M),p=a(_,u),w=s(l,p),h=v(g,w);return h}},{"big-rat/div":17,"big-rat/mul":27,"big-rat/sign":28,"big-rat/sub":29,"rat-vec/add":272,"rat-vec/muls":274,"rat-vec/sub":275}],52:[function(c,A,T){A.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},{}],53:[function(c,A,T){var e=c("./colorScale"),a=c("lerp");A.exports=i;function i(s){var o,b,g,d,f,y,l,x,p,u,M;if(s||(s={}),x=(s.nshades||72)-1,l=s.format||"hex",y=s.colormap,y||(y="jet"),typeof y=="string"){if(y=y.toLowerCase(),!e[y])throw Error(y+" not a supported colorscale");f=e[y]}else if(Array.isArray(y))f=y.slice();else throw Error("unsupported colormap option",y);if(f.length>x+1)throw new Error(y+" map requires nshades to be at least size "+f.length);Array.isArray(s.alpha)?s.alpha.length!==2?u=[1,1]:u=s.alpha.slice():typeof s.alpha=="number"?u=[s.alpha,s.alpha]:u=[1,1],o=f.map(function(L){return Math.round(L.index*x)}),u[0]=Math.min(Math.max(u[0],0),1),u[1]=Math.min(Math.max(u[1],0),1);var _=f.map(function(L,S){var E=f[S].index,P=f[S].rgb.slice();return P.length===4&&P[3]>=0&&P[3]<=1||(P[3]=u[0]+(u[1]-u[0])*E),P}),p=[];for(M=0;M<o.length-1;++M){d=o[M+1]-o[M],b=_[M],g=_[M+1];for(var w=0;w<d;w++){var h=w/d;p.push([Math.round(a(b[0],g[0],h)),Math.round(a(b[1],g[1],h)),Math.round(a(b[2],g[2],h)),a(b[3],g[3],h)])}}return p.push(f[f.length-1].rgb.concat(u[1])),l==="hex"?p=p.map(r):l==="rgbaString"?p=p.map(v):l==="float"&&(p=p.map(n)),p}function n(s){return[s[0]/255,s[1]/255,s[2]/255,s[3]]}function r(s){for(var o,b="#",g=0;g<3;++g)o=s[g],o=o.toString(16),b+=("00"+o).substr(o.length);return b}function v(s){return"rgba("+s.join(",")+")"}},{"./colorScale":52,lerp:240}],54:[function(c,A,T){A.exports=s;var e=c("robust-orientation"),a=c("signum"),i=c("two-sum"),n=c("robust-product"),r=c("robust-sum");function v(o,b,g){var d=i(o[0],-b[0]),f=i(o[1],-b[1]),y=i(g[0],-b[0]),l=i(g[1],-b[1]),x=r(n(d,y),n(f,l));return x[x.length-1]>=0}function s(o,b,g,d){var f=e(b,g,d);if(f===0){var y=a(e(o,b,g)),l=a(e(o,b,d));if(y===l){if(y===0){var x=v(o,b,g),u=v(o,b,d);return x===u?0:x?1:-1}return 0}else{if(l===0)return y>0||v(o,b,d)?-1:1;if(y===0)return l>0||v(o,b,g)?1:-1}return a(l-y)}var M=e(o,b,g);if(M>0)return f>0&&e(o,b,d)>0?1:-1;if(M<0)return f>0||e(o,b,d)>0?1:-1;var _=e(o,b,d);return _>0||v(o,b,g)?1:-1}},{"robust-orientation":284,"robust-product":285,"robust-sum":289,signum:55,"two-sum":307}],55:[function(c,A,T){A.exports=function(a){return a<0?-1:a>0?1:0}},{}],56:[function(c,A,T){A.exports=i;var e=Math.min;function a(n,r){return n-r}function i(n,r){var v=n.length,s=n.length-r.length;if(s)return s;switch(v){case 0:return 0;case 1:return n[0]-r[0];case 2:return n[0]+n[1]-r[0]-r[1]||e(n[0],n[1])-e(r[0],r[1]);case 3:var o=n[0]+n[1],b=r[0]+r[1];if(s=o+n[2]-(b+r[2]),s)return s;var g=e(n[0],n[1]),d=e(r[0],r[1]);return e(g,n[2])-e(d,r[2])||e(g+n[2],o)-e(d+r[2],b);case 4:var f=n[0],y=n[1],l=n[2],x=n[3],u=r[0],M=r[1],_=r[2],p=r[3];return f+y+l+x-(u+M+_+p)||e(f,y,l,x)-e(u,M,_,p,u)||e(f+y,f+l,f+x,y+l,y+x,l+x)-e(u+M,u+_,u+p,M+_,M+p,_+p)||e(f+y+l,f+y+x,f+l+x,y+l+x)-e(u+M+_,u+M+p,u+_+p,M+_+p);default:for(var w=n.slice().sort(a),h=r.slice().sort(a),L=0;L<v;++L)if(s=w[L]-h[L],s)return s;return 0}}},{}],57:[function(c,A,T){var e=c("compare-cell"),a=c("cell-orientation");A.exports=i;function i(n,r){return e(n,r)||a(n)-a(r)}},{"cell-orientation":47,"compare-cell":56}],58:[function(c,A,T){var e=c("./lib/ch1d"),a=c("./lib/ch2d"),i=c("./lib/chnd");A.exports=n;function n(r){var v=r.length;if(v===0)return[];if(v===1)return[[0]];var s=r[0].length;return s===0?[]:s===1?e(r):s===2?a(r):i(r,s)}},{"./lib/ch1d":59,"./lib/ch2d":60,"./lib/chnd":61}],59:[function(c,A,T){A.exports=e;function e(a){for(var i=0,n=0,r=1;r<a.length;++r)a[r][0]<a[i][0]&&(i=r),a[r][0]>a[n][0]&&(n=r);return i<n?[[i],[n]]:i>n?[[n],[i]]:[[i]]}},{}],60:[function(c,A,T){A.exports=a;var e=c("monotone-convex-hull-2d");function a(i){var n=e(i),r=n.length;if(r<=2)return[];for(var v=new Array(r),s=n[r-1],o=0;o<r;++o){var b=n[o];v[o]=[s,b],s=b}return v}},{"monotone-convex-hull-2d":246}],61:[function(c,A,T){A.exports=r;var e=c("incremental-convex-hull"),a=c("affine-hull");function i(v,s){for(var o=v.length,b=new Array(o),g=0;g<s.length;++g)b[g]=v[s[g]];for(var d=s.length,g=0;g<o;++g)s.indexOf(g)<0&&(b[d++]=v[g]);return b}function n(v,s){for(var o=v.length,b=s.length,g=0;g<o;++g)for(var d=v[g],f=0;f<d.length;++f){var y=d[f];if(y<b)d[f]=s[y];else{y=y-b;for(var l=0;l<b;++l)y>=s[l]&&(y+=1);d[f]=y}}return v}function r(v,s){try{return e(v,!0)}catch{var o=a(v);if(o.length<=s)return[];var b=i(v,o),g=e(b,!0);return n(g,o)}}},{"affine-hull":10,"incremental-convex-hull":233}],62:[function(c,A,T){function e(i,n,r,v,s,o){var b=6*s*s-6*s,g=3*s*s-4*s+1,d=-6*s*s+6*s,f=3*s*s-2*s;if(i.length){o||(o=new Array(i.length));for(var y=i.length-1;y>=0;--y)o[y]=b*i[y]+g*n[y]+d*r[y]+f*v[y];return o}return b*i+g*n+d*r[y]+f*v}function a(i,n,r,v,s,o){var b=s-1,g=s*s,d=b*b,f=(1+2*s)*d,y=s*d,l=g*(3-2*s),x=g*b;if(i.length){o||(o=new Array(i.length));for(var u=i.length-1;u>=0;--u)o[u]=f*i[u]+y*n[u]+l*r[u]+x*v[u];return o}return f*i+y*n+l*r+x*v}A.exports=a,A.exports.derivative=e},{}],63:[function(c,A,T){var e=c("incremental-convex-hull"),a=c("uniq");A.exports=v;function i(s,o){this.point=s,this.index=o}function n(s,o){for(var b=s.point,g=o.point,d=b.length,f=0;f<d;++f){var y=g[f]-b[f];if(y)return y}return 0}function r(s,o,b){if(s===1)return b?[[-1,0]]:[];var g=o.map(function(x,u){return[x[0],u]});g.sort(function(x,u){return x[0]-u[0]});for(var d=new Array(s-1),f=1;f<s;++f){var y=g[f-1],l=g[f];d[f-1]=[y[1],l[1]]}return b&&d.push([-1,d[0][1]],[d[s-1][1],-1]),d}function v(s,o){var b=s.length;if(b===0)return[];var g=s[0].length;if(g<1)return[];if(g===1)return r(b,s,o);for(var d=new Array(b),f=1,y=0;y<b;++y){for(var l=s[y],x=new Array(g+1),u=0,M=0;M<g;++M){var _=l[M];x[M]=_,u+=_*_}x[g]=u,d[y]=new i(x,y),f=Math.max(u,f)}a(d,n),b=d.length;for(var p=new Array(b+g+1),w=new Array(b+g+1),h=(g+1)*(g+1)*f,L=new Array(g+1),y=0;y<=g;++y)L[y]=0;L[g]=h,p[0]=L.slice(),w[0]=-1;for(var y=0;y<=g;++y){var x=L.slice();x[y]=1,p[y+1]=x,w[y+1]=-1}for(var y=0;y<b;++y){var S=d[y];p[y+g+1]=S.point,w[y+g+1]=S.index}var E=e(p,!1);if(o?E=E.filter(function(P){for(var F=0,I=0;I<=g;++I){var D=w[P[I]];if(D<0&&++F>=2)return!1;P[I]=D}return!0}):E=E.filter(function(P){for(var F=0;F<=g;++F){var I=w[P[F]];if(I<0)return!1;P[F]=I}return!0}),g&1)for(var y=0;y<E.length;++y){var S=E[y],x=S[0];S[0]=S[1],S[1]=x}return E}},{"incremental-convex-hull":233,uniq:310}],64:[function(c,A,T){(function(e){(function(){var a=!1;if(typeof Float64Array<"u"){var i=new Float64Array(1),n=new Uint32Array(i.buffer);if(i[0]=1,a=!0,n[1]===1072693248){let x=function(_,p){return n[0]=_,n[1]=p,i[0]},u=function(_){return i[0]=_,n[0]},M=function(_){return i[0]=_,n[1]};var v=x,s=u,o=M;A.exports=function(p){return i[0]=p,[n[0],n[1]]},A.exports.pack=x,A.exports.lo=u,A.exports.hi=M}else if(n[0]===1072693248){let x=function(_,p){return n[1]=_,n[0]=p,i[0]},u=function(_){return i[0]=_,n[1]},M=function(_){return i[0]=_,n[0]};var b=x,g=u,d=M;A.exports=function(p){return i[0]=p,[n[1],n[0]]},A.exports.pack=x,A.exports.lo=u,A.exports.hi=M}else a=!1}if(!a){let x=function(_,p){return r.writeUInt32LE(_,0,!0),r.writeUInt32LE(p,4,!0),r.readDoubleLE(0,!0)},u=function(_){return r.writeDoubleLE(_,0,!0),r.readUInt32LE(0,!0)},M=function(_){return r.writeDoubleLE(_,0,!0),r.readUInt32LE(4,!0)};var f=x,y=u,l=M,r=new e(8);A.exports=function(p){return r.writeDoubleLE(p,0,!0),[r.readUInt32LE(0,!0),r.readUInt32LE(4,!0)]},A.exports.pack=x,A.exports.lo=u,A.exports.hi=M}A.exports.sign=function(x){return A.exports.hi(x)>>>31},A.exports.exponent=function(x){var u=A.exports.hi(x);return(u<<1>>>21)-1023},A.exports.fraction=function(x){var u=A.exports.lo(x),M=A.exports.hi(x),_=M&(1<<20)-1;return M&2146435072&&(_+=1<<20),[u,_]},A.exports.denormalized=function(x){var u=A.exports.hi(x);return!(u&2146435072)}}).call(this)}).call(this,c("buffer").Buffer)},{buffer:3}],65:[function(c,A,T){function e(n,r,v){var s=n[v]|0;if(s<=0)return[];var o=new Array(s),b;if(v===n.length-1)for(b=0;b<s;++b)o[b]=r;else for(b=0;b<s;++b)o[b]=e(n,r,v+1);return o}function a(n,r){var v,s;for(v=new Array(n),s=0;s<n;++s)v[s]=r;return v}function i(n,r){switch(typeof r>"u"&&(r=0),typeof n){case"number":if(n>0)return a(n|0,r);break;case"object":if(typeof n.length=="number")return e(n,r,0);break}return[]}A.exports=i},{}],66:[function(c,A,T){A.exports=a;var e=c("uniq");function a(i,n){var r=i.length;if(typeof n!="number"){n=0;for(var v=0;v<r;++v){var s=i[v];n=Math.max(n,s[0],s[1])}n=(n|0)+1}n=n|0;for(var o=new Array(n),v=0;v<n;++v)o[v]=[];for(var v=0;v<r;++v){var s=i[v];o[s[0]].push(s[1]),o[s[1]].push(s[0])}for(var b=0;b<n;++b)e(o[b],function(g,d){return g-d});return o}},{uniq:310}],67:[function(c,A,T){A.exports=e;function e(a,i,n){var r=i||0,v=n||1;return[[a[12]+a[0],a[13]+a[1],a[14]+a[2],a[15]+a[3]],[a[12]-a[0],a[13]-a[1],a[14]-a[2],a[15]-a[3]],[a[12]+a[4],a[13]+a[5],a[14]+a[6],a[15]+a[7]],[a[12]-a[4],a[13]-a[5],a[14]-a[6],a[15]-a[7]],[r*a[12]+a[8],r*a[13]+a[9],r*a[14]+a[10],r*a[15]+a[11]],[v*a[12]-a[8],v*a[13]-a[9],v*a[14]-a[10],v*a[15]-a[11]]]}},{}],68:[function(c,A,T){A.exports=s;var e=c("cubic-hermite"),a=c("binary-search-bounds");function i(o,b,g){return Math.min(b,Math.max(o,g))}function n(o,b,g){this.dimension=o.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var d=0;d<this.dimension;++d)this.bounds[0][d]=-1/0,this.bounds[1][d]=1/0;this._state=o.slice().reverse(),this._velocity=b.slice().reverse(),this._time=[g],this._scratch=[o.slice(),o.slice(),o.slice(),o.slice(),o.slice()]}var r=n.prototype;r.flush=function(o){var b=a.gt(this._time,o)-1;b<=0||(this._time.splice(0,b),this._state.splice(0,b*this.dimension),this._velocity.splice(0,b*this.dimension))},r.curve=function(o){var b=this._time,g=b.length,d=a.le(b,o),f=this._scratch[0],y=this._state,l=this._velocity,x=this.dimension,u=this.bounds;if(d<0)for(var M=x-1,_=0;_<x;++_,--M)f[_]=y[M];else if(d>=g-1)for(var M=y.length-1,p=o-b[g-1],_=0;_<x;++_,--M)f[_]=y[M]+p*l[M];else{for(var M=x*(d+1)-1,w=b[d],h=b[d+1],L=h-w||1,S=this._scratch[1],E=this._scratch[2],P=this._scratch[3],F=this._scratch[4],I=!0,_=0;_<x;++_,--M)S[_]=y[M],P[_]=l[M]*L,E[_]=y[M+x],F[_]=l[M+x]*L,I=I&&S[_]===E[_]&&P[_]===F[_]&&P[_]===0;if(I)for(var _=0;_<x;++_)f[_]=S[_];else e(S,P,E,F,(o-w)/L,f)}for(var D=u[0],R=u[1],_=0;_<x;++_)f[_]=i(D[_],R[_],f[_]);return f},r.dcurve=function(o){var b=this._time,g=b.length,d=a.le(b,o),f=this._scratch[0],y=this._state,l=this._velocity,x=this.dimension;if(d>=g-1){var u=y.length-1;o-b[g-1];for(var M=0;M<x;++M,--u)f[M]=l[u]}else{for(var u=x*(d+1)-1,_=b[d],p=b[d+1],w=p-_||1,h=this._scratch[1],L=this._scratch[2],S=this._scratch[3],E=this._scratch[4],P=!0,M=0;M<x;++M,--u)h[M]=y[u],S[M]=l[u]*w,L[M]=y[u+x],E[M]=l[u+x]*w,P=P&&h[M]===L[M]&&S[M]===E[M]&&S[M]===0;if(P)for(var M=0;M<x;++M)f[M]=0;else{e.derivative(h,S,L,E,(o-_)/w,f);for(var M=0;M<x;++M)f[M]/=w}}return f},r.lastT=function(){var o=this._time;return o[o.length-1]},r.stable=function(){for(var o=this._velocity,b=o.length,g=this.dimension-1;g>=0;--g)if(o[--b])return!1;return!0},r.jump=function(o){var b=this.lastT(),g=this.dimension;if(!(o<b||arguments.length!==g+1)){var d=this._state,f=this._velocity,y=d.length-this.dimension,l=this.bounds,x=l[0],u=l[1];this._time.push(b,o);for(var M=0;M<2;++M)for(var _=0;_<g;++_)d.push(d[y++]),f.push(0);this._time.push(o);for(var _=g;_>0;--_)d.push(i(x[_-1],u[_-1],arguments[_])),f.push(0)}},r.push=function(o){var b=this.lastT(),g=this.dimension;if(!(o<b||arguments.length!==g+1)){var d=this._state,f=this._velocity,y=d.length-this.dimension,l=o-b,x=this.bounds,u=x[0],M=x[1],_=l>1e-6?1/l:0;this._time.push(o);for(var p=g;p>0;--p){var w=i(u[p-1],M[p-1],arguments[p]);d.push(w),f.push((w-d[y++])*_)}}},r.set=function(o){var b=this.dimension;if(!(o<this.lastT()||arguments.length!==b+1)){var g=this._state,d=this._velocity,f=this.bounds,y=f[0],l=f[1];this._time.push(o);for(var x=b;x>0;--x)g.push(i(y[x-1],l[x-1],arguments[x])),d.push(0)}},r.move=function(o){var b=this.lastT(),g=this.dimension;if(!(o<=b||arguments.length!==g+1)){var d=this._state,f=this._velocity,y=d.length-this.dimension,l=this.bounds,x=l[0],u=l[1],M=o-b,_=M>1e-6?1/M:0;this._time.push(o);for(var p=g;p>0;--p){var w=arguments[p];d.push(i(x[p-1],u[p-1],d[y++]+w)),f.push(w*_)}}},r.idle=function(o){var b=this.lastT();if(!(o<b)){var g=this.dimension,d=this._state,f=this._velocity,y=d.length-g,l=this.bounds,x=l[0],u=l[1],M=o-b;this._time.push(o);for(var _=g-1;_>=0;--_)d.push(i(x[_],u[_],d[y]+M*f[y])),f.push(0),y+=1}};function v(o){for(var b=new Array(o),g=0;g<o;++g)b[g]=0;return b}function s(o,b,g){switch(arguments.length){case 0:return new n([0],[0],0);case 1:if(typeof o=="number"){var d=v(o);return new n(d,d,0)}else return new n(o,v(o.length),0);case 2:if(typeof b=="number"){var d=v(o.length);return new n(o,d,+b)}else g=0;case 3:if(o.length!==b.length)throw new Error("state and velocity lengths must match");return new n(o,b,g)}}},{"binary-search-bounds":31,"cubic-hermite":62}],69:[function(c,A,T){A.exports=M;var e=0,a=1;function i(_,p,w,h,L,S){this._color=_,this.key=p,this.value=w,this.left=h,this.right=L,this._count=S}function n(_){return new i(_._color,_.key,_.value,_.left,_.right,_._count)}function r(_,p){return new i(_,p.key,p.value,p.left,p.right,p._count)}function v(_){_._count=1+(_.left?_.left._count:0)+(_.right?_.right._count:0)}function s(_,p){this._compare=_,this.root=p}var o=s.prototype;Object.defineProperty(o,"keys",{get:function(){var _=[];return this.forEach(function(p,w){_.push(p)}),_}}),Object.defineProperty(o,"values",{get:function(){var _=[];return this.forEach(function(p,w){_.push(w)}),_}}),Object.defineProperty(o,"length",{get:function(){return this.root?this.root._count:0}}),o.insert=function(_,p){for(var w=this._compare,h=this.root,L=[],S=[];h;){var E=w(_,h.key);L.push(h),S.push(E),E<=0?h=h.left:h=h.right}L.push(new i(e,_,p,null,null,1));for(var P=L.length-2;P>=0;--P){var h=L[P];S[P]<=0?L[P]=new i(h._color,h.key,h.value,L[P+1],h.right,h._count+1):L[P]=new i(h._color,h.key,h.value,h.left,L[P+1],h._count+1)}for(var P=L.length-1;P>1;--P){var F=L[P-1],h=L[P];if(F._color===a||h._color===a)break;var I=L[P-2];if(I.left===F)if(F.left===h){var D=I.right;if(D&&D._color===e)F._color=a,I.right=r(a,D),I._color=e,P-=1;else{if(I._color=e,I.left=F.right,F._color=a,F.right=I,L[P-2]=F,L[P-1]=h,v(I),v(F),P>=3){var R=L[P-3];R.left===I?R.left=F:R.right=F}break}}else{var D=I.right;if(D&&D._color===e)F._color=a,I.right=r(a,D),I._color=e,P-=1;else{if(F.right=h.left,I._color=e,I.left=h.right,h._color=a,h.left=F,h.right=I,L[P-2]=h,L[P-1]=F,v(I),v(F),v(h),P>=3){var R=L[P-3];R.left===I?R.left=h:R.right=h}break}}else if(F.right===h){var D=I.left;if(D&&D._color===e)F._color=a,I.left=r(a,D),I._color=e,P-=1;else{if(I._color=e,I.right=F.left,F._color=a,F.left=I,L[P-2]=F,L[P-1]=h,v(I),v(F),P>=3){var R=L[P-3];R.right===I?R.right=F:R.left=F}break}}else{var D=I.left;if(D&&D._color===e)F._color=a,I.left=r(a,D),I._color=e,P-=1;else{if(F.left=h.right,I._color=e,I.right=h.left,h._color=a,h.right=F,h.left=I,L[P-2]=h,L[P-1]=F,v(I),v(F),v(h),P>=3){var R=L[P-3];R.right===I?R.right=h:R.left=h}break}}}return L[0]._color=a,new s(w,L[0])};function b(_,p){if(p.left){var w=b(_,p.left);if(w)return w}var w=_(p.key,p.value);if(w)return w;if(p.right)return b(_,p.right)}function g(_,p,w,h){var L=p(_,h.key);if(L<=0){if(h.left){var S=g(_,p,w,h.left);if(S)return S}var S=w(h.key,h.value);if(S)return S}if(h.right)return g(_,p,w,h.right)}function d(_,p,w,h,L){var S=w(_,L.key),E=w(p,L.key),P;if(S<=0&&(L.left&&(P=d(_,p,w,h,L.left),P)||E>0&&(P=h(L.key,L.value),P)))return P;if(E>0&&L.right)return d(_,p,w,h,L.right)}o.forEach=function(p,w,h){if(!!this.root)switch(arguments.length){case 1:return b(p,this.root);case 2:return g(w,this._compare,p,this.root);case 3:return this._compare(w,h)>=0?void 0:d(w,h,this._compare,p,this.root)}},Object.defineProperty(o,"begin",{get:function(){for(var _=[],p=this.root;p;)_.push(p),p=p.left;return new f(this,_)}}),Object.defineProperty(o,"end",{get:function(){for(var _=[],p=this.root;p;)_.push(p),p=p.right;return new f(this,_)}}),o.at=function(_){if(_<0)return new f(this,[]);for(var p=this.root,w=[];;){if(w.push(p),p.left){if(_<p.left._count){p=p.left;continue}_-=p.left._count}if(!_)return new f(this,w);if(_-=1,p.right){if(_>=p.right._count)break;p=p.right}else break}return new f(this,[])},o.ge=function(_){for(var p=this._compare,w=this.root,h=[],L=0;w;){var S=p(_,w.key);h.push(w),S<=0&&(L=h.length),S<=0?w=w.left:w=w.right}return h.length=L,new f(this,h)},o.gt=function(_){for(var p=this._compare,w=this.root,h=[],L=0;w;){var S=p(_,w.key);h.push(w),S<0&&(L=h.length),S<0?w=w.left:w=w.right}return h.length=L,new f(this,h)},o.lt=function(_){for(var p=this._compare,w=this.root,h=[],L=0;w;){var S=p(_,w.key);h.push(w),S>0&&(L=h.length),S<=0?w=w.left:w=w.right}return h.length=L,new f(this,h)},o.le=function(_){for(var p=this._compare,w=this.root,h=[],L=0;w;){var S=p(_,w.key);h.push(w),S>=0&&(L=h.length),S<0?w=w.left:w=w.right}return h.length=L,new f(this,h)},o.find=function(_){for(var p=this._compare,w=this.root,h=[];w;){var L=p(_,w.key);if(h.push(w),L===0)return new f(this,h);L<=0?w=w.left:w=w.right}return new f(this,[])},o.remove=function(_){var p=this.find(_);return p?p.remove():this},o.get=function(_){for(var p=this._compare,w=this.root;w;){var h=p(_,w.key);if(h===0)return w.value;h<=0?w=w.left:w=w.right}};function f(_,p){this.tree=_,this._stack=p}var y=f.prototype;Object.defineProperty(y,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(y,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),y.clone=function(){return new f(this.tree,this._stack.slice())};function l(_,p){_.key=p.key,_.value=p.value,_.left=p.left,_.right=p.right,_._color=p._color,_._count=p._count}function x(_){for(var p,w,h,L,S=_.length-1;S>=0;--S){if(p=_[S],S===0){p._color=a;return}if(w=_[S-1],w.left===p){if(h=w.right,h.right&&h.right._color===e){if(h=w.right=n(h),L=h.right=n(h.right),w.right=h.left,h.left=w,h.right=L,h._color=w._color,p._color=a,w._color=a,L._color=a,v(w),v(h),S>1){var E=_[S-2];E.left===w?E.left=h:E.right=h}_[S-1]=h;return}else if(h.left&&h.left._color===e){if(h=w.right=n(h),L=h.left=n(h.left),w.right=L.left,h.left=L.right,L.left=w,L.right=h,L._color=w._color,w._color=a,h._color=a,p._color=a,v(w),v(h),v(L),S>1){var E=_[S-2];E.left===w?E.left=L:E.right=L}_[S-1]=L;return}if(h._color===a)if(w._color===e){w._color=a,w.right=r(e,h);return}else{w.right=r(e,h);continue}else{if(h=n(h),w.right=h.left,h.left=w,h._color=w._color,w._color=e,v(w),v(h),S>1){var E=_[S-2];E.left===w?E.left=h:E.right=h}_[S-1]=h,_[S]=w,S+1<_.length?_[S+1]=p:_.push(p),S=S+2}}else{if(h=w.left,h.left&&h.left._color===e){if(h=w.left=n(h),L=h.left=n(h.left),w.left=h.right,h.right=w,h.left=L,h._color=w._color,p._color=a,w._color=a,L._color=a,v(w),v(h),S>1){var E=_[S-2];E.right===w?E.right=h:E.left=h}_[S-1]=h;return}else if(h.right&&h.right._color===e){if(h=w.left=n(h),L=h.right=n(h.right),w.left=L.right,h.right=L.left,L.right=w,L.left=h,L._color=w._color,w._color=a,h._color=a,p._color=a,v(w),v(h),v(L),S>1){var E=_[S-2];E.right===w?E.right=L:E.left=L}_[S-1]=L;return}if(h._color===a)if(w._color===e){w._color=a,w.left=r(e,h);return}else{w.left=r(e,h);continue}else{if(h=n(h),w.left=h.right,h.right=w,h._color=w._color,w._color=e,v(w),v(h),S>1){var E=_[S-2];E.right===w?E.right=h:E.left=h}_[S-1]=h,_[S]=w,S+1<_.length?_[S+1]=p:_.push(p),S=S+2}}}}y.remove=function(){var _=this._stack;if(_.length===0)return this.tree;var p=new Array(_.length),w=_[_.length-1];p[p.length-1]=new i(w._color,w.key,w.value,w.left,w.right,w._count);for(var h=_.length-2;h>=0;--h){var w=_[h];w.left===_[h+1]?p[h]=new i(w._color,w.key,w.value,p[h+1],w.right,w._count):p[h]=new i(w._color,w.key,w.value,w.left,p[h+1],w._count)}if(w=p[p.length-1],w.left&&w.right){var L=p.length;for(w=w.left;w.right;)p.push(w),w=w.right;var S=p[L-1];p.push(new i(w._color,S.key,S.value,w.left,w.right,w._count)),p[L-1].key=w.key,p[L-1].value=w.value;for(var h=p.length-2;h>=L;--h)w=p[h],p[h]=new i(w._color,w.key,w.value,w.left,p[h+1],w._count);p[L-1].left=p[L]}if(w=p[p.length-1],w._color===e){var E=p[p.length-2];E.left===w?E.left=null:E.right===w&&(E.right=null),p.pop();for(var h=0;h<p.length;++h)p[h]._count--;return new s(this.tree._compare,p[0])}else if(w.left||w.right){w.left?l(w,w.left):w.right&&l(w,w.right),w._color=a;for(var h=0;h<p.length-1;++h)p[h]._count--;return new s(this.tree._compare,p[0])}else{if(p.length===1)return new s(this.tree._compare,null);for(var h=0;h<p.length;++h)p[h]._count--;var P=p[p.length-2];x(p),P.left===w?P.left=null:P.right=null}return new s(this.tree._compare,p[0])},Object.defineProperty(y,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(y,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(y,"index",{get:function(){var _=0,p=this._stack;if(p.length===0){var w=this.tree.root;return w?w._count:0}else p[p.length-1].left&&(_=p[p.length-1].left._count);for(var h=p.length-2;h>=0;--h)p[h+1]===p[h].right&&(++_,p[h].left&&(_+=p[h].left._count));return _},enumerable:!0}),y.next=function(){var _=this._stack;if(_.length!==0){var p=_[_.length-1];if(p.right)for(p=p.right;p;)_.push(p),p=p.left;else for(_.pop();_.length>0&&_[_.length-1].right===p;)p=_[_.length-1],_.pop()}},Object.defineProperty(y,"hasNext",{get:function(){var _=this._stack;if(_.length===0)return!1;if(_[_.length-1].right)return!0;for(var p=_.length-1;p>0;--p)if(_[p-1].left===_[p])return!0;return!1}}),y.update=function(_){var p=this._stack;if(p.length===0)throw new Error("Can't update empty node!");var w=new Array(p.length),h=p[p.length-1];w[w.length-1]=new i(h._color,h.key,_,h.left,h.right,h._count);for(var L=p.length-2;L>=0;--L)h=p[L],h.left===p[L+1]?w[L]=new i(h._color,h.key,h.value,w[L+1],h.right,h._count):w[L]=new i(h._color,h.key,h.value,h.left,w[L+1],h._count);return new s(this.tree._compare,w[0])},y.prev=function(){var _=this._stack;if(_.length!==0){var p=_[_.length-1];if(p.left)for(p=p.left;p;)_.push(p),p=p.right;else for(_.pop();_.length>0&&_[_.length-1].left===p;)p=_[_.length-1],_.pop()}},Object.defineProperty(y,"hasPrev",{get:function(){var _=this._stack;if(_.length===0)return!1;if(_[_.length-1].left)return!0;for(var p=_.length-1;p>0;--p)if(_[p-1].right===_[p])return!0;return!1}});function u(_,p){return _<p?-1:_>p?1:0}function M(_){return new s(_||u,null)}},{}],70:[function(c,A,T){A.exports=p;var e=c("./lib/text.js"),a=c("./lib/lines.js"),i=c("./lib/background.js"),n=c("./lib/cube.js"),r=c("./lib/ticks.js"),v=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function s(w,h){return w[0]=h[0],w[1]=h[1],w[2]=h[2],w}function o(w){this.gl=w,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=i(w)}var b=o.prototype;b.update=function(w){w=w||{};function h(Y,ee,Z){if(Z in w){var X=w[Z],ne=this[Z],ce;(Y?Array.isArray(X)&&Array.isArray(X[0]):Array.isArray(X))?this[Z]=ce=[ee(X[0]),ee(X[1]),ee(X[2])]:this[Z]=ce=[ee(X),ee(X),ee(X)];for(var Q=0;Q<3;++Q)if(ce[Q]!==ne[Q])return!0}return!1}var L=h.bind(this,!1,Number),S=h.bind(this,!1,Boolean),E=h.bind(this,!1,String),P=h.bind(this,!0,function(Y){if(Array.isArray(Y)){if(Y.length===3)return[+Y[0],+Y[1],+Y[2],1];if(Y.length===4)return[+Y[0],+Y[1],+Y[2],+Y[3]]}return[0,0,0,1]}),F,I=!1,D=!1;if("bounds"in w)for(var R=w.bounds,N=0;N<2;++N)for(var z=0;z<3;++z)R[N][z]!==this.bounds[N][z]&&(D=!0),this.bounds[N][z]=R[N][z];if("ticks"in w){F=w.ticks,I=!0,this.autoTicks=!1;for(var N=0;N<3;++N)this.tickSpacing[N]=0}else L("tickSpacing")&&(this.autoTicks=!0,D=!0);if(this._firstInit&&("ticks"in w||"tickSpacing"in w||(this.autoTicks=!0),D=!0,I=!0,this._firstInit=!1),D&&this.autoTicks&&(F=r.create(this.bounds,this.tickSpacing),I=!0),I){for(var N=0;N<3;++N)F[N].sort(function(ee,Z){return ee.x-Z.x});r.equal(F,this.ticks)?I=!1:this.ticks=F}S("tickEnable"),E("tickFont")&&(I=!0),L("tickSize"),L("tickAngle"),L("tickPad"),P("tickColor");var G=E("labels");E("labelFont")&&(G=!0),S("labelEnable"),L("labelSize"),L("labelPad"),P("labelColor"),S("lineEnable"),S("lineMirror"),L("lineWidth"),P("lineColor"),S("lineTickEnable"),S("lineTickMirror"),L("lineTickLength"),L("lineTickWidth"),P("lineTickColor"),S("gridEnable"),L("gridWidth"),P("gridColor"),S("zeroEnable"),P("zeroLineColor"),L("zeroLineWidth"),S("backgroundEnable"),P("backgroundColor"),this._text?this._text&&(G||I)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=e(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&I&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=a(this.gl,this.bounds,this.ticks))};function g(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}var d=[new g,new g,new g];function f(w,h,L,S,E){for(var P=w.primalOffset,F=w.primalMinor,I=w.mirrorOffset,D=w.mirrorMinor,R=S[h],N=0;N<3;++N)if(h!==N){var z=P,G=I,Y=F,ee=D;R&1<<N&&(z=I,G=P,Y=D,ee=F),z[N]=L[0][N],G[N]=L[1][N],E[N]>0?(Y[N]=-1,ee[N]=0):(Y[N]=0,ee[N]=1)}}var y=[0,0,0],l={model:v,view:v,projection:v,_ortho:!1};b.isOpaque=function(){return!0},b.isTransparent=function(){return!1},b.drawTransparent=function(w){};var x=0,u=[0,0,0],M=[0,0,0],_=[0,0,0];b.draw=function(w){w=w||l;for(var ne=this.gl,h=w.model||v,L=w.view||v,S=w.projection||v,E=this.bounds,P=w._ortho||!1,F=n(h,L,S,E,P),I=F.cubeEdges,D=F.axis,R=L[12],N=L[13],z=L[14],G=L[15],Y=P?2:1,ee=Y*this.pixelRatio*(S[3]*R+S[7]*N+S[11]*z+S[15]*G)/ne.drawingBufferHeight,Z=0;Z<3;++Z)this.lastCubeProps.cubeEdges[Z]=I[Z],this.lastCubeProps.axis[Z]=D[Z];for(var X=d,Z=0;Z<3;++Z)f(d[Z],Z,this.bounds,I,D);for(var ne=this.gl,ce=y,Z=0;Z<3;++Z)this.backgroundEnable[Z]?ce[Z]=D[Z]:ce[Z]=0;this._background.draw(h,L,S,E,ce,this.backgroundColor),this._lines.bind(h,L,S,this);for(var Z=0;Z<3;++Z){var Q=[0,0,0];D[Z]>0?Q[Z]=E[1][Z]:Q[Z]=E[0][Z];for(var K=0;K<2;++K){var U=(Z+1+K)%3,H=(Z+1+(K^1))%3;this.gridEnable[U]&&this._lines.drawGrid(U,H,this.bounds,Q,this.gridColor[U],this.gridWidth[U]*this.pixelRatio)}for(var K=0;K<2;++K){var U=(Z+1+K)%3,H=(Z+1+(K^1))%3;this.zeroEnable[H]&&Math.min(E[0][H],E[1][H])<=0&&Math.max(E[0][H],E[1][H])>=0&&this._lines.drawZero(U,H,this.bounds,Q,this.zeroLineColor[H],this.zeroLineWidth[H]*this.pixelRatio)}}for(var Z=0;Z<3;++Z){this.lineEnable[Z]&&this._lines.drawAxisLine(Z,this.bounds,X[Z].primalOffset,this.lineColor[Z],this.lineWidth[Z]*this.pixelRatio),this.lineMirror[Z]&&this._lines.drawAxisLine(Z,this.bounds,X[Z].mirrorOffset,this.lineColor[Z],this.lineWidth[Z]*this.pixelRatio);for(var q=s(u,X[Z].primalMinor),re=s(M,X[Z].mirrorMinor),j=this.lineTickLength,K=0;K<3;++K){var $=ee/h[5*K];q[K]*=j[K]*$,re[K]*=j[K]*$}this.lineTickEnable[Z]&&this._lines.drawAxisTicks(Z,X[Z].primalOffset,q,this.lineTickColor[Z],this.lineTickWidth[Z]*this.pixelRatio),this.lineTickMirror[Z]&&this._lines.drawAxisTicks(Z,X[Z].mirrorOffset,re,this.lineTickColor[Z],this.lineTickWidth[Z]*this.pixelRatio)}this._lines.unbind(),this._text.bind(h,L,S,this.pixelRatio);var ie,oe=.5,ae,se;function _e(ke){se=[0,0,0],se[ke]=1}function ue(ke,De,Ve){var Ae=(ke+1)%3,Le=(ke+2)%3,je=De[Ae],Ye=De[Le],ze=Ve[Ae],Ie=Ve[Le];if(je>0&&Ie>0){_e(Ae);return}else if(je>0&&Ie<0){_e(Ae);return}else if(je<0&&Ie>0){_e(Ae);return}else if(je<0&&Ie<0){_e(Ae);return}else if(Ye>0&&ze>0){_e(Le);return}else if(Ye>0&&ze<0){_e(Le);return}else if(Ye<0&&ze>0){_e(Le);return}else if(Ye<0&&ze<0){_e(Le);return}}for(var Z=0;Z<3;++Z){for(var ye=X[Z].primalMinor,xe=X[Z].mirrorMinor,me=s(_,X[Z].primalOffset),K=0;K<3;++K)this.lineTickEnable[Z]&&(me[K]+=ee*ye[K]*Math.max(this.lineTickLength[K],0)/h[5*K]);var be=[0,0,0];if(be[Z]=1,this.tickEnable[Z]){this.tickAngle[Z]===-3600?(this.tickAngle[Z]=0,this.tickAlign[Z]="auto"):this.tickAlign[Z]=-1,ae=1,ie=[this.tickAlign[Z],oe,ae],ie[0]==="auto"?ie[0]=x:ie[0]=parseInt(""+ie[0]),se=[0,0,0],ue(Z,ye,xe);for(var K=0;K<3;++K)me[K]+=ee*ye[K]*this.tickPad[K]/h[5*K];this._text.drawTicks(Z,this.tickSize[Z],this.tickAngle[Z],me,this.tickColor[Z],be,se,ie)}if(this.labelEnable[Z]){ae=0,se=[0,0,0],this.labels[Z].length>4&&(_e(Z),ae=1),ie=[this.labelAlign[Z],oe,ae],ie[0]==="auto"?ie[0]=x:ie[0]=parseInt(""+ie[0]);for(var K=0;K<3;++K)me[K]+=ee*ye[K]*this.labelPad[K]/h[5*K];me[Z]+=.5*(E[0][Z]+E[1][Z]),this._text.drawLabel(Z,this.labelSize[Z],this.labelAngle[Z],me,this.labelColor[Z],[0,0,0],se,ie)}}this._text.unbind()},b.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null};function p(w,h){var L=new o(w);return L.update(h),L}},{"./lib/background.js":71,"./lib/cube.js":72,"./lib/lines.js":73,"./lib/text.js":75,"./lib/ticks.js":76}],71:[function(c,A,T){A.exports=v;var e=c("gl-buffer"),a=c("gl-vao"),i=c("./shaders").bg;function n(s,o,b,g){this.gl=s,this.buffer=o,this.vao=b,this.shader=g}var r=n.prototype;r.draw=function(s,o,b,g,d,f){for(var y=!1,l=0;l<3;++l)y=y||d[l];if(!!y){var x=this.gl;x.enable(x.POLYGON_OFFSET_FILL),x.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:s,view:o,projection:b,bounds:g,enable:d,colors:f},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),x.disable(x.POLYGON_OFFSET_FILL)}},r.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()};function v(s){for(var o=[],b=[],g=0,d=0;d<3;++d)for(var f=(d+1)%3,y=(d+2)%3,l=[0,0,0],x=[0,0,0],u=-1;u<=1;u+=2){b.push(g,g+2,g+1,g+1,g+2,g+3),l[d]=u,x[d]=u;for(var M=-1;M<=1;M+=2){l[f]=M;for(var _=-1;_<=1;_+=2)l[y]=_,o.push(l[0],l[1],l[2],x[0],x[1],x[2]),g+=1}var p=f;f=y,y=p}var w=e(s,new Float32Array(o)),h=e(s,new Uint16Array(b),s.ELEMENT_ARRAY_BUFFER),L=a(s,[{buffer:w,type:s.FLOAT,size:3,offset:0,stride:24},{buffer:w,type:s.FLOAT,size:3,offset:12,stride:24}],h),S=i(s);return S.attributes.position.location=0,S.attributes.normal.location=1,new n(s,w,L,S)}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],72:[function(c,A,T){A.exports=u;var e=c("bit-twiddle"),a=c("gl-mat4/multiply"),i=c("split-polygon"),n=c("robust-orientation"),r=new Array(16),v=new Array(8),s=new Array(8),o=new Array(3),b=[0,0,0];(function(){for(var M=0;M<8;++M)v[M]=[1,1,1,1],s[M]=[1,1,1]})();function g(M,_,p){for(var w=0;w<4;++w){M[w]=p[12+w];for(var h=0;h<3;++h)M[w]+=_[h]*p[4*h+w]}}var d=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function f(M){for(var _=0;_<d.length;++_)if(M=i.positive(M,d[_]),M.length<3)return 0;for(var p=M[0],w=p[0]/p[3],h=p[1]/p[3],L=0,_=1;_+1<M.length;++_){var S=M[_],E=M[_+1],P=S[0]/S[3],F=S[1]/S[3],I=E[0]/E[3],D=E[1]/E[3],R=P-w,N=F-h,z=I-w,G=D-h;L+=Math.abs(R*G-N*z)}return L}var y=[1,1,1],l=[0,0,0],x={cubeEdges:y,axis:l};function u(M,_,p,w,h){a(r,_,M),a(r,p,r);for(var L=0,S=0;S<2;++S){o[2]=w[S][2];for(var E=0;E<2;++E){o[1]=w[E][1];for(var P=0;P<2;++P)o[0]=w[P][0],g(v[L],o,r),L+=1}}for(var F=-1,S=0;S<8;++S){for(var I=v[S][3],D=0;D<3;++D)s[S][D]=v[S][D]/I;h&&(s[S][2]*=-1),I<0&&(F<0||s[S][2]<s[F][2])&&(F=S)}if(F<0){F=0;for(var R=0;R<3;++R){for(var N=(R+2)%3,z=(R+1)%3,G=-1,Y=-1,ee=0;ee<2;++ee){var Z=ee<<R,X=Z+(ee<<N)+(1-ee<<z),ne=Z+(1-ee<<N)+(ee<<z);n(s[Z],s[X],s[ne],b)<0||(ee?G=1:Y=1)}if(G<0||Y<0){Y>G&&(F|=1<<R);continue}for(var ee=0;ee<2;++ee){var Z=ee<<R,X=Z+(ee<<N)+(1-ee<<z),ne=Z+(1-ee<<N)+(ee<<z),ce=f([v[Z],v[X],v[ne],v[Z+(1<<N)+(1<<z)]]);ee?G=ce:Y=ce}if(Y>G){F|=1<<R;continue}}}for(var Q=7^F,K=-1,S=0;S<8;++S)S===F||S===Q||(K<0||s[K][1]>s[S][1])&&(K=S);for(var U=-1,S=0;S<3;++S){var H=K^1<<S;if(!(H===F||H===Q)){U<0&&(U=H);var z=s[H];z[0]<s[U][0]&&(U=H)}}for(var q=-1,S=0;S<3;++S){var H=K^1<<S;if(!(H===F||H===Q||H===U)){q<0&&(q=H);var z=s[H];z[0]>s[q][0]&&(q=H)}}var re=y;re[0]=re[1]=re[2]=0,re[e.log2(U^K)]=K&U,re[e.log2(K^q)]=K&q;var j=q^7;j===F||j===Q?(j=U^7,re[e.log2(q^j)]=j&q):re[e.log2(U^j)]=j&U;for(var $=l,ie=F,R=0;R<3;++R)ie&1<<R?$[R]=-1:$[R]=1;return x}},{"bit-twiddle":32,"gl-mat4/multiply":100,"robust-orientation":284,"split-polygon":300}],73:[function(c,A,T){A.exports=y;var e=c("gl-buffer"),a=c("gl-vao"),i=c("./shaders").line,n=[0,0,0],r=[0,0,0],v=[0,0,0],s=[0,0,0],o=[1,1];function b(l){return l[0]=l[1]=l[2]=0,l}function g(l,x){return l[0]=x[0],l[1]=x[1],l[2]=x[2],l}function d(l,x,u,M,_,p,w,h){this.gl=l,this.vertBuffer=x,this.vao=u,this.shader=M,this.tickCount=_,this.tickOffset=p,this.gridCount=w,this.gridOffset=h}var f=d.prototype;f.bind=function(l,x,u){this.shader.bind(),this.shader.uniforms.model=l,this.shader.uniforms.view=x,this.shader.uniforms.projection=u,o[0]=this.gl.drawingBufferWidth,o[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=o,this.vao.bind()},f.unbind=function(){this.vao.unbind()},f.drawAxisLine=function(l,x,u,M,_){var p=b(r);this.shader.uniforms.majorAxis=r,p[l]=x[1][l]-x[0][l],this.shader.uniforms.minorAxis=p;var w=g(s,u);w[l]+=x[0][l],this.shader.uniforms.offset=w,this.shader.uniforms.lineWidth=_,this.shader.uniforms.color=M;var h=b(v);h[(l+2)%3]=1,this.shader.uniforms.screenAxis=h,this.vao.draw(this.gl.TRIANGLES,6);var h=b(v);h[(l+1)%3]=1,this.shader.uniforms.screenAxis=h,this.vao.draw(this.gl.TRIANGLES,6)},f.drawAxisTicks=function(l,x,u,M,_){if(!!this.tickCount[l]){var p=b(n);p[l]=1,this.shader.uniforms.majorAxis=p,this.shader.uniforms.offset=x,this.shader.uniforms.minorAxis=u,this.shader.uniforms.color=M,this.shader.uniforms.lineWidth=_;var w=b(v);w[l]=1,this.shader.uniforms.screenAxis=w,this.vao.draw(this.gl.TRIANGLES,this.tickCount[l],this.tickOffset[l])}},f.drawGrid=function(l,x,u,M,_,p){if(!!this.gridCount[l]){var w=b(r);w[x]=u[1][x]-u[0][x],this.shader.uniforms.minorAxis=w;var h=g(s,M);h[x]+=u[0][x],this.shader.uniforms.offset=h;var L=b(n);L[l]=1,this.shader.uniforms.majorAxis=L;var S=b(v);S[l]=1,this.shader.uniforms.screenAxis=S,this.shader.uniforms.lineWidth=p,this.shader.uniforms.color=_,this.vao.draw(this.gl.TRIANGLES,this.gridCount[l],this.gridOffset[l])}},f.drawZero=function(l,x,u,M,_,p){var w=b(r);this.shader.uniforms.majorAxis=w,w[l]=u[1][l]-u[0][l],this.shader.uniforms.minorAxis=w;var h=g(s,M);h[l]+=u[0][l],this.shader.uniforms.offset=h;var L=b(v);L[x]=1,this.shader.uniforms.screenAxis=L,this.shader.uniforms.lineWidth=p,this.shader.uniforms.color=_,this.vao.draw(this.gl.TRIANGLES,6)},f.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()};function y(l,x,u){var M=[],_=[0,0,0],p=[0,0,0],w=[0,0,0],h=[0,0,0];M.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var L=0;L<3;++L){for(var P=M.length/3|0,S=0;S<u[L].length;++S){var E=+u[L][S].x;M.push(E,0,1,E,1,1,E,0,-1,E,0,-1,E,1,1,E,1,-1)}var I=M.length/3|0;_[L]=P,p[L]=I-P;for(var P=M.length/3|0,F=0;F<u[L].length;++F){var E=+u[L][F].x;M.push(E,0,1,E,1,1,E,0,-1,E,0,-1,E,1,1,E,1,-1)}var I=M.length/3|0;w[L]=P,h[L]=I-P}var D=e(l,new Float32Array(M)),R=a(l,[{buffer:D,type:l.FLOAT,size:3,stride:0,offset:0}]),N=i(l);return N.attributes.position.location=0,new d(l,D,R,N,p,_,h,w)}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],74:[function(c,A,T){var e=c("glslify"),a=c("gl-shader"),i=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, majorAxis, minorAxis, screenAxis;
uniform float lineWidth;
uniform vec2 screenShape;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

void main() {
  vec3 major = position.x * majorAxis;
  vec3 minor = position.y * minorAxis;

  vec3 vPosition = major + minor + offset;
  vec3 pPosition = project(vPosition);
  vec3 offset = project(vPosition + screenAxis * position.z);

  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;

  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);
}
`]),n=e([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);T.line=function(b){return a(b,i,n,null,[{name:"position",type:"vec3"}])};var r=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, axis, alignDir, alignOpt;
uniform float scale, angle, pixelScale;
uniform vec2 resolution;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

float computeViewAngle(vec3 a, vec3 b) {
  vec3 A = project(a);
  vec3 B = project(b);

  return atan(
    (B.y - A.y) * resolution.y,
    (B.x - A.x) * resolution.x
  );
}

const float PI = 3.141592;
const float TWO_PI = 2.0 * PI;
const float HALF_PI = 0.5 * PI;
const float ONE_AND_HALF_PI = 1.5 * PI;

int option = int(floor(alignOpt.x + 0.001));
float hv_ratio =       alignOpt.y;
bool enableAlign =    (alignOpt.z != 0.0);

float mod_angle(float a) {
  return mod(a, PI);
}

float positive_angle(float a) {
  return mod_angle((a < 0.0) ?
    a + TWO_PI :
    a
  );
}

float look_upwards(float a) {
  float b = positive_angle(a);
  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?
    b - PI :
    b;
}

float look_horizontal_or_vertical(float a, float ratio) {
  // ratio controls the ratio between being horizontal to (vertical + horizontal)
  // if ratio is set to 0.5 then it is 50%, 50%.
  // when using a higher ratio e.g. 0.75 the result would
  // likely be more horizontal than vertical.

  float b = positive_angle(a);

  return
    (b < (      ratio) * HALF_PI) ? 0.0 :
    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :
    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :
    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :
                                    0.0;
}

float roundTo(float a, float b) {
  return float(b * floor((a + 0.5 * b) / b));
}

float look_round_n_directions(float a, int n) {
  float b = positive_angle(a);
  float div = TWO_PI / float(n);
  float c = roundTo(b, div);
  return look_upwards(c);
}

float applyAlignOption(float rawAngle, float delta) {
  return
    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions
    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical
    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis
    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards
    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal
                    rawAngle;                // otherwise return back raw input angle
}

bool isAxisTitle = (axis.x == 0.0) &&
                   (axis.y == 0.0) &&
                   (axis.z == 0.0);

void main() {
  //Compute world offset
  float axisDistance = position.z;
  vec3 dataPosition = axisDistance * axis + offset;

  float beta = angle; // i.e. user defined attributes for each tick

  float axisAngle;
  float clipAngle;
  float flip;

  if (enableAlign) {
    axisAngle = (isAxisTitle) ? HALF_PI :
                      computeViewAngle(dataPosition, dataPosition + axis);
    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);

    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;
    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;

    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),
                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;

    beta += applyAlignOption(clipAngle, flip * PI);
  }

  //Compute plane offset
  vec2 planeCoord = position.xy * pixelScale;

  mat2 planeXform = scale * mat2(
     cos(beta), sin(beta),
    -sin(beta), cos(beta)
  );

  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;

  //Compute clip position
  vec3 clipPosition = project(dataPosition);

  //Apply text offset in clip coordinates
  clipPosition += vec3(viewOffset, 0.0);

  //Done
  gl_Position = vec4(clipPosition, 1.0);
}`]),v=e([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);T.text=function(b){return a(b,r,v,null,[{name:"position",type:"vec3"}])};var s=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec3 normal;

uniform mat4 model, view, projection;
uniform vec3 enable;
uniform vec3 bounds[2];

varying vec3 colorChannel;

void main() {

  vec3 signAxis = sign(bounds[1] - bounds[0]);

  vec3 realNormal = signAxis * normal;

  if(dot(realNormal, enable) > 0.0) {
    vec3 minRange = min(bounds[0], bounds[1]);
    vec3 maxRange = max(bounds[0], bounds[1]);
    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));
    gl_Position = projection * view * model * vec4(nPosition, 1.0);
  } else {
    gl_Position = vec4(0,0,0,0);
  }

  colorChannel = abs(realNormal);
}`]),o=e([`precision highp float;
#define GLSLIFY 1

uniform vec4 colors[3];

varying vec3 colorChannel;

void main() {
  gl_FragColor = colorChannel.x * colors[0] +
                 colorChannel.y * colors[1] +
                 colorChannel.z * colors[2];
}`]);T.bg=function(b){return a(b,s,o,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},{"gl-shader":132,glslify:231}],75:[function(c,A,T){(function(e){(function(){A.exports=y;var a=c("gl-buffer"),i=c("gl-vao"),n=c("vectorize-text"),r=c("./shaders").text,v=window||e.global||{},s=v.__TEXT_CACHE||{};v.__TEXT_CACHE={};var o=3;function b(l,x,u,M){this.gl=l,this.shader=x,this.buffer=u,this.vao=M,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}var g=b.prototype,d=[0,0];g.bind=function(l,x,u,M){this.vao.bind(),this.shader.bind();var _=this.shader.uniforms;_.model=l,_.view=x,_.projection=u,_.pixelScale=M,d[0]=this.gl.drawingBufferWidth,d[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=d},g.unbind=function(){this.vao.unbind()},g.update=function(l,x,u,M,_){var p=[];function w(R,N,z,G,Y,ee){var Z=s[z];Z||(Z=s[z]={});var X=Z[N];X||(X=Z[N]=f(N,{triangles:!0,font:z,textAlign:"center",textBaseline:"middle",lineSpacing:Y,styletags:ee}));for(var ne=(G||12)/12,ce=X.positions,Q=X.cells,K=0,U=Q.length;K<U;++K)for(var H=Q[K],q=2;q>=0;--q){var re=ce[H[q]];p.push(ne*re[0],-ne*re[1],R)}}for(var h=[0,0,0],L=[0,0,0],S=[0,0,0],E=[0,0,0],P=1.25,F={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},I=0;I<3;++I){S[I]=p.length/o|0,w(.5*(l[0][I]+l[1][I]),x[I],u[I],12,P,F),E[I]=(p.length/o|0)-S[I],h[I]=p.length/o|0;for(var D=0;D<M[I].length;++D)!M[I][D].text||w(M[I][D].x,M[I][D].text,M[I][D].font||_,M[I][D].fontSize||12,P,F);L[I]=(p.length/o|0)-h[I]}this.buffer.update(p),this.tickOffset=h,this.tickCount=L,this.labelOffset=S,this.labelCount=E},g.drawTicks=function(l,x,u,M,_,p,w,h){!this.tickCount[l]||(this.shader.uniforms.axis=p,this.shader.uniforms.color=_,this.shader.uniforms.angle=u,this.shader.uniforms.scale=x,this.shader.uniforms.offset=M,this.shader.uniforms.alignDir=w,this.shader.uniforms.alignOpt=h,this.vao.draw(this.gl.TRIANGLES,this.tickCount[l],this.tickOffset[l]))},g.drawLabel=function(l,x,u,M,_,p,w,h){!this.labelCount[l]||(this.shader.uniforms.axis=p,this.shader.uniforms.color=_,this.shader.uniforms.angle=u,this.shader.uniforms.scale=x,this.shader.uniforms.offset=M,this.shader.uniforms.alignDir=w,this.shader.uniforms.alignOpt=h,this.vao.draw(this.gl.TRIANGLES,this.labelCount[l],this.labelOffset[l]))},g.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()};function f(l,x){try{return n(l,x)}catch(u){return console.warn('error vectorizing text:"'+l+'" error:',u),{cells:[],positions:[]}}}function y(l,x,u,M,_,p){var w=a(l),h=i(l,[{buffer:w,size:3}]),L=r(l);L.attributes.position.location=0;var S=new b(l,L,w,h);return S.update(x,u,M,_,p),S}}).call(this)}).call(this,c("_process"))},{"./shaders":74,_process:5,"gl-buffer":78,"gl-vao":150,"vectorize-text":311}],76:[function(c,A,T){T.create=a,T.equal=i;function e(n,r){var v=n+"",s=v.indexOf("."),o=0;s>=0&&(o=v.length-s-1);var b=Math.pow(10,o),g=Math.round(n*r*b),d=g+"";if(d.indexOf("e")>=0)return d;var f=g/b,y=g%b;g<0?(f=-Math.ceil(f)|0,y=-y|0):(f=Math.floor(f)|0,y=y|0);var l=""+f;if(g<0&&(l="-"+l),o){for(var x=""+y;x.length<o;)x="0"+x;return l+"."+x}else return l}function a(n,r){for(var v=[],s=0;s<3;++s){var o=[];.5*(n[0][s]+n[1][s]);for(var b=0;b*r[s]<=n[1][s];++b)o.push({x:b*r[s],text:e(r[s],b)});for(var b=-1;b*r[s]>=n[0][s];--b)o.push({x:b*r[s],text:e(r[s],b)});v.push(o)}return v}function i(n,r){for(var v=0;v<3;++v){if(n[v].length!==r[v].length)return!1;for(var s=0;s<n[v].length;++s){var o=n[v][s],b=r[v][s];if(o.x!==b.x||o.text!==b.text||o.font!==b.font||o.fontColor!==b.fontColor||o.fontSize!==b.fontSize||o.dx!==b.dx||o.dy!==b.dy)return!1}}return!0}},{}],77:[function(c,A,T){A.exports=x;var e=c("extract-frustum-planes"),a=c("split-polygon"),i=c("./lib/cube.js"),n=c("gl-mat4/multiply"),r=c("gl-mat4/transpose"),v=c("gl-vec4/transformMat4"),s=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),o=new Float32Array(16);function b(u,M,_){this.lo=u,this.hi=M,this.pixelsPerDataUnit=_}var g=[0,0,0,1],d=[0,0,0,1];function f(u,M,_,p,w){for(var h=0;h<3;++h){for(var L=g,S=d,E=0;E<3;++E)S[E]=L[E]=_[E];S[3]=L[3]=1,S[h]+=1,v(S,S,M),S[3]<0&&(u[h]=1/0),L[h]-=1,v(L,L,M),L[3]<0&&(u[h]=1/0);var P=(L[0]/L[3]-S[0]/S[3])*p,F=(L[1]/L[3]-S[1]/S[3])*w;u[h]=.25*Math.sqrt(P*P+F*F)}return u}var y=[new b(1/0,-1/0,1/0),new b(1/0,-1/0,1/0),new b(1/0,-1/0,1/0)],l=[0,0,0];function x(u,M,_,p,F){var h=M.model||s,L=M.view||s,S=M.projection||s,E=M._ortho||!1,P=u.bounds,F=F||i(h,L,S,P,E),I=F.axis;n(o,L,h),n(o,S,o);for(var D=y,R=0;R<3;++R)D[R].lo=1/0,D[R].hi=-1/0,D[R].pixelsPerDataUnit=1/0;var N=e(r(o,o));r(o,o);for(var z=0;z<3;++z){var G=(z+1)%3,Y=(z+2)%3,ee=l;e:for(var R=0;R<2;++R){var Z=[];if(I[z]<0!=!!R){ee[z]=P[R][z];for(var X=0;X<2;++X){ee[G]=P[X^R][G];for(var ne=0;ne<2;++ne)ee[Y]=P[ne^X^R][Y],Z.push(ee.slice())}for(var ce=E?5:4,X=ce;X===ce;++X){if(Z.length===0)continue e;Z=a.positive(Z,N[X])}for(var X=0;X<Z.length;++X)for(var Y=Z[X],Q=f(l,o,Y,_,p),ne=0;ne<3;++ne)D[ne].lo=Math.min(D[ne].lo,Y[ne]),D[ne].hi=Math.max(D[ne].hi,Y[ne]),ne!==z&&(D[ne].pixelsPerDataUnit=Math.min(D[ne].pixelsPerDataUnit,Math.abs(Q[ne])))}}}return D}},{"./lib/cube.js":72,"extract-frustum-planes":67,"gl-mat4/multiply":100,"gl-mat4/transpose":109,"gl-vec4/transformMat4":221,"split-polygon":300}],78:[function(c,A,T){var e=c("typedarray-pool"),a=c("ndarray-ops"),i=c("ndarray"),n=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function r(d,f,y,l,x){this.gl=d,this.type=f,this.handle=y,this.length=l,this.usage=x}var v=r.prototype;v.bind=function(){this.gl.bindBuffer(this.type,this.handle)},v.unbind=function(){this.gl.bindBuffer(this.type,null)},v.dispose=function(){this.gl.deleteBuffer(this.handle)};function s(d,f,y,l,x,u){var M=x.length*x.BYTES_PER_ELEMENT;if(u<0)return d.bufferData(f,x,l),M;if(M+u>y)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return d.bufferSubData(f,u,x),y}function o(d,f){for(var y=e.malloc(d.length,f),l=d.length,x=0;x<l;++x)y[x]=d[x];return y}function b(d,f){for(var y=1,l=f.length-1;l>=0;--l){if(f[l]!==y)return!1;y*=d[l]}return!0}v.update=function(d,f){if(typeof f!="number"&&(f=-1),this.bind(),typeof d=="object"&&typeof d.shape<"u"){var y=d.dtype;if(n.indexOf(y)<0&&(y="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER){var l=gl.getExtension("OES_element_index_uint");l&&y!=="uint16"?y="uint32":y="uint16"}if(y===d.dtype&&b(d.shape,d.stride))d.offset===0&&d.data.length===d.shape[0]?this.length=s(this.gl,this.type,this.length,this.usage,d.data,f):this.length=s(this.gl,this.type,this.length,this.usage,d.data.subarray(d.offset,d.shape[0]),f);else{var x=e.malloc(d.size,y),u=i(x,d.shape);a.assign(u,d),f<0?this.length=s(this.gl,this.type,this.length,this.usage,x,f):this.length=s(this.gl,this.type,this.length,this.usage,x.subarray(0,d.size),f),e.free(x)}}else if(Array.isArray(d)){var M;this.type===this.gl.ELEMENT_ARRAY_BUFFER?M=o(d,"uint16"):M=o(d,"float32"),f<0?this.length=s(this.gl,this.type,this.length,this.usage,M,f):this.length=s(this.gl,this.type,this.length,this.usage,M.subarray(0,d.length),f),e.free(M)}else if(typeof d=="object"&&typeof d.length=="number")this.length=s(this.gl,this.type,this.length,this.usage,d,f);else if(typeof d=="number"||d===void 0){if(f>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");d=d|0,d<=0&&(d=1),this.gl.bufferData(this.type,d|0,this.usage),this.length=d}else throw new Error("gl-buffer: Invalid data type")};function g(d,f,y,l){if(y=y||d.ARRAY_BUFFER,l=l||d.DYNAMIC_DRAW,y!==d.ARRAY_BUFFER&&y!==d.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(l!==d.DYNAMIC_DRAW&&l!==d.STATIC_DRAW&&l!==d.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var x=d.createBuffer(),u=new r(d,y,x,0,l);return u.update(f),u}A.exports=g},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],79:[function(c,A,T){var e=c("gl-vec3");A.exports=function(i,n){var r=i.positions,v=i.vectors,s={positions:[],vertexIntensity:[],vertexIntensityBounds:i.vertexIntensityBounds,vectors:[],cells:[],coneOffset:i.coneOffset,colormap:i.colormap};if(i.positions.length===0)return n&&(n[0]=[0,0,0],n[1]=[0,0,0]),s;for(var o=0,b=1/0,g=-1/0,d=1/0,f=-1/0,y=1/0,l=-1/0,x=null,u=null,M=[],_=1/0,p=!1,w=0;w<r.length;w++){var h=r[w];b=Math.min(h[0],b),g=Math.max(h[0],g),d=Math.min(h[1],d),f=Math.max(h[1],f),y=Math.min(h[2],y),l=Math.max(h[2],l);var L=v[w];if(e.length(L)>o&&(o=e.length(L)),w){var S=2*e.distance(x,h)/(e.length(u)+e.length(L));S?(_=Math.min(_,S),p=!1):p=!0}p||(x=h,u=L),M.push(L)}var E=[b,d,y],P=[g,f,l];n&&(n[0]=E,n[1]=P),o===0&&(o=1);var F=1/o;isFinite(_)||(_=1),s.vectorScale=_;var I=i.coneSize||.5;i.absoluteConeSize&&(I=i.absoluteConeSize*F),s.coneScale=I;for(var w=0,D=0;w<r.length;w++)for(var h=r[w],R=h[0],N=h[1],z=h[2],G=M[w],Y=e.length(G)*F,ee=0,Z=8;ee<Z;ee++){s.positions.push([R,N,z,D++]),s.positions.push([R,N,z,D++]),s.positions.push([R,N,z,D++]),s.positions.push([R,N,z,D++]),s.positions.push([R,N,z,D++]),s.positions.push([R,N,z,D++]),s.vectors.push(G),s.vectors.push(G),s.vectors.push(G),s.vectors.push(G),s.vectors.push(G),s.vectors.push(G),s.vertexIntensity.push(Y,Y,Y),s.vertexIntensity.push(Y,Y,Y);var X=s.positions.length;s.cells.push([X-6,X-5,X-4],[X-3,X-2,X-1])}return s};var a=c("./lib/shaders");A.exports.createMesh=c("./create_mesh"),A.exports.createConeMesh=function(i,n){return A.exports.createMesh(i,n,{shaders:a,traceType:"cone"})}},{"./create_mesh":80,"./lib/shaders":81,"gl-vec3":169}],80:[function(c,A,T){var e=c("gl-shader"),a=c("gl-buffer"),i=c("gl-vao"),n=c("gl-texture2d"),r=c("gl-mat4/multiply"),v=c("gl-mat4/invert"),s=c("ndarray"),o=c("colormap"),b=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function g(M,_,p,w,h,L,S,E,P,F,I){this.gl=M,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=_,this.dirty=!0,this.triShader=p,this.pickShader=w,this.trianglePositions=h,this.triangleVectors=L,this.triangleColors=E,this.triangleUVs=P,this.triangleIds=S,this.triangleVAO=F,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=I,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=b,this._view=b,this._projection=b,this._resolution=[1,1]}var d=g.prototype;d.isOpaque=function(){return this.opacity>=1},d.isTransparent=function(){return this.opacity<1},d.pickSlots=1,d.setPickBase=function(M){this.pickId=M};function f(M){for(var _=o({colormap:M,nshades:256,format:"rgba"}),p=new Uint8Array(256*4),w=0;w<256;++w){for(var h=_[w],L=0;L<3;++L)p[4*w+L]=h[L];p[4*w+3]=h[3]*255}return s(p,[256,256,4],[4,0,1])}function y(M){for(var _=M.length,p=new Array(_),w=0;w<_;++w)p[w]=M[w][2];return p}d.update=function(M){M=M||{};var _=this.gl;this.dirty=!0,"lightPosition"in M&&(this.lightPosition=M.lightPosition),"opacity"in M&&(this.opacity=M.opacity),"ambient"in M&&(this.ambientLight=M.ambient),"diffuse"in M&&(this.diffuseLight=M.diffuse),"specular"in M&&(this.specularLight=M.specular),"roughness"in M&&(this.roughness=M.roughness),"fresnel"in M&&(this.fresnel=M.fresnel),M.tubeScale!==void 0&&(this.tubeScale=M.tubeScale),M.vectorScale!==void 0&&(this.vectorScale=M.vectorScale),M.coneScale!==void 0&&(this.coneScale=M.coneScale),M.coneOffset!==void 0&&(this.coneOffset=M.coneOffset),M.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=_.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=_.LINEAR,this.texture.setPixels(f(M.colormap)),this.texture.generateMipmap());var p=M.cells,w=M.positions,h=M.vectors;if(!w||!p||!h)return;var L=[],S=[],E=[],P=[],F=[];this.cells=p,this.positions=w,this.vectors=h;var I=M.meshColor||[1,1,1,1],D=M.vertexIntensity,R=1/0,N=-1/0;if(D)if(M.vertexIntensityBounds)R=+M.vertexIntensityBounds[0],N=+M.vertexIntensityBounds[1];else for(var z=0;z<D.length;++z){var G=D[z];R=Math.min(R,G),N=Math.max(N,G)}else for(var z=0;z<w.length;++z){var G=w[z][2];R=Math.min(R,G),N=Math.max(N,G)}D?this.intensity=D:this.intensity=y(w),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var z=0;z<w.length;++z)for(var Y=w[z],ee=0;ee<3;++ee)isNaN(Y[ee])||!isFinite(Y[ee])||(this.bounds[0][ee]=Math.min(this.bounds[0][ee],Y[ee]),this.bounds[1][ee]=Math.max(this.bounds[1][ee],Y[ee]));var Z=0;e:for(var z=0;z<p.length;++z){var X=p[z];switch(X.length){case 3:for(var ee=0;ee<3;++ee)for(var ne=X[ee],Y=w[ne],ce=0;ce<3;++ce)if(isNaN(Y[ce])||!isFinite(Y[ce]))continue e;for(var ee=0;ee<3;++ee){var ne=X[2-ee],Y=w[ne];L.push(Y[0],Y[1],Y[2],Y[3]);var Q=h[ne];S.push(Q[0],Q[1],Q[2],Q[3]||0);var K=I;K.length===3?E.push(K[0],K[1],K[2],1):E.push(K[0],K[1],K[2],K[3]);var U;D?U=[(D[ne]-R)/(N-R),0]:U=[(Y[2]-R)/(N-R),0],P.push(U[0],U[1]),F.push(z)}Z+=1;break}}this.triangleCount=Z,this.trianglePositions.update(L),this.triangleVectors.update(S),this.triangleColors.update(E),this.triangleUVs.update(P),this.triangleIds.update(new Uint32Array(F))},d.drawTransparent=d.draw=function(M){M=M||{};for(var _=this.gl,p=M.model||b,w=M.view||b,h=M.projection||b,L=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],S=0;S<3;++S)L[0][S]=Math.max(L[0][S],this.clipBounds[0][S]),L[1][S]=Math.min(L[1][S],this.clipBounds[1][S]);var E={model:p,view:w,projection:h,inverseModel:b.slice(),clipBounds:L,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};E.inverseModel=v(E.inverseModel,E.model),_.disable(_.CULL_FACE),this.texture.bind(0);var P=new Array(16);r(P,E.view,E.model),r(P,E.projection,P),v(P,P);for(var S=0;S<3;++S)E.eyePosition[S]=P[12+S]/P[15];for(var F=P[15],S=0;S<3;++S)F+=this.lightPosition[S]*P[4*S+3];for(var S=0;S<3;++S){for(var I=P[12+S],D=0;D<3;++D)I+=P[4*D+S]*this.lightPosition[D];E.lightPosition[S]=I/F}if(this.triangleCount>0){var R=this.triShader;R.bind(),R.uniforms=E,this.triangleVAO.bind(),_.drawArrays(_.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()}},d.drawPick=function(M){M=M||{};for(var _=this.gl,p=M.model||b,w=M.view||b,h=M.projection||b,L=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],S=0;S<3;++S)L[0][S]=Math.max(L[0][S],this.clipBounds[0][S]),L[1][S]=Math.min(L[1][S],this.clipBounds[1][S]);this._model=[].slice.call(p),this._view=[].slice.call(w),this._projection=[].slice.call(h),this._resolution=[_.drawingBufferWidth,_.drawingBufferHeight];var E={model:p,view:w,projection:h,clipBounds:L,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},P=this.pickShader;P.bind(),P.uniforms=E,this.triangleCount>0&&(this.triangleVAO.bind(),_.drawArrays(_.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind())},d.pick=function(M){if(!M||M.id!==this.pickId)return null;var _=M.value[0]+256*M.value[1]+65536*M.value[2],p=this.cells[_],w=this.positions[p[1]].slice(0,3),h={position:w,dataCoordinate:w,index:Math.floor(p[1]/48)};return this.traceType==="cone"?h.index=Math.floor(p[1]/48):this.traceType==="streamtube"&&(h.intensity=this.intensity[p[1]],h.velocity=this.vectors[p[1]].slice(0,3),h.divergence=this.vectors[p[1]][3],h.index=_),h},d.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()};function l(M,_){var p=e(M,_.meshShader.vertex,_.meshShader.fragment,null,_.meshShader.attributes);return p.attributes.position.location=0,p.attributes.color.location=2,p.attributes.uv.location=3,p.attributes.vector.location=4,p}function x(M,_){var p=e(M,_.pickShader.vertex,_.pickShader.fragment,null,_.pickShader.attributes);return p.attributes.position.location=0,p.attributes.id.location=1,p.attributes.vector.location=4,p}function u(M,_,p){var w=p.shaders;arguments.length===1&&(_=M,M=_.gl);var h=l(M,w),L=x(M,w),S=n(M,s(new Uint8Array([255,255,255,255]),[1,1,4]));S.generateMipmap(),S.minFilter=M.LINEAR_MIPMAP_LINEAR,S.magFilter=M.LINEAR;var E=a(M),P=a(M),F=a(M),I=a(M),D=a(M),R=i(M,[{buffer:E,type:M.FLOAT,size:4},{buffer:D,type:M.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:F,type:M.FLOAT,size:4},{buffer:I,type:M.FLOAT,size:2},{buffer:P,type:M.FLOAT,size:4}]),N=new g(M,S,h,L,E,P,D,F,I,R,p.traceType||"cone");return N.update(_),N}A.exports=u},{colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259}],81:[function(c,A,T){var e=c("glslify"),a=e([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec3 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, coneScale, coneOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * conePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(conePosition, 1.0);
  vec4 t_position  = view * conePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = conePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),i=e([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),n=e([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float vectorScale, coneScale, coneOffset;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);
  gl_Position = projection * view * conePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),r=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);T.meshShader={vertex:a,fragment:i,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},T.pickShader={vertex:n,fragment:r,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},{glslify:231}],82:[function(c,A,T){A.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],83:[function(c,A,T){var e=c("./1.0/numbers");A.exports=function(i){return e[i]}},{"./1.0/numbers":82}],84:[function(c,A,T){A.exports=g;var e=c("gl-buffer"),a=c("gl-vao"),i=c("./shaders/index"),n=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function r(d,f,y,l){this.gl=d,this.shader=l,this.buffer=f,this.vao=y,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var v=r.prototype;v.isOpaque=function(){return!this.hasAlpha},v.isTransparent=function(){return this.hasAlpha},v.drawTransparent=v.draw=function(d){var f=this.gl,y=this.shader.uniforms;this.shader.bind();var l=y.view=d.view||n,x=y.projection=d.projection||n;y.model=d.model||n,y.clipBounds=this.clipBounds,y.opacity=this.opacity;var u=l[12],M=l[13],_=l[14],p=l[15],w=d._ortho||!1,h=w?2:1,L=h*this.pixelRatio*(x[3]*u+x[7]*M+x[11]*_+x[15]*p)/f.drawingBufferHeight;this.vao.bind();for(var S=0;S<3;++S)f.lineWidth(this.lineWidth[S]*this.pixelRatio),y.capSize=this.capSize[S]*L,this.lineCount[S]&&f.drawArrays(f.LINES,this.lineOffset[S],this.lineCount[S]);this.vao.unbind()};function s(d,f){for(var y=0;y<3;++y)d[0][y]=Math.min(d[0][y],f[y]),d[1][y]=Math.max(d[1][y],f[y])}var o=function(){for(var d=new Array(3),f=0;f<3;++f){for(var y=[],l=1;l<=2;++l)for(var x=-1;x<=1;x+=2){var u=(l+f)%3,M=[0,0,0];M[u]=x,y.push(M)}d[f]=y}return d}();function b(d,f,y,l){for(var x=o[l],u=0;u<x.length;++u){var M=x[u];d.push(f[0],f[1],f[2],y[0],y[1],y[2],y[3],M[0],M[1],M[2])}return x.length}v.update=function(d){d=d||{},"lineWidth"in d&&(this.lineWidth=d.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in d&&(this.capSize=d.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in d&&(this.opacity=+d.opacity,this.opacity<1&&(this.hasAlpha=!0));var f=d.color||[[0,0,0],[0,0,0],[0,0,0]],y=d.position,l=d.error;if(Array.isArray(f[0])||(f=[f,f,f]),y&&l){var x=[],u=y.length,M=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var _=0;_<3;++_){this.lineOffset[_]=M;e:for(var p=0;p<u;++p){for(var w=y[p],h=0;h<3;++h)if(isNaN(w[h])||!isFinite(w[h]))continue e;var L=l[p],S=f[_];if(Array.isArray(S[0])&&(S=f[p]),S.length===3?S=[S[0],S[1],S[2],1]:S.length===4&&(S=[S[0],S[1],S[2],S[3]],!this.hasAlpha&&S[3]<1&&(this.hasAlpha=!0)),!(isNaN(L[0][_])||isNaN(L[1][_]))){if(L[0][_]<0){var E=w.slice();E[_]+=L[0][_],x.push(w[0],w[1],w[2],S[0],S[1],S[2],S[3],0,0,0,E[0],E[1],E[2],S[0],S[1],S[2],S[3],0,0,0),s(this.bounds,E),M+=2+b(x,E,S,_)}if(L[1][_]>0){var E=w.slice();E[_]+=L[1][_],x.push(w[0],w[1],w[2],S[0],S[1],S[2],S[3],0,0,0,E[0],E[1],E[2],S[0],S[1],S[2],S[3],0,0,0),s(this.bounds,E),M+=2+b(x,E,S,_)}}}this.lineCount[_]=M-this.lineOffset[_]}this.buffer.update(x)}},v.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()};function g(d){var f=d.gl,y=e(f),l=a(f,[{buffer:y,type:f.FLOAT,size:3,offset:0,stride:40},{buffer:y,type:f.FLOAT,size:4,offset:12,stride:40},{buffer:y,type:f.FLOAT,size:3,offset:28,stride:40}]),x=i(f);x.attributes.position.location=0,x.attributes.color.location=1,x.attributes.offset.location=2;var u=new r(f,y,l,x);return u.update(d),u}},{"./shaders/index":85,"gl-buffer":78,"gl-vao":150}],85:[function(c,A,T){var e=c("glslify"),a=c("gl-shader"),i=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, offset;
attribute vec4 color;
uniform mat4 model, view, projection;
uniform float capSize;
varying vec4 fragColor;
varying vec3 fragPosition;

void main() {
  vec4 worldPosition  = model * vec4(position, 1.0);
  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);
  gl_Position         = projection * view * worldPosition;
  fragColor           = color;
  fragPosition        = position;
}`]),n=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float opacity;
varying vec3 fragPosition;
varying vec4 fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  gl_FragColor = opacity * fragColor;
}`]);A.exports=function(r){return a(r,i,n,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},{"gl-shader":132,glslify:231}],86:[function(c,A,T){var e=c("gl-texture2d");A.exports=M;var a=null,i,n,r,v;function s(_){var p=_.getParameter(_.FRAMEBUFFER_BINDING),w=_.getParameter(_.RENDERBUFFER_BINDING),h=_.getParameter(_.TEXTURE_BINDING_2D);return[p,w,h]}function o(_,p){_.bindFramebuffer(_.FRAMEBUFFER,p[0]),_.bindRenderbuffer(_.RENDERBUFFER,p[1]),_.bindTexture(_.TEXTURE_2D,p[2])}function b(_,p){var w=_.getParameter(p.MAX_COLOR_ATTACHMENTS_WEBGL);a=new Array(w+1);for(var h=0;h<=w;++h){for(var L=new Array(w),S=0;S<h;++S)L[S]=_.COLOR_ATTACHMENT0+S;for(var S=h;S<w;++S)L[S]=_.NONE;a[h]=L}}function g(_){switch(_){case i:throw new Error("gl-fbo: Framebuffer unsupported");case n:throw new Error("gl-fbo: Framebuffer incomplete attachment");case r:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case v:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function d(_,p,w,h,L,S){if(!h)return null;var E=e(_,p,w,L,h);return E.magFilter=_.NEAREST,E.minFilter=_.NEAREST,E.mipSamples=1,E.bind(),_.framebufferTexture2D(_.FRAMEBUFFER,S,_.TEXTURE_2D,E.handle,0),E}function f(_,p,w,h,L){var S=_.createRenderbuffer();return _.bindRenderbuffer(_.RENDERBUFFER,S),_.renderbufferStorage(_.RENDERBUFFER,h,p,w),_.framebufferRenderbuffer(_.FRAMEBUFFER,L,_.RENDERBUFFER,S),S}function y(_){var p=s(_.gl),w=_.gl,h=_.handle=w.createFramebuffer(),L=_._shape[0],S=_._shape[1],E=_.color.length,P=_._ext,F=_._useStencil,I=_._useDepth,D=_._colorType;w.bindFramebuffer(w.FRAMEBUFFER,h);for(var R=0;R<E;++R)_.color[R]=d(w,L,S,D,w.RGBA,w.COLOR_ATTACHMENT0+R);E===0?(_._color_rb=f(w,L,S,w.RGBA4,w.COLOR_ATTACHMENT0),P&&P.drawBuffersWEBGL(a[0])):E>1&&P.drawBuffersWEBGL(a[E]);var N=w.getExtension("WEBGL_depth_texture");N?F?_.depth=d(w,L,S,N.UNSIGNED_INT_24_8_WEBGL,w.DEPTH_STENCIL,w.DEPTH_STENCIL_ATTACHMENT):I&&(_.depth=d(w,L,S,w.UNSIGNED_SHORT,w.DEPTH_COMPONENT,w.DEPTH_ATTACHMENT)):I&&F?_._depth_rb=f(w,L,S,w.DEPTH_STENCIL,w.DEPTH_STENCIL_ATTACHMENT):I?_._depth_rb=f(w,L,S,w.DEPTH_COMPONENT16,w.DEPTH_ATTACHMENT):F&&(_._depth_rb=f(w,L,S,w.STENCIL_INDEX,w.STENCIL_ATTACHMENT));var z=w.checkFramebufferStatus(w.FRAMEBUFFER);if(z!==w.FRAMEBUFFER_COMPLETE){_._destroyed=!0,w.bindFramebuffer(w.FRAMEBUFFER,null),w.deleteFramebuffer(_.handle),_.handle=null,_.depth&&(_.depth.dispose(),_.depth=null),_._depth_rb&&(w.deleteRenderbuffer(_._depth_rb),_._depth_rb=null);for(var R=0;R<_.color.length;++R)_.color[R].dispose(),_.color[R]=null;_._color_rb&&(w.deleteRenderbuffer(_._color_rb),_._color_rb=null),o(w,p),g(z)}o(w,p)}function l(_,p,w,h,L,S,E,P){this.gl=_,this._shape=[p|0,w|0],this._destroyed=!1,this._ext=P,this.color=new Array(L);for(var F=0;F<L;++F)this.color[F]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=h,this._useDepth=S,this._useStencil=E;var I=this,D=[p|0,w|0];Object.defineProperties(D,{0:{get:function(){return I._shape[0]},set:function(R){return I.width=R}},1:{get:function(){return I._shape[1]},set:function(R){return I.height=R}}}),this._shapeVector=D,y(this)}var x=l.prototype;function u(_,p,w){if(_._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(!(_._shape[0]===p&&_._shape[1]===w)){var h=_.gl,L=h.getParameter(h.MAX_RENDERBUFFER_SIZE);if(p<0||p>L||w<0||w>L)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");_._shape[0]=p,_._shape[1]=w;for(var S=s(h),E=0;E<_.color.length;++E)_.color[E].shape=_._shape;_._color_rb&&(h.bindRenderbuffer(h.RENDERBUFFER,_._color_rb),h.renderbufferStorage(h.RENDERBUFFER,h.RGBA4,_._shape[0],_._shape[1])),_.depth&&(_.depth.shape=_._shape),_._depth_rb&&(h.bindRenderbuffer(h.RENDERBUFFER,_._depth_rb),_._useDepth&&_._useStencil?h.renderbufferStorage(h.RENDERBUFFER,h.DEPTH_STENCIL,_._shape[0],_._shape[1]):_._useDepth?h.renderbufferStorage(h.RENDERBUFFER,h.DEPTH_COMPONENT16,_._shape[0],_._shape[1]):_._useStencil&&h.renderbufferStorage(h.RENDERBUFFER,h.STENCIL_INDEX,_._shape[0],_._shape[1])),h.bindFramebuffer(h.FRAMEBUFFER,_.handle);var P=h.checkFramebufferStatus(h.FRAMEBUFFER);P!==h.FRAMEBUFFER_COMPLETE&&(_.dispose(),o(h,S),g(P)),o(h,S)}}Object.defineProperties(x,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(_){if(Array.isArray(_)||(_=[_|0,_|0]),_.length!==2)throw new Error("gl-fbo: Shape vector must be length 2");var p=_[0]|0,w=_[1]|0;return u(this,p,w),[p,w]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(_){return _=_|0,u(this,_,this._shape[1]),_},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(_){return _=_|0,u(this,this._shape[0],_),_},enumerable:!1}}),x.bind=function(){if(!this._destroyed){var _=this.gl;_.bindFramebuffer(_.FRAMEBUFFER,this.handle),_.viewport(0,0,this._shape[0],this._shape[1])}},x.dispose=function(){if(!this._destroyed){this._destroyed=!0;var _=this.gl;_.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(_.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var p=0;p<this.color.length;++p)this.color[p].dispose(),this.color[p]=null;this._color_rb&&(_.deleteRenderbuffer(this._color_rb),this._color_rb=null)}};function M(_,p,w,h){i||(i=_.FRAMEBUFFER_UNSUPPORTED,n=_.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,r=_.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,v=_.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var L=_.getExtension("WEBGL_draw_buffers");if(!a&&L&&b(_,L),Array.isArray(p)&&(h=w,w=p[1]|0,p=p[0]|0),typeof p!="number")throw new Error("gl-fbo: Missing shape parameter");var S=_.getParameter(_.MAX_RENDERBUFFER_SIZE);if(p<0||p>S||w<0||w>S)throw new Error("gl-fbo: Parameters are too large for FBO");h=h||{};var E=1;if("color"in h){if(E=Math.max(h.color|0,0),E<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(E>1)if(L){if(E>_.getParameter(L.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+E+" draw buffers")}else throw new Error("gl-fbo: Multiple draw buffer extension not supported")}var P=_.UNSIGNED_BYTE,F=_.getExtension("OES_texture_float");if(h.float&&E>0){if(!F)throw new Error("gl-fbo: Context does not support floating point textures");P=_.FLOAT}else h.preferFloat&&E>0&&F&&(P=_.FLOAT);var I=!0;"depth"in h&&(I=!!h.depth);var D=!1;return"stencil"in h&&(D=!!h.stencil),new l(_,p,w,P,E,I,D,L)}},{"gl-texture2d":146}],87:[function(c,A,T){var e=c("sprintf-js").sprintf,a=c("gl-constants/lookup"),i=c("glsl-shader-name"),n=c("add-line-numbers");A.exports=r;function r(v,s,o){var b=i(s)||"of unknown name (see npm glsl-shader-name)",g="unknown type";o!==void 0&&(g=o===a.FRAGMENT_SHADER?"fragment":"vertex");for(var d=e(`Error compiling %s shader %s:
`,g,b),f=e("%s%s",d,v),y=v.split(`
`),l={},x=0;x<y.length;x++){var u=y[x];if(!(u===""||u==="\0")){var M=parseInt(u.split(":")[2]);if(isNaN(M))throw new Error(e("Could not parse error: %s",u));l[M]=u}}for(var _=n(s).split(`
`),x=0;x<_.length;x++)if(!(!l[x+3]&&!l[x+2]&&!l[x+1])){var p=_[x];if(d+=p+`
`,l[x+1]){var w=l[x+1];w=w.substr(w.split(":",3).join(":").length+1).trim(),d+=e(`^^^ %s

`,w)}}return{long:d.trim(),short:f.trim()}}},{"add-line-numbers":9,"gl-constants/lookup":83,"glsl-shader-name":223,"sprintf-js":301}],88:[function(c,A,T){A.exports=g;var e=c("binary-search-bounds"),a=c("iota-array"),i=c("typedarray-pool"),n=c("gl-shader"),r=c("gl-buffer"),v=c("./lib/shaders");function s(d,f,y,l,x,u,M){this.plot=d,this.shader=f,this.pickShader=y,this.positionBuffer=l,this.weightBuffer=x,this.colorBuffer=u,this.idBuffer=M,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var o=s.prototype,b=[0,0,1,0,0,1,1,0,1,1,0,1];o.draw=function(){var d=[1,0,0,0,1,0,0,0,1];return function(){var f=this.plot,y=this.shader,l=this.bounds,x=this.numVertices;if(!(x<=0)){var u=f.gl,M=f.dataBox,_=l[2]-l[0],p=l[3]-l[1],w=M[2]-M[0],h=M[3]-M[1];d[0]=2*_/w,d[4]=2*p/h,d[6]=2*(l[0]-M[0])/w-1,d[7]=2*(l[1]-M[1])/h-1,y.bind();var L=y.uniforms;L.viewTransform=d,L.shape=this.shape;var S=y.attributes;this.positionBuffer.bind(),S.position.pointer(),this.weightBuffer.bind(),S.weight.pointer(u.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),S.color.pointer(u.UNSIGNED_BYTE,!0),u.drawArrays(u.TRIANGLES,0,x)}}}(),o.drawPick=function(){var d=[1,0,0,0,1,0,0,0,1],f=[0,0,0,0];return function(y){var l=this.plot,x=this.pickShader,u=this.bounds,M=this.numVertices;if(!(M<=0)){var _=l.gl,p=l.dataBox,w=u[2]-u[0],h=u[3]-u[1],L=p[2]-p[0],S=p[3]-p[1];d[0]=2*w/L,d[4]=2*h/S,d[6]=2*(u[0]-p[0])/L-1,d[7]=2*(u[1]-p[1])/S-1;for(var E=0;E<4;++E)f[E]=y>>E*8&255;this.pickOffset=y,x.bind();var P=x.uniforms;P.viewTransform=d,P.pickOffset=f,P.shape=this.shape;var F=x.attributes;return this.positionBuffer.bind(),F.position.pointer(),this.weightBuffer.bind(),F.weight.pointer(_.UNSIGNED_BYTE,!1),this.idBuffer.bind(),F.pickId.pointer(_.UNSIGNED_BYTE,!1),_.drawArrays(_.TRIANGLES,0,M),y+this.shape[0]*this.shape[1]}}}(),o.pick=function(d,f,y){var l=this.pickOffset,x=this.shape[0]*this.shape[1];if(y<l||y>=l+x)return null;var u=y-l,M=this.xData,_=this.yData;return{object:this,pointId:u,dataCoord:[M[u%this.shape[0]],_[u/this.shape[0]|0]]}},o.update=function(d){d=d||{};var f=d.shape||[0,0],y=d.x||a(f[0]),l=d.y||a(f[1]),x=d.z||new Float32Array(f[0]*f[1]),u=d.zsmooth!==!1;this.xData=y,this.yData=l;var M=d.colorLevels||[0],_=d.colorValues||[0,0,0,1],p=M.length,w=this.bounds,h,L,S,E;u?(h=w[0]=y[0],L=w[1]=l[0],S=w[2]=y[y.length-1],E=w[3]=l[l.length-1]):(h=w[0]=y[0]+(y[1]-y[0])/2,L=w[1]=l[0]+(l[1]-l[0])/2,S=w[2]=y[y.length-1]+(y[y.length-1]-y[y.length-2])/2,E=w[3]=l[l.length-1]+(l[l.length-1]-l[l.length-2])/2);var P=1/(S-h),F=1/(E-L),I=f[0],D=f[1];this.shape=[I,D];var R=(u?(I-1)*(D-1):I*D)*(b.length>>>1);this.numVertices=R;for(var N=i.mallocUint8(R*4),z=i.mallocFloat32(R*2),G=i.mallocUint8(R*2),Y=i.mallocUint32(R),ee=0,Z=u?I-1:I,X=u?D-1:D,ne=0;ne<X;++ne){var ce,Q;u?(ce=F*(l[ne]-L),Q=F*(l[ne+1]-L)):(ce=ne<D-1?F*(l[ne]-(l[ne+1]-l[ne])/2-L):F*(l[ne]-(l[ne]-l[ne-1])/2-L),Q=ne<D-1?F*(l[ne]+(l[ne+1]-l[ne])/2-L):F*(l[ne]+(l[ne]-l[ne-1])/2-L));for(var K=0;K<Z;++K){var U,H;u?(U=P*(y[K]-h),H=P*(y[K+1]-h)):(U=K<I-1?P*(y[K]-(y[K+1]-y[K])/2-h):P*(y[K]-(y[K]-y[K-1])/2-h),H=K<I-1?P*(y[K]+(y[K+1]-y[K])/2-h):P*(y[K]+(y[K]-y[K-1])/2-h));for(var q=0;q<b.length;q+=2){var re=b[q],j=b[q+1],$=u?(ne+j)*I+(K+re):ne*I+K,ie=x[$],oe=e.le(M,ie),ae,se,_e,ue;if(oe<0)ae=_[0],se=_[1],_e=_[2],ue=_[3];else if(oe===p-1)ae=_[4*p-4],se=_[4*p-3],_e=_[4*p-2],ue=_[4*p-1];else{var ye=(ie-M[oe])/(M[oe+1]-M[oe]),xe=1-ye,me=4*oe,be=4*(oe+1);ae=xe*_[me]+ye*_[be],se=xe*_[me+1]+ye*_[be+1],_e=xe*_[me+2]+ye*_[be+2],ue=xe*_[me+3]+ye*_[be+3]}N[4*ee]=255*ae,N[4*ee+1]=255*se,N[4*ee+2]=255*_e,N[4*ee+3]=255*ue,z[2*ee]=U*.5+H*.5,z[2*ee+1]=ce*.5+Q*.5,G[2*ee]=re,G[2*ee+1]=j,Y[ee]=ne*I+K,ee+=1}}}this.positionBuffer.update(z),this.weightBuffer.update(G),this.colorBuffer.update(N),this.idBuffer.update(Y),i.free(z),i.free(N),i.free(G),i.free(Y)},o.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)};function g(d,f){var y=d.gl,l=n(y,v.vertex,v.fragment),x=n(y,v.pickVertex,v.pickFragment),u=r(y),M=r(y),_=r(y),p=r(y),w=new s(d,l,x,u,M,_,p);return w.update(f),d.addObject(w),w}},{"./lib/shaders":89,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"iota-array":235,"typedarray-pool":308}],89:[function(c,A,T){var e=c("glslify");A.exports={fragment:e([`precision lowp float;
#define GLSLIFY 1
varying vec4 fragColor;
void main() {
  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);
}
`]),vertex:e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 color;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragColor;

void main() {
  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  fragColor = color;
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`]),pickFragment:e([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;
varying vec2 vWeight;

uniform vec2 shape;
uniform vec4 pickOffset;

void main() {
  vec2 d = step(.5, vWeight);
  vec4 id = fragId + pickOffset;
  id.x += d.x + d.y*shape.x;

  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  gl_FragColor = id/255.;
}
`]),pickVertex:e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragId;
varying vec2 vWeight;

void main() {
  vWeight = weight;

  fragId = pickId;

  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`])}},{glslify:231}],90:[function(c,A,T){var e=c("glslify"),a=c("gl-shader"),i=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, nextPosition;
attribute float arcLength, lineWidth;
attribute vec4 color;

uniform vec2 screenShape;
uniform float pixelRatio;
uniform mat4 model, view, projection;

varying vec4 fragColor;
varying vec3 worldPosition;
varying float pixelArcLength;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  vec4 startPoint = project(position);
  vec4 endPoint   = project(nextPosition);

  vec2 A = startPoint.xy / startPoint.w;
  vec2 B =   endPoint.xy /   endPoint.w;

  float clipAngle = atan(
    (B.y - A.y) * screenShape.y,
    (B.x - A.x) * screenShape.x
  );

  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(
    sin(clipAngle),
    -cos(clipAngle)
  ) / screenShape;

  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);

  worldPosition = position;
  pixelArcLength = arcLength;
  fragColor = color;
}
`]),n=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3      clipBounds[2];
uniform sampler2D dashTexture;
uniform float     dashScale;
uniform float     opacity;

varying vec3    worldPosition;
varying float   pixelArcLength;
varying vec4    fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;
  if(dashWeight < 0.5) {
    discard;
  }
  gl_FragColor = fragColor * opacity;
}
`]),r=e([`precision highp float;
#define GLSLIFY 1

#define FLOAT_MAX  1.70141184e38
#define FLOAT_MIN  1.17549435e-38

// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl
vec4 packFloat(float v) {
  float av = abs(v);

  //Handle special cases
  if(av < FLOAT_MIN) {
    return vec4(0.0, 0.0, 0.0, 0.0);
  } else if(v > FLOAT_MAX) {
    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;
  } else if(v < -FLOAT_MAX) {
    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;
  }

  vec4 c = vec4(0,0,0,0);

  //Compute exponent and mantissa
  float e = floor(log2(av));
  float m = av * pow(2.0, -e) - 1.0;

  //Unpack mantissa
  c[1] = floor(128.0 * m);
  m -= c[1] / 128.0;
  c[2] = floor(32768.0 * m);
  m -= c[2] / 32768.0;
  c[3] = floor(8388608.0 * m);

  //Unpack exponent
  float ebias = e + 127.0;
  c[0] = floor(ebias / 2.0);
  ebias -= c[0] * 2.0;
  c[1] += floor(ebias) * 128.0;

  //Unpack sign bit
  c[0] += 128.0 * step(0.0, -v);

  //Scale back to range
  return c / 255.0;
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform float pickId;
uniform vec3 clipBounds[2];

varying vec3 worldPosition;
varying float pixelArcLength;
varying vec4 fragColor;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;

  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);
}`]),v=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];T.createShader=function(s){return a(s,i,n,null,v)},T.createPickShader=function(s){return a(s,i,r,null,v)}},{"gl-shader":132,glslify:231}],91:[function(c,A,T){A.exports=_;var e=c("gl-buffer"),a=c("gl-vao"),i=c("gl-texture2d"),n=new Uint8Array(4),r=new Float32Array(n.buffer);function v(p,w,h,L){return n[0]=L,n[1]=h,n[2]=w,n[3]=p,r[0]}var s=c("binary-search-bounds"),o=c("ndarray"),b=c("./lib/shaders"),g=b.createShader,d=b.createPickShader,f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function y(p,w){for(var h=0,L=0;L<3;++L){var S=p[L]-w[L];h+=S*S}return Math.sqrt(h)}function l(p){for(var w=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],h=0;h<3;++h)w[0][h]=Math.max(p[0][h],w[0][h]),w[1][h]=Math.min(p[1][h],w[1][h]);return w}function x(p,w,h,L){this.arcLength=p,this.position=w,this.index=h,this.dataCoordinate=L}function u(p,w,h,L,S,E){this.gl=p,this.shader=w,this.pickShader=h,this.buffer=L,this.vao=S,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=E,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var M=u.prototype;M.isTransparent=function(){return this.hasAlpha},M.isOpaque=function(){return!this.hasAlpha},M.pickSlots=1,M.setPickBase=function(p){this.pickId=p},M.drawTransparent=M.draw=function(p){if(!!this.vertexCount){var w=this.gl,h=this.shader,L=this.vao;h.bind(),h.uniforms={model:p.model||f,view:p.view||f,projection:p.projection||f,clipBounds:l(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[w.drawingBufferWidth,w.drawingBufferHeight],pixelRatio:this.pixelRatio},L.bind(),L.draw(w.TRIANGLE_STRIP,this.vertexCount),L.unbind()}},M.drawPick=function(p){if(!!this.vertexCount){var w=this.gl,h=this.pickShader,L=this.vao;h.bind(),h.uniforms={model:p.model||f,view:p.view||f,projection:p.projection||f,pickId:this.pickId,clipBounds:l(this.clipBounds),screenShape:[w.drawingBufferWidth,w.drawingBufferHeight],pixelRatio:this.pixelRatio},L.bind(),L.draw(w.TRIANGLE_STRIP,this.vertexCount),L.unbind()}},M.update=function(p){var w,h;this.dirty=!0;var L=!!p.connectGaps;"dashScale"in p&&(this.dashScale=p.dashScale),this.hasAlpha=!1,"opacity"in p&&(this.opacity=+p.opacity,this.opacity<1&&(this.hasAlpha=!0));var S=[],E=[],P=[],F=0,I=0,D=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],R=p.position||p.positions;if(R){var N=p.color||p.colors||[0,0,0,1],z=p.lineWidth||1,G=!1;e:for(w=1;w<R.length;++w){var Y=R[w-1],ee=R[w];for(E.push(F),P.push(Y.slice()),h=0;h<3;++h){if(isNaN(Y[h])||isNaN(ee[h])||!isFinite(Y[h])||!isFinite(ee[h])){if(!L&&S.length>0){for(var Z=0;Z<24;++Z)S.push(S[S.length-12]);I+=2,G=!0}continue e}D[0][h]=Math.min(D[0][h],Y[h],ee[h]),D[1][h]=Math.max(D[1][h],Y[h],ee[h])}var X,ne;Array.isArray(N[0])?(X=N.length>w-1?N[w-1]:N.length>0?N[N.length-1]:[0,0,0,1],ne=N.length>w?N[w]:N.length>0?N[N.length-1]:[0,0,0,1]):X=ne=N,X.length===3&&(X=[X[0],X[1],X[2],1]),ne.length===3&&(ne=[ne[0],ne[1],ne[2],1]),!this.hasAlpha&&X[3]<1&&(this.hasAlpha=!0);var ce;Array.isArray(z)?ce=z.length>w-1?z[w-1]:z.length>0?z[z.length-1]:[0,0,0,1]:ce=z;var Q=F;if(F+=y(Y,ee),G){for(h=0;h<2;++h)S.push(Y[0],Y[1],Y[2],ee[0],ee[1],ee[2],Q,ce,X[0],X[1],X[2],X[3]);I+=2,G=!1}S.push(Y[0],Y[1],Y[2],ee[0],ee[1],ee[2],Q,ce,X[0],X[1],X[2],X[3],Y[0],Y[1],Y[2],ee[0],ee[1],ee[2],Q,-ce,X[0],X[1],X[2],X[3],ee[0],ee[1],ee[2],Y[0],Y[1],Y[2],F,-ce,ne[0],ne[1],ne[2],ne[3],ee[0],ee[1],ee[2],Y[0],Y[1],Y[2],F,ce,ne[0],ne[1],ne[2],ne[3]),I+=4}}if(this.buffer.update(S),E.push(F),P.push(R[R.length-1].slice()),this.bounds=D,this.vertexCount=I,this.points=P,this.arcLength=E,"dashes"in p){var K=p.dashes,U=K.slice();for(U.unshift(0),w=1;w<U.length;++w)U[w]=U[w-1]+U[w];var H=o(new Array(256*4),[256,1,4]);for(w=0;w<256;++w){for(h=0;h<4;++h)H.set(w,0,h,0);s.le(U,U[U.length-1]*w/255)&1?H.set(w,0,0,0):H.set(w,0,0,255)}this.texture.setPixels(H)}},M.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},M.pick=function(p){if(!p||p.id!==this.pickId)return null;var w=v(p.value[0],p.value[1],p.value[2],0),h=s.le(this.arcLength,w);if(h<0)return null;if(h===this.arcLength.length-1)return new x(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),h);for(var L=this.points[h],S=this.points[Math.min(h+1,this.points.length-1)],E=(w-this.arcLength[h])/(this.arcLength[h+1]-this.arcLength[h]),P=1-E,F=[0,0,0],I=0;I<3;++I)F[I]=P*L[I]+E*S[I];var D=Math.min(E<.5?h:h+1,this.points.length-1);return new x(w,F,D,this.points[D])};function _(p){var w=p.gl||p.scene&&p.scene.gl,h=g(w);h.attributes.position.location=0,h.attributes.nextPosition.location=1,h.attributes.arcLength.location=2,h.attributes.lineWidth.location=3,h.attributes.color.location=4;var L=d(w);L.attributes.position.location=0,L.attributes.nextPosition.location=1,L.attributes.arcLength.location=2,L.attributes.lineWidth.location=3,L.attributes.color.location=4;for(var S=e(w),E=a(w,[{buffer:S,size:3,offset:0,stride:48},{buffer:S,size:3,offset:12,stride:48},{buffer:S,size:1,offset:24,stride:48},{buffer:S,size:1,offset:28,stride:48},{buffer:S,size:4,offset:32,stride:48}]),P=o(new Array(256*4),[256,1,4]),F=0;F<256*4;++F)P.data[F]=255;var I=i(w,P);I.wrap=w.REPEAT;var D=new u(w,h,L,S,E,I);return D.update(p),D}},{"./lib/shaders":90,"binary-search-bounds":31,"gl-buffer":78,"gl-texture2d":146,"gl-vao":150,ndarray:259}],92:[function(c,A,T){A.exports=e;function e(a){var i=new Float32Array(16);return i[0]=a[0],i[1]=a[1],i[2]=a[2],i[3]=a[3],i[4]=a[4],i[5]=a[5],i[6]=a[6],i[7]=a[7],i[8]=a[8],i[9]=a[9],i[10]=a[10],i[11]=a[11],i[12]=a[12],i[13]=a[13],i[14]=a[14],i[15]=a[15],i}},{}],93:[function(c,A,T){A.exports=e;function e(){var a=new Float32Array(16);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}},{}],94:[function(c,A,T){A.exports=e;function e(a){var i=a[0],n=a[1],r=a[2],v=a[3],s=a[4],o=a[5],b=a[6],g=a[7],d=a[8],f=a[9],y=a[10],l=a[11],x=a[12],u=a[13],M=a[14],_=a[15],p=i*o-n*s,w=i*b-r*s,h=i*g-v*s,L=n*b-r*o,S=n*g-v*o,E=r*g-v*b,P=d*u-f*x,F=d*M-y*x,I=d*_-l*x,D=f*M-y*u,R=f*_-l*u,N=y*_-l*M;return p*N-w*R+h*D+L*I-S*F+E*P}},{}],95:[function(c,A,T){A.exports=e;function e(a,i){var n=i[0],r=i[1],v=i[2],s=i[3],o=n+n,b=r+r,g=v+v,d=n*o,f=r*o,y=r*b,l=v*o,x=v*b,u=v*g,M=s*o,_=s*b,p=s*g;return a[0]=1-y-u,a[1]=f+p,a[2]=l-_,a[3]=0,a[4]=f-p,a[5]=1-d-u,a[6]=x+M,a[7]=0,a[8]=l+_,a[9]=x-M,a[10]=1-d-y,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}},{}],96:[function(c,A,T){A.exports=e;function e(a,i,n){var r=i[0],v=i[1],s=i[2],o=i[3],b=r+r,g=v+v,d=s+s,f=r*b,y=r*g,l=r*d,x=v*g,u=v*d,M=s*d,_=o*b,p=o*g,w=o*d;return a[0]=1-(x+M),a[1]=y+w,a[2]=l-p,a[3]=0,a[4]=y-w,a[5]=1-(f+M),a[6]=u+_,a[7]=0,a[8]=l+p,a[9]=u-_,a[10]=1-(f+x),a[11]=0,a[12]=n[0],a[13]=n[1],a[14]=n[2],a[15]=1,a}},{}],97:[function(c,A,T){A.exports=e;function e(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}},{}],98:[function(c,A,T){A.exports=e;function e(a,i){var n=i[0],r=i[1],v=i[2],s=i[3],o=i[4],b=i[5],g=i[6],d=i[7],f=i[8],y=i[9],l=i[10],x=i[11],u=i[12],M=i[13],_=i[14],p=i[15],w=n*b-r*o,h=n*g-v*o,L=n*d-s*o,S=r*g-v*b,E=r*d-s*b,P=v*d-s*g,F=f*M-y*u,I=f*_-l*u,D=f*p-x*u,R=y*_-l*M,N=y*p-x*M,z=l*p-x*_,G=w*z-h*N+L*R+S*D-E*I+P*F;return G?(G=1/G,a[0]=(b*z-g*N+d*R)*G,a[1]=(v*N-r*z-s*R)*G,a[2]=(M*P-_*E+p*S)*G,a[3]=(l*E-y*P-x*S)*G,a[4]=(g*D-o*z-d*I)*G,a[5]=(n*z-v*D+s*I)*G,a[6]=(_*L-u*P-p*h)*G,a[7]=(f*P-l*L+x*h)*G,a[8]=(o*N-b*D+d*F)*G,a[9]=(r*D-n*N-s*F)*G,a[10]=(u*E-M*L+p*w)*G,a[11]=(y*L-f*E-x*w)*G,a[12]=(b*I-o*R-g*F)*G,a[13]=(n*R-r*I+v*F)*G,a[14]=(M*h-u*S-_*w)*G,a[15]=(f*S-y*h+l*w)*G,a):null}},{}],99:[function(c,A,T){var e=c("./identity");A.exports=a;function a(i,n,r,v){var s,o,b,g,d,f,y,l,x,u,M=n[0],_=n[1],p=n[2],w=v[0],h=v[1],L=v[2],S=r[0],E=r[1],P=r[2];return Math.abs(M-S)<1e-6&&Math.abs(_-E)<1e-6&&Math.abs(p-P)<1e-6?e(i):(y=M-S,l=_-E,x=p-P,u=1/Math.sqrt(y*y+l*l+x*x),y*=u,l*=u,x*=u,s=h*x-L*l,o=L*y-w*x,b=w*l-h*y,u=Math.sqrt(s*s+o*o+b*b),u?(u=1/u,s*=u,o*=u,b*=u):(s=0,o=0,b=0),g=l*b-x*o,d=x*s-y*b,f=y*o-l*s,u=Math.sqrt(g*g+d*d+f*f),u?(u=1/u,g*=u,d*=u,f*=u):(g=0,d=0,f=0),i[0]=s,i[1]=g,i[2]=y,i[3]=0,i[4]=o,i[5]=d,i[6]=l,i[7]=0,i[8]=b,i[9]=f,i[10]=x,i[11]=0,i[12]=-(s*M+o*_+b*p),i[13]=-(g*M+d*_+f*p),i[14]=-(y*M+l*_+x*p),i[15]=1,i)}},{"./identity":97}],100:[function(c,A,T){A.exports=e;function e(a,i,n){var r=i[0],v=i[1],s=i[2],o=i[3],b=i[4],g=i[5],d=i[6],f=i[7],y=i[8],l=i[9],x=i[10],u=i[11],M=i[12],_=i[13],p=i[14],w=i[15],h=n[0],L=n[1],S=n[2],E=n[3];return a[0]=h*r+L*b+S*y+E*M,a[1]=h*v+L*g+S*l+E*_,a[2]=h*s+L*d+S*x+E*p,a[3]=h*o+L*f+S*u+E*w,h=n[4],L=n[5],S=n[6],E=n[7],a[4]=h*r+L*b+S*y+E*M,a[5]=h*v+L*g+S*l+E*_,a[6]=h*s+L*d+S*x+E*p,a[7]=h*o+L*f+S*u+E*w,h=n[8],L=n[9],S=n[10],E=n[11],a[8]=h*r+L*b+S*y+E*M,a[9]=h*v+L*g+S*l+E*_,a[10]=h*s+L*d+S*x+E*p,a[11]=h*o+L*f+S*u+E*w,h=n[12],L=n[13],S=n[14],E=n[15],a[12]=h*r+L*b+S*y+E*M,a[13]=h*v+L*g+S*l+E*_,a[14]=h*s+L*d+S*x+E*p,a[15]=h*o+L*f+S*u+E*w,a}},{}],101:[function(c,A,T){A.exports=e;function e(a,i,n,r,v,s,o){var b=1/(i-n),g=1/(r-v),d=1/(s-o);return a[0]=-2*b,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*g,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*d,a[11]=0,a[12]=(i+n)*b,a[13]=(v+r)*g,a[14]=(o+s)*d,a[15]=1,a}},{}],102:[function(c,A,T){A.exports=e;function e(a,i,n,r,v){var s=1/Math.tan(i/2),o=1/(r-v);return a[0]=s/n,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=s,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=(v+r)*o,a[11]=-1,a[12]=0,a[13]=0,a[14]=2*v*r*o,a[15]=0,a}},{}],103:[function(c,A,T){A.exports=e;function e(a,i,n,r){var v=r[0],s=r[1],o=r[2],b=Math.sqrt(v*v+s*s+o*o),g,d,f,y,l,x,u,M,_,p,w,h,L,S,E,P,F,I,D,R,N,z,G,Y;return Math.abs(b)<1e-6?null:(b=1/b,v*=b,s*=b,o*=b,g=Math.sin(n),d=Math.cos(n),f=1-d,y=i[0],l=i[1],x=i[2],u=i[3],M=i[4],_=i[5],p=i[6],w=i[7],h=i[8],L=i[9],S=i[10],E=i[11],P=v*v*f+d,F=s*v*f+o*g,I=o*v*f-s*g,D=v*s*f-o*g,R=s*s*f+d,N=o*s*f+v*g,z=v*o*f+s*g,G=s*o*f-v*g,Y=o*o*f+d,a[0]=y*P+M*F+h*I,a[1]=l*P+_*F+L*I,a[2]=x*P+p*F+S*I,a[3]=u*P+w*F+E*I,a[4]=y*D+M*R+h*N,a[5]=l*D+_*R+L*N,a[6]=x*D+p*R+S*N,a[7]=u*D+w*R+E*N,a[8]=y*z+M*G+h*Y,a[9]=l*z+_*G+L*Y,a[10]=x*z+p*G+S*Y,a[11]=u*z+w*G+E*Y,i!==a&&(a[12]=i[12],a[13]=i[13],a[14]=i[14],a[15]=i[15]),a)}},{}],104:[function(c,A,T){A.exports=e;function e(a,i,n){var r=Math.sin(n),v=Math.cos(n),s=i[4],o=i[5],b=i[6],g=i[7],d=i[8],f=i[9],y=i[10],l=i[11];return i!==a&&(a[0]=i[0],a[1]=i[1],a[2]=i[2],a[3]=i[3],a[12]=i[12],a[13]=i[13],a[14]=i[14],a[15]=i[15]),a[4]=s*v+d*r,a[5]=o*v+f*r,a[6]=b*v+y*r,a[7]=g*v+l*r,a[8]=d*v-s*r,a[9]=f*v-o*r,a[10]=y*v-b*r,a[11]=l*v-g*r,a}},{}],105:[function(c,A,T){A.exports=e;function e(a,i,n){var r=Math.sin(n),v=Math.cos(n),s=i[0],o=i[1],b=i[2],g=i[3],d=i[8],f=i[9],y=i[10],l=i[11];return i!==a&&(a[4]=i[4],a[5]=i[5],a[6]=i[6],a[7]=i[7],a[12]=i[12],a[13]=i[13],a[14]=i[14],a[15]=i[15]),a[0]=s*v-d*r,a[1]=o*v-f*r,a[2]=b*v-y*r,a[3]=g*v-l*r,a[8]=s*r+d*v,a[9]=o*r+f*v,a[10]=b*r+y*v,a[11]=g*r+l*v,a}},{}],106:[function(c,A,T){A.exports=e;function e(a,i,n){var r=Math.sin(n),v=Math.cos(n),s=i[0],o=i[1],b=i[2],g=i[3],d=i[4],f=i[5],y=i[6],l=i[7];return i!==a&&(a[8]=i[8],a[9]=i[9],a[10]=i[10],a[11]=i[11],a[12]=i[12],a[13]=i[13],a[14]=i[14],a[15]=i[15]),a[0]=s*v+d*r,a[1]=o*v+f*r,a[2]=b*v+y*r,a[3]=g*v+l*r,a[4]=d*v-s*r,a[5]=f*v-o*r,a[6]=y*v-b*r,a[7]=l*v-g*r,a}},{}],107:[function(c,A,T){A.exports=e;function e(a,i,n){var r=n[0],v=n[1],s=n[2];return a[0]=i[0]*r,a[1]=i[1]*r,a[2]=i[2]*r,a[3]=i[3]*r,a[4]=i[4]*v,a[5]=i[5]*v,a[6]=i[6]*v,a[7]=i[7]*v,a[8]=i[8]*s,a[9]=i[9]*s,a[10]=i[10]*s,a[11]=i[11]*s,a[12]=i[12],a[13]=i[13],a[14]=i[14],a[15]=i[15],a}},{}],108:[function(c,A,T){A.exports=e;function e(a,i,n){var r=n[0],v=n[1],s=n[2],o,b,g,d,f,y,l,x,u,M,_,p;return i===a?(a[12]=i[0]*r+i[4]*v+i[8]*s+i[12],a[13]=i[1]*r+i[5]*v+i[9]*s+i[13],a[14]=i[2]*r+i[6]*v+i[10]*s+i[14],a[15]=i[3]*r+i[7]*v+i[11]*s+i[15]):(o=i[0],b=i[1],g=i[2],d=i[3],f=i[4],y=i[5],l=i[6],x=i[7],u=i[8],M=i[9],_=i[10],p=i[11],a[0]=o,a[1]=b,a[2]=g,a[3]=d,a[4]=f,a[5]=y,a[6]=l,a[7]=x,a[8]=u,a[9]=M,a[10]=_,a[11]=p,a[12]=o*r+f*v+u*s+i[12],a[13]=b*r+y*v+M*s+i[13],a[14]=g*r+l*v+_*s+i[14],a[15]=d*r+x*v+p*s+i[15]),a}},{}],109:[function(c,A,T){A.exports=e;function e(a,i){if(a===i){var n=i[1],r=i[2],v=i[3],s=i[6],o=i[7],b=i[11];a[1]=i[4],a[2]=i[8],a[3]=i[12],a[4]=n,a[6]=i[9],a[7]=i[13],a[8]=r,a[9]=s,a[11]=i[14],a[12]=v,a[13]=o,a[14]=b}else a[0]=i[0],a[1]=i[4],a[2]=i[8],a[3]=i[12],a[4]=i[1],a[5]=i[5],a[6]=i[9],a[7]=i[13],a[8]=i[2],a[9]=i[6],a[10]=i[10],a[11]=i[14],a[12]=i[3],a[13]=i[7],a[14]=i[11],a[15]=i[15];return a}},{}],110:[function(c,A,T){var e=c("barycentric"),a=c("polytope-closest-point/lib/closest_point_2d.js");A.exports=s;function i(o,b){for(var g=[0,0,0,0],d=0;d<4;++d)for(var f=0;f<4;++f)g[f]+=o[4*d+f]*b[d];return g}function n(o,b,g,d,f){for(var y=i(d,i(g,i(b,[o[0],o[1],o[2],1]))),l=0;l<3;++l)y[l]/=y[3];return[.5*f[0]*(1+y[0]),.5*f[1]*(1-y[1])]}function r(o,b){if(o.length===2){for(var g=0,d=0,f=0;f<2;++f)g+=Math.pow(b[f]-o[0][f],2),d+=Math.pow(b[f]-o[1][f],2);return g=Math.sqrt(g),d=Math.sqrt(d),g+d<1e-6?[1,0]:[d/(g+d),g/(d+g)]}else if(o.length===3){var y=[0,0];return a(o[0],o[1],o[2],b,y),e(o,y)}return[]}function v(o,b){for(var g=[0,0,0],d=0;d<o.length;++d)for(var f=o[d],y=b[d],l=0;l<3;++l)g[l]+=y*f[l];return g}function s(o,b,g,d,f,y){if(o.length===1)return[0,o[0].slice()];for(var l=new Array(o.length),x=0;x<o.length;++x)l[x]=n(o[x],g,d,f,y);for(var u=0,M=1/0,x=0;x<l.length;++x){for(var _=0,p=0;p<2;++p)_+=Math.pow(l[x][p]-b[p],2);_<M&&(M=_,u=x)}for(var w=r(l,b),h=0,x=0;x<3;++x){if(w[x]<-.001||w[x]>1.0001)return null;h+=w[x]}return Math.abs(h-1)>.001?null:[u,v(o,w),w]}},{barycentric:14,"polytope-closest-point/lib/closest_point_2d.js":270}],111:[function(c,A,T){var e=c("glslify"),a=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, normal;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model
           , view
           , projection
           , inverseModel;
uniform vec3 eyePosition
           , lightPosition;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  gl_Position      = project(position);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * vec4(position , 1.0);
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  f_color          = color;
  f_data           = position;
  f_uv             = uv;
}
`]),i=e([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness
            , fresnel
            , kambient
            , kdiffuse
            , kspecular;
uniform sampler2D texture;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (f_color.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], f_data)
  ) discard;

  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d

  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * f_color.a;
}
`]),n=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model, view, projection;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_color = color;
  f_data  = position;
  f_uv    = uv;
}`]),r=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;

  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),v=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;
attribute float pointSize;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);
  } else {
    gl_Position = projection * view * model * vec4(position, 1.0);
  }
  gl_PointSize = pointSize;
  f_color = color;
  f_uv = uv;
}`]),s=e([`precision highp float;
#define GLSLIFY 1

uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);
  if(dot(pointR, pointR) > 0.25) {
    discard;
  }
  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),o=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 id;

uniform mat4 model, view, projection;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_id        = id;
  f_position  = position;
}`]),b=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]),g=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3  position;
attribute float pointSize;
attribute vec4  id;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);
  } else {
    gl_Position  = projection * view * model * vec4(position, 1.0);
    gl_PointSize = pointSize;
  }
  f_id         = id;
  f_position   = position;
}`]),d=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
}`]),f=e([`precision highp float;
#define GLSLIFY 1

uniform vec3 contourColor;

void main() {
  gl_FragColor = vec4(contourColor, 1.0);
}
`]);T.meshShader={vertex:a,fragment:i,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},T.wireShader={vertex:n,fragment:r,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},T.pointShader={vertex:v,fragment:s,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},T.pickShader={vertex:o,fragment:b,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},T.pointPickShader={vertex:g,fragment:b,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},T.contourShader={vertex:d,fragment:f,attributes:[{name:"position",type:"vec3"}]}},{glslify:231}],112:[function(c,A,T){var e=1e-6,a=1e-6,i=c("gl-shader"),n=c("gl-buffer"),r=c("gl-vao"),v=c("gl-texture2d"),s=c("normals"),o=c("gl-mat4/multiply"),b=c("gl-mat4/invert"),g=c("ndarray"),d=c("colormap"),f=c("simplicial-complex-contour"),y=c("typedarray-pool"),l=c("./lib/shaders"),x=c("./lib/closest-point"),u=l.meshShader,M=l.wireShader,_=l.pointShader,p=l.pickShader,w=l.pointPickShader,h=l.contourShader,L=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function S(Z,X,ne,ce,Q,K,U,H,q,re,j,$,ie,oe,ae,se,_e,ue,ye,xe,me,be,ke,De,Ve,Ae,Le){this.gl=Z,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=X,this.dirty=!0,this.triShader=ne,this.lineShader=ce,this.pointShader=Q,this.pickShader=K,this.pointPickShader=U,this.contourShader=H,this.trianglePositions=q,this.triangleColors=j,this.triangleNormals=ie,this.triangleUVs=$,this.triangleIds=re,this.triangleVAO=oe,this.triangleCount=0,this.lineWidth=1,this.edgePositions=ae,this.edgeColors=_e,this.edgeUVs=ue,this.edgeIds=se,this.edgeVAO=ye,this.edgeCount=0,this.pointPositions=xe,this.pointColors=be,this.pointUVs=ke,this.pointSizes=De,this.pointIds=me,this.pointVAO=Ve,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=Ae,this.contourVAO=Le,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=L,this._view=L,this._projection=L,this._resolution=[1,1]}var E=S.prototype;E.isOpaque=function(){return!this.hasAlpha},E.isTransparent=function(){return this.hasAlpha},E.pickSlots=1,E.setPickBase=function(Z){this.pickId=Z};function P(Z,X){if(!X||!X.length)return 1;for(var ne=0;ne<X.length;++ne){if(X.length<2)return 1;if(X[ne][0]===Z)return X[ne][1];if(X[ne][0]>Z&&ne>0){var ce=(X[ne][0]-Z)/(X[ne][0]-X[ne-1][0]);return X[ne][1]*(1-ce)+ce*X[ne-1][1]}}return 1}function F(Z,X){for(var ne=d({colormap:Z,nshades:256,format:"rgba"}),ce=new Uint8Array(256*4),Q=0;Q<256;++Q){for(var K=ne[Q],U=0;U<3;++U)ce[4*Q+U]=K[U];X?ce[4*Q+3]=255*P(Q/255,X):ce[4*Q+3]=255*K[3]}return g(ce,[256,256,4],[4,0,1])}function I(Z){for(var X=Z.length,ne=new Array(X),ce=0;ce<X;++ce)ne[ce]=Z[ce][2];return ne}E.highlight=function(Z){if(!Z||!this.contourEnable){this.contourCount=0;return}for(var X=f(this.cells,this.intensity,Z.intensity),ne=X.cells,ce=X.vertexIds,Q=X.vertexWeights,K=ne.length,U=y.mallocFloat32(2*3*K),H=0,q=0;q<K;++q)for(var re=ne[q],j=0;j<2;++j){var $=re[0];re.length===2&&($=re[j]);for(var ie=ce[$][0],oe=ce[$][1],ae=Q[$],se=1-ae,_e=this.positions[ie],ue=this.positions[oe],ye=0;ye<3;++ye)U[H++]=ae*_e[ye]+se*ue[ye]}this.contourCount=H/3|0,this.contourPositions.update(U.subarray(0,H)),y.free(U)},E.update=function(Z){Z=Z||{};var X=this.gl;this.dirty=!0,"contourEnable"in Z&&(this.contourEnable=Z.contourEnable),"contourColor"in Z&&(this.contourColor=Z.contourColor),"lineWidth"in Z&&(this.lineWidth=Z.lineWidth),"lightPosition"in Z&&(this.lightPosition=Z.lightPosition),this.hasAlpha=!1,"opacity"in Z&&(this.opacity=Z.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in Z&&(this.opacityscale=Z.opacityscale,this.hasAlpha=!0),"ambient"in Z&&(this.ambientLight=Z.ambient),"diffuse"in Z&&(this.diffuseLight=Z.diffuse),"specular"in Z&&(this.specularLight=Z.specular),"roughness"in Z&&(this.roughness=Z.roughness),"fresnel"in Z&&(this.fresnel=Z.fresnel),Z.texture?(this.texture.dispose(),this.texture=v(X,Z.texture)):Z.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=X.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=X.LINEAR,this.texture.setPixels(F(Z.colormap,this.opacityscale)),this.texture.generateMipmap());var ne=Z.cells,ce=Z.positions;if(!ce||!ne)return;var Q=[],K=[],U=[],H=[],q=[],re=[],j=[],$=[],ie=[],oe=[],ae=[],se=[],_e=[],ue=[];this.cells=ne,this.positions=ce;var ye=Z.vertexNormals,xe=Z.cellNormals,me=Z.vertexNormalsEpsilon===void 0?e:Z.vertexNormalsEpsilon,be=Z.faceNormalsEpsilon===void 0?a:Z.faceNormalsEpsilon;Z.useFacetNormals&&!xe&&(xe=s.faceNormals(ne,ce,be)),!xe&&!ye&&(ye=s.vertexNormals(ne,ce,me));var ke=Z.vertexColors,De=Z.cellColors,Ve=Z.meshColor||[1,1,1,1],Ae=Z.vertexUVs,Le=Z.vertexIntensity,je=Z.cellUVs,Ye=Z.cellIntensity,ze=1/0,Ie=-1/0;if(!Ae&&!je)if(Le)if(Z.vertexIntensityBounds)ze=+Z.vertexIntensityBounds[0],Ie=+Z.vertexIntensityBounds[1];else for(var We=0;We<Le.length;++We){var pt=Le[We];ze=Math.min(ze,pt),Ie=Math.max(Ie,pt)}else if(Ye)if(Z.cellIntensityBounds)ze=+Z.cellIntensityBounds[0],Ie=+Z.cellIntensityBounds[1];else for(var We=0;We<Ye.length;++We){var pt=Ye[We];ze=Math.min(ze,pt),Ie=Math.max(Ie,pt)}else for(var We=0;We<ce.length;++We){var pt=ce[We][2];ze=Math.min(ze,pt),Ie=Math.max(Ie,pt)}Le?this.intensity=Le:Ye?this.intensity=Ye:this.intensity=I(ce),this.pickVertex=!(Ye||De);var Ft=Z.pointSizes,Qt=Z.pointSize||1;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var We=0;We<ce.length;++We)for(var zt=ce[We],Et=0;Et<3;++Et)isNaN(zt[Et])||!isFinite(zt[Et])||(this.bounds[0][Et]=Math.min(this.bounds[0][Et],zt[Et]),this.bounds[1][Et]=Math.max(this.bounds[1][Et],zt[Et]));var Xt=0,Nt=0,Ct=0;e:for(var We=0;We<ne.length;++We){var Xe=ne[We];switch(Xe.length){case 1:for(var at=Xe[0],zt=ce[at],Et=0;Et<3;++Et)if(isNaN(zt[Et])||!isFinite(zt[Et]))continue e;oe.push(zt[0],zt[1],zt[2]);var Ge;ke?Ge=ke[at]:De?Ge=De[We]:Ge=Ve,this.opacityscale&&Le?K.push(Ge[0],Ge[1],Ge[2],this.opacity*P((Le[at]-ze)/(Ie-ze),this.opacityscale)):Ge.length===3?ae.push(Ge[0],Ge[1],Ge[2],this.opacity):(ae.push(Ge[0],Ge[1],Ge[2],Ge[3]*this.opacity),Ge[3]<1&&(this.hasAlpha=!0));var Se;Ae?Se=Ae[at]:Le?Se=[(Le[at]-ze)/(Ie-ze),0]:je?Se=je[We]:Ye?Se=[(Ye[We]-ze)/(Ie-ze),0]:Se=[(zt[2]-ze)/(Ie-ze),0],se.push(Se[0],Se[1]),Ft?_e.push(Ft[at]):_e.push(Qt),ue.push(We),Ct+=1;break;case 2:for(var Et=0;Et<2;++Et)for(var at=Xe[Et],zt=ce[at],He=0;He<3;++He)if(isNaN(zt[He])||!isFinite(zt[He]))continue e;for(var Et=0;Et<2;++Et){var at=Xe[Et],zt=ce[at];re.push(zt[0],zt[1],zt[2]);var Ge;ke?Ge=ke[at]:De?Ge=De[We]:Ge=Ve,this.opacityscale&&Le?K.push(Ge[0],Ge[1],Ge[2],this.opacity*P((Le[at]-ze)/(Ie-ze),this.opacityscale)):Ge.length===3?j.push(Ge[0],Ge[1],Ge[2],this.opacity):(j.push(Ge[0],Ge[1],Ge[2],Ge[3]*this.opacity),Ge[3]<1&&(this.hasAlpha=!0));var Se;Ae?Se=Ae[at]:Le?Se=[(Le[at]-ze)/(Ie-ze),0]:je?Se=je[We]:Ye?Se=[(Ye[We]-ze)/(Ie-ze),0]:Se=[(zt[2]-ze)/(Ie-ze),0],$.push(Se[0],Se[1]),ie.push(We)}Nt+=1;break;case 3:for(var Et=0;Et<3;++Et)for(var at=Xe[Et],zt=ce[at],He=0;He<3;++He)if(isNaN(zt[He])||!isFinite(zt[He]))continue e;for(var Et=0;Et<3;++Et){var at=Xe[2-Et],zt=ce[at];Q.push(zt[0],zt[1],zt[2]);var Ge;ke?Ge=ke[at]:De?Ge=De[We]:Ge=Ve,Ge?this.opacityscale&&Le?K.push(Ge[0],Ge[1],Ge[2],this.opacity*P((Le[at]-ze)/(Ie-ze),this.opacityscale)):Ge.length===3?K.push(Ge[0],Ge[1],Ge[2],this.opacity):(K.push(Ge[0],Ge[1],Ge[2],Ge[3]*this.opacity),Ge[3]<1&&(this.hasAlpha=!0)):K.push(.5,.5,.5,1);var Se;Ae?Se=Ae[at]:Le?Se=[(Le[at]-ze)/(Ie-ze),0]:je?Se=je[We]:Ye?Se=[(Ye[We]-ze)/(Ie-ze),0]:Se=[(zt[2]-ze)/(Ie-ze),0],H.push(Se[0],Se[1]);var Ke;ye?Ke=ye[at]:Ke=xe[We],U.push(Ke[0],Ke[1],Ke[2]),q.push(We)}Xt+=1;break}}this.pointCount=Ct,this.edgeCount=Nt,this.triangleCount=Xt,this.pointPositions.update(oe),this.pointColors.update(ae),this.pointUVs.update(se),this.pointSizes.update(_e),this.pointIds.update(new Uint32Array(ue)),this.edgePositions.update(re),this.edgeColors.update(j),this.edgeUVs.update($),this.edgeIds.update(new Uint32Array(ie)),this.trianglePositions.update(Q),this.triangleColors.update(K),this.triangleUVs.update(H),this.triangleNormals.update(U),this.triangleIds.update(new Uint32Array(q))},E.drawTransparent=E.draw=function(Z){Z=Z||{};for(var X=this.gl,ne=Z.model||L,ce=Z.view||L,Q=Z.projection||L,K=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],U=0;U<3;++U)K[0][U]=Math.max(K[0][U],this.clipBounds[0][U]),K[1][U]=Math.min(K[1][U],this.clipBounds[1][U]);var H={model:ne,view:ce,projection:Q,inverseModel:L.slice(),clipBounds:K,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};H.inverseModel=b(H.inverseModel,H.model),X.disable(X.CULL_FACE),this.texture.bind(0);var q=new Array(16);o(q,H.view,H.model),o(q,H.projection,q),b(q,q);for(var U=0;U<3;++U)H.eyePosition[U]=q[12+U]/q[15];for(var re=q[15],U=0;U<3;++U)re+=this.lightPosition[U]*q[4*U+3];for(var U=0;U<3;++U){for(var j=q[12+U],$=0;$<3;++$)j+=q[4*$+U]*this.lightPosition[$];H.lightPosition[U]=j/re}if(this.triangleCount>0){var ie=this.triShader;ie.bind(),ie.uniforms=H,this.triangleVAO.bind(),X.drawArrays(X.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()}if(this.edgeCount>0&&this.lineWidth>0){var ie=this.lineShader;ie.bind(),ie.uniforms=H,this.edgeVAO.bind(),X.lineWidth(this.lineWidth*this.pixelRatio),X.drawArrays(X.LINES,0,this.edgeCount*2),this.edgeVAO.unbind()}if(this.pointCount>0){var ie=this.pointShader;ie.bind(),ie.uniforms=H,this.pointVAO.bind(),X.drawArrays(X.POINTS,0,this.pointCount),this.pointVAO.unbind()}if(this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0){var ie=this.contourShader;ie.bind(),ie.uniforms=H,this.contourVAO.bind(),X.drawArrays(X.LINES,0,this.contourCount),this.contourVAO.unbind()}},E.drawPick=function(Z){Z=Z||{};for(var X=this.gl,ne=Z.model||L,ce=Z.view||L,Q=Z.projection||L,K=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],U=0;U<3;++U)K[0][U]=Math.max(K[0][U],this.clipBounds[0][U]),K[1][U]=Math.min(K[1][U],this.clipBounds[1][U]);this._model=[].slice.call(ne),this._view=[].slice.call(ce),this._projection=[].slice.call(Q),this._resolution=[X.drawingBufferWidth,X.drawingBufferHeight];var H={model:ne,view:ce,projection:Q,clipBounds:K,pickId:this.pickId/255},q=this.pickShader;if(q.bind(),q.uniforms=H,this.triangleCount>0&&(this.triangleVAO.bind(),X.drawArrays(X.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),X.lineWidth(this.lineWidth*this.pixelRatio),X.drawArrays(X.LINES,0,this.edgeCount*2),this.edgeVAO.unbind()),this.pointCount>0){var q=this.pointPickShader;q.bind(),q.uniforms=H,this.pointVAO.bind(),X.drawArrays(X.POINTS,0,this.pointCount),this.pointVAO.unbind()}},E.pick=function(Z){if(!Z||Z.id!==this.pickId)return null;for(var X=Z.value[0]+256*Z.value[1]+65536*Z.value[2],ne=this.cells[X],ce=this.positions,Q=new Array(ne.length),K=0;K<ne.length;++K)Q[K]=ce[ne[K]];var U=Z.coord[0],H=Z.coord[1];if(!this.pickVertex){var q=this.positions[ne[0]],re=this.positions[ne[1]],j=this.positions[ne[2]],$=[(q[0]+re[0]+j[0])/3,(q[1]+re[1]+j[1])/3,(q[2]+re[2]+j[2])/3];return{_cellCenter:!0,position:[U,H],index:X,cell:ne,cellId:X,intensity:this.intensity[X],dataCoordinate:$}}var ie=x(Q,[U*this.pixelRatio,this._resolution[1]-H*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!ie)return null;for(var oe=ie[2],ae=0,K=0;K<ne.length;++K)ae+=oe[K]*this.intensity[ne[K]];return{position:ie[1],index:ne[ie[0]],cell:ne,cellId:X,intensity:ae,dataCoordinate:this.positions[ne[ie[0]]]}},E.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()};function D(Z){var X=i(Z,u.vertex,u.fragment);return X.attributes.position.location=0,X.attributes.color.location=2,X.attributes.uv.location=3,X.attributes.normal.location=4,X}function R(Z){var X=i(Z,M.vertex,M.fragment);return X.attributes.position.location=0,X.attributes.color.location=2,X.attributes.uv.location=3,X}function N(Z){var X=i(Z,_.vertex,_.fragment);return X.attributes.position.location=0,X.attributes.color.location=2,X.attributes.uv.location=3,X.attributes.pointSize.location=4,X}function z(Z){var X=i(Z,p.vertex,p.fragment);return X.attributes.position.location=0,X.attributes.id.location=1,X}function G(Z){var X=i(Z,w.vertex,w.fragment);return X.attributes.position.location=0,X.attributes.id.location=1,X.attributes.pointSize.location=4,X}function Y(Z){var X=i(Z,h.vertex,h.fragment);return X.attributes.position.location=0,X}function ee(Z,X){arguments.length===1&&(X=Z,Z=X.gl);var ne=Z.getExtension("OES_standard_derivatives")||Z.getExtension("MOZ_OES_standard_derivatives")||Z.getExtension("WEBKIT_OES_standard_derivatives");if(!ne)throw new Error("derivatives not supported");var ce=D(Z),Q=R(Z),K=N(Z),U=z(Z),H=G(Z),q=Y(Z),re=v(Z,g(new Uint8Array([255,255,255,255]),[1,1,4]));re.generateMipmap(),re.minFilter=Z.LINEAR_MIPMAP_LINEAR,re.magFilter=Z.LINEAR;var j=n(Z),$=n(Z),ie=n(Z),oe=n(Z),ae=n(Z),se=r(Z,[{buffer:j,type:Z.FLOAT,size:3},{buffer:ae,type:Z.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:$,type:Z.FLOAT,size:4},{buffer:ie,type:Z.FLOAT,size:2},{buffer:oe,type:Z.FLOAT,size:3}]),_e=n(Z),ue=n(Z),ye=n(Z),xe=n(Z),me=r(Z,[{buffer:_e,type:Z.FLOAT,size:3},{buffer:xe,type:Z.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:ue,type:Z.FLOAT,size:4},{buffer:ye,type:Z.FLOAT,size:2}]),be=n(Z),ke=n(Z),De=n(Z),Ve=n(Z),Ae=n(Z),Le=r(Z,[{buffer:be,type:Z.FLOAT,size:3},{buffer:Ae,type:Z.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:ke,type:Z.FLOAT,size:4},{buffer:De,type:Z.FLOAT,size:2},{buffer:Ve,type:Z.FLOAT,size:1}]),je=n(Z),Ye=r(Z,[{buffer:je,type:Z.FLOAT,size:3}]),ze=new S(Z,re,ce,Q,K,U,H,q,j,ae,$,ie,oe,se,_e,xe,ue,ye,me,be,Ae,ke,De,Ve,Le,je,Ye);return ze.update(X),ze}A.exports=ee},{"./lib/closest-point":110,"./lib/shaders":111,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259,normals:261,"simplicial-complex-contour":291,"typedarray-pool":308}],113:[function(c,A,T){A.exports=v;var e=c("gl-buffer"),a=c("gl-shader"),i=c("./shaders");function n(s,o,b){this.plot=s,this.vbo=o,this.shader=b}var r=n.prototype;r.bind=function(){var s=this.shader;this.vbo.bind(),this.shader.bind(),s.attributes.coord.pointer(),s.uniforms.screenBox=this.plot.screenBox},r.drawBox=function(){var s=[0,0],o=[0,0];return function(b,g,d,f,y){var l=this.plot,x=this.shader,u=l.gl;s[0]=b,s[1]=g,o[0]=d,o[1]=f,x.uniforms.lo=s,x.uniforms.hi=o,x.uniforms.color=y,u.drawArrays(u.TRIANGLE_STRIP,0,4)}}(),r.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function v(s){var o=s.gl,b=e(o,[0,0,0,1,1,0,1,1]),g=a(o,i.boxVert,i.lineFrag);return new n(s,b,g)}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],114:[function(c,A,T){A.exports=o;var e=c("gl-buffer"),a=c("gl-shader"),i=c("binary-search-bounds"),n=c("./shaders");function r(b,g,d,f){this.plot=b,this.vbo=g,this.shader=d,this.tickShader=f,this.ticks=[[],[]]}function v(b,g){return b-g}var s=r.prototype;s.draw=function(){var b=[0,0],g=[0,0],d=[0,0];return function(){for(var f=this.plot,y=this.vbo,l=this.shader,x=this.ticks,u=f.gl,M=f._tickBounds,_=f.dataBox,p=f.viewBox,w=f.gridLineWidth,h=f.gridLineColor,L=f.gridLineEnable,S=f.pixelRatio,E=0;E<2;++E){var P=M[E],F=M[E+2],I=F-P,D=.5*(_[E+2]+_[E]),R=_[E+2]-_[E];g[E]=2*I/R,b[E]=2*(P-D)/R}l.bind(),y.bind(),l.attributes.dataCoord.pointer(),l.uniforms.dataShift=b,l.uniforms.dataScale=g;for(var N=0,E=0;E<2;++E){d[0]=d[1]=0,d[E]=1,l.uniforms.dataAxis=d,l.uniforms.lineWidth=w[E]/(p[E+2]-p[E])*S,l.uniforms.color=h[E];var z=x[E].length*6;L[E]&&z&&u.drawArrays(u.TRIANGLES,N,z),N+=z}}}(),s.drawTickMarks=function(){var b=[0,0],g=[0,0],d=[1,0],f=[0,1],y=[0,0],l=[0,0];return function(){for(var x=this.plot,u=this.vbo,M=this.tickShader,_=this.ticks,p=x.gl,w=x._tickBounds,h=x.dataBox,L=x.viewBox,S=x.pixelRatio,E=x.screenBox,P=E[2]-E[0],F=E[3]-E[1],I=L[2]-L[0],D=L[3]-L[1],R=0;R<2;++R){var N=w[R],z=w[R+2],G=z-N,Y=.5*(h[R+2]+h[R]),ee=h[R+2]-h[R];g[R]=2*G/ee,b[R]=2*(N-Y)/ee}g[0]*=I/P,b[0]*=I/P,g[1]*=D/F,b[1]*=D/F,M.bind(),u.bind(),M.attributes.dataCoord.pointer();var Z=M.uniforms;Z.dataShift=b,Z.dataScale=g;var X=x.tickMarkLength,ne=x.tickMarkWidth,ce=x.tickMarkColor,Q=0,K=_[0].length*6,U=Math.min(i.ge(_[0],(h[0]-w[0])/(w[2]-w[0]),v),_[0].length),H=Math.min(i.gt(_[0],(h[2]-w[0])/(w[2]-w[0]),v),_[0].length),q=Q+6*U,re=6*Math.max(0,H-U),j=Math.min(i.ge(_[1],(h[1]-w[1])/(w[3]-w[1]),v),_[1].length),$=Math.min(i.gt(_[1],(h[3]-w[1])/(w[3]-w[1]),v),_[1].length),ie=K+6*j,oe=6*Math.max(0,$-j);y[0]=2*(L[0]-X[1])/P-1,y[1]=(L[3]+L[1])/F-1,l[0]=X[1]*S/P,l[1]=ne[1]*S/F,oe&&(Z.color=ce[1],Z.tickScale=l,Z.dataAxis=f,Z.screenOffset=y,p.drawArrays(p.TRIANGLES,ie,oe)),y[0]=(L[2]+L[0])/P-1,y[1]=2*(L[1]-X[0])/F-1,l[0]=ne[0]*S/P,l[1]=X[0]*S/F,re&&(Z.color=ce[0],Z.tickScale=l,Z.dataAxis=d,Z.screenOffset=y,p.drawArrays(p.TRIANGLES,q,re)),y[0]=2*(L[2]+X[3])/P-1,y[1]=(L[3]+L[1])/F-1,l[0]=X[3]*S/P,l[1]=ne[3]*S/F,oe&&(Z.color=ce[3],Z.tickScale=l,Z.dataAxis=f,Z.screenOffset=y,p.drawArrays(p.TRIANGLES,ie,oe)),y[0]=(L[2]+L[0])/P-1,y[1]=2*(L[3]+X[2])/F-1,l[0]=ne[2]*S/P,l[1]=X[2]*S/F,re&&(Z.color=ce[2],Z.tickScale=l,Z.dataAxis=d,Z.screenOffset=y,p.drawArrays(p.TRIANGLES,q,re))}}(),s.update=function(){var b=[1,1,-1,-1,1,-1],g=[1,-1,1,1,-1,-1];return function(d){var f=d.ticks,y=d.bounds,l=new Float32Array(6*3*(f[0].length+f[1].length));this.plot.zeroLineEnable;for(var x=0,u=[[],[]],M=0;M<2;++M)for(var _=u[M],p=f[M],w=y[M],h=y[M+2],L=0;L<p.length;++L){var S=(p[L].x-w)/(h-w);_.push(S);for(var E=0;E<6;++E)l[x++]=S,l[x++]=b[E],l[x++]=g[E]}this.ticks=u,this.vbo.update(l)}}(),s.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()};function o(b){var g=b.gl,d=e(g),f=a(g,n.gridVert,n.gridFrag),y=a(g,n.tickVert,n.gridFrag),l=new r(b,d,f,y);return l}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132}],115:[function(c,A,T){A.exports=v;var e=c("gl-buffer"),a=c("gl-shader"),i=c("./shaders");function n(s,o,b){this.plot=s,this.vbo=o,this.shader=b}var r=n.prototype;r.bind=function(){var s=this.shader;this.vbo.bind(),this.shader.bind(),s.attributes.coord.pointer(),s.uniforms.screenBox=this.plot.screenBox},r.drawLine=function(){var s=[0,0],o=[0,0];return function(b,g,d,f,y,l){var x=this.plot,u=this.shader,M=x.gl;s[0]=b,s[1]=g,o[0]=d,o[1]=f,u.uniforms.start=s,u.uniforms.end=o,u.uniforms.width=y*x.pixelRatio,u.uniforms.color=l,M.drawArrays(M.TRIANGLE_STRIP,0,4)}}(),r.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function v(s){var o=s.gl,b=e(o,[-1,-1,-1,1,1,-1,1,1]),g=a(o,i.lineVert,i.lineFrag),d=new n(s,b,g);return d}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],116:[function(c,A,T){var e=c("glslify"),a=e([`precision lowp float;
#define GLSLIFY 1
uniform vec4 color;
void main() {
  gl_FragColor = vec4(color.xyz * color.w, color.w);
}
`]);A.exports={lineVert:e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 start, end;
uniform float width;

vec2 perp(vec2 v) {
  return vec2(v.y, -v.x);
}

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  vec2 delta = normalize(perp(start - end));
  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));
  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);
}
`]),lineFrag:a,textVert:e([`#define GLSLIFY 1
attribute vec3 textCoordinate;

uniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;
uniform float angle;

void main() {
  float dataOffset  = textCoordinate.z;
  vec2 glyphOffset  = textCoordinate.xy;
  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));
  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +
    glyphMatrix * glyphOffset * textScale + screenOffset;
  gl_Position = vec4(screenCoordinate, 0, 1);
}
`]),textFrag:a,gridVert:e([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale;
uniform float lineWidth;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;
  gl_Position = vec4(pos, 0, 1);
}
`]),gridFrag:a,boxVert:e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 lo, hi;

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);
}
`]),tickVert:e([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);
}
`])}},{glslify:231}],117:[function(c,A,T){A.exports=o;var e=c("gl-buffer"),a=c("gl-shader"),i=c("text-cache"),n=c("binary-search-bounds"),r=c("./shaders");function v(b,g,d){this.plot=b,this.vbo=g,this.shader=d,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var s=v.prototype;s.drawTicks=function(){var b=[0,0],g=[0,0],d=[0,0];return function(f){var y=this.plot,l=this.shader,x=this.tickX[f],u=this.tickOffset[f],M=y.gl,_=y.viewBox,p=y.dataBox,w=y.screenBox,h=y.pixelRatio,L=y.tickEnable,S=y.tickPad,E=y.tickColor,P=y.tickAngle,F=y.labelEnable,I=y.labelPad,D=y.labelColor,R=y.labelAngle,N=this.labelOffset[f],z=this.labelCount[f],G=n.lt(x,p[f]),Y=n.le(x,p[f+2]);b[0]=b[1]=0,b[f]=1,g[f]=(_[2+f]+_[f])/(w[2+f]-w[f])-1;var ee=2/w[2+(f^1)]-w[f^1];g[f^1]=ee*_[f^1]-1,L[f]&&(g[f^1]-=ee*h*S[f],G<Y&&u[Y]>u[G]&&(l.uniforms.dataAxis=b,l.uniforms.screenOffset=g,l.uniforms.color=E[f],l.uniforms.angle=P[f],M.drawArrays(M.TRIANGLES,u[G],u[Y]-u[G]))),F[f]&&z&&(g[f^1]-=ee*h*I[f],l.uniforms.dataAxis=d,l.uniforms.screenOffset=g,l.uniforms.color=D[f],l.uniforms.angle=R[f],M.drawArrays(M.TRIANGLES,N,z)),g[f^1]=ee*_[2+(f^1)]-1,L[f+2]&&(g[f^1]+=ee*h*S[f+2],G<Y&&u[Y]>u[G]&&(l.uniforms.dataAxis=b,l.uniforms.screenOffset=g,l.uniforms.color=E[f+2],l.uniforms.angle=P[f+2],M.drawArrays(M.TRIANGLES,u[G],u[Y]-u[G]))),F[f+2]&&z&&(g[f^1]+=ee*h*I[f+2],l.uniforms.dataAxis=d,l.uniforms.screenOffset=g,l.uniforms.color=D[f+2],l.uniforms.angle=R[f+2],M.drawArrays(M.TRIANGLES,N,z))}}(),s.drawTitle=function(){var b=[0,0],g=[0,0];return function(){var d=this.plot,f=this.shader,y=d.gl,l=d.screenBox,x=d.titleCenter,u=d.titleAngle,M=d.titleColor,_=d.pixelRatio;if(!!this.titleCount){for(var p=0;p<2;++p)g[p]=2*(x[p]*_-l[p])/(l[2+p]-l[p])-1;f.bind(),f.uniforms.dataAxis=b,f.uniforms.screenOffset=g,f.uniforms.angle=u,f.uniforms.color=M,y.drawArrays(y.TRIANGLES,this.titleOffset,this.titleCount)}}}(),s.bind=function(){var b=[0,0],g=[0,0],d=[0,0];return function(){var f=this.plot,y=this.shader,l=f._tickBounds,x=f.dataBox,u=f.screenBox,M=f.viewBox;y.bind();for(var _=0;_<2;++_){var p=l[_],w=l[_+2],h=w-p,L=.5*(x[_+2]+x[_]),S=x[_+2]-x[_],E=M[_],P=M[_+2],F=P-E,I=u[_],D=u[_+2],R=D-I;g[_]=2*h/S*F/R,b[_]=2*(p-L)/S*F/R}d[1]=2*f.pixelRatio/(u[3]-u[1]),d[0]=d[1]*(u[3]-u[1])/(u[2]-u[0]),y.uniforms.dataScale=g,y.uniforms.dataShift=b,y.uniforms.textScale=d,this.vbo.bind(),y.attributes.textCoordinate.pointer()}}(),s.update=function(b){var g=[],d=b.ticks,f=b.bounds,y,l,x,u,M;for(M=0;M<2;++M){var _=[Math.floor(g.length/3)],p=[-1/0],w=d[M];for(y=0;y<w.length;++y){var h=w[y],L=h.x,S=h.text,E=h.font||"sans-serif";u=h.fontSize||12;for(var P=1/(f[M+2]-f[M]),F=f[M],I=S.split(`
`),D=0;D<I.length;D++)for(x=i(E,I[D]).data,l=0;l<x.length;l+=2)g.push(x[l]*u,-x[l+1]*u-D*u*1.2,(L-F)*P);_.push(Math.floor(g.length/3)),p.push(L)}this.tickOffset[M]=_,this.tickX[M]=p}for(M=0;M<2;++M){for(this.labelOffset[M]=Math.floor(g.length/3),x=i(b.labelFont[M],b.labels[M],{textAlign:"center"}).data,u=b.labelSize[M],y=0;y<x.length;y+=2)g.push(x[y]*u,-x[y+1]*u,0);this.labelCount[M]=Math.floor(g.length/3)-this.labelOffset[M]}for(this.titleOffset=Math.floor(g.length/3),x=i(b.titleFont,b.title).data,u=b.titleSize,y=0;y<x.length;y+=2)g.push(x[y]*u,-x[y+1]*u,0);this.titleCount=Math.floor(g.length/3)-this.titleOffset,this.vbo.update(g)},s.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function o(b){var g=b.gl,d=e(g),f=a(g,r.textVert,r.textFrag),y=new v(b,d,f);return y}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"text-cache":303}],118:[function(c,A,T){A.exports=g;var e=c("gl-select-static"),a=c("./lib/grid"),i=c("./lib/text"),n=c("./lib/line"),r=c("./lib/box");function v(d,f){this.gl=d,this.pickBuffer=f,this.screenBox=[0,0,d.drawingBufferWidth,d.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var s=v.prototype;s.setDirty=function(){this.dirty=this.pickDirty=!0},s.setOverlayDirty=function(){this.dirty=!0},s.nextDepthValue=function(){return this._depthCounter++/65536},s.draw=function(){return function(){var d=this.gl,f=this.screenBox,y=this.viewBox,l=this.dataBox,x=this.pixelRatio,u=this.grid,M=this.line,_=this.text,p=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),!!this.dirty){if(this.dirty=!1,d.bindFramebuffer(d.FRAMEBUFFER,null),d.enable(d.SCISSOR_TEST),d.disable(d.DEPTH_TEST),d.depthFunc(d.LESS),d.depthMask(!1),d.enable(d.BLEND),d.blendEquation(d.FUNC_ADD,d.FUNC_ADD),d.blendFunc(d.ONE,d.ONE_MINUS_SRC_ALPHA),this.borderColor){d.scissor(f[0],f[1],f[2]-f[0],f[3]-f[1]);var w=this.borderColor;d.clearColor(w[0]*w[3],w[1]*w[3],w[2]*w[3],w[3]),d.clear(d.COLOR_BUFFER_BIT|d.DEPTH_BUFFER_BIT)}d.scissor(y[0],y[1],y[2]-y[0],y[3]-y[1]),d.viewport(y[0],y[1],y[2]-y[0],y[3]-y[1]);var h=this.backgroundColor;d.clearColor(h[0]*h[3],h[1]*h[3],h[2]*h[3],h[3]),d.clear(d.COLOR_BUFFER_BIT),u.draw();var L=this.zeroLineEnable,S=this.zeroLineColor,E=this.zeroLineWidth;if(L[0]||L[1]){M.bind();for(var P=0;P<2;++P)if(!(!L[P]||!(l[P]<=0&&l[P+2]>=0))){var F=f[P]-l[P]*(f[P+2]-f[P])/(l[P+2]-l[P]);P===0?M.drawLine(F,f[1],F,f[3],E[P],S[P]):M.drawLine(f[0],F,f[2],F,E[P],S[P])}}for(var P=0;P<p.length;++P)p[P].draw();d.viewport(f[0],f[1],f[2]-f[0],f[3]-f[1]),d.scissor(f[0],f[1],f[2]-f[0],f[3]-f[1]),this.grid.drawTickMarks(),M.bind();var I=this.borderLineEnable,D=this.borderLineWidth,R=this.borderLineColor;I[1]&&M.drawLine(y[0],y[1]-.5*D[1]*x,y[0],y[3]+.5*D[3]*x,D[1],R[1]),I[0]&&M.drawLine(y[0]-.5*D[0]*x,y[1],y[2]+.5*D[2]*x,y[1],D[0],R[0]),I[3]&&M.drawLine(y[2],y[1]-.5*D[1]*x,y[2],y[3]+.5*D[3]*x,D[3],R[3]),I[2]&&M.drawLine(y[0]-.5*D[0]*x,y[3],y[2]+.5*D[2]*x,y[3],D[2],R[2]),_.bind();for(var P=0;P<2;++P)_.drawTicks(P);this.titleEnable&&_.drawTitle();for(var N=this.overlays,P=0;P<N.length;++P)N[P].draw();d.disable(d.SCISSOR_TEST),d.disable(d.BLEND),d.depthMask(!0)}}}(),s.drawPick=function(){return function(){if(!this.static){var d=this.pickBuffer;this.gl,this._pickTimeout=null,d.begin();for(var f=1,y=this.objects,l=0;l<y.length;++l)f=y[l].drawPick(f);d.end()}}}(),s.pick=function(){return function(d,f){if(!this.static){var y=this.pixelRatio,l=this.pickPixelRatio,x=this.viewBox,u=Math.round((d-x[0]/y)*l)|0,M=Math.round((f-x[1]/y)*l)|0,_=this.pickBuffer.query(u,M,this.pickRadius);if(!_)return null;for(var p=_.id+(_.value[0]<<8)+(_.value[1]<<16)+(_.value[2]<<24),w=this.objects,h=0;h<w.length;++h){var L=w[h].pick(u,M,p);if(L)return L}return null}}}();function o(d){for(var f=d.slice(),y=0;y<f.length;++y)f[y]=f[y].slice();return f}function b(d,f){return d.x-f.x}s.setScreenBox=function(d){var f=this.screenBox,y=this.pixelRatio;f[0]=Math.round(d[0]*y)|0,f[1]=Math.round(d[1]*y)|0,f[2]=Math.round(d[2]*y)|0,f[3]=Math.round(d[3]*y)|0,this.setDirty()},s.setDataBox=function(d){var f=this.dataBox,y=f[0]!==d[0]||f[1]!==d[1]||f[2]!==d[2]||f[3]!==d[3];y&&(f[0]=d[0],f[1]=d[1],f[2]=d[2],f[3]=d[3],this.setDirty())},s.setViewBox=function(d){var f=this.pixelRatio,y=this.viewBox;y[0]=Math.round(d[0]*f)|0,y[1]=Math.round(d[1]*f)|0,y[2]=Math.round(d[2]*f)|0,y[3]=Math.round(d[3]*f)|0;var l=this.pickPixelRatio;this.pickBuffer.shape=[Math.round((d[2]-d[0])*l)|0,Math.round((d[3]-d[1])*l)|0],this.setDirty()},s.update=function(d){d=d||{};var f=this.gl;this.pixelRatio=d.pixelRatio||1;var y=this.pixelRatio;this.pickPixelRatio=Math.max(y,1),this.setScreenBox(d.screenBox||[0,0,f.drawingBufferWidth/y,f.drawingBufferHeight/y]),this.screenBox,this.setViewBox(d.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/y,.125*(this.screenBox[3]-this.screenBox[1])/y,.875*(this.screenBox[2]-this.screenBox[0])/y,.875*(this.screenBox[3]-this.screenBox[1])/y]);var l=this.viewBox,x=(l[2]-l[0])/(l[3]-l[1]);this.setDataBox(d.dataBox||[-10,-10/x,10,10/x]),this.borderColor=d.borderColor!==!1?(d.borderColor||[0,0,0,0]).slice():!1,this.backgroundColor=(d.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(d.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(d.gridLineWidth||[1,1]).slice(),this.gridLineColor=o(d.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(d.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(d.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=o(d.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(d.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(d.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=o(d.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(d.titleCenter||[.5*(l[0]+l[2])/y,(l[3]+120)/y]).slice(),this.titleEnable=!("titleEnable"in d)||!!d.titleEnable,this.titleAngle=d.titleAngle||0,this.titleColor=(d.titleColor||[0,0,0,1]).slice(),this.labelPad=(d.labelPad||[15,15,15,15]).slice(),this.labelAngle=(d.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(d.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=o(d.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(d.tickPad||[15,15,15,15]).slice(),this.tickAngle=(d.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(d.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=o(d.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(d.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(d.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=o(d.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var u=d.ticks||[[],[]],M=this._tickBounds;M[0]=M[1]=1/0,M[2]=M[3]=-1/0;for(var _=0;_<2;++_){var p=u[_].slice(0);p.length!==0&&(p.sort(b),M[_]=Math.min(M[_],p[0].x),M[_+2]=Math.max(M[_+2],p[p.length-1].x))}this.grid.update({bounds:M,ticks:u}),this.text.update({bounds:M,ticks:u,labels:d.labels||["x","y"],labelSize:d.labelSize||[12,12],labelFont:d.labelFont||["sans-serif","sans-serif"],title:d.title||"",titleSize:d.titleSize||18,titleFont:d.titleFont||"sans-serif"}),this.static=!!d.static,this.setDirty()},s.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var d=this.objects.length-1;d>=0;--d)this.objects[d].dispose();this.objects.length=0;for(var d=this.overlays.length-1;d>=0;--d)this.overlays[d].dispose();this.overlays.length=0,this.gl=null},s.addObject=function(d){this.objects.indexOf(d)<0&&(this.objects.push(d),this.setDirty())},s.removeObject=function(d){for(var f=this.objects,y=0;y<f.length;++y)if(f[y]===d){f.splice(y,1),this.setDirty();break}},s.addOverlay=function(d){this.overlays.indexOf(d)<0&&(this.overlays.push(d),this.setOverlayDirty())},s.removeOverlay=function(d){for(var f=this.overlays,y=0;y<f.length;++y)if(f[y]===d){f.splice(y,1),this.setOverlayDirty();break}};function g(d){var f=d.gl,y=e(f,[f.drawingBufferWidth,f.drawingBufferHeight]),l=new v(f,y);return l.grid=a(l),l.text=i(l),l.line=n(l),l.box=r(l),l.update(d),l}},{"./lib/box":113,"./lib/grid":114,"./lib/line":115,"./lib/text":117,"gl-select-static":131}],119:[function(c,A,T){A.exports=s;var e=c("right-now"),a=c("3d-view"),i=c("mouse-change"),n=c("mouse-wheel"),r=c("mouse-event-offset"),v=c("has-passive-events");function s(o,b){o=o||document.body,b=b||{};var g=[.01,1/0];"distanceLimits"in b&&(g[0]=b.distanceLimits[0],g[1]=b.distanceLimits[1]),"zoomMin"in b&&(g[0]=b.zoomMin),"zoomMax"in b&&(g[1]=b.zoomMax);var d=a({center:b.center||[0,0,0],up:b.up||[0,1,0],eye:b.eye||[0,0,10],mode:b.mode||"orbit",distanceLimits:g}),f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],y=0,l=o.clientWidth,x=o.clientHeight,u={keyBindingMode:"rotate",enableWheel:!0,view:d,element:o,delay:b.delay||16,rotateSpeed:b.rotateSpeed||1,zoomSpeed:b.zoomSpeed||1,translateSpeed:b.translateSpeed||1,flipX:!!b.flipX,flipY:!!b.flipY,modes:d.modes,_ortho:b._ortho||b.projection&&b.projection.type==="orthographic"||!1,tick:function(){var M=e(),_=this.delay,p=M-2*_;d.idle(M-_),d.recalcMatrix(p),d.flush(M-(100+_*2));for(var w=!0,h=d.computedMatrix,L=0;L<16;++L)w=w&&f[L]===h[L],f[L]=h[L];var S=o.clientWidth===l&&o.clientHeight===x;return l=o.clientWidth,x=o.clientHeight,w?!S:(y=Math.exp(d.computedRadius[0]),!0)},lookAt:function(M,_,p){d.lookAt(d.lastT(),M,_,p)},rotate:function(M,_,p){d.rotate(d.lastT(),M,_,p)},pan:function(M,_,p){d.pan(d.lastT(),M,_,p)},translate:function(M,_,p){d.translate(d.lastT(),M,_,p)}};return Object.defineProperties(u,{matrix:{get:function(){return d.computedMatrix},set:function(M){return d.setMatrix(d.lastT(),M),d.computedMatrix},enumerable:!0},mode:{get:function(){return d.getMode()},set:function(M){var _=d.computedUp.slice(),p=d.computedEye.slice(),w=d.computedCenter.slice();if(d.setMode(M),M==="turntable"){var h=e();d._active.lookAt(h,p,w,_),d._active.lookAt(h+500,p,w,[0,0,1]),d._active.flush(h)}return d.getMode()},enumerable:!0},center:{get:function(){return d.computedCenter},set:function(M){return d.lookAt(d.lastT(),null,M),d.computedCenter},enumerable:!0},eye:{get:function(){return d.computedEye},set:function(M){return d.lookAt(d.lastT(),M),d.computedEye},enumerable:!0},up:{get:function(){return d.computedUp},set:function(M){return d.lookAt(d.lastT(),null,null,M),d.computedUp},enumerable:!0},distance:{get:function(){return y},set:function(M){return d.setDistance(d.lastT(),M),M},enumerable:!0},distanceLimits:{get:function(){return d.getDistanceLimits(g)},set:function(M){return d.setDistanceLimits(M),M},enumerable:!0}}),o.addEventListener("contextmenu",function(M){return M.preventDefault(),!1}),u._lastX=-1,u._lastY=-1,u._lastMods={shift:!1,control:!1,alt:!1,meta:!1},u.enableMouseListeners=function(){u.mouseListener=i(o,M),o.addEventListener("touchstart",function(_){var p=r(_.changedTouches[0],o);M(0,p[0],p[1],u._lastMods),M(1,p[0],p[1],u._lastMods)},v?{passive:!0}:!1),o.addEventListener("touchmove",function(_){var p=r(_.changedTouches[0],o);M(1,p[0],p[1],u._lastMods),_.preventDefault()},v?{passive:!1}:!1),o.addEventListener("touchend",function(_){M(0,u._lastX,u._lastY,u._lastMods)},v?{passive:!0}:!1);function M(_,p,w,h){var L=u.keyBindingMode;if(L!==!1){var S=L==="rotate",E=L==="pan",P=L==="zoom",F=!!h.control,I=!!h.alt,D=!!h.shift,R=!!(_&1),N=!!(_&2),z=!!(_&4),G=1/o.clientHeight,Y=G*(p-u._lastX),ee=G*(w-u._lastY),Z=u.flipX?1:-1,X=u.flipY?1:-1,ne=Math.PI*u.rotateSpeed,ce=e();if(u._lastX!==-1&&u._lastY!==-1&&((S&&R&&!F&&!I&&!D||R&&!F&&!I&&D)&&d.rotate(ce,Z*ne*Y,-X*ne*ee,0),(E&&R&&!F&&!I&&!D||N||R&&F&&!I&&!D)&&d.pan(ce,-u.translateSpeed*Y*y,u.translateSpeed*ee*y,0),P&&R&&!F&&!I&&!D||z||R&&!F&&I&&!D)){var Q=-u.zoomSpeed*ee/window.innerHeight*(ce-d.lastT())*100;d.pan(ce,0,0,y*(Math.exp(Q)-1))}return u._lastX=p,u._lastY=w,u._lastMods=h,!0}}u.wheelListener=n(o,function(_,p){if(u.keyBindingMode!==!1&&!!u.enableWheel){var w=u.flipX?1:-1,h=u.flipY?1:-1,L=e();if(Math.abs(_)>Math.abs(p))d.rotate(L,0,0,-_*w*Math.PI*u.rotateSpeed/window.innerWidth);else if(!u._ortho){var S=-u.zoomSpeed*h*p/window.innerHeight*(L-d.lastT())/20;d.pan(L,0,0,y*(Math.exp(S)-1))}}},!0)},u.enableMouseListeners(),u}},{"3d-view":7,"has-passive-events":232,"mouse-change":247,"mouse-event-offset":248,"mouse-wheel":250,"right-now":278}],120:[function(c,A,T){var e=c("glslify"),a=c("gl-shader"),i=e([`precision mediump float;
#define GLSLIFY 1
attribute vec2 position;
varying vec2 uv;
void main() {
  uv = position;
  gl_Position = vec4(position, 0, 1);
}`]),n=e([`precision mediump float;
#define GLSLIFY 1

uniform sampler2D accumBuffer;
varying vec2 uv;

void main() {
  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));
  gl_FragColor = min(vec4(1,1,1,1), accum);
}`]);A.exports=function(r){return a(r,i,n,null,[{name:"position",type:"vec2"}])}},{"gl-shader":132,glslify:231}],121:[function(c,A,T){var e=c("./camera.js"),a=c("gl-axes3d"),i=c("gl-axes3d/properties"),n=c("gl-spikes3d"),r=c("gl-select-static"),v=c("gl-fbo"),s=c("a-big-triangle"),o=c("mouse-change"),b=c("gl-mat4/perspective"),g=c("gl-mat4/ortho"),d=c("./lib/shader"),f=c("is-mobile")({tablet:!0,featureDetect:!0});A.exports={createScene:M,createCamera:e};function y(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function l(p,w){var h=null;try{h=p.getContext("webgl",w),h||(h=p.getContext("experimental-webgl",w))}catch{return null}return h}function x(p){var w=Math.round(Math.log(Math.abs(p))/Math.log(10));if(w<0){var h=Math.round(Math.pow(10,-w));return Math.ceil(p*h)/h}else if(w>0){var h=Math.round(Math.pow(10,w));return Math.ceil(p/h)*h}return Math.ceil(p)}function u(p){return typeof p=="boolean"?p:!0}function M(p){p=p||{},p.camera=p.camera||{};var w=p.canvas;if(!w)if(w=document.createElement("canvas"),p.container){var h=p.container;h.appendChild(w)}else document.body.appendChild(w);var L=p.gl;if(L||(p.glOptions&&(f=!!p.glOptions.preserveDrawingBuffer),L=l(w,p.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:f})),!L)throw new Error("webgl not supported");var S=p.bounds||[[-10,-10,-10],[10,10,10]],E=new y,P=v(L,L.drawingBufferWidth,L.drawingBufferHeight,{preferFloat:!f}),F=d(L),I=p.cameraObject&&p.cameraObject._ortho===!0||p.camera.projection&&p.camera.projection.type==="orthographic"||!1,D={eye:p.camera.eye||[2,0,0],center:p.camera.center||[0,0,0],up:p.camera.up||[0,1,0],zoomMin:p.camera.zoomMax||.1,zoomMax:p.camera.zoomMin||100,mode:p.camera.mode||"turntable",_ortho:I},R=p.axes||{},N=a(L,R);N.enable=!R.disable;var z=p.spikes||{},G=n(L,z),Y=[],ee=[],Z=[],X=[],ne=!0,U=!0,ce=new Array(16),Q=new Array(16),K={view:null,projection:ce,model:Q,_ortho:!1},U=!0,H=[L.drawingBufferWidth,L.drawingBufferHeight],q=p.cameraObject||e(w,D),re={gl:L,contextLost:!1,pixelRatio:p.pixelRatio||1,canvas:w,selection:E,camera:q,axes:N,axesPixels:null,spikes:G,bounds:S,objects:Y,shape:H,aspect:p.aspectRatio||[1,1,1],pickRadius:p.pickRadius||10,zNear:p.zNear||.01,zFar:p.zFar||1e3,fovy:p.fovy||Math.PI/4,clearColor:p.clearColor||[0,0,0,0],autoResize:u(p.autoResize),autoBounds:u(p.autoBounds),autoScale:!!p.autoScale,autoCenter:u(p.autoCenter),clipToBounds:u(p.clipToBounds),snapToData:!!p.snapToData,onselect:p.onselect||null,onrender:p.onrender||null,onclick:p.onclick||null,cameraParams:K,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(xe){this.aspect[0]=xe.x,this.aspect[1]=xe.y,this.aspect[2]=xe.z,U=!0},setBounds:function(xe,me){this.bounds[0][xe]=me.min,this.bounds[1][xe]=me.max},setClearColor:function(xe){this.clearColor=xe},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},j=[L.drawingBufferWidth/re.pixelRatio|0,L.drawingBufferHeight/re.pixelRatio|0];function $(){if(!re._stopped&&!!re.autoResize){var xe=w.parentNode,me=1,be=1;xe&&xe!==document.body?(me=xe.clientWidth,be=xe.clientHeight):(me=window.innerWidth,be=window.innerHeight);var ke=Math.ceil(me*re.pixelRatio)|0,De=Math.ceil(be*re.pixelRatio)|0;if(ke!==w.width||De!==w.height){w.width=ke,w.height=De;var Ve=w.style;Ve.position=Ve.position||"absolute",Ve.left="0px",Ve.top="0px",Ve.width=me+"px",Ve.height=be+"px",ne=!0}}}re.autoResize&&$(),window.addEventListener("resize",$);function ie(){for(var xe=Y.length,me=X.length,be=0;be<me;++be)Z[be]=0;e:for(var be=0;be<xe;++be){var ke=Y[be],De=ke.pickSlots;if(!De){ee[be]=-1;continue}for(var Ve=0;Ve<me;++Ve)if(Z[Ve]+De<255){ee[be]=Ve,ke.setPickBase(Z[Ve]+1),Z[Ve]+=De;continue e}var Ae=r(L,H);ee[be]=me,X.push(Ae),Z.push(De),ke.setPickBase(1),me+=1}for(;me>0&&Z[me-1]===0;)Z.pop(),X.pop().dispose()}re.update=function(xe){re._stopped||(ne=!0,U=!0)},re.add=function(xe){re._stopped||(xe.axes=N,Y.push(xe),ee.push(-1),ne=!0,U=!0,ie())},re.remove=function(xe){if(!re._stopped){var me=Y.indexOf(xe);me<0||(Y.splice(me,1),ee.pop(),ne=!0,U=!0,ie())}},re.dispose=function(){if(!re._stopped&&(re._stopped=!0,window.removeEventListener("resize",$),w.removeEventListener("webglcontextlost",oe),re.mouseListener.enabled=!1,!re.contextLost)){N.dispose(),G.dispose();for(var xe=0;xe<Y.length;++xe)Y[xe].dispose();P.dispose();for(var xe=0;xe<X.length;++xe)X[xe].dispose();F.dispose(),L=null,N=null,G=null,Y=[]}},re._mouseRotating=!1,re._prevButtons=0,re.enableMouseListeners=function(){re.mouseListener=o(w,function(xe,me,be){if(!re._stopped){var ke=X.length,De=Y.length,Ve=E.object;E.distance=1/0,E.mouse[0]=me,E.mouse[1]=be,E.object=null,E.screen=null,E.dataCoordinate=E.dataPosition=null;var Ae=!1;if(xe&&re._prevButtons)re._mouseRotating=!0;else{re._mouseRotating&&(U=!0),re._mouseRotating=!1;for(var Le=0;Le<ke;++Le){var je=X[Le].query(me,j[1]-be-1,re.pickRadius);if(je){if(je.distance>E.distance)continue;for(var Ye=0;Ye<De;++Ye){var ze=Y[Ye];if(ee[Ye]===Le){var Ie=ze.pick(je);Ie&&(E.buttons=xe,E.screen=je.coord,E.distance=je.distance,E.object=ze,E.index=Ie.distance,E.dataPosition=Ie.position,E.dataCoordinate=Ie.dataCoordinate,E.data=Ie,Ae=!0)}}}}}Ve&&Ve!==E.object&&(Ve.highlight&&Ve.highlight(null),ne=!0),E.object&&(E.object.highlight&&E.object.highlight(E.data),ne=!0),Ae=Ae||E.object!==Ve,Ae&&re.onselect&&re.onselect(E),xe&1&&!(re._prevButtons&1)&&re.onclick&&re.onclick(E),re._prevButtons=xe}})};function oe(){if(re.contextLost)return!0;L.isContextLost()&&(re.contextLost=!0,re.mouseListener.enabled=!1,re.selection.object=null,re.oncontextloss&&re.oncontextloss())}w.addEventListener("webglcontextlost",oe);function ae(){if(!oe()){L.colorMask(!0,!0,!0,!0),L.depthMask(!0),L.disable(L.BLEND),L.enable(L.DEPTH_TEST),L.depthFunc(L.LEQUAL);for(var xe=Y.length,me=X.length,be=0;be<me;++be){var ke=X[be];ke.shape=j,ke.begin();for(var De=0;De<xe;++De)if(ee[De]===be){var Ve=Y[De];Ve.drawPick&&(Ve.pixelRatio=1,Ve.drawPick(K))}ke.end()}}}var se=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],_e=[se[0].slice(),se[1].slice()];function ue(){if(!oe()){$();var xe=re.camera.tick();K.view=re.camera.matrix,ne=ne||xe,U=U||xe,N.pixelRatio=re.pixelRatio,G.pixelRatio=re.pixelRatio;var me=Y.length,be=se[0],ke=se[1];be[0]=be[1]=be[2]=1/0,ke[0]=ke[1]=ke[2]=-1/0;for(var De=0;De<me;++De){var Ve=Y[De];Ve.pixelRatio=re.pixelRatio,Ve.axes=re.axes,ne=ne||!!Ve.dirty,U=U||!!Ve.dirty;var Ae=Ve.bounds;if(Ae)for(var Le=Ae[0],je=Ae[1],Ye=0;Ye<3;++Ye)be[Ye]=Math.min(be[Ye],Le[Ye]),ke[Ye]=Math.max(ke[Ye],je[Ye])}var ze=re.bounds;if(re.autoBounds)for(var Ye=0;Ye<3;++Ye){if(ke[Ye]<be[Ye])be[Ye]=-1,ke[Ye]=1;else{be[Ye]===ke[Ye]&&(be[Ye]-=1,ke[Ye]+=1);var Ie=.05*(ke[Ye]-be[Ye]);be[Ye]=be[Ye]-Ie,ke[Ye]=ke[Ye]+Ie}ze[0][Ye]=be[Ye],ze[1][Ye]=ke[Ye]}for(var We=!1,Ye=0;Ye<3;++Ye)We=We||_e[0][Ye]!==ze[0][Ye]||_e[1][Ye]!==ze[1][Ye],_e[0][Ye]=ze[0][Ye],_e[1][Ye]=ze[1][Ye];if(U=U||We,ne=ne||We,!!ne){if(We){for(var pt=[0,0,0],De=0;De<3;++De)pt[De]=x((ze[1][De]-ze[0][De])/10);N.autoTicks?N.update({bounds:ze,tickSpacing:pt}):N.update({bounds:ze})}var Ft=L.drawingBufferWidth,Qt=L.drawingBufferHeight;H[0]=Ft,H[1]=Qt,j[0]=Math.max(Ft/re.pixelRatio,1)|0,j[1]=Math.max(Qt/re.pixelRatio,1)|0,_(re,I);for(var De=0;De<me;++De){var Ve=Y[De];Ve.axesBounds=ze,re.clipToBounds&&(Ve.clipBounds=ze)}E.object&&(re.snapToData?G.position=E.dataCoordinate:G.position=E.dataPosition,G.bounds=ze),U&&(U=!1,ae()),re.axesPixels=i(re.axes,K,Ft,Qt),re.onrender&&re.onrender(),L.bindFramebuffer(L.FRAMEBUFFER,null),L.viewport(0,0,Ft,Qt),re.clearRGBA(),L.depthMask(!0),L.colorMask(!0,!0,!0,!0),L.enable(L.DEPTH_TEST),L.depthFunc(L.LEQUAL),L.disable(L.BLEND),L.disable(L.CULL_FACE);var zt=!1;N.enable&&(zt=zt||N.isTransparent(),N.draw(K)),G.axes=N,E.object&&G.draw(K),L.disable(L.CULL_FACE);for(var De=0;De<me;++De){var Ve=Y[De];Ve.axes=N,Ve.pixelRatio=re.pixelRatio,Ve.isOpaque&&Ve.isOpaque()&&Ve.draw(K),Ve.isTransparent&&Ve.isTransparent()&&(zt=!0)}if(zt){P.shape=H,P.bind(),L.clear(L.DEPTH_BUFFER_BIT),L.colorMask(!1,!1,!1,!1),L.depthMask(!0),L.depthFunc(L.LESS),N.enable&&N.isTransparent()&&N.drawTransparent(K);for(var De=0;De<me;++De){var Ve=Y[De];Ve.isOpaque&&Ve.isOpaque()&&Ve.draw(K)}L.enable(L.BLEND),L.blendEquation(L.FUNC_ADD),L.blendFunc(L.ONE,L.ONE_MINUS_SRC_ALPHA),L.colorMask(!0,!0,!0,!0),L.depthMask(!1),L.clearColor(0,0,0,0),L.clear(L.COLOR_BUFFER_BIT),N.isTransparent()&&N.drawTransparent(K);for(var De=0;De<me;++De){var Ve=Y[De];Ve.isTransparent&&Ve.isTransparent()&&Ve.drawTransparent(K)}L.bindFramebuffer(L.FRAMEBUFFER,null),L.blendFunc(L.ONE,L.ONE_MINUS_SRC_ALPHA),L.disable(L.DEPTH_TEST),F.bind(),P.color[0].bind(0),F.uniforms.accumBuffer=0,s(L),L.disable(L.BLEND)}ne=!1;for(var De=0;De<me;++De)Y[De].dirty=!1}}}function ye(){re._stopped||re.contextLost||(ue(),requestAnimationFrame(ye))}return re.enableMouseListeners(),ye(),re.redraw=function(){re._stopped||(ne=!0,ue())},re}function _(p,w){var h=p.bounds,L=p.cameraParams,S=L.projection,E=L.model,P=p.gl.drawingBufferWidth,F=p.gl.drawingBufferHeight,I=p.zNear,D=p.zFar,R=p.fovy,N=P/F;w?(g(S,-N,N,-1,1,I,D),L._ortho=!0):(b(S,R,N,I,D),L._ortho=!1);for(var z=0;z<16;++z)E[z]=0;E[15]=1;for(var G=0,z=0;z<3;++z)G=Math.max(G,h[1][z]-h[0][z]);for(var z=0;z<3;++z)p.autoScale?E[5*z]=p.aspect[z]/(h[1][z]-h[0][z]):E[5*z]=1/G,p.autoCenter&&(E[12+z]=-E[5*z]*.5*(h[0][z]+h[1][z]))}},{"./camera.js":119,"./lib/shader":120,"a-big-triangle":8,"gl-axes3d":70,"gl-axes3d/properties":77,"gl-fbo":86,"gl-mat4/ortho":101,"gl-mat4/perspective":102,"gl-select-static":131,"gl-spikes3d":141,"is-mobile":238,"mouse-change":247}],122:[function(c,A,T){var e=c("glslify");T.pointVertex=e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;

uniform mat3 matrix;
uniform float pointSize;
uniform float pointCloud;

highp float rand(vec2 co) {
  highp float a = 12.9898;
  highp float b = 78.233;
  highp float c = 43758.5453;
  highp float d = dot(co.xy, vec2(a, b));
  highp float e = mod(d, 3.14);
  return fract(sin(e) * c);
}

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
    // if we don't jitter the point size a bit, overall point cloud
    // saturation 'jumps' on zooming, which is disturbing and confusing
  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);
  if(pointCloud != 0.0) { // pointCloud is truthy
    // get the same square surface as circle would be
    gl_PointSize *= 0.886;
  }
}`]),T.pointFragment=e([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color, borderColor;
uniform float centerFraction;
uniform float pointCloud;

void main() {
  float radius;
  vec4 baseColor;
  if(pointCloud != 0.0) { // pointCloud is truthy
    if(centerFraction == 1.0) {
      gl_FragColor = color;
    } else {
      gl_FragColor = mix(borderColor, color, centerFraction);
    }
  } else {
    radius = length(2.0 * gl_PointCoord.xy - 1.0);
    if(radius > 1.0) {
      discard;
    }
    baseColor = mix(borderColor, color, step(radius, centerFraction));
    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);
  }
}
`]),T.pickVertex=e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;

uniform mat3 matrix;
uniform float pointSize;
uniform vec4 pickOffset;

varying vec4 fragId;

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
  gl_PointSize = pointSize;

  vec4 id = pickId + pickOffset;
  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  fragId = id;
}
`]),T.pickFragment=e([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;

void main() {
  float radius = length(2.0 * gl_PointCoord.xy - 1.0);
  if(radius > 1.0) {
    discard;
  }
  gl_FragColor = fragId / 255.0;
}
`])},{glslify:231}],123:[function(c,A,T){var e=c("gl-shader"),a=c("gl-buffer"),i=c("typedarray-pool"),n=c("./lib/shader");A.exports=o;function r(b,g,d,f,y){this.plot=b,this.offsetBuffer=g,this.pickBuffer=d,this.shader=f,this.pickShader=y,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}var v=r.prototype;v.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},v.update=function(b){var g;b=b||{};function d(_,p){return _ in b?b[_]:p}this.sizeMin=d("sizeMin",.5),this.sizeMax=d("sizeMax",20),this.color=d("color",[1,0,0,1]).slice(),this.areaRatio=d("areaRatio",1),this.borderColor=d("borderColor",[0,0,0,1]).slice(),this.blend=d("blend",!1);var f=b.positions.length>>>1,y=b.positions instanceof Float32Array,l=b.idToIndex instanceof Int32Array&&b.idToIndex.length>=f,x=b.positions,u=y?x:i.mallocFloat32(x.length),M=l?b.idToIndex:i.mallocInt32(f);if(y||u.set(x),!l)for(u.set(x),g=0;g<f;g++)M[g]=g;this.points=x,this.offsetBuffer.update(u),this.pickBuffer.update(M),y||i.free(u),l||i.free(M),this.pointCount=f,this.pickOffset=0};function s(b,g){var d=0,f=b.length>>>1,y;for(y=0;y<f;y++){var l=b[y*2],x=b[y*2+1];l>=g[0]&&l<=g[2]&&x>=g[1]&&x<=g[3]&&d++}return d}v.unifiedDraw=function(){var b=[1,0,0,0,1,0,0,0,1],g=[0,0,0,0];return function(d){var f=d!==void 0,y=f?this.pickShader:this.shader,l=this.plot.gl,x=this.plot.dataBox;if(this.pointCount===0)return d;var u=x[2]-x[0],M=x[3]-x[1],_=s(this.points,x),p=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(_,.33333)));b[0]=2/u,b[4]=2/M,b[6]=-2*x[0]/u-1,b[7]=-2*x[1]/M-1,this.offsetBuffer.bind(),y.bind(),y.attributes.position.pointer(),y.uniforms.matrix=b,y.uniforms.color=this.color,y.uniforms.borderColor=this.borderColor,y.uniforms.pointCloud=p<5,y.uniforms.pointSize=p,y.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),f&&(g[0]=d&255,g[1]=d>>8&255,g[2]=d>>16&255,g[3]=d>>24&255,this.pickBuffer.bind(),y.attributes.pickId.pointer(l.UNSIGNED_BYTE),y.uniforms.pickOffset=g,this.pickOffset=d);var w=l.getParameter(l.BLEND),h=l.getParameter(l.DITHER);return w&&!this.blend&&l.disable(l.BLEND),h&&l.disable(l.DITHER),l.drawArrays(l.POINTS,0,this.pointCount),w&&!this.blend&&l.enable(l.BLEND),h&&l.enable(l.DITHER),d+this.pointCount}}(),v.draw=v.unifiedDraw,v.drawPick=v.unifiedDraw,v.pick=function(b,g,d){var f=this.pickOffset,y=this.pointCount;if(d<f||d>=f+y)return null;var l=d-f,x=this.points;return{object:this,pointId:l,dataCoord:[x[2*l],x[2*l+1]]}};function o(b,g){var d=b.gl,f=a(d),y=a(d),l=e(d,n.pointVertex,n.pointFragment),x=e(d,n.pickVertex,n.pickFragment),u=new r(b,f,y,l,x);return u.update(g),b.addObject(u),u}},{"./lib/shader":122,"gl-buffer":78,"gl-shader":132,"typedarray-pool":308}],124:[function(c,A,T){A.exports=e;function e(a,i,n,r){var v=i[0],s=i[1],o=i[2],b=i[3],g=n[0],d=n[1],f=n[2],y=n[3],l,x,u,M,_;return x=v*g+s*d+o*f+b*y,x<0&&(x=-x,g=-g,d=-d,f=-f,y=-y),1-x>1e-6?(l=Math.acos(x),u=Math.sin(l),M=Math.sin((1-r)*l)/u,_=Math.sin(r*l)/u):(M=1-r,_=r),a[0]=M*v+_*g,a[1]=M*s+_*d,a[2]=M*o+_*f,a[3]=M*b+_*y,a}},{}],125:[function(c,A,T){A.exports=function(e){return!e&&e!==0?"":e.toString()}},{}],126:[function(c,A,T){var e=c("vectorize-text");A.exports=i;var a={};function i(n,r,v){var s=a[r];if(s||(s=a[r]={}),n in s)return s[n];var o={textAlign:"center",textBaseline:"middle",lineHeight:1,font:r,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}};o.triangles=!0;var b=e(n,o);o.triangles=!1;var g=e(n,o),d,f;if(v&&v!==1){for(d=0;d<b.positions.length;++d)for(f=0;f<b.positions[d].length;++f)b.positions[d][f]/=v;for(d=0;d<g.positions.length;++d)for(f=0;f<g.positions[d].length;++f)g.positions[d][f]/=v}var y=[[1/0,1/0],[-1/0,-1/0]],l=g.positions.length;for(d=0;d<l;++d){var x=g.positions[d];for(f=0;f<2;++f)y[0][f]=Math.min(y[0][f],x[f]),y[1][f]=Math.max(y[1][f],x[f])}return s[n]=[b,g,y]}},{"vectorize-text":311}],127:[function(c,A,T){var e=c("gl-shader"),a=c("glslify"),i=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform vec4 highlightId;
uniform float highlightScale;
uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = 1.0;
    if(distance(highlightId, id) < 0.0001) {
      scale = highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1);
    vec4 viewPosition = view * worldPosition;
    viewPosition = viewPosition / viewPosition.w;
    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),n=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float highlightScale, pixelRatio;
uniform vec4 highlightId;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = pixelRatio;
    if(distance(highlightId.bgr, id.bgr) < 0.001) {
      scale *= highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1.0);
    vec4 viewPosition = view * worldPosition;
    vec4 clipPosition = projection * viewPosition;
    clipPosition /= clipPosition.w;

    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),r=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform float highlightScale;
uniform vec4 highlightId;
uniform vec3 axes[2];
uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float scale, pixelRatio;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float lscale = pixelRatio * scale;
    if(distance(highlightId, id) < 0.0001) {
      lscale *= highlightScale;
    }

    vec4 clipCenter   = projection * view * model * vec4(position, 1);
    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;
    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = dataPosition;
  }
}
`]),v=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float opacity;

varying vec4 interpColor;
varying vec3 dataCoordinate;

void main() {
  if (
    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||
    interpColor.a * opacity == 0.
  ) discard;
  gl_FragColor = interpColor * opacity;
}
`]),s=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float pickGroup;

varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;

  gl_FragColor = vec4(pickGroup, pickId.bgr);
}`]),o=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],b={vertex:i,fragment:v,attributes:o},g={vertex:n,fragment:v,attributes:o},d={vertex:r,fragment:v,attributes:o},f={vertex:i,fragment:s,attributes:o},y={vertex:n,fragment:s,attributes:o},l={vertex:r,fragment:s,attributes:o};function x(u,M){var _=e(u,M),p=_.attributes;return p.position.location=0,p.color.location=1,p.glyph.location=2,p.id.location=3,_}T.createPerspective=function(u){return x(u,b)},T.createOrtho=function(u){return x(u,g)},T.createProject=function(u){return x(u,d)},T.createPickPerspective=function(u){return x(u,f)},T.createPickOrtho=function(u){return x(u,y)},T.createPickProject=function(u){return x(u,l)}},{"gl-shader":132,glslify:231}],128:[function(c,A,T){var e=c("is-string-blank"),a=c("gl-buffer"),i=c("gl-vao"),n=c("typedarray-pool"),r=c("gl-mat4/multiply"),v=c("./lib/shaders"),s=c("./lib/glyphs"),o=c("./lib/get-simple-string"),b=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];A.exports=ee;function g(Z,X){var ne=Z[0],ce=Z[1],Q=Z[2],K=Z[3];return Z[0]=X[0]*ne+X[4]*ce+X[8]*Q+X[12]*K,Z[1]=X[1]*ne+X[5]*ce+X[9]*Q+X[13]*K,Z[2]=X[2]*ne+X[6]*ce+X[10]*Q+X[14]*K,Z[3]=X[3]*ne+X[7]*ce+X[11]*Q+X[15]*K,Z}function d(Z,X,ne,ce){return g(ce,ce),g(ce,ce),g(ce,ce)}function f(Z,X){this.index=Z,this.dataCoordinate=this.position=X}function y(Z){return Z===!0||Z>1?1:Z}function l(Z,X,ne,ce,Q,K,U,H,q,re,j,$){this.gl=Z,this.pixelRatio=1,this.shader=X,this.orthoShader=ne,this.projectShader=ce,this.pointBuffer=Q,this.colorBuffer=K,this.glyphBuffer=U,this.idBuffer=H,this.vao=q,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[2/3,2/3,2/3],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=re,this.pickOrthoShader=j,this.pickProjectShader=$,this.points=[],this._selectResult=new f(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}var x=l.prototype;x.pickSlots=1,x.setPickBase=function(Z){this.pickId=Z},x.isTransparent=function(){if(this.hasAlpha)return!0;for(var Z=0;Z<3;++Z)if(this.axesProject[Z]&&this.projectHasAlpha)return!0;return!1},x.isOpaque=function(){if(!this.hasAlpha)return!0;for(var Z=0;Z<3;++Z)if(this.axesProject[Z]&&!this.projectHasAlpha)return!0;return!1};var u=[0,0],M=[0,0,0],_=[0,0,0],p=[0,0,0,1],w=[0,0,0,1],h=b.slice(),L=[0,0,0],S=[[0,0,0],[0,0,0]];function E(Z){return Z[0]=Z[1]=Z[2]=0,Z}function P(Z,X){return Z[0]=X[0],Z[1]=X[1],Z[2]=X[2],Z[3]=1,Z}function F(Z,X,ne,ce){return Z[0]=X[0],Z[1]=X[1],Z[2]=X[2],Z[ne]=ce,Z}function I(Z){for(var X=S,ne=0;ne<2;++ne)for(var ce=0;ce<3;++ce)X[ne][ce]=Math.max(Math.min(Z[ne][ce],1e8),-1e8);return X}function D(Z,X,ne,ce){var Q=X.axesProject,K=X.gl,U=Z.uniforms,H=ne.model||b,q=ne.view||b,re=ne.projection||b,j=X.axesBounds,$=I(X.clipBounds),ie;X.axes&&X.axes.lastCubeProps?ie=X.axes.lastCubeProps.axis:ie=[1,1,1],u[0]=2/K.drawingBufferWidth,u[1]=2/K.drawingBufferHeight,Z.bind(),U.view=q,U.projection=re,U.screenSize=u,U.highlightId=X.highlightId,U.highlightScale=X.highlightScale,U.clipBounds=$,U.pickGroup=X.pickId/255,U.pixelRatio=ce;for(var oe=0;oe<3;++oe)if(!!Q[oe]){U.scale=X.projectScale[oe],U.opacity=X.projectOpacity[oe];for(var ae=h,se=0;se<16;++se)ae[se]=0;for(var se=0;se<4;++se)ae[5*se]=1;ae[5*oe]=0,ie[oe]<0?ae[12+oe]=j[0][oe]:ae[12+oe]=j[1][oe],r(ae,H,ae),U.model=ae;var _e=(oe+1)%3,ue=(oe+2)%3,ye=E(M),xe=E(_);ye[_e]=1,xe[ue]=1;var me=d(re,q,H,P(p,ye)),be=d(re,q,H,P(w,xe));if(Math.abs(me[1])>Math.abs(be[1])){var ke=me;me=be,be=ke,ke=ye,ye=xe,xe=ke;var De=_e;_e=ue,ue=De}me[0]<0&&(ye[_e]=-1),be[1]>0&&(xe[ue]=-1);for(var Ve=0,Ae=0,se=0;se<4;++se)Ve+=Math.pow(H[4*_e+se],2),Ae+=Math.pow(H[4*ue+se],2);ye[_e]/=Math.sqrt(Ve),xe[ue]/=Math.sqrt(Ae),U.axes[0]=ye,U.axes[1]=xe,U.fragClipBounds[0]=F(L,$[0],oe,-1e8),U.fragClipBounds[1]=F(L,$[1],oe,1e8),X.vao.bind(),X.vao.draw(K.TRIANGLES,X.vertexCount),X.lineWidth>0&&(K.lineWidth(X.lineWidth*ce),X.vao.draw(K.LINES,X.lineVertexCount,X.vertexCount)),X.vao.unbind()}}var R=[-1e8,-1e8,-1e8],N=[1e8,1e8,1e8],z=[R,N];function G(Z,X,ne,ce,Q,K,U){var H=ne.gl;if((K===ne.projectHasAlpha||U)&&D(X,ne,ce,Q),K===ne.hasAlpha||U){Z.bind();var q=Z.uniforms;q.model=ce.model||b,q.view=ce.view||b,q.projection=ce.projection||b,u[0]=2/H.drawingBufferWidth,u[1]=2/H.drawingBufferHeight,q.screenSize=u,q.highlightId=ne.highlightId,q.highlightScale=ne.highlightScale,q.fragClipBounds=z,q.clipBounds=ne.axes.bounds,q.opacity=ne.opacity,q.pickGroup=ne.pickId/255,q.pixelRatio=Q,ne.vao.bind(),ne.vao.draw(H.TRIANGLES,ne.vertexCount),ne.lineWidth>0&&(H.lineWidth(ne.lineWidth*Q),ne.vao.draw(H.LINES,ne.lineVertexCount,ne.vertexCount)),ne.vao.unbind()}}x.draw=function(Z){var X=this.useOrtho?this.orthoShader:this.shader;G(X,this.projectShader,this,Z,this.pixelRatio,!1,!1)},x.drawTransparent=function(Z){var X=this.useOrtho?this.orthoShader:this.shader;G(X,this.projectShader,this,Z,this.pixelRatio,!0,!1)},x.drawPick=function(Z){var X=this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader;G(X,this.pickProjectShader,this,Z,1,!0,!0)},x.pick=function(Z){if(!Z||Z.id!==this.pickId)return null;var X=Z.value[2]+(Z.value[1]<<8)+(Z.value[0]<<16);if(X>=this.pointCount||X<0)return null;var ne=this.points[X],ce=this._selectResult;ce.index=X;for(var Q=0;Q<3;++Q)ce.position[Q]=ce.dataCoordinate[Q]=ne[Q];return ce},x.highlight=function(Z){if(!Z)this.highlightId=[1,1,1,1];else{var X=Z.index,ne=X&255,ce=X>>8&255,Q=X>>16&255;this.highlightId=[ne/255,ce/255,Q/255,0]}};function Y(Z,X,ne,ce){var Q;Array.isArray(Z)?X<Z.length?Q=Z[X]:Q=void 0:Q=Z,Q=o(Q);var K=!0;e(Q)&&(Q="\u25BC",K=!1);var U=s(Q,ne,ce);return{mesh:U[0],lines:U[1],bounds:U[2],visible:K}}x.update=function(Z){if(Z=Z||{},"perspective"in Z&&(this.useOrtho=!Z.perspective),"orthographic"in Z&&(this.useOrtho=!!Z.orthographic),"lineWidth"in Z&&(this.lineWidth=Z.lineWidth),"project"in Z)if(Array.isArray(Z.project))this.axesProject=Z.project;else{var X=!!Z.project;this.axesProject=[X,X,X]}if("projectScale"in Z)if(Array.isArray(Z.projectScale))this.projectScale=Z.projectScale.slice();else{var ne=+Z.projectScale;this.projectScale=[ne,ne,ne]}if(this.projectHasAlpha=!1,"projectOpacity"in Z){if(Array.isArray(Z.projectOpacity))this.projectOpacity=Z.projectOpacity.slice();else{var ne=+Z.projectOpacity;this.projectOpacity=[ne,ne,ne]}for(var ce=0;ce<3;++ce)this.projectOpacity[ce]=y(this.projectOpacity[ce]),this.projectOpacity[ce]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in Z&&(this.opacity=y(Z.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var Q=Z.position,K=Z.font||"normal",U=Z.alignment||[0,0],H,q;if(U.length===2)H=U[0],q=U[1];else{H=[],q=[];for(var ce=0;ce<U.length;++ce)H[ce]=U[ce][0],q[ce]=U[ce][1]}var re=[1/0,1/0,1/0],j=[-1/0,-1/0,-1/0],$=Z.glyph,ie=Z.color,oe=Z.size,ae=Z.angle,se=Z.lineColor,_e=-1,ue=0,ye=0,xe=0;if(Q.length){xe=Q.length;e:for(var ce=0;ce<xe;++ce){for(var me=Q[ce],be=0;be<3;++be)if(isNaN(me[be])||!isFinite(me[be]))continue e;var ke=Y($,ce,K,this.pixelRatio),De=ke.mesh,Ve=ke.lines,Ae=ke.bounds;ue+=De.cells.length*3,ye+=Ve.edges.length*2}}var Le=ue+ye,je=n.mallocFloat(3*Le),Ye=n.mallocFloat(4*Le),ze=n.mallocFloat(2*Le),Ie=n.mallocUint32(Le);if(Le>0){var We=0,pt=ue,Ft=[0,0,0,1],Qt=[0,0,0,1],zt=Array.isArray(ie)&&Array.isArray(ie[0]),Et=Array.isArray(se)&&Array.isArray(se[0]);e:for(var ce=0;ce<xe;++ce){_e+=1;for(var me=Q[ce],be=0;be<3;++be){if(isNaN(me[be])||!isFinite(me[be]))continue e;j[be]=Math.max(j[be],me[be]),re[be]=Math.min(re[be],me[be])}var ke=Y($,ce,K,this.pixelRatio),De=ke.mesh,Ve=ke.lines,Ae=ke.bounds,Xt=ke.visible;if(!Xt)Ft=[1,1,1,0];else if(Array.isArray(ie)){var Nt;if(zt?ce<ie.length?Nt=ie[ce]:Nt=[0,0,0,0]:Nt=ie,Nt.length===3){for(var be=0;be<3;++be)Ft[be]=Nt[be];Ft[3]=1}else if(Nt.length===4){for(var be=0;be<4;++be)Ft[be]=Nt[be];!this.hasAlpha&&Nt[3]<1&&(this.hasAlpha=!0)}}else Ft[0]=Ft[1]=Ft[2]=0,Ft[3]=1;if(!Xt)Qt=[1,1,1,0];else if(Array.isArray(se)){var Nt;if(Et?ce<se.length?Nt=se[ce]:Nt=[0,0,0,0]:Nt=se,Nt.length===3){for(var be=0;be<3;++be)Qt[be]=Nt[be];Qt[be]=1}else if(Nt.length===4){for(var be=0;be<4;++be)Qt[be]=Nt[be];!this.hasAlpha&&Nt[3]<1&&(this.hasAlpha=!0)}}else Qt[0]=Qt[1]=Qt[2]=0,Qt[3]=1;var Ct=.5;Xt?Array.isArray(oe)?ce<oe.length?Ct=+oe[ce]:Ct=12:oe?Ct=+oe:this.useOrtho&&(Ct=12):Ct=0;var Xe=0;Array.isArray(ae)?ce<ae.length?Xe=+ae[ce]:Xe=0:ae&&(Xe=+ae);for(var at=Math.cos(Xe),Ge=Math.sin(Xe),me=Q[ce],be=0;be<3;++be)j[be]=Math.max(j[be],me[be]),re[be]=Math.min(re[be],me[be]);var Se=H,He=q,Se=0;Array.isArray(H)?ce<H.length?Se=H[ce]:Se=0:H&&(Se=H);var He=0;Array.isArray(q)?ce<q.length?He=q[ce]:He=0:q&&(He=q),Se*=Se>0?1-Ae[0][0]:Se<0?1+Ae[1][0]:1,He*=He>0?1-Ae[0][1]:He<0?1+Ae[1][1]:1;for(var Ke=[Se,He],Ht=De.cells||[],It=De.positions||[],be=0;be<Ht.length;++be)for(var qe=Ht[be],Tt=0;Tt<3;++Tt){for(var mt=0;mt<3;++mt)je[3*We+mt]=me[mt];for(var mt=0;mt<4;++mt)Ye[4*We+mt]=Ft[mt];Ie[We]=_e;var At=It[qe[Tt]];ze[2*We]=Ct*(at*At[0]-Ge*At[1]+Ke[0]),ze[2*We+1]=Ct*(Ge*At[0]+at*At[1]+Ke[1]),We+=1}for(var Ht=Ve.edges,It=Ve.positions,be=0;be<Ht.length;++be)for(var qe=Ht[be],Tt=0;Tt<2;++Tt){for(var mt=0;mt<3;++mt)je[3*pt+mt]=me[mt];for(var mt=0;mt<4;++mt)Ye[4*pt+mt]=Qt[mt];Ie[pt]=_e;var At=It[qe[Tt]];ze[2*pt]=Ct*(at*At[0]-Ge*At[1]+Ke[0]),ze[2*pt+1]=Ct*(Ge*At[0]+at*At[1]+Ke[1]),pt+=1}}}this.bounds=[re,j],this.points=Q,this.pointCount=Q.length,this.vertexCount=ue,this.lineVertexCount=ye,this.pointBuffer.update(je),this.colorBuffer.update(Ye),this.glyphBuffer.update(ze),this.idBuffer.update(Ie),n.free(je),n.free(Ye),n.free(ze),n.free(Ie)},x.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()};function ee(Z){var X=Z.gl,ne=v.createPerspective(X),ce=v.createOrtho(X),Q=v.createProject(X),K=v.createPickPerspective(X),U=v.createPickOrtho(X),H=v.createPickProject(X),q=a(X),re=a(X),j=a(X),$=a(X),ie=i(X,[{buffer:q,size:3,type:X.FLOAT},{buffer:re,size:4,type:X.FLOAT},{buffer:j,size:2,type:X.FLOAT},{buffer:$,size:4,type:X.UNSIGNED_BYTE,normalized:!0}]),oe=new l(X,ne,ce,Q,q,re,j,$,ie,K,U,H);return oe.update(Z),oe}},{"./lib/get-simple-string":125,"./lib/glyphs":126,"./lib/shaders":127,"gl-buffer":78,"gl-mat4/multiply":100,"gl-vao":150,"is-string-blank":239,"typedarray-pool":308}],129:[function(c,A,T){var e=c("glslify");T.boxVertex=e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 vertex;

uniform vec2 cornerA, cornerB;

void main() {
  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);
}
`]),T.boxFragment=e([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color;

void main() {
  gl_FragColor = color;
}
`])},{glslify:231}],130:[function(c,A,T){var e=c("gl-shader"),a=c("gl-buffer"),i=c("./lib/shaders");A.exports=v;function n(s,o,b){this.plot=s,this.boxBuffer=o,this.boxShader=b,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}var r=n.prototype;r.draw=function(){if(!!this.enabled){var s=this.plot,o=this.selectBox,b=this.borderWidth;this.innerFill;var g=this.innerColor;this.outerFill;var d=this.outerColor,f=this.borderColor,y=s.box,l=s.screenBox,x=s.dataBox,u=s.viewBox,M=s.pixelRatio,_=(o[0]-x[0])*(u[2]-u[0])/(x[2]-x[0])+u[0],p=(o[1]-x[1])*(u[3]-u[1])/(x[3]-x[1])+u[1],w=(o[2]-x[0])*(u[2]-u[0])/(x[2]-x[0])+u[0],h=(o[3]-x[1])*(u[3]-u[1])/(x[3]-x[1])+u[1];if(_=Math.max(_,u[0]),p=Math.max(p,u[1]),w=Math.min(w,u[2]),h=Math.min(h,u[3]),!(w<_||h<p)){y.bind();var L=l[2]-l[0],S=l[3]-l[1];if(this.outerFill&&(y.drawBox(0,0,L,p,d),y.drawBox(0,p,_,h,d),y.drawBox(0,h,L,S,d),y.drawBox(w,p,L,h,d)),this.innerFill&&y.drawBox(_,p,w,h,g),b>0){var E=b*M;y.drawBox(_-E,p-E,w+E,p+E,f),y.drawBox(_-E,h-E,w+E,h+E,f),y.drawBox(_-E,p-E,_+E,h+E,f),y.drawBox(w-E,p-E,w+E,h+E,f)}}}},r.update=function(s){s=s||{},this.innerFill=!!s.innerFill,this.outerFill=!!s.outerFill,this.innerColor=(s.innerColor||[0,0,0,.5]).slice(),this.outerColor=(s.outerColor||[0,0,0,.5]).slice(),this.borderColor=(s.borderColor||[0,0,0,1]).slice(),this.borderWidth=s.borderWidth||0,this.selectBox=(s.selectBox||this.selectBox).slice()},r.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)};function v(s,o){var b=s.gl,g=a(b,[0,0,0,1,1,0,1,1]),d=e(b,i.boxVertex,i.boxFragment),f=new n(s,g,d);return f.update(o),s.addOverlay(f),f}},{"./lib/shaders":129,"gl-buffer":78,"gl-shader":132}],131:[function(c,A,T){A.exports=b;var e=c("gl-fbo"),a=c("typedarray-pool"),i=c("ndarray"),n=c("bit-twiddle").nextPow2,r=function(g,d,f){for(var y=1e8,l=-1,x=-1,u=g.shape[0],M=g.shape[1],_=0;_<u;_++)for(var p=0;p<M;p++){var w=g.get(_,p,0),h=g.get(_,p,1),L=g.get(_,p,2),S=g.get(_,p,3);if(w<255||h<255||L<255||S<255){var E=d-_,P=f-p,F=E*E+P*P;F<y&&(y=F,l=_,x=p)}}return[l,x,y]};function v(g,d,f,y,l){this.coord=[g,d],this.id=f,this.value=y,this.distance=l}function s(g,d,f){this.gl=g,this.fbo=d,this.buffer=f,this._readTimeout=null;var y=this;this._readCallback=function(){!y.gl||(d.bind(),g.readPixels(0,0,d.shape[0],d.shape[1],g.RGBA,g.UNSIGNED_BYTE,y.buffer),y._readTimeout=null)}}var o=s.prototype;Object.defineProperty(o,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(g){if(!!this.gl){this.fbo.shape=g;var d=this.fbo.shape[0],f=this.fbo.shape[1];if(f*d*4>this.buffer.length){a.free(this.buffer);for(var y=this.buffer=a.mallocUint8(n(f*d*4)),l=0;l<f*d*4;++l)y[l]=255}return g}}}),o.begin=function(){var g=this.gl;this.shape,g&&(this.fbo.bind(),g.clearColor(1,1,1,1),g.clear(g.COLOR_BUFFER_BIT|g.DEPTH_BUFFER_BIT))},o.end=function(){var g=this.gl;!g||(g.bindFramebuffer(g.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},o.query=function(g,d,f){if(!this.gl)return null;var y=this.fbo.shape.slice();g=g|0,d=d|0,typeof f!="number"&&(f=1);var l=Math.min(Math.max(g-f,0),y[0])|0,x=Math.min(Math.max(g+f,0),y[0])|0,u=Math.min(Math.max(d-f,0),y[1])|0,M=Math.min(Math.max(d+f,0),y[1])|0;if(x<=l||M<=u)return null;var _=[x-l,M-u],p=i(this.buffer,[_[0],_[1],4],[4,y[0]*4,1],4*(l+y[0]*u)),w=r(p.hi(_[0],_[1],1),f,f),h=w[0],L=w[1];if(h<0||Math.pow(this.radius,2)<w[2])return null;var S=p.get(h,L,0),E=p.get(h,L,1),P=p.get(h,L,2),F=p.get(h,L,3);return new v(h+l|0,L+u|0,S,[E,P,F],Math.sqrt(w[2]))},o.dispose=function(){!this.gl||(this.fbo.dispose(),a.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))};function b(g,d){var f=d[0],y=d[1],l={},x=e(g,f,y,l),u=a.mallocUint8(f*y*4);return new s(g,x,u)}},{"bit-twiddle":32,"gl-fbo":86,ndarray:259,"typedarray-pool":308}],132:[function(c,A,T){var e=c("./lib/create-uniforms"),a=c("./lib/create-attributes"),i=c("./lib/reflect"),n=c("./lib/shader-cache"),r=c("./lib/runtime-reflect"),v=c("./lib/GLError");function s(d){this.gl=d,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var o=s.prototype;o.bind=function(){this.program||this._relink();var d,f=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),y=this.gl.lastAttribCount;if(f>y)for(d=y;d<f;d++)this.gl.enableVertexAttribArray(d);else if(y>f)for(d=f;d<y;d++)this.gl.disableVertexAttribArray(d);this.gl.lastAttribCount=f,this.gl.useProgram(this.program)},o.dispose=function(){for(var d=this.gl.lastAttribCount,f=0;f<d;f++)this.gl.disableVertexAttribArray(f);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null};function b(d,f){return d.name<f.name?-1:1}o.update=function(d,f,y,l){if(!f||arguments.length===1){var x=d;d=x.vertex,f=x.fragment,y=x.uniforms,l=x.attributes}var u=this,M=u.gl,_=u._vref;u._vref=n.shader(M,M.VERTEX_SHADER,d),_&&_.dispose(),u.vertShader=u._vref.shader;var p=this._fref;if(u._fref=n.shader(M,M.FRAGMENT_SHADER,f),p&&p.dispose(),u.fragShader=u._fref.shader,!y||!l){var w=M.createProgram();if(M.attachShader(w,u.fragShader),M.attachShader(w,u.vertShader),M.linkProgram(w),!M.getProgramParameter(w,M.LINK_STATUS)){var h=M.getProgramInfoLog(w);throw new v(h,"Error linking program:"+h)}y=y||r.uniforms(M,w),l=l||r.attributes(M,w),M.deleteProgram(w)}l=l.slice(),l.sort(b);var L=[],S=[],E=[],P;for(P=0;P<l.length;++P){var F=l[P];if(F.type.indexOf("mat")>=0){for(var I=F.type.charAt(F.type.length-1)|0,D=new Array(I),R=0;R<I;++R)D[R]=E.length,S.push(F.name+"["+R+"]"),typeof F.location=="number"?E.push(F.location+R):Array.isArray(F.location)&&F.location.length===I&&typeof F.location[R]=="number"?E.push(F.location[R]|0):E.push(-1);L.push({name:F.name,type:F.type,locations:D})}else L.push({name:F.name,type:F.type,locations:[E.length]}),S.push(F.name),typeof F.location=="number"?E.push(F.location|0):E.push(-1)}var N=0;for(P=0;P<E.length;++P)if(E[P]<0){for(;E.indexOf(N)>=0;)N+=1;E[P]=N}var z=new Array(y.length);function G(){u.program=n.program(M,u._vref,u._fref,S,E);for(var Y=0;Y<y.length;++Y)z[Y]=M.getUniformLocation(u.program,y[Y].name)}G(),u._relink=G,u.types={uniforms:i(y),attributes:i(l)},u.attributes=a(M,u,L,E),Object.defineProperty(u,"uniforms",e(M,u,y,z))};function g(d,f,y,l,x){var u=new s(d);return u.update(f,y,l,x),u}A.exports=g},{"./lib/GLError":133,"./lib/create-attributes":134,"./lib/create-uniforms":135,"./lib/reflect":136,"./lib/runtime-reflect":137,"./lib/shader-cache":138}],133:[function(c,A,T){function e(a,i,n){this.shortMessage=i||"",this.longMessage=n||"",this.rawError=a||"",this.message="gl-shader: "+(i||a||"")+(n?`
`+n:""),this.stack=new Error().stack}e.prototype=new Error,e.prototype.name="GLError",e.prototype.constructor=e,A.exports=e},{}],134:[function(c,A,T){A.exports=s;var e=c("./GLError");function a(o,b,g,d,f,y){this._gl=o,this._wrapper=b,this._index=g,this._locations=d,this._dimension=f,this._constFunc=y}var i=a.prototype;i.pointer=function(b,g,d,f){var y=this,l=y._gl,x=y._locations[y._index];l.vertexAttribPointer(x,y._dimension,b||l.FLOAT,!!g,d||0,f||0),l.enableVertexAttribArray(x)},i.set=function(o,b,g,d){return this._constFunc(this._locations[this._index],o,b,g,d)},Object.defineProperty(i,"location",{get:function(){return this._locations[this._index]},set:function(o){return o!==this._locations[this._index]&&(this._locations[this._index]=o|0,this._wrapper.program=null),o|0}});var n=[function(o,b,g){return g.length===void 0?o.vertexAttrib1f(b,g):o.vertexAttrib1fv(b,g)},function(o,b,g,d){return g.length===void 0?o.vertexAttrib2f(b,g,d):o.vertexAttrib2fv(b,g)},function(o,b,g,d,f){return g.length===void 0?o.vertexAttrib3f(b,g,d,f):o.vertexAttrib3fv(b,g)},function(o,b,g,d,f,y){return g.length===void 0?o.vertexAttrib4f(b,g,d,f,y):o.vertexAttrib4fv(b,g)}];function r(o,b,g,d,f,y,l){var x=n[f],u=new a(o,b,g,d,f,x);Object.defineProperty(y,l,{set:function(M){return o.disableVertexAttribArray(d[g]),x(o,d[g],M),M},get:function(){return u},enumerable:!0})}function v(o,b,g,d,f,y,l){for(var x=new Array(f),u=new Array(f),M=0;M<f;++M)r(o,b,g[M],d,f,x,M),u[M]=x[M];Object.defineProperty(x,"location",{set:function(w){if(Array.isArray(w))for(var h=0;h<f;++h)u[h].location=w[h];else for(var h=0;h<f;++h)u[h].location=w+h;return w},get:function(){for(var w=new Array(f),h=0;h<f;++h)w[h]=d[g[h]];return w},enumerable:!0}),x.pointer=function(w,h,L,S){w=w||o.FLOAT,h=!!h,L=L||f*f,S=S||0;for(var E=0;E<f;++E){var P=d[g[E]];o.vertexAttribPointer(P,f,w,h,L,S+E*f),o.enableVertexAttribArray(P)}};var _=new Array(f),p=o["vertexAttrib"+f+"fv"];Object.defineProperty(y,l,{set:function(w){for(var h=0;h<f;++h){var L=d[g[h]];if(o.disableVertexAttribArray(L),Array.isArray(w[0]))p.call(o,L,w[h]);else{for(var S=0;S<f;++S)_[S]=w[f*h+S];p.call(o,L,_)}}return w},get:function(){return x},enumerable:!0})}function s(o,b,g,d){for(var f={},y=0,l=g.length;y<l;++y){var x=g[y],u=x.name,M=x.type,_=x.locations;switch(M){case"bool":case"int":case"float":r(o,b,_[0],d,1,f,u);break;default:if(M.indexOf("vec")>=0){var p=M.charCodeAt(M.length-1)-48;if(p<2||p>4)throw new e("","Invalid data type for attribute "+u+": "+M);r(o,b,_[0],d,p,f,u)}else if(M.indexOf("mat")>=0){var p=M.charCodeAt(M.length-1)-48;if(p<2||p>4)throw new e("","Invalid data type for attribute "+u+": "+M);v(o,b,_,d,p,f,u)}else throw new e("","Unknown data type for attribute "+u+": "+M);break}}return f}},{"./GLError":133}],135:[function(c,A,T){var e=c("./reflect"),a=c("./GLError");A.exports=r;function i(v){return function(){return v}}function n(v,s){for(var o=new Array(v),b=0;b<v;++b)o[b]=s;return o}function r(v,s,o,b){function g(M){return function(_,p,w){return _.getUniform(p.program,w[M])}}function d(M){return function(p){for(var w=f("",M),h=0;h<w.length;++h){var L=w[h],S=L[0],E=L[1];if(b[E]){var P=p;if(typeof S=="string"&&(S.indexOf(".")===0||S.indexOf("[")===0)){var F=S;if(S.indexOf(".")===0&&(F=S.slice(1)),F.indexOf("]")===F.length-1){var I=F.indexOf("["),D=F.slice(0,I),R=F.slice(I+1,F.length-1);P=D?p[D][R]:p[R]}else P=p[F]}var N=o[E].type,z;switch(N){case"bool":case"int":case"sampler2D":case"samplerCube":v.uniform1i(b[E],P);break;case"float":v.uniform1f(b[E],P);break;default:var G=N.indexOf("vec");if(0<=G&&G<=1&&N.length===4+G){if(z=N.charCodeAt(N.length-1)-48,z<2||z>4)throw new a("","Invalid data type");switch(N.charAt(0)){case"b":case"i":v["uniform"+z+"iv"](b[E],P);break;case"v":v["uniform"+z+"fv"](b[E],P);break;default:throw new a("","Unrecognized data type for vector "+name+": "+N)}}else if(N.indexOf("mat")===0&&N.length===4){if(z=N.charCodeAt(N.length-1)-48,z<2||z>4)throw new a("","Invalid uniform dimension type for matrix "+name+": "+N);v["uniformMatrix"+z+"fv"](b[E],!1,P);break}else throw new a("","Unknown uniform data type for "+name+": "+N)}}}}}function f(M,_){if(typeof _!="object")return[[M,_]];var p=[];for(var w in _){var h=_[w],L=M;parseInt(w)+""===w?L+="["+w+"]":L+="."+w,typeof h=="object"?p.push.apply(p,f(L,h)):p.push([L,h])}return p}function y(M){switch(M){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":return 0;case"float":return 0;default:var _=M.indexOf("vec");if(0<=_&&_<=1&&M.length===4+_){var p=M.charCodeAt(M.length-1)-48;if(p<2||p>4)throw new a("","Invalid data type");return M.charAt(0)==="b"?n(p,!1):n(p,0)}else if(M.indexOf("mat")===0&&M.length===4){var p=M.charCodeAt(M.length-1)-48;if(p<2||p>4)throw new a("","Invalid uniform dimension type for matrix "+name+": "+M);return n(p*p,0)}else throw new a("","Unknown uniform data type for "+name+": "+M)}}function l(M,_,p){if(typeof p=="object"){var w=x(p);Object.defineProperty(M,_,{get:i(w),set:d(p),enumerable:!0,configurable:!1})}else b[p]?Object.defineProperty(M,_,{get:g(p),set:d(p),enumerable:!0,configurable:!1}):M[_]=y(o[p].type)}function x(M){var _;if(Array.isArray(M)){_=new Array(M.length);for(var p=0;p<M.length;++p)l(_,p,M[p])}else{_={};for(var w in M)l(_,w,M[w])}return _}var u=e(o,!0);return{get:i(x(u)),set:d(u),enumerable:!0,configurable:!0}}},{"./GLError":133,"./reflect":136}],136:[function(c,A,T){A.exports=e;function e(a,i){for(var n={},r=0;r<a.length;++r)for(var v=a[r].name,s=v.split("."),o=n,b=0;b<s.length;++b){var g=s[b].split("[");if(g.length>1){g[0]in o||(o[g[0]]=[]),o=o[g[0]];for(var d=1;d<g.length;++d){var f=parseInt(g[d]);d<g.length-1||b<s.length-1?(f in o||(d<g.length-1?o[f]=[]:o[f]={}),o=o[f]):i?o[f]=r:o[f]=a[r].type}}else b<s.length-1?(g[0]in o||(o[g[0]]={}),o=o[g[0]]):i?o[g[0]]=r:o[g[0]]=a[r].type}return n}},{}],137:[function(c,A,T){T.uniforms=n,T.attributes=r;var e={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},a=null;function i(v,s){if(!a){var o=Object.keys(e);a={};for(var b=0;b<o.length;++b){var g=o[b];a[v[g]]=e[g]}}return a[s]}function n(v,s){for(var o=v.getProgramParameter(s,v.ACTIVE_UNIFORMS),b=[],g=0;g<o;++g){var d=v.getActiveUniform(s,g);if(d){var f=i(v,d.type);if(d.size>1)for(var y=0;y<d.size;++y)b.push({name:d.name.replace("[0]","["+y+"]"),type:f});else b.push({name:d.name,type:f})}}return b}function r(v,s){for(var o=v.getProgramParameter(s,v.ACTIVE_ATTRIBUTES),b=[],g=0;g<o;++g){var d=v.getActiveAttrib(s,g);d&&b.push({name:d.name,type:i(v,d.type)})}return b}},{}],138:[function(c,A,T){T.shader=f,T.program=y;var e=c("./GLError"),a=c("gl-format-compiler-error"),i=typeof WeakMap>"u"?c("weakmap-shim"):WeakMap,n=new i,r=0;function v(l,x,u,M,_,p,w){this.id=l,this.src=x,this.type=u,this.shader=M,this.count=p,this.programs=[],this.cache=w}v.prototype.dispose=function(){if(--this.count===0){for(var l=this.cache,x=l.gl,u=this.programs,M=0,_=u.length;M<_;++M){var p=l.programs[u[M]];p&&(delete l.programs[M],x.deleteProgram(p))}x.deleteShader(this.shader),delete l.shaders[this.type===x.FRAGMENT_SHADER|0][this.src]}};function s(l){this.gl=l,this.shaders=[{},{}],this.programs={}}var o=s.prototype;function b(l,x,u){var M=l.createShader(x);if(l.shaderSource(M,u),l.compileShader(M),!l.getShaderParameter(M,l.COMPILE_STATUS)){var _=l.getShaderInfoLog(M);try{var p=a(_,u,x)}catch(w){throw console.warn("Failed to format compiler error: "+w),new e(_,`Error compiling shader:
`+_)}throw new e(_,p.short,p.long)}return M}o.getShaderReference=function(l,x){var u=this.gl,M=this.shaders[l===u.FRAGMENT_SHADER|0],_=M[x];if(!_||!u.isShader(_.shader)){var p=b(u,l,x);_=M[x]=new v(r++,x,l,p,[],1,this)}else _.count+=1;return _};function g(l,x,u,M,_){var p=l.createProgram();l.attachShader(p,x),l.attachShader(p,u);for(var w=0;w<M.length;++w)l.bindAttribLocation(p,_[w],M[w]);if(l.linkProgram(p),!l.getProgramParameter(p,l.LINK_STATUS)){var h=l.getProgramInfoLog(p);throw new e(h,"Error linking program: "+h)}return p}o.getProgram=function(l,x,u,M){var _=[l.id,x.id,u.join(":"),M.join(":")].join("@"),p=this.programs[_];return(!p||!this.gl.isProgram(p))&&(this.programs[_]=p=g(this.gl,l.shader,x.shader,u,M),l.programs.push(_),x.programs.push(_)),p};function d(l){var x=n.get(l);return x||(x=new s(l),n.set(l,x)),x}function f(l,x,u){return d(l).getShaderReference(x,u)}function y(l,x,u,M,_){return d(l).getProgram(x,u,M,_)}},{"./GLError":133,"gl-format-compiler-error":87,"weakmap-shim":316}],139:[function(c,A,T){A.exports=i;function e(n){this.plot=n,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}var a=e.prototype;a.update=function(n){n=n||{},this.enable=(n.enable||[!0,!0,!1,!1]).slice(),this.width=(n.width||[1,1,1,1]).slice(),this.color=(n.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(r){return r.slice()}),this.center=(n.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},a.draw=function(){var n=this.enable,r=this.width,v=this.color,s=this.center,o=this.plot,b=o.line,g=o.dataBox,d=o.viewBox;if(b.bind(),g[0]<=s[0]&&s[0]<=g[2]&&g[1]<=s[1]&&s[1]<=g[3]){var f=d[0]+(s[0]-g[0])/(g[2]-g[0])*(d[2]-d[0]),y=d[1]+(s[1]-g[1])/(g[3]-g[1])*(d[3]-d[1]);n[0]&&b.drawLine(f,y,d[0],y,r[0],v[0]),n[1]&&b.drawLine(f,y,f,d[1],r[1],v[1]),n[2]&&b.drawLine(f,y,d[2],y,r[2],v[2]),n[3]&&b.drawLine(f,y,f,d[3],r[3],v[3])}},a.dispose=function(){this.plot.removeOverlay(this)};function i(n,r){var v=new e(n);return v.update(r),n.addOverlay(v),v}},{}],140:[function(c,A,T){var e=c("glslify"),a=c("gl-shader"),i=e([`precision mediump float;
#define GLSLIFY 1

attribute vec3 position, color;
attribute float weight;

uniform mat4 model, view, projection;
uniform vec3 coordinates[3];
uniform vec4 colors[3];
uniform vec2 screenShape;
uniform float lineWidth;

varying vec4 fragColor;

void main() {
  vec3 vertexPosition = mix(coordinates[0],
    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));

  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);
  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;
  vec2 delta = weight * clipOffset * screenShape;
  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;

  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);
  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];
}
`]),n=e([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
  gl_FragColor = fragColor;
}`]);A.exports=function(r){return a(r,i,n,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},{"gl-shader":132,glslify:231}],141:[function(c,A,T){var e=c("gl-buffer"),a=c("gl-vao"),i=c("./shaders/index");A.exports=g;var n=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function r(d,f,y,l){this.gl=d,this.buffer=f,this.vao=y,this.shader=l,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var v=r.prototype,s=[0,0,0],o=[0,0,0],b=[0,0];v.isTransparent=function(){return!1},v.drawTransparent=function(d){},v.draw=function(d){var f=this.gl,y=this.vao,l=this.shader;y.bind(),l.bind();var x=d.model||n,u=d.view||n,M=d.projection||n,_;this.axes&&(_=this.axes.lastCubeProps.axis);for(var p=s,w=o,h=0;h<3;++h)_&&_[h]<0?(p[h]=this.bounds[0][h],w[h]=this.bounds[1][h]):(p[h]=this.bounds[1][h],w[h]=this.bounds[0][h]);b[0]=f.drawingBufferWidth,b[1]=f.drawingBufferHeight,l.uniforms.model=x,l.uniforms.view=u,l.uniforms.projection=M,l.uniforms.coordinates=[this.position,p,w],l.uniforms.colors=this.colors,l.uniforms.screenShape=b;for(var h=0;h<3;++h)l.uniforms.lineWidth=this.lineWidth[h]*this.pixelRatio,this.enabled[h]&&(y.draw(f.TRIANGLES,6,6*h),this.drawSides[h]&&y.draw(f.TRIANGLES,12,18+12*h));y.unbind()},v.update=function(d){!d||("bounds"in d&&(this.bounds=d.bounds),"position"in d&&(this.position=d.position),"lineWidth"in d&&(this.lineWidth=d.lineWidth),"colors"in d&&(this.colors=d.colors),"enabled"in d&&(this.enabled=d.enabled),"drawSides"in d&&(this.drawSides=d.drawSides))},v.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()};function g(d,f){var y=[];function l(p,w,h,L,S,E){var P=[p,w,h,0,0,0,1];P[L+3]=1,P[L]=S,y.push.apply(y,P),P[6]=-1,y.push.apply(y,P),P[L]=E,y.push.apply(y,P),y.push.apply(y,P),P[6]=1,y.push.apply(y,P),P[L]=S,y.push.apply(y,P)}l(0,0,0,0,0,1),l(0,0,0,1,0,1),l(0,0,0,2,0,1),l(1,0,0,1,-1,1),l(1,0,0,2,-1,1),l(0,1,0,0,-1,1),l(0,1,0,2,-1,1),l(0,0,1,0,-1,1),l(0,0,1,1,-1,1);var x=e(d,y),u=a(d,[{type:d.FLOAT,buffer:x,size:3,offset:0,stride:28},{type:d.FLOAT,buffer:x,size:3,offset:12,stride:28},{type:d.FLOAT,buffer:x,size:1,offset:24,stride:28}]),M=i(d);M.attributes.position.location=0,M.attributes.color.location=1,M.attributes.weight.location=2;var _=new r(d,x,u,M);return _.update(f),_}},{"./shaders/index":140,"gl-buffer":78,"gl-vao":150}],142:[function(c,A,T){var e=c("glslify"),a=e([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, tubeScale;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * tubePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(tubePosition, 1.0);
  vec4 t_position  = view * tubePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = tubePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),i=e([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),n=e([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float tubeScale;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  gl_Position = projection * view * tubePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),r=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);T.meshShader={vertex:a,fragment:i,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},T.pickShader={vertex:n,fragment:r,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},{glslify:231}],143:[function(c,A,T){var e=c("gl-vec3"),a=c("gl-vec4"),i=["xyz","xzy","yxz","yzx","zxy","zyx"],n=function(y,l,x,u){for(var M=y.points,_=y.velocities,p=y.divergences,w=[],h=[],L=[],S=[],E=[],P=[],F=0,I=0,D=a.create(),R=a.create(),N=8,z=0;z<M.length;z++){var G=M[z],Y=_[z],ee=p[z];l===0&&(ee=x*.05),I=e.length(Y)/u,D=a.create(),e.copy(D,Y),D[3]=ee;for(var Z=0;Z<N;Z++)E[Z]=[G[0],G[1],G[2],Z];if(S.length>0)for(var Z=0;Z<N;Z++){var X=(Z+1)%N;w.push(S[Z],E[Z],E[X],E[X],S[X],S[Z]),L.push(R,D,D,D,R,R),P.push(F,I,I,I,F,F);var ne=w.length;h.push([ne-6,ne-5,ne-4],[ne-3,ne-2,ne-1])}var ce=S;S=E,E=ce;var Q=R;R=D,D=Q;var K=F;F=I,I=K}return{positions:w,cells:h,vectors:L,vertexIntensity:P}},r=function(y,l,x,u){for(var M=0,_=0;_<y.length;_++)for(var p=y[_].velocities,w=0;w<p.length;w++)M=Math.max(M,e.length(p[w]));for(var h=y.map(function(z){return n(z,x,u,M)}),L=[],S=[],E=[],P=[],_=0;_<h.length;_++){var F=h[_],I=L.length;L=L.concat(F.positions),E=E.concat(F.vectors),P=P.concat(F.vertexIntensity);for(var w=0;w<F.cells.length;w++){var D=F.cells[w],R=[];S.push(R);for(var N=0;N<D.length;N++)R.push(D[N]+I)}}return{positions:L,cells:S,vectors:E,vertexIntensity:P,colormap:l}},v=function(y,l){var x=y.length,u;for(u=0;u<x;u++){var M=y[u];if(M===l)return u;if(M>l)return u-1}return u},s=function(y,l,x){return y<l?l:y>x?x:y},o=function(y,l,x){var u=l.vectors,M=l.meshgrid,_=y[0],p=y[1],w=y[2],h=M[0].length,L=M[1].length,S=M[2].length,E=v(M[0],_),P=v(M[1],p),F=v(M[2],w),I=E+1,D=P+1,R=F+1;if(E=s(E,0,h-1),I=s(I,0,h-1),P=s(P,0,L-1),D=s(D,0,L-1),F=s(F,0,S-1),R=s(R,0,S-1),E<0||P<0||F<0||I>h-1||D>L-1||R>S-1)return e.create();var N=M[0][E],z=M[0][I],G=M[1][P],Y=M[1][D],ee=M[2][F],Z=M[2][R],X=(_-N)/(z-N),ne=(p-G)/(Y-G),ce=(w-ee)/(Z-ee);isFinite(X)||(X=.5),isFinite(ne)||(ne=.5),isFinite(ce)||(ce=.5);var Q,K,U,H,q,re;switch(x.reversedX&&(E=h-1-E,I=h-1-I),x.reversedY&&(P=L-1-P,D=L-1-D),x.reversedZ&&(F=S-1-F,R=S-1-R),x.filled){case 5:q=F,re=R,U=P*S,H=D*S,Q=E*S*L,K=I*S*L;break;case 4:q=F,re=R,Q=E*S,K=I*S,U=P*S*h,H=D*S*h;break;case 3:U=P,H=D,q=F*L,re=R*L,Q=E*L*S,K=I*L*S;break;case 2:U=P,H=D,Q=E*L,K=I*L,q=F*L*h,re=R*L*h;break;case 1:Q=E,K=I,q=F*h,re=R*h,U=P*h*S,H=D*h*S;break;default:Q=E,K=I,U=P*h,H=D*h,q=F*h*L,re=R*h*L;break}var j=u[Q+U+q],$=u[Q+U+re],ie=u[Q+H+q],oe=u[Q+H+re],ae=u[K+U+q],se=u[K+U+re],_e=u[K+H+q],ue=u[K+H+re],ye=e.create(),xe=e.create(),me=e.create(),be=e.create();e.lerp(ye,j,ae,X),e.lerp(xe,$,se,X),e.lerp(me,ie,_e,X),e.lerp(be,oe,ue,X);var ke=e.create(),De=e.create();e.lerp(ke,ye,me,ne),e.lerp(De,xe,be,ne);var Ve=e.create();return e.lerp(Ve,ke,De,ce),Ve},b=function(y){var l=1/0;y.sort(function(_,p){return _-p});for(var x=y.length,u=1;u<x;u++){var M=Math.abs(y[u]-y[u-1]);M<l&&(l=M)}return l},g=function(y){for(var l=[],x=[],u=[],M={},_={},p={},w=y.length,h=0;h<w;h++){var L=y[h],S=L[0],E=L[1],P=L[2];M[S]||(l.push(S),M[S]=!0),_[E]||(x.push(E),_[E]=!0),p[P]||(u.push(P),p[P]=!0)}var F=b(l),I=b(x),D=b(u),R=Math.min(F,I,D);return isFinite(R)?R:1};A.exports=function(y,l){var x=y.startingPositions,u=y.maxLength||1e3,M=y.tubeSize||1,_=y.absoluteTubeSize,p=y.gridFill||"+x+y+z",w={};p.indexOf("-x")!==-1&&(w.reversedX=!0),p.indexOf("-y")!==-1&&(w.reversedY=!0),p.indexOf("-z")!==-1&&(w.reversedZ=!0),w.filled=i.indexOf(p.replace(/-/g,"").replace(/\+/g,""));var h=y.getVelocity||function(se){return o(se,y,w)},L=y.getDivergence||function(se,_e){var ue=e.create(),ye=1e-4;e.add(ue,se,[ye,0,0]);var xe=h(ue);e.subtract(xe,xe,_e),e.scale(xe,xe,1/ye),e.add(ue,se,[0,ye,0]);var me=h(ue);e.subtract(me,me,_e),e.scale(me,me,1/ye),e.add(ue,se,[0,0,ye]);var be=h(ue);return e.subtract(be,be,_e),e.scale(be,be,1/ye),e.add(ue,xe,me),e.add(ue,ue,be),ue},S=[],E=l[0][0],P=l[0][1],F=l[0][2],I=l[1][0],D=l[1][1],R=l[1][2],N=function(se){var _e=se[0],ue=se[1],ye=se[2];return!(_e<E||_e>I||ue<P||ue>D||ye<F||ye>R)},z=e.distance(l[0],l[1]),G=10*z/u,Y=G*G,ee=1,Z=0,X=x.length;X>1&&(ee=g(x));for(var ne=0;ne<X;ne++){var ce=e.create();e.copy(ce,x[ne]);var Q=[ce],K=[],U=h(ce),H=ce;K.push(U);var q=[],re=L(ce,U),j=e.length(re);isFinite(j)&&j>Z&&(Z=j),q.push(j),S.push({points:Q,velocities:K,divergences:q});for(var $=0;$<u*100&&Q.length<u&&N(ce);){$++;var ie=e.clone(U),oe=e.squaredLength(ie);if(oe===0)break;if(oe>Y&&e.scale(ie,ie,G/Math.sqrt(oe)),e.add(ie,ie,ce),U=h(ie),e.squaredDistance(H,ie)-Y>-1e-4*Y){Q.push(ie),H=ie,K.push(U);var re=L(ie,U),j=e.length(re);isFinite(j)&&j>Z&&(Z=j),q.push(j)}ce=ie}}var ae=r(S,y.colormap,Z,ee);return _?ae.tubeScale=_:(Z===0&&(Z=1),ae.tubeScale=M*.5*ee/Z),ae};var d=c("./lib/shaders"),f=c("gl-cone3d").createMesh;A.exports.createTubeMesh=function(y,l){return f(y,l,{shaders:d,traceType:"streamtube"})}},{"./lib/shaders":142,"gl-cone3d":79,"gl-vec3":169,"gl-vec4":205}],144:[function(c,A,T){var e=c("gl-shader"),a=c("glslify"),i=a([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute vec3 f;
attribute vec3 normal;

uniform vec3 objectOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 lightPosition, eyePosition;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 localCoordinate = vec3(uv.zw, f.x);
  worldCoordinate = objectOffset + localCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);
  vec4 clipPosition = projection * view * worldPosition;
  gl_Position = clipPosition;
  kill = f.y;
  value = f.z;
  planeCoordinate = uv.xy;

  vColor = texture2D(colormap, vec2(value, value));

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * worldPosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  lightDirection = lightPosition - cameraCoordinate.xyz;
  eyeDirection   = eyePosition - cameraCoordinate.xyz;
  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);
}
`]),n=a([`precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float beckmannSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness) {
  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 lowerBound, upperBound;
uniform float contourTint;
uniform vec4 contourColor;
uniform sampler2D colormap;
uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform float vertexColor;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  if (
    kill > 0.0 ||
    vColor.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)
  ) discard;

  vec3 N = normalize(surfaceNormal);
  vec3 V = normalize(eyeDirection);
  vec3 L = normalize(lightDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  //decide how to interpolate color \u2014 in vertex or in fragment
  vec4 surfaceColor =
    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +
    step(.5, vertexColor) * vColor;

  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;
}
`]),r=a([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute float f;

uniform vec3 objectOffset;
uniform mat3 permutation;
uniform mat4 model, view, projection;
uniform float height, zOffset;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 dataCoordinate = permutation * vec3(uv.xy, height);
  worldCoordinate = objectOffset + dataCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);

  vec4 clipPosition = projection * view * worldPosition;
  clipPosition.z += zOffset;

  gl_Position = clipPosition;
  value = f + objectOffset.z;
  kill = -1.0;
  planeCoordinate = uv.zw;

  vColor = texture2D(colormap, vec2(value, value));

  //Don't do lighting for contours
  surfaceNormal   = vec3(1,0,0);
  eyeDirection    = vec3(0,1,0);
  lightDirection  = vec3(0,0,1);
}
`]),v=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec2 shape;
uniform vec3 clipBounds[2];
uniform float pickId;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 surfaceNormal;

vec2 splitFloat(float v) {
  float vh = 255.0 * v;
  float upper = floor(vh);
  float lower = fract(vh);
  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);
}

void main() {
  if ((kill > 0.0) ||
      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;

  vec2 ux = splitFloat(planeCoordinate.x / shape.x);
  vec2 uy = splitFloat(planeCoordinate.y / shape.y);
  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));
}
`]);T.createShader=function(s){var o=e(s,i,n,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return o.attributes.uv.location=0,o.attributes.f.location=1,o.attributes.normal.location=2,o},T.createPickShader=function(s){var o=e(s,i,v,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return o.attributes.uv.location=0,o.attributes.f.location=1,o.attributes.normal.location=2,o},T.createContourShader=function(s){var o=e(s,r,n,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return o.attributes.uv.location=0,o.attributes.f.location=1,o},T.createPickContourShader=function(s){var o=e(s,r,v,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return o.attributes.uv.location=0,o.attributes.f.location=1,o}},{"gl-shader":132,glslify:231}],145:[function(c,A,T){A.exports=K;var e=c("bit-twiddle"),a=c("gl-buffer"),i=c("gl-vao"),n=c("gl-texture2d"),r=c("typedarray-pool"),v=c("colormap"),s=c("ndarray-ops"),o=c("ndarray-pack"),b=c("ndarray"),g=c("surface-nets"),d=c("gl-mat4/multiply"),f=c("gl-mat4/invert"),y=c("binary-search-bounds"),l=c("ndarray-gradient"),x=c("./lib/shaders"),u=x.createShader,M=x.createContourShader,_=x.createPickShader,p=x.createPickContourShader,w=4*(4+3+3),h=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],L=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],S=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];(function(){for(var U=0;U<3;++U){var H=S[U],q=(U+1)%3,re=(U+2)%3;H[q+0]=1,H[re+3]=1,H[U+6]=1}})();function E(U,H,q,re,j){this.position=U,this.index=H,this.uv=q,this.level=re,this.dataCoordinate=j}var P=256;function F(U,H,q,re,j,$,ie,oe,ae,se,_e,ue,ye,xe,me){this.gl=U,this.shape=H,this.bounds=q,this.objectOffset=me,this.intensityBounds=[],this._shader=re,this._pickShader=j,this._coordinateBuffer=$,this._vao=ie,this._colorMap=oe,this._contourShader=ae,this._contourPickShader=se,this._contourBuffer=_e,this._contourVAO=ue,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new E([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=ye,this._dynamicVAO=xe,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[b(r.mallocFloat(1024),[0,0]),b(r.mallocFloat(1024),[0,0]),b(r.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}var I=F.prototype;I.genColormap=function(U,H){var q=!1,re=o([v({colormap:U,nshades:P,format:"rgba"}).map(function(j,$){var ie=H?D($/255,H):j[3];return ie<1&&(q=!0),[j[0],j[1],j[2],255*ie]})]);return s.divseq(re,255),this.hasAlphaScale=q,re},I.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},I.isOpaque=function(){return!this.isTransparent()},I.pickSlots=1,I.setPickBase=function(U){this.pickId=U};function D(U,H){if(!H||!H.length)return 1;for(var q=0;q<H.length;++q){if(H.length<2)return 1;if(H[q][0]===U)return H[q][1];if(H[q][0]>U&&q>0){var re=(H[q][0]-U)/(H[q][0]-H[q-1][0]);return H[q][1]*(1-re)+re*H[q-1][1]}}return 1}var R=[0,0,0],N={showSurface:!1,showContour:!1,projections:[h.slice(),h.slice(),h.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function z(U,H){var q,re,j,$=H.axes&&H.axes.lastCubeProps.axis||R,ie=H.showSurface,oe=H.showContour;for(q=0;q<3;++q)for(ie=ie||H.surfaceProject[q],re=0;re<3;++re)oe=oe||H.contourProject[q][re];for(q=0;q<3;++q){var ae=N.projections[q];for(re=0;re<16;++re)ae[re]=0;for(re=0;re<4;++re)ae[5*re]=1;ae[5*q]=0,ae[12+q]=H.axesBounds[+($[q]>0)][q],d(ae,U.model,ae);var se=N.clipBounds[q];for(j=0;j<2;++j)for(re=0;re<3;++re)se[j][re]=U.clipBounds[j][re];se[0][q]=-1e8,se[1][q]=1e8}return N.showSurface=ie,N.showContour=oe,N}var G={model:h,view:h,projection:h,inverseModel:h.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},Y=h.slice(),ee=[1,0,0,0,1,0,0,0,1];function Z(U,H){U=U||{};var q=this.gl;q.disable(q.CULL_FACE),this._colorMap.bind(0);var re=G;re.model=U.model||h,re.view=U.view||h,re.projection=U.projection||h,re.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],re.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],re.objectOffset=this.objectOffset,re.contourColor=this.contourColor[0],re.inverseModel=f(re.inverseModel,re.model);for(var j=0;j<2;++j)for(var $=re.clipBounds[j],ie=0;ie<3;++ie)$[ie]=Math.min(Math.max(this.clipBounds[j][ie],-1e8),1e8);re.kambient=this.ambientLight,re.kdiffuse=this.diffuseLight,re.kspecular=this.specularLight,re.roughness=this.roughness,re.fresnel=this.fresnel,re.opacity=this.opacity,re.height=0,re.permutation=ee,re.vertexColor=this.vertexColor;var oe=Y;for(d(oe,re.view,re.model),d(oe,re.projection,oe),f(oe,oe),j=0;j<3;++j)re.eyePosition[j]=oe[12+j]/oe[15];var ae=oe[15];for(j=0;j<3;++j)ae+=this.lightPosition[j]*oe[4*j+3];for(j=0;j<3;++j){var se=oe[12+j];for(ie=0;ie<3;++ie)se+=oe[4*ie+j]*this.lightPosition[ie];re.lightPosition[j]=se/ae}var _e=z(re,this);if(_e.showSurface){for(this._shader.bind(),this._shader.uniforms=re,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(q.TRIANGLES,this._vertexCount),j=0;j<3;++j)!this.surfaceProject[j]||!this.vertexCount||(this._shader.uniforms.model=_e.projections[j],this._shader.uniforms.clipBounds=_e.clipBounds[j],this._vao.draw(q.TRIANGLES,this._vertexCount));this._vao.unbind()}if(_e.showContour){var ue=this._contourShader;re.kambient=1,re.kdiffuse=0,re.kspecular=0,re.opacity=1,ue.bind(),ue.uniforms=re;var ye=this._contourVAO;for(ye.bind(),j=0;j<3;++j)for(ue.uniforms.permutation=S[j],q.lineWidth(this.contourWidth[j]*this.pixelRatio),ie=0;ie<this.contourLevels[j].length;++ie)ie===this.highlightLevel[j]?(ue.uniforms.contourColor=this.highlightColor[j],ue.uniforms.contourTint=this.highlightTint[j]):(ie===0||ie-1===this.highlightLevel[j])&&(ue.uniforms.contourColor=this.contourColor[j],ue.uniforms.contourTint=this.contourTint[j]),this._contourCounts[j][ie]&&(ue.uniforms.height=this.contourLevels[j][ie],ye.draw(q.LINES,this._contourCounts[j][ie],this._contourOffsets[j][ie]));for(j=0;j<3;++j)for(ue.uniforms.model=_e.projections[j],ue.uniforms.clipBounds=_e.clipBounds[j],ie=0;ie<3;++ie)if(!!this.contourProject[j][ie]){ue.uniforms.permutation=S[ie],q.lineWidth(this.contourWidth[ie]*this.pixelRatio);for(var xe=0;xe<this.contourLevels[ie].length;++xe)xe===this.highlightLevel[ie]?(ue.uniforms.contourColor=this.highlightColor[ie],ue.uniforms.contourTint=this.highlightTint[ie]):(xe===0||xe-1===this.highlightLevel[ie])&&(ue.uniforms.contourColor=this.contourColor[ie],ue.uniforms.contourTint=this.contourTint[ie]),this._contourCounts[ie][xe]&&(ue.uniforms.height=this.contourLevels[ie][xe],ye.draw(q.LINES,this._contourCounts[ie][xe],this._contourOffsets[ie][xe]))}for(ye.unbind(),ye=this._dynamicVAO,ye.bind(),j=0;j<3;++j)if(this._dynamicCounts[j]!==0)for(ue.uniforms.model=re.model,ue.uniforms.clipBounds=re.clipBounds,ue.uniforms.permutation=S[j],q.lineWidth(this.dynamicWidth[j]*this.pixelRatio),ue.uniforms.contourColor=this.dynamicColor[j],ue.uniforms.contourTint=this.dynamicTint[j],ue.uniforms.height=this.dynamicLevel[j],ye.draw(q.LINES,this._dynamicCounts[j],this._dynamicOffsets[j]),ie=0;ie<3;++ie)!this.contourProject[ie][j]||(ue.uniforms.model=_e.projections[ie],ue.uniforms.clipBounds=_e.clipBounds[ie],ye.draw(q.LINES,this._dynamicCounts[j],this._dynamicOffsets[j]));ye.unbind()}}I.draw=function(U){return Z.call(this,U,!1)},I.drawTransparent=function(U){return Z.call(this,U,!0)};var X={model:h,view:h,projection:h,inverseModel:h,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};I.drawPick=function(U){U=U||{};var H=this.gl;H.disable(H.CULL_FACE);var q=X;q.model=U.model||h,q.view=U.view||h,q.projection=U.projection||h,q.shape=this._field[2].shape,q.pickId=this.pickId/255,q.lowerBound=this.bounds[0],q.upperBound=this.bounds[1],q.objectOffset=this.objectOffset,q.permutation=ee;for(var re=0;re<2;++re)for(var j=q.clipBounds[re],$=0;$<3;++$)j[$]=Math.min(Math.max(this.clipBounds[re][$],-1e8),1e8);var ie=z(q,this);if(ie.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=q,this._vao.bind(),this._vao.draw(H.TRIANGLES,this._vertexCount),re=0;re<3;++re)!this.surfaceProject[re]||(this._pickShader.uniforms.model=ie.projections[re],this._pickShader.uniforms.clipBounds=ie.clipBounds[re],this._vao.draw(H.TRIANGLES,this._vertexCount));this._vao.unbind()}if(ie.showContour){var oe=this._contourPickShader;oe.bind(),oe.uniforms=q;var ae=this._contourVAO;for(ae.bind(),$=0;$<3;++$)for(H.lineWidth(this.contourWidth[$]*this.pixelRatio),oe.uniforms.permutation=S[$],re=0;re<this.contourLevels[$].length;++re)this._contourCounts[$][re]&&(oe.uniforms.height=this.contourLevels[$][re],ae.draw(H.LINES,this._contourCounts[$][re],this._contourOffsets[$][re]));for(re=0;re<3;++re)for(oe.uniforms.model=ie.projections[re],oe.uniforms.clipBounds=ie.clipBounds[re],$=0;$<3;++$)if(!!this.contourProject[re][$]){oe.uniforms.permutation=S[$],H.lineWidth(this.contourWidth[$]*this.pixelRatio);for(var se=0;se<this.contourLevels[$].length;++se)this._contourCounts[$][se]&&(oe.uniforms.height=this.contourLevels[$][se],ae.draw(H.LINES,this._contourCounts[$][se],this._contourOffsets[$][se]))}ae.unbind()}},I.pick=function(U){if(!U||U.id!==this.pickId)return null;var H=this._field[2].shape,q=this._pickResult,re=H[0]*(U.value[0]+(U.value[2]>>4)/16)/255,j=Math.floor(re),$=re-j,ie=H[1]*(U.value[1]+(U.value[2]&15)/16)/255,oe=Math.floor(ie),ae=ie-oe;j+=1,oe+=1;var se=q.position;se[0]=se[1]=se[2]=0;for(var _e=0;_e<2;++_e)for(var ue=_e?$:1-$,ye=0;ye<2;++ye)for(var xe=ye?ae:1-ae,me=j+_e,be=oe+ye,ke=ue*xe,De=0;De<3;++De)se[De]+=this._field[De].get(me,be)*ke;for(var Ve=this._pickResult.level,Ae=0;Ae<3;++Ae)if(Ve[Ae]=y.le(this.contourLevels[Ae],se[Ae]),Ve[Ae]<0)this.contourLevels[Ae].length>0&&(Ve[Ae]=0);else if(Ve[Ae]<this.contourLevels[Ae].length-1){var Le=this.contourLevels[Ae][Ve[Ae]],je=this.contourLevels[Ae][Ve[Ae]+1];Math.abs(Le-se[Ae])>Math.abs(je-se[Ae])&&(Ve[Ae]+=1)}for(q.index[0]=$<.5?j:j+1,q.index[1]=ae<.5?oe:oe+1,q.uv[0]=re/H[0],q.uv[1]=ie/H[1],De=0;De<3;++De)q.dataCoordinate[De]=this._field[De].get(q.index[0],q.index[1]);return q},I.padField=function(U,H){var q=H.shape.slice(),re=U.shape.slice();s.assign(U.lo(1,1).hi(q[0],q[1]),H),s.assign(U.lo(1).hi(q[0],1),H.hi(q[0],1)),s.assign(U.lo(1,re[1]-1).hi(q[0],1),H.lo(0,q[1]-1).hi(q[0],1)),s.assign(U.lo(0,1).hi(1,q[1]),H.hi(1)),s.assign(U.lo(re[0]-1,1).hi(1,q[1]),H.lo(q[0]-1)),U.set(0,0,H.get(0,0)),U.set(0,re[1]-1,H.get(0,q[1]-1)),U.set(re[0]-1,0,H.get(q[0]-1,0)),U.set(re[0]-1,re[1]-1,H.get(q[0]-1,q[1]-1))};function ne(U,H){return Array.isArray(U)?[H(U[0]),H(U[1]),H(U[2])]:[H(U),H(U),H(U)]}function ce(U){return Array.isArray(U)?U.length===3?[U[0],U[1],U[2],1]:[U[0],U[1],U[2],U[3]]:[0,0,0,1]}function Q(U){if(Array.isArray(U)){if(Array.isArray(U))return[ce(U[0]),ce(U[1]),ce(U[2])];var H=ce(U);return[H.slice(),H.slice(),H.slice()]}}I.update=function(U){U=U||{},this.objectOffset=U.objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in U&&(this.contourWidth=ne(U.contourWidth,Number)),"showContour"in U&&(this.showContour=ne(U.showContour,Boolean)),"showSurface"in U&&(this.showSurface=!!U.showSurface),"contourTint"in U&&(this.contourTint=ne(U.contourTint,Boolean)),"contourColor"in U&&(this.contourColor=Q(U.contourColor)),"contourProject"in U&&(this.contourProject=ne(U.contourProject,function(ut){return ne(ut,Boolean)})),"surfaceProject"in U&&(this.surfaceProject=U.surfaceProject),"dynamicColor"in U&&(this.dynamicColor=Q(U.dynamicColor)),"dynamicTint"in U&&(this.dynamicTint=ne(U.dynamicTint,Number)),"dynamicWidth"in U&&(this.dynamicWidth=ne(U.dynamicWidth,Number)),"opacity"in U&&(this.opacity=U.opacity),"opacityscale"in U&&(this.opacityscale=U.opacityscale),"colorBounds"in U&&(this.colorBounds=U.colorBounds),"vertexColor"in U&&(this.vertexColor=U.vertexColor?1:0),"colormap"in U&&this._colorMap.setPixels(this.genColormap(U.colormap,this.opacityscale));var H=U.field||U.coords&&U.coords[2]||null,q=!1;if(H||(this._field[2].shape[0]||this._field[2].shape[2]?H=this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):H=this._field[2].hi(0,0)),"field"in U||"coords"in U){var re=(H.shape[0]+2)*(H.shape[1]+2);re>this._field[2].data.length&&(r.freeFloat(this._field[2].data),this._field[2].data=r.mallocFloat(e.nextPow2(re))),this._field[2]=b(this._field[2].data,[H.shape[0]+2,H.shape[1]+2]),this.padField(this._field[2],H),this.shape=H.shape.slice();for(var j=this.shape,$=0;$<2;++$)this._field[2].size>this._field[$].data.length&&(r.freeFloat(this._field[$].data),this._field[$].data=r.mallocFloat(this._field[2].size)),this._field[$]=b(this._field[$].data,[j[0]+2,j[1]+2]);if(U.coords){var ie=U.coords;if(!Array.isArray(ie)||ie.length!==3)throw new Error("gl-surface: invalid coordinates for x/y");for($=0;$<2;++$){var oe=ie[$];for(ye=0;ye<2;++ye)if(oe.shape[ye]!==j[ye])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[$],oe)}}else if(U.ticks){var ae=U.ticks;if(!Array.isArray(ae)||ae.length!==2)throw new Error("gl-surface: invalid ticks");for($=0;$<2;++$){var se=ae[$];if((Array.isArray(se)||se.length)&&(se=b(se)),se.shape[0]!==j[$])throw new Error("gl-surface: invalid tick length");var _e=b(se.data,j);_e.stride[$]=se.stride[0],_e.stride[$^1]=0,this.padField(this._field[$],_e)}}else{for($=0;$<2;++$){var ue=[0,0];ue[$]=1,this._field[$]=b(this._field[$].data,[j[0]+2,j[1]+2],ue,0)}this._field[0].set(0,0,0);for(var ye=0;ye<j[0];++ye)this._field[0].set(ye+1,0,ye);for(this._field[0].set(j[0]+1,0,j[0]-1),this._field[1].set(0,0,0),ye=0;ye<j[1];++ye)this._field[1].set(0,ye+1,ye);this._field[1].set(0,j[1]+1,j[1]-1)}var xe=this._field,me=b(r.mallocFloat(xe[2].size*3*2),[3,j[0]+2,j[1]+2,2]);for($=0;$<3;++$)l(me.pick($),xe[$],"mirror");var be=b(r.mallocFloat(xe[2].size*3),[j[0]+2,j[1]+2,3]);for($=0;$<j[0]+2;++$)for(ye=0;ye<j[1]+2;++ye){var ke=me.get(0,$,ye,0),De=me.get(0,$,ye,1),Ve=me.get(1,$,ye,0),Ae=me.get(1,$,ye,1),Le=me.get(2,$,ye,0),je=me.get(2,$,ye,1),Ye=Ve*je-Ae*Le,ze=Le*De-je*ke,Ie=ke*Ae-De*Ve,We=Math.sqrt(Ye*Ye+ze*ze+Ie*Ie);We<1e-8?(We=Math.max(Math.abs(Ye),Math.abs(ze),Math.abs(Ie)),We<1e-8?(Ie=1,ze=Ye=0,We=1):We=1/We):We=1/Math.sqrt(We),be.set($,ye,0,Ye*We),be.set($,ye,1,ze*We),be.set($,ye,2,Ie*We)}r.free(me.data);var pt=[1/0,1/0,1/0],Ft=[-1/0,-1/0,-1/0],Qt=1/0,zt=-1/0,Et=(j[0]-1)*(j[1]-1)*6,Xt=r.mallocFloat(e.nextPow2(10*Et)),Nt=0,Ct=0;for($=0;$<j[0]-1;++$){e:for(ye=0;ye<j[1]-1;++ye){for(var Xe=0;Xe<2;++Xe)for(var at=0;at<2;++at)for(var Ge=0;Ge<3;++Ge){var Se=this._field[Ge].get(1+$+Xe,1+ye+at);if(isNaN(Se)||!isFinite(Se))continue e}for(Ge=0;Ge<6;++Ge){var He=$+L[Ge][0],Ke=ye+L[Ge][1],qe=this._field[0].get(He+1,Ke+1),Tt=this._field[1].get(He+1,Ke+1);Se=this._field[2].get(He+1,Ke+1),Ye=be.get(He+1,Ke+1,0),ze=be.get(He+1,Ke+1,1),Ie=be.get(He+1,Ke+1,2),U.intensity&&(mt=U.intensity.get(He,Ke));var mt=U.intensity?U.intensity.get(He,Ke):Se+this.objectOffset[2];Xt[Nt++]=He,Xt[Nt++]=Ke,Xt[Nt++]=qe,Xt[Nt++]=Tt,Xt[Nt++]=Se,Xt[Nt++]=0,Xt[Nt++]=mt,Xt[Nt++]=Ye,Xt[Nt++]=ze,Xt[Nt++]=Ie,pt[0]=Math.min(pt[0],qe+this.objectOffset[0]),pt[1]=Math.min(pt[1],Tt+this.objectOffset[1]),pt[2]=Math.min(pt[2],Se+this.objectOffset[2]),Qt=Math.min(Qt,mt),Ft[0]=Math.max(Ft[0],qe+this.objectOffset[0]),Ft[1]=Math.max(Ft[1],Tt+this.objectOffset[1]),Ft[2]=Math.max(Ft[2],Se+this.objectOffset[2]),zt=Math.max(zt,mt),Ct+=1}}}for(U.intensityBounds&&(Qt=+U.intensityBounds[0],zt=+U.intensityBounds[1]),$=6;$<Nt;$+=10)Xt[$]=(Xt[$]-Qt)/(zt-Qt);this._vertexCount=Ct,this._coordinateBuffer.update(Xt.subarray(0,Nt)),r.freeFloat(Xt),r.free(be.data),this.bounds=[pt,Ft],this.intensity=U.intensity||this._field[2],(this.intensityBounds[0]!==Qt||this.intensityBounds[1]!==zt)&&(q=!0),this.intensityBounds=[Qt,zt]}if("levels"in U){var At=U.levels;for(Array.isArray(At[0])?At=At.slice():At=[[],[],At],$=0;$<3;++$)At[$]=At[$].slice(),At[$].sort(function(ut,vt){return ut-vt});for($=0;$<3;++$)for(ye=0;ye<At[$].length;++ye)At[$][ye]-=this.objectOffset[$];e:for($=0;$<3;++$){if(At[$].length!==this.contourLevels[$].length){q=!0;break}for(ye=0;ye<At[$].length;++ye)if(At[$][ye]!==this.contourLevels[$][ye]){q=!0;break e}}this.contourLevels=At}if(q){xe=this._field,j=this.shape;for(var Ht=[],It=0;It<3;++It){var Vt=this.contourLevels[It],jt=[],Yt=[],or=[0,0,0];for($=0;$<Vt.length;++$){var Gr=g(this._field[It],Vt[$]);jt.push(Ht.length/5|0),Ct=0;e:for(ye=0;ye<Gr.cells.length;++ye){var on=Gr.cells[ye];for(Ge=0;Ge<2;++Ge){var Jr=Gr.positions[on[Ge]],ot=Jr[0],er=Math.floor(ot)|0,Kt=ot-er,fr=Jr[1],Ar=Math.floor(fr)|0,et=fr-Ar,$e=!1;t:for(var st=0;st<3;++st){or[st]=0;var ct=(It+st+1)%3;for(Xe=0;Xe<2;++Xe){var Mt=Xe?Kt:1-Kt;for(He=Math.min(Math.max(er+Xe,0),j[0])|0,at=0;at<2;++at){var Ut=at?et:1-et;if(Ke=Math.min(Math.max(Ar+at,0),j[1])|0,st<2?Se=this._field[ct].get(He,Ke):Se=(this.intensity.get(He,Ke)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(Se)||isNaN(Se)){$e=!0;break t}var Pe=Mt*Ut;or[st]+=Pe*Se}}}if(!$e)Ht.push(or[0],or[1],Jr[0],Jr[1],or[2]),Ct+=1;else{if(Ge>0){for(var Ee=0;Ee<5;++Ee)Ht.pop();Ct-=1}continue e}}}Yt.push(Ct)}this._contourOffsets[It]=jt,this._contourCounts[It]=Yt}var it=r.mallocFloat(Ht.length);for($=0;$<Ht.length;++$)it[$]=Ht[$];this._contourBuffer.update(it),r.freeFloat(it)}},I.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var U=0;U<3;++U)r.freeFloat(this._field[U].data)},I.highlight=function(U){var H;if(!U){this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],this.highlightLevel=[-1,-1,-1];return}for(H=0;H<3;++H)this.enableHighlight[H]?this.highlightLevel[H]=U.level[H]:this.highlightLevel[H]=-1;var q;for(this.snapToData?q=U.dataCoordinate:q=U.position,H=0;H<3;++H)q[H]-=this.objectOffset[H];if(!((!this.enableDynamic[0]||q[0]===this.dynamicLevel[0])&&(!this.enableDynamic[1]||q[1]===this.dynamicLevel[1])&&(!this.enableDynamic[2]||q[2]===this.dynamicLevel[2]))){for(var re=0,j=this.shape,$=r.mallocFloat(12*j[0]*j[1]),ie=0;ie<3;++ie){if(!this.enableDynamic[ie]){this.dynamicLevel[ie]=NaN,this._dynamicCounts[ie]=0;continue}this.dynamicLevel[ie]=q[ie];var oe=(ie+1)%3,ae=(ie+2)%3,se=this._field[ie],_e=this._field[oe],ue=this._field[ae],ye=g(se,q[ie]),xe=ye.cells,me=ye.positions;for(this._dynamicOffsets[ie]=re,H=0;H<xe.length;++H)for(var be=xe[H],ke=0;ke<2;++ke){var De=me[be[ke]],Ve=+De[0],Ae=Ve|0,Le=Math.min(Ae+1,j[0])|0,je=Ve-Ae,Ye=1-je,ze=+De[1],Ie=ze|0,We=Math.min(Ie+1,j[1])|0,pt=ze-Ie,Ft=1-pt,Qt=Ye*Ft,zt=Ye*pt,Et=je*Ft,Xt=je*pt,Nt=Qt*_e.get(Ae,Ie)+zt*_e.get(Ae,We)+Et*_e.get(Le,Ie)+Xt*_e.get(Le,We),Ct=Qt*ue.get(Ae,Ie)+zt*ue.get(Ae,We)+Et*ue.get(Le,Ie)+Xt*ue.get(Le,We);if(isNaN(Nt)||isNaN(Ct)){ke&&(re-=1);break}$[2*re+0]=Nt,$[2*re+1]=Ct,re+=1}this._dynamicCounts[ie]=re-this._dynamicOffsets[ie]}this._dynamicBuffer.update($.subarray(0,2*re)),r.freeFloat($)}};function K(U){var H=U.gl,q=u(H),re=_(H),j=M(H),$=p(H),ie=a(H),oe=i(H,[{buffer:ie,size:4,stride:w,offset:0},{buffer:ie,size:3,stride:w,offset:16},{buffer:ie,size:3,stride:w,offset:28}]),ae=a(H),se=i(H,[{buffer:ae,size:4,stride:20,offset:0},{buffer:ae,size:1,stride:20,offset:16}]),_e=a(H),ue=i(H,[{buffer:_e,size:2,type:H.FLOAT}]),ye=n(H,1,P,H.RGBA,H.UNSIGNED_BYTE);ye.minFilter=H.LINEAR,ye.magFilter=H.LINEAR;var xe=new F(H,[0,0],[[0,0,0],[0,0,0]],q,re,ie,oe,ye,j,$,ae,se,_e,ue,[0,0,0]),me={levels:[[],[],[]]};for(var be in U)me[be]=U[be];return me.colormap=me.colormap||"jet",xe.update(me),xe}},{"./lib/shaders":144,"binary-search-bounds":31,"bit-twiddle":32,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-texture2d":146,"gl-vao":150,ndarray:259,"ndarray-gradient":252,"ndarray-ops":254,"ndarray-pack":255,"surface-nets":302,"typedarray-pool":308}],146:[function(c,A,T){var e=c("ndarray"),a=c("ndarray-ops"),i=c("typedarray-pool");A.exports=p;var n=null,r=null,v=null;function s(w){n=[w.LINEAR,w.NEAREST_MIPMAP_LINEAR,w.LINEAR_MIPMAP_NEAREST,w.LINEAR_MIPMAP_NEAREST],r=[w.NEAREST,w.LINEAR,w.NEAREST_MIPMAP_NEAREST,w.NEAREST_MIPMAP_LINEAR,w.LINEAR_MIPMAP_NEAREST,w.LINEAR_MIPMAP_LINEAR],v=[w.REPEAT,w.CLAMP_TO_EDGE,w.MIRRORED_REPEAT]}function o(w){return typeof HTMLCanvasElement<"u"&&w instanceof HTMLCanvasElement||typeof HTMLImageElement<"u"&&w instanceof HTMLImageElement||typeof HTMLVideoElement<"u"&&w instanceof HTMLVideoElement||typeof ImageData<"u"&&w instanceof ImageData}var b=function(w,h){a.muls(w,h,255)};function g(w,h,L){var S=w.gl,E=S.getParameter(S.MAX_TEXTURE_SIZE);if(h<0||h>E||L<0||L>E)throw new Error("gl-texture2d: Invalid texture size");return w._shape=[h,L],w.bind(),S.texImage2D(S.TEXTURE_2D,0,w.format,h,L,0,w.format,w.type,null),w._mipLevels=[0],w}function d(w,h,L,S,E,P){this.gl=w,this.handle=h,this.format=E,this.type=P,this._shape=[L,S],this._mipLevels=[0],this._magFilter=w.NEAREST,this._minFilter=w.NEAREST,this._wrapS=w.CLAMP_TO_EDGE,this._wrapT=w.CLAMP_TO_EDGE,this._anisoSamples=1;var F=this,I=[this._wrapS,this._wrapT];Object.defineProperties(I,[{get:function(){return F._wrapS},set:function(R){return F.wrapS=R}},{get:function(){return F._wrapT},set:function(R){return F.wrapT=R}}]),this._wrapVector=I;var D=[this._shape[0],this._shape[1]];Object.defineProperties(D,[{get:function(){return F._shape[0]},set:function(R){return F.width=R}},{get:function(){return F._shape[1]},set:function(R){return F.height=R}}]),this._shapeVector=D}var f=d.prototype;Object.defineProperties(f,{minFilter:{get:function(){return this._minFilter},set:function(w){this.bind();var h=this.gl;if(this.type===h.FLOAT&&n.indexOf(w)>=0&&(h.getExtension("OES_texture_float_linear")||(w=h.NEAREST)),r.indexOf(w)<0)throw new Error("gl-texture2d: Unknown filter mode "+w);return h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,w),this._minFilter=w}},magFilter:{get:function(){return this._magFilter},set:function(w){this.bind();var h=this.gl;if(this.type===h.FLOAT&&n.indexOf(w)>=0&&(h.getExtension("OES_texture_float_linear")||(w=h.NEAREST)),r.indexOf(w)<0)throw new Error("gl-texture2d: Unknown filter mode "+w);return h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,w),this._magFilter=w}},mipSamples:{get:function(){return this._anisoSamples},set:function(w){var h=this._anisoSamples;if(this._anisoSamples=Math.max(w,1)|0,h!==this._anisoSamples){var L=this.gl.getExtension("EXT_texture_filter_anisotropic");L&&this.gl.texParameterf(this.gl.TEXTURE_2D,L.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(w){if(this.bind(),v.indexOf(w)<0)throw new Error("gl-texture2d: Unknown wrap mode "+w);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,w),this._wrapS=w}},wrapT:{get:function(){return this._wrapT},set:function(w){if(this.bind(),v.indexOf(w)<0)throw new Error("gl-texture2d: Unknown wrap mode "+w);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,w),this._wrapT=w}},wrap:{get:function(){return this._wrapVector},set:function(w){if(Array.isArray(w)||(w=[w,w]),w.length!==2)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var h=0;h<2;++h)if(v.indexOf(w[h])<0)throw new Error("gl-texture2d: Unknown wrap mode "+w);this._wrapS=w[0],this._wrapT=w[1];var L=this.gl;return this.bind(),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_WRAP_S,this._wrapS),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_WRAP_T,this._wrapT),w}},shape:{get:function(){return this._shapeVector},set:function(w){if(!Array.isArray(w))w=[w|0,w|0];else if(w.length!==2)throw new Error("gl-texture2d: Invalid texture shape");return g(this,w[0]|0,w[1]|0),[w[0]|0,w[1]|0]}},width:{get:function(){return this._shape[0]},set:function(w){return w=w|0,g(this,w,this._shape[1]),w}},height:{get:function(){return this._shape[1]},set:function(w){return w=w|0,g(this,this._shape[0],w),w}}}),f.bind=function(w){var h=this.gl;return w!==void 0&&h.activeTexture(h.TEXTURE0+(w|0)),h.bindTexture(h.TEXTURE_2D,this.handle),w!==void 0?w|0:h.getParameter(h.ACTIVE_TEXTURE)-h.TEXTURE0},f.dispose=function(){this.gl.deleteTexture(this.handle)},f.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var w=Math.min(this._shape[0],this._shape[1]),h=0;w>0;++h,w>>>=1)this._mipLevels.indexOf(h)<0&&this._mipLevels.push(h)},f.setPixels=function(w,h,L,S){var E=this.gl;this.bind(),Array.isArray(h)?(S=L,L=h[1]|0,h=h[0]|0):(h=h||0,L=L||0),S=S||0;var P=o(w)?w:w.raw;if(P){var F=this._mipLevels.indexOf(S)<0;F?(E.texImage2D(E.TEXTURE_2D,0,this.format,this.format,this.type,P),this._mipLevels.push(S)):E.texSubImage2D(E.TEXTURE_2D,S,h,L,this.format,this.type,P)}else if(w.shape&&w.stride&&w.data){if(w.shape.length<2||h+w.shape[1]>this._shape[1]>>>S||L+w.shape[0]>this._shape[0]>>>S||h<0||L<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");l(E,h,L,S,this.format,this.type,this._mipLevels,w)}else throw new Error("gl-texture2d: Unsupported data type")};function y(w,h){return w.length===3?h[2]===1&&h[1]===w[0]*w[2]&&h[0]===w[2]:h[0]===1&&h[1]===w[0]}function l(w,h,L,S,E,P,F,I){var D=I.dtype,R=I.shape.slice();if(R.length<2||R.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var N=0,z=0,G=y(R,I.stride.slice());if(D==="float32"?N=w.FLOAT:D==="float64"?(N=w.FLOAT,G=!1,D="float32"):D==="uint8"?N=w.UNSIGNED_BYTE:(N=w.UNSIGNED_BYTE,G=!1,D="uint8"),R.length===2)z=w.LUMINANCE,R=[R[0],R[1],1],I=e(I.data,R,[I.stride[0],I.stride[1],1],I.offset);else if(R.length===3){if(R[2]===1)z=w.ALPHA;else if(R[2]===2)z=w.LUMINANCE_ALPHA;else if(R[2]===3)z=w.RGB;else if(R[2]===4)z=w.RGBA;else throw new Error("gl-texture2d: Invalid shape for pixel coords");R[2]}else throw new Error("gl-texture2d: Invalid shape for texture");if((z===w.LUMINANCE||z===w.ALPHA)&&(E===w.LUMINANCE||E===w.ALPHA)&&(z=E),z!==E)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var Y=I.size,ee=F.indexOf(S)<0;if(ee&&F.push(S),N===P&&G)I.offset===0&&I.data.length===Y?ee?w.texImage2D(w.TEXTURE_2D,S,E,R[0],R[1],0,E,P,I.data):w.texSubImage2D(w.TEXTURE_2D,S,h,L,R[0],R[1],E,P,I.data):ee?w.texImage2D(w.TEXTURE_2D,S,E,R[0],R[1],0,E,P,I.data.subarray(I.offset,I.offset+Y)):w.texSubImage2D(w.TEXTURE_2D,S,h,L,R[0],R[1],E,P,I.data.subarray(I.offset,I.offset+Y));else{var Z;P===w.FLOAT?Z=i.mallocFloat32(Y):Z=i.mallocUint8(Y);var X=e(Z,R,[R[2],R[2]*R[0],1]);N===w.FLOAT&&P===w.UNSIGNED_BYTE?b(X,I):a.assign(X,I),ee?w.texImage2D(w.TEXTURE_2D,S,E,R[0],R[1],0,E,P,Z.subarray(0,Y)):w.texSubImage2D(w.TEXTURE_2D,S,h,L,R[0],R[1],E,P,Z.subarray(0,Y)),P===w.FLOAT?i.freeFloat32(Z):i.freeUint8(Z)}}function x(w){var h=w.createTexture();return w.bindTexture(w.TEXTURE_2D,h),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MIN_FILTER,w.NEAREST),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MAG_FILTER,w.NEAREST),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_S,w.CLAMP_TO_EDGE),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_T,w.CLAMP_TO_EDGE),h}function u(w,h,L,S,E){var P=w.getParameter(w.MAX_TEXTURE_SIZE);if(h<0||h>P||L<0||L>P)throw new Error("gl-texture2d: Invalid texture shape");if(E===w.FLOAT&&!w.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var F=x(w);return w.texImage2D(w.TEXTURE_2D,0,S,h,L,0,S,E,null),new d(w,F,h,L,S,E)}function M(w,h,L,S,E,P){var F=x(w);return w.texImage2D(w.TEXTURE_2D,0,E,E,P,h),new d(w,F,L,S,E,P)}function _(w,h){var L=h.dtype,S=h.shape.slice(),E=w.getParameter(w.MAX_TEXTURE_SIZE);if(S[0]<0||S[0]>E||S[1]<0||S[1]>E)throw new Error("gl-texture2d: Invalid texture size");var P=y(S,h.stride.slice()),F=0;L==="float32"?F=w.FLOAT:L==="float64"?(F=w.FLOAT,P=!1,L="float32"):L==="uint8"?F=w.UNSIGNED_BYTE:(F=w.UNSIGNED_BYTE,P=!1,L="uint8");var I=0;if(S.length===2)I=w.LUMINANCE,S=[S[0],S[1],1],h=e(h.data,S,[h.stride[0],h.stride[1],1],h.offset);else if(S.length===3)if(S[2]===1)I=w.ALPHA;else if(S[2]===2)I=w.LUMINANCE_ALPHA;else if(S[2]===3)I=w.RGB;else if(S[2]===4)I=w.RGBA;else throw new Error("gl-texture2d: Invalid shape for pixel coords");else throw new Error("gl-texture2d: Invalid shape for texture");F===w.FLOAT&&!w.getExtension("OES_texture_float")&&(F=w.UNSIGNED_BYTE,P=!1);var D,R,N=h.size;if(P)h.offset===0&&h.data.length===N?D=h.data:D=h.data.subarray(h.offset,h.offset+N);else{var z=[S[2],S[2]*S[0],1];R=i.malloc(N,L);var G=e(R,S,z,0);(L==="float32"||L==="float64")&&F===w.UNSIGNED_BYTE?b(G,h):a.assign(G,h),D=R.subarray(0,N)}var Y=x(w);return w.texImage2D(w.TEXTURE_2D,0,I,S[0],S[1],0,I,F,D),P||i.free(R),new d(w,Y,S[0],S[1],I,F)}function p(w){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(n||s(w),typeof arguments[1]=="number")return u(w,arguments[1],arguments[2],arguments[3]||w.RGBA,arguments[4]||w.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return u(w,arguments[1][0]|0,arguments[1][1]|0,arguments[2]||w.RGBA,arguments[3]||w.UNSIGNED_BYTE);if(typeof arguments[1]=="object"){var h=arguments[1],L=o(h)?h:h.raw;if(L)return M(w,L,h.width|0,h.height|0,arguments[2]||w.RGBA,arguments[3]||w.UNSIGNED_BYTE);if(h.shape&&h.data&&h.stride)return _(w,h)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")}},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],147:[function(c,A,T){function e(a,i,n){i?i.bind():a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,null);var r=a.getParameter(a.MAX_VERTEX_ATTRIBS)|0;if(n){if(n.length>r)throw new Error("gl-vao: Too many vertex attributes");for(var v=0;v<n.length;++v){var s=n[v];if(s.buffer){var o=s.buffer,b=s.size||4,g=s.type||a.FLOAT,d=!!s.normalized,f=s.stride||0,y=s.offset||0;o.bind(),a.enableVertexAttribArray(v),a.vertexAttribPointer(v,b,g,d,f,y)}else{if(typeof s=="number")a.vertexAttrib1f(v,s);else if(s.length===1)a.vertexAttrib1f(v,s[0]);else if(s.length===2)a.vertexAttrib2f(v,s[0],s[1]);else if(s.length===3)a.vertexAttrib3f(v,s[0],s[1],s[2]);else if(s.length===4)a.vertexAttrib4f(v,s[0],s[1],s[2],s[3]);else throw new Error("gl-vao: Invalid vertex attribute");a.disableVertexAttribArray(v)}}for(;v<r;++v)a.disableVertexAttribArray(v)}else{a.bindBuffer(a.ARRAY_BUFFER,null);for(var v=0;v<r;++v)a.disableVertexAttribArray(v)}}A.exports=e},{}],148:[function(c,A,T){var e=c("./do-bind.js");function a(n){this.gl=n,this._elements=null,this._attributes=null,this._elementsType=n.UNSIGNED_SHORT}a.prototype.bind=function(){e(this.gl,this._elements,this._attributes)},a.prototype.update=function(n,r,v){this._elements=r,this._attributes=n,this._elementsType=v||this.gl.UNSIGNED_SHORT},a.prototype.dispose=function(){},a.prototype.unbind=function(){},a.prototype.draw=function(n,r,v){v=v||0;var s=this.gl;this._elements?s.drawElements(n,r,this._elementsType,v):s.drawArrays(n,v,r)};function i(n){return new a(n)}A.exports=i},{"./do-bind.js":147}],149:[function(c,A,T){var e=c("./do-bind.js");function a(r,v,s,o,b,g){this.location=r,this.dimension=v,this.a=s,this.b=o,this.c=b,this.d=g}a.prototype.bind=function(r){switch(this.dimension){case 1:r.vertexAttrib1f(this.location,this.a);break;case 2:r.vertexAttrib2f(this.location,this.a,this.b);break;case 3:r.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:r.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d);break}};function i(r,v,s){this.gl=r,this._ext=v,this.handle=s,this._attribs=[],this._useElements=!1,this._elementsType=r.UNSIGNED_SHORT}i.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var r=0;r<this._attribs.length;++r)this._attribs[r].bind(this.gl)},i.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},i.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},i.prototype.update=function(r,v,s){if(this.bind(),e(this.gl,v,r),this.unbind(),this._attribs.length=0,r)for(var o=0;o<r.length;++o){var b=r[o];typeof b=="number"?this._attribs.push(new a(o,1,b)):Array.isArray(b)&&this._attribs.push(new a(o,b.length,b[0],b[1],b[2],b[3]))}this._useElements=!!v,this._elementsType=s||this.gl.UNSIGNED_SHORT},i.prototype.draw=function(r,v,s){s=s||0;var o=this.gl;this._useElements?o.drawElements(r,v,this._elementsType,s):o.drawArrays(r,s,v)};function n(r,v){return new i(r,v,v.createVertexArrayOES())}A.exports=n},{"./do-bind.js":147}],150:[function(c,A,T){var e=c("./lib/vao-native.js"),a=c("./lib/vao-emulated.js");function i(r){this.bindVertexArrayOES=r.bindVertexArray.bind(r),this.createVertexArrayOES=r.createVertexArray.bind(r),this.deleteVertexArrayOES=r.deleteVertexArray.bind(r)}function n(r,v,s,o){var b=r.createVertexArray?new i(r):r.getExtension("OES_vertex_array_object"),g;return b?g=e(r,b):g=a(r),g.update(v,s,o),g}A.exports=n},{"./lib/vao-emulated.js":148,"./lib/vao-native.js":149}],151:[function(c,A,T){A.exports=e;function e(a,i,n){return a[0]=i[0]+n[0],a[1]=i[1]+n[1],a[2]=i[2]+n[2],a}},{}],152:[function(c,A,T){A.exports=n;var e=c("./fromValues"),a=c("./normalize"),i=c("./dot");function n(r,v){var s=e(r[0],r[1],r[2]),o=e(v[0],v[1],v[2]);a(s,s),a(o,o);var b=i(s,o);return b>1?0:Math.acos(b)}},{"./dot":162,"./fromValues":168,"./normalize":179}],153:[function(c,A,T){A.exports=e;function e(a,i){return a[0]=Math.ceil(i[0]),a[1]=Math.ceil(i[1]),a[2]=Math.ceil(i[2]),a}},{}],154:[function(c,A,T){A.exports=e;function e(a){var i=new Float32Array(3);return i[0]=a[0],i[1]=a[1],i[2]=a[2],i}},{}],155:[function(c,A,T){A.exports=e;function e(a,i){return a[0]=i[0],a[1]=i[1],a[2]=i[2],a}},{}],156:[function(c,A,T){A.exports=e;function e(){var a=new Float32Array(3);return a[0]=0,a[1]=0,a[2]=0,a}},{}],157:[function(c,A,T){A.exports=e;function e(a,i,n){var r=i[0],v=i[1],s=i[2],o=n[0],b=n[1],g=n[2];return a[0]=v*g-s*b,a[1]=s*o-r*g,a[2]=r*b-v*o,a}},{}],158:[function(c,A,T){A.exports=c("./distance")},{"./distance":159}],159:[function(c,A,T){A.exports=e;function e(a,i){var n=i[0]-a[0],r=i[1]-a[1],v=i[2]-a[2];return Math.sqrt(n*n+r*r+v*v)}},{}],160:[function(c,A,T){A.exports=c("./divide")},{"./divide":161}],161:[function(c,A,T){A.exports=e;function e(a,i,n){return a[0]=i[0]/n[0],a[1]=i[1]/n[1],a[2]=i[2]/n[2],a}},{}],162:[function(c,A,T){A.exports=e;function e(a,i){return a[0]*i[0]+a[1]*i[1]+a[2]*i[2]}},{}],163:[function(c,A,T){A.exports=1e-6},{}],164:[function(c,A,T){A.exports=a;var e=c("./epsilon");function a(i,n){var r=i[0],v=i[1],s=i[2],o=n[0],b=n[1],g=n[2];return Math.abs(r-o)<=e*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(v-b)<=e*Math.max(1,Math.abs(v),Math.abs(b))&&Math.abs(s-g)<=e*Math.max(1,Math.abs(s),Math.abs(g))}},{"./epsilon":163}],165:[function(c,A,T){A.exports=e;function e(a,i){return a[0]===i[0]&&a[1]===i[1]&&a[2]===i[2]}},{}],166:[function(c,A,T){A.exports=e;function e(a,i){return a[0]=Math.floor(i[0]),a[1]=Math.floor(i[1]),a[2]=Math.floor(i[2]),a}},{}],167:[function(c,A,T){A.exports=a;var e=c("./create")();function a(i,n,r,v,s,o){var b,g;for(n||(n=3),r||(r=0),v?g=Math.min(v*n+r,i.length):g=i.length,b=r;b<g;b+=n)e[0]=i[b],e[1]=i[b+1],e[2]=i[b+2],s(e,e,o),i[b]=e[0],i[b+1]=e[1],i[b+2]=e[2];return i}},{"./create":156}],168:[function(c,A,T){A.exports=e;function e(a,i,n){var r=new Float32Array(3);return r[0]=a,r[1]=i,r[2]=n,r}},{}],169:[function(c,A,T){A.exports={EPSILON:c("./epsilon"),create:c("./create"),clone:c("./clone"),angle:c("./angle"),fromValues:c("./fromValues"),copy:c("./copy"),set:c("./set"),equals:c("./equals"),exactEquals:c("./exactEquals"),add:c("./add"),subtract:c("./subtract"),sub:c("./sub"),multiply:c("./multiply"),mul:c("./mul"),divide:c("./divide"),div:c("./div"),min:c("./min"),max:c("./max"),floor:c("./floor"),ceil:c("./ceil"),round:c("./round"),scale:c("./scale"),scaleAndAdd:c("./scaleAndAdd"),distance:c("./distance"),dist:c("./dist"),squaredDistance:c("./squaredDistance"),sqrDist:c("./sqrDist"),length:c("./length"),len:c("./len"),squaredLength:c("./squaredLength"),sqrLen:c("./sqrLen"),negate:c("./negate"),inverse:c("./inverse"),normalize:c("./normalize"),dot:c("./dot"),cross:c("./cross"),lerp:c("./lerp"),random:c("./random"),transformMat4:c("./transformMat4"),transformMat3:c("./transformMat3"),transformQuat:c("./transformQuat"),rotateX:c("./rotateX"),rotateY:c("./rotateY"),rotateZ:c("./rotateZ"),forEach:c("./forEach")}},{"./add":151,"./angle":152,"./ceil":153,"./clone":154,"./copy":155,"./create":156,"./cross":157,"./dist":158,"./distance":159,"./div":160,"./divide":161,"./dot":162,"./epsilon":163,"./equals":164,"./exactEquals":165,"./floor":166,"./forEach":167,"./fromValues":168,"./inverse":170,"./len":171,"./length":172,"./lerp":173,"./max":174,"./min":175,"./mul":176,"./multiply":177,"./negate":178,"./normalize":179,"./random":180,"./rotateX":181,"./rotateY":182,"./rotateZ":183,"./round":184,"./scale":185,"./scaleAndAdd":186,"./set":187,"./sqrDist":188,"./sqrLen":189,"./squaredDistance":190,"./squaredLength":191,"./sub":192,"./subtract":193,"./transformMat3":194,"./transformMat4":195,"./transformQuat":196}],170:[function(c,A,T){A.exports=e;function e(a,i){return a[0]=1/i[0],a[1]=1/i[1],a[2]=1/i[2],a}},{}],171:[function(c,A,T){A.exports=c("./length")},{"./length":172}],172:[function(c,A,T){A.exports=e;function e(a){var i=a[0],n=a[1],r=a[2];return Math.sqrt(i*i+n*n+r*r)}},{}],173:[function(c,A,T){A.exports=e;function e(a,i,n,r){var v=i[0],s=i[1],o=i[2];return a[0]=v+r*(n[0]-v),a[1]=s+r*(n[1]-s),a[2]=o+r*(n[2]-o),a}},{}],174:[function(c,A,T){A.exports=e;function e(a,i,n){return a[0]=Math.max(i[0],n[0]),a[1]=Math.max(i[1],n[1]),a[2]=Math.max(i[2],n[2]),a}},{}],175:[function(c,A,T){A.exports=e;function e(a,i,n){return a[0]=Math.min(i[0],n[0]),a[1]=Math.min(i[1],n[1]),a[2]=Math.min(i[2],n[2]),a}},{}],176:[function(c,A,T){A.exports=c("./multiply")},{"./multiply":177}],177:[function(c,A,T){A.exports=e;function e(a,i,n){return a[0]=i[0]*n[0],a[1]=i[1]*n[1],a[2]=i[2]*n[2],a}},{}],178:[function(c,A,T){A.exports=e;function e(a,i){return a[0]=-i[0],a[1]=-i[1],a[2]=-i[2],a}},{}],179:[function(c,A,T){A.exports=e;function e(a,i){var n=i[0],r=i[1],v=i[2],s=n*n+r*r+v*v;return s>0&&(s=1/Math.sqrt(s),a[0]=i[0]*s,a[1]=i[1]*s,a[2]=i[2]*s),a}},{}],180:[function(c,A,T){A.exports=e;function e(a,i){i=i||1;var n=Math.random()*2*Math.PI,r=Math.random()*2-1,v=Math.sqrt(1-r*r)*i;return a[0]=Math.cos(n)*v,a[1]=Math.sin(n)*v,a[2]=r*i,a}},{}],181:[function(c,A,T){A.exports=e;function e(a,i,n,r){var v=n[1],s=n[2],o=i[1]-v,b=i[2]-s,g=Math.sin(r),d=Math.cos(r);return a[0]=i[0],a[1]=v+o*d-b*g,a[2]=s+o*g+b*d,a}},{}],182:[function(c,A,T){A.exports=e;function e(a,i,n,r){var v=n[0],s=n[2],o=i[0]-v,b=i[2]-s,g=Math.sin(r),d=Math.cos(r);return a[0]=v+b*g+o*d,a[1]=i[1],a[2]=s+b*d-o*g,a}},{}],183:[function(c,A,T){A.exports=e;function e(a,i,n,r){var v=n[0],s=n[1],o=i[0]-v,b=i[1]-s,g=Math.sin(r),d=Math.cos(r);return a[0]=v+o*d-b*g,a[1]=s+o*g+b*d,a[2]=i[2],a}},{}],184:[function(c,A,T){A.exports=e;function e(a,i){return a[0]=Math.round(i[0]),a[1]=Math.round(i[1]),a[2]=Math.round(i[2]),a}},{}],185:[function(c,A,T){A.exports=e;function e(a,i,n){return a[0]=i[0]*n,a[1]=i[1]*n,a[2]=i[2]*n,a}},{}],186:[function(c,A,T){A.exports=e;function e(a,i,n,r){return a[0]=i[0]+n[0]*r,a[1]=i[1]+n[1]*r,a[2]=i[2]+n[2]*r,a}},{}],187:[function(c,A,T){A.exports=e;function e(a,i,n,r){return a[0]=i,a[1]=n,a[2]=r,a}},{}],188:[function(c,A,T){A.exports=c("./squaredDistance")},{"./squaredDistance":190}],189:[function(c,A,T){A.exports=c("./squaredLength")},{"./squaredLength":191}],190:[function(c,A,T){A.exports=e;function e(a,i){var n=i[0]-a[0],r=i[1]-a[1],v=i[2]-a[2];return n*n+r*r+v*v}},{}],191:[function(c,A,T){A.exports=e;function e(a){var i=a[0],n=a[1],r=a[2];return i*i+n*n+r*r}},{}],192:[function(c,A,T){A.exports=c("./subtract")},{"./subtract":193}],193:[function(c,A,T){A.exports=e;function e(a,i,n){return a[0]=i[0]-n[0],a[1]=i[1]-n[1],a[2]=i[2]-n[2],a}},{}],194:[function(c,A,T){A.exports=e;function e(a,i,n){var r=i[0],v=i[1],s=i[2];return a[0]=r*n[0]+v*n[3]+s*n[6],a[1]=r*n[1]+v*n[4]+s*n[7],a[2]=r*n[2]+v*n[5]+s*n[8],a}},{}],195:[function(c,A,T){A.exports=e;function e(a,i,n){var r=i[0],v=i[1],s=i[2],o=n[3]*r+n[7]*v+n[11]*s+n[15];return o=o||1,a[0]=(n[0]*r+n[4]*v+n[8]*s+n[12])/o,a[1]=(n[1]*r+n[5]*v+n[9]*s+n[13])/o,a[2]=(n[2]*r+n[6]*v+n[10]*s+n[14])/o,a}},{}],196:[function(c,A,T){A.exports=e;function e(a,i,n){var r=i[0],v=i[1],s=i[2],o=n[0],b=n[1],g=n[2],d=n[3],f=d*r+b*s-g*v,y=d*v+g*r-o*s,l=d*s+o*v-b*r,x=-o*r-b*v-g*s;return a[0]=f*d+x*-o+y*-g-l*-b,a[1]=y*d+x*-b+l*-o-f*-g,a[2]=l*d+x*-g+f*-b-y*-o,a}},{}],197:[function(c,A,T){A.exports=e;function e(a,i,n){return a[0]=i[0]+n[0],a[1]=i[1]+n[1],a[2]=i[2]+n[2],a[3]=i[3]+n[3],a}},{}],198:[function(c,A,T){A.exports=e;function e(a){var i=new Float32Array(4);return i[0]=a[0],i[1]=a[1],i[2]=a[2],i[3]=a[3],i}},{}],199:[function(c,A,T){A.exports=e;function e(a,i){return a[0]=i[0],a[1]=i[1],a[2]=i[2],a[3]=i[3],a}},{}],200:[function(c,A,T){A.exports=e;function e(){var a=new Float32Array(4);return a[0]=0,a[1]=0,a[2]=0,a[3]=0,a}},{}],201:[function(c,A,T){A.exports=e;function e(a,i){var n=i[0]-a[0],r=i[1]-a[1],v=i[2]-a[2],s=i[3]-a[3];return Math.sqrt(n*n+r*r+v*v+s*s)}},{}],202:[function(c,A,T){A.exports=e;function e(a,i,n){return a[0]=i[0]/n[0],a[1]=i[1]/n[1],a[2]=i[2]/n[2],a[3]=i[3]/n[3],a}},{}],203:[function(c,A,T){A.exports=e;function e(a,i){return a[0]*i[0]+a[1]*i[1]+a[2]*i[2]+a[3]*i[3]}},{}],204:[function(c,A,T){A.exports=e;function e(a,i,n,r){var v=new Float32Array(4);return v[0]=a,v[1]=i,v[2]=n,v[3]=r,v}},{}],205:[function(c,A,T){A.exports={create:c("./create"),clone:c("./clone"),fromValues:c("./fromValues"),copy:c("./copy"),set:c("./set"),add:c("./add"),subtract:c("./subtract"),multiply:c("./multiply"),divide:c("./divide"),min:c("./min"),max:c("./max"),scale:c("./scale"),scaleAndAdd:c("./scaleAndAdd"),distance:c("./distance"),squaredDistance:c("./squaredDistance"),length:c("./length"),squaredLength:c("./squaredLength"),negate:c("./negate"),inverse:c("./inverse"),normalize:c("./normalize"),dot:c("./dot"),lerp:c("./lerp"),random:c("./random"),transformMat4:c("./transformMat4"),transformQuat:c("./transformQuat")}},{"./add":197,"./clone":198,"./copy":199,"./create":200,"./distance":201,"./divide":202,"./dot":203,"./fromValues":204,"./inverse":206,"./length":207,"./lerp":208,"./max":209,"./min":210,"./multiply":211,"./negate":212,"./normalize":213,"./random":214,"./scale":215,"./scaleAndAdd":216,"./set":217,"./squaredDistance":218,"./squaredLength":219,"./subtract":220,"./transformMat4":221,"./transformQuat":222}],206:[function(c,A,T){A.exports=e;function e(a,i){return a[0]=1/i[0],a[1]=1/i[1],a[2]=1/i[2],a[3]=1/i[3],a}},{}],207:[function(c,A,T){A.exports=e;function e(a){var i=a[0],n=a[1],r=a[2],v=a[3];return Math.sqrt(i*i+n*n+r*r+v*v)}},{}],208:[function(c,A,T){A.exports=e;function e(a,i,n,r){var v=i[0],s=i[1],o=i[2],b=i[3];return a[0]=v+r*(n[0]-v),a[1]=s+r*(n[1]-s),a[2]=o+r*(n[2]-o),a[3]=b+r*(n[3]-b),a}},{}],209:[function(c,A,T){A.exports=e;function e(a,i,n){return a[0]=Math.max(i[0],n[0]),a[1]=Math.max(i[1],n[1]),a[2]=Math.max(i[2],n[2]),a[3]=Math.max(i[3],n[3]),a}},{}],210:[function(c,A,T){A.exports=e;function e(a,i,n){return a[0]=Math.min(i[0],n[0]),a[1]=Math.min(i[1],n[1]),a[2]=Math.min(i[2],n[2]),a[3]=Math.min(i[3],n[3]),a}},{}],211:[function(c,A,T){A.exports=e;function e(a,i,n){return a[0]=i[0]*n[0],a[1]=i[1]*n[1],a[2]=i[2]*n[2],a[3]=i[3]*n[3],a}},{}],212:[function(c,A,T){A.exports=e;function e(a,i){return a[0]=-i[0],a[1]=-i[1],a[2]=-i[2],a[3]=-i[3],a}},{}],213:[function(c,A,T){A.exports=e;function e(a,i){var n=i[0],r=i[1],v=i[2],s=i[3],o=n*n+r*r+v*v+s*s;return o>0&&(o=1/Math.sqrt(o),a[0]=n*o,a[1]=r*o,a[2]=v*o,a[3]=s*o),a}},{}],214:[function(c,A,T){var e=c("./normalize"),a=c("./scale");A.exports=i;function i(n,r){return r=r||1,n[0]=Math.random(),n[1]=Math.random(),n[2]=Math.random(),n[3]=Math.random(),e(n,n),a(n,n,r),n}},{"./normalize":213,"./scale":215}],215:[function(c,A,T){A.exports=e;function e(a,i,n){return a[0]=i[0]*n,a[1]=i[1]*n,a[2]=i[2]*n,a[3]=i[3]*n,a}},{}],216:[function(c,A,T){A.exports=e;function e(a,i,n,r){return a[0]=i[0]+n[0]*r,a[1]=i[1]+n[1]*r,a[2]=i[2]+n[2]*r,a[3]=i[3]+n[3]*r,a}},{}],217:[function(c,A,T){A.exports=e;function e(a,i,n,r,v){return a[0]=i,a[1]=n,a[2]=r,a[3]=v,a}},{}],218:[function(c,A,T){A.exports=e;function e(a,i){var n=i[0]-a[0],r=i[1]-a[1],v=i[2]-a[2],s=i[3]-a[3];return n*n+r*r+v*v+s*s}},{}],219:[function(c,A,T){A.exports=e;function e(a){var i=a[0],n=a[1],r=a[2],v=a[3];return i*i+n*n+r*r+v*v}},{}],220:[function(c,A,T){A.exports=e;function e(a,i,n){return a[0]=i[0]-n[0],a[1]=i[1]-n[1],a[2]=i[2]-n[2],a[3]=i[3]-n[3],a}},{}],221:[function(c,A,T){A.exports=e;function e(a,i,n){var r=i[0],v=i[1],s=i[2],o=i[3];return a[0]=n[0]*r+n[4]*v+n[8]*s+n[12]*o,a[1]=n[1]*r+n[5]*v+n[9]*s+n[13]*o,a[2]=n[2]*r+n[6]*v+n[10]*s+n[14]*o,a[3]=n[3]*r+n[7]*v+n[11]*s+n[15]*o,a}},{}],222:[function(c,A,T){A.exports=e;function e(a,i,n){var r=i[0],v=i[1],s=i[2],o=n[0],b=n[1],g=n[2],d=n[3],f=d*r+b*s-g*v,y=d*v+g*r-o*s,l=d*s+o*v-b*r,x=-o*r-b*v-g*s;return a[0]=f*d+x*-o+y*-g-l*-b,a[1]=y*d+x*-b+l*-o-f*-g,a[2]=l*d+x*-g+f*-b-y*-o,a[3]=i[3],a}},{}],223:[function(c,A,T){var e=c("glsl-tokenizer"),a=c("atob-lite");A.exports=i;function i(n){for(var r=Array.isArray(n)?n:e(n),v=0;v<r.length;v++){var s=r[v];if(s.type==="preprocessor"){var o=s.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(!!o&&!!o[2]){var b=o[1],g=o[2];return(b?a(g):g).trim()}}}}},{"atob-lite":13,"glsl-tokenizer":230}],224:[function(c,A,T){A.exports=h;var e=c("./lib/literals"),a=c("./lib/operators"),i=c("./lib/builtins"),n=c("./lib/literals-300es"),r=c("./lib/builtins-300es"),v=999,s=9999,o=0,b=1,g=2,d=3,f=4,y=5,l=6,x=7,u=8,M=9,_=10,p=11,w=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];function h(L){var S=0,E=0,P=v,F,I,D=[],R=[],N=1,z=0,G=0,Y=!1,ee=!1,Z="",X;L=L||{};var ne=i,ce=e;L.version==="300 es"&&(ne=r,ce=n);for(var Q={},K={},S=0;S<ne.length;S++)Q[ne[S]]=!0;for(var S=0;S<ce.length;S++)K[ce[S]]=!0;return function(me){return R=[],me!==null?H(me):q()};function U(me){me.length&&R.push({type:w[P],data:me,position:G,line:N,column:z})}function H(me){S=0,me.toString&&(me=me.toString()),Z+=me.replace(/\r\n/g,`
`),X=Z.length;for(var be;F=Z[S],S<X;){switch(be=S,P){case o:S=oe();break;case b:S=ie();break;case g:S=$();break;case d:S=ae();break;case f:S=ue();break;case p:S=_e();break;case y:S=ye();break;case s:S=xe();break;case M:S=j();break;case v:S=re();break}if(be!==S)switch(Z[be]){case`
`:z=0,++N;break;default:++z;break}}return E+=S,Z=Z.slice(S),R}function q(me){return D.length&&U(D.join("")),P=_,U("(eof)"),R}function re(){return D=D.length?[]:D,I==="/"&&F==="*"?(G=E+S-1,P=o,I=F,S+1):I==="/"&&F==="/"?(G=E+S-1,P=b,I=F,S+1):F==="#"?(P=g,G=E+S,S):/\s/.test(F)?(P=M,G=E+S,S):(Y=/\d/.test(F),ee=/[^\w_]/.test(F),G=E+S,P=Y?f:ee?d:s,S)}function j(){return/[^\s]/g.test(F)?(U(D.join("")),P=v,S):(D.push(F),I=F,S+1)}function $(){return(F==="\r"||F===`
`)&&I!=="\\"?(U(D.join("")),P=v,S):(D.push(F),I=F,S+1)}function ie(){return $()}function oe(){return F==="/"&&I==="*"?(D.push(F),U(D.join("")),P=v,S+1):(D.push(F),I=F,S+1)}function ae(){if(I==="."&&/\d/.test(F))return P=y,S;if(I==="/"&&F==="*")return P=o,S;if(I==="/"&&F==="/")return P=b,S;if(F==="."&&D.length){for(;se(D););return P=y,S}if(F===";"||F===")"||F==="("){if(D.length)for(;se(D););return U(F),P=v,S+1}var me=D.length===2&&F!=="=";if(/[\w_\d\s]/.test(F)||me){for(;se(D););return P=v,S}return D.push(F),I=F,S+1}function se(me){var be=0,ke,De;do{if(ke=a.indexOf(me.slice(0,me.length+be).join("")),De=a[ke],ke===-1){if(be--+me.length>0)continue;De=me.slice(0,1).join("")}return U(De),G+=De.length,D=D.slice(De.length),D.length}while(1)}function _e(){return/[^a-fA-F0-9]/.test(F)?(U(D.join("")),P=v,S):(D.push(F),I=F,S+1)}function ue(){return F==="."||/[eE]/.test(F)?(D.push(F),P=y,I=F,S+1):F==="x"&&D.length===1&&D[0]==="0"?(P=p,D.push(F),I=F,S+1):/[^\d]/.test(F)?(U(D.join("")),P=v,S):(D.push(F),I=F,S+1)}function ye(){return F==="f"&&(D.push(F),I=F,S+=1),/[eE]/.test(F)||(F==="-"||F==="+")&&/[eE]/.test(I)?(D.push(F),I=F,S+1):/[^\d]/.test(F)?(U(D.join("")),P=v,S):(D.push(F),I=F,S+1)}function xe(){if(/[^\d\w_]/.test(F)){var me=D.join("");return K[me]?P=u:Q[me]?P=x:P=l,U(D.join("")),P=v,S}return D.push(F),I=F,S+1}}},{"./lib/builtins":226,"./lib/builtins-300es":225,"./lib/literals":228,"./lib/literals-300es":227,"./lib/operators":229}],225:[function(c,A,T){var e=c("./builtins");e=e.slice().filter(function(a){return!/^(gl\_|texture)/.test(a)}),A.exports=e.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},{"./builtins":226}],226:[function(c,A,T){A.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},{}],227:[function(c,A,T){var e=c("./literals");A.exports=e.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},{"./literals":228}],228:[function(c,A,T){A.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},{}],229:[function(c,A,T){A.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},{}],230:[function(c,A,T){var e=c("./index");A.exports=a;function a(i,n){var r=e(n),v=[];return v=v.concat(r(i)),v=v.concat(r(null)),v}},{"./index":224}],231:[function(c,A,T){A.exports=function(e){typeof e=="string"&&(e=[e]);for(var a=[].slice.call(arguments,1),i=[],n=0;n<e.length-1;n++)i.push(e[n],a[n]||"");return i.push(e[n]),i.join("")}},{}],232:[function(c,A,T){var e=c("is-browser");function a(){var i=!1;try{var n=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("test",null,n),window.removeEventListener("test",null,n)}catch{i=!1}return i}A.exports=e&&a()},{"is-browser":236}],233:[function(c,A,T){A.exports=d;var e=c("robust-orientation"),a=c("simplicial-complex").compareCells;function i(f,y,l){this.vertices=f,this.adjacent=y,this.boundary=l,this.lastVisited=-1}i.prototype.flip=function(){var f=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=f;var y=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=y};function n(f,y,l){this.vertices=f,this.cell=y,this.index=l}function r(f,y){return a(f.vertices,y.vertices)}function v(f){return function(){var y=this.tuple;return f.apply(this,y)}}function s(f){var y=e[f+1];return y||(y=e),v(y)}var o=[];function b(f,y,l){this.dimension=f,this.vertices=y,this.simplices=l,this.interior=l.filter(function(M){return!M.boundary}),this.tuple=new Array(f+1);for(var x=0;x<=f;++x)this.tuple[x]=this.vertices[x];var u=o[f];u||(u=o[f]=s(f)),this.orient=u}var g=b.prototype;g.handleBoundaryDegeneracy=function(f,y){var l=this.dimension,x=this.vertices.length-1,u=this.tuple,M=this.vertices,_=[f];for(f.lastVisited=-x;_.length>0;){f=_.pop();for(var p=f.adjacent,w=0;w<=l;++w){var h=p[w];if(!(!h.boundary||h.lastVisited<=-x)){for(var L=h.vertices,S=0;S<=l;++S){var E=L[S];E<0?u[S]=y:u[S]=M[E]}var P=this.orient();if(P>0)return h;h.lastVisited=-x,P===0&&_.push(h)}}}return null},g.walk=function(f,y){var l=this.vertices.length-1,x=this.dimension,u=this.vertices,M=this.tuple,_=y?this.interior.length*Math.random()|0:this.interior.length-1,p=this.interior[_];e:for(;!p.boundary;){for(var w=p.vertices,h=p.adjacent,L=0;L<=x;++L)M[L]=u[w[L]];p.lastVisited=l;for(var L=0;L<=x;++L){var S=h[L];if(!(S.lastVisited>=l)){var E=M[L];M[L]=f;var P=this.orient();if(M[L]=E,P<0){p=S;continue e}else S.boundary?S.lastVisited=-l:S.lastVisited=l}}return}return p},g.addPeaks=function(f,y){var l=this.vertices.length-1,x=this.dimension,u=this.vertices,M=this.tuple,_=this.interior,p=this.simplices,w=[y];y.lastVisited=l,y.vertices[y.vertices.indexOf(-1)]=l,y.boundary=!1,_.push(y);for(var h=[];w.length>0;){var y=w.pop(),L=y.vertices,S=y.adjacent,E=L.indexOf(l);if(!(E<0)){for(var P=0;P<=x;++P)if(P!==E){var F=S[P];if(!(!F.boundary||F.lastVisited>=l)){var I=F.vertices;if(F.lastVisited!==-l){for(var D=0,R=0;R<=x;++R)I[R]<0?(D=R,M[R]=f):M[R]=u[I[R]];var N=this.orient();if(N>0){I[D]=l,F.boundary=!1,_.push(F),w.push(F),F.lastVisited=l;continue}else F.lastVisited=-l}var z=F.adjacent,G=L.slice(),Y=S.slice(),ee=new i(G,Y,!0);p.push(ee);var Z=z.indexOf(y);if(!(Z<0)){z[Z]=ee,Y[E]=F,G[P]=-1,Y[P]=y,S[P]=ee,ee.flip();for(var R=0;R<=x;++R){var X=G[R];if(!(X<0||X===l)){for(var ne=new Array(x-1),ce=0,Q=0;Q<=x;++Q){var K=G[Q];K<0||Q===R||(ne[ce++]=K)}h.push(new n(ne,ee,R))}}}}}}}h.sort(r);for(var P=0;P+1<h.length;P+=2){var U=h[P],H=h[P+1],q=U.index,re=H.index;q<0||re<0||(U.cell.adjacent[U.index]=H.cell,H.cell.adjacent[H.index]=U.cell)}},g.insert=function(f,y){var l=this.vertices;l.push(f);var x=this.walk(f,y);if(!!x){for(var u=this.dimension,M=this.tuple,_=0;_<=u;++_){var p=x.vertices[_];p<0?M[_]=f:M[_]=l[p]}var w=this.orient(M);w<0||w===0&&(x=this.handleBoundaryDegeneracy(x,f),!x)||this.addPeaks(f,x)}},g.boundary=function(){for(var f=this.dimension,y=[],l=this.simplices,x=l.length,u=0;u<x;++u){var M=l[u];if(M.boundary){for(var _=new Array(f),p=M.vertices,w=0,h=0,L=0;L<=f;++L)p[L]>=0?_[w++]=p[L]:h=L&1;if(h===(f&1)){var S=_[0];_[0]=_[1],_[1]=S}y.push(_)}}return y};function d(f,y){var l=f.length;if(l===0)throw new Error("Must have at least d+1 points");var x=f[0].length;if(l<=x)throw new Error("Must input at least d+1 points");var u=f.slice(0,x+1),M=e.apply(void 0,u);if(M===0)throw new Error("Input not in general position");for(var _=new Array(x+1),p=0;p<=x;++p)_[p]=p;M<0&&(_[0]=1,_[1]=0);for(var w=new i(_,new Array(x+1),!1),h=w.adjacent,L=new Array(x+2),p=0;p<=x;++p){for(var S=_.slice(),E=0;E<=x;++E)E===p&&(S[E]=-1);var P=S[0];S[0]=S[1],S[1]=P;var F=new i(S,new Array(x+1),!0);h[p]=F,L[p]=F}L[x+1]=w;for(var p=0;p<=x;++p)for(var S=h[p].vertices,I=h[p].adjacent,E=0;E<=x;++E){var D=S[E];if(D<0){I[E]=w;continue}for(var R=0;R<=x;++R)h[R].vertices.indexOf(D)<0&&(I[E]=h[R])}for(var N=new b(x,u,L),z=!!y,p=x+1;p<l;++p)N.insert(f[p],z);return N.boundary()}},{"robust-orientation":284,"simplicial-complex":293}],234:[function(c,A,T){var e=c("binary-search-bounds"),a=0,i=1,n=2;A.exports=w;function r(h,L,S,E,P){this.mid=h,this.left=L,this.right=S,this.leftPoints=E,this.rightPoints=P,this.count=(L?L.count:0)+(S?S.count:0)+E.length}var v=r.prototype;function s(h,L){h.mid=L.mid,h.left=L.left,h.right=L.right,h.leftPoints=L.leftPoints,h.rightPoints=L.rightPoints,h.count=L.count}function o(h,L){var S=M(L);h.mid=S.mid,h.left=S.left,h.right=S.right,h.leftPoints=S.leftPoints,h.rightPoints=S.rightPoints,h.count=S.count}function b(h,L){var S=h.intervals([]);S.push(L),o(h,S)}function g(h,L){var S=h.intervals([]),E=S.indexOf(L);return E<0?a:(S.splice(E,1),o(h,S),i)}v.intervals=function(h){return h.push.apply(h,this.leftPoints),this.left&&this.left.intervals(h),this.right&&this.right.intervals(h),h},v.insert=function(h){var L=this.count-this.leftPoints.length;if(this.count+=1,h[1]<this.mid)this.left?4*(this.left.count+1)>3*(L+1)?b(this,h):this.left.insert(h):this.left=M([h]);else if(h[0]>this.mid)this.right?4*(this.right.count+1)>3*(L+1)?b(this,h):this.right.insert(h):this.right=M([h]);else{var S=e.ge(this.leftPoints,h,x),E=e.ge(this.rightPoints,h,u);this.leftPoints.splice(S,0,h),this.rightPoints.splice(E,0,h)}},v.remove=function(h){var L=this.count-this.leftPoints;if(h[1]<this.mid){if(!this.left)return a;var S=this.right?this.right.count:0;if(4*S>3*(L-1))return g(this,h);var E=this.left.remove(h);return E===n?(this.left=null,this.count-=1,i):(E===i&&(this.count-=1),E)}else if(h[0]>this.mid){if(!this.right)return a;var P=this.left?this.left.count:0;if(4*P>3*(L-1))return g(this,h);var E=this.right.remove(h);return E===n?(this.right=null,this.count-=1,i):(E===i&&(this.count-=1),E)}else{if(this.count===1)return this.leftPoints[0]===h?n:a;if(this.leftPoints.length===1&&this.leftPoints[0]===h){if(this.left&&this.right){for(var F=this,I=this.left;I.right;)F=I,I=I.right;if(F===this)I.right=this.right;else{var D=this.left,E=this.right;F.count-=I.count,F.right=I.left,I.left=D,I.right=E}s(this,I),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?s(this,this.left):s(this,this.right);return i}for(var D=e.ge(this.leftPoints,h,x);D<this.leftPoints.length&&this.leftPoints[D][0]===h[0];++D)if(this.leftPoints[D]===h){this.count-=1,this.leftPoints.splice(D,1);for(var E=e.ge(this.rightPoints,h,u);E<this.rightPoints.length&&this.rightPoints[E][1]===h[1];++E)if(this.rightPoints[E]===h)return this.rightPoints.splice(E,1),i}return a}};function d(h,L,S){for(var E=0;E<h.length&&h[E][0]<=L;++E){var P=S(h[E]);if(P)return P}}function f(h,L,S){for(var E=h.length-1;E>=0&&h[E][1]>=L;--E){var P=S(h[E]);if(P)return P}}function y(h,L){for(var S=0;S<h.length;++S){var E=L(h[S]);if(E)return E}}v.queryPoint=function(h,L){if(h<this.mid){if(this.left){var S=this.left.queryPoint(h,L);if(S)return S}return d(this.leftPoints,h,L)}else if(h>this.mid){if(this.right){var S=this.right.queryPoint(h,L);if(S)return S}return f(this.rightPoints,h,L)}else return y(this.leftPoints,L)},v.queryInterval=function(h,L,S){if(h<this.mid&&this.left){var E=this.left.queryInterval(h,L,S);if(E)return E}if(L>this.mid&&this.right){var E=this.right.queryInterval(h,L,S);if(E)return E}return L<this.mid?d(this.leftPoints,L,S):h>this.mid?f(this.rightPoints,h,S):y(this.leftPoints,S)};function l(h,L){return h-L}function x(h,L){var S=h[0]-L[0];return S||h[1]-L[1]}function u(h,L){var S=h[1]-L[1];return S||h[0]-L[0]}function M(h){if(h.length===0)return null;for(var L=[],S=0;S<h.length;++S)L.push(h[S][0],h[S][1]);L.sort(l);for(var E=L[L.length>>1],P=[],F=[],I=[],S=0;S<h.length;++S){var D=h[S];D[1]<E?P.push(D):E<D[0]?F.push(D):I.push(D)}var R=I,N=I.slice();return R.sort(x),N.sort(u),new r(E,M(P),M(F),R,N)}function _(h){this.root=h}var p=_.prototype;p.insert=function(h){this.root?this.root.insert(h):this.root=new r(h[0],null,null,[h],[h])},p.remove=function(h){if(this.root){var L=this.root.remove(h);return L===n&&(this.root=null),L!==a}return!1},p.queryPoint=function(h,L){if(this.root)return this.root.queryPoint(h,L)},p.queryInterval=function(h,L,S){if(h<=L&&this.root)return this.root.queryInterval(h,L,S)},Object.defineProperty(p,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(p,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});function w(h){return!h||h.length===0?new _(null):new _(M(h))}},{"binary-search-bounds":31}],235:[function(c,A,T){function e(a){for(var i=new Array(a),n=0;n<a;++n)i[n]=n;return i}A.exports=e},{}],236:[function(c,A,T){A.exports=!0},{}],237:[function(c,A,T){/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */A.exports=function(i){return i!=null&&(e(i)||a(i)||!!i._isBuffer)};function e(i){return!!i.constructor&&typeof i.constructor.isBuffer=="function"&&i.constructor.isBuffer(i)}function a(i){return typeof i.readFloatLE=="function"&&typeof i.slice=="function"&&e(i.slice(0,0))}},{}],238:[function(c,A,T){A.exports=i,A.exports.isMobile=i,A.exports.default=i;var e=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,a=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function i(n){n||(n={});var r=n.ua;if(!r&&typeof navigator<"u"&&(r=navigator.userAgent),r&&r.headers&&typeof r.headers["user-agent"]=="string"&&(r=r.headers["user-agent"]),typeof r!="string")return!1;var v=n.tablet?a.test(r):e.test(r);return!v&&n.tablet&&n.featureDetect&&navigator&&navigator.maxTouchPoints>1&&r.indexOf("Macintosh")!==-1&&r.indexOf("Safari")!==-1&&(v=!0),v}},{}],239:[function(c,A,T){A.exports=function(e){for(var a=e.length,i,n=0;n<a;n++)if(i=e.charCodeAt(n),(i<9||i>13)&&i!==32&&i!==133&&i!==160&&i!==5760&&i!==6158&&(i<8192||i>8205)&&i!==8232&&i!==8233&&i!==8239&&i!==8287&&i!==8288&&i!==12288&&i!==65279)return!1;return!0}},{}],240:[function(c,A,T){function e(a,i,n){return a*(1-n)+i*n}A.exports=e},{}],241:[function(c,A,T){var e=c("./normalize"),a=c("gl-mat4/create"),i=c("gl-mat4/clone"),n=c("gl-mat4/determinant"),r=c("gl-mat4/invert"),v=c("gl-mat4/transpose"),s={length:c("gl-vec3/length"),normalize:c("gl-vec3/normalize"),dot:c("gl-vec3/dot"),cross:c("gl-vec3/cross")},o=a(),b=a(),g=[0,0,0,0],d=[[0,0,0],[0,0,0],[0,0,0]],f=[0,0,0];A.exports=function(M,_,p,w,h,L){if(_||(_=[0,0,0]),p||(p=[0,0,0]),w||(w=[0,0,0]),h||(h=[0,0,0,1]),L||(L=[0,0,0,1]),!e(o,M)||(i(b,o),b[3]=0,b[7]=0,b[11]=0,b[15]=1,Math.abs(n(b)<1e-8)))return!1;var S=o[3],E=o[7],P=o[11],F=o[12],I=o[13],D=o[14],R=o[15];if(S!==0||E!==0||P!==0){g[0]=S,g[1]=E,g[2]=P,g[3]=R;var N=r(b,b);if(!N)return!1;v(b,b),y(h,g,b)}else h[0]=h[1]=h[2]=0,h[3]=1;if(_[0]=F,_[1]=I,_[2]=D,l(d,o),p[0]=s.length(d[0]),s.normalize(d[0],d[0]),w[0]=s.dot(d[0],d[1]),x(d[1],d[1],d[0],1,-w[0]),p[1]=s.length(d[1]),s.normalize(d[1],d[1]),w[0]/=p[1],w[1]=s.dot(d[0],d[2]),x(d[2],d[2],d[0],1,-w[1]),w[2]=s.dot(d[1],d[2]),x(d[2],d[2],d[1],1,-w[2]),p[2]=s.length(d[2]),s.normalize(d[2],d[2]),w[1]/=p[2],w[2]/=p[2],s.cross(f,d[1],d[2]),s.dot(d[0],f)<0)for(var z=0;z<3;z++)p[z]*=-1,d[z][0]*=-1,d[z][1]*=-1,d[z][2]*=-1;return L[0]=.5*Math.sqrt(Math.max(1+d[0][0]-d[1][1]-d[2][2],0)),L[1]=.5*Math.sqrt(Math.max(1-d[0][0]+d[1][1]-d[2][2],0)),L[2]=.5*Math.sqrt(Math.max(1-d[0][0]-d[1][1]+d[2][2],0)),L[3]=.5*Math.sqrt(Math.max(1+d[0][0]+d[1][1]+d[2][2],0)),d[2][1]>d[1][2]&&(L[0]=-L[0]),d[0][2]>d[2][0]&&(L[1]=-L[1]),d[1][0]>d[0][1]&&(L[2]=-L[2]),!0};function y(u,M,_){var p=M[0],w=M[1],h=M[2],L=M[3];return u[0]=_[0]*p+_[4]*w+_[8]*h+_[12]*L,u[1]=_[1]*p+_[5]*w+_[9]*h+_[13]*L,u[2]=_[2]*p+_[6]*w+_[10]*h+_[14]*L,u[3]=_[3]*p+_[7]*w+_[11]*h+_[15]*L,u}function l(u,M){u[0][0]=M[0],u[0][1]=M[1],u[0][2]=M[2],u[1][0]=M[4],u[1][1]=M[5],u[1][2]=M[6],u[2][0]=M[8],u[2][1]=M[9],u[2][2]=M[10]}function x(u,M,_,p,w){u[0]=M[0]*p+_[0]*w,u[1]=M[1]*p+_[1]*w,u[2]=M[2]*p+_[2]*w}},{"./normalize":242,"gl-mat4/clone":92,"gl-mat4/create":93,"gl-mat4/determinant":94,"gl-mat4/invert":98,"gl-mat4/transpose":109,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/length":172,"gl-vec3/normalize":179}],242:[function(c,A,T){A.exports=function(a,i){var n=i[15];if(n===0)return!1;for(var r=1/n,v=0;v<16;v++)a[v]=i[v]*r;return!0}},{}],243:[function(c,A,T){var e=c("gl-vec3/lerp"),a=c("mat4-recompose"),i=c("mat4-decompose"),n=c("gl-mat4/determinant"),r=c("quat-slerp"),v=g(),s=g(),o=g();A.exports=b;function b(y,l,x,u){if(n(l)===0||n(x)===0)return!1;var M=i(l,v.translate,v.scale,v.skew,v.perspective,v.quaternion),_=i(x,s.translate,s.scale,s.skew,s.perspective,s.quaternion);return!M||!_?!1:(e(o.translate,v.translate,s.translate,u),e(o.skew,v.skew,s.skew,u),e(o.scale,v.scale,s.scale,u),e(o.perspective,v.perspective,s.perspective,u),r(o.quaternion,v.quaternion,s.quaternion,u),a(y,o.translate,o.scale,o.skew,o.perspective,o.quaternion),!0)}function g(){return{translate:d(),scale:d(1),skew:d(),perspective:f(),quaternion:f()}}function d(y){return[y||0,y||0,y||0]}function f(){return[0,0,0,1]}},{"gl-mat4/determinant":94,"gl-vec3/lerp":173,"mat4-decompose":241,"mat4-recompose":244,"quat-slerp":271}],244:[function(c,A,T){var e={identity:c("gl-mat4/identity"),translate:c("gl-mat4/translate"),multiply:c("gl-mat4/multiply"),create:c("gl-mat4/create"),scale:c("gl-mat4/scale"),fromRotationTranslation:c("gl-mat4/fromRotationTranslation")};e.create();var a=e.create();A.exports=function(n,r,v,s,o,b){return e.identity(n),e.fromRotationTranslation(n,b,r),n[3]=o[0],n[7]=o[1],n[11]=o[2],n[15]=o[3],e.identity(a),s[2]!==0&&(a[9]=s[2],e.multiply(n,n,a)),s[1]!==0&&(a[9]=0,a[8]=s[1],e.multiply(n,n,a)),s[0]!==0&&(a[8]=0,a[4]=s[0],e.multiply(n,n,a)),e.scale(n,n,v),n}},{"gl-mat4/create":93,"gl-mat4/fromRotationTranslation":96,"gl-mat4/identity":97,"gl-mat4/multiply":100,"gl-mat4/scale":107,"gl-mat4/translate":108}],245:[function(c,A,T){var e=c("binary-search-bounds"),a=c("mat4-interpolate"),i=c("gl-mat4/invert"),n=c("gl-mat4/rotateX"),r=c("gl-mat4/rotateY"),v=c("gl-mat4/rotateZ"),s=c("gl-mat4/lookAt"),o=c("gl-mat4/translate");c("gl-mat4/scale");var b=c("gl-vec3/normalize"),g=[0,0,0];A.exports=l;function d(x){this._components=x.slice(),this._time=[0],this.prevMatrix=x.slice(),this.nextMatrix=x.slice(),this.computedMatrix=x.slice(),this.computedInverse=x.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}var f=d.prototype;f.recalcMatrix=function(x){var u=this._time,M=e.le(u,x),_=this.computedMatrix;if(!(M<0)){var p=this._components;if(M===u.length-1)for(var w=16*M,h=0;h<16;++h)_[h]=p[w++];else{for(var L=u[M+1]-u[M],w=16*M,S=this.prevMatrix,E=!0,h=0;h<16;++h)S[h]=p[w++];for(var P=this.nextMatrix,h=0;h<16;++h)P[h]=p[w++],E=E&&S[h]===P[h];if(L<1e-6||E)for(var h=0;h<16;++h)_[h]=S[h];else a(_,S,P,(x-u[M])/L)}var F=this.computedUp;F[0]=_[1],F[1]=_[5],F[2]=_[9],b(F,F);var I=this.computedInverse;i(I,_);var D=this.computedEye,R=I[15];D[0]=I[12]/R,D[1]=I[13]/R,D[2]=I[14]/R;for(var N=this.computedCenter,z=Math.exp(this.computedRadius[0]),h=0;h<3;++h)N[h]=D[h]-_[2+4*h]*z}},f.idle=function(x){if(!(x<this.lastT())){for(var u=this._components,M=u.length-16,_=0;_<16;++_)u.push(u[M++]);this._time.push(x)}},f.flush=function(x){var u=e.gt(this._time,x)-2;u<0||(this._time.splice(0,u),this._components.splice(0,16*u))},f.lastT=function(){return this._time[this._time.length-1]},f.lookAt=function(x,u,M,_){this.recalcMatrix(x),u=u||this.computedEye,M=M||g,_=_||this.computedUp,this.setMatrix(x,s(this.computedMatrix,u,M,_));for(var p=0,w=0;w<3;++w)p+=Math.pow(M[w]-u[w],2);p=Math.log(Math.sqrt(p)),this.computedRadius[0]=p},f.rotate=function(x,u,M,_){this.recalcMatrix(x);var p=this.computedInverse;u&&r(p,p,u),M&&n(p,p,M),_&&v(p,p,_),this.setMatrix(x,i(this.computedMatrix,p))};var y=[0,0,0];f.pan=function(x,u,M,_){y[0]=-(u||0),y[1]=-(M||0),y[2]=-(_||0),this.recalcMatrix(x);var p=this.computedInverse;o(p,p,y),this.setMatrix(x,i(p,p))},f.translate=function(x,u,M,_){y[0]=u||0,y[1]=M||0,y[2]=_||0,this.recalcMatrix(x);var p=this.computedMatrix;o(p,p,y),this.setMatrix(x,p)},f.setMatrix=function(x,u){if(!(x<this.lastT())){this._time.push(x);for(var M=0;M<16;++M)this._components.push(u[M])}},f.setDistance=function(x,u){this.computedRadius[0]=u},f.setDistanceLimits=function(x,u){var M=this._limits;M[0]=x,M[1]=u},f.getDistanceLimits=function(x){var u=this._limits;return x?(x[0]=u[0],x[1]=u[1],x):u};function l(x){x=x||{};var u=x.matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return new d(u)}},{"binary-search-bounds":31,"gl-mat4/invert":98,"gl-mat4/lookAt":99,"gl-mat4/rotateX":104,"gl-mat4/rotateY":105,"gl-mat4/rotateZ":106,"gl-mat4/scale":107,"gl-mat4/translate":108,"gl-vec3/normalize":179,"mat4-interpolate":243}],246:[function(c,A,T){A.exports=a;var e=c("robust-orientation")[3];function a(i){var n=i.length;if(n<3){for(var f=new Array(n),r=0;r<n;++r)f[r]=r;return n===2&&i[0][0]===i[1][0]&&i[0][1]===i[1][1]?[0]:f}for(var v=new Array(n),r=0;r<n;++r)v[r]=r;v.sort(function(u,M){var _=i[u][0]-i[M][0];return _||i[u][1]-i[M][1]});for(var s=[v[0],v[1]],o=[v[0],v[1]],r=2;r<n;++r){for(var b=v[r],g=i[b],d=s.length;d>1&&e(i[s[d-2]],i[s[d-1]],g)<=0;)d-=1,s.pop();for(s.push(b),d=o.length;d>1&&e(i[o[d-2]],i[o[d-1]],g)>=0;)d-=1,o.pop();o.push(b)}for(var f=new Array(o.length+s.length-2),y=0,r=0,l=s.length;r<l;++r)f[y++]=s[r];for(var x=o.length-2;x>0;--x)f[y++]=o[x];return f}},{"robust-orientation":284}],247:[function(c,A,T){A.exports=a;var e=c("mouse-event");function a(i,n){n||(n=i,i=window);var r=0,v=0,s=0,o={shift:!1,alt:!1,control:!1,meta:!1},b=!1;function g(h){var L=!1;return"altKey"in h&&(L=L||h.altKey!==o.alt,o.alt=!!h.altKey),"shiftKey"in h&&(L=L||h.shiftKey!==o.shift,o.shift=!!h.shiftKey),"ctrlKey"in h&&(L=L||h.ctrlKey!==o.control,o.control=!!h.ctrlKey),"metaKey"in h&&(L=L||h.metaKey!==o.meta,o.meta=!!h.metaKey),L}function d(h,L){var S=e.x(L),E=e.y(L);"buttons"in L&&(h=L.buttons|0),(h!==r||S!==v||E!==s||g(L))&&(r=h|0,v=S||0,s=E||0,n&&n(r,v,s,o))}function f(h){d(0,h)}function y(){(r||v||s||o.shift||o.alt||o.meta||o.control)&&(v=s=0,r=0,o.shift=o.alt=o.control=o.meta=!1,n&&n(0,0,0,o))}function l(h){g(h)&&n&&n(r,v,s,o)}function x(h){e.buttons(h)===0?d(0,h):d(r,h)}function u(h){d(r|e.buttons(h),h)}function M(h){d(r&~e.buttons(h),h)}function _(){b||(b=!0,i.addEventListener("mousemove",x),i.addEventListener("mousedown",u),i.addEventListener("mouseup",M),i.addEventListener("mouseleave",f),i.addEventListener("mouseenter",f),i.addEventListener("mouseout",f),i.addEventListener("mouseover",f),i.addEventListener("blur",y),i.addEventListener("keyup",l),i.addEventListener("keydown",l),i.addEventListener("keypress",l),i!==window&&(window.addEventListener("blur",y),window.addEventListener("keyup",l),window.addEventListener("keydown",l),window.addEventListener("keypress",l)))}function p(){!b||(b=!1,i.removeEventListener("mousemove",x),i.removeEventListener("mousedown",u),i.removeEventListener("mouseup",M),i.removeEventListener("mouseleave",f),i.removeEventListener("mouseenter",f),i.removeEventListener("mouseout",f),i.removeEventListener("mouseover",f),i.removeEventListener("blur",y),i.removeEventListener("keyup",l),i.removeEventListener("keydown",l),i.removeEventListener("keypress",l),i!==window&&(window.removeEventListener("blur",y),window.removeEventListener("keyup",l),window.removeEventListener("keydown",l),window.removeEventListener("keypress",l)))}_();var w={element:i};return Object.defineProperties(w,{enabled:{get:function(){return b},set:function(h){h?_():p()},enumerable:!0},buttons:{get:function(){return r},enumerable:!0},x:{get:function(){return v},enumerable:!0},y:{get:function(){return s},enumerable:!0},mods:{get:function(){return o},enumerable:!0}}),w}},{"mouse-event":249}],248:[function(c,A,T){var e={left:0,top:0};A.exports=a;function a(n,r,v){r=r||n.currentTarget||n.srcElement,Array.isArray(v)||(v=[0,0]);var s=n.clientX||0,o=n.clientY||0,b=i(r);return v[0]=s-b.left,v[1]=o-b.top,v}function i(n){return n===window||n===document||n===document.body?e:n.getBoundingClientRect()}},{}],249:[function(c,A,T){function e(r){if(typeof r=="object"){if("buttons"in r)return r.buttons;if("which"in r){var v=r.which;if(v===2)return 4;if(v===3)return 2;if(v>0)return 1<<v-1}else if("button"in r){var v=r.button;if(v===1)return 4;if(v===2)return 2;if(v>=0)return 1<<v}}return 0}T.buttons=e;function a(r){return r.target||r.srcElement||window}T.element=a;function i(r){if(typeof r=="object"){if("offsetX"in r)return r.offsetX;var v=a(r),s=v.getBoundingClientRect();return r.clientX-s.left}return 0}T.x=i;function n(r){if(typeof r=="object"){if("offsetY"in r)return r.offsetY;var v=a(r),s=v.getBoundingClientRect();return r.clientY-s.top}return 0}T.y=n},{}],250:[function(c,A,T){var e=c("to-px");A.exports=a;function a(i,n,r){typeof i=="function"&&(r=!!n,n=i,i=window);var v=e("ex",i),s=function(o){r&&o.preventDefault();var b=o.deltaX||0,g=o.deltaY||0,d=o.deltaZ||0,f=o.deltaMode,y=1;switch(f){case 1:y=v;break;case 2:y=window.innerHeight;break}if(b*=y,g*=y,d*=y,b||g||d)return n(b,g,d,o)};return i.addEventListener("wheel",s),s}},{"to-px":304}],251:[function(c,A,T){var e=c("typedarray-pool");A.exports=n;var a={"false,0,1":function(v,s,o,b,g){return function(f,y,l,x){var u=f.shape[0]|0,M=f.shape[1]|0,_=f.data,p=f.offset|0,w=f.stride[0]|0,h=f.stride[1]|0,L=p,S,E=-w|0,P=0,F=-h|0,I=0,D=-w-h|0,R=0,N=w|0,z=h-w*u|0,G=0,Y=0,ee=0,Z=2*u|0,X=b(Z),ne=b(Z),ce=0,Q=0,K=-1,U=-1,H=0,q=-u|0,re=u|0,j=0,$=-u-1|0,ie=u-1|0,oe=0,ae=0,se=0;for(G=0;G<u;++G)X[ce++]=o(_[L],y,l,x),L+=N;if(L+=z,M>0){if(Y=1,X[ce++]=o(_[L],y,l,x),L+=N,u>0)for(G=1,S=_[L],Q=X[ce]=o(S,y,l,x),H=X[ce+K],j=X[ce+q],oe=X[ce+$],(Q!==H||Q!==j||Q!==oe)&&(P=_[L+E],I=_[L+F],R=_[L+D],v(G,Y,S,P,I,R,Q,H,j,oe,y,l,x),ae=ne[ce]=ee++),ce+=1,L+=N,G=2;G<u;++G)S=_[L],Q=X[ce]=o(S,y,l,x),H=X[ce+K],j=X[ce+q],oe=X[ce+$],(Q!==H||Q!==j||Q!==oe)&&(P=_[L+E],I=_[L+F],R=_[L+D],v(G,Y,S,P,I,R,Q,H,j,oe,y,l,x),ae=ne[ce]=ee++,oe!==H&&s(ne[ce+K],ae,R,P,oe,H,y,l,x)),ce+=1,L+=N;for(L+=z,ce=0,se=K,K=U,U=se,se=q,q=re,re=se,se=$,$=ie,ie=se,Y=2;Y<M;++Y){if(X[ce++]=o(_[L],y,l,x),L+=N,u>0)for(G=1,S=_[L],Q=X[ce]=o(S,y,l,x),H=X[ce+K],j=X[ce+q],oe=X[ce+$],(Q!==H||Q!==j||Q!==oe)&&(P=_[L+E],I=_[L+F],R=_[L+D],v(G,Y,S,P,I,R,Q,H,j,oe,y,l,x),ae=ne[ce]=ee++,oe!==j&&s(ne[ce+q],ae,I,R,j,oe,y,l,x)),ce+=1,L+=N,G=2;G<u;++G)S=_[L],Q=X[ce]=o(S,y,l,x),H=X[ce+K],j=X[ce+q],oe=X[ce+$],(Q!==H||Q!==j||Q!==oe)&&(P=_[L+E],I=_[L+F],R=_[L+D],v(G,Y,S,P,I,R,Q,H,j,oe,y,l,x),ae=ne[ce]=ee++,oe!==j&&s(ne[ce+q],ae,I,R,j,oe,y,l,x),oe!==H&&s(ne[ce+K],ae,R,P,oe,H,y,l,x)),ce+=1,L+=N;Y&1&&(ce=0),se=K,K=U,U=se,se=q,q=re,re=se,se=$,$=ie,ie=se,L+=z}}g(ne),g(X)}},"false,1,0":function(v,s,o,b,g){return function(f,y,l,x){var u=f.shape[0]|0,M=f.shape[1]|0,_=f.data,p=f.offset|0,w=f.stride[0]|0,h=f.stride[1]|0,L=p,S,E=-w|0,P=0,F=-h|0,I=0,D=-w-h|0,R=0,N=h|0,z=w-h*M|0,G=0,Y=0,ee=0,Z=2*M|0,X=b(Z),ne=b(Z),ce=0,Q=0,K=-1,U=-1,H=0,q=-M|0,re=M|0,j=0,$=-M-1|0,ie=M-1|0,oe=0,ae=0,se=0;for(Y=0;Y<M;++Y)X[ce++]=o(_[L],y,l,x),L+=N;if(L+=z,u>0){if(G=1,X[ce++]=o(_[L],y,l,x),L+=N,M>0)for(Y=1,S=_[L],Q=X[ce]=o(S,y,l,x),j=X[ce+q],H=X[ce+K],oe=X[ce+$],(Q!==j||Q!==H||Q!==oe)&&(P=_[L+E],I=_[L+F],R=_[L+D],v(G,Y,S,P,I,R,Q,j,H,oe,y,l,x),ae=ne[ce]=ee++),ce+=1,L+=N,Y=2;Y<M;++Y)S=_[L],Q=X[ce]=o(S,y,l,x),j=X[ce+q],H=X[ce+K],oe=X[ce+$],(Q!==j||Q!==H||Q!==oe)&&(P=_[L+E],I=_[L+F],R=_[L+D],v(G,Y,S,P,I,R,Q,j,H,oe,y,l,x),ae=ne[ce]=ee++,oe!==H&&s(ne[ce+K],ae,I,R,H,oe,y,l,x)),ce+=1,L+=N;for(L+=z,ce=0,se=q,q=re,re=se,se=K,K=U,U=se,se=$,$=ie,ie=se,G=2;G<u;++G){if(X[ce++]=o(_[L],y,l,x),L+=N,M>0)for(Y=1,S=_[L],Q=X[ce]=o(S,y,l,x),j=X[ce+q],H=X[ce+K],oe=X[ce+$],(Q!==j||Q!==H||Q!==oe)&&(P=_[L+E],I=_[L+F],R=_[L+D],v(G,Y,S,P,I,R,Q,j,H,oe,y,l,x),ae=ne[ce]=ee++,oe!==j&&s(ne[ce+q],ae,R,P,oe,j,y,l,x)),ce+=1,L+=N,Y=2;Y<M;++Y)S=_[L],Q=X[ce]=o(S,y,l,x),j=X[ce+q],H=X[ce+K],oe=X[ce+$],(Q!==j||Q!==H||Q!==oe)&&(P=_[L+E],I=_[L+F],R=_[L+D],v(G,Y,S,P,I,R,Q,j,H,oe,y,l,x),ae=ne[ce]=ee++,oe!==H&&s(ne[ce+K],ae,I,R,H,oe,y,l,x),oe!==j&&s(ne[ce+q],ae,R,P,oe,j,y,l,x)),ce+=1,L+=N;G&1&&(ce=0),se=q,q=re,re=se,se=K,K=U,U=se,se=$,$=ie,ie=se,L+=z}}g(ne),g(X)}}};function i(r,v,s,o,b,g){var d=[g,b].join(","),f=a[d];return f(r,v,s,e.mallocUint32,e.freeUint32)}function n(r){function v(y){throw new Error("ndarray-extract-contour: "+y)}typeof r!="object"&&v("Must specify arguments");var s=r.order;Array.isArray(s)||v("Must specify order");var o=r.arrayArguments||1;o<1&&v("Must have at least one array argument");var b=r.scalarArguments||0;b<0&&v("Scalar arg count must be > 0"),typeof r.vertex!="function"&&v("Must specify vertex creation function"),typeof r.cell!="function"&&v("Must specify cell creation function"),typeof r.phase!="function"&&v("Must specify phase function");for(var g=r.getters||[],d=new Array(o),f=0;f<o;++f)g.indexOf(f)>=0?d[f]=!0:d[f]=!1;return i(r.vertex,r.cell,r.phase,b,s,d)}},{"typedarray-pool":308}],252:[function(c,A,T){var e=c("dup"),a={zero:function(l,x,u,M){var _=l[0],p=u[0];M|=0;var w=0,h=p;for(w=0;w<_;++w)x[M]=0,M+=h},fdTemplate1:function(l,x,u,M,_,p,w){var h=l[0],L=u[0],S=p[0],E=-1*L,P=L;M|=0,w|=0;var F=0,I=L,D=S;for(F=0;F<h;++F)_[w]=.5*(x[M+E]-x[M+P]),M+=I,w+=D},fdTemplate2:function(l,x,u,M,_,p,w,h,L,S){var E=l[0],P=l[1],F=u[0],I=u[1],D=p[0],R=p[1],N=L[0],z=L[1],G=-1*F,Y=F,ee=-1*I,Z=I;M|=0,w|=0,S|=0;var X=0,ne=0,ce=I,Q=F-P*I,K=R,U=D-P*R,H=z,q=N-P*z;for(ne=0;ne<E;++ne){for(X=0;X<P;++X)_[w]=.5*(x[M+G]-x[M+Y]),h[S]=.5*(x[M+ee]-x[M+Z]),M+=ce,w+=K,S+=H;M+=Q,w+=U,S+=q}}},i={cdiff:function(l){var x={};return function(M,_,p){var w=M.dtype,h=M.order,L=_.dtype,S=_.order,E=p.dtype,P=p.order,F=[w,h.join(),L,S.join(),E,P.join()].join(),I=x[F];return I||(x[F]=I=l([w,h,L,S,E,P])),I(M.shape.slice(0),M.data,M.stride,M.offset|0,_.data,_.stride,_.offset|0,p.data,p.stride,p.offset|0)}},zero:function(l){var x={};return function(M){var _=M.dtype,p=M.order,w=[_,p.join()].join(),h=x[w];return h||(x[w]=h=l([_,p])),h(M.shape.slice(0),M.data,M.stride,M.offset|0)}},fdTemplate1:function(l){var x={};return function(M,_){var p=M.dtype,w=M.order,h=_.dtype,L=_.order,S=[p,w.join(),h,L.join()].join(),E=x[S];return E||(x[S]=E=l([p,w,h,L])),E(M.shape.slice(0),M.data,M.stride,M.offset|0,_.data,_.stride,_.offset|0)}},fdTemplate2:function(l){var x={};return function(M,_,p){var w=M.dtype,h=M.order,L=_.dtype,S=_.order,E=p.dtype,P=p.order,F=[w,h.join(),L,S.join(),E,P.join()].join(),I=x[F];return I||(x[F]=I=l([w,h,L,S,E,P])),I(M.shape.slice(0),M.data,M.stride,M.offset|0,_.data,_.stride,_.offset|0,p.data,p.stride,p.offset|0)}}};function n(l){var x=i[l.funcName];return x(r.bind(void 0,l))}function r(l){return a[l.funcName]}function v(l){return n({funcName:l.funcName})}var s={},o={},b=v({funcName:"cdiff"}),g=v({funcName:"zero"});function d(l){return l in s?s[l]:s[l]=v({funcName:"fdTemplate"+l})}function f(l,x,u,M){return function(_,p){var w=p.shape.slice();return w[0]>2&&w[1]>2&&M(p.pick(-1,-1).lo(1,1).hi(w[0]-2,w[1]-2),_.pick(-1,-1,0).lo(1,1).hi(w[0]-2,w[1]-2),_.pick(-1,-1,1).lo(1,1).hi(w[0]-2,w[1]-2)),w[1]>2&&(u(p.pick(0,-1).lo(1).hi(w[1]-2),_.pick(0,-1,1).lo(1).hi(w[1]-2)),x(_.pick(0,-1,0).lo(1).hi(w[1]-2))),w[1]>2&&(u(p.pick(w[0]-1,-1).lo(1).hi(w[1]-2),_.pick(w[0]-1,-1,1).lo(1).hi(w[1]-2)),x(_.pick(w[0]-1,-1,0).lo(1).hi(w[1]-2))),w[0]>2&&(u(p.pick(-1,0).lo(1).hi(w[0]-2),_.pick(-1,0,0).lo(1).hi(w[0]-2)),x(_.pick(-1,0,1).lo(1).hi(w[0]-2))),w[0]>2&&(u(p.pick(-1,w[1]-1).lo(1).hi(w[0]-2),_.pick(-1,w[1]-1,0).lo(1).hi(w[0]-2)),x(_.pick(-1,w[1]-1,1).lo(1).hi(w[0]-2))),_.set(0,0,0,0),_.set(0,0,1,0),_.set(w[0]-1,0,0,0),_.set(w[0]-1,0,1,0),_.set(0,w[1]-1,0,0),_.set(0,w[1]-1,1,0),_.set(w[0]-1,w[1]-1,0,0),_.set(w[0]-1,w[1]-1,1,0),_}}function y(l){var x=l.join(),w=o[x];if(w)return w;for(var u=l.length,M=[b,g],_=1;_<=u;++_)M.push(d(_));var p=f,w=p.apply(void 0,M);return o[x]=w,w}A.exports=function(x,u,M){if(Array.isArray(M)||(typeof M=="string"?M=e(u.dimension,M):M=e(u.dimension,"clamp")),u.size===0)return x;if(u.dimension===0)return x.set(0),x;var _=y(M);return _(x,u)}},{dup:65}],253:[function(c,A,T){function e(v,s){var o=Math.floor(s),b=s-o,g=0<=o&&o<v.shape[0],d=0<=o+1&&o+1<v.shape[0],f=g?+v.get(o):0,y=d?+v.get(o+1):0;return(1-b)*f+b*y}function a(v,s,o){var b=Math.floor(s),g=s-b,d=0<=b&&b<v.shape[0],f=0<=b+1&&b+1<v.shape[0],y=Math.floor(o),l=o-y,x=0<=y&&y<v.shape[1],u=0<=y+1&&y+1<v.shape[1],M=d&&x?v.get(b,y):0,_=d&&u?v.get(b,y+1):0,p=f&&x?v.get(b+1,y):0,w=f&&u?v.get(b+1,y+1):0;return(1-l)*((1-g)*M+g*p)+l*((1-g)*_+g*w)}function i(v,s,o,b){var g=Math.floor(s),d=s-g,f=0<=g&&g<v.shape[0],y=0<=g+1&&g+1<v.shape[0],l=Math.floor(o),x=o-l,u=0<=l&&l<v.shape[1],M=0<=l+1&&l+1<v.shape[1],_=Math.floor(b),p=b-_,w=0<=_&&_<v.shape[2],h=0<=_+1&&_+1<v.shape[2],L=f&&u&&w?v.get(g,l,_):0,S=f&&M&&w?v.get(g,l+1,_):0,E=y&&u&&w?v.get(g+1,l,_):0,P=y&&M&&w?v.get(g+1,l+1,_):0,F=f&&u&&h?v.get(g,l,_+1):0,I=f&&M&&h?v.get(g,l+1,_+1):0,D=y&&u&&h?v.get(g+1,l,_+1):0,R=y&&M&&h?v.get(g+1,l+1,_+1):0;return(1-p)*((1-x)*((1-d)*L+d*E)+x*((1-d)*S+d*P))+p*((1-x)*((1-d)*F+d*D)+x*((1-d)*I+d*R))}function n(v){var s=v.shape.length|0,o=new Array(s),b=new Array(s),g=new Array(s),d=new Array(s),f,y;for(f=0;f<s;++f)y=+arguments[f+1],o[f]=Math.floor(y),b[f]=y-o[f],g[f]=0<=o[f]&&o[f]<v.shape[f],d[f]=0<=o[f]+1&&o[f]+1<v.shape[f];var l=0,x,u,M;e:for(f=0;f<1<<s;++f){for(u=1,M=v.offset,x=0;x<s;++x)if(f&1<<x){if(!d[x])continue e;u*=b[x],M+=v.stride[x]*(o[x]+1)}else{if(!g[x])continue e;u*=1-b[x],M+=v.stride[x]*o[x]}l+=u*v.data[M]}return l}function r(v,s,o,b){switch(v.shape.length){case 0:return 0;case 1:return e(v,s);case 2:return a(v,s,o);case 3:return i(v,s,o,b);default:return n.apply(void 0,arguments)}}A.exports=r,A.exports.d1=e,A.exports.d2=a,A.exports.d3=i},{}],254:[function(c,A,T){var e={"float64,2,1,0":function(){return function(b,g,d,f,y){var l=b[0],x=b[1],u=b[2],M=d[0],_=d[1],p=d[2];f|=0;var w=0,h=0,L=0,S=p,E=_-u*p,P=M-x*_;for(L=0;L<l;++L){for(h=0;h<x;++h){for(w=0;w<u;++w)g[f]/=y,f+=S;f+=E}f+=P}}},"uint8,2,0,1,float64,2,1,0":function(){return function(b,g,d,f,y,l,x,u){var M=b[0],_=b[1],p=b[2],w=d[0],h=d[1],L=d[2],S=l[0],E=l[1],P=l[2];f|=0,x|=0;for(var F=f,I=x,D=b[0]|0;D>0;){D<64?(M=D,D=0):(M=64,D-=64);for(var R=b[1]|0;R>0;){R<64?(_=R,R=0):(_=64,R-=64),f=F+D*w+R*h,x=I+D*S+R*E;var N=0,z=0,G=0,Y=L,ee=w-p*L,Z=h-M*w,X=P,ne=S-p*P,ce=E-M*S;for(G=0;G<_;++G){for(z=0;z<M;++z){for(N=0;N<p;++N)g[f]=y[x]*u,f+=Y,x+=X;f+=ee,x+=ne}f+=Z,x+=ce}}}}},"float32,1,0,float32,1,0":function(){return function(b,g,d,f,y,l,x){var u=b[0],M=b[1],_=d[0],p=d[1],w=l[0],h=l[1];f|=0,x|=0;var L=0,S=0,E=p,P=_-M*p,F=h,I=w-M*h;for(S=0;S<u;++S){for(L=0;L<M;++L)g[f]=y[x],f+=E,x+=F;f+=P,x+=I}}},"float32,1,0,float32,0,1":function(){return function(b,g,d,f,y,l,x){var u=b[0],M=b[1],_=d[0],p=d[1],w=l[0],h=l[1];f|=0,x|=0;for(var L=f,S=x,E=b[1]|0;E>0;){E<64?(M=E,E=0):(M=64,E-=64);for(var P=b[0]|0;P>0;){P<64?(u=P,P=0):(u=64,P-=64),f=L+E*p+P*_,x=S+E*h+P*w;var F=0,I=0,D=p,R=_-M*p,N=h,z=w-M*h;for(I=0;I<u;++I){for(F=0;F<M;++F)g[f]=y[x],f+=D,x+=N;f+=R,x+=z}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(b,g,d,f,y,l,x){var u=b[0],M=b[1],_=b[2],p=d[0],w=d[1],h=d[2],L=l[0],S=l[1],E=l[2];f|=0,x|=0;for(var P=f,F=x,I=b[2]|0;I>0;){I<64?(_=I,I=0):(_=64,I-=64);for(var D=b[0]|0;D>0;){D<64?(u=D,D=0):(u=64,D-=64);for(var R=b[1]|0;R>0;){R<64?(M=R,R=0):(M=64,R-=64),f=P+I*h+D*p+R*w,x=F+I*E+D*L+R*S;var N=0,z=0,G=0,Y=h,ee=p-_*h,Z=w-u*p,X=E,ne=L-_*E,ce=S-u*L;for(G=0;G<M;++G){for(z=0;z<u;++z){for(N=0;N<_;++N)g[f]=y[x],f+=Y,x+=X;f+=ee,x+=ne}f+=Z,x+=ce}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(b,g,d,f,y,l,x){var u=b[0],M=b[1],_=b[2],p=d[0],w=d[1],h=d[2],L=l[0],S=l[1],E=l[2];f|=0,x|=0;var P=0,F=0,I=0,D=h,R=p-_*h,N=w-u*p,z=E,G=L-_*E,Y=S-u*L;for(I=0;I<M;++I){for(F=0;F<u;++F){for(P=0;P<_;++P)g[f]=y[x],f+=D,x+=z;f+=R,x+=G}f+=N,x+=Y}}}};function a(o,b){var g=b.join(","),d=e[g];return d()}var i=a,n={mul:function(o){var b={};return function(d,f,y){var l=d.dtype,x=d.order,u=f.dtype,M=f.order,_=y.dtype,p=y.order,w=[l,x.join(),u,M.join(),_,p.join()].join(),h=b[w];return h||(b[w]=h=o([l,x,u,M,_,p])),h(d.shape.slice(0),d.data,d.stride,d.offset|0,f.data,f.stride,f.offset|0,y.data,y.stride,y.offset|0)}},muls:function(o){var b={};return function(d,f,y){var l=d.dtype,x=d.order,u=f.dtype,M=f.order,_=[l,x.join(),u,M.join()].join(),p=b[_];return p||(b[_]=p=o([l,x,u,M])),p(d.shape.slice(0),d.data,d.stride,d.offset|0,f.data,f.stride,f.offset|0,y)}},mulseq:function(o){var b={};return function(d,f){var y=d.dtype,l=d.order,x=[y,l.join()].join(),u=b[x];return u||(b[x]=u=o([y,l])),u(d.shape.slice(0),d.data,d.stride,d.offset|0,f)}},div:function(o){var b={};return function(d,f,y){var l=d.dtype,x=d.order,u=f.dtype,M=f.order,_=y.dtype,p=y.order,w=[l,x.join(),u,M.join(),_,p.join()].join(),h=b[w];return h||(b[w]=h=o([l,x,u,M,_,p])),h(d.shape.slice(0),d.data,d.stride,d.offset|0,f.data,f.stride,f.offset|0,y.data,y.stride,y.offset|0)}},divs:function(o){var b={};return function(d,f,y){var l=d.dtype,x=d.order,u=f.dtype,M=f.order,_=[l,x.join(),u,M.join()].join(),p=b[_];return p||(b[_]=p=o([l,x,u,M])),p(d.shape.slice(0),d.data,d.stride,d.offset|0,f.data,f.stride,f.offset|0,y)}},divseq:function(o){var b={};return function(d,f){var y=d.dtype,l=d.order,x=[y,l.join()].join(),u=b[x];return u||(b[x]=u=o([y,l])),u(d.shape.slice(0),d.data,d.stride,d.offset|0,f)}},assign:function(o){var b={};return function(d,f){var y=d.dtype,l=d.order,x=f.dtype,u=f.order,M=[y,l.join(),x,u.join()].join(),_=b[M];return _||(b[M]=_=o([y,l,x,u])),_(d.shape.slice(0),d.data,d.stride,d.offset|0,f.data,f.stride,f.offset|0)}}};function r(o){var b=n[o.funcName];return b(i.bind(void 0,o))}function v(o){return r({funcName:o.funcName})}var s={mul:"*",div:"/"};(function(){for(var o in s)T[o]=v({funcName:o}),T[o+"s"]=v({funcName:o+"s"}),T[o+"seq"]=v({funcName:o+"seq"})})(),T.assign=v({funcName:"assign"})},{}],255:[function(c,A,T){var e=c("ndarray"),a=c("./doConvert.js");A.exports=function(n,r){for(var v=[],s=n,o=1;Array.isArray(s);)v.push(s.length),o*=s.length,s=s[0];return v.length===0?e():(r||(r=e(new Float64Array(o),v)),a(r,n),r)}},{"./doConvert.js":256,ndarray:259}],256:[function(c,A,T){function e(){return function(s,o,b,g,d){var f=s[0],y=s[1],l=s[2],x=b[0],u=b[1],M=b[2],_=[0,0,0];g|=0;var p=0,w=0,h=0,L=M,S=u-l*M,E=x-y*u;for(h=0;h<f;++h){for(w=0;w<y;++w){for(p=0;p<l;++p){{var P=d,F;for(F=0;F<_.length-1;++F)P=P[_[F]];o[g]=P[_[_.length-1]]}g+=L,++_[2]}g+=S,_[2]-=l,++_[1]}g+=E,_[1]-=y,++_[0]}}}function a(){return e()}var i=a;function n(s){var o={};return function(g,d){var f=g.dtype,y=g.order,l=[f,y.join()].join(),x=o[l];return x||(o[l]=x=s([f,y])),x(g.shape.slice(0),g.data,g.stride,g.offset|0,d)}}function r(s){return n(i.bind(void 0,s))}function v(s){return r({funcName:s.funcName})}A.exports=v({funcName:"convert"})},{}],257:[function(c,A,T){var e=c("typedarray-pool");function a(b){switch(b){case"uint32":return[e.mallocUint32,e.freeUint32];default:return null}}var i={"uint32,1,0":function(b,g){return function(f,y,l,x,u,M,_,p,w,h,L){var S,E,P,F=f*u+x,I,D=b(p),R,N,z,G;for(S=f+1;S<=y;++S){for(E=S,F+=u,P=F,R=0,N=F,I=0;I<p;++I)D[R++]=l[N],N+=w;e:for(;E-- >f;){R=0,N=P-u;t:for(I=0;I<p;++I){if(z=l[N],G=D[R],z<G)break e;if(z>G)break t;N+=h,R+=L}for(R=P,N=P-u,I=0;I<p;++I)l[R]=l[N],R+=w,N+=w;P-=u}for(R=P,N=0,I=0;I<p;++I)l[R]=D[N++],R+=w}g(D)}}};function n(b,g){var d=a(g),f=[g,b].join(","),y=i[f];return d?y(d[0],d[1]):y()}var r={"uint32,1,0":function(b,g,d){return function f(y,l,x,u,M,_,p,w,h,L,S){var E=(l-y+1)/6|0,P=y+E,F=l-E,I=y+l>>1,D=I-E,R=I+E,N=P,z=D,G=I,Y=R,ee=F,Z=y+1,X=l-1,ne=!0,ce,Q,K,U,H,q,re,j,$,ie=0,oe=0,ae=0,se,_e,ue,ye,xe,me,be,ke,De,Ve,Ae,Le,je,Ye,ze,Ie,We=w,pt=g(We),Ft=g(We);_e=M*N,ue=M*z,Ie=u;e:for(se=0;se<w;++se){if(re=_e+Ie,j=ue+Ie,ae=x[re]-x[j],ae>0){Q=N,N=z,z=Q;break e}if(ae<0)break e;Ie+=L}_e=M*Y,ue=M*ee,Ie=u;e:for(se=0;se<w;++se){if(re=_e+Ie,j=ue+Ie,ae=x[re]-x[j],ae>0){Q=Y,Y=ee,ee=Q;break e}if(ae<0)break e;Ie+=L}_e=M*N,ue=M*G,Ie=u;e:for(se=0;se<w;++se){if(re=_e+Ie,j=ue+Ie,ae=x[re]-x[j],ae>0){Q=N,N=G,G=Q;break e}if(ae<0)break e;Ie+=L}_e=M*z,ue=M*G,Ie=u;e:for(se=0;se<w;++se){if(re=_e+Ie,j=ue+Ie,ae=x[re]-x[j],ae>0){Q=z,z=G,G=Q;break e}if(ae<0)break e;Ie+=L}_e=M*N,ue=M*Y,Ie=u;e:for(se=0;se<w;++se){if(re=_e+Ie,j=ue+Ie,ae=x[re]-x[j],ae>0){Q=N,N=Y,Y=Q;break e}if(ae<0)break e;Ie+=L}_e=M*G,ue=M*Y,Ie=u;e:for(se=0;se<w;++se){if(re=_e+Ie,j=ue+Ie,ae=x[re]-x[j],ae>0){Q=G,G=Y,Y=Q;break e}if(ae<0)break e;Ie+=L}_e=M*z,ue=M*ee,Ie=u;e:for(se=0;se<w;++se){if(re=_e+Ie,j=ue+Ie,ae=x[re]-x[j],ae>0){Q=z,z=ee,ee=Q;break e}if(ae<0)break e;Ie+=L}_e=M*z,ue=M*G,Ie=u;e:for(se=0;se<w;++se){if(re=_e+Ie,j=ue+Ie,ae=x[re]-x[j],ae>0){Q=z,z=G,G=Q;break e}if(ae<0)break e;Ie+=L}_e=M*Y,ue=M*ee,Ie=u;e:for(se=0;se<w;++se){if(re=_e+Ie,j=ue+Ie,ae=x[re]-x[j],ae>0){Q=Y,Y=ee,ee=Q;break e}if(ae<0)break e;Ie+=L}for(_e=M*N,ue=M*z,ye=M*G,xe=M*Y,me=M*ee,be=M*P,ke=M*I,De=M*F,ze=0,Ie=u,se=0;se<w;++se)re=_e+Ie,j=ue+Ie,$=ye+Ie,Ve=xe+Ie,Ae=me+Ie,Le=be+Ie,je=ke+Ie,Ye=De+Ie,pt[ze]=x[j],Ft[ze]=x[Ve],ne=ne&&pt[ze]===Ft[ze],K=x[re],U=x[$],H=x[Ae],x[Le]=K,x[je]=U,x[Ye]=H,++ze,Ie+=h;for(_e=M*D,ue=M*y,Ie=u,se=0;se<w;++se)re=_e+Ie,j=ue+Ie,x[re]=x[j],Ie+=h;for(_e=M*R,ue=M*l,Ie=u,se=0;se<w;++se)re=_e+Ie,j=ue+Ie,x[re]=x[j],Ie+=h;if(ne)for(q=Z;q<=X;++q){re=u+q*M,ze=0;e:for(se=0;se<w;++se){if(ae=x[re]-pt[ze],ae!==0)break e;ze+=S,re+=L}if(ae!==0)if(ae<0){if(q!==Z)for(_e=M*q,ue=M*Z,Ie=u,se=0;se<w;++se)re=_e+Ie,j=ue+Ie,ce=x[re],x[re]=x[j],x[j]=ce,Ie+=h;++Z}else for(;;){re=u+X*M,ze=0;e:for(se=0;se<w;++se){if(ae=x[re]-pt[ze],ae!==0)break e;ze+=S,re+=L}if(ae>0)X--;else if(ae<0){for(_e=M*q,ue=M*Z,ye=M*X,Ie=u,se=0;se<w;++se)re=_e+Ie,j=ue+Ie,$=ye+Ie,ce=x[re],x[re]=x[j],x[j]=x[$],x[$]=ce,Ie+=h;++Z,--X;break}else{for(_e=M*q,ue=M*X,Ie=u,se=0;se<w;++se)re=_e+Ie,j=ue+Ie,ce=x[re],x[re]=x[j],x[j]=ce,Ie+=h;--X;break}}}else for(q=Z;q<=X;++q){re=u+q*M,ze=0;e:for(se=0;se<w;++se){if(ie=x[re]-pt[ze],ie!==0)break e;ze+=S,re+=L}if(ie<0){if(q!==Z)for(_e=M*q,ue=M*Z,Ie=u,se=0;se<w;++se)re=_e+Ie,j=ue+Ie,ce=x[re],x[re]=x[j],x[j]=ce,Ie+=h;++Z}else{re=u+q*M,ze=0;e:for(se=0;se<w;++se){if(oe=x[re]-Ft[ze],oe!==0)break e;ze+=S,re+=L}if(oe>0)for(;;){re=u+X*M,ze=0;e:for(se=0;se<w;++se){if(ae=x[re]-Ft[ze],ae!==0)break e;ze+=S,re+=L}if(ae>0){if(--X<q)break;continue}else{re=u+X*M,ze=0;e:for(se=0;se<w;++se){if(ae=x[re]-pt[ze],ae!==0)break e;ze+=S,re+=L}if(ae<0){for(_e=M*q,ue=M*Z,ye=M*X,Ie=u,se=0;se<w;++se)re=_e+Ie,j=ue+Ie,$=ye+Ie,ce=x[re],x[re]=x[j],x[j]=x[$],x[$]=ce,Ie+=h;++Z,--X}else{for(_e=M*q,ue=M*X,Ie=u,se=0;se<w;++se)re=_e+Ie,j=ue+Ie,ce=x[re],x[re]=x[j],x[j]=ce,Ie+=h;--X}break}}}}for(_e=M*y,ue=M*(Z-1),ze=0,Ie=u,se=0;se<w;++se)re=_e+Ie,j=ue+Ie,x[re]=x[j],x[j]=pt[ze],++ze,Ie+=h;for(_e=M*l,ue=M*(X+1),ze=0,Ie=u,se=0;se<w;++se)re=_e+Ie,j=ue+Ie,x[re]=x[j],x[j]=Ft[ze],++ze,Ie+=h;if(Z-2-y<=32?b(y,Z-2,x,u,M,_,p,w,h,L,S):f(y,Z-2,x,u,M,_,p,w,h,L,S),l-(X+2)<=32?b(X+2,l,x,u,M,_,p,w,h,L,S):f(X+2,l,x,u,M,_,p,w,h,L,S),ne){d(pt),d(Ft);return}if(Z<P&&X>F){e:for(;;){for(re=u+Z*M,ze=0,Ie=u,se=0;se<w;++se){if(x[re]!==pt[ze])break e;++ze,re+=h}++Z}e:for(;;){for(re=u+X*M,ze=0,Ie=u,se=0;se<w;++se){if(x[re]!==Ft[ze])break e;++ze,re+=h}--X}for(q=Z;q<=X;++q){re=u+q*M,ze=0;e:for(se=0;se<w;++se){if(ie=x[re]-pt[ze],ie!==0)break e;ze+=S,re+=L}if(ie===0){if(q!==Z)for(_e=M*q,ue=M*Z,Ie=u,se=0;se<w;++se)re=_e+Ie,j=ue+Ie,ce=x[re],x[re]=x[j],x[j]=ce,Ie+=h;++Z}else{re=u+q*M,ze=0;e:for(se=0;se<w;++se){if(oe=x[re]-Ft[ze],oe!==0)break e;ze+=S,re+=L}if(oe===0)for(;;){re=u+X*M,ze=0;e:for(se=0;se<w;++se){if(ae=x[re]-Ft[ze],ae!==0)break e;ze+=S,re+=L}if(ae===0){if(--X<q)break;continue}else{re=u+X*M,ze=0;e:for(se=0;se<w;++se){if(ae=x[re]-pt[ze],ae!==0)break e;ze+=S,re+=L}if(ae<0){for(_e=M*q,ue=M*Z,ye=M*X,Ie=u,se=0;se<w;++se)re=_e+Ie,j=ue+Ie,$=ye+Ie,ce=x[re],x[re]=x[j],x[j]=x[$],x[$]=ce,Ie+=h;++Z,--X}else{for(_e=M*q,ue=M*X,Ie=u,se=0;se<w;++se)re=_e+Ie,j=ue+Ie,ce=x[re],x[re]=x[j],x[j]=ce,Ie+=h;--X}break}}}}}d(pt),d(Ft),X-Z<=32?b(Z,X,x,u,M,_,p,w,h,L,S):f(Z,X,x,u,M,_,p,w,h,L,S)}}};function v(b,g,d){var f=a(g),y=[g,b].join(","),l=r[y];return b.length>1&&f?l(d,f[0],f[1]):l(d)}var s={"uint32,1,0":function(b,g){return function(d){var f=d.data,y=d.offset|0,l=d.shape,x=d.stride,u=x[0]|0,M=l[0]|0,_=x[1]|0,p=l[1]|0,w=_,h=_,L=1;M<=32?b(0,M-1,f,y,u,_,M,p,w,h,L):g(0,M-1,f,y,u,_,M,p,w,h,L)}}};function o(b,g){var d=[g,b].join(","),f=s[d],y=n(b,g),l=v(b,g,y);return f(y,l)}A.exports=o},{"typedarray-pool":308}],258:[function(c,A,T){var e=c("./lib/compile_sort.js"),a={};function i(n){var r=n.order,v=n.dtype,s=[r,v],o=s.join(":"),b=a[o];return b||(a[o]=b=e(r,v)),b(n),n}A.exports=i},{"./lib/compile_sort.js":257}],259:[function(c,A,T){var e=c("is-buffer"),a=typeof Float64Array<"u";function i(g,d){return g[0]-d[0]}function n(){var g=this.stride,d=new Array(g.length),f;for(f=0;f<d.length;++f)d[f]=[Math.abs(g[f]),f];d.sort(i);var y=new Array(d.length);for(f=0;f<y.length;++f)y[f]=d[f][1];return y}var r={T:function(g){function d(y){this.data=y}var f=d.prototype;return f.dtype=g,f.index=function(){return-1},f.size=0,f.dimension=-1,f.shape=f.stride=f.order=[],f.lo=f.hi=f.transpose=f.step=function(){return new d(this.data)},f.get=f.set=function(){},f.pick=function(){return null},function(l){return new d(l)}},0:function(g,d){function f(l,x){this.data=l,this.offset=x}var y=f.prototype;return y.dtype=g,y.index=function(){return this.offset},y.dimension=0,y.size=1,y.shape=y.stride=y.order=[],y.lo=y.hi=y.transpose=y.step=function(){return new f(this.data,this.offset)},y.pick=function(){return d(this.data)},y.valueOf=y.get=function(){return g==="generic"?this.data.get(this.offset):this.data[this.offset]},y.set=function(x){return g==="generic"?this.data.set(this.offset,x):this.data[this.offset]=x},function(x,u,M,_){return new f(x,_)}},1:function(g,d,f){function y(x,u,M,_){this.data=x,this.shape=[u],this.stride=[M],this.offset=_|0}var l=y.prototype;return l.dtype=g,l.dimension=1,Object.defineProperty(l,"size",{get:function(){return this.shape[0]}}),l.order=[0],l.set=function(u,M){return g==="generic"?this.data.set(this.offset+this.stride[0]*u,M):this.data[this.offset+this.stride[0]*u]=M},l.get=function(u){return g==="generic"?this.data.get(this.offset+this.stride[0]*u):this.data[this.offset+this.stride[0]*u]},l.index=function(u){return this.offset+this.stride[0]*u},l.hi=function(u){return new y(this.data,typeof u!="number"||u<0?this.shape[0]:u|0,this.stride[0],this.offset)},l.lo=function(u){var M=this.offset,_=0,p=this.shape[0],w=this.stride[0];return typeof u=="number"&&u>=0&&(_=u|0,M+=w*_,p-=_),new y(this.data,p,w,M)},l.step=function(u){var M=this.shape[0],_=this.stride[0],p=this.offset,w=0,h=Math.ceil;return typeof u=="number"&&(w=u|0,w<0?(p+=_*(M-1),M=h(-M/w)):M=h(M/w),_*=w),new y(this.data,M,_,p)},l.transpose=function(u){u=u===void 0?0:u|0;var M=this.shape,_=this.stride;return new y(this.data,M[u],_[u],this.offset)},l.pick=function(u){var M=[],_=[],p=this.offset;typeof u=="number"&&u>=0?p=p+this.stride[0]*u|0:(M.push(this.shape[0]),_.push(this.stride[0]));var w=d[M.length+1];return w(this.data,M,_,p)},function(u,M,_,p){return new y(u,M[0],_[0],p)}},2:function(g,d,f){function y(x,u,M,_,p,w){this.data=x,this.shape=[u,M],this.stride=[_,p],this.offset=w|0}var l=y.prototype;return l.dtype=g,l.dimension=2,Object.defineProperty(l,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(l,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),l.set=function(u,M,_){return g==="generic"?this.data.set(this.offset+this.stride[0]*u+this.stride[1]*M,_):this.data[this.offset+this.stride[0]*u+this.stride[1]*M]=_},l.get=function(u,M){return g==="generic"?this.data.get(this.offset+this.stride[0]*u+this.stride[1]*M):this.data[this.offset+this.stride[0]*u+this.stride[1]*M]},l.index=function(u,M){return this.offset+this.stride[0]*u+this.stride[1]*M},l.hi=function(u,M){return new y(this.data,typeof u!="number"||u<0?this.shape[0]:u|0,typeof M!="number"||M<0?this.shape[1]:M|0,this.stride[0],this.stride[1],this.offset)},l.lo=function(u,M){var _=this.offset,p=0,w=this.shape[0],h=this.shape[1],L=this.stride[0],S=this.stride[1];return typeof u=="number"&&u>=0&&(p=u|0,_+=L*p,w-=p),typeof M=="number"&&M>=0&&(p=M|0,_+=S*p,h-=p),new y(this.data,w,h,L,S,_)},l.step=function(u,M){var _=this.shape[0],p=this.shape[1],w=this.stride[0],h=this.stride[1],L=this.offset,S=0,E=Math.ceil;return typeof u=="number"&&(S=u|0,S<0?(L+=w*(_-1),_=E(-_/S)):_=E(_/S),w*=S),typeof M=="number"&&(S=M|0,S<0?(L+=h*(p-1),p=E(-p/S)):p=E(p/S),h*=S),new y(this.data,_,p,w,h,L)},l.transpose=function(u,M){u=u===void 0?0:u|0,M=M===void 0?1:M|0;var _=this.shape,p=this.stride;return new y(this.data,_[u],_[M],p[u],p[M],this.offset)},l.pick=function(u,M){var _=[],p=[],w=this.offset;typeof u=="number"&&u>=0?w=w+this.stride[0]*u|0:(_.push(this.shape[0]),p.push(this.stride[0])),typeof M=="number"&&M>=0?w=w+this.stride[1]*M|0:(_.push(this.shape[1]),p.push(this.stride[1]));var h=d[_.length+1];return h(this.data,_,p,w)},function(u,M,_,p){return new y(u,M[0],M[1],_[0],_[1],p)}},3:function(g,d,f){function y(x,u,M,_,p,w,h,L){this.data=x,this.shape=[u,M,_],this.stride=[p,w,h],this.offset=L|0}var l=y.prototype;return l.dtype=g,l.dimension=3,Object.defineProperty(l,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(l,"order",{get:function(){var u=Math.abs(this.stride[0]),M=Math.abs(this.stride[1]),_=Math.abs(this.stride[2]);return u>M?M>_?[2,1,0]:u>_?[1,2,0]:[1,0,2]:u>_?[2,0,1]:_>M?[0,1,2]:[0,2,1]}}),l.set=function(u,M,_,p){return g==="generic"?this.data.set(this.offset+this.stride[0]*u+this.stride[1]*M+this.stride[2]*_,p):this.data[this.offset+this.stride[0]*u+this.stride[1]*M+this.stride[2]*_]=p},l.get=function(u,M,_){return g==="generic"?this.data.get(this.offset+this.stride[0]*u+this.stride[1]*M+this.stride[2]*_):this.data[this.offset+this.stride[0]*u+this.stride[1]*M+this.stride[2]*_]},l.index=function(u,M,_){return this.offset+this.stride[0]*u+this.stride[1]*M+this.stride[2]*_},l.hi=function(u,M,_){return new y(this.data,typeof u!="number"||u<0?this.shape[0]:u|0,typeof M!="number"||M<0?this.shape[1]:M|0,typeof _!="number"||_<0?this.shape[2]:_|0,this.stride[0],this.stride[1],this.stride[2],this.offset)},l.lo=function(u,M,_){var p=this.offset,w=0,h=this.shape[0],L=this.shape[1],S=this.shape[2],E=this.stride[0],P=this.stride[1],F=this.stride[2];return typeof u=="number"&&u>=0&&(w=u|0,p+=E*w,h-=w),typeof M=="number"&&M>=0&&(w=M|0,p+=P*w,L-=w),typeof _=="number"&&_>=0&&(w=_|0,p+=F*w,S-=w),new y(this.data,h,L,S,E,P,F,p)},l.step=function(u,M,_){var p=this.shape[0],w=this.shape[1],h=this.shape[2],L=this.stride[0],S=this.stride[1],E=this.stride[2],P=this.offset,F=0,I=Math.ceil;return typeof u=="number"&&(F=u|0,F<0?(P+=L*(p-1),p=I(-p/F)):p=I(p/F),L*=F),typeof M=="number"&&(F=M|0,F<0?(P+=S*(w-1),w=I(-w/F)):w=I(w/F),S*=F),typeof _=="number"&&(F=_|0,F<0?(P+=E*(h-1),h=I(-h/F)):h=I(h/F),E*=F),new y(this.data,p,w,h,L,S,E,P)},l.transpose=function(u,M,_){u=u===void 0?0:u|0,M=M===void 0?1:M|0,_=_===void 0?2:_|0;var p=this.shape,w=this.stride;return new y(this.data,p[u],p[M],p[_],w[u],w[M],w[_],this.offset)},l.pick=function(u,M,_){var p=[],w=[],h=this.offset;typeof u=="number"&&u>=0?h=h+this.stride[0]*u|0:(p.push(this.shape[0]),w.push(this.stride[0])),typeof M=="number"&&M>=0?h=h+this.stride[1]*M|0:(p.push(this.shape[1]),w.push(this.stride[1])),typeof _=="number"&&_>=0?h=h+this.stride[2]*_|0:(p.push(this.shape[2]),w.push(this.stride[2]));var L=d[p.length+1];return L(this.data,p,w,h)},function(u,M,_,p){return new y(u,M[0],M[1],M[2],_[0],_[1],_[2],p)}},4:function(g,d,f){function y(x,u,M,_,p,w,h,L,S,E){this.data=x,this.shape=[u,M,_,p],this.stride=[w,h,L,S],this.offset=E|0}var l=y.prototype;return l.dtype=g,l.dimension=4,Object.defineProperty(l,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(l,"order",{get:f}),l.set=function(u,M,_,p,w){return g==="generic"?this.data.set(this.offset+this.stride[0]*u+this.stride[1]*M+this.stride[2]*_+this.stride[3]*p,w):this.data[this.offset+this.stride[0]*u+this.stride[1]*M+this.stride[2]*_+this.stride[3]*p]=w},l.get=function(u,M,_,p){return g==="generic"?this.data.get(this.offset+this.stride[0]*u+this.stride[1]*M+this.stride[2]*_+this.stride[3]*p):this.data[this.offset+this.stride[0]*u+this.stride[1]*M+this.stride[2]*_+this.stride[3]*p]},l.index=function(u,M,_,p){return this.offset+this.stride[0]*u+this.stride[1]*M+this.stride[2]*_+this.stride[3]*p},l.hi=function(u,M,_,p){return new y(this.data,typeof u!="number"||u<0?this.shape[0]:u|0,typeof M!="number"||M<0?this.shape[1]:M|0,typeof _!="number"||_<0?this.shape[2]:_|0,typeof p!="number"||p<0?this.shape[3]:p|0,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},l.lo=function(u,M,_,p){var w=this.offset,h=0,L=this.shape[0],S=this.shape[1],E=this.shape[2],P=this.shape[3],F=this.stride[0],I=this.stride[1],D=this.stride[2],R=this.stride[3];return typeof u=="number"&&u>=0&&(h=u|0,w+=F*h,L-=h),typeof M=="number"&&M>=0&&(h=M|0,w+=I*h,S-=h),typeof _=="number"&&_>=0&&(h=_|0,w+=D*h,E-=h),typeof p=="number"&&p>=0&&(h=p|0,w+=R*h,P-=h),new y(this.data,L,S,E,P,F,I,D,R,w)},l.step=function(u,M,_,p){var w=this.shape[0],h=this.shape[1],L=this.shape[2],S=this.shape[3],E=this.stride[0],P=this.stride[1],F=this.stride[2],I=this.stride[3],D=this.offset,R=0,N=Math.ceil;return typeof u=="number"&&(R=u|0,R<0?(D+=E*(w-1),w=N(-w/R)):w=N(w/R),E*=R),typeof M=="number"&&(R=M|0,R<0?(D+=P*(h-1),h=N(-h/R)):h=N(h/R),P*=R),typeof _=="number"&&(R=_|0,R<0?(D+=F*(L-1),L=N(-L/R)):L=N(L/R),F*=R),typeof p=="number"&&(R=p|0,R<0?(D+=I*(S-1),S=N(-S/R)):S=N(S/R),I*=R),new y(this.data,w,h,L,S,E,P,F,I,D)},l.transpose=function(u,M,_,p){u=u===void 0?0:u|0,M=M===void 0?1:M|0,_=_===void 0?2:_|0,p=p===void 0?3:p|0;var w=this.shape,h=this.stride;return new y(this.data,w[u],w[M],w[_],w[p],h[u],h[M],h[_],h[p],this.offset)},l.pick=function(u,M,_,p){var w=[],h=[],L=this.offset;typeof u=="number"&&u>=0?L=L+this.stride[0]*u|0:(w.push(this.shape[0]),h.push(this.stride[0])),typeof M=="number"&&M>=0?L=L+this.stride[1]*M|0:(w.push(this.shape[1]),h.push(this.stride[1])),typeof _=="number"&&_>=0?L=L+this.stride[2]*_|0:(w.push(this.shape[2]),h.push(this.stride[2])),typeof p=="number"&&p>=0?L=L+this.stride[3]*p|0:(w.push(this.shape[3]),h.push(this.stride[3]));var S=d[w.length+1];return S(this.data,w,h,L)},function(u,M,_,p){return new y(u,M[0],M[1],M[2],M[3],_[0],_[1],_[2],_[3],p)}},5:function(d,f,y){function l(u,M,_,p,w,h,L,S,E,P,F,I){this.data=u,this.shape=[M,_,p,w,h],this.stride=[L,S,E,P,F],this.offset=I|0}var x=l.prototype;return x.dtype=d,x.dimension=5,Object.defineProperty(x,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(x,"order",{get:y}),x.set=function(M,_,p,w,h,L){return d==="generic"?this.data.set(this.offset+this.stride[0]*M+this.stride[1]*_+this.stride[2]*p+this.stride[3]*w+this.stride[4]*h,L):this.data[this.offset+this.stride[0]*M+this.stride[1]*_+this.stride[2]*p+this.stride[3]*w+this.stride[4]*h]=L},x.get=function(M,_,p,w,h){return d==="generic"?this.data.get(this.offset+this.stride[0]*M+this.stride[1]*_+this.stride[2]*p+this.stride[3]*w+this.stride[4]*h):this.data[this.offset+this.stride[0]*M+this.stride[1]*_+this.stride[2]*p+this.stride[3]*w+this.stride[4]*h]},x.index=function(M,_,p,w,h){return this.offset+this.stride[0]*M+this.stride[1]*_+this.stride[2]*p+this.stride[3]*w+this.stride[4]*h},x.hi=function(M,_,p,w,h){return new l(this.data,typeof M!="number"||M<0?this.shape[0]:M|0,typeof _!="number"||_<0?this.shape[1]:_|0,typeof p!="number"||p<0?this.shape[2]:p|0,typeof w!="number"||w<0?this.shape[3]:w|0,typeof h!="number"||h<0?this.shape[4]:h|0,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},x.lo=function(M,_,p,w,h){var L=this.offset,S=0,E=this.shape[0],P=this.shape[1],F=this.shape[2],I=this.shape[3],D=this.shape[4],R=this.stride[0],N=this.stride[1],z=this.stride[2],G=this.stride[3],Y=this.stride[4];return typeof M=="number"&&M>=0&&(S=M|0,L+=R*S,E-=S),typeof _=="number"&&_>=0&&(S=_|0,L+=N*S,P-=S),typeof p=="number"&&p>=0&&(S=p|0,L+=z*S,F-=S),typeof w=="number"&&w>=0&&(S=w|0,L+=G*S,I-=S),typeof h=="number"&&h>=0&&(S=h|0,L+=Y*S,D-=S),new l(this.data,E,P,F,I,D,R,N,z,G,Y,L)},x.step=function(M,_,p,w,h){var L=this.shape[0],S=this.shape[1],E=this.shape[2],P=this.shape[3],F=this.shape[4],I=this.stride[0],D=this.stride[1],R=this.stride[2],N=this.stride[3],z=this.stride[4],G=this.offset,Y=0,ee=Math.ceil;return typeof M=="number"&&(Y=M|0,Y<0?(G+=I*(L-1),L=ee(-L/Y)):L=ee(L/Y),I*=Y),typeof _=="number"&&(Y=_|0,Y<0?(G+=D*(S-1),S=ee(-S/Y)):S=ee(S/Y),D*=Y),typeof p=="number"&&(Y=p|0,Y<0?(G+=R*(E-1),E=ee(-E/Y)):E=ee(E/Y),R*=Y),typeof w=="number"&&(Y=w|0,Y<0?(G+=N*(P-1),P=ee(-P/Y)):P=ee(P/Y),N*=Y),typeof h=="number"&&(Y=h|0,Y<0?(G+=z*(F-1),F=ee(-F/Y)):F=ee(F/Y),z*=Y),new l(this.data,L,S,E,P,F,I,D,R,N,z,G)},x.transpose=function(M,_,p,w,h){M=M===void 0?0:M|0,_=_===void 0?1:_|0,p=p===void 0?2:p|0,w=w===void 0?3:w|0,h=h===void 0?4:h|0;var L=this.shape,S=this.stride;return new l(this.data,L[M],L[_],L[p],L[w],L[h],S[M],S[_],S[p],S[w],S[h],this.offset)},x.pick=function(M,_,p,w,h){var L=[],S=[],E=this.offset;typeof M=="number"&&M>=0?E=E+this.stride[0]*M|0:(L.push(this.shape[0]),S.push(this.stride[0])),typeof _=="number"&&_>=0?E=E+this.stride[1]*_|0:(L.push(this.shape[1]),S.push(this.stride[1])),typeof p=="number"&&p>=0?E=E+this.stride[2]*p|0:(L.push(this.shape[2]),S.push(this.stride[2])),typeof w=="number"&&w>=0?E=E+this.stride[3]*w|0:(L.push(this.shape[3]),S.push(this.stride[3])),typeof h=="number"&&h>=0?E=E+this.stride[4]*h|0:(L.push(this.shape[4]),S.push(this.stride[4]));var P=f[L.length+1];return P(this.data,L,S,E)},function(M,_,p,w){return new l(M,_[0],_[1],_[2],_[3],_[4],p[0],p[1],p[2],p[3],p[4],w)}}};function v(g,d){var f=d===-1?"T":String(d),y=r[f];return d===-1?y(g):d===0?y(g,o[g][0]):y(g,o[g],n)}function s(g){if(e(g))return"buffer";if(a)switch(Object.prototype.toString.call(g)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(g)?"array":"generic"}var o={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};function b(g,d,f,y){if(g===void 0){var p=o.array[0];return p([])}else typeof g=="number"&&(g=[g]);d===void 0&&(d=[g.length]);var l=d.length;if(f===void 0){f=new Array(l);for(var x=l-1,u=1;x>=0;--x)f[x]=u,u*=d[x]}if(y===void 0){y=0;for(var x=0;x<l;++x)f[x]<0&&(y-=(d[x]-1)*f[x])}for(var M=s(g),_=o[M];_.length<=l+1;)_.push(v(M,_.length-1));var p=_[l+1];return p(g,d,f,y)}A.exports=b},{"is-buffer":237}],260:[function(c,A,T){var e=c("double-bits"),a=Math.pow(2,-1074),i=-1>>>0;A.exports=n;function n(r,v){if(isNaN(r)||isNaN(v))return NaN;if(r===v)return r;if(r===0)return v<0?-a:a;var s=e.hi(r),o=e.lo(r);return v>r==r>0?o===i?(s+=1,o=0):o+=1:o===0?(o=i,s-=1):o-=1,e.pack(o,s)}},{"double-bits":64}],261:[function(c,A,T){var e=1e-6,a=1e-6;T.vertexNormals=function(i,n,r){for(var v=n.length,s=new Array(v),o=r===void 0?e:r,b=0;b<v;++b)s[b]=[0,0,0];for(var b=0;b<i.length;++b)for(var g=i[b],d=0,f=g[g.length-1],y=g[0],l=0;l<g.length;++l){d=f,f=y,y=g[(l+1)%g.length];for(var x=n[d],u=n[f],M=n[y],_=new Array(3),p=0,w=new Array(3),h=0,L=0;L<3;++L)_[L]=x[L]-u[L],p+=_[L]*_[L],w[L]=M[L]-u[L],h+=w[L]*w[L];if(p*h>o)for(var S=s[f],E=1/Math.sqrt(p*h),L=0;L<3;++L){var P=(L+1)%3,F=(L+2)%3;S[L]+=E*(w[P]*_[F]-w[F]*_[P])}}for(var b=0;b<v;++b){for(var S=s[b],I=0,L=0;L<3;++L)I+=S[L]*S[L];if(I>o)for(var E=1/Math.sqrt(I),L=0;L<3;++L)S[L]*=E;else for(var L=0;L<3;++L)S[L]=0}return s},T.faceNormals=function(i,n,r){for(var v=i.length,s=new Array(v),o=r===void 0?a:r,b=0;b<v;++b){for(var g=i[b],d=new Array(3),f=0;f<3;++f)d[f]=n[g[f]];for(var y=new Array(3),l=new Array(3),f=0;f<3;++f)y[f]=d[1][f]-d[0][f],l[f]=d[2][f]-d[0][f];for(var x=new Array(3),u=0,f=0;f<3;++f){var M=(f+1)%3,_=(f+2)%3;x[f]=y[M]*l[_]-y[_]*l[M],u+=x[f]*x[f]}u>o?u=1/Math.sqrt(u):u=0;for(var f=0;f<3;++f)x[f]*=u;s[b]=x}return s}},{}],262:[function(c,A,T){A.exports=e;function e(a,i,n,r,v,s,o,b,g,d){var f=i+s+d;if(y>0){var y=Math.sqrt(f+1);a[0]=.5*(o-g)/y,a[1]=.5*(b-r)/y,a[2]=.5*(n-s)/y,a[3]=.5*y}else{var l=Math.max(i,s,d),y=Math.sqrt(2*l-f+1);i>=l?(a[0]=.5*y,a[1]=.5*(v+n)/y,a[2]=.5*(b+r)/y,a[3]=.5*(o-g)/y):s>=l?(a[0]=.5*(n+v)/y,a[1]=.5*y,a[2]=.5*(g+o)/y,a[3]=.5*(b-r)/y):(a[0]=.5*(r+b)/y,a[1]=.5*(o+g)/y,a[2]=.5*y,a[3]=.5*(n-v)/y)}return a}},{}],263:[function(c,A,T){A.exports=d;var e=c("filtered-vector"),a=c("gl-mat4/lookAt"),i=c("gl-mat4/fromQuat"),n=c("gl-mat4/invert"),r=c("./lib/quatFromFrame");function v(f,y,l){return Math.sqrt(Math.pow(f,2)+Math.pow(y,2)+Math.pow(l,2))}function s(f,y,l,x){return Math.sqrt(Math.pow(f,2)+Math.pow(y,2)+Math.pow(l,2)+Math.pow(x,2))}function o(f,y){var l=y[0],x=y[1],u=y[2],M=y[3],_=s(l,x,u,M);_>1e-6?(f[0]=l/_,f[1]=x/_,f[2]=u/_,f[3]=M/_):(f[0]=f[1]=f[2]=0,f[3]=1)}function b(f,y,l){this.radius=e([l]),this.center=e(y),this.rotation=e(f),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var g=b.prototype;g.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},g.recalcMatrix=function(f){this.radius.curve(f),this.center.curve(f),this.rotation.curve(f);var y=this.computedRotation;o(y,y);var l=this.computedMatrix;i(l,y);var x=this.computedCenter,u=this.computedEye,M=this.computedUp,_=Math.exp(this.computedRadius[0]);u[0]=x[0]+_*l[2],u[1]=x[1]+_*l[6],u[2]=x[2]+_*l[10],M[0]=l[1],M[1]=l[5],M[2]=l[9];for(var p=0;p<3;++p){for(var w=0,h=0;h<3;++h)w+=l[p+4*h]*u[h];l[12+p]=-w}},g.getMatrix=function(f,y){this.recalcMatrix(f);var l=this.computedMatrix;if(y){for(var x=0;x<16;++x)y[x]=l[x];return y}return l},g.idle=function(f){this.center.idle(f),this.radius.idle(f),this.rotation.idle(f)},g.flush=function(f){this.center.flush(f),this.radius.flush(f),this.rotation.flush(f)},g.pan=function(f,y,l,x){y=y||0,l=l||0,x=x||0,this.recalcMatrix(f);var u=this.computedMatrix,M=u[1],_=u[5],p=u[9],w=v(M,_,p);M/=w,_/=w,p/=w;var h=u[0],L=u[4],S=u[8],E=h*M+L*_+S*p;h-=M*E,L-=_*E,S-=p*E;var P=v(h,L,S);h/=P,L/=P,S/=P,u[2],u[6],u[10];var F=h*y+M*l,I=L*y+_*l,D=S*y+p*l;this.center.move(f,F,I,D);var R=Math.exp(this.computedRadius[0]);R=Math.max(1e-4,R+x),this.radius.set(f,Math.log(R))},g.rotate=function(f,y,l,x){this.recalcMatrix(f),y=y||0,l=l||0;var u=this.computedMatrix,M=u[0],_=u[4],p=u[8],w=u[1],h=u[5],L=u[9],S=u[2],E=u[6],P=u[10],F=y*M+l*w,I=y*_+l*h,D=y*p+l*L,R=-(E*D-P*I),N=-(P*F-S*D),z=-(S*I-E*F),G=Math.sqrt(Math.max(0,1-Math.pow(R,2)-Math.pow(N,2)-Math.pow(z,2))),Y=s(R,N,z,G);Y>1e-6?(R/=Y,N/=Y,z/=Y,G/=Y):(R=N=z=0,G=1);var ee=this.computedRotation,Z=ee[0],X=ee[1],ne=ee[2],ce=ee[3],Q=Z*G+ce*R+X*z-ne*N,K=X*G+ce*N+ne*R-Z*z,U=ne*G+ce*z+Z*N-X*R,H=ce*G-Z*R-X*N-ne*z;if(x){R=S,N=E,z=P;var q=Math.sin(x)/v(R,N,z);R*=q,N*=q,z*=q,G=Math.cos(y),Q=Q*G+H*R+K*z-U*N,K=K*G+H*N+U*R-Q*z,U=U*G+H*z+Q*N-K*R,H=H*G-Q*R-K*N-U*z}var re=s(Q,K,U,H);re>1e-6?(Q/=re,K/=re,U/=re,H/=re):(Q=K=U=0,H=1),this.rotation.set(f,Q,K,U,H)},g.lookAt=function(f,y,l,x){this.recalcMatrix(f),l=l||this.computedCenter,y=y||this.computedEye,x=x||this.computedUp;var u=this.computedMatrix;a(u,y,l,x);var M=this.computedRotation;r(M,u[0],u[1],u[2],u[4],u[5],u[6],u[8],u[9],u[10]),o(M,M),this.rotation.set(f,M[0],M[1],M[2],M[3]);for(var _=0,p=0;p<3;++p)_+=Math.pow(l[p]-y[p],2);this.radius.set(f,.5*Math.log(Math.max(_,1e-6))),this.center.set(f,l[0],l[1],l[2])},g.translate=function(f,y,l,x){this.center.move(f,y||0,l||0,x||0)},g.setMatrix=function(f,y){var l=this.computedRotation;r(l,y[0],y[1],y[2],y[4],y[5],y[6],y[8],y[9],y[10]),o(l,l),this.rotation.set(f,l[0],l[1],l[2],l[3]);var x=this.computedMatrix;n(x,y);var u=x[15];if(Math.abs(u)>1e-6){var M=x[12]/u,_=x[13]/u,p=x[14]/u;this.recalcMatrix(f);var w=Math.exp(this.computedRadius[0]);this.center.set(f,M-x[2]*w,_-x[6]*w,p-x[10]*w),this.radius.idle(f)}else this.center.idle(f),this.radius.idle(f)},g.setDistance=function(f,y){y>0&&this.radius.set(f,Math.log(y))},g.setDistanceLimits=function(f,y){f>0?f=Math.log(f):f=-1/0,y>0?y=Math.log(y):y=1/0,y=Math.max(y,f),this.radius.bounds[0][0]=f,this.radius.bounds[1][0]=y},g.getDistanceLimits=function(f){var y=this.radius.bounds;return f?(f[0]=Math.exp(y[0][0]),f[1]=Math.exp(y[1][0]),f):[Math.exp(y[0][0]),Math.exp(y[1][0])]},g.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},g.fromJSON=function(f){var y=this.lastT(),l=f.center;l&&this.center.set(y,l[0],l[1],l[2]);var x=f.rotation;x&&this.rotation.set(y,x[0],x[1],x[2],x[3]);var u=f.distance;u&&u>0&&this.radius.set(y,Math.log(u)),this.setDistanceLimits(f.zoomMin,f.zoomMax)};function d(f){f=f||{};var y=f.center||[0,0,0],l=f.rotation||[0,0,0,1],x=f.radius||1;y=[].slice.call(y,0,3),l=[].slice.call(l,0,4),o(l,l);var u=new b(l,y,Math.log(x));return u.setDistanceLimits(f.zoomMin,f.zoomMax),("eye"in f||"up"in f)&&u.lookAt(0,f.eye,f.center,f.up),u}},{"./lib/quatFromFrame":262,"filtered-vector":68,"gl-mat4/fromQuat":95,"gl-mat4/invert":98,"gl-mat4/lookAt":99}],264:[function(c,A,T){var e=c("repeat-string");A.exports=function(i,n,r){return r=typeof r<"u"?r+"":" ",e(r,n)+i}},{"repeat-string":277}],265:[function(c,A,T){A.exports=function(a,i){i||(i=[0,""]),a=String(a);var n=parseFloat(a,10);return i[0]=n,i[1]=a.match(/[\d.\-\+]*\s*(.*)/)[1]||"",i}},{}],266:[function(c,A,T){A.exports=a;var e=c("compare-angle");function a(i,n){for(var r=n.length|0,v=i.length,s=[new Array(r),new Array(r)],o=0;o<r;++o)s[0][o]=[],s[1][o]=[];for(var o=0;o<v;++o){var b=i[o];s[0][b[0]].push(b),s[1][b[1]].push(b)}for(var g=[],o=0;o<r;++o)s[0][o].length+s[1][o].length===0&&g.push([o]);function d(_,p){var w=s[p][_[p]];w.splice(w.indexOf(_),1)}function f(_,p,w){for(var h,L,S,E=0;E<2;++E)if(s[E][p].length>0){h=s[E][p][0],S=E;break}L=h[S^1];for(var P=0;P<2;++P)for(var F=s[P][p],I=0;I<F.length;++I){var D=F[I],R=D[P^1],N=e(n[_],n[p],n[L],n[R]);N>0&&(h=D,L=R,S=P)}return w||h&&d(h,S),L}function y(_,p){var w=s[p][_][0],h=[_];d(w,p);for(var L=w[p^1];;){for(;L!==_;)h.push(L),L=f(h[h.length-2],L,!1);if(s[0][_].length+s[1][_].length===0)break;var S=h[h.length-1],E=_,P=h[1],F=f(S,E,!0);if(e(n[S],n[E],n[P],n[F])<0)break;h.push(_),L=f(S,E)}return h}function l(_,p){return p[1]===p[p.length-1]}for(var o=0;o<r;++o)for(var x=0;x<2;++x){for(var u=[];s[x][o].length>0;){s[0][o].length;var M=y(o,x);l(u,M)?u.push.apply(u,M):(u.length>0&&g.push(u),u=M)}u.length>0&&g.push(u)}return g}},{"compare-angle":54}],267:[function(c,A,T){A.exports=a;var e=c("edges-to-adjacency-list");function a(i,n){for(var r=e(i,n.length),v=new Array(n.length),s=new Array(n.length),o=[],b=0;b<n.length;++b){var g=r[b].length;s[b]=g,v[b]=!0,g<=1&&o.push(b)}for(;o.length>0;){var d=o.pop();v[d]=!1;for(var f=r[d],b=0;b<f.length;++b){var y=f[b];--s[y]===0&&o.push(y)}}for(var l=new Array(n.length),x=[],b=0;b<n.length;++b)if(v[b]){var d=x.length;l[b]=d,x.push(n[b])}else l[b]=-1;for(var u=[],b=0;b<i.length;++b){var M=i[b];v[M[0]]&&v[M[1]]&&u.push([l[M[0]],l[M[1]]])}return[u,x]}},{"edges-to-adjacency-list":66}],268:[function(c,A,T){A.exports=g;var e=c("edges-to-adjacency-list"),a=c("planar-dual"),i=c("point-in-big-polygon"),n=c("two-product"),r=c("robust-sum"),v=c("uniq"),s=c("./lib/trim-leaves");function o(d,f){for(var y=new Array(d),l=0;l<d;++l)y[l]=f;return y}function b(d){for(var f=new Array(d),y=0;y<d;++y)f[y]=[];return f}function g(d,f){var H=s(d,f);d=H[0],f=H[1];var y=f.length;d.length;for(var l=e(d,f.length),x=0;x<y;++x)if(l[x].length%2===1)throw new Error("planar-graph-to-polyline: graph must be manifold");var u=a(d,f);function M(ae){for(var se=ae.length,_e=[0],ue=0;ue<se;++ue){var ye=f[ae[ue]],xe=f[ae[(ue+1)%se]],me=n(-ye[0],ye[1]),be=n(-ye[0],xe[1]),ke=n(xe[0],ye[1]),De=n(xe[0],xe[1]);_e=r(_e,r(r(me,be),r(ke,De)))}return _e[_e.length-1]>0}u=u.filter(M);for(var _=u.length,p=new Array(_),w=new Array(_),x=0;x<_;++x){p[x]=x;var h=new Array(_),L=u[x].map(function(se){return f[se]}),S=i([L]),E=0;e:for(var P=0;P<_;++P)if(h[P]=0,x!==P){for(var F=u[P],I=F.length,D=0;D<I;++D){var R=S(f[F[D]]);if(R!==0){R<0&&(h[P]=1,E+=1);continue e}}h[P]=1,E+=1}w[x]=[E,x,h]}w.sort(function(ae,se){return se[0]-ae[0]});for(var x=0;x<_;++x)for(var h=w[x],N=h[1],z=h[2],P=0;P<_;++P)z[P]&&(p[P]=N);for(var G=b(_),x=0;x<_;++x)G[x].push(p[x]),G[p[x]].push(x);for(var Y={},ee=o(y,!1),x=0;x<_;++x)for(var F=u[x],I=F.length,P=0;P<I;++P){var Z=F[P],X=F[(P+1)%I],ne=Math.min(Z,X)+":"+Math.max(Z,X);if(ne in Y){var ce=Y[ne];G[ce].push(x),G[x].push(ce),ee[Z]=ee[X]=!0}else Y[ne]=x}function Q(ae){for(var se=ae.length,_e=0;_e<se;++_e)if(!ee[ae[_e]])return!1;return!0}for(var K=[],U=o(_,-1),x=0;x<_;++x)p[x]===x&&!Q(u[x])?(K.push(x),U[x]=0):U[x]=-1;for(var H=[];K.length>0;){var q=K.pop(),re=G[q];v(re,function(ae,se){return ae-se});var j=re.length,$=U[q],ie;if($===0){var F=u[q];ie=[F]}for(var x=0;x<j;++x){var oe=re[x];if(!(U[oe]>=0)&&(U[oe]=$^1,K.push(oe),$===0)){var F=u[oe];Q(F)||(F.reverse(),ie.push(F))}}$===0&&H.push(ie)}return H}},{"./lib/trim-leaves":267,"edges-to-adjacency-list":66,"planar-dual":266,"point-in-big-polygon":269,"robust-sum":289,"two-product":306,uniq:310}],269:[function(c,A,T){A.exports=f;var e=c("robust-orientation")[3],a=c("slab-decomposition"),i=c("interval-tree-1d"),n=c("binary-search-bounds");function r(){return!0}function v(y){return function(l,x){var u=y[l];return u?!!u.queryPoint(x,r):!1}}function s(y){for(var l={},x=0;x<y.length;++x){var u=y[x],M=u[0][0],_=u[0][1],p=u[1][1],w=[Math.min(_,p),Math.max(_,p)];M in l?l[M].push(w):l[M]=[w]}for(var h={},L=Object.keys(l),x=0;x<L.length;++x){var S=l[L[x]];h[L[x]]=i(S)}return v(h)}function o(y,l){return function(x){var u=n.le(l,x[0]);if(u<0)return 1;var M=y[u];if(!M)if(u>0&&l[u]===x[0])M=y[u-1];else return 1;for(var _=1;M;){var p=M.key,w=e(x,p[0],p[1]);if(p[0][0]<p[1][0])if(w<0)M=M.left;else if(w>0)_=-1,M=M.right;else return 0;else if(w>0)M=M.left;else if(w<0)_=1,M=M.right;else return 0}return _}}function b(y){return 1}function g(y){return function(x){return y(x[0],x[1])?0:1}}function d(y,l){return function(u){return y(u[0],u[1])?0:l(u)}}function f(y){for(var l=y.length,x=[],u=[],M=0;M<l;++M)for(var _=y[M],p=_.length,w=p-1,h=0;h<p;w=h++){var L=_[w],S=_[h];L[0]===S[0]?u.push([L,S]):x.push([L,S])}if(x.length===0)return u.length===0?b:g(s(u));var E=a(x),P=o(E.slabs,E.coordinates);return u.length===0?P:d(s(u),P)}},{"binary-search-bounds":31,"interval-tree-1d":234,"robust-orientation":284,"slab-decomposition":299}],270:[function(c,A,T){var e=new Float64Array(4),a=new Float64Array(4),i=new Float64Array(4);function n(r,v,s,o,b){e.length<o.length&&(e=new Float64Array(o.length),a=new Float64Array(o.length),i=new Float64Array(o.length));for(var g=0;g<o.length;++g)e[g]=r[g]-o[g],a[g]=v[g]-r[g],i[g]=s[g]-r[g];for(var d=0,f=0,y=0,l=0,x=0,u=0,g=0;g<o.length;++g){var M=a[g],_=i[g],p=e[g];d+=M*M,f+=M*_,y+=_*_,l+=p*M,x+=p*_,u+=p*p}var w=Math.abs(d*y-f*f),h=f*x-y*l,L=f*l-d*x,S;if(h+L<=w)if(h<0)L<0&&l<0?(L=0,-l>=d?(h=1,S=d+2*l+u):(h=-l/d,S=l*h+u)):(h=0,x>=0?(L=0,S=u):-x>=y?(L=1,S=y+2*x+u):(L=-x/y,S=x*L+u));else if(L<0)L=0,l>=0?(h=0,S=u):-l>=d?(h=1,S=d+2*l+u):(h=-l/d,S=l*h+u);else{var E=1/w;h*=E,L*=E,S=h*(d*h+f*L+2*l)+L*(f*h+y*L+2*x)+u}else{var P,F,I,D;h<0?(P=f+l,F=y+x,F>P?(I=F-P,D=d-2*f+y,I>=D?(h=1,L=0,S=d+2*l+u):(h=I/D,L=1-h,S=h*(d*h+f*L+2*l)+L*(f*h+y*L+2*x)+u)):(h=0,F<=0?(L=1,S=y+2*x+u):x>=0?(L=0,S=u):(L=-x/y,S=x*L+u))):L<0?(P=f+x,F=d+l,F>P?(I=F-P,D=d-2*f+y,I>=D?(L=1,h=0,S=y+2*x+u):(L=I/D,h=1-L,S=h*(d*h+f*L+2*l)+L*(f*h+y*L+2*x)+u)):(L=0,F<=0?(h=1,S=d+2*l+u):l>=0?(h=0,S=u):(h=-l/d,S=l*h+u))):(I=y+x-f-l,I<=0?(h=0,L=1,S=y+2*x+u):(D=d-2*f+y,I>=D?(h=1,L=0,S=d+2*l+u):(h=I/D,L=1-h,S=h*(d*h+f*L+2*l)+L*(f*h+y*L+2*x)+u)))}for(var R=1-h-L,g=0;g<o.length;++g)b[g]=R*r[g]+h*v[g]+L*s[g];return S<0?0:S}A.exports=n},{}],271:[function(c,A,T){A.exports=c("gl-quat/slerp")},{"gl-quat/slerp":124}],272:[function(c,A,T){var e=c("big-rat/add");A.exports=a;function a(i,n){for(var r=i.length,v=new Array(r),s=0;s<r;++s)v[s]=e(i[s],n[s]);return v}},{"big-rat/add":15}],273:[function(c,A,T){A.exports=a;var e=c("big-rat");function a(i){for(var n=new Array(i.length),r=0;r<i.length;++r)n[r]=e(i[r]);return n}},{"big-rat":18}],274:[function(c,A,T){var e=c("big-rat"),a=c("big-rat/mul");A.exports=i;function i(n,r){for(var v=e(r),s=n.length,o=new Array(s),b=0;b<s;++b)o[b]=a(n[b],v);return o}},{"big-rat":18,"big-rat/mul":27}],275:[function(c,A,T){var e=c("big-rat/sub");A.exports=a;function a(i,n){for(var r=i.length,v=new Array(r),s=0;s<r;++s)v[s]=e(i[s],n[s]);return v}},{"big-rat/sub":29}],276:[function(c,A,T){var e=c("compare-cell"),a=c("compare-oriented-cell"),i=c("cell-orientation");A.exports=n;function n(r){r.sort(a);for(var v=r.length,s=0,o=0;o<v;++o){var b=r[o],g=i(b);if(g!==0){if(s>0){var d=r[s-1];if(e(b,d)===0&&i(d)!==g){s-=1;continue}}r[s++]=b}}return r.length=s,r}},{"cell-orientation":47,"compare-cell":56,"compare-oriented-cell":57}],277:[function(c,A,T){var e="",a;A.exports=i;function i(n,r){if(typeof n!="string")throw new TypeError("expected a string");if(r===1)return n;if(r===2)return n+n;var v=n.length*r;if(a!==n||typeof a>"u")a=n,e="";else if(e.length>=v)return e.substr(0,v);for(;v>e.length&&r>1;)r&1&&(e+=n),r>>=1,n+=n;return e+=n,e=e.substr(0,v),e}},{}],278:[function(c,A,T){(function(e){(function(){A.exports=e.performance&&e.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this)}).call(this,typeof m<"u"?m:typeof self<"u"?self:typeof window<"u"?window:{})},{}],279:[function(c,A,T){A.exports=e;function e(a){for(var i=a.length,n=a[a.length-1],r=i,v=i-2;v>=0;--v){var s=n,o=a[v];n=s+o;var b=n-s,g=o-b;g&&(a[--r]=n,n=g)}for(var d=0,v=r;v<i;++v){var s=a[v],o=n;n=s+o;var b=n-s,g=o-b;g&&(a[d++]=g)}return a[d++]=n,a.length=d,a}},{}],280:[function(c,A,T){var e=c("two-product"),a=c("robust-sum"),i=c("robust-scale"),n=c("robust-compress"),r=6;function v(l,x,u,M){return function(p){return M(l(u(p[0][0],p[1][1]),u(-p[0][1],p[1][0])))}}function s(l,x,u,M){return function(p){return M(l(x(l(u(p[1][1],p[2][2]),u(-p[1][2],p[2][1])),p[0][0]),l(x(l(u(p[1][0],p[2][2]),u(-p[1][2],p[2][0])),-p[0][1]),x(l(u(p[1][0],p[2][1]),u(-p[1][1],p[2][0])),p[0][2]))))}}function o(l,x,u,M){return function(p){return M(l(l(x(l(x(l(u(p[2][2],p[3][3]),u(-p[2][3],p[3][2])),p[1][1]),l(x(l(u(p[2][1],p[3][3]),u(-p[2][3],p[3][1])),-p[1][2]),x(l(u(p[2][1],p[3][2]),u(-p[2][2],p[3][1])),p[1][3]))),p[0][0]),x(l(x(l(u(p[2][2],p[3][3]),u(-p[2][3],p[3][2])),p[1][0]),l(x(l(u(p[2][0],p[3][3]),u(-p[2][3],p[3][0])),-p[1][2]),x(l(u(p[2][0],p[3][2]),u(-p[2][2],p[3][0])),p[1][3]))),-p[0][1])),l(x(l(x(l(u(p[2][1],p[3][3]),u(-p[2][3],p[3][1])),p[1][0]),l(x(l(u(p[2][0],p[3][3]),u(-p[2][3],p[3][0])),-p[1][1]),x(l(u(p[2][0],p[3][1]),u(-p[2][1],p[3][0])),p[1][3]))),p[0][2]),x(l(x(l(u(p[2][1],p[3][2]),u(-p[2][2],p[3][1])),p[1][0]),l(x(l(u(p[2][0],p[3][2]),u(-p[2][2],p[3][0])),-p[1][1]),x(l(u(p[2][0],p[3][1]),u(-p[2][1],p[3][0])),p[1][2]))),-p[0][3]))))}}function b(l,x,u,M){return function(p){return M(l(l(x(l(l(x(l(x(l(u(p[3][3],p[4][4]),u(-p[3][4],p[4][3])),p[2][2]),l(x(l(u(p[3][2],p[4][4]),u(-p[3][4],p[4][2])),-p[2][3]),x(l(u(p[3][2],p[4][3]),u(-p[3][3],p[4][2])),p[2][4]))),p[1][1]),x(l(x(l(u(p[3][3],p[4][4]),u(-p[3][4],p[4][3])),p[2][1]),l(x(l(u(p[3][1],p[4][4]),u(-p[3][4],p[4][1])),-p[2][3]),x(l(u(p[3][1],p[4][3]),u(-p[3][3],p[4][1])),p[2][4]))),-p[1][2])),l(x(l(x(l(u(p[3][2],p[4][4]),u(-p[3][4],p[4][2])),p[2][1]),l(x(l(u(p[3][1],p[4][4]),u(-p[3][4],p[4][1])),-p[2][2]),x(l(u(p[3][1],p[4][2]),u(-p[3][2],p[4][1])),p[2][4]))),p[1][3]),x(l(x(l(u(p[3][2],p[4][3]),u(-p[3][3],p[4][2])),p[2][1]),l(x(l(u(p[3][1],p[4][3]),u(-p[3][3],p[4][1])),-p[2][2]),x(l(u(p[3][1],p[4][2]),u(-p[3][2],p[4][1])),p[2][3]))),-p[1][4]))),p[0][0]),x(l(l(x(l(x(l(u(p[3][3],p[4][4]),u(-p[3][4],p[4][3])),p[2][2]),l(x(l(u(p[3][2],p[4][4]),u(-p[3][4],p[4][2])),-p[2][3]),x(l(u(p[3][2],p[4][3]),u(-p[3][3],p[4][2])),p[2][4]))),p[1][0]),x(l(x(l(u(p[3][3],p[4][4]),u(-p[3][4],p[4][3])),p[2][0]),l(x(l(u(p[3][0],p[4][4]),u(-p[3][4],p[4][0])),-p[2][3]),x(l(u(p[3][0],p[4][3]),u(-p[3][3],p[4][0])),p[2][4]))),-p[1][2])),l(x(l(x(l(u(p[3][2],p[4][4]),u(-p[3][4],p[4][2])),p[2][0]),l(x(l(u(p[3][0],p[4][4]),u(-p[3][4],p[4][0])),-p[2][2]),x(l(u(p[3][0],p[4][2]),u(-p[3][2],p[4][0])),p[2][4]))),p[1][3]),x(l(x(l(u(p[3][2],p[4][3]),u(-p[3][3],p[4][2])),p[2][0]),l(x(l(u(p[3][0],p[4][3]),u(-p[3][3],p[4][0])),-p[2][2]),x(l(u(p[3][0],p[4][2]),u(-p[3][2],p[4][0])),p[2][3]))),-p[1][4]))),-p[0][1])),l(x(l(l(x(l(x(l(u(p[3][3],p[4][4]),u(-p[3][4],p[4][3])),p[2][1]),l(x(l(u(p[3][1],p[4][4]),u(-p[3][4],p[4][1])),-p[2][3]),x(l(u(p[3][1],p[4][3]),u(-p[3][3],p[4][1])),p[2][4]))),p[1][0]),x(l(x(l(u(p[3][3],p[4][4]),u(-p[3][4],p[4][3])),p[2][0]),l(x(l(u(p[3][0],p[4][4]),u(-p[3][4],p[4][0])),-p[2][3]),x(l(u(p[3][0],p[4][3]),u(-p[3][3],p[4][0])),p[2][4]))),-p[1][1])),l(x(l(x(l(u(p[3][1],p[4][4]),u(-p[3][4],p[4][1])),p[2][0]),l(x(l(u(p[3][0],p[4][4]),u(-p[3][4],p[4][0])),-p[2][1]),x(l(u(p[3][0],p[4][1]),u(-p[3][1],p[4][0])),p[2][4]))),p[1][3]),x(l(x(l(u(p[3][1],p[4][3]),u(-p[3][3],p[4][1])),p[2][0]),l(x(l(u(p[3][0],p[4][3]),u(-p[3][3],p[4][0])),-p[2][1]),x(l(u(p[3][0],p[4][1]),u(-p[3][1],p[4][0])),p[2][3]))),-p[1][4]))),p[0][2]),l(x(l(l(x(l(x(l(u(p[3][2],p[4][4]),u(-p[3][4],p[4][2])),p[2][1]),l(x(l(u(p[3][1],p[4][4]),u(-p[3][4],p[4][1])),-p[2][2]),x(l(u(p[3][1],p[4][2]),u(-p[3][2],p[4][1])),p[2][4]))),p[1][0]),x(l(x(l(u(p[3][2],p[4][4]),u(-p[3][4],p[4][2])),p[2][0]),l(x(l(u(p[3][0],p[4][4]),u(-p[3][4],p[4][0])),-p[2][2]),x(l(u(p[3][0],p[4][2]),u(-p[3][2],p[4][0])),p[2][4]))),-p[1][1])),l(x(l(x(l(u(p[3][1],p[4][4]),u(-p[3][4],p[4][1])),p[2][0]),l(x(l(u(p[3][0],p[4][4]),u(-p[3][4],p[4][0])),-p[2][1]),x(l(u(p[3][0],p[4][1]),u(-p[3][1],p[4][0])),p[2][4]))),p[1][2]),x(l(x(l(u(p[3][1],p[4][2]),u(-p[3][2],p[4][1])),p[2][0]),l(x(l(u(p[3][0],p[4][2]),u(-p[3][2],p[4][0])),-p[2][1]),x(l(u(p[3][0],p[4][1]),u(-p[3][1],p[4][0])),p[2][2]))),-p[1][4]))),-p[0][3]),x(l(l(x(l(x(l(u(p[3][2],p[4][3]),u(-p[3][3],p[4][2])),p[2][1]),l(x(l(u(p[3][1],p[4][3]),u(-p[3][3],p[4][1])),-p[2][2]),x(l(u(p[3][1],p[4][2]),u(-p[3][2],p[4][1])),p[2][3]))),p[1][0]),x(l(x(l(u(p[3][2],p[4][3]),u(-p[3][3],p[4][2])),p[2][0]),l(x(l(u(p[3][0],p[4][3]),u(-p[3][3],p[4][0])),-p[2][2]),x(l(u(p[3][0],p[4][2]),u(-p[3][2],p[4][0])),p[2][3]))),-p[1][1])),l(x(l(x(l(u(p[3][1],p[4][3]),u(-p[3][3],p[4][1])),p[2][0]),l(x(l(u(p[3][0],p[4][3]),u(-p[3][3],p[4][0])),-p[2][1]),x(l(u(p[3][0],p[4][1]),u(-p[3][1],p[4][0])),p[2][3]))),p[1][2]),x(l(x(l(u(p[3][1],p[4][2]),u(-p[3][2],p[4][1])),p[2][0]),l(x(l(u(p[3][0],p[4][2]),u(-p[3][2],p[4][0])),-p[2][1]),x(l(u(p[3][0],p[4][1]),u(-p[3][1],p[4][0])),p[2][2]))),-p[1][3]))),p[0][4])))))}}function g(l){var x=l===2?v:l===3?s:l===4?o:l===5?b:void 0;return x(a,i,e,n)}var d=[function(){return[0]},function(x){return[x[0][0]]}];function f(l,x,u,M,_,p,w,h){return function(S){switch(S.length){case 0:return l(S);case 1:return x(S);case 2:return u(S);case 3:return M(S);case 4:return _(S);case 5:return p(S)}var E=w[S.length];return E||(E=w[S.length]=h(S.length)),E(S)}}function y(){for(;d.length<r;)d.push(g(d.length));A.exports=f.apply(void 0,d.concat([d,g]));for(var l=0;l<d.length;++l)A.exports[l]=d[l]}y()},{"robust-compress":279,"robust-scale":286,"robust-sum":289,"two-product":306}],281:[function(c,A,T){var e=c("two-product"),a=c("robust-sum");A.exports=i;function i(n,r){for(var v=e(n[0],r[0]),s=1;s<n.length;++s)v=a(v,e(n[s],r[s]));return v}},{"robust-sum":289,"two-product":306}],282:[function(c,A,T){var e=c("two-product"),a=c("robust-sum"),i=c("robust-subtract"),n=c("robust-scale"),r=6;function v(_){var p=_===3?g:_===4?d:_===5?f:y;return p(a,i,e,n)}function s(){return 0}function o(){return 0}function b(){return 0}function g(_,p,w,h){function L(S,E,P){var F=w(S[0],S[0]),I=h(F,E[0]),D=h(F,P[0]),R=w(E[0],E[0]),N=h(R,S[0]),z=h(R,P[0]),G=w(P[0],P[0]),Y=h(G,S[0]),ee=h(G,E[0]),Z=_(p(ee,z),p(N,I)),X=p(Y,D),ne=p(Z,X);return ne[ne.length-1]}return L}function d(_,p,w,h){function L(S,E,P,F){var I=_(w(S[0],S[0]),w(S[1],S[1])),D=h(I,E[0]),R=h(I,P[0]),N=h(I,F[0]),z=_(w(E[0],E[0]),w(E[1],E[1])),G=h(z,S[0]),Y=h(z,P[0]),ee=h(z,F[0]),Z=_(w(P[0],P[0]),w(P[1],P[1])),X=h(Z,S[0]),ne=h(Z,E[0]),ce=h(Z,F[0]),Q=_(w(F[0],F[0]),w(F[1],F[1])),K=h(Q,S[0]),U=h(Q,E[0]),H=h(Q,P[0]),q=_(_(h(p(H,ce),E[1]),_(h(p(U,ee),-P[1]),h(p(ne,Y),F[1]))),_(h(p(U,ee),S[1]),_(h(p(K,N),-E[1]),h(p(G,D),F[1])))),re=_(_(h(p(H,ce),S[1]),_(h(p(K,N),-P[1]),h(p(X,R),F[1]))),_(h(p(ne,Y),S[1]),_(h(p(X,R),-E[1]),h(p(G,D),P[1])))),j=p(q,re);return j[j.length-1]}return L}function f(_,p,w,h){function L(S,E,P,F,I){var D=_(w(S[0],S[0]),_(w(S[1],S[1]),w(S[2],S[2]))),R=h(D,E[0]),N=h(D,P[0]),z=h(D,F[0]),G=h(D,I[0]),Y=_(w(E[0],E[0]),_(w(E[1],E[1]),w(E[2],E[2]))),ee=h(Y,S[0]),Z=h(Y,P[0]),X=h(Y,F[0]),ne=h(Y,I[0]),ce=_(w(P[0],P[0]),_(w(P[1],P[1]),w(P[2],P[2]))),Q=h(ce,S[0]),K=h(ce,E[0]),U=h(ce,F[0]),H=h(ce,I[0]),q=_(w(F[0],F[0]),_(w(F[1],F[1]),w(F[2],F[2]))),re=h(q,S[0]),j=h(q,E[0]),$=h(q,P[0]),ie=h(q,I[0]),oe=_(w(I[0],I[0]),_(w(I[1],I[1]),w(I[2],I[2]))),ae=h(oe,S[0]),se=h(oe,E[0]),_e=h(oe,P[0]),ue=h(oe,F[0]),ye=_(_(_(h(_(h(p(ue,ie),P[1]),_(h(p(_e,H),-F[1]),h(p($,U),I[1]))),E[2]),_(h(_(h(p(ue,ie),E[1]),_(h(p(se,ne),-F[1]),h(p(j,X),I[1]))),-P[2]),h(_(h(p(_e,H),E[1]),_(h(p(se,ne),-P[1]),h(p(K,Z),I[1]))),F[2]))),_(h(_(h(p($,U),E[1]),_(h(p(j,X),-P[1]),h(p(K,Z),F[1]))),-I[2]),_(h(_(h(p(ue,ie),E[1]),_(h(p(se,ne),-F[1]),h(p(j,X),I[1]))),S[2]),h(_(h(p(ue,ie),S[1]),_(h(p(ae,G),-F[1]),h(p(re,z),I[1]))),-E[2])))),_(_(h(_(h(p(se,ne),S[1]),_(h(p(ae,G),-E[1]),h(p(ee,R),I[1]))),F[2]),_(h(_(h(p(j,X),S[1]),_(h(p(re,z),-E[1]),h(p(ee,R),F[1]))),-I[2]),h(_(h(p($,U),E[1]),_(h(p(j,X),-P[1]),h(p(K,Z),F[1]))),S[2]))),_(h(_(h(p($,U),S[1]),_(h(p(re,z),-P[1]),h(p(Q,N),F[1]))),-E[2]),_(h(_(h(p(j,X),S[1]),_(h(p(re,z),-E[1]),h(p(ee,R),F[1]))),P[2]),h(_(h(p(K,Z),S[1]),_(h(p(Q,N),-E[1]),h(p(ee,R),P[1]))),-F[2]))))),xe=_(_(_(h(_(h(p(ue,ie),P[1]),_(h(p(_e,H),-F[1]),h(p($,U),I[1]))),S[2]),h(_(h(p(ue,ie),S[1]),_(h(p(ae,G),-F[1]),h(p(re,z),I[1]))),-P[2])),_(h(_(h(p(_e,H),S[1]),_(h(p(ae,G),-P[1]),h(p(Q,N),I[1]))),F[2]),h(_(h(p($,U),S[1]),_(h(p(re,z),-P[1]),h(p(Q,N),F[1]))),-I[2]))),_(_(h(_(h(p(_e,H),E[1]),_(h(p(se,ne),-P[1]),h(p(K,Z),I[1]))),S[2]),h(_(h(p(_e,H),S[1]),_(h(p(ae,G),-P[1]),h(p(Q,N),I[1]))),-E[2])),_(h(_(h(p(se,ne),S[1]),_(h(p(ae,G),-E[1]),h(p(ee,R),I[1]))),P[2]),h(_(h(p(K,Z),S[1]),_(h(p(Q,N),-E[1]),h(p(ee,R),P[1]))),-I[2])))),me=p(ye,xe);return me[me.length-1]}return L}function y(_,p,w,h){function L(S,E,P,F,I,D){var R=_(_(w(S[0],S[0]),w(S[1],S[1])),_(w(S[2],S[2]),w(S[3],S[3]))),N=h(R,E[0]),z=h(R,P[0]),G=h(R,F[0]),Y=h(R,I[0]),ee=h(R,D[0]),Z=_(_(w(E[0],E[0]),w(E[1],E[1])),_(w(E[2],E[2]),w(E[3],E[3]))),X=h(Z,S[0]),ne=h(Z,P[0]),ce=h(Z,F[0]),Q=h(Z,I[0]),K=h(Z,D[0]),U=_(_(w(P[0],P[0]),w(P[1],P[1])),_(w(P[2],P[2]),w(P[3],P[3]))),H=h(U,S[0]),q=h(U,E[0]),re=h(U,F[0]),j=h(U,I[0]),$=h(U,D[0]),ie=_(_(w(F[0],F[0]),w(F[1],F[1])),_(w(F[2],F[2]),w(F[3],F[3]))),oe=h(ie,S[0]),ae=h(ie,E[0]),se=h(ie,P[0]),_e=h(ie,I[0]),ue=h(ie,D[0]),ye=_(_(w(I[0],I[0]),w(I[1],I[1])),_(w(I[2],I[2]),w(I[3],I[3]))),xe=h(ye,S[0]),me=h(ye,E[0]),be=h(ye,P[0]),ke=h(ye,F[0]),De=h(ye,D[0]),Ve=_(_(w(D[0],D[0]),w(D[1],D[1])),_(w(D[2],D[2]),w(D[3],D[3]))),Ae=h(Ve,S[0]),Le=h(Ve,E[0]),je=h(Ve,P[0]),Ye=h(Ve,F[0]),ze=h(Ve,I[0]),Ie=_(_(_(h(_(_(h(_(h(p(ze,De),F[1]),_(h(p(Ye,ue),-I[1]),h(p(ke,_e),D[1]))),P[2]),h(_(h(p(ze,De),P[1]),_(h(p(je,$),-I[1]),h(p(be,j),D[1]))),-F[2])),_(h(_(h(p(Ye,ue),P[1]),_(h(p(je,$),-F[1]),h(p(se,re),D[1]))),I[2]),h(_(h(p(ke,_e),P[1]),_(h(p(be,j),-F[1]),h(p(se,re),I[1]))),-D[2]))),E[3]),_(h(_(_(h(_(h(p(ze,De),F[1]),_(h(p(Ye,ue),-I[1]),h(p(ke,_e),D[1]))),E[2]),h(_(h(p(ze,De),E[1]),_(h(p(Le,K),-I[1]),h(p(me,Q),D[1]))),-F[2])),_(h(_(h(p(Ye,ue),E[1]),_(h(p(Le,K),-F[1]),h(p(ae,ce),D[1]))),I[2]),h(_(h(p(ke,_e),E[1]),_(h(p(me,Q),-F[1]),h(p(ae,ce),I[1]))),-D[2]))),-P[3]),h(_(_(h(_(h(p(ze,De),P[1]),_(h(p(je,$),-I[1]),h(p(be,j),D[1]))),E[2]),h(_(h(p(ze,De),E[1]),_(h(p(Le,K),-I[1]),h(p(me,Q),D[1]))),-P[2])),_(h(_(h(p(je,$),E[1]),_(h(p(Le,K),-P[1]),h(p(q,ne),D[1]))),I[2]),h(_(h(p(be,j),E[1]),_(h(p(me,Q),-P[1]),h(p(q,ne),I[1]))),-D[2]))),F[3]))),_(_(h(_(_(h(_(h(p(Ye,ue),P[1]),_(h(p(je,$),-F[1]),h(p(se,re),D[1]))),E[2]),h(_(h(p(Ye,ue),E[1]),_(h(p(Le,K),-F[1]),h(p(ae,ce),D[1]))),-P[2])),_(h(_(h(p(je,$),E[1]),_(h(p(Le,K),-P[1]),h(p(q,ne),D[1]))),F[2]),h(_(h(p(se,re),E[1]),_(h(p(ae,ce),-P[1]),h(p(q,ne),F[1]))),-D[2]))),-I[3]),h(_(_(h(_(h(p(ke,_e),P[1]),_(h(p(be,j),-F[1]),h(p(se,re),I[1]))),E[2]),h(_(h(p(ke,_e),E[1]),_(h(p(me,Q),-F[1]),h(p(ae,ce),I[1]))),-P[2])),_(h(_(h(p(be,j),E[1]),_(h(p(me,Q),-P[1]),h(p(q,ne),I[1]))),F[2]),h(_(h(p(se,re),E[1]),_(h(p(ae,ce),-P[1]),h(p(q,ne),F[1]))),-I[2]))),D[3])),_(h(_(_(h(_(h(p(ze,De),F[1]),_(h(p(Ye,ue),-I[1]),h(p(ke,_e),D[1]))),E[2]),h(_(h(p(ze,De),E[1]),_(h(p(Le,K),-I[1]),h(p(me,Q),D[1]))),-F[2])),_(h(_(h(p(Ye,ue),E[1]),_(h(p(Le,K),-F[1]),h(p(ae,ce),D[1]))),I[2]),h(_(h(p(ke,_e),E[1]),_(h(p(me,Q),-F[1]),h(p(ae,ce),I[1]))),-D[2]))),S[3]),h(_(_(h(_(h(p(ze,De),F[1]),_(h(p(Ye,ue),-I[1]),h(p(ke,_e),D[1]))),S[2]),h(_(h(p(ze,De),S[1]),_(h(p(Ae,ee),-I[1]),h(p(xe,Y),D[1]))),-F[2])),_(h(_(h(p(Ye,ue),S[1]),_(h(p(Ae,ee),-F[1]),h(p(oe,G),D[1]))),I[2]),h(_(h(p(ke,_e),S[1]),_(h(p(xe,Y),-F[1]),h(p(oe,G),I[1]))),-D[2]))),-E[3])))),_(_(_(h(_(_(h(_(h(p(ze,De),E[1]),_(h(p(Le,K),-I[1]),h(p(me,Q),D[1]))),S[2]),h(_(h(p(ze,De),S[1]),_(h(p(Ae,ee),-I[1]),h(p(xe,Y),D[1]))),-E[2])),_(h(_(h(p(Le,K),S[1]),_(h(p(Ae,ee),-E[1]),h(p(X,N),D[1]))),I[2]),h(_(h(p(me,Q),S[1]),_(h(p(xe,Y),-E[1]),h(p(X,N),I[1]))),-D[2]))),F[3]),h(_(_(h(_(h(p(Ye,ue),E[1]),_(h(p(Le,K),-F[1]),h(p(ae,ce),D[1]))),S[2]),h(_(h(p(Ye,ue),S[1]),_(h(p(Ae,ee),-F[1]),h(p(oe,G),D[1]))),-E[2])),_(h(_(h(p(Le,K),S[1]),_(h(p(Ae,ee),-E[1]),h(p(X,N),D[1]))),F[2]),h(_(h(p(ae,ce),S[1]),_(h(p(oe,G),-E[1]),h(p(X,N),F[1]))),-D[2]))),-I[3])),_(h(_(_(h(_(h(p(ke,_e),E[1]),_(h(p(me,Q),-F[1]),h(p(ae,ce),I[1]))),S[2]),h(_(h(p(ke,_e),S[1]),_(h(p(xe,Y),-F[1]),h(p(oe,G),I[1]))),-E[2])),_(h(_(h(p(me,Q),S[1]),_(h(p(xe,Y),-E[1]),h(p(X,N),I[1]))),F[2]),h(_(h(p(ae,ce),S[1]),_(h(p(oe,G),-E[1]),h(p(X,N),F[1]))),-I[2]))),D[3]),h(_(_(h(_(h(p(Ye,ue),P[1]),_(h(p(je,$),-F[1]),h(p(se,re),D[1]))),E[2]),h(_(h(p(Ye,ue),E[1]),_(h(p(Le,K),-F[1]),h(p(ae,ce),D[1]))),-P[2])),_(h(_(h(p(je,$),E[1]),_(h(p(Le,K),-P[1]),h(p(q,ne),D[1]))),F[2]),h(_(h(p(se,re),E[1]),_(h(p(ae,ce),-P[1]),h(p(q,ne),F[1]))),-D[2]))),S[3]))),_(_(h(_(_(h(_(h(p(Ye,ue),P[1]),_(h(p(je,$),-F[1]),h(p(se,re),D[1]))),S[2]),h(_(h(p(Ye,ue),S[1]),_(h(p(Ae,ee),-F[1]),h(p(oe,G),D[1]))),-P[2])),_(h(_(h(p(je,$),S[1]),_(h(p(Ae,ee),-P[1]),h(p(H,z),D[1]))),F[2]),h(_(h(p(se,re),S[1]),_(h(p(oe,G),-P[1]),h(p(H,z),F[1]))),-D[2]))),-E[3]),h(_(_(h(_(h(p(Ye,ue),E[1]),_(h(p(Le,K),-F[1]),h(p(ae,ce),D[1]))),S[2]),h(_(h(p(Ye,ue),S[1]),_(h(p(Ae,ee),-F[1]),h(p(oe,G),D[1]))),-E[2])),_(h(_(h(p(Le,K),S[1]),_(h(p(Ae,ee),-E[1]),h(p(X,N),D[1]))),F[2]),h(_(h(p(ae,ce),S[1]),_(h(p(oe,G),-E[1]),h(p(X,N),F[1]))),-D[2]))),P[3])),_(h(_(_(h(_(h(p(je,$),E[1]),_(h(p(Le,K),-P[1]),h(p(q,ne),D[1]))),S[2]),h(_(h(p(je,$),S[1]),_(h(p(Ae,ee),-P[1]),h(p(H,z),D[1]))),-E[2])),_(h(_(h(p(Le,K),S[1]),_(h(p(Ae,ee),-E[1]),h(p(X,N),D[1]))),P[2]),h(_(h(p(q,ne),S[1]),_(h(p(H,z),-E[1]),h(p(X,N),P[1]))),-D[2]))),-F[3]),h(_(_(h(_(h(p(se,re),E[1]),_(h(p(ae,ce),-P[1]),h(p(q,ne),F[1]))),S[2]),h(_(h(p(se,re),S[1]),_(h(p(oe,G),-P[1]),h(p(H,z),F[1]))),-E[2])),_(h(_(h(p(ae,ce),S[1]),_(h(p(oe,G),-E[1]),h(p(X,N),F[1]))),P[2]),h(_(h(p(q,ne),S[1]),_(h(p(H,z),-E[1]),h(p(X,N),P[1]))),-F[2]))),D[3]))))),We=_(_(_(h(_(_(h(_(h(p(ze,De),F[1]),_(h(p(Ye,ue),-I[1]),h(p(ke,_e),D[1]))),P[2]),h(_(h(p(ze,De),P[1]),_(h(p(je,$),-I[1]),h(p(be,j),D[1]))),-F[2])),_(h(_(h(p(Ye,ue),P[1]),_(h(p(je,$),-F[1]),h(p(se,re),D[1]))),I[2]),h(_(h(p(ke,_e),P[1]),_(h(p(be,j),-F[1]),h(p(se,re),I[1]))),-D[2]))),S[3]),_(h(_(_(h(_(h(p(ze,De),F[1]),_(h(p(Ye,ue),-I[1]),h(p(ke,_e),D[1]))),S[2]),h(_(h(p(ze,De),S[1]),_(h(p(Ae,ee),-I[1]),h(p(xe,Y),D[1]))),-F[2])),_(h(_(h(p(Ye,ue),S[1]),_(h(p(Ae,ee),-F[1]),h(p(oe,G),D[1]))),I[2]),h(_(h(p(ke,_e),S[1]),_(h(p(xe,Y),-F[1]),h(p(oe,G),I[1]))),-D[2]))),-P[3]),h(_(_(h(_(h(p(ze,De),P[1]),_(h(p(je,$),-I[1]),h(p(be,j),D[1]))),S[2]),h(_(h(p(ze,De),S[1]),_(h(p(Ae,ee),-I[1]),h(p(xe,Y),D[1]))),-P[2])),_(h(_(h(p(je,$),S[1]),_(h(p(Ae,ee),-P[1]),h(p(H,z),D[1]))),I[2]),h(_(h(p(be,j),S[1]),_(h(p(xe,Y),-P[1]),h(p(H,z),I[1]))),-D[2]))),F[3]))),_(_(h(_(_(h(_(h(p(Ye,ue),P[1]),_(h(p(je,$),-F[1]),h(p(se,re),D[1]))),S[2]),h(_(h(p(Ye,ue),S[1]),_(h(p(Ae,ee),-F[1]),h(p(oe,G),D[1]))),-P[2])),_(h(_(h(p(je,$),S[1]),_(h(p(Ae,ee),-P[1]),h(p(H,z),D[1]))),F[2]),h(_(h(p(se,re),S[1]),_(h(p(oe,G),-P[1]),h(p(H,z),F[1]))),-D[2]))),-I[3]),h(_(_(h(_(h(p(ke,_e),P[1]),_(h(p(be,j),-F[1]),h(p(se,re),I[1]))),S[2]),h(_(h(p(ke,_e),S[1]),_(h(p(xe,Y),-F[1]),h(p(oe,G),I[1]))),-P[2])),_(h(_(h(p(be,j),S[1]),_(h(p(xe,Y),-P[1]),h(p(H,z),I[1]))),F[2]),h(_(h(p(se,re),S[1]),_(h(p(oe,G),-P[1]),h(p(H,z),F[1]))),-I[2]))),D[3])),_(h(_(_(h(_(h(p(ze,De),P[1]),_(h(p(je,$),-I[1]),h(p(be,j),D[1]))),E[2]),h(_(h(p(ze,De),E[1]),_(h(p(Le,K),-I[1]),h(p(me,Q),D[1]))),-P[2])),_(h(_(h(p(je,$),E[1]),_(h(p(Le,K),-P[1]),h(p(q,ne),D[1]))),I[2]),h(_(h(p(be,j),E[1]),_(h(p(me,Q),-P[1]),h(p(q,ne),I[1]))),-D[2]))),S[3]),h(_(_(h(_(h(p(ze,De),P[1]),_(h(p(je,$),-I[1]),h(p(be,j),D[1]))),S[2]),h(_(h(p(ze,De),S[1]),_(h(p(Ae,ee),-I[1]),h(p(xe,Y),D[1]))),-P[2])),_(h(_(h(p(je,$),S[1]),_(h(p(Ae,ee),-P[1]),h(p(H,z),D[1]))),I[2]),h(_(h(p(be,j),S[1]),_(h(p(xe,Y),-P[1]),h(p(H,z),I[1]))),-D[2]))),-E[3])))),_(_(_(h(_(_(h(_(h(p(ze,De),E[1]),_(h(p(Le,K),-I[1]),h(p(me,Q),D[1]))),S[2]),h(_(h(p(ze,De),S[1]),_(h(p(Ae,ee),-I[1]),h(p(xe,Y),D[1]))),-E[2])),_(h(_(h(p(Le,K),S[1]),_(h(p(Ae,ee),-E[1]),h(p(X,N),D[1]))),I[2]),h(_(h(p(me,Q),S[1]),_(h(p(xe,Y),-E[1]),h(p(X,N),I[1]))),-D[2]))),P[3]),h(_(_(h(_(h(p(je,$),E[1]),_(h(p(Le,K),-P[1]),h(p(q,ne),D[1]))),S[2]),h(_(h(p(je,$),S[1]),_(h(p(Ae,ee),-P[1]),h(p(H,z),D[1]))),-E[2])),_(h(_(h(p(Le,K),S[1]),_(h(p(Ae,ee),-E[1]),h(p(X,N),D[1]))),P[2]),h(_(h(p(q,ne),S[1]),_(h(p(H,z),-E[1]),h(p(X,N),P[1]))),-D[2]))),-I[3])),_(h(_(_(h(_(h(p(be,j),E[1]),_(h(p(me,Q),-P[1]),h(p(q,ne),I[1]))),S[2]),h(_(h(p(be,j),S[1]),_(h(p(xe,Y),-P[1]),h(p(H,z),I[1]))),-E[2])),_(h(_(h(p(me,Q),S[1]),_(h(p(xe,Y),-E[1]),h(p(X,N),I[1]))),P[2]),h(_(h(p(q,ne),S[1]),_(h(p(H,z),-E[1]),h(p(X,N),P[1]))),-I[2]))),D[3]),h(_(_(h(_(h(p(ke,_e),P[1]),_(h(p(be,j),-F[1]),h(p(se,re),I[1]))),E[2]),h(_(h(p(ke,_e),E[1]),_(h(p(me,Q),-F[1]),h(p(ae,ce),I[1]))),-P[2])),_(h(_(h(p(be,j),E[1]),_(h(p(me,Q),-P[1]),h(p(q,ne),I[1]))),F[2]),h(_(h(p(se,re),E[1]),_(h(p(ae,ce),-P[1]),h(p(q,ne),F[1]))),-I[2]))),S[3]))),_(_(h(_(_(h(_(h(p(ke,_e),P[1]),_(h(p(be,j),-F[1]),h(p(se,re),I[1]))),S[2]),h(_(h(p(ke,_e),S[1]),_(h(p(xe,Y),-F[1]),h(p(oe,G),I[1]))),-P[2])),_(h(_(h(p(be,j),S[1]),_(h(p(xe,Y),-P[1]),h(p(H,z),I[1]))),F[2]),h(_(h(p(se,re),S[1]),_(h(p(oe,G),-P[1]),h(p(H,z),F[1]))),-I[2]))),-E[3]),h(_(_(h(_(h(p(ke,_e),E[1]),_(h(p(me,Q),-F[1]),h(p(ae,ce),I[1]))),S[2]),h(_(h(p(ke,_e),S[1]),_(h(p(xe,Y),-F[1]),h(p(oe,G),I[1]))),-E[2])),_(h(_(h(p(me,Q),S[1]),_(h(p(xe,Y),-E[1]),h(p(X,N),I[1]))),F[2]),h(_(h(p(ae,ce),S[1]),_(h(p(oe,G),-E[1]),h(p(X,N),F[1]))),-I[2]))),P[3])),_(h(_(_(h(_(h(p(be,j),E[1]),_(h(p(me,Q),-P[1]),h(p(q,ne),I[1]))),S[2]),h(_(h(p(be,j),S[1]),_(h(p(xe,Y),-P[1]),h(p(H,z),I[1]))),-E[2])),_(h(_(h(p(me,Q),S[1]),_(h(p(xe,Y),-E[1]),h(p(X,N),I[1]))),P[2]),h(_(h(p(q,ne),S[1]),_(h(p(H,z),-E[1]),h(p(X,N),P[1]))),-I[2]))),-F[3]),h(_(_(h(_(h(p(se,re),E[1]),_(h(p(ae,ce),-P[1]),h(p(q,ne),F[1]))),S[2]),h(_(h(p(se,re),S[1]),_(h(p(oe,G),-P[1]),h(p(H,z),F[1]))),-E[2])),_(h(_(h(p(ae,ce),S[1]),_(h(p(oe,G),-E[1]),h(p(X,N),F[1]))),P[2]),h(_(h(p(q,ne),S[1]),_(h(p(H,z),-E[1]),h(p(X,N),P[1]))),-F[2]))),I[3]))))),pt=p(Ie,We);return pt[pt.length-1]}return L}var l=[s,o,b];function x(_){var p=l[_.length];return p||(p=l[_.length]=v(_.length)),p.apply(void 0,_)}function u(_,p,w,h,L,S,E,P){function F(I,D,R,N,z,G){switch(arguments.length){case 0:case 1:return 0;case 2:return h(I,D);case 3:return L(I,D,R);case 4:return S(I,D,R,N);case 5:return E(I,D,R,N,z);case 6:return P(I,D,R,N,z,G)}for(var Y=new Array(arguments.length),ee=0;ee<arguments.length;++ee)Y[ee]=arguments[ee];return _(Y)}return F}function M(){for(;l.length<=r;)l.push(v(l.length));A.exports=u.apply(void 0,[x].concat(l));for(var _=0;_<=r;++_)A.exports[_]=l[_]}M()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],283:[function(c,A,T){var e=c("robust-determinant"),a=6;function i(l){var x=l===2?v:l===3?s:l===4?o:l===5?b:g;return l<6?x(e[l]):x(e)}function n(){return[[0]]}function r(l,x){return[[x[0]],[l[0][0]]]}function v(l){return function(u,M){return[l([[+M[0],+u[0][1]],[+M[1],+u[1][1]]]),l([[+u[0][0],+M[0]],[+u[1][0],+M[1]]]),l(u)]}}function s(l){return function(u,M){return[l([[+M[0],+u[0][1],+u[0][2]],[+M[1],+u[1][1],+u[1][2]],[+M[2],+u[2][1],+u[2][2]]]),l([[+u[0][0],+M[0],+u[0][2]],[+u[1][0],+M[1],+u[1][2]],[+u[2][0],+M[2],+u[2][2]]]),l([[+u[0][0],+u[0][1],+M[0]],[+u[1][0],+u[1][1],+M[1]],[+u[2][0],+u[2][1],+M[2]]]),l(u)]}}function o(l){return function(u,M){return[l([[+M[0],+u[0][1],+u[0][2],+u[0][3]],[+M[1],+u[1][1],+u[1][2],+u[1][3]],[+M[2],+u[2][1],+u[2][2],+u[2][3]],[+M[3],+u[3][1],+u[3][2],+u[3][3]]]),l([[+u[0][0],+M[0],+u[0][2],+u[0][3]],[+u[1][0],+M[1],+u[1][2],+u[1][3]],[+u[2][0],+M[2],+u[2][2],+u[2][3]],[+u[3][0],+M[3],+u[3][2],+u[3][3]]]),l([[+u[0][0],+u[0][1],+M[0],+u[0][3]],[+u[1][0],+u[1][1],+M[1],+u[1][3]],[+u[2][0],+u[2][1],+M[2],+u[2][3]],[+u[3][0],+u[3][1],+M[3],+u[3][3]]]),l([[+u[0][0],+u[0][1],+u[0][2],+M[0]],[+u[1][0],+u[1][1],+u[1][2],+M[1]],[+u[2][0],+u[2][1],+u[2][2],+M[2]],[+u[3][0],+u[3][1],+u[3][2],+M[3]]]),l(u)]}}function b(l){return function(u,M){return[l([[+M[0],+u[0][1],+u[0][2],+u[0][3],+u[0][4]],[+M[1],+u[1][1],+u[1][2],+u[1][3],+u[1][4]],[+M[2],+u[2][1],+u[2][2],+u[2][3],+u[2][4]],[+M[3],+u[3][1],+u[3][2],+u[3][3],+u[3][4]],[+M[4],+u[4][1],+u[4][2],+u[4][3],+u[4][4]]]),l([[+u[0][0],+M[0],+u[0][2],+u[0][3],+u[0][4]],[+u[1][0],+M[1],+u[1][2],+u[1][3],+u[1][4]],[+u[2][0],+M[2],+u[2][2],+u[2][3],+u[2][4]],[+u[3][0],+M[3],+u[3][2],+u[3][3],+u[3][4]],[+u[4][0],+M[4],+u[4][2],+u[4][3],+u[4][4]]]),l([[+u[0][0],+u[0][1],+M[0],+u[0][3],+u[0][4]],[+u[1][0],+u[1][1],+M[1],+u[1][3],+u[1][4]],[+u[2][0],+u[2][1],+M[2],+u[2][3],+u[2][4]],[+u[3][0],+u[3][1],+M[3],+u[3][3],+u[3][4]],[+u[4][0],+u[4][1],+M[4],+u[4][3],+u[4][4]]]),l([[+u[0][0],+u[0][1],+u[0][2],+M[0],+u[0][4]],[+u[1][0],+u[1][1],+u[1][2],+M[1],+u[1][4]],[+u[2][0],+u[2][1],+u[2][2],+M[2],+u[2][4]],[+u[3][0],+u[3][1],+u[3][2],+M[3],+u[3][4]],[+u[4][0],+u[4][1],+u[4][2],+M[4],+u[4][4]]]),l([[+u[0][0],+u[0][1],+u[0][2],+u[0][3],+M[0]],[+u[1][0],+u[1][1],+u[1][2],+u[1][3],+M[1]],[+u[2][0],+u[2][1],+u[2][2],+u[2][3],+M[2]],[+u[3][0],+u[3][1],+u[3][2],+u[3][3],+M[3]],[+u[4][0],+u[4][1],+u[4][2],+u[4][3],+M[4]]]),l(u)]}}function g(l){return function(u,M){return[l([[+M[0],+u[0][1],+u[0][2],+u[0][3],+u[0][4],+u[0][5]],[+M[1],+u[1][1],+u[1][2],+u[1][3],+u[1][4],+u[1][5]],[+M[2],+u[2][1],+u[2][2],+u[2][3],+u[2][4],+u[2][5]],[+M[3],+u[3][1],+u[3][2],+u[3][3],+u[3][4],+u[3][5]],[+M[4],+u[4][1],+u[4][2],+u[4][3],+u[4][4],+u[4][5]],[+M[5],+u[5][1],+u[5][2],+u[5][3],+u[5][4],+u[5][5]]]),l([[+u[0][0],+M[0],+u[0][2],+u[0][3],+u[0][4],+u[0][5]],[+u[1][0],+M[1],+u[1][2],+u[1][3],+u[1][4],+u[1][5]],[+u[2][0],+M[2],+u[2][2],+u[2][3],+u[2][4],+u[2][5]],[+u[3][0],+M[3],+u[3][2],+u[3][3],+u[3][4],+u[3][5]],[+u[4][0],+M[4],+u[4][2],+u[4][3],+u[4][4],+u[4][5]],[+u[5][0],+M[5],+u[5][2],+u[5][3],+u[5][4],+u[5][5]]]),l([[+u[0][0],+u[0][1],+M[0],+u[0][3],+u[0][4],+u[0][5]],[+u[1][0],+u[1][1],+M[1],+u[1][3],+u[1][4],+u[1][5]],[+u[2][0],+u[2][1],+M[2],+u[2][3],+u[2][4],+u[2][5]],[+u[3][0],+u[3][1],+M[3],+u[3][3],+u[3][4],+u[3][5]],[+u[4][0],+u[4][1],+M[4],+u[4][3],+u[4][4],+u[4][5]],[+u[5][0],+u[5][1],+M[5],+u[5][3],+u[5][4],+u[5][5]]]),l([[+u[0][0],+u[0][1],+u[0][2],+M[0],+u[0][4],+u[0][5]],[+u[1][0],+u[1][1],+u[1][2],+M[1],+u[1][4],+u[1][5]],[+u[2][0],+u[2][1],+u[2][2],+M[2],+u[2][4],+u[2][5]],[+u[3][0],+u[3][1],+u[3][2],+M[3],+u[3][4],+u[3][5]],[+u[4][0],+u[4][1],+u[4][2],+M[4],+u[4][4],+u[4][5]],[+u[5][0],+u[5][1],+u[5][2],+M[5],+u[5][4],+u[5][5]]]),l([[+u[0][0],+u[0][1],+u[0][2],+u[0][3],+M[0],+u[0][5]],[+u[1][0],+u[1][1],+u[1][2],+u[1][3],+M[1],+u[1][5]],[+u[2][0],+u[2][1],+u[2][2],+u[2][3],+M[2],+u[2][5]],[+u[3][0],+u[3][1],+u[3][2],+u[3][3],+M[3],+u[3][5]],[+u[4][0],+u[4][1],+u[4][2],+u[4][3],+M[4],+u[4][5]],[+u[5][0],+u[5][1],+u[5][2],+u[5][3],+M[5],+u[5][5]]]),l([[+u[0][0],+u[0][1],+u[0][2],+u[0][3],+u[0][4],+M[0]],[+u[1][0],+u[1][1],+u[1][2],+u[1][3],+u[1][4],+M[1]],[+u[2][0],+u[2][1],+u[2][2],+u[2][3],+u[2][4],+M[2]],[+u[3][0],+u[3][1],+u[3][2],+u[3][3],+u[3][4],+M[3]],[+u[4][0],+u[4][1],+u[4][2],+u[4][3],+u[4][4],+M[4]],[+u[5][0],+u[5][1],+u[5][2],+u[5][3],+u[5][4],+M[5]]]),l(u)]}}var d=[n,r];function f(l,x,u,M,_,p,w,h){return function(S,E){switch(S.length){case 0:return l(S,E);case 1:return x(S,E);case 2:return u(S,E);case 3:return M(S,E);case 4:return _(S,E);case 5:return p(S,E)}var P=w[S.length];return P||(P=w[S.length]=h(S.length)),P(S,E)}}function y(){for(;d.length<a;)d.push(i(d.length));A.exports=f.apply(void 0,d.concat([d,i]));for(var l=0;l<a;++l)A.exports[l]=d[l]}y()},{"robust-determinant":280}],284:[function(c,A,T){var e=c("two-product"),a=c("robust-sum"),i=c("robust-scale"),n=c("robust-subtract"),r=5,v=11102230246251565e-32,s=(3+16*v)*v,o=(7+56*v)*v;function b(p,w,h,L){return function(E,P,F){var I=p(p(w(P[1],F[0]),w(-F[1],P[0])),p(w(E[1],P[0]),w(-P[1],E[0]))),D=p(w(E[1],F[0]),w(-F[1],E[0])),R=L(I,D);return R[R.length-1]}}function g(p,w,h,L){return function(E,P,F,I){var D=p(p(h(p(w(F[1],I[0]),w(-I[1],F[0])),P[2]),p(h(p(w(P[1],I[0]),w(-I[1],P[0])),-F[2]),h(p(w(P[1],F[0]),w(-F[1],P[0])),I[2]))),p(h(p(w(P[1],I[0]),w(-I[1],P[0])),E[2]),p(h(p(w(E[1],I[0]),w(-I[1],E[0])),-P[2]),h(p(w(E[1],P[0]),w(-P[1],E[0])),I[2])))),R=p(p(h(p(w(F[1],I[0]),w(-I[1],F[0])),E[2]),p(h(p(w(E[1],I[0]),w(-I[1],E[0])),-F[2]),h(p(w(E[1],F[0]),w(-F[1],E[0])),I[2]))),p(h(p(w(P[1],F[0]),w(-F[1],P[0])),E[2]),p(h(p(w(E[1],F[0]),w(-F[1],E[0])),-P[2]),h(p(w(E[1],P[0]),w(-P[1],E[0])),F[2])))),N=L(D,R);return N[N.length-1]}}function d(p,w,h,L){return function(E,P,F,I,D){var R=p(p(p(h(p(h(p(w(I[1],D[0]),w(-D[1],I[0])),F[2]),p(h(p(w(F[1],D[0]),w(-D[1],F[0])),-I[2]),h(p(w(F[1],I[0]),w(-I[1],F[0])),D[2]))),P[3]),p(h(p(h(p(w(I[1],D[0]),w(-D[1],I[0])),P[2]),p(h(p(w(P[1],D[0]),w(-D[1],P[0])),-I[2]),h(p(w(P[1],I[0]),w(-I[1],P[0])),D[2]))),-F[3]),h(p(h(p(w(F[1],D[0]),w(-D[1],F[0])),P[2]),p(h(p(w(P[1],D[0]),w(-D[1],P[0])),-F[2]),h(p(w(P[1],F[0]),w(-F[1],P[0])),D[2]))),I[3]))),p(h(p(h(p(w(F[1],I[0]),w(-I[1],F[0])),P[2]),p(h(p(w(P[1],I[0]),w(-I[1],P[0])),-F[2]),h(p(w(P[1],F[0]),w(-F[1],P[0])),I[2]))),-D[3]),p(h(p(h(p(w(I[1],D[0]),w(-D[1],I[0])),P[2]),p(h(p(w(P[1],D[0]),w(-D[1],P[0])),-I[2]),h(p(w(P[1],I[0]),w(-I[1],P[0])),D[2]))),E[3]),h(p(h(p(w(I[1],D[0]),w(-D[1],I[0])),E[2]),p(h(p(w(E[1],D[0]),w(-D[1],E[0])),-I[2]),h(p(w(E[1],I[0]),w(-I[1],E[0])),D[2]))),-P[3])))),p(p(h(p(h(p(w(P[1],D[0]),w(-D[1],P[0])),E[2]),p(h(p(w(E[1],D[0]),w(-D[1],E[0])),-P[2]),h(p(w(E[1],P[0]),w(-P[1],E[0])),D[2]))),I[3]),p(h(p(h(p(w(P[1],I[0]),w(-I[1],P[0])),E[2]),p(h(p(w(E[1],I[0]),w(-I[1],E[0])),-P[2]),h(p(w(E[1],P[0]),w(-P[1],E[0])),I[2]))),-D[3]),h(p(h(p(w(F[1],I[0]),w(-I[1],F[0])),P[2]),p(h(p(w(P[1],I[0]),w(-I[1],P[0])),-F[2]),h(p(w(P[1],F[0]),w(-F[1],P[0])),I[2]))),E[3]))),p(h(p(h(p(w(F[1],I[0]),w(-I[1],F[0])),E[2]),p(h(p(w(E[1],I[0]),w(-I[1],E[0])),-F[2]),h(p(w(E[1],F[0]),w(-F[1],E[0])),I[2]))),-P[3]),p(h(p(h(p(w(P[1],I[0]),w(-I[1],P[0])),E[2]),p(h(p(w(E[1],I[0]),w(-I[1],E[0])),-P[2]),h(p(w(E[1],P[0]),w(-P[1],E[0])),I[2]))),F[3]),h(p(h(p(w(P[1],F[0]),w(-F[1],P[0])),E[2]),p(h(p(w(E[1],F[0]),w(-F[1],E[0])),-P[2]),h(p(w(E[1],P[0]),w(-P[1],E[0])),F[2]))),-I[3]))))),N=p(p(p(h(p(h(p(w(I[1],D[0]),w(-D[1],I[0])),F[2]),p(h(p(w(F[1],D[0]),w(-D[1],F[0])),-I[2]),h(p(w(F[1],I[0]),w(-I[1],F[0])),D[2]))),E[3]),h(p(h(p(w(I[1],D[0]),w(-D[1],I[0])),E[2]),p(h(p(w(E[1],D[0]),w(-D[1],E[0])),-I[2]),h(p(w(E[1],I[0]),w(-I[1],E[0])),D[2]))),-F[3])),p(h(p(h(p(w(F[1],D[0]),w(-D[1],F[0])),E[2]),p(h(p(w(E[1],D[0]),w(-D[1],E[0])),-F[2]),h(p(w(E[1],F[0]),w(-F[1],E[0])),D[2]))),I[3]),h(p(h(p(w(F[1],I[0]),w(-I[1],F[0])),E[2]),p(h(p(w(E[1],I[0]),w(-I[1],E[0])),-F[2]),h(p(w(E[1],F[0]),w(-F[1],E[0])),I[2]))),-D[3]))),p(p(h(p(h(p(w(F[1],D[0]),w(-D[1],F[0])),P[2]),p(h(p(w(P[1],D[0]),w(-D[1],P[0])),-F[2]),h(p(w(P[1],F[0]),w(-F[1],P[0])),D[2]))),E[3]),h(p(h(p(w(F[1],D[0]),w(-D[1],F[0])),E[2]),p(h(p(w(E[1],D[0]),w(-D[1],E[0])),-F[2]),h(p(w(E[1],F[0]),w(-F[1],E[0])),D[2]))),-P[3])),p(h(p(h(p(w(P[1],D[0]),w(-D[1],P[0])),E[2]),p(h(p(w(E[1],D[0]),w(-D[1],E[0])),-P[2]),h(p(w(E[1],P[0]),w(-P[1],E[0])),D[2]))),F[3]),h(p(h(p(w(P[1],F[0]),w(-F[1],P[0])),E[2]),p(h(p(w(E[1],F[0]),w(-F[1],E[0])),-P[2]),h(p(w(E[1],P[0]),w(-P[1],E[0])),F[2]))),-D[3])))),z=L(R,N);return z[z.length-1]}}function f(p){var w=p===3?b:p===4?g:d;return w(a,e,i,n)}var y=f(3),l=f(4),x=[function(){return 0},function(){return 0},function(w,h){return h[0]-w[0]},function(w,h,L){var S=(w[1]-L[1])*(h[0]-L[0]),E=(w[0]-L[0])*(h[1]-L[1]),P=S-E,F;if(S>0){if(E<=0)return P;F=S+E}else if(S<0){if(E>=0)return P;F=-(S+E)}else return P;var I=s*F;return P>=I||P<=-I?P:y(w,h,L)},function(w,h,L,S){var E=w[0]-S[0],P=h[0]-S[0],F=L[0]-S[0],I=w[1]-S[1],D=h[1]-S[1],R=L[1]-S[1],N=w[2]-S[2],z=h[2]-S[2],G=L[2]-S[2],Y=P*R,ee=F*D,Z=F*I,X=E*R,ne=E*D,ce=P*I,Q=N*(Y-ee)+z*(Z-X)+G*(ne-ce),K=(Math.abs(Y)+Math.abs(ee))*Math.abs(N)+(Math.abs(Z)+Math.abs(X))*Math.abs(z)+(Math.abs(ne)+Math.abs(ce))*Math.abs(G),U=o*K;return Q>U||-Q>U?Q:l(w,h,L,S)}];function u(p){var w=x[p.length];return w||(w=x[p.length]=f(p.length)),w.apply(void 0,p)}function M(p,w,h,L,S,E,P){return function(I,D,R,N,z){switch(arguments.length){case 0:case 1:return 0;case 2:return L(I,D);case 3:return S(I,D,R);case 4:return E(I,D,R,N);case 5:return P(I,D,R,N,z)}for(var G=new Array(arguments.length),Y=0;Y<arguments.length;++Y)G[Y]=arguments[Y];return p(G)}}function _(){for(;x.length<=r;)x.push(f(x.length));A.exports=M.apply(void 0,[u].concat(x));for(var p=0;p<=r;++p)A.exports[p]=x[p]}_()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],285:[function(c,A,T){var e=c("robust-sum"),a=c("robust-scale");A.exports=i;function i(n,r){if(n.length===1)return a(r,n[0]);if(r.length===1)return a(n,r[0]);if(n.length===0||r.length===0)return[0];var v=[0];if(n.length<r.length)for(var s=0;s<n.length;++s)v=e(v,a(r,n[s]));else for(var s=0;s<r.length;++s)v=e(v,a(n,r[s]));return v}},{"robust-scale":286,"robust-sum":289}],286:[function(c,A,T){var e=c("two-product"),a=c("two-sum");A.exports=i;function i(n,r){var v=n.length;if(v===1){var s=e(n[0],r);return s[0]?s:[s[1]]}var o=new Array(2*v),b=[.1,.1],g=[.1,.1],d=0;e(n[0],r,b),b[0]&&(o[d++]=b[0]);for(var f=1;f<v;++f){e(n[f],r,g);var y=b[1];a(y,g[0],b),b[0]&&(o[d++]=b[0]);var l=g[1],x=b[1],u=l+x,M=u-l,_=x-M;b[1]=u,_&&(o[d++]=_)}return b[1]&&(o[d++]=b[1]),d===0&&(o[d++]=0),o.length=d,o}},{"two-product":306,"two-sum":307}],287:[function(c,A,T){A.exports=i;var e=c("robust-orientation")[3];function a(n,r,v,s){for(var o=0;o<2;++o){var b=n[o],g=r[o],d=Math.min(b,g),f=Math.max(b,g),y=v[o],l=s[o],x=Math.min(y,l),u=Math.max(y,l);if(u<d||f<x)return!1}return!0}function i(n,r,v,s){var o=e(n,v,s),b=e(r,v,s);if(o>0&&b>0||o<0&&b<0)return!1;var g=e(v,n,r),d=e(s,n,r);return g>0&&d>0||g<0&&d<0?!1:o===0&&b===0&&g===0&&d===0?a(n,r,v,s):!0}},{"robust-orientation":284}],288:[function(c,A,T){A.exports=a;function e(i,n){var r=i+n,v=r-i,s=r-v,o=n-v,b=i-s,g=b+o;return g?[g,r]:[r]}function a(i,n){var r=i.length|0,v=n.length|0;if(r===1&&v===1)return e(i[0],-n[0]);var s=r+v,o=new Array(s),b=0,g=0,d=0,f=Math.abs,y=i[g],l=f(y),x=-n[d],u=f(x),M,_;l<u?(_=y,g+=1,g<r&&(y=i[g],l=f(y))):(_=x,d+=1,d<v&&(x=-n[d],u=f(x))),g<r&&l<u||d>=v?(M=y,g+=1,g<r&&(y=i[g],l=f(y))):(M=x,d+=1,d<v&&(x=-n[d],u=f(x)));for(var p=M+_,w=p-M,h=_-w,L=h,S=p,E,P,F,I,D;g<r&&d<v;)l<u?(M=y,g+=1,g<r&&(y=i[g],l=f(y))):(M=x,d+=1,d<v&&(x=-n[d],u=f(x))),_=L,p=M+_,w=p-M,h=_-w,h&&(o[b++]=h),E=S+p,P=E-S,F=E-P,I=p-P,D=S-F,L=D+I,S=E;for(;g<r;)M=y,_=L,p=M+_,w=p-M,h=_-w,h&&(o[b++]=h),E=S+p,P=E-S,F=E-P,I=p-P,D=S-F,L=D+I,S=E,g+=1,g<r&&(y=i[g]);for(;d<v;)M=x,_=L,p=M+_,w=p-M,h=_-w,h&&(o[b++]=h),E=S+p,P=E-S,F=E-P,I=p-P,D=S-F,L=D+I,S=E,d+=1,d<v&&(x=-n[d]);return L&&(o[b++]=L),S&&(o[b++]=S),b||(o[b++]=0),o.length=b,o}},{}],289:[function(c,A,T){A.exports=a;function e(i,n){var r=i+n,v=r-i,s=r-v,o=n-v,b=i-s,g=b+o;return g?[g,r]:[r]}function a(i,n){var r=i.length|0,v=n.length|0;if(r===1&&v===1)return e(i[0],n[0]);var s=r+v,o=new Array(s),b=0,g=0,d=0,f=Math.abs,y=i[g],l=f(y),x=n[d],u=f(x),M,_;l<u?(_=y,g+=1,g<r&&(y=i[g],l=f(y))):(_=x,d+=1,d<v&&(x=n[d],u=f(x))),g<r&&l<u||d>=v?(M=y,g+=1,g<r&&(y=i[g],l=f(y))):(M=x,d+=1,d<v&&(x=n[d],u=f(x)));for(var p=M+_,w=p-M,h=_-w,L=h,S=p,E,P,F,I,D;g<r&&d<v;)l<u?(M=y,g+=1,g<r&&(y=i[g],l=f(y))):(M=x,d+=1,d<v&&(x=n[d],u=f(x))),_=L,p=M+_,w=p-M,h=_-w,h&&(o[b++]=h),E=S+p,P=E-S,F=E-P,I=p-P,D=S-F,L=D+I,S=E;for(;g<r;)M=y,_=L,p=M+_,w=p-M,h=_-w,h&&(o[b++]=h),E=S+p,P=E-S,F=E-P,I=p-P,D=S-F,L=D+I,S=E,g+=1,g<r&&(y=i[g]);for(;d<v;)M=x,_=L,p=M+_,w=p-M,h=_-w,h&&(o[b++]=h),E=S+p,P=E-S,F=E-P,I=p-P,D=S-F,L=D+I,S=E,d+=1,d<v&&(x=n[d]);return L&&(o[b++]=L),S&&(o[b++]=S),b||(o[b++]=0),o.length=b,o}},{}],290:[function(c,A,T){A.exports=i;var e=c("boundary-cells"),a=c("reduce-simplicial-complex");function i(n){return a(e(n))}},{"boundary-cells":34,"reduce-simplicial-complex":276}],291:[function(c,A,T){A.exports=d;var e=c("ndarray"),a=c("typedarray-pool"),i=c("ndarray-sort"),n=c("./lib/codegen");function r(f){for(var y=f.length,l=0,x=0;x<y;++x)l=Math.max(l,f[x].length)|0;return l-1}function v(f,y){for(var l=f.length,x=a.mallocUint8(l),u=0;u<l;++u)x[u]=f[u]<y|0;return x}function s(f,y){for(var l=f.length,x=y*(y+1)/2*l|0,u=a.mallocUint32(x*2),M=0,_=0;_<l;++_)for(var p=f[_],y=p.length,w=0;w<y;++w)for(var h=0;h<w;++h){var L=p[h],S=p[w];u[M++]=Math.min(L,S)|0,u[M++]=Math.max(L,S)|0}var E=M/2|0;i(e(u,[E,2]));for(var P=2,_=2;_<M;_+=2)u[_-2]===u[_]&&u[_-1]===u[_+1]||(u[P++]=u[_],u[P++]=u[_+1]);return e(u,[P/2|0,2])}function o(f,y,l,x){for(var u=f.data,M=f.shape[0],_=a.mallocDouble(M),p=0,w=0;w<M;++w){var h=u[2*w],L=u[2*w+1];if(l[h]!==l[L]){var S=y[h],E=y[L];u[2*p]=h,u[2*p+1]=L,_[p++]=(E-x)/(E-S)}}return f.shape[0]=p,e(_,[p])}function b(f,y){var l=a.mallocInt32(y*2),x=f.shape[0],u=f.data;l[0]=0;for(var M=0,_=0;_<x;++_){var p=u[2*_];if(p!==M){for(l[2*M+1]=_;++M<p;)l[2*M]=_,l[2*M+1]=_;l[2*M]=_}}for(l[2*M+1]=x;++M<y;)l[2*M]=l[2*M+1]=x;return l}function g(f){for(var y=f.shape[0]|0,l=f.data,x=new Array(y),u=0;u<y;++u)x[u]=[l[2*u],l[2*u+1]];return x}function d(f,y,l,x){l=l||0,typeof x>"u"&&(x=r(f));var u=f.length;if(u===0||x<1)return{cells:[],vertexIds:[],vertexWeights:[]};var M=v(y,+l),_=s(f,x),p=o(_,y,M,+l),w=b(_,y.length|0),h=n(x)(f,_.data,w,M),L=g(_),S=[].slice.call(p.data,0,p.shape[0]);return a.free(M),a.free(_.data),a.free(p.data),a.free(w),{cells:h,vertexIds:L,vertexWeights:S}}},{"./lib/codegen":292,ndarray:259,"ndarray-sort":258,"typedarray-pool":308}],292:[function(c,A,T){A.exports=a;var e=[function(){function n(r,v,s,o){for(var b=r.length,g=[],d=0;d<b;++d){var f=r[d];f.length}return g}return n},function(){function n(v,s,o,b){for(var g=Math.min(o,b)|0,d=Math.max(o,b)|0,f=v[2*g],y=v[2*g+1];f<y;){var l=f+y>>1,x=s[2*l+1];if(x===d)return l;d<x?y=l:f=l+1}return f}function r(v,s,o,b){for(var g=v.length,d=[],f=0;f<g;++f){var y=v[f],l=y.length;if(l===2){var x=(b[y[0]]<<0)+(b[y[1]]<<1);if(x===0||x===3)continue;switch(x){case 0:break;case 1:d.push([n(o,s,y[0],y[1])]);break;case 2:d.push([n(o,s,y[1],y[0])]);break}}}return d}return r},function(){function n(v,s,o,b){for(var g=Math.min(o,b)|0,d=Math.max(o,b)|0,f=v[2*g],y=v[2*g+1];f<y;){var l=f+y>>1,x=s[2*l+1];if(x===d)return l;d<x?y=l:f=l+1}return f}function r(v,s,o,b){for(var g=v.length,d=[],f=0;f<g;++f){var y=v[f],l=y.length;if(l===3){var x=(b[y[0]]<<0)+(b[y[1]]<<1)+(b[y[2]]<<2);if(x===0||x===7)continue;switch(x){case 0:break;case 1:d.push([n(o,s,y[0],y[2]),n(o,s,y[0],y[1])]);break;case 2:d.push([n(o,s,y[1],y[0]),n(o,s,y[1],y[2])]);break;case 3:d.push([n(o,s,y[0],y[2]),n(o,s,y[1],y[2])]);break;case 4:d.push([n(o,s,y[2],y[1]),n(o,s,y[2],y[0])]);break;case 5:d.push([n(o,s,y[2],y[1]),n(o,s,y[0],y[1])]);break;case 6:d.push([n(o,s,y[1],y[0]),n(o,s,y[2],y[0])]);break}}else if(l===2){var x=(b[y[0]]<<0)+(b[y[1]]<<1);if(x===0||x===3)continue;switch(x){case 0:break;case 1:d.push([n(o,s,y[0],y[1])]);break;case 2:d.push([n(o,s,y[1],y[0])]);break}}}return d}return r},function(){function n(v,s,o,b){for(var g=Math.min(o,b)|0,d=Math.max(o,b)|0,f=v[2*g],y=v[2*g+1];f<y;){var l=f+y>>1,x=s[2*l+1];if(x===d)return l;d<x?y=l:f=l+1}return f}function r(v,s,o,b){for(var g=v.length,d=[],f=0;f<g;++f){var y=v[f],l=y.length;if(l===4){var x=(b[y[0]]<<0)+(b[y[1]]<<1)+(b[y[2]]<<2)+(b[y[3]]<<3);if(x===0||x===15)continue;switch(x){case 0:break;case 1:d.push([n(o,s,y[0],y[1]),n(o,s,y[0],y[2]),n(o,s,y[0],y[3])]);break;case 2:d.push([n(o,s,y[1],y[2]),n(o,s,y[1],y[0]),n(o,s,y[1],y[3])]);break;case 3:d.push([n(o,s,y[1],y[2]),n(o,s,y[0],y[2]),n(o,s,y[0],y[3])],[n(o,s,y[1],y[3]),n(o,s,y[1],y[2]),n(o,s,y[0],y[3])]);break;case 4:d.push([n(o,s,y[2],y[0]),n(o,s,y[2],y[1]),n(o,s,y[2],y[3])]);break;case 5:d.push([n(o,s,y[0],y[1]),n(o,s,y[2],y[1]),n(o,s,y[0],y[3])],[n(o,s,y[2],y[1]),n(o,s,y[2],y[3]),n(o,s,y[0],y[3])]);break;case 6:d.push([n(o,s,y[2],y[0]),n(o,s,y[1],y[0]),n(o,s,y[1],y[3])],[n(o,s,y[2],y[3]),n(o,s,y[2],y[0]),n(o,s,y[1],y[3])]);break;case 7:d.push([n(o,s,y[0],y[3]),n(o,s,y[1],y[3]),n(o,s,y[2],y[3])]);break;case 8:d.push([n(o,s,y[3],y[1]),n(o,s,y[3],y[0]),n(o,s,y[3],y[2])]);break;case 9:d.push([n(o,s,y[3],y[1]),n(o,s,y[0],y[1]),n(o,s,y[0],y[2])],[n(o,s,y[3],y[2]),n(o,s,y[3],y[1]),n(o,s,y[0],y[2])]);break;case 10:d.push([n(o,s,y[1],y[0]),n(o,s,y[3],y[0]),n(o,s,y[1],y[2])],[n(o,s,y[3],y[0]),n(o,s,y[3],y[2]),n(o,s,y[1],y[2])]);break;case 11:d.push([n(o,s,y[1],y[2]),n(o,s,y[0],y[2]),n(o,s,y[3],y[2])]);break;case 12:d.push([n(o,s,y[3],y[0]),n(o,s,y[2],y[0]),n(o,s,y[2],y[1])],[n(o,s,y[3],y[1]),n(o,s,y[3],y[0]),n(o,s,y[2],y[1])]);break;case 13:d.push([n(o,s,y[0],y[1]),n(o,s,y[2],y[1]),n(o,s,y[3],y[1])]);break;case 14:d.push([n(o,s,y[2],y[0]),n(o,s,y[1],y[0]),n(o,s,y[3],y[0])]);break}}else if(l===3){var x=(b[y[0]]<<0)+(b[y[1]]<<1)+(b[y[2]]<<2);if(x===0||x===7)continue;switch(x){case 0:break;case 1:d.push([n(o,s,y[0],y[2]),n(o,s,y[0],y[1])]);break;case 2:d.push([n(o,s,y[1],y[0]),n(o,s,y[1],y[2])]);break;case 3:d.push([n(o,s,y[0],y[2]),n(o,s,y[1],y[2])]);break;case 4:d.push([n(o,s,y[2],y[1]),n(o,s,y[2],y[0])]);break;case 5:d.push([n(o,s,y[2],y[1]),n(o,s,y[0],y[1])]);break;case 6:d.push([n(o,s,y[1],y[0]),n(o,s,y[2],y[0])]);break}}else if(l===2){var x=(b[y[0]]<<0)+(b[y[1]]<<1);if(x===0||x===3)continue;switch(x){case 0:break;case 1:d.push([n(o,s,y[0],y[1])]);break;case 2:d.push([n(o,s,y[1],y[0])]);break}}}return d}return r}];function a(i){return e[i]()}},{}],293:[function(c,A,T){var e=c("bit-twiddle"),a=c("union-find");function i(p){for(var w=0,h=Math.max,L=0,S=p.length;L<S;++L)w=h(w,p[L].length);return w-1}T.dimension=i;function n(p){for(var w=-1,h=Math.max,L=0,S=p.length;L<S;++L)for(var E=p[L],P=0,F=E.length;P<F;++P)w=h(w,E[P]);return w+1}T.countVertices=n;function r(p){for(var w=new Array(p.length),h=0,L=p.length;h<L;++h)w[h]=p[h].slice(0);return w}T.cloneCells=r;function v(p,w){var h=p.length,L=p.length-w.length,S=Math.min;if(L)return L;switch(h){case 0:return 0;case 1:return p[0]-w[0];case 2:var D=p[0]+p[1]-w[0]-w[1];return D||S(p[0],p[1])-S(w[0],w[1]);case 3:var E=p[0]+p[1],P=w[0]+w[1];if(D=E+p[2]-(P+w[2]),D)return D;var F=S(p[0],p[1]),I=S(w[0],w[1]),D=S(F,p[2])-S(I,w[2]);return D||S(F+p[2],E)-S(I+w[2],P);default:var R=p.slice(0);R.sort();var N=w.slice(0);N.sort();for(var z=0;z<h;++z)if(L=R[z]-N[z],L)return L;return 0}}T.compareCells=v;function s(p,w){return v(p[0],w[0])}function o(p,w){if(w){for(var h=p.length,L=new Array(h),S=0;S<h;++S)L[S]=[p[S],w[S]];L.sort(s);for(var S=0;S<h;++S)p[S]=L[S][0],w[S]=L[S][1];return p}else return p.sort(v),p}T.normalize=o;function b(p){if(p.length===0)return[];for(var w=1,h=p.length,L=1;L<h;++L){var S=p[L];if(v(S,p[L-1])){if(L===w){w++;continue}p[w++]=S}}return p.length=w,p}T.unique=b;function g(p,w){for(var h=0,L=p.length-1,S=-1;h<=L;){var E=h+L>>1,P=v(p[E],w);P<=0?(P===0&&(S=E),h=E+1):P>0&&(L=E-1)}return S}T.findCell=g;function d(p,w){for(var h=new Array(p.length),L=0,S=h.length;L<S;++L)h[L]=[];for(var E=[],L=0,P=w.length;L<P;++L)for(var F=w[L],I=F.length,D=1,R=1<<I;D<R;++D){E.length=e.popCount(D);for(var N=0,z=0;z<I;++z)D&1<<z&&(E[N++]=F[z]);var G=g(p,E);if(!(G<0))for(;h[G++].push(L),!(G>=p.length||v(p[G],E)!==0););}return h}T.incidence=d;function f(p,w){if(!w)return d(b(l(p,0)),p);for(var h=new Array(w),L=0;L<w;++L)h[L]=[];for(var L=0,S=p.length;L<S;++L)for(var E=p[L],P=0,F=E.length;P<F;++P)h[E[P]].push(L);return h}T.dual=f;function y(p){for(var w=[],h=0,L=p.length;h<L;++h)for(var S=p[h],E=S.length|0,P=1,F=1<<E;P<F;++P){for(var I=[],D=0;D<E;++D)P>>>D&1&&I.push(S[D]);w.push(I)}return o(w)}T.explode=y;function l(p,w){if(w<0)return[];for(var h=[],L=(1<<w+1)-1,S=0;S<p.length;++S)for(var E=p[S],P=L;P<1<<E.length;P=e.nextCombination(P)){for(var F=new Array(w+1),I=0,D=0;D<E.length;++D)P&1<<D&&(F[I++]=E[D]);h.push(F)}return o(h)}T.skeleton=l;function x(p){for(var w=[],h=0,L=p.length;h<L;++h)for(var S=p[h],E=0,P=S.length;E<P;++E){for(var F=new Array(S.length-1),I=0,D=0;I<P;++I)I!==E&&(F[D++]=S[I]);w.push(F)}return o(w)}T.boundary=x;function u(p,w){for(var h=new a(w),L=0;L<p.length;++L)for(var S=p[L],E=0;E<S.length;++E)for(var P=E+1;P<S.length;++P)h.link(S[E],S[P]);for(var F=[],I=h.ranks,L=0;L<I.length;++L)I[L]=-1;for(var L=0;L<p.length;++L){var D=h.find(p[L][0]);I[D]<0?(I[D]=F.length,F.push([p[L].slice(0)])):F[I[D]].push(p[L].slice(0))}return F}function M(p){for(var w=b(o(l(p,0))),h=new a(w.length),L=0;L<p.length;++L)for(var S=p[L],E=0;E<S.length;++E)for(var P=g(w,[S[E]]),F=E+1;F<S.length;++F)h.link(P,g(w,[S[F]]));for(var I=[],D=h.ranks,L=0;L<D.length;++L)D[L]=-1;for(var L=0;L<p.length;++L){var R=h.find(g(w,[p[L][0]]));D[R]<0?(D[R]=I.length,I.push([p[L].slice(0)])):I[D[R]].push(p[L].slice(0))}return I}function _(p,w){return w?u(p,w):M(p)}T.connectedComponents=_},{"bit-twiddle":32,"union-find":309}],294:[function(c,A,T){arguments[4][32][0].apply(T,arguments)},{dup:32}],295:[function(c,A,T){arguments[4][293][0].apply(T,arguments)},{"bit-twiddle":294,dup:293,"union-find":296}],296:[function(c,A,T){A.exports=e;function e(a){this.roots=new Array(a),this.ranks=new Array(a);for(var i=0;i<a;++i)this.roots[i]=i,this.ranks[i]=0}e.prototype.length=function(){return this.roots.length},e.prototype.makeSet=function(){var a=this.roots.length;return this.roots.push(a),this.ranks.push(0),a},e.prototype.find=function(a){for(var i=this.roots;i[a]!==a;){var n=i[a];i[a]=i[n],a=n}return a},e.prototype.link=function(a,i){var n=this.find(a),r=this.find(i);if(n!==r){var v=this.ranks,s=this.roots,o=v[n],b=v[r];o<b?s[n]=r:b<o?s[r]=n:(s[r]=n,++v[n])}}},{}],297:[function(c,A,T){A.exports=n;var e=c("robust-orientation"),a=c("simplicial-complex");function i(r,v,s){var o=Math.abs(e(r,v,s)),b=Math.sqrt(Math.pow(v[0]-s[0],2)+Math.pow(v[1]-s[1],2));return o/b}function n(r,v,s){for(var o=v.length,b=r.length,g=new Array(o),d=new Array(o),f=new Array(o),y=new Array(o),l=0;l<o;++l)g[l]=d[l]=-1,f[l]=1/0,y[l]=!1;for(var l=0;l<b;++l){var x=r[l];if(x.length!==2)throw new Error("Input must be a graph");var u=x[1],M=x[0];d[M]!==-1?d[M]=-2:d[M]=u,g[u]!==-1?g[u]=-2:g[u]=M}function _(Z){if(y[Z])return 1/0;var X=g[Z],ne=d[Z];return X<0||ne<0?1/0:i(v[Z],v[X],v[ne])}function p(Z,X){var ne=I[Z],ce=I[X];I[Z]=ce,I[X]=ne,D[ne]=X,D[ce]=Z}function w(Z){return f[I[Z]]}function h(Z){return Z&1?Z-1>>1:(Z>>1)-1}function L(Z){for(var X=w(Z);;){var ne=X,ce=2*Z+1,Q=2*(Z+1),K=Z;if(ce<N){var U=w(ce);U<ne&&(K=ce,ne=U)}if(Q<N){var H=w(Q);H<ne&&(K=Q)}if(K===Z)return Z;p(Z,K),Z=K}}function S(Z){for(var X=w(Z);Z>0;){var ne=h(Z);if(ne>=0){var ce=w(ne);if(X<ce){p(Z,ne),Z=ne;continue}}return Z}}function E(){if(N>0){var Z=I[0];return p(0,N-1),N-=1,L(0),Z}return-1}function P(Z,X){var ne=I[Z];return f[ne]===X?Z:(f[ne]=-1/0,S(Z),E(),f[ne]=X,N+=1,S(N-1))}function F(Z){if(!y[Z]){y[Z]=!0;var X=g[Z],ne=d[Z];g[ne]>=0&&(g[ne]=X),d[X]>=0&&(d[X]=ne),D[X]>=0&&P(D[X],_(X)),D[ne]>=0&&P(D[ne],_(ne))}}for(var I=[],D=new Array(o),l=0;l<o;++l){var R=f[l]=_(l);R<1/0?(D[l]=I.length,I.push(l)):D[l]=-1}for(var N=I.length,l=N>>1;l>=0;--l)L(l);for(;;){var z=E();if(z<0||f[z]>s)break;F(z)}for(var G=[],l=0;l<o;++l)y[l]||(D[l]=G.length,G.push(v[l].slice()));G.length;function Y(Z,X){if(Z[X]<0)return X;var ne=X,ce=X;do{var Q=Z[ce];if(!y[ce]||Q<0||Q===ce||(ce=Q,Q=Z[ce],!y[ce]||Q<0||Q===ce))break;ce=Q,ne=Z[ne]}while(ne!==ce);for(var K=X;K!==ce;K=Z[K])Z[K]=ce;return ce}var ee=[];return r.forEach(function(Z){var X=Y(g,Z[0]),ne=Y(d,Z[1]);if(X>=0&&ne>=0&&X!==ne){var ce=D[X],Q=D[ne];ce!==Q&&ee.push([ce,Q])}}),a.unique(a.normalize(ee)),{positions:G,edges:ee}}},{"robust-orientation":284,"simplicial-complex":295}],298:[function(c,A,T){A.exports=i;var e=c("robust-orientation");function a(n,r){var v,s;if(r[0][0]<r[1][0])v=r[0],s=r[1];else if(r[0][0]>r[1][0])v=r[1],s=r[0];else{var o=Math.min(n[0][1],n[1][1]),b=Math.max(n[0][1],n[1][1]),g=Math.min(r[0][1],r[1][1]),d=Math.max(r[0][1],r[1][1]);return b<g?b-g:o>d?o-d:b-d}var f,y;n[0][1]<n[1][1]?(f=n[0],y=n[1]):(f=n[1],y=n[0]);var l=e(s,v,f);return l||(l=e(s,v,y),l)?l:y-s}function i(n,r){var v,s;if(r[0][0]<r[1][0])v=r[0],s=r[1];else if(r[0][0]>r[1][0])v=r[1],s=r[0];else return a(r,n);var o,b;if(n[0][0]<n[1][0])o=n[0],b=n[1];else if(n[0][0]>n[1][0])o=n[1],b=n[0];else return-a(n,r);var g=e(v,s,b),d=e(v,s,o);if(g<0){if(d<=0)return g}else if(g>0){if(d>=0)return g}else if(d)return d;if(g=e(b,o,s),d=e(b,o,v),g<0){if(d<=0)return g}else if(g>0){if(d>=0)return g}else if(d)return d;return s[0]-b[0]}},{"robust-orientation":284}],299:[function(c,A,T){A.exports=d;var e=c("binary-search-bounds"),a=c("functional-red-black-tree"),i=c("robust-orientation"),n=c("./lib/order-segments");function r(f,y,l){this.slabs=f,this.coordinates=y,this.horizontal=l}var v=r.prototype;function s(f,y){return f.y-y}function o(f,y){for(var l=null;f;){var x=f.key,u,M;x[0][0]<x[1][0]?(u=x[0],M=x[1]):(u=x[1],M=x[0]);var _=i(u,M,y);if(_<0)f=f.left;else if(_>0)if(y[0]!==x[1][0])l=f,f=f.right;else{var p=o(f.right,y);if(p)return p;f=f.left}else{if(y[0]!==x[1][0])return f;var p=o(f.right,y);if(p)return p;f=f.left}}return l}v.castUp=function(f){var y=e.le(this.coordinates,f[0]);if(y<0)return-1;this.slabs[y];var l=o(this.slabs[y],f),x=-1;if(l&&(x=l.value),this.coordinates[y]===f[0]){var u=null;if(l&&(u=l.key),y>0){var M=o(this.slabs[y-1],f);M&&(u?n(M.key,u)>0&&(u=M.key,x=M.value):(x=M.value,u=M.key))}var _=this.horizontal[y];if(_.length>0){var p=e.ge(_,f[1],s);if(p<_.length){var w=_[p];if(f[1]===w.y){if(w.closed)return w.index;for(;p<_.length-1&&_[p+1].y===f[1];)if(p=p+1,w=_[p],w.closed)return w.index;if(w.y===f[1]&&!w.start){if(p=p+1,p>=_.length)return x;w=_[p]}}if(w.start)if(u){var h=i(u[0],u[1],[f[0],w.y]);u[0][0]>u[1][0]&&(h=-h),h>0&&(x=w.index)}else x=w.index;else w.y!==f[1]&&(x=w.index)}}}return x};function b(f,y,l,x){this.y=f,this.index=y,this.start=l,this.closed=x}function g(f,y,l,x){this.x=f,this.segment=y,this.create=l,this.index=x}function d(f){for(var y=f.length,l=2*y,x=new Array(l),u=0;u<y;++u){var M=f[u],_=M[0][0]<M[1][0];x[2*u]=new g(M[0][0],M,_,u),x[2*u+1]=new g(M[1][0],M,!_,u)}x.sort(function(F,I){var D=F.x-I.x;return D||(D=F.create-I.create,D)?D:Math.min(F.segment[0][1],F.segment[1][1])-Math.min(I.segment[0][1],I.segment[1][1])});for(var p=a(n),w=[],h=[],L=[],u=0;u<l;){for(var S=x[u].x,E=[];u<l;){var P=x[u];if(P.x!==S)break;u+=1,P.segment[0][0]===P.x&&P.segment[1][0]===P.x?P.create&&(P.segment[0][1]<P.segment[1][1]?(E.push(new b(P.segment[0][1],P.index,!0,!0)),E.push(new b(P.segment[1][1],P.index,!1,!1))):(E.push(new b(P.segment[1][1],P.index,!0,!1)),E.push(new b(P.segment[0][1],P.index,!1,!0)))):P.create?p=p.insert(P.segment,P.index):p=p.remove(P.segment)}w.push(p.root),h.push(S),L.push(E)}return new r(w,h,L)}},{"./lib/order-segments":298,"binary-search-bounds":31,"functional-red-black-tree":69,"robust-orientation":284}],300:[function(c,A,T){var e=c("robust-dot-product"),a=c("robust-sum");A.exports=r,A.exports.positive=v,A.exports.negative=s;function i(o,b){var g=a(e(o,b),[b[b.length-1]]);return g[g.length-1]}function n(o,b,g,d){var f=d-b,y=-b/f;y<0?y=0:y>1&&(y=1);for(var l=1-y,x=o.length,u=new Array(x),M=0;M<x;++M)u[M]=y*o[M]+l*g[M];return u}function r(o,b){for(var g=[],d=[],f=i(o[o.length-1],b),y=o[o.length-1],l=o[0],x=0;x<o.length;++x,y=l){l=o[x];var u=i(l,b);if(f<0&&u>0||f>0&&u<0){var M=n(y,u,l,f);g.push(M),d.push(M.slice())}u<0?d.push(l.slice()):u>0?g.push(l.slice()):(g.push(l.slice()),d.push(l.slice())),f=u}return{positive:g,negative:d}}function v(o,b){for(var g=[],d=i(o[o.length-1],b),f=o[o.length-1],y=o[0],l=0;l<o.length;++l,f=y){y=o[l];var x=i(y,b);(d<0&&x>0||d>0&&x<0)&&g.push(n(f,x,y,d)),x>=0&&g.push(y.slice()),d=x}return g}function s(o,b){for(var g=[],d=i(o[o.length-1],b),f=o[o.length-1],y=o[0],l=0;l<o.length;++l,f=y){y=o[l];var x=i(y,b);(d<0&&x>0||d>0&&x<0)&&g.push(n(f,x,y,d)),x<=0&&g.push(y.slice()),d=x}return g}},{"robust-dot-product":281,"robust-sum":289}],301:[function(c,A,T){(function(){var e={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function a(s){return n(v(s),arguments)}function i(s,o){return a.apply(null,[s].concat(o||[]))}function n(s,o){var b=1,g=s.length,d,f="",y,l,x,u,M,_,p,w;for(y=0;y<g;y++)if(typeof s[y]=="string")f+=s[y];else if(typeof s[y]=="object"){if(x=s[y],x.keys)for(d=o[b],l=0;l<x.keys.length;l++){if(d==null)throw new Error(a('[sprintf] Cannot access property "%s" of undefined value "%s"',x.keys[l],x.keys[l-1]));d=d[x.keys[l]]}else x.param_no?d=o[x.param_no]:d=o[b++];if(e.not_type.test(x.type)&&e.not_primitive.test(x.type)&&d instanceof Function&&(d=d()),e.numeric_arg.test(x.type)&&typeof d!="number"&&isNaN(d))throw new TypeError(a("[sprintf] expecting number but found %T",d));switch(e.number.test(x.type)&&(p=d>=0),x.type){case"b":d=parseInt(d,10).toString(2);break;case"c":d=String.fromCharCode(parseInt(d,10));break;case"d":case"i":d=parseInt(d,10);break;case"j":d=JSON.stringify(d,null,x.width?parseInt(x.width):0);break;case"e":d=x.precision?parseFloat(d).toExponential(x.precision):parseFloat(d).toExponential();break;case"f":d=x.precision?parseFloat(d).toFixed(x.precision):parseFloat(d);break;case"g":d=x.precision?String(Number(d.toPrecision(x.precision))):parseFloat(d);break;case"o":d=(parseInt(d,10)>>>0).toString(8);break;case"s":d=String(d),d=x.precision?d.substring(0,x.precision):d;break;case"t":d=String(!!d),d=x.precision?d.substring(0,x.precision):d;break;case"T":d=Object.prototype.toString.call(d).slice(8,-1).toLowerCase(),d=x.precision?d.substring(0,x.precision):d;break;case"u":d=parseInt(d,10)>>>0;break;case"v":d=d.valueOf(),d=x.precision?d.substring(0,x.precision):d;break;case"x":d=(parseInt(d,10)>>>0).toString(16);break;case"X":d=(parseInt(d,10)>>>0).toString(16).toUpperCase();break}e.json.test(x.type)?f+=d:(e.number.test(x.type)&&(!p||x.sign)?(w=p?"+":"-",d=d.toString().replace(e.sign,"")):w="",M=x.pad_char?x.pad_char==="0"?"0":x.pad_char.charAt(1):" ",_=x.width-(w+d).length,u=x.width&&_>0?M.repeat(_):"",f+=x.align?w+d+u:M==="0"?w+u+d:u+w+d)}return f}var r=Object.create(null);function v(s){if(r[s])return r[s];for(var o=s,b,g=[],d=0;o;){if((b=e.text.exec(o))!==null)g.push(b[0]);else if((b=e.modulo.exec(o))!==null)g.push("%");else if((b=e.placeholder.exec(o))!==null){if(b[2]){d|=1;var f=[],y=b[2],l=[];if((l=e.key.exec(y))!==null)for(f.push(l[1]);(y=y.substring(l[0].length))!=="";)if((l=e.key_access.exec(y))!==null)f.push(l[1]);else if((l=e.index_access.exec(y))!==null)f.push(l[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");b[2]=f}else d|=2;if(d===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");g.push({placeholder:b[0],param_no:b[1],keys:b[2],sign:b[3],pad_char:b[4],align:b[5],width:b[6],precision:b[7],type:b[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");o=o.substring(b[0].length)}return r[s]=g}typeof T<"u"&&(T.sprintf=a,T.vsprintf=i),typeof window<"u"&&(window.sprintf=a,window.vsprintf=i)})()},{}],302:[function(c,A,T){A.exports=s;var e=c("ndarray-extract-contour"),a=c("zero-crossings"),i={"2d":function(o,b,g){var d=o({order:b,scalarArguments:3,getters:g==="generic"?[0]:void 0,phase:function(y,l,x,u){return y>u|0},vertex:function(y,l,x,u,M,_,p,w,h,L,S,E,P){var F=(p<<0)+(w<<1)+(h<<2)+(L<<3)|0;if(!(F===0||F===15))switch(F){case 0:S.push([y-.5,l-.5]);break;case 1:S.push([y-.25-.25*(u+x-2*P)/(x-u),l-.25-.25*(M+x-2*P)/(x-M)]);break;case 2:S.push([y-.75-.25*(-u-x+2*P)/(u-x),l-.25-.25*(_+u-2*P)/(u-_)]);break;case 3:S.push([y-.5,l-.5-.5*(M+x+_+u-4*P)/(x-M+u-_)]);break;case 4:S.push([y-.25-.25*(_+M-2*P)/(M-_),l-.75-.25*(-M-x+2*P)/(M-x)]);break;case 5:S.push([y-.5-.5*(u+x+_+M-4*P)/(x-u+M-_),l-.5]);break;case 6:S.push([y-.5-.25*(-u-x+_+M)/(u-x+M-_),l-.5-.25*(-M-x+_+u)/(M-x+u-_)]);break;case 7:S.push([y-.75-.25*(_+M-2*P)/(M-_),l-.75-.25*(_+u-2*P)/(u-_)]);break;case 8:S.push([y-.75-.25*(-_-M+2*P)/(_-M),l-.75-.25*(-_-u+2*P)/(_-u)]);break;case 9:S.push([y-.5-.25*(u+x+-_-M)/(x-u+_-M),l-.5-.25*(M+x+-_-u)/(x-M+_-u)]);break;case 10:S.push([y-.5-.5*(-u-x+-_-M+4*P)/(u-x+_-M),l-.5]);break;case 11:S.push([y-.25-.25*(-_-M+2*P)/(_-M),l-.75-.25*(M+x-2*P)/(x-M)]);break;case 12:S.push([y-.5,l-.5-.5*(-M-x+-_-u+4*P)/(M-x+_-u)]);break;case 13:S.push([y-.75-.25*(u+x-2*P)/(x-u),l-.25-.25*(-_-u+2*P)/(_-u)]);break;case 14:S.push([y-.25-.25*(-u-x+2*P)/(u-x),l-.25-.25*(-M-x+2*P)/(M-x)]);break;case 15:S.push([y-.5,l-.5]);break}},cell:function(y,l,x,u,M,_,p,w,h){M?w.push([y,l]):w.push([l,y])}});return function(f,y){var l=[],x=[];return d(f,l,x,y),{positions:l,cells:x}}}};function n(o,b){var g=o.length+"d",d=i[g];if(d)return d(e,o,b)}function r(o,b){for(var g=a(o,b),d=g.length,f=new Array(d),y=new Array(d),l=0;l<d;++l)f[l]=[g[l]],y[l]=[l];return{positions:f,cells:y}}var v={};function s(o,f){if(o.dimension<=0)return{positions:[],cells:[]};if(o.dimension===1)return r(o,f);var g=o.order.join()+"-"+o.dtype,d=v[g],f=+f||0;return d||(d=v[g]=n(o.order,o.dtype)),d(o,f)}},{"ndarray-extract-contour":251,"zero-crossings":318}],303:[function(c,A,T){(function(e){(function(){A.exports=v;var a=c("vectorize-text"),i=window||e.global||{},n=i.__TEXT_CACHE||{};i.__TEXT_CACHE={};function r(s){for(var o=s.cells,b=s.positions,g=new Float32Array(o.length*6),d=0,f=0,y=0;y<o.length;++y)for(var l=o[y],x=0;x<3;++x){var u=b[l[x]];g[d++]=u[0],g[d++]=u[1]+1.4,f=Math.max(u[0],f)}return{data:g,shape:f}}function v(s,o,g){var g=g||{},d=n[s];d||(d=n[s]={" ":{data:new Float32Array(0),shape:.2}});var f=d[o];if(!f)if(o.length<=1||!/\d/.test(o))f=d[o]=r(a(o,{triangles:!0,font:s,textAlign:g.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var y=o.split(/(\d|\s)/),l=new Array(y.length),x=0,u=0,M=0;M<y.length;++M)l[M]=v(s,y[M]),x+=l[M].data.length,u+=l[M].shape,M>0&&(u+=.02);for(var _=new Float32Array(x),p=0,w=-.5*u,M=0;M<l.length;++M){for(var h=l[M].data,L=0;L<h.length;L+=2)_[p++]=h[L]+w,_[p++]=h[L+1];w+=l[M].shape+.02}f=d[o]={data:_,shape:u}}return f}}).call(this)}).call(this,c("_process"))},{_process:5,"vectorize-text":311}],304:[function(c,A,T){var e=c("parse-unit");A.exports=r;var a=96;function i(v,s){var o=e(getComputedStyle(v).getPropertyValue(s));return o[0]*r(o[1],v)}function n(v,s){var o=document.createElement("div");o.style["font-size"]="128"+v,s.appendChild(o);var b=i(o,"font-size")/128;return s.removeChild(o),b}function r(v,s){switch(s=s||document.body,v=(v||"px").trim().toLowerCase(),(s===window||s===document)&&(s=document.body),v){case"%":return s.clientHeight/100;case"ch":case"ex":return n(v,s);case"em":return i(s,"font-size");case"rem":return i(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return a;case"cm":return a/2.54;case"mm":return a/25.4;case"pt":return a/72;case"pc":return a/6}return 1}},{"parse-unit":265}],305:[function(c,A,T){A.exports=y;var e=c("filtered-vector"),a=c("gl-mat4/invert"),i=c("gl-mat4/rotate"),n=c("gl-vec3/cross"),r=c("gl-vec3/normalize"),v=c("gl-vec3/dot");function s(l,x,u){return Math.sqrt(Math.pow(l,2)+Math.pow(x,2)+Math.pow(u,2))}function o(l){return Math.min(1,Math.max(-1,l))}function b(l){var x=Math.abs(l[0]),u=Math.abs(l[1]),M=Math.abs(l[2]),_=[0,0,0];x>Math.max(u,M)?_[2]=1:u>Math.max(x,M)?_[0]=1:_[1]=1;for(var p=0,w=0,h=0;h<3;++h)p+=l[h]*l[h],w+=_[h]*l[h];for(var h=0;h<3;++h)_[h]-=w/p*l[h];return r(_,_),_}function g(l,x,u,M,_,p,w,h){this.center=e(u),this.up=e(M),this.right=e(_),this.radius=e([p]),this.angle=e([w,h]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(l,x),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var L=0;L<16;++L)this.computedMatrix[L]=.5;this.recalcMatrix(0)}var d=g.prototype;d.setDistanceLimits=function(l,x){l>0?l=Math.log(l):l=-1/0,x>0?x=Math.log(x):x=1/0,x=Math.max(x,l),this.radius.bounds[0][0]=l,this.radius.bounds[1][0]=x},d.getDistanceLimits=function(l){var x=this.radius.bounds[0];return l?(l[0]=Math.exp(x[0][0]),l[1]=Math.exp(x[1][0]),l):[Math.exp(x[0][0]),Math.exp(x[1][0])]},d.recalcMatrix=function(l){this.center.curve(l),this.up.curve(l),this.right.curve(l),this.radius.curve(l),this.angle.curve(l);for(var x=this.computedUp,u=this.computedRight,M=0,_=0,p=0;p<3;++p)_+=x[p]*u[p],M+=x[p]*x[p];for(var w=Math.sqrt(M),h=0,p=0;p<3;++p)u[p]-=x[p]*_/M,h+=u[p]*u[p],x[p]/=w;for(var L=Math.sqrt(h),p=0;p<3;++p)u[p]/=L;var S=this.computedToward;n(S,x,u),r(S,S);for(var E=Math.exp(this.computedRadius[0]),P=this.computedAngle[0],F=this.computedAngle[1],I=Math.cos(P),D=Math.sin(P),R=Math.cos(F),N=Math.sin(F),z=this.computedCenter,G=I*R,Y=D*R,ee=N,Z=-I*N,X=-D*N,ne=R,ce=this.computedEye,Q=this.computedMatrix,p=0;p<3;++p){var K=G*u[p]+Y*S[p]+ee*x[p];Q[4*p+1]=Z*u[p]+X*S[p]+ne*x[p],Q[4*p+2]=K,Q[4*p+3]=0}var U=Q[1],H=Q[5],q=Q[9],re=Q[2],j=Q[6],$=Q[10],ie=H*$-q*j,oe=q*re-U*$,ae=U*j-H*re,se=s(ie,oe,ae);ie/=se,oe/=se,ae/=se,Q[0]=ie,Q[4]=oe,Q[8]=ae;for(var p=0;p<3;++p)ce[p]=z[p]+Q[2+4*p]*E;for(var p=0;p<3;++p){for(var h=0,_e=0;_e<3;++_e)h+=Q[p+4*_e]*ce[_e];Q[12+p]=-h}Q[15]=1},d.getMatrix=function(l,x){this.recalcMatrix(l);var u=this.computedMatrix;if(x){for(var M=0;M<16;++M)x[M]=u[M];return x}return u};var f=[0,0,0];d.rotate=function(l,x,u,M){if(this.angle.move(l,x,u),M){this.recalcMatrix(l);var _=this.computedMatrix;f[0]=_[2],f[1]=_[6],f[2]=_[10];for(var p=this.computedUp,w=this.computedRight,h=this.computedToward,L=0;L<3;++L)_[4*L]=p[L],_[4*L+1]=w[L],_[4*L+2]=h[L];i(_,_,M,f);for(var L=0;L<3;++L)p[L]=_[4*L],w[L]=_[4*L+1];this.up.set(l,p[0],p[1],p[2]),this.right.set(l,w[0],w[1],w[2])}},d.pan=function(l,x,u,M){x=x||0,u=u||0,M=M||0,this.recalcMatrix(l);var _=this.computedMatrix;Math.exp(this.computedRadius[0]);var p=_[1],w=_[5],h=_[9],L=s(p,w,h);p/=L,w/=L,h/=L;var S=_[0],E=_[4],P=_[8],F=S*p+E*w+P*h;S-=p*F,E-=w*F,P-=h*F;var I=s(S,E,P);S/=I,E/=I,P/=I;var D=S*x+p*u,R=E*x+w*u,N=P*x+h*u;this.center.move(l,D,R,N);var z=Math.exp(this.computedRadius[0]);z=Math.max(1e-4,z+M),this.radius.set(l,Math.log(z))},d.translate=function(l,x,u,M){this.center.move(l,x||0,u||0,M||0)},d.setMatrix=function(l,x,u,M){var _=1;typeof u=="number"&&(_=u|0),(_<0||_>3)&&(_=1);var p=(_+2)%3;x||(this.recalcMatrix(l),x=this.computedMatrix);var w=x[_],h=x[_+4],L=x[_+8];if(M){var E=Math.abs(w),P=Math.abs(h),F=Math.abs(L),I=Math.max(E,P,F);E===I?(w=w<0?-1:1,h=L=0):F===I?(L=L<0?-1:1,w=h=0):(h=h<0?-1:1,w=L=0)}else{var S=s(w,h,L);w/=S,h/=S,L/=S}var D=x[p],R=x[p+4],N=x[p+8],z=D*w+R*h+N*L;D-=w*z,R-=h*z,N-=L*z;var G=s(D,R,N);D/=G,R/=G,N/=G;var Y=h*N-L*R,ee=L*D-w*N,Z=w*R-h*D,X=s(Y,ee,Z);Y/=X,ee/=X,Z/=X,this.center.jump(l,me,be,ke),this.radius.idle(l),this.up.jump(l,w,h,L),this.right.jump(l,D,R,N);var ne,ce;if(_===2){var Q=x[1],K=x[5],U=x[9],H=Q*D+K*R+U*N,q=Q*Y+K*ee+U*Z;ie<0?ne=-Math.PI/2:ne=Math.PI/2,ce=Math.atan2(q,H)}else{var re=x[2],j=x[6],$=x[10],ie=re*w+j*h+$*L,oe=re*D+j*R+$*N,ae=re*Y+j*ee+$*Z;ne=Math.asin(o(ie)),ce=Math.atan2(ae,oe)}this.angle.jump(l,ce,ne),this.recalcMatrix(l);var se=x[2],_e=x[6],ue=x[10],ye=this.computedMatrix;a(ye,x);var xe=ye[15],me=ye[12]/xe,be=ye[13]/xe,ke=ye[14]/xe,De=Math.exp(this.computedRadius[0]);this.center.jump(l,me-se*De,be-_e*De,ke-ue*De)},d.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},d.idle=function(l){this.center.idle(l),this.up.idle(l),this.right.idle(l),this.radius.idle(l),this.angle.idle(l)},d.flush=function(l){this.center.flush(l),this.up.flush(l),this.right.flush(l),this.radius.flush(l),this.angle.flush(l)},d.setDistance=function(l,x){x>0&&this.radius.set(l,Math.log(x))},d.lookAt=function(l,x,u,M){this.recalcMatrix(l),x=x||this.computedEye,u=u||this.computedCenter,M=M||this.computedUp;var _=M[0],p=M[1],w=M[2],h=s(_,p,w);if(!(h<1e-6)){_/=h,p/=h,w/=h;var L=x[0]-u[0],S=x[1]-u[1],E=x[2]-u[2],P=s(L,S,E);if(!(P<1e-6)){L/=P,S/=P,E/=P;var F=this.computedRight,I=F[0],D=F[1],R=F[2],N=_*I+p*D+w*R;I-=N*_,D-=N*p,R-=N*w;var z=s(I,D,R);if(!(z<.01&&(I=p*E-w*S,D=w*L-_*E,R=_*S-p*L,z=s(I,D,R),z<1e-6))){I/=z,D/=z,R/=z,this.up.set(l,_,p,w),this.right.set(l,I,D,R),this.center.set(l,u[0],u[1],u[2]),this.radius.set(l,Math.log(P));var G=p*R-w*D,Y=w*I-_*R,ee=_*D-p*I,Z=s(G,Y,ee);G/=Z,Y/=Z,ee/=Z;var X=_*L+p*S+w*E,ne=I*L+D*S+R*E,ce=G*L+Y*S+ee*E,Q=Math.asin(o(X)),K=Math.atan2(ce,ne),U=this.angle._state,H=U[U.length-1],q=U[U.length-2];H=H%(2*Math.PI);var re=Math.abs(H+2*Math.PI-K),j=Math.abs(H-K),$=Math.abs(H-2*Math.PI-K);re<j&&(H+=2*Math.PI),$<j&&(H-=2*Math.PI),this.angle.jump(this.angle.lastT(),H,q),this.angle.set(l,K,Q)}}}};function y(l){l=l||{};var x=l.center||[0,0,0],u=l.up||[0,1,0],M=l.right||b(u),_=l.radius||1,p=l.theta||0,w=l.phi||0;if(x=[].slice.call(x,0,3),u=[].slice.call(u,0,3),r(u,u),M=[].slice.call(M,0,3),r(M,M),"eye"in l){var h=l.eye,L=[h[0]-x[0],h[1]-x[1],h[2]-x[2]];n(M,L,u),s(M[0],M[1],M[2])<1e-6?M=b(u):r(M,M),_=s(L[0],L[1],L[2]);var S=v(u,L)/_,E=v(M,L)/_;w=Math.acos(S),p=Math.acos(E)}return _=Math.log(_),new g(l.zoomMin,l.zoomMax,x,u,M,_,p,w)}},{"filtered-vector":68,"gl-mat4/invert":98,"gl-mat4/rotate":103,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/normalize":179}],306:[function(c,A,T){A.exports=a;var e=+(Math.pow(2,27)+1);function a(i,n,r){var v=i*n,s=e*i,o=s-i,b=s-o,g=i-b,d=e*n,f=d-n,y=d-f,l=n-y,x=v-b*y,u=x-g*y,M=u-b*l,_=g*l-M;return r?(r[0]=_,r[1]=v,r):[_,v]}},{}],307:[function(c,A,T){A.exports=e;function e(a,i,n){var r=a+i,v=r-a,s=r-v,o=i-v,b=a-s;return n?(n[0]=b+o,n[1]=r,n):[b+o,r]}},{}],308:[function(c,A,T){(function(e){(function(){var a=c("bit-twiddle"),i=c("dup"),n=c("buffer").Buffer;e.__TYPEDARRAY_POOL||(e.__TYPEDARRAY_POOL={UINT8:i([32,0]),UINT16:i([32,0]),UINT32:i([32,0]),BIGUINT64:i([32,0]),INT8:i([32,0]),INT16:i([32,0]),INT32:i([32,0]),BIGINT64:i([32,0]),FLOAT:i([32,0]),DOUBLE:i([32,0]),DATA:i([32,0]),UINT8C:i([32,0]),BUFFER:i([32,0])});var r=typeof Uint8ClampedArray<"u",v=typeof BigUint64Array<"u",s=typeof BigInt64Array<"u",o=e.__TYPEDARRAY_POOL;o.UINT8C||(o.UINT8C=i([32,0])),o.BIGUINT64||(o.BIGUINT64=i([32,0])),o.BIGINT64||(o.BIGINT64=i([32,0])),o.BUFFER||(o.BUFFER=i([32,0]));var b=o.DATA,g=o.BUFFER;T.free=function(D){if(n.isBuffer(D))g[a.log2(D.length)].push(D);else{if(Object.prototype.toString.call(D)!=="[object ArrayBuffer]"&&(D=D.buffer),!D)return;var R=D.length||D.byteLength,N=a.log2(R)|0;b[N].push(D)}};function d(I){if(!!I){var D=I.length||I.byteLength,R=a.log2(D);b[R].push(I)}}function f(I){d(I.buffer)}T.freeUint8=T.freeUint16=T.freeUint32=T.freeBigUint64=T.freeInt8=T.freeInt16=T.freeInt32=T.freeBigInt64=T.freeFloat32=T.freeFloat=T.freeFloat64=T.freeDouble=T.freeUint8Clamped=T.freeDataView=f,T.freeArrayBuffer=d,T.freeBuffer=function(D){g[a.log2(D.length)].push(D)},T.malloc=function(D,R){if(R===void 0||R==="arraybuffer")return y(D);switch(R){case"uint8":return l(D);case"uint16":return x(D);case"uint32":return u(D);case"int8":return M(D);case"int16":return _(D);case"int32":return p(D);case"float":case"float32":return w(D);case"double":case"float64":return h(D);case"uint8_clamped":return L(D);case"bigint64":return E(D);case"biguint64":return S(D);case"buffer":return F(D);case"data":case"dataview":return P(D);default:return null}return null};function y(D){var D=a.nextPow2(D),R=a.log2(D),N=b[R];return N.length>0?N.pop():new ArrayBuffer(D)}T.mallocArrayBuffer=y;function l(I){return new Uint8Array(y(I),0,I)}T.mallocUint8=l;function x(I){return new Uint16Array(y(2*I),0,I)}T.mallocUint16=x;function u(I){return new Uint32Array(y(4*I),0,I)}T.mallocUint32=u;function M(I){return new Int8Array(y(I),0,I)}T.mallocInt8=M;function _(I){return new Int16Array(y(2*I),0,I)}T.mallocInt16=_;function p(I){return new Int32Array(y(4*I),0,I)}T.mallocInt32=p;function w(I){return new Float32Array(y(4*I),0,I)}T.mallocFloat32=T.mallocFloat=w;function h(I){return new Float64Array(y(8*I),0,I)}T.mallocFloat64=T.mallocDouble=h;function L(I){return r?new Uint8ClampedArray(y(I),0,I):l(I)}T.mallocUint8Clamped=L;function S(I){return v?new BigUint64Array(y(8*I),0,I):null}T.mallocBigUint64=S;function E(I){return s?new BigInt64Array(y(8*I),0,I):null}T.mallocBigInt64=E;function P(I){return new DataView(y(I),0,I)}T.mallocDataView=P;function F(I){I=a.nextPow2(I);var D=a.log2(I),R=g[D];return R.length>0?R.pop():new n(I)}T.mallocBuffer=F,T.clearCache=function(){for(var D=0;D<32;++D)o.UINT8[D].length=0,o.UINT16[D].length=0,o.UINT32[D].length=0,o.INT8[D].length=0,o.INT16[D].length=0,o.INT32[D].length=0,o.FLOAT[D].length=0,o.DOUBLE[D].length=0,o.BIGUINT64[D].length=0,o.BIGINT64[D].length=0,o.UINT8C[D].length=0,b[D].length=0,g[D].length=0}}).call(this)}).call(this,typeof m<"u"?m:typeof self<"u"?self:typeof window<"u"?window:{})},{"bit-twiddle":32,buffer:3,dup:65}],309:[function(c,A,T){A.exports=e;function e(i){this.roots=new Array(i),this.ranks=new Array(i);for(var n=0;n<i;++n)this.roots[n]=n,this.ranks[n]=0}var a=e.prototype;Object.defineProperty(a,"length",{get:function(){return this.roots.length}}),a.makeSet=function(){var i=this.roots.length;return this.roots.push(i),this.ranks.push(0),i},a.find=function(i){for(var n=i,r=this.roots;r[i]!==i;)i=r[i];for(;r[n]!==i;){var v=r[n];r[n]=i,n=v}return i},a.link=function(i,n){var r=this.find(i),v=this.find(n);if(r!==v){var s=this.ranks,o=this.roots,b=s[r],g=s[v];b<g?o[r]=v:g<b?o[v]=r:(o[v]=r,++s[r])}}},{}],310:[function(c,A,T){function e(n,r){for(var v=1,s=n.length,o=n[0],b=n[0],g=1;g<s;++g)if(b=o,o=n[g],r(o,b)){if(g===v){v++;continue}n[v++]=o}return n.length=v,n}function a(n){for(var r=1,v=n.length,s=n[0],o=n[0],b=1;b<v;++b,o=s)if(o=s,s=n[b],s!==o){if(b===r){r++;continue}n[r++]=s}return n.length=r,n}function i(n,r,v){return n.length===0?n:r?(v||n.sort(r),e(n,r)):(v||n.sort(),a(n))}A.exports=i},{}],311:[function(c,A,T){A.exports=n;var e=c("./lib/vtext"),a=null,i=null;typeof document<"u"&&(a=document.createElement("canvas"),a.width=8192,a.height=1024,i=a.getContext("2d"));function n(r,v){return(typeof v!="object"||v===null)&&(v={}),e(r,v.canvas||a,v.context||i,v)}},{"./lib/vtext":312}],312:[function(c,A,T){A.exports=S,A.exports.processPixels=L;var e=c("surface-nets"),a=c("ndarray"),i=c("simplify-planar-graph"),n=c("clean-pslg"),r=c("cdt2d"),v=c("planar-graph-to-polyline"),s="b",o="b|",b="i",g="i|",d="sup",f="+",y="+1",l="sub",x="-",u="-1";function M(E,P,F,I){for(var D="<"+E+">",R="</"+E+">",N=D.length,z=R.length,G=P[0]===f||P[0]===x,Y=0,ee=-z;Y>-1&&(Y=F.indexOf(D,Y),!(Y===-1||(ee=F.indexOf(R,Y+N),ee===-1)||ee<=Y));){for(var Z=Y;Z<ee+z;++Z)if(Z<Y+N||Z>=ee)I[Z]=null,F=F.substr(0,Z)+" "+F.substr(Z+1);else if(I[Z]!==null){var X=I[Z].indexOf(P[0]);X===-1?I[Z]+=P:G&&(I[Z]=I[Z].substr(0,X+1)+(1+parseInt(I[Z][X+1]))+I[Z].substr(X+2))}var ne=Y+N,ce=F.substr(ne,ee-ne),Q=ce.indexOf(D);Q!==-1?Y=Q:Y=ee+z}return I}function _(E,P,F){for(var I=P.textAlign||"start",D=P.textBaseline||"alphabetic",R=[1<<30,1<<30],N=[0,0],z=E.length,G=0;G<z;++G)for(var Y=E[G],ee=0;ee<2;++ee)R[ee]=Math.min(R[ee],Y[ee])|0,N[ee]=Math.max(N[ee],Y[ee])|0;var Z=0;switch(I){case"center":Z=-.5*(R[0]+N[0]);break;case"right":case"end":Z=-N[0];break;case"left":case"start":Z=-R[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+I+"'")}var X=0;switch(D){case"hanging":case"top":X=-R[1];break;case"middle":X=-.5*(R[1]+N[1]);break;case"alphabetic":case"ideographic":X=-3*F;break;case"bottom":X=-N[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+D+"'")}var ne=1/F;return"lineHeight"in P?ne*=+P.lineHeight:"width"in P?ne=P.width/(N[0]-R[0]):"height"in P&&(ne=P.height/(N[1]-R[1])),E.map(function(ce){return[ne*(ce[0]+Z),ne*(ce[1]+X)]})}function p(E,P,F,I,D,R){F=F.replace(/\n/g,""),R.breaklines===!0?F=F.replace(/\<br\>/g,`
`):F=F.replace(/\<br\>/g," ");var N="",z=[];for(H=0;H<F.length;++H)z[H]=N;R.bolds===!0&&(z=M(s,o,F,z)),R.italics===!0&&(z=M(b,g,F,z)),R.superscripts===!0&&(z=M(d,y,F,z)),R.subscripts===!0&&(z=M(l,u,F,z));var G=[],Y="";for(H=0;H<F.length;++H)z[H]!==null&&(Y+=F[H],G.push(z[H]));var ee=Y.split(`
`),Z=ee.length,X=Math.round(D*I),ne=I,ce=I*2,Q=0,K=Z*X+ce;E.height<K&&(E.height=K),P.fillStyle="#000",P.fillRect(0,0,E.width,E.height),P.fillStyle="#fff";var U,H,q,re,j,$=0,ie="";function oe(){if(ie!==""){var ke=P.measureText(ie).width;P.fillText(ie,ne+q,ce+re),q+=ke}}function ae(){return""+Math.round(j)+"px "}function se(ke,De){var Ve=""+P.font;if(R.subscripts===!0){var Ae=ke.indexOf(x),Le=De.indexOf(x),je=Ae>-1?parseInt(ke[1+Ae]):0,Ye=Le>-1?parseInt(De[1+Le]):0;je!==Ye&&(Ve=Ve.replace(ae(),"?px "),j*=Math.pow(.75,Ye-je),Ve=Ve.replace("?px ",ae())),re+=.25*X*(Ye-je)}if(R.superscripts===!0){var ze=ke.indexOf(f),Ie=De.indexOf(f),We=ze>-1?parseInt(ke[1+ze]):0,pt=Ie>-1?parseInt(De[1+Ie]):0;We!==pt&&(Ve=Ve.replace(ae(),"?px "),j*=Math.pow(.75,pt-We),Ve=Ve.replace("?px ",ae())),re-=.25*X*(pt-We)}if(R.bolds===!0){var Ft=ke.indexOf(o)>-1,Qt=De.indexOf(o)>-1;!Ft&&Qt&&(zt?Ve=Ve.replace("italic ","italic bold "):Ve="bold "+Ve),Ft&&!Qt&&(Ve=Ve.replace("bold ",""))}if(R.italics===!0){var zt=ke.indexOf(g)>-1,Et=De.indexOf(g)>-1;!zt&&Et&&(Ve="italic "+Ve),zt&&!Et&&(Ve=Ve.replace("italic ",""))}P.font=Ve}for(U=0;U<Z;++U){var _e=ee[U]+`
`;for(q=0,re=U*X,j=I,ie="",H=0;H<_e.length;++H){var ue=H+$<G.length?G[H+$]:G[G.length-1];N===ue?ie+=_e[H]:(oe(),ie=_e[H],ue!==void 0&&(se(N,ue),N=ue))}oe(),$+=_e.length;var ye=Math.round(q+2*ne)|0;Q<ye&&(Q=ye)}var xe=Q,me=ce+X*Z,be=a(P.getImageData(0,0,xe,me).data,[me,xe,4]);return be.pick(-1,-1,0).transpose(1,0)}function w(E,P){var F=e(E,128);return P?i(F.cells,F.positions,.25):{edges:F.cells,positions:F.positions}}function h(E,P,F,I){var D=w(E,I),R=_(D.positions,P,F),N=D.edges,z=P.orientation==="ccw";if(n(R,N),P.polygons||P.polygon||P.polyline){for(var G=v(N,R),Y=new Array(G.length),ee=0;ee<G.length;++ee){for(var Z=G[ee],X=new Array(Z.length),ne=0;ne<Z.length;++ne){for(var ce=Z[ne],Q=new Array(ce.length),K=0;K<ce.length;++K)Q[K]=R[ce[K]].slice();z&&Q.reverse(),X[ne]=Q}Y[ee]=X}return Y}else return P.triangles||P.triangulate||P.triangle?{cells:r(R,N,{delaunay:!1,exterior:!1,interior:!0}),positions:R}:{edges:N,positions:R}}function L(E,P,F){try{return h(E,P,F,!0)}catch{}try{return h(E,P,F,!1)}catch{}return P.polygons||P.polyline||P.polygon?[]:P.triangles||P.triangulate||P.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}function S(E,P,F,I){var D=64,R=1.25,N={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};I&&(I.size&&I.size>0&&(D=I.size),I.lineSpacing&&I.lineSpacing>0&&(R=I.lineSpacing),I.styletags&&I.styletags.breaklines&&(N.breaklines=!!I.styletags.breaklines),I.styletags&&I.styletags.bolds&&(N.bolds=!!I.styletags.bolds),I.styletags&&I.styletags.italics&&(N.italics=!!I.styletags.italics),I.styletags&&I.styletags.subscripts&&(N.subscripts=!!I.styletags.subscripts),I.styletags&&I.styletags.superscripts&&(N.superscripts=!!I.styletags.superscripts)),F.font=[I.fontStyle,I.fontVariant,I.fontWeight,D+"px",I.font].filter(function(G){return G}).join(" "),F.textAlign="start",F.textBaseline="alphabetic",F.direction="ltr";var z=p(P,F,E,D,R,N);return L(z,I,D)}},{cdt2d:42,"clean-pslg":50,ndarray:259,"planar-graph-to-polyline":268,"simplify-planar-graph":297,"surface-nets":302}],313:[function(c,A,T){(function(){if(typeof ses<"u"&&ses.ok&&!ses.ok())return;function a(L){L.permitHostObjects___&&L.permitHostObjects___(a)}typeof ses<"u"&&(ses.weakMapPermitHostObjects=a);var i=!1;if(typeof WeakMap=="function"){var n=WeakMap;if(!(typeof navigator<"u"&&/Firefox/.test(navigator.userAgent))){var r=new n,v=Object.freeze({});if(r.set(v,1),r.get(v)!==1)i=!0;else{A.exports=WeakMap;return}}}var s=Object.getOwnPropertyNames,o=Object.defineProperty,b=Object.isExtensible,g="weakmap:",d=g+"ident:"+Math.random()+"___";if(typeof crypto<"u"&&typeof crypto.getRandomValues=="function"&&typeof ArrayBuffer=="function"&&typeof Uint8Array=="function"){var f=new ArrayBuffer(25),y=new Uint8Array(f);crypto.getRandomValues(y),d=g+"rand:"+Array.prototype.map.call(y,function(L){return(L%36).toString(36)}).join("")+"___"}function l(L){return!(L.substr(0,g.length)==g&&L.substr(L.length-3)==="___")}if(o(Object,"getOwnPropertyNames",{value:function(S){return s(S).filter(l)}}),"getPropertyNames"in Object){var x=Object.getPropertyNames;o(Object,"getPropertyNames",{value:function(S){return x(S).filter(l)}})}function u(L){if(L!==Object(L))throw new TypeError("Not an object: "+L);var S=L[d];if(S&&S.key===L)return S;if(!!b(L)){S={key:L};try{return o(L,d,{value:S,writable:!1,enumerable:!1,configurable:!1}),S}catch{return}}}(function(){var L=Object.freeze;o(Object,"freeze",{value:function(F){return u(F),L(F)}});var S=Object.seal;o(Object,"seal",{value:function(F){return u(F),S(F)}});var E=Object.preventExtensions;o(Object,"preventExtensions",{value:function(F){return u(F),E(F)}})})();function M(L){return L.prototype=null,Object.freeze(L)}var _=!1;function p(){!_&&typeof console<"u"&&(_=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}var w=0,h=function(){this instanceof h||p();var L=[],S=[],E=w++;function P(R,N){var z,G=u(R);return G?E in G?G[E]:N:(z=L.indexOf(R),z>=0?S[z]:N)}function F(R){var N=u(R);return N?E in N:L.indexOf(R)>=0}function I(R,N){var z,G=u(R);return G?G[E]=N:(z=L.indexOf(R),z>=0?S[z]=N:(z=L.length,S[z]=N,L[z]=R)),this}function D(R){var N=u(R),z,G;return N?E in N&&delete N[E]:(z=L.indexOf(R),z<0?!1:(G=L.length-1,L[z]=void 0,S[z]=S[G],L[z]=L[G],L.length=G,S.length=G,!0))}return Object.create(h.prototype,{get___:{value:M(P)},has___:{value:M(F)},set___:{value:M(I)},delete___:{value:M(D)}})};h.prototype=Object.create(Object.prototype,{get:{value:function(S,E){return this.get___(S,E)},writable:!0,configurable:!0},has:{value:function(S){return this.has___(S)},writable:!0,configurable:!0},set:{value:function(S,E){return this.set___(S,E)},writable:!0,configurable:!0},delete:{value:function(S){return this.delete___(S)},writable:!0,configurable:!0}}),typeof n=="function"?function(){i&&typeof Proxy<"u"&&(Proxy=void 0);function L(){this instanceof h||p();var S=new n,E=void 0,P=!1;function F(N,z){return E?S.has(N)?S.get(N):E.get___(N,z):S.get(N,z)}function I(N){return S.has(N)||(E?E.has___(N):!1)}var D;i?D=function(N,z){return S.set(N,z),S.has(N)||(E||(E=new h),E.set(N,z)),this}:D=function(N,z){if(P)try{S.set(N,z)}catch{E||(E=new h),E.set___(N,z)}else S.set(N,z);return this};function R(N){var z=!!S.delete(N);return E&&E.delete___(N)||z}return Object.create(h.prototype,{get___:{value:M(F)},has___:{value:M(I)},set___:{value:M(D)},delete___:{value:M(R)},permitHostObjects___:{value:M(function(N){if(N===a)P=!0;else throw new Error("bogus call to permitHostObjects___")})}})}L.prototype=h.prototype,A.exports=L,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():(typeof Proxy<"u"&&(Proxy=void 0),A.exports=h)})()},{}],314:[function(c,A,T){var e=c("./hidden-store.js");A.exports=a;function a(){var i={};return function(n){if((typeof n!="object"||n===null)&&typeof n!="function")throw new Error("Weakmap-shim: Key must be object");var r=n.valueOf(i);return r&&r.identity===i?r:e(n,i)}}},{"./hidden-store.js":315}],315:[function(c,A,T){A.exports=e;function e(a,i){var n={identity:i},r=a.valueOf;return Object.defineProperty(a,"valueOf",{value:function(v){return v!==i?r.apply(this,arguments):n},writable:!0}),n}},{}],316:[function(c,A,T){var e=c("./create-store.js");A.exports=a;function a(){var i=e();return{get:function(n,r){var v=i(n);return v.hasOwnProperty("value")?v.value:r},set:function(n,r){return i(n).value=r,this},has:function(n){return"value"in i(n)},delete:function(n){return delete i(n).value}}}},{"./create-store.js":314}],317:[function(c,A,T){function e(){return function(s,o,b,g,d,f){var y=s[0],l=b[0],x=[0],u=l;g|=0;var M=0,_=l;for(M=0;M<y;++M){{var p=o[g]-f,w=o[g+u]-f;p>=0!=w>=0&&d.push(x[0]+.5+.5*(p+w)/(p-w))}g+=_,++x[0]}}}function a(){return e()}var i=a;function n(s){var o={};return function(g,d,f){var y=g.dtype,l=g.order,x=[y,l.join()].join(),u=o[x];return u||(o[x]=u=s([y,l])),u(g.shape.slice(0),g.data,g.stride,g.offset|0,d,f)}}function r(s){return n(i.bind(void 0,s))}function v(s){return r({funcName:s.funcName})}A.exports=v({funcName:"zeroCrossings"})},{}],318:[function(c,A,T){A.exports=a;var e=c("./lib/zc-core");function a(i,n){var r=[];return n=+n||0,e(i.hi(i.shape[0]-1),r,n),r}},{"./lib/zc-core":317}]},{},[6])(6)})}).call(this)}).call(this,typeof Ro<"u"?Ro:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[27])(27)})})(sx);const Am=dA(sx.exports),gA=/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;function yA(ve){return gA.test(ve)}function lx(){var ve=URL.createObjectURL(new Blob),fe=ve.toString();return URL.revokeObjectURL(ve),fe.split(/[:\/]/g).pop().toLowerCase()}lx.valid=yA;const mA=["id"],Mm={__name:"PlotlyEx",props:["type","fill","hole"],setup(ve){const fe=ve,t=Qv();nd({get(){return this.debouncedHeight},set(c){this.heightTimeout&&clearTimeout(this.heightTimeout),this.heightTimeout=setTimeout(()=>{this.debouncedHeight=c},1e3)}}),nd({get(){return this.debouncedWidth},set(c){this.widthTimeout&&clearTimeout(this.widthTimeout),this.widthTimeout=setTimeout(()=>{this.debouncedWidth=c},1e3)}});function B(c=!0){const A=m();c?Am.newPlot(V,A.data,A.layout,A.config):Am.react(V,A.data,A.layout,A.config)}const V=lx();vg(()=>{window.removeEventListener("resize",B)}),hg(()=>{window.addEventListener("resize",B),B()}),t.$subscribe((c,A)=>{console.log("New plot!"),B(!1)});function m(){const c=t.getData(fe.type);return c.data[0].type=fe.type,c.data[0].fill=fe.fill,fe.hole&&(c.data[0].hole=fe.hole),fe.type=="bubble"&&(c.data[0].mode="markers",c.data[0].marker={size:c.data[0].y}),c}return(c,A)=>(ql(),eu("div",{id:mi(V)},null,8,mA))}},xA={class:"container-fluid text-center"},bA={class:"row"},_A={class:"col-sm-12"},wA={class:"row mb-1"},TA={class:"col-sm-4"},AA=Vn("h3",null,"Project Details",-1),MA={class:"d-flex flex-row"},SA={class:"col-sm-8"},EA=Vn("h3",null,"Data Analysis",-1),CA=Vn("hr",null,null,-1),kA={__name:"MainPage",setup(ve){const fe=Qv();return(t,B)=>(ql(),eu($l,null,[Vn("div",null,[mu(E5)]),Vn("div",xA,[Vn("div",bA,[Vn("div",_A,[Vn("div",wA,[Vn("div",TA,[AA,Vn("div",MA,[(ql(!0),eu($l,null,Y1(mi(fe).n_projects,V=>(ql(),eu("div",{key:V},[mu(pA,{"project-number":V},null,8,["project-number"])]))),128))])]),Vn("div",SA,[EA,mu(Mm,{type:"scatter"}),mu(Mm,{type:"pie"})])])])])]),CA],64))}},LA=(ve,fe)=>{const t=ve.__vccOpts||ve;for(const[B,V]of fe)t[B]=V;return t},PA={components:{MainPage:kA}},DA={class:"home"};function RA(ve,fe,t,B,V,m){const c=C3("MainPage");return ql(),eu("div",DA,[mu(c)])}const IA=LA(PA,[["render",RA]]);var Rl="top",bu="bottom",_u="right",Il="left",Md="auto",ov=[Rl,bu,_u,Il],oh="start",Jh="end",ux="clippingParents",yg="viewport",Uh="popper",cx="reference",W0=ov.reduce(function(ve,fe){return ve.concat([fe+"-"+oh,fe+"-"+Jh])},[]),mg=[].concat(ov,[Md]).reduce(function(ve,fe){return ve.concat([fe,fe+"-"+oh,fe+"-"+Jh])},[]),fx="beforeRead",hx="read",vx="afterRead",px="beforeMain",dx="main",gx="afterMain",yx="beforeWrite",mx="write",xx="afterWrite",bx=[fx,hx,vx,px,dx,gx,yx,mx,xx];function Uc(ve){return ve?(ve.nodeName||"").toLowerCase():null}function Uu(ve){if(ve==null)return window;if(ve.toString()!=="[object Window]"){var fe=ve.ownerDocument;return fe&&fe.defaultView||window}return ve}function sh(ve){var fe=Uu(ve).Element;return ve instanceof fe||ve instanceof Element}function Ou(ve){var fe=Uu(ve).HTMLElement;return ve instanceof fe||ve instanceof HTMLElement}function xg(ve){if(typeof ShadowRoot>"u")return!1;var fe=Uu(ve).ShadowRoot;return ve instanceof fe||ve instanceof ShadowRoot}function FA(ve){var fe=ve.state;Object.keys(fe.elements).forEach(function(t){var B=fe.styles[t]||{},V=fe.attributes[t]||{},m=fe.elements[t];!Ou(m)||!Uc(m)||(Object.assign(m.style,B),Object.keys(V).forEach(function(c){var A=V[c];A===!1?m.removeAttribute(c):m.setAttribute(c,A===!0?"":A)}))})}function zA(ve){var fe=ve.state,t={popper:{position:fe.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(fe.elements.popper.style,t.popper),fe.styles=t,fe.elements.arrow&&Object.assign(fe.elements.arrow.style,t.arrow),function(){Object.keys(fe.elements).forEach(function(B){var V=fe.elements[B],m=fe.attributes[B]||{},c=Object.keys(fe.styles.hasOwnProperty(B)?fe.styles[B]:t[B]),A=c.reduce(function(T,e){return T[e]="",T},{});!Ou(V)||!Uc(V)||(Object.assign(V.style,A),Object.keys(m).forEach(function(T){V.removeAttribute(T)}))})}}const bg={name:"applyStyles",enabled:!0,phase:"write",fn:FA,effect:zA,requires:["computeStyles"]};function Nc(ve){return ve.split("-")[0]}var ih=Math.max,od=Math.min,Qh=Math.round;function X0(){var ve=navigator.userAgentData;return ve!=null&&ve.brands?ve.brands.map(function(fe){return fe.brand+"/"+fe.version}).join(" "):navigator.userAgent}function _x(){return!/^((?!chrome|android).)*safari/i.test(X0())}function $h(ve,fe,t){fe===void 0&&(fe=!1),t===void 0&&(t=!1);var B=ve.getBoundingClientRect(),V=1,m=1;fe&&Ou(ve)&&(V=ve.offsetWidth>0&&Qh(B.width)/ve.offsetWidth||1,m=ve.offsetHeight>0&&Qh(B.height)/ve.offsetHeight||1);var c=sh(ve)?Uu(ve):window,A=c.visualViewport,T=!_x()&&t,e=(B.left+(T&&A?A.offsetLeft:0))/V,a=(B.top+(T&&A?A.offsetTop:0))/m,i=B.width/V,n=B.height/m;return{width:i,height:n,top:a,right:e+i,bottom:a+n,left:e,x:e,y:a}}function _g(ve){var fe=$h(ve),t=ve.offsetWidth,B=ve.offsetHeight;return Math.abs(fe.width-t)<=1&&(t=fe.width),Math.abs(fe.height-B)<=1&&(B=fe.height),{x:ve.offsetLeft,y:ve.offsetTop,width:t,height:B}}function wx(ve,fe){var t=fe.getRootNode&&fe.getRootNode();if(ve.contains(fe))return!0;if(t&&xg(t)){var B=fe;do{if(B&&ve.isSameNode(B))return!0;B=B.parentNode||B.host}while(B)}return!1}function rf(ve){return Uu(ve).getComputedStyle(ve)}function NA(ve){return["table","td","th"].indexOf(Uc(ve))>=0}function Df(ve){return((sh(ve)?ve.ownerDocument:ve.document)||window.document).documentElement}function Sd(ve){return Uc(ve)==="html"?ve:ve.assignedSlot||ve.parentNode||(xg(ve)?ve.host:null)||Df(ve)}function Sm(ve){return!Ou(ve)||rf(ve).position==="fixed"?null:ve.offsetParent}function OA(ve){var fe=/firefox/i.test(X0()),t=/Trident/i.test(X0());if(t&&Ou(ve)){var B=rf(ve);if(B.position==="fixed")return null}var V=Sd(ve);for(xg(V)&&(V=V.host);Ou(V)&&["html","body"].indexOf(Uc(V))<0;){var m=rf(V);if(m.transform!=="none"||m.perspective!=="none"||m.contain==="paint"||["transform","perspective"].indexOf(m.willChange)!==-1||fe&&m.willChange==="filter"||fe&&m.filter&&m.filter!=="none")return V;V=V.parentNode}return null}function $v(ve){for(var fe=Uu(ve),t=Sm(ve);t&&NA(t)&&rf(t).position==="static";)t=Sm(t);return t&&(Uc(t)==="html"||Uc(t)==="body"&&rf(t).position==="static")?fe:t||OA(ve)||fe}function wg(ve){return["top","bottom"].indexOf(ve)>=0?"x":"y"}function Bv(ve,fe,t){return ih(ve,od(fe,t))}function BA(ve,fe,t){var B=Bv(ve,fe,t);return B>t?t:B}function Tx(){return{top:0,right:0,bottom:0,left:0}}function Ax(ve){return Object.assign({},Tx(),ve)}function Mx(ve,fe){return fe.reduce(function(t,B){return t[B]=ve,t},{})}var UA=function(fe,t){return fe=typeof fe=="function"?fe(Object.assign({},t.rects,{placement:t.placement})):fe,Ax(typeof fe!="number"?fe:Mx(fe,ov))};function VA(ve){var fe,t=ve.state,B=ve.name,V=ve.options,m=t.elements.arrow,c=t.modifiersData.popperOffsets,A=Nc(t.placement),T=wg(A),e=[Il,_u].indexOf(A)>=0,a=e?"height":"width";if(!(!m||!c)){var i=UA(V.padding,t),n=_g(m),r=T==="y"?Rl:Il,v=T==="y"?bu:_u,s=t.rects.reference[a]+t.rects.reference[T]-c[T]-t.rects.popper[a],o=c[T]-t.rects.reference[T],b=$v(m),g=b?T==="y"?b.clientHeight||0:b.clientWidth||0:0,d=s/2-o/2,f=i[r],y=g-n[a]-i[v],l=g/2-n[a]/2+d,x=Bv(f,l,y),u=T;t.modifiersData[B]=(fe={},fe[u]=x,fe.centerOffset=x-l,fe)}}function HA(ve){var fe=ve.state,t=ve.options,B=t.element,V=B===void 0?"[data-popper-arrow]":B;V!=null&&(typeof V=="string"&&(V=fe.elements.popper.querySelector(V),!V)||!wx(fe.elements.popper,V)||(fe.elements.arrow=V))}const Sx={name:"arrow",enabled:!0,phase:"main",fn:VA,effect:HA,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function qh(ve){return ve.split("-")[1]}var GA={top:"auto",right:"auto",bottom:"auto",left:"auto"};function YA(ve){var fe=ve.x,t=ve.y,B=window,V=B.devicePixelRatio||1;return{x:Qh(fe*V)/V||0,y:Qh(t*V)/V||0}}function Em(ve){var fe,t=ve.popper,B=ve.popperRect,V=ve.placement,m=ve.variation,c=ve.offsets,A=ve.position,T=ve.gpuAcceleration,e=ve.adaptive,a=ve.roundOffsets,i=ve.isFixed,n=c.x,r=n===void 0?0:n,v=c.y,s=v===void 0?0:v,o=typeof a=="function"?a({x:r,y:s}):{x:r,y:s};r=o.x,s=o.y;var b=c.hasOwnProperty("x"),g=c.hasOwnProperty("y"),d=Il,f=Rl,y=window;if(e){var l=$v(t),x="clientHeight",u="clientWidth";if(l===Uu(t)&&(l=Df(t),rf(l).position!=="static"&&A==="absolute"&&(x="scrollHeight",u="scrollWidth")),l=l,V===Rl||(V===Il||V===_u)&&m===Jh){f=bu;var M=i&&l===y&&y.visualViewport?y.visualViewport.height:l[x];s-=M-B.height,s*=T?1:-1}if(V===Il||(V===Rl||V===bu)&&m===Jh){d=_u;var _=i&&l===y&&y.visualViewport?y.visualViewport.width:l[u];r-=_-B.width,r*=T?1:-1}}var p=Object.assign({position:A},e&&GA),w=a===!0?YA({x:r,y:s}):{x:r,y:s};if(r=w.x,s=w.y,T){var h;return Object.assign({},p,(h={},h[f]=g?"0":"",h[d]=b?"0":"",h.transform=(y.devicePixelRatio||1)<=1?"translate("+r+"px, "+s+"px)":"translate3d("+r+"px, "+s+"px, 0)",h))}return Object.assign({},p,(fe={},fe[f]=g?s+"px":"",fe[d]=b?r+"px":"",fe.transform="",fe))}function WA(ve){var fe=ve.state,t=ve.options,B=t.gpuAcceleration,V=B===void 0?!0:B,m=t.adaptive,c=m===void 0?!0:m,A=t.roundOffsets,T=A===void 0?!0:A,e={placement:Nc(fe.placement),variation:qh(fe.placement),popper:fe.elements.popper,popperRect:fe.rects.popper,gpuAcceleration:V,isFixed:fe.options.strategy==="fixed"};fe.modifiersData.popperOffsets!=null&&(fe.styles.popper=Object.assign({},fe.styles.popper,Em(Object.assign({},e,{offsets:fe.modifiersData.popperOffsets,position:fe.options.strategy,adaptive:c,roundOffsets:T})))),fe.modifiersData.arrow!=null&&(fe.styles.arrow=Object.assign({},fe.styles.arrow,Em(Object.assign({},e,{offsets:fe.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:T})))),fe.attributes.popper=Object.assign({},fe.attributes.popper,{"data-popper-placement":fe.placement})}const Tg={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:WA,data:{}};var Op={passive:!0};function XA(ve){var fe=ve.state,t=ve.instance,B=ve.options,V=B.scroll,m=V===void 0?!0:V,c=B.resize,A=c===void 0?!0:c,T=Uu(fe.elements.popper),e=[].concat(fe.scrollParents.reference,fe.scrollParents.popper);return m&&e.forEach(function(a){a.addEventListener("scroll",t.update,Op)}),A&&T.addEventListener("resize",t.update,Op),function(){m&&e.forEach(function(a){a.removeEventListener("scroll",t.update,Op)}),A&&T.removeEventListener("resize",t.update,Op)}}const Ag={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:XA,data:{}};var ZA={left:"right",right:"left",bottom:"top",top:"bottom"};function Jp(ve){return ve.replace(/left|right|bottom|top/g,function(fe){return ZA[fe]})}var jA={start:"end",end:"start"};function Cm(ve){return ve.replace(/start|end/g,function(fe){return jA[fe]})}function Mg(ve){var fe=Uu(ve),t=fe.pageXOffset,B=fe.pageYOffset;return{scrollLeft:t,scrollTop:B}}function Sg(ve){return $h(Df(ve)).left+Mg(ve).scrollLeft}function KA(ve,fe){var t=Uu(ve),B=Df(ve),V=t.visualViewport,m=B.clientWidth,c=B.clientHeight,A=0,T=0;if(V){m=V.width,c=V.height;var e=_x();(e||!e&&fe==="fixed")&&(A=V.offsetLeft,T=V.offsetTop)}return{width:m,height:c,x:A+Sg(ve),y:T}}function JA(ve){var fe,t=Df(ve),B=Mg(ve),V=(fe=ve.ownerDocument)==null?void 0:fe.body,m=ih(t.scrollWidth,t.clientWidth,V?V.scrollWidth:0,V?V.clientWidth:0),c=ih(t.scrollHeight,t.clientHeight,V?V.scrollHeight:0,V?V.clientHeight:0),A=-B.scrollLeft+Sg(ve),T=-B.scrollTop;return rf(V||t).direction==="rtl"&&(A+=ih(t.clientWidth,V?V.clientWidth:0)-m),{width:m,height:c,x:A,y:T}}function Eg(ve){var fe=rf(ve),t=fe.overflow,B=fe.overflowX,V=fe.overflowY;return/auto|scroll|overlay|hidden/.test(t+V+B)}function Ex(ve){return["html","body","#document"].indexOf(Uc(ve))>=0?ve.ownerDocument.body:Ou(ve)&&Eg(ve)?ve:Ex(Sd(ve))}function Uv(ve,fe){var t;fe===void 0&&(fe=[]);var B=Ex(ve),V=B===((t=ve.ownerDocument)==null?void 0:t.body),m=Uu(B),c=V?[m].concat(m.visualViewport||[],Eg(B)?B:[]):B,A=fe.concat(c);return V?A:A.concat(Uv(Sd(c)))}function Z0(ve){return Object.assign({},ve,{left:ve.x,top:ve.y,right:ve.x+ve.width,bottom:ve.y+ve.height})}function QA(ve,fe){var t=$h(ve,!1,fe==="fixed");return t.top=t.top+ve.clientTop,t.left=t.left+ve.clientLeft,t.bottom=t.top+ve.clientHeight,t.right=t.left+ve.clientWidth,t.width=ve.clientWidth,t.height=ve.clientHeight,t.x=t.left,t.y=t.top,t}function km(ve,fe,t){return fe===yg?Z0(KA(ve,t)):sh(fe)?QA(fe,t):Z0(JA(Df(ve)))}function $A(ve){var fe=Uv(Sd(ve)),t=["absolute","fixed"].indexOf(rf(ve).position)>=0,B=t&&Ou(ve)?$v(ve):ve;return sh(B)?fe.filter(function(V){return sh(V)&&wx(V,B)&&Uc(V)!=="body"}):[]}function qA(ve,fe,t,B){var V=fe==="clippingParents"?$A(ve):[].concat(fe),m=[].concat(V,[t]),c=m[0],A=m.reduce(function(T,e){var a=km(ve,e,B);return T.top=ih(a.top,T.top),T.right=od(a.right,T.right),T.bottom=od(a.bottom,T.bottom),T.left=ih(a.left,T.left),T},km(ve,c,B));return A.width=A.right-A.left,A.height=A.bottom-A.top,A.x=A.left,A.y=A.top,A}function Cx(ve){var fe=ve.reference,t=ve.element,B=ve.placement,V=B?Nc(B):null,m=B?qh(B):null,c=fe.x+fe.width/2-t.width/2,A=fe.y+fe.height/2-t.height/2,T;switch(V){case Rl:T={x:c,y:fe.y-t.height};break;case bu:T={x:c,y:fe.y+fe.height};break;case _u:T={x:fe.x+fe.width,y:A};break;case Il:T={x:fe.x-t.width,y:A};break;default:T={x:fe.x,y:fe.y}}var e=V?wg(V):null;if(e!=null){var a=e==="y"?"height":"width";switch(m){case oh:T[e]=T[e]-(fe[a]/2-t[a]/2);break;case Jh:T[e]=T[e]+(fe[a]/2-t[a]/2);break}}return T}function ev(ve,fe){fe===void 0&&(fe={});var t=fe,B=t.placement,V=B===void 0?ve.placement:B,m=t.strategy,c=m===void 0?ve.strategy:m,A=t.boundary,T=A===void 0?ux:A,e=t.rootBoundary,a=e===void 0?yg:e,i=t.elementContext,n=i===void 0?Uh:i,r=t.altBoundary,v=r===void 0?!1:r,s=t.padding,o=s===void 0?0:s,b=Ax(typeof o!="number"?o:Mx(o,ov)),g=n===Uh?cx:Uh,d=ve.rects.popper,f=ve.elements[v?g:n],y=qA(sh(f)?f:f.contextElement||Df(ve.elements.popper),T,a,c),l=$h(ve.elements.reference),x=Cx({reference:l,element:d,strategy:"absolute",placement:V}),u=Z0(Object.assign({},d,x)),M=n===Uh?u:l,_={top:y.top-M.top+b.top,bottom:M.bottom-y.bottom+b.bottom,left:y.left-M.left+b.left,right:M.right-y.right+b.right},p=ve.modifiersData.offset;if(n===Uh&&p){var w=p[V];Object.keys(_).forEach(function(h){var L=[_u,bu].indexOf(h)>=0?1:-1,S=[Rl,bu].indexOf(h)>=0?"y":"x";_[h]+=w[S]*L})}return _}function eM(ve,fe){fe===void 0&&(fe={});var t=fe,B=t.placement,V=t.boundary,m=t.rootBoundary,c=t.padding,A=t.flipVariations,T=t.allowedAutoPlacements,e=T===void 0?mg:T,a=qh(B),i=a?A?W0:W0.filter(function(v){return qh(v)===a}):ov,n=i.filter(function(v){return e.indexOf(v)>=0});n.length===0&&(n=i);var r=n.reduce(function(v,s){return v[s]=ev(ve,{placement:s,boundary:V,rootBoundary:m,padding:c})[Nc(s)],v},{});return Object.keys(r).sort(function(v,s){return r[v]-r[s]})}function tM(ve){if(Nc(ve)===Md)return[];var fe=Jp(ve);return[Cm(ve),fe,Cm(fe)]}function rM(ve){var fe=ve.state,t=ve.options,B=ve.name;if(!fe.modifiersData[B]._skip){for(var V=t.mainAxis,m=V===void 0?!0:V,c=t.altAxis,A=c===void 0?!0:c,T=t.fallbackPlacements,e=t.padding,a=t.boundary,i=t.rootBoundary,n=t.altBoundary,r=t.flipVariations,v=r===void 0?!0:r,s=t.allowedAutoPlacements,o=fe.options.placement,b=Nc(o),g=b===o,d=T||(g||!v?[Jp(o)]:tM(o)),f=[o].concat(d).reduce(function(G,Y){return G.concat(Nc(Y)===Md?eM(fe,{placement:Y,boundary:a,rootBoundary:i,padding:e,flipVariations:v,allowedAutoPlacements:s}):Y)},[]),y=fe.rects.reference,l=fe.rects.popper,x=new Map,u=!0,M=f[0],_=0;_<f.length;_++){var p=f[_],w=Nc(p),h=qh(p)===oh,L=[Rl,bu].indexOf(w)>=0,S=L?"width":"height",E=ev(fe,{placement:p,boundary:a,rootBoundary:i,altBoundary:n,padding:e}),P=L?h?_u:Il:h?bu:Rl;y[S]>l[S]&&(P=Jp(P));var F=Jp(P),I=[];if(m&&I.push(E[w]<=0),A&&I.push(E[P]<=0,E[F]<=0),I.every(function(G){return G})){M=p,u=!1;break}x.set(p,I)}if(u)for(var D=v?3:1,R=function(Y){var ee=f.find(function(Z){var X=x.get(Z);if(X)return X.slice(0,Y).every(function(ne){return ne})});if(ee)return M=ee,"break"},N=D;N>0;N--){var z=R(N);if(z==="break")break}fe.placement!==M&&(fe.modifiersData[B]._skip=!0,fe.placement=M,fe.reset=!0)}}const kx={name:"flip",enabled:!0,phase:"main",fn:rM,requiresIfExists:["offset"],data:{_skip:!1}};function Lm(ve,fe,t){return t===void 0&&(t={x:0,y:0}),{top:ve.top-fe.height-t.y,right:ve.right-fe.width+t.x,bottom:ve.bottom-fe.height+t.y,left:ve.left-fe.width-t.x}}function Pm(ve){return[Rl,_u,bu,Il].some(function(fe){return ve[fe]>=0})}function nM(ve){var fe=ve.state,t=ve.name,B=fe.rects.reference,V=fe.rects.popper,m=fe.modifiersData.preventOverflow,c=ev(fe,{elementContext:"reference"}),A=ev(fe,{altBoundary:!0}),T=Lm(c,B),e=Lm(A,V,m),a=Pm(T),i=Pm(e);fe.modifiersData[t]={referenceClippingOffsets:T,popperEscapeOffsets:e,isReferenceHidden:a,hasPopperEscaped:i},fe.attributes.popper=Object.assign({},fe.attributes.popper,{"data-popper-reference-hidden":a,"data-popper-escaped":i})}const Lx={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:nM};function aM(ve,fe,t){var B=Nc(ve),V=[Il,Rl].indexOf(B)>=0?-1:1,m=typeof t=="function"?t(Object.assign({},fe,{placement:ve})):t,c=m[0],A=m[1];return c=c||0,A=(A||0)*V,[Il,_u].indexOf(B)>=0?{x:A,y:c}:{x:c,y:A}}function iM(ve){var fe=ve.state,t=ve.options,B=ve.name,V=t.offset,m=V===void 0?[0,0]:V,c=mg.reduce(function(a,i){return a[i]=aM(i,fe.rects,m),a},{}),A=c[fe.placement],T=A.x,e=A.y;fe.modifiersData.popperOffsets!=null&&(fe.modifiersData.popperOffsets.x+=T,fe.modifiersData.popperOffsets.y+=e),fe.modifiersData[B]=c}const Px={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:iM};function oM(ve){var fe=ve.state,t=ve.name;fe.modifiersData[t]=Cx({reference:fe.rects.reference,element:fe.rects.popper,strategy:"absolute",placement:fe.placement})}const Cg={name:"popperOffsets",enabled:!0,phase:"read",fn:oM,data:{}};function sM(ve){return ve==="x"?"y":"x"}function lM(ve){var fe=ve.state,t=ve.options,B=ve.name,V=t.mainAxis,m=V===void 0?!0:V,c=t.altAxis,A=c===void 0?!1:c,T=t.boundary,e=t.rootBoundary,a=t.altBoundary,i=t.padding,n=t.tether,r=n===void 0?!0:n,v=t.tetherOffset,s=v===void 0?0:v,o=ev(fe,{boundary:T,rootBoundary:e,padding:i,altBoundary:a}),b=Nc(fe.placement),g=qh(fe.placement),d=!g,f=wg(b),y=sM(f),l=fe.modifiersData.popperOffsets,x=fe.rects.reference,u=fe.rects.popper,M=typeof s=="function"?s(Object.assign({},fe.rects,{placement:fe.placement})):s,_=typeof M=="number"?{mainAxis:M,altAxis:M}:Object.assign({mainAxis:0,altAxis:0},M),p=fe.modifiersData.offset?fe.modifiersData.offset[fe.placement]:null,w={x:0,y:0};if(!!l){if(m){var h,L=f==="y"?Rl:Il,S=f==="y"?bu:_u,E=f==="y"?"height":"width",P=l[f],F=P+o[L],I=P-o[S],D=r?-u[E]/2:0,R=g===oh?x[E]:u[E],N=g===oh?-u[E]:-x[E],z=fe.elements.arrow,G=r&&z?_g(z):{width:0,height:0},Y=fe.modifiersData["arrow#persistent"]?fe.modifiersData["arrow#persistent"].padding:Tx(),ee=Y[L],Z=Y[S],X=Bv(0,x[E],G[E]),ne=d?x[E]/2-D-X-ee-_.mainAxis:R-X-ee-_.mainAxis,ce=d?-x[E]/2+D+X+Z+_.mainAxis:N+X+Z+_.mainAxis,Q=fe.elements.arrow&&$v(fe.elements.arrow),K=Q?f==="y"?Q.clientTop||0:Q.clientLeft||0:0,U=(h=p==null?void 0:p[f])!=null?h:0,H=P+ne-U-K,q=P+ce-U,re=Bv(r?od(F,H):F,P,r?ih(I,q):I);l[f]=re,w[f]=re-P}if(A){var j,$=f==="x"?Rl:Il,ie=f==="x"?bu:_u,oe=l[y],ae=y==="y"?"height":"width",se=oe+o[$],_e=oe-o[ie],ue=[Rl,Il].indexOf(b)!==-1,ye=(j=p==null?void 0:p[y])!=null?j:0,xe=ue?se:oe-x[ae]-u[ae]-ye+_.altAxis,me=ue?oe+x[ae]+u[ae]-ye-_.altAxis:_e,be=r&&ue?BA(xe,oe,me):Bv(r?xe:se,oe,r?me:_e);l[y]=be,w[y]=be-oe}fe.modifiersData[B]=w}}const Dx={name:"preventOverflow",enabled:!0,phase:"main",fn:lM,requiresIfExists:["offset"]};function uM(ve){return{scrollLeft:ve.scrollLeft,scrollTop:ve.scrollTop}}function cM(ve){return ve===Uu(ve)||!Ou(ve)?Mg(ve):uM(ve)}function fM(ve){var fe=ve.getBoundingClientRect(),t=Qh(fe.width)/ve.offsetWidth||1,B=Qh(fe.height)/ve.offsetHeight||1;return t!==1||B!==1}function hM(ve,fe,t){t===void 0&&(t=!1);var B=Ou(fe),V=Ou(fe)&&fM(fe),m=Df(fe),c=$h(ve,V,t),A={scrollLeft:0,scrollTop:0},T={x:0,y:0};return(B||!B&&!t)&&((Uc(fe)!=="body"||Eg(m))&&(A=cM(fe)),Ou(fe)?(T=$h(fe,!0),T.x+=fe.clientLeft,T.y+=fe.clientTop):m&&(T.x=Sg(m))),{x:c.left+A.scrollLeft-T.x,y:c.top+A.scrollTop-T.y,width:c.width,height:c.height}}function vM(ve){var fe=new Map,t=new Set,B=[];ve.forEach(function(m){fe.set(m.name,m)});function V(m){t.add(m.name);var c=[].concat(m.requires||[],m.requiresIfExists||[]);c.forEach(function(A){if(!t.has(A)){var T=fe.get(A);T&&V(T)}}),B.push(m)}return ve.forEach(function(m){t.has(m.name)||V(m)}),B}function pM(ve){var fe=vM(ve);return bx.reduce(function(t,B){return t.concat(fe.filter(function(V){return V.phase===B}))},[])}function dM(ve){var fe;return function(){return fe||(fe=new Promise(function(t){Promise.resolve().then(function(){fe=void 0,t(ve())})})),fe}}function gM(ve){var fe=ve.reduce(function(t,B){var V=t[B.name];return t[B.name]=V?Object.assign({},V,B,{options:Object.assign({},V.options,B.options),data:Object.assign({},V.data,B.data)}):B,t},{});return Object.keys(fe).map(function(t){return fe[t]})}var Dm={placement:"bottom",modifiers:[],strategy:"absolute"};function Rm(){for(var ve=arguments.length,fe=new Array(ve),t=0;t<ve;t++)fe[t]=arguments[t];return!fe.some(function(B){return!(B&&typeof B.getBoundingClientRect=="function")})}function Ed(ve){ve===void 0&&(ve={});var fe=ve,t=fe.defaultModifiers,B=t===void 0?[]:t,V=fe.defaultOptions,m=V===void 0?Dm:V;return function(A,T,e){e===void 0&&(e=m);var a={placement:"bottom",orderedModifiers:[],options:Object.assign({},Dm,m),modifiersData:{},elements:{reference:A,popper:T},attributes:{},styles:{}},i=[],n=!1,r={state:a,setOptions:function(b){var g=typeof b=="function"?b(a.options):b;s(),a.options=Object.assign({},m,a.options,g),a.scrollParents={reference:sh(A)?Uv(A):A.contextElement?Uv(A.contextElement):[],popper:Uv(T)};var d=pM(gM([].concat(B,a.options.modifiers)));return a.orderedModifiers=d.filter(function(f){return f.enabled}),v(),r.update()},forceUpdate:function(){if(!n){var b=a.elements,g=b.reference,d=b.popper;if(!!Rm(g,d)){a.rects={reference:hM(g,$v(d),a.options.strategy==="fixed"),popper:_g(d)},a.reset=!1,a.placement=a.options.placement,a.orderedModifiers.forEach(function(_){return a.modifiersData[_.name]=Object.assign({},_.data)});for(var f=0;f<a.orderedModifiers.length;f++){if(a.reset===!0){a.reset=!1,f=-1;continue}var y=a.orderedModifiers[f],l=y.fn,x=y.options,u=x===void 0?{}:x,M=y.name;typeof l=="function"&&(a=l({state:a,options:u,name:M,instance:r})||a)}}}},update:dM(function(){return new Promise(function(o){r.forceUpdate(),o(a)})}),destroy:function(){s(),n=!0}};if(!Rm(A,T))return r;r.setOptions(e).then(function(o){!n&&e.onFirstUpdate&&e.onFirstUpdate(o)});function v(){a.orderedModifiers.forEach(function(o){var b=o.name,g=o.options,d=g===void 0?{}:g,f=o.effect;if(typeof f=="function"){var y=f({state:a,name:b,instance:r,options:d}),l=function(){};i.push(y||l)}})}function s(){i.forEach(function(o){return o()}),i=[]}return r}}var yM=Ed(),mM=[Ag,Cg,Tg,bg],xM=Ed({defaultModifiers:mM}),bM=[Ag,Cg,Tg,bg,Px,kx,Dx,Sx,Lx],kg=Ed({defaultModifiers:bM});const Rx=Object.freeze(Object.defineProperty({__proto__:null,popperGenerator:Ed,detectOverflow:ev,createPopperBase:yM,createPopper:kg,createPopperLite:xM,top:Rl,bottom:bu,right:_u,left:Il,auto:Md,basePlacements:ov,start:oh,end:Jh,clippingParents:ux,viewport:yg,popper:Uh,reference:cx,variationPlacements:W0,placements:mg,beforeRead:fx,read:hx,afterRead:vx,beforeMain:px,main:dx,afterMain:gx,beforeWrite:yx,write:mx,afterWrite:xx,modifierPhases:bx,applyStyles:bg,arrow:Sx,computeStyles:Tg,eventListeners:Ag,flip:kx,hide:Lx,offset:Px,popperOffsets:Cg,preventOverflow:Dx},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.2.3 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const _M=1e6,wM=1e3,j0="transitionend",TM=ve=>ve==null?`${ve}`:Object.prototype.toString.call(ve).match(/\s([a-z]+)/i)[1].toLowerCase(),AM=ve=>{do ve+=Math.floor(Math.random()*_M);while(document.getElementById(ve));return ve},Ix=ve=>{let fe=ve.getAttribute("data-bs-target");if(!fe||fe==="#"){let t=ve.getAttribute("href");if(!t||!t.includes("#")&&!t.startsWith("."))return null;t.includes("#")&&!t.startsWith("#")&&(t=`#${t.split("#")[1]}`),fe=t&&t!=="#"?t.trim():null}return fe},Fx=ve=>{const fe=Ix(ve);return fe&&document.querySelector(fe)?fe:null},$c=ve=>{const fe=Ix(ve);return fe?document.querySelector(fe):null},MM=ve=>{if(!ve)return 0;let{transitionDuration:fe,transitionDelay:t}=window.getComputedStyle(ve);const B=Number.parseFloat(fe),V=Number.parseFloat(t);return!B&&!V?0:(fe=fe.split(",")[0],t=t.split(",")[0],(Number.parseFloat(fe)+Number.parseFloat(t))*wM)},zx=ve=>{ve.dispatchEvent(new Event(j0))},qc=ve=>!ve||typeof ve!="object"?!1:(typeof ve.jquery<"u"&&(ve=ve[0]),typeof ve.nodeType<"u"),kf=ve=>qc(ve)?ve.jquery?ve[0]:ve:typeof ve=="string"&&ve.length>0?document.querySelector(ve):null,sv=ve=>{if(!qc(ve)||ve.getClientRects().length===0)return!1;const fe=getComputedStyle(ve).getPropertyValue("visibility")==="visible",t=ve.closest("details:not([open])");if(!t)return fe;if(t!==ve){const B=ve.closest("summary");if(B&&B.parentNode!==t||B===null)return!1}return fe},Lf=ve=>!ve||ve.nodeType!==Node.ELEMENT_NODE||ve.classList.contains("disabled")?!0:typeof ve.disabled<"u"?ve.disabled:ve.hasAttribute("disabled")&&ve.getAttribute("disabled")!=="false",Nx=ve=>{if(!document.documentElement.attachShadow)return null;if(typeof ve.getRootNode=="function"){const fe=ve.getRootNode();return fe instanceof ShadowRoot?fe:null}return ve instanceof ShadowRoot?ve:ve.parentNode?Nx(ve.parentNode):null},sd=()=>{},qv=ve=>{ve.offsetHeight},Ox=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,y0=[],SM=ve=>{document.readyState==="loading"?(y0.length||document.addEventListener("DOMContentLoaded",()=>{for(const fe of y0)fe()}),y0.push(ve)):ve()},Bu=()=>document.documentElement.dir==="rtl",Vu=ve=>{SM(()=>{const fe=Ox();if(fe){const t=ve.NAME,B=fe.fn[t];fe.fn[t]=ve.jQueryInterface,fe.fn[t].Constructor=ve,fe.fn[t].noConflict=()=>(fe.fn[t]=B,ve.jQueryInterface)}})},Jc=ve=>{typeof ve=="function"&&ve()},Bx=(ve,fe,t=!0)=>{if(!t){Jc(ve);return}const B=5,V=MM(fe)+B;let m=!1;const c=({target:A})=>{A===fe&&(m=!0,fe.removeEventListener(j0,c),Jc(ve))};fe.addEventListener(j0,c),setTimeout(()=>{m||zx(fe)},V)},Lg=(ve,fe,t,B)=>{const V=ve.length;let m=ve.indexOf(fe);return m===-1?!t&&B?ve[V-1]:ve[0]:(m+=t?1:-1,B&&(m=(m+V)%V),ve[Math.max(0,Math.min(m,V-1))])},EM=/[^.]*(?=\..*)\.|.*/,CM=/\..*/,kM=/::\d+$/,m0={};let Im=1;const Ux={mouseenter:"mouseover",mouseleave:"mouseout"},LM=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Vx(ve,fe){return fe&&`${fe}::${Im++}`||ve.uidEvent||Im++}function Hx(ve){const fe=Vx(ve);return ve.uidEvent=fe,m0[fe]=m0[fe]||{},m0[fe]}function PM(ve,fe){return function t(B){return Pg(B,{delegateTarget:ve}),t.oneOff&&xa.off(ve,B.type,fe),fe.apply(ve,[B])}}function DM(ve,fe,t){return function B(V){const m=ve.querySelectorAll(fe);for(let{target:c}=V;c&&c!==this;c=c.parentNode)for(const A of m)if(A===c)return Pg(V,{delegateTarget:c}),B.oneOff&&xa.off(ve,V.type,fe,t),t.apply(c,[V])}}function Gx(ve,fe,t=null){return Object.values(ve).find(B=>B.callable===fe&&B.delegationSelector===t)}function Yx(ve,fe,t){const B=typeof fe=="string",V=B?t:fe||t;let m=Wx(ve);return LM.has(m)||(m=ve),[B,V,m]}function Fm(ve,fe,t,B,V){if(typeof fe!="string"||!ve)return;let[m,c,A]=Yx(fe,t,B);fe in Ux&&(c=(v=>function(s){if(!s.relatedTarget||s.relatedTarget!==s.delegateTarget&&!s.delegateTarget.contains(s.relatedTarget))return v.call(this,s)})(c));const T=Hx(ve),e=T[A]||(T[A]={}),a=Gx(e,c,m?t:null);if(a){a.oneOff=a.oneOff&&V;return}const i=Vx(c,fe.replace(EM,"")),n=m?DM(ve,t,c):PM(ve,c);n.delegationSelector=m?t:null,n.callable=c,n.oneOff=V,n.uidEvent=i,e[i]=n,ve.addEventListener(A,n,m)}function K0(ve,fe,t,B,V){const m=Gx(fe[t],B,V);!m||(ve.removeEventListener(t,m,Boolean(V)),delete fe[t][m.uidEvent])}function RM(ve,fe,t,B){const V=fe[t]||{};for(const m of Object.keys(V))if(m.includes(B)){const c=V[m];K0(ve,fe,t,c.callable,c.delegationSelector)}}function Wx(ve){return ve=ve.replace(CM,""),Ux[ve]||ve}const xa={on(ve,fe,t,B){Fm(ve,fe,t,B,!1)},one(ve,fe,t,B){Fm(ve,fe,t,B,!0)},off(ve,fe,t,B){if(typeof fe!="string"||!ve)return;const[V,m,c]=Yx(fe,t,B),A=c!==fe,T=Hx(ve),e=T[c]||{},a=fe.startsWith(".");if(typeof m<"u"){if(!Object.keys(e).length)return;K0(ve,T,c,m,V?t:null);return}if(a)for(const i of Object.keys(T))RM(ve,T,i,fe.slice(1));for(const i of Object.keys(e)){const n=i.replace(kM,"");if(!A||fe.includes(n)){const r=e[i];K0(ve,T,c,r.callable,r.delegationSelector)}}},trigger(ve,fe,t){if(typeof fe!="string"||!ve)return null;const B=Ox(),V=Wx(fe),m=fe!==V;let c=null,A=!0,T=!0,e=!1;m&&B&&(c=B.Event(fe,t),B(ve).trigger(c),A=!c.isPropagationStopped(),T=!c.isImmediatePropagationStopped(),e=c.isDefaultPrevented());let a=new Event(fe,{bubbles:A,cancelable:!0});return a=Pg(a,t),e&&a.preventDefault(),T&&ve.dispatchEvent(a),a.defaultPrevented&&c&&c.preventDefault(),a}};function Pg(ve,fe){for(const[t,B]of Object.entries(fe||{}))try{ve[t]=B}catch{Object.defineProperty(ve,t,{configurable:!0,get(){return B}})}return ve}const _f=new Map,x0={set(ve,fe,t){_f.has(ve)||_f.set(ve,new Map);const B=_f.get(ve);if(!B.has(fe)&&B.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(B.keys())[0]}.`);return}B.set(fe,t)},get(ve,fe){return _f.has(ve)&&_f.get(ve).get(fe)||null},remove(ve,fe){if(!_f.has(ve))return;const t=_f.get(ve);t.delete(fe),t.size===0&&_f.delete(ve)}};function zm(ve){if(ve==="true")return!0;if(ve==="false")return!1;if(ve===Number(ve).toString())return Number(ve);if(ve===""||ve==="null")return null;if(typeof ve!="string")return ve;try{return JSON.parse(decodeURIComponent(ve))}catch{return ve}}function b0(ve){return ve.replace(/[A-Z]/g,fe=>`-${fe.toLowerCase()}`)}const ef={setDataAttribute(ve,fe,t){ve.setAttribute(`data-bs-${b0(fe)}`,t)},removeDataAttribute(ve,fe){ve.removeAttribute(`data-bs-${b0(fe)}`)},getDataAttributes(ve){if(!ve)return{};const fe={},t=Object.keys(ve.dataset).filter(B=>B.startsWith("bs")&&!B.startsWith("bsConfig"));for(const B of t){let V=B.replace(/^bs/,"");V=V.charAt(0).toLowerCase()+V.slice(1,V.length),fe[V]=zm(ve.dataset[B])}return fe},getDataAttribute(ve,fe){return zm(ve.getAttribute(`data-bs-${b0(fe)}`))}};class ep{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(fe){return fe=this._mergeConfigObj(fe),fe=this._configAfterMerge(fe),this._typeCheckConfig(fe),fe}_configAfterMerge(fe){return fe}_mergeConfigObj(fe,t){const B=qc(t)?ef.getDataAttribute(t,"config"):{};return{...this.constructor.Default,...typeof B=="object"?B:{},...qc(t)?ef.getDataAttributes(t):{},...typeof fe=="object"?fe:{}}}_typeCheckConfig(fe,t=this.constructor.DefaultType){for(const B of Object.keys(t)){const V=t[B],m=fe[B],c=qc(m)?"element":TM(m);if(!new RegExp(V).test(c))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${B}" provided type "${c}" but expected type "${V}".`)}}}const IM="5.2.3";class vc extends ep{constructor(fe,t){super(),fe=kf(fe),fe&&(this._element=fe,this._config=this._getConfig(t),x0.set(this._element,this.constructor.DATA_KEY,this))}dispose(){x0.remove(this._element,this.constructor.DATA_KEY),xa.off(this._element,this.constructor.EVENT_KEY);for(const fe of Object.getOwnPropertyNames(this))this[fe]=null}_queueCallback(fe,t,B=!0){Bx(fe,t,B)}_getConfig(fe){return fe=this._mergeConfigObj(fe,this._element),fe=this._configAfterMerge(fe),this._typeCheckConfig(fe),fe}static getInstance(fe){return x0.get(kf(fe),this.DATA_KEY)}static getOrCreateInstance(fe,t={}){return this.getInstance(fe)||new this(fe,typeof t=="object"?t:null)}static get VERSION(){return IM}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(fe){return`${fe}${this.EVENT_KEY}`}}const Cd=(ve,fe="hide")=>{const t=`click.dismiss${ve.EVENT_KEY}`,B=ve.NAME;xa.on(document,t,`[data-bs-dismiss="${B}"]`,function(V){if(["A","AREA"].includes(this.tagName)&&V.preventDefault(),Lf(this))return;const m=$c(this)||this.closest(`.${B}`);ve.getOrCreateInstance(m)[fe]()})},FM="alert",zM="bs.alert",Xx=`.${zM}`,NM=`close${Xx}`,OM=`closed${Xx}`,BM="fade",UM="show";class kd extends vc{static get NAME(){return FM}close(){if(xa.trigger(this._element,NM).defaultPrevented)return;this._element.classList.remove(UM);const t=this._element.classList.contains(BM);this._queueCallback(()=>this._destroyElement(),this._element,t)}_destroyElement(){this._element.remove(),xa.trigger(this._element,OM),this.dispose()}static jQueryInterface(fe){return this.each(function(){const t=kd.getOrCreateInstance(this);if(typeof fe=="string"){if(t[fe]===void 0||fe.startsWith("_")||fe==="constructor")throw new TypeError(`No method named "${fe}"`);t[fe](this)}})}}Cd(kd,"close");Vu(kd);const VM="button",HM="bs.button",GM=`.${HM}`,YM=".data-api",WM="active",Nm='[data-bs-toggle="button"]',XM=`click${GM}${YM}`;class Ld extends vc{static get NAME(){return VM}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(WM))}static jQueryInterface(fe){return this.each(function(){const t=Ld.getOrCreateInstance(this);fe==="toggle"&&t[fe]()})}}xa.on(document,XM,Nm,ve=>{ve.preventDefault();const fe=ve.target.closest(Nm);Ld.getOrCreateInstance(fe).toggle()});Vu(Ld);const Oi={find(ve,fe=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(fe,ve))},findOne(ve,fe=document.documentElement){return Element.prototype.querySelector.call(fe,ve)},children(ve,fe){return[].concat(...ve.children).filter(t=>t.matches(fe))},parents(ve,fe){const t=[];let B=ve.parentNode.closest(fe);for(;B;)t.push(B),B=B.parentNode.closest(fe);return t},prev(ve,fe){let t=ve.previousElementSibling;for(;t;){if(t.matches(fe))return[t];t=t.previousElementSibling}return[]},next(ve,fe){let t=ve.nextElementSibling;for(;t;){if(t.matches(fe))return[t];t=t.nextElementSibling}return[]},focusableChildren(ve){const fe=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(t=>`${t}:not([tabindex^="-"])`).join(",");return this.find(fe,ve).filter(t=>!Lf(t)&&sv(t))}},ZM="swipe",lv=".bs.swipe",jM=`touchstart${lv}`,KM=`touchmove${lv}`,JM=`touchend${lv}`,QM=`pointerdown${lv}`,$M=`pointerup${lv}`,qM="touch",e4="pen",t4="pointer-event",r4=40,n4={endCallback:null,leftCallback:null,rightCallback:null},a4={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class ld extends ep{constructor(fe,t){super(),this._element=fe,!(!fe||!ld.isSupported())&&(this._config=this._getConfig(t),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return n4}static get DefaultType(){return a4}static get NAME(){return ZM}dispose(){xa.off(this._element,lv)}_start(fe){if(!this._supportPointerEvents){this._deltaX=fe.touches[0].clientX;return}this._eventIsPointerPenTouch(fe)&&(this._deltaX=fe.clientX)}_end(fe){this._eventIsPointerPenTouch(fe)&&(this._deltaX=fe.clientX-this._deltaX),this._handleSwipe(),Jc(this._config.endCallback)}_move(fe){this._deltaX=fe.touches&&fe.touches.length>1?0:fe.touches[0].clientX-this._deltaX}_handleSwipe(){const fe=Math.abs(this._deltaX);if(fe<=r4)return;const t=fe/this._deltaX;this._deltaX=0,t&&Jc(t>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(xa.on(this._element,QM,fe=>this._start(fe)),xa.on(this._element,$M,fe=>this._end(fe)),this._element.classList.add(t4)):(xa.on(this._element,jM,fe=>this._start(fe)),xa.on(this._element,KM,fe=>this._move(fe)),xa.on(this._element,JM,fe=>this._end(fe)))}_eventIsPointerPenTouch(fe){return this._supportPointerEvents&&(fe.pointerType===e4||fe.pointerType===qM)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const i4="carousel",o4="bs.carousel",Rf=`.${o4}`,Zx=".data-api",s4="ArrowLeft",l4="ArrowRight",u4=500,Dv="next",Oh="prev",Vh="left",Qp="right",c4=`slide${Rf}`,_0=`slid${Rf}`,f4=`keydown${Rf}`,h4=`mouseenter${Rf}`,v4=`mouseleave${Rf}`,p4=`dragstart${Rf}`,d4=`load${Rf}${Zx}`,g4=`click${Rf}${Zx}`,jx="carousel",Bp="active",y4="slide",m4="carousel-item-end",x4="carousel-item-start",b4="carousel-item-next",_4="carousel-item-prev",Kx=".active",Jx=".carousel-item",w4=Kx+Jx,T4=".carousel-item img",A4=".carousel-indicators",M4="[data-bs-slide], [data-bs-slide-to]",S4='[data-bs-ride="carousel"]',E4={[s4]:Qp,[l4]:Vh},C4={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},k4={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class tp extends vc{constructor(fe,t){super(fe,t),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=Oi.findOne(A4,this._element),this._addEventListeners(),this._config.ride===jx&&this.cycle()}static get Default(){return C4}static get DefaultType(){return k4}static get NAME(){return i4}next(){this._slide(Dv)}nextWhenVisible(){!document.hidden&&sv(this._element)&&this.next()}prev(){this._slide(Oh)}pause(){this._isSliding&&zx(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(!!this._config.ride){if(this._isSliding){xa.one(this._element,_0,()=>this.cycle());return}this.cycle()}}to(fe){const t=this._getItems();if(fe>t.length-1||fe<0)return;if(this._isSliding){xa.one(this._element,_0,()=>this.to(fe));return}const B=this._getItemIndex(this._getActive());if(B===fe)return;const V=fe>B?Dv:Oh;this._slide(V,t[fe])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(fe){return fe.defaultInterval=fe.interval,fe}_addEventListeners(){this._config.keyboard&&xa.on(this._element,f4,fe=>this._keydown(fe)),this._config.pause==="hover"&&(xa.on(this._element,h4,()=>this.pause()),xa.on(this._element,v4,()=>this._maybeEnableCycle())),this._config.touch&&ld.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const B of Oi.find(T4,this._element))xa.on(B,p4,V=>V.preventDefault());const t={leftCallback:()=>this._slide(this._directionToOrder(Vh)),rightCallback:()=>this._slide(this._directionToOrder(Qp)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),u4+this._config.interval))}};this._swipeHelper=new ld(this._element,t)}_keydown(fe){if(/input|textarea/i.test(fe.target.tagName))return;const t=E4[fe.key];t&&(fe.preventDefault(),this._slide(this._directionToOrder(t)))}_getItemIndex(fe){return this._getItems().indexOf(fe)}_setActiveIndicatorElement(fe){if(!this._indicatorsElement)return;const t=Oi.findOne(Kx,this._indicatorsElement);t.classList.remove(Bp),t.removeAttribute("aria-current");const B=Oi.findOne(`[data-bs-slide-to="${fe}"]`,this._indicatorsElement);B&&(B.classList.add(Bp),B.setAttribute("aria-current","true"))}_updateInterval(){const fe=this._activeElement||this._getActive();if(!fe)return;const t=Number.parseInt(fe.getAttribute("data-bs-interval"),10);this._config.interval=t||this._config.defaultInterval}_slide(fe,t=null){if(this._isSliding)return;const B=this._getActive(),V=fe===Dv,m=t||Lg(this._getItems(),B,V,this._config.wrap);if(m===B)return;const c=this._getItemIndex(m),A=r=>xa.trigger(this._element,r,{relatedTarget:m,direction:this._orderToDirection(fe),from:this._getItemIndex(B),to:c});if(A(c4).defaultPrevented||!B||!m)return;const e=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(c),this._activeElement=m;const a=V?x4:m4,i=V?b4:_4;m.classList.add(i),qv(m),B.classList.add(a),m.classList.add(a);const n=()=>{m.classList.remove(a,i),m.classList.add(Bp),B.classList.remove(Bp,i,a),this._isSliding=!1,A(_0)};this._queueCallback(n,B,this._isAnimated()),e&&this.cycle()}_isAnimated(){return this._element.classList.contains(y4)}_getActive(){return Oi.findOne(w4,this._element)}_getItems(){return Oi.find(Jx,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(fe){return Bu()?fe===Vh?Oh:Dv:fe===Vh?Dv:Oh}_orderToDirection(fe){return Bu()?fe===Oh?Vh:Qp:fe===Oh?Qp:Vh}static jQueryInterface(fe){return this.each(function(){const t=tp.getOrCreateInstance(this,fe);if(typeof fe=="number"){t.to(fe);return}if(typeof fe=="string"){if(t[fe]===void 0||fe.startsWith("_")||fe==="constructor")throw new TypeError(`No method named "${fe}"`);t[fe]()}})}}xa.on(document,g4,M4,function(ve){const fe=$c(this);if(!fe||!fe.classList.contains(jx))return;ve.preventDefault();const t=tp.getOrCreateInstance(fe),B=this.getAttribute("data-bs-slide-to");if(B){t.to(B),t._maybeEnableCycle();return}if(ef.getDataAttribute(this,"slide")==="next"){t.next(),t._maybeEnableCycle();return}t.prev(),t._maybeEnableCycle()});xa.on(window,d4,()=>{const ve=Oi.find(S4);for(const fe of ve)tp.getOrCreateInstance(fe)});Vu(tp);const L4="collapse",P4="bs.collapse",rp=`.${P4}`,D4=".data-api",R4=`show${rp}`,I4=`shown${rp}`,F4=`hide${rp}`,z4=`hidden${rp}`,N4=`click${rp}${D4}`,w0="show",Gh="collapse",Up="collapsing",O4="collapsed",B4=`:scope .${Gh} .${Gh}`,U4="collapse-horizontal",V4="width",H4="height",G4=".collapse.show, .collapse.collapsing",J0='[data-bs-toggle="collapse"]',Y4={parent:null,toggle:!0},W4={parent:"(null|element)",toggle:"boolean"};class Kv extends vc{constructor(fe,t){super(fe,t),this._isTransitioning=!1,this._triggerArray=[];const B=Oi.find(J0);for(const V of B){const m=Fx(V),c=Oi.find(m).filter(A=>A===this._element);m!==null&&c.length&&this._triggerArray.push(V)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Y4}static get DefaultType(){return W4}static get NAME(){return L4}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let fe=[];if(this._config.parent&&(fe=this._getFirstLevelChildren(G4).filter(A=>A!==this._element).map(A=>Kv.getOrCreateInstance(A,{toggle:!1}))),fe.length&&fe[0]._isTransitioning||xa.trigger(this._element,R4).defaultPrevented)return;for(const A of fe)A.hide();const B=this._getDimension();this._element.classList.remove(Gh),this._element.classList.add(Up),this._element.style[B]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const V=()=>{this._isTransitioning=!1,this._element.classList.remove(Up),this._element.classList.add(Gh,w0),this._element.style[B]="",xa.trigger(this._element,I4)},c=`scroll${B[0].toUpperCase()+B.slice(1)}`;this._queueCallback(V,this._element,!0),this._element.style[B]=`${this._element[c]}px`}hide(){if(this._isTransitioning||!this._isShown()||xa.trigger(this._element,F4).defaultPrevented)return;const t=this._getDimension();this._element.style[t]=`${this._element.getBoundingClientRect()[t]}px`,qv(this._element),this._element.classList.add(Up),this._element.classList.remove(Gh,w0);for(const V of this._triggerArray){const m=$c(V);m&&!this._isShown(m)&&this._addAriaAndCollapsedClass([V],!1)}this._isTransitioning=!0;const B=()=>{this._isTransitioning=!1,this._element.classList.remove(Up),this._element.classList.add(Gh),xa.trigger(this._element,z4)};this._element.style[t]="",this._queueCallback(B,this._element,!0)}_isShown(fe=this._element){return fe.classList.contains(w0)}_configAfterMerge(fe){return fe.toggle=Boolean(fe.toggle),fe.parent=kf(fe.parent),fe}_getDimension(){return this._element.classList.contains(U4)?V4:H4}_initializeChildren(){if(!this._config.parent)return;const fe=this._getFirstLevelChildren(J0);for(const t of fe){const B=$c(t);B&&this._addAriaAndCollapsedClass([t],this._isShown(B))}}_getFirstLevelChildren(fe){const t=Oi.find(B4,this._config.parent);return Oi.find(fe,this._config.parent).filter(B=>!t.includes(B))}_addAriaAndCollapsedClass(fe,t){if(!!fe.length)for(const B of fe)B.classList.toggle(O4,!t),B.setAttribute("aria-expanded",t)}static jQueryInterface(fe){const t={};return typeof fe=="string"&&/show|hide/.test(fe)&&(t.toggle=!1),this.each(function(){const B=Kv.getOrCreateInstance(this,t);if(typeof fe=="string"){if(typeof B[fe]>"u")throw new TypeError(`No method named "${fe}"`);B[fe]()}})}}xa.on(document,N4,J0,function(ve){(ve.target.tagName==="A"||ve.delegateTarget&&ve.delegateTarget.tagName==="A")&&ve.preventDefault();const fe=Fx(this),t=Oi.find(fe);for(const B of t)Kv.getOrCreateInstance(B,{toggle:!1}).toggle()});Vu(Kv);const Om="dropdown",X4="bs.dropdown",lh=`.${X4}`,Dg=".data-api",Z4="Escape",Bm="Tab",j4="ArrowUp",Um="ArrowDown",K4=2,J4=`hide${lh}`,Q4=`hidden${lh}`,$4=`show${lh}`,q4=`shown${lh}`,Qx=`click${lh}${Dg}`,$x=`keydown${lh}${Dg}`,eS=`keyup${lh}${Dg}`,Hh="show",tS="dropup",rS="dropend",nS="dropstart",aS="dropup-center",iS="dropdown-center",th='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',oS=`${th}.${Hh}`,$p=".dropdown-menu",sS=".navbar",lS=".navbar-nav",uS=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",cS=Bu()?"top-end":"top-start",fS=Bu()?"top-start":"top-end",hS=Bu()?"bottom-end":"bottom-start",vS=Bu()?"bottom-start":"bottom-end",pS=Bu()?"left-start":"right-start",dS=Bu()?"right-start":"left-start",gS="top",yS="bottom",mS={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},xS={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Oc extends vc{constructor(fe,t){super(fe,t),this._popper=null,this._parent=this._element.parentNode,this._menu=Oi.next(this._element,$p)[0]||Oi.prev(this._element,$p)[0]||Oi.findOne($p,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return mS}static get DefaultType(){return xS}static get NAME(){return Om}toggle(){return this._isShown()?this.hide():this.show()}show(){if(Lf(this._element)||this._isShown())return;const fe={relatedTarget:this._element};if(!xa.trigger(this._element,$4,fe).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(lS))for(const B of[].concat(...document.body.children))xa.on(B,"mouseover",sd);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Hh),this._element.classList.add(Hh),xa.trigger(this._element,q4,fe)}}hide(){if(Lf(this._element)||!this._isShown())return;const fe={relatedTarget:this._element};this._completeHide(fe)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(fe){if(!xa.trigger(this._element,J4,fe).defaultPrevented){if("ontouchstart"in document.documentElement)for(const B of[].concat(...document.body.children))xa.off(B,"mouseover",sd);this._popper&&this._popper.destroy(),this._menu.classList.remove(Hh),this._element.classList.remove(Hh),this._element.setAttribute("aria-expanded","false"),ef.removeDataAttribute(this._menu,"popper"),xa.trigger(this._element,Q4,fe)}}_getConfig(fe){if(fe=super._getConfig(fe),typeof fe.reference=="object"&&!qc(fe.reference)&&typeof fe.reference.getBoundingClientRect!="function")throw new TypeError(`${Om.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return fe}_createPopper(){if(typeof Rx>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let fe=this._element;this._config.reference==="parent"?fe=this._parent:qc(this._config.reference)?fe=kf(this._config.reference):typeof this._config.reference=="object"&&(fe=this._config.reference);const t=this._getPopperConfig();this._popper=kg(fe,this._menu,t)}_isShown(){return this._menu.classList.contains(Hh)}_getPlacement(){const fe=this._parent;if(fe.classList.contains(rS))return pS;if(fe.classList.contains(nS))return dS;if(fe.classList.contains(aS))return gS;if(fe.classList.contains(iS))return yS;const t=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return fe.classList.contains(tS)?t?fS:cS:t?vS:hS}_detectNavbar(){return this._element.closest(sS)!==null}_getOffset(){const{offset:fe}=this._config;return typeof fe=="string"?fe.split(",").map(t=>Number.parseInt(t,10)):typeof fe=="function"?t=>fe(t,this._element):fe}_getPopperConfig(){const fe={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(ef.setDataAttribute(this._menu,"popper","static"),fe.modifiers=[{name:"applyStyles",enabled:!1}]),{...fe,...typeof this._config.popperConfig=="function"?this._config.popperConfig(fe):this._config.popperConfig}}_selectMenuItem({key:fe,target:t}){const B=Oi.find(uS,this._menu).filter(V=>sv(V));!B.length||Lg(B,t,fe===Um,!B.includes(t)).focus()}static jQueryInterface(fe){return this.each(function(){const t=Oc.getOrCreateInstance(this,fe);if(typeof fe=="string"){if(typeof t[fe]>"u")throw new TypeError(`No method named "${fe}"`);t[fe]()}})}static clearMenus(fe){if(fe.button===K4||fe.type==="keyup"&&fe.key!==Bm)return;const t=Oi.find(oS);for(const B of t){const V=Oc.getInstance(B);if(!V||V._config.autoClose===!1)continue;const m=fe.composedPath(),c=m.includes(V._menu);if(m.includes(V._element)||V._config.autoClose==="inside"&&!c||V._config.autoClose==="outside"&&c||V._menu.contains(fe.target)&&(fe.type==="keyup"&&fe.key===Bm||/input|select|option|textarea|form/i.test(fe.target.tagName)))continue;const A={relatedTarget:V._element};fe.type==="click"&&(A.clickEvent=fe),V._completeHide(A)}}static dataApiKeydownHandler(fe){const t=/input|textarea/i.test(fe.target.tagName),B=fe.key===Z4,V=[j4,Um].includes(fe.key);if(!V&&!B||t&&!B)return;fe.preventDefault();const m=this.matches(th)?this:Oi.prev(this,th)[0]||Oi.next(this,th)[0]||Oi.findOne(th,fe.delegateTarget.parentNode),c=Oc.getOrCreateInstance(m);if(V){fe.stopPropagation(),c.show(),c._selectMenuItem(fe);return}c._isShown()&&(fe.stopPropagation(),c.hide(),m.focus())}}xa.on(document,$x,th,Oc.dataApiKeydownHandler);xa.on(document,$x,$p,Oc.dataApiKeydownHandler);xa.on(document,Qx,Oc.clearMenus);xa.on(document,eS,Oc.clearMenus);xa.on(document,Qx,th,function(ve){ve.preventDefault(),Oc.getOrCreateInstance(this).toggle()});Vu(Oc);const Vm=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Hm=".sticky-top",Vp="padding-right",Gm="margin-right";class Q0{constructor(){this._element=document.body}getWidth(){const fe=document.documentElement.clientWidth;return Math.abs(window.innerWidth-fe)}hide(){const fe=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Vp,t=>t+fe),this._setElementAttributes(Vm,Vp,t=>t+fe),this._setElementAttributes(Hm,Gm,t=>t-fe)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Vp),this._resetElementAttributes(Vm,Vp),this._resetElementAttributes(Hm,Gm)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(fe,t,B){const V=this.getWidth(),m=c=>{if(c!==this._element&&window.innerWidth>c.clientWidth+V)return;this._saveInitialAttribute(c,t);const A=window.getComputedStyle(c).getPropertyValue(t);c.style.setProperty(t,`${B(Number.parseFloat(A))}px`)};this._applyManipulationCallback(fe,m)}_saveInitialAttribute(fe,t){const B=fe.style.getPropertyValue(t);B&&ef.setDataAttribute(fe,t,B)}_resetElementAttributes(fe,t){const B=V=>{const m=ef.getDataAttribute(V,t);if(m===null){V.style.removeProperty(t);return}ef.removeDataAttribute(V,t),V.style.setProperty(t,m)};this._applyManipulationCallback(fe,B)}_applyManipulationCallback(fe,t){if(qc(fe)){t(fe);return}for(const B of Oi.find(fe,this._element))t(B)}}const qx="backdrop",bS="fade",Ym="show",Wm=`mousedown.bs.${qx}`,_S={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},wS={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class eb extends ep{constructor(fe){super(),this._config=this._getConfig(fe),this._isAppended=!1,this._element=null}static get Default(){return _S}static get DefaultType(){return wS}static get NAME(){return qx}show(fe){if(!this._config.isVisible){Jc(fe);return}this._append();const t=this._getElement();this._config.isAnimated&&qv(t),t.classList.add(Ym),this._emulateAnimation(()=>{Jc(fe)})}hide(fe){if(!this._config.isVisible){Jc(fe);return}this._getElement().classList.remove(Ym),this._emulateAnimation(()=>{this.dispose(),Jc(fe)})}dispose(){!this._isAppended||(xa.off(this._element,Wm),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const fe=document.createElement("div");fe.className=this._config.className,this._config.isAnimated&&fe.classList.add(bS),this._element=fe}return this._element}_configAfterMerge(fe){return fe.rootElement=kf(fe.rootElement),fe}_append(){if(this._isAppended)return;const fe=this._getElement();this._config.rootElement.append(fe),xa.on(fe,Wm,()=>{Jc(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(fe){Bx(fe,this._getElement(),this._config.isAnimated)}}const TS="focustrap",AS="bs.focustrap",ud=`.${AS}`,MS=`focusin${ud}`,SS=`keydown.tab${ud}`,ES="Tab",CS="forward",Xm="backward",kS={autofocus:!0,trapElement:null},LS={autofocus:"boolean",trapElement:"element"};class tb extends ep{constructor(fe){super(),this._config=this._getConfig(fe),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return kS}static get DefaultType(){return LS}static get NAME(){return TS}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),xa.off(document,ud),xa.on(document,MS,fe=>this._handleFocusin(fe)),xa.on(document,SS,fe=>this._handleKeydown(fe)),this._isActive=!0)}deactivate(){!this._isActive||(this._isActive=!1,xa.off(document,ud))}_handleFocusin(fe){const{trapElement:t}=this._config;if(fe.target===document||fe.target===t||t.contains(fe.target))return;const B=Oi.focusableChildren(t);B.length===0?t.focus():this._lastTabNavDirection===Xm?B[B.length-1].focus():B[0].focus()}_handleKeydown(fe){fe.key===ES&&(this._lastTabNavDirection=fe.shiftKey?Xm:CS)}}const PS="modal",DS="bs.modal",pc=`.${DS}`,RS=".data-api",IS="Escape",FS=`hide${pc}`,zS=`hidePrevented${pc}`,rb=`hidden${pc}`,nb=`show${pc}`,NS=`shown${pc}`,OS=`resize${pc}`,BS=`click.dismiss${pc}`,US=`mousedown.dismiss${pc}`,VS=`keydown.dismiss${pc}`,HS=`click${pc}${RS}`,Zm="modal-open",GS="fade",jm="show",T0="modal-static",YS=".modal.show",WS=".modal-dialog",XS=".modal-body",ZS='[data-bs-toggle="modal"]',jS={backdrop:!0,focus:!0,keyboard:!0},KS={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class tv extends vc{constructor(fe,t){super(fe,t),this._dialog=Oi.findOne(WS,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Q0,this._addEventListeners()}static get Default(){return jS}static get DefaultType(){return KS}static get NAME(){return PS}toggle(fe){return this._isShown?this.hide():this.show(fe)}show(fe){this._isShown||this._isTransitioning||xa.trigger(this._element,nb,{relatedTarget:fe}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Zm),this._adjustDialog(),this._backdrop.show(()=>this._showElement(fe)))}hide(){!this._isShown||this._isTransitioning||xa.trigger(this._element,FS).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(jm),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){for(const fe of[window,this._dialog])xa.off(fe,pc);this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new eb({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new tb({trapElement:this._element})}_showElement(fe){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const t=Oi.findOne(XS,this._dialog);t&&(t.scrollTop=0),qv(this._element),this._element.classList.add(jm);const B=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,xa.trigger(this._element,NS,{relatedTarget:fe})};this._queueCallback(B,this._dialog,this._isAnimated())}_addEventListeners(){xa.on(this._element,VS,fe=>{if(fe.key===IS){if(this._config.keyboard){fe.preventDefault(),this.hide();return}this._triggerBackdropTransition()}}),xa.on(window,OS,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),xa.on(this._element,US,fe=>{xa.one(this._element,BS,t=>{if(!(this._element!==fe.target||this._element!==t.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Zm),this._resetAdjustments(),this._scrollBar.reset(),xa.trigger(this._element,rb)})}_isAnimated(){return this._element.classList.contains(GS)}_triggerBackdropTransition(){if(xa.trigger(this._element,zS).defaultPrevented)return;const t=this._element.scrollHeight>document.documentElement.clientHeight,B=this._element.style.overflowY;B==="hidden"||this._element.classList.contains(T0)||(t||(this._element.style.overflowY="hidden"),this._element.classList.add(T0),this._queueCallback(()=>{this._element.classList.remove(T0),this._queueCallback(()=>{this._element.style.overflowY=B},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const fe=this._element.scrollHeight>document.documentElement.clientHeight,t=this._scrollBar.getWidth(),B=t>0;if(B&&!fe){const V=Bu()?"paddingLeft":"paddingRight";this._element.style[V]=`${t}px`}if(!B&&fe){const V=Bu()?"paddingRight":"paddingLeft";this._element.style[V]=`${t}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(fe,t){return this.each(function(){const B=tv.getOrCreateInstance(this,fe);if(typeof fe=="string"){if(typeof B[fe]>"u")throw new TypeError(`No method named "${fe}"`);B[fe](t)}})}}xa.on(document,HS,ZS,function(ve){const fe=$c(this);["A","AREA"].includes(this.tagName)&&ve.preventDefault(),xa.one(fe,nb,V=>{V.defaultPrevented||xa.one(fe,rb,()=>{sv(this)&&this.focus()})});const t=Oi.findOne(YS);t&&tv.getInstance(t).hide(),tv.getOrCreateInstance(fe).toggle(this)});Cd(tv);Vu(tv);const JS="offcanvas",QS="bs.offcanvas",af=`.${QS}`,ab=".data-api",$S=`load${af}${ab}`,qS="Escape",Km="show",Jm="showing",Qm="hiding",eE="offcanvas-backdrop",ib=".offcanvas.show",tE=`show${af}`,rE=`shown${af}`,nE=`hide${af}`,$m=`hidePrevented${af}`,ob=`hidden${af}`,aE=`resize${af}`,iE=`click${af}${ab}`,oE=`keydown.dismiss${af}`,sE='[data-bs-toggle="offcanvas"]',lE={backdrop:!0,keyboard:!0,scroll:!1},uE={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Pf extends vc{constructor(fe,t){super(fe,t),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return lE}static get DefaultType(){return uE}static get NAME(){return JS}toggle(fe){return this._isShown?this.hide():this.show(fe)}show(fe){if(this._isShown||xa.trigger(this._element,tE,{relatedTarget:fe}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new Q0().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Jm);const B=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(Km),this._element.classList.remove(Jm),xa.trigger(this._element,rE,{relatedTarget:fe})};this._queueCallback(B,this._element,!0)}hide(){if(!this._isShown||xa.trigger(this._element,nE).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Qm),this._backdrop.hide();const t=()=>{this._element.classList.remove(Km,Qm),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new Q0().reset(),xa.trigger(this._element,ob)};this._queueCallback(t,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const fe=()=>{if(this._config.backdrop==="static"){xa.trigger(this._element,$m);return}this.hide()},t=Boolean(this._config.backdrop);return new eb({className:eE,isVisible:t,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:t?fe:null})}_initializeFocusTrap(){return new tb({trapElement:this._element})}_addEventListeners(){xa.on(this._element,oE,fe=>{if(fe.key===qS){if(!this._config.keyboard){xa.trigger(this._element,$m);return}this.hide()}})}static jQueryInterface(fe){return this.each(function(){const t=Pf.getOrCreateInstance(this,fe);if(typeof fe=="string"){if(t[fe]===void 0||fe.startsWith("_")||fe==="constructor")throw new TypeError(`No method named "${fe}"`);t[fe](this)}})}}xa.on(document,iE,sE,function(ve){const fe=$c(this);if(["A","AREA"].includes(this.tagName)&&ve.preventDefault(),Lf(this))return;xa.one(fe,ob,()=>{sv(this)&&this.focus()});const t=Oi.findOne(ib);t&&t!==fe&&Pf.getInstance(t).hide(),Pf.getOrCreateInstance(fe).toggle(this)});xa.on(window,$S,()=>{for(const ve of Oi.find(ib))Pf.getOrCreateInstance(ve).show()});xa.on(window,aE,()=>{for(const ve of Oi.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(ve).position!=="fixed"&&Pf.getOrCreateInstance(ve).hide()});Cd(Pf);Vu(Pf);const cE=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),fE=/^aria-[\w-]*$/i,hE=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,vE=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,pE=(ve,fe)=>{const t=ve.nodeName.toLowerCase();return fe.includes(t)?cE.has(t)?Boolean(hE.test(ve.nodeValue)||vE.test(ve.nodeValue)):!0:fe.filter(B=>B instanceof RegExp).some(B=>B.test(t))},sb={"*":["class","dir","id","lang","role",fE],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]};function dE(ve,fe,t){if(!ve.length)return ve;if(t&&typeof t=="function")return t(ve);const V=new window.DOMParser().parseFromString(ve,"text/html"),m=[].concat(...V.body.querySelectorAll("*"));for(const c of m){const A=c.nodeName.toLowerCase();if(!Object.keys(fe).includes(A)){c.remove();continue}const T=[].concat(...c.attributes),e=[].concat(fe["*"]||[],fe[A]||[]);for(const a of T)pE(a,e)||c.removeAttribute(a.nodeName)}return V.body.innerHTML}const gE="TemplateFactory",yE={allowList:sb,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},mE={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},xE={entry:"(string|element|function|null)",selector:"(string|element)"};class bE extends ep{constructor(fe){super(),this._config=this._getConfig(fe)}static get Default(){return yE}static get DefaultType(){return mE}static get NAME(){return gE}getContent(){return Object.values(this._config.content).map(fe=>this._resolvePossibleFunction(fe)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(fe){return this._checkContent(fe),this._config.content={...this._config.content,...fe},this}toHtml(){const fe=document.createElement("div");fe.innerHTML=this._maybeSanitize(this._config.template);for(const[V,m]of Object.entries(this._config.content))this._setContent(fe,m,V);const t=fe.children[0],B=this._resolvePossibleFunction(this._config.extraClass);return B&&t.classList.add(...B.split(" ")),t}_typeCheckConfig(fe){super._typeCheckConfig(fe),this._checkContent(fe.content)}_checkContent(fe){for(const[t,B]of Object.entries(fe))super._typeCheckConfig({selector:t,entry:B},xE)}_setContent(fe,t,B){const V=Oi.findOne(B,fe);if(!!V){if(t=this._resolvePossibleFunction(t),!t){V.remove();return}if(qc(t)){this._putElementInTemplate(kf(t),V);return}if(this._config.html){V.innerHTML=this._maybeSanitize(t);return}V.textContent=t}}_maybeSanitize(fe){return this._config.sanitize?dE(fe,this._config.allowList,this._config.sanitizeFn):fe}_resolvePossibleFunction(fe){return typeof fe=="function"?fe(this):fe}_putElementInTemplate(fe,t){if(this._config.html){t.innerHTML="",t.append(fe);return}t.textContent=fe.textContent}}const _E="tooltip",wE=new Set(["sanitize","allowList","sanitizeFn"]),A0="fade",TE="modal",Hp="show",AE=".tooltip-inner",qm=`.${TE}`,e1="hide.bs.modal",Rv="hover",M0="focus",ME="click",SE="manual",EE="hide",CE="hidden",kE="show",LE="shown",PE="inserted",DE="click",RE="focusin",IE="focusout",FE="mouseenter",zE="mouseleave",NE={AUTO:"auto",TOP:"top",RIGHT:Bu()?"left":"right",BOTTOM:"bottom",LEFT:Bu()?"right":"left"},OE={allowList:sb,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,0],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},BE={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class uv extends vc{constructor(fe,t){if(typeof Rx>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(fe,t),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return OE}static get DefaultType(){return BE}static get NAME(){return _E}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(!!this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),xa.off(this._element.closest(qm),e1,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const fe=xa.trigger(this._element,this.constructor.eventName(kE)),B=(Nx(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(fe.defaultPrevented||!B)return;this._disposePopper();const V=this._getTipElement();this._element.setAttribute("aria-describedby",V.getAttribute("id"));const{container:m}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(m.append(V),xa.trigger(this._element,this.constructor.eventName(PE))),this._popper=this._createPopper(V),V.classList.add(Hp),"ontouchstart"in document.documentElement)for(const A of[].concat(...document.body.children))xa.on(A,"mouseover",sd);const c=()=>{xa.trigger(this._element,this.constructor.eventName(LE)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(c,this.tip,this._isAnimated())}hide(){if(!this._isShown()||xa.trigger(this._element,this.constructor.eventName(EE)).defaultPrevented)return;if(this._getTipElement().classList.remove(Hp),"ontouchstart"in document.documentElement)for(const V of[].concat(...document.body.children))xa.off(V,"mouseover",sd);this._activeTrigger[ME]=!1,this._activeTrigger[M0]=!1,this._activeTrigger[Rv]=!1,this._isHovered=null;const B=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),xa.trigger(this._element,this.constructor.eventName(CE)))};this._queueCallback(B,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(fe){const t=this._getTemplateFactory(fe).toHtml();if(!t)return null;t.classList.remove(A0,Hp),t.classList.add(`bs-${this.constructor.NAME}-auto`);const B=AM(this.constructor.NAME).toString();return t.setAttribute("id",B),this._isAnimated()&&t.classList.add(A0),t}setContent(fe){this._newContent=fe,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(fe){return this._templateFactory?this._templateFactory.changeContent(fe):this._templateFactory=new bE({...this._config,content:fe,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[AE]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(fe){return this.constructor.getOrCreateInstance(fe.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(A0)}_isShown(){return this.tip&&this.tip.classList.contains(Hp)}_createPopper(fe){const t=typeof this._config.placement=="function"?this._config.placement.call(this,fe,this._element):this._config.placement,B=NE[t.toUpperCase()];return kg(this._element,fe,this._getPopperConfig(B))}_getOffset(){const{offset:fe}=this._config;return typeof fe=="string"?fe.split(",").map(t=>Number.parseInt(t,10)):typeof fe=="function"?t=>fe(t,this._element):fe}_resolvePossibleFunction(fe){return typeof fe=="function"?fe.call(this._element):fe}_getPopperConfig(fe){const t={placement:fe,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:B=>{this._getTipElement().setAttribute("data-popper-placement",B.state.placement)}}]};return{...t,...typeof this._config.popperConfig=="function"?this._config.popperConfig(t):this._config.popperConfig}}_setListeners(){const fe=this._config.trigger.split(" ");for(const t of fe)if(t==="click")xa.on(this._element,this.constructor.eventName(DE),this._config.selector,B=>{this._initializeOnDelegatedTarget(B).toggle()});else if(t!==SE){const B=t===Rv?this.constructor.eventName(FE):this.constructor.eventName(RE),V=t===Rv?this.constructor.eventName(zE):this.constructor.eventName(IE);xa.on(this._element,B,this._config.selector,m=>{const c=this._initializeOnDelegatedTarget(m);c._activeTrigger[m.type==="focusin"?M0:Rv]=!0,c._enter()}),xa.on(this._element,V,this._config.selector,m=>{const c=this._initializeOnDelegatedTarget(m);c._activeTrigger[m.type==="focusout"?M0:Rv]=c._element.contains(m.relatedTarget),c._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},xa.on(this._element.closest(qm),e1,this._hideModalHandler)}_fixTitle(){const fe=this._element.getAttribute("title");!fe||(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",fe),this._element.setAttribute("data-bs-original-title",fe),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(fe,t){clearTimeout(this._timeout),this._timeout=setTimeout(fe,t)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(fe){const t=ef.getDataAttributes(this._element);for(const B of Object.keys(t))wE.has(B)&&delete t[B];return fe={...t,...typeof fe=="object"&&fe?fe:{}},fe=this._mergeConfigObj(fe),fe=this._configAfterMerge(fe),this._typeCheckConfig(fe),fe}_configAfterMerge(fe){return fe.container=fe.container===!1?document.body:kf(fe.container),typeof fe.delay=="number"&&(fe.delay={show:fe.delay,hide:fe.delay}),typeof fe.title=="number"&&(fe.title=fe.title.toString()),typeof fe.content=="number"&&(fe.content=fe.content.toString()),fe}_getDelegateConfig(){const fe={};for(const t in this._config)this.constructor.Default[t]!==this._config[t]&&(fe[t]=this._config[t]);return fe.selector=!1,fe.trigger="manual",fe}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(fe){return this.each(function(){const t=uv.getOrCreateInstance(this,fe);if(typeof fe=="string"){if(typeof t[fe]>"u")throw new TypeError(`No method named "${fe}"`);t[fe]()}})}}Vu(uv);const UE="popover",VE=".popover-header",HE=".popover-body",GE={...uv.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},YE={...uv.DefaultType,content:"(null|string|element|function)"};class Rg extends uv{static get Default(){return GE}static get DefaultType(){return YE}static get NAME(){return UE}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[VE]:this._getTitle(),[HE]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(fe){return this.each(function(){const t=Rg.getOrCreateInstance(this,fe);if(typeof fe=="string"){if(typeof t[fe]>"u")throw new TypeError(`No method named "${fe}"`);t[fe]()}})}}Vu(Rg);const WE="scrollspy",XE="bs.scrollspy",Ig=`.${XE}`,ZE=".data-api",jE=`activate${Ig}`,t1=`click${Ig}`,KE=`load${Ig}${ZE}`,JE="dropdown-item",Bh="active",QE='[data-bs-spy="scroll"]',S0="[href]",$E=".nav, .list-group",r1=".nav-link",qE=".nav-item",eC=".list-group-item",tC=`${r1}, ${qE} > ${r1}, ${eC}`,rC=".dropdown",nC=".dropdown-toggle",aC={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},iC={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Pd extends vc{constructor(fe,t){super(fe,t),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return aC}static get DefaultType(){return iC}static get NAME(){return WE}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const fe of this._observableSections.values())this._observer.observe(fe)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(fe){return fe.target=kf(fe.target)||document.body,fe.rootMargin=fe.offset?`${fe.offset}px 0px -30%`:fe.rootMargin,typeof fe.threshold=="string"&&(fe.threshold=fe.threshold.split(",").map(t=>Number.parseFloat(t))),fe}_maybeEnableSmoothScroll(){!this._config.smoothScroll||(xa.off(this._config.target,t1),xa.on(this._config.target,t1,S0,fe=>{const t=this._observableSections.get(fe.target.hash);if(t){fe.preventDefault();const B=this._rootElement||window,V=t.offsetTop-this._element.offsetTop;if(B.scrollTo){B.scrollTo({top:V,behavior:"smooth"});return}B.scrollTop=V}}))}_getNewObserver(){const fe={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(t=>this._observerCallback(t),fe)}_observerCallback(fe){const t=c=>this._targetLinks.get(`#${c.target.id}`),B=c=>{this._previousScrollData.visibleEntryTop=c.target.offsetTop,this._process(t(c))},V=(this._rootElement||document.documentElement).scrollTop,m=V>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=V;for(const c of fe){if(!c.isIntersecting){this._activeTarget=null,this._clearActiveClass(t(c));continue}const A=c.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(m&&A){if(B(c),!V)return;continue}!m&&!A&&B(c)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const fe=Oi.find(S0,this._config.target);for(const t of fe){if(!t.hash||Lf(t))continue;const B=Oi.findOne(t.hash,this._element);sv(B)&&(this._targetLinks.set(t.hash,t),this._observableSections.set(t.hash,B))}}_process(fe){this._activeTarget!==fe&&(this._clearActiveClass(this._config.target),this._activeTarget=fe,fe.classList.add(Bh),this._activateParents(fe),xa.trigger(this._element,jE,{relatedTarget:fe}))}_activateParents(fe){if(fe.classList.contains(JE)){Oi.findOne(nC,fe.closest(rC)).classList.add(Bh);return}for(const t of Oi.parents(fe,$E))for(const B of Oi.prev(t,tC))B.classList.add(Bh)}_clearActiveClass(fe){fe.classList.remove(Bh);const t=Oi.find(`${S0}.${Bh}`,fe);for(const B of t)B.classList.remove(Bh)}static jQueryInterface(fe){return this.each(function(){const t=Pd.getOrCreateInstance(this,fe);if(typeof fe=="string"){if(t[fe]===void 0||fe.startsWith("_")||fe==="constructor")throw new TypeError(`No method named "${fe}"`);t[fe]()}})}}xa.on(window,KE,()=>{for(const ve of Oi.find(QE))Pd.getOrCreateInstance(ve)});Vu(Pd);const oC="tab",sC="bs.tab",uh=`.${sC}`,lC=`hide${uh}`,uC=`hidden${uh}`,cC=`show${uh}`,fC=`shown${uh}`,hC=`click${uh}`,vC=`keydown${uh}`,pC=`load${uh}`,dC="ArrowLeft",n1="ArrowRight",gC="ArrowUp",a1="ArrowDown",rh="active",i1="fade",E0="show",yC="dropdown",mC=".dropdown-toggle",xC=".dropdown-menu",C0=":not(.dropdown-toggle)",bC='.list-group, .nav, [role="tablist"]',_C=".nav-item, .list-group-item",wC=`.nav-link${C0}, .list-group-item${C0}, [role="tab"]${C0}`,lb='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',k0=`${wC}, ${lb}`,TC=`.${rh}[data-bs-toggle="tab"], .${rh}[data-bs-toggle="pill"], .${rh}[data-bs-toggle="list"]`;class rv extends vc{constructor(fe){super(fe),this._parent=this._element.closest(bC),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),xa.on(this._element,vC,t=>this._keydown(t)))}static get NAME(){return oC}show(){const fe=this._element;if(this._elemIsActive(fe))return;const t=this._getActiveElem(),B=t?xa.trigger(t,lC,{relatedTarget:fe}):null;xa.trigger(fe,cC,{relatedTarget:t}).defaultPrevented||B&&B.defaultPrevented||(this._deactivate(t,fe),this._activate(fe,t))}_activate(fe,t){if(!fe)return;fe.classList.add(rh),this._activate($c(fe));const B=()=>{if(fe.getAttribute("role")!=="tab"){fe.classList.add(E0);return}fe.removeAttribute("tabindex"),fe.setAttribute("aria-selected",!0),this._toggleDropDown(fe,!0),xa.trigger(fe,fC,{relatedTarget:t})};this._queueCallback(B,fe,fe.classList.contains(i1))}_deactivate(fe,t){if(!fe)return;fe.classList.remove(rh),fe.blur(),this._deactivate($c(fe));const B=()=>{if(fe.getAttribute("role")!=="tab"){fe.classList.remove(E0);return}fe.setAttribute("aria-selected",!1),fe.setAttribute("tabindex","-1"),this._toggleDropDown(fe,!1),xa.trigger(fe,uC,{relatedTarget:t})};this._queueCallback(B,fe,fe.classList.contains(i1))}_keydown(fe){if(![dC,n1,gC,a1].includes(fe.key))return;fe.stopPropagation(),fe.preventDefault();const t=[n1,a1].includes(fe.key),B=Lg(this._getChildren().filter(V=>!Lf(V)),fe.target,t,!0);B&&(B.focus({preventScroll:!0}),rv.getOrCreateInstance(B).show())}_getChildren(){return Oi.find(k0,this._parent)}_getActiveElem(){return this._getChildren().find(fe=>this._elemIsActive(fe))||null}_setInitialAttributes(fe,t){this._setAttributeIfNotExists(fe,"role","tablist");for(const B of t)this._setInitialAttributesOnChild(B)}_setInitialAttributesOnChild(fe){fe=this._getInnerElement(fe);const t=this._elemIsActive(fe),B=this._getOuterElement(fe);fe.setAttribute("aria-selected",t),B!==fe&&this._setAttributeIfNotExists(B,"role","presentation"),t||fe.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(fe,"role","tab"),this._setInitialAttributesOnTargetPanel(fe)}_setInitialAttributesOnTargetPanel(fe){const t=$c(fe);!t||(this._setAttributeIfNotExists(t,"role","tabpanel"),fe.id&&this._setAttributeIfNotExists(t,"aria-labelledby",`#${fe.id}`))}_toggleDropDown(fe,t){const B=this._getOuterElement(fe);if(!B.classList.contains(yC))return;const V=(m,c)=>{const A=Oi.findOne(m,B);A&&A.classList.toggle(c,t)};V(mC,rh),V(xC,E0),B.setAttribute("aria-expanded",t)}_setAttributeIfNotExists(fe,t,B){fe.hasAttribute(t)||fe.setAttribute(t,B)}_elemIsActive(fe){return fe.classList.contains(rh)}_getInnerElement(fe){return fe.matches(k0)?fe:Oi.findOne(k0,fe)}_getOuterElement(fe){return fe.closest(_C)||fe}static jQueryInterface(fe){return this.each(function(){const t=rv.getOrCreateInstance(this);if(typeof fe=="string"){if(t[fe]===void 0||fe.startsWith("_")||fe==="constructor")throw new TypeError(`No method named "${fe}"`);t[fe]()}})}}xa.on(document,hC,lb,function(ve){["A","AREA"].includes(this.tagName)&&ve.preventDefault(),!Lf(this)&&rv.getOrCreateInstance(this).show()});xa.on(window,pC,()=>{for(const ve of Oi.find(TC))rv.getOrCreateInstance(ve)});Vu(rv);const AC="toast",MC="bs.toast",If=`.${MC}`,SC=`mouseover${If}`,EC=`mouseout${If}`,CC=`focusin${If}`,kC=`focusout${If}`,LC=`hide${If}`,PC=`hidden${If}`,DC=`show${If}`,RC=`shown${If}`,IC="fade",o1="hide",Gp="show",Yp="showing",FC={animation:"boolean",autohide:"boolean",delay:"number"},zC={animation:!0,autohide:!0,delay:5e3};class Dd extends vc{constructor(fe,t){super(fe,t),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return zC}static get DefaultType(){return FC}static get NAME(){return AC}show(){if(xa.trigger(this._element,DC).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(IC);const t=()=>{this._element.classList.remove(Yp),xa.trigger(this._element,RC),this._maybeScheduleHide()};this._element.classList.remove(o1),qv(this._element),this._element.classList.add(Gp,Yp),this._queueCallback(t,this._element,this._config.animation)}hide(){if(!this.isShown()||xa.trigger(this._element,LC).defaultPrevented)return;const t=()=>{this._element.classList.add(o1),this._element.classList.remove(Yp,Gp),xa.trigger(this._element,PC)};this._element.classList.add(Yp),this._queueCallback(t,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Gp),super.dispose()}isShown(){return this._element.classList.contains(Gp)}_maybeScheduleHide(){!this._config.autohide||this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay))}_onInteraction(fe,t){switch(fe.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=t;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=t;break}}if(t){this._clearTimeout();return}const B=fe.relatedTarget;this._element===B||this._element.contains(B)||this._maybeScheduleHide()}_setListeners(){xa.on(this._element,SC,fe=>this._onInteraction(fe,!0)),xa.on(this._element,EC,fe=>this._onInteraction(fe,!1)),xa.on(this._element,CC,fe=>this._onInteraction(fe,!0)),xa.on(this._element,kC,fe=>this._onInteraction(fe,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(fe){return this.each(function(){const t=Dd.getOrCreateInstance(this,fe);if(typeof fe=="string"){if(typeof t[fe]>"u")throw new TypeError(`No method named "${fe}"`);t[fe](this)}})}}Cd(Dd);Vu(Dd);const ub=IT(IA);ub.use(NT());ub.mount("#app");
